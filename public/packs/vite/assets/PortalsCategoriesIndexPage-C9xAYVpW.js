import{c as d,I as z,a as f,o as c,l as b,p as A,i as V,t as I,H as p,n as x,e as P,g as Q,q as W,F as Y,j as $,r as O,N as J}from"./_plugin-vue_export-helper-BK9LWihk.js";import{u as M,a as K}from"./Validators-U_Z_leEu.js";import{c as F,u as X,b as k}from"./index-b3F7WOf6.js";import{r as Z,c as ee,s as te,e as se,t as ae,l as ie}from"./dashboard-CG5kupEZ.js";import{u as B}from"./globalConfig-DNoPylIh.js";import{u as D,a as H}from"./index-CGswmpo8.js";import{am as j}from"./DashboardIcon-Pzi2HKUO.js";import{_ as oe}from"./HelpCenterLayout-DUXvrdEn.js";import{_ as ne,B as ce}from"./typing-DLDGfuj7.js";import{C as le,_ as re}from"./CategoryHeaderControls-CIaFLeKc.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BtuGy7By.js";import"./exports-C7nQ38Rb.js";import"./useKeyboardNavigableList-Yx0rleq4.js";import"./helper-Dcp_UZ_y.js";import"./utils.esm-B9vk9JJa.js";import"./Thumbnail-CUjAwC9K.js";import"./module-DBoux_do.js";import"./Icon-3PNIKml4.js";import"./useMessageFormatter-BWcWDZNI.js";import"./BarChart-BoGmHJfn.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-BEPMhpqZ.js";import"./vue-dompurify-html-DajrD5x3.js";import"./js.cookie-Cz0CWeBA.js";const ue={class:"flex w-full gap-2"},de={class:"flex justify-between w-full gap-2"},pe={class:"flex items-center justify-start w-full min-w-0 gap-2"},me={class:"inline-flex items-center justify-center h-6 px-2 py-1 text-xs text-center border rounded-lg bg-n-slate-1 whitespace-nowrap shrink-0 text-n-slate-11 border-n-slate-4"},ge={class:"relative group"},N={__name:"CategoryCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},icon:{type:String,required:!0},description:{type:String,required:!0},articlesCount:{type:Number,required:!0},slug:{type:String,required:!0}},emits:["click","action"],setup(o,{emit:_}){const a=o,e=_,{t:m}=B(),[r,g]=Z(),t=[{label:"Edit",action:"edit",value:"edit",icon:"i-lucide-pencil"},{label:"Delete",action:"delete",value:"delete",icon:"i-lucide-trash"}],n=d(()=>`${a.icon} ${a.title}`),E=d(()=>a.description?a.description:"No description added"),S=d(()=>a.description.length>0),v=u=>{e("click",u)},l=({action:u,value:y})=>{e("action",{action:u,value:y,id:a.id}),g(!1)};return(u,y)=>{const i=z("on-clickaway");return c(),f(te,null,{default:b(()=>[A("div",ue,[A("div",de,[A("div",pe,[A("span",{class:"text-base truncate cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12",onClick:y[0]||(y[0]=C=>v(o.slug))},I(n.value),1),A("span",me,I(p(m)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_CARD.ARTICLES_COUNT",{count:o.articlesCount})),1)]),V((c(),x("div",ge,[P(ne,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",variant:"ghost",class:"rounded-md group-hover:bg-n-alpha-2",onClick:y[1]||(y[1]=C=>p(g)())}),p(r)?(c(),f(ee,{key:0,"menu-items":t,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full z-60",onAction:l})):Q("",!0)])),[[i,()=>p(g)(!1)]])])]),A("span",{class:W(["text-sm line-clamp-3",S.value?"text-slate-500 dark:text-slate-400":"text-slate-400 dark:text-slate-700"])},I(E.value),3)]),_:1})}}},_e={role:"list",class:"grid w-full h-full grid-cols-1 gap-4 md:grid-cols-2"},fe={__name:"CategoryList",props:{categories:{type:Array,required:!0}},emits:["click","action"],setup(o,{emit:_}){const a=_,e=r=>{a("click",r)},m=({action:r,value:g,id:t},n)=>{a("action",{action:r,value:g,id:t,category:n})};return(r,g)=>(c(),x("ul",_e,[(c(!0),x(Y,null,$(o.categories,t=>(c(),f(N,{id:t.id,key:t.id,title:t.name,icon:t.icon,description:t.description,"articles-count":t.meta.articles_count||0,slug:t.slug,onClick:n=>e(t.slug),onAction:n=>m(n,t)},null,8,["id","title","icon","description","articles-count","slug","onClick","onAction"]))),128))]))}},q=[{id:1,name:"Getting Started",icon:"🚀",description:"Quick guides to help new users onboard.",slug:"getting-started",meta:{articles_count:5}},{id:2,name:"Advanced Features",icon:"💡",description:"Explore advanced features for power users.",slug:"advanced-features",meta:{articles_count:8}},{id:3,name:"FAQs",icon:"❓",description:"Commonly asked questions and helpful answers.",slug:"faqs",meta:{articles_count:3}},{id:4,name:"Troubleshooting",icon:"🛠️",description:"Resolve common issues with step-by-step guidance.",slug:"troubleshooting",meta:{articles_count:6}},{id:5,name:"Community Guidelines",icon:"👥",description:"Rules and practices for community engagement.",slug:"community-guidelines",meta:{articles_count:2}},{id:6,name:"Account Management",icon:"🔑",description:"Manage your account and settings efficiently.",slug:"account-management",meta:{articles_count:7}},{id:7,name:"Security Tips",icon:"🔒",description:"Best practices for securing your account.",slug:"security-tips",meta:{articles_count:4}},{id:8,name:"Integrations",icon:"🔗",description:"Connect to third-party services and tools easily.",slug:"integrations",meta:{articles_count:9}},{id:9,name:"Billing & Payments",icon:"💳",description:"Manage your billing and payment details seamlessly.",slug:"billing-payments",meta:{articles_count:5}},{id:10,name:"Customization",icon:"🎨",description:"Personalize and customize your user experience.",slug:"customization",meta:{articles_count:7}},{id:11,name:"Notifications",icon:"🔔",description:"Adjust your notification settings and preferences.",slug:"notifications",meta:{articles_count:3}},{id:12,name:"Privacy",icon:"🛡️",description:"Understand how your data is collected and used.",slug:"privacy",meta:{articles_count:2}},{id:13,name:"Mobile App",icon:"📱",description:"Guides for using the mobile app effectively.",slug:"mobile-app",meta:{articles_count:6}},{id:14,name:"Beta Features",icon:"🧪",description:"Learn about new experimental features in beta.",slug:"beta-features",meta:{articles_count:4}}],Ee={class:"grid grid-cols-2 gap-4 p-px"},ye={class:"space-y-4"},Ce={class:"space-y-4"},he={__name:"CategoryEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(o){return(_,a)=>(c(),f(se,{title:o.title,subtitle:o.subtitle},{"empty-state-item":b(()=>[A("div",Ee,[A("div",ye,[(c(!0),x(Y,null,$(p(q),e=>(c(),f(N,{id:e.id,key:e.id,title:e.name,icon:e.icon,description:e.description,"articles-count":e.meta.articles_count||0,slug:e.slug},null,8,["id","title","icon","description","articles-count","slug"]))),128))]),A("div",Ce,[(c(!0),x(Y,null,$(p(q).reverse(),e=>(c(),f(N,{id:e.id,key:e.id,title:e.name,icon:e.icon,description:e.description,"articles-count":e.meta.articles_count||0,slug:e.slug},null,8,["id","title","icon","description","articles-count","slug"]))),128))])])]),_:1},8,["title","subtitle"]))}},Ae={__name:"EditCategoryDialog",props:{selectedCategory:{type:Object,default:()=>({})},allowedLocales:{type:Array,default:()=>[]}},setup(o,{expose:_}){const a=o,{t:e}=B(),m=F(),r=M(),g=X(),t=O(null),n=O(null),E=d(()=>{var C,w;const i=(C=a.selectedCategory)==null?void 0:C.id;return i?(w=g["categories/uiFlags"].value(i))==null?void 0:w.isUpdating:!1}),S=d(()=>{if(!n.value)return!1;const{isSubmitDisabled:i}=n.value;return i}),v=d(()=>a.allowedLocales.find(i=>i.code===r.params.locale)),l=d(()=>{var i;return((i=v.value)==null?void 0:i.name)??""}),u=d(()=>{var i;return((i=v.value)==null?void 0:i.code)??""}),y=async()=>{if(!n.value)return;const{state:i}=n.value,{id:C,name:w,slug:s,icon:h,description:T}=i,G={name:w,icon:h,slug:s,description:T};G.id=C;try{const R={portalSlug:r.params.portalSlug,categoryObj:G,categoryId:C};await m.dispatch("categories/update",R);const L=e("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.EDIT.API.SUCCESS_MESSAGE");D(L),t.value.close();const U=j.EDIT_CATEGORY;H(U,{hasDescription:!!T})}catch(R){const L=(R==null?void 0:R.message)||e("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.EDIT.API.ERROR_MESSAGE");D(L)}};return _({dialogRef:t}),(i,C)=>(c(),f(ae,{ref_key:"dialogRef",ref:t,type:"edit",title:p(e)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.EDIT"),description:p(e)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.DESCRIPTION"),"is-loading":E.value,"disable-confirm-button":E.value||S.value,onConfirm:y},{default:b(()=>[P(le,{ref_key:"categoryFormRef",ref:n,mode:"edit","selected-category":o.selectedCategory,"active-locale-code":u.value,"portal-name":p(r).params.portalSlug,"active-locale-name":l.value,"show-action-buttons":!1},null,8,["selected-category","active-locale-code","portal-name","active-locale-name"])]),_:1},8,["title","description","is-loading","disable-confirm-button"]))}},ve={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},Te={__name:"CategoriesPage",props:{categories:{type:Array,required:!0},isFetching:{type:Boolean,required:!1},allowedLocales:{type:Array,required:!0}},emits:["fetchCategories"],setup(o,{emit:_}){const a=o,e=_,m=M(),r=K(),g=F(),{t}=B(),n=O(null),E=O(null),S=k("portals/isSwitchingPortal"),v=d(()=>a.isFetching||S.value),l=d(()=>{var s;return((s=a.categories)==null?void 0:s.length)>0}),u=(s,h)=>{const{accountId:T,portalSlug:G,locale:R}=m.params,L={accountId:T,portalSlug:G,locale:R};r.push({name:h,params:{...L,...s,categorySlug:s.categorySlug}})},y=s=>{u({categorySlug:s},"portals_categories_articles_index")},i=s=>{u({locale:s},"portals_categories_index"),e("fetchCategories",s)};async function C(s){var h;try{await g.dispatch("categories/delete",{portalSlug:m.params.portalSlug,categoryId:s.id}),H(j.DELETE_CATEGORY,{hasArticles:((h=s==null?void 0:s.meta)==null?void 0:h.articles_count)>0}),D(t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.DELETE.API.SUCCESS_MESSAGE"))}catch(T){D(T.message||t("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.DELETE.API.ERROR_MESSAGE"))}}const w=({action:s,id:h,category:T})=>{s==="edit"&&(E.value=a.categories.find(G=>G.id===h),n.value.dialogRef.open()),s==="delete"&&C(T)};return(s,h)=>(c(),f(oe,{"show-pagination-footer":!1},{"header-actions":b(()=>[P(re,{categories:o.categories,"is-category-articles":!1,"allowed-locales":o.allowedLocales,onLocaleChange:i},null,8,["categories","allowed-locales"])]),content:b(()=>[v.value?(c(),x("div",ve,[P(ce)])):l.value?(c(),f(fe,{key:1,categories:o.categories,onClick:y,onAction:w},null,8,["categories"])):(c(),f(he,{key:2,class:"pt-14",title:p(t)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_EMPTY_STATE.TITLE"),subtitle:p(t)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_EMPTY_STATE.SUBTITLE")},null,8,["title","subtitle"]))]),default:b(()=>[P(Ae,{ref_key:"editCategoryDialog",ref:n,"allowed-locales":o.allowedLocales,"selected-category":E.value},null,8,["allowed-locales","selected-category"])]),_:1}))}},Je={__name:"PortalsCategoriesIndexPage",setup(o){const _=F(),a=M(),e=k("categories/allCategories"),m=d(()=>a.params.portalSlug),r=k("portals/portalBySlug"),g=k("categories/isFetching"),t=d(()=>r.value(m.value)),n=d(()=>{if(!t.value)return[];const{allowed_locales:l}=t.value.config;return l.map(u=>({id:u.code,name:ie[u.code],code:u.code}))}),E=async l=>{await _.dispatch("categories/index",{portalSlug:m.value,locale:l})},S=async l=>_.dispatch("portals/show",{portalSlug:m.value,locale:l}),v=async l=>{await E(l),await S(l)};return J(()=>{E(a.params.locale)}),(l,u)=>(c(),f(Te,{categories:p(e),"is-fetching":p(g),"allowed-locales":n.value,onFetchCategories:v},null,8,["categories","is-fetching","allowed-locales"]))}};export{Je as default};
