const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiInput-C1k9EJvN.js","assets/typing-DLDGfuj7.js","assets/_plugin-vue_export-helper-BK9LWihk.js","assets/Validators-U_Z_leEu.js","assets/index-DN3rM4CW.js","assets/index-b3F7WOf6.js","assets/_commonjsHelpers-BosuxZz1.js","assets/useMessageFormatter-BWcWDZNI.js","assets/utils.esm-B9vk9JJa.js","assets/exports-C7nQ38Rb.js","assets/module-DBoux_do.js","assets/Icon-3PNIKml4.js","assets/EmojiInput-B13qPfWr.css","assets/PortalsArticlesIndexPage-PlnSWY7Q.js","assets/globalConfig-DNoPylIh.js","assets/globalConfig-DJ-p7H5Q.css","assets/HelpCenterLayout-DUXvrdEn.js","assets/index-CGswmpo8.js","assets/DashboardIcon-Pzi2HKUO.js","assets/js.cookie-Cz0CWeBA.js","assets/index-BtuGy7By.js","assets/CategoryHeaderControls-CIaFLeKc.js","assets/CategoryHeaderControls-BCvguDJi.css","assets/useKeyboardNavigableList-Yx0rleq4.js","assets/helper-Dcp_UZ_y.js","assets/Thumbnail-CUjAwC9K.js","assets/Thumbnail-uk0cU3Bq.css","assets/BarChart-BoGmHJfn.js","assets/constants-lVAyZKq6.js","assets/IframeLoader-BEPMhpqZ.js","assets/vue-dompurify-html-DajrD5x3.js","assets/PortalsArticlesIndexPage-Dz6Zpu1T.css","assets/PortalsArticlesNewPage-CyWrKSUj.js","assets/ArticleEditor-D83rZLZW.js","assets/ArticleEditor-Dw4Q6hi6.css","assets/PortalsArticlesEditPage-aUQJWgue.js","assets/PortalsCategoriesIndexPage-C9xAYVpW.js","assets/PortalsLocalesIndexPage-r8uv-tWe.js","assets/PortalsSettingsIndexPage-CtITFyz-.js","assets/commandbar-DkXh_iTU.js","assets/commandbar-BN43hILO.css","assets/Sidebar-BRH2z1k4.js","assets/Sidebar-CjHTQp_K.css"])))=>i.map(i=>d[i]);
var rC=Object.defineProperty;var cC=(e,t,n)=>t in e?rC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var an=(e,t,n)=>cC(e,typeof t!="symbol"?t+"":t,n);import{d as No,h as kn,r as U,w as lt,c as w,a as P,o as m,b as et,e as b,f as Ke,g as x,i as ie,v as ln,F as pe,j as ye,t as v,k as Fn,T as Ms,l as j,m as be,_ as Re,n as f,p as c,q as re,s as F,u as yE,x as AE,y as As,z as At,A as Zt,B as SE,C as IE,D as CE,E as NE,G as OE,H as I,I as ct,J as Mf,K as dC,L as uC,M as kf,N as ut,O as Lf,P as Jd,Q as mC,R as Lu,S as ea,U as On,V as Wn,W as at,X as Us,Y as qn,Z as to,$ as ml,a0 as hs,a1 as Mt,a2 as Ic,a3 as Si,a4 as ks,a5 as Kt,a6 as Df,a7 as xE,a8 as ia,a9 as Vo,aa as Pf,ab as Bf,ac as Fd,ad as pC,ae as hC,af as Ff,ag as bi,ah as Du,ai as fC,aj as gC,ak as Bo}from"./_plugin-vue_export-helper-BK9LWihk.js";import{g as Yo,u as He,m as gt,e as yt,S as Os,M as _C,a as Uf,b as hn,C as tl,A as vC,c as qs,d as bC,f as EC,h as TC,i as eu,j as Gh,k as oc,l as Pm,_ as Oo,n as zr,o as Sa,p as yC}from"./globalConfig-DNoPylIh.js";import{a as AC}from"./index-BtuGy7By.js";import{g as Gf,a as SC,c as IC}from"./_commonjsHelpers-BosuxZz1.js";import{a as ic,s as Ho,e as ho,i as CC,p as Lr,u as vn,b as Ve,B as NC,c as Ot,d as OC,g as xC,t as wC,f as X_,h as q_,j as RC,F as $C,k as La,l as tu,m as nu,n as go,o as MC,M as Sl,q as kC,r as LC,v as DC,w as PC}from"./index-b3F7WOf6.js";import{_ as he,r as wE,d as RE,c as Vh,a as BC,b as $E,e as FC,i as Bm,f as UC,g as Ht,h as nl,j as mi,k as _o,l as GC,P as VC,m as HC,D as KC,n as zC,S as Z_,E as WC,o as jC,M as Q_,p as Fm,q as YC,s as XC,t as il,u as qC,v as ZC,w as QC,x as JC,y as eN,z as su,A as Cc,R as Vf,B as Gs,C as ms,F as J_,G as lc,H as tN,I as au,J as Hf,K as nN,L as ME,N as sN,O as Nc}from"./typing-DLDGfuj7.js";import{u as Te,a as jt,A as aN}from"./index-CGswmpo8.js";import{r as it,u as Lt,m as Nn,a as oN,b as Kf,e as xi,c as Um,d as Oc,s as zf,f as nr,g as iN,h as ou,n as lN}from"./exports-C7nQ38Rb.js";import{u as Vs,a as kE,h as rN,b as cN,i as dN,c as uN,d as mN,e as pN,L as hN,k as fN,f as gN}from"./useKeyboardNavigableList-Yx0rleq4.js";import{c as Ua,g as LE,a as DE}from"./helper-Dcp_UZ_y.js";import{g as _N,c as vN,f as Wf,a as bN,d as Ko,b as PE,e as BE,h as EN,r as TN,i as yN,t as AN,j as SN,k as IN,l as CN,n as NN,m as jf,o as ON,p as xN,s as wN}from"./utils.esm-B9vk9JJa.js";import{B as sn,i as fo,d as FE,f as Ln,s as oa,u as xn,L as Na,a as wn,g as RN,b as Yf,l as Xf,c as qf,e as ev,h as $N,j as Dr,k as MN,m as tv,n as kN,o as Gm,p as Er,q as Tr,r as LN,t as DN,v as PN}from"./Validators-U_Z_leEu.js";import{T as Qn,r as BN,A as FN,h as UN}from"./Thumbnail-CUjAwC9K.js";import{r as $n,t as En,a as Un}from"./index-DN3rM4CW.js";import{g as GN,a as Pu,h as Zf,R as ys,C as Bs,b as Bl,c as VN,P as HN,L as Pa,A as ql,D as KN,d as Xo,i as zN,f as Pt,w as $t,e as WN,j as ba,u as jN,k as vo,l as sr,s as YN,m as XN,p as Qf,I as Dt,n as qN,o as ZN,q as QN,S as qc,r as Kl,t as xc,v as JN,x as eO,_ as Hh,y as tO,M as yr,z as nO,B as sO,W as aO,N as oO,E as nv,F as iO,G as lO,H as rO,J as Ia,K as ll,O as cO,Q as Jf,T as Kh,U as dO,V as uO,X as mO,Y as pO,Z as UE,$ as zl,a0 as eg,a1 as iu,a2 as xs,a3 as sv,a4 as hO,a5 as Yi,a6 as wc,a7 as ar,a8 as GE,a9 as rl,aa as fO,ab as zh,ac as pl,ad as Rc,ae as Wh,af as Js,ag as lu,ah as gO,ai as In,aj as Bu,ak as Xi,al as _O,am as av,an as VE,ao as vO,ap as bO,aq as Fl,ar as jh,as as rc,at as EO,au as TO,av as yO,aw as AO,ax as SO,ay as IO,az as CO,aA as NO,aB as OO}from"./DashboardIcon-Pzi2HKUO.js";import{F as Vm,d as xO,a as wO}from"./module-DBoux_do.js";import{u as oo,M as tg}from"./useMessageFormatter-BWcWDZNI.js";import{_ as HE}from"./BarChart-BoGmHJfn.js";import{M as ov}from"./constants-lVAyZKq6.js";import{I as RO}from"./IframeLoader-BEPMhpqZ.js";import{B as Ul}from"./Icon-3PNIKml4.js";import{k as $O}from"./vue-dompurify-html-DajrD5x3.js";import"./js.cookie-Cz0CWeBA.js";function KE(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],s=typeof n;(s==="object"||s==="function")&&!Object.isFrozen(n)&&KE(n)}),e}class iv{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function zE(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function pi(e,...t){const n=Object.create(null);for(const s in e)n[s]=e[s];return t.forEach(function(s){for(const o in s)n[o]=s[o]}),n}const MO="</span>",lv=e=>!!e.scope,kO=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((s,o)=>`${s}${"_".repeat(o+1)}`)].join(" ")}return`${t}${e}`};class LO{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=zE(t)}openNode(t){if(!lv(t))return;const n=kO(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){lv(t)&&(this.buffer+=MO)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const rv=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class ng{constructor(){this.rootNode=rv(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=rv({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(s=>this._walk(t,s)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{ng._collapse(n)}))}}class DO extends ng{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const s=t.root;n&&(s.scope=`language:${n}`),this.add(s)}toHTML(){return new LO(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function cc(e){return e?typeof e=="string"?e:e.source:null}function WE(e){return hl("(?=",e,")")}function PO(e){return hl("(?:",e,")*")}function BO(e){return hl("(?:",e,")?")}function hl(...e){return e.map(n=>cc(n)).join("")}function FO(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function sg(...e){return"("+(FO(e).capture?"":"?:")+e.map(s=>cc(s)).join("|")+")"}function jE(e){return new RegExp(e.toString()+"|").exec("").length-1}function UO(e,t){const n=e&&e.exec(t);return n&&n.index===0}const GO=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ag(e,{joinWith:t}){let n=0;return e.map(s=>{n+=1;const o=n;let a=cc(s),i="";for(;a.length>0;){const l=GO.exec(a);if(!l){i+=a;break}i+=a.substring(0,l.index),a=a.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?i+="\\"+String(Number(l[1])+o):(i+=l[0],l[0]==="("&&n++)}return i}).map(s=>`(${s})`).join(t)}const VO=/\b\B/,YE="[a-zA-Z]\\w*",og="[a-zA-Z_]\\w*",XE="\\b\\d+(\\.\\d+)?",qE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ZE="\\b(0b[01]+)",HO="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",KO=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=hl(t,/.*\b/,e.binary,/\b.*/)),pi({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,s)=>{n.index!==0&&s.ignoreMatch()}},e)},dc={begin:"\\\\[\\s\\S]",relevance:0},zO={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[dc]},WO={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[dc]},jO={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Fu=function(e,t,n={}){const s=pi({scope:"comment",begin:e,end:t,contains:[]},n);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=sg("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:hl(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},YO=Fu("//","$"),XO=Fu("/\\*","\\*/"),qO=Fu("#","$"),ZO={scope:"number",begin:XE,relevance:0},QO={scope:"number",begin:qE,relevance:0},JO={scope:"number",begin:ZE,relevance:0},ex={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[dc,{begin:/\[/,end:/\]/,relevance:0,contains:[dc]}]},tx={scope:"title",begin:YE,relevance:0},nx={scope:"title",begin:og,relevance:0},sx={begin:"\\.\\s*"+og,relevance:0},ax=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Zc=Object.freeze({__proto__:null,APOS_STRING_MODE:zO,BACKSLASH_ESCAPE:dc,BINARY_NUMBER_MODE:JO,BINARY_NUMBER_RE:ZE,COMMENT:Fu,C_BLOCK_COMMENT_MODE:XO,C_LINE_COMMENT_MODE:YO,C_NUMBER_MODE:QO,C_NUMBER_RE:qE,END_SAME_AS_BEGIN:ax,HASH_COMMENT_MODE:qO,IDENT_RE:YE,MATCH_NOTHING_RE:VO,METHOD_GUARD:sx,NUMBER_MODE:ZO,NUMBER_RE:XE,PHRASAL_WORDS_MODE:jO,QUOTE_STRING_MODE:WO,REGEXP_MODE:ex,RE_STARTERS_RE:HO,SHEBANG:KO,TITLE_MODE:tx,UNDERSCORE_IDENT_RE:og,UNDERSCORE_TITLE_MODE:nx});function ox(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function ix(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function lx(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=ox,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function rx(e,t){Array.isArray(e.illegal)&&(e.illegal=sg(...e.illegal))}function cx(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function dx(e,t){e.relevance===void 0&&(e.relevance=1)}const ux=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(s=>{delete e[s]}),e.keywords=n.keywords,e.begin=hl(n.beforeMatch,WE(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},mx=["of","and","for","in","not","or","if","then","parent","list","value"],px="keyword";function QE(e,t,n=px){const s=Object.create(null);return typeof e=="string"?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach(function(a){Object.assign(s,QE(e[a],t,a))}),s;function o(a,i){t&&(i=i.map(l=>l.toLowerCase())),i.forEach(function(l){const r=l.split("|");s[r[0]]=[a,hx(r[0],r[1])]})}}function hx(e,t){return t?Number(t):fx(e)?0:1}function fx(e){return mx.includes(e.toLowerCase())}const cv={},sl=e=>{console.error(e)},dv=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Il=(e,t)=>{cv[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),cv[`${e}/${t}`]=!0)},ru=new Error;function JE(e,t,{key:n}){let s=0;const o=e[n],a={},i={};for(let l=1;l<=t.length;l++)i[l+s]=o[l],a[l+s]=!0,s+=jE(t[l-1]);e[n]=i,e[n]._emit=a,e[n]._multi=!0}function gx(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw sl("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ru;if(typeof e.beginScope!="object"||e.beginScope===null)throw sl("beginScope must be object"),ru;JE(e,e.begin,{key:"beginScope"}),e.begin=ag(e.begin,{joinWith:""})}}function _x(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw sl("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ru;if(typeof e.endScope!="object"||e.endScope===null)throw sl("endScope must be object"),ru;JE(e,e.end,{key:"endScope"}),e.end=ag(e.end,{joinWith:""})}}function vx(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function bx(e){vx(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),gx(e),_x(e)}function Ex(e){function t(i,l){return new RegExp(cc(i),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,r){r.position=this.position++,this.matchIndexes[this.matchAt]=r,this.regexes.push([r,l]),this.matchAt+=jE(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(r=>r[1]);this.matcherRe=t(ag(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const r=this.matcherRe.exec(l);if(!r)return null;const d=r.findIndex((p,h)=>h>0&&p!==void 0),u=this.matchIndexes[d];return r.splice(0,d),Object.assign(r,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const r=new n;return this.rules.slice(l).forEach(([d,u])=>r.addRule(d,u)),r.compile(),this.multiRegexes[l]=r,r}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,r){this.rules.push([l,r]),r.type==="begin"&&this.count++}exec(l){const r=this.getMatcher(this.regexIndex);r.lastIndex=this.lastIndex;let d=r.exec(l);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,d=u.exec(l)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function o(i){const l=new s;return i.contains.forEach(r=>l.addRule(r.begin,{rule:r,type:"begin"})),i.terminatorEnd&&l.addRule(i.terminatorEnd,{type:"end"}),i.illegal&&l.addRule(i.illegal,{type:"illegal"}),l}function a(i,l){const r=i;if(i.isCompiled)return r;[ix,cx,bx,ux].forEach(u=>u(i,l)),e.compilerExtensions.forEach(u=>u(i,l)),i.__beforeBegin=null,[lx,rx,dx].forEach(u=>u(i,l)),i.isCompiled=!0;let d=null;return typeof i.keywords=="object"&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),d=i.keywords.$pattern,delete i.keywords.$pattern),d=d||/\w+/,i.keywords&&(i.keywords=QE(i.keywords,e.case_insensitive)),r.keywordPatternRe=t(d,!0),l&&(i.begin||(i.begin=/\B|\b/),r.beginRe=t(r.begin),!i.end&&!i.endsWithParent&&(i.end=/\B|\b/),i.end&&(r.endRe=t(r.end)),r.terminatorEnd=cc(r.end)||"",i.endsWithParent&&l.terminatorEnd&&(r.terminatorEnd+=(i.end?"|":"")+l.terminatorEnd)),i.illegal&&(r.illegalRe=t(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map(function(u){return Tx(u==="self"?i:u)})),i.contains.forEach(function(u){a(u,r)}),i.starts&&a(i.starts,l),r.matcher=o(r),r}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=pi(e.classNameAliases||{}),a(e)}function eT(e){return e?e.endsWithParent||eT(e.starts):!1}function Tx(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return pi(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:eT(e)?pi(e,{starts:e.starts?pi(e.starts):null}):Object.isFrozen(e)?pi(e):e}var yx="11.10.0";class Ax extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const Hm=zE,uv=pi,mv=Symbol("nomatch"),Sx=7,tT=function(e){const t=Object.create(null),n=Object.create(null),s=[];let o=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",i={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:DO};function r(V){return l.noHighlightRe.test(V)}function d(V){let Y=V.className+" ";Y+=V.parentNode?V.parentNode.className:"";const ee=l.languageDetectRe.exec(Y);if(ee){const X=L(ee[1]);return X||(dv(a.replace("{}",ee[1])),dv("Falling back to no-highlight mode for this block.",V)),X?ee[1]:"no-highlight"}return Y.split(/\s+/).find(X=>r(X)||L(X))}function u(V,Y,ee){let X="",z="";typeof Y=="object"?(X=V,ee=Y.ignoreIllegals,z=Y.language):(Il("10.7.0","highlight(lang, code, ...args) has been deprecated."),Il("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),z=V,X=Y),ee===void 0&&(ee=!0);const W={code:X,language:z};H("before:highlight",W);const q=W.result?W.result:p(W.language,W.code,ee);return q.code=W.code,H("after:highlight",q),q}function p(V,Y,ee,X){const z=Object.create(null);function W(we,ge){return we.keywords[ge]}function q(){if(!Q.keywords){de.addText(Ce);return}let we=0;Q.keywordPatternRe.lastIndex=0;let ge=Q.keywordPatternRe.exec(Ce),J="";for(;ge;){J+=Ce.substring(we,ge.index);const Ee=Ze.case_insensitive?ge[0].toLowerCase():ge[0],$e=W(Q,Ee);if($e){const[se,le]=$e;if(de.addText(J),J="",z[Ee]=(z[Ee]||0)+1,z[Ee]<=Sx&&(Ae+=le),se.startsWith("_"))J+=ge[0];else{const _e=Ze.classNameAliases[se]||se;ae(ge[0],_e)}}else J+=ge[0];we=Q.keywordPatternRe.lastIndex,ge=Q.keywordPatternRe.exec(Ce)}J+=Ce.substring(we),de.addText(J)}function Z(){if(Ce==="")return;let we=null;if(typeof Q.subLanguage=="string"){if(!t[Q.subLanguage]){de.addText(Ce);return}we=p(Q.subLanguage,Ce,!0,oe[Q.subLanguage]),oe[Q.subLanguage]=we._top}else we=g(Ce,Q.subLanguage.length?Q.subLanguage:null);Q.relevance>0&&(Ae+=we.relevance),de.__addSublanguage(we._emitter,we.language)}function ne(){Q.subLanguage!=null?Z():q(),Ce=""}function ae(we,ge){we!==""&&(de.startScope(ge),de.addText(we),de.endScope())}function ue(we,ge){let J=1;const Ee=ge.length-1;for(;J<=Ee;){if(!we._emit[J]){J++;continue}const $e=Ze.classNameAliases[we[J]]||we[J],se=ge[J];$e?ae(se,$e):(Ce=se,q(),Ce=""),J++}}function te(we,ge){return we.scope&&typeof we.scope=="string"&&de.openNode(Ze.classNameAliases[we.scope]||we.scope),we.beginScope&&(we.beginScope._wrap?(ae(Ce,Ze.classNameAliases[we.beginScope._wrap]||we.beginScope._wrap),Ce=""):we.beginScope._multi&&(ue(we.beginScope,ge),Ce="")),Q=Object.create(we,{parent:{value:Q}}),Q}function ce(we,ge,J){let Ee=UO(we.endRe,J);if(Ee){if(we["on:end"]){const $e=new iv(we);we["on:end"](ge,$e),$e.isMatchIgnored&&(Ee=!1)}if(Ee){for(;we.endsParent&&we.parent;)we=we.parent;return we}}if(we.endsWithParent)return ce(we.parent,ge,J)}function fe(we){return Q.matcher.regexIndex===0?(Ce+=we[0],1):(Ue=!0,0)}function ke(we){const ge=we[0],J=we.rule,Ee=new iv(J),$e=[J.__beforeBegin,J["on:begin"]];for(const se of $e)if(se&&(se(we,Ee),Ee.isMatchIgnored))return fe(ge);return J.skip?Ce+=ge:(J.excludeBegin&&(Ce+=ge),ne(),!J.returnBegin&&!J.excludeBegin&&(Ce=ge)),te(J,we),J.returnBegin?0:ge.length}function De(we){const ge=we[0],J=Y.substring(we.index),Ee=ce(Q,we,J);if(!Ee)return mv;const $e=Q;Q.endScope&&Q.endScope._wrap?(ne(),ae(ge,Q.endScope._wrap)):Q.endScope&&Q.endScope._multi?(ne(),ue(Q.endScope,we)):$e.skip?Ce+=ge:($e.returnEnd||$e.excludeEnd||(Ce+=ge),ne(),$e.excludeEnd&&(Ce=ge));do Q.scope&&de.closeNode(),!Q.skip&&!Q.subLanguage&&(Ae+=Q.relevance),Q=Q.parent;while(Q!==Ee.parent);return Ee.starts&&te(Ee.starts,we),$e.returnEnd?0:ge.length}function Fe(){const we=[];for(let ge=Q;ge!==Ze;ge=ge.parent)ge.scope&&we.unshift(ge.scope);we.forEach(ge=>de.openNode(ge))}let je={};function Qe(we,ge){const J=ge&&ge[0];if(Ce+=we,J==null)return ne(),0;if(je.type==="begin"&&ge.type==="end"&&je.index===ge.index&&J===""){if(Ce+=Y.slice(ge.index,ge.index+1),!o){const Ee=new Error(`0 width match regex (${V})`);throw Ee.languageName=V,Ee.badRule=je.rule,Ee}return 1}if(je=ge,ge.type==="begin")return ke(ge);if(ge.type==="illegal"&&!ee){const Ee=new Error('Illegal lexeme "'+J+'" for mode "'+(Q.scope||"<unnamed>")+'"');throw Ee.mode=Q,Ee}else if(ge.type==="end"){const Ee=De(ge);if(Ee!==mv)return Ee}if(ge.type==="illegal"&&J==="")return 1;if(Me>1e5&&Me>ge.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ce+=J,J.length}const Ze=L(V);if(!Ze)throw sl(a.replace("{}",V)),new Error('Unknown language: "'+V+'"');const ft=Ex(Ze);let kt="",Q=X||ft;const oe={},de=new l.__emitter(l);Fe();let Ce="",Ae=0,Le=0,Me=0,Ue=!1;try{if(Ze.__emitTokens)Ze.__emitTokens(Y,de);else{for(Q.matcher.considerAll();;){Me++,Ue?Ue=!1:Q.matcher.considerAll(),Q.matcher.lastIndex=Le;const we=Q.matcher.exec(Y);if(!we)break;const ge=Y.substring(Le,we.index),J=Qe(ge,we);Le=we.index+J}Qe(Y.substring(Le))}return de.finalize(),kt=de.toHTML(),{language:V,value:kt,relevance:Ae,illegal:!1,_emitter:de,_top:Q}}catch(we){if(we.message&&we.message.includes("Illegal"))return{language:V,value:Hm(Y),illegal:!0,relevance:0,_illegalBy:{message:we.message,index:Le,context:Y.slice(Le-100,Le+100),mode:we.mode,resultSoFar:kt},_emitter:de};if(o)return{language:V,value:Hm(Y),illegal:!1,relevance:0,errorRaised:we,_emitter:de,_top:Q};throw we}}function h(V){const Y={value:Hm(V),illegal:!1,relevance:0,_top:i,_emitter:new l.__emitter(l)};return Y._emitter.addText(V),Y}function g(V,Y){Y=Y||l.languages||Object.keys(t);const ee=h(V),X=Y.filter(L).filter($).map(ne=>p(ne,V,!1));X.unshift(ee);const z=X.sort((ne,ae)=>{if(ne.relevance!==ae.relevance)return ae.relevance-ne.relevance;if(ne.language&&ae.language){if(L(ne.language).supersetOf===ae.language)return 1;if(L(ae.language).supersetOf===ne.language)return-1}return 0}),[W,q]=z,Z=W;return Z.secondBest=q,Z}function _(V,Y,ee){const X=Y&&n[Y]||ee;V.classList.add("hljs"),V.classList.add(`language-${X}`)}function T(V){let Y=null;const ee=d(V);if(r(ee))return;if(H("before:highlightElement",{el:V,language:ee}),V.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",V);return}if(V.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(V)),l.throwUnescapedHTML))throw new Ax("One of your code blocks includes unescaped HTML.",V.innerHTML);Y=V;const X=Y.textContent,z=ee?u(X,{language:ee,ignoreIllegals:!0}):g(X);V.innerHTML=z.value,V.dataset.highlighted="yes",_(V,ee,z.language),V.result={language:z.language,re:z.relevance,relevance:z.relevance},z.secondBest&&(V.secondBest={language:z.secondBest.language,relevance:z.secondBest.relevance}),H("after:highlightElement",{el:V,result:z,text:X})}function S(V){l=uv(l,V)}const E=()=>{C(),Il("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function y(){C(),Il("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let A=!1;function C(){if(document.readyState==="loading"){A=!0;return}document.querySelectorAll(l.cssSelector).forEach(T)}function O(){A&&C()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",O,!1);function N(V,Y){let ee=null;try{ee=Y(e)}catch(X){if(sl("Language definition for '{}' could not be registered.".replace("{}",V)),o)sl(X);else throw X;ee=i}ee.name||(ee.name=V),t[V]=ee,ee.rawDefinition=Y.bind(null,e),ee.aliases&&D(ee.aliases,{languageName:V})}function R(V){delete t[V];for(const Y of Object.keys(n))n[Y]===V&&delete n[Y]}function k(){return Object.keys(t)}function L(V){return V=(V||"").toLowerCase(),t[V]||t[n[V]]}function D(V,{languageName:Y}){typeof V=="string"&&(V=[V]),V.forEach(ee=>{n[ee.toLowerCase()]=Y})}function $(V){const Y=L(V);return Y&&!Y.disableAutodetect}function M(V){V["before:highlightBlock"]&&!V["before:highlightElement"]&&(V["before:highlightElement"]=Y=>{V["before:highlightBlock"](Object.assign({block:Y.el},Y))}),V["after:highlightBlock"]&&!V["after:highlightElement"]&&(V["after:highlightElement"]=Y=>{V["after:highlightBlock"](Object.assign({block:Y.el},Y))})}function K(V){M(V),s.push(V)}function B(V){const Y=s.indexOf(V);Y!==-1&&s.splice(Y,1)}function H(V,Y){const ee=V;s.forEach(function(X){X[ee]&&X[ee](Y)})}function G(V){return Il("10.7.0","highlightBlock will be removed entirely in v12.0"),Il("10.7.0","Please use highlightElement now."),T(V)}Object.assign(e,{highlight:u,highlightAuto:g,highlightAll:C,highlightElement:T,highlightBlock:G,configure:S,initHighlighting:E,initHighlightingOnLoad:y,registerLanguage:N,unregisterLanguage:R,listLanguages:k,getLanguage:L,registerAliases:D,autoDetection:$,inherit:uv,addPlugin:K,removePlugin:B}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString=yx,e.regex={concat:hl,lookahead:WE,either:sg,optional:BO,anyNumberOfTimes:PO};for(const V in Zc)typeof Zc[V]=="object"&&KE(Zc[V]);return Object.assign(e,Zc),e},Zl=tT({});Zl.newInstance=()=>tT({});var nT=Zl;Zl.HighlightJS=Zl;Zl.default=Zl;const Km=Gf(nT);var pv=No({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=U(e.language);lt(function(){return e.language},function(o){t.value=o});var n=w(function(){return e.autodetect||!t.value}),s=w(function(){return!n.value&&!Km.getLanguage(t.value)});return{className:w(function(){return s.value?"":"hljs "+t.value}),highlightedCode:w(function(){var o;if(s.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(n.value){var a=Km.highlightAuto(e.code);return t.value=(o=a.language)!==null&&o!==void 0?o:"",a.value}return(a=Km.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value})}},render:function(){return kn("pre",{},[kn("code",{class:this.className,innerHTML:this.highlightedCode})])}}),Ix={install:function(e){e.component("highlightjs",pv)},component:pv};function zm(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function Cx(e){return(...t)=>!e(...t)}function Nx(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function sT(e,t,n,s){return t?e.filter(o=>Nx(s(o,n),t)).sort((o,a)=>s(o,n).length-s(a,n).length):e}function Ox(e){return e.filter(t=>!t.$isLabel)}function Wm(e,t){return n=>n.reduce((s,o)=>o[e]&&o[e].length?(s.push({$groupLabel:o[t],$isLabel:!0}),s.concat(o[e])):s,[])}function xx(e,t,n,s,o){return a=>a.map(i=>{if(!i[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const l=sT(i[n],e,t,o);return l.length?{[s]:i[s],[n]:l}:[]})}const hv=(...e)=>t=>e.reduce((n,s)=>s(n),t);var wx={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return zm(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,t,this.label):sT(n,t,this.label,this.customLabel):n=this.groupValues?Wm(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(Cx(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,n){return hv(xx(t,n,this.groupValues,this.groupLabel,this.customLabel),Wm(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return hv(Wm(this.groupValues,this.groupLabel),Ox)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(zm(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return zm(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const n=this.trackBy?t[this.groupValues].map(o=>o[this.trackBy]):t[this.groupValues],s=this.internalValue.filter(o=>n.indexOf(this.trackBy?o[this.trackBy]:o)===-1);this.$emit("update:modelValue",s)}else{let n=t[this.groupValues].filter(s=>!(this.isOptionDisabled(s)||this.isSelected(s)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const s=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},Rx={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const n=this.options.find(s=>s[this.groupLabel]===t.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},aT={name:"vue-multiselect",mixins:[wx,Rx],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const $x={ref:"tags",class:"multiselect__tags"},Mx={class:"multiselect__tags-wrap"},kx={class:"multiselect__spinner"},Lx={key:0},Dx={class:"multiselect__option"},Px={class:"multiselect__option"},Bx=be("No elements found. Consider changing the search query."),Fx={class:"multiselect__option"},Ux=be("List is empty.");function Gx(e,t,n,s,o,a){return m(),P("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":a.isAbove,"multiselect--has-options-group":a.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=i=>e.activate()),onBlur:t[15]||(t[15]=i=>e.searchable?!1:e.deactivate()),onKeydown:[t[16]||(t[16]=Fn(Ke(i=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=Fn(Ke(i=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=Fn(Ke(i=>e.addPointerElement(i),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=Fn(i=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[et(e.$slots,"caret",{toggle:e.toggle},()=>[b("div",{onMousedown:t[1]||(t[1]=Ke(i=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),et(e.$slots,"clear",{search:e.search}),b("div",$x,[et(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:a.visibleValues,isOpen:e.isOpen},()=>[ie(b("div",Mx,[(m(!0),P(pe,null,ye(a.visibleValues,(i,l)=>et(e.$slots,"tag",{option:i,search:e.search,remove:e.removeElement},()=>[(m(),P("span",{class:"multiselect__tag",key:l},[b("span",{textContent:v(e.getOptionLabel(i))},null,8,["textContent"]),b("i",{tabindex:"1",onKeypress:Fn(Ke(r=>e.removeElement(i),["prevent"]),["enter"]),onMousedown:Ke(r=>e.removeElement(i),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[ln,a.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?et(e.$slots,"limit",{key:0},()=>[b("strong",{class:"multiselect__strong",textContent:v(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):x("v-if",!0)]),b(Ms,{name:"multiselect__loading"},{default:j(()=>[et(e.$slots,"loading",{},()=>[ie(b("div",kx,null,512),[[ln,n.loading]])])]),_:3}),e.searchable?(m(),P("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:n.spellcheck,placeholder:e.placeholder,required:n.required,style:a.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:t[2]||(t[2]=i=>e.updateSearch(i.target.value)),onFocus:t[3]||(t[3]=Ke(i=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=Ke(i=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=Fn(i=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=Fn(Ke(i=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=Fn(Ke(i=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=Fn(Ke(i=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=Fn(Ke(i=>e.addPointerElement(i),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):x("v-if",!0),a.isSingleLabelVisible?(m(),P("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=Ke((...i)=>e.toggle&&e.toggle(...i),["prevent"]))},[et(e.$slots,"singleLabel",{option:a.singleValue},()=>[be(v(e.currentOptionLabel),1)])],32)):x("v-if",!0),a.isPlaceholderVisible?(m(),P("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=Ke((...i)=>e.toggle&&e.toggle(...i),["prevent"]))},[et(e.$slots,"placeholder",{},()=>[be(v(e.placeholder),1)])],32)):x("v-if",!0)],512),b(Ms,{name:"multiselect"},{default:j(()=>[ie(b("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...i)=>e.activate&&e.activate(...i)),tabindex:"-1",onMousedown:t[13]||(t[13]=Ke(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[b("ul",{class:"multiselect__content",style:a.contentStyle,role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[et(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(m(),P("li",Lx,[b("span",Dx,[et(e.$slots,"maxElements",{},()=>[be("Maximum of "+v(e.max)+" options selected. First remove a selected option to select another.",1)])])])):x("v-if",!0),!e.max||e.internalValue.length<e.max?(m(!0),P(pe,{key:1},ye(e.filteredOptions,(i,l)=>(m(),P("li",{class:"multiselect__element",key:l,"aria-selected":e.isSelected(i),id:e.id+"-"+l,role:i&&(i.$isLabel||i.$isDisabled)?null:"option"},[i&&(i.$isLabel||i.$isDisabled)?x("v-if",!0):(m(),P("span",{key:0,class:[e.optionHighlight(l,i),"multiselect__option"],onClick:Ke(r=>e.select(i),["stop"]),onMouseenter:Ke(r=>e.pointerSet(l),["self"]),"data-select":i&&i.isTag?e.tagPlaceholder:a.selectLabelText,"data-selected":a.selectedLabelText,"data-deselect":a.deselectLabelText},[et(e.$slots,"option",{option:i,search:e.search,index:l},()=>[b("span",null,v(e.getOptionLabel(i)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),i&&(i.$isLabel||i.$isDisabled)?(m(),P("span",{key:1,"data-select":e.groupSelect&&a.selectGroupLabelText,"data-deselect":e.groupSelect&&a.deselectGroupLabelText,class:[e.groupHighlight(l,i),"multiselect__option"],onMouseenter:Ke(r=>e.groupSelect&&e.pointerSet(l),["self"]),onMousedown:Ke(r=>e.selectGroup(i),["prevent"])},[et(e.$slots,"option",{option:i,search:e.search,index:l},()=>[b("span",null,v(e.getOptionLabel(i)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):x("v-if",!0)],8,["aria-selected","id","role"]))),128)):x("v-if",!0),ie(b("li",null,[b("span",Px,[et(e.$slots,"noResult",{search:e.search},()=>[Bx])])],512),[[ln,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),ie(b("li",null,[b("span",Fx,[et(e.$slots,"noOptions",{},()=>[Ux])])],512),[[ln,n.showNoOptions&&(e.options.length===0||a.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!n.loading]]),et(e.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[ln,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}aT.render=Gx;const Vx={props:{modelValue:{type:Boolean,default:!1},size:{type:String,default:""}},emits:["update:modelValue","input"],methods:{onClick(){this.$emit("update:modelValue",!this.modelValue),this.$emit("input",!this.modelValue)}}},Hx=["aria-checked"];function Kx(e,t,n,s,o,a){return m(),f("button",{type:"button",class:re(["toggle-button p-0",{active:n.modelValue,small:n.size==="small"}]),role:"switch","aria-checked":n.modelValue.toString(),onClick:t[0]||(t[0]=(...i)=>a.onClick&&a.onClick(...i))},[c("span",{"aria-hidden":"true",class:re({active:n.modelValue})},null,2)],10,Hx)}const zx=Re(Vx,[["render",Kx],["__scopeId","data-v-04efe90e"]]),Wx={mixins:[Yo],props:{items:{type:Array,default:()=>[]}},computed:{classObject(){return"w-full"},activeIndex(){return this.items.findIndex(e=>e.route===this.$route.name)}},methods:{isActive(e){return this.items.indexOf(e)===this.activeIndex},isOver(e){return this.items.indexOf(e)<this.activeIndex}}},jx={class:"flex items-center"},Yx={class:"text-slate-800 dark:text-slate-100 text-base font-medium pl-6 overflow-hidden whitespace-nowrap mb-1.5 text-ellipsis leading-tight"},Xx={key:0,class:"ml-1 text-green-500 dark:text-green-500"},qx={class:"step"},Zx={class:"pl-6 m-0 text-sm text-slate-600 dark:text-slate-300"};function Qx(e,t,n,s,o,a){const i=F("fluent-icon");return m(),P(yE,{name:"wizard-items",tag:"div",class:re(["wizard-box",a.classObject])},{default:j(()=>[(m(!0),f(pe,null,ye(n.items,l=>(m(),f("div",{key:l.route,class:re(["item",{active:a.isActive(l),over:a.isOver(l)}])},[c("div",jx,[c("h3",Yx,v(l.title),1),a.isOver(l)?(m(),f("span",Xx,[b(i,{icon:"checkmark"})])):x("",!0)]),c("span",qx,v(n.items.indexOf(l)+1),1),c("p",Zx,v(l.body),1)],2))),128))]),_:1},8,["class"])}const Jx=Re(Wx,[["render",Qx],["__scopeId","data-v-20c3f54e"]]),ew=["top","right","bottom","left"],fv=["start","end"],gv=ew.reduce((e,t)=>e.concat(t,t+"-"+fv[0],t+"-"+fv[1]),[]),qi=Math.min,Wi=Math.max,tw={left:"right",right:"left",bottom:"top",top:"bottom"},nw={start:"end",end:"start"};function Yh(e,t,n){return Wi(e,qi(t,n))}function fl(e,t){return typeof e=="function"?e(t):e}function So(e){return e.split("-")[0]}function Qa(e){return e.split("-")[1]}function oT(e){return e==="x"?"y":"x"}function ig(e){return e==="y"?"height":"width"}function cl(e){return["top","bottom"].includes(So(e))?"y":"x"}function lg(e){return oT(cl(e))}function iT(e,t,n){n===void 0&&(n=!1);const s=Qa(e),o=lg(e),a=ig(o);let i=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=du(i)),[i,du(i)]}function sw(e){const t=du(e);return[cu(e),t,cu(t)]}function cu(e){return e.replace(/start|end/g,t=>nw[t])}function aw(e,t,n){const s=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:s:t?s:o;case"left":case"right":return t?a:i;default:return[]}}function ow(e,t,n,s){const o=Qa(e);let a=aw(So(e),n==="start",s);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(cu)))),a}function du(e){return e.replace(/left|right|bottom|top/g,t=>tw[t])}function iw(e){return{top:0,right:0,bottom:0,left:0,...e}}function lT(e){return typeof e!="number"?iw(e):{top:e,right:e,bottom:e,left:e}}function Wr(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}function _v(e,t,n){let{reference:s,floating:o}=e;const a=cl(t),i=lg(t),l=ig(i),r=So(t),d=a==="y",u=s.x+s.width/2-o.width/2,p=s.y+s.height/2-o.height/2,h=s[l]/2-o[l]/2;let g;switch(r){case"top":g={x:u,y:s.y-o.height};break;case"bottom":g={x:u,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:p};break;case"left":g={x:s.x-o.width,y:p};break;default:g={x:s.x,y:s.y}}switch(Qa(t)){case"start":g[i]-=h*(n&&d?-1:1);break;case"end":g[i]+=h*(n&&d?-1:1);break}return g}const lw=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),r=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:p}=_v(d,s,r),h=s,g={},_=0;for(let T=0;T<l.length;T++){const{name:S,fn:E}=l[T],{x:y,y:A,data:C,reset:O}=await E({x:u,y:p,initialPlacement:s,placement:h,strategy:o,middlewareData:g,rects:d,platform:i,elements:{reference:e,floating:t}});u=y??u,p=A??p,g={...g,[S]:{...g[S],...C}},O&&_<=50&&(_++,typeof O=="object"&&(O.placement&&(h=O.placement),O.rects&&(d=O.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):O.rects),{x:u,y:p}=_v(d,h,r)),T=-1)}return{x:u,y:p,placement:h,strategy:o,middlewareData:g}};async function Uu(e,t){var n;t===void 0&&(t={});const{x:s,y:o,platform:a,rects:i,elements:l,strategy:r}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:h=!1,padding:g=0}=fl(t,e),_=lT(g),S=l[h?p==="floating"?"reference":"floating":p],E=Wr(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:r})),y=p==="floating"?{x:s,y:o,width:i.floating.width,height:i.floating.height}:i.reference,A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(A))?await(a.getScale==null?void 0:a.getScale(A))||{x:1,y:1}:{x:1,y:1},O=Wr(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:A,strategy:r}):y);return{top:(E.top-O.top+_.top)/C.y,bottom:(O.bottom-E.bottom+_.bottom)/C.y,left:(E.left-O.left+_.left)/C.x,right:(O.right-E.right+_.right)/C.x}}const rw=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:o,rects:a,platform:i,elements:l,middlewareData:r}=t,{element:d,padding:u=0}=fl(e,t)||{};if(d==null)return{};const p=lT(u),h={x:n,y:s},g=lg(o),_=ig(g),T=await i.getDimensions(d),S=g==="y",E=S?"top":"left",y=S?"bottom":"right",A=S?"clientHeight":"clientWidth",C=a.reference[_]+a.reference[g]-h[g]-a.floating[_],O=h[g]-a.reference[g],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let R=N?N[A]:0;(!R||!await(i.isElement==null?void 0:i.isElement(N)))&&(R=l.floating[A]||a.floating[_]);const k=C/2-O/2,L=R/2-T[_]/2-1,D=qi(p[E],L),$=qi(p[y],L),M=D,K=R-T[_]-$,B=R/2-T[_]/2+k,H=Yh(M,B,K),G=!r.arrow&&Qa(o)!=null&&B!==H&&a.reference[_]/2-(B<M?D:$)-T[_]/2<0,V=G?B<M?B-M:B-K:0;return{[g]:h[g]+V,data:{[g]:H,centerOffset:B-H-V,...G&&{alignmentOffset:V}},reset:G}}});function cw(e,t,n){return(e?[...n.filter(o=>Qa(o)===e),...n.filter(o=>Qa(o)!==e)]:n.filter(o=>So(o)===o)).filter(o=>e?Qa(o)===e||(t?cu(o)!==o:!1):!0)}const dw=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,s,o;const{rects:a,middlewareData:i,placement:l,platform:r,elements:d}=t,{crossAxis:u=!1,alignment:p,allowedPlacements:h=gv,autoAlignment:g=!0,..._}=fl(e,t),T=p!==void 0||h===gv?cw(p||null,g,h):h,S=await Uu(t,_),E=((n=i.autoPlacement)==null?void 0:n.index)||0,y=T[E];if(y==null)return{};const A=iT(y,a,await(r.isRTL==null?void 0:r.isRTL(d.floating)));if(l!==y)return{reset:{placement:T[0]}};const C=[S[So(y)],S[A[0]],S[A[1]]],O=[...((s=i.autoPlacement)==null?void 0:s.overflows)||[],{placement:y,overflows:C}],N=T[E+1];if(N)return{data:{index:E+1,overflows:O},reset:{placement:N}};const R=O.map(D=>{const $=Qa(D.placement);return[D.placement,$&&u?D.overflows.slice(0,2).reduce((M,K)=>M+K,0):D.overflows[0],D.overflows]}).sort((D,$)=>D[1]-$[1]),L=((o=R.filter(D=>D[2].slice(0,Qa(D[0])?2:3).every($=>$<=0))[0])==null?void 0:o[0])||R[0][0];return L!==l?{data:{index:E+1,overflows:O},reset:{placement:L}}:{}}}},uw=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:o,middlewareData:a,rects:i,initialPlacement:l,platform:r,elements:d}=t,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:T=!0,...S}=fl(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const E=So(o),y=cl(l),A=So(l)===l,C=await(r.isRTL==null?void 0:r.isRTL(d.floating)),O=h||(A||!T?[du(l)]:sw(l)),N=_!=="none";!h&&N&&O.push(...ow(l,T,_,C));const R=[l,...O],k=await Uu(t,S),L=[];let D=((s=a.flip)==null?void 0:s.overflows)||[];if(u&&L.push(k[E]),p){const B=iT(o,i,C);L.push(k[B[0]],k[B[1]])}if(D=[...D,{placement:o,overflows:L}],!L.every(B=>B<=0)){var $,M;const B=((($=a.flip)==null?void 0:$.index)||0)+1,H=R[B];if(H)return{data:{index:B,overflows:D},reset:{placement:H}};let G=(M=D.filter(V=>V.overflows[0]<=0).sort((V,Y)=>V.overflows[1]-Y.overflows[1])[0])==null?void 0:M.placement;if(!G)switch(g){case"bestFit":{var K;const V=(K=D.filter(Y=>{if(N){const ee=cl(Y.placement);return ee===y||ee==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(ee=>ee>0).reduce((ee,X)=>ee+X,0)]).sort((Y,ee)=>Y[1]-ee[1])[0])==null?void 0:K[0];V&&(G=V);break}case"initialPlacement":G=l;break}if(o!==G)return{reset:{placement:G}}}return{}}}};async function mw(e,t){const{placement:n,platform:s,elements:o}=e,a=await(s.isRTL==null?void 0:s.isRTL(o.floating)),i=So(n),l=Qa(n),r=cl(n)==="y",d=["left","top"].includes(i)?-1:1,u=a&&r?-1:1,p=fl(t,e);let{mainAxis:h,crossAxis:g,alignmentAxis:_}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return l&&typeof _=="number"&&(g=l==="end"?_*-1:_),r?{x:g*u,y:h*d}:{x:h*d,y:g*u}}const pw=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:o,y:a,placement:i,middlewareData:l}=t,r=await mw(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:o+r.x,y:a+r.y,data:{...r,placement:i}}}}},hw=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:S=>{let{x:E,y}=S;return{x:E,y}}},...r}=fl(e,t),d={x:n,y:s},u=await Uu(t,r),p=cl(So(o)),h=oT(p);let g=d[h],_=d[p];if(a){const S=h==="y"?"top":"left",E=h==="y"?"bottom":"right",y=g+u[S],A=g-u[E];g=Yh(y,g,A)}if(i){const S=p==="y"?"top":"left",E=p==="y"?"bottom":"right",y=_+u[S],A=_-u[E];_=Yh(y,_,A)}const T=l.fn({...t,[h]:g,[p]:_});return{...T,data:{x:T.x-n,y:T.y-s}}}}},fw=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:s,platform:o,elements:a}=t,{apply:i=()=>{},...l}=fl(e,t),r=await Uu(t,l),d=So(n),u=Qa(n),p=cl(n)==="y",{width:h,height:g}=s.floating;let _,T;d==="top"||d==="bottom"?(_=d,T=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(T=d,_=u==="end"?"top":"bottom");const S=g-r.top-r.bottom,E=h-r.left-r.right,y=qi(g-r[_],S),A=qi(h-r[T],E),C=!t.middlewareData.shift;let O=y,N=A;if(p?N=u||C?qi(A,E):E:O=u||C?qi(y,S):S,C&&!u){const k=Wi(r.left,0),L=Wi(r.right,0),D=Wi(r.top,0),$=Wi(r.bottom,0);p?N=h-2*(k!==0||L!==0?k+L:Wi(r.left,r.right)):O=g-2*(D!==0||$!==0?D+$:Wi(r.top,r.bottom))}await i({...t,availableWidth:N,availableHeight:O});const R=await o.getDimensions(a.floating);return h!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function Da(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bo(e){return Da(e).getComputedStyle(e)}const vv=Math.min,jr=Math.max,uu=Math.round;function rT(e){const t=bo(e);let n=parseFloat(t.width),s=parseFloat(t.height);const o=e.offsetWidth,a=e.offsetHeight,i=uu(n)!==o||uu(s)!==a;return i&&(n=o,s=a),{width:n,height:s,fallback:i}}function Ii(e){return dT(e)?(e.nodeName||"").toLowerCase():""}let Qc;function cT(){if(Qc)return Qc;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Qc=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Qc):navigator.userAgent}function Eo(e){return e instanceof Da(e).HTMLElement}function Ei(e){return e instanceof Da(e).Element}function dT(e){return e instanceof Da(e).Node}function bv(e){return typeof ShadowRoot>"u"?!1:e instanceof Da(e).ShadowRoot||e instanceof ShadowRoot}function Gu(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=bo(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(o)}function gw(e){return["table","td","th"].includes(Ii(e))}function Xh(e){const t=/firefox/i.test(cT()),n=bo(e),s=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!s&&s!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const a=n.contain;return a!=null&&a.includes(o)})}function uT(){return!/^((?!chrome|android).)*safari/i.test(cT())}function rg(e){return["html","body","#document"].includes(Ii(e))}function mT(e){return Ei(e)?e:e.contextElement}const pT={x:1,y:1};function Wl(e){const t=mT(e);if(!Eo(t))return pT;const n=t.getBoundingClientRect(),{width:s,height:o,fallback:a}=rT(t);let i=(a?uu(n.width):n.width)/s,l=(a?uu(n.height):n.height)/o;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function uc(e,t,n,s){var o,a;t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),l=mT(e);let r=pT;t&&(s?Ei(s)&&(r=Wl(s)):r=Wl(e));const d=l?Da(l):window,u=!uT()&&n;let p=(i.left+(u&&((o=d.visualViewport)==null?void 0:o.offsetLeft)||0))/r.x,h=(i.top+(u&&((a=d.visualViewport)==null?void 0:a.offsetTop)||0))/r.y,g=i.width/r.x,_=i.height/r.y;if(l){const T=Da(l),S=s&&Ei(s)?Da(s):s;let E=T.frameElement;for(;E&&s&&S!==T;){const y=Wl(E),A=E.getBoundingClientRect(),C=getComputedStyle(E);A.x+=(E.clientLeft+parseFloat(C.paddingLeft))*y.x,A.y+=(E.clientTop+parseFloat(C.paddingTop))*y.y,p*=y.x,h*=y.y,g*=y.x,_*=y.y,p+=A.x,h+=A.y,E=Da(E).frameElement}}return{width:g,height:_,top:h,right:p+g,bottom:h+_,left:p,x:p,y:h}}function Ti(e){return((dT(e)?e.ownerDocument:e.document)||window.document).documentElement}function Vu(e){return Ei(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function hT(e){return uc(Ti(e)).left+Vu(e).scrollLeft}function mc(e){if(Ii(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bv(e)&&e.host||Ti(e);return bv(t)?t.host:t}function fT(e){const t=mc(e);return rg(t)?t.ownerDocument.body:Eo(t)&&Gu(t)?t:fT(t)}function mu(e,t){var n;t===void 0&&(t=[]);const s=fT(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=Da(s);return o?t.concat(a,a.visualViewport||[],Gu(s)?s:[]):t.concat(s,mu(s))}function Ev(e,t,n){return t==="viewport"?Wr(function(s,o){const a=Da(s),i=Ti(s),l=a.visualViewport;let r=i.clientWidth,d=i.clientHeight,u=0,p=0;if(l){r=l.width,d=l.height;const h=uT();(h||!h&&o==="fixed")&&(u=l.offsetLeft,p=l.offsetTop)}return{width:r,height:d,x:u,y:p}}(e,n)):Ei(t)?Wr(function(s,o){const a=uc(s,!0,o==="fixed"),i=a.top+s.clientTop,l=a.left+s.clientLeft,r=Eo(s)?Wl(s):{x:1,y:1};return{width:s.clientWidth*r.x,height:s.clientHeight*r.y,x:l*r.x,y:i*r.y}}(t,n)):Wr(function(s){const o=Ti(s),a=Vu(s),i=s.ownerDocument.body,l=jr(o.scrollWidth,o.clientWidth,i.scrollWidth,i.clientWidth),r=jr(o.scrollHeight,o.clientHeight,i.scrollHeight,i.clientHeight);let d=-a.scrollLeft+hT(s);const u=-a.scrollTop;return bo(i).direction==="rtl"&&(d+=jr(o.clientWidth,i.clientWidth)-l),{width:l,height:r,x:d,y:u}}(Ti(e)))}function Tv(e){return Eo(e)&&bo(e).position!=="fixed"?e.offsetParent:null}function yv(e){const t=Da(e);let n=Tv(e);for(;n&&gw(n)&&bo(n).position==="static";)n=Tv(n);return n&&(Ii(n)==="html"||Ii(n)==="body"&&bo(n).position==="static"&&!Xh(n))?t:n||function(s){let o=mc(s);for(;Eo(o)&&!rg(o);){if(Xh(o))return o;o=mc(o)}return null}(e)||t}function _w(e,t,n){const s=Eo(t),o=Ti(t),a=uc(e,!0,n==="fixed",t);let i={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(s||!s&&n!=="fixed")if((Ii(t)!=="body"||Gu(o))&&(i=Vu(t)),Eo(t)){const r=uc(t,!0);l.x=r.x+t.clientLeft,l.y=r.y+t.clientTop}else o&&(l.x=hT(o));return{x:a.left+i.scrollLeft-l.x,y:a.top+i.scrollTop-l.y,width:a.width,height:a.height}}const vw={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const a=n==="clippingAncestors"?function(d,u){const p=u.get(d);if(p)return p;let h=mu(d).filter(S=>Ei(S)&&Ii(S)!=="body"),g=null;const _=bo(d).position==="fixed";let T=_?mc(d):d;for(;Ei(T)&&!rg(T);){const S=bo(T),E=Xh(T);(_?E||g:E||S.position!=="static"||!g||!["absolute","fixed"].includes(g.position))?g=S:h=h.filter(y=>y!==T),T=mc(T)}return u.set(d,h),h}(t,this._c):[].concat(n),i=[...a,s],l=i[0],r=i.reduce((d,u)=>{const p=Ev(t,u,o);return d.top=jr(p.top,d.top),d.right=vv(p.right,d.right),d.bottom=vv(p.bottom,d.bottom),d.left=jr(p.left,d.left),d},Ev(t,l,o));return{width:r.right-r.left,height:r.bottom-r.top,x:r.left,y:r.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const o=Eo(n),a=Ti(n);if(n===a)return t;let i={scrollLeft:0,scrollTop:0},l={x:1,y:1};const r={x:0,y:0};if((o||!o&&s!=="fixed")&&((Ii(n)!=="body"||Gu(a))&&(i=Vu(n)),Eo(n))){const d=uc(n);l=Wl(n),r.x=d.x+n.clientLeft,r.y=d.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-i.scrollLeft*l.x+r.x,y:t.y*l.y-i.scrollTop*l.y+r.y}},isElement:Ei,getDimensions:function(e){return Eo(e)?rT(e):e.getBoundingClientRect()},getOffsetParent:yv,getDocumentElement:Ti,getScale:Wl,async getElementRects(e){let{reference:t,floating:n,strategy:s}=e;const o=this.getOffsetParent||yv,a=this.getDimensions;return{reference:_w(t,await o(n),s),floating:{x:0,y:0,...await a(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>bo(e).direction==="rtl"},bw=(e,t,n)=>{const s=new Map,o={platform:vw,...n},a={...o.platform,_c:s};return lw(e,t,{...o,platform:a})};function gT(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]=="object"&&e[n]?gT(e[n],t[n]):e[n]=t[n])}const Ja={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:e=>[...e,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function pc(e,t){let n=Ja.themes[e]||{},s;do s=n[t],typeof s>"u"?n.$extend?n=Ja.themes[n.$extend]||{}:(n=null,s=Ja[t]):n=null;while(n);return s}function Ew(e){const t=[e];let n=Ja.themes[e]||{};do n.$extend&&!n.$resetCss?(t.push(n.$extend),n=Ja.themes[n.$extend]||{}):n=null;while(n);return t.map(s=>`v-popper--theme-${s}`)}function Av(e){const t=[e];let n=Ja.themes[e]||{};do n.$extend?(t.push(n.$extend),n=Ja.themes[n.$extend]||{}):n=null;while(n);return t}let Ql=!1;if(typeof window<"u"){Ql=!1;try{const e=Object.defineProperty({},"passive",{get(){Ql=!0}});window.addEventListener("test",null,e)}catch{}}let _T=!1;typeof window<"u"&&typeof navigator<"u"&&(_T=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const vT=["auto","top","bottom","left","right"].reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),Sv={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},Iv={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function Cv(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}function jm(){return new Promise(e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}))}const Za=[];let Pi=null;const Nv={};function Ov(e){let t=Nv[e];return t||(t=Nv[e]=[]),t}let qh=function(){};typeof window<"u"&&(qh=window.Element);function fn(e){return function(t){return pc(t.theme,e)}}const Ym="__floating-vue__popper",bT=()=>No({name:"VPopper",provide(){return{[Ym]:{parentPopper:this}}},inject:{[Ym]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:fn("disabled")},positioningDisabled:{type:Boolean,default:fn("positioningDisabled")},placement:{type:String,default:fn("placement"),validator:e=>vT.includes(e)},delay:{type:[String,Number,Object],default:fn("delay")},distance:{type:[Number,String],default:fn("distance")},skidding:{type:[Number,String],default:fn("skidding")},triggers:{type:Array,default:fn("triggers")},showTriggers:{type:[Array,Function],default:fn("showTriggers")},hideTriggers:{type:[Array,Function],default:fn("hideTriggers")},popperTriggers:{type:Array,default:fn("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:fn("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:fn("popperHideTriggers")},container:{type:[String,Object,qh,Boolean],default:fn("container")},boundary:{type:[String,qh],default:fn("boundary")},strategy:{type:String,validator:e=>["absolute","fixed"].includes(e),default:fn("strategy")},autoHide:{type:[Boolean,Function],default:fn("autoHide")},handleResize:{type:Boolean,default:fn("handleResize")},instantMove:{type:Boolean,default:fn("instantMove")},eagerMount:{type:Boolean,default:fn("eagerMount")},popperClass:{type:[String,Array,Object],default:fn("popperClass")},computeTransformOrigin:{type:Boolean,default:fn("computeTransformOrigin")},autoMinSize:{type:Boolean,default:fn("autoMinSize")},autoSize:{type:[Boolean,String],default:fn("autoSize")},autoMaxSize:{type:Boolean,default:fn("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:fn("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:fn("preventOverflow")},overflowPadding:{type:[Number,String],default:fn("overflowPadding")},arrowPadding:{type:[Number,String],default:fn("arrowPadding")},arrowOverflow:{type:Boolean,default:fn("arrowOverflow")},flip:{type:Boolean,default:fn("flip")},shift:{type:Boolean,default:fn("shift")},shiftCrossAxis:{type:Boolean,default:fn("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:fn("noAutoFocus")},disposeTimeout:{type:Number,default:fn("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(e=>e.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var e;return(e=this[Ym])==null?void 0:e.parentPopper},hasPopperShowTriggerHover(){var e,t;return((e=this.popperTriggers)==null?void 0:e.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(e){e?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((e,t)=>(e[t]="$_computePosition",e),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:e=null,skipDelay:t=!1,force:n=!1}={}){var s,o;(s=this.parentPopper)!=null&&s.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(n||!this.disabled)&&(((o=this.parentPopper)==null?void 0:o.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(e,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:e=null,skipDelay:t=!1}={}){var n;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((n=this.parentPopper)==null?void 0:n.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(e,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var e;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((e=this.referenceNode)==null?void 0:e.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(pw({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?e.middleware.push(dw({alignment:this.placement.split("-")[1]??""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push(hw({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(uw({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push(rw({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:s,rects:o,middlewareData:a})=>{let i;const{centerOffset:l}=a.arrow;return s.startsWith("top")||s.startsWith("bottom")?i=Math.abs(l)>o.reference.width/2:i=Math.abs(l)>o.reference.height/2,{data:{overflow:i}}}}),this.autoMinSize||this.autoSize){const s=this.autoSize?this.autoSize:this.autoMinSize?"min":null;e.middleware.push({name:"autoSize",fn:({rects:o,placement:a,middlewareData:i})=>{var l;if((l=i.autoSize)!=null&&l.skip)return{};let r,d;return a.startsWith("top")||a.startsWith("bottom")?r=o.reference.width:d=o.reference.height,this.$_innerNode.style[s==="min"?"minWidth":s==="max"?"maxWidth":"width"]=r!=null?`${r}px`:null,this.$_innerNode.style[s==="min"?"minHeight":s==="max"?"maxHeight":"height"]=d!=null?`${d}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,e.middleware.push(fw({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:s,availableHeight:o})=>{this.$_innerNode.style.maxWidth=s!=null?`${s}px`:null,this.$_innerNode.style.maxHeight=o!=null?`${o}px`:null}})));const n=await bw(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:n.x,y:n.y,placement:n.placement,strategy:n.strategy,arrow:{...n.middlewareData.arrow,...n.middlewareData.arrowOverflow}})},$_scheduleShow(e,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),Pi&&this.instantMove&&Pi.instantMove&&Pi!==this.parentPopper){Pi.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(e,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(Pi=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(e){const t=this.delay;return parseInt(t&&t[e]||t||0)},async $_applyShow(e=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=e,!this.isShown&&(this.$_ensureTeleport(),await jm(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...mu(this.$_referenceNode),...mu(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),n=this.$_popperNode.querySelector(".v-popper__wrapper"),s=n.parentNode.getBoundingClientRect(),o=t.x+t.width/2-(s.left+n.offsetLeft),a=t.y+t.height/2-(s.top+n.offsetTop);this.result.transformOrigin=`${o}px ${a}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const e=this.showGroup;if(e){let t;for(let n=0;n<Za.length;n++)t=Za[n],t.showGroup!==e&&(t.hide(),t.$emit("close-group"))}Za.push(this),document.body.classList.add("v-popper--some-open");for(const t of Av(this.theme))Ov(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await jm(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(e=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=e,Cv(Za,this),Za.length===0&&document.body.classList.remove("v-popper--some-open");for(const n of Av(this.theme)){const s=Ov(n);Cv(s,this),s.length===0&&document.body.classList.remove(`v-popper--some-open--${n}`)}Pi===this&&(Pi=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await jm(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let e=this.container;if(typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=this.$_targetNodes[0].parentNode),!e)throw new Error("No container for popover: "+this.container);e.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const e=n=>{this.isShown&&!this.$_hideInProgress||(n.usedByTooltip=!0,!this.$_preventShow&&this.show({event:n}))};this.$_registerTriggerListeners(this.$_targetNodes,Sv,this.triggers,this.showTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],Sv,this.popperTriggers,this.popperShowTriggers,e);const t=n=>{n.usedByTooltip||this.hide({event:n})};this.$_registerTriggerListeners(this.$_targetNodes,Iv,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],Iv,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(e,t,n){this.$_events.push({targetNodes:e,eventType:t,handler:n}),e.forEach(s=>s.addEventListener(t,n,Ql?{passive:!0}:void 0))},$_registerTriggerListeners(e,t,n,s,o){let a=n;s!=null&&(a=typeof s=="function"?s(a):s),a.forEach(i=>{const l=t[i];l&&this.$_registerEventListeners(e,l,o)})},$_removeEventListeners(e){const t=[];this.$_events.forEach(n=>{const{targetNodes:s,eventType:o,handler:a}=n;!e||e===o?s.forEach(i=>i.removeEventListener(o,a)):t.push(n)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(e,t=!1){this.$_showFrameLocked||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(e,t){for(const n of this.$_targetNodes){const s=n.getAttribute(e);s&&(n.removeAttribute(e),n.setAttribute(t,s))}},$_applyAttrsToTarget(e){for(const t of this.$_targetNodes)for(const n in e){const s=e[n];s==null?t.removeAttribute(n):t.setAttribute(n,s)}},$_updateParentShownChildren(e){let t=this.parentPopper;for(;t;)e?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const e=this.$_referenceNode.getBoundingClientRect();if(Yr>=e.left&&Yr<=e.right&&Xr>=e.top&&Xr<=e.bottom){const t=this.$_popperNode.getBoundingClientRect(),n=Yr-li,s=Xr-ri,o=t.left+t.width/2-li+(t.top+t.height/2)-ri+t.width+t.height,a=li+n*o,i=ri+s*o;return Jc(li,ri,a,i,t.left,t.top,t.left,t.bottom)||Jc(li,ri,a,i,t.left,t.top,t.right,t.top)||Jc(li,ri,a,i,t.right,t.top,t.right,t.bottom)||Jc(li,ri,a,i,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(_T){const e=Ql?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>xv(t,!0),e),document.addEventListener("touchend",t=>wv(t,!0),e)}else window.addEventListener("mousedown",e=>xv(e,!1),!0),window.addEventListener("click",e=>wv(e,!1),!0);window.addEventListener("resize",yw)}function xv(e,t){if(Ja.autoHideOnMousedown)ET(e,t);else for(let n=0;n<Za.length;n++){const s=Za[n];try{s.mouseDownContains=s.popperNode().contains(e.target)}catch{}}}function wv(e,t){Ja.autoHideOnMousedown||ET(e,t)}function ET(e,t){const n={};for(let s=Za.length-1;s>=0;s--){const o=Za[s];try{const a=o.containsGlobalTarget=o.mouseDownContains||o.popperNode().contains(e.target);o.pendingHide=!1,requestAnimationFrame(()=>{if(o.pendingHide=!1,!n[o.randomId]&&Rv(o,a,e)){if(o.$_handleGlobalClose(e,t),!e.closeAllPopover&&e.closePopover&&a){let l=o.parentPopper;for(;l;)n[l.randomId]=!0,l=l.parentPopper;return}let i=o.parentPopper;for(;i&&Rv(i,i.containsGlobalTarget,e);)i.$_handleGlobalClose(e,t),i=i.parentPopper}})}catch{}}}function Rv(e,t,n){return n.closeAllPopover||n.closePopover&&t||Tw(e,n)&&!t}function Tw(e,t){if(typeof e.autoHide=="function"){const n=e.autoHide(t);return e.lastAutoHide=n,n}return e.autoHide}function yw(){for(let e=0;e<Za.length;e++)Za[e].$_computePosition()}let li=0,ri=0,Yr=0,Xr=0;typeof window<"u"&&window.addEventListener("mousemove",e=>{li=Yr,ri=Xr,Yr=e.clientX,Xr=e.clientY},Ql?{passive:!0}:void 0);function Jc(e,t,n,s,o,a,i,l){const r=((i-o)*(t-a)-(l-a)*(e-o))/((l-a)*(n-e)-(i-o)*(s-t)),d=((n-e)*(t-a)-(s-t)*(e-o))/((l-a)*(n-e)-(i-o)*(s-t));return r>=0&&r<=1&&d>=0&&d<=1}const Aw={extends:bT()},Hu=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};function Sw(e,t,n,s,o,a){return m(),f("div",{ref:"reference",class:re(["v-popper",{"v-popper--shown":e.slotData.isShown}])},[et(e.$slots,"default",NE(OE(e.slotData)))],2)}const Iw=Hu(Aw,[["render",Sw]]);function Cw(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):-1}let Ud;function Zh(){Zh.init||(Zh.init=!0,Ud=Cw()!==-1)}var Ku={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Zh(),Zt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Ud&&this.$el.appendChild(e),e.data="about:blank",Ud||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Ud&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Nw=CE();SE("data-v-b329ee4c");const Ow={class:"resize-observer",tabindex:"-1"};IE();const xw=Nw((e,t,n,s,o,a)=>(m(),P("div",Ow)));Ku.render=xw;Ku.__scopeId="data-v-b329ee4c";Ku.__file="src/components/ResizeObserver.vue";const TT=(e="theme")=>({computed:{themeClass(){return Ew(this[e])}}}),ww=No({name:"VPopperContent",components:{ResizeObserver:Ku},mixins:[TT()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(e){return e!=null&&!isNaN(e)?`${e}px`:null}}}),Rw=["id","aria-hidden","tabindex","data-popper-placement"],$w={ref:"inner",class:"v-popper__inner"},Mw=c("div",{class:"v-popper__arrow-outer"},null,-1),kw=c("div",{class:"v-popper__arrow-inner"},null,-1),Lw=[Mw,kw];function Dw(e,t,n,s,o,a){const i=F("ResizeObserver");return m(),f("div",{id:e.popperId,ref:"popover",class:re(["v-popper__popper",[e.themeClass,e.classes.popperClass,{"v-popper__popper--shown":e.shown,"v-popper__popper--hidden":!e.shown,"v-popper__popper--show-from":e.classes.showFrom,"v-popper__popper--show-to":e.classes.showTo,"v-popper__popper--hide-from":e.classes.hideFrom,"v-popper__popper--hide-to":e.classes.hideTo,"v-popper__popper--skip-transition":e.skipTransition,"v-popper__popper--arrow-overflow":e.result&&e.result.arrow.overflow,"v-popper__popper--no-positioning":!e.result}]]),style:At(e.result?{position:e.result.strategy,transform:`translate3d(${Math.round(e.result.x)}px,${Math.round(e.result.y)}px,0)`}:void 0),"aria-hidden":e.shown?"false":"true",tabindex:e.autoHide?0:void 0,"data-popper-placement":e.result?e.result.placement:void 0,onKeyup:t[2]||(t[2]=Fn(l=>e.autoHide&&e.$emit("hide"),["esc"]))},[c("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=l=>e.autoHide&&e.$emit("hide"))}),c("div",{class:"v-popper__wrapper",style:At(e.result?{transformOrigin:e.result.transformOrigin}:void 0)},[c("div",$w,[e.mounted?(m(),f(pe,{key:0},[c("div",null,[et(e.$slots,"default")]),e.handleResize?(m(),P(i,{key:0,onNotify:t[1]||(t[1]=l=>e.$emit("resize",l))})):x("",!0)],64)):x("",!0)],512),c("div",{ref:"arrow",class:"v-popper__arrow-container",style:At(e.result?{left:e.toPx(e.result.arrow.x),top:e.toPx(e.result.arrow.y)}:void 0)},Lw,4)],4)],46,Rw)}const yT=Hu(ww,[["render",Dw]]),AT={methods:{show(...e){return this.$refs.popper.show(...e)},hide(...e){return this.$refs.popper.hide(...e)},dispose(...e){return this.$refs.popper.dispose(...e)},onResize(...e){return this.$refs.popper.onResize(...e)}}};let Qh=function(){};typeof window<"u"&&(Qh=window.Element);const Pw=No({name:"VPopperWrapper",components:{Popper:Iw,PopperContent:yT},mixins:[AT,TT("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,Qh,Boolean],default:void 0},boundary:{type:[String,Qh],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(e=>e!==this.$refs.popperContent.$el)}}});function Bw(e,t,n,s,o,a){const i=F("PopperContent"),l=F("Popper");return m(),P(l,As({ref:"popper"},e.$props,{theme:e.finalTheme,"target-nodes":e.getTargetNodes,"popper-node":()=>e.$refs.popperContent.$el,class:[e.themeClass],onShow:t[0]||(t[0]=()=>e.$emit("show")),onHide:t[1]||(t[1]=()=>e.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=r=>e.$emit("update:shown",r)),onApplyShow:t[3]||(t[3]=()=>e.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>e.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>e.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>e.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>e.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>e.$emit("resize"))}),{default:j(({popperId:r,isShown:d,shouldMountContent:u,skipTransition:p,autoHide:h,show:g,hide:_,handleResize:T,onResize:S,classes:E,result:y})=>[et(e.$slots,"default",{shown:d,show:g,hide:_}),b(i,{ref:"popperContent","popper-id":r,theme:e.finalTheme,shown:d,mounted:u,"skip-transition":p,"auto-hide":h,"handle-resize":T,classes:E,result:y,onHide:_,onResize:S},{default:j(()=>[et(e.$slots,"popper",{shown:d,hide:_})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const cg=Hu(Pw,[["render",Bw]]),Fw={...cg,name:"VDropdown",vPopperTheme:"dropdown"},Uw={...cg,name:"VMenu",vPopperTheme:"menu"},Gw={...cg,name:"VTooltip",vPopperTheme:"tooltip"},Vw=No({name:"VTooltipDirective",components:{Popper:bT(),PopperContent:yT},mixins:[AT],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:e=>pc(e.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:e=>pc(e.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(e){if(typeof this.content=="function"&&this.$_isShown&&(e||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,n=this.content(this);n.then?n.then(s=>this.onResult(t,s)):this.onResult(t,n)}},onResult(e,t){e===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),Hw=["innerHTML"],Kw=["textContent"];function zw(e,t,n,s,o,a){const i=F("PopperContent"),l=F("Popper");return m(),P(l,As({ref:"popper"},e.$attrs,{theme:e.theme,"target-nodes":e.targetNodes,"popper-node":()=>e.$refs.popperContent.$el,onApplyShow:e.onShow,onApplyHide:e.onHide}),{default:j(({popperId:r,isShown:d,shouldMountContent:u,skipTransition:p,autoHide:h,hide:g,handleResize:_,onResize:T,classes:S,result:E})=>[b(i,{ref:"popperContent",class:re({"v-popper--tooltip-loading":e.loading}),"popper-id":r,theme:e.theme,shown:d,mounted:u,"skip-transition":p,"auto-hide":h,"handle-resize":_,classes:S,result:E,onHide:g,onResize:T},{default:j(()=>[e.html?(m(),f("div",{key:0,innerHTML:e.finalContent},null,8,Hw)):(m(),f("div",{key:1,textContent:v(e.finalContent)},null,8,Kw))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const Ww=Hu(Vw,[["render",zw]]),ST="v-popper--has-tooltip";function jw(e,t){let n=e.placement;if(!n&&t)for(const s of vT)t[s]&&(n=s);return n||(n=pc(e.theme||"tooltip","placement")),n}function IT(e,t,n){let s;const o=typeof t;return o==="string"?s={content:t}:t&&o==="object"?s=t:s={content:!1},s.placement=jw(s,n),s.targetNodes=()=>[e],s.referenceNode=()=>e,s}let Xm,hc,Yw=0;function Xw(){if(Xm)return;hc=U([]),Xm=AE({name:"VTooltipDirectiveApp",setup(){return{directives:hc}},render(){return this.directives.map(t=>kn(Ww,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const e=document.createElement("div");document.body.appendChild(e),Xm.mount(e)}function qw(e,t,n){Xw();const s=U(IT(e,t,n)),o=U(!1),a={id:Yw++,options:s,shown:o};return hc.value.push(a),e.classList&&e.classList.add(ST),e.$_popper={options:s,item:a,show(){o.value=!0},hide(){o.value=!1}}}function CT(e){if(e.$_popper){const t=hc.value.indexOf(e.$_popper.item);t!==-1&&hc.value.splice(t,1),delete e.$_popper,delete e.$_popperOldShown,delete e.$_popperMountTarget}e.classList&&e.classList.remove(ST)}function $v(e,{value:t,modifiers:n}){const s=IT(e,t,n);if(!s.content||pc(s.theme||"tooltip","disabled"))CT(e);else{let o;e.$_popper?(o=e.$_popper,o.options.value=s):o=qw(e,t,n),typeof t.shown<"u"&&t.shown!==e.$_popperOldShown&&(e.$_popperOldShown=t.shown,t.shown?o.show():o.hide())}}const Zw={beforeMount:$v,updated:$v,beforeUnmount(e){CT(e)}};function Mv(e){e.addEventListener("mousedown",pu),e.addEventListener("click",pu),e.addEventListener("touchstart",NT,Ql?{passive:!0}:!1)}function kv(e){e.removeEventListener("mousedown",pu),e.removeEventListener("click",pu),e.removeEventListener("touchstart",NT),e.removeEventListener("touchend",OT),e.removeEventListener("touchcancel",xT)}function pu(e){const t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function NT(e){if(e.changedTouches.length===1){const t=e.currentTarget;t.$_vclosepopover_touch=!0;const n=e.changedTouches[0];t.$_vclosepopover_touchPoint=n,t.addEventListener("touchend",OT),t.addEventListener("touchcancel",xT)}}function OT(e){const t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){const n=e.changedTouches[0],s=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-s.screenY)<20&&Math.abs(n.screenX-s.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function xT(e){const t=e.currentTarget;t.$_vclosepopover_touch=!1}const Qw={beforeMount(e,{value:t,modifiers:n}){e.$_closePopoverModifiers=n,(typeof t>"u"||t)&&Mv(e)},updated(e,{value:t,oldValue:n,modifiers:s}){e.$_closePopoverModifiers=s,t!==n&&(typeof t>"u"||t?Mv(e):kv(e))},beforeUnmount(e){kv(e)}};function Jw(e,t={}){e.$_vTooltipInstalled||(e.$_vTooltipInstalled=!0,gT(Ja,t),e.directive("tooltip",Zw),e.directive("close-popper",Qw),e.component("VTooltip",Gw),e.component("VDropdown",Fw),e.component("VMenu",Uw))}const eR={version:"5.2.2",install:Jw,options:Ja},tR={components:{NextButton:he},props:{label:{type:String,default:""},src:{type:String,default:""},usernameAvatar:{type:String,default:""},deleteAvatar:{type:Boolean,default:!1}},emits:["onAvatarSelect","onAvatarDelete"],watch:{},methods:{handleImageUpload(e){const[t]=e.target.files;this.$emit("onAvatarSelect",{file:t,url:t?URL.createObjectURL(t):null})},onAvatarDelete(){this.$refs.file.value=null,this.$emit("onAvatarDelete")}}},nR={key:0},sR={key:1,class:"avatar-delete-btn"};function aR(e,t,n,s,o,a){const i=F("woot-thumbnail"),l=F("NextButton");return m(),f("div",null,[c("label",null,[n.label?(m(),f("span",nR,v(n.label),1)):x("",!0)]),n.src?(m(),P(i,{key:0,size:"80px",src:n.src,username:n.usernameAvatar},null,8,["src","username"])):x("",!0),n.src&&n.deleteAvatar?(m(),f("div",sR,[b(l,{outline:"",xs:"",ruby:"",label:e.$t("INBOX_MGMT.DELETE.AVATAR_DELETE_BUTTON_TEXT"),onClick:a.onAvatarDelete},null,8,["label","onClick"])])):x("",!0),c("label",null,[c("input",{id:"file",ref:"file",type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",onChange:t[0]||(t[0]=(...r)=>a.handleImageUpload&&a.handleImageUpload(...r))},null,544),et(e.$slots,"default",{},void 0,!0)])])}const oR=Re(tR,[["render",aR],["__scopeId","data-v-66ff4e86"]]);var qm,Lv;function iR(){if(Lv)return qm;Lv=1;function e(t){const n=t.regex,s=n.concat(/[\p{L}_]/u,n.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),o=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=t.inherit(i,{begin:/\(/,end:/\)/}),r=t.inherit(t.APOS_STRING_MODE,{className:"string"}),d=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:o,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,d,r,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,l,d,r]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:n.concat(/</,n.lookahead(n.concat(s,n.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:s,relevance:0,starts:u}]},{className:"tag",begin:n.concat(/<\//,n.lookahead(n.concat(s,/>/))),contains:[{className:"name",begin:s,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return qm=e,qm}var Zm,Dv;function lR(){if(Dv)return Zm;Dv=1;function e(t){const n=t.regex,s={},o={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[s]}]};Object.assign(s,{className:"variable",variants:[{begin:n.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},o]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},i=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),l={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},r={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,s,a]};a.contains.push(r);const d={match:/\\"/},u={className:"string",begin:/'/,end:/'/},p={match:/\\'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,s]},g=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],_=t.SHEBANG({binary:`(${g.join("|")})`,relevance:10}),T={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},S=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],E=["true","false"],y={match:/(\/[a-z._-]+)+/},A=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],C=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],O=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],N=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:S,literal:E,built_in:[...A,...C,"set","shopt",...O,...N]},contains:[_,t.SHEBANG(),T,h,i,l,y,r,d,u,p,s]}}return Zm=e,Zm}var Qm,Pv;function rR(){if(Pv)return Qm;Pv=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),o="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",l="("+o+"|"+n.optional(a)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",r={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:n.optional(a)+t.IDENT_RE,relevance:0},_=n.optional(a)+t.IDENT_RE+"\\s*\\(",E={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},y=[h,r,s,t.C_BLOCK_COMMENT_MODE,p,u],A={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:E,contains:y.concat([{begin:/\(/,end:/\)/,keywords:E,contains:y.concat(["self"]),relevance:0}]),relevance:0},C={begin:"("+l+"[\\*&\\s]+)+"+_,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:E,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:o,keywords:E,relevance:0},{begin:_,returnBegin:!0,contains:[t.inherit(g,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,p,r,{begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,p,r]}]},r,s,t.C_BLOCK_COMMENT_MODE,h]};return{name:"C",aliases:["h"],keywords:E,disableAutodetect:!0,illegal:"</",contains:[].concat(A,C,y,[h,{begin:t.IDENT_RE+"::",keywords:E},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:h,strings:u,keywords:E}}}return Qm=e,Qm}var Jm,Bv;function cR(){if(Bv)return Jm;Bv=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),o="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",l="(?!struct)("+o+"|"+n.optional(a)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",r={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:n.optional(a)+t.IDENT_RE,relevance:0},_=n.optional(a)+t.IDENT_RE+"\\s*\\(",T=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],S=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],E=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],O={type:S,keyword:T,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:E},N={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:n.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,n.lookahead(/(<[^<>]+>|)\s*\(/))},R=[N,h,r,s,t.C_BLOCK_COMMENT_MODE,p,u],k={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:O,contains:R.concat([{begin:/\(/,end:/\)/,keywords:O,contains:R.concat(["self"]),relevance:0}]),relevance:0},L={className:"function",begin:"("+l+"[\\*&\\s]+)+"+_,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:O,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:o,keywords:O,relevance:0},{begin:_,returnBegin:!0,contains:[g],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:O,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,p,r,{begin:/\(/,end:/\)/,keywords:O,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,p,r]}]},r,s,t.C_BLOCK_COMMENT_MODE,h]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:O,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(k,L,N,R,[h,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:O,contains:["self",r]},{begin:t.IDENT_RE+"::",keywords:O},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}return Jm=e,Jm}var ep,Fv;function dR(){if(Fv)return ep;Fv=1;function e(t){const n=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],s=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],o=["default","false","null","true"],a=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],l={keyword:a.concat(i),built_in:n,literal:o},r=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},p={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},h=t.inherit(p,{illegal:/\n/}),g={className:"subst",begin:/\{/,end:/\}/,keywords:l},_=t.inherit(g,{illegal:/\n/}),T={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,_]},S={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]},E=t.inherit(S,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},_]});g.contains=[S,T,p,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,t.C_BLOCK_COMMENT_MODE],_.contains=[E,T,h,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const y={variants:[u,S,T,p,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},A={begin:"<",end:">",contains:[{beginKeywords:"in out"},r]},C=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",O={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:l,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},y,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},r,A,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,A,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+C+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:l,contains:[{beginKeywords:s.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,A],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,relevance:0,contains:[y,d,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},O]}}return ep=e,ep}var tp,Uv;function uR(){if(Uv)return tp;Uv=1;const e=d=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:d.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:d.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],o=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),a=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function r(d){const u=d.regex,p=e(d),h={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},g="and or not only",_=/@-?\w[\w]*(-\w+)*/,T="[a-zA-Z-][a-zA-Z0-9_-]*",S=[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[p.BLOCK_COMMENT,h,p.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+T,relevance:0},p.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+a.join("|")+")"},{begin:":(:)?("+i.join("|")+")"}]},p.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[p.BLOCK_COMMENT,p.HEXCOLOR,p.IMPORTANT,p.CSS_NUMBER_MODE,...S,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...S,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},p.FUNCTION_DISPATCH]},{begin:u.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:_},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:g,attribute:o.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...S,p.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b"}]}}return tp=r,tp}var np,Gv;function mR(){if(Gv)return np;Gv=1;function e(t){const n=t.regex,s={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},o={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},l={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},r=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:n.concat(/\[.+?\]\(/,r,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},p={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},h=t.inherit(u,{contains:[]}),g=t.inherit(p,{contains:[]});u.contains.push(g),p.contains.push(h);let _=[s,d];return[u,p,h,g].forEach(y=>{y.contains=y.contains.concat(_)}),_=_.concat(u,p),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:_},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:_}]}]},s,i,u,p,{className:"quote",begin:"^>\\s+",contains:_,end:"$"},a,o,d,l,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}return np=e,np}var sp,Vv;function pR(){if(Vv)return sp;Vv=1;function e(t){const n=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:n.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:n.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}return sp=e,sp}var ap,Hv;function hR(){if(Hv)return ap;Hv=1;function e(t){const n=t.regex,s="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",o=n.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),a=n.concat(o,/(::\w+)*/),l={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},r={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[r]}),t.COMMENT("^=begin","^=end",{contains:[r],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],p={className:"subst",begin:/#\{/,end:/\}/,keywords:l},h={className:"string",contains:[t.BACKSLASH_ESCAPE,p],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:n.concat(/<<[-~]?'?/,n.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,p]})]}]},g="[1-9](_?[0-9])*|0",_="[0-9](_?[0-9])*",T={className:"number",relevance:0,variants:[{begin:`\\b(${g})(\\.(${_}))?([eE][+-]?(${_})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},S={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:l}]},R=[h,{variants:[{match:[/class\s+/,a,/\s+<\s+/,a]},{match:[/\b(class|module)\s+/,a]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:l},{match:[/(include|extend)\s+/,a],scope:{2:"title.class"},keywords:l},{relevance:0,match:[a,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:o,scope:"title.class"},{match:[/def/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[S]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[h,{begin:s}],relevance:0},T,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:l},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,p],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,u),relevance:0}].concat(d,u);p.contains=R,S.contains=R;const $=[{begin:/^\s*=>/,starts:{end:"$",contains:R}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:l,contains:R}}];return u.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:l,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat($).concat(u).concat(R)}}return ap=e,ap}var op,Kv;function fR(){if(Kv)return op;Kv=1;function e(t){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}return op=e,op}var ip,zv;function gR(){if(zv)return ip;zv=1;function e(t){const n=t.regex,s=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:n.concat(s,n.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}return ip=e,ip}var lp,Wv;function _R(){if(Wv)return lp;Wv=1;function e(t){const n=t.regex,s={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},o=t.COMMENT();o.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const a={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},l={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},r={begin:/\[/,end:/\]/,contains:[o,i,a,l,s,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,p=/'[^']*'/,h=n.either(d,u,p),g=n.concat(h,"(\\s*\\.\\s*",h,")*",n.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[o,{className:"section",begin:/\[+/,end:/\]+/},{begin:g,className:"attr",starts:{end:/$/,contains:[o,r,i,a,l,s]}}]}}return lp=e,lp}var rp,jv;function vR(){if(jv)return rp;jv=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function o(i,l,r){return r===-1?"":i.replace(l,d=>o(i,l,r-1))}function a(i){const l=i.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",d=r+o("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),_={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},T={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},S={className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[i.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:_,illegal:/<\/|#/,contains:[i.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[i.BACKSLASH_ESCAPE]},i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[l.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[S,i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+d+"\\s+)",i.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:_,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[T,i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,s,i.C_BLOCK_COMMENT_MODE]},i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE]},s,T]}}return rp=a,rp}var cp,Yv;function bR(){if(Yv)return cp;Yv=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],o=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],a=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],i=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],l=[].concat(a,s,o);function r(d){const u=d.regex,p=(ue,{after:te})=>{const ce="</"+ue[0].slice(1);return ue.input.indexOf(ce,te)!==-1},h=e,g={begin:"<>",end:"</>"},_=/<[A-Za-z0-9\\._:-]+\s*\/>/,T={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ue,te)=>{const ce=ue[0].length+ue.index,fe=ue.input[ce];if(fe==="<"||fe===","){te.ignoreMatch();return}fe===">"&&(p(ue,{after:ce})||te.ignoreMatch());let ke;const De=ue.input.substring(ce);if(ke=De.match(/^\s*=/)){te.ignoreMatch();return}if((ke=De.match(/^\s+extends\s+/))&&ke.index===0){te.ignoreMatch();return}}},S={$pattern:e,keyword:t,literal:n,built_in:l,"variable.language":i},E="[0-9](_?[0-9])*",y=`\\.(${E})`,A="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",C={className:"number",variants:[{begin:`(\\b(${A})((${y})|\\.)?|(${y}))[eE][+-]?(${E})\\b`},{begin:`\\b(${A})\\b((${y})\\b|\\.)?|(${y})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},O={className:"subst",begin:"\\$\\{",end:"\\}",keywords:S,contains:[]},N={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,O],subLanguage:"xml"}},R={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,O],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,O],subLanguage:"graphql"}},L={className:"string",begin:"`",end:"`",contains:[d.BACKSLASH_ESCAPE,O]},$={className:"comment",variants:[d.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:h+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),d.C_BLOCK_COMMENT_MODE,d.C_LINE_COMMENT_MODE]},M=[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE,N,R,k,L,{match:/\$\d+/},C];O.contains=M.concat({begin:/\{/,end:/\}/,keywords:S,contains:["self"].concat(M)});const K=[].concat($,O.contains),B=K.concat([{begin:/(\s*)\(/,end:/\)/,keywords:S,contains:["self"].concat(K)}]),H={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:S,contains:B},G={variants:[{match:[/class/,/\s+/,h,/\s+/,/extends/,/\s+/,u.concat(h,"(",u.concat(/\./,h),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,h],scope:{1:"keyword",3:"title.class"}}]},V={relevance:0,match:u.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...o]}},Y={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ee={variants:[{match:[/function/,/\s+/,h,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[H],illegal:/%/},X={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function z(ue){return u.concat("(?!",ue.join("|"),")")}const W={match:u.concat(/\b/,z([...a,"super","import"].map(ue=>`${ue}\\s*\\(`)),h,u.lookahead(/\s*\(/)),className:"title.function",relevance:0},q={begin:u.concat(/\./,u.lookahead(u.concat(h,/(?![0-9A-Za-z$_(])/))),end:h,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Z={match:[/get|set/,/\s+/,h,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},H]},ne="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+d.UNDERSCORE_IDENT_RE+")\\s*=>",ae={match:[/const|var|let/,/\s+/,h,/\s*/,/=\s*/,/(async\s*)?/,u.lookahead(ne)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[H]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:S,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:V},illegal:/#(?![$_A-z])/,contains:[d.SHEBANG({label:"shebang",binary:"node",relevance:5}),Y,d.APOS_STRING_MODE,d.QUOTE_STRING_MODE,N,R,k,L,$,{match:/\$\d+/},C,V,{className:"attr",begin:h+u.lookahead(":"),relevance:0},ae,{begin:"("+d.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[$,d.REGEXP_MODE,{className:"function",begin:ne,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:d.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:S,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:g.begin,end:g.end},{match:_},{begin:T.begin,"on:begin":T.isTrulyOpeningTag,end:T.end}],subLanguage:"xml",contains:[{begin:T.begin,end:T.end,skip:!0,contains:["self"]}]}]},ee,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+d.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[H,d.inherit(d.TITLE_MODE,{begin:h,className:"title.function"})]},{match:/\.\.\./,relevance:0},q,{match:"\\$"+h,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[H]},W,X,G,Z,{match:/\$[(.]/}]}}return cp=r,cp}var dp,Xv;function ER(){if(Xv)return dp;Xv=1;function e(t){const n={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},s={match:/[{}[\],:]/,className:"punctuation",relevance:0},o=["true","false","null"],a={scope:"literal",beginKeywords:o.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:o},contains:[n,s,t.QUOTE_STRING_MODE,a,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}return dp=e,dp}var up,qv;function TR(){if(qv)return up;qv=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function o(a){const i={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},l={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:a.UNDERSCORE_IDENT_RE+"@"},d={className:"subst",begin:/\$\{/,end:/\}/,contains:[a.C_NUMBER_MODE]},u={className:"variable",begin:"\\$"+a.UNDERSCORE_IDENT_RE},p={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[u,d]},{begin:"'",end:"'",illegal:/\n/,contains:[a.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[a.BACKSLASH_ESCAPE,u,d]}]};d.contains.push(p);const h={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+a.UNDERSCORE_IDENT_RE+")?"},g={className:"meta",begin:"@"+a.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[a.inherit(p,{className:"string"}),"self"]}]},_=s,T=a.COMMENT("/\\*","\\*/",{contains:[a.C_BLOCK_COMMENT_MODE]}),S={variants:[{className:"type",begin:a.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},E=S;return E.variants[1].contains=[S],S.variants[1].contains=[E],{name:"Kotlin",aliases:["kt","kts"],keywords:i,contains:[a.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),a.C_LINE_COMMENT_MODE,T,l,r,h,g,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:i,relevance:5,contains:[{begin:a.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[a.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[S,a.C_LINE_COMMENT_MODE,T],relevance:0},a.C_LINE_COMMENT_MODE,T,h,g,p,a.C_NUMBER_MODE]},T]},{begin:[/class|interface|trait/,/\s+/,a.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},a.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},h,g]},p,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},_]}}return up=o,up}var mp,Zv;function yR(){if(Zv)return mp;Zv=1;const e=u=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:u.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:u.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],o=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),a=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse(),r=a.concat(i).sort().reverse();function d(u){const p=e(u),h=r,g="and or not only",_="[\\w-]+",T="("+_+"|@\\{"+_+"\\})",S=[],E=[],y=function(K){return{className:"string",begin:"~?"+K+".*?"+K}},A=function(K,B,H){return{className:K,begin:B,relevance:H}},C={$pattern:/[a-z-]+/,keyword:g,attribute:o.join(" ")},O={begin:"\\(",end:"\\)",contains:E,keywords:C,relevance:0};E.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,y("'"),y('"'),p.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},p.HEXCOLOR,O,A("variable","@@?"+_,10),A("variable","@\\{"+_+"\\}"),A("built_in","~?`[^`]*?`"),{className:"attribute",begin:_+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},p.IMPORTANT,{beginKeywords:"and not"},p.FUNCTION_DISPATCH);const N=E.concat({begin:/\{/,end:/\}/,contains:S}),R={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(E)},k={begin:T+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},p.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:E}}]},L={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:C,returnEnd:!0,contains:E,relevance:0}},D={className:"variable",variants:[{begin:"@"+_+"\\s*:",relevance:15},{begin:"@"+_}],starts:{end:"[;}]",returnEnd:!0,contains:N}},$={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:T,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,R,A("keyword","all\\b"),A("variable","@\\{"+_+"\\}"),{begin:"\\b("+s.join("|")+")\\b",className:"selector-tag"},p.CSS_NUMBER_MODE,A("selector-tag",T,0),A("selector-id","#"+T),A("selector-class","\\."+T,0),A("selector-tag","&",0),p.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+a.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+i.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:N},{begin:"!important"},p.FUNCTION_DISPATCH]},M={begin:_+`:(:)?(${h.join("|")})`,returnBegin:!0,contains:[$]};return S.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,L,D,M,k,$,R,p.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:S}}return mp=d,mp}var pp,Qv;function AR(){if(Qv)return pp;Qv=1;function e(t){const n="\\[=*\\[",s="\\]=*\\]",o={begin:n,end:s,contains:["self"]},a=[t.COMMENT("--(?!"+n+")","$"),t.COMMENT("--"+n,s,{contains:[o],relevance:10})];return{name:"Lua",keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:a.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:a}].concat(a)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:n,end:s,contains:[o],relevance:5}])}}return pp=e,pp}var hp,Jv;function SR(){if(Jv)return hp;Jv=1;function e(t){const n={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},s={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n]},o={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[n]},a={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},l={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[n]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,n,s,o,a,i,l]}}return hp=e,hp}var fp,e0;function IR(){if(e0)return fp;e0=1;function e(t){const n=t.regex,s=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],o=/[dualxmsipngr]{0,12}/,a={$pattern:/[\w.]+/,keyword:s.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:a},l={begin:/->\{/,end:/\}/},r={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:n.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[r]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},p=[t.BACKSLASH_ESCAPE,i,d],h=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],g=(S,E,y="\\1")=>{const A=y==="\\1"?y:n.concat(y,E);return n.concat(n.concat("(?:",S,")"),E,/(?:\\.|[^\\\/])*?/,A,/(?:\\.|[^\\\/])*?/,y,o)},_=(S,E,y)=>n.concat(n.concat("(?:",S,")"),E,/(?:\\.|[^\\\/])*?/,y,o),T=[d,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),l,{className:"string",contains:p,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:g("s|tr|y",n.either(...h,{capture:!0}))},{begin:g("s|tr|y","\\(","\\)")},{begin:g("s|tr|y","\\[","\\]")},{begin:g("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:_("(?:m|qr)?",/\//,/\//)},{begin:_("m|qr",n.either(...h,{capture:!0}),/\1/)},{begin:_("m|qr",/\(/,/\)/)},{begin:_("m|qr",/\[/,/\]/)},{begin:_("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,r]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,r,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=T,l.contains=T,{name:"Perl",aliases:["pl","pm"],keywords:a,contains:T}}return fp=e,fp}var gp,t0;function CR(){if(t0)return gp;t0=1;function e(t){const n={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},s=/[a-zA-Z@][a-zA-Z0-9_]*/,r={"variable.language":["this","super"],$pattern:s,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:s,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:r,illegal:"</",contains:[n,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}return gp=e,gp}var _p,n0;function NR(){if(n0)return _p;n0=1;function e(t){const n=t.regex,s=/(?![A-Za-z0-9])(?![$])/,o=n.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,s),a=n.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,s),i={scope:"variable",match:"\\$+"+o},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},r={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},d=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(r)}),p={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(r),"on:begin":(B,H)=>{H.data._beginMatch=B[1]||B[2]},"on:end":(B,H)=>{H.data._beginMatch!==B[1]&&H.ignoreMatch()}},h=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,_={scope:"string",variants:[u,d,p,h]},T={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},S=["false","null","true"],E=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],y=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],C={keyword:E,literal:(B=>{const H=[];return B.forEach(G=>{H.push(G),G.toLowerCase()===G?H.push(G.toUpperCase()):H.push(G.toLowerCase())}),H})(S),built_in:y},O=B=>B.map(H=>H.replace(/\|\d+$/,"")),N={variants:[{match:[/new/,n.concat(g,"+"),n.concat("(?!",O(y).join("\\b|"),"\\b)"),a],scope:{1:"keyword",4:"title.class"}}]},R=n.concat(o,"\\b(?!\\()"),k={variants:[{match:[n.concat(/::/,n.lookahead(/(?!class\b)/)),R],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[a,n.concat(/::/,n.lookahead(/(?!class\b)/)),R],scope:{1:"title.class",3:"variable.constant"}},{match:[a,n.concat("::",n.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[a,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},L={scope:"attr",match:n.concat(o,n.lookahead(":"),n.lookahead(/(?!::)/))},D={relevance:0,begin:/\(/,end:/\)/,keywords:C,contains:[L,i,k,t.C_BLOCK_COMMENT_MODE,_,T,N]},$={relevance:0,match:[/\b/,n.concat("(?!fn\\b|function\\b|",O(E).join("\\b|"),"|",O(y).join("\\b|"),"\\b)"),o,n.concat(g,"*"),n.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[D]};D.contains.push($);const M=[L,k,t.C_BLOCK_COMMENT_MODE,_,T,N],K={begin:n.concat(/#\[\s*/,a),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:S,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:S,keyword:["new","array"]},contains:["self",...M]},...M,{scope:"meta",match:a}]};return{case_insensitive:!1,keywords:C,contains:[K,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},i,$,k,{match:[/const/,/\s/,o],scope:{1:"keyword",3:"variable.constant"}},N,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:C,contains:["self",i,k,t.C_BLOCK_COMMENT_MODE,_,T]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},_,T]}}return _p=e,_p}var vp,s0;function OR(){if(s0)return vp;s0=1;function e(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}return vp=e,vp}var bp,a0;function xR(){if(a0)return bp;a0=1;function e(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return bp=e,bp}var Ep,o0;function wR(){if(o0)return Ep;o0=1;function e(t){const n=t.regex,s=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),o=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:o,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},p={begin:/\{\{/,relevance:0},h={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,d,p,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,d,p,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,p,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,p,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},g="[0-9](_?[0-9])*",_=`(\\b(${g}))?\\.(${g})|\\b(${g})\\.`,T=`\\b|${o.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${g})|(${_}))[eE][+-]?(${g})[jJ]?(?=${T})`},{begin:`(${_})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${T})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${T})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${T})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${T})`},{begin:`\\b(${g})[jJ](?=${T})`}]},E={className:"comment",begin:n.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},y={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",d,S,h,t.HASH_COMMENT_MODE]}]};return u.contains=[h,S,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|\?)|=>/,contains:[d,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},h,E,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[y]},{variants:[{match:[/\bclass/,/\s+/,s,/\s*/,/\(\s*/,s,/\s*\)/]},{match:[/\bclass/,/\s+/,s]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,y,h]}]}}return Ep=e,Ep}var Tp,i0;function RR(){if(i0)return Tp;i0=1;function e(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}return Tp=e,Tp}var yp,l0;function $R(){if(l0)return yp;l0=1;function e(t){const n=t.regex,s=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,o=n.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),a=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=n.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:s,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:n.lookahead(n.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:s},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[a,o]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,o]},{scope:{1:"punctuation",2:"number"},match:[i,o]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,o]}]},{scope:{3:"operator"},match:[s,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:a},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}return yp=e,yp}var Ap,r0;function MR(){if(r0)return Ap;r0=1;function e(t){const n=t.regex,s=/(r#)?/,o=n.concat(s,t.UNDERSCORE_IDENT_RE),a=n.concat(s,t.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:n.concat(/\b/,/(?!let|for|while|if|else|match\b)/,a,n.lookahead(/\s*\(/))},l="([ui](8|16|32|64|128|size)|f(32|64))?",r=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],p=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:p,keyword:r,literal:d,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+l},{begin:"\\b0o([0-7_]+)"+l},{begin:"\\b0x([A-Fa-f0-9_]+)"+l},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+l}],relevance:0},{begin:[/fn/,/\s+/,o],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,o],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,o,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,o],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,o],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:p}},{className:"punctuation",begin:"->"},i]}}return Ap=e,Ap}var Sp,c0;function kR(){if(c0)return Sp;c0=1;const e=d=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:d.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:d.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],o=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),a=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function r(d){const u=e(d),p=i,h=a,g="@[a-z-]+",_="and or not only",S={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[d.C_LINE_COMMENT_MODE,d.C_BLOCK_COMMENT_MODE,u.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+h.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+p.join("|")+")"},S,{begin:/\(/,end:/\)/,contains:[u.CSS_NUMBER_MODE]},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[u.BLOCK_COMMENT,S,u.HEXCOLOR,u.CSS_NUMBER_MODE,d.QUOTE_STRING_MODE,d.APOS_STRING_MODE,u.IMPORTANT,u.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:g,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:_,attribute:o.join(" ")},contains:[{begin:g,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},S,d.QUOTE_STRING_MODE,d.APOS_STRING_MODE,u.HEXCOLOR,u.CSS_NUMBER_MODE]},u.FUNCTION_DISPATCH]}}return Sp=r,Sp}var Ip,d0;function LR(){if(d0)return Ip;d0=1;function e(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}return Ip=e,Ip}var Cp,u0;function DR(){if(u0)return Cp;u0=1;function e(t){const n=t.regex,s=t.COMMENT("--","$"),o={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},a={begin:/"/,end:/"/,contains:[{begin:/""/}]},i=["true","false","unknown"],l=["double precision","large object","with timezone","without timezone"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],p=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],h=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],g=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],_=p,T=[...u,...d].filter(C=>!p.includes(C)),S={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},E={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},y={begin:n.concat(/\b/,n.either(..._),/\s*\(/),relevance:0,keywords:{built_in:_}};function A(C,{exceptions:O,when:N}={}){const R=N;return O=O||[],C.map(k=>k.match(/\|\d+$/)||O.includes(k)?k:R(k)?`${k}|0`:k)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:A(T,{when:C=>C.length<3}),literal:i,type:r,built_in:h},contains:[{begin:n.either(...g),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:T.concat(g),literal:i,type:r}},{className:"type",begin:n.either(...l)},y,S,o,a,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,s,E]}}return Cp=e,Cp}var Np,m0;function PR(){if(m0)return Np;m0=1;function e(k){return k?typeof k=="string"?k:k.source:null}function t(k){return n("(?=",k,")")}function n(...k){return k.map(D=>e(D)).join("")}function s(k){const L=k[k.length-1];return typeof L=="object"&&L.constructor===Object?(k.splice(k.length-1,1),L):{}}function o(...k){return"("+(s(k).capture?"":"?:")+k.map($=>e($)).join("|")+")"}const a=k=>n(/\b/,k,/\w$/.test(k)?/\b/:/\B/),i=["Protocol","Type"].map(a),l=["init","self"].map(a),r=["Any","Self"],d=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],u=["false","nil","true"],p=["assignment","associativity","higherThan","left","lowerThan","none","right"],h=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],g=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],_=o(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),T=o(_,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),S=n(_,T,"*"),E=o(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),y=o(E,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),A=n(E,y,"*"),C=n(/[A-Z]/,y,"*"),O=["attached","autoclosure",n(/convention\(/,o("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",n(/objc\(/,A,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],N=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function R(k){const L={match:/\s+/,relevance:0},D=k.COMMENT("/\\*","\\*/",{contains:["self"]}),$=[k.C_LINE_COMMENT_MODE,D],M={match:[/\./,o(...i,...l)],className:{2:"keyword"}},K={match:n(/\./,o(...d)),relevance:0},B=d.filter(ve=>typeof ve=="string").concat(["_|0"]),H=d.filter(ve=>typeof ve!="string").concat(r).map(a),G={variants:[{className:"keyword",match:o(...H,...l)}]},V={$pattern:o(/\b\w+/,/#\w+/),keyword:B.concat(h),literal:u},Y=[M,K,G],ee={match:n(/\./,o(...g)),relevance:0},X={className:"built_in",match:n(/\b/,o(...g),/(?=\()/)},z=[ee,X],W={match:/->/,relevance:0},q={className:"operator",relevance:0,variants:[{match:S},{match:`\\.(\\.|${T})+`}]},Z=[W,q],ne="([0-9]_*)+",ae="([0-9a-fA-F]_*)+",ue={className:"number",relevance:0,variants:[{match:`\\b(${ne})(\\.(${ne}))?([eE][+-]?(${ne}))?\\b`},{match:`\\b0x(${ae})(\\.(${ae}))?([pP][+-]?(${ne}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},te=(ve="")=>({className:"subst",variants:[{match:n(/\\/,ve,/[0\\tnr"']/)},{match:n(/\\/,ve,/u\{[0-9a-fA-F]{1,8}\}/)}]}),ce=(ve="")=>({className:"subst",match:n(/\\/,ve,/[\t ]*(?:[\r\n]|\r\n)/)}),fe=(ve="")=>({className:"subst",label:"interpol",begin:n(/\\/,ve,/\(/),end:/\)/}),ke=(ve="")=>({begin:n(ve,/"""/),end:n(/"""/,ve),contains:[te(ve),ce(ve),fe(ve)]}),De=(ve="")=>({begin:n(ve,/"/),end:n(/"/,ve),contains:[te(ve),fe(ve)]}),Fe={className:"string",variants:[ke(),ke("#"),ke("##"),ke("###"),De(),De("#"),De("##"),De("###")]},je=[k.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[k.BACKSLASH_ESCAPE]}],Qe={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:je},Ze=ve=>{const me=n(ve,/\//),Oe=n(/\//,ve);return{begin:me,end:Oe,contains:[...je,{scope:"comment",begin:`#(?!.*${Oe})`,end:/$/}]}},ft={scope:"regexp",variants:[Ze("###"),Ze("##"),Ze("#"),Qe]},kt={match:n(/`/,A,/`/)},Q={className:"variable",match:/\$\d+/},oe={className:"variable",match:`\\$${y}+`},de=[kt,Q,oe],Ce={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:N,contains:[...Z,ue,Fe]}]}},Ae={scope:"keyword",match:n(/@/,o(...O),t(o(/\(/,/\s+/)))},Le={scope:"meta",match:n(/@/,A)},Me=[Ce,Ae,Le],Ue={match:t(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:n(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,y,"+")},{className:"type",match:C,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:n(/\s+&\s+/,t(C)),relevance:0}]},we={begin:/</,end:/>/,keywords:V,contains:[...$,...Y,...Me,W,Ue]};Ue.contains.push(we);const ge={match:n(A,/\s*:/),keywords:"_|0",relevance:0},J={begin:/\(/,end:/\)/,relevance:0,keywords:V,contains:["self",ge,...$,ft,...Y,...z,...Z,ue,Fe,...de,...Me,Ue]},Ee={begin:/</,end:/>/,keywords:"repeat each",contains:[...$,Ue]},$e={begin:o(t(n(A,/\s*:/)),t(n(A,/\s+/,A,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:A}]},se={begin:/\(/,end:/\)/,keywords:V,contains:[$e,...$,...Y,...Z,ue,Fe,...Me,Ue,J],endsParent:!0,illegal:/["']/},le={match:[/(func|macro)/,/\s+/,o(kt.match,A,S)],className:{1:"keyword",3:"title.function"},contains:[Ee,se,L],illegal:[/\[/,/%/]},_e={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ee,se,L],illegal:/\[|%/},Ie={match:[/operator/,/\s+/,S],className:{1:"keyword",3:"title"}},Pe={begin:[/precedencegroup/,/\s+/,C],className:{1:"keyword",3:"title"},contains:[Ue],keywords:[...p,...u],end:/}/},Ne={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,A,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:V,contains:[Ee,...Y,{begin:/:/,end:/\{/,keywords:V,contains:[{scope:"title.class.inherited",match:C},...Y],relevance:0}]};for(const ve of Fe.variants){const me=ve.contains.find(Ge=>Ge.label==="interpol");me.keywords=V;const Oe=[...Y,...z,...Z,ue,Fe,...de];me.contains=[...Oe,{begin:/\(/,end:/\)/,contains:["self",...Oe]}]}return{name:"Swift",keywords:V,contains:[...$,le,_e,Ne,Ie,Pe,{beginKeywords:"import",end:/$/,contains:[...$],relevance:0},ft,...Y,...z,...Z,ue,Fe,...de,...Me,Ue,J]}}return Np=R,Np}var Op,p0;function BR(){if(p0)return Op;p0=1;function e(t){const n="true false yes no null",s="[\\w#;/?:@&=+$,.~*'()[\\]]+",o={className:"attr",variants:[{begin:/\w[\w :()\./-]*:(?=[ \t]|$)/},{begin:/"\w[\w :()\./-]*":(?=[ \t]|$)/},{begin:/'\w[\w :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,a]},l=t.inherit(i,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},_={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},T={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},S=[o,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+s},{className:"type",begin:"!<"+s+">"},{className:"type",begin:"!"+s},{className:"type",begin:"!!"+s},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},h,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},_,T,i],E=[...S];return E.pop(),E.push(l),g.contains=E,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:S}}return Op=e,Op}var xp,h0;function FR(){if(h0)return xp;h0=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],o=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],a=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],i=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],l=[].concat(a,s,o);function r(u){const p=u.regex,h=(te,{after:ce})=>{const fe="</"+te[0].slice(1);return te.input.indexOf(fe,ce)!==-1},g=e,_={begin:"<>",end:"</>"},T=/<[A-Za-z0-9\\._:-]+\s*\/>/,S={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(te,ce)=>{const fe=te[0].length+te.index,ke=te.input[fe];if(ke==="<"||ke===","){ce.ignoreMatch();return}ke===">"&&(h(te,{after:fe})||ce.ignoreMatch());let De;const Fe=te.input.substring(fe);if(De=Fe.match(/^\s*=/)){ce.ignoreMatch();return}if((De=Fe.match(/^\s+extends\s+/))&&De.index===0){ce.ignoreMatch();return}}},E={$pattern:e,keyword:t,literal:n,built_in:l,"variable.language":i},y="[0-9](_?[0-9])*",A=`\\.(${y})`,C="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",O={className:"number",variants:[{begin:`(\\b(${C})((${A})|\\.)?|(${A}))[eE][+-]?(${y})\\b`},{begin:`\\b(${C})\\b((${A})\\b|\\.)?|(${A})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},N={className:"subst",begin:"\\$\\{",end:"\\}",keywords:E,contains:[]},R={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,N],subLanguage:"xml"}},k={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,N],subLanguage:"css"}},L={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,N],subLanguage:"graphql"}},D={className:"string",begin:"`",end:"`",contains:[u.BACKSLASH_ESCAPE,N]},M={className:"comment",variants:[u.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:g+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),u.C_BLOCK_COMMENT_MODE,u.C_LINE_COMMENT_MODE]},K=[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,R,k,L,D,{match:/\$\d+/},O];N.contains=K.concat({begin:/\{/,end:/\}/,keywords:E,contains:["self"].concat(K)});const B=[].concat(M,N.contains),H=B.concat([{begin:/(\s*)\(/,end:/\)/,keywords:E,contains:["self"].concat(B)}]),G={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:E,contains:H},V={variants:[{match:[/class/,/\s+/,g,/\s+/,/extends/,/\s+/,p.concat(g,"(",p.concat(/\./,g),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,g],scope:{1:"keyword",3:"title.class"}}]},Y={relevance:0,match:p.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...o]}},ee={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},X={variants:[{match:[/function/,/\s+/,g,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[G],illegal:/%/},z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function W(te){return p.concat("(?!",te.join("|"),")")}const q={match:p.concat(/\b/,W([...a,"super","import"].map(te=>`${te}\\s*\\(`)),g,p.lookahead(/\s*\(/)),className:"title.function",relevance:0},Z={begin:p.concat(/\./,p.lookahead(p.concat(g,/(?![0-9A-Za-z$_(])/))),end:g,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ne={match:[/get|set/,/\s+/,g,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},G]},ae="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+u.UNDERSCORE_IDENT_RE+")\\s*=>",ue={match:[/const|var|let/,/\s+/,g,/\s*/,/=\s*/,/(async\s*)?/,p.lookahead(ae)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[G]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:E,exports:{PARAMS_CONTAINS:H,CLASS_REFERENCE:Y},illegal:/#(?![$_A-z])/,contains:[u.SHEBANG({label:"shebang",binary:"node",relevance:5}),ee,u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,R,k,L,D,M,{match:/\$\d+/},O,Y,{className:"attr",begin:g+p.lookahead(":"),relevance:0},ue,{begin:"("+u.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[M,u.REGEXP_MODE,{className:"function",begin:ae,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:u.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:E,contains:H}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:_.begin,end:_.end},{match:T},{begin:S.begin,"on:begin":S.isTrulyOpeningTag,end:S.end}],subLanguage:"xml",contains:[{begin:S.begin,end:S.end,skip:!0,contains:["self"]}]}]},X,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+u.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[G,u.inherit(u.TITLE_MODE,{begin:g,className:"title.function"})]},{match:/\.\.\./,relevance:0},Z,{match:"\\$"+g,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[G]},q,z,V,ne,{match:/\$[(.]/}]}}function d(u){const p=r(u),h=e,g=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],_={begin:[/namespace/,/\s+/,u.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},T={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:g},contains:[p.exports.CLASS_REFERENCE]},S={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},E=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],y={$pattern:e,keyword:t.concat(E),literal:n,built_in:l.concat(g),"variable.language":i},A={className:"meta",begin:"@"+h},C=(R,k,L)=>{const D=R.contains.findIndex($=>$.label===k);if(D===-1)throw new Error("can not find mode to replace");R.contains.splice(D,1,L)};Object.assign(p.keywords,y),p.exports.PARAMS_CONTAINS.push(A);const O=p.contains.find(R=>R.className==="attr");p.exports.PARAMS_CONTAINS.push([p.exports.CLASS_REFERENCE,O]),p.contains=p.contains.concat([A,_,T]),C(p,"shebang",u.SHEBANG()),C(p,"use_strict",S);const N=p.contains.find(R=>R.label==="func.def");return N.relevance=0,Object.assign(p,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),p}return xp=d,xp}var wp,f0;function UR(){if(f0)return wp;f0=1;function e(t){const n=t.regex,s={className:"string",begin:/"(""|[^/n])"C\b/},o={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,l=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,r=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:n.concat(/# */,n.either(i,a),/ *#/)},{begin:n.concat(/# */,r,/ *#/)},{begin:n.concat(/# */,l,/ *#/)},{begin:n.concat(/# */,n.either(i,a),/ +/,n.either(l,r),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},p={className:"label",begin:/^\w+:/},h=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),g=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[s,o,d,u,p,h,g,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[g]}]}}return wp=e,wp}var Rp,g0;function GR(){if(g0)return Rp;g0=1;function e(t){t.regex;const n=t.COMMENT(/\(;/,/;\)/);n.contains.push("self");const s=t.COMMENT(/;;/,/$/),o=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],a={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},l={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},r={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:o},contains:[s,n,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,l,a,t.QUOTE_STRING_MODE,d,u,r]}}return Rp=e,Rp}var cn=nT;cn.registerLanguage("xml",iR());cn.registerLanguage("bash",lR());cn.registerLanguage("c",rR());cn.registerLanguage("cpp",cR());cn.registerLanguage("csharp",dR());cn.registerLanguage("css",uR());cn.registerLanguage("markdown",mR());cn.registerLanguage("diff",pR());cn.registerLanguage("ruby",hR());cn.registerLanguage("go",fR());cn.registerLanguage("graphql",gR());cn.registerLanguage("ini",_R());cn.registerLanguage("java",vR());cn.registerLanguage("javascript",bR());cn.registerLanguage("json",ER());cn.registerLanguage("kotlin",TR());cn.registerLanguage("less",yR());cn.registerLanguage("lua",AR());cn.registerLanguage("makefile",SR());cn.registerLanguage("perl",IR());cn.registerLanguage("objectivec",CR());cn.registerLanguage("php",NR());cn.registerLanguage("php-template",OR());cn.registerLanguage("plaintext",xR());cn.registerLanguage("python",wR());cn.registerLanguage("python-repl",RR());cn.registerLanguage("r",$R());cn.registerLanguage("rust",MR());cn.registerLanguage("scss",kR());cn.registerLanguage("shell",LR());cn.registerLanguage("sql",DR());cn.registerLanguage("swift",PR());cn.registerLanguage("yaml",BR());cn.registerLanguage("typescript",FR());cn.registerLanguage("vbnet",UR());cn.registerLanguage("wasm",GR());cn.HighlightJS=cn;cn.default=cn;const dl=async e=>{try{await navigator.clipboard.writeText(e)}catch(t){throw new Error(`Unable to copy text to clipboard: ${t.message}`)}},VR={class:"relative text-left"},HR={class:"top-1.5 absolute right-1.5 flex items-center gap-1"},KR={key:0,class:"flex items-center",action:"https://codepen.io/pen/define",method:"POST",target:"_blank"},zR=["value"],WR={__name:"Code",props:{script:{type:String,default:""},lang:{type:String,default:"javascript"},enableCodePen:{type:Boolean,default:!1},codepenTitle:{type:String,default:"Chatwoot Codepen"}},setup(e){const t=e,{t:n}=He(),s=w(()=>{const l=t.script.replace(/^\s*[\r\n]/gm,"").split(`
`),r=l.reduce((d,u)=>{if(u.trim().length===0)return d;const p=u.match(/^\s*/)[0].length;return Math.min(d,p)},1/0);return l.map(d=>d.slice(r)).join(`
`)}),o=w(()=>{const i=t.lang==="javascript"?"js":t.lang;return JSON.stringify({title:t.codepenTitle,private:!0,[i]:s.value})}),a=async i=>{i.preventDefault(),await dl(s.value),Te(n("COMPONENTS.CODE.COPY_SUCCESSFUL"))};return(i,l)=>{const r=F("highlightjs");return m(),f("div",VR,[c("div",HR,[e.enableCodePen?(m(),f("form",KR,[c("input",{type:"hidden",name:"data",value:o.value},null,8,zR),b(he,{slate:"",xs:"",type:"submit",faded:"",label:I(n)("COMPONENTS.CODE.CODEPEN")},null,8,["label"])])):x("",!0),b(he,{slate:"",xs:"",faded:"",label:I(n)("COMPONENTS.CODE.BUTTON_TEXT"),onClick:a},null,8,["label"])]),e.script?(m(),P(r,{key:0,language:e.lang,code:s.value},null,8,["language","code"])):x("",!0)])}}};var wT={exports:{}};(function(e){(function(){var t={9662:function(a,i,l){var r=l(7854),d=l(614),u=l(6330),p=r.TypeError;a.exports=function(h){if(d(h))return h;throw p(u(h)+" is not a function")}},6077:function(a,i,l){var r=l(7854),d=l(614),u=r.String,p=r.TypeError;a.exports=function(h){if(typeof h=="object"||d(h))return h;throw p("Can't set "+u(h)+" as a prototype")}},9670:function(a,i,l){var r=l(7854),d=l(111),u=r.String,p=r.TypeError;a.exports=function(h){if(d(h))return h;throw p(u(h)+" is not an object")}},1318:function(a,i,l){var r=l(5656),d=l(1400),u=l(6244),p=function(h){return function(g,_,T){var S=r(g),E=u(S),y=d(T,E),A;if(h&&_!=_){for(;E>y;)if(A=S[y++],A!=A)return!0}else for(;E>y;y++)if((h||y in S)&&S[y]===_)return h||y||0;return!h&&-1}};a.exports={includes:p(!0),indexOf:p(!1)}},4326:function(a,i,l){var r=l(1702),d=r({}.toString),u=r("".slice);a.exports=function(p){return u(d(p),8,-1)}},648:function(a,i,l){var r=l(7854),d=l(1694),u=l(614),p=l(4326),h=l(5112),g=h("toStringTag"),_=r.Object,T=p(function(){return arguments}())=="Arguments",S=function(E,y){try{return E[y]}catch{}};a.exports=d?p:function(E){var y,A,C;return E===void 0?"Undefined":E===null?"Null":typeof(A=S(y=_(E),g))=="string"?A:T?p(y):(C=p(y))=="Object"&&u(y.callee)?"Arguments":C}},7741:function(a,i,l){var r=l(1702),d=r("".replace),u=function(g){return String(Error(g).stack)}("zxcasd"),p=/\n\s*at [^:]*:[^\n]*/,h=p.test(u);a.exports=function(g,_){if(h&&typeof g=="string")for(;_--;)g=d(g,p,"");return g}},9920:function(a,i,l){var r=l(2597),d=l(3887),u=l(1236),p=l(3070);a.exports=function(h,g,_){for(var T=d(g),S=p.f,E=u.f,y=0;y<T.length;y++){var A=T[y];!r(h,A)&&!(_&&r(_,A))&&S(h,A,E(g,A))}}},8880:function(a,i,l){var r=l(9781),d=l(3070),u=l(9114);a.exports=r?function(p,h,g){return d.f(p,h,u(1,g))}:function(p,h,g){return p[h]=g,p}},9114:function(a){a.exports=function(i,l){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:l}}},9781:function(a,i,l){var r=l(7293);a.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:function(a,i,l){var r=l(7854),d=l(111),u=r.document,p=d(u)&&d(u.createElement);a.exports=function(h){return p?u.createElement(h):{}}},8113:function(a,i,l){var r=l(5005);a.exports=r("navigator","userAgent")||""},7392:function(a,i,l){var r=l(7854),d=l(8113),u=r.process,p=r.Deno,h=u&&u.versions||p&&p.version,g=h&&h.v8,_,T;g&&(_=g.split("."),T=_[0]>0&&_[0]<4?1:+(_[0]+_[1])),!T&&d&&(_=d.match(/Edge\/(\d+)/),(!_||_[1]>=74)&&(_=d.match(/Chrome\/(\d+)/),_&&(T=+_[1]))),a.exports=T},748:function(a){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(a,i,l){var r=l(7293),d=l(9114);a.exports=!r(function(){var u=Error("a");return"stack"in u?(Object.defineProperty(u,"stack",d(1,7)),u.stack!==7):!0})},2109:function(a,i,l){var r=l(7854),d=l(1236).f,u=l(8880),p=l(1320),h=l(3505),g=l(9920),_=l(4705);a.exports=function(T,S){var E=T.target,y=T.global,A=T.stat,C,O,N,R,k,L;if(y?O=r:A?O=r[E]||h(E,{}):O=(r[E]||{}).prototype,O)for(N in S){if(k=S[N],T.noTargetGet?(L=d(O,N),R=L&&L.value):R=O[N],C=_(y?N:E+(A?".":"#")+N,T.forced),!C&&R!==void 0){if(typeof k==typeof R)continue;g(k,R)}(T.sham||R&&R.sham)&&u(k,"sham",!0),p(O,N,k,T)}}},7293:function(a){a.exports=function(i){try{return!!i()}catch{return!0}}},2104:function(a,i,l){var r=l(4374),d=Function.prototype,u=d.apply,p=d.call;a.exports=typeof Reflect=="object"&&Reflect.apply||(r?p.bind(u):function(){return p.apply(u,arguments)})},4374:function(a,i,l){var r=l(7293);a.exports=!r(function(){var d=(function(){}).bind();return typeof d!="function"||d.hasOwnProperty("prototype")})},6916:function(a,i,l){var r=l(4374),d=Function.prototype.call;a.exports=r?d.bind(d):function(){return d.apply(d,arguments)}},6530:function(a,i,l){var r=l(9781),d=l(2597),u=Function.prototype,p=r&&Object.getOwnPropertyDescriptor,h=d(u,"name"),g=h&&(function(){}).name==="something",_=h&&(!r||r&&p(u,"name").configurable);a.exports={EXISTS:h,PROPER:g,CONFIGURABLE:_}},1702:function(a,i,l){var r=l(4374),d=Function.prototype,u=d.bind,p=d.call,h=r&&u.bind(p,p);a.exports=r?function(g){return g&&h(g)}:function(g){return g&&function(){return p.apply(g,arguments)}}},5005:function(a,i,l){var r=l(7854),d=l(614),u=function(p){return d(p)?p:void 0};a.exports=function(p,h){return arguments.length<2?u(r[p]):r[p]&&r[p][h]}},8173:function(a,i,l){var r=l(9662);a.exports=function(d,u){var p=d[u];return p==null?void 0:r(p)}},7854:function(a,i,l){var r=function(d){return d&&d.Math==Math&&d};a.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof l.g=="object"&&l.g)||function(){return this}()||Function("return this")()},2597:function(a,i,l){var r=l(1702),d=l(7908),u=r({}.hasOwnProperty);a.exports=Object.hasOwn||function(h,g){return u(d(h),g)}},3501:function(a){a.exports={}},4664:function(a,i,l){var r=l(9781),d=l(7293),u=l(317);a.exports=!r&&!d(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},8361:function(a,i,l){var r=l(7854),d=l(1702),u=l(7293),p=l(4326),h=r.Object,g=d("".split);a.exports=u(function(){return!h("z").propertyIsEnumerable(0)})?function(_){return p(_)=="String"?g(_,""):h(_)}:h},9587:function(a,i,l){var r=l(614),d=l(111),u=l(7674);a.exports=function(p,h,g){var _,T;return u&&r(_=h.constructor)&&_!==g&&d(T=_.prototype)&&T!==g.prototype&&u(p,T),p}},2788:function(a,i,l){var r=l(1702),d=l(614),u=l(5465),p=r(Function.toString);d(u.inspectSource)||(u.inspectSource=function(h){return p(h)}),a.exports=u.inspectSource},8340:function(a,i,l){var r=l(111),d=l(8880);a.exports=function(u,p){r(p)&&"cause"in p&&d(u,"cause",p.cause)}},9909:function(a,i,l){var r=l(8536),d=l(7854),u=l(1702),p=l(111),h=l(8880),g=l(2597),_=l(5465),T=l(6200),S=l(3501),E="Object already initialized",y=d.TypeError,A=d.WeakMap,C,O,N,R=function(B){return N(B)?O(B):C(B,{})},k=function(B){return function(H){var G;if(!p(H)||(G=O(H)).type!==B)throw y("Incompatible receiver, "+B+" required");return G}};if(r||_.state){var L=_.state||(_.state=new A),D=u(L.get),$=u(L.has),M=u(L.set);C=function(B,H){if($(L,B))throw new y(E);return H.facade=B,M(L,B,H),H},O=function(B){return D(L,B)||{}},N=function(B){return $(L,B)}}else{var K=T("state");S[K]=!0,C=function(B,H){if(g(B,K))throw new y(E);return H.facade=B,h(B,K,H),H},O=function(B){return g(B,K)?B[K]:{}},N=function(B){return g(B,K)}}a.exports={set:C,get:O,has:N,enforce:R,getterFor:k}},614:function(a){a.exports=function(i){return typeof i=="function"}},4705:function(a,i,l){var r=l(7293),d=l(614),u=/#|\.prototype\./,p=function(S,E){var y=g[h(S)];return y==T?!0:y==_?!1:d(E)?r(E):!!E},h=p.normalize=function(S){return String(S).replace(u,".").toLowerCase()},g=p.data={},_=p.NATIVE="N",T=p.POLYFILL="P";a.exports=p},111:function(a,i,l){var r=l(614);a.exports=function(d){return typeof d=="object"?d!==null:r(d)}},1913:function(a){a.exports=!1},2190:function(a,i,l){var r=l(7854),d=l(5005),u=l(614),p=l(7976),h=l(3307),g=r.Object;a.exports=h?function(_){return typeof _=="symbol"}:function(_){var T=d("Symbol");return u(T)&&p(T.prototype,g(_))}},6244:function(a,i,l){var r=l(7466);a.exports=function(d){return r(d.length)}},133:function(a,i,l){var r=l(7392),d=l(7293);a.exports=!!Object.getOwnPropertySymbols&&!d(function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&r&&r<41})},8536:function(a,i,l){var r=l(7854),d=l(614),u=l(2788),p=r.WeakMap;a.exports=d(p)&&/native code/.test(u(p))},6277:function(a,i,l){var r=l(1340);a.exports=function(d,u){return d===void 0?arguments.length<2?"":u:r(d)}},3070:function(a,i,l){var r=l(7854),d=l(9781),u=l(4664),p=l(3353),h=l(9670),g=l(4948),_=r.TypeError,T=Object.defineProperty,S=Object.getOwnPropertyDescriptor,E="enumerable",y="configurable",A="writable";i.f=d?p?function(O,N,R){if(h(O),N=g(N),h(R),typeof O=="function"&&N==="prototype"&&"value"in R&&A in R&&!R[A]){var k=S(O,N);k&&k[A]&&(O[N]=R.value,R={configurable:y in R?R[y]:k[y],enumerable:E in R?R[E]:k[E],writable:!1})}return T(O,N,R)}:T:function(O,N,R){if(h(O),N=g(N),h(R),u)try{return T(O,N,R)}catch{}if("get"in R||"set"in R)throw _("Accessors not supported");return"value"in R&&(O[N]=R.value),O}},1236:function(a,i,l){var r=l(9781),d=l(6916),u=l(5296),p=l(9114),h=l(5656),g=l(4948),_=l(2597),T=l(4664),S=Object.getOwnPropertyDescriptor;i.f=r?S:function(y,A){if(y=h(y),A=g(A),T)try{return S(y,A)}catch{}if(_(y,A))return p(!d(u.f,y,A),y[A])}},8006:function(a,i,l){var r=l(6324),d=l(748),u=d.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(h){return r(h,u)}},5181:function(a,i){i.f=Object.getOwnPropertySymbols},7976:function(a,i,l){var r=l(1702);a.exports=r({}.isPrototypeOf)},6324:function(a,i,l){var r=l(1702),d=l(2597),u=l(5656),p=l(1318).indexOf,h=l(3501),g=r([].push);a.exports=function(_,T){var S=u(_),E=0,y=[],A;for(A in S)!d(h,A)&&d(S,A)&&g(y,A);for(;T.length>E;)d(S,A=T[E++])&&(~p(y,A)||g(y,A));return y}},5296:function(a,i){var l={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,d=r&&!l.call({1:2},1);i.f=d?function(p){var h=r(this,p);return!!h&&h.enumerable}:l},7674:function(a,i,l){var r=l(1702),d=l(9670),u=l(6077);a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var p=!1,h={},g;try{g=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),g(h,[]),p=h instanceof Array}catch{}return function(T,S){return d(T),u(S),p?g(T,S):T.__proto__=S,T}}():void 0)},2140:function(a,i,l){var r=l(7854),d=l(6916),u=l(614),p=l(111),h=r.TypeError;a.exports=function(g,_){var T,S;if(_==="string"&&u(T=g.toString)&&!p(S=d(T,g))||u(T=g.valueOf)&&!p(S=d(T,g))||_!=="string"&&u(T=g.toString)&&!p(S=d(T,g)))return S;throw h("Can't convert object to primitive value")}},3887:function(a,i,l){var r=l(5005),d=l(1702),u=l(8006),p=l(5181),h=l(9670),g=d([].concat);a.exports=r("Reflect","ownKeys")||function(T){var S=u.f(h(T)),E=p.f;return E?g(S,E(T)):S}},1320:function(a,i,l){var r=l(7854),d=l(614),u=l(2597),p=l(8880),h=l(3505),g=l(2788),_=l(9909),T=l(6530).CONFIGURABLE,S=_.get,E=_.enforce,y=String(String).split("String");(a.exports=function(A,C,O,N){var R=N?!!N.unsafe:!1,k=N?!!N.enumerable:!1,L=N?!!N.noTargetGet:!1,D=N&&N.name!==void 0?N.name:C,$;if(d(O)&&(String(D).slice(0,7)==="Symbol("&&(D="["+String(D).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u(O,"name")||T&&O.name!==D)&&p(O,"name",D),$=E(O),$.source||($.source=y.join(typeof D=="string"?D:""))),A===r){k?A[C]=O:h(C,O);return}else R?!L&&A[C]&&(k=!0):delete A[C];k?A[C]=O:p(A,C,O)})(Function.prototype,"toString",function(){return d(this)&&S(this).source||g(this)})},4488:function(a,i,l){var r=l(7854),d=r.TypeError;a.exports=function(u){if(u==null)throw d("Can't call method on "+u);return u}},3505:function(a,i,l){var r=l(7854),d=Object.defineProperty;a.exports=function(u,p){try{d(r,u,{value:p,configurable:!0,writable:!0})}catch{r[u]=p}return p}},6200:function(a,i,l){var r=l(2309),d=l(9711),u=r("keys");a.exports=function(p){return u[p]||(u[p]=d(p))}},5465:function(a,i,l){var r=l(7854),d=l(3505),u="__core-js_shared__",p=r[u]||d(u,{});a.exports=p},2309:function(a,i,l){var r=l(1913),d=l(5465);(a.exports=function(u,p){return d[u]||(d[u]=p!==void 0?p:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(a,i,l){var r=l(9303),d=Math.max,u=Math.min;a.exports=function(p,h){var g=r(p);return g<0?d(g+h,0):u(g,h)}},5656:function(a,i,l){var r=l(8361),d=l(4488);a.exports=function(u){return r(d(u))}},9303:function(a){var i=Math.ceil,l=Math.floor;a.exports=function(r){var d=+r;return d!==d||d===0?0:(d>0?l:i)(d)}},7466:function(a,i,l){var r=l(9303),d=Math.min;a.exports=function(u){return u>0?d(r(u),9007199254740991):0}},7908:function(a,i,l){var r=l(7854),d=l(4488),u=r.Object;a.exports=function(p){return u(d(p))}},7593:function(a,i,l){var r=l(7854),d=l(6916),u=l(111),p=l(2190),h=l(8173),g=l(2140),_=l(5112),T=r.TypeError,S=_("toPrimitive");a.exports=function(E,y){if(!u(E)||p(E))return E;var A=h(E,S),C;if(A){if(y===void 0&&(y="default"),C=d(A,E,y),!u(C)||p(C))return C;throw T("Can't convert object to primitive value")}return y===void 0&&(y="number"),g(E,y)}},4948:function(a,i,l){var r=l(7593),d=l(2190);a.exports=function(u){var p=r(u,"string");return d(p)?p:p+""}},1694:function(a,i,l){var r=l(5112),d=r("toStringTag"),u={};u[d]="z",a.exports=String(u)==="[object z]"},1340:function(a,i,l){var r=l(7854),d=l(648),u=r.String;a.exports=function(p){if(d(p)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return u(p)}},6330:function(a,i,l){var r=l(7854),d=r.String;a.exports=function(u){try{return d(u)}catch{return"Object"}}},9711:function(a,i,l){var r=l(1702),d=0,u=Math.random(),p=r(1 .toString);a.exports=function(h){return"Symbol("+(h===void 0?"":h)+")_"+p(++d+u,36)}},3307:function(a,i,l){var r=l(133);a.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:function(a,i,l){var r=l(9781),d=l(7293);a.exports=r&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},5112:function(a,i,l){var r=l(7854),d=l(2309),u=l(2597),p=l(9711),h=l(133),g=l(3307),_=d("wks"),T=r.Symbol,S=T&&T.for,E=g?T:T&&T.withoutSetter||p;a.exports=function(y){if(!u(_,y)||!(h||typeof _[y]=="string")){var A="Symbol."+y;h&&u(T,y)?_[y]=T[y]:g&&S?_[y]=S(A):_[y]=E(A)}return _[y]}},9191:function(a,i,l){var r=l(5005),d=l(2597),u=l(8880),p=l(7976),h=l(7674),g=l(9920),_=l(9587),T=l(6277),S=l(8340),E=l(7741),y=l(2914),A=l(1913);a.exports=function(C,O,N,R){var k=R?2:1,L=C.split("."),D=L[L.length-1],$=r.apply(null,L);if($){var M=$.prototype;if(!A&&d(M,"cause")&&delete M.cause,!N)return $;var K=r("Error"),B=O(function(H,G){var V=T(R?G:H,void 0),Y=R?new $(H):new $;return V!==void 0&&u(Y,"message",V),y&&u(Y,"stack",E(Y.stack,2)),this&&p(M,this)&&_(Y,this,B),arguments.length>k&&S(Y,arguments[k]),Y});if(B.prototype=M,D!=="Error"&&(h?h(B,K):g(B,K,{name:!0})),g(B,$),!A)try{M.name!==D&&u(M,"name",D),M.constructor=B}catch{}return B}}},1703:function(a,i,l){var r=l(2109),d=l(7854),u=l(2104),p=l(9191),h="WebAssembly",g=d[h],_=Error("e",{cause:7}).cause!==7,T=function(E,y){var A={};A[E]=p(E,y,_),r({global:!0,forced:_},A)},S=function(E,y){if(g&&g[E]){var A={};A[E]=p(h+"."+E,y,_),r({target:h,stat:!0,forced:_},A)}};T("Error",function(E){return function(A){return u(E,this,arguments)}}),T("EvalError",function(E){return function(A){return u(E,this,arguments)}}),T("RangeError",function(E){return function(A){return u(E,this,arguments)}}),T("ReferenceError",function(E){return function(A){return u(E,this,arguments)}}),T("SyntaxError",function(E){return function(A){return u(E,this,arguments)}}),T("TypeError",function(E){return function(A){return u(E,this,arguments)}}),T("URIError",function(E){return function(A){return u(E,this,arguments)}}),S("CompileError",function(E){return function(A){return u(E,this,arguments)}}),S("LinkError",function(E){return function(A){return u(E,this,arguments)}}),S("RuntimeError",function(E){return function(A){return u(E,this,arguments)}})},6095:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-chrome{background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);box-sizing:initial;width:225px;font-family:Menlo;background-color:#fff}.vc-chrome-controls{display:flex}.vc-chrome-color-wrap{position:relative;width:36px}.vc-chrome-active-color{position:relative;width:30px;height:30px;border-radius:15px;overflow:hidden;z-index:1}.vc-chrome-color-wrap .vc-checkerboard{width:30px;height:30px;border-radius:15px;background-size:auto}.vc-chrome-sliders{flex:1}.vc-chrome-fields-wrap{display:flex;padding-top:16px}.vc-chrome-fields{display:flex;margin-left:-6px;flex:1}.vc-chrome-field{padding-left:6px;width:100%}.vc-chrome-toggle-btn{width:32px;text-align:right;position:relative}.vc-chrome-toggle-icon{margin-right:-4px;margin-top:12px;cursor:pointer;position:relative;z-index:2}.vc-chrome-toggle-icon-highlight{position:absolute;width:24px;height:28px;background:#eee;border-radius:4px;top:10px;left:12px}.vc-chrome-hue-wrap{margin-bottom:8px}.vc-chrome-alpha-wrap,.vc-chrome-hue-wrap{position:relative;height:10px}.vc-chrome-alpha-wrap .vc-alpha-gradient,.vc-chrome-hue-wrap .vc-hue{border-radius:2px}.vc-chrome-alpha-wrap .vc-alpha-picker,.vc-chrome-hue-wrap .vc-hue-picker{width:12px;height:12px;border-radius:6px;transform:translate(-6px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-chrome-body{padding:16px 16px 12px;background-color:#fff}.vc-chrome-saturation-wrap{width:100%;padding-bottom:55%;position:relative;border-radius:2px 2px 0 0;overflow:hidden}.vc-chrome-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-chrome-fields .vc-input__input{font-size:11px;color:#333;width:100%;border-radius:2px;border:none;box-shadow:inset 0 0 0 1px #dadada;height:21px;text-align:center}.vc-chrome-fields .vc-input__label{text-transform:uppercase;font-size:11px;line-height:11px;color:#969696;text-align:center;display:block;margin-top:12px}.vc-chrome__disable-alpha .vc-chrome-active-color{width:18px;height:18px}.vc-chrome__disable-alpha .vc-chrome-color-wrap{width:30px}.vc-chrome__disable-alpha .vc-chrome-hue-wrap{margin-top:4px;margin-bottom:4px}",""]),i.default=h},6047:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-compact{padding-top:5px;padding-left:5px;width:245px;border-radius:2px;box-sizing:border-box;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-compact-colors{overflow:hidden;padding:0;margin:0}.vc-compact-color-item{list-style:none;width:15px;height:15px;float:left;margin-right:5px;margin-bottom:5px;position:relative;cursor:pointer}.vc-compact-color-item--white{box-shadow:inset 0 0 0 1px #ddd}.vc-compact-color-item--white .vc-compact-dot{background:#000}.vc-compact-dot{position:absolute;top:5px;right:5px;bottom:5px;left:5px;border-radius:50%;opacity:1;background:#fff}",""]),i.default=h},9481:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-grayscale{width:125px;border-radius:2px;box-shadow:0 2px 15px rgba(0,0,0,.12),0 2px 10px rgba(0,0,0,.16);background-color:#fff}.vc-grayscale-colors{border-radius:2px;overflow:hidden;padding:0;margin:0}.vc-grayscale-color-item{list-style:none;width:25px;height:25px;float:left;position:relative;cursor:pointer}.vc-grayscale-color-item--white .vc-grayscale-dot{background:#000}.vc-grayscale-dot{position:absolute;top:50%;left:50%;width:6px;height:6px;margin:-3px 0 0 -2px;border-radius:50%;opacity:1;background:#fff}",""]),i.default=h},5186:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-material{width:98px;height:98px;padding:16px;font-family:Roboto;position:relative;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-material .vc-input__input{width:100%;margin-top:12px;font-size:15px;color:#333;height:30px}.vc-material .vc-input__label{position:absolute;top:0;left:0;font-size:11px;color:#999;text-transform:capitalize}.vc-material-hex{border-bottom-width:2px;border-bottom-style:solid}.vc-material-split{display:flex;margin-right:-10px;padding-top:11px}.vc-material-third{flex:1;padding-right:10px}",""]),i.default=h},3695:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,'.vc-photoshop{background:#dcdcdc;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.25),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;width:513px;font-family:Roboto}.vc-photoshop__disable-fields{width:390px}.vc-ps-head{background-image:linear-gradient(-180deg,#f0f0f0,#d4d4d4);border-bottom:1px solid #b1b1b1;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.2),inset 0 -1px 0 0 rgba(0,0,0,.02);height:23px;line-height:24px;border-radius:4px 4px 0 0;font-size:13px;color:#4d4d4d;text-align:center}.vc-ps-body{padding:15px;display:flex}.vc-ps-saturation-wrap{width:256px;height:256px;position:relative;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0;overflow:hidden}.vc-ps-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-ps-hue-wrap{height:256px;width:19px;margin-left:10px;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0}.vc-ps-hue-pointer,.vc-ps-hue-wrap{position:relative}.vc-ps-hue-pointer--left,.vc-ps-hue-pointer--right{position:absolute;width:0;height:0;border-style:solid;border-width:5px 0 5px 8px;border-color:transparent transparent transparent #555}.vc-ps-hue-pointer--left:after,.vc-ps-hue-pointer--right:after{content:"";width:0;height:0;border-style:solid;border-width:4px 0 4px 6px;border-color:transparent transparent transparent #fff;position:absolute;top:1px;left:1px;transform:translate(-8px,-5px)}.vc-ps-hue-pointer--left{transform:translate(-13px,-4px)}.vc-ps-hue-pointer--right{transform:translate(20px,-4px) rotate(180deg)}.vc-ps-controls{width:180px;margin-left:10px;display:flex}.vc-ps-controls__disable-fields{width:auto}.vc-ps-actions{margin-left:20px;flex:1}.vc-ps-ac-btn{cursor:pointer;background-image:linear-gradient(-180deg,#fff,#e6e6e6);border:1px solid #878787;border-radius:2px;height:20px;box-shadow:0 1px 0 0 #eaeaea;font-size:14px;color:#000;line-height:20px;text-align:center;margin-bottom:10px}.vc-ps-previews{width:60px}.vc-ps-previews__swatches{border:1px solid #b3b3b3;border-bottom:1px solid #f0f0f0;margin-bottom:2px;margin-top:1px}.vc-ps-previews__pr-color{height:34px;box-shadow:inset 1px 0 0 #000,inset -1px 0 0 #000,inset 0 1px 0 #000}.vc-ps-previews__label{font-size:14px;color:#000;text-align:center}.vc-ps-fields{padding-top:5px;padding-bottom:9px;width:80px;position:relative}.vc-ps-fields .vc-input__input{margin-left:40%;width:40%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:5px;font-size:13px;padding-left:3px;margin-right:10px}.vc-ps-fields .vc-input__desc,.vc-ps-fields .vc-input__label{top:0;text-transform:uppercase;font-size:13px;height:18px;line-height:22px;position:absolute}.vc-ps-fields .vc-input__label{left:0;width:34px}.vc-ps-fields .vc-input__desc{right:0;width:0}.vc-ps-fields__divider{height:5px}.vc-ps-fields__hex .vc-input__input{margin-left:20%;width:80%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:6px;font-size:13px;padding-left:3px}.vc-ps-fields__hex .vc-input__label{position:absolute;top:0;left:0;width:14px;text-transform:uppercase;font-size:13px;height:18px;line-height:22px}',""]),i.default=h},7279:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-sketch{position:relative;width:200px;padding:10px 10px 0;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15)}.vc-sketch-saturation-wrap{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.vc-sketch-controls{display:flex}.vc-sketch-sliders{padding:4px 0;flex:1}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{position:relative;height:10px}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.vc-sketch-active-color{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{width:90%;padding:4px 0 3px 10%;border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px}.vc-sketch-field .vc-input__label{display:block;text-align:center;font-size:11px;color:#222;padding-top:3px;padding-bottom:4px;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{margin-right:-10px;margin-left:-10px;padding-left:10px;padding-top:10px;border-top:1px solid #eee}.vc-sketch-presets-color{overflow:hidden;position:relative;display:inline-block;margin:0 10px 10px 0;vertical-align:top;cursor:pointer;width:16px;height:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}",""]),i.default=h},6278:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-slider{position:relative;width:410px}.vc-slider-hue-warp{height:12px;position:relative}.vc-slider-hue-warp .vc-hue-picker{width:14px;height:14px;border-radius:6px;transform:translate(-7px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-slider-swatches{display:flex;margin-top:20px}.vc-slider-swatch{margin-right:1px;flex:1;width:20%}.vc-slider-swatch:first-child{margin-right:1px}.vc-slider-swatch:first-child .vc-slider-swatch-picker{border-radius:2px 0 0 2px}.vc-slider-swatch:last-child{margin-right:0}.vc-slider-swatch:last-child .vc-slider-swatch-picker{border-radius:0 2px 2px 0}.vc-slider-swatch-picker{cursor:pointer;height:12px}.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active{transform:scaleY(1.8);border-radius:3.6px/2px}.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 1px #ddd}.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 .6px #ddd}",""]),i.default=h},3468:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-swatches{width:320px;height:240px;overflow-y:scroll;background-color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16)}.vc-swatches-box{padding:16px 0 6px 16px;overflow:hidden}.vc-swatches-color-group{padding-bottom:10px;width:40px;float:left;margin-right:10px}.vc-swatches-color-it{box-sizing:border-box;width:40px;height:24px;cursor:pointer;background:#880e4f;margin-bottom:1px;overflow:hidden;border-radius:2px 2px 0 0}.vc-swatches-color--white{border:1px solid #ddd}.vc-swatches-pick{fill:#fff;margin-left:8px;display:block}.vc-swatches-color--white .vc-swatches-pick{fill:#333}",""]),i.default=h},5689:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-twitter{background:#fff;border:0 solid rgba(0,0,0,.25);box-shadow:0 1px 4px rgba(0,0,0,.25);border-radius:4px;position:relative}.vc-twitter-triangle{border-color:transparent transparent #fff transparent}.vc-twitter-triangle,.vc-twitter-triangle-shadow{width:0;height:0;border-style:solid;border-width:0 9px 10px 9px;position:absolute}.vc-twitter-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1) transparent}.vc-twitter-body{padding:15px 9px 9px 15px}.vc-twitter .vc-editable-input{position:relative}.vc-twitter .vc-editable-input input{width:100px;font-size:14px;color:#666;border:0;outline:none;height:28px;box-shadow:inset 0 0 0 1px #f0f0f0;box-sizing:content-box;border-radius:0 4px 4px 0;float:left;padding:1px;padding-left:8px}.vc-twitter .vc-editable-input span{display:none}.vc-twitter-hash{background:#f0f0f0;height:30px;width:30px;border-radius:4px 0 0 4px;float:left;color:#98a1a4;display:flex;align-items:center;justify-content:center}.vc-twitter-swatch{width:30px;height:30px;float:left;border-radius:4px;margin:0 6px 6px 0;cursor:pointer;position:relative;outline:none}.vc-twitter-clear{clear:both}.vc-twitter-hide-triangle .vc-twitter-triangle,.vc-twitter-hide-triangle .vc-twitter-triangle-shadow{display:none}.vc-twitter-top-left-triangle .vc-twitter-triangle{top:-10px;left:12px}.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{top:-11px;left:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle{top:-10px;right:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{top:-11px;right:12px}",""]),i.default=h},2410:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-alpha,.vc-alpha-checkboard-wrap{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-container{cursor:pointer;position:relative;z-index:2;height:100%;margin:0 3px}.vc-alpha-pointer{z-index:2;position:absolute}.vc-alpha-picker{cursor:pointer;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;margin-top:1px;transform:translateX(-2px)}",""]),i.default=h},3142:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-checkerboard{position:absolute;top:0;right:0;bottom:0;left:0;background-size:contain}",""]),i.default=h},7953:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-editable-input{position:relative}.vc-input__input{padding:0;border:0;outline:none}.vc-input__label{text-transform:capitalize}",""]),i.default=h},3097:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-hue{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:2px}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;margin:0 2px;position:relative;height:100%}.vc-hue-pointer{z-index:2;position:absolute}.vc-hue-picker{cursor:pointer;margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;transform:translateX(-2px)}",""]),i.default=h},4339:function(a,i,l){l.r(i);var r=l(8081),d=l.n(r),u=l(3645),p=l.n(u),h=p()(d());h.push([a.id,".vc-saturation,.vc-saturation--black,.vc-saturation--white{cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{cursor:head;width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;transform:translate(-2px,-2px)}",""]),i.default=h},3645:function(a){a.exports=function(i){var l=[];return l.toString=function(){return this.map(function(d){var u="",p=typeof d[5]<"u";return d[4]&&(u+="@supports (".concat(d[4],") {")),d[2]&&(u+="@media ".concat(d[2]," {")),p&&(u+="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {")),u+=i(d),p&&(u+="}"),d[2]&&(u+="}"),d[4]&&(u+="}"),u}).join("")},l.i=function(d,u,p,h,g){typeof d=="string"&&(d=[[null,d,void 0]]);var _={};if(p)for(var T=0;T<this.length;T++){var S=this[T][0];S!=null&&(_[S]=!0)}for(var E=0;E<d.length;E++){var y=[].concat(d[E]);p&&_[y[0]]||(typeof g<"u"&&(typeof y[5]>"u"||(y[1]="@layer".concat(y[5].length>0?" ".concat(y[5]):""," {").concat(y[1],"}")),y[5]=g),u&&(y[2]&&(y[1]="@media ".concat(y[2]," {").concat(y[1],"}")),y[2]=u),h&&(y[4]?(y[1]="@supports (".concat(y[4],") {").concat(y[1],"}"),y[4]=h):y[4]="".concat(h)),l.push(y))}},l}},8081:function(a){a.exports=function(i){return i[1]}},9428:function(a){a.exports=i;function i(l,r,d){return r<d?l<r?r:l>d?d:l:l<d?d:l>r?r:l}},9016:function(a,i,l){var r=l(9159),d=r.Symbol;a.exports=d},6423:function(a,i,l){var r=l(9016),d=l(2366),u=l(2886),p="[object Null]",h="[object Undefined]",g=r?r.toStringTag:void 0;function _(T){return T==null?T===void 0?h:p:g&&g in Object(T)?d(T):u(T)}a.exports=_},6009:function(a,i,l){var r=l(1626),d=/^\s+/;function u(p){return p&&p.slice(0,r(p)+1).replace(d,"")}a.exports=u},791:function(a,i,l){var r=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g;a.exports=r},2366:function(a,i,l){var r=l(9016),d=Object.prototype,u=d.hasOwnProperty,p=d.toString,h=r?r.toStringTag:void 0;function g(_){var T=u.call(_,h),S=_[h];try{_[h]=void 0;var E=!0}catch{}var y=p.call(_);return E&&(T?_[h]=S:delete _[h]),y}a.exports=g},2886:function(a){var i=Object.prototype,l=i.toString;function r(d){return l.call(d)}a.exports=r},9159:function(a,i,l){var r=l(791),d=typeof self=="object"&&self&&self.Object===Object&&self,u=r||d||Function("return this")();a.exports=u},1626:function(a){var i=/\s/;function l(r){for(var d=r.length;d--&&i.test(r.charAt(d)););return d}a.exports=l},3738:function(a,i,l){l(1703);var r=l(150),d=l(657),u=l(2012),p="Expected a function",h=Math.max,g=Math.min;function _(T,S,E){var y,A,C,O,N,R,k=0,L=!1,D=!1,$=!0;if(typeof T!="function")throw new TypeError(p);S=u(S)||0,r(E)&&(L=!!E.leading,D="maxWait"in E,C=D?h(u(E.maxWait)||0,S):C,$="trailing"in E?!!E.trailing:$);function M(z){var W=y,q=A;return y=A=void 0,k=z,O=T.apply(q,W),O}function K(z){return k=z,N=setTimeout(G,S),L?M(z):O}function B(z){var W=z-R,q=z-k,Z=S-W;return D?g(Z,C-q):Z}function H(z){var W=z-R,q=z-k;return R===void 0||W>=S||W<0||D&&q>=C}function G(){var z=d();if(H(z))return V(z);N=setTimeout(G,B(z))}function V(z){return N=void 0,$&&y?M(z):(y=A=void 0,O)}function Y(){N!==void 0&&clearTimeout(N),k=0,y=R=A=N=void 0}function ee(){return N===void 0?O:V(d())}function X(){var z=d(),W=H(z);if(y=arguments,A=this,R=z,W){if(N===void 0)return K(R);if(D)return clearTimeout(N),N=setTimeout(G,S),M(R)}return N===void 0&&(N=setTimeout(G,S)),O}return X.cancel=Y,X.flush=ee,X}a.exports=_},150:function(a){function i(l){var r=typeof l;return l!=null&&(r=="object"||r=="function")}a.exports=i},4430:function(a){function i(l){return l!=null&&typeof l=="object"}a.exports=i},7691:function(a,i,l){var r=l(6423),d=l(4430),u="[object Symbol]";function p(h){return typeof h=="symbol"||d(h)&&r(h)==u}a.exports=p},657:function(a,i,l){var r=l(9159),d=function(){return r.Date.now()};a.exports=d},9289:function(a,i,l){l(1703);var r=l(3738),d=l(150),u="Expected a function";function p(h,g,_){var T=!0,S=!0;if(typeof h!="function")throw new TypeError(u);return d(_)&&(T="leading"in _?!!_.leading:T,S="trailing"in _?!!_.trailing:S),r(h,g,{leading:T,maxWait:g,trailing:S})}a.exports=p},2012:function(a,i,l){var r=l(6009),d=l(150),u=l(7691),p=NaN,h=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,_=/^0o[0-7]+$/i,T=parseInt;function S(E){if(typeof E=="number")return E;if(u(E))return p;if(d(E)){var y=typeof E.valueOf=="function"?E.valueOf():E;E=d(y)?y+"":y}if(typeof E!="string")return E===0?E:+E;E=r(E);var A=g.test(E);return A||_.test(E)?T(E.slice(2),A?2:8):h.test(E)?p:+E}a.exports=S},7013:function(a,i,l){var r;(function(d){var u=/^\s+/,p=/\s+$/,h=0,g=d.round,_=d.min,T=d.max,S=d.random;function E(de,Ce){if(de=de||"",Ce=Ce||{},de instanceof E)return de;if(!(this instanceof E))return new E(de,Ce);var Ae=y(de);this._originalInput=de,this._r=Ae.r,this._g=Ae.g,this._b=Ae.b,this._a=Ae.a,this._roundA=g(100*this._a)/100,this._format=Ce.format||Ae.format,this._gradientType=Ce.gradientType,this._r<1&&(this._r=g(this._r)),this._g<1&&(this._g=g(this._g)),this._b<1&&(this._b=g(this._b)),this._ok=Ae.ok,this._tc_id=h++}E.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var de=this.toRgb();return(de.r*299+de.g*587+de.b*114)/1e3},getLuminance:function(){var de=this.toRgb(),Ce,Ae,Le,Me,Ue,we;return Ce=de.r/255,Ae=de.g/255,Le=de.b/255,Ce<=.03928?Me=Ce/12.92:Me=d.pow((Ce+.055)/1.055,2.4),Ae<=.03928?Ue=Ae/12.92:Ue=d.pow((Ae+.055)/1.055,2.4),Le<=.03928?we=Le/12.92:we=d.pow((Le+.055)/1.055,2.4),.2126*Me+.7152*Ue+.0722*we},setAlpha:function(de){return this._a=ue(de),this._roundA=g(100*this._a)/100,this},toHsv:function(){var de=N(this._r,this._g,this._b);return{h:de.h*360,s:de.s,v:de.v,a:this._a}},toHsvString:function(){var de=N(this._r,this._g,this._b),Ce=g(de.h*360),Ae=g(de.s*100),Le=g(de.v*100);return this._a==1?"hsv("+Ce+", "+Ae+"%, "+Le+"%)":"hsva("+Ce+", "+Ae+"%, "+Le+"%, "+this._roundA+")"},toHsl:function(){var de=C(this._r,this._g,this._b);return{h:de.h*360,s:de.s,l:de.l,a:this._a}},toHslString:function(){var de=C(this._r,this._g,this._b),Ce=g(de.h*360),Ae=g(de.s*100),Le=g(de.l*100);return this._a==1?"hsl("+Ce+", "+Ae+"%, "+Le+"%)":"hsla("+Ce+", "+Ae+"%, "+Le+"%, "+this._roundA+")"},toHex:function(de){return k(this._r,this._g,this._b,de)},toHexString:function(de){return"#"+this.toHex(de)},toHex8:function(de){return L(this._r,this._g,this._b,this._a,de)},toHex8String:function(de){return"#"+this.toHex8(de)},toRgb:function(){return{r:g(this._r),g:g(this._g),b:g(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+g(this._r)+", "+g(this._g)+", "+g(this._b)+")":"rgba("+g(this._r)+", "+g(this._g)+", "+g(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:g(te(this._r,255)*100)+"%",g:g(te(this._g,255)*100)+"%",b:g(te(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+g(te(this._r,255)*100)+"%, "+g(te(this._g,255)*100)+"%, "+g(te(this._b,255)*100)+"%)":"rgba("+g(te(this._r,255)*100)+"%, "+g(te(this._g,255)*100)+"%, "+g(te(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ne[k(this._r,this._g,this._b,!0)]||!1},toFilter:function(de){var Ce="#"+D(this._r,this._g,this._b,this._a),Ae=Ce,Le=this._gradientType?"GradientType = 1, ":"";if(de){var Me=E(de);Ae="#"+D(Me._r,Me._g,Me._b,Me._a)}return"progid:DXImageTransform.Microsoft.gradient("+Le+"startColorstr="+Ce+",endColorstr="+Ae+")"},toString:function(de){var Ce=!!de;de=de||this._format;var Ae=!1,Le=this._a<1&&this._a>=0,Me=!Ce&&Le&&(de==="hex"||de==="hex6"||de==="hex3"||de==="hex4"||de==="hex8"||de==="name");return Me?de==="name"&&this._a===0?this.toName():this.toRgbString():(de==="rgb"&&(Ae=this.toRgbString()),de==="prgb"&&(Ae=this.toPercentageRgbString()),(de==="hex"||de==="hex6")&&(Ae=this.toHexString()),de==="hex3"&&(Ae=this.toHexString(!0)),de==="hex4"&&(Ae=this.toHex8String(!0)),de==="hex8"&&(Ae=this.toHex8String()),de==="name"&&(Ae=this.toName()),de==="hsl"&&(Ae=this.toHslString()),de==="hsv"&&(Ae=this.toHsvString()),Ae||this.toHexString())},clone:function(){return E(this.toString())},_applyModification:function(de,Ce){var Ae=de.apply(null,[this].concat([].slice.call(Ce)));return this._r=Ae._r,this._g=Ae._g,this._b=Ae._b,this.setAlpha(Ae._a),this},lighten:function(){return this._applyModification(B,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification(G,arguments)},desaturate:function(){return this._applyModification($,arguments)},saturate:function(){return this._applyModification(M,arguments)},greyscale:function(){return this._applyModification(K,arguments)},spin:function(){return this._applyModification(V,arguments)},_applyCombination:function(de,Ce){return de.apply(null,[this].concat([].slice.call(Ce)))},analogous:function(){return this._applyCombination(W,arguments)},complement:function(){return this._applyCombination(Y,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(ee,arguments)},tetrad:function(){return this._applyCombination(X,arguments)}},E.fromRatio=function(de,Ce){if(typeof de=="object"){var Ae={};for(var Le in de)de.hasOwnProperty(Le)&&(Le==="a"?Ae[Le]=de[Le]:Ae[Le]=je(de[Le]));de=Ae}return E(de,Ce)};function y(de){var Ce={r:0,g:0,b:0},Ae=1,Le=null,Me=null,Ue=null,we=!1,ge=!1;return typeof de=="string"&&(de=Q(de)),typeof de=="object"&&(kt(de.r)&&kt(de.g)&&kt(de.b)?(Ce=A(de.r,de.g,de.b),we=!0,ge=String(de.r).substr(-1)==="%"?"prgb":"rgb"):kt(de.h)&&kt(de.s)&&kt(de.v)?(Le=je(de.s),Me=je(de.v),Ce=R(de.h,Le,Me),we=!0,ge="hsv"):kt(de.h)&&kt(de.s)&&kt(de.l)&&(Le=je(de.s),Ue=je(de.l),Ce=O(de.h,Le,Ue),we=!0,ge="hsl"),de.hasOwnProperty("a")&&(Ae=de.a)),Ae=ue(Ae),{ok:we,format:de.format||ge,r:_(255,T(Ce.r,0)),g:_(255,T(Ce.g,0)),b:_(255,T(Ce.b,0)),a:Ae}}function A(de,Ce,Ae){return{r:te(de,255)*255,g:te(Ce,255)*255,b:te(Ae,255)*255}}function C(de,Ce,Ae){de=te(de,255),Ce=te(Ce,255),Ae=te(Ae,255);var Le=T(de,Ce,Ae),Me=_(de,Ce,Ae),Ue,we,ge=(Le+Me)/2;if(Le==Me)Ue=we=0;else{var J=Le-Me;switch(we=ge>.5?J/(2-Le-Me):J/(Le+Me),Le){case de:Ue=(Ce-Ae)/J+(Ce<Ae?6:0);break;case Ce:Ue=(Ae-de)/J+2;break;case Ae:Ue=(de-Ce)/J+4;break}Ue/=6}return{h:Ue,s:we,l:ge}}function O(de,Ce,Ae){var Le,Me,Ue;de=te(de,360),Ce=te(Ce,100),Ae=te(Ae,100);function we(Ee,$e,se){return se<0&&(se+=1),se>1&&(se-=1),se<.16666666666666666?Ee+($e-Ee)*6*se:se<.5?$e:se<.6666666666666666?Ee+($e-Ee)*(.6666666666666666-se)*6:Ee}if(Ce===0)Le=Me=Ue=Ae;else{var ge=Ae<.5?Ae*(1+Ce):Ae+Ce-Ae*Ce,J=2*Ae-ge;Le=we(J,ge,de+.3333333333333333),Me=we(J,ge,de),Ue=we(J,ge,de-.3333333333333333)}return{r:Le*255,g:Me*255,b:Ue*255}}function N(de,Ce,Ae){de=te(de,255),Ce=te(Ce,255),Ae=te(Ae,255);var Le=T(de,Ce,Ae),Me=_(de,Ce,Ae),Ue,we,ge=Le,J=Le-Me;if(we=Le===0?0:J/Le,Le==Me)Ue=0;else{switch(Le){case de:Ue=(Ce-Ae)/J+(Ce<Ae?6:0);break;case Ce:Ue=(Ae-de)/J+2;break;case Ae:Ue=(de-Ce)/J+4;break}Ue/=6}return{h:Ue,s:we,v:ge}}function R(de,Ce,Ae){de=te(de,360)*6,Ce=te(Ce,100),Ae=te(Ae,100);var Le=d.floor(de),Me=de-Le,Ue=Ae*(1-Ce),we=Ae*(1-Me*Ce),ge=Ae*(1-(1-Me)*Ce),J=Le%6,Ee=[Ae,we,Ue,Ue,ge,Ae][J],$e=[ge,Ae,Ae,we,Ue,Ue][J],se=[Ue,Ue,ge,Ae,Ae,we][J];return{r:Ee*255,g:$e*255,b:se*255}}function k(de,Ce,Ae,Le){var Me=[Fe(g(de).toString(16)),Fe(g(Ce).toString(16)),Fe(g(Ae).toString(16))];return Le&&Me[0].charAt(0)==Me[0].charAt(1)&&Me[1].charAt(0)==Me[1].charAt(1)&&Me[2].charAt(0)==Me[2].charAt(1)?Me[0].charAt(0)+Me[1].charAt(0)+Me[2].charAt(0):Me.join("")}function L(de,Ce,Ae,Le,Me){var Ue=[Fe(g(de).toString(16)),Fe(g(Ce).toString(16)),Fe(g(Ae).toString(16)),Fe(Qe(Le))];return Me&&Ue[0].charAt(0)==Ue[0].charAt(1)&&Ue[1].charAt(0)==Ue[1].charAt(1)&&Ue[2].charAt(0)==Ue[2].charAt(1)&&Ue[3].charAt(0)==Ue[3].charAt(1)?Ue[0].charAt(0)+Ue[1].charAt(0)+Ue[2].charAt(0)+Ue[3].charAt(0):Ue.join("")}function D(de,Ce,Ae,Le){var Me=[Fe(Qe(Le)),Fe(g(de).toString(16)),Fe(g(Ce).toString(16)),Fe(g(Ae).toString(16))];return Me.join("")}E.equals=function(de,Ce){return!de||!Ce?!1:E(de).toRgbString()==E(Ce).toRgbString()},E.random=function(){return E.fromRatio({r:S(),g:S(),b:S()})};function $(de,Ce){Ce=Ce===0?0:Ce||10;var Ae=E(de).toHsl();return Ae.s-=Ce/100,Ae.s=ce(Ae.s),E(Ae)}function M(de,Ce){Ce=Ce===0?0:Ce||10;var Ae=E(de).toHsl();return Ae.s+=Ce/100,Ae.s=ce(Ae.s),E(Ae)}function K(de){return E(de).desaturate(100)}function B(de,Ce){Ce=Ce===0?0:Ce||10;var Ae=E(de).toHsl();return Ae.l+=Ce/100,Ae.l=ce(Ae.l),E(Ae)}function H(de,Ce){Ce=Ce===0?0:Ce||10;var Ae=E(de).toRgb();return Ae.r=T(0,_(255,Ae.r-g(255*-(Ce/100)))),Ae.g=T(0,_(255,Ae.g-g(255*-(Ce/100)))),Ae.b=T(0,_(255,Ae.b-g(255*-(Ce/100)))),E(Ae)}function G(de,Ce){Ce=Ce===0?0:Ce||10;var Ae=E(de).toHsl();return Ae.l-=Ce/100,Ae.l=ce(Ae.l),E(Ae)}function V(de,Ce){var Ae=E(de).toHsl(),Le=(Ae.h+Ce)%360;return Ae.h=Le<0?360+Le:Le,E(Ae)}function Y(de){var Ce=E(de).toHsl();return Ce.h=(Ce.h+180)%360,E(Ce)}function ee(de){var Ce=E(de).toHsl(),Ae=Ce.h;return[E(de),E({h:(Ae+120)%360,s:Ce.s,l:Ce.l}),E({h:(Ae+240)%360,s:Ce.s,l:Ce.l})]}function X(de){var Ce=E(de).toHsl(),Ae=Ce.h;return[E(de),E({h:(Ae+90)%360,s:Ce.s,l:Ce.l}),E({h:(Ae+180)%360,s:Ce.s,l:Ce.l}),E({h:(Ae+270)%360,s:Ce.s,l:Ce.l})]}function z(de){var Ce=E(de).toHsl(),Ae=Ce.h;return[E(de),E({h:(Ae+72)%360,s:Ce.s,l:Ce.l}),E({h:(Ae+216)%360,s:Ce.s,l:Ce.l})]}function W(de,Ce,Ae){Ce=Ce||6,Ae=Ae||30;var Le=E(de).toHsl(),Me=360/Ae,Ue=[E(de)];for(Le.h=(Le.h-(Me*Ce>>1)+720)%360;--Ce;)Le.h=(Le.h+Me)%360,Ue.push(E(Le));return Ue}function q(de,Ce){Ce=Ce||6;for(var Ae=E(de).toHsv(),Le=Ae.h,Me=Ae.s,Ue=Ae.v,we=[],ge=1/Ce;Ce--;)we.push(E({h:Le,s:Me,v:Ue})),Ue=(Ue+ge)%1;return we}E.mix=function(de,Ce,Ae){Ae=Ae===0?0:Ae||50;var Le=E(de).toRgb(),Me=E(Ce).toRgb(),Ue=Ae/100,we={r:(Me.r-Le.r)*Ue+Le.r,g:(Me.g-Le.g)*Ue+Le.g,b:(Me.b-Le.b)*Ue+Le.b,a:(Me.a-Le.a)*Ue+Le.a};return E(we)},E.readability=function(de,Ce){var Ae=E(de),Le=E(Ce);return(d.max(Ae.getLuminance(),Le.getLuminance())+.05)/(d.min(Ae.getLuminance(),Le.getLuminance())+.05)},E.isReadable=function(de,Ce,Ae){var Le=E.readability(de,Ce),Me,Ue;switch(Ue=!1,Me=oe(Ae),Me.level+Me.size){case"AAsmall":case"AAAlarge":Ue=Le>=4.5;break;case"AAlarge":Ue=Le>=3;break;case"AAAsmall":Ue=Le>=7;break}return Ue},E.mostReadable=function(de,Ce,Ae){var Le=null,Me=0,Ue,we,ge,J;Ae=Ae||{},we=Ae.includeFallbackColors,ge=Ae.level,J=Ae.size;for(var Ee=0;Ee<Ce.length;Ee++)Ue=E.readability(de,Ce[Ee]),Ue>Me&&(Me=Ue,Le=E(Ce[Ee]));return E.isReadable(de,Le,{level:ge,size:J})||!we?Le:(Ae.includeFallbackColors=!1,E.mostReadable(de,["#fff","#000"],Ae))};var Z=E.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ne=E.hexNames=ae(Z);function ae(de){var Ce={};for(var Ae in de)de.hasOwnProperty(Ae)&&(Ce[de[Ae]]=Ae);return Ce}function ue(de){return de=parseFloat(de),(isNaN(de)||de<0||de>1)&&(de=1),de}function te(de,Ce){ke(de)&&(de="100%");var Ae=De(de);return de=_(Ce,T(0,parseFloat(de))),Ae&&(de=parseInt(de*Ce,10)/100),d.abs(de-Ce)<1e-6?1:de%Ce/parseFloat(Ce)}function ce(de){return _(1,T(0,de))}function fe(de){return parseInt(de,16)}function ke(de){return typeof de=="string"&&de.indexOf(".")!=-1&&parseFloat(de)===1}function De(de){return typeof de=="string"&&de.indexOf("%")!=-1}function Fe(de){return de.length==1?"0"+de:""+de}function je(de){return de<=1&&(de=de*100+"%"),de}function Qe(de){return d.round(parseFloat(de)*255).toString(16)}function Ze(de){return fe(de)/255}var ft=function(){var de="[-\\+]?\\d+%?",Ce="[-\\+]?\\d*\\.\\d+%?",Ae="(?:"+Ce+")|(?:"+de+")",Le="[\\s|\\(]+("+Ae+")[,|\\s]+("+Ae+")[,|\\s]+("+Ae+")\\s*\\)?",Me="[\\s|\\(]+("+Ae+")[,|\\s]+("+Ae+")[,|\\s]+("+Ae+")[,|\\s]+("+Ae+")\\s*\\)?";return{CSS_UNIT:new RegExp(Ae),rgb:new RegExp("rgb"+Le),rgba:new RegExp("rgba"+Me),hsl:new RegExp("hsl"+Le),hsla:new RegExp("hsla"+Me),hsv:new RegExp("hsv"+Le),hsva:new RegExp("hsva"+Me),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function kt(de){return!!ft.CSS_UNIT.exec(de)}function Q(de){de=de.replace(u,"").replace(p,"").toLowerCase();var Ce=!1;if(Z[de])de=Z[de],Ce=!0;else if(de=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Ae;return(Ae=ft.rgb.exec(de))?{r:Ae[1],g:Ae[2],b:Ae[3]}:(Ae=ft.rgba.exec(de))?{r:Ae[1],g:Ae[2],b:Ae[3],a:Ae[4]}:(Ae=ft.hsl.exec(de))?{h:Ae[1],s:Ae[2],l:Ae[3]}:(Ae=ft.hsla.exec(de))?{h:Ae[1],s:Ae[2],l:Ae[3],a:Ae[4]}:(Ae=ft.hsv.exec(de))?{h:Ae[1],s:Ae[2],v:Ae[3]}:(Ae=ft.hsva.exec(de))?{h:Ae[1],s:Ae[2],v:Ae[3],a:Ae[4]}:(Ae=ft.hex8.exec(de))?{r:fe(Ae[1]),g:fe(Ae[2]),b:fe(Ae[3]),a:Ze(Ae[4]),format:Ce?"name":"hex8"}:(Ae=ft.hex6.exec(de))?{r:fe(Ae[1]),g:fe(Ae[2]),b:fe(Ae[3]),format:Ce?"name":"hex"}:(Ae=ft.hex4.exec(de))?{r:fe(Ae[1]+""+Ae[1]),g:fe(Ae[2]+""+Ae[2]),b:fe(Ae[3]+""+Ae[3]),a:Ze(Ae[4]+""+Ae[4]),format:Ce?"name":"hex8"}:(Ae=ft.hex3.exec(de))?{r:fe(Ae[1]+""+Ae[1]),g:fe(Ae[2]+""+Ae[2]),b:fe(Ae[3]+""+Ae[3]),format:Ce?"name":"hex"}:!1}function oe(de){var Ce,Ae;return de=de||{level:"AA",size:"small"},Ce=(de.level||"AA").toUpperCase(),Ae=(de.size||"small").toLowerCase(),Ce!=="AA"&&Ce!=="AAA"&&(Ce="AA"),Ae!=="small"&&Ae!=="large"&&(Ae="small"),{level:Ce,size:Ae}}a.exports?a.exports=E:(r=(function(){return E}).call(i,l,i,a),r!==void 0&&(a.exports=r))})(Math)},89:function(a,i){i.Z=(l,r)=>{const d=l.__vccOpts||l;for(const[u,p]of r)d[u]=p;return d}},3647:function(a,i,l){var r=l(6095);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("29397b9c",r,!0,{sourceMap:!1,shadowMode:!1})},325:function(a,i,l){var r=l(6047);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("479d8be0",r,!0,{sourceMap:!1,shadowMode:!1})},5208:function(a,i,l){var r=l(9481);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("1e383f72",r,!0,{sourceMap:!1,shadowMode:!1})},1425:function(a,i,l){var r=l(5186);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("3855edf0",r,!0,{sourceMap:!1,shadowMode:!1})},1902:function(a,i,l){var r=l(3695);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("2f73e1a8",r,!0,{sourceMap:!1,shadowMode:!1})},5815:function(a,i,l){var r=l(7279);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("36c086c2",r,!0,{sourceMap:!1,shadowMode:!1})},8016:function(a,i,l){var r=l(6278);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("8bcdd408",r,!0,{sourceMap:!1,shadowMode:!1})},193:function(a,i,l){var r=l(3468);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("17a63672",r,!0,{sourceMap:!1,shadowMode:!1})},1113:function(a,i,l){var r=l(5689);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("39c50172",r,!0,{sourceMap:!1,shadowMode:!1})},6320:function(a,i,l){var r=l(2410);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("5c6f2742",r,!0,{sourceMap:!1,shadowMode:!1})},3205:function(a,i,l){var r=l(3142);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("90803b82",r,!0,{sourceMap:!1,shadowMode:!1})},1979:function(a,i,l){var r=l(7953);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("418ed5a2",r,!0,{sourceMap:!1,shadowMode:!1})},6547:function(a,i,l){var r=l(3097);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("1f7c089b",r,!0,{sourceMap:!1,shadowMode:!1})},5233:function(a,i,l){var r=l(4339);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[a.id,r,""]]),r.locals&&(a.exports=r.locals);var d=l(7037).Z;d("491ed8fe",r,!0,{sourceMap:!1,shadowMode:!1})},7037:function(a,i,l){l.d(i,{Z:function(){return A}});function r(D,$){for(var M=[],K={},B=0;B<$.length;B++){var H=$[B],G=H[0],V=H[1],Y=H[2],ee=H[3],X={id:D+":"+B,css:V,media:Y,sourceMap:ee};K[G]?K[G].parts.push(X):M.push(K[G]={id:G,parts:[X]})}return M}var d=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u={},p=d&&(document.head||document.getElementsByTagName("head")[0]),h=null,g=0,_=!1,T=function(){},S=null,E="data-vue-ssr-id",y=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function A(D,$,M,K){_=M,S=K||{};var B=r(D,$);return C(B),function(G){for(var V=[],Y=0;Y<B.length;Y++){var ee=B[Y],X=u[ee.id];X.refs--,V.push(X)}G?(B=r(D,G),C(B)):B=[];for(var Y=0;Y<V.length;Y++){var X=V[Y];if(X.refs===0){for(var z=0;z<X.parts.length;z++)X.parts[z]();delete u[X.id]}}}}function C(D){for(var $=0;$<D.length;$++){var M=D[$],K=u[M.id];if(K){K.refs++;for(var B=0;B<K.parts.length;B++)K.parts[B](M.parts[B]);for(;B<M.parts.length;B++)K.parts.push(N(M.parts[B]));K.parts.length>M.parts.length&&(K.parts.length=M.parts.length)}else{for(var H=[],B=0;B<M.parts.length;B++)H.push(N(M.parts[B]));u[M.id]={id:M.id,refs:1,parts:H}}}}function O(){var D=document.createElement("style");return D.type="text/css",p.appendChild(D),D}function N(D){var $,M,K=document.querySelector("style["+E+'~="'+D.id+'"]');if(K){if(_)return T;K.parentNode.removeChild(K)}if(y){var B=g++;K=h||(h=O()),$=k.bind(null,K,B,!1),M=k.bind(null,K,B,!0)}else K=O(),$=L.bind(null,K),M=function(){K.parentNode.removeChild(K)};return $(D),function(G){if(G){if(G.css===D.css&&G.media===D.media&&G.sourceMap===D.sourceMap)return;$(D=G)}else M()}}var R=function(){var D=[];return function($,M){return D[$]=M,D.filter(Boolean).join(`
`)}}();function k(D,$,M,K){var B=M?"":K.css;if(D.styleSheet)D.styleSheet.cssText=R($,B);else{var H=document.createTextNode(B),G=D.childNodes;G[$]&&D.removeChild(G[$]),G.length?D.insertBefore(H,G[$]):D.appendChild(H)}}function L(D,$){var M=$.css,K=$.media,B=$.sourceMap;if(K&&D.setAttribute("media",K),S.ssrId&&D.setAttribute(E,$.id),B&&(M+=`
/*# sourceURL=`+B.sources[0]+" */",M+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(B))))+" */"),D.styleSheet)D.styleSheet.cssText=M;else{for(;D.firstChild;)D.removeChild(D.firstChild);D.appendChild(document.createTextNode(M))}}}},n={};function s(a){var i=n[a];if(i!==void 0)return i.exports;var l=n[a]={id:a,exports:{}};return t[a](l,l.exports,s),l.exports}(function(){s.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(i,{a:i}),i}})(),function(){s.d=function(a,i){for(var l in i)s.o(i,l)&&!s.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:i[l]})}}(),function(){s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){s.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)}}(),function(){s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){s.p=""}();var o={};(function(){if(s.r(o),s.d(o,{Alpha:function(){return Xc},Checkboard:function(){return br},Chrome:function(){return z_},ColorMixin:function(){return E},Compact:function(){return N},EditableInput:function(){return ce},Grayscale:function(){return H},Hue:function(){return Le},Material:function(){return De},Photoshop:function(){return H_},Saturation:function(){return co},Sketch:function(){return K_},Slider:function(){return ge},Swatches:function(){return Ye},Twitter:function(){return W_},default:function(){return lC},version:function(){return j_}}),typeof window<"u"){var a=window.document.currentScript,i=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(s.p=i[1])}var l={i8:"3.0.6"},r=wE;const d={role:"application","aria-label":"Compact color picker",class:"vc-compact"},u={class:"vc-compact-colors",role:"listbox"},p=["aria-label","aria-selected","onClick"],h={class:"vc-compact-dot"};function g(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("ul",u,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(xe.paletteUpperCase(_t.palette),Ut=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{role:"option","aria-label":"color:"+Ut,"aria-selected":Ut===Je.pick,class:(0,r.normalizeClass)(["vc-compact-color-item",{"vc-compact-color-item--white":Ut==="#FFFFFF"}]),key:Ut,style:(0,r.normalizeStyle)({background:Ut}),onClick:en=>Je.handlerClick(Ut)},[(0,r.withDirectives)((0,r.createElementVNode)("div",h,null,512),[[r.vShow,Ut===Je.pick]])],14,p))),128))])])}var _=s(7013),T=s.n(_);function S(xe={},st=0){const _t=xe&&xe.a;let Gt;xe&&xe.hsl?Gt=T()(xe.hsl):xe&&xe.hex&&xe.hex.length>0?Gt=T()(xe.hex):xe&&xe.hsv?Gt=T()(xe.hsv):xe&&xe.rgba?Gt=T()(xe.rgba):xe&&xe.rgb?Gt=T()(xe.rgb):Gt=T()(xe),Gt&&(Gt._a===void 0||Gt._a===null)&&Gt.setAlpha(_t||1);const Xt=Gt.toHsl(),Je=Gt.toHsv();return Xt.s===0&&(Je.h=Xt.h=xe.h||xe.hsl&&xe.hsl.h||st||0),{hsl:Xt,hex:Gt.toHexString().toUpperCase(),hex8:Gt.toHex8String().toUpperCase(),rgba:Gt.toRgb(),hsv:Je,oldHue:xe.h||st||Xt.h,source:xe.source,a:xe.a||Gt.getAlpha()}}var E={props:["modelValue"],data(){return{val:S(this.modelValue)}},computed:{colors:{get(){return this.val},set(xe){this.val=xe,this.$emit("update:modelValue",xe)}}},watch:{modelValue(xe){this.val=S(xe)}},methods:{colorChange(xe,st){this.oldHue=this.colors.hsl.h,this.colors=S(xe,st||this.oldHue)},isValidHex(xe){return T()(xe).isValid()},simpleCheckForValidColor(xe){const st=["r","g","b","a","h","s","l","v"];let _t=0,Gt=0;for(let Xt=0;Xt<st.length;Xt++){const Je=st[Xt];xe[Je]&&(_t++,isNaN(xe[Je])||Gt++)}if(_t===Gt)return xe},paletteUpperCase(xe){return xe.map(st=>st.toUpperCase())},isTransparent(xe){return T()(xe).getAlpha()===0}}};const y=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];var A={name:"Compact",mixins:[E],props:{palette:{type:Array,default(){return y}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(xe){this.colorChange({hex:xe,source:"hex"})}}};s(325);var C=s(89),N=(0,C.Z)(A,[["render",g]]);const R={role:"application","aria-label":"Grayscale color picker",class:"vc-grayscale"},k={class:"vc-grayscale-colors",role:"listbox"},L=["aria-label","aria-selected","onClick"],D={class:"vc-grayscale-dot"};function $(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",R,[(0,r.createElementVNode)("ul",k,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(xe.paletteUpperCase(_t.palette),Ut=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{role:"option","aria-label":"Color:"+Ut,"aria-selected":Ut===Je.pick,key:Ut,class:(0,r.normalizeClass)(["vc-grayscale-color-item",{"vc-grayscale-color-item--white":Ut=="#FFFFFF"}]),style:(0,r.normalizeStyle)({background:Ut}),onClick:en=>Je.handlerClick(Ut)},[(0,r.withDirectives)((0,r.createElementVNode)("div",D,null,512),[[r.vShow,Ut===Je.pick]])],14,L))),128))])])}const M=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];var K={name:"Grayscale",mixins:[E],props:{palette:{type:Array,default(){return M}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(xe){this.colorChange({hex:xe,source:"hex"})}}};s(5208);var H=(0,C.Z)(K,[["render",$]]);const G={role:"application","aria-label":"Material color picker",class:"vc-material"},V={class:"vc-material-split"},Y={class:"vc-material-third"},ee={class:"vc-material-third"},X={class:"vc-material-third"};function z(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",G,[(0,r.createVNode)(Ut,{class:"vc-material-hex",label:"hex",modelValue:xe.colors.hex,"onUpdate:modelValue":st[0]||(st[0]=en=>xe.colors.hex=en),style:(0,r.normalizeStyle)({borderColor:xe.colors.hex}),onChange:Je.onChange},null,8,["modelValue","style","onChange"]),(0,r.createElementVNode)("div",V,[(0,r.createElementVNode)("div",Y,[(0,r.createVNode)(Ut,{label:"r",modelValue:xe.colors.rgba.r,"onUpdate:modelValue":st[1]||(st[1]=en=>xe.colors.rgba.r=en),onChange:Je.onChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",ee,[(0,r.createVNode)(Ut,{label:"g",modelValue:xe.colors.rgba.g,"onUpdate:modelValue":st[2]||(st[2]=en=>xe.colors.rgba.g=en),onChange:Je.onChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",X,[(0,r.createVNode)(Ut,{label:"b",modelValue:xe.colors.rgba.b,"onUpdate:modelValue":st[3]||(st[3]=en=>xe.colors.rgba.b=en),onChange:Je.onChange},null,8,["modelValue","onChange"])])])])}const W={class:"vc-editable-input"},q=["aria-labelledby"],Z=["for","id"],ne={class:"vc-input__desc"};function ae(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",W,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"aria-labelledby":Je.labelId,class:"vc-input__input","onUpdate:modelValue":st[0]||(st[0]=Ut=>Je.val=Ut),onKeydown:st[1]||(st[1]=(...Ut)=>Je.handleKeyDown&&Je.handleKeyDown(...Ut)),onInput:st[2]||(st[2]=(...Ut)=>Je.update&&Je.update(...Ut)),ref:"input"},null,40,q),[[r.vModelText,Je.val]]),(0,r.createElementVNode)("span",{for:_t.label,class:"vc-input__label",id:Je.labelId},(0,r.toDisplayString)(Je.labelSpanText),9,Z),(0,r.createElementVNode)("span",ne,(0,r.toDisplayString)(_t.desc),1)])}var ue={name:"editableInput",props:{label:String,labelText:String,desc:String,modelValue:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.modelValue},set(xe){if(this.max!==void 0&&+xe>this.max)this.$refs.input.value=this.max;else return xe}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(xe){this.handleChange(xe.target.value)},handleChange(xe){const st={};st[this.label]=xe,st.hex===void 0&&st["#"]===void 0?this.$emit("change",st):xe.length>5&&this.$emit("change",st)},handleKeyDown(xe){let st=this.val;const _t=Number(st);if(_t){const Gt=this.arrowOffset||1;xe.keyCode===38&&(st=_t+Gt,this.handleChange(st),xe.preventDefault()),xe.keyCode===40&&(st=_t-Gt,this.handleChange(st),xe.preventDefault())}}}};s(1979);var ce=(0,C.Z)(ue,[["render",ae]]),fe={name:"Material",mixins:[E],components:{"ed-in":ce},methods:{onChange(xe){xe&&(xe.hex?this.isValidHex(xe.hex)&&this.colorChange({hex:xe.hex,source:"hex"}):(xe.r||xe.g||xe.b)&&this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}))}}};s(1425);var De=(0,C.Z)(fe,[["render",z]]);const Fe={role:"application","aria-label":"Slider color picker",class:"vc-slider"},je={class:"vc-slider-hue-warp"},Qe={class:"vc-slider-swatches",role:"group"},Ze=["data-index","aria-label","onClick"];function ft(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("hue");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Fe,[(0,r.createElementVNode)("div",je,[(0,r.createVNode)(Ut,{modelValue:xe.colors,"onUpdate:modelValue":st[0]||(st[0]=en=>xe.colors=en),onChange:Je.hueChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Qe,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Je.normalizedSwatches,(en,Sn)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-slider-swatch",key:Sn,"data-index":Sn,"aria-label":"color:"+xe.colors.hex,role:"button",onClick:Vn=>Je.handleSwClick(Sn,en)},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["vc-slider-swatch-picker",{"vc-slider-swatch-picker--active":Je.isActive(en,Sn),"vc-slider-swatch-picker--white":en.l===1}]),style:(0,r.normalizeStyle)({background:"hsl("+xe.colors.hsl.h+", "+en.s*100+"%, "+en.l*100+"%)"})},null,6)],8,Ze))),128))])])}const kt=["aria-valuenow"],oe=[(0,r.createElementVNode)("div",{class:"vc-hue-picker"},null,-1)];function de(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-hue",Je.directionClass])},[(0,r.createElementVNode)("div",{class:"vc-hue-container",role:"slider","aria-valuenow":Je.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:st[0]||(st[0]=(...Ut)=>Je.handleMouseDown&&Je.handleMouseDown(...Ut)),onTouchmove:st[1]||(st[1]=(...Ut)=>Je.handleChange&&Je.handleChange(...Ut)),onTouchstart:st[2]||(st[2]=(...Ut)=>Je.handleChange&&Je.handleChange(...Ut))},[(0,r.createElementVNode)("div",{class:"vc-hue-pointer",style:(0,r.normalizeStyle)({top:Je.pointerTop,left:Je.pointerLeft}),role:"presentation"},oe,4)],40,kt)],2)}var Ce={name:"Hue",props:{modelValue:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const xe=this.modelValue.hsl.h;return xe!==0&&xe-this.oldHue>0&&(this.pullDirection="right"),xe!==0&&xe-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=xe,this.modelValue},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:-(this.colors.hsl.h*100/360)+100+"%":0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":this.colors.hsl.h*100/360+"%"}},methods:{handleChange(xe,st){!st&&xe.preventDefault();const _t=this.$refs.container;if(!_t)return;const Gt=_t.clientWidth,Xt=_t.clientHeight,Je=_t.getBoundingClientRect().left+window.pageXOffset,Ut=_t.getBoundingClientRect().top+window.pageYOffset,en=xe.pageX||(xe.touches?xe.touches[0].pageX:0),Sn=xe.pageY||(xe.touches?xe.touches[0].pageY:0),Vn=en-Je,es=Sn-Ut;let rn,ni;this.direction==="vertical"?(es<0?rn=360:es>Xt?rn=0:(ni=-(es*100/Xt)+100,rn=360*ni/100),this.colors.hsl.h!==rn&&this.$emit("change",{h:rn,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(Vn<0?rn=0:Vn>Gt?rn=360:(ni=Vn*100/Gt,rn=360*ni/100),this.colors.hsl.h!==rn&&this.$emit("change",{h:rn,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(xe){this.handleChange(xe,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(xe){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6547);var Le=(0,C.Z)(Ce,[["render",de]]);const Me=.5;var Ue={name:"Slider",mixins:[E],props:{swatches:{type:Array,default(){return[{s:Me,l:.8},{s:Me,l:.65},{s:Me,l:.5},{s:Me,l:.35},{s:Me,l:.2}]}}},components:{hue:Le},computed:{normalizedSwatches(){return this.swatches.map(st=>typeof st!="object"?{s:Me,l:st}:st)}},methods:{isActive(xe,st){const _t=this.colors.hsl;return _t.l===1&&xe.l===1||_t.l===0&&xe.l===0?!0:Math.abs(_t.l-xe.l)<.01&&Math.abs(_t.s-xe.s)<.01},hueChange(xe){this.colorChange(xe)},handleSwClick(xe,st){this.colorChange({h:this.colors.hsl.h,s:st.s,l:st.l,source:"hsl"})}}};s(8016);var ge=(0,C.Z)(Ue,[["render",ft]]);const J=["data-pick"],Ee={class:"vc-swatches-box",role:"listbox"},$e=["aria-label","aria-selected","data-color","onClick"],se={class:"vc-swatches-pick"},_e=[(0,r.createElementVNode)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},[(0,r.createElementVNode)("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})],-1)];function Ie(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Swatches color picker",class:"vc-swatches","data-pick":Je.pick},[(0,r.createElementVNode)("div",Ee,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(_t.palette,(Ut,en)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-swatches-color-group",key:en},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Ut,Sn=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-swatches-color-it",{"vc-swatches-color--white":Sn==="#FFFFFF"}]),role:"option","aria-label":"Color:"+Sn,"aria-selected":Je.equal(Sn),key:Sn,"data-color":Sn,style:(0,r.normalizeStyle)({background:Sn}),onClick:Vn=>Je.handlerClick(Sn)},[(0,r.withDirectives)((0,r.createElementVNode)("div",se,_e,512),[[r.vShow,Je.equal(Sn)]])],14,$e))),128))]))),128))])],8,J)}var Pe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Ne={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},ve={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},me={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Oe={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Ge={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Se={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},We={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},mt={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Nt={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},nt={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},St={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},qe={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},bt={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Vt={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},dt={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},It={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},rt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},wt={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},pn={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},vt={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},Ft={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},zt={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},un="#ffffff",fs="#000000",Pn={red:Pe,pink:Ne,purple:ve,deepPurple:me,indigo:Oe,blue:Ge,lightBlue:Se,cyan:We,teal:mt,green:Nt,lightGreen:nt,lime:St,yellow:qe,amber:bt,orange:Vt,deepOrange:dt,brown:It,grey:rt,blueGrey:wt,darkText:pn,lightText:vt,darkIcons:Ft,lightIcons:zt,white:un,black:fs};const An=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],rs=["900","700","500","300","100"],gs=(()=>{const xe=[];return An.forEach(st=>{let _t=[];st.toLowerCase()==="black"||st.toLowerCase()==="white"?_t=_t.concat(["#000000","#FFFFFF"]):rs.forEach(Gt=>{const Xt=Pn[st][Gt];_t.push(Xt.toUpperCase())}),xe.push(_t)}),xe})();var _s={name:"Swatches",mixins:[E],props:{palette:{type:Array,default(){return gs}}},computed:{pick(){return this.colors.hex}},methods:{equal(xe){return xe.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(xe){this.colorChange({hex:xe,source:"hex"})}}};s(193);var Ye=(0,C.Z)(_s,[["render",Ie]]);const Xe={role:"heading",class:"vc-ps-head"},pt={class:"vc-ps-body"},Et={class:"vc-ps-saturation-wrap"},ze={class:"vc-ps-hue-wrap"},Rt=(0,r.createElementVNode)("div",{class:"vc-ps-hue-pointer"},[(0,r.createElementVNode)("i",{class:"vc-ps-hue-pointer--left"}),(0,r.createElementVNode)("i",{class:"vc-ps-hue-pointer--right"})],-1),Tn={class:"vc-ps-previews"},ot={class:"vc-ps-previews__label"},Tt={class:"vc-ps-previews__swatches"},Yt=["aria-label"],Is=["aria-label"],pa={class:"vc-ps-previews__label"},Hs={key:0,class:"vc-ps-actions"},Cs=["aria-label"],$o=["aria-label"],Lm={class:"vc-ps-fields"},vs=(0,r.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1),hr=(0,r.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1);function fr(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("saturation"),en=(0,r.resolveComponent)("hue"),Sn=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"PhotoShop color picker",class:(0,r.normalizeClass)(["vc-photoshop",_t.disableFields?"vc-photoshop__disable-fields":""])},[(0,r.createElementVNode)("div",Xe,(0,r.toDisplayString)(_t.head),1),(0,r.createElementVNode)("div",pt,[(0,r.createElementVNode)("div",Et,[(0,r.createVNode)(Ut,{modelValue:xe.colors,"onUpdate:modelValue":st[0]||(st[0]=Vn=>xe.colors=Vn),onChange:Je.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",ze,[(0,r.createVNode)(en,{modelValue:xe.colors,"onUpdate:modelValue":st[1]||(st[1]=Vn=>xe.colors=Vn),onChange:Je.childChange,direction:"vertical"},{default:(0,r.withCtx)(()=>[Rt]),_:1},8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["vc-ps-controls",_t.disableFields?"vc-ps-controls__disable-fields":""])},[(0,r.createElementVNode)("div",Tn,[(0,r.createElementVNode)("div",ot,(0,r.toDisplayString)(_t.newLabel),1),(0,r.createElementVNode)("div",Tt,[(0,r.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`New color is ${xe.colors.hex}`,style:(0,r.normalizeStyle)({background:xe.colors.hex})},null,12,Yt),(0,r.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`Current color is ${Xt.currentColor}`,style:(0,r.normalizeStyle)({background:Xt.currentColor}),onClick:st[2]||(st[2]=(...Vn)=>Je.clickCurrentColor&&Je.clickCurrentColor(...Vn))},null,12,Is)]),(0,r.createElementVNode)("div",pa,(0,r.toDisplayString)(_t.currentLabel),1)]),_t.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",Hs,[(0,r.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":_t.acceptLabel,onClick:st[3]||(st[3]=(...Vn)=>Je.handleAccept&&Je.handleAccept(...Vn))},(0,r.toDisplayString)(_t.acceptLabel),9,Cs),(0,r.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":_t.cancelLabel,onClick:st[4]||(st[4]=(...Vn)=>Je.handleCancel&&Je.handleCancel(...Vn))},(0,r.toDisplayString)(_t.cancelLabel),9,$o),(0,r.createElementVNode)("div",Lm,[(0,r.createVNode)(Sn,{label:"h",desc:"",modelValue:Je.hsv.h,onChange:Je.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"s",desc:"%",modelValue:Je.hsv.s,max:100,onChange:Je.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"v",desc:"%",modelValue:Je.hsv.v,max:100,onChange:Je.inputChange},null,8,["modelValue","onChange"]),vs,(0,r.createVNode)(Sn,{label:"r",modelValue:xe.colors.rgba.r,onChange:Je.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"g",modelValue:xe.colors.rgba.g,onChange:Je.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"b",modelValue:xe.colors.rgba.b,onChange:Je.inputChange},null,8,["modelValue","onChange"]),hr,(0,r.createVNode)(Sn,{label:"#",class:"vc-ps-fields__hex",modelValue:Je.hex,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),_t.hasResetButton?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"vc-ps-ac-btn","aria-label":"reset",onClick:st[5]||(st[5]=(...Vn)=>Je.handleReset&&Je.handleReset(...Vn))},(0,r.toDisplayString)(_t.resetLabel),1)):(0,r.createCommentVNode)("",!0)]))],2)])],2)}const gr=(0,r.createElementVNode)("div",{class:"vc-saturation--white"},null,-1),Ks=(0,r.createElementVNode)("div",{class:"vc-saturation--black"},null,-1),Mo=[(0,r.createElementVNode)("div",{class:"vc-saturation-circle"},null,-1)];function _r(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-saturation",style:(0,r.normalizeStyle)({background:Je.bgColor}),ref:"container",onMousedown:st[0]||(st[0]=(...Ut)=>Je.handleMouseDown&&Je.handleMouseDown(...Ut)),onTouchmove:st[1]||(st[1]=(...Ut)=>Je.handleChange&&Je.handleChange(...Ut)),onTouchstart:st[2]||(st[2]=(...Ut)=>Je.handleChange&&Je.handleChange(...Ut))},[gr,Ks,(0,r.createElementVNode)("div",{class:"vc-saturation-pointer",style:(0,r.normalizeStyle)({top:Je.pointerTop,left:Je.pointerLeft})},Mo,4)],36)}var ko=s(9428),ki=s.n(ko),Li=s(9289),Di={name:"Saturation",props:{modelValue:Object},computed:{colors(){return this.modelValue},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-(this.colors.hsv.v*100)+1+100+"%"},pointerLeft(){return this.colors.hsv.s*100+"%"}},methods:{throttle:Li((xe,st)=>{xe(st)},20,{leading:!0,trailing:!1}),handleChange(xe,st){!st&&xe.preventDefault();const _t=this.$refs.container;if(!_t)return;const Gt=_t.clientWidth,Xt=_t.clientHeight,Je=_t.getBoundingClientRect().left+window.pageXOffset,Ut=_t.getBoundingClientRect().top+window.pageYOffset,en=xe.pageX||(xe.touches?xe.touches[0].pageX:0),Sn=xe.pageY||(xe.touches?xe.touches[0].pageY:0),Vn=ki()(en-Je,0,Gt),es=ki()(Sn-Ut,0,Xt),rn=Vn/Gt,ni=ki()(-(es/Xt)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:rn,v:ni,a:this.colors.hsv.a,source:"hsva"})},onChange(xe){this.$emit("change",xe)},handleMouseDown(xe){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(xe){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(5233);var co=(0,C.Z)(Di,[["render",_r]]),q2={name:"Photoshop",mixins:[E],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:co,hue:Le,"ed-in":ce},data(){return{currentColor:"#FFF"}},computed:{hsv(){const xe=this.colors.hsv;return{h:xe.h.toFixed(),s:(xe.s*100).toFixed(),v:(xe.v*100).toFixed()}},hex(){const xe=this.colors.hex;return xe&&xe.replace("#","")}},created(){this.currentColor=this.colors.hex},methods:{childChange(xe){this.colorChange(xe)},inputChange(xe){xe&&(xe["#"]?this.isValidHex(xe["#"])&&this.colorChange({hex:xe["#"],source:"hex"}):xe.r||xe.g||xe.b||xe.a?this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}):(xe.h||xe.s||xe.v)&&this.colorChange({h:xe.h||this.colors.hsv.h,s:xe.s/100||this.colors.hsv.s,v:xe.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept(){this.$emit("ok")},handleCancel(){this.$emit("cancel")},handleReset(){this.$emit("reset")}}};s(1902);var H_=(0,C.Z)(q2,[["render",fr]]);const Z2={class:"vc-sketch-saturation-wrap"},Q2={class:"vc-sketch-controls"},J2={class:"vc-sketch-sliders"},eI={class:"vc-sketch-hue-wrap"},tI={key:0,class:"vc-sketch-alpha-wrap"},nI={class:"vc-sketch-color-wrap"},sI=["aria-label"],aI={key:0,class:"vc-sketch-field"},oI={class:"vc-sketch-field--double"},iI={class:"vc-sketch-field--single"},lI={class:"vc-sketch-field--single"},rI={class:"vc-sketch-field--single"},cI={key:0,class:"vc-sketch-field--single"},dI={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},uI=["aria-label","onClick"],mI=["aria-label","onClick"];function pI(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("saturation"),en=(0,r.resolveComponent)("hue"),Sn=(0,r.resolveComponent)("alpha"),Vn=(0,r.resolveComponent)("checkboard"),es=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Sketch color picker",class:(0,r.normalizeClass)(["vc-sketch",_t.disableAlpha?"vc-sketch__disable-alpha":""])},[(0,r.createElementVNode)("div",Z2,[(0,r.createVNode)(Ut,{modelValue:xe.colors,"onUpdate:modelValue":st[0]||(st[0]=rn=>xe.colors=rn),onChange:Je.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Q2,[(0,r.createElementVNode)("div",J2,[(0,r.createElementVNode)("div",eI,[(0,r.createVNode)(en,{modelValue:xe.colors,"onUpdate:modelValue":st[1]||(st[1]=rn=>xe.colors=rn),onChange:Je.childChange},null,8,["modelValue","onChange"])]),_t.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",tI,[(0,r.createVNode)(Sn,{modelValue:xe.colors,"onUpdate:modelValue":st[2]||(st[2]=rn=>xe.colors=rn),onChange:Je.childChange},null,8,["modelValue","onChange"])]))]),(0,r.createElementVNode)("div",nI,[(0,r.createElementVNode)("div",{"aria-label":`Current color is ${Je.activeColor}`,class:"vc-sketch-active-color",style:(0,r.normalizeStyle)({background:Je.activeColor})},null,12,sI),(0,r.createVNode)(Vn)])]),_t.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",aI,[(0,r.createElementVNode)("div",oI,[(0,r.createVNode)(es,{label:"hex",modelValue:Je.hex,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",iI,[(0,r.createVNode)(es,{label:"r",modelValue:xe.colors.rgba.r,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",lI,[(0,r.createVNode)(es,{label:"g",modelValue:xe.colors.rgba.g,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",rI,[(0,r.createVNode)(es,{label:"b",modelValue:xe.colors.rgba.b,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),_t.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",cI,[(0,r.createVNode)(es,{label:"a",modelValue:xe.colors.a,"arrow-offset":.01,max:1,onChange:Je.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))])),(0,r.createElementVNode)("div",dI,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(_t.presetColors,rn=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[xe.isTransparent(rn)?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:"else-"+rn,"aria-label":"Color:"+rn,class:"vc-sketch-presets-color",onClick:ni=>Je.handlePreset(rn)},[(0,r.createVNode)(Vn)],8,mI)):((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-sketch-presets-color","aria-label":"Color:"+rn,key:"if-"+rn,style:(0,r.normalizeStyle)({background:rn}),onClick:ni=>Je.handlePreset(rn)},null,12,uI))],64))),256))])],2)}const hI={class:"vc-alpha"},fI={class:"vc-alpha-checkboard-wrap"},gI=[(0,r.createElementVNode)("div",{class:"vc-alpha-picker"},null,-1)];function _I(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("checkboard");return(0,r.openBlock)(),(0,r.createElementBlock)("div",hI,[(0,r.createElementVNode)("div",fI,[(0,r.createVNode)(Ut)]),(0,r.createElementVNode)("div",{class:"vc-alpha-gradient",style:(0,r.normalizeStyle)({background:Je.gradientColor})},null,4),(0,r.createElementVNode)("div",{class:"vc-alpha-container",ref:"container",onMousedown:st[0]||(st[0]=(...en)=>Je.handleMouseDown&&Je.handleMouseDown(...en)),onTouchmove:st[1]||(st[1]=(...en)=>Je.handleChange&&Je.handleChange(...en)),onTouchstart:st[2]||(st[2]=(...en)=>Je.handleChange&&Je.handleChange(...en))},[(0,r.createElementVNode)("div",{class:"vc-alpha-pointer",style:(0,r.normalizeStyle)({left:Je.colors.a*100+"%"})},gI,4)],544)])}function vI(xe,st,_t,Gt,Xt,Je){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-checkerboard",style:(0,r.normalizeStyle)(Je.bgStyle)},null,4)}const Dm={};var bI={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+TI(this.white,this.grey,this.size)+")"}}}};function EI(xe,st,_t){if(typeof document>"u")return null;const Gt=document.createElement("canvas");Gt.width=Gt.height=_t*2;const Xt=Gt.getContext("2d");return Xt?(Xt.fillStyle=xe,Xt.fillRect(0,0,Gt.width,Gt.height),Xt.fillStyle=st,Xt.fillRect(0,0,_t,_t),Xt.translate(_t,_t),Xt.fillRect(0,0,_t,_t),Gt.toDataURL()):null}function TI(xe,st,_t){const Gt=xe+","+st+","+_t;if(Dm[Gt])return Dm[Gt];{const Xt=EI(xe,st,_t);return Dm[Gt]=Xt,Xt}}s(3205);var br=(0,C.Z)(bI,[["render",vI]]),yI={name:"Alpha",props:{modelValue:Object,onChange:Function},components:{checkboard:br},computed:{colors(){return this.modelValue},gradientColor(){const xe=this.colors.rgba,st=[xe.r,xe.g,xe.b].join(",");return"linear-gradient(to right, rgba("+st+", 0) 0%, rgba("+st+", 1) 100%)"}},methods:{handleChange(xe,st){!st&&xe.preventDefault();const _t=this.$refs.container;if(!_t)return;const Gt=_t.clientWidth,Xt=_t.getBoundingClientRect().left+window.pageXOffset,Ut=(xe.pageX||(xe.touches?xe.touches[0].pageX:0))-Xt;let en;Ut<0?en=0:Ut>Gt?en=1:en=Math.round(Ut*100/Gt)/100,this.colors.a!==en&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:en,source:"rgba"})},handleMouseDown(xe){this.handleChange(xe,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6320);var Xc=(0,C.Z)(yI,[["render",_I]]);const AI=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var SI={name:"Sketch",mixins:[E],components:{saturation:co,hue:Le,alpha:Xc,"ed-in":ce,checkboard:br},props:{presetColors:{type:Array,default(){return AI}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let xe;return this.colors.a<1?xe=this.colors.hex8:xe=this.colors.hex,xe.replace("#","")},activeColor(){const xe=this.colors.rgba;return"rgba("+[xe.r,xe.g,xe.b,xe.a].join(",")+")"}},methods:{handlePreset(xe){this.colorChange({hex:xe,source:"hex"})},childChange(xe){this.colorChange(xe)},inputChange(xe){xe&&(xe.hex?this.isValidHex(xe.hex)&&this.colorChange({hex:xe.hex,source:"hex"}):(xe.r||xe.g||xe.b||xe.a)&&this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}))}}};s(5815);var K_=(0,C.Z)(SI,[["render",pI]]);const II={class:"vc-chrome-saturation-wrap"},CI={class:"vc-chrome-body"},NI={class:"vc-chrome-controls"},OI={class:"vc-chrome-color-wrap"},xI=["aria-label"],wI={class:"vc-chrome-sliders"},RI={class:"vc-chrome-hue-wrap"},$I={key:0,class:"vc-chrome-alpha-wrap"},MI={key:0,class:"vc-chrome-fields-wrap"},kI={class:"vc-chrome-fields"},LI={class:"vc-chrome-field"},DI={class:"vc-chrome-fields"},PI={class:"vc-chrome-field"},BI={class:"vc-chrome-field"},FI={class:"vc-chrome-field"},UI={key:0,class:"vc-chrome-field"},GI={class:"vc-chrome-fields"},VI={class:"vc-chrome-field"},HI={class:"vc-chrome-field"},KI={class:"vc-chrome-field"},zI={key:0,class:"vc-chrome-field"},WI={class:"vc-chrome-toggle-icon"},jI=[(0,r.createElementVNode)("path",{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},null,-1)],YI={class:"vc-chrome-toggle-icon-highlight"};function XI(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("saturation"),en=(0,r.resolveComponent)("checkboard"),Sn=(0,r.resolveComponent)("hue"),Vn=(0,r.resolveComponent)("alpha"),es=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Chrome color picker",class:(0,r.normalizeClass)(["vc-chrome",_t.disableAlpha?"vc-chrome__disable-alpha":""])},[(0,r.createElementVNode)("div",II,[(0,r.createVNode)(Ut,{modelValue:xe.colors,"onUpdate:modelValue":st[0]||(st[0]=rn=>xe.colors=rn),onChange:Je.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",CI,[(0,r.createElementVNode)("div",NI,[(0,r.createElementVNode)("div",OI,[(0,r.createElementVNode)("div",{"aria-label":`current color is ${xe.colors.hex}`,class:"vc-chrome-active-color",style:(0,r.normalizeStyle)({background:Je.activeColor})},null,12,xI),_t.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(en,{key:0}))]),(0,r.createElementVNode)("div",wI,[(0,r.createElementVNode)("div",RI,[(0,r.createVNode)(Sn,{modelValue:xe.colors,"onUpdate:modelValue":st[1]||(st[1]=rn=>xe.colors=rn),onChange:Je.childChange},null,8,["modelValue","onChange"])]),_t.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",$I,[(0,r.createVNode)(Vn,{modelValue:xe.colors,"onUpdate:modelValue":st[2]||(st[2]=rn=>xe.colors=rn),onChange:Je.childChange},null,8,["modelValue","onChange"])]))])]),_t.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",MI,[(0,r.withDirectives)((0,r.createElementVNode)("div",kI,[(0,r.createElementVNode)("div",LI,[Je.hasAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(es,{key:0,label:"hex",modelValue:xe.colors.hex,onChange:Je.inputChange},null,8,["modelValue","onChange"])),Je.hasAlpha?((0,r.openBlock)(),(0,r.createBlock)(es,{key:1,label:"hex",modelValue:xe.colors.hex8,onChange:Je.inputChange},null,8,["modelValue","onChange"])):(0,r.createCommentVNode)("",!0)])],512),[[r.vShow,Xt.fieldsIndex===0]]),(0,r.withDirectives)((0,r.createElementVNode)("div",DI,[(0,r.createElementVNode)("div",PI,[(0,r.createVNode)(es,{label:"r",modelValue:xe.colors.rgba.r,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",BI,[(0,r.createVNode)(es,{label:"g",modelValue:xe.colors.rgba.g,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",FI,[(0,r.createVNode)(es,{label:"b",modelValue:xe.colors.rgba.b,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),_t.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",UI,[(0,r.createVNode)(es,{label:"a",modelValue:xe.colors.a,"arrow-offset":.01,max:1,onChange:Je.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[r.vShow,Xt.fieldsIndex===1]]),(0,r.withDirectives)((0,r.createElementVNode)("div",GI,[(0,r.createElementVNode)("div",VI,[(0,r.createVNode)(es,{label:"h",modelValue:Je.hsl.h,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",HI,[(0,r.createVNode)(es,{label:"s",modelValue:Je.hsl.s,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",KI,[(0,r.createVNode)(es,{label:"l",modelValue:Je.hsl.l,onChange:Je.inputChange},null,8,["modelValue","onChange"])]),_t.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",zI,[(0,r.createVNode)(es,{label:"a",modelValue:xe.colors.a,"arrow-offset":.01,max:1,onChange:Je.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[r.vShow,Xt.fieldsIndex===2]]),(0,r.createElementVNode)("div",{class:"vc-chrome-toggle-btn",role:"button","aria-label":"Change another color definition",onClick:st[6]||(st[6]=(...rn)=>Je.toggleViews&&Je.toggleViews(...rn))},[(0,r.createElementVNode)("div",WI,[((0,r.openBlock)(),(0,r.createElementBlock)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",onMouseover:st[3]||(st[3]=(...rn)=>Je.showHighlight&&Je.showHighlight(...rn)),onMouseenter:st[4]||(st[4]=(...rn)=>Je.showHighlight&&Je.showHighlight(...rn)),onMouseout:st[5]||(st[5]=(...rn)=>Je.hideHighlight&&Je.hideHighlight(...rn))},jI,32))]),(0,r.withDirectives)((0,r.createElementVNode)("div",YI,null,512),[[r.vShow,Xt.highlight]])])]))])],2)}var qI={name:"Chrome",mixins:[E],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:co,hue:Le,alpha:Xc,"ed-in":ce,checkboard:br},data(){return{fieldsIndex:0,highlight:!1}},computed:{hsl(){const{h:xe,s:st,l:_t}=this.colors.hsl;return{h:xe.toFixed(),s:`${(st*100).toFixed()}%`,l:`${(_t*100).toFixed()}%`}},activeColor(){const xe=this.colors.rgba;return"rgba("+[xe.r,xe.g,xe.b,xe.a].join(",")+")"},hasAlpha(){return this.colors.a<1}},methods:{childChange(xe){this.colorChange(xe)},inputChange(xe){if(xe){if(xe.hex)this.isValidHex(xe.hex)&&this.colorChange({hex:xe.hex,source:"hex"});else if(xe.r||xe.g||xe.b||xe.a)this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"});else if(xe.h||xe.s||xe.l){const st=xe.s?xe.s.replace("%","")/100:this.colors.hsl.s,_t=xe.l?xe.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:xe.h||this.colors.hsl.h,s:st,l:_t,source:"hsl"})}}},toggleViews(){if(this.fieldsIndex>=2){this.fieldsIndex=0;return}this.fieldsIndex++},showHighlight(){this.highlight=!0},hideHighlight(){this.highlight=!1}}};s(3647);var z_=(0,C.Z)(qI,[["render",XI]]);const ZI=(0,r.createElementVNode)("div",{class:"vc-twitter-triangle-shadow"},null,-1),QI=(0,r.createElementVNode)("div",{class:"vc-twitter-triangle"},null,-1),JI={class:"vc-twitter-body"},eC=["onClick"],tC=(0,r.createElementVNode)("div",{class:"vc-twitter-hash"},"#",-1),nC=(0,r.createElementVNode)("div",{class:"vc-twitter-clear"},null,-1);function sC(xe,st,_t,Gt,Xt,Je){const Ut=(0,r.resolveComponent)("editable-input");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-twitter",{"vc-twitter-hide-triangle ":_t.triangle==="hide","vc-twitter-top-left-triangle ":_t.triangle==="top-left","vc-twitter-top-right-triangle ":_t.triangle==="top-right"}]),style:(0,r.normalizeStyle)({width:typeof _t.width=="number"?`${_t.width}px`:_t.width})},[ZI,QI,(0,r.createElementVNode)("div",JI,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(_t.defaultColors,(en,Sn)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{class:"vc-twitter-swatch",style:(0,r.normalizeStyle)({background:en,boxShadow:`0 0 4px ${Je.equal(en)?en:"transparent"}`}),key:Sn,onClick:Vn=>Je.handlerClick(en)},null,12,eC))),128)),tC,(0,r.createVNode)(Ut,{label:"#",modelValue:Je.hex,onChange:Je.inputChange},null,8,["modelValue","onChange"]),nC])],6)}const aC=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];var oC={name:"Twitter",mixins:[E],components:{editableInput:ce},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default(){return aC}},triangle:{default:"top-left",validator(xe){return["hide","top-left","top-right"].includes(xe)}}},computed:{hsv(){const xe=this.colors.hsv;return{h:xe.h.toFixed(),s:(xe.s*100).toFixed(),v:(xe.v*100).toFixed()}},hex(){const xe=this.colors.hex;return xe&&xe.replace("#","")}},methods:{equal(xe){return xe.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(xe){this.colorChange({hex:xe,source:"hex"})},inputChange(xe){xe&&(xe["#"]?this.isValidHex(xe["#"])&&this.colorChange({hex:xe["#"],source:"hex"}):xe.r||xe.g||xe.b||xe.a?this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}):(xe.h||xe.s||xe.v)&&this.colorChange({h:xe.h||this.colors.hsv.h,s:xe.s/100||this.colors.hsv.s,v:xe.v/100||this.colors.hsv.v,source:"hsv"}))}}};s(1113);var W_=(0,C.Z)(oC,[["render",sC]]);const j_=l.i8,Y_={version:j_,Compact:N,Grayscale:H,Twitter:W_,Material:De,Slider:ge,Swatches:Ye,Photoshop:H_,Sketch:K_,Chrome:z_,Alpha:Xc,Checkboard:br,EditableInput:ce,Hue:Le,Saturation:co,ColorMixin:E};typeof process=="object"&&String(process)==="[object process]"||(window.VueColor=Y_);var iC=Y_,lC=iC})(),e.exports=o})()})(wT);var RT=wT.exports;const jR={components:{Chrome:RT.Chrome},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{isPickerOpen:!1}},methods:{closeTogglePicker(){this.isPickerOpen&&this.toggleColorPicker()},toggleColorPicker(){this.isPickerOpen=!this.isPickerOpen},updateColor(e){this.$emit("update:modelValue",e.hex)}}},YR={class:"colorpicker"};function XR(e,t,n,s,o,a){const i=F("Chrome"),l=ct("on-clickaway");return m(),f("div",YR,[c("div",{class:"colorpicker--selected",style:At(`background-color: ${n.modelValue}`),onClick:t[0]||(t[0]=Ke((...r)=>a.toggleColorPicker&&a.toggleColorPicker(...r),["prevent"]))},null,4),o.isPickerOpen?ie((m(),P(i,{key:0,"disable-alpha":"","model-value":n.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":a.updateColor},null,8,["model-value","onUpdate:modelValue"])),[[l,a.closeTogglePicker]]):x("",!0)])}const qR=Re(jR,[["render",XR],["__scopeId","data-v-93c78be0"]]);function no(e){return dC()?(uC(e),!0):!1}function Zn(e){return typeof e=="function"?e():I(e)}const Jl=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $T=e=>e!=null,ZR=Object.prototype.toString,MT=e=>ZR.call(e)==="[object Object]",Ba=()=>{},hu=QR();function QR(){var e,t;return Jl&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function JR(e,t){function n(...s){return new Promise((o,a)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(o).catch(a)})}return n}const kT=e=>e();function e$(e=kT){const t=U(!0);function n(){t.value=!1}function s(){t.value=!0}const o=(...a)=>{t.value&&e(...a)};return{isActive:kf(t),pause:n,resume:s,eventFilter:o}}function t$(e){return Lf()}function n$(...e){if(e.length!==1)return Jd(...e);const t=e[0];return typeof t=="function"?kf(mC(()=>({get:t,set:Ba}))):U(t)}function s$(e,t,n={}){const{eventFilter:s=kT,...o}=n;return lt(e,JR(s,t),o)}function a$(e,t,n={}){const{eventFilter:s,...o}=n,{eventFilter:a,pause:i,resume:l,isActive:r}=e$(s);return{stop:s$(e,t,{...o,eventFilter:a}),pause:i,resume:l,isActive:r}}function zu(e,t=!0,n){t$()?ut(e,n):t?e():Zt(e)}function o$(e,t=1e3,n={}){const{immediate:s=!0,immediateCallback:o=!1}=n;let a=null;const i=U(!1);function l(){a&&(clearInterval(a),a=null)}function r(){i.value=!1,l()}function d(){const u=Zn(t);u<=0||(i.value=!0,o&&e(),l(),i.value&&(a=setInterval(e,u)))}if(s&&Jl&&d(),Mf(t)||typeof t=="function"){const u=lt(t,()=>{i.value&&Jl&&d()});no(u)}return no(r),{isActive:i,pause:r,resume:d}}function i$(e,t,n={}){const{immediate:s=!0}=n,o=U(!1);let a=null;function i(){a&&(clearTimeout(a),a=null)}function l(){o.value=!1,i()}function r(...d){i(),o.value=!0,a=setTimeout(()=>{o.value=!1,a=null,e(...d)},Zn(t))}return s&&(o.value=!0,Jl&&r()),no(l),{isPending:kf(o),start:r,stop:l}}function la(e=!1,t={}){const{truthyValue:n=!0,falsyValue:s=!1}=t,o=Mf(e),a=U(e);function i(l){if(arguments.length)return a.value=l,a.value;{const r=Zn(n);return a.value=a.value===r?Zn(s):r,a.value}}return o?i:[a,i]}const Io=Jl?window:void 0;function Fs(e){var t;const n=Zn(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Ea(...e){let t,n,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,o]=e,t=Io):[t,n,s,o]=e,!t)return Ba;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(u=>u()),a.length=0},l=(u,p,h,g)=>(u.addEventListener(p,h,g),()=>u.removeEventListener(p,h,g)),r=lt(()=>[Fs(t),Zn(o)],([u,p])=>{if(i(),!u)return;const h=MT(p)?{...p}:p;a.push(...n.flatMap(g=>s.map(_=>l(u,g,_,h))))},{immediate:!0,flush:"post"}),d=()=>{r(),i()};return no(d),d}let _0=!1;function l$(e,t,n={}){const{window:s=Io,ignore:o=[],capture:a=!0,detectIframe:i=!1}=n;if(!s)return Ba;hu&&!_0&&(_0=!0,Array.from(s.document.body.children).forEach(T=>T.addEventListener("click",Ba)),s.document.documentElement.addEventListener("click",Ba));let l=!0;const r=T=>Zn(o).some(S=>{if(typeof S=="string")return Array.from(s.document.querySelectorAll(S)).some(E=>E===T.target||T.composedPath().includes(E));{const E=Fs(S);return E&&(T.target===E||T.composedPath().includes(E))}});function d(T){const S=Zn(T);return S&&S.$.subTree.shapeFlag===16}function u(T,S){const E=Zn(T),y=E.$.subTree&&E.$.subTree.children;return y==null||!Array.isArray(y)?!1:y.some(A=>A.el===S.target||S.composedPath().includes(A.el))}const p=T=>{const S=Fs(e);if(T.target!=null&&!(!(S instanceof Element)&&d(e)&&u(e,T))&&!(!S||S===T.target||T.composedPath().includes(S))){if(T.detail===0&&(l=!r(T)),!l){l=!0;return}t(T)}};let h=!1;const g=[Ea(s,"click",T=>{h||(h=!0,setTimeout(()=>{h=!1},0),p(T))},{passive:!0,capture:a}),Ea(s,"pointerdown",T=>{const S=Fs(e);l=!r(T)&&!!(S&&!T.composedPath().includes(S))},{passive:!0}),i&&Ea(s,"blur",T=>{setTimeout(()=>{var S;const E=Fs(e);((S=s.document.activeElement)==null?void 0:S.tagName)==="IFRAME"&&!(E!=null&&E.contains(s.document.activeElement))&&t(T)},0)})].filter(Boolean);return()=>g.forEach(T=>T())}function r$(){const e=U(!1),t=Lf();return t&&ut(()=>{e.value=!0},t),e}function Wu(e){const t=r$();return w(()=>(t.value,!!e()))}function c$(e,t,n={}){const{window:s=Io,...o}=n;let a;const i=Wu(()=>s&&"MutationObserver"in s),l=()=>{a&&(a.disconnect(),a=void 0)},r=w(()=>{const h=Zn(e),g=(Array.isArray(h)?h:[h]).map(Fs).filter($T);return new Set(g)}),d=lt(()=>r.value,h=>{l(),i.value&&h.size&&(a=new MutationObserver(t),h.forEach(g=>a.observe(g,o)))},{immediate:!0,flush:"post"}),u=()=>a==null?void 0:a.takeRecords(),p=()=>{d(),l()};return no(p),{isSupported:i,stop:p,takeRecords:u}}function d$(e,t={}){const{window:n=Io}=t,s=Wu(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const a=U(!1),i=d=>{a.value=d.matches},l=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",i):o.removeListener(i))},r=ea(()=>{s.value&&(l(),o=n.matchMedia(Zn(e)),"addEventListener"in o?o.addEventListener("change",i):o.addListener(i),a.value=o.matches)});return no(()=>{r(),l(),o=void 0}),a}const ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},td="__vueuse_ssr_handlers__",u$=m$();function m$(){return td in ed||(ed[td]=ed[td]||{}),ed[td]}function p$(e,t){return u$[e]||t}function h$(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const f$={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},v0="vueuse-storage";function g$(e,t,n,s={}){var o;const{flush:a="pre",deep:i=!0,listenToStorageChanges:l=!0,writeDefaults:r=!0,mergeDefaults:d=!1,shallow:u,window:p=Io,eventFilter:h,onError:g=D=>{console.error(D)},initOnMounted:_}=s,T=(u?Lu:U)(t);if(!n)try{n=p$("getDefaultStorage",()=>{var D;return(D=Io)==null?void 0:D.localStorage})()}catch(D){g(D)}if(!n)return T;const S=Zn(t),E=h$(S),y=(o=s.serializer)!=null?o:f$[E],{pause:A,resume:C}=a$(T,()=>N(T.value),{flush:a,deep:i,eventFilter:h});p&&l&&zu(()=>{n instanceof Storage?Ea(p,"storage",k):Ea(p,v0,L),_&&k()}),_||k();function O(D,$){if(p){const M={key:e,oldValue:D,newValue:$,storageArea:n};p.dispatchEvent(n instanceof Storage?new StorageEvent("storage",M):new CustomEvent(v0,{detail:M}))}}function N(D){try{const $=n.getItem(e);if(D==null)O($,null),n.removeItem(e);else{const M=y.write(D);$!==M&&(n.setItem(e,M),O($,M))}}catch($){g($)}}function R(D){const $=D?D.newValue:n.getItem(e);if($==null)return r&&S!=null&&n.setItem(e,y.write(S)),S;if(!D&&d){const M=y.read($);return typeof d=="function"?d(M,S):E==="object"&&!Array.isArray(M)?{...S,...M}:M}else return typeof $!="string"?$:y.read($)}function k(D){if(!(D&&D.storageArea!==n)){if(D&&D.key==null){T.value=S;return}if(!(D&&D.key!==e)){A();try{(D==null?void 0:D.newValue)!==y.write(T.value)&&(T.value=R(D))}catch($){g($)}finally{D?Zt(C):C()}}}}function L(D){k(D.detail)}return T}function LT(e,t,n={}){const{window:s=Io,...o}=n;let a;const i=Wu(()=>s&&"ResizeObserver"in s),l=()=>{a&&(a.disconnect(),a=void 0)},r=w(()=>{const p=Zn(e);return Array.isArray(p)?p.map(h=>Fs(h)):[Fs(p)]}),d=lt(r,p=>{if(l(),i.value&&s){a=new ResizeObserver(t);for(const h of p)h&&a.observe(h,o)}},{immediate:!0,flush:"post"}),u=()=>{l(),d()};return no(u),{isSupported:i,stop:u}}function DT(e,t={}){const{reset:n=!0,windowResize:s=!0,windowScroll:o=!0,immediate:a=!0,updateTiming:i="sync"}=t,l=U(0),r=U(0),d=U(0),u=U(0),p=U(0),h=U(0),g=U(0),_=U(0);function T(){const E=Fs(e);if(!E){n&&(l.value=0,r.value=0,d.value=0,u.value=0,p.value=0,h.value=0,g.value=0,_.value=0);return}const y=E.getBoundingClientRect();l.value=y.height,r.value=y.bottom,d.value=y.left,u.value=y.right,p.value=y.top,h.value=y.width,g.value=y.x,_.value=y.y}function S(){i==="sync"?T():i==="next-frame"&&requestAnimationFrame(()=>T())}return LT(e,S),lt(()=>Fs(e),E=>!E&&S()),c$(e,S,{attributeFilter:["style","class"]}),o&&Ea("scroll",S,{capture:!0,passive:!0}),s&&Ea("resize",S,{passive:!0}),zu(()=>{a&&S()}),{height:l,bottom:r,left:d,right:u,top:p,width:h,x:g,y:_,update:S}}function fu(e,t={width:0,height:0},n={}){const{window:s=Io,box:o="content-box"}=n,a=w(()=>{var p,h;return(h=(p=Fs(e))==null?void 0:p.namespaceURI)==null?void 0:h.includes("svg")}),i=U(t.width),l=U(t.height),{stop:r}=LT(e,([p])=>{const h=o==="border-box"?p.borderBoxSize:o==="content-box"?p.contentBoxSize:p.devicePixelContentBoxSize;if(s&&a.value){const g=Fs(e);if(g){const _=g.getBoundingClientRect();i.value=_.width,l.value=_.height}}else if(h){const g=Array.isArray(h)?h:[h];i.value=g.reduce((_,{inlineSize:T})=>_+T,0),l.value=g.reduce((_,{blockSize:T})=>_+T,0)}else i.value=p.contentRect.width,l.value=p.contentRect.height},n);zu(()=>{const p=Fs(e);p&&(i.value="offsetWidth"in p?p.offsetWidth:t.width,l.value="offsetHeight"in p?p.offsetHeight:t.height)});const d=lt(()=>Fs(e),p=>{i.value=p?t.width:0,l.value=p?t.height:0});function u(){r(),d()}return{width:i,height:l,stop:u}}function _$(e,t,n={}){const{root:s,rootMargin:o="0px",threshold:a=0,window:i=Io,immediate:l=!0}=n,r=Wu(()=>i&&"IntersectionObserver"in i),d=w(()=>{const _=Zn(e);return(Array.isArray(_)?_:[_]).map(Fs).filter($T)});let u=Ba;const p=U(l),h=r.value?lt(()=>[d.value,Fs(s),p.value],([_,T])=>{if(u(),!p.value||!_.length)return;const S=new IntersectionObserver(t,{root:Fs(T),rootMargin:o,threshold:a});_.forEach(E=>E&&S.observe(E)),u=()=>{S.disconnect(),u=Ba}},{immediate:l,flush:"post"}):Ba,g=()=>{u(),h(),p.value=!1};return no(g),{isSupported:r,isActive:p,pause(){u(),p.value=!1},resume(){p.value=!0},stop:g}}function PT(e={}){const{window:t=Io,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:a=!0,type:i="inner"}=e,l=U(n),r=U(s),d=()=>{t&&(i==="outer"?(l.value=t.outerWidth,r.value=t.outerHeight):a?(l.value=t.innerWidth,r.value=t.innerHeight):(l.value=t.document.documentElement.clientWidth,r.value=t.document.documentElement.clientHeight))};if(d(),zu(d),Ea("resize",d,{passive:!0}),o){const u=d$("(orientation: portrait)");lt(u,()=>d())}return{width:l,height:r}}const Wt={__name:"Modal",props:On({closeOnBackdropClick:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},onClose:{type:Function,required:!0},fullWidth:{type:Boolean,default:!1},modalType:{type:String,default:"centered"},size:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:On(["close"],["update:show"]),setup(e,{emit:t}){const n=t,s=Wn(e,"show"),o=w(()=>`modal-mask skip-context-menu ${{centered:"","right-aligned":"right-aligned"}[e.modalType]||""}`),a=U(!1),i=()=>{a.value=!0},l=()=>{s.value=!1,n("close"),e.onClose()},r=()=>{a.value&&(a.value=!1,e.closeOnBackdropClick&&l())},d=u=>{s.value&&u.code==="Escape"&&(l(),u.stopPropagation())};return Ea(document.body,"mouseup",r),Ea(document,"keydown",d),ut(()=>{}),(u,p)=>(m(),P(Ms,{name:"modal-fade"},{default:j(()=>[s.value?(m(),f("div",{key:0,class:re(o.value),transition:"modal",onMousedown:i},[c("div",{class:re(["relative max-h-full overflow-auto bg-n-alpha-3 shadow-md modal-container rtl:text-right skip-context-menu",{"rounded-xl w-[37.5rem]":!e.fullWidth,"items-center rounded-none flex h-full justify-center w-full":e.fullWidth,[e.size]:!0}]),onMouse:p[0]||(p[0]=Ke(()=>{},["stop"])),onMousedown:p[1]||(p[1]=h=>h.stopPropagation())},[e.showCloseButton?(m(),P(he,{key:0,ghost:"",slate:"",icon:"i-lucide-x",class:"absolute z-10 ltr:right-2 rtl:left-2 top-2",onClick:l})):x("",!0),et(u.$slots,"default")],34)],34)):x("",!0)]),_:3}))}},v$={components:{Modal:Wt,NextButton:he},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""},confirmValue:{type:String,default:""},confirmPlaceHolderText:{type:String,default:""}},emits:["onClose","onConfirm","update:show"],setup(){return{v$:Lt()}},data(){return{value:""}},validations:{value:{required:it,isEqual(e){return e===this.confirmValue}}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{closeModal(){this.value="",this.$emit("onClose")},onConfirm(){this.$emit("onConfirm")}}},b$={class:"flex items-center justify-end gap-2"};function E$(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("NextButton"),d=F("Modal");return m(),P(d,{show:a.localShow,"onUpdate:show":t[2]||(t[2]=u=>a.localShow=u),"on-close":a.closeModal},{default:j(()=>[b(i,{"header-title":n.title,"header-content":n.message},null,8,["header-title","header-content"]),c("form",{onSubmit:t[1]||(t[1]=Ke((...u)=>a.onConfirm&&a.onConfirm(...u),["prevent"]))},[b(l,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=u=>o.value=u),type:"text",class:re({error:s.v$.value.$error}),placeholder:n.confirmPlaceHolderText,onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"]),c("div",b$,[b(r,{faded:"",slate:"",type:"reset",label:n.rejectText,onClick:Ke(a.closeModal,["prevent"])},null,8,["label","onClick"]),b(r,{ruby:"",type:"submit",label:n.confirmText,disabled:s.v$.value.$invalid},null,8,["label","disabled"])])],32)]),_:1},8,["show","on-close"])}const BT=Re(v$,[["render",E$]]),T$={components:{Modal:Wt,NextButton:he},props:{title:{type:String,default:"This is a title"},description:{type:String,default:"This is your description"},confirmLabel:{type:String,default:"Yes"},cancelLabel:{type:String,default:"No"}},data:()=>({show:!1,resolvePromise:void 0,rejectPromise:void 0}),methods:{showConfirmation(){return this.show=!0,new Promise((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})},confirm(){this.resolvePromise(!0),this.show=!1},cancel(){this.resolvePromise(!1),this.show=!1}}},y$={class:"h-auto overflow-auto flex flex-col"},A$={class:"flex flex-row justify-end gap-2 py-4 px-6 w-full"};function S$(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("NextButton"),r=F("Modal");return m(),P(r,{show:e.show,"onUpdate:show":t[0]||(t[0]=d=>e.show=d),"on-close":a.cancel},{default:j(()=>[c("div",y$,[b(i,{"header-title":n.title,"header-content":n.description},null,8,["header-title","header-content"]),c("div",A$,[b(l,{faded:"",type:"reset",label:n.cancelLabel,onClick:a.cancel},null,8,["label","onClick"]),b(l,{type:"submit",label:n.confirmLabel,onClick:a.confirm},null,8,["label","onClick"])])])]),_:1},8,["show","on-close"])}const I$=Re(T$,[["render",S$]]),C$={class:"flex items-center justify-end gap-2 p-8"},N$={__name:"DeleteModal",props:On({onClose:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},title:{type:String,default:""},message:{type:String,default:""},messageValue:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(e){const t=Wn(e,"show");return(n,s)=>{const o=F("woot-modal-header");return m(),P(Wt,{show:t.value,"onUpdate:show":s[0]||(s[0]=a=>t.value=a),"on-close":e.onClose},{default:j(()=>[b(o,{"header-title":e.title,"header-content":e.message,"header-content-value":e.messageValue},null,8,["header-title","header-content","header-content-value"]),c("div",C$,[b(he,{faded:"",slate:"",type:"reset",label:e.rejectText,onClick:e.onClose},null,8,["label","onClick"]),b(he,{ruby:"",type:"submit",label:e.confirmText,onClick:e.onConfirm},null,8,["label","onClick"])])]),_:1},8,["show","on-close"])}}},O$={name:"WootDropdownItem",componentName:"WootDropdownMenu",props:{disabled:{type:Boolean,default:!1}}},x$=["tabindex","aria-disabled"];function w$(e,t,n,s,o,a){return m(),f("li",{class:re(["mb-1 list-none dropdown-menu__item",{"is-disabled":n.disabled}]),tabindex:n.disabled?null:-1,"aria-disabled":n.disabled},[et(e.$slots,"default",{},void 0,!0)],10,x$)}const fc=Re(O$,[["render",w$],["__scopeId","data-v-4607918a"]]),ju={__name:"DropdownMenu",props:{placement:{type:String,default:"top"}},setup(e){const t=U(null),n=()=>t.value.querySelectorAll("ul.dropdown li.dropdown-menu__item .button"),s=r=>{const d=t.value.querySelector("ul.dropdown li.dropdown-menu__item .button:focus");return Array.from(r).indexOf(d)},o=(r,d)=>{r.length!==0&&r[d].focus()},a=r=>{const d=s(r),u=d>=1?d-1:r.length-1;o(r,u)},i=r=>{const d=s(r),u=d===r.length-1?0:d+1;o(r,u)};return Vs({ArrowUp:{action:()=>a(n()),allowOnFocusedInput:!0},ArrowDown:{action:()=>i(n()),allowOnFocusedInput:!0}}),(r,d)=>(m(),f("ul",{ref_key:"dropdownMenuRef",ref:t,class:re(["dropdown menu vertical",[e.placement&&`dropdown--${e.placement}`]])},[et(r.$slots,"default")],2))}},R$={props:{featureKey:{type:String,required:!0}},computed:{...gt({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",accountId:"getCurrentAccountId"}),isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,this.featureKey)}}},$$={key:0};function M$(e,t,n,s,o,a){return a.isFeatureEnabled?(m(),f("div",$$,[et(e.$slots,"default")])):x("",!0)}const k$=Re(R$,[["render",M$]]),L$={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}}},emits:["update:modelValue","input","blur"],mounted(){},methods:{onChange(e){this.$emit("input",e.target.value),this.$emit("update:modelValue",e.target.value)},onBlur(e){this.$emit("blur",e.target.value)}}},D$={class:"input-container"},P$={key:0},B$=["value","type","placeholder","readonly"],F$={key:1,class:"help-text"},U$={key:2,class:"message"};function G$(e,t,n,s,o,a){return m(),f("label",D$,[n.label?(m(),f("span",P$,v(n.label),1)):x("",!0),c("input",{value:n.modelValue,type:n.type,placeholder:n.placeholder,readonly:n.readonly,style:At(n.styles),onInput:t[0]||(t[0]=(...i)=>a.onChange&&a.onChange(...i)),onBlur:t[1]||(t[1]=(...i)=>a.onBlur&&a.onBlur(...i))},null,44,B$),n.helpText?(m(),f("p",F$,v(n.helpText),1)):x("",!0),n.error?(m(),f("span",U$,v(n.error),1)):x("",!0),et(e.$slots,"masked",{},void 0,!0)])}const V$=Re(L$,[["render",G$],["__scopeId","data-v-7b577ba6"]]),H$={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","60\\d{8}|(?:1\\d|[39])\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[49]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:305[3-9]|472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function dg(e,t){var n=Array.prototype.slice.call(t);return n.push(H$),e.apply(this,n)}function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function K$(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function z$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gc(e,t)}function j$(e){var t=UT();return function(){var s=_c(e),o;if(t){var a=_c(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return Y$(this,o)}}function Y$(e,t){if(t&&(Jh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FT(e)}function FT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ef(e){var t=typeof Map=="function"?new Map:void 0;return ef=function(s){if(s===null||!X$(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(s))return t.get(s);t.set(s,o)}function o(){return Gd(s,arguments,_c(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),gc(o,s)},ef(e)}function Gd(e,t,n){return UT()?Gd=Reflect.construct:Gd=function(o,a,i){var l=[null];l.push.apply(l,a);var r=Function.bind.apply(o,l),d=new r;return i&&gc(d,i.prototype),d},Gd.apply(null,arguments)}function UT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X$(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function gc(e,t){return gc=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},gc(e,t)}function _c(e){return _c=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_c(e)}var Do=function(e){W$(n,e);var t=j$(n);function n(s){var o;return z$(this,n),o=t.call(this,s),Object.setPrototypeOf(FT(o),n.prototype),o.name=o.constructor.name,o}return K$(n)}(ef(Error)),ug=2,q$=17,Z$=3,so="0-9---",Q$="--",J$="/",eM=".",tM=" ",nM="()\\[\\]",sM="~",gu="".concat(Q$).concat(J$).concat(eM).concat(tM).concat(nM).concat(sM),mg="+";function b0(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),s=t[0].split("."),o=0;o<3;o++){var a=Number(n[o]),i=Number(s[o]);if(a>i)return 1;if(i>a)return-1;if(!isNaN(a)&&isNaN(i))return 1;if(isNaN(a)&&!isNaN(i))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}var aM={}.constructor;function Vd(e){return e!=null&&e.constructor===aM}function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function Yu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Xu(e,t,n){return t&&oM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var iM="1.2.0",lM="1.7.35",E0=" ext. ",rM=/^\d+$/,ra=function(){function e(t){Yu(this,e),mM(t),this.metadata=t,GT.call(this,t)}return Xu(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(n){return n!=="001"})}},{key:"getCountryMetadata",value:function(n){return this.metadata.countries[n]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(n){return this.getCountryMetadata(n)!==void 0}},{key:"hasCallingCode",value:function(n){if(this.getCountryCodesForCallingCode(n))return!0;if(this.nonGeographic()){if(this.nonGeographic()[n])return!0}else{var s=this.countryCallingCodes()[n];if(s&&s.length===1&&s[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(n){return this.nonGeographic()?!!this.nonGeographic()[n]:!this.getCountryCodesForCallingCode(n)}},{key:"country",value:function(n){return this.selectNumberingPlan(n)}},{key:"selectNumberingPlan",value:function(n,s){if(n&&rM.test(n)&&(s=n,n=null),n&&n!=="001"){if(!this.hasCountry(n))throw new Error("Unknown country: ".concat(n));this.numberingPlan=new T0(this.getCountryMetadata(n),this)}else if(s){if(!this.hasCallingCode(s))throw new Error("Unknown calling code: ".concat(s));this.numberingPlan=new T0(this.getNumberingPlanMetadata(s),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(n){var s=this.countryCallingCodes()[n];if(s)return s.length===1&&s[0].length===3?void 0:s}},{key:"getCountryCodeForCallingCode",value:function(n){var s=this.getCountryCodesForCallingCode(n);if(s)return s[0]}},{key:"getNumberingPlanMetadata",value:function(n){var s=this.getCountryCodeForCallingCode(n);if(s)return this.getCountryMetadata(s);if(this.nonGeographic()){var o=this.nonGeographic()[n];if(o)return o}else{var a=this.countryCallingCodes()[n];if(a&&a.length===1&&a[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(n){return this.numberingPlan.type(n)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(n){return this.selectNumberingPlan(n)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),e}(),T0=function(){function e(t,n){Yu(this,e),this.globalMetadataObject=n,this.metadata=t,GT.call(this,n.metadata)}return Xu(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(n){return n[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var n=this,s=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return s.map(function(o){return new cM(o,n)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(n){return n[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(n){if(this.hasTypes()&&y0(this.types(),n))return new uM(y0(this.types(),n),this)}},{key:"ext",value:function(){return this.v1||this.v2?E0:this.metadata[13]||E0}}]),e}(),cM=function(){function e(t,n){Yu(this,e),this._format=t,this.metadata=n}return Xu(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!dM.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),dM=/^\(?\$1\)?$/,uM=function(){function e(t,n){Yu(this,e),this.type=t,this.metadata=n}return Xu(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function y0(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function mM(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!Vd(e)||!Vd(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(Vd(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+pM(e)+": "+e,"."))}var pM=function(t){return tf(t)};function pg(e,t){if(t=new ra(t),t.hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function hM(e,t){return t.countries.hasOwnProperty(e)}function GT(e){var t=e.version;typeof t=="number"?(this.v1=t===1,this.v2=t===2,this.v3=t===3,this.v4=t===4):t?b0(t,iM)===-1?this.v2=!0:b0(t,lM)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var fM=";ext=",Cl=function(t){return"([".concat(so,"]{1,").concat(t,"})")};function VT(e){var t="20",n="15",s="9",o="6",a="[ \\t,]*",i="[:\\.]?[ \\t,-]*",l="#?",r="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",d="(?:[x#~]|int|)",u="[- ]+",p="[ \\t]*",h="(?:,{2}|;)",g=fM+Cl(t),_=a+r+i+Cl(t)+l,T=a+d+i+Cl(s)+l,S=u+Cl(o)+"#",E=p+h+i+Cl(n)+l,y=p+"(?:,)+"+i+Cl(s)+l;return g+"|"+_+"|"+T+"|"+S+"|"+E+"|"+y}var gM="["+so+"]{"+ug+"}",_M="["+mg+"]{0,1}(?:["+gu+"]*["+so+"]){3,}["+gu+so+"]*",vM=new RegExp("^["+mg+"]{0,1}(?:["+gu+"]*["+so+"]){1,2}$","i"),bM=_M+"(?:"+VT()+")?",EM=new RegExp("^"+gM+"$|^"+bM+"$","i");function TM(e){return e.length>=ug&&EM.test(e)}function yM(e){return vM.test(e)}var A0=new RegExp("(?:"+VT()+")$","i");function AM(e){var t=e.search(A0);if(t<0)return{};for(var n=e.slice(0,t),s=e.match(A0),o=1;o<s.length;){if(s[o])return{number:n,ext:s[o]};o++}}var SM={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function IM(e){return SM[e]}function CM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=NM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NM(e,t){if(e){if(typeof e=="string")return S0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S0(e,t)}}function S0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function I0(e){for(var t="",n=CM(e.split("")),s;!(s=n()).done;){var o=s.value;t+=OM(o,t)||""}return t}function OM(e,t,n){return e==="+"?t?void 0:"+":IM(e)}function hg(e,t){return xM(e,void 0,t)}function xM(e,t,n){var s=n.type(t),o=s&&s.possibleLengths()||n.possibleLengths();if(!o)return"IS_POSSIBLE";var a=e.length,i=o[0];return i===a?"IS_POSSIBLE":i>a?"TOO_SHORT":o[o.length-1]<a?"TOO_LONG":o.indexOf(a,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function wM(e,t,n){if(t===void 0&&(t={}),n=new ra(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return HT(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function HT(e,t){switch(hg(e,t)){case"IS_POSSIBLE":return!0;default:return!1}}function zo(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function RM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=$M(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $M(e,t){if(e){if(typeof e=="string")return C0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C0(e,t)}}function C0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var MM=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function fg(e,t,n){if(t=t||{},!(!e.country&&!e.countryCallingCode)){n=new ra(n),n.selectNumberingPlan(e.country,e.countryCallingCode);var s=t.v2?e.nationalNumber:e.phone;if(zo(s,n.nationalNumberPattern())){if($p(s,"FIXED_LINE",n))return n.type("MOBILE")&&n.type("MOBILE").pattern()===""||!n.type("MOBILE")||$p(s,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var o=RM(MM),a;!(a=o()).done;){var i=a.value;if($p(s,i,n))return i}}}}function $p(e,t,n){return t=n.type(t),!t||!t.pattern()||t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0?!1:zo(e,t.pattern())}function kM(e,t,n){if(t=t||{},n=new ra(n),n.selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes())return fg(e,t,n.metadata)!==void 0;var s=t.v2?e.nationalNumber:e.phone;return zo(s,n.nationalNumberPattern())}function LM(e,t,n){var s=new ra(n),o=s.getCountryCodesForCallingCode(e);return o?o.filter(function(a){return DM(t,a,n)}):[]}function DM(e,t,n){var s=new ra(n);return s.selectNumberingPlan(t),s.numberingPlan.possibleLengths().indexOf(e.length)>=0}function PM(e){return e.replace(new RegExp("[".concat(gu,"]+"),"g")," ").trim()}var BM=/(\$\d)/;function FM(e,t,n){var s=n.useInternationalFormat,o=n.withNationalPrefix,a=e.replace(new RegExp(t.pattern()),s?t.internationalFormat():o&&t.nationalPrefixFormattingRule()?t.format().replace(BM,t.nationalPrefixFormattingRule()):t.format());return s?PM(a):a}var UM=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function GM(e,t,n){var s=new ra(n);if(s.selectNumberingPlan(e,t),s.defaultIDDPrefix())return s.defaultIDDPrefix();if(UM.test(s.IDDPrefix()))return s.IDDPrefix()}function VM(e){var t=e.number,n=e.ext;if(!t)return"";if(t[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}function HM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=KM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KM(e,t){if(e){if(typeof e=="string")return N0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N0(e,t)}}function N0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function O0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function x0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O0(Object(n),!0).forEach(function(s){zM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w0={formatExtension:function(t,n,s){return"".concat(t).concat(s.ext()).concat(n)}};function WM(e,t,n,s){if(n?n=x0(x0({},w0),n):n=w0,s=new ra(s),e.country&&e.country!=="001"){if(!s.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));s.country(e.country)}else if(e.countryCallingCode)s.selectNumberingPlan(e.countryCallingCode);else return e.phone||"";var o=s.countryCallingCode(),a=n.v2?e.nationalNumber:e.phone,i;switch(t){case"NATIONAL":return a?(i=_u(a,e.carrierCode,"NATIONAL",s,n),Mp(i,e.ext,s,n.formatExtension)):"";case"INTERNATIONAL":return a?(i=_u(a,null,"INTERNATIONAL",s,n),i="+".concat(o," ").concat(i),Mp(i,e.ext,s,n.formatExtension)):"+".concat(o);case"E.164":return"+".concat(o).concat(a);case"RFC3966":return VM({number:"+".concat(o).concat(a),ext:e.ext});case"IDD":if(!n.fromCountry)return;var l=YM(a,e.carrierCode,o,n.fromCountry,s);return Mp(l,e.ext,s,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function _u(e,t,n,s,o){var a=jM(s.formats(),e);return a?FM(e,a,{useInternationalFormat:n==="INTERNATIONAL",withNationalPrefix:!(a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&o&&o.nationalPrefix===!1)}):e}function jM(e,t){for(var n=HM(e),s;!(s=n()).done;){var o=s.value;if(o.leadingDigitsPatterns().length>0){var a=o.leadingDigitsPatterns()[o.leadingDigitsPatterns().length-1];if(t.search(a)!==0)continue}if(zo(t,o.pattern()))return o}}function Mp(e,t,n,s){return t?s(e,t,n):e}function YM(e,t,n,s,o){var a=pg(s,o.metadata);if(a===n){var i=_u(e,t,"NATIONAL",o);return n==="1"?n+" "+i:i}var l=GM(s,void 0,o.metadata);if(l)return"".concat(l," ").concat(n," ").concat(_u(e,null,"INTERNATIONAL",o))}function R0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function $0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R0(Object(n),!0).forEach(function(s){XM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function XM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function QM(e,t,n){return t&&ZM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var JM=function(){function e(t,n,s){if(qM(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!s)throw new TypeError("`metadata` not passed");var o=t3(t,s),a=o.country,i=o.countryCallingCode;this.country=a,this.countryCallingCode=i,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return s}}return QM(e,[{key:"setExt",value:function(n){this.ext=n}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:LM(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return wM(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return kM(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var n=new ra(this.getMetadata());return n.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(n){return this.number===n.number&&this.ext===n.ext}},{key:"getType",value:function(){return fg(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(n,s){return WM(this,n,s?$0($0({},s),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(n){return this.format("NATIONAL",n)}},{key:"formatInternational",value:function(n){return this.format("INTERNATIONAL",n)}},{key:"getURI",value:function(n){return this.format("RFC3966",n)}}]),e}(),e3=function(t){return/^[A-Z]{2}$/.test(t)};function t3(e,t){var n,s,o=new ra(t);return e3(e)?(n=e,o.selectNumberingPlan(n),s=o.countryCallingCode()):s=e,{country:n,countryCallingCode:s}}var n3=new RegExp("(["+so+"])");function s3(e,t,n,s){if(t){var o=new ra(s);o.selectNumberingPlan(t,n);var a=new RegExp(o.IDDPrefix());if(e.search(a)===0){e=e.slice(e.match(a)[0].length);var i=e.match(n3);if(!(i&&i[1]!=null&&i[1].length>0&&i[1]==="0"))return e}}}function a3(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),s=n.exec(e);if(s){var o,a,i=s.length-1,l=i>0&&s[i];if(t.nationalPrefixTransformRule()&&l)o=e.replace(n,t.nationalPrefixTransformRule()),i>1&&(a=s[1]);else{var r=s[0];o=e.slice(r.length),l&&(a=s[1])}var d;if(l){var u=e.indexOf(s[1]),p=e.slice(0,u);p===t.numberingPlan.nationalPrefix()&&(d=t.numberingPlan.nationalPrefix())}else d=s[0];return{nationalNumber:o,nationalPrefix:d,carrierCode:a}}}return{nationalNumber:e}}function nf(e,t){var n=a3(e,t),s=n.carrierCode,o=n.nationalNumber;if(o!==e){if(!o3(e,o,t))return{nationalNumber:e};if(t.possibleLengths()&&!i3(o,t))return{nationalNumber:e}}return{nationalNumber:o,carrierCode:s}}function o3(e,t,n){return!(zo(e,n.nationalNumberPattern())&&!zo(t,n.nationalNumberPattern()))}function i3(e,t){switch(hg(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function l3(e,t,n,s){var o=t?pg(t,s):n;if(e.indexOf(o)===0){s=new ra(s),s.selectNumberingPlan(t,n);var a=e.slice(o.length),i=nf(a,s),l=i.nationalNumber,r=nf(e,s),d=r.nationalNumber;if(!zo(d,s.nationalNumberPattern())&&zo(l,s.nationalNumberPattern())||hg(d,s)==="TOO_LONG")return{countryCallingCode:o,number:a}}return{number:e}}function r3(e,t,n,s){if(!e)return{};var o;if(e[0]!=="+"){var a=s3(e,t,n,s);if(a&&a!==e)o=!0,e="+"+a;else{if(t||n){var i=l3(e,t,n,s),l=i.countryCallingCode,r=i.number;if(l)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:l,number:r}}return{number:e}}}if(e[1]==="0")return{};s=new ra(s);for(var d=2;d-1<=Z$&&d<=e.length;){var u=e.slice(1,d);if(s.hasCallingCode(u))return s.selectNumberingPlan(u),{countryCallingCodeSource:o?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:u,number:e.slice(d)};d++}return{}}function c3(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=d3(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d3(e,t){if(e){if(typeof e=="string")return M0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M0(e,t)}}function M0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function u3(e,t){var n=t.countries,s=t.defaultCountry,o=t.metadata;o=new ra(o);for(var a=[],i=c3(n),l;!(l=i()).done;){var r=l.value;if(o.country(r),o.leadingDigits()){if(e&&e.search(o.leadingDigits())===0)return r}else if(fg({phone:e,country:r},void 0,o.metadata))if(s){if(r===s)return r;a.push(r)}else return r}if(a.length>0)return a[0]}function m3(e,t){var n=t.nationalNumber,s=t.defaultCountry,o=t.metadata,a=o.getCountryCodesForCallingCode(e);if(a)return a.length===1?a[0]:u3(n,{countries:a,defaultCountry:s,metadata:o.metadata})}var KT="+",p3="[\\-\\.\\(\\)]?",k0="(["+so+"]|"+p3+")",h3="^\\"+KT+k0+"*["+so+"]"+k0+"*$",f3=new RegExp(h3,"g"),sf=so,g3="["+sf+"]+((\\-)*["+sf+"])*",_3="a-zA-Z",v3="["+_3+"]+((\\-)*["+sf+"])*",b3="^("+g3+"\\.)*"+v3+"\\.?$",E3=new RegExp(b3,"g"),L0="tel:",af=";phone-context=",T3=";isub=";function y3(e){var t=e.indexOf(af);if(t<0)return null;var n=t+af.length;if(n>=e.length)return"";var s=e.indexOf(";",n);return s>=0?e.substring(n,s):e.substring(n)}function A3(e){return e===null?!0:e.length===0?!1:f3.test(e)||E3.test(e)}function S3(e,t){var n=t.extractFormattedPhoneNumber,s=y3(e);if(!A3(s))throw new Do("NOT_A_NUMBER");var o;if(s===null)o=n(e)||"";else{o="",s.charAt(0)===KT&&(o+=s);var a=e.indexOf(L0),i;a>=0?i=a+L0.length:i=0;var l=e.indexOf(af);o+=e.substring(i,l)}var r=o.indexOf(T3);if(r>0&&(o=o.substring(0,r)),o!=="")return o}var I3=250,C3=new RegExp("["+mg+so+"]"),N3=new RegExp("[^"+so+"#]+$");function O3(e,t,n){if(t=t||{},n=new ra(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry))throw t.v2?new Do("INVALID_COUNTRY"):new Error("Unknown country: ".concat(t.defaultCountry));var s=w3(e,t.v2,t.extract),o=s.number,a=s.ext,i=s.error;if(!o){if(t.v2)throw i==="TOO_SHORT"?new Do("TOO_SHORT"):new Do("NOT_A_NUMBER");return{}}var l=$3(o,t.defaultCountry,t.defaultCallingCode,n),r=l.country,d=l.nationalNumber,u=l.countryCallingCode,p=l.countryCallingCodeSource,h=l.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new Do("INVALID_COUNTRY");return{}}if(!d||d.length<ug){if(t.v2)throw new Do("TOO_SHORT");return{}}if(d.length>q$){if(t.v2)throw new Do("TOO_LONG");return{}}if(t.v2){var g=new JM(u,d,n.metadata);return r&&(g.country=r),h&&(g.carrierCode=h),a&&(g.ext=a),g.__countryCallingCodeSource=p,g}var _=(t.extended?n.hasSelectedNumberingPlan():r)?zo(d,n.nationalNumberPattern()):!1;return t.extended?{country:r,countryCallingCode:u,carrierCode:h,valid:_,possible:_?!0:!!(t.extended===!0&&n.possibleLengths()&&HT(d,n)),phone:d,ext:a}:_?R3(r,d,a):{}}function x3(e,t,n){if(e){if(e.length>I3){if(n)throw new Do("TOO_LONG");return}if(t===!1)return e;var s=e.search(C3);if(!(s<0))return e.slice(s).replace(N3,"")}}function w3(e,t,n){var s=S3(e,{extractFormattedPhoneNumber:function(i){return x3(i,n,t)}});if(!s)return{};if(!TM(s))return yM(s)?{error:"TOO_SHORT"}:{};var o=AM(s);return o.ext?o:{number:s}}function R3(e,t,n){var s={country:e,phone:t};return n&&(s.ext=n),s}function $3(e,t,n,s){var o=r3(I0(e),t,n,s.metadata),a=o.countryCallingCodeSource,i=o.countryCallingCode,l=o.number,r;if(i)s.selectNumberingPlan(i);else if(l&&(t||n))s.selectNumberingPlan(t,n),t&&(r=t),i=n||pg(t,s.metadata);else return{};if(!l)return{countryCallingCodeSource:a,countryCallingCode:i};var d=nf(I0(l),s),u=d.nationalNumber,p=d.carrierCode,h=m3(i,{nationalNumber:u,defaultCountry:t,metadata:s});return h&&(r=h,h==="001"||s.country(r)),{country:r,countryCallingCode:i,countryCallingCodeSource:a,nationalNumber:u,carrierCode:p}}function D0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function P0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D0(Object(n),!0).forEach(function(s){M3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function M3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zT(e,t,n){return O3(e,P0(P0({},t),{},{v2:!0}),n)}function B0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function k3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B0(Object(n),!0).forEach(function(s){L3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function L3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D3(e,t){return U3(e)||F3(e,t)||B3(e,t)||P3()}function P3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B3(e,t){if(e){if(typeof e=="string")return F0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F0(e,t)}}function F0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function F3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,i,l;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!(t&&s.length===t));o=!0);}catch(r){a=!0,l=r}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function U3(e){if(Array.isArray(e))return e}function gg(e){var t=Array.prototype.slice.call(e),n=D3(t,4),s=n[0],o=n[1],a=n[2],i=n[3],l,r,d;if(typeof s=="string")l=s;else throw new TypeError("A text for parsing must be a string.");if(!o||typeof o=="string")i?(r=a,d=i):(r=void 0,d=a),o&&(r=k3({defaultCountry:o},r));else if(Vd(o))a?(r=o,d=a):d=o;else throw new Error("Invalid second argument: ".concat(o));return{text:l,options:r,metadata:d}}function G3(){var e=gg(arguments),t=e.text,n=e.options,s=e.metadata;return zT(t,n,s)}function U0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function G0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U0(Object(n),!0).forEach(function(s){V3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function V3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WT(e,t,n){t&&t.defaultCountry&&!hM(t.defaultCountry,n)&&(t=G0(G0({},t),{},{defaultCountry:void 0}));try{return zT(e,t,n)}catch(s){if(!(s instanceof Do))throw s}}function H3(){var e=gg(arguments),t=e.text,n=e.options,s=e.metadata;return WT(t,n,s)}function V0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function H0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V0(Object(n),!0).forEach(function(s){K3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function K3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z3(){var e=gg(arguments),t=e.text,n=e.options,s=e.metadata;n=H0(H0({},n),{},{extract:!1});var o=WT(t,n,s);return o&&o.isValid()||!1}function W3(){return dg(G3,arguments)}function vu(){return dg(H3,arguments)}function j3(){return dg(z3,arguments)}const Y3={props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}},error:{type:Boolean,default:!1}},emits:["blur","setCode","update:modelValue"],data(){return{selectedIndex:-1,showDropdown:!1,searchCountry:"",activeCountryCode:DE(),activeDialCode:LE(),phoneNumber:this.modelValue}},computed:{countries(){return[{name:this.dropdownFirstItemName,dial_code:"",emoji:"",id:""},...Ua]},dropdownFirstItemName(){return this.activeCountryCode?"Clear selection":"Select Country"},filteredCountriesBySearch(){return this.countries.filter(e=>{const{name:t,dial_code:n,id:s}=e,o=this.searchCountry.toLowerCase();return t.toLowerCase().includes(o)||n.toLowerCase().includes(o)||s.toLowerCase().includes(o)})},activeCountry(){return this.activeCountryCode?this.countries.find(e=>e.id===this.activeCountryCode):""}},watch:{modelValue(){const e=vu(this.modelValue);e&&(this.activeCountryCode=e.country,this.activeDialCode=`+${e.countryCallingCode}`,this.phoneNumber=this.modelValue.replace(`+${e.countryCallingCode}`,""))}},mounted(){this.setActiveCountry()},methods:{onOutsideClick(e){this.showDropdown&&e.target!==this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&this.closeDropdown()},onChange(e){this.phoneNumber=e.target.value,this.$emit("update:modelValue",e.target.value),this.$emit("setCode",this.activeDialCode)},onBlur(e){this.$emit("blur",e.target.value)},onSearchCountry(){this.selectedIndex=0},moveUp(){this.showDropdown&&(this.selectedIndex=Math.max(this.selectedIndex-1,0),this.scrollToSelected())},moveDown(){this.showDropdown&&(this.selectedIndex=Math.min(this.selectedIndex+1,this.filteredCountriesBySearch.length-1),this.scrollToSelected())},scrollToSelected(){this.$nextTick(()=>{const e=this.$refs.dropdown,t=this.$refs.dropdownItem[this.selectedIndex],n=40;if(t){const s=t.offsetTop;e.scrollTop=s-n}})},onSelectCountry(e){!e||!this.showDropdown||(this.activeCountryCode=e.id,this.searchCountry="",this.activeDialCode=e.dial_code,this.$emit("setCode",e.dial_code),this.closeDropdown(),this.$refs.phoneNumberInput.focus())},setActiveCountry(){const{phoneNumber:e}=this;if(!e)return;const t=vu(e);t&&(this.activeCountryCode=t.country,this.activeDialCode=t.countryCallingCode)},toggleCountryDropdown(){this.showDropdown=!this.showDropdown,this.selectedIndex=-1,this.showDropdown&&this.$nextTick(()=>{this.$refs.searchbar.focus()})},closeDropdown(){this.selectedIndex=-1,this.showDropdown=!1}}},X3={class:"relative phone-input--wrap"},q3={key:0,class:"mb-0"},Z3={key:0,class:"flex py-2 pl-2 pr-0 text-base font-normal leading-normal text-n-slate-12"},Q3=["value","placeholder","readonly"],J3={class:"sticky top-0 p-1 bg-white dark:bg-transparent backdrop-blur-[100px]"},ek=["placeholder"],tk=["onClick"],nk={class:"mr-1 text-base"},sk={class:"max-w-[7.5rem] overflow-hidden text-ellipsis whitespace-nowrap"},ak={class:"ml-1 text-xs text-n-slate-11"},ok={key:0},ik={class:"flex items-center justify-center mt-4 text-sm text-n-slate-10"};function lk(e,t,n,s,o,a){const i=F("fluent-icon"),l=ct("on-clickaway");return m(),f("div",X3,[c("div",{class:re(["flex items-center justify-start border-none outline outline-1 rounded-lg bg-n-alpha-black2",n.error?"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 mb-1":"mb-4 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6"])},[c("div",{class:"cursor-pointer py-2 pr-1.5 pl-2 rounded-tl-lg rounded-bl-lg flex items-center justify-center gap-1.5 bg-n-solid-3 h-10 w-14",onClick:t[0]||(t[0]=Ke((...r)=>a.toggleCountryDropdown&&a.toggleCountryDropdown(...r),["prevent"]))},[a.activeCountry?(m(),f("h5",q3,v(a.activeCountry.emoji),1)):(m(),P(i,{key:1,icon:"globe",class:"fluent-icon",size:"16"})),b(i,{icon:"chevron-down",class:"fluent-icon",size:"12"})]),o.activeDialCode?(m(),f("span",Z3,v(o.activeDialCode),1)):x("",!0),c("input",{ref:"phoneNumberInput",value:o.phoneNumber,type:"tel",class:"no-margin !rounded-tl-none !rounded-bl-none !outline-none !border-0 font-normal !w-full !bg-transparent text-base !px-1.5 placeholder:font-normal",placeholder:n.placeholder,readonly:n.readonly,style:At(n.styles),onInput:t[1]||(t[1]=(...r)=>a.onChange&&a.onChange(...r)),onBlur:t[2]||(t[2]=(...r)=>a.onBlur&&a.onBlur(...r))},null,44,Q3)],2),o.showDropdown?ie((m(),f("div",{key:0,ref:"dropdown",tabindex:"0",class:"z-10 absolute h-60 w-[12.5rem] shadow-md overflow-y-auto top-10 rounded-lg px-0 pt-0 pb-1 bg-n-alpha-3 backdrop-blur-[100px]",onKeydown:[t[5]||(t[5]=Fn(Ke((...r)=>a.moveUp&&a.moveUp(...r),["prevent"]),["up"])),t[6]||(t[6]=Fn(Ke((...r)=>a.moveDown&&a.moveDown(...r),["prevent"]),["down"])),t[7]||(t[7]=Fn(Ke(r=>a.onSelectCountry(a.filteredCountriesBySearch[o.selectedIndex]),["prevent"]),["enter"]))]},[c("div",J3,[ie(c("input",{ref:"searchbar","onUpdate:modelValue":t[3]||(t[3]=r=>o.searchCountry=r),type:"text",placeholder:e.$t("GENERAL.PHONE_INPUT.PLACEHOLDER"),class:"!h-8 !mb-0 !text-sm !outline-n-brand dark:!outline-n-brand",onInput:t[4]||(t[4]=(...r)=>a.onSearchCountry&&a.onSearchCountry(...r))},null,40,ek),[[at,o.searchCountry]])]),(m(!0),f(pe,null,ye(a.filteredCountriesBySearch,(r,d)=>(m(),f("div",{ref_for:!0,ref:"dropdownItem",key:d,class:re(["flex items-center px-1 py-0 cursor-pointer h-7 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2",{"bg-n-alpha-1 dark:bg-n-alpha-2":r.id===o.activeCountryCode,"bg-n-alpha-1 dark:bg-n-alpha-2":d===o.selectedIndex}]),onClick:u=>a.onSelectCountry(r)},[c("span",nk,v(r.emoji),1),c("span",sk,v(r.name),1),c("span",ak,v(r.dial_code),1)],10,tk))),128)),a.filteredCountriesBySearch.length===0?(m(),f("div",ok,[c("span",ik,v(e.$t("GENERAL.PHONE_INPUT.EMPTY_STATE")),1)])):x("",!0)],32)),[[l,a.onOutsideClick]]):x("",!0)])}const rk=Re(Y3,[["render",lk]]),ck={props:{title:{type:String,required:!0},description:{type:String,default:""},href:{type:String,default:""},bgColor:{type:String,default:""},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},icon:{type:String,default:""},color:{type:String,default:""},colorScheme:{type:String,default:""},variant:{type:String,default:""}},emits:["remove"],computed:{textColor(){return this.variant==="smooth"||this.variant==="dashed"?"":this.color||_N(this.bgColor)},labelClass(){return`label ${this.colorScheme} ${this.variant} ${this.small?"small":""}`},labelStyle(){return this.bgColor?{background:this.bgColor,color:this.textColor,border:`1px solid ${this.bgColor}`}:{}},anchorStyle(){return this.bgColor?{color:this.textColor}:{}}},methods:{onClick(){this.$emit("remove",this.title)}}},dk=["title"],uk={key:0,class:"label-action--button"},mk={key:2,class:"whitespace-nowrap text-ellipsis overflow-hidden"},pk=["href"];function hk(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",{class:re(["inline-flex ltr:mr-1 rtl:ml-1 mb-1",a.labelClass]),style:At(a.labelStyle),title:n.description},[n.icon?(m(),f("span",uk,[b(i,{icon:n.icon,size:"12",class:"label--icon cursor-pointer"},null,8,["icon"])])):x("",!0),["smooth","dashed"].includes(n.variant)&&n.title&&!n.icon?(m(),f("span",{key:1,style:At({background:n.color}),class:"label-color-dot flex-shrink-0"},null,4)):x("",!0),n.href?(m(),f("a",{key:3,href:n.href,style:At(a.anchorStyle)},v(n.title),13,pk)):(m(),f("span",mk,v(n.title),1)),n.showClose?(m(),f("button",{key:4,class:"label-close--button p-0",style:At({color:a.textColor}),onClick:t[0]||(t[0]=(...l)=>a.onClick&&a.onClick(...l))},[b(i,{icon:"dismiss",size:"12",class:"close--icon"})],4)):x("",!0)],14,dk)}const fk=Re(ck,[["render",hk],["__scopeId","data-v-7b3ca4dc"]]),gk={props:{message:{type:String,default:""}}},_k={class:"flex items-center justify-center p-8"},vk={class:"flex items-center gap-2 text-base text-center w-100 text-slate-800 dark:text-slate-300"},bk={class:"text-base font-medium text-slate-800 dark:text-slate-100"};function Ek(e,t,n,s,o,a){return m(),f("div",_k,[c("h6",vk,[c("span",bk,v(n.message),1),t[0]||(t[0]=c("span",{class:"spinner"},null,-1))])])}const $c=Re(gk,[["render",Ek]]),Tk={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""},headerContentValue:{type:String,default:""},headerImage:{type:String,default:""}}},yk={class:"flex flex-col items-start px-8 pt-8 pb-0"},Ak=["src"],Sk={"data-test-id":"modal-header-title",class:"text-base font-semibold leading-6 text-slate-800 dark:text-slate-50"},Ik={key:1,"data-test-id":"modal-header-content",class:"w-full mt-2 text-sm leading-5 break-words text-slate-600 dark:text-slate-300"},Ck={key:0,class:"text-sm font-semibold text-slate-600 dark:text-slate-300"};function Nk(e,t,n,s,o,a){return m(),f("div",yk,[n.headerImage?(m(),f("img",{key:0,src:n.headerImage,alt:"No image"},null,8,Ak)):x("",!0),c("h2",Sk,v(n.headerTitle),1),n.headerContent?(m(),f("p",Ik,[be(v(n.headerContent)+" ",1),n.headerContentValue?(m(),f("span",Ck,v(n.headerContentValue),1)):x("",!0)])):x("",!0),et(e.$slots,"default")])}const Ok=Re(Tk,[["render",Nk]]),xt={AGENT_BOTS:"agent_bots",AGENT_MANAGEMENT:"agent_management",AUTO_RESOLVE_CONVERSATIONS:"auto_resolve_conversations",AUTOMATIONS:"automations",CAMPAIGNS:"campaigns",CANNED_RESPONSES:"canned_responses",CRM:"crm",CUSTOM_ATTRIBUTES:"custom_attributes",INBOX_MANAGEMENT:"inbox_management",INTEGRATIONS:"integrations",LABELS:"labels",MACROS:"macros",HELP_CENTER:"help_center",REPORTS:"reports",TEAM_MANAGEMENT:"team_management",VOICE_RECORDER:"voice_recorder",AUDIT_LOGS:"audit_logs",INBOX_VIEW:"inbox_view",SLA:"sla",RESPONSE_BOT:"response_bot",CHANNEL_EMAIL:"channel_email",CHANNEL_FACEBOOK:"channel_facebook",CHANNEL_TWITTER:"channel_twitter",CHANNEL_WEBSITE:"channel_website",CUSTOM_REPLY_DOMAIN:"custom_reply_domain",CUSTOM_REPLY_EMAIL:"custom_reply_email",DISABLE_BRANDING:"disable_branding",EMAIL_CONTINUITY_ON_API_CHANNEL:"email_continuity_on_api_channel",INBOUND_EMAILS:"inbound_emails",IP_LOOKUP:"ip_lookup",LINEAR:"linear_integration",CAPTAIN:"captain_integration",CUSTOM_ROLES:"custom_roles",CHATWOOT_V4:"chatwoot_v4",KANBAN_BOARD:"kanban",SCHEDULE_MESSAGES:"schedule_messages",REPORT_V4:"report_v4",CHANNEL_INSTAGRAM:"channel_instagram",CONTACT_CHATWOOT_SUPPORT_TEAM:"contact_chatwoot_support_team"},xk=[xt.SLA,xt.CAPTAIN,xt.CUSTOM_ROLES,xt.AUDIT_LOGS,xt.HELP_CENTER],wk={components:{NextButton:he},props:{size:{type:String,default:"sm"}},computed:{...gt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasNextSidebar(){return this.isFeatureEnabledonAccount(this.accountId,xt.CHATWOOT_V4)}},methods:{onMenuItemClick(){yt.emit(sn.TOGGLE_SIDEMENU)}}};function Rk(e,t,n,s,o,a){const i=F("NextButton");return a.hasNextSidebar?x("",!0):(m(),P(i,{key:0,ghost:"",slate:"",size:n.size,icon:"i-lucide-menu",class:"-ml-3",onClick:a.onMenuItemClick},null,8,["size","onClick"]))}const $k=Re(wk,[["render",Rk]]),Mk={__name:"Tabs",props:{index:{type:Number,default:0},border:{type:Boolean,default:!0},isCompact:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,o=Us("tabsContainer"),a=Us("tabsList"),{width:i}=fu(o),{width:l}=fu(a),r=U(!1),d=w({get:()=>n.index,set:h=>{s("change",h)}});qn("activeIndex",d),qn("updateActiveIndex",h=>{d.value=h});const u=()=>{o.value&&a.value&&(r.value=a.value.scrollWidth>a.value.clientWidth)},p=h=>{if(o.value&&a.value){let g=a.value.scrollLeft;g+=h==="left"?-100:100,a.value.scrollTo({top:0,left:g,behavior:"smooth"})}};return lt([i,l],()=>{u()},{immediate:!0}),(h,g)=>{const _=F("fluent-icon");return m(),f("div",{ref_key:"tabsContainer",ref:o,class:re([{"tabs--container--with-border":e.border,"tabs--container--compact":e.isCompact},"tabs--container"])},[r.value?(m(),f("button",{key:0,class:"tabs--scroll-button button clear secondary button--only-icon",onClick:g[0]||(g[0]=T=>p("left"))},[b(_,{icon:"chevron-left",size:16})])):x("",!0),c("ul",{ref_key:"tabsList",ref:a,class:re([{"tabs--with-scroll":r.value},"tabs"])},[et(h.$slots,"default")],2),r.value?(m(),f("button",{key:1,class:"tabs--scroll-button button clear secondary button--only-icon",onClick:g[1]||(g[1]=T=>p("right"))},[b(_,{icon:"chevron-right",size:16})])):x("",!0)],2)}}},kk={key:0,class:"badge min-w-[20px]"},Lk={__name:"TabsItem",props:{index:{type:Number,default:0},name:{type:String,required:!0},disabled:{type:Boolean,default:!1},count:{type:Number,default:0},showBadge:{type:Boolean,default:!0}},setup(e){const t=e,n=to("activeIndex"),s=to("updateActiveIndex"),o=w(()=>t.index===n.value),a=w(()=>t.count),i=l=>{l.preventDefault(),t.disabled||s(t.index)};return(l,r)=>(m(),f("li",{class:re(["tabs-title",{"is-active":o.value}])},[c("a",{onClick:i},[be(v(e.name)+" ",1),e.showBadge?(m(),f("div",kk,[c("span",null,v(a.value),1)])):x("",!0)])],2))}};function hi(e,t){$n(2,arguments);var n=En(e),s=Un(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var o=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+s+1,0);var i=a.getDate();return o>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),o),n)}function vc(e,t){if($n(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?Un(t.years):0,s="months"in t?Un(t.months):0,o="weeks"in t?Un(t.weeks):0,a="days"in t?Un(t.days):0,i="hours"in t?Un(t.hours):0,l="minutes"in t?Un(t.minutes):0,r="seconds"in t?Un(t.seconds):0,d=En(e),u=s||n?hi(d,s+n*12):d,p=a||o?ic(u,a+o*7):u,h=l+i*60,g=r+h*60,_=g*1e3,T=new Date(p.getTime()+_);return T}function jT(e,t){$n(1,arguments);var n=t||{},s=n.locale,o=s&&s.options&&s.options.weekStartsOn,a=o==null?0:Un(o),i=n.weekStartsOn==null?a:Un(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=En(e),r=l.getDay(),d=(r<i?7:0)+r-i;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function Dk(e,t){$n(2,arguments);var n=Un(t),s=n*7;return ic(e,s)}function _g(e,t){$n(2,arguments);var n=Un(t);return hi(e,n*12)}function Pk(e,t){$n(2,arguments);var n=En(e),s=En(t);return n.getFullYear()-s.getFullYear()}var Bk=36e5;function Fk(e,t){$n(2,arguments);var n=RE(e,t)/Bk;return n>0?Math.floor(n):Math.ceil(n)}var Uk=6e4;function Hd(e,t){$n(2,arguments);var n=RE(e,t)/Uk;return n>0?Math.floor(n):Math.ceil(n)}function Gk(e,t){$n(2,arguments);var n=En(e),s=En(t),o=Vh(n,s),a=Math.abs(Pk(n,s));n.setFullYear("1584"),s.setFullYear("1584");var i=Vh(n,s)===-o,l=o*(a-i);return l===0?0:l}function Vk(e,t){$n(1,arguments);var n=e||{},s=En(n.start),o=En(n.end),a=o.getTime();if(!(s.getTime()<=a))throw new RangeError("Invalid interval");var i=[],l=s;l.setHours(0,0,0,0);var r=1;if(isNaN(r))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=a;)i.push(En(l)),l.setDate(l.getDate()+r),l.setHours(0,0,0,0);return i}function Zi(e){$n(1,arguments);var t=En(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Hk(e){$n(1,arguments);var t=En(e),n=t.getDay();return n}function Kk(e){$n(1,arguments);var t=En(e),n=t.getFullYear(),s=t.getMonth(),o=new Date(0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function zk(e){$n(1,arguments);var t=En(e),n=t.getMonth();return n}function K0(e){$n(1,arguments);var t=En(e),n=t.getFullYear();return n}function jl(e,t){$n(2,arguments);var n=Un(t);return hi(e,-n)}function Ar(e,t){if($n(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?Un(t.years):0,s="months"in t?Un(t.months):0,o="weeks"in t?Un(t.weeks):0,a="days"in t?Un(t.days):0,i="hours"in t?Un(t.hours):0,l="minutes"in t?Un(t.minutes):0,r="seconds"in t?Un(t.seconds):0,d=jl(En(e),s+n*12),u=Ho(d,a+o*7),p=l+i*60,h=r+p*60,g=h*1e3,_=new Date(u.getTime()-g);return _}function Wk(e){var t=e.start,n=e.end;$n(1,arguments);var s=En(t),o=En(n);if(!fo(s))throw new RangeError("Start Date is invalid");if(!fo(o))throw new RangeError("End Date is invalid");var a={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},i=Vh(s,o);a.years=Math.abs(Gk(s,o));var l=Ar(s,{years:i*a.years});a.months=Math.abs(BC(l,o));var r=Ar(l,{months:i*a.months});a.days=Math.abs(FE(r,o));var d=Ar(r,{days:i*a.days});a.hours=Math.abs(Fk(d,o));var u=Ar(d,{hours:i*a.hours});a.minutes=Math.abs(Hd(u,o));var p=Ar(u,{minutes:i*a.minutes});return a.seconds=Math.abs($E(p,o)),a}function YT(e,t){$n(2,arguments);var n=En(e),s=En(t);return n.getTime()>s.getTime()}function XT(e,t){$n(2,arguments);var n=En(e),s=En(t);return n.getTime()<s.getTime()}function qT(e){return $n(1,arguments),En(e).getDay()===1}function of(e,t){$n(2,arguments);var n=En(e),s=En(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function bu(e,t){$n(2,arguments);var n=En(e).getTime(),s=En(t.start).getTime(),o=En(t.end).getTime();if(!(s<=o))throw new RangeError("Invalid interval");return n>=s&&n<=o}var ZT=36e5,QT=6e4,jk=2,nd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Yk=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Xk=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,qk=/^([+-])(\d{2})(?::?(\d{2}))?$/;function JT(e,t){$n(1,arguments);var n={},s=n.additionalDigits==null?jk:Un(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var o=Zk(e),a;if(o.date){var i=Qk(o.date,s);a=Jk(i.restDateString,i.year)}if(isNaN(a)||!a)return new Date(NaN);var l=a.getTime(),r=0,d;if(o.time&&(r=eL(o.time),isNaN(r)||r===null))return new Date(NaN);if(o.timezone){if(d=tL(o.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(l+r),p=new Date(0);return p.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),p.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),p}return new Date(l+r+d)}function Zk(e){var t={},n=e.split(nd.dateTimeDelimiter),s;if(n.length>2)return t;if(/:/.test(n[0])?(t.date=null,s=n[0]):(t.date=n[0],s=n[1],nd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(nd.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){var o=nd.timezone.exec(s);o?(t.time=s.replace(o[1],""),t.timezone=o[1]):t.time=s}return t}function Qk(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:null};var o=s[1]&&parseInt(s[1]),a=s[2]&&parseInt(s[2]);return{year:a==null?o:a*100,restDateString:e.slice((s[1]||s[2]).length)}}function Jk(e,t){if(t===null)return null;var n=e.match(Yk);if(!n)return null;var s=!!n[4],o=Sr(n[1]),a=Sr(n[2])-1,i=Sr(n[3]),l=Sr(n[4]),r=Sr(n[5])-1;if(s)return iL(t,l,r)?nL(t,l,r):new Date(NaN);var d=new Date(0);return!aL(t,a,i)||!oL(t,o)?new Date(NaN):(d.setUTCFullYear(t,a,Math.max(o,i)),d)}function Sr(e){return e?parseInt(e):1}function eL(e){var t=e.match(Xk);if(!t)return null;var n=kp(t[1]),s=kp(t[2]),o=kp(t[3]);return lL(n,s,o)?n*ZT+s*QT+o*1e3:NaN}function kp(e){return e&&parseFloat(e.replace(",","."))||0}function tL(e){if(e==="Z")return 0;var t=e.match(qk);if(!t)return 0;var n=t[1]==="+"?-1:1,s=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return rL(s,o)?n*(s*ZT+o*QT):NaN}function nL(e,t,n){var s=new Date(0);s.setUTCFullYear(e,0,4);var o=s.getUTCDay()||7,a=(t-1)*7+n+1-o;return s.setUTCDate(s.getUTCDate()+a),s}var sL=[31,null,31,30,31,30,31,31,30,31,30,31];function ey(e){return e%400===0||e%4===0&&e%100}function aL(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(sL[t]||(ey(e)?29:28))}function oL(e,t){return t>=1&&t<=(ey(e)?366:365)}function iL(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function lL(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function rL(e,t){return t>=0&&t<=59}function ty(e,t){$n(2,arguments);var n=En(e),s=Un(t),o=n.getFullYear(),a=n.getDate(),i=new Date(0);i.setFullYear(o,s,15),i.setHours(0,0,0,0);var l=Kk(i);return n.setMonth(s,Math.min(a,l)),n}function cL(e,t){$n(2,arguments);var n=En(e),s=Un(t);return n.setHours(s),n}function dL(e,t){$n(2,arguments);var n=En(e),s=Un(t);return n.setMinutes(s),n}function uL(e,t){$n(2,arguments);var n=En(e),s=Un(t);return n.setSeconds(s),n}function mL(e,t){$n(2,arguments);var n=En(e),s=Un(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}function ny(e,t){$n(2,arguments);var n=Un(t);return _g(e,-n)}const pL=[{id:1,label:"M"},{id:2,label:"T"},{id:3,label:"W"},{id:4,label:"T"},{id:5,label:"F"},{id:6,label:"S"},{id:7,label:"S"}],sy=[{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_7_DAYS",value:"last7days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_30_DAYS",value:"last30days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_3_MONTHS",value:"last3months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_6_MONTHS",value:"last6months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_YEAR",value:"lastYear"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.CUSTOM_RANGE",value:"custom"}],hL={LAST_7_DAYS:"last7days",LAST_30_DAYS:"last30days",CUSTOM_RANGE:"custom"},Mc={START_CALENDAR:"start",END_CALENDAR:"end"},kc={WEEK:"week",MONTH:"month",YEAR:"year"},fL=e=>Ln(e,"MMMM"),ay=e=>Ln(e,"yyyy"),z0=()=>{const s=new Date(2222,11,15);return new Intl.DateTimeFormat(navigator.language).format(s).replace("2222","yyyy").replace("12","MM").replace("15","dd")},gL=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t)),_L=(e,t=1)=>{const n=Zi(e),s=jT(n,{weekStartsOn:t}),o=ic(s,41);return gL(Vk({start:s,end:o}),7)},vL=(e,t,n,s,o)=>{const i={month:{prev:jl,next:hi},year:{prev:ny,next:_g}}[o][s];if(e==="start")return{start:i(t,1),end:n};const l=i(n,1);return{start:t,end:l}},bL=(e,t)=>t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear(),EL=(e,t)=>of(e,t),TL=e=>{const t=FC(e);return e.getDate()===t.getDate()},Lp=(e,t,n)=>{if(!t||!n)return!1;let s=oa(t),o=oa(n);return s>o&&([s,o]=[o,s]),CC(e,s)||bu(e,{start:s,end:o})},yL=(e,t,n,s)=>n&&s&&t<=s?bu(e,{start:t,end:s}):!1,AL=(e,t,n,s)=>{if(t&&!n&&s){const o=ic(e,1);return bu(o,{start:t,end:s})}if(t&&n){const o=ic(e,1);return bu(o,{start:t,end:n})}return!1},SL=(e,t)=>({last7days:()=>({start:oa(Ho(t,6)),end:ho(t)}),last30days:()=>({start:oa(Ho(t,29)),end:ho(t)}),last3months:()=>({start:oa(jl(t,3)),end:ho(t)}),last6months:()=>({start:oa(jl(t,6)),end:ho(t)}),lastYear:()=>({start:oa(jl(t,12)),end:ho(t)}),custom:()=>({start:t,end:t})}[e]||(()=>({start:t,end:t})))(),IL={class:"text-sm font-medium text-slate-800 dark:text-slate-50"},CL={class:"text-sm font-medium text-slate-600 dark:text-slate-200"},NL={__name:"DatePickerButton",props:{selectedStartDate:Date,selectedEndDate:Date,selectedRange:{type:String,default:""}},emits:["open"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>{const l=n.selectedStartDate,r=n.selectedEndDate;if(!fo(l)||!fo(r))return"Select a date range";const d=Bm(l,r)?"MMM d":"MMM d yyyy";return Bm(l,new Date)&&Bm(r,new Date)?`${Ln(l,"MMM d")} - ${Ln(r,"MMM d")}`:`${Ln(l,d)} - ${Ln(r,d)}`}),a=w(()=>sy.find(l=>l.value===n.selectedRange).label),i=()=>{s("open")};return(l,r)=>{const d=F("fluent-icon");return m(),f("button",{class:"inline-flex relative items-center rounded-lg gap-2 py-1.5 px-3 h-8 bg-n-alpha-2 hover:bg-n-alpha-1 active:bg-n-alpha-1",onClick:i},[b(d,{class:"text-slate-800 dark:text-slate-50",icon:"calendar",size:"16"}),c("span",IL,v(l.$t(a.value)),1),c("span",CL,v(o.value),1),b(d,{class:"text-slate-800 dark:text-slate-50",icon:"chevron-down",size:"14"})])}}},OL={class:"h-[82px] flex flex-col items-start px-5 gap-1.5 pt-4 w-full"},xL={class:"text-sm font-medium text-slate-800 dark:text-slate-50"},wL=["placeholder","disabled"],RL={__name:"CalendarDateInput",props:{calendarType:{type:String,default:""},dateValue:Date,compareDate:Date,isDisabled:Boolean},emits:["update","validate","error"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o,END_CALENDAR:a}=Mc,i=w(()=>{var d;return(d=z0())==null?void 0:d.toUpperCase()}),l=w({get:()=>{var d;return((d=n.dateValue)==null?void 0:d.toLocaleDateString(navigator.language))||""},set:d=>{const u=z0(),p=Lr(d,u,new Date);fo(p)&&s("update",p)}}),r=()=>{if(!fo(n.dateValue)){s("error",`Please enter the date in valid format: ${i.value}`);return}const{calendarType:d,compareDate:u,dateValue:p}=n,h=d===o,g=d===a;u&&h&&YT(p,u)?s("error","Start date must be before the end date."):u&&g&&XT(p,u)?s("error","End date must be after the start date."):s("validate",p)};return(d,u)=>(m(),f("div",OL,[c("span",xL,v(e.calendarType===I(o)?d.$t("DATE_PICKER.DATE_RANGE_INPUT.START"):d.$t("DATE_PICKER.DATE_RANGE_INPUT.END")),1),ie(c("input",{"onUpdate:modelValue":u[0]||(u[0]=p=>l.value=p),type:"text",class:"!text-sm !mb-0 disabled:!outline-n-strong",placeholder:i.value,disabled:e.isDisabled,onKeypress:Fn(r,["enter"])},null,40,wL),[[at,l.value]])]))}},$L={class:"w-[200px] flex flex-col items-start"},ML={class:"w-full px-5 py-4 text-sm font-medium capitalize text-start text-n-slate-12"},kL={class:"flex flex-col items-start w-full"},LL=["onClick"],DL={__name:"CalendarDateRange",props:{selectedRange:{type:String,default:""}},emits:["setRange"],setup(e,{emit:t}){const n=t,s=o=>{n("setRange",o)};return(o,a)=>(m(),f("div",$L,[c("h4",ML,v(o.$t("DATE_PICKER.DATE_RANGE_OPTIONS.TITLE")),1),c("div",kL,[(m(!0),f(pe,null,ye(I(sy),i=>(m(),f("button",{key:i.label,class:re(["w-full px-5 py-3 text-sm font-medium truncate border-none rounded-none text-start hover:bg-n-alpha-2 dark:hover:bg-n-solid-3",i.value===e.selectedRange?"text-n-slate-12 bg-n-alpha-1 dark:bg-n-solid-active":"text-n-slate-12"]),onClick:l=>s(i)},v(o.$t(i.label)),11,LL))),128))])]))}},PL={class:"flex items-start justify-between w-full h-9"},BL={class:"flex items-center gap-1"},vg={__name:"CalendarAction",props:{calendarType:{type:String,default:"start"},firstButtonLabel:{type:String,default:""},buttonLabel:{type:String,default:""},viewMode:{type:String,default:""}},emits:["prev","next","setView"],setup(e,{emit:t}){const n=t,{YEAR:s}=kc,o=l=>{n("prev",l)},a=l=>{n("next",l)},i=(l,r)=>{n("setView",l,r)};return(l,r)=>(m(),f("div",PL,[b(he,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-left",class:"rtl:rotate-180",onClick:r[0]||(r[0]=d=>o(e.calendarType))}),c("div",BL,[e.firstButtonLabel?(m(),f("button",{key:0,class:"p-0 text-sm font-medium text-center text-n-slate-12 hover:text-n-brand",onClick:r[1]||(r[1]=d=>i(e.calendarType,e.viewMode))},v(e.firstButtonLabel),1)):x("",!0),e.buttonLabel?(m(),f("button",{key:1,class:re(["p-0 text-sm font-medium text-center text-n-slate-12",{"hover:text-n-brand":e.viewMode}]),onClick:r[2]||(r[2]=d=>i(e.calendarType,I(s)))},v(e.buttonLabel),3)):x("",!0)]),b(he,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-right",class:"rtl:rotate-180",onClick:r[3]||(r[3]=d=>a(e.calendarType))})]))}},FL={class:"flex flex-col w-full gap-2 max-h-[312px]"},UL={class:"grid grid-cols-2 gap-x-3 gap-y-2 w-full auto-rows-[47px]"},GL=["onClick"],oy={__name:"CalendarYear",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectYear"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o}=Mc,i=U((_=>{const T=K0(_);return T-T%10})(n.calendarType===o?n.startCurrentDate:n.endCurrentDate)),l=w(()=>Array.from({length:10},(_,T)=>i.value+T)),r=w(()=>l.value[0]),d=w(()=>l.value[l.value.length-1]),u=w(()=>{const _=n.calendarType===o?n.startCurrentDate:n.endCurrentDate;return K0(_)}),p=()=>{i.value=ny(new Date(i.value,0,1),10).getFullYear()},h=()=>{i.value=_g(new Date(i.value,0,1),10).getFullYear()},g=_=>{s("selectYear",_)};return(_,T)=>(m(),f("div",FL,[b(vg,{"calendar-type":e.calendarType,"button-label":`${r.value} - ${d.value}`,onPrev:p,onNext:h},null,8,["calendar-type","button-label"]),c("div",UL,[(m(!0),f(pe,null,ye(l.value,S=>(m(),f("button",{key:S,class:re(["p-2 text-sm font-medium text-center text-n-slate-12 w-[144px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":S===u.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":S!==u.value}]),onClick:E=>g(S)},v(S),11,GL))),128))])]))}},VL={class:"flex flex-col w-full gap-2 max-h-[312px]"},HL={class:"grid w-full grid-cols-3 gap-x-3 gap-y-2 auto-rows-[61px]"},KL=["onClick"],iy={__name:"CalendarMonth",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectMonth","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o}=Mc,{MONTH:a,YEAR:i}=kc,l=Array.from({length:12},(g,_)=>Ln(ty(Zi(new Date),_),"MMM")),r=w(()=>{const g=n.calendarType===o?n.startCurrentDate:n.endCurrentDate;return zk(g)}),d=(g,_)=>{s("setView",g,_)},u=()=>{s("prev")},p=()=>{s("next")},h=g=>{s("selectMonth",g)};return(g,_)=>(m(),f("div",VL,[b(vg,{"view-mode":I(i),"calendar-type":e.calendarType,"button-label":I(ay)(e.calendarType===I(o)?e.startCurrentDate:e.endCurrentDate,I(a)),onSetView:d,onPrev:u,onNext:p},null,8,["view-mode","calendar-type","button-label"]),c("div",HL,[(m(!0),f(pe,null,ye(I(l),(T,S)=>(m(),f("button",{key:S,class:re(["p-2 text-sm font-medium text-center text-n-slate-12 w-[92px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":S===r.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":S!==r.value}]),onClick:E=>h(S)},v(T),11,KL))),128))])]))}},zL={class:"max-w-md mx-auto grid grid-cols-7 gap-2"},ly={__name:"CalendarWeekLabel",setup(e){return(t,n)=>(m(),f("div",zL,[(m(!0),f(pe,null,ye(I(pL),s=>(m(),f("div",{key:s.id,class:"flex items-center justify-center font-medium text-sm w-9 h-7 py-1.5 px-2"},v(s.label),1))),128))]))}},WL={class:"flex flex-col w-full gap-2 max-h-[312px]"},jL=["onMouseenter","onClick"],YL={key:0,class:"absolute bottom-0 w-6 h-8 ltr:-right-4 rtl:-left-4 bg-n-blue-4 dark:bg-n-blue-5 -z-10"},XL={__name:"CalendarWeek",props:{calendarType:{type:String,default:"start"},currentDate:Date,startCurrentDate:Date,endCurrentDate:Date,selectedStartDate:Date,selectingEndDate:Boolean,selectedEndDate:Date,hoveredEndDate:Date},emits:["updateHoveredEndDate","selectDate","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o}=Mc,{MONTH:a}=kc,i=y=>{s("updateHoveredEndDate",y)},l=y=>{s("selectDate",y)},r=()=>{s("prev")},d=()=>{s("next")},u=(y,A)=>{s("setView",y,A)},p=y=>_L(y===o?n.startCurrentDate:n.endCurrentDate),h=y=>Lp(y,n.selectedStartDate,n.selectedStartDate)||Lp(y,n.selectedEndDate,n.selectedEndDate),g=y=>Lp(y,n.selectedStartDate,n.selectedEndDate),_=y=>EL(y,n.calendarType===o?n.startCurrentDate:n.endCurrentDate),T=y=>yL(y,n.selectedStartDate,n.selectingEndDate,n.hoveredEndDate),S=y=>AL(y,n.selectedStartDate,n.selectedEndDate,n.hoveredEndDate),E=y=>({"text-n-slate-10 pointer-events-none":!_(y),"text-n-slate-12 hover:text-n-slate-12 hover:bg-n-blue-6 dark:hover:bg-n-blue-7":_(y),"bg-n-brand text-white":h(y)&&_(y),"bg-n-blue-4 dark:bg-n-blue-5":(g(y)||T(y))&&!h(y)&&_(y),"outline outline-1 outline-n-blue-8 -outline-offset-1 !text-n-blue-text":bL(n.currentDate,y)&&!h(y)});return(y,A)=>(m(),f("div",WL,[b(vg,{"view-mode":I(a),"calendar-type":e.calendarType,"first-button-label":I(fL)(e.calendarType===I(o)?e.startCurrentDate:e.endCurrentDate),"button-label":I(ay)(e.calendarType===I(o)?e.startCurrentDate:e.endCurrentDate),onPrev:r,onNext:d,onSetView:u},null,8,["view-mode","calendar-type","first-button-label","button-label"]),b(ly),(m(!0),f(pe,null,ye(p(e.calendarType),C=>(m(),f("div",{key:C[0].getTime(),class:"grid max-w-md grid-cols-7 gap-2 mx-auto overflow-hidden rounded-lg"},[(m(!0),f(pe,null,ye(C,O=>(m(),f("div",{key:O.getTime(),class:re(["flex relative items-center justify-center w-9 h-8 py-1.5 px-2 font-medium text-sm rounded-lg cursor-pointer",E(O)]),onMouseenter:N=>i(O),onMouseleave:A[0]||(A[0]=N=>i(null)),onClick:N=>l(O)},[be(v(O.getDate())+" ",1),(g(O)||T(O))&&S(O)&&!I(TL)(O)&&_(O)?(m(),f("span",YL)):x("",!0)],42,jL))),128))]))),128))]))}},qL={class:"h-[56px] flex justify-between gap-2 px-2 py-3 items-center"},ZL={__name:"CalendarFooter",emits:["clear","change"],setup(e,{emit:t}){const n=t,s=()=>{n("clear")},o=()=>{n("change")};return(a,i)=>(m(),f("div",qL,[b(he,{slate:"",ghost:"",sm:"",label:a.$t("DATE_PICKER.CLEAR_BUTTON"),onClick:s},null,8,["label"]),b(he,{sm:"",ghost:"",label:a.$t("DATE_PICKER.APPLY_BUTTON"),onClick:o},null,8,["label"])]))}},QL={class:"relative font-inter"},JL={key:0,class:"flex absolute top-9 ltr:left-0 rtl:right-0 z-30 shadow-md select-none w-[880px] h-[490px] rounded-2xl bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container"},e4={class:"flex flex-col w-[680px] ltr:border-l rtl:border-r border-n-strong"},t4={class:"flex justify-around h-fit"},n4={class:"py-5 border-b border-n-strong"},s4={__name:"DatePicker",emits:["dateRangeChanged"],setup(e,{emit:t}){const n=t,{LAST_7_DAYS:s,LAST_30_DAYS:o,CUSTOM_RANGE:a}=hL,{START_CALENDAR:i,END_CALENDAR:l}=Mc,{WEEK:r,MONTH:d,YEAR:u}=kc,p=U(!1),h=U({start:r,end:r}),g=U(new Date),_=U(oa(Ho(g.value,6))),T=U(ho(g.value)),S=U(oa(_.value)),E=U(of(_.value,T.value)?Zi(hi(T.value,1)):Zi(T.value)),y=U(!1),A=U(s),C=U(null),O=U(_.value),N=U(T.value);lt(A,G=>{if(G!==a){const V=G===s||G===o;S.value=_.value,E.value=V&&of(_.value,T.value)?Zi(hi(_.value,1)):T.value,y.value=!1}else y.value||(S.value=oa(g.value))}),lt([_,T],([G,V])=>{fo(G)?O.value=G:O.value=_.value,fo(V)?N.value=V:N.value=T.value},{immediate:!0}),lt([S,E],([G,V],[Y,ee])=>{const X=UC(V,G);G!==Y&&(YT(G,V)||X===0)&&(E.value=hi(G,1)),V!==ee&&(XT(V,G)||X===0)&&(S.value=jl(V,1))},{immediate:!0,deep:!0});const R=G=>{A.value=G.value;const{start:V,end:Y}=SL(G.value,g.value);_.value=V,T.value=Y},k=(G,V,Y=d)=>{const{start:ee,end:X}=vL(G,S.value,E.value,V,Y);S.value=ee,E.value=X},L=G=>{A.value=a,!y.value||G<_.value?(_.value=G,T.value=null,y.value=!0):(T.value=G,y.value=!1)},D=(G,V)=>{A.value=a,h.value[G]=V},$=(G,V,Y=d)=>{const ee=V===i?S.value:E.value,X=Y===d?ty(Zi(ee),G):mL(ee,G);V===i?S.value=X:E.value=X,D(V,Y===d?r:d)},M=(G,V)=>{V===i?(_.value=G,S.value=G):(T.value=G,E.value=G),y.value=!1},K=G=>{Te(G)},B=()=>{S.value=oa(g.value),E.value=hi(oa(g.value),1),_.value=oa(Ho(g.value,6)),T.value=ho(g.value),y.value=!1,A.value=s,h.value={start:r,end:r}},H=()=>{!fo(_.value)||!fo(T.value)?Te("Please select a valid time range"):(p.value=!1,n("dateRangeChanged",[_.value,T.value]))};return(G,V)=>(m(),f("div",QL,[b(NL,{"selected-start-date":_.value,"selected-end-date":T.value,"selected-range":A.value,onOpen:V[0]||(V[0]=Y=>p.value=!p.value)},null,8,["selected-start-date","selected-end-date","selected-range"]),p.value?(m(),f("div",JL,[b(DL,{"selected-range":A.value,onSetRange:R},null,8,["selected-range"]),c("div",e4,[c("div",t4,[(m(!0),f(pe,null,ye([I(i),I(l)],Y=>(m(),f("div",{key:`${Y}-calendar`,class:"flex flex-col items-center"},[b(RL,{"calendar-type":Y,"date-value":Y===I(i)?O.value:N.value,"compare-date":Y===I(i)?N.value:O.value,"is-disabled":A.value!==I(a),onUpdate:ee=>Y===I(i)?O.value=ee:N.value=ee,onValidate:ee=>M(ee,Y),onError:V[1]||(V[1]=ee=>K(ee))},null,8,["calendar-type","date-value","compare-date","is-disabled","onUpdate","onValidate"]),c("div",n4,[c("div",{class:re(["flex flex-col items-center gap-2 px-5 min-w-[340px] max-h-[352px]",Y===I(i)&&"ltr:border-r rtl:border-l border-n-strong"])},[h.value[Y]===I(u)?(m(),P(oy,{key:0,"calendar-type":Y,"start-current-date":S.value,"end-current-date":E.value,onSelectYear:ee=>$(ee,Y,I(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectYear"])):h.value[Y]===I(d)?(m(),P(iy,{key:1,"calendar-type":Y,"start-current-date":S.value,"end-current-date":E.value,onSelectMonth:ee=>$(ee,Y),onSetView:D,onPrev:ee=>k(Y,"prev",I(u)),onNext:ee=>k(Y,"next",I(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectMonth","onPrev","onNext"])):h.value[Y]===I(r)?(m(),P(XL,{key:2,"calendar-type":Y,"current-date":g.value,"start-current-date":S.value,"end-current-date":E.value,"selected-start-date":_.value,"selected-end-date":T.value,"selecting-end-date":y.value,"hovered-end-date":C.value,onUpdateHoveredEndDate:V[2]||(V[2]=ee=>C.value=ee),onSelectDate:L,onSetView:D,onPrev:ee=>k(Y,"prev"),onNext:ee=>k(Y,"next")},null,8,["calendar-type","current-date","start-current-date","end-current-date","selected-start-date","selected-end-date","selecting-end-date","hovered-end-date","onPrev","onNext"])):x("",!0)],2)])]))),128))]),b(ZL,{onChange:H,onClear:B})])])):x("",!0)]))}},ry={AvatarUploader:oR,Code:WR,ColorPicker:qR,ConfirmDeleteModal:BT,ConfirmModal:I$,DeleteModal:N$,DropdownItem:fc,DropdownMenu:ju,FeatureToggle:k$,Input:V$,PhoneInput:rk,Label:fk,LoadingState:$c,Modal:Wt,ModalHeader:Ok,SidemenuIcon:$k,Spinner:Os,Tabs:Mk,TabsItem:Lk,Thumbnail:Qn,DatePicker:s4,install(e){const t=Object.keys(this);t.pop();let n=t.length;for(;n--;)e.component(`woot${t[n]}`,this[t[n]])}};typeof window<"u"&&window.Vue&&window.Vue.use(ry);const a4={components:{NextButton:he},props:{show:{type:Boolean,default:!1},hasAccounts:{type:Boolean,default:!0}},emits:["closeAccountCreateModal"],setup(){return{v$:Lt()}},data(){return{accountName:""}},validations(){return{accountName:{required:it,minLength:Nn(1)}}},computed:{...gt({uiFlags:"agents/getUIFlags"})},methods:{async addAccount(){try{const e=await this.$store.dispatch("accounts/create",{account_name:this.accountName});this.$emit("closeAccountCreateModal"),Te(this.$t("CREATE_ACCOUNT.API.SUCCESS_MESSAGE")),window.location=`/app/accounts/${e}/dashboard`}catch(e){e.response.status===422?Te(this.$t("CREATE_ACCOUNT.API.EXIST_MESSAGE")):Te(this.$t("CREATE_ACCOUNT.API.ERROR_MESSAGE"))}}}},o4={class:"flex flex-col h-auto overflow-auto"},i4={key:0,class:"mx-8 mt-6 mb-0 text-sm"},l4={class:"flex items-center rounded-md alert"},r4={class:"ml-1 mr-3"},c4={class:"w-full"},d4=["placeholder"],u4={class:"w-full flex justify-end gap-2 items-center"};function m4(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("fluent-icon"),r=F("NextButton"),d=F("woot-modal");return m(),P(d,{show:n.show,"on-close":()=>e.$emit("closeAccountCreateModal")},{default:j(()=>[c("div",o4,[b(i,{"header-title":e.$t("CREATE_ACCOUNT.NEW_ACCOUNT"),"header-content":e.$t("CREATE_ACCOUNT.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),n.hasAccounts?x("",!0):(m(),f("div",i4,[c("div",l4,[c("div",r4,[b(l,{icon:"warning"})]),be(" "+v(e.$t("CREATE_ACCOUNT.NO_ACCOUNT_WARNING")),1)])])),c("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Ke((...u)=>a.addAccount&&a.addAccount(...u),["prevent"]))},[c("div",c4,[c("label",{class:re({error:s.v$.accountName.$error})},[be(v(e.$t("CREATE_ACCOUNT.FORM.NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.accountName=u),type:"text",placeholder:e.$t("CREATE_ACCOUNT.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.accountName.$touch&&s.v$.accountName.$touch(...u))},null,40,d4),[[at,o.accountName]])],2)]),c("div",u4,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("CREATE_ACCOUNT.FORM.CANCEL"),onClick:t[2]||(t[2]=Ke(()=>e.$emit("closeAccountCreateModal"),["prevent"]))},null,8,["label"]),b(r,{type:"submit",label:e.$t("CREATE_ACCOUNT.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreating,disabled:s.v$.accountName.$invalid||s.v$.accountName.$invalid||e.uiFlags.isCreating},null,8,["label","is-loading","disabled"])])],32)])]),_:1},8,["show","on-close"])}const cy=Re(a4,[["render",m4]]),yi=(e,t)=>{const n=()=>{yt.off(e,t)};return ut(()=>{yt.on(e,t)}),ml(n),n},p4=(e,t=[])=>{const{meta:{permissions:n=[]}={}}=e;return Zf(n,t)},h4=(e,t)=>{const{accountId:n}=e.params,o=[{permissions:[...ys,...Bs],path:"dashboard"},{permissions:[Bl],path:"contacts"},{permissions:[VN],path:"reports/overview"},{permissions:[HN],path:"portals"}].find(({permissions:a})=>Zf(a,t));return`accounts/${n}/${o?o.path:"dashboard"}`},f4=(e,t)=>{const n=`accounts/${e.params.accountId}/dashboard`;if(e.name==="account_suspended")return n;const s=Pu(t,e.params.accountId);return p4(e,s)?null:h4(e,s)},g4=(e,t)=>{const n=GN(t,Number(e.params.accountId));return n?n.status==="active"?f4(e,t):e.name!=="account_suspended"?`accounts/${e.params.accountId}/suspended`:null:"app/login"},bg=(e,t=!1,n=!0)=>{const s=["home","conversation_mentions","conversation_unattended","inbox_dashboard","label_conversations","team_conversations","folder_conversations","conversation_participating"],o=["inbox_conversation","conversation_through_mentions","conversation_through_unattended","conversation_through_inbox","conversations_through_label","conversations_through_team","conversations_through_folders","conversation_through_participating"];return[...t?s:[],...n?o:[]].includes(e)},_4=e=>{switch(e){case"inbox_conversation":return"home";case"conversation_through_mentions":return"conversation_mentions";case"conversation_through_unattended":return"conversation_unattended";case"conversations_through_label":return"label_conversations";case"conversations_through_team":return"team_conversations";case"conversations_through_folders":return"folder_conversations";case"conversation_through_participating":return"conversation_participating";case"conversation_through_inbox":return"inbox_dashboard";default:return null}},Eg=(e,t=!1)=>{const n=["inbox_view"],s=["inbox_view_conversation"];return(t?[...n,...s]:s).includes(e)},dy=e=>e==="notifications_index",v4={class:"fixed z-50 top-2 left-2 group"},b4={class:"relative flex items-center justify-between w-full px-2 py-1 bg-n-amber-4 dark:bg-n-amber-8 rounded-lg shadow-lg"},E4={class:"px-2 text-xs font-medium tracking-wide text-n-amber-12"},T4=2e3,y4={__name:"NetworkNotification",setup(e){const{t}=He(),n=xn(),s=U(!navigator.onLine),o=U(!1),a=U(!1),i=U(!1);let l=null;const r=w(()=>a.value?t("NETWORK.NOTIFICATION.RECONNECTING"):i.value?t("NETWORK.NOTIFICATION.RECONNECT_SUCCESS"):t("NETWORK.NOTIFICATION.OFFLINE")),d=w(()=>i.value?"wifi":"wifi-off"),u=w(()=>!a.value&&!i.value),p=()=>{window.location.reload()},h=()=>{s.value=!1,i.value=!1,clearTimeout(l)},g=y=>bg(y,!0)||Eg(y,!0)||dy(y),_=()=>{o.value=!0,s.value=!0},T=()=>{o.value=!1,a.value=!1,i.value=!0,s.value=!0,l=setTimeout(h,T4)},S=()=>{g(n.name)?(a.value=!0,i.value=!1,s.value=!0):T()},E=y=>{y.type==="offline"?s.value=!0:y.type==="online"&&!o.value&&T()};return Ea("online",E),Ea("offline",E),yi(sn.WEBSOCKET_DISCONNECT,_),yi(sn.WEBSOCKET_RECONNECT_COMPLETED,T),yi(sn.WEBSOCKET_RECONNECT,S),ml(()=>{clearTimeout(l)}),(y,A)=>{const C=F("fluent-icon");return m(),P(Ms,{name:"network-notification-fade",tag:"div"},{default:j(()=>[ie(c("div",v4,[c("div",b4,[b(C,{icon:d.value,class:"text-n-amber-12",size:"18"},null,8,["icon"]),c("span",E4,v(r.value),1),u.value?(m(),P(he,{key:0,ghost:"",sm:"",amber:"",icon:"i-lucide-refresh-ccw",title:y.$t("NETWORK.BUTTON.REFRESH"),class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:p},null,8,["title"])):x("",!0),b(he,{ghost:"",sm:"",amber:"",icon:"i-lucide-x",class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:h})])],512),[[ln,s.value]])]),_:1})}}},A4={components:{NextButton:he},props:{bannerMessage:{type:String,default:""},hrefLink:{type:String,default:""},hrefLinkText:{type:String,default:""},hasActionButton:{type:Boolean,default:!1},actionButtonVariant:{type:String,default:"faded"},actionButtonLabel:{type:String,default:""},actionButtonIcon:{type:String,default:"i-lucide-arrow-right"},colorScheme:{type:String,default:""},hasCloseButton:{type:Boolean,default:!1}},emits:["primaryAction","close"],computed:{bannerClasses(){const e=[this.colorScheme];return(this.hasActionButton||this.hasCloseButton)&&e.push("has-button"),e},getButtonColor(){return{primary:"blue",secondary:"blue",alert:"ruby",warning:"amber"}[this.colorScheme]||"blue"}},methods:{onClick(e){this.$emit("primaryAction",e)},onClickClose(e){this.$emit("close",e)}}},S4={class:"banner-message"},I4=["href"],C4={class:"actions"};function N4(e,t,n,s,o,a){const i=F("NextButton");return m(),f("div",{class:re(["flex items-center justify-center h-12 gap-4 px-4 py-3 text-xs text-white banner dark:text-white woot-banner",a.bannerClasses])},[c("span",S4,[be(v(n.bannerMessage)+" ",1),n.hrefLink?(m(),f("a",{key:0,href:n.hrefLink,rel:"noopener noreferrer nofollow",target:"_blank"},v(n.hrefLinkText),9,I4)):x("",!0)]),c("div",C4,[n.hasActionButton?(m(),P(i,{key:0,xs:"",icon:n.actionButtonIcon,variant:n.actionButtonVariant,color:a.getButtonColor,label:n.actionButtonLabel,onClick:a.onClick},null,8,["icon","variant","color","label","onClick"])):x("",!0),n.hasCloseButton?(m(),P(i,{key:1,xs:"",icon:"i-lucide-circle-x",color:a.getButtonColor,label:e.$t("GENERAL_SETTINGS.DISMISS"),onClick:a.onClickClose},null,8,["color","label","onClick"])):x("",!0)])],2)}const Lc=Re(A4,[["render",N4],["__scopeId","data-v-e6c178d8"]]);function xo(){const e=vn(),t=w(()=>e.getCurrentRole.value);return{isAdmin:w(()=>t.value==="administrator")}}var lf={exports:{}};const O4="2.0.0",uy=256,x4=Number.MAX_SAFE_INTEGER||9007199254740991,w4=16,R4=uy-6,$4=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var qu={MAX_LENGTH:uy,MAX_SAFE_COMPONENT_LENGTH:w4,MAX_SAFE_BUILD_LENGTH:R4,MAX_SAFE_INTEGER:x4,RELEASE_TYPES:$4,SEMVER_SPEC_VERSION:O4,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Dp={};const M4=typeof process=="object"&&Dp&&Dp.NODE_DEBUG&&/\bsemver\b/i.test(Dp.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Zu=M4;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:o}=qu,a=Zu;t=e.exports={};const i=t.re=[],l=t.safeRe=[],r=t.src=[],d=t.t={};let u=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",o],[p,s]],g=T=>{for(const[S,E]of h)T=T.split(`${S}*`).join(`${S}{0,${E}}`).split(`${S}+`).join(`${S}{1,${E}}`);return T},_=(T,S,E)=>{const y=g(S),A=u++;a(T,A,S),d[T]=A,r[A]=S,i[A]=new RegExp(S,E?"g":void 0),l[A]=new RegExp(y,E?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*"),_("NUMERICIDENTIFIERLOOSE","\\d+"),_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),_("MAINVERSION",`(${r[d.NUMERICIDENTIFIER]})\\.(${r[d.NUMERICIDENTIFIER]})\\.(${r[d.NUMERICIDENTIFIER]})`),_("MAINVERSIONLOOSE",`(${r[d.NUMERICIDENTIFIERLOOSE]})\\.(${r[d.NUMERICIDENTIFIERLOOSE]})\\.(${r[d.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASEIDENTIFIER",`(?:${r[d.NUMERICIDENTIFIER]}|${r[d.NONNUMERICIDENTIFIER]})`),_("PRERELEASEIDENTIFIERLOOSE",`(?:${r[d.NUMERICIDENTIFIERLOOSE]}|${r[d.NONNUMERICIDENTIFIER]})`),_("PRERELEASE",`(?:-(${r[d.PRERELEASEIDENTIFIER]}(?:\\.${r[d.PRERELEASEIDENTIFIER]})*))`),_("PRERELEASELOOSE",`(?:-?(${r[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[d.PRERELEASEIDENTIFIERLOOSE]})*))`),_("BUILDIDENTIFIER",`${p}+`),_("BUILD",`(?:\\+(${r[d.BUILDIDENTIFIER]}(?:\\.${r[d.BUILDIDENTIFIER]})*))`),_("FULLPLAIN",`v?${r[d.MAINVERSION]}${r[d.PRERELEASE]}?${r[d.BUILD]}?`),_("FULL",`^${r[d.FULLPLAIN]}$`),_("LOOSEPLAIN",`[v=\\s]*${r[d.MAINVERSIONLOOSE]}${r[d.PRERELEASELOOSE]}?${r[d.BUILD]}?`),_("LOOSE",`^${r[d.LOOSEPLAIN]}$`),_("GTLT","((?:<|>)?=?)"),_("XRANGEIDENTIFIERLOOSE",`${r[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),_("XRANGEIDENTIFIER",`${r[d.NUMERICIDENTIFIER]}|x|X|\\*`),_("XRANGEPLAIN",`[v=\\s]*(${r[d.XRANGEIDENTIFIER]})(?:\\.(${r[d.XRANGEIDENTIFIER]})(?:\\.(${r[d.XRANGEIDENTIFIER]})(?:${r[d.PRERELEASE]})?${r[d.BUILD]}?)?)?`),_("XRANGEPLAINLOOSE",`[v=\\s]*(${r[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[d.XRANGEIDENTIFIERLOOSE]})(?:${r[d.PRERELEASELOOSE]})?${r[d.BUILD]}?)?)?`),_("XRANGE",`^${r[d.GTLT]}\\s*${r[d.XRANGEPLAIN]}$`),_("XRANGELOOSE",`^${r[d.GTLT]}\\s*${r[d.XRANGEPLAINLOOSE]}$`),_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),_("COERCE",`${r[d.COERCEPLAIN]}(?:$|[^\\d])`),_("COERCEFULL",r[d.COERCEPLAIN]+`(?:${r[d.PRERELEASE]})?(?:${r[d.BUILD]})?(?:$|[^\\d])`),_("COERCERTL",r[d.COERCE],!0),_("COERCERTLFULL",r[d.COERCEFULL],!0),_("LONETILDE","(?:~>?)"),_("TILDETRIM",`(\\s*)${r[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",_("TILDE",`^${r[d.LONETILDE]}${r[d.XRANGEPLAIN]}$`),_("TILDELOOSE",`^${r[d.LONETILDE]}${r[d.XRANGEPLAINLOOSE]}$`),_("LONECARET","(?:\\^)"),_("CARETTRIM",`(\\s*)${r[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",_("CARET",`^${r[d.LONECARET]}${r[d.XRANGEPLAIN]}$`),_("CARETLOOSE",`^${r[d.LONECARET]}${r[d.XRANGEPLAINLOOSE]}$`),_("COMPARATORLOOSE",`^${r[d.GTLT]}\\s*(${r[d.LOOSEPLAIN]})$|^$`),_("COMPARATOR",`^${r[d.GTLT]}\\s*(${r[d.FULLPLAIN]})$|^$`),_("COMPARATORTRIM",`(\\s*)${r[d.GTLT]}\\s*(${r[d.LOOSEPLAIN]}|${r[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",_("HYPHENRANGE",`^\\s*(${r[d.XRANGEPLAIN]})\\s+-\\s+(${r[d.XRANGEPLAIN]})\\s*$`),_("HYPHENRANGELOOSE",`^\\s*(${r[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[d.XRANGEPLAINLOOSE]})\\s*$`),_("STAR","(<|>)?=?\\s*\\*"),_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lf,lf.exports);var Dc=lf.exports;const k4=Object.freeze({loose:!0}),L4=Object.freeze({}),D4=e=>e?typeof e!="object"?k4:e:L4;var Tg=D4;const W0=/^[0-9]+$/,my=(e,t)=>{const n=W0.test(e),s=W0.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},P4=(e,t)=>my(t,e);var py={compareIdentifiers:my,rcompareIdentifiers:P4};const sd=Zu,{MAX_LENGTH:j0,MAX_SAFE_INTEGER:ad}=qu,{safeRe:Y0,t:X0}=Dc,B4=Tg,{compareIdentifiers:Nl}=py;let F4=class mo{constructor(t,n){if(n=B4(n),t instanceof mo){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>j0)throw new TypeError(`version is longer than ${j0} characters`);sd("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const s=t.trim().match(n.loose?Y0[X0.LOOSE]:Y0[X0.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>ad||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ad||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ad||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const a=+o;if(a>=0&&a<ad)return a}return o}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(sd("SemVer.compare",this.version,this.options,t),!(t instanceof mo)){if(typeof t=="string"&&t===this.version)return 0;t=new mo(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof mo||(t=new mo(t,this.options)),Nl(this.major,t.major)||Nl(this.minor,t.minor)||Nl(this.patch,t.patch)}comparePre(t){if(t instanceof mo||(t=new mo(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const s=this.prerelease[n],o=t.prerelease[n];if(sd("prerelease compare",n,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return Nl(s,o)}while(++n)}compareBuild(t){t instanceof mo||(t=new mo(t,this.options));let n=0;do{const s=this.build[n],o=t.build[n];if(sd("build compare",n,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return Nl(s,o)}while(++n)}inc(t,n,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,s),this.inc("pre",n,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,s),this.inc("pre",n,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(s)?1:0;if(!n&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let a=[n,o];s===!1&&(a=[n]),Nl(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ca=F4;const q0=ca,U4=(e,t,n=!1)=>{if(e instanceof q0)return e;try{return new q0(e,t)}catch(s){if(!n)return null;throw s}};var or=U4;const G4=or,V4=(e,t)=>{const n=G4(e,t);return n?n.version:null};var H4=V4;const K4=or,z4=(e,t)=>{const n=K4(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var W4=z4;const Z0=ca,j4=(e,t,n,s,o)=>{typeof n=="string"&&(o=s,s=n,n=void 0);try{return new Z0(e instanceof Z0?e.version:e,n).inc(t,s,o).version}catch{return null}};var Y4=j4;const Q0=or,X4=(e,t)=>{const n=Q0(e,null,!0),s=Q0(t,null,!0),o=n.compare(s);if(o===0)return null;const a=o>0,i=a?n:s,l=a?s:n,r=!!i.prerelease.length;if(!!l.prerelease.length&&!r)return!l.patch&&!l.minor?"major":i.patch?"patch":i.minor?"minor":"major";const u=r?"pre":"";return n.major!==s.major?u+"major":n.minor!==s.minor?u+"minor":n.patch!==s.patch?u+"patch":"prerelease"};var q4=X4;const Z4=ca,Q4=(e,t)=>new Z4(e,t).major;var J4=Q4;const eD=ca,tD=(e,t)=>new eD(e,t).minor;var nD=tD;const sD=ca,aD=(e,t)=>new sD(e,t).patch;var oD=aD;const iD=or,lD=(e,t)=>{const n=iD(e,t);return n&&n.prerelease.length?n.prerelease:null};var rD=lD;const J0=ca,cD=(e,t,n)=>new J0(e,n).compare(new J0(t,n));var io=cD;const dD=io,uD=(e,t,n)=>dD(t,e,n);var mD=uD;const pD=io,hD=(e,t)=>pD(e,t,!0);var fD=hD;const e1=ca,gD=(e,t,n)=>{const s=new e1(e,n),o=new e1(t,n);return s.compare(o)||s.compareBuild(o)};var yg=gD;const _D=yg,vD=(e,t)=>e.sort((n,s)=>_D(n,s,t));var bD=vD;const ED=yg,TD=(e,t)=>e.sort((n,s)=>ED(s,n,t));var yD=TD;const AD=io,SD=(e,t,n)=>AD(e,t,n)>0;var Qu=SD;const ID=io,CD=(e,t,n)=>ID(e,t,n)<0;var Ag=CD;const ND=io,OD=(e,t,n)=>ND(e,t,n)===0;var hy=OD;const xD=io,wD=(e,t,n)=>xD(e,t,n)!==0;var fy=wD;const RD=io,$D=(e,t,n)=>RD(e,t,n)>=0;var Sg=$D;const MD=io,kD=(e,t,n)=>MD(e,t,n)<=0;var Ig=kD;const LD=hy,DD=fy,PD=Qu,BD=Sg,FD=Ag,UD=Ig,GD=(e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return LD(e,n,s);case"!=":return DD(e,n,s);case">":return PD(e,n,s);case">=":return BD(e,n,s);case"<":return FD(e,n,s);case"<=":return UD(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}};var gy=GD;const VD=ca,HD=or,{safeRe:od,t:id}=Dc,KD=(e,t)=>{if(e instanceof VD)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?od[id.COERCEFULL]:od[id.COERCE]);else{const r=t.includePrerelease?od[id.COERCERTLFULL]:od[id.COERCERTL];let d;for(;(d=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||d.index+d[0].length!==n.index+n[0].length)&&(n=d),r.lastIndex=d.index+d[1].length+d[2].length;r.lastIndex=-1}if(n===null)return null;const s=n[2],o=n[3]||"0",a=n[4]||"0",i=t.includePrerelease&&n[5]?`-${n[5]}`:"",l=t.includePrerelease&&n[6]?`+${n[6]}`:"";return HD(`${s}.${o}.${a}${i}${l}`,t)};var zD=KD;class WD{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(t,n)}return this}}var jD=WD,Pp,t1;function lo(){if(t1)return Pp;t1=1;const e=/\s+/g;class t{constructor(H,G){if(G=o(G),H instanceof t)return H.loose===!!G.loose&&H.includePrerelease===!!G.includePrerelease?H:new t(H.raw,G);if(H instanceof a)return this.raw=H.value,this.set=[[H]],this.formatted=void 0,this;if(this.options=G,this.loose=!!G.loose,this.includePrerelease=!!G.includePrerelease,this.raw=H.trim().replace(e," "),this.set=this.raw.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const V=this.set[0];if(this.set=this.set.filter(Y=>!T(Y[0])),this.set.length===0)this.set=[V];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&S(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let H=0;H<this.set.length;H++){H>0&&(this.formatted+="||");const G=this.set[H];for(let V=0;V<G.length;V++)V>0&&(this.formatted+=" "),this.formatted+=G[V].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(H){const V=((this.options.includePrerelease&&g)|(this.options.loose&&_))+":"+H,Y=s.get(V);if(Y)return Y;const ee=this.options.loose,X=ee?r[d.HYPHENRANGELOOSE]:r[d.HYPHENRANGE];H=H.replace(X,M(this.options.includePrerelease)),i("hyphen replace",H),H=H.replace(r[d.COMPARATORTRIM],u),i("comparator trim",H),H=H.replace(r[d.TILDETRIM],p),i("tilde trim",H),H=H.replace(r[d.CARETTRIM],h),i("caret trim",H);let z=H.split(" ").map(ne=>y(ne,this.options)).join(" ").split(/\s+/).map(ne=>$(ne,this.options));ee&&(z=z.filter(ne=>(i("loose invalid filter",ne,this.options),!!ne.match(r[d.COMPARATORLOOSE])))),i("range list",z);const W=new Map,q=z.map(ne=>new a(ne,this.options));for(const ne of q){if(T(ne))return[ne];W.set(ne.value,ne)}W.size>1&&W.has("")&&W.delete("");const Z=[...W.values()];return s.set(V,Z),Z}intersects(H,G){if(!(H instanceof t))throw new TypeError("a Range is required");return this.set.some(V=>E(V,G)&&H.set.some(Y=>E(Y,G)&&V.every(ee=>Y.every(X=>ee.intersects(X,G)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new l(H,this.options)}catch{return!1}for(let G=0;G<this.set.length;G++)if(K(this.set[G],H,this.options))return!0;return!1}}Pp=t;const n=jD,s=new n,o=Tg,a=Ju(),i=Zu,l=ca,{safeRe:r,t:d,comparatorTrimReplace:u,tildeTrimReplace:p,caretTrimReplace:h}=Dc,{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:_}=qu,T=B=>B.value==="<0.0.0-0",S=B=>B.value==="",E=(B,H)=>{let G=!0;const V=B.slice();let Y=V.pop();for(;G&&V.length;)G=V.every(ee=>Y.intersects(ee,H)),Y=V.pop();return G},y=(B,H)=>(i("comp",B,H),B=N(B,H),i("caret",B),B=C(B,H),i("tildes",B),B=k(B,H),i("xrange",B),B=D(B,H),i("stars",B),B),A=B=>!B||B.toLowerCase()==="x"||B==="*",C=(B,H)=>B.trim().split(/\s+/).map(G=>O(G,H)).join(" "),O=(B,H)=>{const G=H.loose?r[d.TILDELOOSE]:r[d.TILDE];return B.replace(G,(V,Y,ee,X,z)=>{i("tilde",B,V,Y,ee,X,z);let W;return A(Y)?W="":A(ee)?W=`>=${Y}.0.0 <${+Y+1}.0.0-0`:A(X)?W=`>=${Y}.${ee}.0 <${Y}.${+ee+1}.0-0`:z?(i("replaceTilde pr",z),W=`>=${Y}.${ee}.${X}-${z} <${Y}.${+ee+1}.0-0`):W=`>=${Y}.${ee}.${X} <${Y}.${+ee+1}.0-0`,i("tilde return",W),W})},N=(B,H)=>B.trim().split(/\s+/).map(G=>R(G,H)).join(" "),R=(B,H)=>{i("caret",B,H);const G=H.loose?r[d.CARETLOOSE]:r[d.CARET],V=H.includePrerelease?"-0":"";return B.replace(G,(Y,ee,X,z,W)=>{i("caret",B,Y,ee,X,z,W);let q;return A(ee)?q="":A(X)?q=`>=${ee}.0.0${V} <${+ee+1}.0.0-0`:A(z)?ee==="0"?q=`>=${ee}.${X}.0${V} <${ee}.${+X+1}.0-0`:q=`>=${ee}.${X}.0${V} <${+ee+1}.0.0-0`:W?(i("replaceCaret pr",W),ee==="0"?X==="0"?q=`>=${ee}.${X}.${z}-${W} <${ee}.${X}.${+z+1}-0`:q=`>=${ee}.${X}.${z}-${W} <${ee}.${+X+1}.0-0`:q=`>=${ee}.${X}.${z}-${W} <${+ee+1}.0.0-0`):(i("no pr"),ee==="0"?X==="0"?q=`>=${ee}.${X}.${z}${V} <${ee}.${X}.${+z+1}-0`:q=`>=${ee}.${X}.${z}${V} <${ee}.${+X+1}.0-0`:q=`>=${ee}.${X}.${z} <${+ee+1}.0.0-0`),i("caret return",q),q})},k=(B,H)=>(i("replaceXRanges",B,H),B.split(/\s+/).map(G=>L(G,H)).join(" ")),L=(B,H)=>{B=B.trim();const G=H.loose?r[d.XRANGELOOSE]:r[d.XRANGE];return B.replace(G,(V,Y,ee,X,z,W)=>{i("xRange",B,V,Y,ee,X,z,W);const q=A(ee),Z=q||A(X),ne=Z||A(z),ae=ne;return Y==="="&&ae&&(Y=""),W=H.includePrerelease?"-0":"",q?Y===">"||Y==="<"?V="<0.0.0-0":V="*":Y&&ae?(Z&&(X=0),z=0,Y===">"?(Y=">=",Z?(ee=+ee+1,X=0,z=0):(X=+X+1,z=0)):Y==="<="&&(Y="<",Z?ee=+ee+1:X=+X+1),Y==="<"&&(W="-0"),V=`${Y+ee}.${X}.${z}${W}`):Z?V=`>=${ee}.0.0${W} <${+ee+1}.0.0-0`:ne&&(V=`>=${ee}.${X}.0${W} <${ee}.${+X+1}.0-0`),i("xRange return",V),V})},D=(B,H)=>(i("replaceStars",B,H),B.trim().replace(r[d.STAR],"")),$=(B,H)=>(i("replaceGTE0",B,H),B.trim().replace(r[H.includePrerelease?d.GTE0PRE:d.GTE0],"")),M=B=>(H,G,V,Y,ee,X,z,W,q,Z,ne,ae)=>(A(V)?G="":A(Y)?G=`>=${V}.0.0${B?"-0":""}`:A(ee)?G=`>=${V}.${Y}.0${B?"-0":""}`:X?G=`>=${G}`:G=`>=${G}${B?"-0":""}`,A(q)?W="":A(Z)?W=`<${+q+1}.0.0-0`:A(ne)?W=`<${q}.${+Z+1}.0-0`:ae?W=`<=${q}.${Z}.${ne}-${ae}`:B?W=`<${q}.${Z}.${+ne+1}-0`:W=`<=${W}`,`${G} ${W}`.trim()),K=(B,H,G)=>{for(let V=0;V<B.length;V++)if(!B[V].test(H))return!1;if(H.prerelease.length&&!G.includePrerelease){for(let V=0;V<B.length;V++)if(i(B[V].semver),B[V].semver!==a.ANY&&B[V].semver.prerelease.length>0){const Y=B[V].semver;if(Y.major===H.major&&Y.minor===H.minor&&Y.patch===H.patch)return!0}return!1}return!0};return Pp}var Bp,n1;function Ju(){if(n1)return Bp;n1=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,p){if(p=n(p),u instanceof t){if(u.loose===!!p.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),i("comparator",u,p),this.options=p,this.loose=!!p.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(u){const p=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],h=u.match(p);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new l(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(i("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,p){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new r(u.value,p).test(this.value):u.operator===""?u.value===""?!0:new r(this.value,p).test(u.semver):(p=n(p),p.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,p)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,p)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}Bp=t;const n=Tg,{safeRe:s,t:o}=Dc,a=gy,i=Zu,l=ca,r=lo();return Bp}const YD=lo(),XD=(e,t,n)=>{try{t=new YD(t,n)}catch{return!1}return t.test(e)};var em=XD;const qD=lo(),ZD=(e,t)=>new qD(e,t).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" "));var QD=ZD;const JD=ca,e8=lo(),t8=(e,t,n)=>{let s=null,o=null,a=null;try{a=new e8(t,n)}catch{return null}return e.forEach(i=>{a.test(i)&&(!s||o.compare(i)===-1)&&(s=i,o=new JD(s,n))}),s};var n8=t8;const s8=ca,a8=lo(),o8=(e,t,n)=>{let s=null,o=null,a=null;try{a=new a8(t,n)}catch{return null}return e.forEach(i=>{a.test(i)&&(!s||o.compare(i)===1)&&(s=i,o=new s8(s,n))}),s};var i8=o8;const Fp=ca,l8=lo(),s1=Qu,r8=(e,t)=>{e=new l8(e,t);let n=new Fp("0.0.0");if(e.test(n)||(n=new Fp("0.0.0-0"),e.test(n)))return n;n=null;for(let s=0;s<e.set.length;++s){const o=e.set[s];let a=null;o.forEach(i=>{const l=new Fp(i.semver.version);switch(i.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!a||s1(l,a))&&(a=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!n||s1(n,a))&&(n=a)}return n&&e.test(n)?n:null};var c8=r8;const d8=lo(),u8=(e,t)=>{try{return new d8(e,t).range||"*"}catch{return null}};var m8=u8;const p8=ca,_y=Ju(),{ANY:h8}=_y,f8=lo(),g8=em,a1=Qu,o1=Ag,_8=Ig,v8=Sg,b8=(e,t,n,s)=>{e=new p8(e,s),t=new f8(t,s);let o,a,i,l,r;switch(n){case">":o=a1,a=_8,i=o1,l=">",r=">=";break;case"<":o=o1,a=v8,i=a1,l="<",r="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(g8(e,t,s))return!1;for(let d=0;d<t.set.length;++d){const u=t.set[d];let p=null,h=null;if(u.forEach(g=>{g.semver===h8&&(g=new _y(">=0.0.0")),p=p||g,h=h||g,o(g.semver,p.semver,s)?p=g:i(g.semver,h.semver,s)&&(h=g)}),p.operator===l||p.operator===r||(!h.operator||h.operator===l)&&a(e,h.semver))return!1;if(h.operator===r&&i(e,h.semver))return!1}return!0};var Cg=b8;const E8=Cg,T8=(e,t,n)=>E8(e,t,">",n);var y8=T8;const A8=Cg,S8=(e,t,n)=>A8(e,t,"<",n);var I8=S8;const i1=lo(),C8=(e,t,n)=>(e=new i1(e,n),t=new i1(t,n),e.intersects(t,n));var N8=C8;const O8=em,x8=io;var w8=(e,t,n)=>{const s=[];let o=null,a=null;const i=e.sort((u,p)=>x8(u,p,n));for(const u of i)O8(u,t,n)?(a=u,o||(o=u)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const l=[];for(const[u,p]of s)u===p?l.push(u):!p&&u===i[0]?l.push("*"):p?u===i[0]?l.push(`<=${p}`):l.push(`${u} - ${p}`):l.push(`>=${u}`);const r=l.join(" || "),d=typeof t.raw=="string"?t.raw:String(t);return r.length<d.length?r:t};const l1=lo(),Ng=Ju(),{ANY:Up}=Ng,Ir=em,Og=io,R8=(e,t,n={})=>{if(e===t)return!0;e=new l1(e,n),t=new l1(t,n);let s=!1;e:for(const o of e.set){for(const a of t.set){const i=M8(o,a,n);if(s=s||i!==null,i)continue e}if(s)return!1}return!0},$8=[new Ng(">=0.0.0-0")],r1=[new Ng(">=0.0.0")],M8=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Up){if(t.length===1&&t[0].semver===Up)return!0;n.includePrerelease?e=$8:e=r1}if(t.length===1&&t[0].semver===Up){if(n.includePrerelease)return!0;t=r1}const s=new Set;let o,a;for(const g of e)g.operator===">"||g.operator===">="?o=c1(o,g,n):g.operator==="<"||g.operator==="<="?a=d1(a,g,n):s.add(g.semver);if(s.size>1)return null;let i;if(o&&a){if(i=Og(o.semver,a.semver,n),i>0)return null;if(i===0&&(o.operator!==">="||a.operator!=="<="))return null}for(const g of s){if(o&&!Ir(g,String(o),n)||a&&!Ir(g,String(a),n))return null;for(const _ of t)if(!Ir(g,String(_),n))return!1;return!0}let l,r,d,u,p=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1,h=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;p&&p.prerelease.length===1&&a.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const g of t){if(u=u||g.operator===">"||g.operator===">=",d=d||g.operator==="<"||g.operator==="<=",o){if(h&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===h.major&&g.semver.minor===h.minor&&g.semver.patch===h.patch&&(h=!1),g.operator===">"||g.operator===">="){if(l=c1(o,g,n),l===g&&l!==o)return!1}else if(o.operator===">="&&!Ir(o.semver,String(g),n))return!1}if(a){if(p&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===p.major&&g.semver.minor===p.minor&&g.semver.patch===p.patch&&(p=!1),g.operator==="<"||g.operator==="<="){if(r=d1(a,g,n),r===g&&r!==a)return!1}else if(a.operator==="<="&&!Ir(a.semver,String(g),n))return!1}if(!g.operator&&(a||o)&&i!==0)return!1}return!(o&&d&&!a&&i!==0||a&&u&&!o&&i!==0||h||p)},c1=(e,t,n)=>{if(!e)return t;const s=Og(e.semver,t.semver,n);return s>0?e:s<0||t.operator===">"&&e.operator===">="?t:e},d1=(e,t,n)=>{if(!e)return t;const s=Og(e.semver,t.semver,n);return s<0?e:s>0||t.operator==="<"&&e.operator==="<="?t:e};var k8=R8;const Gp=Dc,u1=qu,L8=ca,m1=py,D8=or,P8=H4,B8=W4,F8=Y4,U8=q4,G8=J4,V8=nD,H8=oD,K8=rD,z8=io,W8=mD,j8=fD,Y8=yg,X8=bD,q8=yD,Z8=Qu,Q8=Ag,J8=hy,e5=fy,t5=Sg,n5=Ig,s5=gy,a5=zD,o5=Ju(),i5=lo(),l5=em,r5=QD,c5=n8,d5=i8,u5=c8,m5=m8,p5=Cg,h5=y8,f5=I8,g5=N8,_5=w8,v5=k8;var b5={parse:D8,valid:P8,clean:B8,inc:F8,diff:U8,major:G8,minor:V8,patch:H8,prerelease:K8,compare:z8,rcompare:W8,compareLoose:j8,compareBuild:Y8,sort:X8,rsort:q8,gt:Z8,lt:Q8,eq:J8,neq:e5,gte:t5,lte:n5,cmp:s5,coerce:a5,Comparator:o5,Range:i5,satisfies:l5,toComparators:r5,maxSatisfying:c5,minSatisfying:d5,minVersion:u5,validRange:m5,outside:p5,gtr:h5,ltr:f5,intersects:g5,simplifyRange:_5,subset:v5,SemVer:L8,re:Gp.re,src:Gp.src,tokens:Gp.t,SEMVER_SPEC_VERSION:u1.SEMVER_SPEC_VERSION,RELEASE_TYPES:u1.RELEASE_TYPES,compareIdentifiers:m1.compareIdentifiers,rcompareIdentifiers:m1.rcompareIdentifiers};const Eu=Gf(b5),E5=(e,t)=>Eu.valid(e)?Eu.lt(t,e):!1,T5={components:{Banner:Lc},props:{latestChatwootVersion:{type:String,default:""}},setup(){const{isAdmin:e}=xo();return{isAdmin:e}},data(){return{userDismissedBanner:!1}},computed:{...gt({globalConfig:"globalConfig/get"}),updateAvailable(){return E5(this.latestChatwootVersion,this.globalConfig.appVersion)},bannerMessage(){return this.$t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:this.latestChatwootVersion})},shouldShowBanner(){return!this.userDismissedBanner&&this.globalConfig.displayManifest&&this.updateAvailable&&!this.isVersionNotificationDismissed(this.latestChatwootVersion)&&this.isAdmin}},methods:{isVersionNotificationDismissed(e){return(Na.get(Pa.DISMISSED_UPDATES)||[]).includes(e)},dismissUpdateBanner(){let e=Na.get(Pa.DISMISSED_UPDATES)||[];e instanceof Array?e.push(this.latestChatwootVersion):e=[this.latestChatwootVersion],Na.set(Pa.DISMISSED_UPDATES,e),this.userDismissedBanner=!0}}};function y5(e,t,n,s,o,a){const i=F("Banner");return a.shouldShowBanner?(m(),P(i,{key:0,"color-scheme":"primary","banner-message":a.bannerMessage,"href-link":"https://github.com/chatwoot/chatwoot/releases","href-link-text":e.$t("GENERAL_SETTINGS.LEARN_MORE"),"has-close-button":"",onClose:a.dismissUpdateBanner},null,8,["banner-message","href-link-text","onClose"])):x("",!0)}const A5=Re(T5,[["render",y5]]);function Ls(){const e=xn(),t=Ve("accounts/getAccount"),n=Ve("globalConfig/isOnChatwootCloud"),s=Ve("accounts/isFeatureEnabledonAccount"),o=w(()=>Number(e.params.accountId)),a=w(()=>t.value(o.value));return{accountId:o,route:e,currentAccount:a,accountScopedUrl:d=>`/app/accounts/${o.value}/${d}`,accountScopedRoute:(d,u,p)=>({name:d,params:{accountId:o.value,...u},query:{...p}}),isCloudFeatureEnabled:d=>s.value(a.value.id,d),isOnChatwootCloud:n}}const p1={status:null,endsOn:null},S5={components:{Banner:Lc},setup(){const{isAdmin:e}=xo(),{accountId:t}=Ls();return{accountId:t,isAdmin:e}},computed:{...gt({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",getAccount:"accounts/getAccount"}),bannerMessage(){return this.$t("GENERAL_SETTINGS.PAYMENT_PENDING")},actionButtonMessage(){return this.$t("GENERAL_SETTINGS.OPEN_BILLING")},shouldShowBanner(){return!this.isOnChatwootCloud||!this.isAdmin?!1:this.isPaymentPending()}},methods:{routeToBilling(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},isPaymentPending(){const{status:e,endsOn:t}=this.getSubscriptionInfo();return!!(e&&t&&e==="past_due"&&t<new Date)},getSubscriptionInfo(){const e=this.getAccount(this.accountId);if(!e)return p1;const{custom_attributes:t}=e;if(!t)return p1;const{subscription_status:n,subscription_ends_on:s}=t;return{status:n,endsOn:new Date(s)}}}};function I5(e,t,n,s,o,a){const i=F("Banner");return a.shouldShowBanner?(m(),P(i,{key:0,"color-scheme":"alert","banner-message":a.bannerMessage,"action-button-label":a.actionButtonMessage,"has-action-button":"",onPrimaryAction:a.routeToBilling},null,8,["banner-message","action-button-label","onPrimaryAction"])):x("",!0)}const C5=Re(S5,[["render",I5]]),N5={components:{Banner:Lc},computed:{...gt({currentUser:"getCurrentUser"}),bannerMessage(){return this.$t("APP_GLOBAL.EMAIL_VERIFICATION_PENDING")},actionButtonMessage(){return this.$t("APP_GLOBAL.RESEND_VERIFICATION_MAIL")},shouldShowBanner(){return!this.currentUser.confirmed}},methods:{resendVerificationEmail(){this.$store.dispatch("resendConfirmation"),Te(this.$t("APP_GLOBAL.EMAIL_VERIFICATION_SENT"))}}};function O5(e,t,n,s,o,a){const i=F("Banner");return a.shouldShowBanner?(m(),P(i,{key:0,"color-scheme":"alert","banner-message":a.bannerMessage,"action-button-label":a.actionButtonMessage,"action-button-icon":"i-lucide-mail","has-action-button":"",onPrimaryAction:a.resendVerificationEmail},null,8,["banner-message","action-button-label","onPrimaryAction"])):x("",!0)}const x5=Re(N5,[["render",O5]]);class w5 extends NC{constructor(n,s){const{websocketURL:o=""}=window.chatwootConfig||{};super(n,s,o);an(this,"onReconnect",()=>{yt.emit(sn.WEBSOCKET_RECONNECT)});an(this,"onDisconnected",()=>{yt.emit(sn.WEBSOCKET_DISCONNECT)});an(this,"isAValidEvent",n=>this.app.$store.getters.getCurrentAccountId===n.account_id);an(this,"onMessageUpdated",n=>{this.app.$store.dispatch("updateMessage",n)});an(this,"onPresenceUpdate",n=>{this.app.$store.dispatch("contacts/updatePresence",n.contacts),this.app.$store.dispatch("agents/updatePresence",n.users),this.app.$store.dispatch("setCurrentUserAvailability",n.users)});an(this,"onConversationContactChange",n=>{const{meta:s={},id:o}=n,{sender:a}=s||{};o&&this.app.$store.dispatch("updateConversationContact",{conversationId:o,...a})});an(this,"onAssigneeChanged",n=>{const{id:s}=n;s&&this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});an(this,"onConversationCreated",n=>{this.app.$store.dispatch("addConversation",n),this.fetchConversationStats()});an(this,"onConversationRead",n=>{this.app.$store.dispatch("updateConversation",n)});an(this,"onLogout",()=>ql.logout());an(this,"onMessageCreated",n=>{const{conversation:{last_activity_at:s},conversation_id:o}=n;KN.onNewMessage(n),this.app.$store.dispatch("addMessage",n),this.app.$store.dispatch("updateConversationLastActivity",{lastActivityAt:s,conversationId:o})});an(this,"onReload",()=>window.location.reload());an(this,"onStatusChange",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});an(this,"onConversationUpdated",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});an(this,"onTypingOn",({conversation:n,user:s})=>{const o=n.id;this.clearTimer(o),this.app.$store.dispatch("conversationTypingStatus/create",{conversationId:o,user:s}),this.initTimer({conversation:n,user:s})});an(this,"onTypingOff",({conversation:n,user:s})=>{const o=n.id;this.clearTimer(o),this.app.$store.dispatch("conversationTypingStatus/destroy",{conversationId:o,user:s})});an(this,"onConversationMentioned",n=>{this.app.$store.dispatch("addMentions",n)});an(this,"clearTimer",n=>{const s=this.CancelTyping[n];s&&(clearTimeout(s),this.CancelTyping[n]=null)});an(this,"initTimer",({conversation:n,user:s})=>{const o=n.id;this.CancelTyping[o]=setTimeout(()=>{this.onTypingOff({conversation:n,user:s})},3e4)});an(this,"fetchConversationStats",()=>{yt.emit("fetch_conversation_stats")});an(this,"onContactDelete",n=>{this.app.$store.dispatch("contacts/deleteContactThroughConversations",n.id),this.fetchConversationStats()});an(this,"onContactUpdate",n=>{this.app.$store.dispatch("contacts/updateContact",n)});an(this,"onNotificationCreated",n=>{this.app.$store.dispatch("notifications/addNotification",n)});an(this,"onNotificationDeleted",n=>{this.app.$store.dispatch("notifications/deleteNotification",n)});an(this,"onNotificationUpdated",n=>{this.app.$store.dispatch("notifications/updateNotification",n)});an(this,"onCacheInvalidate",n=>{const s=n.cache_keys;this.app.$store.dispatch("labels/revalidate",{newKey:s.label}),this.app.$store.dispatch("inboxes/revalidate",{newKey:s.inbox}),this.app.$store.dispatch("teams/revalidate",{newKey:s.team})});this.CancelTyping=[],this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.created":this.onConversationCreated,"conversation.status_changed":this.onStatusChange,"user:logout":this.onLogout,"page:reload":this.onReload,"assignee.changed":this.onAssigneeChanged,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.contact_changed":this.onConversationContactChange,"presence.update":this.onPresenceUpdate,"contact.deleted":this.onContactDelete,"contact.updated":this.onContactUpdate,"conversation.mentioned":this.onConversationMentioned,"notification.created":this.onNotificationCreated,"notification.deleted":this.onNotificationDeleted,"notification.updated":this.onNotificationUpdated,"conversation.read":this.onConversationRead,"conversation.updated":this.onConversationUpdated,"account.cache_invalidated":this.onCacheInvalidate}}}const R5={init(e,t){return new w5({$store:e},t)}},$5={props:{message:{type:String,default:""},action:{type:Object,default:()=>{}}},data(){return{toggleAfterTimeout:!1}},mounted(){},methods:{}},M5={class:"shadow-sm bg-slate-800 dark:bg-slate-700 rounded-[4px] items-center gap-3 inline-flex mb-2 max-w-[25rem] min-h-[1.875rem] min-w-[15rem] px-6 py-3 text-left"},k5={class:"text-sm font-medium text-white dark:text-white"},L5={key:0};function D5(e,t,n,s,o,a){const i=F("router-link");return m(),f("div",null,[c("div",M5,[c("div",k5,v(n.message),1),n.action?(m(),f("div",L5,[n.action.type=="link"?(m(),P(i,{key:0,to:n.action.to,class:"font-medium cursor-pointer select-none text-woot-500 dark:text-woot-500 hover:text-woot-600 dark:hover:text-woot-600"},{default:j(()=>[be(v(n.action.message),1)]),_:1},8,["to"])):x("",!0)])):x("",!0)])])}const P5=Re($5,[["render",D5]]),B5={components:{WootSnackbar:P5},props:{duration:{type:Number,default:2500}},data(){return{snackMessages:[]}},mounted(){yt.on("newToastMessage",this.onNewToastMessage)},unmounted(){yt.off("newToastMessage",this.onNewToastMessage)},methods:{onNewToastMessage({message:e,action:t}){const n=t==null?void 0:t.usei18n,s=(t==null?void 0:t.duration)||this.duration,o=n?this.$t(e):e;this.snackMessages.push({key:new Date().getTime(),message:o,action:t}),window.setTimeout(()=>{this.snackMessages.splice(0,1)},s)}}};function F5(e,t,n,s,o,a){const i=F("WootSnackbar");return m(),P(yE,{name:"toast-fade",tag:"div",class:"left-0 my-0 mx-auto max-w-[25rem] overflow-hidden absolute right-0 text-center top-4 z-[9999]"},{default:j(()=>[(m(!0),f(pe,null,ye(o.snackMessages,l=>(m(),P(i,{key:l.key,message:l.message,action:l.action},null,8,["message","action"]))),128))]),_:1})}const U5=Re(B5,[["render",F5]]),h1=e=>{const t=Na.get(Pa.COLOR_SCHEME)||"auto";t==="auto"&&e||t==="dark"?(document.body.classList.add("dark"),document.documentElement.style.setProperty("color-scheme","dark")):(document.body.classList.remove("dark"),document.documentElement.style.setProperty("color-scheme","light"))},f1=Object.freeze([{name:"conversation_actions"},{name:"macros"},{name:"conversation_info"},{name:"contact_attributes"},{name:"previous_conversation"},{name:"conversation_participants"},{name:"shopify_orders"}]),G5=Object.freeze([{name:"contact_attributes"},{name:"contact_labels"},{name:"previous_conversation"}]),vy=e=>e==null?void 0:e.toLowerCase().replace(" ","_").replace("-","_").replace("::","_"),V5=e=>w(()=>{const{conversation_sidebar_items_order:t}=e.value;if(!t)return[...f1];const n=[...t];return f1.forEach(s=>{n.find(o=>o.name===s.name)||n.push(s)}),n}),H5=e=>w(()=>{const{contact_sidebar_items_order:t}=e.value;return t||G5}),K5=(e,t,n)=>{n({[e]:!t.value[e]})},z5=(e,t,n)=>{if(!e)return;const s=vy(e);n({[`${s}_signature_enabled`]:t})},W5=(e,t)=>{if(!e)return!1;const n=vy(e);return t.value[`${n}_signature_enabled`]},j5=(e,t)=>{const{editor_message_key:n,enter_to_send_enabled:s}=t.value||{};return n?n===e:e===(s?"enter":"cmd_enter")};function Mn(){const e=vn(),t=Ot(),n=w(()=>e.getUISettings.value),s=(o={})=>{t.dispatch("updateUISettings",{uiSettings:{...n.value,...o}})};return{uiSettings:n,updateUISettings:s,conversationSidebarItemsOrder:V5(n),contactSidebarItemsOrder:H5(n),isContactSidebarItemOpen:o=>!!n.value[o],toggleSidebarUIState:o=>K5(o,n,s),setSignatureFlagForInbox:(o,a)=>z5(o,a,s),fetchSignatureFlagFromUISettings:o=>W5(o,n),isEditorHotKeyEnabled:o=>j5(o,n)}}const tm={SMALLER:"14px",SMALL:"15px",DEFAULT:"16px",LARGE:"18px",LARGER:"20px",EXTRA_LARGE:"22px"},Y5=Object.keys(tm),X5=e=>`PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.OPTIONS.${e}`,q5=(e,t)=>({value:tm[t],label:e(X5(t))}),Z5=e=>{document.documentElement.style.setProperty("font-size",e??tm.DEFAULT)},xg=()=>{const{uiSettings:e,updateUISettings:t}=Mn(),{t:n}=He(),s=Y5.map(l=>q5(n,l)),o=w(()=>e.value.font_size||tm.DEFAULT),a=l=>{requestAnimationFrame(()=>Z5(l))},i=async l=>{try{await t({font_size:l}),a(l),Te(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_SUCCESS"))}catch{Te(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_ERROR"))}};return lt(()=>e.value.font_size,l=>{a(l)},{immediate:!0}),{fontSizeOptions:s,currentFontSize:o,applyFontSize:a,updateFontSize:i}};class Q5 extends Xo{constructor(){super("notification_subscriptions")}}const J5=new Q5,by=(e=()=>{})=>{"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/sw.js").then(t=>e(t)).catch(t=>{console.log("SW registration failed: ",t)})},eP=()=>"Notification"in window?Notification.permission==="granted":!1,g1=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_"),tP=e=>({subscription_type:"browser_push",subscription_attributes:{endpoint:e.endpoint,p256dh:g1(e.getKey("p256dh")),auth:g1(e.getKey("auth"))}}),nP=e=>ql.hasAuthCookie()?J5.create(tP(e)):null,rf=(e=()=>{})=>{window.chatwootConfig.vapidPublicKey&&navigator.serviceWorker.ready.then(t=>t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:window.chatwootConfig.vapidPublicKey})).then(nP).then(()=>{e()}).catch(()=>{Te("This browser does not support desktop notification")})},sP=({onSuccess:e})=>{"Notification"in window?Notification.permission==="granted"?rf(e):Notification.permission!=="denied"&&Notification.requestPermission(t=>{t==="granted"&&rf(e)}):Te("This browser does not support desktop notification")},aP=10800,oP=15;class iP{constructor(t,n){an(this,"disconnect",()=>this.removeEventListeners());an(this,"setupEventListeners",()=>{window.addEventListener("online",this.handleOnlineEvent),yt.on(sn.WEBSOCKET_RECONNECT,this.onReconnect),yt.on(sn.WEBSOCKET_DISCONNECT,this.onDisconnect)});an(this,"removeEventListeners",()=>{window.removeEventListener("online",this.handleOnlineEvent),yt.off(sn.WEBSOCKET_RECONNECT,this.onReconnect),yt.off(sn.WEBSOCKET_DISCONNECT,this.onDisconnect)});an(this,"getSecondsSinceDisconnect",()=>this.disconnectTime?Math.max($E(new Date,this.disconnectTime),0):0);an(this,"handleOnlineEvent",()=>{this.getSecondsSinceDisconnect()>=aP&&window.location.reload()});an(this,"fetchConversations",async()=>{await this.store.dispatch("updateChatListFilters",{page:null,updatedWithin:this.getSecondsSinceDisconnect()+oP}),await this.store.dispatch("fetchAllConversations"),await this.store.dispatch("updateChatListFilters",{updatedWithin:null})});an(this,"fetchFilteredOrSavedConversations",async t=>{await this.store.dispatch("fetchFilteredConversations",{queryData:t,page:1})});an(this,"fetchConversationsOnReconnect",async()=>{var o;const{getAppliedConversationFiltersQuery:t,"customViews/getActiveConversationFolder":n}=this.store.getters,s=(o=t==null?void 0:t.payload)!=null&&o.length?t:n==null?void 0:n.query;s?await this.fetchFilteredOrSavedConversations(s):await this.fetchConversations()});an(this,"fetchConversationMessagesOnReconnect",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("syncActiveConversationMessages",{conversationId:Number(t)})});an(this,"fetchNotificationsOnReconnect",async t=>{await this.store.dispatch("notifications/index",{...t,page:1})});an(this,"revalidateCaches",async()=>{const{label:t,inbox:n,team:s}=await this.store.dispatch("accounts/getCacheKeys");await Promise.all([this.store.dispatch("labels/revalidate",{newKey:t}),this.store.dispatch("inboxes/revalidate",{newKey:n}),this.store.dispatch("teams/revalidate",{newKey:s})])});an(this,"handleRouteSpecificFetch",async()=>{const t=this.router.currentRoute.value.name;bg(t,!0)?(await this.fetchConversationsOnReconnect(),await this.fetchConversationMessagesOnReconnect()):Eg(t,!0)?await this.fetchNotificationsOnReconnect(this.store.getters["notifications/getNotificationFilters"]):dy(t)&&await this.fetchNotificationsOnReconnect()});an(this,"setConversationLastMessageId",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("setConversationLastMessageId",{conversationId:Number(t)})});an(this,"onDisconnect",()=>{this.disconnectTime=new Date,this.setConversationLastMessageId()});an(this,"onReconnect",async()=>{await this.handleRouteSpecificFetch(),await this.revalidateCaches(),yt.emit(sn.WEBSOCKET_RECONNECT_COMPLETED)});this.store=t,this.router=n,this.disconnectTime=null,this.setupEventListeners()}}const lP={name:"App",components:{AddAccountModal:cy,LoadingState:$c,NetworkNotification:y4,UpdateBanner:A5,PaymentPendingBanner:C5,WootSnackbarBox:U5,PendingEmailVerificationBanner:x5},setup(){const e=wn(),t=Ot(),{accountId:n}=Ls(),{currentFontSize:s}=xg();return{router:e,store:t,currentAccountId:n,currentFontSize:s}},data(){return{showAddAccountModal:!1,latestChatwootVersion:null,reconnectService:null}},computed:{...gt({getAccount:"accounts/getAccount",isRTL:"accounts/isRTL",currentUser:"getCurrentUser",authUIFlags:"getAuthUIFlags",accountUIFlags:"accounts/getUIFlags"}),hasAccounts(){const{accounts:e=[]}=this.currentUser||{};return e.length>0},hideOnOnboardingView(){return!zN(this.$route)}},watch:{currentUser(){this.hasAccounts||(this.showAddAccountModal=!0)},currentAccountId:{immediate:!0,handler(){this.currentAccountId&&this.initializeAccount()}}},mounted(){this.initializeColorTheme(),this.listenToThemeChanges(),this.setLocale(window.chatwootConfig.selectedLocale)},unmounted(){this.reconnectService&&this.reconnectService.disconnect()},methods:{initializeColorTheme(){h1(window.matchMedia("(prefers-color-scheme: dark)").matches)},listenToThemeChanges(){const e=window.matchMedia("(prefers-color-scheme: dark)");e.onchange=t=>h1(t.matches)},setLocale(e){this.$root.$i18n.locale=e},async initializeAccount(){await this.$store.dispatch("accounts/get"),this.$store.dispatch("setActiveAccount",{accountId:this.currentAccountId});const{locale:e,latest_chatwoot_version:t}=this.getAccount(this.currentAccountId),{pubsub_token:n}=this.currentUser||{};this.setLocale(e),this.latestChatwootVersion=t,R5.init(this.store,n),this.reconnectService=new iP(this.store,this.router),window.reconnectService=this.reconnectService,by(s=>s.pushManager.getSubscription().then(o=>{o&&rf()}))}}},rP=["dir"];function cP(e,t,n,s,o,a){const i=F("UpdateBanner"),l=F("PendingEmailVerificationBanner"),r=F("PaymentPendingBanner"),d=F("router-view"),u=F("AddAccountModal"),p=F("WootSnackbarBox"),h=F("NetworkNotification"),g=F("LoadingState");return!e.authUIFlags.isFetching&&!e.accountUIFlags.isFetchingItem?(m(),f("div",{key:0,id:"app",class:re(["flex-grow-0 w-full h-full min-h-0 app-wrapper",{"app-rtl--wrapper":e.isRTL}]),dir:e.isRTL?"rtl":"ltr"},[b(i,{"latest-chatwoot-version":o.latestChatwootVersion},null,8,["latest-chatwoot-version"]),s.currentAccountId?(m(),f(pe,{key:0},[a.hideOnOnboardingView?(m(),P(l,{key:0})):x("",!0),a.hideOnOnboardingView?(m(),P(r,{key:1})):x("",!0)],64)):x("",!0),b(d,null,{default:j(({Component:_})=>[b(Ms,{name:"fade",mode:"out-in"},{default:j(()=>[(m(),P(hs(_)))]),_:2},1024)]),_:1}),b(u,{show:o.showAddAccountModal,"has-accounts":a.hasAccounts},null,8,["show","has-accounts"]),b(p),b(h)],10,rP)):(m(),P(g,{key:1}))}const dP=Re(lP,[["render",cP]]),uP=e=>Promise.reject(e),mP=e=>{const{apiHost:t=""}=window.chatwootConfig||{},n=e.create({baseURL:`${t}/`});if(ql.hasAuthCookie()){const{"access-token":s,"token-type":o,client:a,expiry:i,uid:l}=ql.getAuthData();Object.assign(n.defaults.headers.common,{"access-token":s,"token-type":o,client:a,expiry:i,uid:l})}return n.interceptors.response.use(s=>s,s=>uP(s)),n};/*!
 /**
  * vuex-router-sync v6.0.0-rc.1
  * (c) 2021 Evan You
  * @license MIT
  */function pP(e,t,n){const s={}.moduleName||"route";e.registerModule(s,{namespaced:!0,state:cf(t.currentRoute.value),mutations:{ROUTE_CHANGED(r,d){e.state[s]=cf(d.to,d.from)}}});let o=!1,a;const i=e.watch(r=>r[s],r=>{const{fullPath:d}=r;d!==a&&(a!=null&&(o=!0,t.push(r)),a=d)},{flush:"sync"}),l=t.afterEach((r,d)=>{if(o){o=!1;return}a=r.fullPath,e.commit(s+"/ROUTE_CHANGED",{to:r,from:d})});return function(){l(),i(),e.unregisterModule(s)}}function cf(e,t){const n={name:e.name,path:e.path,hash:e.hash,query:e.query,params:e.params,fullPath:e.fullPath,meta:e.meta};return t&&(n.from=cf(t)),Object.freeze(n)}function Ra(){const e=window.chatwootConfig||{},t=e.hostURL,n=e.vapidPublicKey,s=e.enabledLanguages,o=e.isEnterprise==="true",a=e.isStacklab===!0||e.isStacklab==="true",i=e.enterprisePlanName;return{hostURL:t,vapidPublicKey:n,enabledLanguages:s,isEnterprise:o,isStacklab:a,enterprisePlanName:i}}const hP={key:0},df={__name:"CustomBrandPolicyWrapper",props:{showOnCustomBrandedInstance:{type:Boolean,default:!0}},setup(e){const t=e,s=vn()["globalConfig/isACustomBrandedInstance"],o=w(()=>t.showOnCustomBrandedInstance||!s.value);return(a,i)=>o.value?(m(),f("div",hP,[et(a.$slots,"default")])):x("",!0)}},fP={agent_bots:"https://chwt.app/hc/agent-bots",agents:"https://chwt.app/hc/agents",audit_logs:"https://chwt.app/hc/audit-logs",campaigns:"https://chwt.app/hc/campaigns",canned_responses:"https://chwt.app/hc/canned",channel_email:"https://chwt.app/hc/email",channel_facebook:"https://chwt.app/hc/fb",custom_attributes:"https://chwt.app/hc/custom-attributes",dashboard_apps:"https://chwt.app/hc/dashboard-apps",help_center:"https://chwt.app/hc/help-center",inboxes:"https://chwt.app/hc/inboxes",integrations:"https://chwt.app/hc/integrations",labels:"https://chwt.app/hc/labels",macros:"https://chwt.app/hc/macros",message_reply_to:"https://chwt.app/hc/reply-to",reports:"https://chwt.app/hc/reports",sla:"https://chwt.app/hc/sla",team_management:"https://chwt.app/hc/teams",webhook:"https://chwt.app/hc/webhooks",billing:"https://chwt.app/pricing"};function gP(e){return fP[e]}const ir={__name:"BackButton",props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""},compact:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{t.backUrl!==""?Jn.push(t.backUrl):Jn.go(-1)},s=t.compact?"text-sm":"text-base";return(o,a)=>(m(),f("button",{class:re(["flex items-center p-0 font-normal cursor-pointer text-n-slate-11",I(s)]),onClickCapture:n},[a[0]||(a[0]=c("i",{class:"i-lucide-chevron-left -ml-1 text-lg"},null,-1)),be(" "+v(e.buttonLabel||o.$t("GENERAL_SETTINGS.BACK")),1)],34))}},_P={class:"flex flex-col items-start w-full gap-2"},vP={class:"flex items-center justify-between w-full gap-4"},bP={class:"flex items-center gap-3"},EP={key:0,class:"flex items-center w-10 h-10 p-1 rounded-full bg-woot-25/60 dark:bg-woot-900/60"},TP={class:"flex items-center justify-center w-full h-full rounded-full bg-woot-75/70 dark:bg-woot-800/40"},yP={class:"text-xl font-medium tracking-tight text-n-slate-12"},AP={class:"hidden gap-2 sm:flex"},SP={class:"flex flex-col w-full gap-3 text-n-slate-11"},IP={class:"mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl"},CP=["href"],NP={class:"flex flex-wrap items-start justify-start w-full gap-3 sm:hidden"},Ds={__name:"BaseSettingsHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},iconName:{type:String,default:""},linkText:{type:String,default:""},featureName:{type:String,default:""},backButtonLabel:{type:String,default:""}},setup(e){const n=gP(e.featureName),s=o=>{o&&window.open(o,"_blank","noopener noreferrer")};return(o,a)=>{const i=F("fluent-icon");return m(),f("div",_P,[e.backButtonLabel?(m(),P(ir,{key:0,compact:"","button-label":e.backButtonLabel},null,8,["button-label"])):x("",!0),c("div",vP,[c("div",bP,[e.iconName?(m(),f("div",EP,[c("div",TP,[b(i,{size:"14",icon:e.iconName,type:"outline",class:"flex-shrink-0 text-n-brand"},null,8,["icon"])])])):x("",!0),c("h1",yP,v(e.title),1)]),c("div",AP,[et(o.$slots,"actions")])]),c("div",SP,[c("p",IP,[et(o.$slots,"description",{},()=>[be(v(e.description),1)])]),b(df,{"show-on-custom-branded-instance":!1},{default:j(()=>[I(n)&&e.linkText?(m(),f("a",{key:0,href:I(n),target:"_blank",rel:"noopener noreferrer",class:"items-center hidden gap-1 text-sm font-medium sm:inline-flex w-fit text-n-blue-text hover:underline"},[be(v(e.linkText)+" ",1),b(Ht,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 text-n-blue-text size-4"})],8,CP)):x("",!0)]),_:1})]),c("div",NP,[et(o.$slots,"actions"),b(df,{"show-on-custom-branded-instance":!1},{default:j(()=>[I(n)&&e.linkText?(m(),P(he,{key:0,blue:"",link:"",icon:"i-lucide-chevron-right","trailing-icon":"",label:e.linkText,onClick:a[0]||(a[0]=l=>s(I(n)))},null,8,["label"])):x("",!0)]),_:1})])])}}},OP={components:{BaseSettingsHeader:Ds,V4Button:he,WootConfirmDeleteModal:BT,NextButton:he},setup(){const{updateUISettings:e}=Mn(),{enabledLanguages:t}=Ra(),{accountId:n}=Ls(),s=Lt();return{updateUISettings:e,v$:s,enabledLanguages:t,accountId:n}},data(){return{id:"",name:"",locale:"en",domain:"",supportEmail:"",features:{},autoResolveDuration:null,latestChatwootVersion:null,showDeletePopup:!1}},validations:{name:{required:it},locale:{required:it},autoResolveDuration:{minValue:Kf(1),maxValue:oN(999)}},computed:{...gt({globalConfig:"globalConfig/get",getAccount:"accounts/getAccount",uiFlags:"accounts/getUIFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"}),showAutoResolutionConfig(){return this.isFeatureEnabledonAccount(this.accountId,xt.AUTO_RESOLVE_CONVERSATIONS)},hasAnUpdateAvailable(){return Eu.valid(this.latestChatwootVersion)?Eu.lt(this.globalConfig.appVersion,this.latestChatwootVersion):!1},languagesSortedByCode(){return[...this.enabledLanguages].sort((t,n)=>t.iso_639_1_code.localeCompare(n.iso_639_1_code))},isUpdating(){return this.uiFlags.isUpdating},featureInboundEmailEnabled(){var e;return!!((e=this.features)!=null&&e.inbound_emails)},featureCustomReplyDomainEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_domain},featureCustomReplyEmailEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_email},getAccountId(){return this.id.toString()},confirmPlaceHolderText(){return`${this.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.PLACE_HOLDER",{accountName:this.name})}`},isMarkedForDeletion(){const{custom_attributes:e={}}=this.currentAccount;return!!e.marked_for_deletion_at},markedForDeletionDate(){const{custom_attributes:e={}}=this.currentAccount;return e.marked_for_deletion_at?new Date(e.marked_for_deletion_at):null},markedForDeletionReason(){const{custom_attributes:e={}}=this.currentAccount;return e.marked_for_deletion_reason||"manual_deletion"},formattedDeletionDate(){return this.markedForDeletionDate?this.markedForDeletionDate.toLocaleString():""},currentAccount(){return this.getAccount(this.accountId)||{}}},mounted(){this.initializeAccount()},methods:{async initializeAccount(){try{const{name:e,locale:t,id:n,domain:s,support_email:o,features:a,auto_resolve_duration:i,latest_chatwoot_version:l}=this.getAccount(this.accountId);this.$root.$i18n.locale=t,this.name=e,this.locale=t,this.id=n,this.domain=s,this.supportEmail=o,this.features=a,this.autoResolveDuration=i,this.latestChatwootVersion=l}catch{}},async updateAccount(){if(this.v$.$touch(),this.v$.$invalid){Te(this.$t("GENERAL_SETTINGS.FORM.ERROR"));return}try{await this.$store.dispatch("accounts/update",{locale:this.locale,name:this.name,domain:this.domain,support_email:this.supportEmail,auto_resolve_duration:this.autoResolveDuration}),this.$root.$i18n.locale=this.locale,this.getAccount(this.id).locale=this.locale,this.updateDirectionView(this.locale),Te(this.$t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{Te(this.$t("GENERAL_SETTINGS.UPDATE.ERROR"))}},updateDirectionView(e){const t=RN(e);this.updateUISettings({rtl_view:t})},openDeletePopup(){this.showDeletePopup=!0},closeDeletePopup(){this.showDeletePopup=!1},async markAccountForDeletion(){this.closeDeletePopup();try{await this.$store.dispatch("accounts/toggleDeletion",{action_type:"delete"}),await this.$store.dispatch("accounts/get"),Te(this.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SUCCESS"))}catch(e){this.handleDeletionError(e)}},handleDeletionError(e){var s,o,a,i;const t=(o=(s=e.response)==null?void 0:s.data)==null?void 0:o.error_key;if(t){Te(this.$t(`GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.${t}`));return}const n=(i=(a=e.response)==null?void 0:a.data)==null?void 0:i.message;if(n){Te(n);return}Te(this.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.FAILURE"))},async clearDeletionMark(){try{await this.$store.dispatch("accounts/toggleDeletion",{action_type:"undelete"}),await this.$store.dispatch("accounts/get"),Te(this.$t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{Te(this.$t("GENERAL_SETTINGS.UPDATE.ERROR"))}}}},xP={class:"flex flex-col w-full"},wP={class:"flex-grow flex-shrink min-w-0 mt-3 overflow-auto"},RP={class:"flex flex-row border-b border-slate-25 dark:border-slate-800"},$P={class:"flex-grow-0 flex-shrink-0 flex-[25%] min-w-0 py-4 pr-6 pl-0"},MP={class:"text-lg font-medium text-black-900 dark:text-slate-200"},kP={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%]"},LP=["placeholder"],DP={key:0,class:"message"},PP=["value"],BP={key:0,class:"message"},FP={key:0},UP={key:1},GP={key:2},VP=["placeholder"],HP={key:3},KP=["placeholder"],zP=["placeholder"],WP={key:0,class:"message"},jP={class:"flex flex-row"},YP={class:"flex-grow-0 flex-shrink-0 flex-[25%] min-w-0 py-4 pr-6 pl-0"},XP={class:"text-lg font-medium text-black-900 dark:text-slate-200"},qP={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%]"},ZP={key:0},QP={class:"flex flex-row pt-4 mt-2 border-t border-slate-25 dark:border-slate-800 text-black-900 dark:text-slate-300"},JP={class:"flex-grow-0 flex-shrink-0 flex-[25%] min-w-0 py-4 pr-6 pl-0"},e6={class:"text-lg font-medium text-black-900 dark:text-slate-200"},t6={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%]"},n6={key:0},s6={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%] bg-red-50 dark:bg-red-900 rounded"},a6={class:"mb-4"},o6={key:1},i6={class:"p-4 text-sm text-center"},l6={key:0},r6={class:"build-id"};function c6(e,t,n,s,o,a){const i=F("V4Button"),l=F("BaseSettingsHeader"),r=F("woot-loading-state"),d=F("woot-code"),u=F("NextButton"),p=F("WootConfirmDeleteModal");return m(),f("div",xP,[b(l,{title:e.$t("GENERAL_SETTINGS.TITLE")},{actions:j(()=>[b(i,{blue:"",loading:a.isUpdating,onClick:a.updateAccount},{default:j(()=>[be(v(e.$t("GENERAL_SETTINGS.SUBMIT")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"]),c("div",wP,[e.uiFlags.isFetchingItem?x("",!0):(m(),f("form",{key:0,onSubmit:t[7]||(t[7]=Ke((...h)=>a.updateAccount&&a.updateAccount(...h),["prevent"]))},[c("div",RP,[c("div",$P,[c("h4",MP,v(e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.TITLE")),1),c("p",null,v(e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.NOTE")),1)]),c("div",kP,[c("label",{class:re({error:s.v$.name.$error})},[be(v(e.$t("GENERAL_SETTINGS.FORM.NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>o.name=h),type:"text",placeholder:e.$t("GENERAL_SETTINGS.FORM.NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...h)=>s.v$.name.$touch&&s.v$.name.$touch(...h))},null,40,LP),[[at,o.name]]),s.v$.name.$error?(m(),f("span",DP,v(e.$t("GENERAL_SETTINGS.FORM.NAME.ERROR")),1)):x("",!0)],2),c("label",{class:re({error:s.v$.locale.$error})},[be(v(e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[2]||(t[2]=h=>o.locale=h)},[(m(!0),f(pe,null,ye(a.languagesSortedByCode,h=>(m(),f("option",{key:h.iso_639_1_code,value:h.iso_639_1_code},v(h.name),9,PP))),128))],512),[[Mt,o.locale]]),s.v$.locale.$error?(m(),f("span",BP,v(e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.ERROR")),1)):x("",!0)],2),a.featureInboundEmailEnabled?(m(),f("label",FP,v(e.$t("GENERAL_SETTINGS.FORM.FEATURES.INBOUND_EMAIL_ENABLED")),1)):x("",!0),a.featureCustomReplyDomainEnabled?(m(),f("label",UP,v(e.$t("GENERAL_SETTINGS.FORM.FEATURES.CUSTOM_EMAIL_DOMAIN_ENABLED")),1)):x("",!0),a.featureCustomReplyDomainEnabled?(m(),f("label",GP,[be(v(e.$t("GENERAL_SETTINGS.FORM.DOMAIN.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[3]||(t[3]=h=>o.domain=h),type:"text",placeholder:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.PLACEHOLDER")},null,8,VP),[[at,o.domain]])])):x("",!0),a.featureCustomReplyEmailEnabled?(m(),f("label",HP,[be(v(e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=h=>o.supportEmail=h),type:"text",placeholder:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.PLACEHOLDER")},null,8,KP),[[at,o.supportEmail]])])):x("",!0),a.showAutoResolutionConfig?(m(),f("label",{key:4,class:re({error:s.v$.autoResolveDuration.$error})},[be(v(e.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE_DURATION.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[5]||(t[5]=h=>o.autoResolveDuration=h),type:"number",placeholder:e.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE_DURATION.PLACEHOLDER"),onBlur:t[6]||(t[6]=(...h)=>s.v$.autoResolveDuration.$touch&&s.v$.autoResolveDuration.$touch(...h))},null,40,zP),[[at,o.autoResolveDuration]]),s.v$.autoResolveDuration.$error?(m(),f("span",WP,v(e.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE_DURATION.ERROR")),1)):x("",!0)],2)):x("",!0)])])],32)),e.uiFlags.isFetchingItem?(m(),P(r,{key:1})):x("",!0)]),c("div",jP,[c("div",YP,[c("h4",XP,v(e.$t("GENERAL_SETTINGS.FORM.ACCOUNT_ID.TITLE")),1),c("p",null,v(e.$t("GENERAL_SETTINGS.FORM.ACCOUNT_ID.NOTE")),1)]),c("div",qP,[b(d,{script:a.getAccountId},null,8,["script"])])]),!e.uiFlags.isFetchingItem&&e.isOnChatwootCloud?(m(),f("div",ZP,[c("div",QP,[c("div",JP,[c("h4",e6,v(e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.TITLE")),1),c("p",null,v(e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.NOTE")),1)]),c("div",t6,[a.isMarkedForDeletion?(m(),f("div",n6,[c("div",s6,[c("p",a6,v(e.$t(`GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_${a.markedForDeletionReason==="manual_deletion"?"MANUAL":"INACTIVITY"}`,{deletionDate:a.formattedDeletionDate})),1),b(u,{label:e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.CLEAR_BUTTON"),color:"ruby","is-loading":e.uiFlags.isUpdating,onClick:a.clearDeletionMark},null,8,["label","is-loading","onClick"])])])):x("",!0),a.isMarkedForDeletion?x("",!0):(m(),f("div",o6,[b(u,{label:e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.BUTTON_TEXT"),color:"ruby",onClick:t[8]||(t[8]=h=>a.openDeletePopup())},null,8,["label"])]))])]),o.showDeletePopup?(m(),P(p,{key:0,show:o.showDeletePopup,"onUpdate:show":t[9]||(t[9]=h=>o.showDeletePopup=h),title:e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.TITLE"),message:e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.MESSAGE"),"confirm-text":e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.BUTTON_TEXT"),"reject-text":e.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.DISMISS"),"confirm-value":o.name,"confirm-place-holder-text":a.confirmPlaceHolderText,onOnConfirm:a.markAccountForDeletion,onOnClose:a.closeDeletePopup},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text","onOnConfirm","onOnClose"])):x("",!0)])):x("",!0),c("div",i6,[c("div",null,v(`v${e.globalConfig.appVersion}`),1),a.hasAnUpdateAvailable&&e.globalConfig.displayManifest?(m(),f("div",l6,v(e.$t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:o.latestChatwootVersion})),1)):x("",!0),c("div",r6,[c("div",null,v(`Build ${e.globalConfig.gitSha}`),1)])])])}const d6=Re(OP,[["render",c6]]),u6={class:"flex flex-col w-full h-full m-0 p-6 sm:py-8 lg:px-16 overflow-auto bg-n-background font-inter"},m6={class:"flex items-start w-full max-w-6xl mx-auto"},da={__name:"SettingsWrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=F("router-view");return m(),f("div",u6,[c("div",m6,[b(s,null,{default:j(({Component:o})=>[e.keepAlive?(m(),P(Ic,{key:0},[(m(),P(hs(o)))],1024)):(m(),P(hs(o),{key:1}))]),_:1})])])}}},p6={routes:[{path:Pt("accounts/:accountId/settings/general"),meta:{permissions:["administrator"]},component:da,children:[{path:"",name:"general_settings_index",component:d6,meta:{permissions:["administrator"]}}]}]},h6={class:"flex flex-col h-auto overflow-auto"},f6={class:"w-full"},g6=["placeholder"],_6={class:"w-full"},v6=["value"],b6={key:0,class:"message"},E6={class:"w-full"},T6=["placeholder"],y6={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},A6={__name:"AddAgent",emits:["close"],setup(e,{emit:t}){const n=t,s=Ot(),{t:o}=He(),a=U(""),i=U(""),l=U("agent"),d=Lt({agentName:{required:it},agentEmail:{required:it,email:xi},selectedRoleId:{required:it}},{agentName:a,agentEmail:i,selectedRoleId:l}),u=Ve("agents/getUIFlags"),p=Ve("customRole/getCustomRoles"),h=w(()=>{const T=[{id:"administrator",name:"administrator",label:o("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:o("AGENT_MGMT.AGENT_TYPES.AGENT")}],S=p.value.map(E=>({id:E.id,name:`custom_${E.id}`,label:E.name}));return[...T,...S]}),g=w(()=>h.value.find(T=>T.id===l.value||T.name===l.value)),_=async()=>{var T;if(d.value.$touch(),!d.value.$invalid)try{const S={name:a.value,email:i.value};g.value.name.startsWith("custom_")?S.custom_role_id=g.value.id:S.role=g.value.name,await s.dispatch("agents/create",S),Te(o("AGENT_MGMT.ADD.API.SUCCESS_MESSAGE")),n("close")}catch(S){const{response:{data:{error:E="",attributes:y=[],message:A=""}={}}={}}=S;let C="";((T=S==null?void 0:S.response)==null?void 0:T.status)===422&&!y.includes("base")?C=o("AGENT_MGMT.ADD.API.EXIST_MESSAGE"):C=o("AGENT_MGMT.ADD.API.ERROR_MESSAGE"),Te(E||A||C)}};return(T,S)=>{const E=F("woot-modal-header");return m(),f("div",h6,[b(E,{"header-title":T.$t("AGENT_MGMT.ADD.TITLE"),"header-content":T.$t("AGENT_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col items-start w-full",onSubmit:Ke(_,["prevent"])},[c("div",f6,[c("label",{class:re({error:I(d).agentName.$error})},[be(v(T.$t("AGENT_MGMT.ADD.FORM.NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":S[0]||(S[0]=y=>a.value=y),type:"text",placeholder:T.$t("AGENT_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onInput:S[1]||(S[1]=(...y)=>I(d).agentName.$touch&&I(d).agentName.$touch(...y))},null,40,g6),[[at,a.value]])],2)]),c("div",_6,[c("label",{class:re({error:I(d).selectedRoleId.$error})},[be(v(T.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":S[2]||(S[2]=y=>l.value=y),onChange:S[3]||(S[3]=(...y)=>I(d).selectedRoleId.$touch&&I(d).selectedRoleId.$touch(...y))},[(m(!0),f(pe,null,ye(h.value,y=>(m(),f("option",{key:y.id,value:y.id},v(y.label),9,v6))),128))],544),[[Mt,l.value]]),I(d).selectedRoleId.$error?(m(),f("span",b6,v(T.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.ERROR")),1)):x("",!0)],2)]),c("div",E6,[c("label",{class:re({error:I(d).agentEmail.$error})},[be(v(T.$t("AGENT_MGMT.ADD.FORM.EMAIL.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":S[4]||(S[4]=y=>i.value=y),type:"email",placeholder:T.$t("AGENT_MGMT.ADD.FORM.EMAIL.PLACEHOLDER"),onInput:S[5]||(S[5]=(...y)=>I(d).agentEmail.$touch&&I(d).agentEmail.$touch(...y))},null,40,T6),[[at,i.value]])],2)]),c("div",y6,[b(he,{faded:"",slate:"",type:"reset",label:T.$t("AGENT_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:S[6]||(S[6]=Ke(y=>n("close"),["prevent"]))},null,8,["label"]),b(he,{type:"submit",label:T.$t("AGENT_MGMT.ADD.FORM.SUBMIT"),disabled:I(d).$invalid||I(u).isCreating,"is-loading":I(u).isCreating},null,8,["label","disabled","is-loading"])])],32)])}}},S6={class:"flex flex-col h-auto overflow-auto"},I6={class:"w-full"},C6=["placeholder"],N6={class:"w-full"},O6=["value"],x6={key:0,class:"message"},w6={class:"w-full"},R6=["value"],$6={key:0,class:"message"},M6={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"},k6={class:"w-[50%] ltr:text-left rtl:text-right"},L6={class:"w-[50%] flex justify-end items-center gap-2"},D6={__name:"EditAgent",props:{id:{type:Number,required:!0},name:{type:String,required:!0},email:{type:String,default:""},type:{type:String,default:""},availability:{type:String,default:""},customRoleId:{type:Number,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{AVAILABILITY_STATUS_KEYS:o}=$t,a=Ot(),{t:i}=He(),l=U(n.name),r=U(n.availability),d=U(n.customRoleId||n.type),u=U({email:n.email}),p={agentName:{required:it,minLength:Nn(1)},selectedRoleId:{required:it},agentAvailability:{required:it}},h=Lt(p,{agentName:l,selectedRoleId:d,agentAvailability:r}),g=w(()=>`${i("AGENT_MGMT.EDIT.TITLE")} - ${n.name}`),_=Ve("agents/getUIFlags"),T=Ve("customRole/getCustomRoles"),S=w(()=>{const N=[{id:"administrator",name:"administrator",label:i("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:i("AGENT_MGMT.AGENT_TYPES.AGENT")}],R=T.value.map(k=>({id:k.id,name:`custom_${k.id}`,label:k.name}));return[...N,...R]}),E=w(()=>S.value.find(N=>N.id===d.value||N.name===d.value)),y=w(()=>[i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),A=w(()=>y.value.map((N,R)=>({label:N,value:o[R],disabled:n.availability===o[R]}))),C=async()=>{if(h.value.$touch(),!h.value.$invalid)try{const N={id:n.id,name:l.value,availability:r.value};E.value.name.startsWith("custom_")?N.custom_role_id=E.value.id:(N.role=E.value.name,N.custom_role_id=null),await a.dispatch("agents/update",N),Te(i("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE")),s("close")}catch{Te(i("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}},O=async()=>{try{await ql.resetPassword(u.value),Te(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_SUCCESS_MESSAGE"))}catch{Te(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ERROR_MESSAGE"))}};return(N,R)=>{const k=F("woot-modal-header");return m(),f("div",S6,[b(k,{"header-title":g.value},null,8,["header-title"]),c("form",{class:"w-full",onSubmit:Ke(C,["prevent"])},[c("div",I6,[c("label",{class:re({error:I(h).agentName.$error})},[be(v(N.$t("AGENT_MGMT.EDIT.FORM.NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":R[0]||(R[0]=L=>l.value=L),type:"text",placeholder:N.$t("AGENT_MGMT.EDIT.FORM.NAME.PLACEHOLDER"),onInput:R[1]||(R[1]=(...L)=>I(h).agentName.$touch&&I(h).agentName.$touch(...L))},null,40,C6),[[at,l.value]])],2)]),c("div",N6,[c("label",{class:re({error:I(h).selectedRoleId.$error})},[be(v(N.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":R[2]||(R[2]=L=>d.value=L),onChange:R[3]||(R[3]=(...L)=>I(h).selectedRoleId.$touch&&I(h).selectedRoleId.$touch(...L))},[(m(!0),f(pe,null,ye(S.value,L=>(m(),f("option",{key:L.id,value:L.id},v(L.label),9,O6))),128))],544),[[Mt,d.value]]),I(h).selectedRoleId.$error?(m(),f("span",x6,v(N.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.ERROR")),1)):x("",!0)],2)]),c("div",w6,[c("label",{class:re({error:I(h).agentAvailability.$error})},[be(v(N.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":R[4]||(R[4]=L=>r.value=L),onChange:R[5]||(R[5]=(...L)=>I(h).agentAvailability.$touch&&I(h).agentAvailability.$touch(...L))},[(m(!0),f(pe,null,ye(A.value,L=>(m(),f("option",{key:L.value,value:L.value},v(L.label),9,R6))),128))],544),[[Mt,r.value]]),I(h).agentAvailability.$error?(m(),f("span",$6,v(N.$t("AGENT_MGMT.EDIT.FORM.AGENT_AVAILABILITY.ERROR")),1)):x("",!0)],2)]),c("div",M6,[c("div",k6,[b(he,{ghost:"",type:"button",icon:"i-lucide-lock-keyhole",class:"!px-2",label:N.$t("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_RESET_BUTTON"),onClick:Ke(O,["prevent"])},null,8,["label"])]),c("div",L6,[b(he,{faded:"",slate:"",type:"reset",label:N.$t("AGENT_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:R[6]||(R[6]=Ke(L=>s("close"),["prevent"]))},null,8,["label"]),b(he,{type:"submit",label:N.$t("AGENT_MGMT.EDIT.FORM.SUBMIT"),disabled:I(h).$invalid||I(_).isUpdating,"is-loading":I(_).isUpdating},null,8,["label","disabled","is-loading"])])])],32)])}}},P6={class:"flex flex-col w-full h-full gap-8 font-inter"},B6={key:1,class:"flex-1 py-20 text-slate-700 dark:text-slate-100 flex items-center justify-center text-base"},Ha={__name:"SettingsLayout",props:{isLoading:{type:Boolean,default:!1},noRecordsFound:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},noRecordsMessage:{type:String,default:""}},setup(e){return(t,n)=>{const s=F("woot-loading-state");return m(),f("div",P6,[et(t.$slots,"header"),c("div",null,[et(t.$slots,"preBody"),e.isLoading?et(t.$slots,"loading",{key:0},()=>[b(s,{message:e.loadingMessage},null,8,["message"])]):e.noRecordsFound?(m(),f("p",B6,v(e.noRecordsMessage),1)):et(t.$slots,"body",{key:2}),et(t.$slots,"default")])])}}},F6={class:"divide-y divide-slate-75 dark:divide-slate-700"},U6={class:"divide-y divide-n-weak text-n-slate-11"},G6={class:"py-4 ltr:pr-4 rtl:pl-4"},V6={class:"flex flex-row items-center gap-4"},H6={class:"block font-medium capitalize"},K6={class:"relative py-4 ltr:pr-4 rtl:pl-4"},z6={class:"flex flex-col gap-1 p-4"},W6={class:"font-semibold"},j6={class:"pl-4 mb-0 list-disc"},Y6={class:"py-4 ltr:pr-4 rtl:pl-4"},X6={key:0},q6={key:1},Z6={class:"py-4"},Q6={class:"flex justify-end gap-1"},J6={__name:"Index",setup(e){const t=vn(),n=Ot(),{t:s}=He(),o=U({}),a=U(!1),i=U(!1),l=U(!1),r=U({message:""}),d=U({}),u=w(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.YES")} ${d.value.name}`),p=w(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.NO")} ${d.value.name}`),h=w(()=>` ${d.value.name}?`),g=w(()=>t["agents/getAgents"].value),_=w(()=>t["agents/getUIFlags"].value),T=w(()=>t.getCurrentUserID.value),S=Ve("customRole/getCustomRoles");ut(()=>{n.dispatch("agents/get"),n.dispatch("customRole/getCustomRole")});const E=G=>S.value.find(V=>V.id===G.custom_role_id),y=G=>{if(!G.custom_role_id)return s(`AGENT_MGMT.AGENT_TYPES.${G.role.toUpperCase()}`);const V=E(G);return V?V.name:""},A=G=>{if(!G.custom_role_id)return[];const V=E(G);return(V==null?void 0:V.permissions)||[]},C=w(()=>g.value.filter(G=>G.role==="administrator"&&G.confirmed)),O=G=>T.value!==G.id,N=G=>T.value===G.id?!1:G.confirmed&&G.role==="administrator"?C.value.length!==1:!0,R=G=>{o.value[d.value.id]=!1,d.value={},r.value.message=G,Te(G)},k=()=>{a.value=!0},L=()=>{a.value=!1},D=G=>{l.value=!0,d.value=G},$=()=>{l.value=!1},M=G=>{i.value=!0,d.value=G},K=()=>{i.value=!1},B=async G=>{try{await n.dispatch("agents/delete",G),R(s("AGENT_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{R(s("AGENT_MGMT.DELETE.API.ERROR_MESSAGE"))}},H=()=>{o.value[d.value.id]=!0,K(),B(d.value.id)};return(G,V)=>{const Y=F("woot-modal"),ee=F("woot-delete-modal"),X=ct("tooltip");return m(),P(Ha,{"is-loading":_.value.isFetching,"loading-message":G.$t("AGENT_MGMT.LOADING"),"no-records-found":!g.value.length,"no-records-message":G.$t("AGENT_MGMT.LIST.404")},{header:j(()=>[b(Ds,{title:G.$t("AGENT_MGMT.HEADER"),description:G.$t("AGENT_MGMT.DESCRIPTION"),"link-text":G.$t("AGENT_MGMT.LEARN_MORE"),"feature-name":"agents"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:G.$t("AGENT_MGMT.HEADER_BTN_TXT"),onClick:k},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:j(()=>[c("table",F6,[c("tbody",U6,[(m(!0),f(pe,null,ye(g.value,(z,W)=>(m(),f("tr",{key:z.email},[c("td",G6,[c("div",V6,[b(Qn,{src:z.thumbnail,username:z.name,size:"40px",status:z.availability_status},null,8,["src","username","status"]),c("div",null,[c("span",H6,v(z.name),1),c("span",null,v(z.email),1)])])]),c("td",K6,[c("span",{class:re(["block font-medium w-fit",{"hover:text-gray-900 group cursor-pointer":z.custom_role_id}])},[be(v(y(z))+" ",1),c("div",{class:re(["absolute left-0 z-10 hidden max-w-[300px] w-auto bg-white rounded-xl border border-slate-50 shadow-lg top-14 md:top-12 dark:bg-slate-800 dark:border-slate-700",{"group-hover:block":z.custom_role_id}])},[c("div",z6,[c("span",W6,v(G.$t("AGENT_MGMT.LIST.AVAILABLE_CUSTOM_ROLE")),1),c("ul",j6,[(m(!0),f(pe,null,ye(A(z),q=>(m(),f("li",{key:q,class:"font-normal"},v(G.$t(`CUSTOM_ROLE.PERMISSIONS.${q.toUpperCase()}`)),1))),128))])])],2)],2)]),c("td",Y6,[z.confirmed?(m(),f("span",X6,v(G.$t("AGENT_MGMT.LIST.VERIFIED")),1)):x("",!0),z.confirmed?x("",!0):(m(),f("span",q6,v(G.$t("AGENT_MGMT.LIST.VERIFICATION_PENDING")),1))]),c("td",Z6,[c("div",Q6,[O(z)?ie((m(),P(he,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:q=>D(z)},null,8,["onClick"])),[[X,G.$t("AGENT_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]):x("",!0),N(z)?ie((m(),P(he,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":o.value[z.id],onClick:q=>M(z,W)},null,8,["is-loading","onClick"])),[[X,G.$t("AGENT_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):x("",!0)])])]))),128))])])]),default:j(()=>[b(Y,{show:a.value,"onUpdate:show":V[0]||(V[0]=z=>a.value=z),"on-close":L},{default:j(()=>[b(A6,{onClose:L})]),_:1},8,["show"]),b(Y,{show:l.value,"onUpdate:show":V[1]||(V[1]=z=>l.value=z),"on-close":$},{default:j(()=>[l.value?(m(),P(D6,{key:0,id:d.value.id,name:d.value.name,type:d.value.role,email:d.value.email,availability:d.value.availability_status,"custom-role-id":d.value.custom_role_id,onClose:$},null,8,["id","name","type","email","availability","custom-role-id"])):x("",!0)]),_:1},8,["show"]),b(ee,{show:i.value,"onUpdate:show":V[2]||(V[2]=z=>i.value=z),"on-close":K,"on-confirm":H,title:G.$t("AGENT_MGMT.DELETE.CONFIRM.TITLE"),message:G.$t("AGENT_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":h.value,"confirm-text":u.value,"reject-text":p.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},eB={routes:[{path:Pt("accounts/:accountId/settings/agents"),component:da,children:[{path:"",redirect:e=>({name:"agent_list",params:e.params})},{path:"list",name:"agent_list",component:J6,meta:{featureFlag:xt.AGENT_MANAGEMENT,permissions:["administrator"]}}]}]},tB=["src","alt"],yn={__name:"Avatar",props:{src:{type:String,default:""},name:{type:String,required:!0},size:{type:Number,default:32},allowUpload:{type:Boolean,default:!1},roundedFull:{type:Boolean,default:!1},status:{type:String,default:null,validator:e=>!e||$t.AVAILABILITY_STATUS_KEYS.includes(e)},iconName:{type:String,default:null}},emits:["upload","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!0),i=U(null),l={dark:[["#4B143D","#FF8DCC"],["#3F220D","#FFA366"],["#2A2A2A","#ADB1B8"],["#023B37","#0BD8B6"],["#27264D","#A19EFF"],["#1D2E62","#9EB1FF"]],light:[["#FBDCEF","#C2298A"],["#FFE0BB","#99543A"],["#E8E8E8","#60646C"],["#CCF3EA","#008573"],["#EBEBFE","#4747C2"],["#E1E9FF","#3A5BC7"]],default:{bg:"#E8E8E8",text:"#60646C"}},r={online:"bg-n-teal-10",busy:"bg-n-amber-10",offline:"bg-n-slate-10"},d=w(()=>!n.src&&!n.name),u=w(()=>{if(!n.name)return"";const N=BN(n.name).split(/\s+/);return N.length===1?N[0].charAt(0).toUpperCase():N.slice(0,2).map(R=>R.charAt(0)).join("").toUpperCase()}),p=w(()=>{if(!n.name)return l.default;const N=n.name.length%l.light.length;return{bg:l.light[N][0],darkBg:l.dark[N][0],text:l.light[N][1],darkText:l.dark[N][1]}}),h=w(()=>({width:`${n.size}px`,height:`${n.size}px`})),g=w(()=>({...h.value,backgroundColor:!d.value&&(!n.src||!a.value)?p.value.bg:void 0,color:!d.value&&(!n.src||!a.value)?p.value.text:void 0,"--dark-bg":p.value.darkBg,"--dark-text":p.value.darkText})),_=w(()=>{const N=Math.max(n.size*.35,8);return{width:`${N}px`,height:`${N}px`,top:`${n.size-N/1.1}px`,left:`${n.size-N/1.1}px`}}),T=w(()=>({fontSize:`${n.size/1.6}px`})),S=w(()=>({fontSize:`${Math.min(n.size/2.5,24)}px`})),E=()=>{a.value=!1},y=()=>{i.value.click()},A=N=>{const[R]=N.target.files;R&&s("upload",{file:R,url:R?URL.createObjectURL(R):null})},C=()=>{i.value&&(i.value.value=null),s("delete")},O=N=>{N.stopPropagation(),C()};return lt(()=>n.src,()=>{a.value=!0}),(N,R)=>{const k=ct("tooltip");return m(),f("span",{class:"relative inline-flex group/avatar z-0",style:At(h.value)},[et(N.$slots,"badge",{size:e.size},()=>[e.status?(m(),f("div",{key:0,class:re(["absolute z-20 border rounded-full border-n-slate-3",r[e.status]]),style:At(_.value)},null,6)):x("",!0)]),e.src&&e.allowUpload?(m(),f("div",{key:0,class:"absolute z-20 flex items-center justify-center invisible w-6 h-6 transition-all duration-300 ease-in-out opacity-0 cursor-pointer outline outline-1 outline-n-container -top-2 -right-2 rounded-xl bg-n-solid-3 group-hover/avatar:visible group-hover/avatar:opacity-100",onClick:O},[b(Ht,{icon:"i-lucide-x",class:"text-n-slate-11 size-4"})])):x("",!0),c("span",{role:"img",class:re(["relative inline-flex items-center justify-center object-cover overflow-hidden font-medium",[e.roundedFull?"rounded-full":"rounded-xl",{"dark:!bg-[var(--dark-bg)] dark:!text-[var(--dark-text)]":!d.value&&(!e.src||!a.value),"bg-n-slate-3 dark:bg-n-slate-4":d.value}]]),style:At(g.value)},[e.src&&a.value?(m(),f("img",{key:0,src:e.src,alt:e.name,onError:E},null,40,tB)):(m(),f(pe,{key:1},[e.iconName?(m(),P(Ht,{key:0,icon:e.iconName,style:At(T.value)},null,8,["icon","style"])):d.value?ie((m(),P(Ht,{key:2,icon:"i-lucide-user",style:At(T.value)},null,8,["style"])),[[k,I(o)("THUMBNAIL.AUTHOR.NOT_AVAILABLE"),void 0,{"top-start":!0}]]):(m(),f("span",{key:1,style:At(S.value),class:"select-none"},v(u.value),5))],64)),e.allowUpload?(m(),f("div",{key:2,class:"absolute inset-0 z-10 flex items-center justify-center invisible w-full h-full transition-all duration-300 ease-in-out opacity-0 rounded-xl bg-n-alpha-black1 group-hover/avatar:visible group-hover/avatar:opacity-100",onClick:y},[b(Ht,{icon:"i-lucide-upload",class:"text-white",style:At({width:`${e.size/2}px`,height:`${e.size/2}px`})},null,8,["style"]),c("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",class:"hidden",onChange:A},null,544)])):x("",!0)],6)],4)}}},gl=No({name:"OnClickOutside",props:["as","options"],emits:["trigger"],setup(e,{slots:t,emit:n}){const s=U();return l$(s,o=>{n("trigger",o)},e.options),()=>{if(t.default)return kn(e.as||"div",{ref:s},t.default())}}}),wg=Jl?window:void 0;function Qi(e){var t;const n=Zn(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Kd(...e){let t,n,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,o]=e,t=wg):[t,n,s,o]=e,!t)return Ba;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(u=>u()),a.length=0},l=(u,p,h,g)=>(u.addEventListener(p,h,g),()=>u.removeEventListener(p,h,g)),r=lt(()=>[Qi(t),Zn(o)],([u,p])=>{if(i(),!u)return;const h=MT(p)?{...p}:p;a.push(...n.flatMap(g=>s.map(_=>l(u,g,_,h))))},{immediate:!0,flush:"post"}),d=()=>{r(),i()};return no(d),d}let _1=!1;function v1(e,t,n={}){const{window:s=wg,ignore:o=[],capture:a=!0,detectIframe:i=!1}=n;if(!s)return Ba;hu&&!_1&&(_1=!0,Array.from(s.document.body.children).forEach(T=>T.addEventListener("click",Ba)),s.document.documentElement.addEventListener("click",Ba));let l=!0;const r=T=>Zn(o).some(S=>{if(typeof S=="string")return Array.from(s.document.querySelectorAll(S)).some(E=>E===T.target||T.composedPath().includes(E));{const E=Qi(S);return E&&(T.target===E||T.composedPath().includes(E))}});function d(T){const S=Zn(T);return S&&S.$.subTree.shapeFlag===16}function u(T,S){const E=Zn(T),y=E.$.subTree&&E.$.subTree.children;return y==null||!Array.isArray(y)?!1:y.some(A=>A.el===S.target||S.composedPath().includes(A.el))}const p=T=>{const S=Qi(e);if(T.target!=null&&!(!(S instanceof Element)&&d(e)&&u(e,T))&&!(!S||S===T.target||T.composedPath().includes(S))){if(T.detail===0&&(l=!r(T)),!l){l=!0;return}t(T)}};let h=!1;const g=[Kd(s,"click",T=>{h||(h=!0,setTimeout(()=>{h=!1},0),p(T))},{passive:!0,capture:a}),Kd(s,"pointerdown",T=>{const S=Qi(e);l=!r(T)&&!!(S&&!T.composedPath().includes(S))},{passive:!0}),i&&Kd(s,"blur",T=>{setTimeout(()=>{var S;const E=Qi(e);((S=s.document.activeElement)==null?void 0:S.tagName)==="IFRAME"&&!(E!=null&&E.contains(s.document.activeElement))&&t(T)},0)})].filter(Boolean);return()=>g.forEach(T=>T())}const qo={mounted(e,t){const n=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=v1(e,t.value,{capture:n});else{const[s,o]=t.value;e.__onClickOutside_stop=v1(e,s,Object.assign({capture:n},o))}},unmounted(e){e.__onClickOutside_stop()}};function nB(){const e=U(!1),t=Lf();return t&&ut(()=>{e.value=!0},t),e}function sB(e){const t=nB();return w(()=>(t.value,!!e()))}function b1(e,t,n={}){const{window:s=wg,...o}=n;let a;const i=sB(()=>s&&"ResizeObserver"in s),l=()=>{a&&(a.disconnect(),a=void 0)},r=w(()=>{const p=Zn(e);return Array.isArray(p)?p.map(h=>Qi(h)):[Qi(p)]}),d=lt(r,p=>{if(l(),i.value&&s){a=new ResizeObserver(t);for(const h of p)h&&a.observe(h,o)}},{immediate:!0,flush:"post"}),u=()=>{l(),d()};return no(u),{isSupported:i,stop:u}}function Vp(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const aB={mounted(e,t){typeof t.value=="function"?b1(e,t.value):b1(e,...t.value)}};function Ey(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:Ey(n)}}function oB(e){const t=e||window.event,n=t.target;return Ey(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const Hp=new WeakMap;function iB(e,t=!1){const n=U(t);let s=null,o="";lt(n$(e),l=>{const r=Vp(Zn(l));if(r){const d=r;if(Hp.get(d)||Hp.set(d,d.style.overflow),d.style.overflow!=="hidden"&&(o=d.style.overflow),d.style.overflow==="hidden")return n.value=!0;if(n.value)return d.style.overflow="hidden"}},{immediate:!0});const a=()=>{const l=Vp(Zn(e));!l||n.value||(hu&&(s=Kd(l,"touchmove",r=>{oB(r)},{passive:!1})),l.style.overflow="hidden",n.value=!0)},i=()=>{const l=Vp(Zn(e));!l||!n.value||(hu&&(s==null||s()),l.style.overflow=o,Hp.delete(l),n.value=!1)};return no(i),w({get(){return n.value},set(l){l?a():i()}})}function lB(){let e=!1;const t=U(!1);return(n,s)=>{if(t.value=s.value,e)return;e=!0;const o=iB(n,s.value);lt(t,a=>o.value=a)}}lB();const rB=["dir"],cB={key:0,class:"flex flex-col gap-2"},dB={class:"text-base font-medium leading-6 text-n-slate-12"},uB={key:0,class:"mb-0 text-sm text-n-slate-11"},mB={key:0,class:"flex items-center justify-between w-full gap-3"},pB={__name:"Dialog",props:{type:{type:String,default:"edit",validator:e=>["alert","edit"].includes(e)},title:{type:String,default:""},description:{type:String,default:""},cancelButtonLabel:{type:String,default:""},confirmButtonLabel:{type:String,default:""},disableConfirmButton:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},overflowYAuto:{type:Boolean,default:!1},width:{type:String,default:"lg",validator:e=>["3xl","2xl","xl","lg","md","sm"].includes(e)}},emits:["confirm","close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ve("accounts/isRTL"),l=U(null),r=U(null),d=w(()=>({"3xl":"max-w-3xl","2xl":"max-w-2xl",xl:"max-w-xl",lg:"max-w-lg",md:"max-w-md",sm:"max-w-sm"})[s.width]??"max-w-md"),u=()=>{var g;(g=l.value)==null||g.showModal()},p=()=>{var g;o("close"),(g=l.value)==null||g.close()},h=()=>{o("confirm")};return t({open:u,close:p}),(g,_)=>(m(),P(Si,{to:"body"},[c("dialog",{ref_key:"dialogRef",ref:l,class:re(["w-full transition-all duration-300 ease-in-out shadow-xl rounded-xl",[d.value,e.overflowYAuto?"overflow-y-auto":"overflow-visible"]]),dir:I(i)?"rtl":"ltr",onClose:p},[b(I(gl),{onTrigger:p},{default:j(()=>[c("form",{ref_key:"dialogContentRef",ref:r,class:"flex flex-col w-full h-auto gap-6 p-6 overflow-visible text-left align-middle transition-all duration-300 ease-in-out transform bg-n-alpha-3 backdrop-blur-[100px] shadow-xl rounded-xl",onSubmit:Ke(h,["prevent"]),onClick:_[0]||(_[0]=Ke(()=>{},["stop"]))},[e.title||e.description?(m(),f("div",cB,[c("h3",dB,v(e.title),1),et(g.$slots,"description",{},()=>[e.description?(m(),f("p",uB,v(e.description),1)):x("",!0)],!0)])):x("",!0),et(g.$slots,"default",{},void 0,!0),et(g.$slots,"footer",{},()=>[e.showCancelButton||e.showConfirmButton?(m(),f("div",mB,[e.showCancelButton?(m(),P(he,{key:0,variant:"faded",color:"slate",label:e.cancelButtonLabel||I(a)("DIALOG.BUTTONS.CANCEL"),class:"w-full",type:"button",onClick:p},null,8,["label"])):x("",!0),e.showConfirmButton?(m(),P(he,{key:1,color:e.type==="edit"?"blue":"ruby",label:e.confirmButtonLabel||I(a)("DIALOG.BUTTONS.CONFIRM"),class:"w-full","is-loading":e.isLoading,disabled:e.disableConfirmButton||e.isLoading,type:"submit"},null,8,["color","label","is-loading","disabled"])):x("",!0)])):x("",!0)],!0)],544)]),_:3})],42,rB)]))}},Ss=Re(pB,[["__scopeId","data-v-5b7164d6"]]),hB={class:"relative flex flex-col min-w-0 gap-1"},fB=["for"],gB=["id","value","type","placeholder","disabled","min"],ps={__name:"Input",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},message:{type:String,default:""},disabled:{type:Boolean,default:!1},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},min:{type:String,default:""},autofocus:{type:Boolean,default:!1}},emits:["update:modelValue","blur","input","focus","enter"],setup(e,{emit:t}){const n=e,s=t,o=U(!1),a=U(null),i=w(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-green-500 dark:text-green-400";default:return"text-n-slate-11 dark:text-n-slate-11"}}),l=w(()=>{switch(n.messageType){case"error":return"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8";default:return"outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak focus:outline-n-brand dark:focus:outline-n-brand"}}),r=h=>{s("update:modelValue",h.target.value),s("input",h)},d=h=>{s("focus",h),o.value=!0},u=h=>{s("blur",h),o.value=!1},p=h=>{s("enter",h)};return ut(()=>{n.autofocus&&Zt(()=>{var h;(h=a.value)==null||h.focus()})}),(h,g)=>(m(),f("div",hB,[e.label?(m(),f("label",{key:0,for:e.id,class:"mb-0.5 text-sm font-medium text-n-slate-12"},v(e.label),9,fB)):x("",!0),et(h.$slots,"prefix"),c("input",{id:e.id,ref_key:"inputRef",ref:a,value:e.modelValue,class:re([[e.customInputClass,l.value,{error:e.messageType==="error",focus:o.value}],"block w-full reset-base text-sm h-10 !px-3 !py-2.5 !mb-0 outline outline-1 border-none border-0 outline-offset-[-1px] rounded-lg bg-n-alpha-black2 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 transition-all duration-500 ease-in-out"]),type:e.type,placeholder:e.placeholder,disabled:e.disabled,min:["date","datetime-local","time"].includes(e.type)?e.min:void 0,onInput:r,onFocus:d,onBlur:u,onKeyup:Fn(p,["enter"])},null,42,gB),e.message?(m(),f("p",{key:1,class:re(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",i.value])},v(e.message),3)):x("",!0)]))}},_B={class:"relative flex flex-col gap-1"},vB=["for"],bB=["id","value","placeholder","maxlength","disabled"],EB={key:0,class:"flex items-center justify-end h-4 mt-1 bottom-3 ltr:right-3 rtl:left-3"},TB={class:"text-xs tabular-nums text-n-slate-10"},Rg={__name:"TextArea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},maxLength:{type:Number,default:200},id:{type:String,default:""},disabled:{type:Boolean,default:!1},customTextAreaClass:{type:String,default:""},customTextAreaWrapperClass:{type:String,default:""},showCharacterCount:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},minHeight:{type:String,default:"4rem"},maxHeight:{type:String,default:"12rem"},autofocus:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},signature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=U(null),a=U(!1),i=w(()=>n.modelValue.length),l=w(()=>nl(n.signature)),r=w(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-green-500 dark:text-green-400";default:return"text-n-slate-11 dark:text-n-slate-11"}}),d=()=>{!n.autoHeight||!o.value||(o.value.style.height="auto",o.value.style.height=`${o.value.scrollHeight}px`)},u=()=>{if(!o.value)return;const S=_o(n.modelValue,l.value).trimEnd().length;o.value.focus(),o.value.setSelectionRange(S,S)},p=T=>{if(!n.allowSignature)return;const S=T?mi(n.modelValue,l.value):_o(n.modelValue,l.value);s("update:modelValue",S),Zt(()=>{d(),u()})},h=T=>{s("update:modelValue",T.target.value),n.autoHeight&&Zt(d)},g=()=>{n.disabled||(a.value=!0)},_=()=>{n.disabled||(a.value=!1)};return lt(()=>n.modelValue,()=>{n.autoHeight&&Zt(d)}),lt(()=>n.sendWithSignature,T=>{n.allowSignature&&p(T)}),ut(()=>{var T;n.autoHeight&&Zt(d),n.autofocus&&((T=o.value)==null||T.focus())}),(T,S)=>(m(),f("div",_B,[e.label?(m(),f("label",{key:0,for:e.id,class:"mb-0.5 text-sm font-medium text-n-slate-12"},v(e.label),9,vB)):x("",!0),c("div",{class:re(["flex flex-col gap-2 px-3 pt-3 pb-3 transition-all duration-500 ease-in-out border rounded-lg bg-n-alpha-black2",[e.customTextAreaWrapperClass,{"cursor-not-allowed opacity-50 !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":a.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!a.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!a.value}]])},[et(T.$slots,"default"),c("textarea",{id:e.id,ref_key:"textareaRef",ref:o,value:e.modelValue,placeholder:e.placeholder,maxlength:e.showCharacterCount?e.maxLength:void 0,class:re([[e.customTextAreaClass,{"resize-none":!e.resize}],"flex w-full reset-base text-sm p-0 !rounded-none !bg-transparent dark:!bg-transparent !border-0 !outline-0 !mb-0 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 text-n-slate-12 dark:text-n-slate-12 disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-slate-25 dark:disabled:bg-slate-900"]),style:At({minHeight:e.autoHeight?e.minHeight:void 0,maxHeight:e.autoHeight?e.maxHeight:void 0}),disabled:e.disabled,rows:"1",onInput:h,onFocus:g,onBlur:_},null,46,bB),e.showCharacterCount?(m(),f("div",EB,[c("span",TB,v(i.value)+" / "+v(e.maxLength),1)])):x("",!0)],2),e.message?(m(),f("p",{key:1,class:re(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",r.value])},v(e.message),3)):x("",!0)]))}},yB={class:"mb-2 flex flex-col items-start"},AB={class:"mb-2 text-sm font-medium text-n-slate-12"},SB={class:"flex items-center justify-end w-full gap-2 px-0 py-2"},IB={__name:"AgentBotModal",props:{type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)},selectedBot:{type:Object,default:()=>({})}},setup(e,{expose:t}){const n=e,s={CREATE:"create"},o=Ot(),{t:a}=He(),i=U(null),l=Ve("agentBots/getUIFlags"),r=ks({botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),d=Lt({botName:{required:Um.withMessage(()=>a("AGENT_BOTS.FORM.ERRORS.NAME"),it)},botUrl:{required:Um.withMessage(()=>a("AGENT_BOTS.FORM.ERRORS.URL"),it),url:Um.withMessage(()=>a("AGENT_BOTS.FORM.ERRORS.VALID_URL"),Oc)}},r),u=w(()=>n.type===s.CREATE?l.value.isCreating:l.value.isUpdating),p=w(()=>n.type===s.CREATE?a("AGENT_BOTS.ADD.TITLE"):a("AGENT_BOTS.EDIT.TITLE")),h=w(()=>n.type===s.CREATE?a("AGENT_BOTS.FORM.CREATE"):a("AGENT_BOTS.FORM.UPDATE")),g=w(()=>{var C;return d.value.botName.$error?(C=d.value.botName.$errors[0])==null?void 0:C.$message:""}),_=w(()=>{var C;return d.value.botUrl.$error?(C=d.value.botUrl.$errors[0])==null?void 0:C.$message:""}),T=()=>{Object.assign(r,{botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),d.value.$reset()},S=({file:C,url:O})=>{r.botAvatar=C,r.botAvatarUrl=O},E=async()=>{var C;if((C=n.selectedBot)!=null&&C.id)try{await o.dispatch("agentBots/deleteAgentBotAvatar",n.selectedBot.id),r.botAvatar=null,r.botAvatarUrl="",Te(a("AGENT_BOTS.AVATAR.SUCCESS_DELETE"))}catch{Te(a("AGENT_BOTS.AVATAR.ERROR_DELETE"))}else r.botAvatar=null,r.botAvatarUrl=""},y=async()=>{if(d.value.$touch(),d.value.$invalid)return;const C={name:r.botName,description:r.botDescription,outgoing_url:r.botUrl,bot_type:"webhook",avatar:r.botAvatar},O=n.type===s.CREATE;try{const N=O?C:{id:n.selectedBot.id,data:C};await o.dispatch(`agentBots/${O?"create":"update"}`,N);const R=a(O?"AGENT_BOTS.ADD.API.SUCCESS_MESSAGE":"AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE");Te(R),i.value.close(),T()}catch{const R=a(O?"AGENT_BOTS.ADD.API.ERROR_MESSAGE":"AGENT_BOTS.EDIT.API.ERROR_MESSAGE");Te(R)}};return lt(()=>n.selectedBot,()=>{if(n.selectedBot&&Object.keys(n.selectedBot).length){const{name:C,description:O,outgoing_url:N,thumbnail:R,bot_config:k}=n.selectedBot;r.botName=C||"",r.botDescription=O||"",r.botUrl=N||(k==null?void 0:k.webhook_url)||"",r.botAvatarUrl=R||""}else T()},{immediate:!0,deep:!0}),t({dialogRef:i}),(C,O)=>(m(),P(Ss,{ref_key:"dialogRef",ref:i,type:"edit",title:p.value,"show-cancel-button":!1,"show-confirm-button":!1,onClose:O[6]||(O[6]=N=>I(d).$reset())},{default:j(()=>[c("form",{class:"flex flex-col gap-4",onSubmit:Ke(y,["prevent"])},[c("div",yB,[c("span",AB,v(C.$t("AGENT_BOTS.FORM.AVATAR.LABEL")),1),b(yn,{src:r.botAvatarUrl,name:r.botName,size:68,"allow-upload":"",onUpload:S,onDelete:E},null,8,["src","name"])]),b(ps,{modelValue:r.botName,"onUpdate:modelValue":O[0]||(O[0]=N=>r.botName=N),label:C.$t("AGENT_BOTS.FORM.NAME.LABEL"),placeholder:C.$t("AGENT_BOTS.FORM.NAME.PLACEHOLDER"),message:g.value,"message-type":g.value?"error":"info",onBlur:O[1]||(O[1]=N=>I(d).botName.$touch())},null,8,["modelValue","label","placeholder","message","message-type"]),b(Rg,{modelValue:r.botDescription,"onUpdate:modelValue":O[2]||(O[2]=N=>r.botDescription=N),label:C.$t("AGENT_BOTS.FORM.DESCRIPTION.LABEL"),placeholder:C.$t("AGENT_BOTS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),b(ps,{modelValue:r.botUrl,"onUpdate:modelValue":O[3]||(O[3]=N=>r.botUrl=N),label:C.$t("AGENT_BOTS.FORM.WEBHOOK_URL.LABEL"),placeholder:C.$t("AGENT_BOTS.FORM.WEBHOOK_URL.PLACEHOLDER"),message:_.value,"message-type":_.value?"error":"info",onBlur:O[4]||(O[4]=N=>I(d).botUrl.$touch())},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",SB,[b(he,{faded:"",slate:"",type:"reset",label:C.$t("AGENT_BOTS.FORM.CANCEL"),onClick:O[5]||(O[5]=N=>i.value.close())},null,8,["label"]),b(he,{type:"submit","data-testid":"label-submit",label:h.value,"is-loading":u.value,disabled:I(d).$invalid},null,8,["label","is-loading","disabled"])])],32)]),_:1},8,["title"]))}},CB={class:"min-w-full overflow-x-auto divide-y divide-n-strong"},NB={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},OB={class:"py-4 ltr:pr-4 rtl:pl-4"},xB={class:"flex flex-row items-center gap-4"},wB={class:"block font-medium break-words"},RB={key:0,class:"text-xs text-n-slate-12 bg-n-blue-5 inline-block rounded-md py-0.5 px-1 ltr:ml-1 rtl:mr-1"},$B={class:"text-sm text-n-slate-11"},MB={class:"py-4 ltr:pr-4 rtl:pl-4 text-sm"},kB={class:"py-4 min-w-xs"},LB={class:"flex gap-1 justify-end"},DB={__name:"Index",setup(e){const t={CREATE:"create",EDIT:"edit"},n=Ot(),{t:s}=He(),o=Ve("agentBots/getBots"),a=Ve("agentBots/getUIFlags"),i=U({}),l=U({}),r=U(t.CREATE),d=U(null),u=U(null),p=w(()=>[s("AGENT_BOTS.LIST.TABLE_HEADER.DETAILS"),s("AGENT_BOTS.LIST.TABLE_HEADER.URL")]),h=w(()=>{var y;return((y=i.value)==null?void 0:y.name)||""}),g=()=>{r.value=t.CREATE,i.value={},d.value.dialogRef.open()},_=y=>{r.value=t.EDIT,i.value=y,d.value.dialogRef.open()},T=y=>{i.value=y,u.value.open()},S=async y=>{try{await n.dispatch("agentBots/delete",y),Te(s("AGENT_BOTS.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(s("AGENT_BOTS.DELETE.API.ERROR_MESSAGE"))}finally{l.value[y]=!1,i.value={}}},E=()=>{l.value[i.value.id]=!0,S(i.value.id),u.value.close()};return ut(()=>{n.dispatch("agentBots/get")}),(y,A)=>{const C=ct("tooltip");return m(),P(Ha,{"is-loading":I(a).isFetching,"loading-message":I(s)("AGENT_BOTS.LIST.LOADING"),"no-records-found":!I(o).length,"no-records-message":I(s)("AGENT_BOTS.LIST.404")},{header:j(()=>[b(Ds,{title:I(s)("AGENT_BOTS.HEADER"),description:I(s)("AGENT_BOTS.DESCRIPTION"),"link-text":I(s)("AGENT_BOTS.LEARN_MORE"),"feature-name":"agent_bots"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:y.$t("AGENT_BOTS.ADD.TITLE"),onClick:g},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:j(()=>[c("table",CB,[c("thead",null,[(m(!0),f(pe,null,ye(p.value,O=>(m(),f("th",{key:O,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},v(O),1))),128))]),c("tbody",NB,[(m(!0),f(pe,null,ye(I(o),O=>{var N;return m(),f("tr",{key:O.id},[c("td",OB,[c("div",xB,[b(yn,{name:O.name,src:O.thumbnail,size:40,"rounded-full":""},null,8,["name","src"]),c("div",null,[c("span",wB,[be(v(O.name)+" ",1),O.system_bot?(m(),f("span",RB,v(y.$t("AGENT_BOTS.GLOBAL_BOT_BADGE")),1)):x("",!0)]),c("span",$B,v(O.description),1)])])]),c("td",MB,v(O.outgoing_url||((N=O.bot_config)==null?void 0:N.webhook_url)),1),c("td",kB,[c("div",LB,[O.system_bot?x("",!0):ie((m(),P(he,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":l.value[O.id],onClick:R=>_(O)},null,8,["is-loading","onClick"])),[[C,I(s)("AGENT_BOTS.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),O.system_bot?x("",!0):ie((m(),P(he,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":l.value[O.id],onClick:R=>T(O)},null,8,["is-loading","onClick"])),[[C,I(s)("AGENT_BOTS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}),128))])])]),default:j(()=>[b(IB,{ref_key:"agentBotModalRef",ref:d,type:r.value,"selected-bot":i.value},null,8,["type","selected-bot"]),b(Ss,{ref_key:"agentBotDeleteDialogRef",ref:u,type:"alert",title:I(s)("AGENT_BOTS.DELETE.CONFIRM.TITLE"),description:I(s)("AGENT_BOTS.DELETE.CONFIRM.MESSAGE",{name:h.value}),"is-loading":I(a).isDeleting,"confirm-button-label":I(s)("AGENT_BOTS.DELETE.CONFIRM.YES"),"cancel-button-label":I(s)("AGENT_BOTS.DELETE.CONFIRM.NO"),onConfirm:E},null,8,["title","description","is-loading","confirm-button-label","cancel-button-label"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},PB={routes:[{path:Pt("accounts/:accountId/settings/agent-bots"),meta:{permissions:["administrator"]},component:da,children:[{path:"",name:"agent_bots",component:DB,meta:{featureFlag:xt.AGENT_BOTS,permissions:["administrator"]}}]}]},BB=[{id:0,option:"Conversation"},{id:1,option:"Contact"}],Ty=[{id:0,option:"Text"},{id:1,option:"Number"},{id:4,option:"Link"},{id:5,option:"Date"},{id:6,option:"List"},{id:7,option:"Checkbox"}],UB={components:{NextButton:he},props:{onClose:{type:Function,default:()=>{}},selectedAttributeModelTab:{type:Number,default:0}},setup(){return{v$:Lt()}},data(){return{displayName:"",description:"",attributeModel:this.selectedAttributeModelTab||0,attributeType:0,attributeKey:"",regexPattern:null,regexCue:null,regexEnabled:!1,models:BB,types:Ty,values:[],options:[],show:!0,isTouched:!1}},computed:{...gt({uiFlags:"getUIFlags"}),isMultiselectInvalid(){return this.isTouched&&this.values.length===0},isTagInputInvalid(){return this.isAttributeTypeList&&this.values.length===0},attributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.displayName.$invalid||this.v$.description.$invalid||this.uiFlags.isCreating||this.isTagInputInvalid},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},validations:{displayName:{required:it,minLength:Nn(1)},description:{required:it},attributeModel:{required:it},attributeType:{required:it},attributeKey:{required:it,isKey(e){return!(e.indexOf(" ")>=0)}}},methods:{addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},onTouch(){this.isTouched=!0},onDisplayNameChange(){this.attributeKey=WN(this.displayName)},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled},async addAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/create",{attribute_display_name:this.displayName,attribute_description:this.description,attribute_model:this.attributeModel,attribute_display_type:this.attributeType,attribute_key:this.attributeKey,attribute_values:this.attributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.ADD.API.ERROR_MESSAGE")}finally{Te(this.alertMessage)}}}}},GB={class:"flex flex-col h-auto overflow-auto"},VB={class:"w-full"},HB=["value"],KB={key:0,class:"message"},zB=["placeholder"],WB={key:0,class:"message"},jB=["value"],YB={key:0,class:"message"},XB={key:0,class:"multiselect--wrap"},qB={key:1},ZB={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function QB(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("multiselect"),d=F("NextButton"),u=F("woot-modal");return m(),P(u,{show:o.show,"onUpdate:show":t[12]||(t[12]=p=>o.show=p),"on-close":n.onClose},{default:j(()=>[c("div",GB,[b(i,{"header-title":e.$t("ATTRIBUTES_MGMT.ADD.TITLE")},null,8,["header-title"]),c("form",{class:"flex w-full",onSubmit:t[11]||(t[11]=Ke((...p)=>a.addAttributes&&a.addAttributes(...p),["prevent"]))},[c("div",VB,[c("label",{class:re({error:s.v$.attributeModel.$error})},[be(v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.attributeModel=p)},[(m(!0),f(pe,null,ye(o.models,p=>(m(),f("option",{key:p.id,value:p.id},v(p.option),9,HB))),128))],512),[[Mt,o.attributeModel]]),s.v$.attributeModel.$error?(m(),f("span",KB,v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.ERROR")),1)):x("",!0)],2),b(l,{modelValue:o.displayName,"onUpdate:modelValue":[t[1]||(t[1]=p=>o.displayName=p),a.onDisplayNameChange],label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onUpdate:modelValue","onBlur"]),b(l,{modelValue:o.attributeKey,"onUpdate:modelValue":t[2]||(t[2]=p=>o.attributeKey=p),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:re({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?a.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),c("label",{class:re({error:s.v$.description.$error})},[be(v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),ie(c("textarea",{"onUpdate:modelValue":t[3]||(t[3]=p=>o.description=p),rows:"3",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[4]||(t[4]=(...p)=>s.v$.description.$touch&&s.v$.description.$touch(...p))},null,40,zB),[[at,o.description]]),s.v$.description.$error?(m(),f("span",WB,v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):x("",!0)],2),c("label",{class:re({error:s.v$.attributeType.$error})},[be(v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[5]||(t[5]=p=>o.attributeType=p)},[(m(!0),f(pe,null,ye(o.types,p=>(m(),f("option",{key:p.id,value:p.id},v(p.option),9,jB))),128))],512),[[Mt,o.attributeType]]),s.v$.attributeType.$error?(m(),f("span",YB,v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):x("",!0)],2),a.isAttributeTypeList?(m(),f("div",XB,[c("label",null,v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.LABEL")),1),b(r,{ref:"tagInput",modelValue:o.values,"onUpdate:modelValue":t[6]||(t[6]=p=>o.values=p),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:re({invalid:a.isMultiselectInvalid}),options:o.options,multiple:"",taggable:"",onClose:a.onTouch,onTag:a.addTagValue},null,8,["modelValue","placeholder","class","options","onClose","onTag"]),ie(c("label",{class:"error-message"},v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[ln,a.isMultiselectInvalid]])])):x("",!0),a.isAttributeTypeText?(m(),f("div",qB,[ie(c("input",{"onUpdate:modelValue":t[7]||(t[7]=p=>o.regexEnabled=p),type:"checkbox",onInput:t[8]||(t[8]=(...p)=>a.toggleRegexEnabled&&a.toggleRegexEnabled(...p))},null,544),[[Kt,o.regexEnabled]]),be(" "+v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):x("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(m(),P(l,{key:2,modelValue:o.regexPattern,"onUpdate:modelValue":t[9]||(t[9]=p=>o.regexPattern=p),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(m(),P(l,{key:3,modelValue:o.regexCue,"onUpdate:modelValue":t[10]||(t[10]=p=>o.regexCue=p),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0),c("div",ZB,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ke(n.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.ADD.SUBMIT"),disabled:a.isButtonDisabled},null,8,["label","disabled"])])])],32)])]),_:1},8,["show","on-close"])}const JB=Re(UB,[["render",QB],["__scopeId","data-v-316701fa"]]),e9={components:{NextButton:he},props:{selectedAttribute:{type:Object,default:()=>{}},isUpdating:{type:Boolean,default:!1}},emits:["onClose"],setup(){return{v$:Lt()}},data(){return{displayName:"",description:"",attributeType:0,regexPattern:null,regexCue:null,regexEnabled:!1,types:Ty,show:!0,attributeKey:"",values:[],options:[],isTouched:!0}},validations:{displayName:{required:it},attributeType:{required:it},description:{required:it,minLength:Nn(1)},attributeKey:{required:it,isKey(e){return!(e.indexOf(" ")>=0)}}},computed:{setAttributeListValue(){return this.selectedAttribute.attribute_values.map(e=>({name:e}))},updatedAttributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.description.$invalid||this.isMultiselectInvalid},isMultiselectInvalid(){return this.isAttributeTypeList&&this.isTouched&&this.values.length===0},pageTitle(){return`${this.$t("ATTRIBUTES_MGMT.EDIT.TITLE")} - ${this.selectedAttribute.attribute_display_name}`},selectedAttributeType(){return this.types.find(e=>e.option.toLowerCase()===this.selectedAttribute.attribute_display_type).id},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},setFormValues(){const e=this.selectedAttribute.regex_pattern?Yf(this.selectedAttribute.regex_pattern).source:null;this.displayName=this.selectedAttribute.attribute_display_name,this.description=this.selectedAttribute.attribute_description,this.attributeType=this.selectedAttributeType,this.attributeKey=this.selectedAttribute.attribute_key,this.regexPattern=e,this.regexCue=this.selectedAttribute.regex_cue,this.regexEnabled=e!=null,this.values=this.setAttributeListValue},async editAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/update",{id:this.selectedAttribute.id,attribute_description:this.description,attribute_display_name:this.displayName,attribute_values:this.updatedAttributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.EDIT.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.EDIT.API.ERROR_MESSAGE")}finally{Te(this.alertMessage)}}},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled}}},t9={class:"flex flex-col h-auto overflow-auto"},n9={class:"w-full"},s9=["placeholder"],a9={key:0,class:"message"},o9=["value"],i9={key:0,class:"message"},l9={key:0,class:"multiselect--wrap"},r9={key:1},c9={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function d9(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("multiselect"),d=F("NextButton");return m(),f("div",t9,[b(i,{"header-title":a.pageTitle},null,8,["header-title"]),c("form",{class:"flex flex-col w-full",onSubmit:t[10]||(t[10]=Ke((...u)=>a.editAttributes&&a.editAttributes(...u),["prevent"]))},[c("div",n9,[b(l,{modelValue:o.displayName,"onUpdate:modelValue":t[0]||(t[0]=u=>o.displayName=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),b(l,{modelValue:o.attributeKey,"onUpdate:modelValue":t[1]||(t[1]=u=>o.attributeKey=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:re({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?a.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),readonly:"",onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),c("label",{class:re({error:s.v$.description.$error})},[be(v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),ie(c("textarea",{"onUpdate:modelValue":t[2]||(t[2]=u=>o.description=u),rows:"5",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...u)=>s.v$.description.$touch&&s.v$.description.$touch(...u))},null,40,s9),[[at,o.description]]),s.v$.description.$error?(m(),f("span",a9,v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):x("",!0)],2),c("label",{class:re({error:s.v$.attributeType.$error})},[be(v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>o.attributeType=u),disabled:""},[(m(!0),f(pe,null,ye(o.types,u=>(m(),f("option",{key:u.id,value:u.id},v(u.option),9,o9))),128))],512),[[Mt,o.attributeType]]),s.v$.attributeType.$error?(m(),f("span",i9,v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):x("",!0)],2),a.isAttributeTypeList?(m(),f("div",l9,[c("label",null,v(e.$t("ATTRIBUTES_MGMT.EDIT.TYPE.LIST.LABEL")),1),b(r,{ref:"tagInput",modelValue:o.values,"onUpdate:modelValue":t[5]||(t[5]=u=>o.values=u),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:re({invalid:a.isMultiselectInvalid}),options:o.options,multiple:"",taggable:"",onTag:a.addTagValue},null,8,["modelValue","placeholder","class","options","onTag"]),ie(c("label",{class:"error-message"},v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[ln,a.isMultiselectInvalid]])])):x("",!0),a.isAttributeTypeText?(m(),f("div",r9,[ie(c("input",{"onUpdate:modelValue":t[6]||(t[6]=u=>o.regexEnabled=u),type:"checkbox",onInput:t[7]||(t[7]=(...u)=>a.toggleRegexEnabled&&a.toggleRegexEnabled(...u))},null,544),[[Kt,o.regexEnabled]]),be(" "+v(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):x("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(m(),P(l,{key:2,modelValue:o.regexPattern,"onUpdate:modelValue":t[8]||(t[8]=u=>o.regexPattern=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(m(),P(l,{key:3,modelValue:o.regexCue,"onUpdate:modelValue":t[9]||(t[9]=u=>o.regexCue=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0)]),c("div",c9,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.EDIT.UPDATE_BUTTON_TEXT"),"is-loading":n.isUpdating,disabled:a.isButtonDisabled},null,8,["label","is-loading","disabled"])])],32)])}const u9=Re(e9,[["render",d9],["__scopeId","data-v-29ada335"]]),m9={class:"flex flex-col"},p9={class:"min-w-full overflow-x-auto"},h9={class:"divide-y divide-slate-25 dark:divide-slate-800 flex-1 text-slate-700 dark:text-slate-100"},f9={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},g9={class:"py-4 ltr:pr-4 rtl:pl-4"},_9={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},v9={class:"py-4 ltr:pr-4 rtl:pl-4 attribute-key overflow-hidden whitespace-nowrap text-ellipsis"},b9={class:"py-4 min-w-xs"},E9={class:"flex gap-1 justify-end"},T9={__name:"CustomAttribute",props:{attributeModel:{type:String,default:"conversation_attribute"}},setup(e){const t=e,{t:n}=He(),s=U(!1),o=U(!1),a=U({}),i=vn(),l=Ot(),r=w(()=>i["attributes/getAttributesByModel"].value(t.attributeModel)),d=w(()=>i["attributes/getUIFlags"].value),u=w(()=>a.value.attribute_display_name),p=w(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.YES")} ${u.value}`),h=w(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.NO")),g=w(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.TITLE",{attributeName:u.value})),_=w(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{attributeName:u.value})}`),T=async({id:N})=>{var R;try{await l.dispatch("attributes/delete",N),Te(n("ATTRIBUTES_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(k){const L=((R=k==null?void 0:k.response)==null?void 0:R.message)||n("ATTRIBUTES_MGMT.DELETE.API.ERROR_MESSAGE");Te(L)}},S=N=>{s.value=!0,a.value=N},E=()=>{s.value=!1},y=()=>{o.value=!1,a.value={}},A=()=>{T(a.value),y()},C=N=>{o.value=!0,a.value=N},O=w(()=>[n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.NAME"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.TYPE"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.KEY")]);return(N,R)=>{const k=F("woot-modal"),L=F("woot-confirm-delete-modal"),D=ct("tooltip");return m(),f("div",m9,[c("table",p9,[c("thead",null,[(m(!0),f(pe,null,ye(O.value,$=>(m(),f("th",{key:$,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},v($),1))),128))]),c("tbody",h9,[(m(!0),f(pe,null,ye(r.value,$=>(m(),f("tr",{key:$.attribute_key},[c("td",f9,v($.attribute_display_name),1),c("td",g9,v($.attribute_description),1),c("td",_9,v($.attribute_display_type),1),c("td",v9,v($.attribute_key),1),c("td",b9,[c("div",E9,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:M=>S($)},null,8,["onClick"]),[[D,N.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.EDIT"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:M=>C($)},null,8,["onClick"]),[[D,N.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.DELETE"),void 0,{top:!0}]])])])]))),128))])]),b(k,{show:s.value,"onUpdate:show":R[0]||(R[0]=$=>s.value=$),"on-close":E},{default:j(()=>[b(u9,{"selected-attribute":a.value,"is-updating":d.value.isUpdating,onOnClose:E},null,8,["selected-attribute","is-updating"])]),_:1},8,["show"]),o.value?(m(),P(L,{key:0,show:o.value,"onUpdate:show":R[1]||(R[1]=$=>o.value=$),title:g.value,message:N.$t("ATTRIBUTES_MGMT.DELETE.CONFIRM.MESSAGE"),"confirm-text":p.value,"reject-text":h.value,"confirm-value":a.value.attribute_display_name,"confirm-place-holder-text":_.value,onOnConfirm:A,onOnClose:y},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):x("",!0)])}}},y9=Re(T9,[["__scopeId","data-v-257c5f0b"]]),A9={__name:"Index",setup(e){const{t}=He(),n=vn(),s=Ot(),o=U(!1),a=U(0),i=w(()=>n["attributes/getUIFlags"].value),l=()=>{o.value=!0},r=()=>{o.value=!1},d=w(()=>[{key:0,name:t("ATTRIBUTES_MGMT.TABS.CONVERSATION")},{key:1,name:t("ATTRIBUTES_MGMT.TABS.CONTACT")}]);ut(()=>{s.dispatch("attributes/get")});const u=w(()=>a.value?"contact_attribute":"conversation_attribute"),p=w(()=>n["attributes/getAttributesByModel"].value(u.value)),h=g=>{a.value=g};return(g,_)=>{const T=F("woot-tabs-item"),S=F("woot-tabs");return m(),P(Ha,{"is-loading":i.value.isFetching,"loading-message":g.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!p.value.length,"no-records-message":g.$t("ATTRIBUTES_MGMT.LIST.EMPTY_RESULT.404")},{header:j(()=>[b(Ds,{title:g.$t("ATTRIBUTES_MGMT.HEADER"),description:g.$t("ATTRIBUTES_MGMT.DESCRIPTION"),"link-text":g.$t("ATTRIBUTES_MGMT.LEARN_MORE"),"feature-name":"custom_attributes"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:g.$t("ATTRIBUTES_MGMT.HEADER_BTN_TXT"),onClick:l},null,8,["label"])]),_:1},8,["title","description","link-text"])]),preBody:j(()=>[b(S,{class:"font-medium [&_.tabs]:p-0 mb-4",index:a.value,onChange:h},{default:j(()=>[(m(!0),f(pe,null,ye(d.value,(E,y)=>(m(),P(T,{key:E.key,index:y,name:E.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index"])]),body:j(()=>[(m(),P(y9,{key:u.value,"attribute-model":u.value},null,8,["attribute-model"]))]),default:j(()=>[o.value?(m(),P(JB,{key:0,show:o.value,"onUpdate:show":_[0]||(_[0]=E=>o.value=E),"on-close":r,"selected-attribute-model-tab":a.value},null,8,["show","selected-attribute-model-tab"])):x("",!0)]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},S9={routes:[{path:Pt("accounts/:accountId/settings/custom-attributes"),component:da,children:[{path:"",redirect:e=>({name:"attributes_list",params:e.params})},{path:"list",name:"attributes_list",component:A9,meta:{featureFlag:xt.CUSTOM_ATTRIBUTES,permissions:["administrator"]}}]}]},I9={name:"FilterInput",components:{NextButton:he},props:{modelValue:{type:Object,default:()=>{}},filterAttributes:{type:Array,default:()=>[]},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:()=>[]},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},emits:["update:modelValue","removeFilter","resetFilter"],computed:{attributeKey:{get(){return this.modelValue?this.modelValue.attribute_key:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,attribute_key:e})}},filterOperator:{get(){return this.modelValue?this.modelValue.filter_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,filter_operator:e})}},values:{get(){return this.modelValue?this.modelValue.values:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,values:e})}},query_operator:{get(){return this.modelValue?this.modelValue.query_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,query_operator:e})}},custom_attribute_type:{get(){return this.customAttributeType?this.customAttributeType:""},set(){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,custom_attribute_type:this.customAttributeType})}}},watch:{customAttributeType:{handler(e){e==="conversation_attribute"||e==="contact_attribute"?this.modelValue.custom_attribute_type=this.customAttributeType:this.modelValue.custom_attribute_type=""},immediate:!0}},methods:{removeFilter(){this.$emit("removeFilter")},resetFilter(){this.$emit("resetFilter")},getInputErrorClass(e){return e?"bg-n-ruby-8/20 border-n-ruby-5 dark:border-n-ruby-5":"bg-n-background border-n-weak dark:border-n-weak"}}},C9={class:"flex gap-1"},N9=["label"],O9=["value"],x9=["value","disabled"],w9=["value"],R9={key:2,class:"flex-grow mr-1 filter__answer--wrap"},$9={key:0,class:"multiselect-wrap--small"},M9={key:1,class:"multiselect-wrap--small"},k9={key:2,class:"multiselect-wrap--small"},L9=["placeholder"],D9={key:0,class:"filter-error"},P9={key:0,class:"flex items-center justify-center relative my-2.5 mx-0"},B9={value:"and"},F9={value:"or"};function U9(e,t,n,s,o,a){const i=F("multiselect"),l=F("NextButton");return m(),f("div",null,[c("div",{class:re(["p-2 border border-solid rounded-lg",a.getInputErrorClass(n.errorMessage)])},[c("div",C9,[n.groupedFilters?ie((m(),f("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=r=>a.attributeKey=r),class:"max-w-[30%] mb-0 mr-1",onChange:t[1]||(t[1]=r=>a.resetFilter())},[(m(!0),f(pe,null,ye(n.filterGroups,(r,d)=>(m(),f("optgroup",{key:d,label:r.name},[(m(!0),f(pe,null,ye(r.attributes,u=>(m(),f("option",{key:u.key,value:u.key,selected:!0},v(u.name),9,O9))),128))],8,N9))),128))],544)),[[Mt,a.attributeKey]]):ie((m(),f("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=r=>a.attributeKey=r),class:"max-w-[30%] mb-0 mr-1",onChange:t[3]||(t[3]=r=>a.resetFilter())},[(m(!0),f(pe,null,ye(n.filterAttributes,r=>(m(),f("option",{key:r.key,value:r.key,disabled:r.disabled},v(r.name),9,x9))),128))],544)),[[Mt,a.attributeKey]]),ie(c("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.filterOperator=r),class:"max-w-[20%] mb-0 mr-1"},[(m(!0),f(pe,null,ye(n.operators,(r,d)=>(m(),f("option",{key:d,value:r.value},v(e.$t(`FILTER.OPERATOR_LABELS.${r.value}`)),9,w9))),128))],512),[[Mt,a.filterOperator]]),n.showUserInput?(m(),f("div",R9,[n.inputType==="multi_select"?(m(),f("div",$9,[b(i,{modelValue:a.values,"onUpdate:modelValue":t[5]||(t[5]=r=>a.values=r),"track-by":"id",label:"name",placeholder:"Select",multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1},null,8,["modelValue","select-label","options"])])):n.inputType==="search_select"?(m(),f("div",M9,[b(i,{modelValue:a.values,"onUpdate:modelValue":t[6]||(t[6]=r=>a.values=r),"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","select-label","options"])])):n.inputType==="date"?(m(),f("div",k9,[ie(c("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>a.values=r),type:"date",editable:!1,class:"!mb-0 datepicker"},null,512),[[at,a.values]])])):ie((m(),f("input",{key:3,"onUpdate:modelValue":t[8]||(t[8]=r=>a.values=r),type:"text",class:"!mb-0",placeholder:e.$t("FILTER.INPUT_PLACEHOLDER")},null,8,L9)),[[at,a.values]])])):x("",!0),b(l,{icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:a.removeFilter},null,8,["onClick"])]),n.errorMessage?(m(),f("p",D9,v(n.errorMessage),1)):x("",!0)],2),n.showQueryOperator?(m(),f("div",P9,[t[10]||(t[10]=c("hr",{class:"absolute w-full border-b border-solid border-slate-75 dark:border-slate-800"},null,-1)),ie(c("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>a.query_operator=r),class:"relative w-auto mb-0 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600"},[c("option",B9,v(e.$t("FILTER.QUERY_DROPDOWN_LABELS.AND")),1),c("option",F9,v(e.$t("FILTER.QUERY_DROPDOWN_LABELS.OR")),1)],512),[[Mt,a.query_operator]])])):x("",!0)])}const yy=Re(I9,[["render",U9],["__scopeId","data-v-9c4fdf74"]]),G9={props:{teams:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],data(){return{selectedTeams:[],message:""}},mounted(){const{team_ids:e}=this.modelValue;this.selectedTeams=e,this.message=this.modelValue.message},methods:{updateValue(){this.$emit("update:modelValue",{team_ids:this.selectedTeams.map(e=>e.id),message:this.message})}}},V9={class:"multiselect-wrap--small flex flex-col gap-1 mt-1"},H9=["placeholder"];function K9(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",null,[c("div",V9,[b(i,{modelValue:o.selectedTeams,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.selectedTeams=l),a.updateValue],"track-by":"id",label:"name",placeholder:e.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.teams,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"]),ie(c("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.message=l),rows:"4",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),onInput:t[2]||(t[2]=(...l)=>a.updateValue&&a.updateValue(...l))},null,40,H9),[[at,o.message]])])])}const z9=Re(G9,[["render",K9],["__scopeId","data-v-527cfb42"]]),W9={components:{Spinner:Os},props:{initialFileName:{type:String,default:""}},emits:["update:modelValue"],data(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{async onChangeFile(e){this.uploadState="processing",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING");try{const t=e.target.files[0],n=await this.$store.dispatch("automations/uploadAttachment",t);this.$emit("update:modelValue",[n]),this.uploadState="uploaded",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED")}catch{this.uploadState="failed",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),Te(this.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"))}}}},j9={class:"file-button"};function Y9(e,t,n,s,o,a){const i=F("Spinner"),l=F("fluent-icon");return m(),f("label",{class:re(["input-wrapper",o.uploadState])},[o.uploadState!=="processing"?(m(),f("input",{key:0,type:"file",name:"attachment",class:re(o.uploadState==="processing"?"disabled":""),onChange:t[0]||(t[0]=(...r)=>a.onChangeFile&&a.onChangeFile(...r))},null,34)):x("",!0),o.uploadState==="processing"?(m(),P(i,{key:1})):x("",!0),o.uploadState==="idle"?(m(),P(l,{key:2,icon:"file-upload"})):x("",!0),o.uploadState==="uploaded"?(m(),P(l,{key:3,icon:"checkmark-circle",type:"outline",class:"success-icon"})):x("",!0),o.uploadState==="failed"?(m(),P(l,{key:4,icon:"dismiss-circle",type:"outline",class:"error-icon"})):x("",!0),c("p",j9,v(o.label),1)],2)}const X9=Re(W9,[["render",Y9],["__scopeId","data-v-9923a030"]]),q9={class:"mb-0 vertical dropdown menu"},Z9=["onClick"],Q9={__name:"MentionBox",props:{items:{type:Array,default:()=>[]},type:{type:String,default:"canned"}},emits:["mentionSelect"],setup(e,{emit:t}){const n=e,s=t,o=U(null),a=U(0),i=()=>{const p=o.value,h=p.querySelector(`#mention-item-${a.value}`);if(h){const g=h.offsetTop,_=g+h.offsetHeight,T=p.scrollTop,S=T+p.offsetHeight;g<T?p.scrollTop=g:_+34>S&&(p.scrollTop=_-p.offsetHeight+34)}},l=()=>{s("mentionSelect",n.items[a.value])};kE({items:w(()=>n.items),onSelect:l,adjustScroll:i,selectedIndex:a}),lt(()=>n.items,p=>{p.length<a.value+1&&(a.value=0)}),lt(a,i);const r=p=>{a.value=p},d=p=>{a.value=p,l()},u=(p={})=>n.type==="variable"?`{{${p.label}}}`:`/${p.label}`;return(p,h)=>{const g=F("woot-dropdown-item");return m(),f("div",{ref_key:"mentionsListContainerRef",ref:o,class:"bg-n-solid-1 p-1 rounded-xl overflow-auto absolute w-full z-20 shadow-md left-0 bottom-full max-h-[9.75rem] border border-solid border-n-strong mention--box"},[c("ul",q9,[(m(!0),f(pe,null,ye(e.items,(_,T)=>(m(),P(g,{id:`mention-item-${T}`,key:_.key,class:"!mb-1",onMouseover:S=>r(T)},{default:j(()=>[c("button",{class:re(["flex rounded-lg group flex-col gap-0.5 overflow-hidden cursor-pointer items-start px-3 py-2 justify-center w-full h-full text-left hover:bg-n-alpha-black2",{"bg-n-alpha-black2":T===a.value}]),onClick:S=>d(T)},[et(p.$slots,"default",{item:_,index:T,selected:T===a.value},()=>[c("p",{class:re(["max-w-full min-w-0 mb-0 overflow-hidden text-sm font-medium text-n-slate-11 group-hover:text-n-slate-11 text-ellipsis whitespace-nowrap",{"text-n-slate-12":T===a.value}])},v(_.description),3),c("p",{class:re(["max-w-full min-w-0 mb-0 overflow-hidden text-xs text-slate-500 dark:text-slate-300 group-hover:text-n-slate-11 text-ellipsis whitespace-nowrap",{"text-n-slate-12":T===a.value}])},v(u(_)),3)],!0)],10,Z9)]),_:2},1032,["id","onMouseover"]))),128))])],512)}}},$g=Re(Q9,[["__scopeId","data-v-850c5354"]]),J9={components:{MentionBox:$g},props:{searchKey:{type:String,default:""}},emits:["replace"],computed:{...gt({cannedMessages:"getCannedResponses"}),items(){return this.cannedMessages.map(e=>({label:e.short_code,key:e.short_code,description:e.content}))}},watch:{searchKey(){this.fetchCannedResponses()}},mounted(){this.fetchCannedResponses()},methods:{fetchCannedResponses(){this.$store.dispatch("getCannedResponse",{searchKey:this.searchKey})},handleMentionClick(e={}){this.$emit("replace",e.description)}}};function e7(e,t,n,s,o,a){const i=F("MentionBox");return a.items.length?(m(),P(i,{key:0,items:a.items,onMentionSelect:a.handleMentionClick},null,8,["items","onMentionSelect"])):x("",!0)}const Mg=Re(J9,[["render",e7]]),t7={class:"max-w-full inline-flex items-center gap-0.5 min-w-0 mb-0 text-sm font-medium text-slate-900 dark:text-slate-100 group-hover:text-woot-500 dark:group-hover:text-woot-500 truncate"},n7={__name:"keyboardEmojiSelector",props:{searchKey:{type:String,default:""}},emits:["selectEmoji"],setup(e,{emit:t}){const n=e,s=t,o=Lu([]),a=w(()=>{if(!n.searchKey)return[];const r=n.searchKey.toLowerCase();return o.value.filter(d=>d.searchString.includes(r))});function i(){o.value=GC.flatMap(({emojis:r})=>r.map(({name:d,slug:u,...p})=>({...p,name:d,slug:u,searchString:`${d.replace(/\s+/g,"")} ${u}`.toLowerCase()})))}function l(r={}){s("selectEmoji",r.emoji)}return ut(()=>{i()}),(r,d)=>a.value.length?(m(),P($g,{key:0,type:"emoji",items:a.value,onMentionSelect:l},{default:j(({item:u,selected:p})=>[c("span",t7,[be(v(u.emoji)+" ",1),c("p",{class:re(["relative mb-0 truncate bottom-px",{"text-woot-500 dark:text-woot-500":p,"font-normal":!p}])}," :"+v(u.name),3)])]),_:1},8,["items"])):x("",!0)}},s7=["id","onClick","onMouseover"],a7={class:"mr-2"},o7={class:"flex-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},i7={__name:"TagAgents",props:{searchKey:{type:String,default:""}},emits:["selectAgent"],setup(e,{emit:t}){const n=e,s=t,o=vn(),a=w(()=>o["agents/getVerifiedAgents"].value),i=U(null),l=U(0),r=w(()=>n.searchKey?a.value.filter(g=>g.name.toLowerCase().includes(n.searchKey.toLowerCase())):a.value),d=()=>{Zt(()=>{i.value&&(i.value.scrollTop=50*l.value)})},u=()=>{s("selectAgent",r.value[l.value])};kE({items:r,onSelect:u,adjustScroll:d,selectedIndex:l}),lt(r,g=>{g.length<l.value+1&&(l.value=0)});const p=g=>{l.value=g},h=g=>{l.value=g,u()};return(g,_)=>(m(),f("div",null,[r.value.length?(m(),f("ul",{key:0,ref_key:"tagAgentsRef",ref:i,class:"vertical dropdown menu mention--box bg-n-solid-1 p-1 rounded-xl text-sm overflow-auto absolute w-full z-20 shadow-md left-0 leading-[1.2] bottom-full max-h-[12.5rem] border border-solid border-n-strong"},[(m(!0),f(pe,null,ye(r.value,(T,S)=>(m(),f("li",{id:`mention-item-${S}`,key:T.id,class:re([{"bg-n-alpha-black2":S===l.value,"last:mb-0":r.value.length<=4},"flex items-center px-2 py-1 rounded-md"]),onClick:E=>h(S),onMouseover:E=>p(S)},[c("div",a7,[b(yn,{src:T.thumbnail,name:T.name,"rounded-full":""},null,8,["src","name"])]),c("div",o7,[c("h5",{class:re(["mb-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis",{"text-n-slate-12":S===l.value}])},v(T.name),3),c("div",{class:re(["overflow-hidden text-xs whitespace-nowrap text-ellipsis text-n-slate-10",{"text-n-slate-11":S===l.value}])},v(T.email),3)])],42,s7))),128))],512)):x("",!0)]))}},l7={components:{MentionBox:$g},props:{searchKey:{type:String,default:""}},emits:["selectVariable"],computed:{...gt({customAttributes:"attributes/getAttributes"}),items(){return[...this.standardAttributeVariables,...this.customAttributeVariables]},standardAttributeVariables(){return _C.filter(e=>e.label.includes(this.searchKey)||e.key.includes(this.searchKey)).map(e=>({label:e.key,key:e.key,description:e.label}))},customAttributeVariables(){return this.customAttributes.map(e=>{const t=e.attribute_model==="conversation_attribute"?"conversation":"contact";return{label:`${t}.custom_attribute.${e.attribute_key}`,key:`${t}.custom_attribute.${e.attribute_key}`,description:e.attribute_description}})}},methods:{handleVariableClick(e={}){this.$emit("selectVariable",e.key)}}};function r7(e,t,n,s,o,a){const i=F("MentionBox");return a.items.length?(m(),P(i,{key:0,type:"variable",items:a.items,onMentionSelect:a.handleVariableClick},null,8,["items","onMentionSelect"])):x("",!0)}const c7=Re(l7,[["render",r7],["__scopeId","data-v-89b32d55"]]),d7=["strong","em","link","undo","redo","bulletList","orderedList","code"],u7=["strong","em","link","undo","redo","imageUpload"],Ovt=["strong","em","link","undo","redo","bulletList","orderedList","h1","h2","h3","imageUpload","code"],m7=[{name:"Small",height:"24px"},{name:"Medium",height:"48px"},{name:"Large",height:"72px"},{name:"Original Size",height:"auto"}],p7=(e,t=0)=>n=>{const s=new RegExp(`(?:^)?${e}[^\\s${e}]{${t},}`,"g"),o=n.before(),a=n.end(),i=n.doc.textBetween(o,a,"\0","\0");let l;for(;l=s.exec(i);){const r=l.input.slice(Math.max(0,l.index-1),l.index);if(!/^[\s\0]?$/.test(r))continue;const d=l.index+n.start(),u=d+l[0].length;if(d<n.pos&&u>=n.pos){const p=l[0],h=p?p.slice(e.length):"";return{range:{from:d,to:u},text:h}}}return null},h7=({matcher:e,suggestionClass:t="prosemirror-mention-node",onEnter:n=()=>!1,onChange:s=()=>!1,onExit:o=()=>!1,onKeyDown:a=()=>!1})=>new VC({key:new HC("mentions"),view(){return{update:(i,l)=>{const r=this.key.getState(l),d=this.key.getState(i.state),u=r.active&&d.active&&r.range.from!==d.range.from,p=!r.active&&d.active,h=r.active&&!d.active,g=!p&&!h&&r.text!==d.text;(h||u)&&o({view:i,range:r.range,text:r.text}),g&&!u&&s({view:i,range:d.range,text:d.text}),(p||u)&&n({view:i,range:d.range,text:d.text})}}},state:{init(){return{active:!1,range:{},text:null}},apply(i,l){const{selection:r}=i,d={...l};if(r.from===r.to){(r.from<l.range.from||r.from>l.range.to)&&(d.active=!1);const u=r.$from,p=e(u);p?(d.active=!0,d.range=p.range,d.text=p.text):d.active=!1}else d.active=!1;return d.active||(d.range={},d.text=null),d}},props:{handleKeyDown(i,l){const{active:r}=this.getState(i.state);return r?a({view:i,event:l}):!1},decorations(i){const{active:l,range:r}=this.getState(i);return l?KC.create(i.doc,[zC.inline(r.from,r.to,{nodeName:"span",class:t})]):null}}}),f7=["onClick"],g7=4e3,E1=4,wo={__name:"Editor",props:{modelValue:{type:String,default:""},editorId:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},enableSuggestions:{type:Boolean,default:!0},overrideLineBreaks:{type:Boolean,default:!1},updateSelectionWith:{type:String,default:""},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},variables:{type:Object,default:()=>({})},enabledMenuOptions:{type:Array,default:()=>[]},signature:{type:String,default:""},allowSignature:{type:Boolean,default:!1},channelType:{type:String,default:""},showImageResizeToolbar:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!0}},emits:["typingOn","typingOff","toggleUserMention","toggleCannedMenu","toggleVariablesMenu","clearSelection","blur","focus","input","update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=(Le,Me,Ue=[],we={},ge=[])=>WC.create({doc:new Q_(Fm).parse(Le),plugins:jC({schema:Fm,placeholder:Me,methods:we,plugins:Ue,enabledMenuOptions:ge})}),{isEditorHotKeyEnabled:i,fetchSignatureFlagFromUISettings:l}=Mn(),r=vN(()=>s("typingOn"),()=>s("typingOff"),g7);let d=null,u=null;const p=U(!1),h=U(!1),g=U(!1),_=U(!1),T=U(""),S=U(""),E=U(""),y=U(""),A=U(null),C=U(!1),O=U({top:0,left:0}),N=U(null),R=m7,k=Us("editorRoot"),L=Us("imageUpload"),D=Us("editor"),$=()=>JC.serialize(d.state.doc),M=w(()=>n.enableVariables&&g.value&&!n.isPrivate),K=w(()=>n.enableCannedResponses&&h.value&&!n.isPrivate),B=w(()=>n.enabledMenuOptions.length?n.enabledMenuOptions:d7);function H({trigger:Le,minChars:Me=0,showMenu:Ue,searchTerm:we,isAllowed:ge=()=>!0}){return h7({matcher:p7(Le,Me),suggestionClass:"",onEnter:J=>(ge()&&(Ue.value=!0,A.value=J.range,d=J.view,we&&(we.value=J.text||"")),!1),onChange:J=>(d=J.view,A.value=J.range,we&&(we.value=J.text),!1),onExit:()=>(we&&(we.value=""),Ue.value=!1,!1),onKeyDown:({event:J})=>J.keyCode===13&&Ue.value})}const G=w(()=>n.enableSuggestions?[H({trigger:"@",showMenu:p,searchTerm:T,isAllowed:()=>n.isPrivate}),H({trigger:"/",showMenu:h,searchTerm:S,isAllowed:()=>!n.isPrivate}),H({trigger:"{{",showMenu:g,searchTerm:E,isAllowed:()=>!n.isPrivate}),H({trigger:":",minChars:2,showMenu:_,searchTerm:y})]:[]),V=w(()=>n.allowSignature&&!n.isPrivate&&n.channelType?l(n.channelType):!1);lt(p,Le=>{s("toggleUserMention",n.isPrivate&&Le)}),lt(h,Le=>{s("toggleCannedMenu",!n.isPrivate&&Le)}),lt(g,Le=>{s("toggleVariablesMenu",!n.isPrivate&&Le)});function Y(Le="end"){const{tr:Me}=d.state,Ue=Le==="end"?Z_.atEnd(Me.doc):Z_.atStart(Me.doc);d.dispatch(Me.setSelection(Ue)),d.focus()}function ee(Le){return Le?(n.signature?_o(Le,n.signature):Le).trim().length===0:!0}function X(){const{schema:Le,tr:Me}=u,Ue=Le.nodes.paragraph.create(),we=Me.insert(0,Ue);d.dispatch(we),Y("start")}function z(Le){if(n.disabled)return;const Me=I(Le);ee(Me)&&V.value?X():n.focusOnMount&&Y("end")}function W(){L.value.click()}function q(Le=n.modelValue){const Me=I(Le);u=a(Me,n.placeholder,G.value,{onImageUpload:W},B.value),d.updateState(u),z(Me)}function Z(){let Le=n.modelValue;const Me=ee(Le);Le=mi(Le,n.signature),q(Le),Me&&X()}function ne(){if(!n.signature)return;let Le=n.modelValue;Le=_o(Le,n.signature),q(Le)}function ae(Le){Le?Z():ne()}function ue(){const Le=k.value.getBoundingClientRect(),Me=N.value.getBoundingClientRect();O.value={top:`${Me.top-Le.top-30}px`,left:`${Me.left-Le.left-4}px`}}function te(Le){n.showImageResizeToolbar&&(qC(N.value,Le,d),C.value=!1)}function ce(){n.showImageResizeToolbar&&(N.value=document.querySelector("img.ProseMirror-selectednode"),N.value?(C.value=!!N.value,ue()):C.value=!1)}function fe(){s("input",$()),s("update:modelValue",$())}function ke(){N.value&&(document.querySelector("img.ProseMirror-selectednode")||(C.value=!1))}function De(){return i("enter")}function Fe(){return i("cmd_enter")}Vs({"Alt+KeyP":{action:Y,allowOnFocusedInput:!0},"Alt+KeyL":{action:Y,allowOnFocusedInput:!0}});function je(Le){const{tr:Me}=d.state,Ue=eN(d.state,Le);Ue&&(d.dispatch(Me.insert(Ue.pos,Ue.node).scrollIntoView()),Y())}async function Qe(Le){try{const{fileUrl:Me}=await jN(Le);Me&&je(Me),Te(o("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SUCCESS"))}catch{Te(o("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_ERROR"))}}function Ze(){const Le=L.value.files[0];il(Le,E1)?Qe(Le):Te(o("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR",{size:E1})),L.value=""}function ft(Le){rN(Le)&&De()&&!n.overrideLineBreaks&&Le.preventDefault()}async function kt(Le,Me=0,Ue=0){u=ZC(d,Le,Me,Ue),fe(),await Zt(),QC(d)}function Q(Le,Me=0){const Ue=Me||d.state.selection.from||0;let we=new Q_(Fm).parse(Le);kt(we,Ue,void 0)}function oe(Le,Me){if(!d)return;let{node:Ue,from:we,to:ge}=XC(d,Le,Me,A.value,n.variables);if(!Ue)return;kt(Ue,we,ge);const J={mention:ba.USED_MENTIONS,cannedResponse:ba.INSERTED_A_CANNED_RESPONSE,variable:ba.INSERTED_A_VARIABLE,emoji:ba.INSERTED_AN_EMOJI};jt(J[Le])}function de(Le){cN(Le)&&Fe()&&!n.overrideLineBreaks&&Le.preventDefault()}function Ce(Le){De()&&ft(Le),Fe()&&de(Le)}function Ae(){d=new YC(D.value,{state:u,editable:()=>!n.disabled,dispatchTransaction:Le=>{u=u.apply(Le),d.updateState(u),Le.docChanged&&fe()},handleDOMEvents:{keyup:()=>{n.disabled||(r.start(),ke())},keydown:(Le,Me)=>!n.disabled&&Ce(Me),focus:()=>!n.disabled&&s("focus"),click:()=>!n.disabled&&ce(),blur:()=>{n.disabled||(r.stop(),s("blur"))},paste:(Le,Me)=>{if(n.disabled)return;Me.clipboardData.files.length>0&&Me.preventDefault()}}})}return lt(w(()=>n.modelValue),(Le="")=>{Le!==$()&&q(Le)}),lt(w(()=>n.editorId),()=>{h.value=!1,_.value=!1,g.value=!1,S.value="",q(n.modelValue)}),lt(w(()=>n.isPrivate),()=>{q(n.modelValue)}),lt(w(()=>n.updateSelectionWith),(Le,Me)=>{if(d&&Le!==Me&&n.updateSelectionWith!==""){const Ue=d.state.schema.text(n.updateSelectionWith),we=d.state.tr.replaceSelectionWith(Ue);d.focus(),u=d.state.apply(we),d.updateState(u),fe(),s("clearSelection")}}),lt(V,Le=>{n.allowSignature&&ae(Le)}),ut(()=>{u=a(n.modelValue,n.placeholder,G.value,{onImageUpload:W},B.value),Ae(),d.updateState(u),n.focusOnMount&&Y()}),yi(sn.INSERT_INTO_RICH_EDITOR,Q),(Le,Me)=>(m(),f("div",{ref_key:"editorRoot",ref:k,class:"relative w-full"},[p.value&&e.isPrivate?(m(),P(i7,{key:0,"search-key":T.value,onSelectAgent:Me[0]||(Me[0]=Ue=>oe("mention",Ue))},null,8,["search-key"])):x("",!0),K.value?(m(),P(Mg,{key:1,"search-key":S.value,onReplace:Me[1]||(Me[1]=Ue=>oe("cannedResponse",Ue))},null,8,["search-key"])):x("",!0),M.value?(m(),P(c7,{key:2,"search-key":E.value,onSelectVariable:Me[2]||(Me[2]=Ue=>oe("variable",Ue))},null,8,["search-key"])):x("",!0),_.value?(m(),P(n7,{key:3,"search-key":y.value,onSelectEmoji:Me[3]||(Me[3]=Ue=>oe("emoji",Ue))},null,8,["search-key"])):x("",!0),c("input",{ref_key:"imageUpload",ref:L,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:"",onChange:Ze},null,544),c("div",{ref_key:"editor",ref:D},null,512),ie(c("div",{class:"absolute shadow-md rounded-[4px] flex gap-1 py-1 px-1 bg-slate-50 dark:bg-slate-700 text-slate-800 dark:text-slate-50",style:At({top:O.value.top,left:O.value.left})},[(m(!0),f(pe,null,ye(I(R),Ue=>(m(),f("button",{key:Ue.name,class:"text-xs font-medium rounded-[4px] border border-solid border-slate-200 dark:border-slate-600 px-1.5 py-0.5 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:we=>te(Ue)},v(Ue.name),9,f7))),128))],4),[[ln,C.value&&e.showImageResizeToolbar]]),et(Le.$slots,"footer")],512))}},_7={components:{AutomationActionTeamMessageInput:z9,AutomationActionFileInput:X9,WootMessageEditor:wo,NextButton:he},props:{modelValue:{type:Object,default:()=>null},actionTypes:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},emits:["update:modelValue","input","removeAction","resetAction"],computed:{action_name:{get(){return this.modelValue?this.modelValue.action_name:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_name:e}),this.$emit("input",{...t,action_name:e})}},action_params:{get(){return this.modelValue?this.modelValue.action_params:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_params:e}),this.$emit("input",{...t,action_params:e})}},inputType(){return this.actionTypes.find(e=>e.key===this.action_name).inputType},actionInputStyles(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set(e){this.action_params=e}}},methods:{removeAction(){this.$emit("removeAction")},resetAction(){this.$emit("resetAction")}}},v7={class:"filter-inputs"},b7=["value"],E7={key:0,class:"filter__answer--wrap"},T7={key:0,class:"w-full"},y7={key:0,class:"multiselect-wrap--small"},A7={key:1,class:"multiselect-wrap--small"},S7=["placeholder"],I7=["placeholder"],C7={key:2,class:"filter-error"};function N7(e,t,n,s,o,a){const i=F("multiselect"),l=F("AutomationActionFileInput"),r=F("NextButton"),d=F("AutomationActionTeamMessageInput"),u=F("WootMessageEditor");return m(),f("div",{class:re(["filter",a.actionInputStyles])},[c("div",v7,[ie(c("select",{"onUpdate:modelValue":t[0]||(t[0]=p=>a.action_name=p),class:re(["action__question",{"full-width":!n.showActionInput}]),onChange:t[1]||(t[1]=p=>a.resetAction())},[(m(!0),f(pe,null,ye(n.actionTypes,p=>(m(),f("option",{key:p.key,value:p.key},v(p.label),9,b7))),128))],34),[[Mt,a.action_name]]),n.showActionInput?(m(),f("div",E7,[a.inputType?(m(),f("div",T7,[a.inputType==="search_select"?(m(),f("div",y7,[b(i,{modelValue:a.action_params,"onUpdate:modelValue":t[2]||(t[2]=p=>a.action_params=p),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","placeholder","select-label","options"])])):a.inputType==="multi_select"?(m(),f("div",A7,[b(i,{modelValue:a.action_params,"onUpdate:modelValue":t[3]||(t[3]=p=>a.action_params=p),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","placeholder","select-label","options"])])):a.inputType==="email"?ie((m(),f("input",{key:2,"onUpdate:modelValue":t[4]||(t[4]=p=>a.action_params=p),type:"email",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},null,8,S7)),[[at,a.action_params]]):a.inputType==="url"?ie((m(),f("input",{key:3,"onUpdate:modelValue":t[5]||(t[5]=p=>a.action_params=p),type:"url",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},null,8,I7)),[[at,a.action_params]]):x("",!0),a.inputType==="attachment"?(m(),P(l,{key:4,modelValue:a.action_params,"onUpdate:modelValue":t[6]||(t[6]=p=>a.action_params=p),"initial-file-name":n.initialFileName},null,8,["modelValue","initial-file-name"])):x("",!0)])):x("",!0)])):x("",!0),n.isMacro?x("",!0):(m(),P(r,{key:1,icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:a.removeAction},null,8,["onClick"]))]),a.inputType==="team_message"?(m(),P(d,{key:0,modelValue:a.action_params,"onUpdate:modelValue":t[7]||(t[7]=p=>a.action_params=p),teams:n.dropdownValues},null,8,["modelValue","teams"])):x("",!0),a.inputType==="textarea"?(m(),P(u,{key:1,modelValue:a.castMessageVmodel,"onUpdate:modelValue":t[8]||(t[8]=p=>a.castMessageVmodel=p),rows:"4","enable-variables":"",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),class:"action-message"},null,8,["modelValue","placeholder"])):x("",!0),n.errorMessage?(m(),f("p",C7,v(n.errorMessage),1)):x("",!0)],2)}const kg=Re(_7,[["render",N7],["__scopeId","data-v-1d915e09"]]),Hn=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],Ka=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],Pr=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],O7=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],ld=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"},{value:"starts_with",label:"Starts With"}],x7=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],w7=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],R7=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],$7=[{action_name:"assign_agent",action_params:[]}],M7=[{id:"incoming",name:"Incoming Message"},{id:"outgoing",name:"Outgoing Message"}],Lg=[{id:"nil",name:"None"},{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"},{id:"urgent",name:"Urgent"}],k7=e=>e.every(t=>typeof t=="string"),L7=e=>e.every(t=>typeof t=="number"),D7=e=>(e.length<=0?e=[]:k7(e)||L7(e)?e=[...e]:e=e.map(t=>t.id),e),P7=e=>(e.action_params.id?e.action_params=[e.action_params.id]:e.action_params=[e.action_params],e.action_params),Ay=e=>JSON.parse(JSON.stringify(e)).map(s=>(Array.isArray(s.action_params)?s.action_params=D7(s.action_params):typeof s.action_params=="object"?s.action_params=P7(s):s.action_params?s.action_params=[s.action_params]:s.action_params=[],s)),Dg=e=>({date:"date",text:"plain_text",list:"search_select",checkbox:"search_select"})[e]||"plain_text",Sy=(e,t)=>e.find(n=>n.attribute_key===t),B7=(e,t)=>e.find(n=>n.attribute_key===t).attribute_values.map(n=>({id:n,name:n})),F7=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="checkbox"),U7=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="list"),Iy=e=>({list:Hn,text:Pr,number:Hn,link:Hn,date:O7,checkbox:Hn})[e]||Hn,T1=(e,t)=>e.map(n=>({key:n.attribute_key,name:n.attribute_display_name,inputType:Dg(n.attribute_display_type),filterOperators:Iy(n.attribute_display_type),customAttributeType:t})),uf=(e,t="id")=>!e||!Array.isArray(e)?[]:e.map(n=>({id:n[t],name:n.title})),G7=({agents:e,teams:t,labels:n,slaPolicies:s,type:o,addNoneToListFn:a})=>({assign_agent:a?a(e):e,assign_team:a?a(t):t,send_email_to_team:t,add_label:uf(n,"title"),remove_label:uf(n,"title"),change_priority:Lg,add_sla:s})[o],V7=({agents:e,booleanFilterOptions:t,campaigns:n,contacts:s,countries:o,customAttributes:a,inboxes:i,languages:l,statusFilterOptions:r,teams:d,type:u})=>F7(a,u)?t:U7(a,u)?B7(a,u):{status:r,assignee_id:e,contact:s,inbox_id:i,team_id:d,campaigns:uf(n),browser_language:l,conversation_language:l,country_code:o,message_type:M7,priority:Lg}[u],H7=(e,t=[])=>{const n=e.action_params[0];if(!n)return"";if(e.action_name==="send_attachment"){const s=t.find(o=>o.blob_id===n);if(s)return s.filename.toString()}return""},y1=e=>e==="message_created"?x7:e==="conversation_opened"?w7:R7,A1=()=>$7,K7=e=>e.map(t=>({key:t.attribute_key,name:t.attribute_display_name,type:t.attribute_display_type})),z7=(e,t,n)=>e[t].conditions.find(s=>s.key===n).inputType,Cy=e=>{const t=JSON.parse(JSON.stringify(e));return t.conditions[t.conditions.length-1].query_operator=null,t.conditions=vo(t.conditions).payload,t.actions=Ay(t.actions),t},W7=(e,t)=>e.find(n=>n.key===t),j7=(e=[],t=[],n,s)=>{const o=[];return e.length&&o.push({key:"conversation_custom_attribute",name:n,disabled:!0},...e),t.length&&o.push({key:"contact_custom_attribute",name:s,disabled:!0},...t),o},Tu=(e,t)=>e[t].conditions,Ny=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n),Oy=(e,t,n,s)=>{const o=Sy(e,s);return o?Dg(o.attribute_display_type):Ny(t,n,s).inputType},xy=(e,t,n,s,o)=>{if(s==="edit"){const i=Sy(e,o);if(i)return Iy(i.attribute_display_type)}return Ny(t,n,o).filterOperators},wy=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n).customAttributeType,Ry=(e,t)=>t==="send_email_to_team"||t==="send_message"?!1:!!e.find(s=>s.key===t).inputType;function $y(){const e=vn(),{t}=He(),n=Ve("agents/getAgents"),s=Ve("campaigns/getAllCampaigns"),o=Ve("contacts/getContacts"),a=Ve("inboxes/getInboxes"),i=Ve("labels/getLabels"),l=Ve("teams/getTeams"),r=Ve("sla/getSLA"),d=w(()=>[{id:!0,name:t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:t("FILTER.ATTRIBUTE_LABELS.FALSE")}]),u=w(()=>({open:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT")},resolved:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT")},pending:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT")},snoozed:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT")},all:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT")}})),p=w(()=>{const T=u.value;return[...Object.keys(T).map(S=>({id:S,name:T[S].TEXT})),{id:"all",name:t("CHAT_LIST.FILTER_ALL")}]}),h=T=>[{id:"nil",name:t("AUTOMATION.NONE_OPTION")||"None"},...T||[]];return{booleanFilterOptions:d,statusFilterItems:u,statusFilterOptions:p,getConditionDropdownValues:T=>V7({agents:n.value,booleanFilterOptions:d.value,campaigns:s.value,contacts:o.value,customAttributes:e["attributes/getAttributes"].value,inboxes:a.value,statusFilterOptions:p.value,teams:l.value,languages:Xf,countries:Ua,type:T}),getActionDropdownValues:T=>G7({agents:n.value,labels:i.value,teams:l.value,slaPolicies:r.value,type:T,addNoneToListFn:h}),agents:n,campaigns:s,contacts:o,inboxes:a,labels:i,teams:l,slaPolicies:r}}const Y7={message_created:{conditions:[{key:"message_type",name:"MESSAGE_TYPE",inputType:"search_select",filterOperators:Hn},{key:"content",name:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:Ka},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ka},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Hn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Hn},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:ld}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"add_label",name:"ADD_LABEL"},{key:"remove_label",name:"REMOVE_LABEL"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Hn},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Hn},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ka},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Hn},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:ld},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ka},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ka},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Hn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Hn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Hn}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Hn},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Hn},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ka},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Hn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ka},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:ld},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Pr},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Pr},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ka},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Hn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Hn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Hn}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Hn},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ka},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ka},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Hn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ka},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Pr},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:ld},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Pr},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Hn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Hn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Hn}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]}},yu=[{key:"conversation_created",value:"CONVERSATION_CREATED"},{key:"conversation_updated",value:"CONVERSATION_UPDATED"},{key:"message_created",value:"MESSAGE_CREATED"},{key:"conversation_opened",value:"CONVERSATION_OPENED"}],Au=[{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"send_email_to_team",label:"SEND_EMAIL_TO_TEAM",inputType:"team_message"},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"add_sla",label:"ADD_SLA",inputType:"search_select"}];function My(e=null){const t=vn(),{t:n}=He(),{booleanFilterOptions:s,statusFilterOptions:o,getConditionDropdownValues:a,getActionDropdownValues:i,agents:l,campaigns:r,contacts:d,inboxes:u,labels:p,teams:h,slaPolicies:g}=$y(),_=U(e),T=structuredClone(Y7),S=w(()=>{var L;return(L=_.value)==null?void 0:L.event_name});return{automation:_,automationTypes:T,agents:l,campaigns:r,contacts:d,inboxes:u,labels:p,teams:h,slaPolicies:g,booleanFilterOptions:s,statusFilterOptions:o,onEventChange:()=>{_.value.conditions=y1(S.value),_.value.actions=A1()},getConditionDropdownValues:a,appendNewCondition:()=>{const L=y1(S.value);_.value.conditions=[..._.value.conditions,...L]},appendNewAction:()=>{const L=A1();_.value.actions=[..._.value.actions,...L]},removeFilter:L=>{_.value.conditions.length<=1?Te(n("AUTOMATION.CONDITION.DELETE_MESSAGE")):_.value.conditions=_.value.conditions.filter((D,$)=>$!==L)},removeAction:L=>{_.value.actions.length<=1?Te(n("AUTOMATION.ACTION.DELETE_MESSAGE")):_.value.actions=_.value.actions.filter((D,$)=>$!==L)},resetFilter:(L,D)=>{const $=[..._.value.conditions];$[L]={...$[L],filter_operator:T[S.value].conditions.find(M=>M.key===D.attribute_key).filterOperators[0].value,values:""},_.value.conditions=$},resetAction:L=>{const D=[..._.value.actions];D[L]={...D[L],action_params:[]},_.value.actions=D},getActionDropdownValues:i,manifestCustomAttributes:()=>{const L=t["attributes/getAttributesByModel"].value("conversation_attribute"),D=t["attributes/getAttributesByModel"].value("contact_attribute"),$=T1(L,"conversation_attribute"),M=T1(D,"contact_attribute"),K=j7($,M,n("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),n("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));["message_created","conversation_created","conversation_updated","conversation_opened"].forEach(B=>{T[B].conditions=[...T[B].conditions,...K]})}}}const X7="ATTRIBUTE_KEY_REQUIRED",q7="FILTER_OPERATOR_REQUIRED",Z7="VALUE_REQUIRED",Q7="VALUE_MUST_BE_BETWEEN_1_AND_998",J7="ACTION_PARAMETERS_REQUIRED",eF="ATLEAST_ONE_CONDITION_REQUIRED",tF="ATLEAST_ONE_ACTION_REQUIRED",nF=e=>e?Array.isArray(e)?!e.length:typeof e=="object"?!Object.keys(e).length:!1:!0,ky=e=>e.attribute_key?e.filter_operator?!["is_present","is_not_present"].includes(e.filter_operator)&&nF(e.values)?Z7:e.filter_operator==="days_before"&&(parseInt(e.values,10)<=0||parseInt(e.values,10)>=999)?Q7:null:q7:X7,sF=e=>{const t={};return["name","description","event_name"].forEach(s=>{e[s]||(t[s]=`${s.charAt(0).toUpperCase()+s.slice(1)} is required`)}),t},aF=e=>{const t={};return!e||e.length===0?(t.conditions=eF,t):(e.forEach((n,s)=>{const o=ky(n);o&&(t[`condition_${s}`]=o)}),t)},oF=e=>!["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team"].includes(e.action_name)&&(!e.action_params||e.action_params.length===0)?J7:null,Ly=e=>!e||e.length===0?{actions:tF}:e.reduce((t,n,s)=>{const o=oF(n);return o&&(t[`action_${s}`]=o),t},{}),Dy=e=>{const t=sF(e),n=aF(e.conditions),s=Ly(e.actions);return{...t,...n,...s}},iF={name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},lF={components:{FilterInputBox:yy,AutomationActionInput:kg,NextButton:he},props:{onClose:{type:Function,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:l,resetFilter:r,resetAction:d,getActionDropdownValues:u,manifestCustomAttributes:p}=My(iF);return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:l,resetFilter:r,resetAction:d,getActionDropdownValues:u,manifestCustomAttributes:p}},data(){return{automationRuleEvent:yu[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create",errors:{}}},computed:{...gt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return yu.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?Au:Au.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes()},methods:{getAttributes:Tu,getInputType:Oy,getOperators:xy,getCustomAttributeType:wy,showActionInput:Ry,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=Dy(this.automation),Object.keys(this.errors).length===0){const e=Cy(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return Tu(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},rF={class:"flex flex-col modal-content"},cF={class:"w-full"},dF={class:"mb-6"},uF=["value"],mF={key:0,class:"message"},pF={key:0,class:"text-xs text-right text-green-500 pt-1 dark:text-green-500"},hF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},fF={class:"mt-4"},gF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},_F={class:"mt-4"},vF={class:"w-full"},bF={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function EF(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("FilterInputBox"),d=F("NextButton"),u=F("AutomationActionInput");return m(),f("div",null,[b(i,{"header-title":e.$t("AUTOMATION.ADD.TITLE")},null,8,["header-title"]),c("div",rF,[c("div",cF,[b(l,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=p=>s.automation.name=p),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:o.errors.name}),error:o.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),b(l,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=p=>s.automation.description=p),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:re({error:o.errors.description}),error:o.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),c("div",dF,[c("label",{class:re({error:o.errors.event_name})},[be(v(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[2]||(t[2]=p=>s.automation.event_name=p),class:"m-0",onChange:t[3]||(t[3]=p=>s.onEventChange(s.automation))},[(m(!0),f(pe,null,ye(a.automationRuleEvents,p=>(m(),f("option",{key:p.key,value:p.key},v(p.value),9,uF))),128))],544),[[Mt,s.automation.event_name]]),o.errors.event_name?(m(),f("span",mF,v(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):x("",!0)],2),a.hasAutomationMutated?(m(),f("p",pF,v(e.$t("AUTOMATION.FORM.RESET_MESSAGE")),1)):x("",!0)]),c("section",null,[c("label",null,v(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),c("div",hF,[(m(!0),f(pe,null,ye(s.automation.conditions,(p,h)=>(m(),P(r,{key:h,modelValue:s.automation.conditions[h],"onUpdate:modelValue":g=>s.automation.conditions[h]=g,"filter-attributes":a.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":a.getInputType(o.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),operators:a.getOperators(o.allCustomAttributes,s.automationTypes,s.automation,o.mode,s.automation.conditions[h].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[h].attribute_key),"show-query-operator":h!==s.automation.conditions.length-1,"custom-attribute-type":a.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),"error-message":o.errors[`condition_${h}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`condition_${h}`]}`):"",onResetFilter:g=>s.resetFilter(h,s.automation.conditions[h]),onRemoveFilter:g=>s.removeFilter(h)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","show-query-operator","custom-attribute-type","error-message","onResetFilter","onRemoveFilter"]))),128)),c("div",fF,[b(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),c("section",null,[c("label",null,v(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),c("div",gF,[(m(!0),f(pe,null,ye(s.automation.actions,(p,h)=>(m(),P(u,{key:h,modelValue:s.automation.actions[h],"onUpdate:modelValue":g=>s.automation.actions[h]=g,"action-types":a.automationActionTypes,"dropdown-values":s.getActionDropdownValues(s.automation.actions[h].action_name),"show-action-input":a.showActionInput(a.automationActionTypes,s.automation.actions[h].action_name),"error-message":o.errors[`action_${h}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`action_${h}`]}`):"",onResetAction:g=>s.resetAction(h),onRemoveAction:g=>s.removeAction(h)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","onResetAction","onRemoveAction"]))),128)),c("div",_F,[b(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),c("div",vF,[c("div",bF,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"),onClick:Ke(n.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.ADD.SUBMIT"),onClick:a.emitSaveAutomation},null,8,["label","onClick"])])])])])])}const TF=Re(lF,[["render",EF]]);function yF(){const{getConditionDropdownValues:e,getActionDropdownValues:t}=$y(),n=(i,l,r)=>{const d=K7(l);return i.conditions.map(u=>{const p=W7(d,u.attribute_key);let h="plain_text";return p?h=Dg(p.type):h=z7(r,i.event_name,u.attribute_key),h==="plain_text"||h==="date"?{...u,values:u.values[0]}:h==="comma_separated_plain_text"?{...u,values:u.values.join(",")}:{...u,query_operator:u.query_operator||"and",values:[...e(u.attribute_key)].filter(g=>[...u.values].includes(g.id))}})},s=(i,l)=>{const r=i.action_params,d=l.find(u=>u.key===i.action_name).inputType;return d==="multi_select"||d==="search_select"?[...t(i.action_name)].filter(u=>[...r].includes(u.id)):d==="team_message"?{team_ids:[...t(i.action_name)].filter(u=>[...r[0].team_ids].includes(u.id)),message:r[0].message}:[...r]},o=(i,l)=>i.actions.map(r=>({...r,action_params:r.action_params.length?s(r,l):[]}));return{formatAutomation:(i,l,r,d)=>({...i,conditions:n(i,l,r),actions:o(i,d)})}}const AF={components:{FilterInputBox:yy,NextButton:he,AutomationActionInput:kg},props:{onClose:{type:Function,default:()=>{}},selectedResponse:{type:Object,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:l,resetFilter:r,resetAction:d,getActionDropdownValues:u,manifestCustomAttributes:p}=My(),{formatAutomation:h}=yF();return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:l,resetFilter:r,resetAction:d,getActionDropdownValues:u,formatAutomation:h,manifestCustomAttributes:p}},data(){return{automationRuleEvent:yu[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit",errors:{}}},computed:{...gt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return yu.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?Au:Au.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.manifestCustomAttributes(),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.automation=this.formatAutomation(this.selectedResponse,this.allCustomAttributes,this.automationTypes,this.automationActionTypes)},methods:{getFileName:H7,getAttributes:Tu,getInputType:Oy,getOperators:xy,getCustomAttributeType:wy,showActionInput:Ry,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=Dy(this.automation),Object.keys(this.errors).length===0){const e=Cy(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return Tu(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},SF={class:"flex flex-col modal-content"},IF={key:0,class:"w-full"},CF={class:"event_wrapper"},NF=["value"],OF={key:0,class:"message"},xF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},wF={class:"mt-4"},RF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},$F={class:"mt-4"},MF={class:"w-full"},kF={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function LF(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("FilterInputBox"),d=F("NextButton"),u=F("AutomationActionInput");return m(),f("div",null,[b(i,{"header-title":e.$t("AUTOMATION.EDIT.TITLE")},null,8,["header-title"]),c("div",SF,[s.automation?(m(),f("div",IF,[b(l,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=p=>s.automation.name=p),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:o.errors.name}),error:o.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),b(l,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=p=>s.automation.description=p),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:re({error:o.errors.description}),error:o.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),c("div",CF,[c("label",{class:re({error:o.errors.event_name})},[be(v(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[2]||(t[2]=p=>s.automation.event_name=p),onChange:t[3]||(t[3]=p=>s.onEventChange(s.automation))},[(m(!0),f(pe,null,ye(a.automationRuleEvents,p=>(m(),f("option",{key:p.key,value:p.key},v(p.value),9,NF))),128))],544),[[Mt,s.automation.event_name]]),o.errors.event_name?(m(),f("span",OF,v(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):x("",!0)],2)]),c("section",null,[c("label",null,v(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),c("div",xF,[(m(!0),f(pe,null,ye(s.automation.conditions,(p,h)=>(m(),P(r,{key:h,modelValue:s.automation.conditions[h],"onUpdate:modelValue":g=>s.automation.conditions[h]=g,"filter-attributes":a.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":a.getInputType(o.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),operators:a.getOperators(o.allCustomAttributes,s.automationTypes,s.automation,o.mode,s.automation.conditions[h].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[h].attribute_key),"custom-attribute-type":a.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),"show-query-operator":h!==s.automation.conditions.length-1,"error-message":o.errors[`condition_${h}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`condition_${h}`]}`):"",onResetFilter:g=>s.resetFilter(h,s.automation.conditions[h]),onRemoveFilter:g=>s.removeFilter(h)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","custom-attribute-type","show-query-operator","error-message","onResetFilter","onRemoveFilter"]))),128)),c("div",wF,[b(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),c("section",null,[c("label",null,v(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),c("div",RF,[(m(!0),f(pe,null,ye(s.automation.actions,(p,h)=>(m(),P(u,{key:h,modelValue:s.automation.actions[h],"onUpdate:modelValue":g=>s.automation.actions[h]=g,"action-types":a.automationActionTypes,"dropdown-values":s.getActionDropdownValues(p.action_name),"show-action-input":a.showActionInput(a.automationActionTypes,p.action_name),"error-message":o.errors[`action_${h}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`action_${h}`]}`):"","initial-file-name":a.getFileName(p,s.automation.files),onResetAction:g=>s.resetAction(h),onRemoveAction:g=>s.removeAction(h)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name","onResetAction","onRemoveAction"]))),128)),c("div",$F,[b(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),c("div",MF,[c("div",kF,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"),onClick:Ke(n.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.EDIT.SUBMIT"),onClick:a.emitSaveAutomation},null,8,["label","onClick"])])])])):x("",!0)])])}const DF=Re(AF,[["render",LF],["__scopeId","data-v-ec1a6196"]]),PF={class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[200px]"},BF={class:"py-4 ltr:pr-4 rtl:pl-4"},FF={class:"py-4 ltr:pr-4 rtl:pl-4"},UF=["title"],GF={class:"py-4 min-w-xs"},VF={class:"flex gap-1 justify-end flex-shrink-0"},HF={__name:"AutomationRuleRow",props:{automation:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["toggle","edit","delete","clone"],setup(e,{emit:t}){const n=e,s=t,o=l=>su(new Date(l),"LLL d, yyyy"),a=l=>su(new Date(l),"LLL d, yyyy hh:mm a"),i=()=>{const{id:l,name:r,active:d}=n.automation;s("toggle",{id:l,name:r,status:d})};return(l,r)=>{const d=F("woot-switch"),u=ct("tooltip");return m(),f("tr",null,[c("td",PF,v(e.automation.name),1),c("td",BF,v(e.automation.description),1),c("td",FF,[b(d,{"model-value":e.automation.active,onInput:i},null,8,["model-value"])]),c("td",{class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[12px]",title:a(e.automation.created_on)},v(o(e.automation.created_on)),9,UF),c("td",GF,[c("div",VF,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":e.loading,onClick:r[0]||(r[0]=p=>l.$emit("edit",e.automation))},null,8,["is-loading"]),[[u,l.$t("AUTOMATION.FORM.EDIT"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-copy-plus",xs:"",faded:"","is-loading":e.loading,onClick:r[1]||(r[1]=p=>l.$emit("clone",e.automation))},null,8,["is-loading"]),[[u,l.$t("AUTOMATION.CLONE.TOOLTIP"),void 0,{top:!0}]]),ie(b(he,{"is-loading":e.loading,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:r[2]||(r[2]=p=>l.$emit("delete",e.automation))},null,8,["is-loading"]),[[u,l.$t("AUTOMATION.FORM.DELETE"),void 0,{top:!0}]])])])])}}},KF={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},zF={class:"divide-y divide-n-weak text-n-slate-11"},WF={__name:"Index",setup(e){const t=vn(),n=Ot(),{t:s}=He(),o=U(null),a=U({}),i=U(!1),l=U(!1),r=U(!1),d=U({}),u=U(s("AUTOMATION.TOGGLE.ACTIVATION_TITLE")),p=U(s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")),h=w(()=>t["automations/getAutomations"].value),g=w(()=>t["automations/getUIFlags"].value),_=w(()=>t.getCurrentAccountId.value),T=w(()=>`${s("AUTOMATION.DELETE.CONFIRM.YES")} ${d.value.name}`),S=w(()=>`${s("AUTOMATION.DELETE.CONFIRM.NO")} ${d.value.name}`),E=w(()=>` ${d.value.name}?`),y=w(()=>t["accounts/isFeatureEnabledonAccount"].value(_.value,"sla"));ut(()=>{n.dispatch("inboxes/get"),n.dispatch("agents/get"),n.dispatch("contacts/get"),n.dispatch("teams/get"),n.dispatch("labels/get"),n.dispatch("campaigns/get"),n.dispatch("automations/get"),y.value&&n.dispatch("sla/get")});const A=()=>{i.value=!0},C=()=>{i.value=!1},O=H=>{d.value=H,l.value=!0},N=()=>{l.value=!1},R=H=>{r.value=!0,d.value=H},k=()=>{r.value=!1},L=async H=>{try{await n.dispatch("automations/delete",H),Te(s("AUTOMATION.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(s("AUTOMATION.DELETE.API.ERROR_MESSAGE"))}finally{a.value[d.value.id]=!1}},D=()=>{a.value[d.value.id]=!0,k(),L(d.value.id)},$=async({id:H})=>{try{await n.dispatch("automations/clone",H),Te(s("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),n.dispatch("automations/get")}catch{Te(s("AUTOMATION.CLONE.API.ERROR_MESSAGE"))}finally{a.value[d.value.id]=!1}},M=async(H,G)=>{try{const V=G==="edit"?"automations/update":"automations/create",Y=s(G==="edit"?"AUTOMATION.EDIT.API.SUCCESS_MESSAGE":"AUTOMATION.ADD.API.SUCCESS_MESSAGE");await n.dispatch(V,H),Te(Y),C(),N()}catch{const Y=s(G==="edit"?"AUTOMATION.EDIT.API.ERROR_MESSAGE":"AUTOMATION.ADD.API.ERROR_MESSAGE");Te(Y)}},K=async({id:H,name:G,status:V})=>{try{if(V?(u.value=s("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"),p.value=s("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:G})):(u.value=s("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),p.value=s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:G})),await o.value.showConfirmation()){await n.dispatch("automations/update",{id:H,active:!V});const ee=s(V?"AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL":"AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL");Te(ee)}}catch{Te(s("AUTOMATION.EDIT.API.ERROR_MESSAGE"))}},B=w(()=>[s("AUTOMATION.LIST.TABLE_HEADER.NAME"),s("AUTOMATION.LIST.TABLE_HEADER.DESCRIPTION"),s("AUTOMATION.LIST.TABLE_HEADER.ACTIVE"),s("AUTOMATION.LIST.TABLE_HEADER.CREATED_ON")]);return(H,G)=>{const V=F("woot-modal"),Y=F("woot-delete-modal"),ee=F("woot-confirm-modal");return m(),P(Ha,{"is-loading":g.value.isFetching,"loading-message":H.$t("AUTOMATION.LOADING"),"no-records-found":!h.value.length,"no-records-message":H.$t("AUTOMATION.LIST.404")},{header:j(()=>[b(Ds,{title:H.$t("AUTOMATION.HEADER"),description:H.$t("AUTOMATION.DESCRIPTION"),"link-text":H.$t("AUTOMATION.LEARN_MORE"),"feature-name":"automation"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:H.$t("AUTOMATION.HEADER_BTN_TXT"),onClick:A},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:j(()=>[c("table",KF,[c("thead",null,[(m(!0),f(pe,null,ye(B.value,X=>(m(),f("th",{key:X,class:"py-4 ltr:pr-4 rtl:pl-4 rtl:text-right ltr:text-left font-semibold text-n-slate-11"},v(X),1))),128))]),c("tbody",zF,[(m(!0),f(pe,null,ye(h.value,X=>(m(),P(HF,{key:X.id,automation:X,loading:a.value[X.id],onClone:$,onToggle:K,onEdit:O,onDelete:R},null,8,["automation","loading"]))),128))])])]),default:j(()=>[b(V,{show:i.value,"onUpdate:show":G[0]||(G[0]=X=>i.value=X),size:"medium","on-close":C},{default:j(()=>[i.value?(m(),P(TF,{key:0,"on-close":C,onSaveAutomation:M})):x("",!0)]),_:1},8,["show"]),b(Y,{show:r.value,"onUpdate:show":G[1]||(G[1]=X=>r.value=X),"on-close":k,"on-confirm":D,title:H.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:H.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":E.value,"confirm-text":T.value,"reject-text":S.value},null,8,["show","title","message","message-value","confirm-text","reject-text"]),b(V,{show:l.value,"onUpdate:show":G[2]||(G[2]=X=>l.value=X),size:"medium","on-close":N},{default:j(()=>[l.value?(m(),P(DF,{key:0,"on-close":N,"selected-response":d.value,onSaveAutomation:M},null,8,["selected-response"])):x("",!0)]),_:1},8,["show"]),b(ee,{ref_key:"confirmDialog",ref:o,title:u.value,description:p.value},null,8,["title","description"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},jF={routes:[{path:Pt("accounts/:accountId/settings/automation"),component:da,children:[{path:"",redirect:e=>({name:"automation_list",params:e.params})},{path:"list",name:"automation_list",component:WF,meta:{featureFlag:xt.AUTOMATIONS,permissions:["administrator"]}}]}]},Ns={CLOUD:"cloud",ENTERPRISE:"enterprise",COMMUNITY:"community"},YF={class:"text-sm text-slate-700 dark:text-slate-200 font-medium"},XF={__name:"TableFooterResults",props:{firstIndex:{type:Number,default:0},lastIndex:{type:Number,default:0},totalCount:{type:Number,default:0}},setup(e){return(t,n)=>(m(),f("span",YF,v(t.$t("GENERAL.SHOWING_RESULTS",{firstIndex:e.firstIndex,lastIndex:e.lastIndex,totalCount:e.totalCount})),1))}},qF={class:"flex items-center h-8 outline outline-1 outline-n-weak rounded-lg"},ZF={class:"flex items-center gap-3 px-3 tabular-nums bg-n-slate-9/10 h-full"},QF={class:"text-sm text-n-slate-12"},JF={class:"text-sm text-n-slate-11"},eU={__name:"TableFooterPagination",props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>n.currentPage===n.totalPages||n.totalPages===1),a=w(()=>n.currentPage===1),i=w(()=>n.currentPage===n.totalPages),l=w(()=>n.currentPage===1);function r(g){s("pageChange",g)}const d=()=>{d.value||r(n.currentPage+1)},u=()=>{l.value||r(n.currentPage-1)},p=()=>{a.value||r(1)},h=()=>{o.value||r(n.totalPages)};return(g,_)=>(m(),f("div",qF,[b(he,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-left",class:"ltr:rounded-l-lg ltr:rounded-r-none rtl:rounded-r-lg rtl:rounded-l-none",disabled:a.value,onClick:p},null,8,["disabled"]),_[1]||(_[1]=c("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[c("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),b(he,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-left",class:"rounded-none",disabled:l.value,onClick:u},null,8,["disabled"]),c("div",ZF,[c("span",QF,v(e.currentPage),1),_[0]||(_[0]=c("span",{class:"text-n-slate-11"},"/",-1)),c("span",JF,v(e.totalPages),1)]),b(he,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-right",class:"rounded-none",disabled:i.value,onClick:d},null,8,["disabled"]),_[2]||(_[2]=c("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[c("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),b(he,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-right",class:"ltr:rounded-r-lg ltr:rounded-l-none rtl:rounded-l-lg rtl:rounded-r-none",disabled:o.value,onClick:h},null,8,["disabled"])]))}},tU={key:0,class:"flex items-center justify-between h-12 px-6"},Pg={__name:"TableFooter",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>Math.ceil(n.totalCount/n.pageSize)),a=w(()=>n.pageSize*(n.currentPage-1)+1),i=w(()=>Math.min(n.totalCount,n.pageSize*n.currentPage)),l=w(()=>n.totalCount&&!(a.value>n.totalCount));return(r,d)=>l.value?(m(),f("footer",tU,[b(XF,{"first-index":a.value,"last-index":i.value,"total-count":e.totalCount},null,8,["first-index","last-index","total-count"]),e.totalCount?(m(),P(eU,{key:0,"current-page":e.currentPage,"total-pages":o.value,"total-count":e.totalCount,"page-size":e.pageSize,onPageChange:d[0]||(d[0]=u=>s("pageChange",u))},null,8,["current-page","total-pages","total-count","page-size"])):x("",!0)])):x("",!0)}},Py={0:"agent",1:"administrator"},nU={0:"online",1:"offline",2:"busy"},sU={"automationrule:create":"AUDIT_LOGS.AUTOMATION_RULE.ADD","automationrule:update":"AUDIT_LOGS.AUTOMATION_RULE.EDIT","automationrule:destroy":"AUDIT_LOGS.AUTOMATION_RULE.DELETE","webhook:create":"AUDIT_LOGS.WEBHOOK.ADD","webhook:update":"AUDIT_LOGS.WEBHOOK.EDIT","webhook:destroy":"AUDIT_LOGS.WEBHOOK.DELETE","inbox:create":"AUDIT_LOGS.INBOX.ADD","inbox:update":"AUDIT_LOGS.INBOX.EDIT","inbox:destroy":"AUDIT_LOGS.INBOX.DELETE","user:sign_in":"AUDIT_LOGS.USER_ACTION.SIGN_IN","user:sign_out":"AUDIT_LOGS.USER_ACTION.SIGN_OUT","team:create":"AUDIT_LOGS.TEAM.ADD","team:update":"AUDIT_LOGS.TEAM.EDIT","team:destroy":"AUDIT_LOGS.TEAM.DELETE","macro:create":"AUDIT_LOGS.MACRO.ADD","macro:update":"AUDIT_LOGS.MACRO.EDIT","macro:destroy":"AUDIT_LOGS.MACRO.DELETE","accountuser:create":"AUDIT_LOGS.ACCOUNT_USER.ADD","accountuser:update:self":"AUDIT_LOGS.ACCOUNT_USER.EDIT.SELF","accountuser:update:other":"AUDIT_LOGS.ACCOUNT_USER.EDIT.OTHER","accountuser:update:deleted":"AUDIT_LOGS.ACCOUNT_USER.EDIT.DELETED","inboxmember:create":"AUDIT_LOGS.INBOX_MEMBER.ADD","inboxmember:destroy":"AUDIT_LOGS.INBOX_MEMBER.REMOVE","teammember:create":"AUDIT_LOGS.TEAM_MEMBER.ADD","teammember:destroy":"AUDIT_LOGS.TEAM_MEMBER.REMOVE","account:update":"AUDIT_LOGS.ACCOUNT.EDIT"};function S1(e){return Array.isArray(e)?e[e.length-1]:e}function aU(e){let t=[],n=[];return e.role&&e.role.length&&(t.push("role"),n.push(Py[S1(e.role)])),e.availability&&e.availability.length&&(t.push("availability"),n.push(nU[S1(e.availability)])),{changes:t,values:n}}function nm(e,t){var s;return e===null?"System":((s=t.find(o=>o.id===e))==null?void 0:s.name)||e}function oU(e,t,n){t.invitee=nm(e.audited_changes.user_id,n);const s=e.audited_changes.role;return t.role=Py[s]||"unknown",t}function iU(e,t,n){var o,a;e.user_id!==((o=e.auditable)==null?void 0:o.user_id)&&(t.user=nm((a=e.auditable)==null?void 0:a.user_id,n));const s=aU(e.audited_changes);return s&&(t.attributes=s.changes,t.values=s.values),t}function lU(e,t,n){const s=e.audited_changes.user_id;return s&&s!==void 0&&(t.user=nm(s,n)),t}function rU(e,t){return e.audited_changes.team_id&&(t.team_id=e.audited_changes.team_id),t}function cU(e,t){return e.audited_changes.inbox_id&&(t.inbox_id=e.audited_changes.inbox_id),t}function dU(e,t,n){return e.audited_changes&&(t=lU(e,t,n),t=rU(e,t),t=cU(e,t)),t}function uU(e,t,n,s){return s==="create"?oU(e,t,n):s==="update"?iU(e,t,n):t}function mU(e,t){let n={agentName:nm(e.user_id,t),id:e.auditable_id};const s=e.auditable_type.toLowerCase(),o=e.action.toLowerCase();return s==="accountuser"&&(n=uU(e,n,t,o)),(s==="inboxmember"||s==="teammember")&&(n=dU(e,n,t)),n}function pU(e){return e.auditable===null?":deleted":e.user_id===e.auditable.user_id?":self":":other"}const hU=e=>{const t=e.auditable_type.toLowerCase(),n=e.action.toLowerCase();let s=`${t}:${n}`;return t==="accountuser"&&n==="update"&&(s+=pU(e)),sU[s]||""},fU={class:"flex-1 overflow-auto"},gU={class:"mt-6 flex-1 text-slate-700 dark:text-slate-300"},_U={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},vU={key:2,class:"min-w-full overflow-x-auto"},bU={class:"divide-y divide-slate-75 dark:divide-slate-700"},EU={class:"divide-y divide-n-weak text-n-slate-11"},TU={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},yU={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},AU={class:"py-4 w-[8.75rem]"},SU={__name:"Index",setup(e){const t=vn(),n=Ot(),s=wn(),o=w(()=>t["auditlogs/getAuditLogs"].value),a=w(()=>t["auditlogs/getUIFlags"].value),i=w(()=>t["auditlogs/getMeta"].value),l=w(()=>t["agents/getAgents"].value),{t:r}=He(),d=xn(),u=w(()=>Number(d.query.page??1)),p=T=>{try{n.dispatch("auditlogs/fetch",{page:T})}catch(S){const E=(S==null?void 0:S.message)||r("AUDIT_LOGS.API.ERROR_MESSAGE");Te(E)}},h=T=>{const S=mU(T,l.value),E=hU(T),y=C=>Array.isArray(C)?C.join(", "):C,A={...S,attributes:y(S.attributes),values:y(S.values)};return r(E,A)},g=T=>{s.push({name:"auditlogs_list",query:{page:T}})};ut(()=>{n.dispatch("agents/get"),p(u.value)}),lt(u,(T,S)=>{T!==S&&p(T)});const _=w(()=>[r("AUDIT_LOGS.LIST.TABLE_HEADER.ACTIVITY"),r("AUDIT_LOGS.LIST.TABLE_HEADER.TIME"),r("AUDIT_LOGS.LIST.TABLE_HEADER.IP_ADDRESS")]);return(T,S)=>{const E=F("woot-loading-state");return m(),f("div",fU,[b(Ds,{title:T.$t("AUDIT_LOGS.HEADER"),description:T.$t("AUDIT_LOGS.DESCRIPTION"),"link-text":T.$t("AUDIT_LOGS.LEARN_MORE"),"feature-name":"audit_logs"},null,8,["title","description","link-text"]),c("div",gU,[a.value.fetchingList?(m(),P(E,{key:0,message:T.$t("AUDIT_LOGS.LOADING")},null,8,["message"])):o.value.length?(m(),f("div",vU,[c("table",bU,[c("thead",null,[(m(!0),f(pe,null,ye(_.value,y=>(m(),f("th",{key:y,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},v(y),1))),128))]),c("tbody",EU,[(m(!0),f(pe,null,ye(o.value,y=>(m(),f("tr",{key:y.id},[c("td",TU,v(h(y)),1),c("td",yU,v(I(Cc)(y.created_at,"MMM dd, yyyy hh:mm a")),1),c("td",AU,v(y.remote_address),1)]))),128))])]),b(Pg,{"current-page":Number(i.value.currentPage),"total-count":i.value.totalEntries,"page-size":i.value.perPage,class:"border-slate-50 dark:border-slate-800 border-t !px-0 py-4",onPageChange:g},null,8,["current-page","total-count","page-size"])])):(m(),f("p",_U,v(T.$t("AUDIT_LOGS.LIST.404")),1))])])}}},IU={routes:[{path:Pt("accounts/:accountId/settings/audit-logs"),component:da,children:[{path:"",redirect:e=>({name:"auditlogs_list",params:e.params})},{path:"list",name:"auditlogs_list",meta:{featureFlag:xt.AUDIT_LOGS,installationTypes:[Ns.CLOUD,Ns.ENTERPRISE],permissions:["administrator"]},component:SU}]}]};function To(e,t){try{const n=I(e);return sr(n,t)}catch(n){return zf("transform-keys-error",{payload:e,options:t,op:"camelCase"}),nr(n),e}}function $s(e,t){try{const n=I(e);return YN(n,t)}catch(n){return zf("transform-keys-error",{payload:e,options:t,op:"snakeCase"}),nr(n),e}}function Bg(){const e=Ot(),{isCloudFeatureEnabled:t,currentAccount:n}=Ls(),s=w(()=>t(xt.CAPTAIN)),o=w(()=>{var r,d;return(d=(r=n.value)==null?void 0:r.limits)==null?void 0:d.captain}),a=w(()=>{var r;return(r=o.value)!=null&&r.documents?To(o.value.documents):null}),i=w(()=>{var r;return(r=o.value)!=null&&r.responses?To(o.value.responses):null});return{captainEnabled:s,captainLimits:o,documentLimits:a,responseLimits:i,fetchLimits:()=>{e.dispatch("accounts/limits")}}}const CU={class:"flex gap-5 items-center justify-between text-xs uppercase text-n-slate-10"},NU={class:"font-medium tracking-wider"},OU={class:"tabular-nums"},xU={class:"rounded-full overflow-hidden h-2 w-full bg-n-slate-4 mt-2"},I1={__name:"BillingMeter",props:{title:{type:String,required:!0},consumed:{type:Number,required:!0},totalCount:{type:Number,required:!0}},setup(e){const t=e,n=w(()=>Math.round(t.consumed/t.totalCount*100)),s=w(()=>n.value<50?"bg-n-teal-10":n.value<80?"bg-n-amber-10":"bg-n-ruby-10");return(o,a)=>(m(),f(pe,null,[c("div",CU,[c("div",NU,v(e.title),1),c("div",OU,v(e.consumed)+" / "+v(e.totalCount),1)]),c("div",xU,[c("div",{class:re(["h-2",s.value]),style:At({width:`${n.value}%`})},null,6)])],64))}},wU={class:"grid grid-cols-[1fr_auto] gap-5"},RU={class:"text-base font-medium text-n-slate-12"},$U={class:"text-sm mt-1 text-n-slate-11"},By={__name:"BillingHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(m(),f("div",wU,[c("div",null,[c("span",RU,v(e.title),1),c("p",$U,v(e.description),1)]),et(t.$slots,"default")]))}},MU={class:"rounded-xl shadow-sm border border-n-weak bg-n-solid-2 py-5 space-y-5"},Kp={__name:"BillingCard",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(m(),f("div",MU,[b(By,{title:e.title,description:e.description,class:"px-5"},{default:j(()=>[et(t.$slots,"action")]),_:3},8,["title","description"]),et(t.$slots,"default")]))}},kU={class:"px-5"},LU={class:"text-n-slate-11 text-xs"},DU={class:"mt-2 text-xl font-medium text-n-slate-12"},zp={__name:"DetailItem",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(e){return(t,n)=>(m(),f("div",kU,[c("span",LU,v(e.label),1),c("div",DU,v(e.value),1)]))}},PU={class:"grid gap-4"},BU={key:0,class:"grid lg:grid-cols-4 sm:grid-cols-3 grid-cols-1 gap-2 divide-x divide-n-weak"},FU={key:0,class:"px-5"},UU={key:1,class:"px-5"},GU={__name:"Index",setup(e){const{currentAccount:t}=Ls(),{captainEnabled:n,captainLimits:s,documentLimits:o,responseLimits:a,fetchLimits:i}=Bg(),l=Ve("accounts/getUIFlags"),r=Ot(),d=w(()=>t.value.custom_attributes||{}),u=w(()=>d.value.plan_name),p=w(()=>d.value.subscribed_quantity),h=w(()=>{if(!d.value.subscription_ends_on)return"";const E=new Date(d.value.subscription_ends_on);return Ln(E,"dd MMM, yyyy")}),g=w(()=>!!u.value),_=async()=>{g.value||(r.dispatch("accounts/subscription"),i())},T=()=>{r.dispatch("accounts/checkout")},S=()=>{window.$chatwoot&&window.$chatwoot.toggle()};return ut(_),(E,y)=>(m(),P(Ha,{"is-loading":I(l).isFetchingItem,"loading-message":E.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!g.value,"no-records-message":E.$t("BILLING_SETTINGS.NO_BILLING_USER")},{header:j(()=>[b(Ds,{title:E.$t("BILLING_SETTINGS.TITLE"),description:E.$t("BILLING_SETTINGS.DESCRIPTION"),"link-text":E.$t("BILLING_SETTINGS.VIEW_PRICING"),"feature-name":"billing"},null,8,["title","description","link-text"])]),body:j(()=>[c("section",PU,[b(Kp,{title:E.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE"),description:E.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION")},{action:j(()=>[b(he,{sm:"",solid:"",blue:"",onClick:T},{default:j(()=>[be(v(E.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT")),1)]),_:1})]),default:j(()=>[u.value||p.value||h.value?(m(),f("div",BU,[b(zp,{label:E.$t("BILLING_SETTINGS.CURRENT_PLAN.TITLE"),value:u.value},null,8,["label","value"]),p.value?(m(),P(zp,{key:0,label:E.$t("BILLING_SETTINGS.CURRENT_PLAN.SEAT_COUNT"),value:p.value},null,8,["label","value"])):x("",!0),h.value?(m(),P(zp,{key:1,label:E.$t("BILLING_SETTINGS.CURRENT_PLAN.RENEWS_ON"),value:h.value},null,8,["label","value"])):x("",!0)])):x("",!0)]),_:1},8,["title","description"]),I(n)?(m(),P(Kp,{key:0,title:E.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:E.$t("BILLING_SETTINGS.CAPTAIN.DESCRIPTION")},{action:j(()=>[b(he,{sm:"",faded:"",slate:"",disabled:""},{default:j(()=>[be(v(E.$t("BILLING_SETTINGS.CAPTAIN.BUTTON_TXT")),1)]),_:1})]),default:j(()=>[I(s)&&I(a)?(m(),f("div",FU,[b(I1,As({title:E.$t("BILLING_SETTINGS.CAPTAIN.RESPONSES")},I(a)),null,16,["title"])])):x("",!0),I(s)&&I(o)?(m(),f("div",UU,[b(I1,As({title:E.$t("BILLING_SETTINGS.CAPTAIN.DOCUMENTS")},I(o)),null,16,["title"])])):x("",!0)]),_:1},8,["title","description"])):(m(),P(Kp,{key:1,title:E.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:E.$t("BILLING_SETTINGS.CAPTAIN.UPGRADE")},{action:j(()=>[b(he,{sm:"",solid:"",slate:"",onClick:T},{default:j(()=>[be(v(E.$t("CAPTAIN.PAYWALL.UPGRADE_NOW")),1)]),_:1})]),_:1},8,["title","description"])),b(By,{class:"px-1 mt-5",title:E.$t("BILLING_SETTINGS.CHAT_WITH_US.TITLE"),description:E.$t("BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION")},{default:j(()=>[b(he,{sm:"",solid:"",slate:"",icon:"i-lucide-life-buoy",onOpen:S},{default:j(()=>[be(v(E.$t("BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT")),1)]),_:1})]),_:1},8,["title","description"])])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"]))}},VU={routes:[{path:Pt("accounts/:accountId/settings/billing"),meta:{permissions:["administrator"],installationTypes:[Ns.CLOUD]},component:da,props:{headerTitle:"BILLING_SETTINGS.TITLE",icon:"credit-card-person",showNewButton:!1},children:[{path:"",name:"billing_settings_index",component:GU,meta:{installationTypes:[Ns.CLOUD],permissions:["administrator"]}}]}]},HU={name:"AddCanned",components:{NextButton:he,Modal:Wt,WootMessageEditor:wo},props:{responseContent:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:Lt()}},data(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:it,minLength:Nn(2)},content:{required:it}},methods:{resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},addCannedResponse(){this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then(()=>{this.addCanned.showLoading=!1,Te(this.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),this.resetForm(),this.onClose()}).catch(e=>{this.addCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");Te(t)})}}},KU={class:"flex flex-col h-auto overflow-auto"},zU={class:"w-full"},WU=["placeholder"],jU={class:"w-full"},YU={class:"editor-wrap"},XU={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function qU(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("WootMessageEditor"),r=F("NextButton"),d=F("Modal");return m(),P(d,{show:o.show,"onUpdate:show":t[4]||(t[4]=u=>o.show=u),"on-close":n.onClose},{default:j(()=>[c("div",KU,[b(i,{"header-title":e.$t("CANNED_MGMT.ADD.TITLE"),"header-content":e.$t("CANNED_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Ke(u=>a.addCannedResponse(),["prevent"]))},[c("div",zU,[c("label",{class:re({error:s.v$.shortCode.$error})},[be(v(e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,WU),[[at,o.shortCode]])],2)]),c("div",jU,[c("label",{class:re({error:s.v$.content.$error})},v(e.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL")),3),c("div",YU,[b(l,{modelValue:o.content,"onUpdate:modelValue":t[2]||(t[2]=u=>o.content=u),class:re(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),c("div",XU,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ke(n.onClose,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",label:e.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||o.addCanned.showLoading,"is-loading":o.addCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const Fy=Re(HU,[["render",qU],["__scopeId","data-v-feb62288"]]),ZU={components:{NextButton:he,Modal:Wt,WootMessageEditor:wo},props:{id:{type:Number,default:null},edcontent:{type:String,default:""},edshortCode:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:Lt()}},data(){return{editCanned:{showAlert:!1,showLoading:!1},shortCode:this.edshortCode,content:this.edcontent,show:!0}},validations:{shortCode:{required:it,minLength:Nn(2)},content:{required:it}},computed:{pageTitle(){return`${this.$t("CANNED_MGMT.EDIT.TITLE")} - ${this.edshortCode}`}},methods:{setPageName({name:e}){this.v$.content.$touch(),this.content=e},resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},editCannedResponse(){this.editCanned.showLoading=!0,this.$store.dispatch("updateCannedResponse",{id:this.id,short_code:this.shortCode,content:this.content}).then(()=>{this.editCanned.showLoading=!1,Te(this.$t("CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE")),this.resetForm(),setTimeout(()=>{this.onClose()},10)}).catch(e=>{this.editCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.EDIT.API.ERROR_MESSAGE");Te(t)})}}},QU={class:"flex flex-col h-auto overflow-auto"},JU={class:"w-full"},eG=["placeholder"],tG={class:"w-full"},nG={class:"editor-wrap"},sG={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function aG(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("WootMessageEditor"),r=F("NextButton"),d=F("Modal");return m(),P(d,{show:o.show,"onUpdate:show":t[4]||(t[4]=u=>o.show=u),"on-close":n.onClose},{default:j(()=>[c("div",QU,[b(i,{"header-title":a.pageTitle},null,8,["header-title"]),c("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Ke(u=>a.editCannedResponse(),["prevent"]))},[c("div",JU,[c("label",{class:re({error:s.v$.shortCode.$error})},[be(v(e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,eG),[[at,o.shortCode]])],2)]),c("div",tG,[c("label",{class:re({error:s.v$.content.$error})},v(e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.LABEL")),3),c("div",nG,[b(l,{modelValue:o.content,"onUpdate:modelValue":t[2]||(t[2]=u=>o.content=u),class:re(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),c("div",sG,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:Ke(n.onClose,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",label:e.$t("CANNED_MGMT.EDIT.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||o.editCanned.showLoading,"is-loading":o.editCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const oG=Re(ZU,[["render",aG],["__scopeId","data-v-88d4d23b"]]),iG={class:"flex-1 overflow-auto"},lG={class:"mt-6 flex-1"},rG={key:1,class:"flex flex-col items-center justify-center h-full text-base text-slate-600 dark:text-slate-300 py-8"},cG={key:2,class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},dG={key:0},uG={class:"mb-0"},mG={class:"divide-y divide-n-weak text-n-slate-11"},pG=["title"],hG={class:"py-4 ltr:pr-4 rtl:pl-4 md:break-all whitespace-normal"},fG={class:"py-4 flex justify-end gap-1"},gG=Object.assign({name:"CannedResponseSettings"},{__name:"Index",setup(e){const t=vn(),n=Ot(),{t:s}=He(),o=U(!1),a=U({}),i=U(!1),l=U(!1),r=U({}),d=U({message:""}),u=U("asc"),p=w(()=>t.getSortedCannedResponses.value(u.value)),h=w(()=>t.getUIFlags.value),g=w(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.YES")} ${r.value.short_code}`),_=w(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.NO")} ${r.value.short_code}`),T=w(()=>` ${r.value.short_code} ? `),S=()=>{u.value=u.value==="asc"?"desc":"asc"},E=async()=>{try{await n.dispatch("getCannedResponse")}catch{}};ut(()=>{E()});const y=M=>{a[r.value.id]=!1,r.value={},d.value.message=M,Te(M)},A=()=>{o.value=!0},C=()=>{o.value=!1},O=M=>{i.value=!0,r.value=M},N=()=>{i.value=!1},R=M=>{l.value=!0,r.value=M},k=()=>{l.value=!1},L=async M=>{try{await n.dispatch("deleteCannedResponse",M),y(s("CANNED_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(K){const B=(K==null?void 0:K.message)||s("CANNED_MGMT.DELETE.API.ERROR_MESSAGE");y(B)}},D=()=>{a[r.value.id]=!0,k(),L(r.value.id)},$=w(()=>[s("CANNED_MGMT.LIST.TABLE_HEADER.SHORT_CODE"),s("CANNED_MGMT.LIST.TABLE_HEADER.CONTENT"),s("CANNED_MGMT.LIST.TABLE_HEADER.ACTIONS")]);return(M,K)=>{const B=F("woot-loading-state"),H=F("fluent-icon"),G=F("woot-modal"),V=F("woot-delete-modal"),Y=ct("tooltip");return m(),f("div",iG,[b(Ds,{title:M.$t("CANNED_MGMT.HEADER"),description:M.$t("CANNED_MGMT.DESCRIPTION"),"link-text":M.$t("CANNED_MGMT.LEARN_MORE"),"feature-name":"canned_responses"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:M.$t("CANNED_MGMT.HEADER_BTN_TXT"),onClick:A},null,8,["label"])]),_:1},8,["title","description","link-text"]),c("div",lG,[h.value.fetchingList?(m(),P(B,{key:0,message:M.$t("CANNED_MGMT.LOADING")},null,8,["message"])):p.value.length?(m(),f("table",cG,[c("thead",null,[(m(!0),f(pe,null,ye($.value,ee=>(m(),f("th",{key:ee,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right"},[ee!==$.value[0]?(m(),f("span",dG,v(ee),1)):(m(),f("button",{key:1,class:"flex items-center p-0 cursor-pointer",onClick:S},[c("span",uG,v(ee),1),b(H,{class:"ml-2 size-4",icon:u.value==="desc"?"chevron-up":"chevron-down"},null,8,["icon"])]))]))),128))]),c("tbody",mG,[(m(!0),f(pe,null,ye(p.value,(ee,X)=>(m(),f("tr",{key:ee.short_code},[c("td",{class:"py-4 ltr:pr-4 rtl:pl-4 truncate max-w-xs font-medium",title:ee.short_code},v(ee.short_code),9,pG),c("td",hG,v(ee.content),1),c("td",fG,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:z=>O(ee)},null,8,["onClick"]),[[Y,M.$t("CANNED_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.value[ee.id],onClick:z=>R(ee)},null,8,["is-loading","onClick"]),[[Y,M.$t("CANNED_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(m(),f("p",rG,v(M.$t("CANNED_MGMT.LIST.404")),1))]),b(G,{show:o.value,"onUpdate:show":K[0]||(K[0]=ee=>o.value=ee),"on-close":C},{default:j(()=>[b(Fy,{"on-close":C})]),_:1},8,["show"]),b(G,{show:i.value,"onUpdate:show":K[1]||(K[1]=ee=>i.value=ee),"on-close":N},{default:j(()=>[i.value?(m(),P(oG,{key:0,id:r.value.id,"edshort-code":r.value.short_code,edcontent:r.value.content,"on-close":N},null,8,["id","edshort-code","edcontent"])):x("",!0)]),_:1},8,["show"]),b(V,{show:l.value,"onUpdate:show":K[2]||(K[2]=ee=>l.value=ee),"on-close":k,"on-confirm":D,title:M.$t("CANNED_MGMT.DELETE.CONFIRM.TITLE"),message:M.$t("CANNED_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":T.value,"confirm-text":g.value,"reject-text":_.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])])}}}),_G={routes:[{path:Pt("accounts/:accountId/settings/canned-response"),component:da,children:[{path:"",redirect:e=>({name:"canned_list",params:e.params})},{path:"list",name:"canned_list",meta:{featureFlag:xt.CANNED_RESPONSES,permissions:[...ys,...Bs]},component:gG}]}]},vG={fetchFacebookPages(e,t){const n=XN("fetchFacebookPages");return n.params.omniauth_token=e,axios.post(n.url(t),n.params)}},bG={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},EG={class:"flex flex-col w-full items-start mb-4"},TG={class:"text-xl font-medium mb-1 text-slate-800 dark:text-slate-100 break-words"},yG={class:"text-sm w-full text-slate-600 dark:text-slate-300"};function AG(e,t,n,s,o,a){const i=ct("dompurify-html");return m(),f("div",EG,[c("h2",TG,v(n.headerTitle),1),ie(c("p",yG,null,512),[[i,n.headerContent]])])}const ta=Re(bG,[["render",AG]]),SG="text/javascript",C1="data-loaded",IG=["defer","crossOrigin","noModule","referrerPolicy","id"];class CG extends Error{constructor(t,n="Failed to load script"){super(n),this.name="ScriptLoaderError",this.src=t}getErrorDetails(){return`Failed to load script from source: ${this.src}`}}const NG=(e,t)=>{const n=document.createElement("script");return n.type=t.type||SG,n.async=t.async!==!1,n.src=e,IG.forEach(s=>{s in t&&(n[s]=t[s])}),Object.entries(t.attrs||{}).forEach(([s,o])=>n.setAttribute(s,o)),n},OG=e=>document.querySelector(`script[src="${e}"]`);async function Uy(e,t){return typeof window>"u"||!window.document?Promise.resolve(!1):new Promise((n,s)=>{if(e.trim()===""){s(new Error("Invalid source URL provided"));return}let o=OG(e);if(!o)o=NG(e,t),document.head.appendChild(o);else if(o.hasAttribute(C1)){n(o);return}const a=()=>s(new CG(e));o.addEventListener("error",a),o.addEventListener("abort",a),o.addEventListener("load",()=>{o.setAttribute(C1,"true"),n(o)})})}const xG="/vite/assets/facebook_login-_skaVloV.png",wG={components:{LoadingState:$c,PageHeader:ta,NextButton:he},mixins:[Yo],setup(){const{accountId:e}=Ls();return{accountId:e,v$:Lt()}},data(){return{isCreating:!1,hasError:!1,omniauth_token:"",user_access_token:"",channel:"facebook",selectedPage:{name:null,id:null},pageName:"",pageList:[],emptyStateMessage:this.$t("INBOX_MGMT.DETAILS.LOADING_FB"),errorStateMessage:"",errorStateDescription:"",hasLoginStarted:!1}},validations:{pageName:{required:it},selectedPage:{isEmpty(){return this.selectedPage!==null&&!!this.selectedPage.name}}},computed:{showLoader(){return!this.user_access_token||this.isCreating},getSelectablePages(){return this.pageList.filter(e=>!e.exists)},...gt({globalConfig:"globalConfig/get"})},mounted(){window.fbAsyncInit=this.runFBInit},methods:{async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?Te(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(nr(e),Te(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},setPageName({name:e}){this.v$.selectedPage.$touch(),this.pageName=e},initChannelAuth(e){e==="facebook"&&this.loadFBsdk()},runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return Uy("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},tryFBlogin(){FB.login(e=>{this.hasError=!1,e.status==="connected"?this.fetchPages(e.authResponse.accessToken):e.status==="not_authorized"?(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED"),this.errorStateDescription=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED_HELP")):(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"),this.errorStateDescription="")},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages"})},async fetchPages(e){try{const t=await vG.fetchFacebookPages(e,this.accountId),{data:{data:n}}=t;this.pageList=n.page_details,this.user_access_token=n.user_access_token}catch{}},channelParams(){return{user_access_token:this.user_access_token,page_access_token:this.selectedPage.access_token,page_id:this.selectedPage.id,inbox_name:this.selectedPage.name}},createChannel(){this.v$.$touch(),this.v$.$error||(this.emptyStateMessage=this.$t("INBOX_MGMT.DETAILS.CREATING_CHANNEL"),this.isCreating=!0,this.$store.dispatch("inboxes/createFBChannel",this.channelParams()).then(e=>{Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}).catch(()=>{this.isCreating=!1}))}}},RG={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},$G={key:0,class:"flex flex-col items-center justify-center h-full text-center"},MG={class:"py-6"},kG={key:1},LG={key:0,class:"max-w-lg mx-auto text-center"},DG={key:0},PG={class:"w-full"},BG={class:"w-3/5"},FG={class:"w-full"},UG={key:0,class:"message"},GG={class:"w-full"},VG=["placeholder"],HG={key:0,class:"message"},KG={class:"w-full text-right"};function zG(e,t,n,s,o,a){const i=F("LoadingState"),l=F("PageHeader"),r=F("multiselect"),d=F("NextButton"),u=ct("dompurify-html");return m(),f("div",RG,[o.hasLoginStarted?(m(),f("div",kG,[o.hasError?(m(),f("div",LG,[c("h5",null,v(o.errorStateMessage),1),o.errorStateDescription?ie((m(),f("p",DG,null,512)),[[u,o.errorStateDescription]]):x("",!0)])):a.showLoader?(m(),P(i,{key:1,message:o.emptyStateMessage},null,8,["message"])):(m(),f("form",{key:2,class:"flex flex-col flex-wrap mx-0",onSubmit:t[4]||(t[4]=Ke(p=>a.createChannel(),["prevent"]))},[c("div",PG,[b(l,{"header-title":e.$t("INBOX_MGMT.ADD.DETAILS.TITLE"),"header-content":e.useInstallationName(e.$t("INBOX_MGMT.ADD.DETAILS.DESC"),e.globalConfig.installationName)},null,8,["header-title","header-content"])]),c("div",BG,[c("div",FG,[c("div",{class:re(["input-wrap",{error:s.v$.selectedPage.$error}])},[be(v(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PAGE"))+" ",1),b(r,{modelValue:o.selectedPage,"onUpdate:modelValue":t[1]||(t[1]=p=>o.selectedPage=p),"close-on-select":"","allow-empty":"",options:a.getSelectablePages,"track-by":"id",label:"name","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_A_VALUE"),"selected-label":"",onSelect:a.setPageName},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedPage.$error?(m(),f("span",UG,v(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PLACEHOLDER")),1)):x("",!0)],2)]),c("div",GG,[c("label",{class:re({error:s.v$.pageName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.FB.INBOX_NAME"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=p=>o.pageName=p),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_NAME"),onInput:t[3]||(t[3]=(...p)=>s.v$.pageName.$touch&&s.v$.pageName.$touch(...p))},null,40,VG),[[at,o.pageName]]),s.v$.pageName.$error?(m(),f("span",HG,v(e.$t("INBOX_MGMT.ADD.FB.ADD_NAME")),1)):x("",!0)],2)]),c("div",KG,[b(d,{label:e.$t("INBOX_MGMT.ADD.FB.CREATE_INBOX")},null,8,["label"])])])],32))])):(m(),f("div",$G,[c("a",{href:"#",onClick:t[0]||(t[0]=p=>a.startLogin())},t[5]||(t[5]=[c("img",{class:"w-auto h-10",src:xG,alt:"Facebook-logo"},null,-1)])),c("p",MG,v(e.useInstallationName(e.$t("INBOX_MGMT.ADD.FB.HELP"),e.globalConfig.installationName)),1)]))])}const WG=Re(wG,[["render",zG]]),jG={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},Gy={__name:"GreetingsEditor",props:{modelValue:{type:String,default:""},richtext:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=w({get:()=>n.modelValue,set:a=>s("update:modelValue",a)});return(a,i)=>(m(),f("section",null,[e.richtext?(m(),f("div",jG,[b(wo,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value=l),"is-format-mode":"","enable-variables":"",placeholder:e.placeholder,"min-height":4},null,8,["modelValue","placeholder"])])):(m(),P(Vf,{key:1,modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=l=>o.value=l),rows:4,type:"text",class:"greetings--textarea",label:e.label,placeholder:e.placeholder,onInput:a.handleInput},null,8,["modelValue","label","placeholder","onInput"]))]))}},YG={components:{PageHeader:ta,GreetingsEditor:Gy,NextButton:he},data(){return{inboxName:"",channelWebsiteUrl:"",channelWidgetColor:"#009CE0",channelWelcomeTitle:"",channelWelcomeTagline:"",greetingEnabled:!1,greetingMessage:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"}),textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},methods:{async createChannel(){try{const e=await this.$store.dispatch("inboxes/createWebsiteChannel",{name:this.inboxName,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage,channel:{type:"web_widget",website_url:this.channelWebsiteUrl,widget_color:this.channelWidgetColor,welcome_title:this.channelWelcomeTitle,welcome_tagline:this.channelWelcomeTagline}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){Te(e.message||this.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.API.ERROR_MESSAGE"))}}}},XG={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},qG={class:"w-full"},ZG=["placeholder"],QG={class:"w-full"},JG=["placeholder"],eV={class:"w-full"},tV={class:"w-full"},nV=["placeholder"],sV={class:"w-full"},aV=["placeholder"],oV={class:"w-full"},iV={value:!0},lV={value:!1},rV={class:"help-text"},cV={class:"flex flex-row justify-end w-full gap-2 px-0 py-2 mt-4"},dV={class:"w-full"};function uV(e,t,n,s,o,a){const i=F("PageHeader"),l=F("woot-loading-state"),r=F("woot-color-picker"),d=F("GreetingsEditor"),u=F("NextButton");return m(),f("div",XG,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.DESC")},null,8,["header-title","header-content"]),e.uiFlags.isCreating?(m(),P(l,{key:0,message:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.LOADING_MESSAGE")},null,8,["message"])):x("",!0),e.uiFlags.isCreating?x("",!0):(m(),f("form",{key:1,class:"flex flex-wrap flex-col mx-0",onSubmit:t[7]||(t[7]=Ke((...p)=>a.createChannel&&a.createChannel(...p),["prevent"]))},[c("div",qG,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.inboxName=p),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER")},null,8,ZG),[[at,o.inboxName]])])]),c("div",QG,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>o.channelWebsiteUrl=p),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,JG),[[at,o.channelWebsiteUrl]])])]),c("div",eV,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),b(r,{modelValue:o.channelWidgetColor,"onUpdate:modelValue":t[2]||(t[2]=p=>o.channelWidgetColor=p)},null,8,["modelValue"])])]),c("div",tV,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[3]||(t[3]=p=>o.channelWelcomeTitle=p),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,nV),[[at,o.channelWelcomeTitle]])])]),c("div",sV,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=p=>o.channelWelcomeTagline=p),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER")},null,8,aV),[[at,o.channelWelcomeTagline]])])]),c("label",oV,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[5]||(t[5]=p=>o.greetingEnabled=p)},[c("option",iV,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),c("option",lV,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[Mt,o.greetingEnabled]]),c("p",rV,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),o.greetingEnabled?(m(),P(d,{key:0,modelValue:o.greetingMessage,"onUpdate:modelValue":t[6]||(t[6]=p=>o.greetingMessage=p),class:"w-full",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!a.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])):x("",!0),c("div",cV,[c("div",dV,[b(u,{type:"submit","is-loading":e.uiFlags.isCreating,disabled:!o.channelWebsiteUrl||!o.inboxName,solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","disabled","label"])])])],32))])}const mV=Re(YG,[["render",uV]]);class pV extends Xo{constructor(){super("twitter",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const hV=new pV,fV={components:{NextButton:he},data(){return{isRequestingAuthorization:!1}},methods:{async requestAuthorization(){try{this.isRequestingAuthorization=!0;const e=await hV.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}catch{Te(this.$t("INBOX_MGMT.ADD.TWITTER.ERROR_MESSAGE"))}finally{this.isRequestingAuthorization=!1}}}},gV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},_V={class:"login-init h-full text-center"};function vV(e,t,n,s,o,a){const i=F("NextButton");return m(),f("div",gV,[c("div",_V,[c("form",{onSubmit:t[0]||(t[0]=Ke((...l)=>a.requestAuthorization&&a.requestAuthorization(...l),["prevent"]))},[b(i,{type:"submit",icon:"i-ri-twitter-x-fill",label:"Sign in with Twitter","is-loading":o.isRequestingAuthorization},null,8,["is-loading"])],32),c("p",null,v(e.$t("INBOX_MGMT.ADD.TWITTER.HELP")),1)])])}const bV=Re(fV,[["render",vV],["__scopeId","data-v-6ed7a9bc"]]),EV=(e="")=>e?e.startsWith("http"):!0,TV={components:{PageHeader:ta,NextButton:he},setup(){return{v$:Lt()}},data(){return{channelName:"",webhookUrl:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:it},webhookUrl:{shouldBeWebhookUrl:EV}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"api",webhook_url:this.webhookUrl}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{Te(this.$t("INBOX_MGMT.ADD.API_CHANNEL.API.ERROR_MESSAGE"))}}}},yV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},AV={class:"flex-shrink-0 flex-grow-0"},SV=["placeholder"],IV={key:0,class:"message"},CV={class:"flex-shrink-0 flex-grow-0"},NV=["placeholder"],OV={class:"help-text"},xV={class:"w-full mt-4"};function wV(e,t,n,s,o,a){const i=F("PageHeader"),l=F("NextButton");return m(),f("div",yV,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.API_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.API_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=Ke(r=>a.createChannel(),["prevent"]))},[c("div",AV,[c("label",{class:re({error:s.v$.channelName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,SV),[[at,o.channelName]]),s.v$.channelName.$error?(m(),f("span",IV,v(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.ERROR")),1)):x("",!0)],2)]),c("div",CV,[c("label",{class:re({error:s.v$.webhookUrl.$error})},[be(v(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.webhookUrl=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.webhookUrl.$touch&&s.v$.webhookUrl.$touch(...r))},null,40,NV),[[at,o.webhookUrl]])],2),c("p",OV,v(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.SUBTITLE")),1)]),c("div",xV,[b(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.API_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const RV=Re(TV,[["render",wV]]),$V={components:{PageHeader:ta,NextButton:he},setup(){return{v$:Lt()}},data(){return{channelName:"",email:"",alertMessage:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:it},email:{required:it,email:xi}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"email",email:this.email}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.API.ERROR_MESSAGE"),Te(this.alertMessage)}}}},MV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},kV={class:"flex-shrink-0 flex-grow-0"},LV=["placeholder"],DV={key:0,class:"message"},PV={class:"flex-shrink-0 flex-grow-0 mb-4"},BV=["placeholder"],FV={class:"help-text"},UV={class:"w-full mt-4"};function GV(e,t,n,s,o,a){const i=F("PageHeader"),l=F("NextButton");return m(),f("div",MV,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=Ke(r=>a.createChannel(),["prevent"]))},[c("div",kV,[c("label",{class:re({error:s.v$.channelName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,LV),[[at,o.channelName]]),s.v$.channelName.$error?(m(),f("span",DV,v(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.ERROR")),1)):x("",!0)],2)]),c("div",PV,[c("label",{class:re({error:s.v$.email.$error})},[be(v(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.email=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.email.$touch&&s.v$.email.$touch(...r))},null,40,BV),[[at,o.email]]),c("p",FV,v(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.SUBTITLE")),1)],2)]),c("div",UV,[b(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const VV=Re($V,[["render",GV]]);let HV=class extends Xo{constructor(){super("microsoft",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}};const Vy=new HV;class KV extends Xo{constructor(){super("google",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const Hy=new KV,zV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Ky={__name:"OAuthChannel",props:{provider:{type:String,required:!0,validate:e=>["microsoft","google"].includes(e)},title:{type:String,required:!0},description:{type:String,required:!0},submitButtonText:{type:String,required:!0},errorMessage:{type:String,required:!0},inputPlaceholder:{type:String,required:!0}},setup(e){const t=e,n=U(!1),s=U(""),o=w(()=>t.provider==="microsoft"?Vy:Hy);async function a(){try{n.value=!0;const i=await o.value.generateAuthorization({email:s.value}),{data:{url:l}}=i;window.location.href=l}catch{Te(t.errorMessage)}finally{n.value=!1}}return(i,l)=>{const r=F("woot-input");return m(),f("div",zV,[b(ta,{"header-title":e.title,"header-content":e.description},null,8,["header-title","header-content"]),c("form",{class:"mt-6",onSubmit:Ke(a,["prevent"])},[b(r,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d),type:"email",placeholder:e.inputPlaceholder},null,8,["modelValue","placeholder"]),b(he,{"is-loading":n.value,type:"submit",solid:"",blue:"",label:e.submitButtonText},null,8,["is-loading","label"])],32)])}}},WV=Object.assign({name:"MicrosoftOAuthChannel"},{__name:"Microsoft",setup(e){return(t,n)=>(m(),P(Ky,{provider:"microsoft",title:t.$t("INBOX_MGMT.ADD.MICROSOFT.TITLE"),description:t.$t("INBOX_MGMT.ADD.MICROSOFT.DESCRIPTION"),"input-placeholder":t.$t("INBOX_MGMT.ADD.MICROSOFT.EMAIL_PLACEHOLDER"),"submit-button-text":t.$t("INBOX_MGMT.ADD.MICROSOFT.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE")},null,8,["title","description","input-placeholder","submit-button-text","error-message"]))}}),jV=Object.assign({name:"GoogleOAuthChannel"},{__name:"Google",setup(e){return(t,n)=>(m(),P(Ky,{provider:"google",title:t.$t("INBOX_MGMT.ADD.GOOGLE.TITLE"),description:t.$t("INBOX_MGMT.ADD.GOOGLE.DESCRIPTION"),"input-placeholder":t.$t("INBOX_MGMT.ADD.GOOGLE.EMAIL_PLACEHOLDER"),"submit-button-text":t.$t("INBOX_MGMT.ADD.GOOGLE.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE")},null,8,["title","description","input-placeholder","submit-button-text","error-message"]))}}),YV={props:{title:{type:String,required:!0},src:{type:String,required:!0}}},XV={class:"bg-white dark:bg-slate-900 cursor-pointer flex flex-col justify-end transition-all duration-200 ease-in -m-px py-4 px-0 items-center border border-solid border-slate-25 dark:border-slate-800 hover:border-woot-500 dark:hover:border-woot-500 hover:shadow-md hover:z-50 disabled:opacity-60"},qV=["src","alt"],ZV={class:"text-slate-800 dark:text-slate-100 text-base text-center capitalize"};function QV(e,t,n,s,o,a){return m(),f("button",XV,[c("img",{src:n.src,alt:n.title,class:"w-1/2 my-4 mx-auto"},null,8,qV),c("h3",ZV,v(n.title),1)])}const zy=Re(YV,[["render",QV],["__scopeId","data-v-f57e479b"]]),JV={key:0,class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},eH={class:"grid max-w-3xl grid-cols-4 mx-0 mt-6"},tH={__name:"Email",setup(e){const t=U(""),n=vn(),{t:s}=He(),o=n["globalConfig/get"],a=n["globalConfig/isAChatwootInstance"],i=w(()=>[{title:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT"),isEnabled:!!o.value.azureAppId,key:"microsoft",src:"/assets/images/dashboard/channels/microsoft.png"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE"),isEnabled:!!window.chatwootConfig.googleOAuthClientId,key:"google",src:"/assets/images/dashboard/channels/google.png"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS"),isEnabled:!0,key:"other_provider",src:"/assets/images/dashboard/channels/email.png"}].filter(r=>a.value?!0:r.isEnabled));function l(r){r.isEnabled&&(t.value=r.key)}return(r,d)=>t.value?t.value==="microsoft"?(m(),P(WV,{key:1})):t.value==="google"?(m(),P(jV,{key:2})):t.value==="other_provider"?(m(),P(VV,{key:3})):x("",!0):(m(),f("div",JV,[b(ta,{class:"max-w-4xl","header-title":r.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.TITLE"),"header-content":r.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.DESCRIPTION")},null,8,["header-title","header-content"]),c("div",eH,[(m(!0),f(pe,null,ye(i.value,u=>(m(),P(zy,{key:u.key,class:re({inactive:!u.isEnabled}),title:u.title,src:u.src,onClick:()=>l(u)},null,8,["class","title","src","onClick"]))),128))])]))}},nH=(e="")=>e.startsWith("+"),sH={components:{NextButton:he},setup(){return{v$:Lt()}},data(){return{accountId:"",apiKey:"",apiSecret:"",applicationId:"",inboxName:"",phoneNumber:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:it},phoneNumber:{required:it,shouldStartWithPlusSign:nH},apiKey:{required:it},apiSecret:{required:it},applicationId:{required:it},accountId:{required:it}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"sms",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey,api_secret:this.apiSecret,application_id:this.applicationId,account_id:this.accountId}}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{Te(this.$t("INBOX_MGMT.ADD.SMS.API.ERROR_MESSAGE"))}}}},aH={class:"flex-shrink-0 flex-grow-0"},oH=["placeholder"],iH={key:0,class:"message"},lH={class:"flex-shrink-0 flex-grow-0"},rH=["placeholder"],cH={key:0,class:"message"},dH={class:"flex-shrink-0 flex-grow-0"},uH=["placeholder"],mH={key:0,class:"message"},pH={class:"flex-shrink-0 flex-grow-0"},hH=["placeholder"],fH={key:0,class:"message"},gH={class:"flex-shrink-0 flex-grow-0"},_H=["placeholder"],vH={key:0,class:"message"},bH={class:"flex-shrink-0 flex-grow-0"},EH=["placeholder"],TH={key:0,class:"message"},yH={class:"w-full mt-4"};function AH(e,t,n,s,o,a){const i=F("NextButton");return m(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[12]||(t[12]=Ke(l=>a.createChannel(),["prevent"]))},[c("div",aH,[c("label",{class:re({error:s.v$.inboxName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.inboxName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...l))},null,40,oH),[[at,o.inboxName]]),s.v$.inboxName.$error?(m(),f("span",iH,v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.ERROR")),1)):x("",!0)],2)]),c("div",lH,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[be(v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,rH),[[at,o.phoneNumber]]),s.v$.phoneNumber.$error?(m(),f("span",cH,v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.ERROR")),1)):x("",!0)],2)]),c("div",dH,[c("label",{class:re({error:s.v$.accountId.$error})},[be(v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.accountId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.accountId.$touch&&s.v$.accountId.$touch(...l))},null,40,uH),[[at,o.accountId]]),s.v$.accountId.$error?(m(),f("span",mH,v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.ERROR")),1)):x("",!0)],2)]),c("div",pH,[c("label",{class:re({error:s.v$.applicationId.$error})},[be(v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.applicationId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...l)=>s.v$.applicationId.$touch&&s.v$.applicationId.$touch(...l))},null,40,hH),[[at,o.applicationId]]),s.v$.applicationId.$error?(m(),f("span",fH,v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.ERROR")),1)):x("",!0)],2)]),c("div",gH,[c("label",{class:re({error:s.v$.apiKey.$error})},[be(v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.apiKey=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...l)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...l))},null,40,_H),[[at,o.apiKey]]),s.v$.apiKey.$error?(m(),f("span",vH,v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.ERROR")),1)):x("",!0)],2)]),c("div",bH,[c("label",{class:re({error:s.v$.apiSecret.$error})},[be(v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>o.apiSecret=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...l)=>s.v$.apiSecret.$touch&&s.v$.apiSecret.$touch(...l))},null,40,EH),[[at,o.apiSecret]]),s.v$.apiSecret.$error?(m(),f("span",TH,v(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.ERROR")),1)):x("",!0)],2)]),c("div",yH,[b(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const SH=Re(sH,[["render",AH]]),IH={components:{NextButton:he},props:{type:{type:String,required:!0}},setup(){return{v$:Lt()}},data(){return{accountSID:"",apiKeySID:"",authToken:"",medium:this.type,channelName:"",messagingServiceSID:"",useMessagingService:!1,useAPIKey:!1,phoneNumber:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"}),authTokeni18nKey(){return this.useAPIKey?"API_KEY_SECRET":"AUTH_TOKEN"}},validations(){let e={channelName:{required:it},authToken:{required:it},accountSID:{required:it},medium:{required:it}};return this.phoneNumber?e={...e,phoneNumber:{required:it,isPhoneE164OrEmpty:qf},messagingServiceSID:{}}:e={...e,messagingServiceSID:{required:it},phoneNumber:{}},this.useAPIKey&&(e={...e,apiKeySID:{required:it}}),e},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createTwilioChannel",{twilio_channel:{name:this.channelName,medium:this.medium,account_sid:this.accountSID,api_key_sid:this.apiKeySID,auth_token:this.authToken,messaging_service_sid:this.messagingServiceSID,phone_number:this.messagingServiceSID?null:`+${this.phoneNumber.replace(/\D/g,"")}`}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){const t=Qf(e)||this.$t("INBOX_MGMT.ADD.TWILIO.API.ERROR_MESSAGE");Te(t)}}}},CH={class:"flex-shrink-0 flex-grow-0"},NH=["placeholder"],OH={key:0,class:"message"},xH={class:"flex-shrink-0 flex-grow-0"},wH=["placeholder"],RH={key:0,class:"message"},$H={key:0,class:"flex-shrink-0 flex-grow-0"},MH=["placeholder"],kH={key:0,class:"message"},LH={class:"max-w-[65%] w-full messagingServiceHelptext"},DH={for:"useMessagingService"},PH={class:"flex-shrink-0 flex-grow-0"},BH=["placeholder"],FH={key:0,class:"message"},UH={class:"max-w-[65%] w-full messagingServiceHelptext"},GH={for:"useAPIKey"},VH={key:1,class:"flex-shrink-0 flex-grow-0"},HH=["placeholder"],KH={key:0,class:"message"},zH={class:"flex-shrink-0 flex-grow-0"},WH=["placeholder"],jH={key:0,class:"message"},YH={class:"w-full mt-4"};function XH(e,t,n,s,o,a){const i=F("NextButton");return m(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[14]||(t[14]=Ke(l=>a.createChannel(),["prevent"]))},[c("div",CH,[c("label",{class:re({error:s.v$.channelName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.channelName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...l))},null,40,NH),[[at,o.channelName]]),s.v$.channelName.$error?(m(),f("span",OH,v(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.ERROR")),1)):x("",!0)],2)]),c("div",xH,[o.useMessagingService?(m(),f("label",{key:0,class:re({error:s.v$.messagingServiceSID.$error})},[be(v(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.messagingServiceSID=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.messagingServiceSID.$touch&&s.v$.messagingServiceSID.$touch(...l))},null,40,wH),[[at,o.messagingServiceSID]]),s.v$.messagingServiceSID.$error?(m(),f("span",RH,v(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.ERROR")),1)):x("",!0)],2)):x("",!0)]),o.useMessagingService?x("",!0):(m(),f("div",$H,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[be(v(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,MH),[[at,o.phoneNumber]]),s.v$.phoneNumber.$error?(m(),f("span",kH,v(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.ERROR")),1)):x("",!0)],2)])),c("div",LH,[c("label",DH,[ie(c("input",{id:"useMessagingService","onUpdate:modelValue":t[6]||(t[6]=l=>o.useMessagingService=l),type:"checkbox",class:"checkbox"},null,512),[[Kt,o.useMessagingService]]),be(" "+v(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.USE_MESSAGING_SERVICE")),1)])]),c("div",PH,[c("label",{class:re({error:s.v$.accountSID.$error})},[be(v(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.accountSID=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.PLACEHOLDER"),onBlur:t[8]||(t[8]=(...l)=>s.v$.accountSID.$touch&&s.v$.accountSID.$touch(...l))},null,40,BH),[[at,o.accountSID]]),s.v$.accountSID.$error?(m(),f("span",FH,v(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.ERROR")),1)):x("",!0)],2)]),c("div",UH,[c("label",GH,[ie(c("input",{id:"useAPIKey","onUpdate:modelValue":t[9]||(t[9]=l=>o.useAPIKey=l),type:"checkbox",class:"checkbox"},null,512),[[Kt,o.useAPIKey]]),be(" "+v(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.USE_API_KEY")),1)])]),o.useAPIKey?(m(),f("div",VH,[c("label",{class:re({error:s.v$.apiKeySID.$error})},[be(v(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>o.apiKeySID=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...l)=>s.v$.apiKeySID.$touch&&s.v$.apiKeySID.$touch(...l))},null,40,HH),[[at,o.apiKeySID]]),s.v$.apiKeySID.$error?(m(),f("span",KH,v(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.ERROR")),1)):x("",!0)],2)])):x("",!0),c("div",zH,[c("label",{class:re({error:s.v$.authToken.$error})},[be(v(e.$t(`INBOX_MGMT.ADD.TWILIO.${a.authTokeni18nKey}.LABEL`))+" ",1),ie(c("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>o.authToken=l),type:"text",placeholder:e.$t(`INBOX_MGMT.ADD.TWILIO.${a.authTokeni18nKey}.PLACEHOLDER`),onBlur:t[13]||(t[13]=(...l)=>s.v$.authToken.$touch&&s.v$.authToken.$touch(...l))},null,40,WH),[[at,o.authToken]]),s.v$.authToken.$error?(m(),f("span",jH,v(e.$t(`INBOX_MGMT.ADD.TWILIO.${a.authTokeni18nKey}.ERROR`)),1)):x("",!0)],2)]),c("div",YH,[b(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TWILIO.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const Wy=Re(IH,[["render",XH],["__scopeId","data-v-42946ab0"]]),qH={components:{PageHeader:ta,Twilio:Wy,BandwidthSms:SH},data(){return{provider:"twilio"}}},ZH={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},QH={class:"flex-shrink-0 flex-grow-0"},JH={value:"twilio"},eK={value:"360dialog"};function tK(e,t,n,s,o,a){const i=F("PageHeader"),l=F("Twilio"),r=F("BandwidthSms");return m(),f("div",ZH,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.SMS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.SMS.DESC")},null,8,["header-title","header-content"]),c("div",QH,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.provider=d)},[c("option",JH,v(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.TWILIO")),1),c("option",eK,v(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.BANDWIDTH")),1)],512),[[Mt,o.provider]])])]),o.provider==="twilio"?(m(),P(l,{key:0,type:"sms"})):(m(),P(r,{key:1}))])}const nK=Re(qH,[["render",tK]]),sK={components:{NextButton:he},setup(){return{v$:Lt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:it},phoneNumber:{required:it,isPhoneE164OrEmpty:qf},apiKey:{required:it}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"whatsapp",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey}}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){Te(e.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},aK={class:"flex-shrink-0 flex-grow-0"},oK=["placeholder"],iK={key:0,class:"message"},lK={class:"flex-shrink-0 flex-grow-0"},rK=["placeholder"],cK={key:0,class:"message"},dK={class:"flex-shrink-0 flex-grow-0"},uK=["placeholder"],mK={key:0,class:"message"},pK={class:"w-full"};function hK(e,t,n,s,o,a){const i=F("NextButton");return m(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[6]||(t[6]=Ke(l=>a.createChannel(),["prevent"]))},[c("div",aK,[c("label",{class:re({error:s.v$.inboxName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.inboxName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...l))},null,40,oK),[[at,o.inboxName]]),s.v$.inboxName.$error?(m(),f("span",iK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):x("",!0)],2)]),c("div",lK,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[be(v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,rK),[[at,o.phoneNumber]]),s.v$.phoneNumber.$error?(m(),f("span",cK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):x("",!0)],2)]),c("div",dK,[c("label",{class:re({error:s.v$.apiKey.$error})},[c("span",null,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.apiKey=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...l))},null,40,uK),[[at,o.apiKey]]),s.v$.apiKey.$error?(m(),f("span",mK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):x("",!0)],2)]),c("div",pK,[b(i,{type:"submit",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON"),"is-loading":e.uiFlags.isCreating},null,8,["label","is-loading"])])],32)}const fK=Re(sK,[["render",hK]]),gK={components:{NextButton:he},setup(){return{v$:Lt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:"",phoneNumberId:"",businessAccountId:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:it},phoneNumber:{required:it,isPhoneE164OrEmpty:qf},apiKey:{required:it},phoneNumberId:{required:it,isNumber:ev},businessAccountId:{required:it,isNumber:ev}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"whatsapp",phone_number:this.phoneNumber,provider:"whatsapp_cloud",provider_config:{api_key:this.apiKey,phone_number_id:this.phoneNumberId,business_account_id:this.businessAccountId}}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){Te(e.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},_K={class:"flex-shrink-0 flex-grow-0"},vK=["placeholder"],bK={key:0,class:"message"},EK={class:"flex-shrink-0 flex-grow-0"},TK=["placeholder"],yK={key:0,class:"message"},AK={class:"flex-shrink-0 flex-grow-0"},SK=["placeholder"],IK={key:0,class:"message"},CK={class:"flex-shrink-0 flex-grow-0"},NK=["placeholder"],OK={key:0,class:"message"},xK={class:"flex-shrink-0 flex-grow-0"},wK=["placeholder"],RK={key:0,class:"message"},$K={class:"w-full mt-4"};function MK(e,t,n,s,o,a){const i=F("NextButton");return m(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[10]||(t[10]=Ke(l=>a.createChannel(),["prevent"]))},[c("div",_K,[c("label",{class:re({error:s.v$.inboxName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.inboxName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...l))},null,40,vK),[[at,o.inboxName]]),s.v$.inboxName.$error?(m(),f("span",bK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):x("",!0)],2)]),c("div",EK,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[be(v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,TK),[[at,o.phoneNumber]]),s.v$.phoneNumber.$error?(m(),f("span",yK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):x("",!0)],2)]),c("div",AK,[c("label",{class:re({error:s.v$.phoneNumberId.$error})},[c("span",null,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.LABEL")),1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.phoneNumberId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.phoneNumberId.$touch&&s.v$.phoneNumberId.$touch(...l))},null,40,SK),[[at,o.phoneNumberId]]),s.v$.phoneNumberId.$error?(m(),f("span",IK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.ERROR")),1)):x("",!0)],2)]),c("div",CK,[c("label",{class:re({error:s.v$.businessAccountId.$error})},[c("span",null,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.LABEL")),1),ie(c("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.businessAccountId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...l)=>s.v$.businessAccountId.$touch&&s.v$.businessAccountId.$touch(...l))},null,40,NK),[[at,o.businessAccountId]]),s.v$.businessAccountId.$error?(m(),f("span",OK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.ERROR")),1)):x("",!0)],2)]),c("div",xK,[c("label",{class:re({error:s.v$.apiKey.$error})},[c("span",null,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),ie(c("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.apiKey=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...l)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...l))},null,40,wK),[[at,o.apiKey]]),s.v$.apiKey.$error?(m(),f("span",RK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):x("",!0)],2)]),c("div",$K,[b(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const kK=Re(gK,[["render",MK]]),LK={components:{PageHeader:ta,Twilio:Wy,ThreeSixtyDialogWhatsapp:fK,CloudWhatsapp:kK},data(){return{provider:"whatsapp_cloud"}}},DK={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},PK={class:"flex-shrink-0 flex-grow-0"},BK={value:"whatsapp_cloud"},FK={value:"twilio"};function UK(e,t,n,s,o,a){const i=F("PageHeader"),l=F("Twilio"),r=F("ThreeSixtyDialogWhatsapp"),d=F("CloudWhatsapp");return m(),f("div",DK,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.WHATSAPP.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.WHATSAPP.DESC")},null,8,["header-title","header-content"]),c("div",PK,[c("label",null,[be(v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.provider=u)},[c("option",BK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD")),1),c("option",FK,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO")),1)],512),[[Mt,o.provider]])])]),o.provider==="twilio"?(m(),P(l,{key:0,type:"whatsapp"})):o.provider==="360dialog"?(m(),P(r,{key:1})):(m(),P(d,{key:2}))])}const GK=Re(LK,[["render",UK]]),VK={components:{PageHeader:ta,NextButton:he},setup(){return{v$:Lt()}},data(){return{channelName:"",lineChannelId:"",lineChannelSecret:"",lineChannelToken:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:it},lineChannelId:{required:it},lineChannelSecret:{required:it},lineChannelToken:{required:it}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"line",line_channel_id:this.lineChannelId,line_channel_secret:this.lineChannelSecret,line_channel_token:this.lineChannelToken}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{Te(this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API.ERROR_MESSAGE"))}}}},HK={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},KK={class:"flex-shrink-0 flex-grow-0"},zK=["placeholder"],WK={key:0,class:"message"},jK={class:"flex-shrink-0 flex-grow-0"},YK=["placeholder"],XK={class:"flex-shrink-0 flex-grow-0"},qK=["placeholder"],ZK={class:"flex-shrink-0 flex-grow-0"},QK=["placeholder"],JK={class:"w-full mt-4"};function ez(e,t,n,s,o,a){const i=F("PageHeader"),l=F("NextButton");return m(),f("div",HK,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[8]||(t[8]=Ke(r=>a.createChannel(),["prevent"]))},[c("div",KK,[c("label",{class:re({error:s.v$.channelName.$error})},[be(v(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,zK),[[at,o.channelName]]),s.v$.channelName.$error?(m(),f("span",WK,v(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.ERROR")),1)):x("",!0)],2)]),c("div",jK,[c("label",{class:re({error:s.v$.lineChannelId.$error})},[be(v(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.lineChannelId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.lineChannelId.$touch&&s.v$.lineChannelId.$touch(...r))},null,40,YK),[[at,o.lineChannelId]])],2)]),c("div",XK,[c("label",{class:re({error:s.v$.lineChannelSecret.$error})},[be(v(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.lineChannelSecret=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.lineChannelSecret.$touch&&s.v$.lineChannelSecret.$touch(...r))},null,40,qK),[[at,o.lineChannelSecret]])],2)]),c("div",ZK,[c("label",{class:re({error:s.v$.lineChannelToken.$error})},[be(v(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.lineChannelToken=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...r)=>s.v$.lineChannelToken.$touch&&s.v$.lineChannelToken.$touch(...r))},null,40,QK),[[at,o.lineChannelToken]])],2)]),c("div",JK,[b(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const tz=Re(VK,[["render",ez]]),nz={components:{PageHeader:ta,NextButton:he},setup(){return{v$:Lt()}},data(){return{botToken:""}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},validations:{botToken:{required:it}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{channel:{type:"telegram",bot_token:this.botToken}});Jn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){Te(e.message||this.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.API.ERROR_MESSAGE"))}}}},sz={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},az={class:"flex-shrink-0 flex-grow-0"},oz=["placeholder"],iz={class:"help-text"},lz={class:"w-full mt-4"};function rz(e,t,n,s,o,a){const i=F("PageHeader"),l=F("NextButton");return m(),f("div",sz,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[2]||(t[2]=Ke(r=>a.createChannel(),["prevent"]))},[c("div",az,[c("label",{class:re({error:s.v$.botToken.$error})},[be(v(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.botToken=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.botToken.$touch&&s.v$.botToken.$touch(...r))},null,40,oz),[[at,o.botToken]])],2),c("p",iz,v(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.SUBTITLE")),1)]),c("div",lz,[b(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const cz=Re(nz,[["render",rz]]);class dz extends Xo{constructor(){super("instagram",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const jy=new dz,uz={mixins:[Yo],setup(){const{accountId:e}=Ls();return{accountId:e,v$:Lt()}},data(){return{isCreating:!1,hasError:!1,errorStateMessage:"",errorStateDescription:"",isRequestingAuthorization:!1}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("error_message");n&&(this.hasError=!0,t==="400"?(this.errorStateMessage=n,this.errorStateDescription=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH")):(this.errorStateMessage=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_MESSAGE"),this.errorStateDescription=n));const s=window.location.pathname;window.history.replaceState({},document.title,s)},methods:{async requestAuthorization(){this.isRequestingAuthorization=!0;const e=await jy.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}}},mz={class:"border border-slate-25 dark:border-slate-800/60 bg-white dark:bg-slate-900 h-full p-6 w-full max-w-full md:w-3/4 md:max-w-[75%] flex-shrink-0 flex-grow-0"},pz={class:"flex flex-col items-center justify-start h-full text-center"},hz={key:0,class:"max-w-lg mx-auto text-center"},fz={key:0},gz={key:1,class:"flex flex-col items-center justify-center px-8 py-10 text-center shadow rounded-3xl outline outline-1 outline-n-weak"},_z={class:"text-2xl font-medium"},vz={class:"py-6 text-sm text-n-slate-11"},bz=["disabled"],Ez={class:"text-base font-medium"},Tz={key:0,class:"ml-2"};function yz(e,t,n,s,o,a){const i=ct("dompurify-html");return m(),f("div",mz,[c("div",pz,[o.hasError?(m(),f("div",hz,[c("h5",null,v(o.errorStateMessage),1),o.errorStateDescription?ie((m(),f("p",fz,null,512)),[[i,o.errorStateDescription]]):x("",!0)])):(m(),f("div",gz,[c("h6",_z,v(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONNECT_YOUR_INSTAGRAM_PROFILE")),1),c("p",vz,v(e.$t("INBOX_MGMT.ADD.INSTAGRAM.HELP")),1),c("button",{class:"flex items-center justify-center px-8 py-3.5 gap-2 text-white rounded-full bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] hover:shadow-lg transition-all duration-300 min-w-[240px] overflow-hidden",disabled:o.isRequestingAuthorization,onClick:t[0]||(t[0]=l=>a.requestAuthorization())},[t[2]||(t[2]=c("span",{class:"i-ri-instagram-line size-5"},null,-1)),c("span",Ez,v(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONTINUE_WITH_INSTAGRAM")),1),o.isRequestingAuthorization?(m(),f("span",Tz,t[1]||(t[1]=[c("svg",{class:"w-5 h-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):x("",!0)],8,bz)]))])])}const Az=Re(uz,[["render",yz]]),Sz={facebook:WG,website:mV,twitter:bV,api:RV,email:tH,sms:nK,whatsapp:GK,line:tz,telegram:cz,instagram:Az},Iz=No({name:"NewChannelView",props:{channelName:{type:String,required:!0}},render(){const e=Sz[this.channelName];return e?kn(e):null}}),Cz={components:{BackButton:ir,NextButton:he},props:{headerTitle:{default:"",type:String},buttonRoute:{default:"",type:String},buttonText:{default:"",type:String},icon:{default:"",type:String},showBackButton:{type:Boolean,default:!1},showNewButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},backButtonLabel:{type:String,default:""},showSidemenuIcon:{type:Boolean,default:!0}},setup(){const{isAdmin:e}=xo();return{isAdmin:e}},computed:{iconClass(){return`icon ${this.icon} header--icon`}}},Nz={class:"flex justify-between items-center h-20 min-h-[3.5rem] px-4 py-2 bg-n-background"},Oz={class:"flex items-center mb-0 text-2xl text-n-slate-12"},xz={class:"text-xl font-medium text-slate-900 dark:text-slate-100"};function wz(e,t,n,s,o,a){const i=F("woot-sidemenu-icon"),l=F("BackButton"),r=F("NextButton"),d=F("router-link");return m(),f("div",Nz,[c("h1",Oz,[n.showSidemenuIcon?(m(),P(i,{key:0})):x("",!0),n.showBackButton?(m(),P(l,{key:1,"button-label":n.backButtonLabel,"back-url":n.backUrl,class:"ml-2 mr-4"},null,8,["button-label","back-url"])):x("",!0),et(e.$slots,"default"),c("span",xz,v(n.headerTitle),1)]),n.showNewButton&&s.isAdmin?(m(),P(d,{key:0,to:n.buttonRoute},{default:j(()=>[b(r,{teal:"",icon:"i-lucide-circle-plus",class:"button--fixed-top",label:n.buttonText},null,8,["label"])]),_:1},8,["to"])):x("",!0)])}const Rz=Re(Cz,[["render",wz]]),$z={class:"flex flex-1 flex-col m-0 bg-n-background overflow-auto"},Pc={__name:"Wrapper",props:{headerTitle:{type:String,default:""},headerButtonText:{type:String,default:""},icon:{type:String,default:""},keepAlive:{type:Boolean,default:!0},newButtonRoutes:{type:Array,default:()=>[]},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},showSidemenuIcon:{type:Boolean,default:!0},fullWidth:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=He(),s=w(()=>t.newButtonRoutes.length&&!t.showBackButton),o=w(()=>t.headerTitle||t.icon||t.showBackButton||s.value);return(a,i)=>{const l=F("router-view");return m(),f("div",$z,[c("div",{class:re(["mx-auto w-full flex flex-col flex-1",{"max-w-6xl":!e.fullWidth}])},[o.value?(m(),P(Rz,{key:0,"button-route":"new",icon:e.icon,"header-title":I(n)(e.headerTitle),"button-text":I(n)(e.headerButtonText),"show-back-button":e.showBackButton,"back-url":e.backUrl,"show-new-button":s.value,"show-sidemenu-icon":e.showSidemenuIcon,class:re(["sticky top-0 z-20",{"max-w-6xl w-full mx-auto":e.fullWidth}])},null,8,["icon","header-title","button-text","show-back-button","back-url","show-new-button","show-sidemenu-icon","class"])):x("",!0),b(l,{class:"px-5 flex-1 overflow-hidden"},{default:j(({Component:r})=>[e.keepAlive?(m(),P(Ic,{key:1},[(m(),P(hs(r),{key:a.$route.fullPath}))],1024)):(m(),P(hs(r),{key:a.$route.fullPath}))]),_:1})],2)])}}},Mz={__name:"ChannelName",props:{channelType:{type:String,required:!0},medium:{type:String,default:""}},setup(e){const t=e,n=vn(),{t:s}=He(),o=w(()=>n["globalConfig/get"].value),a={"Channel::FacebookPage":"MESSENGER","Channel::WebWidget":"WEB_WIDGET","Channel::TwitterProfile":"TWITTER_PROFILE","Channel::TwilioSms":"TWILIO_SMS","Channel::Whatsapp":"WHATSAPP","Channel::Sms":"SMS","Channel::Email":"EMAIL","Channel::Telegram":"TELEGRAM","Channel::Line":"LINE","Channel::Api":"API","Channel::Instagram":"INSTAGRAM"},i=()=>t.medium==="whatsapp"?s("INBOX_MGMT.CHANNELS.WHATSAPP"):s("INBOX_MGMT.CHANNELS.TWILIO_SMS"),l=w(()=>t.channelType==="Channel::Api"?o.value.apiChannelName||s("INBOX_MGMT.CHANNELS.API"):t.channelType==="Channel::TwilioSms"?i():s(`INBOX_MGMT.CHANNELS.${a[t.channelType]}`));return(r,d)=>(m(),f("span",null,v(l.value),1))}};function Yy(e){const t={"Channel::Api":"i-ri-cloudy-fill","Channel::Email":"i-ri-mail-fill","Channel::FacebookPage":"i-ri-messenger-fill","Channel::Line":"i-ri-line-fill","Channel::Sms":"i-ri-chat-1-fill","Channel::Telegram":"i-ri-telegram-fill","Channel::TwilioSms":"i-ri-chat-1-fill","Channel::TwitterProfile":"i-ri-twitter-x-fill","Channel::WebWidget":"i-ri-global-fill","Channel::Whatsapp":"i-ri-whatsapp-fill","Channel::Instagram":"i-ri-instagram-fill"},n={microsoft:"i-ri-microsoft-fill",google:"i-ri-google-fill"};return w(()=>{const o=e.channel_type;let a=t[o];return o==="Channel::Email"&&e.provider&&Object.keys(n).includes(e.provider)&&(a=n[e.provider]),a??"i-ri-global-fill"})}const Xy={__name:"ChannelIcon",props:{inbox:{type:Object,required:!0}},setup(e){const n=Yy(e.inbox);return(s,o)=>(m(),P(Ht,{icon:I(n)},null,8,["icon"]))}},kz={class:"min-w-full overflow-x-auto"},Lz={class:"divide-y divide-n-weak flex-1 text-slate-700 dark:text-slate-100"},Dz={class:"py-4 ltr:pr-4 rtl:pl-4"},Pz={class:"flex items-center flex-row gap-4"},Bz={key:1,class:"w-[48px] h-[48px] flex justify-center items-center bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},Fz={class:"block font-medium capitalize"},Uz={class:"py-4"},Gz={class:"flex gap-1 justify-end"},Vz={__name:"Index",setup(e){const t=vn(),n=Ot(),{t:s}=He(),{isAdmin:o}=xo(),a=U(!1),i=U({}),l=w(()=>t["inboxes/getInboxes"].value),r=w(()=>t["inboxes/getUIFlags"].value),d=w(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.YES")} ${i.value.name}`),u=w(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.NO")} ${i.value.name}`),p=w(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.MESSAGE")} ${i.value.name}?`),h=w(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{inboxName:i.value.name})}`),g=async({id:E})=>{try{await n.dispatch("inboxes/delete",E),Te(s("INBOX_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(s("INBOX_MGMT.DELETE.API.ERROR_MESSAGE"))}},_=()=>{a.value=!1,i.value={}},T=()=>{g(i.value),_()},S=E=>{a.value=!0,i.value=E};return(E,y)=>{const A=F("router-link"),C=F("woot-confirm-delete-modal"),O=ct("tooltip");return m(),P(Ha,{"no-records-found":!l.value.length,"no-records-message":E.$t("INBOX_MGMT.LIST.404"),"is-loading":r.value.isFetching},{header:j(()=>[b(Ds,{title:E.$t("INBOX_MGMT.HEADER"),description:E.$t("INBOX_MGMT.DESCRIPTION"),"link-text":E.$t("INBOX_MGMT.LEARN_MORE"),"feature-name":"inboxes"},{actions:j(()=>[I(o)?(m(),P(A,{key:0,to:{name:"settings_inbox_new"}},{default:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:E.$t("SETTINGS.INBOXES.NEW_INBOX")},null,8,["label"])]),_:1})):x("",!0)]),_:1},8,["title","description","link-text"])]),body:j(()=>[c("table",kz,[c("tbody",Lz,[(m(!0),f(pe,null,ye(l.value,N=>(m(),f("tr",{key:N.id},[c("td",Dz,[c("div",Pz,[N.avatar_url?(m(),P(Qn,{key:0,class:"bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm",src:N.avatar_url,username:N.name,size:"48px"},null,8,["src","username"])):(m(),f("div",Bz,[b(Xy,{class:"size-5",inbox:N},null,8,["inbox"])])),c("div",null,[c("span",Fz,v(N.name),1),b(Mz,{"channel-type":N.channel_type,medium:N.medium},null,8,["channel-type","medium"])])])]),c("td",Uz,[c("div",Gz,[b(A,{to:{name:"settings_inbox_show",params:{inboxId:N.id}}},{default:j(()=>[I(o)?ie((m(),P(he,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[O,E.$t("INBOX_MGMT.SETTINGS"),void 0,{top:!0}]]):x("",!0)]),_:2},1032,["to"]),I(o)?ie((m(),P(he,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:R=>S(N)},null,8,["onClick"])),[[O,E.$t("INBOX_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):x("",!0)])])]))),128))])])]),default:j(()=>[a.value?(m(),P(C,{key:0,show:a.value,"onUpdate:show":y[0]||(y[0]=N=>a.value=N),title:E.$t("INBOX_MGMT.DELETE.CONFIRM.TITLE"),message:p.value,"confirm-text":d.value,"reject-text":u.value,"confirm-value":i.value.name,"confirm-place-holder-text":h.value,onOnConfirm:T,onOnClose:_},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):x("",!0)]),_:1},8,["no-records-found","no-records-message","is-loading"])}}},Hz={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},Kz={class:"border-b border-solid border-n-weak/60"},zz={class:"max-w-6xl w-full mx-auto pt-4 pb-0 px-8"},Wz={class:"text-2xl text-slate-800 dark:text-slate-100 mb-1 font-medium"},jz={key:0,class:"w-full text-slate-600 dark:text-slate-300 text-sm mb-2"};function Yz(e,t,n,s,o,a){return m(),f("div",Kz,[c("div",zz,[c("h2",Wz,v(n.headerTitle),1),n.headerContent?(m(),f("p",jz,v(n.headerContent),1)):x("",!0),et(e.$slots,"default")])])}const Xz=Re(Hz,[["render",Yz]]),qz={props:{title:{type:String,default:""},subTitle:{type:String,default:""},showBorder:{type:Boolean,default:!0},note:{type:String,default:""}}},Zz={class:"grid grid-cols-1 lg:grid-cols-8 gap-6"},Qz={class:"col-span-2"},Jz={key:0,class:"text-base text-woot-500 dark:text-woot-500 mb-0 font-medium"},eW={class:"text-sm mb-2 text-slate-700 dark:text-slate-300 leading-5 tracking-normal mt-2"},tW={key:1},nW={class:"font-semibold"},sW={class:"col-span-6 xl:col-span-5"};function aW(e,t,n,s,o,a){return m(),f("div",{class:re(["ml-0 mr-0 py-8 w-full",{"border-b border-solid border-n-weak/60 dark:border-n-weak":n.showBorder}])},[c("div",Zz,[c("div",Qz,[n.title?(m(),f("p",Jz,v(n.title),1)):x("",!0),c("p",eW,[n.subTitle?et(e.$slots,"subTitle",{key:0},()=>[be(v(n.subTitle),1)]):x("",!0)]),n.note?(m(),f("p",tW,[c("span",nW,v(e.$t("INBOX_MGMT.NOTE")),1),be(" "+v(n.note),1)])):x("",!0)]),c("div",sW,[et(e.$slots,"default")])])],2)}const _l=Re(qz,[["render",aW]]),bc={REPLY_TO:"replyTo",REPLY_TO_OUTGOING:"replyToOutgoing"},oW={[bc.REPLY_TO]:[Dt.FB,Dt.WEB,Dt.TWITTER,Dt.WHATSAPP,Dt.TELEGRAM,Dt.API],[bc.REPLY_TO_OUTGOING]:[Dt.WEB,Dt.TWITTER,Dt.WHATSAPP,Dt.TELEGRAM,Dt.API]},Ro={computed:{channelType(){return this.inbox.channel_type},whatsAppAPIProvider(){return this.inbox.provider||""},isAMicrosoftInbox(){return this.isAnEmailChannel&&this.inbox.provider==="microsoft"},isAGoogleInbox(){return this.isAnEmailChannel&&this.inbox.provider==="google"},isAPIInbox(){return this.channelType===Dt.API},isATwitterInbox(){return this.channelType===Dt.TWITTER},isAFacebookInbox(){return this.channelType===Dt.FB},isAWebWidgetInbox(){return this.channelType===Dt.WEB},isATwilioChannel(){return this.channelType===Dt.TWILIO},isALineChannel(){return this.channelType===Dt.LINE},isAnEmailChannel(){return this.channelType===Dt.EMAIL},isATelegramChannel(){return this.channelType===Dt.TELEGRAM},isATwilioSMSChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="sms"},isASmsInbox(){return this.channelType===Dt.SMS||this.isATwilioSMSChannel},isATwilioWhatsAppChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="whatsapp"},isAWhatsAppCloudChannel(){return this.channelType===Dt.WHATSAPP&&this.whatsAppAPIProvider==="whatsapp_cloud"},is360DialogWhatsAppChannel(){return this.channelType===Dt.WHATSAPP&&this.whatsAppAPIProvider==="default"},chatAdditionalAttributes(){const{additional_attributes:e}=this.chat||{};return e||{}},isTwitterInboxTweet(){return this.chatAdditionalAttributes.type==="tweet"},twilioBadge(){return`${this.isATwilioSMSChannel?"sms":"whatsapp"}`},twitterBadge(){return`${this.isTwitterInboxTweet?"twitter-tweet":"twitter-dm"}`},facebookBadge(){return this.chatAdditionalAttributes.type||"facebook"},inboxBadge(){let e="";return this.isATwitterInbox?e=this.twitterBadge:this.isAFacebookInbox?e=this.facebookBadge:this.isATwilioChannel?e=this.twilioBadge:this.isAWhatsAppChannel&&(e="whatsapp"),e||this.channelType},isAWhatsAppChannel(){return this.channelType===Dt.WHATSAPP||this.isATwilioWhatsAppChannel},isAInstagramChannel(){return this.channelType===Dt.INSTAGRAM}},methods:{inboxHasFeature(e){var t;return((t=oW[e])==null?void 0:t.includes(this.channelType))??!1}}},sm={__name:"Banner",props:{color:{type:String,default:"slate",validator:e=>["blue","ruby","amber","slate","teal"].includes(e)},actionLabel:{type:String,default:null}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>({slate:"bg-n-slate-3 border-n-slate-4 text-n-slate-11",amber:"bg-n-amber-3 border-n-amber-4 text-n-amber-11",teal:"bg-n-teal-3 border-n-teal-4 text-n-teal-11",ruby:"bg-n-ruby-3 border-n-ruby-4 text-n-ruby-11",blue:"bg-n-blue-3 border-n-blue-4 text-n-blue-11"})[n.color]),a=w(()=>({slate:"bg-n-slate-4 hover:bg-n-slate-5 text-n-slate-11",amber:"bg-n-amber-4 hover:bg-n-amber-5 text-n-amber-11",teal:"bg-n-teal-4 hover:bg-n-teal-5 text-n-teal-11",ruby:"bg-n-ruby-4 hover:bg-n-ruby-5 text-n-ruby-11",blue:"bg-n-blue-4 hover:bg-n-blue-5 text-n-blue-11"})[n.color]),i=()=>{s("action")};return(l,r)=>(m(),f("div",{class:re(["text-sm rounded-xl flex items-center justify-between gap-2 border",[o.value,{"py-2 px-3":!e.actionLabel,"pl-3 p-2":e.actionLabel}]])},[c("div",null,[et(l.$slots,"default")]),c("div",null,[e.actionLabel?(m(),f("button",{key:0,class:re(["px-3 py-1 w-auto grid place-content-center rounded-lg",a.value]),onClick:i},v(e.actionLabel),3)):x("",!0)])],2))}},am={__name:"InboxReconnectionRequired",emits:["reauthorize"],setup(e,{emit:t}){const n=t;return(s,o)=>(m(),P(sm,{color:"ruby","action-label":s.$t("INBOX_MGMT.CLICK_TO_RECONNECT"),onAction:o[0]||(o[0]=a=>n("reauthorize"))},{default:j(()=>[be(v(s.$t("INBOX_MGMT.RECONNECTION_REQUIRED")),1)]),_:1},8,["action-label"]))}},iW={components:{InboxReconnectionRequired:am},props:{inbox:{type:Object,required:!0}},computed:{inboxId(){return this.inbox.id}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return Uy("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?Te(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(nr(e),Te(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},tryFBlogin(){FB.login(e=>{e.status==="connected"?this.reauthorizeFBPage(e.authResponse.accessToken):e.status==="not_authorized"?Te(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")):Te(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"))},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages",auth_type:"reauthorize"})},async reauthorizeFBPage(e){try{await this.$store.dispatch("inboxes/reauthorizeFacebookPage",{omniauthToken:e,inboxId:this.inboxId}),Te(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_SUCCESS"))}catch{Te(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_ERROR"))}}}};function lW(e,t,n,s,o,a){const i=F("InboxReconnectionRequired");return m(),P(i,{class:"mx-8 mt-5",onReauthorize:a.startLogin},null,8,["onReauthorize"])}const rW=Re(iW,[["render",lW],["__scopeId","data-v-9e13ef14"]]),cW={__name:"Reauthorize",setup(e){const{t}=He(),n=U(!1);async function s(){try{n.value=!0;const o=await jy.generateAuthorization(),{data:{url:a}}=o;window.location.href=a}catch{Te(t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH"))}finally{n.value=!1}}return(o,a)=>(m(),P(am,{class:"mx-8 mt-5",onReauthorize:s}))}},qy={__name:"DuplicateInboxBanner",props:{content:{type:String,default:""}},setup(e){return(t,n)=>(m(),P(sm,{color:"ruby"},{default:j(()=>[be(v(e.content),1)]),_:1}))}},dW={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=He(),s=U(!1);async function o(){try{s.value=!0;const a=await Vy.generateAuthorization({email:t.inbox.email}),{data:{url:i}}=a;window.location.href=i}catch{Te(n("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE"))}finally{s.value=!1}}return(a,i)=>(m(),P(am,{class:"mx-8 mt-5",onReauthorize:o}))}},uW={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=He(),s=U(!1),o=w(()=>t.inbox.imap_login&&t.inbox.imap_enabled?t.inbox.imap_login:t.inbox.email);async function a(){try{s.value=!0;const i=await Hy.generateAuthorization({email:o.value}),{data:{url:l}}=i;window.location.href=l}catch{Te(n("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE"))}finally{s.value=!1}}return(i,l)=>(m(),P(am,{class:"mx-8 mt-5",onReauthorize:a}))}};var Zy={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function N1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N1(Object(n),!0).forEach(function(s){mW(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zd=function(t){return typeof t}:zd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function mW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(){return Ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ga.apply(this,arguments)}function pW(e,t){if(e==null)return{};var n={},s=Object.keys(e),o,a;for(a=0;a<s.length;a++)o=s[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function hW(e,t){if(e==null)return{};var n=pW(e,t),s,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function fW(e){return gW(e)||_W(e)||vW(e)||bW()}function gW(e){if(Array.isArray(e))return mf(e)}function _W(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vW(e,t){if(e){if(typeof e=="string")return mf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mf(e,t)}}function mf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function bW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var EW="1.14.0";function Fo(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Zo=Fo(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Bc=Fo(/Edge/i),O1=Fo(/firefox/i),qr=Fo(/safari/i)&&!Fo(/chrome/i)&&!Fo(/android/i),Qy=Fo(/iP(ad|od|hone)/i),TW=Fo(/chrome/i)&&Fo(/android/i),Jy={capture:!1,passive:!1};function mn(e,t,n){e.addEventListener(t,n,!Zo&&Jy)}function dn(e,t,n){e.removeEventListener(t,n,!Zo&&Jy)}function Su(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function yW(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Xa(e,t,n,s){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Su(e,t):Su(e,t))||s&&e===n)return e;if(e===n)break}while(e=yW(e))}return null}var x1=/\s+/g;function Xn(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var s=(" "+e.className+" ").replace(x1," ").replace(" "+t+" "," ");e.className=(s+(n?" "+t:"")).replace(x1," ")}}function Bt(e,t,n){var s=e&&e.style;if(s){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in s)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),s[t]=n+(typeof n=="string"?"":"px")}}function al(e,t){var n="";if(typeof e=="string")n=e;else do{var s=Bt(e,"transform");s&&s!=="none"&&(n=s+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function eA(e,t,n){if(e){var s=e.getElementsByTagName(t),o=0,a=s.length;if(n)for(;o<a;o++)n(s[o],o);return s}return[]}function yo(){var e=document.scrollingElement;return e||document.documentElement}function zn(e,t,n,s,o){if(!(!e.getBoundingClientRect&&e!==window)){var a,i,l,r,d,u,p;if(e!==window&&e.parentNode&&e!==yo()?(a=e.getBoundingClientRect(),i=a.top,l=a.left,r=a.bottom,d=a.right,u=a.height,p=a.width):(i=0,l=0,r=window.innerHeight,d=window.innerWidth,u=window.innerHeight,p=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!Zo))do if(o&&o.getBoundingClientRect&&(Bt(o,"transform")!=="none"||n&&Bt(o,"position")!=="static")){var h=o.getBoundingClientRect();i-=h.top+parseInt(Bt(o,"border-top-width")),l-=h.left+parseInt(Bt(o,"border-left-width")),r=i+a.height,d=l+a.width;break}while(o=o.parentNode);if(s&&e!==window){var g=al(o||e),_=g&&g.a,T=g&&g.d;g&&(i/=T,l/=_,p/=_,u/=T,r=i+u,d=l+p)}return{top:i,left:l,bottom:r,right:d,width:p,height:u}}}function w1(e,t,n){for(var s=fi(e,!0),o=zn(e)[t];s;){var a=zn(s)[n],i=void 0;if(i=o>=a,!i)return s;if(s===yo())break;s=fi(s,!1)}return!1}function er(e,t,n,s){for(var o=0,a=0,i=e.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==qt.ghost&&(s||i[a]!==qt.dragged)&&Xa(i[a],n.draggable,e,!1)){if(o===t)return i[a];o++}a++}return null}function Fg(e,t){for(var n=e.lastElementChild;n&&(n===qt.ghost||Bt(n,"display")==="none"||t&&!Su(n,t));)n=n.previousElementSibling;return n||null}function as(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==qt.clone&&(!t||Su(e,t))&&n++;return n}function R1(e){var t=0,n=0,s=yo();if(e)do{var o=al(e),a=o.a,i=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*i}while(e!==s&&(e=e.parentNode));return[t,n]}function AW(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var s in t)if(t.hasOwnProperty(s)&&t[s]===e[n][s])return Number(n)}return-1}function fi(e,t){if(!e||!e.getBoundingClientRect)return yo();var n=e,s=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Bt(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return yo();if(s||t)return n;s=!0}}while(n=n.parentNode);return yo()}function SW(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Wp(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Zr;function tA(e,t){return function(){if(!Zr){var n=arguments,s=this;n.length===1?e.call(s,n[0]):e.apply(s,n),Zr=setTimeout(function(){Zr=void 0},t)}}}function IW(){clearTimeout(Zr),Zr=void 0}function nA(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ug(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function $1(e,t){Bt(e,"position","absolute"),Bt(e,"top",t.top),Bt(e,"left",t.left),Bt(e,"width",t.width),Bt(e,"height",t.height)}function jp(e){Bt(e,"position",""),Bt(e,"top",""),Bt(e,"left",""),Bt(e,"width",""),Bt(e,"height","")}var Zs="Sortable"+new Date().getTime();function CW(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(o){if(!(Bt(o,"display")==="none"||o===qt.ghost)){e.push({target:o,rect:zn(o)});var a=Co({},e[e.length-1].rect);if(o.thisAnimationDuration){var i=al(o,!0);i&&(a.top-=i.f,a.left-=i.e)}o.fromRect=a}})}},addAnimationState:function(s){e.push(s)},removeAnimationState:function(s){e.splice(AW(e,{target:s}),1)},animateAll:function(s){var o=this;if(!this.options.animation){clearTimeout(t),typeof s=="function"&&s();return}var a=!1,i=0;e.forEach(function(l){var r=0,d=l.target,u=d.fromRect,p=zn(d),h=d.prevFromRect,g=d.prevToRect,_=l.rect,T=al(d,!0);T&&(p.top-=T.f,p.left-=T.e),d.toRect=p,d.thisAnimationDuration&&Wp(h,p)&&!Wp(u,p)&&(_.top-p.top)/(_.left-p.left)===(u.top-p.top)/(u.left-p.left)&&(r=OW(_,h,g,o.options)),Wp(p,u)||(d.prevFromRect=u,d.prevToRect=p,r||(r=o.options.animation),o.animate(d,_,p,r)),r&&(a=!0,i=Math.max(i,r),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},r),d.thisAnimationDuration=r)}),clearTimeout(t),a?t=setTimeout(function(){typeof s=="function"&&s()},i):typeof s=="function"&&s(),e=[]},animate:function(s,o,a,i){if(i){Bt(s,"transition",""),Bt(s,"transform","");var l=al(this.el),r=l&&l.a,d=l&&l.d,u=(o.left-a.left)/(r||1),p=(o.top-a.top)/(d||1);s.animatingX=!!u,s.animatingY=!!p,Bt(s,"transform","translate3d("+u+"px,"+p+"px,0)"),this.forRepaintDummy=NW(s),Bt(s,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Bt(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Bt(s,"transition",""),Bt(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},i)}}}}function NW(e){return e.offsetWidth}function OW(e,t,n,s){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*s.animation}var Ol=[],Yp={initializeByDefault:!0},Fc={mount:function(t){for(var n in Yp)Yp.hasOwnProperty(n)&&!(n in t)&&(t[n]=Yp[n]);Ol.forEach(function(s){if(s.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Ol.push(t)},pluginEvent:function(t,n,s){var o=this;this.eventCanceled=!1,s.cancel=function(){o.eventCanceled=!0};var a=t+"Global";Ol.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](Co({sortable:n},s)),n.options[i.pluginName]&&n[i.pluginName][t]&&n[i.pluginName][t](Co({sortable:n},s)))})},initializePlugins:function(t,n,s,o){Ol.forEach(function(l){var r=l.pluginName;if(!(!t.options[r]&&!l.initializeByDefault)){var d=new l(t,n,t.options);d.sortable=t,d.options=t.options,t[r]=d,Ga(s,d.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var i=this.modifyOption(t,a,t.options[a]);typeof i<"u"&&(t.options[a]=i)}},getEventProperties:function(t,n){var s={};return Ol.forEach(function(o){typeof o.eventProperties=="function"&&Ga(s,o.eventProperties.call(n[o.pluginName],t))}),s},modifyOption:function(t,n,s){var o;return Ol.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(o=a.optionListeners[n].call(t[a.pluginName],s))}),o}};function Br(e){var t=e.sortable,n=e.rootEl,s=e.name,o=e.targetEl,a=e.cloneEl,i=e.toEl,l=e.fromEl,r=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,p=e.newDraggableIndex,h=e.originalEvent,g=e.putSortable,_=e.extraEventProperties;if(t=t||n&&n[Zs],!!t){var T,S=t.options,E="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!Zo&&!Bc?T=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(s,!0,!0)),T.to=i||n,T.from=l||n,T.item=o||n,T.clone=a,T.oldIndex=r,T.newIndex=d,T.oldDraggableIndex=u,T.newDraggableIndex=p,T.originalEvent=h,T.pullMode=g?g.lastPutMode:void 0;var y=Co(Co({},_),Fc.getEventProperties(s,t));for(var A in y)T[A]=y[A];n&&n.dispatchEvent(T),S[E]&&S[E].call(t,T)}}var xW=["evt"],ha=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.evt,a=hW(s,xW);Fc.pluginEvent.bind(qt)(t,n,Co({dragEl:Ct,parentEl:ts,ghostEl:on,rootEl:Kn,nextEl:ji,lastDownEl:Wd,cloneEl:ns,cloneHidden:ui,dragStarted:Fr,putSortable:Ps,activeSortable:qt.active,originalEvent:o,oldIndex:Gl,oldDraggableIndex:Qr,newIndex:ya,newDraggableIndex:ci,hideGhostForTarget:iA,unhideGhostForTarget:lA,cloneNowHidden:function(){ui=!0},cloneNowShown:function(){ui=!1},dispatchSortableEvent:function(l){aa({sortable:n,name:l,originalEvent:o})}},a))};function aa(e){Br(Co({putSortable:Ps,cloneEl:ns,targetEl:Ct,rootEl:Kn,oldIndex:Gl,oldDraggableIndex:Qr,newIndex:ya,newDraggableIndex:ci},e))}var Ct,ts,on,Kn,ji,Wd,ns,ui,Gl,ya,Qr,ci,rd,Ps,Dl=!1,Iu=!1,Cu=[],Bi,za,Xp,qp,M1,k1,Fr,xl,Jr,ec=!1,cd=!1,jd,zs,Zp=[],pf=!1,Nu=[],om=typeof document<"u",dd=Qy,L1=Bc||Zo?"cssFloat":"float",wW=om&&!TW&&!Qy&&"draggable"in document.createElement("div"),sA=function(){if(om){if(Zo)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),aA=function(t,n){var s=Bt(t),o=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),a=er(t,0,n),i=er(t,1,n),l=a&&Bt(a),r=i&&Bt(i),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+zn(a).width,u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+zn(i).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&l.float&&l.float!=="none"){var p=l.float==="left"?"left":"right";return i&&(r.clear==="both"||r.clear===p)?"vertical":"horizontal"}return a&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=o&&s[L1]==="none"||i&&s[L1]==="none"&&d+u>o)?"vertical":"horizontal"},RW=function(t,n,s){var o=s?t.left:t.top,a=s?t.right:t.bottom,i=s?t.width:t.height,l=s?n.left:n.top,r=s?n.right:n.bottom,d=s?n.width:n.height;return o===l||a===r||o+i/2===l+d/2},$W=function(t,n){var s;return Cu.some(function(o){var a=o[Zs].options.emptyInsertThreshold;if(!(!a||Fg(o))){var i=zn(o),l=t>=i.left-a&&t<=i.right+a,r=n>=i.top-a&&n<=i.bottom+a;if(l&&r)return s=o}}),s},oA=function(t){function n(a,i){return function(l,r,d,u){var p=l.options.group.name&&r.options.group.name&&l.options.group.name===r.options.group.name;if(a==null&&(i||p))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(l,r,d,u),i)(l,r,d,u);var h=(i?l:r).options.group.name;return a===!0||typeof a=="string"&&a===h||a.join&&a.indexOf(h)>-1}}var s={},o=t.group;(!o||zd(o)!="object")&&(o={name:o}),s.name=o.name,s.checkPull=n(o.pull,!0),s.checkPut=n(o.put),s.revertClone=o.revertClone,t.group=s},iA=function(){!sA&&on&&Bt(on,"display","none")},lA=function(){!sA&&on&&Bt(on,"display","")};om&&document.addEventListener("click",function(e){if(Iu)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Iu=!1,!1},!0);var Fi=function(t){if(Ct){t=t.touches?t.touches[0]:t;var n=$W(t.clientX,t.clientY);if(n){var s={};for(var o in t)t.hasOwnProperty(o)&&(s[o]=t[o]);s.target=s.rootEl=n,s.preventDefault=void 0,s.stopPropagation=void 0,n[Zs]._onDragOver(s)}}},MW=function(t){Ct&&Ct.parentNode[Zs]._isOutsideThisEl(t.target)};function qt(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ga({},t),e[Zs]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return aA(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:qt.supportPointer!==!1&&"PointerEvent"in window&&!qr,emptyInsertThreshold:5};Fc.initializePlugins(this,e,n);for(var s in n)!(s in t)&&(t[s]=n[s]);oA(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:wW,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?mn(e,"pointerdown",this._onTapStart):(mn(e,"mousedown",this._onTapStart),mn(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(mn(e,"dragover",this),mn(e,"dragenter",this)),Cu.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ga(this,CW())}qt.prototype={constructor:qt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(xl=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Ct):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,s=this.el,o=this.options,a=o.preventOnFilter,i=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,r=(l||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||r,u=o.filter;if(GW(s),!Ct&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||o.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&qr&&r&&r.tagName.toUpperCase()==="SELECT")&&(r=Xa(r,o.draggable,s,!1),!(r&&r.animated)&&Wd!==r)){if(Gl=as(r),Qr=as(r,o.draggable),typeof u=="function"){if(u.call(this,t,r,this)){aa({sortable:n,rootEl:d,name:"filter",targetEl:r,toEl:s,fromEl:s}),ha("filter",n,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(p){if(p=Xa(d,p.trim(),s,!1),p)return aa({sortable:n,rootEl:p,name:"filter",targetEl:r,fromEl:s,toEl:s}),ha("filter",n,{evt:t}),!0}),u)){a&&t.cancelable&&t.preventDefault();return}o.handle&&!Xa(d,o.handle,s,!1)||this._prepareDragStart(t,l,r)}}},_prepareDragStart:function(t,n,s){var o=this,a=o.el,i=o.options,l=a.ownerDocument,r;if(s&&!Ct&&s.parentNode===a){var d=zn(s);if(Kn=a,Ct=s,ts=Ct.parentNode,ji=Ct.nextSibling,Wd=s,rd=i.group,qt.dragged=Ct,Bi={target:Ct,clientX:(n||t).clientX,clientY:(n||t).clientY},M1=Bi.clientX-d.left,k1=Bi.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Ct.style["will-change"]="all",r=function(){if(ha("delayEnded",o,{evt:t}),qt.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!O1&&o.nativeDraggable&&(Ct.draggable=!0),o._triggerDragStart(t,n),aa({sortable:o,name:"choose",originalEvent:t}),Xn(Ct,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){eA(Ct,u.trim(),Qp)}),mn(l,"dragover",Fi),mn(l,"mousemove",Fi),mn(l,"touchmove",Fi),mn(l,"mouseup",o._onDrop),mn(l,"touchend",o._onDrop),mn(l,"touchcancel",o._onDrop),O1&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ct.draggable=!0),ha("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Bc||Zo))){if(qt.eventCanceled){this._onDrop();return}mn(l,"mouseup",o._disableDelayedDrag),mn(l,"touchend",o._disableDelayedDrag),mn(l,"touchcancel",o._disableDelayedDrag),mn(l,"mousemove",o._delayedDragTouchMoveHandler),mn(l,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&mn(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,i.delay)}else r()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ct&&Qp(Ct),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;dn(t,"mouseup",this._disableDelayedDrag),dn(t,"touchend",this._disableDelayedDrag),dn(t,"touchcancel",this._disableDelayedDrag),dn(t,"mousemove",this._delayedDragTouchMoveHandler),dn(t,"touchmove",this._delayedDragTouchMoveHandler),dn(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?mn(document,"pointermove",this._onTouchMove):n?mn(document,"touchmove",this._onTouchMove):mn(document,"mousemove",this._onTouchMove):(mn(Ct,"dragend",this),mn(Kn,"dragstart",this._onDragStart));try{document.selection?Yd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Dl=!1,Kn&&Ct){ha("dragStarted",this,{evt:n}),this.nativeDraggable&&mn(document,"dragover",MW);var s=this.options;!t&&Xn(Ct,s.dragClass,!1),Xn(Ct,s.ghostClass,!0),qt.active=this,t&&this._appendGhost(),aa({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(za){this._lastX=za.clientX,this._lastY=za.clientY,iA();for(var t=document.elementFromPoint(za.clientX,za.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(za.clientX,za.clientY),t!==n);)n=t;if(Ct.parentNode[Zs]._isOutsideThisEl(t),n)do{if(n[Zs]){var s=void 0;if(s=n[Zs]._onDragOver({clientX:za.clientX,clientY:za.clientY,target:t,rootEl:n}),s&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);lA()}},_onTouchMove:function(t){if(Bi){var n=this.options,s=n.fallbackTolerance,o=n.fallbackOffset,a=t.touches?t.touches[0]:t,i=on&&al(on,!0),l=on&&i&&i.a,r=on&&i&&i.d,d=dd&&zs&&R1(zs),u=(a.clientX-Bi.clientX+o.x)/(l||1)+(d?d[0]-Zp[0]:0)/(l||1),p=(a.clientY-Bi.clientY+o.y)/(r||1)+(d?d[1]-Zp[1]:0)/(r||1);if(!qt.active&&!Dl){if(s&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<s)return;this._onDragStart(t,!0)}if(on){i?(i.e+=u-(Xp||0),i.f+=p-(qp||0)):i={a:1,b:0,c:0,d:1,e:u,f:p};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Bt(on,"webkitTransform",h),Bt(on,"mozTransform",h),Bt(on,"msTransform",h),Bt(on,"transform",h),Xp=u,qp=p,za=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!on){var t=this.options.fallbackOnBody?document.body:Kn,n=zn(Ct,!0,dd,!0,t),s=this.options;if(dd){for(zs=t;Bt(zs,"position")==="static"&&Bt(zs,"transform")==="none"&&zs!==document;)zs=zs.parentNode;zs!==document.body&&zs!==document.documentElement?(zs===document&&(zs=yo()),n.top+=zs.scrollTop,n.left+=zs.scrollLeft):zs=yo(),Zp=R1(zs)}on=Ct.cloneNode(!0),Xn(on,s.ghostClass,!1),Xn(on,s.fallbackClass,!0),Xn(on,s.dragClass,!0),Bt(on,"transition",""),Bt(on,"transform",""),Bt(on,"box-sizing","border-box"),Bt(on,"margin",0),Bt(on,"top",n.top),Bt(on,"left",n.left),Bt(on,"width",n.width),Bt(on,"height",n.height),Bt(on,"opacity","0.8"),Bt(on,"position",dd?"absolute":"fixed"),Bt(on,"zIndex","100000"),Bt(on,"pointerEvents","none"),qt.ghost=on,t.appendChild(on),Bt(on,"transform-origin",M1/parseInt(on.style.width)*100+"% "+k1/parseInt(on.style.height)*100+"%")}},_onDragStart:function(t,n){var s=this,o=t.dataTransfer,a=s.options;if(ha("dragStart",this,{evt:t}),qt.eventCanceled){this._onDrop();return}ha("setupClone",this),qt.eventCanceled||(ns=Ug(Ct),ns.draggable=!1,ns.style["will-change"]="",this._hideClone(),Xn(ns,this.options.chosenClass,!1),qt.clone=ns),s.cloneId=Yd(function(){ha("clone",s),!qt.eventCanceled&&(s.options.removeCloneOnHide||Kn.insertBefore(ns,Ct),s._hideClone(),aa({sortable:s,name:"clone"}))}),!n&&Xn(Ct,a.dragClass,!0),n?(Iu=!0,s._loopId=setInterval(s._emulateDragOver,50)):(dn(document,"mouseup",s._onDrop),dn(document,"touchend",s._onDrop),dn(document,"touchcancel",s._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(s,o,Ct)),mn(document,"drop",s),Bt(Ct,"transform","translateZ(0)")),Dl=!0,s._dragStartId=Yd(s._dragStarted.bind(s,n,t)),mn(document,"selectstart",s),Fr=!0,qr&&Bt(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,s=t.target,o,a,i,l=this.options,r=l.group,d=qt.active,u=rd===r,p=l.sort,h=Ps||d,g,_=this,T=!1;if(pf)return;function S(Y,ee){ha(Y,_,Co({evt:t,isOwner:u,axis:g?"vertical":"horizontal",revert:i,dragRect:o,targetRect:a,canSort:p,fromSortable:h,target:s,completed:y,onMove:function(z,W){return ud(Kn,n,Ct,o,z,zn(z),t,W)},changed:A},ee))}function E(){S("dragOverAnimationCapture"),_.captureAnimationState(),_!==h&&h.captureAnimationState()}function y(Y){return S("dragOverCompleted",{insertion:Y}),Y&&(u?d._hideClone():d._showClone(_),_!==h&&(Xn(Ct,Ps?Ps.options.ghostClass:d.options.ghostClass,!1),Xn(Ct,l.ghostClass,!0)),Ps!==_&&_!==qt.active?Ps=_:_===qt.active&&Ps&&(Ps=null),h===_&&(_._ignoreWhileAnimating=s),_.animateAll(function(){S("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===Ct&&!Ct.animated||s===n&&!s.animated)&&(xl=null),!l.dragoverBubble&&!t.rootEl&&s!==document&&(Ct.parentNode[Zs]._isOutsideThisEl(t.target),!Y&&Fi(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),T=!0}function A(){ya=as(Ct),ci=as(Ct,l.draggable),aa({sortable:_,name:"change",toEl:n,newIndex:ya,newDraggableIndex:ci,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),s=Xa(s,l.draggable,n,!0),S("dragOver"),qt.eventCanceled)return T;if(Ct.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||_._ignoreWhileAnimating===s)return y(!1);if(Iu=!1,d&&!l.disabled&&(u?p||(i=ts!==Kn):Ps===this||(this.lastPutMode=rd.checkPull(this,d,Ct,t))&&r.checkPut(this,d,Ct,t))){if(g=this._getDirection(t,s)==="vertical",o=zn(Ct),S("dragOverValid"),qt.eventCanceled)return T;if(i)return ts=Kn,E(),this._hideClone(),S("revert"),qt.eventCanceled||(ji?Kn.insertBefore(Ct,ji):Kn.appendChild(Ct)),y(!0);var C=Fg(n,l.draggable);if(!C||PW(t,g,this)&&!C.animated){if(C===Ct)return y(!1);if(C&&n===t.target&&(s=C),s&&(a=zn(s)),ud(Kn,n,Ct,o,s,a,t,!!s)!==!1)return E(),n.appendChild(Ct),ts=n,A(),y(!0)}else if(C&&DW(t,g,this)){var O=er(n,0,l,!0);if(O===Ct)return y(!1);if(s=O,a=zn(s),ud(Kn,n,Ct,o,s,a,t,!1)!==!1)return E(),n.insertBefore(Ct,O),ts=n,A(),y(!0)}else if(s.parentNode===n){a=zn(s);var N=0,R,k=Ct.parentNode!==n,L=!RW(Ct.animated&&Ct.toRect||o,s.animated&&s.toRect||a,g),D=g?"top":"left",$=w1(s,"top","top")||w1(Ct,"top","top"),M=$?$.scrollTop:void 0;xl!==s&&(R=a[D],ec=!1,cd=!L&&l.invertSwap||k),N=BW(t,s,a,g,L?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,cd,xl===s);var K;if(N!==0){var B=as(Ct);do B-=N,K=ts.children[B];while(K&&(Bt(K,"display")==="none"||K===on))}if(N===0||K===s)return y(!1);xl=s,Jr=N;var H=s.nextElementSibling,G=!1;G=N===1;var V=ud(Kn,n,Ct,o,s,a,t,G);if(V!==!1)return(V===1||V===-1)&&(G=V===1),pf=!0,setTimeout(LW,30),E(),G&&!H?n.appendChild(Ct):s.parentNode.insertBefore(Ct,G?H:s),$&&nA($,0,M-$.scrollTop),ts=Ct.parentNode,R!==void 0&&!cd&&(jd=Math.abs(R-zn(s)[D])),A(),y(!0)}if(n.contains(Ct))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){dn(document,"mousemove",this._onTouchMove),dn(document,"touchmove",this._onTouchMove),dn(document,"pointermove",this._onTouchMove),dn(document,"dragover",Fi),dn(document,"mousemove",Fi),dn(document,"touchmove",Fi)},_offUpEvents:function(){var t=this.el.ownerDocument;dn(t,"mouseup",this._onDrop),dn(t,"touchend",this._onDrop),dn(t,"pointerup",this._onDrop),dn(t,"touchcancel",this._onDrop),dn(document,"selectstart",this)},_onDrop:function(t){var n=this.el,s=this.options;if(ya=as(Ct),ci=as(Ct,s.draggable),ha("drop",this,{evt:t}),ts=Ct&&Ct.parentNode,ya=as(Ct),ci=as(Ct,s.draggable),qt.eventCanceled){this._nulling();return}Dl=!1,cd=!1,ec=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hf(this.cloneId),hf(this._dragStartId),this.nativeDraggable&&(dn(document,"drop",this),dn(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qr&&Bt(document.body,"user-select",""),Bt(Ct,"transform",""),t&&(Fr&&(t.cancelable&&t.preventDefault(),!s.dropBubble&&t.stopPropagation()),on&&on.parentNode&&on.parentNode.removeChild(on),(Kn===ts||Ps&&Ps.lastPutMode!=="clone")&&ns&&ns.parentNode&&ns.parentNode.removeChild(ns),Ct&&(this.nativeDraggable&&dn(Ct,"dragend",this),Qp(Ct),Ct.style["will-change"]="",Fr&&!Dl&&Xn(Ct,Ps?Ps.options.ghostClass:this.options.ghostClass,!1),Xn(Ct,this.options.chosenClass,!1),aa({sortable:this,name:"unchoose",toEl:ts,newIndex:null,newDraggableIndex:null,originalEvent:t}),Kn!==ts?(ya>=0&&(aa({rootEl:ts,name:"add",toEl:ts,fromEl:Kn,originalEvent:t}),aa({sortable:this,name:"remove",toEl:ts,originalEvent:t}),aa({rootEl:ts,name:"sort",toEl:ts,fromEl:Kn,originalEvent:t}),aa({sortable:this,name:"sort",toEl:ts,originalEvent:t})),Ps&&Ps.save()):ya!==Gl&&ya>=0&&(aa({sortable:this,name:"update",toEl:ts,originalEvent:t}),aa({sortable:this,name:"sort",toEl:ts,originalEvent:t})),qt.active&&((ya==null||ya===-1)&&(ya=Gl,ci=Qr),aa({sortable:this,name:"end",toEl:ts,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ha("nulling",this),Kn=Ct=ts=on=ji=ns=Wd=ui=Bi=za=Fr=ya=ci=Gl=Qr=xl=Jr=Ps=rd=qt.dragged=qt.ghost=qt.clone=qt.active=null,Nu.forEach(function(t){t.checked=!0}),Nu.length=Xp=qp=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Ct&&(this._onDragOver(t),kW(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,s=this.el.children,o=0,a=s.length,i=this.options;o<a;o++)n=s[o],Xa(n,i.draggable,this.el,!1)&&t.push(n.getAttribute(i.dataIdAttr)||UW(n));return t},sort:function(t,n){var s={},o=this.el;this.toArray().forEach(function(a,i){var l=o.children[i];Xa(l,this.options.draggable,o,!1)&&(s[a]=l)},this),n&&this.captureAnimationState(),t.forEach(function(a){s[a]&&(o.removeChild(s[a]),o.appendChild(s[a]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Xa(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var s=this.options;if(n===void 0)return s[t];var o=Fc.modifyOption(this,t,n);typeof o<"u"?s[t]=o:s[t]=n,t==="group"&&oA(s)},destroy:function(){ha("destroy",this);var t=this.el;t[Zs]=null,dn(t,"mousedown",this._onTapStart),dn(t,"touchstart",this._onTapStart),dn(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(dn(t,"dragover",this),dn(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Cu.splice(Cu.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ui){if(ha("hideClone",this),qt.eventCanceled)return;Bt(ns,"display","none"),this.options.removeCloneOnHide&&ns.parentNode&&ns.parentNode.removeChild(ns),ui=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ui){if(ha("showClone",this),qt.eventCanceled)return;Ct.parentNode==Kn&&!this.options.group.revertClone?Kn.insertBefore(ns,Ct):ji?Kn.insertBefore(ns,ji):Kn.appendChild(ns),this.options.group.revertClone&&this.animate(Ct,ns),Bt(ns,"display",""),ui=!1}}};function kW(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ud(e,t,n,s,o,a,i,l){var r,d=e[Zs],u=d.options.onMove,p;return window.CustomEvent&&!Zo&&!Bc?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=t,r.from=e,r.dragged=n,r.draggedRect=s,r.related=o||t,r.relatedRect=a||zn(t),r.willInsertAfter=l,r.originalEvent=i,e.dispatchEvent(r),u&&(p=u.call(d,r,i)),p}function Qp(e){e.draggable=!1}function LW(){pf=!1}function DW(e,t,n){var s=zn(er(n.el,0,n.options,!0)),o=10;return t?e.clientX<s.left-o||e.clientY<s.top&&e.clientX<s.right:e.clientY<s.top-o||e.clientY<s.bottom&&e.clientX<s.left}function PW(e,t,n){var s=zn(Fg(n.el,n.options.draggable)),o=10;return t?e.clientX>s.right+o||e.clientX<=s.right&&e.clientY>s.bottom&&e.clientX>=s.left:e.clientX>s.right&&e.clientY>s.top||e.clientX<=s.right&&e.clientY>s.bottom+o}function BW(e,t,n,s,o,a,i,l){var r=s?e.clientY:e.clientX,d=s?n.height:n.width,u=s?n.top:n.left,p=s?n.bottom:n.right,h=!1;if(!i){if(l&&jd<d*o){if(!ec&&(Jr===1?r>u+d*a/2:r<p-d*a/2)&&(ec=!0),ec)h=!0;else if(Jr===1?r<u+jd:r>p-jd)return-Jr}else if(r>u+d*(1-o)/2&&r<p-d*(1-o)/2)return FW(t)}return h=h||i,h&&(r<u+d*a/2||r>p-d*a/2)?r>u+d/2?1:-1:0}function FW(e){return as(Ct)<as(e)?1:-1}function UW(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,s=0;n--;)s+=t.charCodeAt(n);return s.toString(36)}function GW(e){Nu.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var s=t[n];s.checked&&Nu.push(s)}}function Yd(e){return setTimeout(e,0)}function hf(e){return clearTimeout(e)}om&&mn(document,"touchmove",function(e){(qt.active||Dl)&&e.cancelable&&e.preventDefault()});qt.utils={on:mn,off:dn,css:Bt,find:eA,is:function(t,n){return!!Xa(t,n,t,!1)},extend:SW,throttle:tA,closest:Xa,toggleClass:Xn,clone:Ug,index:as,nextTick:Yd,cancelNextTick:hf,detectDirection:aA,getChild:er};qt.get=function(e){return e[Zs]};qt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(qt.utils=Co(Co({},qt.utils),s.utils)),Fc.mount(s)})};qt.create=function(e,t){return new qt(e,t)};qt.version=EW;var Es=[],Ur,ff,gf=!1,Jp,eh,Ou,Gr;function VW(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var s=n.originalEvent;this.sortable.nativeDraggable?mn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?mn(document,"pointermove",this._handleFallbackAutoScroll):s.touches?mn(document,"touchmove",this._handleFallbackAutoScroll):mn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var s=n.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?dn(document,"dragover",this._handleAutoScroll):(dn(document,"pointermove",this._handleFallbackAutoScroll),dn(document,"touchmove",this._handleFallbackAutoScroll),dn(document,"mousemove",this._handleFallbackAutoScroll)),D1(),Xd(),IW()},nulling:function(){Ou=ff=Ur=gf=Gr=Jp=eh=null,Es.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,s){var o=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(a,i);if(Ou=n,s||this.options.forceAutoScrollFallback||Bc||Zo||qr){th(n,this.options,l,s);var r=fi(l,!0);gf&&(!Gr||a!==Jp||i!==eh)&&(Gr&&D1(),Gr=setInterval(function(){var d=fi(document.elementFromPoint(a,i),!0);d!==r&&(r=d,Xd()),th(n,o.options,d,s)},10),Jp=a,eh=i)}else{if(!this.options.bubbleScroll||fi(l,!0)===yo()){Xd();return}th(n,this.options,fi(l,!1),!1)}}},Ga(e,{pluginName:"scroll",initializeByDefault:!0})}function Xd(){Es.forEach(function(e){clearInterval(e.pid)}),Es=[]}function D1(){clearInterval(Gr)}var th=tA(function(e,t,n,s){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,l=t.scrollSpeed,r=yo(),d=!1,u;ff!==n&&(ff=n,Xd(),Ur=t.scroll,u=t.scrollFn,Ur===!0&&(Ur=fi(n,!0)));var p=0,h=Ur;do{var g=h,_=zn(g),T=_.top,S=_.bottom,E=_.left,y=_.right,A=_.width,C=_.height,O=void 0,N=void 0,R=g.scrollWidth,k=g.scrollHeight,L=Bt(g),D=g.scrollLeft,$=g.scrollTop;g===r?(O=A<R&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),N=C<k&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(O=A<R&&(L.overflowX==="auto"||L.overflowX==="scroll"),N=C<k&&(L.overflowY==="auto"||L.overflowY==="scroll"));var M=O&&(Math.abs(y-o)<=i&&D+A<R)-(Math.abs(E-o)<=i&&!!D),K=N&&(Math.abs(S-a)<=i&&$+C<k)-(Math.abs(T-a)<=i&&!!$);if(!Es[p])for(var B=0;B<=p;B++)Es[B]||(Es[B]={});(Es[p].vx!=M||Es[p].vy!=K||Es[p].el!==g)&&(Es[p].el=g,Es[p].vx=M,Es[p].vy=K,clearInterval(Es[p].pid),(M!=0||K!=0)&&(d=!0,Es[p].pid=setInterval((function(){s&&this.layer===0&&qt.active._onTouchMove(Ou);var H=Es[this.layer].vy?Es[this.layer].vy*l:0,G=Es[this.layer].vx?Es[this.layer].vx*l:0;typeof u=="function"&&u.call(qt.dragged.parentNode[Zs],G,H,e,Ou,Es[this.layer].el)!=="continue"||nA(Es[this.layer].el,G,H)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&h!==r&&(h=fi(h,!1)));gf=d}},30),rA=function(t){var n=t.originalEvent,s=t.putSortable,o=t.dragEl,a=t.activeSortable,i=t.dispatchSortableEvent,l=t.hideGhostForTarget,r=t.unhideGhostForTarget;if(n){var d=s||a;l();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(u.clientX,u.clientY);r(),d&&!d.el.contains(p)&&(i("spill"),this.onSpill({dragEl:o,putSortable:s}))}};function Gg(){}Gg.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,s=t.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var o=er(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),s&&s.animateAll()},drop:rA};Ga(Gg,{pluginName:"revertOnSpill"});function Vg(){}Vg.prototype={onSpill:function(t){var n=t.dragEl,s=t.putSortable,o=s||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:rA};Ga(Vg,{pluginName:"removeOnSpill"});var $a;function HW(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var s=n.dragEl;$a=s},dragOverValid:function(n){var s=n.completed,o=n.target,a=n.onMove,i=n.activeSortable,l=n.changed,r=n.cancel;if(i.options.swap){var d=this.sortable.el,u=this.options;if(o&&o!==d){var p=$a;a(o)!==!1?(Xn(o,u.swapClass,!0),$a=o):$a=null,p&&p!==$a&&Xn(p,u.swapClass,!1)}l(),s(!0),r()}},drop:function(n){var s=n.activeSortable,o=n.putSortable,a=n.dragEl,i=o||this.sortable,l=this.options;$a&&Xn($a,l.swapClass,!1),$a&&(l.swap||o&&o.options.swap)&&a!==$a&&(i.captureAnimationState(),i!==s&&s.captureAnimationState(),KW(a,$a),i.animateAll(),i!==s&&s.animateAll())},nulling:function(){$a=null}},Ga(e,{pluginName:"swap",eventProperties:function(){return{swapItem:$a}}})}function KW(e,t){var n=e.parentNode,s=t.parentNode,o,a;!n||!s||n.isEqualNode(t)||s.isEqualNode(e)||(o=as(e),a=as(t),n.isEqualNode(s)&&o<a&&a++,n.insertBefore(t,n.children[o]),s.insertBefore(e,s.children[a]))}var nn=[],Ta=[],Cr,Wa,Nr=!1,fa=!1,wl=!1,Gn,Or,md;function zW(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?mn(document,"pointerup",this._deselectMultiDrag):(mn(document,"mouseup",this._deselectMultiDrag),mn(document,"touchend",this._deselectMultiDrag)),mn(document,"keydown",this._checkKeyDown),mn(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(o,a){var i="";nn.length&&Wa===t?nn.forEach(function(l,r){i+=(r?", ":"")+l.textContent}):i=a.textContent,o.setData("Text",i)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var s=n.dragEl;Gn=s},delayEnded:function(){this.isMultiDrag=~nn.indexOf(Gn)},setupClone:function(n){var s=n.sortable,o=n.cancel;if(this.isMultiDrag){for(var a=0;a<nn.length;a++)Ta.push(Ug(nn[a])),Ta[a].sortableIndex=nn[a].sortableIndex,Ta[a].draggable=!1,Ta[a].style["will-change"]="",Xn(Ta[a],this.options.selectedClass,!1),nn[a]===Gn&&Xn(Ta[a],this.options.chosenClass,!1);s._hideClone(),o()}},clone:function(n){var s=n.sortable,o=n.rootEl,a=n.dispatchSortableEvent,i=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||nn.length&&Wa===s&&(P1(!0,o),a("clone"),i()))},showClone:function(n){var s=n.cloneNowShown,o=n.rootEl,a=n.cancel;this.isMultiDrag&&(P1(!1,o),Ta.forEach(function(i){Bt(i,"display","")}),s(),md=!1,a())},hideClone:function(n){var s=this;n.sortable;var o=n.cloneNowHidden,a=n.cancel;this.isMultiDrag&&(Ta.forEach(function(i){Bt(i,"display","none"),s.options.removeCloneOnHide&&i.parentNode&&i.parentNode.removeChild(i)}),o(),md=!0,a())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Wa&&Wa.multiDrag._deselectMultiDrag(),nn.forEach(function(s){s.sortableIndex=as(s)}),nn=nn.sort(function(s,o){return s.sortableIndex-o.sortableIndex}),wl=!0},dragStarted:function(n){var s=this,o=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){nn.forEach(function(i){i!==Gn&&Bt(i,"position","absolute")});var a=zn(Gn,!1,!0,!0);nn.forEach(function(i){i!==Gn&&$1(i,a)}),fa=!0,Nr=!0}o.animateAll(function(){fa=!1,Nr=!1,s.options.animation&&nn.forEach(function(i){jp(i)}),s.options.sort&&pd()})}},dragOver:function(n){var s=n.target,o=n.completed,a=n.cancel;fa&&~nn.indexOf(s)&&(o(!1),a())},revert:function(n){var s=n.fromSortable,o=n.rootEl,a=n.sortable,i=n.dragRect;nn.length>1&&(nn.forEach(function(l){a.addAnimationState({target:l,rect:fa?zn(l):i}),jp(l),l.fromRect=i,s.removeAnimationState(l)}),fa=!1,WW(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(n){var s=n.sortable,o=n.isOwner,a=n.insertion,i=n.activeSortable,l=n.parentEl,r=n.putSortable,d=this.options;if(a){if(o&&i._hideClone(),Nr=!1,d.animation&&nn.length>1&&(fa||!o&&!i.options.sort&&!r)){var u=zn(Gn,!1,!0,!0);nn.forEach(function(h){h!==Gn&&($1(h,u),l.appendChild(h))}),fa=!0}if(!o)if(fa||pd(),nn.length>1){var p=md;i._showClone(s),i.options.animation&&!md&&p&&Ta.forEach(function(h){i.addAnimationState({target:h,rect:Or}),h.fromRect=Or,h.thisAnimationDuration=null})}else i._showClone(s)}},dragOverAnimationCapture:function(n){var s=n.dragRect,o=n.isOwner,a=n.activeSortable;if(nn.forEach(function(l){l.thisAnimationDuration=null}),a.options.animation&&!o&&a.multiDrag.isMultiDrag){Or=Ga({},s);var i=al(Gn,!0);Or.top-=i.f,Or.left-=i.e}},dragOverAnimationComplete:function(){fa&&(fa=!1,pd())},drop:function(n){var s=n.originalEvent,o=n.rootEl,a=n.parentEl,i=n.sortable,l=n.dispatchSortableEvent,r=n.oldIndex,d=n.putSortable,u=d||this.sortable;if(s){var p=this.options,h=a.children;if(!wl)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Xn(Gn,p.selectedClass,!~nn.indexOf(Gn)),~nn.indexOf(Gn))nn.splice(nn.indexOf(Gn),1),Cr=null,Br({sortable:i,rootEl:o,name:"deselect",targetEl:Gn});else{if(nn.push(Gn),Br({sortable:i,rootEl:o,name:"select",targetEl:Gn}),s.shiftKey&&Cr&&i.el.contains(Cr)){var g=as(Cr),_=as(Gn);if(~g&&~_&&g!==_){var T,S;for(_>g?(S=g,T=_):(S=_,T=g+1);S<T;S++)~nn.indexOf(h[S])||(Xn(h[S],p.selectedClass,!0),nn.push(h[S]),Br({sortable:i,rootEl:o,name:"select",targetEl:h[S]}))}}else Cr=Gn;Wa=u}if(wl&&this.isMultiDrag){if(fa=!1,(a[Zs].options.sort||a!==o)&&nn.length>1){var E=zn(Gn),y=as(Gn,":not(."+this.options.selectedClass+")");if(!Nr&&p.animation&&(Gn.thisAnimationDuration=null),u.captureAnimationState(),!Nr&&(p.animation&&(Gn.fromRect=E,nn.forEach(function(C){if(C.thisAnimationDuration=null,C!==Gn){var O=fa?zn(C):E;C.fromRect=O,u.addAnimationState({target:C,rect:O})}})),pd(),nn.forEach(function(C){h[y]?a.insertBefore(C,h[y]):a.appendChild(C),y++}),r===as(Gn))){var A=!1;nn.forEach(function(C){if(C.sortableIndex!==as(C)){A=!0;return}}),A&&l("update")}nn.forEach(function(C){jp(C)}),u.animateAll()}Wa=u}(o===a||d&&d.lastPutMode!=="clone")&&Ta.forEach(function(C){C.parentNode&&C.parentNode.removeChild(C)})}},nullingGlobal:function(){this.isMultiDrag=wl=!1,Ta.length=0},destroyGlobal:function(){this._deselectMultiDrag(),dn(document,"pointerup",this._deselectMultiDrag),dn(document,"mouseup",this._deselectMultiDrag),dn(document,"touchend",this._deselectMultiDrag),dn(document,"keydown",this._checkKeyDown),dn(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof wl<"u"&&wl)&&Wa===this.sortable&&!(n&&Xa(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;nn.length;){var s=nn[0];Xn(s,this.options.selectedClass,!1),nn.shift(),Br({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:s})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ga(e,{pluginName:"multiDrag",utils:{select:function(n){var s=n.parentNode[Zs];!s||!s.options.multiDrag||~nn.indexOf(n)||(Wa&&Wa!==s&&(Wa.multiDrag._deselectMultiDrag(),Wa=s),Xn(n,s.options.selectedClass,!0),nn.push(n))},deselect:function(n){var s=n.parentNode[Zs],o=nn.indexOf(n);!s||!s.options.multiDrag||!~o||(Xn(n,s.options.selectedClass,!1),nn.splice(o,1))}},eventProperties:function(){var n=this,s=[],o=[];return nn.forEach(function(a){s.push({multiDragElement:a,index:a.sortableIndex});var i;fa&&a!==Gn?i=-1:fa?i=as(a,":not(."+n.options.selectedClass+")"):i=as(a),o.push({multiDragElement:a,index:i})}),{items:fW(nn),clones:[].concat(Ta),oldIndicies:s,newIndicies:o}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function WW(e,t){nn.forEach(function(n,s){var o=t.children[n.sortableIndex+(e?Number(s):0)];o?t.insertBefore(n,o):t.appendChild(n)})}function P1(e,t){Ta.forEach(function(n,s){var o=t.children[n.sortableIndex+(e?Number(s):0)];o?t.insertBefore(n,o):t.appendChild(n)})}function pd(){nn.forEach(function(e){e!==Gn&&e.parentNode&&e.parentNode.removeChild(e)})}qt.mount(new VW);qt.mount(Vg,Gg);const jW=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:zW,Sortable:qt,Swap:HW,default:qt},Symbol.toStringTag,{value:"Module"})),YW=SC(jW);(function(e,t){(function(s,o){e.exports=o(wE,YW)})(typeof self<"u"?self:IC,function(n,s){return function(o){var a={};function i(l){if(a[l])return a[l].exports;var r=a[l]={i:l,l:!1,exports:{}};return o[l].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=a,i.d=function(l,r,d){i.o(l,r)||Object.defineProperty(l,r,{enumerable:!0,get:d})},i.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},i.t=function(l,r){if(r&1&&(l=i(l)),r&8||r&4&&typeof l=="object"&&l&&l.__esModule)return l;var d=Object.create(null);if(i.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:l}),r&2&&typeof l!="string")for(var u in l)i.d(d,u,(function(p){return l[p]}).bind(null,u));return d},i.n=function(l){var r=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(r,"a",r),r},i.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)},i.p="",i(i.s="fb15")}({"00ee":function(o,a,i){var l=i("b622"),r=l("toStringTag"),d={};d[r]="z",o.exports=String(d)==="[object z]"},"0366":function(o,a,i){var l=i("1c0b");o.exports=function(r,d,u){if(l(r),d===void 0)return r;switch(u){case 0:return function(){return r.call(d)};case 1:return function(p){return r.call(d,p)};case 2:return function(p,h){return r.call(d,p,h)};case 3:return function(p,h,g){return r.call(d,p,h,g)}}return function(){return r.apply(d,arguments)}}},"057f":function(o,a,i){var l=i("fc6a"),r=i("241c").f,d={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(h){try{return r(h)}catch{return u.slice()}};o.exports.f=function(g){return u&&d.call(g)=="[object Window]"?p(g):r(l(g))}},"06cf":function(o,a,i){var l=i("83ab"),r=i("d1e7"),d=i("5c6c"),u=i("fc6a"),p=i("c04e"),h=i("5135"),g=i("0cfb"),_=Object.getOwnPropertyDescriptor;a.f=l?_:function(S,E){if(S=u(S),E=p(E,!0),g)try{return _(S,E)}catch{}if(h(S,E))return d(!r.f.call(S,E),S[E])}},"0cfb":function(o,a,i){var l=i("83ab"),r=i("d039"),d=i("cc12");o.exports=!l&&!r(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(o,a,i){var l=i("23e7"),r=i("d58f").left,d=i("a640"),u=i("ae40"),p=d("reduce"),h=u("reduce",{1:0});l({target:"Array",proto:!0,forced:!p||!h},{reduce:function(_){return r(this,_,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(o,a,i){var l=i("c6b6"),r=i("9263");o.exports=function(d,u){var p=d.exec;if(typeof p=="function"){var h=p.call(d,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(l(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return r.call(d,u)}},"159b":function(o,a,i){var l=i("da84"),r=i("fdbc"),d=i("17c2"),u=i("9112");for(var p in r){var h=l[p],g=h&&h.prototype;if(g&&g.forEach!==d)try{u(g,"forEach",d)}catch{g.forEach=d}}},"17c2":function(o,a,i){var l=i("b727").forEach,r=i("a640"),d=i("ae40"),u=r("forEach"),p=d("forEach");o.exports=!u||!p?function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(o,a,i){var l=i("d066");o.exports=l("document","documentElement")},"1c0b":function(o,a){o.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},"1c7e":function(o,a,i){var l=i("b622"),r=l("iterator"),d=!1;try{var u=0,p={next:function(){return{done:!!u++}},return:function(){d=!0}};p[r]=function(){return this},Array.from(p,function(){throw 2})}catch{}o.exports=function(h,g){if(!g&&!d)return!1;var _=!1;try{var T={};T[r]=function(){return{next:function(){return{done:_=!0}}}},h(T)}catch{}return _}},"1d80":function(o,a){o.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},"1dde":function(o,a,i){var l=i("d039"),r=i("b622"),d=i("2d00"),u=r("species");o.exports=function(p){return d>=51||!l(function(){var h=[],g=h.constructor={};return g[u]=function(){return{foo:1}},h[p](Boolean).foo!==1})}},"23cb":function(o,a,i){var l=i("a691"),r=Math.max,d=Math.min;o.exports=function(u,p){var h=l(u);return h<0?r(h+p,0):d(h,p)}},"23e7":function(o,a,i){var l=i("da84"),r=i("06cf").f,d=i("9112"),u=i("6eeb"),p=i("ce4e"),h=i("e893"),g=i("94ca");o.exports=function(_,T){var S=_.target,E=_.global,y=_.stat,A,C,O,N,R,k;if(E?C=l:y?C=l[S]||p(S,{}):C=(l[S]||{}).prototype,C)for(O in T){if(R=T[O],_.noTargetGet?(k=r(C,O),N=k&&k.value):N=C[O],A=g(E?O:S+(y?".":"#")+O,_.forced),!A&&N!==void 0){if(typeof R==typeof N)continue;h(R,N)}(_.sham||N&&N.sham)&&d(R,"sham",!0),u(C,O,R,_)}}},"241c":function(o,a,i){var l=i("ca84"),r=i("7839"),d=r.concat("length","prototype");a.f=Object.getOwnPropertyNames||function(p){return l(p,d)}},"25f0":function(o,a,i){var l=i("6eeb"),r=i("825a"),d=i("d039"),u=i("ad6d"),p="toString",h=RegExp.prototype,g=h[p],_=d(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),T=g.name!=p;(_||T)&&l(RegExp.prototype,p,function(){var E=r(this),y=String(E.source),A=E.flags,C=String(A===void 0&&E instanceof RegExp&&!("flags"in h)?u.call(E):A);return"/"+y+"/"+C},{unsafe:!0})},"2ca0":function(o,a,i){var l=i("23e7"),r=i("06cf").f,d=i("50c4"),u=i("5a34"),p=i("1d80"),h=i("ab13"),g=i("c430"),_="".startsWith,T=Math.min,S=h("startsWith"),E=!g&&!S&&!!function(){var y=r(String.prototype,"startsWith");return y&&!y.writable}();l({target:"String",proto:!0,forced:!E&&!S},{startsWith:function(A){var C=String(p(this));u(A);var O=d(T(arguments.length>1?arguments[1]:void 0,C.length)),N=String(A);return _?_.call(C,N,O):C.slice(O,O+N.length)===N}})},"2d00":function(o,a,i){var l=i("da84"),r=i("342f"),d=l.process,u=d&&d.versions,p=u&&u.v8,h,g;p?(h=p.split("."),g=h[0]+h[1]):r&&(h=r.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=r.match(/Chrome\/(\d+)/),h&&(g=h[1]))),o.exports=g&&+g},"342f":function(o,a,i){var l=i("d066");o.exports=l("navigator","userAgent")||""},"35a1":function(o,a,i){var l=i("f5df"),r=i("3f8c"),d=i("b622"),u=d("iterator");o.exports=function(p){if(p!=null)return p[u]||p["@@iterator"]||r[l(p)]}},"37e8":function(o,a,i){var l=i("83ab"),r=i("9bf2"),d=i("825a"),u=i("df75");o.exports=l?Object.defineProperties:function(h,g){d(h);for(var _=u(g),T=_.length,S=0,E;T>S;)r.f(h,E=_[S++],g[E]);return h}},"3bbe":function(o,a,i){var l=i("861d");o.exports=function(r){if(!l(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},"3ca3":function(o,a,i){var l=i("6547").charAt,r=i("69f3"),d=i("7dd0"),u="String Iterator",p=r.set,h=r.getterFor(u);d(String,"String",function(g){p(this,{type:u,string:String(g),index:0})},function(){var _=h(this),T=_.string,S=_.index,E;return S>=T.length?{value:void 0,done:!0}:(E=l(T,S),_.index+=E.length,{value:E,done:!1})})},"3f8c":function(o,a){o.exports={}},4160:function(o,a,i){var l=i("23e7"),r=i("17c2");l({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"428f":function(o,a,i){var l=i("da84");o.exports=l},"44ad":function(o,a,i){var l=i("d039"),r=i("c6b6"),d="".split;o.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return r(u)=="String"?d.call(u,""):Object(u)}:Object},"44d2":function(o,a,i){var l=i("b622"),r=i("7c73"),d=i("9bf2"),u=l("unscopables"),p=Array.prototype;p[u]==null&&d.f(p,u,{configurable:!0,value:r(null)}),o.exports=function(h){p[u][h]=!0}},"44e7":function(o,a,i){var l=i("861d"),r=i("c6b6"),d=i("b622"),u=d("match");o.exports=function(p){var h;return l(p)&&((h=p[u])!==void 0?!!h:r(p)=="RegExp")}},4930:function(o,a,i){var l=i("d039");o.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(o,a,i){var l=i("fc6a"),r=i("50c4"),d=i("23cb"),u=function(p){return function(h,g,_){var T=l(h),S=r(T.length),E=d(_,S),y;if(p&&g!=g){for(;S>E;)if(y=T[E++],y!=y)return!0}else for(;S>E;E++)if((p||E in T)&&T[E]===g)return p||E||0;return!p&&-1}};o.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(o,a,i){var l=i("23e7"),r=i("b727").filter,d=i("1dde"),u=i("ae40"),p=d("filter"),h=u("filter");l({target:"Array",proto:!0,forced:!p||!h},{filter:function(_){return r(this,_,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(o,a,i){var l=i("0366"),r=i("7b0b"),d=i("9bdd"),u=i("e95a"),p=i("50c4"),h=i("8418"),g=i("35a1");o.exports=function(T){var S=r(T),E=typeof this=="function"?this:Array,y=arguments.length,A=y>1?arguments[1]:void 0,C=A!==void 0,O=g(S),N=0,R,k,L,D,$,M;if(C&&(A=l(A,y>2?arguments[2]:void 0,2)),O!=null&&!(E==Array&&u(O)))for(D=O.call(S),$=D.next,k=new E;!(L=$.call(D)).done;N++)M=C?d(D,A,[L.value,N],!0):L.value,h(k,N,M);else for(R=p(S.length),k=new E(R);R>N;N++)M=C?A(S[N],N):S[N],h(k,N,M);return k.length=N,k}},"4fad":function(o,a,i){var l=i("23e7"),r=i("6f53").entries;l({target:"Object",stat:!0},{entries:function(u){return r(u)}})},"50c4":function(o,a,i){var l=i("a691"),r=Math.min;o.exports=function(d){return d>0?r(l(d),9007199254740991):0}},5135:function(o,a){var i={}.hasOwnProperty;o.exports=function(l,r){return i.call(l,r)}},5319:function(o,a,i){var l=i("d784"),r=i("825a"),d=i("7b0b"),u=i("50c4"),p=i("a691"),h=i("1d80"),g=i("8aa5"),_=i("14c3"),T=Math.max,S=Math.min,E=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,A=/\$([$&'`]|\d\d?)/g,C=function(O){return O===void 0?O:String(O)};l("replace",2,function(O,N,R,k){var L=k.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,D=k.REPLACE_KEEPS_$0,$=L?"$":"$0";return[function(B,H){var G=h(this),V=B==null?void 0:B[O];return V!==void 0?V.call(B,G,H):N.call(String(G),B,H)},function(K,B){if(!L&&D||typeof B=="string"&&B.indexOf($)===-1){var H=R(N,K,this,B);if(H.done)return H.value}var G=r(K),V=String(this),Y=typeof B=="function";Y||(B=String(B));var ee=G.global;if(ee){var X=G.unicode;G.lastIndex=0}for(var z=[];;){var W=_(G,V);if(W===null||(z.push(W),!ee))break;var q=String(W[0]);q===""&&(G.lastIndex=g(V,u(G.lastIndex),X))}for(var Z="",ne=0,ae=0;ae<z.length;ae++){W=z[ae];for(var ue=String(W[0]),te=T(S(p(W.index),V.length),0),ce=[],fe=1;fe<W.length;fe++)ce.push(C(W[fe]));var ke=W.groups;if(Y){var De=[ue].concat(ce,te,V);ke!==void 0&&De.push(ke);var Fe=String(B.apply(void 0,De))}else Fe=M(ue,V,te,ce,ke,B);te>=ne&&(Z+=V.slice(ne,te)+Fe,ne=te+ue.length)}return Z+V.slice(ne)}];function M(K,B,H,G,V,Y){var ee=H+K.length,X=G.length,z=A;return V!==void 0&&(V=d(V),z=y),N.call(Y,z,function(W,q){var Z;switch(q.charAt(0)){case"$":return"$";case"&":return K;case"`":return B.slice(0,H);case"'":return B.slice(ee);case"<":Z=V[q.slice(1,-1)];break;default:var ne=+q;if(ne===0)return W;if(ne>X){var ae=E(ne/10);return ae===0?W:ae<=X?G[ae-1]===void 0?q.charAt(1):G[ae-1]+q.charAt(1):W}Z=G[ne-1]}return Z===void 0?"":Z})}})},5692:function(o,a,i){var l=i("c430"),r=i("c6cd");(o.exports=function(d,u){return r[d]||(r[d]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(o,a,i){var l=i("d066"),r=i("241c"),d=i("7418"),u=i("825a");o.exports=l("Reflect","ownKeys")||function(h){var g=r.f(u(h)),_=d.f;return _?g.concat(_(h)):g}},"5a34":function(o,a,i){var l=i("44e7");o.exports=function(r){if(l(r))throw TypeError("The method doesn't accept regular expressions");return r}},"5c6c":function(o,a){o.exports=function(i,l){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:l}}},"5db7":function(o,a,i){var l=i("23e7"),r=i("a2bf"),d=i("7b0b"),u=i("50c4"),p=i("1c0b"),h=i("65f0");l({target:"Array",proto:!0},{flatMap:function(_){var T=d(this),S=u(T.length),E;return p(_),E=h(T,0),E.length=r(E,T,T,S,0,1,_,arguments.length>1?arguments[1]:void 0),E}})},6547:function(o,a,i){var l=i("a691"),r=i("1d80"),d=function(u){return function(p,h){var g=String(r(p)),_=l(h),T=g.length,S,E;return _<0||_>=T?u?"":void 0:(S=g.charCodeAt(_),S<55296||S>56319||_+1===T||(E=g.charCodeAt(_+1))<56320||E>57343?u?g.charAt(_):S:u?g.slice(_,_+2):(S-55296<<10)+(E-56320)+65536)}};o.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(o,a,i){var l=i("861d"),r=i("e8b5"),d=i("b622"),u=d("species");o.exports=function(p,h){var g;return r(p)&&(g=p.constructor,typeof g=="function"&&(g===Array||r(g.prototype))?g=void 0:l(g)&&(g=g[u],g===null&&(g=void 0))),new(g===void 0?Array:g)(h===0?0:h)}},"69f3":function(o,a,i){var l=i("7f9a"),r=i("da84"),d=i("861d"),u=i("9112"),p=i("5135"),h=i("f772"),g=i("d012"),_=r.WeakMap,T,S,E,y=function(L){return E(L)?S(L):T(L,{})},A=function(L){return function(D){var $;if(!d(D)||($=S(D)).type!==L)throw TypeError("Incompatible receiver, "+L+" required");return $}};if(l){var C=new _,O=C.get,N=C.has,R=C.set;T=function(L,D){return R.call(C,L,D),D},S=function(L){return O.call(C,L)||{}},E=function(L){return N.call(C,L)}}else{var k=h("state");g[k]=!0,T=function(L,D){return u(L,k,D),D},S=function(L){return p(L,k)?L[k]:{}},E=function(L){return p(L,k)}}o.exports={set:T,get:S,has:E,enforce:y,getterFor:A}},"6eeb":function(o,a,i){var l=i("da84"),r=i("9112"),d=i("5135"),u=i("ce4e"),p=i("8925"),h=i("69f3"),g=h.get,_=h.enforce,T=String(String).split("String");(o.exports=function(S,E,y,A){var C=A?!!A.unsafe:!1,O=A?!!A.enumerable:!1,N=A?!!A.noTargetGet:!1;if(typeof y=="function"&&(typeof E=="string"&&!d(y,"name")&&r(y,"name",E),_(y).source=T.join(typeof E=="string"?E:"")),S===l){O?S[E]=y:u(E,y);return}else C?!N&&S[E]&&(O=!0):delete S[E];O?S[E]=y:r(S,E,y)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||p(this)})},"6f53":function(o,a,i){var l=i("83ab"),r=i("df75"),d=i("fc6a"),u=i("d1e7").f,p=function(h){return function(g){for(var _=d(g),T=r(_),S=T.length,E=0,y=[],A;S>E;)A=T[E++],(!l||u.call(_,A))&&y.push(h?[A,_[A]]:_[A]);return y}};o.exports={entries:p(!0),values:p(!1)}},"73d9":function(o,a,i){var l=i("44d2");l("flatMap")},7418:function(o,a){a.f=Object.getOwnPropertySymbols},"746f":function(o,a,i){var l=i("428f"),r=i("5135"),d=i("e538"),u=i("9bf2").f;o.exports=function(p){var h=l.Symbol||(l.Symbol={});r(h,p)||u(h,p,{value:d.f(p)})}},7839:function(o,a){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(o,a,i){var l=i("1d80");o.exports=function(r){return Object(l(r))}},"7c73":function(o,a,i){var l=i("825a"),r=i("37e8"),d=i("7839"),u=i("d012"),p=i("1be4"),h=i("cc12"),g=i("f772"),_=">",T="<",S="prototype",E="script",y=g("IE_PROTO"),A=function(){},C=function(L){return T+E+_+L+T+"/"+E+_},O=function(L){L.write(C("")),L.close();var D=L.parentWindow.Object;return L=null,D},N=function(){var L=h("iframe"),D="java"+E+":",$;return L.style.display="none",p.appendChild(L),L.src=String(D),$=L.contentWindow.document,$.open(),$.write(C("document.F=Object")),$.close(),$.F},R,k=function(){try{R=document.domain&&new ActiveXObject("htmlfile")}catch{}k=R?O(R):N();for(var L=d.length;L--;)delete k[S][d[L]];return k()};u[y]=!0,o.exports=Object.create||function(D,$){var M;return D!==null?(A[S]=l(D),M=new A,A[S]=null,M[y]=D):M=k(),$===void 0?M:r(M,$)}},"7dd0":function(o,a,i){var l=i("23e7"),r=i("9ed3"),d=i("e163"),u=i("d2bb"),p=i("d44e"),h=i("9112"),g=i("6eeb"),_=i("b622"),T=i("c430"),S=i("3f8c"),E=i("ae93"),y=E.IteratorPrototype,A=E.BUGGY_SAFARI_ITERATORS,C=_("iterator"),O="keys",N="values",R="entries",k=function(){return this};o.exports=function(L,D,$,M,K,B,H){r($,D,M);var G=function(ae){if(ae===K&&z)return z;if(!A&&ae in ee)return ee[ae];switch(ae){case O:return function(){return new $(this,ae)};case N:return function(){return new $(this,ae)};case R:return function(){return new $(this,ae)}}return function(){return new $(this)}},V=D+" Iterator",Y=!1,ee=L.prototype,X=ee[C]||ee["@@iterator"]||K&&ee[K],z=!A&&X||G(K),W=D=="Array"&&ee.entries||X,q,Z,ne;if(W&&(q=d(W.call(new L)),y!==Object.prototype&&q.next&&(!T&&d(q)!==y&&(u?u(q,y):typeof q[C]!="function"&&h(q,C,k)),p(q,V,!0,!0),T&&(S[V]=k))),K==N&&X&&X.name!==N&&(Y=!0,z=function(){return X.call(this)}),(!T||H)&&ee[C]!==z&&h(ee,C,z),S[D]=z,K)if(Z={values:G(N),keys:B?z:G(O),entries:G(R)},H)for(ne in Z)(A||Y||!(ne in ee))&&g(ee,ne,Z[ne]);else l({target:D,proto:!0,forced:A||Y},Z);return Z}},"7f9a":function(o,a,i){var l=i("da84"),r=i("8925"),d=l.WeakMap;o.exports=typeof d=="function"&&/native code/.test(r(d))},"825a":function(o,a,i){var l=i("861d");o.exports=function(r){if(!l(r))throw TypeError(String(r)+" is not an object");return r}},"83ab":function(o,a,i){var l=i("d039");o.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(o,a,i){var l=i("c04e"),r=i("9bf2"),d=i("5c6c");o.exports=function(u,p,h){var g=l(p);g in u?r.f(u,g,d(0,h)):u[g]=h}},"861d":function(o,a){o.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},8875:function(o,a,i){var l,r,d;(function(u,p){r=[],l=p,d=typeof l=="function"?l.apply(a,r):l,d!==void 0&&(o.exports=d)})(typeof self<"u"?self:this,function(){function u(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(R){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,g=/@([^@]*):(\d+):(\d+)\s*$/ig,_=h.exec(R.stack)||g.exec(R.stack),T=_&&_[1]||!1,S=_&&_[2]||!1,E=document.location.href.replace(document.location.hash,""),y,A,C,O=document.getElementsByTagName("script");T===E&&(y=document.documentElement.outerHTML,A=new RegExp("(?:[^\\n]+?\\n){0,"+(S-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),C=y.replace(A,"$1").trim());for(var N=0;N<O.length;N++)if(O[N].readyState==="interactive"||O[N].src===T||T===E&&O[N].innerHTML&&O[N].innerHTML.trim()===C)return O[N];return null}}return u})},8925:function(o,a,i){var l=i("c6cd"),r=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(d){return r.call(d)}),o.exports=l.inspectSource},"8aa5":function(o,a,i){var l=i("6547").charAt;o.exports=function(r,d,u){return d+(u?l(r,d).length:1)}},"8bbf":function(o,a){o.exports=n},"90e3":function(o,a){var i=0,l=Math.random();o.exports=function(r){return"Symbol("+String(r===void 0?"":r)+")_"+(++i+l).toString(36)}},9112:function(o,a,i){var l=i("83ab"),r=i("9bf2"),d=i("5c6c");o.exports=l?function(u,p,h){return r.f(u,p,d(1,h))}:function(u,p,h){return u[p]=h,u}},9263:function(o,a,i){var l=i("ad6d"),r=i("9f7f"),d=RegExp.prototype.exec,u=String.prototype.replace,p=d,h=function(){var S=/a/,E=/b*/g;return d.call(S,"a"),d.call(E,"a"),S.lastIndex!==0||E.lastIndex!==0}(),g=r.UNSUPPORTED_Y||r.BROKEN_CARET,_=/()??/.exec("")[1]!==void 0,T=h||_||g;T&&(p=function(E){var y=this,A,C,O,N,R=g&&y.sticky,k=l.call(y),L=y.source,D=0,$=E;return R&&(k=k.replace("y",""),k.indexOf("g")===-1&&(k+="g"),$=String(E).slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&E[y.lastIndex-1]!==`
`)&&(L="(?: "+L+")",$=" "+$,D++),C=new RegExp("^(?:"+L+")",k)),_&&(C=new RegExp("^"+L+"$(?!\\s)",k)),h&&(A=y.lastIndex),O=d.call(R?C:y,$),R?O?(O.input=O.input.slice(D),O[0]=O[0].slice(D),O.index=y.lastIndex,y.lastIndex+=O[0].length):y.lastIndex=0:h&&O&&(y.lastIndex=y.global?O.index+O[0].length:A),_&&O&&O.length>1&&u.call(O[0],C,function(){for(N=1;N<arguments.length-2;N++)arguments[N]===void 0&&(O[N]=void 0)}),O}),o.exports=p},"94ca":function(o,a,i){var l=i("d039"),r=/#|\.prototype\./,d=function(_,T){var S=p[u(_)];return S==g?!0:S==h?!1:typeof T=="function"?l(T):!!T},u=d.normalize=function(_){return String(_).replace(r,".").toLowerCase()},p=d.data={},h=d.NATIVE="N",g=d.POLYFILL="P";o.exports=d},"99af":function(o,a,i){var l=i("23e7"),r=i("d039"),d=i("e8b5"),u=i("861d"),p=i("7b0b"),h=i("50c4"),g=i("8418"),_=i("65f0"),T=i("1dde"),S=i("b622"),E=i("2d00"),y=S("isConcatSpreadable"),A=9007199254740991,C="Maximum allowed index exceeded",O=E>=51||!r(function(){var L=[];return L[y]=!1,L.concat()[0]!==L}),N=T("concat"),R=function(L){if(!u(L))return!1;var D=L[y];return D!==void 0?!!D:d(L)},k=!O||!N;l({target:"Array",proto:!0,forced:k},{concat:function(D){var $=p(this),M=_($,0),K=0,B,H,G,V,Y;for(B=-1,G=arguments.length;B<G;B++)if(Y=B===-1?$:arguments[B],R(Y)){if(V=h(Y.length),K+V>A)throw TypeError(C);for(H=0;H<V;H++,K++)H in Y&&g(M,K,Y[H])}else{if(K>=A)throw TypeError(C);g(M,K++,Y)}return M.length=K,M}})},"9bdd":function(o,a,i){var l=i("825a");o.exports=function(r,d,u,p){try{return p?d(l(u)[0],u[1]):d(u)}catch(g){var h=r.return;throw h!==void 0&&l(h.call(r)),g}}},"9bf2":function(o,a,i){var l=i("83ab"),r=i("0cfb"),d=i("825a"),u=i("c04e"),p=Object.defineProperty;a.f=l?p:function(g,_,T){if(d(g),_=u(_,!0),d(T),r)try{return p(g,_,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported");return"value"in T&&(g[_]=T.value),g}},"9ed3":function(o,a,i){var l=i("ae93").IteratorPrototype,r=i("7c73"),d=i("5c6c"),u=i("d44e"),p=i("3f8c"),h=function(){return this};o.exports=function(g,_,T){var S=_+" Iterator";return g.prototype=r(l,{next:d(1,T)}),u(g,S,!1,!0),p[S]=h,g}},"9f7f":function(o,a,i){var l=i("d039");function r(d,u){return RegExp(d,u)}a.UNSUPPORTED_Y=l(function(){var d=r("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),a.BROKEN_CARET=l(function(){var d=r("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(o,a,i){var l=i("e8b5"),r=i("50c4"),d=i("0366"),u=function(p,h,g,_,T,S,E,y){for(var A=T,C=0,O=E?d(E,y,3):!1,N;C<_;){if(C in g){if(N=O?O(g[C],C,h):g[C],S>0&&l(N))A=u(p,h,N,r(N.length),A,S-1)-1;else{if(A>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[A]=N}A++}C++}return A};o.exports=u},a352:function(o,a){o.exports=s},a434:function(o,a,i){var l=i("23e7"),r=i("23cb"),d=i("a691"),u=i("50c4"),p=i("7b0b"),h=i("65f0"),g=i("8418"),_=i("1dde"),T=i("ae40"),S=_("splice"),E=T("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,A=Math.min,C=9007199254740991,O="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!S||!E},{splice:function(R,k){var L=p(this),D=u(L.length),$=r(R,D),M=arguments.length,K,B,H,G,V,Y;if(M===0?K=B=0:M===1?(K=0,B=D-$):(K=M-2,B=A(y(d(k),0),D-$)),D+K-B>C)throw TypeError(O);for(H=h(L,B),G=0;G<B;G++)V=$+G,V in L&&g(H,G,L[V]);if(H.length=B,K<B){for(G=$;G<D-B;G++)V=G+B,Y=G+K,V in L?L[Y]=L[V]:delete L[Y];for(G=D;G>D-B+K;G--)delete L[G-1]}else if(K>B)for(G=D-B;G>$;G--)V=G+B-1,Y=G+K-1,V in L?L[Y]=L[V]:delete L[Y];for(G=0;G<K;G++)L[G+$]=arguments[G+2];return L.length=D-B+K,H}})},a4d3:function(o,a,i){var l=i("23e7"),r=i("da84"),d=i("d066"),u=i("c430"),p=i("83ab"),h=i("4930"),g=i("fdbf"),_=i("d039"),T=i("5135"),S=i("e8b5"),E=i("861d"),y=i("825a"),A=i("7b0b"),C=i("fc6a"),O=i("c04e"),N=i("5c6c"),R=i("7c73"),k=i("df75"),L=i("241c"),D=i("057f"),$=i("7418"),M=i("06cf"),K=i("9bf2"),B=i("d1e7"),H=i("9112"),G=i("6eeb"),V=i("5692"),Y=i("f772"),ee=i("d012"),X=i("90e3"),z=i("b622"),W=i("e538"),q=i("746f"),Z=i("d44e"),ne=i("69f3"),ae=i("b727").forEach,ue=Y("hidden"),te="Symbol",ce="prototype",fe=z("toPrimitive"),ke=ne.set,De=ne.getterFor(te),Fe=Object[ce],je=r.Symbol,Qe=d("JSON","stringify"),Ze=M.f,ft=K.f,kt=D.f,Q=B.f,oe=V("symbols"),de=V("op-symbols"),Ce=V("string-to-symbol-registry"),Ae=V("symbol-to-string-registry"),Le=V("wks"),Me=r.QObject,Ue=!Me||!Me[ce]||!Me[ce].findChild,we=p&&_(function(){return R(ft({},"a",{get:function(){return ft(this,"a",{value:7}).a}})).a!=7})?function(ve,me,Oe){var Ge=Ze(Fe,me);Ge&&delete Fe[me],ft(ve,me,Oe),Ge&&ve!==Fe&&ft(Fe,me,Ge)}:ft,ge=function(ve,me){var Oe=oe[ve]=R(je[ce]);return ke(Oe,{type:te,tag:ve,description:me}),p||(Oe.description=me),Oe},J=g?function(ve){return typeof ve=="symbol"}:function(ve){return Object(ve)instanceof je},Ee=function(me,Oe,Ge){me===Fe&&Ee(de,Oe,Ge),y(me);var Se=O(Oe,!0);return y(Ge),T(oe,Se)?(Ge.enumerable?(T(me,ue)&&me[ue][Se]&&(me[ue][Se]=!1),Ge=R(Ge,{enumerable:N(0,!1)})):(T(me,ue)||ft(me,ue,N(1,{})),me[ue][Se]=!0),we(me,Se,Ge)):ft(me,Se,Ge)},$e=function(me,Oe){y(me);var Ge=C(Oe),Se=k(Ge).concat(Pe(Ge));return ae(Se,function(We){(!p||le.call(Ge,We))&&Ee(me,We,Ge[We])}),me},se=function(me,Oe){return Oe===void 0?R(me):$e(R(me),Oe)},le=function(me){var Oe=O(me,!0),Ge=Q.call(this,Oe);return this===Fe&&T(oe,Oe)&&!T(de,Oe)?!1:Ge||!T(this,Oe)||!T(oe,Oe)||T(this,ue)&&this[ue][Oe]?Ge:!0},_e=function(me,Oe){var Ge=C(me),Se=O(Oe,!0);if(!(Ge===Fe&&T(oe,Se)&&!T(de,Se))){var We=Ze(Ge,Se);return We&&T(oe,Se)&&!(T(Ge,ue)&&Ge[ue][Se])&&(We.enumerable=!0),We}},Ie=function(me){var Oe=kt(C(me)),Ge=[];return ae(Oe,function(Se){!T(oe,Se)&&!T(ee,Se)&&Ge.push(Se)}),Ge},Pe=function(me){var Oe=me===Fe,Ge=kt(Oe?de:C(me)),Se=[];return ae(Ge,function(We){T(oe,We)&&(!Oe||T(Fe,We))&&Se.push(oe[We])}),Se};if(h||(je=function(){if(this instanceof je)throw TypeError("Symbol is not a constructor");var me=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Oe=X(me),Ge=function(Se){this===Fe&&Ge.call(de,Se),T(this,ue)&&T(this[ue],Oe)&&(this[ue][Oe]=!1),we(this,Oe,N(1,Se))};return p&&Ue&&we(Fe,Oe,{configurable:!0,set:Ge}),ge(Oe,me)},G(je[ce],"toString",function(){return De(this).tag}),G(je,"withoutSetter",function(ve){return ge(X(ve),ve)}),B.f=le,K.f=Ee,M.f=_e,L.f=D.f=Ie,$.f=Pe,W.f=function(ve){return ge(z(ve),ve)},p&&(ft(je[ce],"description",{configurable:!0,get:function(){return De(this).description}}),u||G(Fe,"propertyIsEnumerable",le,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:je}),ae(k(Le),function(ve){q(ve)}),l({target:te,stat:!0,forced:!h},{for:function(ve){var me=String(ve);if(T(Ce,me))return Ce[me];var Oe=je(me);return Ce[me]=Oe,Ae[Oe]=me,Oe},keyFor:function(me){if(!J(me))throw TypeError(me+" is not a symbol");if(T(Ae,me))return Ae[me]},useSetter:function(){Ue=!0},useSimple:function(){Ue=!1}}),l({target:"Object",stat:!0,forced:!h,sham:!p},{create:se,defineProperty:Ee,defineProperties:$e,getOwnPropertyDescriptor:_e}),l({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:Ie,getOwnPropertySymbols:Pe}),l({target:"Object",stat:!0,forced:_(function(){$.f(1)})},{getOwnPropertySymbols:function(me){return $.f(A(me))}}),Qe){var Ne=!h||_(function(){var ve=je();return Qe([ve])!="[null]"||Qe({a:ve})!="{}"||Qe(Object(ve))!="{}"});l({target:"JSON",stat:!0,forced:Ne},{stringify:function(me,Oe,Ge){for(var Se=[me],We=1,mt;arguments.length>We;)Se.push(arguments[We++]);if(mt=Oe,!(!E(Oe)&&me===void 0||J(me)))return S(Oe)||(Oe=function(Nt,nt){if(typeof mt=="function"&&(nt=mt.call(this,Nt,nt)),!J(nt))return nt}),Se[1]=Oe,Qe.apply(null,Se)}})}je[ce][fe]||H(je[ce],fe,je[ce].valueOf),Z(je,te),ee[ue]=!0},a630:function(o,a,i){var l=i("23e7"),r=i("4df4"),d=i("1c7e"),u=!d(function(p){Array.from(p)});l({target:"Array",stat:!0,forced:u},{from:r})},a640:function(o,a,i){var l=i("d039");o.exports=function(r,d){var u=[][r];return!!u&&l(function(){u.call(null,d||function(){throw 1},1)})}},a691:function(o,a){var i=Math.ceil,l=Math.floor;o.exports=function(r){return isNaN(r=+r)?0:(r>0?l:i)(r)}},ab13:function(o,a,i){var l=i("b622"),r=l("match");o.exports=function(d){var u=/./;try{"/./"[d](u)}catch{try{return u[r]=!1,"/./"[d](u)}catch{}}return!1}},ac1f:function(o,a,i){var l=i("23e7"),r=i("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(o,a,i){var l=i("825a");o.exports=function(){var r=l(this),d="";return r.global&&(d+="g"),r.ignoreCase&&(d+="i"),r.multiline&&(d+="m"),r.dotAll&&(d+="s"),r.unicode&&(d+="u"),r.sticky&&(d+="y"),d}},ae40:function(o,a,i){var l=i("83ab"),r=i("d039"),d=i("5135"),u=Object.defineProperty,p={},h=function(g){throw g};o.exports=function(g,_){if(d(p,g))return p[g];_||(_={});var T=[][g],S=d(_,"ACCESSORS")?_.ACCESSORS:!1,E=d(_,0)?_[0]:h,y=d(_,1)?_[1]:void 0;return p[g]=!!T&&!r(function(){if(S&&!l)return!0;var A={length:-1};S?u(A,1,{enumerable:!0,get:h}):A[1]=1,T.call(A,E,y)})}},ae93:function(o,a,i){var l=i("e163"),r=i("9112"),d=i("5135"),u=i("b622"),p=i("c430"),h=u("iterator"),g=!1,_=function(){return this},T,S,E;[].keys&&(E=[].keys(),"next"in E?(S=l(l(E)),S!==Object.prototype&&(T=S)):g=!0),T==null&&(T={}),!p&&!d(T,h)&&r(T,h,_),o.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:g}},b041:function(o,a,i){var l=i("00ee"),r=i("f5df");o.exports=l?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(o,a,i){var l=i("83ab"),r=i("9bf2").f,d=Function.prototype,u=d.toString,p=/^\s*function ([^ (]*)/,h="name";l&&!(h in d)&&r(d,h,{configurable:!0,get:function(){try{return u.call(this).match(p)[1]}catch{return""}}})},b622:function(o,a,i){var l=i("da84"),r=i("5692"),d=i("5135"),u=i("90e3"),p=i("4930"),h=i("fdbf"),g=r("wks"),_=l.Symbol,T=h?_:_&&_.withoutSetter||u;o.exports=function(S){return d(g,S)||(p&&d(_,S)?g[S]=_[S]:g[S]=T("Symbol."+S)),g[S]}},b64b:function(o,a,i){var l=i("23e7"),r=i("7b0b"),d=i("df75"),u=i("d039"),p=u(function(){d(1)});l({target:"Object",stat:!0,forced:p},{keys:function(g){return d(r(g))}})},b727:function(o,a,i){var l=i("0366"),r=i("44ad"),d=i("7b0b"),u=i("50c4"),p=i("65f0"),h=[].push,g=function(_){var T=_==1,S=_==2,E=_==3,y=_==4,A=_==6,C=_==5||A;return function(O,N,R,k){for(var L=d(O),D=r(L),$=l(N,R,3),M=u(D.length),K=0,B=k||p,H=T?B(O,M):S?B(O,0):void 0,G,V;M>K;K++)if((C||K in D)&&(G=D[K],V=$(G,K,L),_)){if(T)H[K]=V;else if(V)switch(_){case 3:return!0;case 5:return G;case 6:return K;case 2:h.call(H,G)}else if(y)return!1}return A?-1:E||y?y:H}};o.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6)}},c04e:function(o,a,i){var l=i("861d");o.exports=function(r,d){if(!l(r))return r;var u,p;if(d&&typeof(u=r.toString)=="function"&&!l(p=u.call(r))||typeof(u=r.valueOf)=="function"&&!l(p=u.call(r))||!d&&typeof(u=r.toString)=="function"&&!l(p=u.call(r)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(o,a){o.exports=!1},c6b6:function(o,a){var i={}.toString;o.exports=function(l){return i.call(l).slice(8,-1)}},c6cd:function(o,a,i){var l=i("da84"),r=i("ce4e"),d="__core-js_shared__",u=l[d]||r(d,{});o.exports=u},c740:function(o,a,i){var l=i("23e7"),r=i("b727").findIndex,d=i("44d2"),u=i("ae40"),p="findIndex",h=!0,g=u(p);p in[]&&Array(1)[p](function(){h=!1}),l({target:"Array",proto:!0,forced:h||!g},{findIndex:function(T){return r(this,T,arguments.length>1?arguments[1]:void 0)}}),d(p)},c8ba:function(o,a){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}o.exports=i},c975:function(o,a,i){var l=i("23e7"),r=i("4d64").indexOf,d=i("a640"),u=i("ae40"),p=[].indexOf,h=!!p&&1/[1].indexOf(1,-0)<0,g=d("indexOf"),_=u("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:h||!g||!_},{indexOf:function(S){return h?p.apply(this,arguments)||0:r(this,S,arguments.length>1?arguments[1]:void 0)}})},ca84:function(o,a,i){var l=i("5135"),r=i("fc6a"),d=i("4d64").indexOf,u=i("d012");o.exports=function(p,h){var g=r(p),_=0,T=[],S;for(S in g)!l(u,S)&&l(g,S)&&T.push(S);for(;h.length>_;)l(g,S=h[_++])&&(~d(T,S)||T.push(S));return T}},caad:function(o,a,i){var l=i("23e7"),r=i("4d64").includes,d=i("44d2"),u=i("ae40"),p=u("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!p},{includes:function(g){return r(this,g,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(o,a,i){var l=i("da84"),r=i("861d"),d=l.document,u=r(d)&&r(d.createElement);o.exports=function(p){return u?d.createElement(p):{}}},ce4e:function(o,a,i){var l=i("da84"),r=i("9112");o.exports=function(d,u){try{r(l,d,u)}catch{l[d]=u}return u}},d012:function(o,a){o.exports={}},d039:function(o,a){o.exports=function(i){try{return!!i()}catch{return!0}}},d066:function(o,a,i){var l=i("428f"),r=i("da84"),d=function(u){return typeof u=="function"?u:void 0};o.exports=function(u,p){return arguments.length<2?d(l[u])||d(r[u]):l[u]&&l[u][p]||r[u]&&r[u][p]}},d1e7:function(o,a,i){var l={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,d=r&&!l.call({1:2},1);a.f=d?function(p){var h=r(this,p);return!!h&&h.enumerable}:l},d28b:function(o,a,i){var l=i("746f");l("iterator")},d2bb:function(o,a,i){var l=i("825a"),r=i("3bbe");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,u={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(u,[]),d=u instanceof Array}catch{}return function(g,_){return l(g),r(_),d?p.call(g,_):g.__proto__=_,g}}():void 0)},d3b7:function(o,a,i){var l=i("00ee"),r=i("6eeb"),d=i("b041");l||r(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(o,a,i){var l=i("9bf2").f,r=i("5135"),d=i("b622"),u=d("toStringTag");o.exports=function(p,h,g){p&&!r(p=g?p:p.prototype,u)&&l(p,u,{configurable:!0,value:h})}},d58f:function(o,a,i){var l=i("1c0b"),r=i("7b0b"),d=i("44ad"),u=i("50c4"),p=function(h){return function(g,_,T,S){l(_);var E=r(g),y=d(E),A=u(E.length),C=h?A-1:0,O=h?-1:1;if(T<2)for(;;){if(C in y){S=y[C],C+=O;break}if(C+=O,h?C<0:A<=C)throw TypeError("Reduce of empty array with no initial value")}for(;h?C>=0:A>C;C+=O)C in y&&(S=_(S,y[C],C,E));return S}};o.exports={left:p(!1),right:p(!0)}},d784:function(o,a,i){i("ac1f");var l=i("6eeb"),r=i("d039"),d=i("b622"),u=i("9263"),p=i("9112"),h=d("species"),g=!r(function(){var y=/./;return y.exec=function(){var A=[];return A.groups={a:"7"},A},"".replace(y,"$<a>")!=="7"}),_=function(){return"a".replace(/./,"$0")==="$0"}(),T=d("replace"),S=function(){return/./[T]?/./[T]("a","$0")==="":!1}(),E=!r(function(){var y=/(?:)/,A=y.exec;y.exec=function(){return A.apply(this,arguments)};var C="ab".split(y);return C.length!==2||C[0]!=="a"||C[1]!=="b"});o.exports=function(y,A,C,O){var N=d(y),R=!r(function(){var K={};return K[N]=function(){return 7},""[y](K)!=7}),k=R&&!r(function(){var K=!1,B=/a/;return y==="split"&&(B={},B.constructor={},B.constructor[h]=function(){return B},B.flags="",B[N]=/./[N]),B.exec=function(){return K=!0,null},B[N](""),!K});if(!R||!k||y==="replace"&&!(g&&_&&!S)||y==="split"&&!E){var L=/./[N],D=C(N,""[y],function(K,B,H,G,V){return B.exec===u?R&&!V?{done:!0,value:L.call(B,H,G)}:{done:!0,value:K.call(H,B,G)}:{done:!1}},{REPLACE_KEEPS_$0:_,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:S}),$=D[0],M=D[1];l(String.prototype,y,$),l(RegExp.prototype,N,A==2?function(K,B){return M.call(K,this,B)}:function(K){return M.call(K,this)})}O&&p(RegExp.prototype[N],"sham",!0)}},d81d:function(o,a,i){var l=i("23e7"),r=i("b727").map,d=i("1dde"),u=i("ae40"),p=d("map"),h=u("map");l({target:"Array",proto:!0,forced:!p||!h},{map:function(_){return r(this,_,arguments.length>1?arguments[1]:void 0)}})},da84:function(o,a,i){(function(l){var r=function(d){return d&&d.Math==Math&&d};o.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof l=="object"&&l)||Function("return this")()}).call(this,i("c8ba"))},dbb4:function(o,a,i){var l=i("23e7"),r=i("83ab"),d=i("56ef"),u=i("fc6a"),p=i("06cf"),h=i("8418");l({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(_){for(var T=u(_),S=p.f,E=d(T),y={},A=0,C,O;E.length>A;)O=S(T,C=E[A++]),O!==void 0&&h(y,C,O);return y}})},dbf1:function(o,a,i){(function(l){i.d(a,"a",function(){return d});function r(){return typeof window<"u"?window.console:l.console}var d=r()}).call(this,i("c8ba"))},ddb0:function(o,a,i){var l=i("da84"),r=i("fdbc"),d=i("e260"),u=i("9112"),p=i("b622"),h=p("iterator"),g=p("toStringTag"),_=d.values;for(var T in r){var S=l[T],E=S&&S.prototype;if(E){if(E[h]!==_)try{u(E,h,_)}catch{E[h]=_}if(E[g]||u(E,g,T),r[T]){for(var y in d)if(E[y]!==d[y])try{u(E,y,d[y])}catch{E[y]=d[y]}}}}},df75:function(o,a,i){var l=i("ca84"),r=i("7839");o.exports=Object.keys||function(u){return l(u,r)}},e01a:function(o,a,i){var l=i("23e7"),r=i("83ab"),d=i("da84"),u=i("5135"),p=i("861d"),h=i("9bf2").f,g=i("e893"),_=d.Symbol;if(r&&typeof _=="function"&&(!("description"in _.prototype)||_().description!==void 0)){var T={},S=function(){var N=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),R=this instanceof S?new _(N):N===void 0?_():_(N);return N===""&&(T[R]=!0),R};g(S,_);var E=S.prototype=_.prototype;E.constructor=S;var y=E.toString,A=String(_("test"))=="Symbol(test)",C=/^Symbol\((.*)\)[^)]+$/;h(E,"description",{configurable:!0,get:function(){var N=p(this)?this.valueOf():this,R=y.call(N);if(u(T,N))return"";var k=A?R.slice(7,-1):R.replace(C,"$1");return k===""?void 0:k}}),l({global:!0,forced:!0},{Symbol:S})}},e163:function(o,a,i){var l=i("5135"),r=i("7b0b"),d=i("f772"),u=i("e177"),p=d("IE_PROTO"),h=Object.prototype;o.exports=u?Object.getPrototypeOf:function(g){return g=r(g),l(g,p)?g[p]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?h:null}},e177:function(o,a,i){var l=i("d039");o.exports=!l(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},e260:function(o,a,i){var l=i("fc6a"),r=i("44d2"),d=i("3f8c"),u=i("69f3"),p=i("7dd0"),h="Array Iterator",g=u.set,_=u.getterFor(h);o.exports=p(Array,"Array",function(T,S){g(this,{type:h,target:l(T),index:0,kind:S})},function(){var T=_(this),S=T.target,E=T.kind,y=T.index++;return!S||y>=S.length?(T.target=void 0,{value:void 0,done:!0}):E=="keys"?{value:y,done:!1}:E=="values"?{value:S[y],done:!1}:{value:[y,S[y]],done:!1}},"values"),d.Arguments=d.Array,r("keys"),r("values"),r("entries")},e439:function(o,a,i){var l=i("23e7"),r=i("d039"),d=i("fc6a"),u=i("06cf").f,p=i("83ab"),h=r(function(){u(1)}),g=!p||h;l({target:"Object",stat:!0,forced:g,sham:!p},{getOwnPropertyDescriptor:function(T,S){return u(d(T),S)}})},e538:function(o,a,i){var l=i("b622");a.f=l},e893:function(o,a,i){var l=i("5135"),r=i("56ef"),d=i("06cf"),u=i("9bf2");o.exports=function(p,h){for(var g=r(h),_=u.f,T=d.f,S=0;S<g.length;S++){var E=g[S];l(p,E)||_(p,E,T(h,E))}}},e8b5:function(o,a,i){var l=i("c6b6");o.exports=Array.isArray||function(d){return l(d)=="Array"}},e95a:function(o,a,i){var l=i("b622"),r=i("3f8c"),d=l("iterator"),u=Array.prototype;o.exports=function(p){return p!==void 0&&(r.Array===p||u[d]===p)}},f5df:function(o,a,i){var l=i("00ee"),r=i("c6b6"),d=i("b622"),u=d("toStringTag"),p=r(function(){return arguments}())=="Arguments",h=function(g,_){try{return g[_]}catch{}};o.exports=l?r:function(g){var _,T,S;return g===void 0?"Undefined":g===null?"Null":typeof(T=h(_=Object(g),u))=="string"?T:p?r(_):(S=r(_))=="Object"&&typeof _.callee=="function"?"Arguments":S}},f772:function(o,a,i){var l=i("5692"),r=i("90e3"),d=l("keys");o.exports=function(u){return d[u]||(d[u]=r(u))}},fb15:function(o,a,i){if(i.r(a),typeof window<"u"){var l=window.document.currentScript;{var r=i("8875");l=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r})}var d=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(i.p=d[1])}i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("a434"),i("159b"),i("a4d3"),i("e439"),i("dbb4"),i("b64b");function u(J,Ee,$e){return Ee in J?Object.defineProperty(J,Ee,{value:$e,enumerable:!0,configurable:!0,writable:!0}):J[Ee]=$e,J}function p(J,Ee){var $e=Object.keys(J);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(J);Ee&&(se=se.filter(function(le){return Object.getOwnPropertyDescriptor(J,le).enumerable})),$e.push.apply($e,se)}return $e}function h(J){for(var Ee=1;Ee<arguments.length;Ee++){var $e=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?p(Object($e),!0).forEach(function(se){u(J,se,$e[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors($e)):p(Object($e)).forEach(function(se){Object.defineProperty(J,se,Object.getOwnPropertyDescriptor($e,se))})}return J}function g(J){if(Array.isArray(J))return J}i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function _(J,Ee){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(J)))){var $e=[],se=!0,le=!1,_e=void 0;try{for(var Ie=J[Symbol.iterator](),Pe;!(se=(Pe=Ie.next()).done)&&($e.push(Pe.value),!(Ee&&$e.length===Ee));se=!0);}catch(Ne){le=!0,_e=Ne}finally{try{!se&&Ie.return!=null&&Ie.return()}finally{if(le)throw _e}}return $e}}i("a630"),i("fb6a"),i("b0c0"),i("25f0");function T(J,Ee){(Ee==null||Ee>J.length)&&(Ee=J.length);for(var $e=0,se=new Array(Ee);$e<Ee;$e++)se[$e]=J[$e];return se}function S(J,Ee){if(J){if(typeof J=="string")return T(J,Ee);var $e=Object.prototype.toString.call(J).slice(8,-1);if($e==="Object"&&J.constructor&&($e=J.constructor.name),$e==="Map"||$e==="Set")return Array.from(J);if($e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($e))return T(J,Ee)}}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(J,Ee){return g(J)||_(J,Ee)||S(J,Ee)||E()}function A(J){if(Array.isArray(J))return T(J)}function C(J){if(typeof Symbol<"u"&&Symbol.iterator in Object(J))return Array.from(J)}function O(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(J){return A(J)||C(J)||S(J)||O()}var R=i("a352"),k=i.n(R);function L(J){J.parentElement!==null&&J.parentElement.removeChild(J)}function D(J,Ee,$e){var se=$e===0?J.children[0]:J.children[$e-1].nextSibling;J.insertBefore(Ee,se)}var $=i("dbf1");i("13d5"),i("4fad"),i("ac1f"),i("5319");function M(J){var Ee=Object.create(null);return function(se){var le=Ee[se];return le||(Ee[se]=J(se))}}var K=/-(\w)/g,B=M(function(J){return J.replace(K,function(Ee,$e){return $e.toUpperCase()})});i("5db7"),i("73d9");var H=["Start","Add","Remove","Update","End"],G=["Choose","Unchoose","Sort","Filter","Clone"],V=["Move"],Y=[V,H,G].flatMap(function(J){return J}).map(function(J){return"on".concat(J)}),ee={manage:V,manageAndEmit:H,emit:G};function X(J){return Y.indexOf(J)!==-1}i("caad"),i("2ca0");var z=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function W(J){return z.includes(J)}function q(J){return["transition-group","TransitionGroup"].includes(J)}function Z(J){return["id","class","role","style"].includes(J)||J.startsWith("data-")||J.startsWith("aria-")||J.startsWith("on")}function ne(J){return J.reduce(function(Ee,$e){var se=y($e,2),le=se[0],_e=se[1];return Ee[le]=_e,Ee},{})}function ae(J){var Ee=J.$attrs,$e=J.componentData,se=$e===void 0?{}:$e,le=ne(Object.entries(Ee).filter(function(_e){var Ie=y(_e,2),Pe=Ie[0];return Ie[1],Z(Pe)}));return h(h({},le),se)}function ue(J){var Ee=J.$attrs,$e=J.callBackBuilder,se=ne(te(Ee));Object.entries($e).forEach(function(_e){var Ie=y(_e,2),Pe=Ie[0],Ne=Ie[1];ee[Pe].forEach(function(ve){se["on".concat(ve)]=Ne(ve)})});var le="[data-draggable]".concat(se.draggable||"");return h(h({},se),{},{draggable:le})}function te(J){return Object.entries(J).filter(function(Ee){var $e=y(Ee,2),se=$e[0];return $e[1],!Z(se)}).map(function(Ee){var $e=y(Ee,2),se=$e[0],le=$e[1];return[B(se),le]}).filter(function(Ee){var $e=y(Ee,2),se=$e[0];return $e[1],!X(se)})}i("c740");function ce(J,Ee){if(!(J instanceof Ee))throw new TypeError("Cannot call a class as a function")}function fe(J,Ee){for(var $e=0;$e<Ee.length;$e++){var se=Ee[$e];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(J,se.key,se)}}function ke(J,Ee,$e){return Ee&&fe(J.prototype,Ee),J}var De=function(Ee){var $e=Ee.el;return $e},Fe=function(Ee,$e){return Ee.__draggable_context=$e},je=function(Ee){return Ee.__draggable_context},Qe=function(){function J(Ee){var $e=Ee.nodes,se=$e.header,le=$e.default,_e=$e.footer,Ie=Ee.root,Pe=Ee.realList;ce(this,J),this.defaultNodes=le,this.children=[].concat(N(se),N(le),N(_e)),this.externalComponent=Ie.externalComponent,this.rootTransition=Ie.transition,this.tag=Ie.tag,this.realList=Pe}return ke(J,[{key:"render",value:function($e,se){var le=this.tag,_e=this.children,Ie=this._isRootComponent,Pe=Ie?{default:function(){return _e}}:_e;return $e(le,se,Pe)}},{key:"updated",value:function(){var $e=this.defaultNodes,se=this.realList;$e.forEach(function(le,_e){Fe(De(le),{element:se[_e],index:_e})})}},{key:"getUnderlyingVm",value:function($e){return je($e)}},{key:"getVmIndexFromDomIndex",value:function($e,se){var le=this.defaultNodes,_e=le.length,Ie=se.children,Pe=Ie.item($e);if(Pe===null)return _e;var Ne=je(Pe);if(Ne)return Ne.index;if(_e===0)return 0;var ve=De(le[0]),me=N(Ie).findIndex(function(Oe){return Oe===ve});return $e<me?0:_e}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),J}(),Ze=i("8bbf");function ft(J,Ee){var $e=J[Ee];return $e?$e():[]}function kt(J){var Ee=J.$slots,$e=J.realList,se=J.getKey,le=$e||[],_e=["header","footer"].map(function(Oe){return ft(Ee,Oe)}),Ie=y(_e,2),Pe=Ie[0],Ne=Ie[1],ve=Ee.item;if(!ve)throw new Error("draggable element must have an item slot");var me=le.flatMap(function(Oe,Ge){return ve({element:Oe,index:Ge}).map(function(Se){return Se.key=se(Oe),Se.props=h(h({},Se.props||{}),{},{"data-draggable":!0}),Se})});if(me.length!==le.length)throw new Error("Item slot must have only one child");return{header:Pe,footer:Ne,default:me}}function Q(J){var Ee=q(J),$e=!W(J)&&!Ee;return{transition:Ee,externalComponent:$e,tag:$e?Object(Ze.resolveComponent)(J):Ee?Ze.TransitionGroup:J}}function oe(J){var Ee=J.$slots,$e=J.tag,se=J.realList,le=J.getKey,_e=kt({$slots:Ee,realList:se,getKey:le}),Ie=Q($e);return new Qe({nodes:_e,root:Ie,realList:se})}function de(J,Ee){var $e=this;Object(Ze.nextTick)(function(){return $e.$emit(J.toLowerCase(),Ee)})}function Ce(J){var Ee=this;return function($e,se){if(Ee.realList!==null)return Ee["onDrag".concat(J)]($e,se)}}function Ae(J){var Ee=this,$e=Ce.call(this,J);return function(se,le){$e.call(Ee,se,le),de.call(Ee,J,se)}}var Le=null,Me={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Ee){return Ee}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ue=["update:modelValue","change"].concat(N([].concat(N(ee.manageAndEmit),N(ee.emit)).map(function(J){return J.toLowerCase()}))),we=Object(Ze.defineComponent)({name:"draggable",inheritAttrs:!1,props:Me,emits:Ue,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Ee=this.$slots,$e=this.$attrs,se=this.tag,le=this.componentData,_e=this.realList,Ie=this.getKey,Pe=oe({$slots:Ee,tag:se,realList:_e,getKey:Ie});this.componentStructure=Pe;var Ne=ae({$attrs:$e,componentData:le});return Pe.render(Ze.h,Ne)}catch(ve){return this.error=!0,Object(Ze.h)("pre",{style:{color:"red"}},ve.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&$.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Ee=this;if(!this.error){var $e=this.$attrs,se=this.$el,le=this.componentStructure;le.updated();var _e=ue({$attrs:$e,callBackBuilder:{manageAndEmit:function(Ne){return Ae.call(Ee,Ne)},emit:function(Ne){return de.bind(Ee,Ne)},manage:function(Ne){return Ce.call(Ee,Ne)}}}),Ie=se.nodeType===1?se:se.parentElement;this._sortable=new k.a(Ie,_e),this.targetDomElement=Ie,Ie.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Ee=this.list;return Ee||this.modelValue},getKey:function(){var Ee=this.itemKey;return typeof Ee=="function"?Ee:function($e){return $e[Ee]}}},watch:{$attrs:{handler:function(Ee){var $e=this._sortable;$e&&te(Ee).forEach(function(se){var le=y(se,2),_e=le[0],Ie=le[1];$e.option(_e,Ie)})},deep:!0}},methods:{getUnderlyingVm:function(Ee){return this.componentStructure.getUnderlyingVm(Ee)||null},getUnderlyingPotencialDraggableComponent:function(Ee){return Ee.__draggable_component__},emitChanges:function(Ee){var $e=this;Object(Ze.nextTick)(function(){return $e.$emit("change",Ee)})},alterList:function(Ee){if(this.list){Ee(this.list);return}var $e=N(this.modelValue);Ee($e),this.$emit("update:modelValue",$e)},spliceList:function(){var Ee=arguments,$e=function(le){return le.splice.apply(le,N(Ee))};this.alterList($e)},updatePosition:function(Ee,$e){var se=function(_e){return _e.splice($e,0,_e.splice(Ee,1)[0])};this.alterList(se)},getRelatedContextFromMoveEvent:function(Ee){var $e=Ee.to,se=Ee.related,le=this.getUnderlyingPotencialDraggableComponent($e);if(!le)return{component:le};var _e=le.realList,Ie={list:_e,component:le};if($e!==se&&_e){var Pe=le.getUnderlyingVm(se)||{};return h(h({},Pe),Ie)}return Ie},getVmIndexFromDomIndex:function(Ee){return this.componentStructure.getVmIndexFromDomIndex(Ee,this.targetDomElement)},onDragStart:function(Ee){this.context=this.getUnderlyingVm(Ee.item),Ee.item._underlying_vm_=this.clone(this.context.element),Le=Ee.item},onDragAdd:function(Ee){var $e=Ee.item._underlying_vm_;if($e!==void 0){L(Ee.item);var se=this.getVmIndexFromDomIndex(Ee.newIndex);this.spliceList(se,0,$e);var le={element:$e,newIndex:se};this.emitChanges({added:le})}},onDragRemove:function(Ee){if(D(this.$el,Ee.item,Ee.oldIndex),Ee.pullMode==="clone"){L(Ee.clone);return}var $e=this.context,se=$e.index,le=$e.element;this.spliceList(se,1);var _e={element:le,oldIndex:se};this.emitChanges({removed:_e})},onDragUpdate:function(Ee){L(Ee.item),D(Ee.from,Ee.item,Ee.oldIndex);var $e=this.context.index,se=this.getVmIndexFromDomIndex(Ee.newIndex);this.updatePosition($e,se);var le={element:this.context.element,oldIndex:$e,newIndex:se};this.emitChanges({moved:le})},computeFutureIndex:function(Ee,$e){if(!Ee.element)return 0;var se=N($e.to.children).filter(function(Pe){return Pe.style.display!=="none"}),le=se.indexOf($e.related),_e=Ee.component.getVmIndexFromDomIndex(le),Ie=se.indexOf(Le)!==-1;return Ie||!$e.willInsertAfter?_e:_e+1},onDragMove:function(Ee,$e){var se=this.move,le=this.realList;if(!se||!le)return!0;var _e=this.getRelatedContextFromMoveEvent(Ee),Ie=this.computeFutureIndex(_e,Ee),Pe=h(h({},this.context),{},{futureIndex:Ie}),Ne=h(h({},Ee),{},{relatedContext:_e,draggedContext:Pe});return se(Ne,$e)},onDragEnd:function(){Le=null}}}),ge=we;a.default=ge},fb6a:function(o,a,i){var l=i("23e7"),r=i("861d"),d=i("e8b5"),u=i("23cb"),p=i("50c4"),h=i("fc6a"),g=i("8418"),_=i("b622"),T=i("1dde"),S=i("ae40"),E=T("slice"),y=S("slice",{ACCESSORS:!0,0:0,1:2}),A=_("species"),C=[].slice,O=Math.max;l({target:"Array",proto:!0,forced:!E||!y},{slice:function(R,k){var L=h(this),D=p(L.length),$=u(R,D),M=u(k===void 0?D:k,D),K,B,H;if(d(L)&&(K=L.constructor,typeof K=="function"&&(K===Array||d(K.prototype))?K=void 0:r(K)&&(K=K[A],K===null&&(K=void 0)),K===Array||K===void 0))return C.call(L,$,M);for(B=new(K===void 0?Array:K)(O(M-$,0)),H=0;$<M;$++,H++)$ in L&&g(B,H,L[$]);return B.length=H,B}})},fc6a:function(o,a,i){var l=i("44ad"),r=i("1d80");o.exports=function(d){return l(r(d))}},fdbc:function(o,a){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(o,a,i){var l=i("4930");o.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Zy);var XW=Zy.exports;const lr=Gf(XW),qW={components:{Draggable:lr},props:{preChatFields:{type:Array,default:()=>[]}},emits:["update","dragEnd"],data(){return{preChatFieldOptions:this.preChatFields}},watch:{preChatFields(){this.preChatFieldOptions=this.preChatFields}},methods:{isFieldEditable(e){return!e.enabled},handlePreChatFieldOptions(e,t,n){this.$emit("update",e,t,n)},onDragEnd(){this.$emit("dragEnd",this.preChatFieldOptions)}}},ZW={class:"pre-chat-field"},QW={class:"pre-chat-field"},JW={class:"pre-chat-field"},ej=["onUpdate:modelValue","value","disabled","onClick"],tj=["onUpdate:modelValue","disabled"],nj=["onUpdate:modelValue","disabled"];function sj(e,t,n,s,o,a){const i=F("fluent-icon"),l=F("woot-switch"),r=F("Draggable");return m(),P(r,{modelValue:o.preChatFieldOptions,"onUpdate:modelValue":t[0]||(t[0]=d=>o.preChatFieldOptions=d),tag:"tbody","item-key":"name",onEnd:a.onDragEnd},{item:j(({element:d})=>[c("tr",null,[c("td",ZW,[b(i,{icon:"drag"})]),c("td",QW,[b(l,{"model-value":d.enabled,onInput:u=>a.handlePreChatFieldOptions(u,"enabled",d)},null,8,["model-value","onInput"])]),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},v(d.name),3),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},v(d.type),3),c("td",JW,[ie(c("input",{"onUpdate:modelValue":u=>d.required=u,type:"checkbox",value:`${d.name}-required`,disabled:!d.enabled,onClick:u=>a.handlePreChatFieldOptions(u,"required",d)},null,8,ej),[[Kt,d.required]])]),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},[ie(c("input",{"onUpdate:modelValue":u=>d.label=u,type:"text",disabled:a.isFieldEditable(d)},null,8,tj),[[at,d.label]])],2),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},[ie(c("input",{"onUpdate:modelValue":u=>d.placeholder=u,type:"text",disabled:a.isFieldEditable(d)},null,8,nj),[[at,d.placeholder]])],2)])]),_:1},8,["modelValue","onEnd"])}const aj=Re(qW,[["render",sj],["__scopeId","data-v-b5db85e5"]]),xu=Object.fromEntries(Object.entries(OC).filter(([e])=>e.includes("en"))).en,oj={emailAddress:{key:"EMAIL_ADDRESS",label:"Email Id",placeholder:"Please enter your email address"},fullName:{key:"FULL_NAME",label:"Full Name",placeholder:"Please enter your full name"},phoneNumber:{key:"PHONE_NUMBER",label:"Phone Number",placeholder:"Please enter your phone number"}},ij=({key:e,label:t})=>xu.PRE_CHAT_FORM.FIELDS[e]?xu.PRE_CHAT_FORM.FIELDS[e].LABEL:t,lj=({key:e,placeholder:t})=>xu.PRE_CHAT_FORM.FIELDS[e]?xu.PRE_CHAT_FORM.FIELDS[e].PLACEHOLDER:t,rj=({standardFields:e,customAttributes:t})=>{let n=[];const{pre_chat_fields:s}=e;return t.forEach(o=>{s.find(i=>i.name===o.attribute_key)||n.push({label:o.attribute_display_name,placeholder:o.attribute_display_name,name:o.attribute_key,type:o.attribute_display_type,values:o.attribute_values,field_type:o.attribute_model,regex_pattern:o.regex_pattern,regex_cue:o.regex_cue,required:!1,enabled:!1})}),n},cj=({preChatFields:e})=>e.map(t=>({...t,label:ij({key:t.name,label:t.label?t.label:t.name}),placeholder:lj({key:t.name,placeholder:t.placeholder?t.placeholder:t.name})})),dj=({preChatFormOptions:e={},customAttributes:t=[]})=>{const{pre_chat_message:n,pre_chat_fields:s}=e;let o={},a={};const i=cj({preChatFields:s});return o=rj({standardFields:{pre_chat_fields:i},customAttributes:t}),a=[...i,...o],{pre_chat_message:n,pre_chat_fields:a}},uj={components:{PreChatFields:aj,WootMessageEditor:wo,NextButton:he},props:{inbox:{type:Object,default:()=>({})}},data(){return{preChatFormEnabled:!1,preChatMessage:"",preChatFields:[]}},computed:{...gt({uiFlags:"inboxes/getUIFlags",customAttributes:"attributes/getAttributes"}),preChatFieldOptions(){const{pre_chat_form_options:e}=this.inbox;return dj({preChatFormOptions:e,customAttributes:this.customAttributes})}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{pre_chat_form_enabled:e}=this.inbox;this.preChatFormEnabled=e;const{pre_chat_message:t,pre_chat_fields:n}=this.preChatFieldOptions||{};this.preChatMessage=t,this.preChatFields=n},isFieldEditable(e){return!!oj[e.name]||!e.enabled},handlePreChatFieldOptions(e,t,n){this.preChatFields.forEach((s,o)=>{s.name===n.name&&(this.preChatFields[o][t]=!n[t])})},changePreChatFieldFieldsOrder(e){this.preChatFields=e},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{pre_chat_form_enabled:this.preChatFormEnabled,pre_chat_form_options:{pre_chat_message:this.preChatMessage,pre_chat_fields:this.preChatFields}}};await this.$store.dispatch("inboxes/updateInbox",e),Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}}},mj={class:"mx-8 my-2 text-base"},pj={class:"mx-0 mt-6 mb-3"},hj={class:"w-1/4"},fj={value:!0},gj={value:!1},_j={key:0},vj={class:"mt-4"},bj={class:"table w-full table-striped woot-table"},Ej={class:"thead-dark"},Tj={scope:"col"},yj={scope:"col"},Aj={scope:"col"},Sj={scope:"col"},Ij={scope:"col"},Cj={class:"w-auto my-4"};function Nj(e,t,n,s,o,a){const i=F("WootMessageEditor"),l=F("PreChatFields"),r=F("NextButton");return m(),f("div",mj,[c("div",pj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.DESCRIPTION")),1),c("form",{class:"flex flex-col",onSubmit:t[2]||(t[2]=Ke((...d)=>a.updateInbox&&a.updateInbox(...d),["prevent"]))},[c("label",hj,[be(v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.preChatFormEnabled=d)},[c("option",fj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.ENABLED")),1),c("option",gj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.DISABLED")),1)],512),[[Mt,o.preChatFormEnabled]])]),o.preChatFormEnabled?(m(),f("div",_j,[c("div",null,[c("label",null,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.LABEL")),1),b(i,{modelValue:o.preChatMessage,"onUpdate:modelValue":t[1]||(t[1]=d=>o.preChatMessage=d),class:"message-editor",placeholder:e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),c("div",vj,[c("label",null,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS")),1),c("table",bj,[c("thead",Ej,[c("tr",null,[t[3]||(t[3]=c("th",{scope:"col"},null,-1)),t[4]||(t[4]=c("th",{scope:"col"},null,-1)),c("th",Tj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.KEY")),1),c("th",yj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.TYPE")),1),c("th",Aj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.REQUIRED")),1),c("th",Sj,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.LABEL")),1),c("th",Ij,v(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.PLACE_HOLDER")),1)])]),b(l,{"pre-chat-fields":o.preChatFields,onUpdate:a.handlePreChatFieldOptions,onDragEnd:a.changePreChatFieldFieldsOrder},null,8,["pre-chat-fields","onUpdate","onDragEnd"])])])])):x("",!0),c("div",Cj,[b(r,{type:"submit",label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE_PRE_CHAT_FORM_SETTINGS"),"is-loading":e.uiFlags.isUpdating},null,8,["label","is-loading"])])],32)])}const Oj=Re(uj,[["render",Nj],["__scopeId","data-v-af815c24"]]),hd=xC(30),xj={components:{},props:{dayName:{type:String,required:!0},timeSlot:{type:Object,default:()=>({from:"",to:""})}},emits:["update"],computed:{fromTimeSlots(){return hd},toTimeSlots(){return hd.filter(e=>e!=="12:00 AM")},isDayEnabled:{get(){return!!(this.timeSlot.from&&this.timeSlot.to)},set(e){const t=e?{...this.timeSlot,from:hd[0],to:hd[16],valid:!0,openAllDay:!1}:{...this.timeSlot,from:"",to:"",valid:!1,openAllDay:!1};this.$emit("update",t)}},fromTime:{get(){return this.timeSlot.from},set(e){const t=Lr(e,"hh:mm a",new Date),n=Hd(this.toDate,t)/60>0;this.$emit("update",{...this.timeSlot,from:e,valid:n})}},toTime:{get(){return this.timeSlot.to},set(e){const t=Lr(e,"hh:mm a",new Date);if(e==="12:00 AM")this.$emit("update",{...this.timeSlot,to:e,valid:!0});else{const n=Hd(t,this.fromDate)/60>0;this.$emit("update",{...this.timeSlot,to:e,valid:n})}}},fromDate(){return Lr(this.fromTime,"hh:mm a",new Date)},toDate(){return Lr(this.toTime,"hh:mm a",new Date)},totalHours(){return this.timeSlot.openAllDay?24:Hd(this.toDate,this.fromDate)/60},hasError(){return!this.timeSlot.valid},isOpenAllDay:{get(){return this.timeSlot.openAllDay},set(e){e?this.$emit("update",{...this.timeSlot,from:"12:00 AM",to:"11:59 PM",valid:!0,openAllDay:e}):this.$emit("update",{...this.timeSlot,from:"09:00 AM",to:"05:00 PM",valid:!0,openAllDay:e})}}}},wj={class:"day-wrap flex py-2 gap-1 items-center px-0 min-h-[3rem] box-content border-b border-solid border-n-weak"},Rj={class:"checkbox-wrap flex items-center"},$j=["title"],Mj={class:"day flex items-center py-0 px-3 text-sm font-medium flex-shrink-0 min-w-28"},kj={key:0,class:"flex flex-col flex-shrink-0 flex-grow relative"},Lj={class:"flex items-center flex-shrink-0 flex-grow"},Dj={class:"checkbox-wrap flex items-center open-all-day mr-6"},Pj=["title"],Bj={class:"text-sm font-medium ml-1"},Fj={class:"separator-icon flex items-center py-0 px-3"},Uj={key:0,class:"date-error pt-1"},Gj={class:"error text-xs text-red-300 dark:text-red-500"},Vj={key:1,class:"flex items-center flex-shrink-0 flex-grow text-sm text-slate-500 dark:text-slate-300"},Hj={key:0,class:"label bg-n-brand/10 dark:bg-n-brand/30 text-n-blue-text text-xs inline-block px-2 py-1 rounded-lg cursor-default whitespace-nowrap"};function Kj(e,t,n,s,o,a){const i=F("multiselect"),l=F("fluent-icon");return m(),f("div",wj,[c("div",Rj,[ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.isDayEnabled=r),name:"enable-day",class:"m-0",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.ENABLE")},null,8,$j),[[Kt,a.isDayEnabled]])]),c("div",Mj,[c("span",null,v(n.dayName),1)]),a.isDayEnabled?(m(),f("div",kj,[c("div",Lj,[c("div",Dj,[ie(c("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>a.isOpenAllDay=r),name:"enable-open-all-day",class:"enable-checkbox text-sm font-medium",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")},null,8,Pj),[[Kt,a.isOpenAllDay]]),c("span",Bj,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")),1)]),b(i,{modelValue:a.fromTime,"onUpdate:modelValue":t[2]||(t[2]=r=>a.fromTime=r),options:a.fromTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:a.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"]),c("div",Fj,[b(l,{icon:"subtract",type:"solid",size:"16"})]),b(i,{modelValue:a.toTime,"onUpdate:modelValue":t[3]||(t[3]=r=>a.toTime=r),options:a.toTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:a.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"])]),a.hasError?(m(),f("div",Uj,[c("span",Gj,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.VALIDATION_ERROR")),1)])):x("",!0)])):(m(),f("div",Vj,[c("span",null,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.UNAVAILABLE")),1)])),c("div",null,[a.isDayEnabled&&!a.hasError?(m(),f("span",Hj,v(a.totalHours)+" "+v(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.HOURS")),1)):x("",!0)])])}const zj=Re(xj,[["render",Kj],["__scopeId","data-v-c475a243"]]),B1={label:"Pacific Time (US & Canada) (GMT-07:00)",value:"America/Los_Angeles"},Wj={components:{SettingsSection:_l,BusinessDay:zj,NextButton:he,WootMessageEditor:wo},mixins:[Ro],props:{inbox:{type:Object,default:()=>({})}},data(){return{isBusinessHoursEnabled:!1,unavailableMessage:"",timeZone:B1,dayNames:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeSlots:[...q_]}},computed:{...gt({uiFlags:"inboxes/getUIFlags"}),hasError(){return this.isBusinessHoursEnabled?this.timeSlots.filter(e=>e.from&&!e.valid).length>0:!1},timeZones(){return[...RC()]},isRichEditorEnabled(){return!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{working_hours_enabled:e=!1,out_of_office_message:t,working_hours:n=[],timezone:s}=this.inbox,o=X_(n).length?X_(n):q_;this.isBusinessHoursEnabled=e,this.unavailableMessage=t||"",this.timeSlots=o,this.timeZone=this.timeZones.find(a=>s===a.value)||B1},onSlotUpdate(e,t){this.timeSlots=this.timeSlots.map(n=>n.day===e?t:n)},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,working_hours_enabled:this.isBusinessHoursEnabled,out_of_office_message:this.unavailableMessage,working_hours:wC(this.timeSlots),timezone:this.timeZone.value,channel:{}};await this.$store.dispatch("inboxes/updateInbox",e),Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){Te(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},jj={class:"mx-8"},Yj={for:"toggle-business-hours",class:"toggle-input-wrap"},Xj={class:"mb-4 text-slate-700 dark:text-slate-300"},qj={key:0,class:"mb-6"},Zj={class:"unavailable-input-wrap"},Qj={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},Jj={class:"timezone-input-wrap"};function eY(e,t,n,s,o,a){const i=F("WootMessageEditor"),l=F("multiselect"),r=F("BusinessDay"),d=F("NextButton"),u=F("SettingsSection");return m(),f("div",jj,[b(u,{title:e.$t("INBOX_MGMT.BUSINESS_HOURS.TITLE"),"sub-title":e.$t("INBOX_MGMT.BUSINESS_HOURS.SUBTITLE")},{default:j(()=>[c("form",{onSubmit:t[4]||(t[4]=Ke((...p)=>a.updateInbox&&a.updateInbox(...p),["prevent"]))},[c("label",Yj,[ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.isBusinessHoursEnabled=p),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-business-hours"},null,512),[[Kt,o.isBusinessHoursEnabled]]),be(" "+v(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_AVAILABILITY")),1)]),c("p",Xj,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_HELP")),1),o.isBusinessHoursEnabled?(m(),f("div",qj,[c("div",null,[c("label",Zj,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.UNAVAILABLE_MESSAGE_LABEL")),1),a.isRichEditorEnabled?(m(),f("div",Qj,[b(i,{modelValue:o.unavailableMessage,"onUpdate:modelValue":t[1]||(t[1]=p=>o.unavailableMessage=p),"enable-variables":"","is-format-mode":"","min-height":4},null,8,["modelValue"])])):ie((m(),f("textarea",{key:1,"onUpdate:modelValue":t[2]||(t[2]=p=>o.unavailableMessage=p),type:"text"},null,512)),[[at,o.unavailableMessage]])]),c("div",Jj,[c("label",null,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.TIMEZONE_LABEL")),1),b(l,{modelValue:o.timeZone,"onUpdate:modelValue":t[3]||(t[3]=p=>o.timeZone=p),options:a.timeZones,"deselect-label":"","select-label":"","selected-label":"","track-by":"value",label:"label","close-on-select":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1},null,8,["modelValue","options","placeholder"])]),c("label",null,v(e.$t("INBOX_MGMT.BUSINESS_HOURS.WEEKLY_TITLE")),1),(m(!0),f(pe,null,ye(o.timeSlots,p=>(m(),P(r,{key:p.day,"day-name":o.dayNames[p.day],"time-slot":p,onUpdate:h=>a.onSlotUpdate(p.day,h)},null,8,["day-name","time-slot","onUpdate"]))),128))])):x("",!0),b(d,{type:"submit",label:e.$t("INBOX_MGMT.BUSINESS_HOURS.UPDATE"),"is-loading":e.uiFlags.isUpdating,disabled:a.hasError},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const tY=Re(Wj,[["render",eY],["__scopeId","data-v-3f3a7044"]]),nY={components:{SettingsSection:_l,NextButton:he},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:Lt()}},data(){return{isIMAPEnabled:!1,address:"",port:"",login:"",password:"",isSSLEnabled:!0}},validations:{address:{required:it},port:{required:it,minLength:Nn(2)},login:{required:it},password:{required:it}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{imap_enabled:e,imap_address:t,imap_port:n,imap_login:s,imap_password:o,imap_enable_ssl:a}=this.inbox;this.isIMAPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=o,this.isSSLEnabled=a},async updateInbox(){try{this.loading=!0;let e={id:this.inbox.id,formData:!1,channel:{imap_enabled:this.isIMAPEnabled,imap_address:this.address,imap_port:this.port,imap_login:this.login,imap_password:this.password,imap_enable_ssl:this.isSSLEnabled}};this.isIMAPEnabled||(e.channel.smtp_enabled=!1),await this.$store.dispatch("inboxes/updateInboxIMAP",e),Te(this.$t("INBOX_MGMT.IMAP.EDIT.SUCCESS_MESSAGE"))}catch(e){Te(e.message)}}}},sY={class:"mx-8"},aY={for:"toggle-imap-enable"},oY={key:0,class:"mb-6"},iY={for:"toggle-enable-ssl"};function lY(e,t,n,s,o,a){const i=F("woot-input"),l=F("NextButton"),r=F("SettingsSection");return m(),f("div",sY,[b(r,{title:e.$t("INBOX_MGMT.IMAP.TITLE"),"sub-title":e.$t("INBOX_MGMT.IMAP.SUBTITLE"),note:e.$t("INBOX_MGMT.IMAP.NOTE_TEXT")},{default:j(()=>[c("form",{onSubmit:t[6]||(t[6]=Ke((...d)=>a.updateInbox&&a.updateInbox(...d),["prevent"]))},[c("label",aY,[ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.isIMAPEnabled=d),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-imap-enable"},null,512),[[Kt,o.isIMAPEnabled]]),be(" "+v(e.$t("INBOX_MGMT.IMAP.TOGGLE_AVAILABILITY")),1)]),c("p",null,v(e.$t("INBOX_MGMT.IMAP.TOGGLE_HELP")),1),o.isIMAPEnabled?(m(),f("div",oY,[b(i,{modelValue:o.address,"onUpdate:modelValue":t[1]||(t[1]=d=>o.address=d),class:re([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.port,"onUpdate:modelValue":t[2]||(t[2]=d=>o.port=d),type:"number",class:re([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.login,"onUpdate:modelValue":t[3]||(t[3]=d=>o.login=d),class:re([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.password,"onUpdate:modelValue":t[4]||(t[4]=d=>o.password=d),class:re([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),c("label",iY,[ie(c("input",{"onUpdate:modelValue":t[5]||(t[5]=d=>o.isSSLEnabled=d),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-enable-ssl"},null,512),[[Kt,o.isSSLEnabled]]),be(" "+v(e.$t("INBOX_MGMT.IMAP.ENABLE_SSL")),1)])])):x("",!0),b(l,{type:"submit",label:e.$t("INBOX_MGMT.IMAP.UPDATE"),"is-loading":e.uiFlags.isUpdatingIMAP,disabled:s.v$.$invalid&&o.isIMAPEnabled||e.uiFlags.isUpdatingIMAP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title","note"])])}const rY=Re(nY,[["render",lY]]),cY={props:{name:{type:String,default:"string"},label:{type:String,default:""},items:{type:Array,default:()=>[]},action:{type:Function,default:()=>{}}}},dY={class:"radio-group-label"},uY={class:"radio-group"},mY={class:"radio-group-item-label"},pY=["name","checked","onChange"];function hY(e,t,n,s,o,a){return m(),f("div",null,[c("label",dY,v(n.label),1),c("div",uY,[(m(!0),f(pe,null,ye(n.items,i=>(m(),f("div",{key:i.id,class:"radio-group-item"},[c("label",mY,[c("input",{class:"radio-input",name:`${n.name} -radio-input`,type:"radio",checked:i.checked,onChange:l=>n.action({...i,checked:!0})},null,40,pY),c("span",null,v(i.title),1)])]))),128))])])}const Hg=Re(cY,[["render",hY],["__scopeId","data-v-e4089570"]]),fY={props:{label:{type:String,default:""},options:{type:Array,default:()=>[]},selected:{type:String,default:""},action:{type:Function,default:()=>{}}},data(){return{value:this.selected}}},gY={for:"dropdown-select"};function _Y(e,t,n,s,o,a){return m(),f("div",null,[c("label",gY,v(n.label),1),ie(c("select",{id:"dropdown-select","onUpdate:modelValue":t[0]||(t[0]=i=>o.value=i),name:"dropdown-select",onChange:t[1]||(t[1]=i=>n.action(o.value))},[(m(!0),f(pe,null,ye(n.options,i=>(m(),f("option",{key:i.key},v(i.value),1))),128))],544),[[Mt,o.value]])])}const vY=Re(fY,[["render",_Y]]),bY={components:{SettingsSection:_l,InputRadioGroup:Hg,SingleSelectDropdown:vY,NextButton:he},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:Lt()}},data(){return{isSMTPEnabled:!1,address:"",port:"",login:"",password:"",domain:"",ssl:!1,starttls:!0,openSSLVerifyMode:"none",authMechanism:"login",encryptionProtocols:[{id:"ssl",title:"SSL/TLS",checked:!1},{id:"starttls",title:"STARTTLS",checked:!0}],openSSLVerifyModes:[{key:1,value:"none"},{key:2,value:"peer"},{key:3,value:"client_once"},{key:4,value:"fail_if_no_peer_cert"}],authMechanisms:[{key:1,value:"plain"},{key:2,value:"login"},{key:3,value:"cram-md5"},{key:4,value:"xoauth"},{key:5,value:"xoauth2"},{key:6,value:"ntlm"},{key:7,value:"gssapi"}]}},validations:{address:{required:it},port:{required:it,minLength:Nn(2)},login:{required:it},password:{required:it},domain:{required:it}},computed:{...gt({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{smtp_enabled:e,smtp_address:t,smtp_port:n,smtp_login:s,smtp_password:o,smtp_domain:a,smtp_enable_starttls_auto:i,smtp_enable_ssl_tls:l,smtp_openssl_verify_mode:r,smtp_authentication:d}=this.inbox;this.isSMTPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=o,this.domain=a,this.starttls=i,this.ssl=l,this.openSSLVerifyMode=r,this.authMechanism=d,this.encryptionProtocols=[{id:"ssl",title:"SSL/TLS",checked:l},{id:"starttls",title:"STARTTLS",checked:i}]},handleEncryptionChange(e){e.id==="ssl"?(this.ssl=!0,this.starttls=!1):(this.ssl=!1,this.starttls=!0)},handleSSLModeChange(e){this.openSSLVerifyMode=e},handleAuthMechanismChange(e){this.authMechanism=e},async updateInbox(){try{const e={id:this.inbox.id,channel:{smtp_enabled:this.isSMTPEnabled,smtp_address:this.address,smtp_port:this.port,smtp_login:this.login,smtp_password:this.password,smtp_domain:this.domain,smtp_enable_ssl_tls:this.ssl,smtp_enable_starttls_auto:this.starttls,smtp_openssl_verify_mode:this.openSSLVerifyMode,smtp_authentication:this.authMechanism}};await this.$store.dispatch("inboxes/updateInboxSMTP",e),Te(this.$t("INBOX_MGMT.SMTP.EDIT.SUCCESS_MESSAGE"))}catch{Te(this.$t("INBOX_MGMT.SMTP.EDIT.ERROR_MESSAGE"))}}}},EY={class:"mx-8"},TY={for:"toggle-enable-smtp"},yY={key:0,class:"mb-6"};function AY(e,t,n,s,o,a){const i=F("woot-input"),l=F("InputRadioGroup"),r=F("SingleSelectDropdown"),d=F("NextButton"),u=F("SettingsSection");return m(),f("div",EY,[b(u,{title:e.$t("INBOX_MGMT.SMTP.TITLE"),"sub-title":e.$t("INBOX_MGMT.SMTP.SUBTITLE")},{default:j(()=>[c("form",{onSubmit:t[6]||(t[6]=Ke((...p)=>a.updateInbox&&a.updateInbox(...p),["prevent"]))},[c("label",TY,[ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.isSMTPEnabled=p),type:"checkbox",name:"toggle-enable-smtp"},null,512),[[Kt,o.isSMTPEnabled]]),be(" "+v(e.$t("INBOX_MGMT.SMTP.TOGGLE_AVAILABILITY")),1)]),c("p",null,v(e.$t("INBOX_MGMT.SMTP.TOGGLE_HELP")),1),o.isSMTPEnabled?(m(),f("div",yY,[b(i,{modelValue:o.address,"onUpdate:modelValue":t[1]||(t[1]=p=>o.address=p),class:re([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.port,"onUpdate:modelValue":t[2]||(t[2]=p=>o.port=p),type:"number",class:re([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.login,"onUpdate:modelValue":t[3]||(t[3]=p=>o.login=p),class:re([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.password,"onUpdate:modelValue":t[4]||(t[4]=p=>o.password=p),class:re([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(i,{modelValue:o.domain,"onUpdate:modelValue":t[5]||(t[5]=p=>o.domain=p),class:re([{error:s.v$.domain.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.DOMAIN.PLACE_HOLDER"),onBlur:s.v$.domain.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),b(l,{label:e.$t("INBOX_MGMT.SMTP.ENCRYPTION"),items:o.encryptionProtocols,action:a.handleEncryptionChange},null,8,["label","items","action"]),b(r,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.OPEN_SSL_VERIFY_MODE"),selected:o.openSSLVerifyMode,options:o.openSSLVerifyModes,action:a.handleSSLModeChange},null,8,["label","selected","options","action"]),b(r,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.AUTH_MECHANISM"),selected:o.authMechanism,options:o.authMechanisms,action:a.handleAuthMechanismChange},null,8,["label","selected","options","action"])])):x("",!0),b(d,{type:"submit",label:e.$t("INBOX_MGMT.SMTP.UPDATE"),"is-loading":e.uiFlags.isUpdatingSMTP,disabled:s.v$.$invalid&&o.isSMTPEnabled||e.uiFlags.isUpdatingSMTP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const SY=Re(bY,[["render",AY]]),IY={components:{SettingsSection:_l,ImapSettings:rY,SmtpSettings:SY,NextButton:he},mixins:[Ro],props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:Lt()}},data(){return{hmacMandatory:!1,whatsAppInboxAPIKey:""}},validations:{whatsAppInboxAPIKey:{required:it}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){this.hmacMandatory=this.inbox.hmac_mandatory||!1},handleHmacFlag(){this.updateInbox()},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{hmac_mandatory:this.hmacMandatory}};await this.$store.dispatch("inboxes/updateInbox",e),Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Te(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async updateWhatsAppInboxAPIKey(){try{const e={id:this.inbox.id,formData:!1,channel:{}};e.channel.provider_config={...this.inbox.provider_config,api_key:this.whatsAppInboxAPIKey},await this.$store.dispatch("inboxes/updateInbox",e),Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Te(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},CY={key:0,class:"mx-8"},NY={key:1,class:"mx-8"},OY={key:2},xY={class:"mx-8"},wY={target:"_blank",rel:"noopener noreferrer",href:"https://www.chatwoot.com/docs/product/channels/live-chat/sdk/identity-validation/"},RY={class:"flex items-center gap-2"},$Y={for:"hmacMandatory"},MY={key:3,class:"mx-8"},kY={class:"flex items-center gap-2"},LY={for:"hmacMandatory"},DY={key:4},PY={class:"mx-8"},BY={key:5},FY={key:0,class:"mx-8"},UY={class:"flex items-center justify-between flex-1 mt-2 whatsapp-settings--content"};function GY(e,t,n,s,o,a){const i=F("woot-code"),l=F("SettingsSection"),r=F("ImapSettings"),d=F("SmtpSettings"),u=F("woot-input"),p=F("NextButton");return e.isATwilioChannel?(m(),f("div",CY,[b(l,{title:e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")},{default:j(()=>[b(i,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isALineChannel?(m(),f("div",NY,[b(l,{title:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")},{default:j(()=>[b(i,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isAWebWidgetInbox?(m(),f("div",OY,[c("div",xY,[b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_HEADING"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_SUB_HEAD")},{default:j(()=>[b(i,{script:n.inbox.web_widget_script,lang:"html","codepen-title":`${n.inbox.name} - Chatwoot Widget Test`,"enable-code-pen":""},null,8,["script","codepen-title"])]),_:1},8,["title","sub-title"]),b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION")},{subTitle:j(()=>[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION"))+" ",1),c("a",wY,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_LINK_TO_DOCS")),1)]),default:j(()=>[b(i,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title"]),b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:j(()=>[c("div",RY,[ie(c("input",{id:"hmacMandatory","onUpdate:modelValue":t[0]||(t[0]=h=>o.hmacMandatory=h),type:"checkbox",onChange:t[1]||(t[1]=(...h)=>a.handleHmacFlag&&a.handleHmacFlag(...h))},null,544),[[Kt,o.hmacMandatory]]),c("label",$Y,v(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])])):e.isAPIInbox?(m(),f("div",MY,[b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER_SUB_TEXT")},{default:j(()=>[b(i,{script:n.inbox.inbox_identifier},null,8,["script"])]),_:1},8,["title","sub-title"]),b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION")},{default:j(()=>[b(i,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title","sub-title"]),b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:j(()=>[c("div",kY,[ie(c("input",{id:"hmacMandatory","onUpdate:modelValue":t[2]||(t[2]=h=>o.hmacMandatory=h),type:"checkbox",onChange:t[3]||(t[3]=(...h)=>a.handleHmacFlag&&a.handleHmacFlag(...h))},null,544),[[Kt,o.hmacMandatory]]),c("label",LY,v(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])):e.isAnEmailChannel?(m(),f("div",DY,[c("div",PY,[b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_SUB_TEXT")},{default:j(()=>[b(i,{script:n.inbox.forward_to_email},null,8,["script"])]),_:1},8,["title","sub-title"])]),b(r,{inbox:n.inbox},null,8,["inbox"]),n.inbox.imap_enabled?(m(),P(d,{key:0,inbox:n.inbox},null,8,["inbox"])):x("",!0)])):e.isAWhatsAppChannel&&!e.isATwilioChannel?(m(),f("div",BY,[n.inbox.provider_config?(m(),f("div",FY,[b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_SUBHEADER")},{default:j(()=>[b(i,{script:n.inbox.provider_config.webhook_verify_token},null,8,["script"])]),_:1},8,["title","sub-title"]),b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_SUBHEADER")},{default:j(()=>[b(i,{script:n.inbox.provider_config.api_key},null,8,["script"])]),_:1},8,["title","sub-title"]),b(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_SUBHEADER")},{default:j(()=>[c("div",UY,[b(u,{modelValue:o.whatsAppInboxAPIKey,"onUpdate:modelValue":t[4]||(t[4]=h=>o.whatsAppInboxAPIKey=h),type:"text",class:"flex-1 mr-2",placeholder:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_PLACEHOLDER")},null,8,["modelValue","placeholder"]),b(p,{disabled:s.v$.whatsAppInboxAPIKey.$invalid,onClick:a.updateWhatsAppInboxAPIKey},{default:j(()=>[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])])):x("",!0)])):x("",!0)}const VY=Re(IY,[["render",GY],["__scopeId","data-v-1bc1ed6c"]]),HY={components:{SettingsSection:_l,NextButton:he},props:{inbox:{type:Object,default:()=>({})}},setup(){const{isEnterprise:e}=Ra();return{v$:Lt(),isEnterprise:e}},data(){return{selectedAgents:[],isAgentListUpdating:!1,enableAutoAssignment:!1,maxAssignmentLimit:null}},computed:{...gt({agentList:"agents/getAgents"}),maxAssignmentLimitErrors(){return this.v$.maxAssignmentLimit.$error?this.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_RANGE_ERROR"):""}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){var e,t;this.enableAutoAssignment=this.inbox.enable_auto_assignment,this.maxAssignmentLimit=((t=(e=this.inbox)==null?void 0:e.auto_assignment_config)==null?void 0:t.max_assignment_limit)||null,this.fetchAttachedAgents()},async fetchAttachedAgents(){try{const e=await this.$store.dispatch("inboxMembers/get",{inboxId:this.inbox.id}),{data:{payload:t}}=e;this.selectedAgents=t}catch{}},handleEnableAutoAssignment(){this.updateInbox()},async updateAgents(){const e=this.selectedAgents.map(t=>t.id);this.isAgentListUpdating=!0;try{await this.$store.dispatch("inboxMembers/create",{inboxId:this.inbox.id,agentList:e}),Te(this.$t("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Te(this.$t("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}this.isAgentListUpdating=!1},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,enable_auto_assignment:this.enableAutoAssignment,auto_assignment_config:{max_assignment_limit:this.maxAssignmentLimit}};await this.$store.dispatch("inboxes/updateInbox",e),Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}},maxAssignmentLimit:{minValue:Kf(1)}}},KY={class:"w-3/4 settings-item"},zY={class:"flex items-center gap-2"},WY={for:"enableAutoAssignment"},jY={class:"pb-1 text-sm not-italic text-n-slate-11"},YY={key:0,class:"max-assignment-container"},XY={class:"pb-1 text-sm not-italic text-n-slate-11"};function qY(e,t,n,s,o,a){const i=F("multiselect"),l=F("NextButton"),r=F("SettingsSection"),d=F("woot-input");return m(),f("div",null,[b(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS_SUB_TEXT")},{default:j(()=>[b(i,{modelValue:o.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=u=>o.selectedAgents=u),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:"Pick some","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","onSelect"]),b(l,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":o.isAgentListUpdating,onClick:a.updateAgents},null,8,["label","is-loading","onClick"])]),_:1},8,["title","sub-title"]),b(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT_SUB_TEXT")},{default:j(()=>[c("label",KY,[c("div",zY,[ie(c("input",{id:"enableAutoAssignment","onUpdate:modelValue":t[1]||(t[1]=u=>o.enableAutoAssignment=u),type:"checkbox",onChange:t[2]||(t[2]=(...u)=>a.handleEnableAutoAssignment&&a.handleEnableAutoAssignment(...u))},null,544),[[Kt,o.enableAutoAssignment]]),c("label",WY,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT")),1)]),c("p",jY,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT_SUB_TEXT")),1)]),o.enableAutoAssignment&&s.isEnterprise?(m(),f("div",YY,[b(d,{modelValue:o.maxAssignmentLimit,"onUpdate:modelValue":t[3]||(t[3]=u=>o.maxAssignmentLimit=u),type:"number",class:re({error:s.v$.maxAssignmentLimit.$error}),error:a.maxAssignmentLimitErrors,label:e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT"),onBlur:s.v$.maxAssignmentLimit.$touch},null,8,["modelValue","class","error","label","onBlur"]),c("p",XY,v(e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_SUB_TEXT")),1),b(l,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),disabled:s.v$.maxAssignmentLimit.$invalid,onClick:a.updateInbox},null,8,["label","disabled","onClick"])])):x("",!0)]),_:1},8,["title","sub-title"])])}const ZY=Re(HY,[["render",qY],["__scopeId","data-v-1c887a46"]]),QY={class:"relative top-px"},JY={class:"flex items-center justify-start"},eX=["src"],tX={key:1},nX={class:"flex items-center justify-start gap-1"},sX={class:"text-base font-medium leading-3 text-slate-900 dark:text-white"},aX={key:0,class:"w-2 h-2 bg-green-500 rounded-full"},oX={class:"mt-1 text-xs text-slate-600 dark:text-slate-400"},iX={key:0,class:"overflow-auto max-h-60"},lX={class:"mb-2 text-2xl break-words text-slate-900 dark:text-white"},rX={class:"text-sm break-words text-slate-600 dark:text-slate-100"},cX={__name:"WidgetHead",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,n=w(()=>t.config.isDefaultScreen&&(t.config.welcomeHeading&&t.config.welcomeHeading.length!==0||t.config.welcomeTagLine&&t.config.welcomeTagline.length!==0));return(s,o)=>(m(),f("div",{class:re(["rounded-t-lg flex-shrink-0 transition-[max-height] duration-300",n.value?"bg-slate-25 dark:bg-slate-800 px-4 py-5":"bg-white dark:bg-slate-900 p-4"])},[c("div",QY,[c("div",JY,[e.config.logo?(m(),f("img",{key:0,src:e.config.logo,class:re(["mr-2 rounded-full logo",n.value?"h-12 w-12 mb-2":"h-8 w-8 mb-1"])},null,10,eX)):x("",!0),n.value?x("",!0):(m(),f("div",tX,[c("div",nX,[c("span",sX,v(e.config.websiteName),1),e.config.isOnline?(m(),f("div",aX)):x("",!0)]),c("span",oX,v(e.config.replyTime),1)]))]),n.value?(m(),f("div",iX,[c("h2",lX,v(e.config.welcomeHeading),1),c("p",rX,v(e.config.welcomeTagline),1)])):x("",!0)])],2))}},dX={class:"h-[calc(2rem*10)] px-4 overflow-y-auto"},uX={class:"items-end flex justify-end ml-auto mb-1 mt-0 max-w-[85%] text-right"},mX={class:"m-0"},pX={class:"bg-white shadow rounded-[1.25rem] rounded-bl-[0.25rem] px-4 py-3 inline-block text-sm text-slate-900 dark:text-white dark:bg-slate-700"},hX={class:"m-0"},fX={__name:"WidgetBody",props:{config:{type:Object,default:()=>({})}},setup(e){return(t,n)=>(m(),f("div",dX,[c("div",null,[c("div",null,[c("div",uX,[c("div",{class:"rounded-[1.25rem] rounded-br-[0.25rem] text-white dark:text-white text-sm px-4 py-3",style:At({background:e.config.color})},[c("p",mX,v(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.USER_MESSAGE")),1)],4)])]),c("div",pX,[c("div",null,[c("p",hX,v(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.AGENT_MESSAGE")),1)])])])]))}},gX={class:"relative flex flex-col w-full px-4"},_X={key:0,class:"p-4 bg-white rounded-md shadow-sm dark:bg-slate-700"},vX={class:"flex items-center justify-between"},bX={class:"text-sm font-medium leading-4 text-slate-700 dark:text-slate-50"},EX={class:"mt-1 text-xs text-slate-500 dark:text-slate-100"},TX={class:"pr-2 text-xs"},yX={class:"flex items-center gap-2 px-2"},AX={__name:"WidgetFooter",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=He(),s=U(!1),o=w(()=>t.config.isOnline?n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.ONLINE"):n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.OFFLINE"));return(a,i)=>(m(),f("div",gX,[e.config.isDefaultScreen?(m(),f("div",_X,[c("div",vX,[c("div",null,[c("div",bX,v(o.value),1),c("div",EX,v(e.config.replyTime),1)]),b(Qn,{username:"C",size:"34px"})]),e.config.isDefaultScreen?(m(),f("button",{key:0,class:"inline-flex items-center justify-between px-2 py-1 mt-1 -ml-2 font-medium leading-6 bg-transparent rounded-md text-slate-800 dark:bg-transparent dark:text-slate-50 hover:bg-slate-25 dark:hover:bg-slate-800",style:At({color:e.config.color})},[c("span",TX,v(a.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.START_CONVERSATION_BUTTON_TEXT")),1),b(Vm,{icon:"arrow-right",size:"14"})],4)):x("",!0)])):(m(),f("div",{key:1,class:re(["flex items-center h-10 bg-white rounded-md dark:bg-slate-700",{"ring-2 ring-woot-500 dark:ring-woot-400":s.value}])},[b(Vf,{id:"chat-input",rows:1,placeholder:a.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.CHAT_INPUT_PLACEHOLDER"),class:"flex-grow !bg-white border-0 outline-none !outline-0 border-none h-8 text-sm dark:!bg-slate-700 pb-0 !pt-1.5 resize-none px-3 !mb-0 focus:outline-none rounded-md",onFocus:i[0]||(i[0]=l=>s.value=!0),onBlur:i[1]||(i[1]=l=>s.value=!1)},null,8,["placeholder"]),c("div",yX,[b(Vm,{icon:"emoji"}),b(Vm,{class:"icon-send",icon:"send"})])],2))]))}},SX="data:image/svg+xml,%3csvg%20width='66'%20height='66'%20viewBox='0%200%2066%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63%2063H32.9976C16.4591%2063%202.99996%2049.5399%202.99996%2032.9973C2.99996%2016.4601%2016.4591%203%2032.9979%203C49.5408%203%2063%2016.4601%2063%2032.9973V63Z'%20fill='white'%20stroke='white'%20stroke-width='6'/%3e%3c/svg%3e",IX={name:"Widget",components:{WidgetHead:cX,WidgetBody:fX,WidgetFooter:AX,InputRadioGroup:Hg},mixins:[Yo],props:{welcomeHeading:{type:String,default:""},welcomeTagline:{type:String,default:""},websiteName:{type:String,required:!0},logo:{type:String,default:""},isOnline:{type:Boolean,default:!0},replyTime:{type:String,default:""},color:{type:String,default:""},widgetBubblePosition:{type:String,default:""},widgetBubbleLauncherTitle:{type:String,default:""},widgetBubbleType:{type:String,default:""}},data(){return{widgetScreens:[{id:"default",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.DEFAULT"),checked:!0},{id:"chat",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.CHAT"),checked:!1}],isDefaultScreen:!0,isWidgetVisible:!0}},computed:{...gt({globalConfig:"globalConfig/get"}),getWidgetConfig(){return{welcomeHeading:this.welcomeHeading,welcomeTagline:this.welcomeTagline,websiteName:this.websiteName,logo:this.logo,isDefaultScreen:this.isDefaultScreen,isOnline:this.isOnline,replyTime:this.replyTimeText,color:this.color}},replyTimeText(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_day":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_DAY");default:return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_HOURS")}},getBubblePositionStyle(){return{justifyContent:this.widgetBubblePosition==="left"?"start":"end"}},isBubbleExpanded(){return!this.isWidgetVisible&&this.widgetBubbleType==="expanded_bubble"},getWidgetBubbleLauncherTitle(){return this.isWidgetVisible||this.widgetBubbleType==="standard"?" ":this.widgetBubbleLauncherTitle}},methods:{handleScreenChange(e){this.isDefaultScreen=e.id==="default"},toggleWidget(){this.isWidgetVisible=!this.isWidgetVisible,this.isDefaultScreen=!0}}},CX={key:0,class:"flex flex-col items-center"},NX={key:1,class:"widget-wrapper flex flex-col justify-between rounded-lg shadow-md bg-slate-25 dark:bg-slate-800 h-[31.25rem] w-80"},OX={class:"py-2.5 flex justify-center"},xX={class:"items-center gap-0.5 text-slate-500 dark:text-slate-400 cursor-pointer flex filter grayscale opacity-90 hover:grayscale-0 hover:opacity-100 text-xxs"},wX=["src"],RX={key:0,src:SX,alt:"",draggable:"false",class:"w-6 h-6 mx-auto"},$X={key:1,class:"ltr:pl-2.5 rtl:pr-2.5"},MX={key:2,class:"relative"};function kX(e,t,n,s,o,a){const i=F("InputRadioGroup"),l=F("WidgetHead"),r=F("WidgetBody"),d=F("WidgetFooter");return m(),f("div",null,[o.isWidgetVisible?(m(),f("div",CX,[b(i,{name:"widget-screen",items:o.widgetScreens,action:a.handleScreenChange},null,8,["items","action"])])):x("",!0),o.isWidgetVisible?(m(),f("div",NX,[b(l,{config:a.getWidgetConfig},null,8,["config"]),c("div",null,[a.getWidgetConfig.isDefaultScreen?x("",!0):(m(),P(r,{key:0,config:a.getWidgetConfig},null,8,["config"])),b(d,{config:a.getWidgetConfig},null,8,["config"]),c("div",OX,[c("a",xX,[c("img",{class:"max-w-2.5 max-h-2.5",src:e.globalConfig.logoThumbnail},null,8,wX),c("span",null,v(e.useInstallationName(e.$t("INBOX_MGMT.WIDGET_BUILDER.BRANDING_TEXT"),e.globalConfig.installationName)),1)])])])])):x("",!0),c("div",{class:"flex mt-4 w-[320px]",style:At(a.getBubblePositionStyle)},[c("button",{class:re(["relative flex items-center justify-center rounded-full cursor-pointer",a.isBubbleExpanded?"w-auto font-medium text-base text-white dark:text-white h-12 px-4":"w-16 h-16"]),style:At({background:n.color}),onClick:t[0]||(t[0]=(...u)=>a.toggleWidget&&a.toggleWidget(...u))},[o.isWidgetVisible?x("",!0):(m(),f("img",RX)),a.isBubbleExpanded?(m(),f("div",$X,v(a.getWidgetBubbleLauncherTitle),1)):x("",!0),o.isWidgetVisible?(m(),f("div",MX,t[1]||(t[1]=[c("div",{class:"absolute w-0.5 h-8 rotate-45 -translate-y-1/2 bg-white"},null,-1),c("div",{class:"absolute w-0.5 h-8 -rotate-45 -translate-y-1/2 bg-white"},null,-1)]))):x("",!0)],6)],4)])}const LX=Re(IX,[["render",kX]]),DX={components:{Widget:LX,InputRadioGroup:Hg,NextButton:he},props:{inbox:{type:Object,default:()=>{}}},setup(){return{v$:Lt()}},data(){return{isWidgetPreview:!0,color:"#1f93ff",websiteName:"",welcomeHeading:"",welcomeTagline:"",replyTime:"in_a_few_minutes",avatarFile:null,avatarUrl:"",widgetBubblePosition:"right",widgetBubbleLauncherTitle:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.DEFAULT"),widgetBubbleType:"standard",widgetBubblePositions:[{id:"left",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.LEFT"),checked:!1},{id:"right",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.RIGHT"),checked:!0}],widgetBubbleTypes:[{id:"standard",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.STANDARD"),checked:!0},{id:"expanded_bubble",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.EXPANDED_BUBBLE"),checked:!1}]}},computed:{...gt({uiFlags:"inboxes/getUIFlags"}),storageKey(){return`${Pa.WIDGET_BUILDER}${this.inbox.id}`},widgetScript(){let e={position:this.widgetBubblePosition,type:this.widgetBubbleType,launcherTitle:this.widgetBubbleLauncherTitle},t=this.inbox.web_widget_script;return t.substring(0,13)+this.$t("INBOX_MGMT.WIDGET_BUILDER.SCRIPT_SETTINGS",{options:JSON.stringify(e)})+t.substring(13)},getWidgetViewOptions(){return[{id:"preview",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.PREVIEW"),checked:!0},{id:"script",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.SCRIPT"),checked:!1}]},getReplyTimeOptions(){return[{key:"in_a_few_minutes",value:"in_a_few_minutes",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_MINUTES")},{key:"in_a_few_hours",value:"in_a_few_hours",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_HOURS")},{key:"in_a_day",value:"in_a_day",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_DAY")}]},websiteNameValidationErrorMsg(){return this.v$.websiteName.$error?this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.ERROR"):""}},mounted(){this.setDefaults()},validations:{websiteName:{required:it}},methods:{setDefaults(){const{name:e,welcome_title:t,welcome_tagline:n,widget_color:s,reply_time:o,avatar_url:a}=this.inbox;this.websiteName=e,this.welcomeHeading=t,this.welcomeTagline=n,this.color=s,this.replyTime=o,this.avatarUrl=a;const i=this.getSavedInboxInformation();i&&(this.widgetBubblePositions=this.widgetBubblePositions.map(l=>(l.id===i.position&&(l.checked=!0,this.widgetBubblePosition=l.id),l)),this.widgetBubbleTypes=this.widgetBubbleTypes.map(l=>(l.id===i.type&&(l.checked=!0,this.widgetBubbleType=l.id),l)),this.widgetBubbleLauncherTitle=i.launcherTitle||"Chat with us")},handleWidgetBubblePositionChange(e){this.widgetBubblePosition=e.id},handleWidgetBubbleTypeChange(e){this.widgetBubbleType=e.id},handleWidgetViewChange(e){this.isWidgetPreview=e.id==="preview"},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.inbox.id),this.avatarFile=null,this.avatarUrl="",Te(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.SUCCESS_MESSAGE"))}catch(e){Te(e.message?e.message:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.ERROR_MESSAGE"))}},async updateWidget(){const e={position:this.widgetBubblePosition,launcherTitle:this.widgetBubbleLauncherTitle,type:this.widgetBubbleType};Na.set(this.storageKey,e);try{const t={id:this.inbox.id,name:this.websiteName,channel:{widget_color:this.color,welcome_title:this.welcomeHeading,welcome_tagline:this.welcomeTagline,reply_time:this.replyTime}};this.avatarFile&&(t.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",t),Te(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.SUCCESS_MESSAGE"))}catch(t){Te(t.message||this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.ERROR_MESSAGE"))}},getSavedInboxInformation(){return Na.get(this.storageKey)}}},PX={class:"mx-8"},BX={class:"flex p-2.5"},FX={class:"w-100 lg:w-[40%]"},UX={class:"min-h-full py-4 overflow-y-scroll px-px"},GX=["value"],VX={class:"w-100 lg:w-3/5"},HX={key:0,class:"flex flex-col items-center justify-end min-h-[40.625rem] mx-5 mb-5 p-2.5 bg-slate-50 dark:bg-slate-900/50 rounded-lg"},KX={key:1,class:"mx-5 p-2.5 bg-n-slate-3 rounded-lg dark:bg-n-solid-3"};function zX(e,t,n,s,o,a){const i=F("woot-avatar-uploader"),l=F("woot-input"),r=F("woot-color-picker"),d=F("InputRadioGroup"),u=F("NextButton"),p=F("Widget"),h=F("woot-code");return m(),f("div",PX,[c("div",BX,[c("div",FX,[c("div",UX,[c("form",{onSubmit:t[6]||(t[6]=Ke((...g)=>a.updateWidget&&a.updateWidget(...g),["prevent"]))},[b(i,{label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.LABEL"),src:o.avatarUrl,"delete-avatar":"",onOnAvatarSelect:a.handleImageUpload,onOnAvatarDelete:a.handleAvatarDelete},null,8,["label","src","onOnAvatarSelect","onOnAvatarDelete"]),b(l,{modelValue:o.websiteName,"onUpdate:modelValue":t[0]||(t[0]=g=>o.websiteName=g),class:re({error:s.v$.websiteName.$error}),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.PLACE_HOLDER"),error:a.websiteNameValidationErrorMsg,onBlur:s.v$.websiteName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),b(l,{modelValue:o.welcomeHeading,"onUpdate:modelValue":t[1]||(t[1]=g=>o.welcomeHeading=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),b(l,{modelValue:o.welcomeTagline,"onUpdate:modelValue":t[2]||(t[2]=g=>o.welcomeTagline=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),c("label",null,[be(v(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>o.replyTime=g)},[(m(!0),f(pe,null,ye(a.getReplyTimeOptions,g=>(m(),f("option",{key:g.key,value:g.value},v(g.text),9,GX))),128))],512),[[Mt,o.replyTime]])]),c("label",null,[be(v(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_COLOR_LABEL"))+" ",1),b(r,{modelValue:o.color,"onUpdate:modelValue":t[4]||(t[4]=g=>o.color=g)},null,8,["modelValue"])]),b(d,{name:"widget-bubble-position",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION_LABEL"),items:o.widgetBubblePositions,action:a.handleWidgetBubblePositionChange},null,8,["label","items","action"]),b(d,{name:"widget-bubble-type",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE_LABEL"),items:o.widgetBubbleTypes,action:a.handleWidgetBubbleTypeChange},null,8,["label","items","action"]),b(l,{modelValue:o.widgetBubbleLauncherTitle,"onUpdate:modelValue":t[5]||(t[5]=g=>o.widgetBubbleLauncherTitle=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),b(u,{type:"submit",class:"mt-4",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.BUTTON_TEXT"),"is-loading":e.uiFlags.isUpdating,disabled:s.v$.$invalid||e.uiFlags.isUpdating},null,8,["label","is-loading","disabled"])],32)])]),c("div",VX,[b(d,{name:"widget-view-options",class:"text-center",items:a.getWidgetViewOptions,action:a.handleWidgetViewChange},null,8,["items","action"]),o.isWidgetPreview?(m(),f("div",HX,[b(p,{"welcome-heading":o.welcomeHeading,"welcome-tagline":o.welcomeTagline,"website-name":o.websiteName,logo:o.avatarUrl,"is-online":"","reply-time":o.replyTime,color:o.color,"widget-bubble-position":o.widgetBubblePosition,"widget-bubble-launcher-title":o.widgetBubbleLauncherTitle,"widget-bubble-type":o.widgetBubbleType},null,8,["welcome-heading","welcome-tagline","website-name","logo","reply-time","color","widget-bubble-position","widget-bubble-launcher-title","widget-bubble-type"])])):(m(),f("div",KX,[b(h,{script:a.widgetScript},null,8,["script"])]))])])])}const WX=Re(DX,[["render",zX]]),jX={components:{LoadingState:$c,SettingsSection:_l,NextButton:he},props:{inbox:{type:Object,default:()=>({})}},data(){return{selectedAgentBotId:null}},computed:{...gt({agentBots:"agentBots/getBots",uiFlags:"agentBots/getUIFlags"}),activeAgentBot(){return this.$store.getters["agentBots/getActiveAgentBot"](this.inbox.id)}},watch:{activeAgentBot(){this.selectedAgentBotId=this.activeAgentBot.id}},mounted(){this.$store.dispatch("agentBots/get"),this.$store.dispatch("agentBots/fetchAgentBotInbox",this.inbox.id)},methods:{async updateActiveAgentBot(){try{await this.$store.dispatch("agentBots/setAgentBotInbox",{inboxId:this.inbox.id,botId:this.selectedAgentBotId?this.selectedAgentBotId:void 0}),Te(this.$t("AGENT_BOTS.BOT_CONFIGURATION.SUCCESS_MESSAGE"))}catch{Te(this.$t("AGENT_BOTS.BOT_CONFIGURATION.ERROR_MESSAGE"))}},async disconnectBot(){try{await this.$store.dispatch("agentBots/disconnectBot",{inboxId:this.inbox.id}),Te(this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_SUCCESS_MESSAGE"))}catch(e){Te((e==null?void 0:e.message)||this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_ERROR_MESSAGE"))}}}},YX={class:"mx-8"},XX={value:"",disabled:"",selected:""},qX=["value"],ZX={class:"button-container space-x-2"};function QX(e,t,n,s,o,a){const i=F("LoadingState"),l=F("NextButton"),r=F("SettingsSection");return m(),f("div",YX,[e.uiFlags.isFetching||e.uiFlags.isFetchingAgentBot?(m(),P(i,{key:0})):(m(),f("form",{key:1,class:"flex flex-wrap mx-0",onSubmit:t[1]||(t[1]=Ke((...d)=>a.updateActiveAgentBot&&a.updateActiveAgentBot(...d),["prevent"]))},[b(r,{title:e.$t("AGENT_BOTS.BOT_CONFIGURATION.TITLE"),"sub-title":e.$t("AGENT_BOTS.BOT_CONFIGURATION.DESC")},{default:j(()=>[c("div",null,[c("label",null,[ie(c("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.selectedAgentBotId=d)},[c("option",XX,v(e.$t("AGENT_BOTS.BOT_CONFIGURATION.SELECT_PLACEHOLDER")),1),(m(!0),f(pe,null,ye(e.agentBots,d=>(m(),f("option",{key:d.id,value:d.id},v(d.name),9,qX))),128))],512),[[Mt,o.selectedAgentBotId]])]),c("div",ZX,[b(l,{type:"submit",label:e.$t("AGENT_BOTS.BOT_CONFIGURATION.SUBMIT"),"is-loading":e.uiFlags.isSettingAgentBot},null,8,["label","is-loading"]),b(l,{type:"button",disabled:!o.selectedAgentBotId,"is-loading":e.uiFlags.isDisconnecting,faded:"",ruby:"",onClick:a.disconnectBot},{default:j(()=>[be(v(e.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECT")),1)]),_:1},8,["disabled","is-loading","onClick"])])])]),_:1},8,["title","sub-title"])],32))])}const JX=Re(jX,[["render",QX]]),eq={props:{heading:{type:String,default:""},content:{type:String,default:""},active:{type:Boolean,default:!1},src:{type:String,default:""}}},tq={class:"flex items-center p-1 text-sm font-medium"},nq={class:"text-slate-700 dark:text-slate-200 text-xs leading-[1.4] px-3 pt-3 pb-0 text-start"},sq={key:0,class:"p-3"},aq=["src"];function oq(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",{class:re(["flex flex-col min-w-[15rem] max-h-[21.25rem] max-w-[23.75rem] rounded-md border border-solid border-n-strong",{"bg-woot-25 dark:bg-n-solid-2 border border-solid border-n-blue-border":n.active}])},[c("div",{class:re(["flex justify-between items-center rounded-t-md px-2 w-full h-10 bg-slate-50 dark:bg-slate-900 border-b border-solid border-n-strong",{"bg-woot-50 border-b border-solid border-n-blue-border":n.active}])},[c("div",tq,v(n.heading),1),n.active?(m(),P(i,{key:0,icon:"checkmark-circle",type:"solid",size:"24",class:"text-woot-500 dark:text-woot-500"})):x("",!0)],2),c("div",nq,v(n.content),1),n.src?(m(),f("div",sq,[c("img",{src:n.src,class:re(["border border-solid rounded-md",n.active?"border-woot-75 dark:border-woot-700":"border-slate-50 dark:border-slate-600"])},null,10,aq)])):et(e.$slots,"default",{key:1})],2)}const iq=Re(eq,[["render",oq]]),lq={components:{PreviewCard:iq,Thumbnail:Qn},props:{senderNameType:{type:String,default:"friendly"},businessName:{type:String,default:""}},emits:["update"],data(){return{senderNameKeyOptions:[{key:"friendly",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.SUBTITLE"),preview:{senderName:"Smith",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}},{key:"professional",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.SUBTITLE"),preview:{senderName:"",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}}]}},methods:{isKeyOptionFriendly(e){return e==="friendly"},userName(e){return this.isKeyOptionFriendly(e.key)?e.preview.senderName:e.preview.businessName},toggleSenderNameType(e){this.$emit("update",e)}}},rq={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},cq=["onClick"],dq={class:"flex flex-col items-start p-3 gap-2"},uq={class:"text-xs"},mq={class:"flex flex-row items-center gap-2"},pq={class:"flex flex-col items-start gap-1"},hq={class:"items-center flex flex-row gap-0.5 max-w-[18rem]"},fq={key:0,class:"text-xs font-semibold leading-tight"},gq={key:1,class:"text-xs"},_q={class:"text-xs font-semibold leading-tight overflow-hidden whitespace-nowrap text-ellipsis"},vq={class:"text-xs"};function bq(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("PreviewCard");return m(),f("div",rq,[(m(!0),f(pe,null,ye(o.senderNameKeyOptions,r=>(m(),f("button",{key:r.key,class:"text-slate-800 dark:text-slate-100 cursor-pointer p-0",onClick:d=>a.toggleSenderNameType(r.key)},[b(l,{heading:r.heading,content:r.content,active:r.key===n.senderNameType},{default:j(()=>[c("div",dq,[c("span",uq,v(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FOR_EG")),1),c("div",mq,[b(i,{username:a.userName(r),size:"32px"},null,8,["username"]),c("div",pq,[c("div",hq,[a.isKeyOptionFriendly(r.key)?(m(),f("span",fq,v(r.preview.senderName),1)):x("",!0),a.isKeyOptionFriendly(r.key)?(m(),f("span",gq,v(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.FROM")),1)):x("",!0),c("span",_q,v(n.businessName||r.preview.businessName),1)]),c("span",vq,v(r.preview.email),1)])])])]),_:2},1032,["heading","content","active"])],8,cq))),128))])}const Eq=Re(lq,[["render",bq]]),Tq={components:{BotConfiguration:JX,CollaboratorsPage:ZY,ConfigurationPage:VY,FacebookReauthorize:rW,GreetingsEditor:Gy,PreChatFormSettings:Oj,SettingIntroBanner:Xz,SettingsSection:_l,WeeklyAvailability:tY,WidgetBuilder:WX,SenderNameExamplePreview:Eq,MicrosoftReauthorize:dW,GoogleReauthorize:uW,NextButton:he,InstagramReauthorize:cW,DuplicateInboxBanner:qy},mixins:[Ro],setup(){return{v$:Lt()}},data(){return{avatarFile:null,avatarUrl:"",greetingEnabled:!0,greetingMessage:"",emailCollectEnabled:!1,csatSurveyEnabled:!1,senderNameType:"friendly",businessName:"",locktoSingleConversation:!1,allowMessagesAfterResolved:!0,continuityViaEmail:!0,selectedInboxName:"",channelWebsiteUrl:"",webhookUrl:"",channelWelcomeTitle:"",channelWelcomeTagline:"",selectedFeatureFlags:[],replyTime:"",selectedTabIndex:0,selectedPortalSlug:"",showBusinessNameInput:!1}},computed:{...gt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"inboxes/getUIFlags",portals:"portals/allPortals"}),selectedTabKey(){var e;return(e=this.tabs[this.selectedTabIndex])==null?void 0:e.key},whatsAppAPIProviderName(){return this.isAWhatsAppCloudChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"):this.is360DialogWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG"):this.isATwilioWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"):""},tabs(){let e=[{key:"inbox_settings",name:this.$t("INBOX_MGMT.TABS.SETTINGS")},{key:"collaborators",name:this.$t("INBOX_MGMT.TABS.COLLABORATORS")},{key:"businesshours",name:this.$t("INBOX_MGMT.TABS.BUSINESS_HOURS")}];return this.isAWebWidgetInbox&&(e=[...e,{key:"preChatForm",name:this.$t("INBOX_MGMT.TABS.PRE_CHAT_FORM")},{key:"widgetBuilder",name:this.$t("INBOX_MGMT.TABS.WIDGET_BUILDER")}]),(this.isATwilioChannel||this.isALineChannel||this.isAPIInbox||this.isAnEmailChannel&&!this.inbox.provider||this.isAWhatsAppChannel||this.isAWebWidgetInbox)&&(e=[...e,{key:"configuration",name:this.$t("INBOX_MGMT.TABS.CONFIGURATION")}]),this.isFeatureEnabledonAccount(this.accountId,xt.AGENT_BOTS)&&(e=[...e,{key:"botConfiguration",name:this.$t("INBOX_MGMT.TABS.BOT_CONFIGURATION")}]),e},currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxName(){return this.isATwilioSMSChannel||this.isATwilioWhatsAppChannel?`${this.inbox.name} (${this.inbox.messaging_service_sid||this.inbox.phone_number})`:this.isAWhatsAppChannel?`${this.inbox.name} (${this.inbox.phone_number})`:this.isAnEmailChannel?`${this.inbox.name} (${this.inbox.email})`:this.inbox.name},canLocktoSingleConversation(){return this.isASmsInbox||this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAPIInbox},inboxNameLabel(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.LABEL")},inboxNamePlaceHolder(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER")},textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)},instagramUnauthorized(){return this.isAInstagramChannel&&this.inbox.reauthorization_required},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,t=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===Dt.FB&&t},microsoftUnauthorized(){return this.isAMicrosoftInbox&&this.inbox.reauthorization_required},facebookUnauthorized(){return this.isAFacebookInbox&&this.inbox.reauthorization_required},googleUnauthorized(){const e=["imap.gmail.com","imap.google.com"].includes(this.inbox.imap_address);return(this.isAGoogleInbox||e)&&this.inbox.reauthorization_required}},watch:{$route(e){e.name==="settings_inbox_show"&&this.fetchInboxSettings()}},mounted(){this.fetchInboxSettings(),this.fetchPortals()},methods:{fetchPortals(){this.$store.dispatch("portals/index")},handleFeatureFlag(e){this.selectedFeatureFlags=this.toggleInput(this.selectedFeatureFlags,e.target.value)},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]},onTabChange(e){this.selectedTabIndex=e},fetchInboxSettings(){this.selectedTabIndex=0,this.selectedAgents=[],this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get").then(()=>{this.avatarUrl=this.inbox.avatar_url,this.selectedInboxName=this.inbox.name,this.webhookUrl=this.inbox.webhook_url,this.greetingEnabled=this.inbox.greeting_enabled||!1,this.greetingMessage=this.inbox.greeting_message||"",this.emailCollectEnabled=this.inbox.enable_email_collect,this.csatSurveyEnabled=this.inbox.csat_survey_enabled,this.senderNameType=this.inbox.sender_name_type,this.businessName=this.inbox.business_name,this.allowMessagesAfterResolved=this.inbox.allow_messages_after_resolved,this.continuityViaEmail=this.inbox.continuity_via_email,this.channelWebsiteUrl=this.inbox.website_url,this.channelWelcomeTitle=this.inbox.welcome_title,this.channelWelcomeTagline=this.inbox.welcome_tagline,this.selectedFeatureFlags=this.inbox.selected_feature_flags||[],this.replyTime=this.inbox.reply_time,this.locktoSingleConversation=this.inbox.lock_to_single_conversation,this.selectedPortalSlug=this.inbox.help_center?this.inbox.help_center.slug:""})},async updateInbox(){try{const e={id:this.currentInboxId,name:this.selectedInboxName,enable_email_collect:this.emailCollectEnabled,csat_survey_enabled:this.csatSurveyEnabled,allow_messages_after_resolved:this.allowMessagesAfterResolved,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage||"",portal_id:this.selectedPortalSlug?this.portals.find(t=>t.slug===this.selectedPortalSlug).id:null,lock_to_single_conversation:this.locktoSingleConversation,sender_name_type:this.senderNameType,business_name:this.businessName||null,channel:{widget_color:this.inbox.widget_color,website_url:this.channelWebsiteUrl,webhook_url:this.webhookUrl,welcome_title:this.channelWelcomeTitle||"",welcome_tagline:this.channelWelcomeTagline||"",selectedFeatureFlags:this.selectedFeatureFlags,reply_time:this.replyTime||"in_a_few_minutes",continuity_via_email:this.continuityViaEmail}};this.avatarFile&&(e.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",e),Te(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){Te(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.currentInboxId),this.avatarFile=null,this.avatarUrl="",Te(this.$t("INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE"))}catch(e){Te(e.message?e.message:this.$t("INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE"))}},toggleSenderNameType(e){this.senderNameType=e},onClickShowBusinessNameInput(){this.showBusinessNameInput=!this.showBusinessNameInput,this.showBusinessNameInput&&this.$nextTick(()=>{this.$refs.businessNameInput.focus()})}},validations:{webhookUrl:{shouldBeUrl:$N},selectedInboxName:{}}},yq={class:"flex-grow flex-shrink w-full min-w-0 pl-0 pr-0 overflow-auto settings"},Aq={class:"w-full max-w-6xl mx-auto"},Sq={key:5,class:"mx-8"},Iq={key:4,class:"pb-4"},Cq={key:5,class:"pb-4"},Nq={class:"pb-4"},Oq={value:!0},xq={value:!1},wq={class:"pb-1 text-sm not-italic text-n-slate-11"},Rq={key:6,class:"pb-4"},$q={key:7,class:"pb-4"},Mq={key:"in_a_few_minutes",value:"in_a_few_minutes"},kq={key:"in_a_few_hours",value:"in_a_few_hours"},Lq={key:"in_a_day",value:"in_a_day"},Dq={class:"pb-1 text-sm not-italic text-n-slate-11"},Pq={key:8,class:"pb-4"},Bq={value:!0},Fq={value:!1},Uq={class:"pb-1 text-sm not-italic text-n-slate-11"},Gq={class:"pb-4"},Vq={value:!0},Hq={value:!1},Kq={class:"pb-1 text-sm not-italic text-n-slate-11"},zq={key:9,class:"pb-4"},Wq={value:!0},jq={value:!1},Yq={class:"pb-1 text-sm not-italic text-n-slate-11"},Xq={key:10,class:"pb-4"},qq={value:!0},Zq={value:!1},Qq={class:"pb-1 text-sm not-italic text-n-slate-11"},Jq={class:"pb-4"},eZ={value:""},tZ=["value"],nZ={class:"pb-1 text-sm not-italic text-n-slate-11"},sZ={key:11,class:"pb-4"},aZ={value:!0},oZ={value:!1},iZ={class:"pb-1 text-sm not-italic text-n-slate-11"},lZ={key:12},rZ={key:13,class:"flex gap-2 pt-2 pb-4"},cZ={for:"attachments"},dZ={key:14,class:"flex gap-2 pb-4"},uZ={for:"emoji_picker"},mZ={key:15,class:"flex gap-2 pb-4"},pZ={for:"end_conversation"},hZ={key:16,class:"flex gap-2 pb-4"},fZ={for:"use_inbox_avatar_for_bot"},gZ={class:"pb-4"},_Z={class:"flex flex-col items-start gap-2 mt-2"},vZ={key:0,class:"flex gap-2 w-[80%]"},bZ=["placeholder"],EZ={key:6,class:"mx-8"},TZ={key:7},yZ={key:8},AZ={key:9},SZ={key:10},IZ={key:11};function CZ(e,t,n,s,o,a){const i=F("woot-tabs-item"),l=F("woot-tabs"),r=F("SettingIntroBanner"),d=F("MicrosoftReauthorize"),u=F("FacebookReauthorize"),p=F("GoogleReauthorize"),h=F("InstagramReauthorize"),g=F("DuplicateInboxBanner"),_=F("woot-avatar-uploader"),T=F("woot-input"),S=F("woot-color-picker"),E=F("GreetingsEditor"),y=F("SettingsSection"),A=F("SenderNameExamplePreview"),C=F("NextButton"),O=F("CollaboratorsPage"),N=F("ConfigurationPage"),R=F("PreChatFormSettings"),k=F("WeeklyAvailability"),L=F("WidgetBuilder"),D=F("BotConfiguration");return m(),f("div",yq,[b(r,{"header-image":a.inbox.avatarUrl,"header-title":a.inboxName},{default:j(()=>[b(l,{class:"settings--tabs",index:o.selectedTabIndex,border:!1,onChange:a.onTabChange},{default:j(()=>[(m(!0),f(pe,null,ye(a.tabs,($,M)=>(m(),P(i,{key:$.key,index:M,name:$.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])]),_:1},8,["header-image","header-title"]),c("section",Aq,[a.microsoftUnauthorized?(m(),P(d,{key:0,inbox:a.inbox},null,8,["inbox"])):x("",!0),a.facebookUnauthorized?(m(),P(u,{key:1,inbox:a.inbox},null,8,["inbox"])):x("",!0),a.googleUnauthorized?(m(),P(p,{key:2,inbox:a.inbox},null,8,["inbox"])):x("",!0),a.instagramUnauthorized?(m(),P(h,{key:3,inbox:a.inbox},null,8,["inbox"])):x("",!0),a.hasDuplicateInstagramInbox?(m(),P(g,{key:4,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.DUPLICATE_INBOX_BANNER"),class:"mx-8 mt-5"},null,8,["content"])):x("",!0),a.selectedTabKey==="inbox_settings"?(m(),f("div",Sq,[b(y,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT"),"show-border":!1},{default:j(()=>[b(_,{label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL"),src:o.avatarUrl,class:"pb-4","delete-avatar":"",onOnAvatarSelect:a.handleImageUpload,onOnAvatarDelete:a.handleAvatarDelete},null,8,["label","src","onOnAvatarSelect","onOnAvatarDelete"]),b(T,{modelValue:o.selectedInboxName,"onUpdate:modelValue":t[0]||(t[0]=$=>o.selectedInboxName=$),class:re(["pb-4",{error:s.v$.selectedInboxName.$error}]),label:a.inboxNameLabel,placeholder:a.inboxNamePlaceHolder,error:s.v$.selectedInboxName.$error?e.$t("INBOX_MGMT.ADD.CHANNEL_NAME.ERROR"):"",onBlur:s.v$.selectedInboxName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),e.isAPIInbox?(m(),P(T,{key:0,modelValue:o.webhookUrl,"onUpdate:modelValue":t[1]||(t[1]=$=>o.webhookUrl=$),class:re(["pb-4",{error:s.v$.webhookUrl.$error}]),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER"),error:s.v$.webhookUrl.$error?e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR"):"",onBlur:s.v$.webhookUrl.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"])):x("",!0),e.isAWebWidgetInbox?(m(),P(T,{key:1,modelValue:o.channelWebsiteUrl,"onUpdate:modelValue":t[2]||(t[2]=$=>o.channelWebsiteUrl=$),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0),e.isAWebWidgetInbox?(m(),P(T,{key:2,modelValue:o.channelWelcomeTitle,"onUpdate:modelValue":t[3]||(t[3]=$=>o.channelWelcomeTitle=$),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0),e.isAWebWidgetInbox?(m(),P(T,{key:3,modelValue:o.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=$=>o.channelWelcomeTagline=$),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):x("",!0),e.isAWebWidgetInbox?(m(),f("label",Iq,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),b(S,{modelValue:a.inbox.widget_color,"onUpdate:modelValue":t[5]||(t[5]=$=>a.inbox.widget_color=$)},null,8,["modelValue"])])):x("",!0),e.isAWhatsAppChannel?(m(),f("label",Cq,[be(v(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[6]||(t[6]=$=>a.whatsAppAPIProviderName=$),type:"text",disabled:""},null,512),[[at,a.whatsAppAPIProviderName]])])):x("",!0),c("label",Nq,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[7]||(t[7]=$=>o.greetingEnabled=$)},[c("option",Oq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),c("option",xq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[Mt,o.greetingEnabled]]),c("p",wq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),o.greetingEnabled?(m(),f("div",Rq,[b(E,{modelValue:o.greetingMessage,"onUpdate:modelValue":t[8]||(t[8]=$=>o.greetingMessage=$),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!a.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])])):x("",!0),e.isAWebWidgetInbox?(m(),f("label",$q,[be(v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[9]||(t[9]=$=>o.replyTime=$)},[c("option",Mq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES")),1),c("option",kq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS")),1),c("option",Lq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY")),1)],512),[[Mt,o.replyTime]]),c("p",Dq,v(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT")),1)])):x("",!0),e.isAWebWidgetInbox?(m(),f("label",Pq,[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[10]||(t[10]=$=>o.emailCollectEnabled=$)},[c("option",Bq,v(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED")),1),c("option",Fq,v(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED")),1)],512),[[Mt,o.emailCollectEnabled]]),c("p",Uq,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT")),1)])):x("",!0),c("label",Gq,[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CSAT"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[11]||(t[11]=$=>o.csatSurveyEnabled=$)},[c("option",Vq,v(e.$t("INBOX_MGMT.EDIT.ENABLE_CSAT.ENABLED")),1),c("option",Hq,v(e.$t("INBOX_MGMT.EDIT.ENABLE_CSAT.DISABLED")),1)],512),[[Mt,o.csatSurveyEnabled]]),c("p",Kq,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CSAT_SUB_TEXT")),1)]),e.isAWebWidgetInbox?(m(),f("label",zq,[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[12]||(t[12]=$=>o.allowMessagesAfterResolved=$)},[c("option",Wq,v(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED")),1),c("option",jq,v(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED")),1)],512),[[Mt,o.allowMessagesAfterResolved]]),c("p",Yq,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT")),1)])):x("",!0),e.isAWebWidgetInbox?(m(),f("label",Xq,[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[13]||(t[13]=$=>o.continuityViaEmail=$)},[c("option",qq,v(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED")),1),c("option",Zq,v(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED")),1)],512),[[Mt,o.continuityViaEmail]]),c("p",Qq,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT")),1)])):x("",!0),c("div",Jq,[c("label",null,v(e.$t("INBOX_MGMT.HELP_CENTER.LABEL")),1),ie(c("select",{"onUpdate:modelValue":t[14]||(t[14]=$=>o.selectedPortalSlug=$),class:"filter__question"},[c("option",eZ,v(e.$t("INBOX_MGMT.HELP_CENTER.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(e.portals,$=>(m(),f("option",{key:$.slug,value:$.slug},v($.name),9,tZ))),128))],512),[[Mt,o.selectedPortalSlug]]),c("p",nZ,v(e.$t("INBOX_MGMT.HELP_CENTER.SUB_TEXT")),1)]),a.canLocktoSingleConversation?(m(),f("label",sZ,[be(v(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION"))+" ",1),ie(c("select",{"onUpdate:modelValue":t[15]||(t[15]=$=>o.locktoSingleConversation=$)},[c("option",aZ,v(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED")),1),c("option",oZ,v(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED")),1)],512),[[Mt,o.locktoSingleConversation]]),c("p",iZ,v(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT")),1)])):x("",!0),e.isAWebWidgetInbox?(m(),f("label",lZ,v(e.$t("INBOX_MGMT.FEATURES.LABEL")),1)):x("",!0),e.isAWebWidgetInbox?(m(),f("div",rZ,[ie(c("input",{"onUpdate:modelValue":t[16]||(t[16]=$=>o.selectedFeatureFlags=$),type:"checkbox",value:"attachments",onInput:t[17]||(t[17]=(...$)=>a.handleFeatureFlag&&a.handleFeatureFlag(...$))},null,544),[[Kt,o.selectedFeatureFlags]]),c("label",cZ,v(e.$t("INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER")),1)])):x("",!0),e.isAWebWidgetInbox?(m(),f("div",dZ,[ie(c("input",{"onUpdate:modelValue":t[18]||(t[18]=$=>o.selectedFeatureFlags=$),type:"checkbox",value:"emoji_picker",onInput:t[19]||(t[19]=(...$)=>a.handleFeatureFlag&&a.handleFeatureFlag(...$))},null,544),[[Kt,o.selectedFeatureFlags]]),c("label",uZ,v(e.$t("INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER")),1)])):x("",!0),e.isAWebWidgetInbox?(m(),f("div",mZ,[ie(c("input",{"onUpdate:modelValue":t[20]||(t[20]=$=>o.selectedFeatureFlags=$),type:"checkbox",value:"end_conversation",onInput:t[21]||(t[21]=(...$)=>a.handleFeatureFlag&&a.handleFeatureFlag(...$))},null,544),[[Kt,o.selectedFeatureFlags]]),c("label",pZ,v(e.$t("INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION")),1)])):x("",!0),e.isAWebWidgetInbox?(m(),f("div",hZ,[ie(c("input",{"onUpdate:modelValue":t[22]||(t[22]=$=>o.selectedFeatureFlags=$),type:"checkbox",value:"use_inbox_avatar_for_bot",onInput:t[23]||(t[23]=(...$)=>a.handleFeatureFlag&&a.handleFeatureFlag(...$))},null,544),[[Kt,o.selectedFeatureFlags]]),c("label",fZ,v(e.$t("INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT")),1)])):x("",!0)]),_:1},8,["title","sub-title"]),e.isAWebWidgetInbox||e.isAnEmailChannel?(m(),P(y,{key:0,title:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE"),"sub-title":e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT"),"show-border":!1},{default:j(()=>[c("div",gZ,[b(A,{"sender-name-type":o.senderNameType,"business-name":o.businessName,onUpdate:a.toggleSenderNameType},null,8,["sender-name-type","business-name","onUpdate"]),c("div",_Z,[b(C,{ghost:"",blue:"",label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT"),onClick:a.onClickShowBusinessNameInput},null,8,["label","onClick"]),o.showBusinessNameInput?(m(),f("div",vZ,[ie(c("input",{ref:"businessNameInput","onUpdate:modelValue":t[24]||(t[24]=$=>o.businessName=$),placeholder:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER"),class:"mb-0",type:"text"},null,8,bZ),[[at,o.businessName]]),b(C,{label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT"),class:"flex-shrink-0",onClick:a.updateInbox},null,8,["label","onClick"])])):x("",!0)])])]),_:1},8,["title","sub-title"])):x("",!0),b(y,{"show-border":!1},{default:j(()=>[e.isAPIInbox?(m(),P(C,{key:0,type:"submit",disabled:s.v$.webhookUrl.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:a.updateInbox},null,8,["disabled","label","is-loading","onClick"])):(m(),P(C,{key:1,type:"submit",disabled:s.v$.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:a.updateInbox},null,8,["disabled","label","is-loading","onClick"]))]),_:1})])):x("",!0),a.selectedTabKey==="collaborators"?(m(),f("div",EZ,[b(O,{inbox:a.inbox},null,8,["inbox"])])):x("",!0),a.selectedTabKey==="configuration"?(m(),f("div",TZ,[b(N,{inbox:a.inbox},null,8,["inbox"])])):x("",!0),a.selectedTabKey==="preChatForm"?(m(),f("div",yZ,[b(R,{inbox:a.inbox},null,8,["inbox"])])):x("",!0),a.selectedTabKey==="businesshours"?(m(),f("div",AZ,[b(k,{inbox:a.inbox},null,8,["inbox"])])):x("",!0),a.selectedTabKey==="widgetBuilder"?(m(),f("div",SZ,[b(L,{inbox:a.inbox},null,8,["inbox"])])):x("",!0),a.selectedTabKey==="botConfiguration"?(m(),f("div",IZ,[b(D,{inbox:a.inbox},null,8,["inbox"])])):x("",!0)])])}const NZ=Re(Tq,[["render",CZ],["__scopeId","data-v-a5401f83"]]),OZ={mixins:[Yo],computed:{...gt({globalConfig:"globalConfig/get"}),createFlowSteps(){const e=["CHANNEL","INBOX","AGENT","FINISH"],t={CHANNEL:"settings_inbox_new",INBOX:"settings_inboxes_page_channel",AGENT:"settings_inboxes_add_agents",FINISH:"settings_inbox_finish"};return e.map(n=>({title:this.$t(`INBOX_MGMT.CREATE_FLOW.${n}.TITLE`),body:this.$t(`INBOX_MGMT.CREATE_FLOW.${n}.BODY`),route:t[n]}))},items(){return this.createFlowSteps.map(e=>({...e,body:this.useInstallationName(e.body,this.globalConfig.installationName)}))}}},xZ={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full"},wZ={class:"col-span-6"};function RZ(e,t,n,s,o,a){const i=F("woot-wizard"),l=F("router-view");return m(),f("div",xZ,[b(i,{class:"hidden md:block col-span-2","global-config":e.globalConfig,items:a.items},null,8,["global-config","items"]),c("div",wZ,[b(l)])])}const $Z=Re(OZ,[["render",RZ]]),MZ={components:{ChannelSelector:zy},props:{channel:{type:Object,required:!0},enabledFeatures:{type:Object,required:!0}},emits:["channelItemClick"],computed:{hasFbConfigured(){var e;return(e=window.chatwootConfig)==null?void 0:e.fbAppId},hasInstagramConfigured(){var e;return(e=window.chatwootConfig)==null?void 0:e.instagramAppId},isActive(){const{key:e}=this.channel;return Object.keys(this.enabledFeatures).length===0?!1:e==="website"?this.enabledFeatures.channel_website:e==="facebook"?this.enabledFeatures.channel_facebook&&this.hasFbConfigured:e==="email"?this.enabledFeatures.channel_email:e==="instagram"?this.enabledFeatures.channel_instagram&&this.hasInstagramConfigured:["website","twilio","api","whatsapp","sms","telegram","line","instagram"].includes(e)}},methods:{getChannelThumbnail(){return this.channel.key==="api"&&this.channel.thumbnail?this.channel.thumbnail:`/assets/images/dashboard/channels/${this.channel.key}.png`},onItemClick(){this.isActive&&this.$emit("channelItemClick",this.channel.key)}}};function kZ(e,t,n,s,o,a){const i=F("ChannelSelector");return m(),P(i,{class:re({inactive:!a.isActive}),title:n.channel.name,src:a.getChannelThumbnail(),onClick:a.onItemClick},null,8,["class","title","src","onClick"])}const LZ=Re(MZ,[["render",kZ]]),DZ={components:{ChannelItem:LZ,PageHeader:ta},mixins:[Yo],data(){return{enabledFeatures:{}}},computed:{account(){return this.$store.getters["accounts/getAccount"](this.accountId)},channelList(){const{apiChannelName:e,apiChannelThumbnail:t}=this.globalConfig;return[{key:"website",name:"Website"},{key:"facebook",name:"Messenger"},{key:"whatsapp",name:"WhatsApp"},{key:"sms",name:"SMS"},{key:"email",name:"Email"},{key:"api",name:e||"API",thumbnail:t},{key:"telegram",name:"Telegram"},{key:"line",name:"Line"},{key:"instagram",name:"Instagram"}]},...gt({accountId:"getCurrentAccountId",globalConfig:"globalConfig/get"})},mounted(){this.initializeEnabledFeatures()},methods:{async initializeEnabledFeatures(){this.enabledFeatures=this.account.features},initChannelAuth(e){const t={sub_page:e,accountId:this.accountId};Jn.push({name:"settings_inboxes_page_channel",params:t})}}},PZ={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},BZ={class:"grid max-w-3xl grid-cols-2 mx-0 mt-6 sm:grid-cols-3 lg:grid-cols-4"};function FZ(e,t,n,s,o,a){const i=F("PageHeader"),l=F("ChannelItem");return m(),f("div",PZ,[b(i,{class:"max-w-4xl","header-title":e.$t("INBOX_MGMT.ADD.AUTH.TITLE"),"header-content":e.useInstallationName(e.$t("INBOX_MGMT.ADD.AUTH.DESC"),e.globalConfig.installationName)},null,8,["header-title","header-content"]),c("div",BZ,[(m(!0),f(pe,null,ye(a.channelList,r=>(m(),P(l,{key:r.key,channel:r,"enabled-features":o.enabledFeatures,onChannelItemClick:a.initChannelAuth},null,8,["channel","enabled-features","onChannelItemClick"]))),128))])])}const UZ=Re(DZ,[["render",FZ]]),GZ={components:{PageHeader:ta,NextButton:he},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:Lt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...gt({agentList:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{async addAgents(){this.isCreating=!0;const e=this.$route.params.inbox_id,t=this.selectedAgents.map(n=>n.id);try{await qN.update({inboxId:e,agentList:t}),Jn.replace({name:"settings_inbox_finish",params:{page:"new",inbox_id:this.$route.params.inbox_id}})}catch(n){Te(n.message)}this.isCreating=!1}}},VZ={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},HZ={class:"w-full"},KZ={class:"w-full"},zZ={key:0,class:"message"},WZ={class:"w-full"};function jZ(e,t,n,s,o,a){const i=F("PageHeader"),l=F("multiselect"),r=F("NextButton");return m(),f("div",VZ,[c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[1]||(t[1]=Ke(d=>a.addAgents(),["prevent"]))},[c("div",HZ,[b(i,{"header-title":e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.AGENTS.DESC")},null,8,["header-title","header-content"])]),c("div",null,[c("div",KZ,[c("label",{class:re({error:s.v$.selectedAgents.$error})},[be(v(e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"))+" ",1),b(l,{modelValue:o.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=d=>o.selectedAgents=d),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.AGENTS.PICK_AGENTS"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedAgents.$error?(m(),f("span",zZ,v(e.$t("INBOX_MGMT.ADD.AGENTS.VALIDATION_ERROR")),1)):x("",!0)],2)]),c("div",WZ,[b(r,{type:"submit","is-loading":o.isCreating,solid:"",blue:"",label:e.$t("INBOX_MGMT.AGENTS.BUTTON_TEXT")},null,8,["is-loading","label"])])])],32)])}const YZ=Re(GZ,[["render",jZ]]),XZ={props:{title:{type:String,default:""},message:{type:String,default:""}}},qZ={class:"empty-state py-16 px-1 ml-0 mr-0"},ZZ={key:0,class:"text-n-slate-12 block text-center w-full text-xl font-medium"},QZ={key:1,class:"block text-center text-n-slate-11 dark:text-slate-400 my-4 mx-auto w-[90%]"};function JZ(e,t,n,s,o,a){return m(),f("div",qZ,[n.title?(m(),f("h3",ZZ,v(n.title),1)):x("",!0),n.message?(m(),f("p",QZ,v(n.message),1)):x("",!0),et(e.$slots,"default")])}const vl=Re(XZ,[["render",JZ]]),eQ={components:{EmptyState:vl,NextButton:he,DuplicateInboxBanner:qy},computed:{currentInbox(){return this.$store.getters["inboxes/getInbox"](this.$route.params.inbox_id)},isATwilioInbox(){return this.currentInbox.channel_type==="Channel::TwilioSms"},hasDuplicateInstagramInbox(){const e=this.currentInbox.instagram_id,t=this.$store.getters["inboxes/getFacebookInboxByInstagramId"](e);return this.currentInbox.channel_type===Dt.INSTAGRAM&&t},isAEmailInbox(){return this.currentInbox.channel_type==="Channel::Email"},isALineInbox(){return this.currentInbox.channel_type==="Channel::Line"},isASmsInbox(){return this.currentInbox.channel_type==="Channel::Sms"},isWhatsAppCloudInbox(){return this.currentInbox.channel_type==="Channel::Whatsapp"&&this.currentInbox.provider==="whatsapp_cloud"},message(){return this.isATwilioInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")}`:this.isASmsInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_CALLBACK.SUBTITLE")}`:this.isALineInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")}`:this.isWhatsAppCloudInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.SUBTITLE")}`:this.isAEmailInbox&&!this.currentInbox.provider?this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.FINISH_MESSAGE"):this.currentInbox.web_widget_script?this.$t("INBOX_MGMT.FINISH.WEBSITE_SUCCESS"):this.$t("INBOX_MGMT.FINISH.MESSAGE")}}},tQ={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},nQ={class:"w-full text-center"},sQ={class:"my-4 mx-auto max-w-[70%]"},aQ={class:"w-[50%] max-w-[50%] ml-[25%]"},oQ={key:0,class:"w-[50%] max-w-[50%] ml-[25%]"},iQ={class:"mt-8 font-medium text-slate-700 dark:text-slate-200"},lQ={class:"mt-8 font-medium text-slate-700 dark:text-slate-200"},rQ={class:"w-[50%] max-w-[50%] ml-[25%]"},cQ={class:"w-[50%] max-w-[50%] ml-[25%]"},dQ={key:1,class:"w-[50%] max-w-[50%] ml-[25%]"},uQ={class:"flex justify-center gap-2 mt-4"};function mQ(e,t,n,s,o,a){const i=F("DuplicateInboxBanner"),l=F("woot-code"),r=F("NextButton"),d=F("router-link"),u=F("EmptyState");return m(),f("div",tQ,[a.hasDuplicateInstagramInbox?(m(),P(i,{key:0,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.NEW_INBOX_SUGGESTION")},null,8,["content"])):x("",!0),b(u,{title:e.$t("INBOX_MGMT.FINISH.TITLE"),message:a.message,"button-text":e.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},{default:j(()=>[c("div",nQ,[c("div",sQ,[a.currentInbox.web_widget_script?(m(),P(l,{key:0,script:a.currentInbox.web_widget_script},null,8,["script"])):x("",!0)]),c("div",aQ,[a.isATwilioInbox?(m(),P(l,{key:0,lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"])):x("",!0)]),a.isWhatsAppCloudInbox?(m(),f("div",oQ,[c("p",iQ,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_URL")),1),b(l,{lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"]),c("p",lQ,v(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_VERIFICATION_TOKEN")),1),b(l,{lang:"html",script:a.currentInbox.provider_config.webhook_verify_token},null,8,["script"])])):x("",!0),c("div",rQ,[a.isALineInbox?(m(),P(l,{key:0,lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"])):x("",!0)]),c("div",cQ,[a.isASmsInbox?(m(),P(l,{key:0,lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"])):x("",!0)]),a.isAEmailInbox&&!a.currentInbox.provider?(m(),f("div",dQ,[b(l,{lang:"html",script:a.currentInbox.forward_to_email},null,8,["script"])])):x("",!0),c("div",uQ,[b(d,{to:{name:"settings_inbox_show",params:{inboxId:e.$route.params.inbox_id}}},{default:j(()=>[b(r,{outline:"",slate:"",label:e.$t("INBOX_MGMT.FINISH.MORE_SETTINGS")},null,8,["label"])]),_:1},8,["to"]),b(d,{to:{name:"inbox_dashboard",params:{inboxId:e.$route.params.inbox_id}}},{default:j(()=>[b(r,{solid:"",teal:"",label:e.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1},8,["to"])])])]),_:1},8,["title","message","button-text"])])}const pQ=Re(eQ,[["render",mQ]]),hQ={routes:[{path:Pt("accounts/:accountId/settings/inboxes"),component:da,children:[{path:"",redirect:e=>({name:"settings_inbox_list",params:e.params})},{path:"list",name:"settings_inbox_list",component:Vz,meta:{featureFlag:xt.INBOX_MANAGEMENT,permissions:["administrator"]}}]},{path:Pt("accounts/:accountId/settings/inboxes"),component:Pc,props:e=>{const t=e.name!=="settings_inbox_list",n=e.name==="settings_inbox_show";return{headerTitle:"INBOX_MGMT.HEADER",headerButtonText:"SETTINGS.INBOXES.NEW_INBOX",icon:"mail-inbox-all",newButtonRoutes:["settings_inbox_list"],showBackButton:t,fullWidth:n}},children:[{path:"new",component:$Z,children:[{path:"",name:"settings_inbox_new",component:UZ,meta:{featureFlag:xt.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":inbox_id/finish",name:"settings_inbox_finish",component:pQ,meta:{featureFlag:xt.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":sub_page",name:"settings_inboxes_page_channel",component:Iz,meta:{featureFlag:xt.INBOX_MANAGEMENT,permissions:["administrator"]},props:e=>({channelName:e.params.sub_page})},{path:":inbox_id/agents",name:"settings_inboxes_add_agents",meta:{featureFlag:xt.INBOX_MANAGEMENT,permissions:["administrator"]},component:YZ}]},{path:":inboxId",name:"settings_inbox_show",component:NZ,meta:{featureFlag:xt.INBOX_MANAGEMENT,permissions:["administrator"]}}]}]},im=e=>{const t=Ve("integrations/getIntegration"),n=w(()=>t.value(e)),s=w(()=>n.value.hook_type==="inbox"),o=w(()=>!!n.value.hooks.length),a=w(()=>n.value.allow_multiple_hooks?"multiple":"single"),i=w(()=>a.value==="multiple"),l=w(()=>a.value==="single");return{integration:n,integrationType:a,isIntegrationMultiple:i,isIntegrationSingle:l,isHookTypeInbox:s,hasConnectedHooks:o}},fQ={components:{FormKit:$C,NextButton:he},props:{integrationId:{type:String,required:!0}},emits:["close"],setup(e){const{integration:t,isHookTypeInbox:n}=im(e.integrationId);return{integration:t,isHookTypeInbox:n}},data(){return{endPoint:"",alertMessage:"",values:{}}},computed:{...gt({uiFlags:"integrations/getUIFlags",dialogFlowEnabledInboxes:"inboxes/dialogFlowEnabledInboxes"}),inboxes(){return this.dialogFlowEnabledInboxes.filter(e=>this.isIntegrationDialogflow?!this.connectedDialogflowInboxIds.includes(e.id):!0).map(e=>({label:e.name,value:e.id}))},connectedDialogflowInboxIds(){return this.isIntegrationDialogflow?this.integration.hooks.map(e=>{var t;return(t=e.inbox)==null?void 0:t.id}):[]},formItems(){return this.integration.settings_form_schema},isIntegrationDialogflow(){return this.integration.id==="dialogflow"}},methods:{onClose(){this.$emit("close")},buildHookPayload(){const e={app_id:this.integration.id,settings:{}};return e.settings=Object.keys(this.values).reduce((t,n)=>(n!=="inbox"&&(t[n]=this.values[n]),t),{}),this.formItems.forEach(t=>{t.validation.includes("JSON")&&(e.settings[t.name]=JSON.parse(e.settings[t.name]))}),this.isHookTypeInbox&&this.values.inbox&&(e.inbox_id=this.values.inbox),e},async submitForm(){var e,t;try{await this.$store.dispatch("integrations/createHook",this.buildHookPayload()),this.alertMessage=this.$t("INTEGRATION_APPS.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{Te(this.alertMessage)}}}},gQ={class:"flex flex-col h-auto overflow-auto integration-hooks"},_Q={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function vQ(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("FormKit"),r=F("NextButton");return m(),f("div",gQ,[b(i,{"header-title":s.integration.name,"header-content":s.integration.description},null,8,["header-title","header-content"]),b(l,{modelValue:o.values,"onUpdate:modelValue":t[0]||(t[0]=d=>o.values=d),type:"form","form-class":"w-full grid gap-4","submit-attrs":{inputClass:"hidden",wrapperClass:"hidden"},"incomplete-message":!1,onSubmit:a.submitForm},{default:j(()=>[(m(!0),f(pe,null,ye(a.formItems,d=>(m(),P(l,As({key:d.name,ref_for:!0},d),null,16))),128)),s.isHookTypeInbox?(m(),P(l,{key:0,options:a.inboxes,type:"select",name:"inbox","input-class":"reset-base",placeholder:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.LABEL"),label:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.PLACEHOLDER"),validation:"required","validation-name":"Inbox"},null,8,["options","placeholder","label"])):x("",!0),c("div",_Q,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_APPS.ADD.FORM.CANCEL"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",label:e.$t("INTEGRATION_APPS.ADD.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreatingHook},null,8,["label","is-loading"])])]),_:1},8,["modelValue","onSubmit"])])}const bQ=Re(fQ,[["render",vQ]]),TQ={class:"outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow flex-grow overflow-auto p-4"},yQ={class:"flex items-center justify-center"},AQ={class:"flex h-16 w-16 items-center justify-center"},SQ=["src"],IQ=["src"],CQ={class:"flex flex-col justify-center m-0 mx-4 flex-1"},NQ={class:"mb-1 text-xl font-medium text-n-slate-12"},OQ={class:"text-n-slate-11 text-sm leading-6"},xQ={class:"flex justify-center items-center mb-0 w-[15%]"},wQ={key:0},RQ={key:1},$Q={__name:"SingleIntegrationHooks",props:{integrationId:{type:String,required:!0}},emits:["add","delete"],setup(e){const t=e,{integration:n,hasConnectedHooks:s}=im(t.integrationId);return(o,a)=>(m(),f("div",TQ,[c("div",yQ,[c("div",AQ,[c("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,SQ),c("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,IQ)]),c("div",CQ,[c("h3",NQ,v(I(n).name),1),c("p",OQ,v(I(n).description),1)]),c("div",xQ,[I(s)?(m(),f("div",wQ,[c("div",{onClick:a[0]||(a[0]=i=>o.$emit("delete",I(n).hooks[0]))},[b(he,{ruby:"",faded:"",label:o.$t("INTEGRATION_APPS.DISCONNECT.BUTTON_TEXT")},null,8,["label"])])])):(m(),f("div",RQ,[b(he,{blue:"",faded:"",label:o.$t("INTEGRATION_APPS.CONNECT.BUTTON_TEXT"),onClick:a[1]||(a[1]=i=>o.$emit("add"))},null,8,["label"])]))])])]))}},MQ={components:{BaseSettingsHeader:Ds,NextButton:he},props:{integrationId:{type:String,required:!0},showAddButton:{type:Boolean,default:!1}},emits:["delete","add"],setup(e){const{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}=im(e.integrationId);return{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}},computed:{...gt({globalConfig:"globalConfig/get"}),hookHeaders(){return this.integration.visible_properties},hooks(){if(!this.hasConnectedHooks)return[];const{hooks:e}=this.integration;return e.map(t=>({...t,id:t.id,properties:this.hookHeaders.map(n=>t.settings[n]?t.settings[n]:"--")}))}},mounted(){},methods:{inboxName(e){return e.inbox?e.inbox.name:""}}},kQ={class:"flex flex-col flex-1 gap-8 overflow-auto"},LQ={class:"w-full"},DQ={key:0,class:"woot-table"},PQ={key:0},BQ={key:0,class:"break-words"},FQ={class:"flex justify-end gap-1"},UQ={key:1,class:"flex flex-col items-center justify-center h-full"};function GQ(e,t,n,s,o,a){const i=F("NextButton"),l=F("BaseSettingsHeader"),r=ct("tooltip");return m(),f("div",kQ,[b(l,{title:s.integration.name,description:e.$t(`INTEGRATION_APPS.SIDEBAR_DESCRIPTION.${s.integration.name.toUpperCase()}`,{installationName:e.globalConfig.installationName}),"feature-name":n.integrationId,"back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:j(()=>[n.showAddButton?(m(),P(i,{key:0,icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_APPS.ADD_BUTTON"),onClick:t[0]||(t[0]=d=>e.$emit("add"))},null,8,["label"])):x("",!0)]),_:1},8,["title","description","feature-name","back-button-label"]),c("div",LQ,[s.hasConnectedHooks?(m(),f("table",DQ,[c("thead",null,[(m(!0),f(pe,null,ye(a.hookHeaders,d=>(m(),f("th",{key:d,class:"ltr:!pl-0 rtl:!pr-0"},v(d),1))),128)),s.isHookTypeInbox?(m(),f("th",PQ,v(e.$t("INTEGRATION_APPS.LIST.INBOX")),1)):x("",!0)]),c("tbody",null,[(m(!0),f(pe,null,ye(a.hooks,d=>(m(),f("tr",{key:d.id},[(m(!0),f(pe,null,ye(d.properties,u=>(m(),f("td",{key:u,class:"ltr:!pl-0 rtl:!pr-0"},v(u),1))),128)),s.isHookTypeInbox?(m(),f("td",BQ,v(a.inboxName(d)),1)):x("",!0),c("td",FQ,[ie(b(i,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:u=>e.$emit("delete",d)},null,8,["onClick"]),[[r,e.$t("INTEGRATION_APPS.LIST.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(m(),f("p",UQ,v(e.$t("INTEGRATION_APPS.NO_HOOK_CONFIGURED",{integrationId:s.integration.id})),1))])])}const VQ=Re(MQ,[["render",GQ]]),HQ={components:{NewHook:bQ,SingleIntegrationHooks:$Q,MultipleIntegrationHooks:VQ},props:{integrationId:{type:[String,Number],required:!0}},setup(e){const{integrationId:t}=e,{integration:n,isIntegrationMultiple:s,isIntegrationSingle:o,isHookTypeInbox:a}=im(t);return{integration:n,isIntegrationMultiple:s,isIntegrationSingle:o,isHookTypeInbox:a}},data(){return{loading:{},showAddHookModal:!1,showDeleteConfirmationPopup:!1,selectedHook:{},alertMessage:""}},computed:{...gt({uiFlags:"integrations/getUIFlags"}),showIntegrationHooks(){return!this.uiFlags.isFetching&&!ZN(this.integration)},showAddButton(){return this.showIntegrationHooks&&this.isIntegrationMultiple},deleteTitle(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.TITLE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.TITLE.ACCOUNT")},deleteMessage(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.MESSAGE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.MESSAGE.ACCOUNT")},confirmText(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.INBOX"):this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.ACCOUNT")},cancelText(){return this.$t("INTEGRATION_APPS.DELETE.CANCEL_BUTTON_TEXT")}},methods:{openAddHookModal(){this.showAddHookModal=!0},hideAddHookModal(){this.showAddHookModal=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},async confirmDeletion(){var e,t;try{await this.$store.dispatch("integrations/deleteHook",{hookId:this.selectedHook.id,appId:this.selectedHook.app_id}),this.alertMessage=this.$t("INTEGRATION_APPS.DELETE.API.SUCCESS_MESSAGE"),this.closeDeletePopup()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.DELETE.API.ERROR_MESSAGE")}finally{Te(this.alertMessage)}}}},KQ={class:"overflow-auto p-4 w-full my-auto flex flex-wrap h-full"},zQ={key:0,class:"w-full"},WQ={key:0},jQ={key:1};function YQ(e,t,n,s,o,a){const i=F("MultipleIntegrationHooks"),l=F("SingleIntegrationHooks"),r=F("NewHook"),d=F("woot-modal"),u=F("woot-delete-modal");return m(),f("div",KQ,[a.showIntegrationHooks?(m(),f("div",zQ,[s.isIntegrationMultiple?(m(),f("div",WQ,[b(i,{"integration-id":n.integrationId,"show-add-button":a.showAddButton,onAdd:a.openAddHookModal,onDelete:a.openDeletePopup},null,8,["integration-id","show-add-button","onAdd","onDelete"])])):x("",!0),s.isIntegrationSingle?(m(),f("div",jQ,[b(l,{"integration-id":n.integrationId,onAdd:a.openAddHookModal,onDelete:a.openDeletePopup},null,8,["integration-id","onAdd","onDelete"])])):x("",!0)])):x("",!0),b(d,{show:o.showAddHookModal,"onUpdate:show":t[0]||(t[0]=p=>o.showAddHookModal=p),"on-close":a.hideAddHookModal},{default:j(()=>[b(r,{"integration-id":n.integrationId,onClose:a.hideAddHookModal},null,8,["integration-id","onClose"])]),_:1},8,["show","on-close"]),b(u,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=p=>o.showDeleteConfirmationPopup=p),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:a.deleteTitle,message:a.deleteMessage,"confirm-text":a.confirmText,"reject-text":a.cancelText},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const XQ=Re(HQ,[["render",YQ]]),qQ={class:"flex flex-col flex-1 p-6 m-[1px] outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},ZQ={class:"flex items-start justify-between"},QQ={class:"flex h-12 w-12 mb-4"},JQ=["src"],eJ=["src"],tJ={class:"flex flex-col m-0 flex-1"},nJ={class:"font-medium mb-2 text-n-slate-12 flex justify-between items-center"},sJ={class:"text-base font-semibold"},aJ={class:"text-n-slate-11"},oJ={__name:"IntegrationItem",props:{id:{type:[String,Number],required:!0},name:{type:String,default:""},description:{type:String,default:""},enabled:{type:Boolean,default:!1}},setup(e){const t=e,n=vn(),s=n.getCurrentAccountId,o=n["globalConfig/get"],{t:a}=He(),i=w(()=>t.enabled?a("INTEGRATION_APPS.STATUS.ENABLED"):a("INTEGRATION_APPS.STATUS.DISABLED")),l=w(()=>t.enabled?"bg-n-teal-9":"bg-n-slate-8"),r=w(()=>Pt(`accounts/${s.value}/settings/integrations/${t.id}`));return(d,u)=>{const p=F("router-link"),h=ct("tooltip");return m(),f("div",qQ,[c("div",ZQ,[c("div",QQ,[c("img",{src:`/dashboard/images/integrations/${e.id}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,JQ),c("img",{src:`/dashboard/images/integrations/${e.id}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,eJ)]),ie((m(),f("span",{class:re(["text-white p-0.5 rounded-full w-5 h-5 flex items-center justify-center",l.value])},u[0]||(u[0]=[c("i",{class:"i-ph-check-bold text-sm"},null,-1)]),2)),[[h,i.value]])]),c("div",tJ,[c("div",nJ,[c("span",sJ,v(e.name),1),b(p,{to:r.value},{default:j(()=>[b(he,{label:d.$t("INTEGRATION_APPS.CONFIGURE"),link:""},null,8,["label"])]),_:1},8,["to"])]),c("p",aJ,v(I(Uf)(e.description,I(o).installationName)),1)])])}}},iJ={class:"flex-grow flex-shrink overflow-auto"},lJ={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},rJ={__name:"Index",setup(e){const t=Ot(),n=vn(),s=n["integrations/getUIFlags"],o=w(()=>n["integrations/getAppIntegrations"].value);return ut(()=>{t.dispatch("integrations/get")}),(a,i)=>(m(),P(Ha,{"is-loading":I(s).isFetching,"loading-message":a.$t("INTEGRATION_SETTINGS.LOADING")},{header:j(()=>[b(Ds,{title:a.$t("INTEGRATION_SETTINGS.HEADER"),description:a.$t("INTEGRATION_SETTINGS.DESCRIPTION"),"link-text":a.$t("INTEGRATION_SETTINGS.LEARN_MORE"),"feature-name":"integrations"},null,8,["title","description","link-text"])]),body:j(()=>[c("div",iJ,[c("div",lJ,[(m(!0),f(pe,null,ye(o.value,l=>(m(),P(oJ,{id:l.id,key:l.id,logo:l.logo,name:l.name,description:l.description,enabled:l.enabled},null,8,["id","logo","name","description","enabled"]))),128))])])]),_:1},8,["is-loading","loading-message"]))}},Kg=(e,t)=>{const n=t.toUpperCase();return`${e}.${n}`},{EXAMPLE_WEBHOOK_URL:cJ}=$t,dJ=["conversation_created","conversation_status_changed","conversation_updated","message_created","message_updated","webwidget_triggered","contact_created","contact_updated"],uJ={components:{NextButton:he},props:{value:{type:Object,default:()=>({})},isSubmitting:{type:Boolean,default:!1},submitLabel:{type:String,required:!0}},emits:["submit","cancel"],setup(){return{v$:Lt()}},validations:{url:{required:it,minLength:Nn(7),url:Oc},subscriptions:{required:it}},data(){return{url:this.value.url||"",subscriptions:this.value.subscriptions||[],supportedWebhookEvents:dJ}},computed:{webhookURLInputPlaceholder(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.PLACEHOLDER",{webhookExampleURL:cJ})}},methods:{onSubmit(){this.$emit("submit",{url:this.url,subscriptions:this.subscriptions})},getI18nKey:Kg}},mJ={class:"w-full"},pJ=["placeholder"],hJ={key:0,class:"message"},fJ={class:"flex flex-col gap-2.5 mb-4"},gJ=["id","value"],_J=["for"],vJ={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function bJ(e,t,n,s,o,a){const i=F("NextButton");return m(),f("form",{class:"flex flex-col w-full",onSubmit:t[4]||(t[4]=Ke((...l)=>a.onSubmit&&a.onSubmit(...l),["prevent"]))},[c("div",mJ,[c("label",{class:re({error:s.v$.url.$error})},[be(v(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.url=l),type:"text",name:"url",placeholder:a.webhookURLInputPlaceholder,onInput:t[1]||(t[1]=(...l)=>s.v$.url.$touch&&s.v$.url.$touch(...l))},null,40,pJ),[[at,o.url]]),s.v$.url.$error?(m(),f("span",hJ,v(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.ERROR")),1)):x("",!0)],2),c("label",{class:re([{error:s.v$.url.$error},"mb-2"])},v(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.LABEL")),3),c("div",fJ,[(m(!0),f(pe,null,ye(o.supportedWebhookEvents,l=>(m(),f("div",{key:l,class:"flex items-center"},[ie(c("input",{id:l,"onUpdate:modelValue":t[2]||(t[2]=r=>o.subscriptions=r),type:"checkbox",value:l,name:"subscriptions",class:"mr-2"},null,8,gJ),[[Kt,o.subscriptions]]),c("label",{for:l,class:"text-sm"},v(`${e.$t(a.getI18nKey("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",l))} (${l})`),9,_J)]))),128))])]),c("div",vJ,[b(i,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.CANCEL"),onClick:t[3]||(t[3]=Ke(l=>e.$emit("cancel"),["prevent"]))},null,8,["label"]),b(i,{type:"submit",disabled:s.v$.$invalid||n.isSubmitting,"is-loading":n.isSubmitting,label:n.submitLabel},null,8,["disabled","is-loading","label"])])],32)}const cA=Re(uJ,[["render",bJ]]),EJ={components:{WebhookForm:cA},mixins:[Yo],props:{onClose:{type:Function,required:!0}},computed:{...gt({globalConfig:"globalConfig/get",uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){try{await this.$store.dispatch("webhooks/create",{webhook:e}),Te(this.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.response.data.message||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");Te(n)}}}},TJ={class:"h-auto overflow-auto flex flex-col"};function yJ(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("WebhookForm");return m(),f("div",TJ,[b(i,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.TITLE"),"header-content":e.useInstallationName(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.DESC"),e.globalConfig.installationName)},null,8,["header-title","header-content"]),b(l,{"is-submitting":e.uiFlags.creatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.ADD_SUBMIT"),onSubmit:a.onSubmit,onCancel:n.onClose},null,8,["is-submitting","submit-label","onSubmit","onCancel"])])}const AJ=Re(EJ,[["render",yJ]]),SJ={components:{WebhookForm:cA},props:{value:{type:Object,required:!0},id:{type:[Number,String],required:!0},onClose:{type:Function,required:!0}},computed:{...gt({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){var t,n;try{await this.$store.dispatch("webhooks/update",{webhook:e,id:this.id}),Te(this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.SUCCESS_MESSAGE")),this.onClose()}catch(s){const o=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message)||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");Te(o)}}}},IJ={class:"flex flex-col h-auto overflow-auto"};function CJ(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("WebhookForm");return m(),f("div",IJ,[b(i,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.TITLE")},null,8,["header-title"]),b(l,{value:n.value,"is-submitting":e.uiFlags.updatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.EDIT_SUBMIT"),onSubmit:a.onSubmit,onCancel:n.onClose},null,8,["value","is-submitting","submit-label","onSubmit","onCancel"])])}const NJ=Re(SJ,[["render",CJ]]),OJ={__name:"ShowMore",props:{text:{type:String,default:""},limit:{type:Number,default:120}},setup(e){const t=e,{t:n}=He(),s=U(!1),o=w(()=>s.value||t.text.length<=t.limit?t.text:t.text.slice(0,t.limit)+"..."),a=w(()=>{const l=s.value?"SHOW_LESS":"SHOW_MORE";return n(`COMPONENTS.SHOW_MORE_BLOCK.${l}`)}),i=()=>{s.value=!s.value};return(l,r)=>(m(),f("span",null,[be(v(o.value)+" ",1),e.text.length>e.limit?(m(),f("button",{key:0,class:"text-woot-500 !p-0 !border-0 align-top",onClick:i},v(a.value),1)):x("",!0)]))}},xJ={class:"py-4 ltr:pr-4 rtl:pl-4"},wJ={class:"font-medium break-words text-slate-700 dark:text-slate-100"},RJ={class:"block mt-1 text-sm text-slate-500 dark:text-slate-400"},$J={class:"font-medium"},MJ={class:"py-4 min-w-xs"},kJ={class:"flex justify-end gap-1"},LJ={__name:"WebhookRow",props:{webhook:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=w(()=>{const{subscriptions:i}=n.webhook;return i.map(l=>o(Kg("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",l))).join(", ")});return(i,l)=>{const r=ct("tooltip");return m(),f("tr",null,[c("td",xJ,[c("div",wJ,v(e.webhook.url),1),c("div",RJ,[c("span",$J,v(i.$t("INTEGRATION_SETTINGS.WEBHOOK.SUBSCRIBED_EVENTS"))+": ",1),b(OJ,{text:a.value,limit:60},null,8,["text"])])]),c("td",MJ,[c("div",kJ,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:l[0]||(l[0]=d=>s("edit",e.webhook))},null,512),[[r,i.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:l[1]||(l[1]=d=>s("delete",e.webhook,e.index))},null,512),[[r,i.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}}},DJ={components:{SettingsLayout:Ha,NextButton:he,BaseSettingsHeader:Ds,NewWebhook:AJ,EditWebhook:NJ,WebhookRow:LJ},data(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedWebHook:{}}},computed:{...gt({records:"webhooks/getWebhooks",uiFlags:"webhooks/getUIFlags"}),integration(){return this.$store.getters["integrations/getIntegration"]("webhook")},tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.WEBHOOK_ENDPOINT"),this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.ACTIONS")]}},mounted(){this.$store.dispatch("webhooks/get")},methods:{openAddPopup(){this.showAddPopup=!0},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedWebHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},openEditPopup(e){this.showEditPopup=!0,this.selectedWebHook=e},hideEditPopup(){this.showEditPopup=!1},confirmDeletion(){this.loading[this.selectedWebHook.id]=!0,this.closeDeletePopup(),this.deleteWebhook(this.selectedWebHook.id)},async deleteWebhook(e){try{await this.$store.dispatch("webhooks/delete",e),Te(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}}}},PJ={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},BJ={class:"divide-y divide-slate-25 dark:divide-slate-800 flex-1 text-slate-700 dark:text-slate-100"};function FJ(e,t,n,s,o,a){const i=F("NextButton"),l=F("BaseSettingsHeader"),r=F("WebhookRow"),d=F("NewWebhook"),u=F("woot-modal"),p=F("EditWebhook"),h=F("woot-delete-modal"),g=F("SettingsLayout");return m(),P(g,{"is-loading":e.uiFlags.fetchingList,"loading-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LOADING"),"no-records-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.404"),"no-records-found":!e.records.length},{header:j(()=>[a.integration.name?(m(),P(l,{key:0,title:a.integration.name,description:a.integration.description,"link-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LEARN_MORE"),"feature-name":"webhook","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:j(()=>[b(i,{blue:"",icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.HEADER_BTN_TXT"),onClick:a.openAddPopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"])):x("",!0)]),body:j(()=>[c("table",PJ,[c("thead",null,[(m(!0),f(pe,null,ye(a.tableHeaders,_=>(m(),f("th",{key:_,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right last:pr-4"},v(_),1))),128))]),c("tbody",BJ,[(m(!0),f(pe,null,ye(e.records,(_,T)=>(m(),P(r,{key:_.id,index:T,webhook:_,onEdit:a.openEditPopup,onDelete:a.openDeletePopup},null,8,["index","webhook","onEdit","onDelete"]))),128))])])]),default:j(()=>[b(u,{show:o.showAddPopup,"onUpdate:show":t[0]||(t[0]=_=>o.showAddPopup=_),"on-close":a.hideAddPopup},{default:j(()=>[o.showAddPopup?(m(),P(d,{key:0,"on-close":a.hideAddPopup},null,8,["on-close"])):x("",!0)]),_:1},8,["show","on-close"]),b(u,{show:o.showEditPopup,"onUpdate:show":t[1]||(t[1]=_=>o.showEditPopup=_),"on-close":a.hideEditPopup},{default:j(()=>[o.showEditPopup?(m(),P(p,{key:0,id:o.selectedWebHook.id,value:o.selectedWebHook,"on-close":a.hideEditPopup},null,8,["id","value","on-close"])):x("",!0)]),_:1},8,["show","on-close"]),b(h,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[2]||(t[2]=_=>o.showDeleteConfirmationPopup=_),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),message:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE",{webhookURL:o.selectedWebHook.url}),"confirm-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-message","no-records-found"])}const UJ=Re(DJ,[["render",FJ]]),GJ={components:{NextButton:he},props:{show:{type:Boolean,default:!1},mode:{type:String,default:"create"},selectedAppData:{type:Object,default:()=>({})}},emits:["close"],setup(){return{v$:Lt()}},validations:{app:{title:{required:it},content:{type:{required:it},url:{required:it,url:Oc}}}},data(){return{isLoading:!1,app:{title:"",content:{type:"frame",url:""}}}},computed:{header(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.HEADER`)},submitButtonLabel(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.FORM_SUBMIT`)}},mounted(){this.mode==="UPDATE"&&this.selectedAppData&&(this.app.title=this.selectedAppData.title,this.app.content=this.selectedAppData.content[0])},methods:{closeModal(){this.app={title:"",content:{type:"frame",url:""}},this.$emit("close")},async submit(){try{if(this.v$.$touch(),this.v$.$invalid)return;const e=this.mode.toLowerCase(),t={title:this.app.title,content:[this.app.content]};e==="update"&&(t.id=this.selectedAppData.id),this.isLoading=!0,await this.$store.dispatch(`dashboardApps/${e}`,t),Te(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_SUCCESS`)),this.closeModal()}catch{Te(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_ERROR`))}finally{this.isLoading=!1}}}},VJ={class:"flex flex-col h-auto overflow-auto"},HJ={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function KJ(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("NextButton"),d=F("woot-modal");return m(),P(d,{show:n.show,"on-close":a.closeModal},{default:j(()=>[c("div",VJ,[b(i,{"header-title":a.header},null,8,["header-title"]),c("form",{class:"w-full",onSubmit:t[2]||(t[2]=Ke((...u)=>a.submit&&a.submit(...u),["prevent"]))},[b(l,{modelValue:o.app.title,"onUpdate:modelValue":t[0]||(t[0]=u=>o.app.title=u),class:re([{error:s.v$.app.title.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_PLACEHOLDER"),error:s.v$.app.title.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_ERROR"):null,"data-testid":"app-title",onInput:s.v$.app.title.$touch,onBlur:s.v$.app.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),b(l,{modelValue:o.app.content.url,"onUpdate:modelValue":t[1]||(t[1]=u=>o.app.content.url=u),class:re([{error:s.v$.app.content.url.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_PLACEHOLDER"),error:s.v$.app.content.url.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_ERROR"):null,"data-testid":"app-url",onInput:s.v$.app.content.url.$touch,onBlur:s.v$.app.content.url.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),c("div",HJ,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.CREATE.FORM_CANCEL"),onClick:Ke(a.closeModal,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",label:a.submitButtonLabel,disabled:s.v$.$invalid,"is-loading":o.isLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const zJ=Re(GJ,[["render",KJ]]),WJ={class:"max-w-full py-1"},jJ=["title"],YJ=["title"],XJ={class:"flex gap-1 py-4 ltr:pr-4 rtl:pl-4 text-sm sm:pr-0 justify-end"},qJ={__name:"DashboardAppsRow",props:{app:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e){return(t,n)=>{const s=ct("tooltip");return m(),f("tr",WJ,[c("td",{class:"py-4 ltr:pr-4 rtl:pl-4 text-sm w-40 max-w-[10rem] truncate",title:e.app.title},v(e.app.title),9,jJ),c("td",{class:"max-w-lg py-4 ltr:pr-4 rtl:pl-4 text-sm truncate",title:e.app.content[0].url},v(e.app.content[0].url),9,YJ),c("td",XJ,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=o=>t.$emit("edit",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.EDIT_TOOLTIP"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[1]||(n[1]=o=>t.$emit("delete",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.DELETE_TOOLTIP"),void 0,{top:!0}]])])])}}},ZJ={components:{BaseSettingsHeader:Ds,DashboardAppModal:zJ,DashboardAppsRow:qJ,NextButton:he},mixins:[Yo],data(){return{loading:{},showDashboardAppPopup:!1,showDeleteConfirmationPopup:!1,selectedApp:{},mode:"CREATE"}},computed:{...gt({records:"dashboardApps/getRecords",uiFlags:"dashboardApps/getUIFlags"}),tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.NAME"),this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.ENDPOINT")]}},mounted(){this.$store.dispatch("dashboardApps/get")},methods:{toggleDashboardAppPopup(){this.showDashboardAppPopup=!this.showDashboardAppPopup,this.selectedApp={}},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedApp=e},openCreatePopup(){this.mode="CREATE",this.selectedApp={},this.showDashboardAppPopup=!0},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},editApp(e){this.loading[e.id]=!0,this.mode="UPDATE",this.selectedApp=e,this.showDashboardAppPopup=!0},confirmDeletion(){this.loading[this.selectedApp.id]=!0,this.closeDeletePopup(),this.deleteApp(this.selectedApp.id)},async deleteApp(e){try{await this.$store.dispatch("dashboardApps/delete",e),Te(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_SUCCESS"))}catch{Te(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_ERROR"))}}}},QJ={class:"flex flex-col flex-1 gap-8 overflow-auto"},JJ={class:"w-full overflow-x-auto text-slate-700 dark:text-slate-200"},eee={key:0,class:"flex flex-col items-center justify-center h-full"},tee={key:2,class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},nee={class:"divide-y divide-slate-50 dark:divide-slate-800"};function see(e,t,n,s,o,a){const i=F("NextButton"),l=F("BaseSettingsHeader"),r=F("woot-loading-state"),d=F("DashboardAppsRow"),u=F("DashboardAppModal"),p=F("woot-delete-modal");return m(),f("div",QJ,[b(l,{title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.TITLE"),description:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DESCRIPTION"),"link-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LEARN_MORE"),"feature-name":"dashboard_apps","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:j(()=>[b(i,{icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.HEADER_BTN_TXT"),onClick:a.openCreatePopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"]),c("div",JJ,[!e.uiFlags.isFetching&&!e.records.length?(m(),f("p",eee,v(e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.404")),1)):x("",!0),e.uiFlags.isFetching?(m(),P(r,{key:1,message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.LOADING")},null,8,["message"])):x("",!0),!e.uiFlags.isFetching&&e.records.length?(m(),f("table",tee,[c("thead",null,[(m(!0),f(pe,null,ye(a.tableHeaders,h=>(m(),f("th",{key:h,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-slate-700 dark:text-slate-300"},v(h),1))),128))]),c("tbody",nee,[(m(!0),f(pe,null,ye(e.records,(h,g)=>(m(),P(d,{key:h.id,index:g,app:h,onEdit:a.editApp,onDelete:a.openDeletePopup},null,8,["index","app","onEdit","onDelete"]))),128))])])):x("",!0)]),o.showDashboardAppPopup?(m(),P(u,{key:0,show:o.showDashboardAppPopup,mode:o.mode,"selected-app-data":o.selectedApp,onClose:a.toggleDashboardAppPopup},null,8,["show","mode","selected-app-data","onClose"])):x("",!0),b(p,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[0]||(t[0]=h=>o.showDeleteConfirmationPopup=h),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.TITLE"),message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.MESSAGE",{appName:o.selectedApp.title}),"confirm-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const aee=Re(ZJ,[["render",see]]),oee={class:"flex flex-col items-start justify-between lg:flex-row lg:items-center p-6 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow gap-6"},iee={class:"flex items-start lg:items-center justify-start flex-1 m-0 gap-6 flex-col lg:flex-row"},lee={class:"flex h-16 w-16 items-center justify-center flex-shrink-0"},ree=["src"],cee=["src"],dee={class:"mb-1 text-xl font-medium text-n-slate-12"},uee={class:"text-n-slate-11 text-sm leading-6"},mee={class:"flex justify-center items-center mb-0"},pee={key:0},hee={key:0},fee={key:1},gee={key:0},_ee=["href"],zg={__name:"Integration",props:{integrationId:{type:[String,Number],required:!0},integrationName:{type:String,default:""},integrationDescription:{type:String,default:""},integrationEnabled:{type:Boolean,default:!1},integrationAction:{type:String,default:""},actionButtonText:{type:String,default:""},deleteConfirmationText:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=He(),s=hn(),o=wn(),a=U(null),i=w(()=>s.getters.getCurrentAccountId),l=w(()=>s.getters["globalConfig/get"]),r=()=>{a.value&&a.value.open()},d=()=>{a.value&&a.value.close()},u=async()=>{try{await s.dispatch("integrations/deleteIntegration",t.integrationId),Te(n("INTEGRATION_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(n("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}},p=()=>{d(),u(),o.push({name:"settings_applications"})};return(h,g)=>{const _=F("router-link");return m(),f("div",oee,[c("div",iee,[c("div",lee,[c("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,ree),c("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,cee)]),c("div",null,[c("h3",dee,v(e.integrationName),1),c("p",uee,v(I(Uf)(e.integrationDescription,l.value.installationName)),1)])]),c("div",mee,[b(_,{to:I(Pt)(`accounts/${i.value}/settings/integrations/`+e.integrationId)},{default:j(()=>[e.integrationEnabled?(m(),f("div",pee,[e.integrationAction==="disconnect"?(m(),f("div",hee,[b(he,{label:e.actionButtonText||h.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),faded:"",ruby:"",onClick:r},null,8,["label"])])):(m(),f("div",fee,[b(he,{faded:"",blue:"",label:I(n)("INTEGRATION_SETTINGS.WEBHOOK.CONFIGURE")},null,8,["label"])]))])):x("",!0)]),_:1},8,["to"]),e.integrationEnabled?x("",!0):(m(),f("div",gee,[et(h.$slots,"action",{},()=>[c("a",{href:e.integrationAction},[b(he,{faded:"",blue:"",label:I(n)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT")},null,8,["label"])],8,_ee)])]))]),b(Ss,{ref_key:"dialogRef",ref:a,type:"alert",title:e.deleteConfirmationText.title||I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),description:e.deleteConfirmationText.message||I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE"),"confirm-button-label":I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"cancel-button-label":I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO"),onConfirm:p},null,8,["title","description","confirm-button-label","cancel-button-label"])])}}},vee={class:"px-6 py-4 mb-4 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},bee={class:"flex"},Eee={class:"ml-3"},Tee={class:"mb-1 text-base font-semibold text-n-slate-12"},yee={class:"mt-2 text-sm text-n-slate-11 mb-3"},Aee={key:0,class:"mb-2 mt-1 ml-8"},See={key:1,class:"inline-flex"},Iee={value:""},Cee=["value"],Nee={__name:"SelectChannelWarning",props:{hasConnectedAChannel:{type:Boolean,default:!0}},setup(e){const t=e,n=hn(),{t:s}=He(),{formatMessage:o}=oo(),a=U(""),i=U([]),l=w(()=>n.getters["integrations/getUIFlags"]),r=w(()=>t.hasConnectedAChannel?s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.EXPIRED"):s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.DESCRIPTION")),d=w(()=>n.getters["globalConfig/get"]),u=w(()=>o(Uf(r.value,d.value.installationName),!1)),p=async()=>{try{i.value=await n.dispatch("integrations/listAllSlackChannels"),i.value.sort((g,_)=>g.name-_.name)}catch{s("INTEGRATION_SETTINGS.SLACK.FAILED_TO_FETCH_CHANNELS"),i.value=[]}},h=async()=>{try{await n.dispatch("integrations/updateSlack",{referenceId:a.value}),Te(s("INTEGRATION_SETTINGS.SLACK.UPDATE_SUCCESS"))}catch(g){Te(g.message||"INTEGRATION_SETTINGS.SLACK.UPDATE_ERROR")}};return(g,_)=>{const T=ct("dompurify-html");return m(),f("div",vee,[c("div",bee,[_[1]||(_[1]=c("div",{class:"flex-shrink-0"},[c("div",{class:"i-lucide-bell text-xl text-n-amber-11 mt-1"})],-1)),c("div",Eee,[c("p",Tee,v(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.ATTENTION_REQUIRED")),1),c("div",yee,[ie(c("p",null,null,512),[[T,u.value]])])])]),e.hasConnectedAChannel?x("",!0):(m(),f("div",Aee,[i.value.length?(m(),f("div",See,[ie(c("select",{"onUpdate:modelValue":_[0]||(_[0]=S=>a.value=S),class:"h-8 py-1 mr-4 text-xs leading-4 border border-yellow-300"},[c("option",Iee,v(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.OPTION_LABEL")),1),(m(!0),f(pe,null,ye(i.value,S=>(m(),f("option",{key:S.id,value:S.id}," #"+v(S.name),9,Cee))),128))],512),[[Mt,a.value]]),b(he,{teal:"",sm:"","is-loading":l.value.isUpdatingSlack,onClick:h},{default:j(()=>[be(v(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.UPDATE")),1)]),_:1},8,["is-loading"])])):(m(),P(he,{key:0,amber:"",sm:"","is-loading":l.value.isFetchingSlackChannels,onClick:p},{default:j(()=>[be(v(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.BUTTON_TEXT")),1)]),_:1},8,["is-loading"]))]))])}}},Oee={class:"flex-1 w-full px-6 py-5 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},xee={class:"prose-lg max-w-5xl"},wee={class:"text-n-slate-12 tracking-tight"},Ree={class:"text-n-slate-11"},$ee={__name:"SlackIntegrationHelpText",props:{selectedChannelName:{type:String,required:!0}},setup(e){const t=e,{t:n}=He(),{formatMessage:s}=oo(),o=w(()=>s(n("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.BODY",{selectedChannelName:t.selectedChannelName}),!1));return(a,i)=>{const l=ct("dompurify-html");return m(),f("div",Oee,[c("div",xee,[c("h5",wee,v(I(n)("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.TITLE")),1),ie(c("div",Ree,null,512),[[l,o.value]])])])}}},Mee={key:0,class:"flex flex-col flex-1 overflow-auto gap-5 pt-1 pb-10"},kee={key:0,class:"flex-1"},Lee={key:1,class:"flex items-center justify-center flex-1"},Dee={__name:"Slack",props:{code:{type:String,default:""}},setup(e){const t=e,n=hn(),s=wn(),o=xn(),{t:a}=He(),i=U(!1),l=w(()=>n.getters["integrations/getIntegration"]("slack")),r=w(()=>{const{hooks:S=[]}=l.value||{};return!!S.length}),d=w(()=>{const{hooks:S=[]}=l.value||{},[E]=S;return E||{}}),u=w(()=>d.value.status||!1),p=w(()=>!!d.value.reference_id),h=w(()=>{if(d.value.status){const{settings:{channel_name:S=""}={}}=d.value;return S||"customer-conversations"}return a("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.SELECTED")}),g=w(()=>n.getters["integrations/getUIFlags"]),_=w(()=>l.value.enabled?"disconnect":l.value.action),T=async()=>{await n.dispatch("integrations/get","slack"),t.code&&(await n.dispatch("integrations/connectSlack",t.code),s.replace(o.path)),i.value=!0};return ut(()=>{T()}),(S,E)=>i.value&&!g.value.isCreatingSlack?(m(),f("div",Mee,[b(zg,{"integration-id":l.value.id,"integration-logo":l.value.logo,"integration-name":l.value.name,"integration-description":l.value.description,"integration-enabled":l.value.enabled,"integration-action":_.value,"action-button-text":S.$t("INTEGRATION_SETTINGS.SLACK.DELETE"),"delete-confirmation-text":{title:S.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.TITLE"),message:S.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","action-button-text","delete-confirmation-text"]),r.value?(m(),f("div",kee,[u.value?x("",!0):(m(),P(Nee,{key:0,"has-connected-a-channel":p.value},null,8,["has-connected-a-channel"])),b($ee,{"selected-channel-name":h.value},null,8,["selected-channel-name"])])):x("",!0)])):(m(),f("div",Lee,[b(Os,{size:"","color-scheme":"primary"})]))}},Pee={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},Bee={key:0},Fee={key:1,class:"flex items-center justify-center flex-1"},Uee={__name:"Linear",setup(e){const t=Ot(),n=U(!1),s=La("integrations/getIntegration","linear"),o=Ve("integrations/getUIFlags"),a=w(()=>s.value.enabled?"disconnect":s.value.action),i=async()=>{await t.dispatch("integrations/get","linear"),n.value=!0};return ut(()=>{i()}),(l,r)=>(m(),f("div",Pee,[n.value&&!I(o).isCreatingLinear?(m(),f("div",Bee,[b(zg,{"integration-id":I(s).id,"integration-logo":I(s).logo,"integration-name":I(s).name,"integration-description":I(s).description,"integration-enabled":I(s).enabled,"integration-action":a.value,"delete-confirmation-text":{title:l.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.TITLE"),message:l.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(m(),f("div",Fee,[b(Os,{size:"","color-scheme":"primary"})]))]))}},Gee={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},Vee={key:0,class:"flex flex-col gap-6"},Hee={key:0,class:"flex items-center justify-center flex-1 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow p-6"},Kee={class:"text-red-500"},zee={key:1,class:"flex items-center justify-center flex-1"},Wee={__name:"Shopify",props:{error:{type:String,default:""}},setup(e){const t=Ot(),n=U(null),s=U(!1),o=U(""),a=U(!1),i=U(""),l=La("integrations/getIntegration","shopify"),r=Ve("integrations/getUIFlags"),d=w(()=>l.value.enabled?"disconnect":"connect"),u=()=>{o.value="",i.value="",a.value=!1},p=T=>/^[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com$/.test(T),h=()=>{n.value&&n.value.open()},g=async()=>{try{if(i.value="",!p(o.value)){i.value="Please enter a valid Shopify store URL (e.g., your-store.myshopify.com)";return}a.value=!0;const{data:T}=await QN.connectShopify({shopDomain:o.value});T.redirect_url&&(window.location.href=T.redirect_url)}catch(T){i.value=T.message}finally{a.value=!1}},_=async()=>{await t.dispatch("integrations/get","shopify"),s.value=!0};return ut(()=>{_()}),(T,S)=>(m(),f("div",Gee,[s.value&&!I(r).isCreatingShopify?(m(),f("div",Vee,[b(zg,{"integration-id":I(l).id,"integration-logo":I(l).logo,"integration-name":I(l).name,"integration-description":I(l).description,"integration-enabled":I(l).enabled,"integration-action":d.value,"delete-confirmation-text":{title:T.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.TITLE"),message:T.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.MESSAGE")}},{action:j(()=>[b(he,{teal:"",label:T.$t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:h},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"]),e.error?(m(),f("div",Hee,[c("p",Kee,v(T.$t("INTEGRATION_SETTINGS.SHOPIFY.ERROR")),1)])):x("",!0),b(Ss,{ref_key:"dialogRef",ref:n,title:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.TITLE"),"is-loading":a.value,onConfirm:g,onClose:u},{default:j(()=>[b(ps,{modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=E=>o.value=E),label:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.LABEL"),placeholder:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.PLACEHOLDER"),message:i.value?i.value:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.HELP"),"message-type":i.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","is-loading"])])):(m(),f("div",zee,[b(Os,{size:"","color-scheme":"primary"})]))]))}},jee={routes:[{path:Pt("accounts/:accountId/settings/integrations"),component:da,props:{},children:[{path:"",name:"settings_applications",component:rJ,meta:{featureFlag:xt.INTEGRATIONS,permissions:["administrator"]}},{path:"dashboard_apps",component:aee,name:"settings_integrations_dashboard_apps",meta:{featureFlag:xt.INTEGRATIONS,permissions:["administrator"]}},{path:"webhook",component:UJ,name:"settings_integrations_webhook",meta:{featureFlag:xt.INTEGRATIONS,permissions:["administrator"]}}]},{path:Pt("accounts/:accountId/settings/integrations"),component:Pc,props:e=>{var a;const t=(a=e.params)==null?void 0:a.integration_id;if(["dialogflow"].includes(t))return{};const s=e.name!=="settings_integrations",o=e.name==="settings_integrations_integration"?{name:"settings_integrations"}:"";return{headerTitle:"INTEGRATION_SETTINGS.HEADER",icon:"flash-on",showBackButton:s,backUrl:o}},children:[{path:"slack",name:"settings_integrations_slack",component:Dee,meta:{featureFlag:xt.INTEGRATIONS,permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"linear",name:"settings_integrations_linear",component:Uee,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"shopify",name:"settings_integrations_shopify",component:Wee,meta:{featureFlag:xt.INTEGRATIONS,permissions:["administrator"]},props:e=>({error:e.query.error})},{path:":integration_id",name:"settings_applications_integration",component:XQ,meta:{featureFlag:xt.INTEGRATIONS,permissions:["administrator"]},props:e=>({integrationId:e.params.integration_id})}]}]},Yee=(e="")=>!!e&&!e.includes(" "),dA=e=>{let t="";return e.title.$error?e.title.required?e.title.minLength?e.title.validLabelCharacters||(t="LABEL_MGMT.FORM.NAME.VALID_ERROR"):t="LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR":t="LABEL_MGMT.FORM.NAME.REQUIRED_ERROR":t="",t},uA={title:{required:it,minLength:Nn(2),validLabelCharacters:Yee},description:{},color:{required:it},showOnSidebar:{}},Xee=()=>{const e="0123456789ABCDEF";let t="#";for(let n=0;n<6;n+=1)t+=e[Math.floor(Math.random()*16)];return t},qee={components:{NextButton:he},props:{prefillTitle:{type:String,default:""}},emits:["close"],setup(){return{v$:Lt()}},data(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:uA,computed:{...gt({uiFlags:"labels/getUIFlags"}),labelTitleErrorMessage(){const e=dA(this.v$);return this.$t(e)}},mounted(){this.color=Xee(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose(){this.$emit("close")},async addLabel(){try{await this.$store.dispatch("labels/create",{color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}),Te(this.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(e){const t=e.message||this.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE");Te(t)}}}},Zee={class:"flex flex-col h-auto overflow-auto"},Qee={class:"w-full"},Jee={class:"flex items-center w-full gap-2"},ete={for:"conversation_creation"},tte={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function nte(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("woot-color-picker"),d=F("NextButton");return m(),f("div",Zee,[b(i,{"header-title":e.$t("LABEL_MGMT.ADD.TITLE"),"header-content":e.$t("LABEL_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=Ke((...u)=>a.addLabel&&a.addLabel(...u),["prevent"]))},[b(l,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=u=>o.title=u),class:re([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:a.labelTitleErrorMessage,"data-testid":"label-title",onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),b(l,{modelValue:o.description,"onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),class:re([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description",onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),c("div",Qee,[c("label",null,[be(v(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),b(r,{modelValue:o.color,"onUpdate:modelValue":t[2]||(t[2]=u=>o.color=u)},null,8,["modelValue"])])]),c("div",Jee,[ie(c("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>o.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[Kt,o.showOnSidebar]]),c("label",ete,v(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),c("div",tte,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{type:"submit","data-testid":"label-submit",label:e.$t("LABEL_MGMT.FORM.CREATE"),disabled:s.v$.title.$invalid||e.uiFlags.isCreating,"is-loading":e.uiFlags.isCreating},null,8,["label","disabled","is-loading"])])],32)])}const Wg=Re(qee,[["render",nte],["__scopeId","data-v-5e6cb446"]]),ste={components:{NextButton:he},props:{selectedResponse:{type:Object,default:()=>{}}},emits:["close"],setup(){return{v$:Lt()}},data(){return{title:"",description:"",showOnSidebar:!0,color:""}},validations:uA,computed:{...gt({uiFlags:"labels/getUIFlags"}),pageTitle(){return`${this.$t("LABEL_MGMT.EDIT.TITLE")} - ${this.selectedResponse.title}`},labelTitleErrorMessage(){const e=dA(this.v$);return this.$t(e)}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){this.title=this.selectedResponse.title,this.description=this.selectedResponse.description,this.showOnSidebar=this.selectedResponse.show_on_sidebar,this.color=this.selectedResponse.color},editLabel(){this.$store.dispatch("labels/update",{id:this.selectedResponse.id,color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}).then(()=>{Te(this.$t("LABEL_MGMT.EDIT.API.SUCCESS_MESSAGE")),setTimeout(()=>this.onClose(),10)}).catch(()=>{Te(this.$t("LABEL_MGMT.EDIT.API.ERROR_MESSAGE"))})}}},ate={class:"flex flex-col h-auto overflow-auto"},ote={class:"w-full"},ite={class:"flex items-center w-full gap-2"},lte={for:"conversation_creation"},rte={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function cte(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("woot-color-picker"),d=F("NextButton");return m(),f("div",ate,[b(i,{"header-title":a.pageTitle},null,8,["header-title"]),c("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=Ke((...u)=>a.editLabel&&a.editLabel(...u),["prevent"]))},[b(l,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=u=>o.title=u),class:re([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:a.labelTitleErrorMessage,onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),b(l,{modelValue:o.description,"onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),class:re([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),c("div",ote,[c("label",null,[be(v(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),b(r,{modelValue:o.color,"onUpdate:modelValue":t[2]||(t[2]=u=>o.color=u)},null,8,["modelValue"])])]),c("div",ite,[ie(c("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>o.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[Kt,o.showOnSidebar]]),c("label",lte,v(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),c("div",rte,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{type:"submit",label:e.$t("LABEL_MGMT.FORM.EDIT"),disabled:s.v$.title.$invalid||e.uiFlags.isUpdating,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const dte=Re(ste,[["render",cte],["__scopeId","data-v-c9b7cbf5"]]),ute={class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},mte={class:"flex-1 divide-y divide-slate-25 dark:divide-slate-800 text-slate-700 dark:text-slate-100"},pte={class:"py-4 ltr:pr-4 rtl:pl-4"},hte={class:"mb-1 font-medium break-words text-slate-700 dark:text-slate-100"},fte={class:"py-4 ltr:pr-4 rtl:pl-4"},gte={class:"py-4 leading-6 ltr:pr-4 rtl:pl-4"},_te={class:"flex items-center"},vte={class:"py-4 min-w-xs"},bte={class:"flex gap-1 justify-end"},Ete={__name:"Index",setup(e){const t=vn(),n=Ot(),{t:s}=He(),o=U({}),a=U(!1),i=U(!1),l=U(!1),r=U({}),d=w(()=>t["labels/getLabels"].value),u=w(()=>t["labels/getUIFlags"].value),p=w(()=>` ${r.value.title}?`),h=()=>{a.value=!0},g=()=>{a.value=!1},_=O=>{i.value=!0,r.value=O},T=()=>{i.value=!1},S=O=>{l.value=!0,r.value=O},E=()=>{l.value=!1},y=async O=>{try{await n.dispatch("labels/delete",O),Te(s("LABEL_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(N){const R=(N==null?void 0:N.message)||s("LABEL_MGMT.DELETE.API.ERROR_MESSAGE");Te(R)}finally{o.value[r.value.id]=!1}},A=()=>{o.value[r.value.id]=!0,E(),y(r.value.id)},C=w(()=>[s("LABEL_MGMT.LIST.TABLE_HEADER.NAME"),s("LABEL_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),s("LABEL_MGMT.LIST.TABLE_HEADER.COLOR")]);return Df(()=>{n.dispatch("labels/get")}),(O,N)=>{const R=F("woot-modal"),k=F("woot-delete-modal"),L=ct("tooltip");return m(),P(Ha,{"is-loading":u.value.isFetching,"loading-message":O.$t("LABEL_MGMT.LOADING"),"no-records-found":!d.value.length,"no-records-message":O.$t("LABEL_MGMT.LIST.404")},{header:j(()=>[b(Ds,{title:O.$t("LABEL_MGMT.HEADER"),description:O.$t("LABEL_MGMT.DESCRIPTION"),"link-text":O.$t("LABEL_MGMT.LEARN_MORE"),"feature-name":"labels"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:O.$t("LABEL_MGMT.HEADER_BTN_TXT"),onClick:h},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:j(()=>[c("table",ute,[c("thead",null,[(m(!0),f(pe,null,ye(C.value,D=>(m(),f("th",{key:D,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-slate-700 dark:text-slate-300"},v(D),1))),128))]),c("tbody",mte,[(m(!0),f(pe,null,ye(d.value,(D,$)=>(m(),f("tr",{key:D.title},[c("td",pte,[c("span",hte,v(D.title),1)]),c("td",fte,v(D.description),1),c("td",gte,[c("div",_te,[c("span",{class:"w-4 h-4 mr-1 border border-solid rounded rtl:mr-0 rtl:ml-1 border-slate-50 dark:border-slate-700",style:At({backgroundColor:D.color})},null,4),be(" "+v(D.color),1)])]),c("td",vte,[c("div",bte,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":o.value[D.id],onClick:M=>_(D)},null,8,["is-loading","onClick"]),[[L,O.$t("LABEL_MGMT.FORM.EDIT"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":o.value[D.id],onClick:M=>S(D,$)},null,8,["is-loading","onClick"]),[[L,O.$t("LABEL_MGMT.FORM.DELETE"),void 0,{top:!0}]])])])]))),128))])])]),default:j(()=>[b(R,{show:a.value,"onUpdate:show":N[0]||(N[0]=D=>a.value=D),"on-close":g},{default:j(()=>[b(Wg,{onClose:g})]),_:1},8,["show"]),b(R,{show:i.value,"onUpdate:show":N[1]||(N[1]=D=>i.value=D),"on-close":T},{default:j(()=>[b(dte,{"selected-response":r.value,onClose:T},null,8,["selected-response"])]),_:1},8,["show"]),b(k,{show:l.value,"onUpdate:show":N[2]||(N[2]=D=>l.value=D),"on-close":E,"on-confirm":A,title:O.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:O.$t("LABEL_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":p.value,"confirm-text":O.$t("LABEL_MGMT.DELETE.CONFIRM.YES"),"reject-text":O.$t("LABEL_MGMT.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},Tte={routes:[{path:Pt("accounts/:accountId/settings/labels"),component:da,children:[{path:"",name:"labels_wrapper",meta:{permissions:["administrator"]},redirect:e=>({name:"labels_list",params:e.params})},{path:"list",name:"labels_list",meta:{featureFlag:xt.LABELS,permissions:["administrator"]},component:Ete}]}]},yte={class:"py-4 ltr:pr-4 rtl:pl-4 truncate"},Ate={class:"py-4 ltr:pr-4 rtl:pl-4"},Ste={key:0,class:"flex items-center"},Ite={class:"mx-2"},Cte={key:1},Nte={class:"py-4 ltr:pr-4 rtl:pl-4"},Ote={key:0,class:"flex items-center"},xte={class:"mx-2"},wte={key:1},Rte={class:"py-4 ltr:pr-4 rtl:pl-4"},$te={class:"py-4 flex justify-end gap-1"},Mte={__name:"MacrosTableRow",props:{macro:{type:Object,required:!0}},emits:["delete"],setup(e){const t=e,{t:n}=He(),s=w(()=>{const i=t.macro.created_by;return i.available_name??i.email??""}),o=w(()=>{const i=t.macro.updated_by;return i.available_name??i.email??""}),a=w(()=>{const i=t.macro.visibility==="global"?"MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL":"MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL";return n(i)});return(i,l)=>{const r=F("router-link"),d=ct("tooltip");return m(),f("tr",null,[c("td",yte,v(e.macro.name),1),c("td",Ate,[e.macro.created_by?(m(),f("div",Ste,[b(Qn,{username:s.value,size:"24px"},null,8,["username"]),c("span",Ite,v(s.value),1)])):(m(),f("div",Cte,"--"))]),c("td",Nte,[e.macro.updated_by?(m(),f("div",Ote,[b(Qn,{username:o.value,size:"24px"},null,8,["username"]),c("span",xte,v(o.value),1)])):(m(),f("div",wte,"--"))]),c("td",Rte,v(a.value),1),c("td",$te,[b(r,{to:{name:"macros_edit",params:{macroId:e.macro.id}}},{default:j(()=>[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:""},null,512),[[d,i.$t("MACROS.EDIT.TOOLTIP"),void 0,{top:!0}]])]),_:1},8,["to"]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:l[0]||(l[0]=u=>i.$emit("delete"))},null,512),[[d,i.$t("MACROS.DELETE.TOOLTIP"),void 0,{top:!0}]])])])}}},kte={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},Lte={class:"divide-y divide-n-weak text-n-slate-11"},Dte={__name:"Index",setup(e){const t=vn(),n=Ot(),{t:s}=He(),o=U(!1),a=U({}),i=w(()=>t["macros/getMacros"].value),l=w(()=>t["macros/getUIFlags"].value),r=w(()=>` ${a.value.name}?`);ut(()=>{n.dispatch("macros/get")});const d=async _=>{try{await n.dispatch("macros/delete",_),Te(s("MACROS.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(s("MACROS.DELETE.API.ERROR_MESSAGE"))}},u=_=>{o.value=!0,a.value=_},p=()=>{o.value=!1},h=()=>{p(),d(a.value.id)},g=w(()=>[s("MACROS.LIST.TABLE_HEADER.NAME"),s("MACROS.LIST.TABLE_HEADER.CREATED BY"),s("MACROS.LIST.TABLE_HEADER.LAST_UPDATED_BY"),s("MACROS.LIST.TABLE_HEADER.VISIBILITY")]);return(_,T)=>{const S=F("router-link"),E=F("woot-delete-modal");return m(),P(Ha,{"no-records-message":_.$t("MACROS.LIST.404"),"no-records-found":!i.value.length,"is-loading":l.value.isFetching,"loading-message":_.$t("MACROS.LOADING"),"feature-name":"macros"},{header:j(()=>[b(Ds,{title:_.$t("MACROS.HEADER"),description:_.$t("MACROS.DESCRIPTION"),"link-text":_.$t("MACROS.LEARN_MORE"),"feature-name":"macros"},{actions:j(()=>[b(S,{to:{name:"macros_new"}},{default:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:_.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1})]),_:1},8,["title","description","link-text"])]),body:j(()=>[c("table",kte,[c("thead",null,[(m(!0),f(pe,null,ye(g.value,y=>(m(),f("th",{key:y,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},v(y),1))),128))]),c("tbody",Lte,[(m(!0),f(pe,null,ye(i.value,(y,A)=>(m(),P(Mte,{key:A,macro:y,onDelete:C=>u(y)},null,8,["macro","onDelete"]))),128))])]),b(E,{show:o.value,"onUpdate:show":T[0]||(T[0]=y=>o.value=y),"on-close":p,"on-confirm":h,title:_.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:_.$t("MACROS.DELETE.CONFIRM.MESSAGE"),"message-value":r.value,"confirm-text":_.$t("MACROS.DELETE.CONFIRM.YES"),"reject-text":_.$t("MACROS.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["no-records-message","no-records-found","is-loading","loading-message"])}}},mA=()=>{const e=vn(),t=w(()=>e["labels/getLabels"].value),n=w(()=>e["teams/getTeams"].value),s=w(()=>e["agents/getAgents"].value);return{getMacroDropdownValues:a=>{switch(a){case"assign_team":case"send_email_to_team":return n.value;case"assign_agent":return[{id:"self",name:"Self"},...s.value];case"add_label":case"remove_label":return t.value.map(i=>({id:i.title,name:i.title}));case"change_priority":return Lg;default:return[]}}}},Pte={class:"relative flex items-start w-full min-w-0 basis-full"},Bte={__name:"MacroNode",props:On({singleNode:{type:Boolean,default:!1},errorKey:{type:String,default:""},fileName:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:On(["resetAction","deleteNode"],["update:modelValue"]),setup(e){const t=e,{t:n}=He(),s=to("macroActionTypes"),{getMacroDropdownValues:o}=mA(),a=Wn(e,"modelValue"),i=w(()=>t.errorKey?n(`MACROS.ERRORS.${t.errorKey}`):""),l=w(()=>a.value.action_name==="send_email_to_team"||a.value.action_name==="send_message"?!1:!!s.value.find(u=>u.key===a.value.action_name).inputType),r=()=>o(a.value.action_name);return(d,u)=>{const p=ct("tooltip");return m(),f("div",Pte,[e.singleNode?x("",!0):(m(),P(he,{key:0,ghost:"",sm:"",slate:"",icon:"i-lucide-menu",class:"absolute cursor-move -left-10 mr-2 macros__node-drag-handle"})),c("div",{class:re(["flex-grow p-2 mr-2 rounded-md shadow-sm outline outline-1 outline-n-weak",e.errorKey?"animate-shake bg-n-ruby-8/20 outline-n-ruby-5 dark:outline-n-ruby-5":"bg-n-background dark:bg-n-solid-1"])},[b(kg,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=h=>a.value=h),"action-types":I(s),"dropdown-values":r(),"show-action-input":l.value,"show-remove-button":!1,"is-macro":"","error-message":i.value,"initial-file-name":e.fileName,onResetAction:u[1]||(u[1]=h=>d.$emit("resetAction"))},null,8,["modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name"])],2),e.singleNode?x("",!0):ie((m(),P(he,{key:1,icon:"i-lucide-trash-2",sm:"",faded:"",ruby:"",class:"flex-shrink-0",onClick:u[2]||(u[2]=h=>d.$emit("deleteNode"))},null,512)),[[p,d.$t("MACROS.EDITOR.DELETE_BTN_TOOLTIP")]])])}}},pA=[{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"remove_assigned_team",label:"REMOVE_ASSIGNED_TEAM",inputType:null},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"}],Fte=e=>pA.find(t=>t.key===e).label,Ute=(e,t)=>t.map(n=>{const s=e.find(o=>o.id===n);return s?s.name:""}).join(", "),F1=(e,t)=>t.map(n=>{const s=e.find(o=>o.title===n);return s?s.title:""}).join(", "),Gte=(e,t)=>t.map(n=>{const s=e.find(o=>o.id===n);return s?s.name:""}).join(", "),Vte=(e,t,n)=>{if(!e||!n)return"";if(t==="send_attachment"){const s=n.find(o=>o.blob_id===e);if(s)return s.filename.toString()}return""},Hte={components:{Draggable:lr,MacroNode:Bte,NextButton:he},props:{errors:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>[]},files:{type:Array,default:()=>[]}},emits:["update:modelValue","resetAction","deleteNode","addNewNode"],computed:{actionData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{fileName(){return Vte(...arguments)}}},Kte={class:"macros__nodes"},zte={class:"macro__node"},Wte={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"},jte={class:"macro__node"},Yte={class:"macro__node"},Xte={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"};function qte(e,t,n,s,o,a){const i=F("MacroNode"),l=F("Draggable"),r=F("NextButton");return m(),f("div",Kte,[c("div",zte,[c("div",null,[c("span",Wte,v(e.$t("MACROS.EDITOR.START_FLOW")),1)])]),b(l,{list:a.actionData,animation:"200","item-key":"id","ghost-class":"ghost",tag:"div",class:"macros__nodes-draggable",handle:".macros__node-drag-handle"},{item:j(({index:d})=>[(m(),f("div",{key:d,class:"macro__node"},[b(i,{modelValue:a.actionData[d],"onUpdate:modelValue":u=>a.actionData[d]=u,class:"macros__node-action",type:"add",index:d,"error-key":n.errors[`action_${d}`],"file-name":a.fileName(a.actionData[d].action_params[0],a.actionData[d].action_name,n.files),"single-node":a.actionData.length===1,onResetAction:u=>e.$emit("resetAction",d),onDeleteNode:u=>e.$emit("deleteNode",d)},null,8,["modelValue","onUpdate:modelValue","index","error-key","file-name","single-node","onResetAction","onDeleteNode"])]))]),_:1},8,["list"]),c("div",jte,[c("div",null,[b(r,{title:e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP"),class:"shadow-sm",solid:"",teal:"",icon:"i-lucide-plus-circle",onClick:t[0]||(t[0]=d=>e.$emit("addNewNode"))},{default:j(()=>[be(v(e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP")),1)]),_:1},8,["title"])])]),c("div",Yte,[c("div",null,[c("span",Xte,v(e.$t("MACROS.EDITOR.END_FLOW")),1)])])])}const Zte=Re(Hte,[["render",qte],["__scopeId","data-v-cc282c4c"]]),Qte={components:{NextButton:he},inject:["v$"],props:{macroName:{type:String,default:""},macroVisibility:{type:String,default:"global"}},emits:["update:name","update:visibility","submit"],methods:{isActive(e){return this.macroVisibility===e?"bg-woot-25 dark:bg-slate-900 border-woot-200 dark:border-woot-700":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-600"},onUpdateName(e){this.$emit("update:name",e)},onUpdateVisibility(e){this.$emit("update:visibility",e)}}},Jte={class:"p-4 bg-n-solid-2 border border-n-weak rounded-lg shadow-sm h-full flex flex-col"},ene={class:"mt-2"},tne={class:"block m-0 text-sm font-medium leading-[1.8] text-slate-700 dark:text-slate-100"},nne={class:"grid grid-cols-1 lg:grid-cols-2 gap-3"},sne={class:"block m-0 text-sm font-medium leading-[1.8] text-slate-700 dark:text-slate-100"},ane={class:"text-xs text-slate-500 dark:text-slate-200"},one={class:"block m-0 text-sm font-medium leading-[1.8] text-slate-700 dark:text-slate-100"},ine={class:"text-xs text-slate-500 dark:text-slate-200"},lne={class:"mt-2 flex items-start p-2 bg-n-slate-3 dark:bg-n-solid-3 rounded-md"},rne={class:"ml-2 rtl:ml-0 rtl:mr-2 mb-0 text-slate-600 dark:text-slate-200"},cne={class:"mt-auto w-full"};function dne(e,t,n,s,o,a){const i=F("woot-input"),l=F("fluent-icon"),r=F("NextButton");return m(),f("div",Jte,[c("div",null,[b(i,{"model-value":n.macroName,label:e.$t("MACROS.ADD.FORM.NAME.LABEL"),placeholder:e.$t("MACROS.ADD.FORM.NAME.PLACEHOLDER"),error:a.v$.macro.name.$error?e.$t("MACROS.ADD.FORM.NAME.ERROR"):null,class:re({error:a.v$.macro.name.$error}),"onUpdate:modelValue":a.onUpdateName},null,8,["model-value","label","placeholder","error","class","onUpdate:modelValue"])]),c("div",ene,[c("p",tne,v(e.$t("MACROS.EDITOR.VISIBILITY.LABEL")),1),c("div",nne,[c("button",{class:re(["p-2 relative rounded-md border border-solid text-left cursor-default",a.isActive("global")]),onClick:t[0]||(t[0]=d=>a.onUpdateVisibility("global"))},[n.macroVisibility==="global"?(m(),P(l,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-woot-500 dark:text-woot-500 top-2 right-2"})):x("",!0),c("p",sne,v(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL")),1),c("p",ane,v(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.DESCRIPTION")),1)],2),c("button",{class:re(["p-2 relative rounded-md border border-solid text-left cursor-default",a.isActive("personal")]),onClick:t[1]||(t[1]=d=>a.onUpdateVisibility("personal"))},[n.macroVisibility==="personal"?(m(),P(l,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-woot-500 dark:text-woot-500 top-2 right-2"})):x("",!0),c("p",one,v(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL")),1),c("p",ine,v(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.DESCRIPTION")),1)],2)]),c("div",lne,[b(l,{icon:"info",size:"16",class:"flex-shrink-0 mt-0.5"}),c("p",rne,v(e.$t("MACROS.ORDER_INFO")),1)])]),c("div",cne,[b(r,{blue:"",solid:"",label:e.$t("MACROS.HEADER_BTN_TXT_SAVE"),class:"w-full",onClick:t[2]||(t[2]=d=>e.$emit("submit"))},null,8,["label"])])])}const une=Re(Qte,[["render",dne],["__scopeId","data-v-d2e613f6"]]),mne={components:{MacroNodes:Zte,MacroProperties:une},props:{macroData:{type:Object,default:()=>({})}},emits:["submit"],setup(){const e=Lt();return qn("v$",e),{v$:e}},data(){return{macro:this.macroData,errors:{}}},computed:{files(){return this.macro&&this.macro.files?this.macro.files:[]}},watch:{$route:{handler(){this.resetValidation()},immediate:!0},macroData:{handler(){this.macro=this.macroData},immediate:!0}},validations:{macro:{name:{required:it},visibility:{required:it}}},methods:{removeObjectProperty(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>n!==t))},updateName(e){this.macro.name=e},updateVisibility(e){this.macro.visibility=e},appendNode(){this.macro.actions.push({action_name:"assign_team",action_params:[]})},deleteNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions.splice(e,1)},submit(){this.errors=Ly(this.macro.actions),Object.keys(this.errors).length===0&&(this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.macro))},resetNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions[e].action_params=[]},resetValidation(){var e,t;this.errors={},(t=(e=this.v$)==null?void 0:e.$reset)==null||t.call(e)}}},pne={class:"flex flex-col w-full h-auto md:flex-row md:h-full"},hne={class:"flex-1 w-full h-full max-h-full px-12 py-4 overflow-y-auto md:w-auto macro-gradient-radial dark:macro-dark-gradient-radial macro-gradient-radial-size"},fne={class:"w-full md:w-1/3 pb-4"};function gne(e,t,n,s,o,a){const i=F("MacroNodes"),l=F("MacroProperties");return m(),f("div",pne,[c("div",hne,[b(i,{modelValue:o.macro.actions,"onUpdate:modelValue":t[0]||(t[0]=r=>o.macro.actions=r),files:a.files,errors:o.errors,onAddNewNode:a.appendNode,onDeleteNode:a.deleteNode,onResetAction:a.resetNode},null,8,["modelValue","files","errors","onAddNewNode","onDeleteNode","onResetAction"])]),c("div",fne,[b(l,{"macro-name":o.macro.name,"macro-visibility":o.macro.visibility,"onUpdate:name":a.updateName,"onUpdate:visibility":a.updateVisibility,onSubmit:a.submit},null,8,["macro-name","macro-visibility","onUpdate:name","onUpdate:visibility","onSubmit"])])])}const _ne=Re(mne,[["render",gne],["__scopeId","data-v-b13e6dc3"]]),vne={class:"flex flex-col flex-1 h-full overflow-auto"},U1={__name:"MacroEditor",setup(e){const t=Ot(),n=vn(),s=xn(),o=wn(),{t:a}=He(),{getMacroDropdownValues:i}=mA(),l=U(null),r=U("CREATE"),d=w(()=>pA.map(y=>({...y,label:a(`MACROS.ACTIONS.${y.label}`)})));qn("macroActionTypes",d);const u=w(()=>n["macros/getUIFlags"].value),p=w(()=>s.params.macroId),h=()=>{t.dispatch("agents/get"),t.dispatch("teams/get"),t.dispatch("labels/get")},g=y=>{const A=y.actions.map(C=>{let O=[];if(C.action_params.length){const N=d.value.find(R=>R.key===C.action_name).inputType;N==="multi_select"||N==="search_select"?O=i(C.action_name).filter(R=>[...C.action_params].includes(R.id)):N==="team_message"?O={team_ids:i(C.action_name).filter(R=>[...C.action_params[0].team_ids].includes(R.id)),message:C.action_params[0].message}:O=[...C.action_params]}return{...C,action_params:O}});return{...y,actions:A}},_=async()=>{await t.dispatch("macros/getSingleMacro",p.value);const y=t.getters["macros/getMacro"](p.value);l.value=g(y)},T=()=>{r.value="EDIT",_()},S=()=>{r.value="CREATE",l.value={name:"",actions:[{action_name:"assign_team",action_params:[]}],visibility:"global"}};lt(()=>s,()=>{h(),s.params.macroId?T():S()},{immediate:!0,deep:!0});const E=async y=>{try{const A=r.value==="EDIT"?"macros/update":"macros/create",C=r.value==="EDIT"?a("MACROS.EDIT.API.SUCCESS_MESSAGE"):a("MACROS.ADD.API.SUCCESS_MESSAGE");let O=JSON.parse(JSON.stringify(y));O.actions=Ay(O.actions),await t.dispatch(A,O),Te(C),o.push({name:"macros_wrapper"})}catch{Te(a("MACROS.ERROR"))}};return(y,A)=>{const C=F("woot-loading-state");return m(),f("div",vne,[u.value.isFetchingItem?(m(),P(C,{key:0,message:I(a)("MACROS.EDITOR.LOADING")},null,8,["message"])):x("",!0),l.value&&!u.value.isFetchingItem?(m(),P(_ne,{key:1,"macro-data":l.value,"onUpdate:macroData":A[0]||(A[0]=O=>l.value=O),onSubmit:E},null,8,["macro-data"])):x("",!0)])}}},bne={routes:[{path:Pt("accounts/:accountId/settings/macros"),component:da,children:[{path:"",name:"macros_wrapper",component:Dte,meta:{featureFlag:xt.MACROS,permissions:[...ys,...Bs]}}]},{path:Pt("accounts/:accountId/settings/macros"),component:Pc,props:()=>({headerTitle:"MACROS.HEADER",icon:"flash-settings",showBackButton:!0}),children:[{path:":macroId/edit",name:"macros_edit",component:U1,meta:{featureFlag:xt.MACROS,permissions:[...ys,...Bs]}},{path:"new",name:"macros_new",component:U1,meta:{featureFlag:xt.MACROS,permissions:[...ys,...Bs]}}]}]},Ene={},Tne={class:"reports--wrapper overflow-auto bg-n-background w-full px-8 xl:px-0"},yne={class:"max-w-[60rem] mx-auto pb-12"};function Ane(e,t){const n=F("router-view");return m(),f("div",Tne,[c("div",yne,[b(n)])])}const Sne=Re(Ene,[["render",Ane],["__scopeId","data-v-4cb4c774"]]);function hA(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function lm(e){return hA(e)?new Date(e.getTime()):e==null?new Date(NaN):new Date(e)}function Ine(e){return hA(e)&&!isNaN(e.getTime())}function fA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(t>=0&&t<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var n=lm(e),s=n.getDay(),o=(s+7-t)%7;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function gA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,o=t.firstWeekContainsDate,a=o===void 0?1:o;if(!(a>=1&&a<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var i=lm(e),l=i.getFullYear(),r=new Date(0),d=l+1;d>=l-1&&(r.setFullYear(d,0,a),r.setHours(0,0,0,0),r=fA(r,s),!(i.getTime()>=r.getTime()));d--);return r}function jg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,o=t.firstWeekContainsDate,a=o===void 0?1:o,i=lm(e),l=fA(i,s),r=gA(i,{firstDayOfWeek:s,firstWeekContainsDate:a}),d=l.getTime()-r.getTime();return Math.round(d/(7*24*3600*1e3))+1}var Yg={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},Cne=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function Aa(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n="".concat(Math.abs(e)),s=e<0?"-":"";n.length<t;)n="0".concat(n);return s+n}function G1(e){return Math.round(e.getTimezoneOffset()/15)*15}function V1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e>0?"-":"+",s=Math.abs(e),o=Math.floor(s/60),a=s%60;return n+Aa(o,2)+t+Aa(a,2)}var H1=function(t,n,s){var o=t<12?"AM":"PM";return s?o.toLocaleLowerCase():o},tc={Y:function(t){var n=t.getFullYear();return n<=9999?"".concat(n):"+".concat(n)},YY:function(t){return Aa(t.getFullYear(),4).substr(2)},YYYY:function(t){return Aa(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return Aa(t.getMonth()+1,2)},MMM:function(t,n){return n.monthsShort[t.getMonth()]},MMMM:function(t,n){return n.months[t.getMonth()]},D:function(t){return t.getDate()},DD:function(t){return Aa(t.getDate(),2)},H:function(t){return t.getHours()},HH:function(t){return Aa(t.getHours(),2)},h:function(t){var n=t.getHours();return n===0?12:n>12?n%12:n},hh:function(){var t=tc.h.apply(tc,arguments);return Aa(t,2)},m:function(t){return t.getMinutes()},mm:function(t){return Aa(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return Aa(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Aa(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return Aa(t.getMilliseconds(),3)},d:function(t){return t.getDay()},dd:function(t,n){return n.weekdaysMin[t.getDay()]},ddd:function(t,n){return n.weekdaysShort[t.getDay()]},dddd:function(t,n){return n.weekdays[t.getDay()]},A:function(t,n){var s=n.meridiem||H1;return s(t.getHours(),t.getMinutes(),!1)},a:function(t,n){var s=n.meridiem||H1;return s(t.getHours(),t.getMinutes(),!0)},Z:function(t){return V1(G1(t),":")},ZZ:function(t){return V1(G1(t))},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()},w:function(t,n){return jg(t,{firstDayOfWeek:n.firstDayOfWeek,firstWeekContainsDate:n.firstWeekContainsDate})},ww:function(t,n){return Aa(tc.w(t,n),2)}};function Xg(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",o=lm(e);if(!Ine(o))return"Invalid Date";var a=n.locale||Yg;return s.replace(Cne,function(i,l){return l||(typeof tc[i]=="function"?"".concat(tc[i](o,a)):i)})}function K1(e){return xne(e)||One(e)||Nne()}function Nne(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function One(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function xne(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function z1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function wne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z1(n,!0).forEach(function(s){wi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z1(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Rne(e,t){return kne(e)||Mne(e,t)||$ne()}function $ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Mne(e,t){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var n=[],s=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),l;!(s=(l=i.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(r){o=!0,a=r}finally{try{!s&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function kne(e){if(Array.isArray(e))return e}function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lne=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,_A=/\d/,Ri=/\d\d/,Dne=/\d{3}/,Pne=/\d{4}/,rr=/\d\d?/,Bne=/[+-]\d\d:?\d\d/,vA=/[+-]?\d+/,Fne=/[+-]?\d+(\.\d{1,3})?/,qg="year",rm="month",bA="day",EA="hour",TA="minute",yA="second",Zg="millisecond",AA={},Dn=function(t,n,s){var o=Array.isArray(t)?t:[t],a;typeof s=="string"?a=function(l){var r=parseInt(l,10);return wi({},s,r)}:a=s,o.forEach(function(i){AA[i]=[n,a]})},Une=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Uc=function(t){return function(n){var s=n[t];if(!Array.isArray(s))throw new Error("Locale[".concat(t,"] need an array"));return new RegExp(s.map(Une).join("|"))}},Gc=function(t,n){return function(s,o){var a=o[t];if(!Array.isArray(a))throw new Error("Locale[".concat(t,"] need an array"));var i=a.indexOf(s);if(i<0)throw new Error("Invalid Word");return wi({},n,i)}};Dn("Y",vA,qg);Dn("YY",Ri,function(e){var t=new Date().getFullYear(),n=Math.floor(t/100),s=parseInt(e,10);return s=(s>68?n-1:n)*100+s,wi({},qg,s)});Dn("YYYY",Pne,qg);Dn("M",rr,function(e){return wi({},rm,parseInt(e,10)-1)});Dn("MM",Ri,function(e){return wi({},rm,parseInt(e,10)-1)});Dn("MMM",Uc("monthsShort"),Gc("monthsShort",rm));Dn("MMMM",Uc("months"),Gc("months",rm));Dn("D",rr,bA);Dn("DD",Ri,bA);Dn(["H","h"],rr,EA);Dn(["HH","hh"],Ri,EA);Dn("m",rr,TA);Dn("mm",Ri,TA);Dn("s",rr,yA);Dn("ss",Ri,yA);Dn("S",_A,function(e){return wi({},Zg,parseInt(e,10)*100)});Dn("SS",Ri,function(e){return wi({},Zg,parseInt(e,10)*10)});Dn("SSS",Dne,Zg);function Gne(e){return e.meridiemParse||/[ap]\.?m?\.?/i}function Vne(e){return"".concat(e).toLowerCase().charAt(0)==="p"}Dn(["A","a"],Gne,function(e,t){var n=typeof t.isPM=="function"?t.isPM(e):Vne(e);return{isPM:n}});function Hne(e){var t=e.match(/([+-]|\d\d)/g)||["-","0","0"],n=Rne(t,3),s=n[0],o=n[1],a=n[2],i=parseInt(o,10)*60+parseInt(a,10);return i===0?0:s==="+"?-i:+i}Dn(["Z","ZZ"],Bne,function(e){return{offset:Hne(e)}});Dn("x",vA,function(e){return{date:new Date(parseInt(e,10))}});Dn("X",Fne,function(e){return{date:new Date(parseFloat(e)*1e3)}});Dn("d",_A,"weekday");Dn("dd",Uc("weekdaysMin"),Gc("weekdaysMin","weekday"));Dn("ddd",Uc("weekdaysShort"),Gc("weekdaysShort","weekday"));Dn("dddd",Uc("weekdays"),Gc("weekdays","weekday"));Dn("w",rr,"week");Dn("ww",Ri,"week");function Kne(e,t){if(e!==void 0&&t!==void 0){if(t){if(e<12)return e+12}else if(e===12)return 0}return e}function zne(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=[0,0,1,0,0,0,0],s=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],o=!0,a=0;a<7;a++)e[a]===void 0?n[a]=o?s[a]:n[a]:(n[a]=e[a],o=!1);return n}function Wne(e,t,n,s,o,a,i){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,s,o,a,i),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,s,o,a,i),l}function jne(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var o=n[0];return o<100&&o>=0?(n[0]+=400,e=new Date(Date.UTC.apply(Date,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(o)):e=new Date(Date.UTC.apply(Date,n)),e}function Yne(e,t,n){var s=t.match(Lne);if(!s)throw new Error;for(var o=s.length,a={},i=0;i<o;i+=1){var l=s[i],r=AA[l];if(r){var u=typeof r[0]=="function"?r[0](n):r[0],p=r[1],h=(u.exec(e)||[])[0],g=p(h,n);a=wne({},a,{},g),e=e.replace(h,"")}else{var d=l.replace(/^\[|\]$/g,"");if(e.indexOf(d)===0)e=e.substr(d.length);else throw new Error("not match")}}return a}function Xne(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var s=n.locale,o=s===void 0?Yg:s,a=n.backupDate,i=a===void 0?new Date:a,l=Yne(e,t,o),r=l.year,d=l.month,u=l.day,p=l.hour,h=l.minute,g=l.second,_=l.millisecond,T=l.isPM,S=l.date,E=l.offset,y=l.weekday,A=l.week;if(S)return S;var C=[r,d,u,p,h,g,_];if(C[3]=Kne(C[3],T),A!==void 0&&d===void 0&&u===void 0){var O=gA(r===void 0?i:new Date(r,3),{firstDayOfWeek:o.firstDayOfWeek,firstWeekContainsDate:o.firstWeekContainsDate});return new Date(O.getTime()+(A-1)*7*24*3600*1e3)}var N,R=zne(C,i);return E!==void 0?(R[6]+=E*60*1e3,N=jne.apply(void 0,K1(R))):N=Wne.apply(void 0,K1(R)),y!==void 0&&N.getDay()!==y?new Date(NaN):N}catch{return new Date(NaN)}}var qne=Object.defineProperty,Zne=Object.defineProperties,Qne=Object.getOwnPropertyDescriptors,wu=Object.getOwnPropertySymbols,SA=Object.prototype.hasOwnProperty,IA=Object.prototype.propertyIsEnumerable,W1=(e,t,n)=>t in e?qne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rs=(e,t)=>{for(var n in t||(t={}))SA.call(t,n)&&W1(e,n,t[n]);if(wu)for(var n of wu(t))IA.call(t,n)&&W1(e,n,t[n]);return e},Va=(e,t)=>Zne(e,Qne(t)),Jne=(e,t)=>{var n={};for(var s in e)SA.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&wu)for(var s of wu(e))t.indexOf(s)<0&&IA.call(e,s)&&(n[s]=e[s]);return n};const ese={formatLocale:Yg,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let Vr="en";const Pl={};Pl[Vr]=ese;function CA(e,t,n=!1){if(typeof e!="string")return Pl[Vr];let s=Vr;return Pl[e]&&(s=e),t&&(Pl[e]=t,s=e),n||(Vr=s),Pl[e]||Pl[Vr]}function _f(e){return CA(e,void 0,!0)}function Qg(e,t){if(!Array.isArray(e))return[];const n=[],s=e.length;let o=0;for(t=t||s;o<s;)n.push(e.slice(o,o+=t));return n}function j1(e){return Array.isArray(e)?e[e.length-1]:void 0}function gi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Uo(e,t){const n={};return gi(e)&&(Array.isArray(t)||(t=[t]),t.forEach(s=>{Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])})),n}function NA(e,t){if(!gi(e))return{};let n=e;return gi(t)&&Object.keys(t).forEach(s=>{let o=t[s];const a=e[s];gi(o)&&gi(a)&&(o=NA(a,o)),n=Va(Rs({},n),{[s]:o})}),n}function nh(e){const t=parseInt(String(e),10);return t<10?`0${t}`:`${t}`}function tse(e){const t=/-(\w)/g;return e.replace(t,(n,s)=>s?s.toUpperCase():"")}const OA="datepicker_locale",xA="datepicker_prefixClass",wA="datepicker_getWeek";function Jg(){return to(OA,Lu(_f()))}function nse(e){const t=w(()=>gi(e.value)?NA(_f(),e.value):_f(e.value));return qn(OA,t),t}function sse(e){qn(xA,e)}function ua(){return to(xA,"mx")}function ase(e){qn(wA,e)}function ose(){return to(wA,jg)}function ise(e){const t=e.style.display,n=e.style.visibility;e.style.display="block",e.style.visibility="hidden";const s=window.getComputedStyle(e),o=e.offsetWidth+parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),a=e.offsetHeight+parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);return e.style.display=t,e.style.visibility=n,{width:o,height:a}}function lse(e,t,n,s){let o=0,a=0,i=0,l=0;const r=e.getBoundingClientRect(),d=document.documentElement.clientWidth,u=document.documentElement.clientHeight;return s&&(i=window.pageXOffset+r.left,l=window.pageYOffset+r.top),d-r.left<t&&r.right<t?o=i-r.left+1:r.left+r.width/2<=d/2?o=i:o=i+r.width-t,r.top<=n&&u-r.bottom<=n?a=l+u-r.top-n:r.top+r.height/2<=u/2?a=l+r.height:a=l-n,{left:`${o}px`,top:`${a}px`}}function e_(e,t=document.body){if(!e||e===t)return null;const n=(a,i)=>getComputedStyle(a,null).getPropertyValue(i);return/(auto|scroll)/.test(n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x"))?e:e_(e.parentElement,t)}let fd;function rse(){if(typeof window>"u")return 0;if(fd!==void 0)return fd;const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=document.createElement("div");return t.style.width="100%",e.appendChild(t),fd=e.offsetWidth-t.offsetWidth,e.parentNode.removeChild(e),fd}const Y1="ontouchend"in document?"touchstart":"mousedown";function cse(e){let t=!1;return function(...s){t||(t=!0,requestAnimationFrame(()=>{t=!1,e.apply(this,s)}))}}function Qo(e,t){return{setup:e,name:e.name,props:t}}function Jo(e,t){return new Proxy(e,{get(s,o){const a=s[o];return a!==void 0?a:t[o]}})}const $i=()=>e=>e,dse=(e,t)=>{const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const o=tse(s);let a=e[s];t.indexOf(o)!==-1&&a===""&&(a=!0),n[o]=a}return n};function use(e,{slots:t}){const n=Jo(e,{appendToBody:!0}),s=ua(),o=U(null),a=U({left:"",top:""}),i=()=>{if(!n.visible||!o.value)return;const r=n.getRelativeElement();if(!r)return;const{width:d,height:u}=ise(o.value);a.value=lse(r,d,u,n.appendToBody)};ea(i,{flush:"post"}),ea(r=>{const d=n.getRelativeElement();if(!d)return;const u=e_(d)||window,p=cse(i);u.addEventListener("scroll",p),window.addEventListener("resize",p),r(()=>{u.removeEventListener("scroll",p),window.removeEventListener("resize",p)})},{flush:"post"});const l=r=>{if(!n.visible)return;const d=r.target,u=o.value,p=n.getRelativeElement();u&&!u.contains(d)&&p&&!p.contains(d)&&n.onClickOutside(r)};return ea(r=>{document.addEventListener(Y1,l),r(()=>{document.removeEventListener(Y1,l)})}),()=>b(Si,{to:"body",disabled:!n.appendToBody},{default:()=>[b(Ms,{name:`${s}-zoom-in-down`},{default:()=>{var r;return[n.visible&&b("div",{ref:o,class:`${s}-datepicker-main ${s}-datepicker-popup ${n.className}`,style:[Rs({position:"absolute"},a.value),n.style||{}]},[(r=t.default)==null?void 0:r.call(t)])]}})]})}const mse=$i()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var pse=Qo(use,mse);const hse={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},fse=c("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),gse=[fse];function RA(e,t){return m(),f("svg",hse,gse)}const _se={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},vse=c("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),bse=[vse];function Ese(e,t){return m(),f("svg",_se,bse)}const Tse={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},yse=c("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ase=c("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),Sse=c("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),Ise=[yse,Ase,Sse];function Cse(e,t){return m(),f("svg",Tse,Ise)}function Ji(e,t=0,n=1,s=0,o=0,a=0,i=0){const l=new Date(e,t,n,s,o,a,i);return e<100&&e>=0&&l.setFullYear(e),l}function Wo(e){return e instanceof Date&&!isNaN(e.getTime())}function el(e){return Array.isArray(e)&&e.length===2&&e.every(Wo)&&e[0]<=e[1]}function Nse(e){return Array.isArray(e)&&e.every(Wo)}function cm(...e){if(e[0]!==void 0&&e[0]!==null){const n=new Date(e[0]);if(Wo(n))return n}const t=e.slice(1);return t.length?cm(...t):new Date}function Ose(e){const t=new Date(e);return t.setMonth(0,1),t.setHours(0,0,0,0),t}function X1(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ci(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function xse({firstDayOfWeek:e,year:t,month:n}){const s=[],o=Ji(t,n,0),a=o.getDate(),i=a-(o.getDay()+7-e)%7;for(let u=i;u<=a;u++)s.push(Ji(t,n,u-a));o.setMonth(n+1,0);const l=o.getDate();for(let u=1;u<=l;u++)s.push(Ji(t,n,u));const r=a-i+1,d=6*7-r-l;for(let u=1;u<=d;u++)s.push(Ji(t,n,l+u));return s}function Ru(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getMonth()):Number(t),o=n.getFullYear(),a=Ji(o,s+1,0).getDate(),i=n.getDate();return n.setMonth(s,Math.min(i,a)),n}function Vl(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getFullYear()):t;return n.setFullYear(s),n}function wse(e,t){const n=new Date(t),s=new Date(e),o=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return o*12+a}function $u(e,t){const n=new Date(e),s=new Date(t);return n.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),n}function Rse(e,{slots:t}){const n=Jo(e,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),s=ua(),o=U(null),a=w(()=>n.separator||(n.range?" ~ ":",")),i=g=>n.range?el(g):n.multiple?Nse(g):Wo(g),l=g=>Array.isArray(g)?g.some(_=>n.disabledDate(_)):n.disabledDate(g),r=w(()=>o.value!==null?o.value:typeof n.renderInputText=="function"?n.renderInputText(n.value):i(n.value)?Array.isArray(n.value)?n.value.map(g=>n.formatDate(g)).join(a.value):n.formatDate(n.value):""),d=g=>{var _;g&&g.stopPropagation(),n.onChange(n.range?[null,null]:null),(_=n.onClear)==null||_.call(n)},u=()=>{var g;if(!n.editable||o.value===null)return;const _=o.value.trim();if(o.value=null,_===""){d();return}let T;if(n.range){let S=_.split(a.value);S.length!==2&&(S=_.split(a.value.trim())),T=S.map(E=>n.parseDate(E.trim()))}else n.multiple?T=_.split(a.value).map(S=>n.parseDate(S.trim())):T=n.parseDate(_);i(T)&&!l(T)?n.onChange(T):(g=n.onInputError)==null||g.call(n,_)},p=g=>{o.value=typeof g=="string"?g:g.target.value},h=g=>{const{keyCode:_}=g;_===9?n.onBlur():_===13&&u()};return()=>{var g,_,T;const S=!n.disabled&&n.clearable&&r.value,E=Va(Rs({name:"date",type:"text",autocomplete:"off",value:r.value,class:n.inputClass||`${s}-input`,readonly:!n.editable,disabled:n.disabled,placeholder:n.placeholder},n.inputAttr),{onFocus:n.onFocus,onKeydown:h,onInput:p,onChange:u});return b("div",{class:`${s}-input-wrapper`,onClick:n.onClick},[((g=t.input)==null?void 0:g.call(t,E))||b("input",E,null),S?b("i",{class:`${s}-icon-clear`,onClick:d},[((_=t["icon-clear"])==null?void 0:_.call(t))||b(Ese,null,null)]):null,b("i",{class:`${s}-icon-calendar`},[((T=t["icon-calendar"])==null?void 0:T.call(t))||b(RA,null,null)])])}}const t_=$i()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),$se=$i()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...t_]);var Mse=Qo(Rse,$se);function kse(e,{slots:t}){var n;const s=Jo(e,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});sse(s.prefixClass),ase(((n=s.formatter)==null?void 0:n.getWeek)||jg);const o=nse(Jd(e,"lang")),a=U(),i=()=>a.value,l=U(!1),r=w(()=>!s.disabled&&(typeof s.open=="boolean"?s.open:l.value)),d=()=>{var N,R;s.disabled||r.value||(l.value=!0,(N=s["onUpdate:open"])==null||N.call(s,!0),(R=s.onOpen)==null||R.call(s))},u=()=>{var N,R;r.value&&(l.value=!1,(N=s["onUpdate:open"])==null||N.call(s,!1),(R=s.onClose)==null||R.call(s))},p=(N,R)=>(R=R||s.format,gi(s.formatter)&&typeof s.formatter.stringify=="function"?s.formatter.stringify(N,R):Xg(N,R,{locale:o.value.formatLocale})),h=(N,R)=>{if(R=R||s.format,gi(s.formatter)&&typeof s.formatter.parse=="function")return s.formatter.parse(N,R);const k=new Date;return Xne(N,R,{locale:o.value.formatLocale,backupDate:k})},g=N=>{switch(s.valueType){case"date":return N instanceof Date?new Date(N.getTime()):new Date(NaN);case"timestamp":return typeof N=="number"?new Date(N):new Date(NaN);case"format":return typeof N=="string"?h(N):new Date(NaN);default:return typeof N=="string"?h(N,s.valueType):new Date(NaN)}},_=N=>{if(!Wo(N))return null;switch(s.valueType){case"date":return N;case"timestamp":return N.getTime();case"format":return p(N);default:return p(N,s.valueType)}},T=w(()=>{const N=s.value;return s.range?(Array.isArray(N)?N.slice(0,2):[null,null]).map(g):s.multiple?(Array.isArray(N)?N:[]).map(g):g(N)}),S=(N,R,k=!0)=>{var L,D;const $=Array.isArray(N)?N.map(_):_(N);return(L=s["onUpdate:value"])==null||L.call(s,$),(D=s.onChange)==null||D.call(s,$,R),k&&u(),$},E=U(new Date);ea(()=>{r.value&&(E.value=T.value)});const y=(N,R)=>{s.confirm?E.value=N:S(N,R,!s.multiple&&(R===s.type||R==="time"))},A=()=>{var N;const R=S(E.value);(N=s.onConfirm)==null||N.call(s,R)},C=N=>s.disabledDate(N)||s.disabledTime(N),O=N=>{var R;const{prefixClass:k}=s;return b("div",{class:`${k}-datepicker-sidebar`},[(R=t.sidebar)==null?void 0:R.call(t,N),(s.shortcuts||[]).map((L,D)=>b("button",{key:D,"data-index":D,type:"button",class:`${k}-btn ${k}-btn-text ${k}-btn-shortcut`,onClick:()=>{var $;const M=($=L.onClick)==null?void 0:$.call(L);M&&S(M)}},[L.text]))])};return()=>{var N,R;const{prefixClass:k,disabled:L,confirm:D,range:$,popupClass:M,popupStyle:K,appendToBody:B}=s,H={value:E.value,"onUpdate:value":y,emit:S},G=t.header&&b("div",{class:`${k}-datepicker-header`},[t.header(H)]),V=(t.footer||D)&&b("div",{class:`${k}-datepicker-footer`},[(N=t.footer)==null?void 0:N.call(t,H),D&&b("button",{type:"button",class:`${k}-btn ${k}-datepicker-btn-confirm`,onClick:A},[s.confirmText])]),Y=(R=t.content)==null?void 0:R.call(t,H),ee=(t.sidebar||s.shortcuts)&&O(H);return b("div",{ref:a,class:{[`${k}-datepicker`]:!0,[`${k}-datepicker-range`]:$,disabled:L}},[b(Mse,Va(Rs({},Uo(s,t_)),{value:T.value,formatDate:p,parseDate:h,disabledDate:C,onChange:S,onClick:d,onFocus:d,onBlur:u}),Uo(t,["icon-calendar","icon-clear","input"])),b(pse,{className:M,style:K,visible:r.value,appendToBody:B,getRelativeElement:i,onClickOutside:u},{default:()=>[ee,b("div",{class:`${k}-datepicker-content`},[G,Y,V])]})])}}const Lse=$i()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),Dse=[...Lse,...t_];var q1=Qo(kse,Dse);function gd(e){var t=e,{value:n}=t,s=Jne(t,["value"]);const o=ua();return b("button",Va(Rs({},s),{type:"button",class:`${o}-btn ${o}-btn-text ${o}-btn-icon-${n}`}),[b("i",{class:`${o}-icon-${n}`},null)])}function n_({type:e,calendar:t,onUpdateCalendar:n},{slots:s}){var o;const a=ua(),i=()=>{n(Ru(t,h=>h-1))},l=()=>{n(Ru(t,h=>h+1))},r=()=>{n(Vl(t,h=>h-1))},d=()=>{n(Vl(t,h=>h+1))},u=()=>{n(Vl(t,h=>h-10))},p=()=>{n(Vl(t,h=>h+10))};return b("div",{class:`${a}-calendar-header`},[b(gd,{value:"double-left",onClick:e==="year"?u:r},null),e==="date"&&b(gd,{value:"left",onClick:i},null),b(gd,{value:"double-right",onClick:e==="year"?p:d},null),e==="date"&&b(gd,{value:"right",onClick:l},null),b("span",{class:`${a}-calendar-header-label`},[(o=s.default)==null?void 0:o.call(s)])])}function Pse({calendar:e,isWeekMode:t,showWeekNumber:n,titleFormat:s,getWeekActive:o,getCellClasses:a,onSelect:i,onUpdatePanel:l,onUpdateCalendar:r,onDateMouseEnter:d,onDateMouseLeave:u}){const p=ua(),h=ose(),g=Jg().value,{yearFormat:_,monthBeforeYear:T,monthFormat:S="MMM",formatLocale:E}=g,y=E.firstDayOfWeek||0;let A=g.days||E.weekdaysMin;A=A.concat(A).slice(y,y+7);const C=e.getFullYear(),O=e.getMonth(),N=Qg(xse({firstDayOfWeek:y,year:C,month:O}),7),R=(H,G)=>Xg(H,G,{locale:g.formatLocale}),k=H=>{l(H)},L=H=>{const G=H.getAttribute("data-index"),[V,Y]=G.split(",").map(X=>parseInt(X,10)),ee=N[V][Y];return new Date(ee)},D=H=>{i(L(H.currentTarget))},$=H=>{d&&d(L(H.currentTarget))},M=H=>{u&&u(L(H.currentTarget))},K=b("button",{type:"button",class:`${p}-btn ${p}-btn-text ${p}-btn-current-year`,onClick:()=>k("year")},[R(e,_)]),B=b("button",{type:"button",class:`${p}-btn ${p}-btn-text ${p}-btn-current-month`,onClick:()=>k("month")},[R(e,S)]);return n=typeof n=="boolean"?n:t,b("div",{class:[`${p}-calendar ${p}-calendar-panel-date`,{[`${p}-calendar-week-mode`]:t}]},[b(n_,{type:"date",calendar:e,onUpdateCalendar:r},{default:()=>[T?[B,K]:[K,B]]}),b("div",{class:`${p}-calendar-content`},[b("table",{class:`${p}-table ${p}-table-date`},[b("thead",null,[b("tr",null,[n&&b("th",{class:`${p}-week-number-header`},null),A.map(H=>b("th",{key:H},[H]))])]),b("tbody",null,[N.map((H,G)=>b("tr",{key:G,class:[`${p}-date-row`,{[`${p}-active-week`]:o(H)}]},[n&&b("td",{class:`${p}-week-number`,"data-index":`${G},0`,onClick:D},[b("div",null,[h(H[0])])]),H.map((V,Y)=>b("td",{key:Y,class:["cell",a(V)],title:R(V,s),"data-index":`${G},${Y}`,onClick:D,onMouseenter:$,onMouseleave:M},[b("div",null,[V.getDate()])]))]))])])])])}function Bse({calendar:e,getCellClasses:t,onSelect:n,onUpdateCalendar:s,onUpdatePanel:o}){const a=ua(),i=Jg().value,l=i.months||i.formatLocale.monthsShort,r=u=>Ji(e.getFullYear(),u),d=u=>{const h=u.currentTarget.getAttribute("data-month");n(r(parseInt(h,10)))};return b("div",{class:`${a}-calendar ${a}-calendar-panel-month`},[b(n_,{type:"month",calendar:e,onUpdateCalendar:s},{default:()=>[b("button",{type:"button",class:`${a}-btn ${a}-btn-text ${a}-btn-current-year`,onClick:()=>o("year")},[e.getFullYear()])]}),b("div",{class:`${a}-calendar-content`},[b("table",{class:`${a}-table ${a}-table-month`},[Qg(l,3).map((u,p)=>b("tr",{key:p},[u.map((h,g)=>{const _=p*3+g;return b("td",{key:g,class:["cell",t(r(_))],"data-month":_,onClick:d},[b("div",null,[h])])})]))])])])}const Fse=e=>{const t=Math.floor(e.getFullYear()/10)*10,n=[];for(let s=0;s<10;s++)n.push(t+s);return Qg(n,2)};function Use({calendar:e,getCellClasses:t=()=>[],getYearPanel:n=Fse,onSelect:s,onUpdateCalendar:o}){const a=ua(),i=p=>Ji(p,0),l=p=>{const g=p.currentTarget.getAttribute("data-year");s(i(parseInt(g,10)))},r=n(new Date(e)),d=r[0][0],u=j1(j1(r));return b("div",{class:`${a}-calendar ${a}-calendar-panel-year`},[b(n_,{type:"year",calendar:e,onUpdateCalendar:o},{default:()=>[b("span",null,[d]),b("span",{class:`${a}-calendar-decade-separator`},null),b("span",null,[u])]}),b("div",{class:`${a}-calendar-content`},[b("table",{class:`${a}-table ${a}-table-year`},[r.map((p,h)=>b("tr",{key:h},[p.map((g,_)=>b("td",{key:_,class:["cell",t(i(g))],"data-year":g,onClick:l},[b("div",null,[g])]))]))])])])}function Gse(e){const t=Jo(e,{defaultValue:Ci(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),n=w(()=>(Array.isArray(t.value)?t.value:[t.value]).filter(Wo).map(y=>t.type==="year"?Ose(y):t.type==="month"?X1(y):Ci(y))),s=U(new Date);ea(()=>{let E=t.calendar;if(!Wo(E)){const{length:y}=n.value;E=cm(y>0?n.value[y-1]:t.defaultValue)}s.value=X1(E)});const o=E=>{var y;s.value=E,(y=t.onCalendarChange)==null||y.call(t,E)},a=U("date");ea(()=>{const E=["date","month","year"],y=Math.max(E.indexOf(t.type),E.indexOf(t.defaultPanel));a.value=y!==-1?E[y]:"date"});const i=E=>{var y;const A=a.value;a.value=E,(y=t.onPanelChange)==null||y.call(t,E,A)},l=E=>t.disabledDate(new Date(E),n.value),r=(E,y)=>{var A,C,O;if(!l(E))if((A=t.onPick)==null||A.call(t,E),t.multiple===!0){const N=n.value.filter(R=>R.getTime()!==E.getTime());N.length===n.value.length&&N.push(E),(C=t["onUpdate:value"])==null||C.call(t,N,y)}else(O=t["onUpdate:value"])==null||O.call(t,E,y)},d=E=>{r(E,t.type==="week"?"week":"date")},u=E=>{if(t.type==="year")r(E,"year");else if(o(E),i("month"),t.partialUpdate&&n.value.length===1){const y=Vl(n.value[0],E.getFullYear());r(y,"year")}},p=E=>{if(t.type==="month")r(E,"month");else if(o(E),i("date"),t.partialUpdate&&n.value.length===1){const y=Ru(Vl(n.value[0],E.getFullYear()),E.getMonth());r(y,"month")}},h=(E,y=[])=>(l(E)?y.push("disabled"):n.value.some(A=>A.getTime()===E.getTime())&&y.push("active"),y.concat(t.getClasses(E,n.value,y.join(" ")))),g=E=>{const y=E.getMonth()!==s.value.getMonth(),A=[];return E.getTime()===new Date().setHours(0,0,0,0)&&A.push("today"),y&&A.push("not-current-month"),h(E,A)},_=E=>t.type!=="month"?s.value.getMonth()===E.getMonth()?"active":"":h(E),T=E=>t.type!=="year"?s.value.getFullYear()===E.getFullYear()?"active":"":h(E),S=E=>{if(t.type!=="week")return!1;const y=E[0].getTime(),A=E[6].getTime();return n.value.some(C=>{const O=C.getTime();return O>=y&&O<=A})};return()=>a.value==="year"?b(Use,{calendar:s.value,getCellClasses:T,getYearPanel:t.getYearPanel,onSelect:u,onUpdateCalendar:o},null):a.value==="month"?b(Bse,{calendar:s.value,getCellClasses:_,onSelect:p,onUpdatePanel:i,onUpdateCalendar:o},null):b(Pse,{isWeekMode:t.type==="week",showWeekNumber:t.showWeekNumber,titleFormat:t.titleFormat,calendar:s.value,getCellClasses:g,getWeekActive:S,onSelect:d,onUpdatePanel:i,onUpdateCalendar:o,onDateMouseEnter:t.onDateMouseEnter,onDateMouseLeave:t.onDateMouseLeave},null)}const dm=$i()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var um=Qo(Gse,dm);const Z1=(e,t)=>{const n=e.getTime();let[s,o]=t.map(a=>a.getTime());return s>o&&([s,o]=[o,s]),n>s&&n<o};function Vse(e){const t=Jo(e,{defaultValue:new Date,type:"date"}),n=ua(),s=w(()=>{let S=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return S=S.map(E=>Ci(E)),el(S)?S:[new Date,new Date].map(E=>Ci(E))}),o=U([new Date(NaN),new Date(NaN)]);ea(()=>{el(t.value)&&(o.value=t.value)});const a=(S,E)=>{var y;const[A,C]=o.value;Wo(A)&&!Wo(C)?(A.getTime()>S.getTime()?o.value=[S,A]:o.value=[A,S],(y=t["onUpdate:value"])==null||y.call(t,o.value,E)):o.value=[S,new Date(NaN)]},i=U([new Date,new Date]),l=w(()=>el(t.calendar)?t.calendar:i.value),r=w(()=>t.type==="year"?10*12:t.type==="month"?1*12:1),d=(S,E)=>{var y;const A=wse(S[0],S[1]),C=r.value-A;if(C>0){const O=E===1?0:1;S[O]=Ru(S[O],N=>N+(O===0?-C:C))}i.value=S,(y=t.onCalendarChange)==null||y.call(t,S,E)},u=S=>{d([S,l.value[1]],0)},p=S=>{d([l.value[0],S],1)};ea(()=>{const S=el(t.value)?t.value:s.value;d(S.slice(0,2))});const h=U(null),g=S=>h.value=S,_=()=>h.value=null,T=(S,E,y)=>{const A=t.getClasses?t.getClasses(S,E,y):[],C=Array.isArray(A)?A:[A];return/disabled|active/.test(y)?C:(E.length===2&&Z1(S,E)&&C.push("in-range"),E.length===1&&h.value&&Z1(S,[E[0],h.value])?C.concat("hover-in-range"):C)};return()=>{const S=l.value.map((E,y)=>{const A=Va(Rs({},t),{calendar:E,value:o.value,defaultValue:s.value[y],getClasses:T,partialUpdate:!1,multiple:!1,"onUpdate:value":a,onCalendarChange:y===0?u:p,onDateMouseLeave:_,onDateMouseEnter:g});return b(um,A,null)});return b("div",{class:`${n}-calendar-range`},[S])}}const s_=dm;var a_=Qo(Vse,s_);const $A=No({setup(e,{slots:t}){const n=ua(),s=U(),o=U(""),a=U("");ut(()=>{if(!s.value)return;const _=s.value,T=_.clientHeight*100/_.scrollHeight;o.value=T<100?`${T}%`:""});const l=rse(),r=_=>{const T=_.currentTarget,{scrollHeight:S,scrollTop:E}=T;a.value=`${E*100/S}%`};let d=!1,u=0;const p=_=>{_.stopImmediatePropagation();const T=_.currentTarget,{offsetTop:S}=T;d=!0,u=_.clientY-S},h=_=>{if(!d||!s.value)return;const{clientY:T}=_,{scrollHeight:S,clientHeight:E}=s.value,A=(T-u)*S/E;s.value.scrollTop=A},g=()=>{d=!1};return ut(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)}),ia(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)}),()=>{var _;return b("div",{class:`${n}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[b("div",{ref:s,class:`${n}-scrollbar-wrap`,style:{marginRight:`-${l}px`},onScroll:r},[(_=t.default)==null?void 0:_.call(t)]),b("div",{class:`${n}-scrollbar-track`},[b("div",{class:`${n}-scrollbar-thumb`,style:{height:o.value,top:a.value},onMousedown:p},null)])])}}});function Hse({options:e,getClasses:t,onSelect:n}){const s=ua(),o=a=>{const i=a.target,l=a.currentTarget;if(i.tagName.toUpperCase()!=="LI")return;const r=l.getAttribute("data-type"),d=parseInt(l.getAttribute("data-index"),10),u=parseInt(i.getAttribute("data-index"),10),p=e[d].list[u].value;n(p,r)};return b("div",{class:`${s}-time-columns`},[e.map((a,i)=>b($A,{key:a.type,class:`${s}-time-column`},{default:()=>[b("ul",{class:`${s}-time-list`,"data-index":i,"data-type":a.type,onClick:o},[a.list.map((l,r)=>b("li",{key:l.text,"data-index":r,class:[`${s}-time-item`,t(l.value,a.type)]},[l.text]))])]}))])}function Kse(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xE(e)}function zse(e){let t;const n=ua();return b($A,null,Kse(t=e.options.map(s=>b("div",{key:s.text,class:[`${n}-time-option`,e.getClasses(s.value,"time")],onClick:()=>e.onSelect(s.value,"time")},[s.text])))?t:{default:()=>[t]})}function sh({length:e,step:t=1,options:n}){if(Array.isArray(n))return n.filter(o=>o>=0&&o<e);t<=0&&(t=1);const s=[];for(let o=0;o<e;o+=t)s.push(o);return s}function Wse(e,t){let{showHour:n,showMinute:s,showSecond:o,use12h:a}=t;const i=t.format||"HH:mm:ss";n=typeof n=="boolean"?n:/[HhKk]/.test(i),s=typeof s=="boolean"?s:/m/.test(i),o=typeof o=="boolean"?o:/s/.test(i),a=typeof a=="boolean"?a:/a/i.test(i);const l=[],r=a&&e.getHours()>=12;return n&&l.push({type:"hour",list:sh({length:a?12:24,step:t.hourStep,options:t.hourOptions}).map(d=>{const u=d===0&&a?"12":nh(d),p=new Date(e);return p.setHours(r?d+12:d),{value:p,text:u}})}),s&&l.push({type:"minute",list:sh({length:60,step:t.minuteStep,options:t.minuteOptions}).map(d=>{const u=new Date(e);return u.setMinutes(d),{value:u,text:nh(d)}})}),o&&l.push({type:"second",list:sh({length:60,step:t.secondStep,options:t.secondOptions}).map(d=>{const u=new Date(e);return u.setSeconds(d),{value:u,text:nh(d)}})}),a&&l.push({type:"ampm",list:["AM","PM"].map((d,u)=>{const p=new Date(e);return p.setHours(p.getHours()%12+u*12),{text:d,value:p}})}),l}function ah(e=""){const t=e.split(":");if(t.length>=2){const n=parseInt(t[0],10),s=parseInt(t[1],10);return{hours:n,minutes:s}}return null}function jse({date:e,option:t,format:n,formatDate:s}){const o=[];if(typeof t=="function")return t()||[];const a=ah(t.start),i=ah(t.end),l=ah(t.step),r=t.format||n;if(a&&i&&l){const d=a.minutes+a.hours*60,u=i.minutes+i.hours*60,p=l.minutes+l.hours*60,h=Math.floor((u-d)/p);for(let g=0;g<=h;g++){const _=d+g*p,T=Math.floor(_/60),S=_%60,E=new Date(e);E.setHours(T,S,0),o.push({value:E,text:s(E,r)})}}return o}const MA=(e,t,n=0)=>{if(n<=0){requestAnimationFrame(()=>{e.scrollTop=t});return}const o=(t-e.scrollTop)/n*10;requestAnimationFrame(()=>{const a=e.scrollTop+o;if(a>=t){e.scrollTop=t;return}e.scrollTop=a,MA(e,t,n-10)})};function Yse(e){const t=Jo(e,{defaultValue:Ci(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),n=ua(),s=Jg(),o=(T,S)=>Xg(T,S,{locale:s.value.formatLocale}),a=U(new Date);ea(()=>{a.value=cm(t.value,t.defaultValue)});const i=T=>Array.isArray(T)?T.every(S=>t.disabledTime(new Date(S))):t.disabledTime(new Date(T)),l=T=>{const S=new Date(T);return i([S.getTime(),S.setMinutes(0,0,0),S.setMinutes(59,59,999)])},r=T=>{const S=new Date(T);return i([S.getTime(),S.setSeconds(0,0),S.setSeconds(59,999)])},d=T=>{const S=new Date(T),E=S.getHours()<12?0:12,y=E+11;return i([S.getTime(),S.setHours(E,0,0,0),S.setHours(y,59,59,999)])},u=(T,S)=>S==="hour"?l(T):S==="minute"?r(T):S==="ampm"?d(T):i(T),p=(T,S)=>{var E;if(!u(T,S)){const y=new Date(T);a.value=y,i(y)||(E=t["onUpdate:value"])==null||E.call(t,y,S)}},h=(T,S)=>u(T,S)?"disabled":T.getTime()===a.value.getTime()?"active":"",g=U(),_=T=>{if(!g.value)return;const S=g.value.querySelectorAll(".active");for(let E=0;E<S.length;E++){const y=S[E],A=e_(y,g.value);if(A){const C=y.offsetTop;MA(A,C,T)}}};return ut(()=>_(0)),lt(a,()=>_(t.scrollDuration),{flush:"post"}),()=>{let T;return t.timePickerOptions?T=b(zse,{onSelect:p,getClasses:h,options:jse({date:a.value,format:t.format,option:t.timePickerOptions,formatDate:o})},null):T=b(Hse,{options:Wse(a.value,t),onSelect:p,getClasses:h},null),b("div",{class:`${n}-time`,ref:g},[t.showTimeHeader&&b("div",{class:`${n}-time-header`},[b("button",{type:"button",class:`${n}-btn ${n}-btn-text ${n}-time-header-title`,onClick:t.onClickTitle},[o(a.value,t.timeTitleFormat)])]),b("div",{class:`${n}-time-content`},[T])])}}const mm=$i()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var Ec=Qo(Yse,mm);function Xse(e){const t=Jo(e,{defaultValue:Ci(new Date),disabledTime:()=>!1}),n=ua(),s=U([new Date(NaN),new Date(NaN)]);ea(()=>{el(t.value)?s.value=t.value:s.value=[new Date(NaN),new Date(NaN)]});const o=(d,u)=>{var p;(p=t["onUpdate:value"])==null||p.call(t,s.value,d==="time"?"time-range":d,u)},a=(d,u)=>{s.value[0]=d,s.value[1].getTime()>=d.getTime()||(s.value[1]=d),o(u,0)},i=(d,u)=>{s.value[1]=d,s.value[0].getTime()<=d.getTime()||(s.value[0]=d),o(u,1)},l=d=>t.disabledTime(d,0),r=d=>d.getTime()<s.value[0].getTime()||t.disabledTime(d,1);return()=>{const d=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return b("div",{class:`${n}-time-range`},[b(Ec,Va(Rs({},t),{"onUpdate:value":a,value:s.value[0],defaultValue:d[0],disabledTime:l}),null),b(Ec,Va(Rs({},t),{"onUpdate:value":i,value:s.value[1],defaultValue:d[1],disabledTime:r}),null)])}}const o_=mm;var i_=Qo(Xse,o_);function kA(e){const t=U(!1),n=()=>{var a;t.value=!1,(a=e.onShowTimePanelChange)==null||a.call(e,!1)},s=()=>{var a;t.value=!0,(a=e.onShowTimePanelChange)==null||a.call(e,!0)};return{timeVisible:w(()=>typeof e.showTimePanel=="boolean"?e.showTimePanel:t.value),openTimePanel:s,closeTimePanel:n}}function qse(e){const t=Jo(e,{disabledTime:()=>!1,defaultValue:Ci(new Date)}),n=U(t.value);ea(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:o,timeVisible:a}=kA(t),i=(l,r)=>{var d;r==="date"&&s();let u=$u(l,cm(t.value,t.defaultValue));if(t.disabledTime(new Date(u))&&(u=$u(l,t.defaultValue),t.disabledTime(new Date(u)))){n.value=u;return}(d=t["onUpdate:value"])==null||d.call(t,u,r)};return()=>{const l=ua(),r=Va(Rs({},Uo(t,dm)),{multiple:!1,type:"date",value:n.value,"onUpdate:value":i}),d=Va(Rs({},Uo(t,mm)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:o});return b("div",{class:`${l}-date-time`},[b(um,r,null),a.value&&b(Ec,d,null)])}}const LA=$i()(["showTimePanel","onShowTimePanelChange"]),Zse=[...LA,...dm,...mm];var DA=Qo(qse,Zse);function Qse(e){const t=Jo(e,{defaultValue:Ci(new Date),disabledTime:()=>!1}),n=U(t.value);ea(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:o,timeVisible:a}=kA(t),i=(l,r)=>{var d;r==="date"&&s();const u=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];let p=l.map((h,g)=>{const _=el(t.value)?t.value[g]:u[g];return $u(h,_)});if(p[1].getTime()<p[0].getTime()&&(p=[p[0],p[0]]),p.some(t.disabledTime)&&(p=l.map((h,g)=>$u(h,u[g])),p.some(t.disabledTime))){n.value=p;return}(d=t["onUpdate:value"])==null||d.call(t,p,r)};return()=>{const l=ua(),r=Va(Rs({},Uo(t,s_)),{type:"date",value:n.value,"onUpdate:value":i}),d=Va(Rs({},Uo(t,o_)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:o});return b("div",{class:`${l}-date-time-range`},[b(a_,r,null),a.value&&b(i_,d,null)])}}const Jse=[...LA,...o_,...s_];var PA=Qo(Qse,Jse);const eae=$i()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),Q1={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function BA(e,{slots:t}){const n=e.type||"date",s=e.format||Q1[n]||Q1.date,o=Va(Rs({},dse(e,eae)),{type:n,format:s});return b(q1,Uo(o,q1.props),Rs({content:a=>{if(o.range){const i=n==="time"?i_:n==="datetime"?PA:a_;return kn(i,Uo(Rs(Rs({},o),a),i.props))}else{const i=n==="time"?Ec:n==="datetime"?DA:um;return kn(i,Uo(Rs(Rs({},o),a),i.props))}},"icon-calendar":()=>n==="time"?b(Cse,null,null):b(RA,null,null)},t))}const tae={locale:CA,install:e=>{e.component("DatePicker",BA)}};var FA=Object.assign(BA,tae,{Calendar:um,CalendarRange:a_,TimePanel:Ec,TimeRange:i_,DateTime:DA,DateTimeRange:PA});const nae={components:{DatePicker:FA},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Array,default:()=>[]}},emits:["change"],methods:{handleChange(e){this.$emit("change",e)}}},sae={class:"date-picker"};function aae(e,t,n,s,o,a){const i=F("DatePicker");return m(),f("div",sae,[b(i,{range:"",confirm:"",clearable:!1,editable:!1,"confirm-text":n.confirmText,placeholder:n.placeholder,value:n.value,onChange:a.handleChange},null,8,["confirm-text","placeholder","value","onChange"])])}const UA=Re(nae,[["render",aae]]),oae=e=>e?e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h`:`${Math.floor(e/86400)}d`:"",ws={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},Xs={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},nc={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[Xs.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[Xs.DAY,Xs.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[Xs.DAY,Xs.WEEK,Xs.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[Xs.WEEK,Xs.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[Xs.WEEK,Xs.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[Xs.DAY,Xs.WEEK,Xs.MONTH,Xs.YEAR]}},J1='Inter,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',iae={type:"bar",backgroundColor:"rgb(31, 147, 255)"},GA=e=>({datasets:[iae],scales:{x:{ticks:{fontFamily:J1},grid:{drawOnChartArea:!1}},y:{type:"linear",position:"left",ticks:{fontFamily:J1,beginAtZero:!0,stepSize:1,callback:e},grid:{drawOnChartArea:!1}}}}),Rl=GA((e,t,n)=>!t||t===n.length-1?e:""),oh=GA((e,t,n)=>!t||t===n.length-1?oae(e):""),eb={conversations_count:Rl,incoming_messages_count:Rl,outgoing_messages_count:Rl,avg_first_response_time:oh,reply_time:oh,avg_resolution_time:oh,resolutions_count:Rl,bot_resolutions_count:Rl,bot_handoffs_count:Rl},tb={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"},lae="on-range-change",rae={name:"ReportFiltersDateRange",data(){const e=Object.values(nc).map(t=>({...t,name:this.$t(t.translationKey)}));return{selectedOption:e[0],options:e}},methods:{updateRange(e){this.selectedOption=e,this.$emit(lae,e)}}},cae={class:"multiselect-wrap--small"};function dae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",cae,[b(i,{modelValue:o.selectedOption,"onUpdate:modelValue":t[0]||(t[0]=l=>o.selectedOption=l),class:"no-margin","track-by":"name",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:o.options,searchable:!1,"allow-empty":!1,onSelect:a.updateRange},null,8,["modelValue","placeholder","select-label","options","onSelect"])])}const uae=Re(rae,[["render",dae]]),mae={name:"ReportsFiltersDateGroupBy",props:{validGroupOptions:{type:Array,default:()=>[Xs.DAY]},selectedOption:{type:Object,default:()=>Xs.DAY}},emits:["onGroupingChange"],data(){return{currentSelectedFilter:null}},computed:{translatedOptions(){return this.validGroupOptions.map(e=>({...e,groupBy:this.$t(e.translationKey)}))}},watch:{selectedOption:{handler(){this.currentSelectedFilter={...this.selectedOption,groupBy:this.$t(this.selectedOption.translationKey)}},immediate:!0}},methods:{changeFilterSelection(e){this.groupByOptions=this.$emit("onGroupingChange",e)}}},pae={class:"multiselect-wrap--small"},hae={"aria-hidden":"true",class:"hide"};function fae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",pae,[c("p",hae,v(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),b(i,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":t[0]||(t[0]=l=>o.currentSelectedFilter=l),class:"no-margin","track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:a.translatedOptions,"allow-empty":!1,"show-labels":!1,onSelect:a.changeFilterSelection},null,8,["modelValue","placeholder","options","onSelect"])])}const gae=Re(mae,[["render",fae]]),_ae={name:"ReportsFiltersAgents",emits:["agentsFilterSelection"],data(){return{selectedOptions:[]}},computed:{...gt({options:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{handleInput(){this.$emit("agentsFilterSelection",this.selectedOptions)}}},vae={class:"multiselect-wrap--small"};function bae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",vae,[b(i,{modelValue:o.selectedOptions,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.selectedOptions=l),a.handleInput],class:"no-margin",options:e.options,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:e.$t("CSAT_REPORTS.FILTERS.AGENTS.PLACEHOLDER"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE")},null,8,["modelValue","options","placeholder","select-label","deselect-label","onUpdate:modelValue"])])}const Eae=Re(_ae,[["render",bae]]),Tae={name:"ReportsFiltersLabels",emits:["labelsFilterSelection"],data(){return{selectedOption:null}},computed:{...gt({options:"labels/getLabels"})},mounted(){this.$store.dispatch("labels/get")},methods:{handleInput(){this.$emit("labelsFilterSelection",this.selectedOption)}}},yae={class:"multiselect-wrap--small"},Aae={class:"flex items-center min-w-0 gap-2"},Sae={class:"my-0 text-slate-800 dark:text-slate-75"},Iae={class:"flex items-center gap-2"},Cae={class:"my-0 text-slate-800 truncate min-w-0 dark:text-slate-75"};function Nae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",yae,[b(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.selectedOption=l),a.handleInput],class:"no-margin",placeholder:e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),label:"title","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},{singleLabel:j(l=>[c("div",Aae,[c("div",{style:At({backgroundColor:l.option.color}),class:"w-5 h-5 rounded-full"},null,4),c("span",Sae,v(l.option.title),1)])]),option:j(l=>[c("div",Iae,[c("div",{style:At({backgroundColor:l.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-slate-100 dark:border-slate-800"},null,4),c("span",Cae,v(l.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Oae=Re(Tae,[["render",Nae]]),xae={name:"ReportsFiltersInboxes",emits:["inboxFilterSelection"],data(){return{selectedOption:null}},computed:{...gt({options:"inboxes/getInboxes"})},mounted(){this.$store.dispatch("inboxes/get")},methods:{handleInput(){this.$emit("inboxFilterSelection",this.selectedOption)}}},wae={class:"multiselect-wrap--small"};function Rae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",wae,[b(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.selectedOption=l),a.handleInput],class:"no-margin",placeholder:e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const $ae=Re(xae,[["render",Rae]]),Mae={name:"ReportsFiltersTeams",emits:["teamFilterSelection"],data(){return{selectedOption:null}},computed:{...gt({options:"teams/getTeams"})},mounted(){this.$store.dispatch("teams/get")},methods:{handleInput(){this.$emit("teamFilterSelection",this.selectedOption)}}},kae={class:"multiselect-wrap--small"};function Lae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",kae,[b(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.selectedOption=l),a.handleInput],class:"no-margin",placeholder:e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Dae=Re(Mae,[["render",Lae]]),Pae={name:"ReportFiltersRatings",emits:["ratingFilterSelection"],data(){return{selectedOption:null,options:tl.reverse().map(t=>({...t,label:this.$t(t.translationKey)}))}},methods:{handleInput(e){this.$emit("ratingFilterSelection",e)}}},Bae={class:"multiselect-wrap--small"};function Fae(e,t,n,s,o,a){const i=F("multiselect");return m(),f("div",Bae,[b(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.selectedOption=l),a.handleInput],class:"no-margin","option-height":24,placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),options:o.options,"show-labels":!1,"track-by":"value",label:"label"},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Uae=Re(Pae,[["render",Fae]]),Gae={components:{WootDateRangePicker:UA,ReportsFiltersDateRange:uae,ReportsFiltersDateGroupBy:gae,ReportsFiltersAgents:Eae,ReportsFiltersLabels:Oae,ReportsFiltersInboxes:$ae,ReportsFiltersTeams:Dae,ReportsFiltersRatings:Uae},props:{showGroupByFilter:{type:Boolean,default:!1},showAgentsFilter:{type:Boolean,default:!1},showLabelsFilter:{type:Boolean,default:!1},showInboxFilter:{type:Boolean,default:!1},showRatingFilter:{type:Boolean,default:!1},showTeamFilter:{type:Boolean,default:!1},showBusinessHoursSwitch:{type:Boolean,default:!0}},emits:["filterChange"],data(){return{selectedDateRange:nc.LAST_7_DAYS,selectedGroupByFilter:null,selectedLabel:null,selectedInbox:null,selectedTeam:null,selectedRating:null,selectedAgents:[],customDateRange:[new Date,new Date],businessHoursSelected:!1}},computed:{isDateRangeSelected(){return this.selectedDateRange.id===nc.CUSTOM_DATE_RANGE.id},isGroupByPossible(){return this.selectedDateRange.id!==nc.LAST_7_DAYS.id},to(){return this.isDateRangeSelected?nu(this.customDateRange[1]):nu(new Date)},from(){if(this.isDateRangeSelected)return tu(this.customDateRange[0]);const{offset:e}=this.selectedDateRange,t=Ho(new Date,e);return tu(t)},validGroupOptions(){return this.selectedDateRange.groupByOptions},validGroupBy(){return this.selectedGroupByFilter?this.validGroupOptions.map(t=>t.id).includes(this.selectedGroupByFilter.id)?this.selectedGroupByFilter:this.validGroupOptions[0]:this.validGroupOptions[0]}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.emitChange()},methods:{emitChange(){const{from:e,to:t,selectedGroupByFilter:n,businessHoursSelected:s,selectedAgents:o,selectedLabel:a,selectedInbox:i,selectedTeam:l,selectedRating:r}=this;this.$emit("filterChange",{from:e,to:t,groupBy:n,businessHours:s,selectedAgents:o,selectedLabel:a,selectedInbox:i,selectedTeam:l,selectedRating:r})},onDateRangeChange(e){this.selectedDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onCustomDateRangeChange(e){this.customDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onGroupingChange(e){this.selectedGroupByFilter=e,this.emitChange()},handleAgentsFilterSelection(e){this.selectedAgents=e,this.emitChange()},handleLabelsFilterSelection(e){this.selectedLabel=e,this.emitChange()},handleInboxFilterSelection(e){this.selectedInbox=e,this.emitChange()},handleTeamFilterSelection(e){this.selectedTeam=e,this.emitChange()},handleRatingFilterSelection(e){this.selectedRating=e,this.emitChange()}}},Vae={class:"flex flex-col justify-between gap-3 md:flex-row"},Hae={class:"w-full grid gap-y-2 gap-x-1.5 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]"},Kae={key:0,class:"flex items-center"},zae={class:"mx-2 text-sm whitespace-nowrap"};function Wae(e,t,n,s,o,a){const i=F("ReportsFiltersDateRange"),l=F("WootDateRangePicker"),r=F("ReportsFiltersDateGroupBy"),d=F("ReportsFiltersAgents"),u=F("ReportsFiltersLabels"),p=F("ReportsFiltersTeams"),h=F("ReportsFiltersInboxes"),g=F("ReportsFiltersRatings"),_=F("woot-switch");return m(),f("div",Vae,[c("div",Hae,[b(i,{onOnRangeChange:a.onDateRangeChange},null,8,["onOnRangeChange"]),a.isDateRangeSelected?(m(),P(l,{key:0,"show-range":"",class:"no-margin auto-width",value:o.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),onChange:a.onCustomDateRangeChange},null,8,["value","confirm-text","placeholder","onChange"])):x("",!0),n.showGroupByFilter&&a.isGroupByPossible?(m(),P(r,{key:1,"valid-group-options":a.validGroupOptions,"selected-option":o.selectedGroupByFilter,onOnGroupingChange:a.onGroupingChange},null,8,["valid-group-options","selected-option","onOnGroupingChange"])):x("",!0),n.showAgentsFilter?(m(),P(d,{key:2,onAgentsFilterSelection:a.handleAgentsFilterSelection},null,8,["onAgentsFilterSelection"])):x("",!0),n.showLabelsFilter?(m(),P(u,{key:3,onLabelsFilterSelection:a.handleLabelsFilterSelection},null,8,["onLabelsFilterSelection"])):x("",!0),n.showTeamFilter?(m(),P(p,{key:4,onTeamFilterSelection:a.handleTeamFilterSelection},null,8,["onTeamFilterSelection"])):x("",!0),n.showInboxFilter?(m(),P(h,{key:5,onInboxFilterSelection:a.handleInboxFilterSelection},null,8,["onInboxFilterSelection"])):x("",!0),n.showRatingFilter?(m(),P(g,{key:6,onRatingFilterSelection:a.handleRatingFilterSelection},null,8,["onRatingFilterSelection"])):x("",!0)]),n.showBusinessHoursSwitch?(m(),f("div",Kae,[c("span",zae,v(e.$t("REPORT.BUSINESS_HOURS")),1),c("span",null,[b(_,{modelValue:o.businessHoursSelected,"onUpdate:modelValue":t[0]||(t[0]=T=>o.businessHoursSelected=T)},null,8,["modelValue"])])])):x("",!0)])}const pm=Re(Gae,[["render",Wae]]);function VA(e="getAccountSummary",t="getAccountSummaryFetchingStatus"){const n=Ve(e),s=Ve(t),o=l=>{if(!n.value.previous[l])return 0;const r=n.value[l]-n.value.previous[l];return Math.round(r/n.value.previous[l]*100)},a=l=>["avg_first_response_time","avg_resolution_time","reply_time"].includes(l);return{calculateTrend:o,isAverageMetricType:a,displayMetric:l=>a(l)?Wf(n.value[l]):Number(n.value[l]||"").toLocaleString(),fetchingStatus:s}}const jae={class:"text-n-slate-11"},Yae={class:"text-sm"},Xae={class:"flex items-end text-n-slate-12"},qae={key:0},Zae={key:1,class:"text-n-ruby-10 text-sm"},Qae={key:2,class:"text-xl font-medium"},Jae={key:3,class:"text-xs ml-4 flex items-center mb-0.5"},eoe={__name:"ChartStats",props:{metric:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"}},setup(e){const t=e,{t:n}=He(),{calculateTrend:s,displayMetric:o,isAverageMetricType:a,fetchingStatus:i}=VA(t.accountSummaryKey,t.summaryFetchingKey),l=(r,d)=>a(d)?r>0?"border-red-500 text-red-500":"border-green-500 text-green-500":r<0?"border-red-500 text-red-500":"border-green-500 text-green-500";return(r,d)=>(m(),f("div",jae,[c("span",Yae,v(e.metric.NAME),1),c("div",Xae,[I(i)===I(qc).FETCHING?(m(),f("div",qae,[b(Gs)])):I(i)===I(qc).FAILED?(m(),f("div",Zae,v(I(n)("REPORT.SUMMARY_FETCHING_FAILED")),1)):I(i)===I(qc).FINISHED?(m(),f("div",Qae,v(I(o)(e.metric.KEY)),1)):x("",!0),e.metric.trend&&I(i)===I(qc).FINISHED?(m(),f("div",Jae,[e.metric.trend<0?(m(),f("div",{key:0,class:re(["h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1",l(e.metric.trend,e.metric.KEY)])},null,2)):(m(),f("div",{key:1,class:re(["h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1",l(e.metric.trend,e.metric.KEY)])},null,2)),c("span",{class:re(["font-medium",l(e.metric.trend,e.metric.KEY)])},v(I(s)(e.metric.KEY))+"% ",3)])):x("",!0)])]))}},toe={components:{ChartStats:eoe,BarChart:HE},props:{groupBy:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"},reportKeys:{type:Object,default:()=>({CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"})}},setup(e){const{calculateTrend:t,isAverageMetricType:n}=VA(e.accountSummaryKey);return{calculateTrend:t,isAverageMetricType:n}},computed:{...gt({accountReport:"getAccountReports"}),metrics(){const e=Object.keys(this.reportKeys),t={FIRST_RESPONSE_TIME:this.$t("REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT"),RESOLUTION_TIME:this.$t("REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT")};return e.map(n=>({NAME:this.$t(`REPORT.METRICS.${n}.NAME`),KEY:this.reportKeys[n],DESC:this.$t(`REPORT.METRICS.${n}.DESC`),INFO_TEXT:t[n],TOOLTIP_TEXT:`REPORT.METRICS.${n}.TOOLTIP_TEXT`,trend:this.calculateTrend(this.reportKeys[n])}))}},methods:{getCollection(e){if(!this.accountReport.data[e.KEY])return{};const t=this.accountReport.data[e.KEY],n=t.map(o=>{var a,i,l;if(((a=this.groupBy)==null?void 0:a.period)===ws[2].period){let r=new Date(Dr(o.timestamp));const d=r.getDate()-r.getDay(),u=d+6,p=new Date(r.setDate(d)),h=new Date(r.setDate(u));return`${Ln(p,"dd-MMM")} - ${Ln(h,"dd-MMM")}`}return((i=this.groupBy)==null?void 0:i.period)===ws[3].period?Ln(Dr(o.timestamp),"MMM-yyyy"):((l=this.groupBy)==null?void 0:l.period)===ws[4].period?Ln(Dr(o.timestamp),"yyyy"):Ln(Dr(o.timestamp),"dd-MMM")}),s=eb[e.KEY].datasets.map(o=>{switch(o.type){case"bar":return{...o,yAxisID:"y",label:e.NAME,data:t.map(a=>a.value)};case"line":return{...o,yAxisID:"y",label:this.metrics[0].NAME,data:t.map(a=>a.count)};default:return o}});return{labels:n,datasets:s}},getChartOptions(e){const t={scales:eb[e.KEY].scales};return this.isAverageMetricType(e.KEY)&&(t.plugins={tooltip:{callbacks:{label:({raw:n,dataIndex:s})=>{var o;return this.$t(e.TOOLTIP_TEXT,{metricValue:Wf(n||0),conversationCount:((o=this.accountReport.data[e.KEY][s])==null?void 0:o.count)||0})}}}}),t}}},noe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 px-6 py-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},soe={class:"mt-4 h-72"},aoe={key:1,class:"flex items-center justify-center h-72"},ooe={key:1,class:"text-sm text-slate-600"};function ioe(e,t,n,s,o,a){const i=F("ChartStats"),l=F("woot-loading-state"),r=F("BarChart");return m(),f("div",noe,[(m(!0),f(pe,null,ye(a.metrics,d=>(m(),f("div",{key:d.KEY,class:"p-4 mb-3 rounded-md"},[b(i,{metric:d,"account-summary-key":n.accountSummaryKey,"summary-fetching-key":n.summaryFetchingKey},null,8,["metric","account-summary-key","summary-fetching-key"]),c("div",soe,[e.accountReport.isFetching[d.KEY]?(m(),P(l,{key:0,class:"text-xs",message:e.$t("REPORT.LOADING_CHART")},null,8,["message"])):(m(),f("div",aoe,[e.accountReport.data[d.KEY].length?(m(),P(r,{key:0,collection:a.getCollection(d),"chart-options":a.getChartOptions(d)},null,8,["collection","chart-options"])):(m(),f("span",ooe,v(e.$t("REPORT.NO_ENOUGH_DATA")),1))]))])]))),128))])}const l_=Re(toe,[["render",ioe]]),loe={class:"flex flex-col gap-1 pt-10 pb-5"},roe={key:0},coe={class:"flex justify-between w-full gap-5"},doe={class:"flex flex-col gap-2"},uoe={class:"text-xl font-medium text-n-slate-12"},moe={key:0,class:"text-n-slate-12 mt-2"},poe={class:"flex-shrink-0"},ei={__name:"ReportHeader",props:{headerTitle:{required:!0,type:String},headerDescription:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},setup(e){return(t,n)=>(m(),f("section",loe,[e.hasBackButton?(m(),f("div",roe,[b(ir,{compact:""})])):x("",!0),c("div",coe,[c("div",doe,[c("div",null,[c("span",uoe,v(e.headerTitle),1),e.headerDescription?(m(),f("p",moe,v(e.headerDescription),1)):x("",!0)])]),c("div",poe,[et(t.$slots,"default")])])]))}},hoe={CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"},foe={name:"ConversationReports",components:{ReportHeader:ei,ReportFilterSelector:pm,ReportContainer:l_,V4Button:he},data(){return{from:0,to:0,groupBy:ws[1],businessHours:!1}},methods:{fetchAllData(){this.fetchAccountSummary(),this.fetchChartData()},fetchAccountSummary(){try{this.$store.dispatch("fetchAccountSummary",this.getRequestPayload())}catch{Te(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){["CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME"].forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:hoe[e],...this.getRequestPayload()})}catch{Te(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},downloadAgentReports(){const{from:e,to:t}=this,n=xc({type:"agent",to:t,businessHours:this.businessHours});this.$store.dispatch("downloadAgentReports",{from:e,to:t,fileName:n,businessHours:this.businessHours})},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),jt(Kl.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"conversations"})}}},goe={class:"flex flex-col gap-3"};function _oe(e,t,n,s,o,a){const i=F("V4Button"),l=F("ReportHeader"),r=F("ReportFilterSelector"),d=F("ReportContainer");return m(),f(pe,null,[b(l,{"header-title":e.$t("REPORT.HEADER")},{default:j(()=>[b(i,{label:e.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:a.downloadAgentReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),c("div",goe,[b(r,{"show-agents-filter":!1,"show-group-by-filter":"",onFilterChange:a.onFilterChange},null,8,["onFilterChange"]),b(d,{"group-by":o.groupBy},null,8,["group-by"])])],64)}const voe=Re(foe,[["render",_oe]]);/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function hm(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function _i(e,t){return typeof e=="function"?e(t):e}function xa(e,t){return n=>{t.setState(s=>({...s,[e]:_i(n,s[e])}))}}function fm(e){return e instanceof Function}function boe(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Eoe(e,t){const n=[],s=o=>{o.forEach(a=>{n.push(a);const i=t(a);i!=null&&i.length&&s(i)})};return s(e),n}function Qt(e,t,n){let s=[],o;return a=>{let i;n.key&&n.debug&&(i=Date.now());const l=e(a);if(!(l.length!==s.length||l.some((u,p)=>s[p]!==u)))return o;s=l;let d;if(n.key&&n.debug&&(d=Date.now()),o=t(...l),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-i)*100)/100,p=Math.round((Date.now()-d)*100)/100,h=p/16,g=(_,T)=>{for(_=String(_);_.length<T;)_=" "+_;return _};console.info(`%c ${g(p,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return o}}function Jt(e,t,n,s){return{debug:()=>{var o;return(o=e==null?void 0:e.debugAll)!=null?o:e[t]},key:!1,onChange:s}}function Toe(e,t,n,s){const o=()=>{var i;return(i=a.getValue())!=null?i:e.options.renderFallbackValue},a={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(s),renderValue:o,getContext:Qt(()=>[e,n,t,a],(i,l,r,d)=>({table:i,column:l,row:r,cell:d,getValue:d.getValue,renderValue:d.renderValue}),Jt(e.options,"debugCells"))};return e._features.forEach(i=>{i.createCell==null||i.createCell(a,n,t,e)},{}),a}function yoe(e,t,n,s){var o,a;const l={...e._getDefaultColumnDef(),...t},r=l.accessorKey;let d=(o=(a=l.id)!=null?a:r?typeof String.prototype.replaceAll=="function"?r.replaceAll(".","_"):r.replace(/\./g,"_"):void 0)!=null?o:typeof l.header=="string"?l.header:void 0,u;if(l.accessorFn?u=l.accessorFn:r&&(r.includes(".")?u=h=>{let g=h;for(const T of r.split(".")){var _;g=(_=g)==null?void 0:_[T]}return g}:u=h=>h[l.accessorKey]),!d)throw new Error;let p={id:`${String(d)}`,accessorFn:u,parent:s,depth:n,columnDef:l,columns:[],getFlatColumns:Qt(()=>[!0],()=>{var h;return[p,...(h=p.columns)==null?void 0:h.flatMap(g=>g.getFlatColumns())]},Jt(e.options,"debugColumns")),getLeafColumns:Qt(()=>[e._getOrderColumnsFn()],h=>{var g;if((g=p.columns)!=null&&g.length){let _=p.columns.flatMap(T=>T.getLeafColumns());return h(_)}return[p]},Jt(e.options,"debugColumns"))};for(const h of e._features)h.createColumn==null||h.createColumn(p,e);return p}const Ws="debugHeaders";function nb(e,t,n){var s;let a={id:(s=n.id)!=null?s:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const i=[],l=r=>{r.subHeaders&&r.subHeaders.length&&r.subHeaders.map(l),i.push(r)};return l(a),i},getContext:()=>({table:e,header:a,column:t})};return e._features.forEach(i=>{i.createHeader==null||i.createHeader(a,e)}),a}const Aoe={createTable:e=>{e.getHeaderGroups=Qt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,o)=>{var a,i;const l=(a=s==null?void 0:s.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?a:[],r=(i=o==null?void 0:o.map(p=>n.find(h=>h.id===p)).filter(Boolean))!=null?i:[],d=n.filter(p=>!(s!=null&&s.includes(p.id))&&!(o!=null&&o.includes(p.id)));return _d(t,[...l,...d,...r],e)},Jt(e.options,Ws)),e.getCenterHeaderGroups=Qt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,o)=>(n=n.filter(a=>!(s!=null&&s.includes(a.id))&&!(o!=null&&o.includes(a.id))),_d(t,n,e,"center")),Jt(e.options,Ws)),e.getLeftHeaderGroups=Qt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,s)=>{var o;const a=(o=s==null?void 0:s.map(i=>n.find(l=>l.id===i)).filter(Boolean))!=null?o:[];return _d(t,a,e,"left")},Jt(e.options,Ws)),e.getRightHeaderGroups=Qt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,s)=>{var o;const a=(o=s==null?void 0:s.map(i=>n.find(l=>l.id===i)).filter(Boolean))!=null?o:[];return _d(t,a,e,"right")},Jt(e.options,Ws)),e.getFooterGroups=Qt(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Jt(e.options,Ws)),e.getLeftFooterGroups=Qt(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Jt(e.options,Ws)),e.getCenterFooterGroups=Qt(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Jt(e.options,Ws)),e.getRightFooterGroups=Qt(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Jt(e.options,Ws)),e.getFlatHeaders=Qt(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Jt(e.options,Ws)),e.getLeftFlatHeaders=Qt(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Jt(e.options,Ws)),e.getCenterFlatHeaders=Qt(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Jt(e.options,Ws)),e.getRightFlatHeaders=Qt(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Jt(e.options,Ws)),e.getCenterLeafHeaders=Qt(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Jt(e.options,Ws)),e.getLeftLeafHeaders=Qt(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Jt(e.options,Ws)),e.getRightLeafHeaders=Qt(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Jt(e.options,Ws)),e.getLeafHeaders=Qt(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,s)=>{var o,a,i,l,r,d;return[...(o=(a=t[0])==null?void 0:a.headers)!=null?o:[],...(i=(l=n[0])==null?void 0:l.headers)!=null?i:[],...(r=(d=s[0])==null?void 0:d.headers)!=null?r:[]].map(u=>u.getLeafHeaders()).flat()},Jt(e.options,Ws))}};function _d(e,t,n,s){var o,a;let i=0;const l=function(h,g){g===void 0&&(g=1),i=Math.max(i,g),h.filter(_=>_.getIsVisible()).forEach(_=>{var T;(T=_.columns)!=null&&T.length&&l(_.columns,g+1)},0)};l(e);let r=[];const d=(h,g)=>{const _={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},T=[];h.forEach(S=>{const E=[...T].reverse()[0],y=S.column.depth===_.depth;let A,C=!1;if(y&&S.column.parent?A=S.column.parent:(A=S.column,C=!0),E&&(E==null?void 0:E.column)===A)E.subHeaders.push(S);else{const O=nb(n,A,{id:[s,g,A.id,S==null?void 0:S.id].filter(Boolean).join("_"),isPlaceholder:C,placeholderId:C?`${T.filter(N=>N.column===A).length}`:void 0,depth:g,index:T.length});O.subHeaders.push(S),T.push(O)}_.headers.push(S),S.headerGroup=_}),r.push(_),g>0&&d(T,g-1)},u=t.map((h,g)=>nb(n,h,{depth:i,index:g}));d(u,i-1),r.reverse();const p=h=>h.filter(_=>_.column.getIsVisible()).map(_=>{let T=0,S=0,E=[0];_.subHeaders&&_.subHeaders.length?(E=[],p(_.subHeaders).forEach(A=>{let{colSpan:C,rowSpan:O}=A;T+=C,E.push(O)})):T=1;const y=Math.min(...E);return S=S+y,_.colSpan=T,_.rowSpan=S,{colSpan:T,rowSpan:S}});return p((o=(a=r[0])==null?void 0:a.headers)!=null?o:[]),r}const Soe=(e,t,n,s,o,a,i)=>{let l={id:t,index:s,original:n,depth:o,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:r=>{if(l._valuesCache.hasOwnProperty(r))return l._valuesCache[r];const d=e.getColumn(r);if(d!=null&&d.accessorFn)return l._valuesCache[r]=d.accessorFn(l.original,s),l._valuesCache[r]},getUniqueValues:r=>{if(l._uniqueValuesCache.hasOwnProperty(r))return l._uniqueValuesCache[r];const d=e.getColumn(r);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(l._uniqueValuesCache[r]=d.columnDef.getUniqueValues(l.original,s),l._uniqueValuesCache[r]):(l._uniqueValuesCache[r]=[l.getValue(r)],l._uniqueValuesCache[r])},renderValue:r=>{var d;return(d=l.getValue(r))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Eoe(l.subRows,r=>r.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let r=[],d=l;for(;;){const u=d.getParentRow();if(!u)break;r.push(u),d=u}return r.reverse()},getAllCells:Qt(()=>[e.getAllLeafColumns()],r=>r.map(d=>Toe(e,l,d,d.id)),Jt(e.options,"debugRows")),_getAllCellsByColumnId:Qt(()=>[l.getAllCells()],r=>r.reduce((d,u)=>(d[u.column.id]=u,d),{}),Jt(e.options,"debugRows"))};for(let r=0;r<e._features.length;r++){const d=e._features[r];d==null||d.createRow==null||d.createRow(l,e)}return l},Ioe={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},HA=(e,t,n)=>{var s,o;const a=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((o=e.getValue(t))==null||(o=o.toString())==null||(o=o.toLowerCase())==null)&&o.includes(a))};HA.autoRemove=e=>eo(e);const KA=(e,t,n)=>{var s;return!!(!((s=e.getValue(t))==null||(s=s.toString())==null)&&s.includes(n))};KA.autoRemove=e=>eo(e);const zA=(e,t,n)=>{var s;return((s=e.getValue(t))==null||(s=s.toString())==null?void 0:s.toLowerCase())===(n==null?void 0:n.toLowerCase())};zA.autoRemove=e=>eo(e);const WA=(e,t,n)=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(n)};WA.autoRemove=e=>eo(e)||!(e!=null&&e.length);const jA=(e,t,n)=>!n.some(s=>{var o;return!((o=e.getValue(t))!=null&&o.includes(s))});jA.autoRemove=e=>eo(e)||!(e!=null&&e.length);const YA=(e,t,n)=>n.some(s=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(s)});YA.autoRemove=e=>eo(e)||!(e!=null&&e.length);const XA=(e,t,n)=>e.getValue(t)===n;XA.autoRemove=e=>eo(e);const qA=(e,t,n)=>e.getValue(t)==n;qA.autoRemove=e=>eo(e);const r_=(e,t,n)=>{let[s,o]=n;const a=e.getValue(t);return a>=s&&a<=o};r_.resolveFilterValue=e=>{let[t,n]=e,s=typeof t!="number"?parseFloat(t):t,o=typeof n!="number"?parseFloat(n):n,a=t===null||Number.isNaN(s)?-1/0:s,i=n===null||Number.isNaN(o)?1/0:o;if(a>i){const l=a;a=i,i=l}return[a,i]};r_.autoRemove=e=>eo(e)||eo(e[0])&&eo(e[1]);const Lo={includesString:HA,includesStringSensitive:KA,equalsString:zA,arrIncludes:WA,arrIncludesAll:jA,arrIncludesSome:YA,equals:XA,weakEquals:qA,inNumberRange:r_};function eo(e){return e==null||e===""}const Coe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:xa("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);return typeof s=="string"?Lo.includesString:typeof s=="number"?Lo.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?Lo.equals:Array.isArray(s)?Lo.arrIncludes:Lo.weakEquals},e.getFilterFn=()=>{var n,s;return fm(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(s=t.options.filterFns)==null?void 0:s[e.columnDef.filterFn])!=null?n:Lo[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,s,o;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((s=t.options.enableColumnFilters)!=null?s:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(s=>s.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,s;return(n=(s=t.getState().columnFilters)==null?void 0:s.findIndex(o=>o.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(s=>{const o=e.getFilterFn(),a=s==null?void 0:s.find(u=>u.id===e.id),i=_i(n,a?a.value:void 0);if(sb(o,i,e)){var l;return(l=s==null?void 0:s.filter(u=>u.id!==e.id))!=null?l:[]}const r={id:e.id,value:i};if(a){var d;return(d=s==null?void 0:s.map(u=>u.id===e.id?r:u))!=null?d:[]}return s!=null&&s.length?[...s,r]:[r]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),s=o=>{var a;return(a=_i(t,o))==null?void 0:a.filter(i=>{const l=n.find(r=>r.id===i.id);if(l){const r=l.getFilterFn();if(sb(r,i.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(s)},e.resetColumnFilters=t=>{var n,s;e.setColumnFilters(t?[]:(n=(s=e.initialState)==null?void 0:s.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function sb(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Noe=(e,t,n)=>n.reduce((s,o)=>{const a=o.getValue(e);return s+(typeof a=="number"?a:0)},0),Ooe=(e,t,n)=>{let s;return n.forEach(o=>{const a=o.getValue(e);a!=null&&(s>a||s===void 0&&a>=a)&&(s=a)}),s},xoe=(e,t,n)=>{let s;return n.forEach(o=>{const a=o.getValue(e);a!=null&&(s<a||s===void 0&&a>=a)&&(s=a)}),s},woe=(e,t,n)=>{let s,o;return n.forEach(a=>{const i=a.getValue(e);i!=null&&(s===void 0?i>=i&&(s=o=i):(s>i&&(s=i),o<i&&(o=i)))}),[s,o]},Roe=(e,t)=>{let n=0,s=0;if(t.forEach(o=>{let a=o.getValue(e);a!=null&&(a=+a)>=a&&(++n,s+=a)}),n)return s/n},$oe=(e,t)=>{if(!t.length)return;const n=t.map(a=>a.getValue(e));if(!boe(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),o=n.sort((a,i)=>a-i);return n.length%2!==0?o[s]:(o[s-1]+o[s])/2},Moe=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),koe=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Loe=(e,t)=>t.length,ih={sum:Noe,min:Ooe,max:xoe,extent:woe,mean:Roe,median:$oe,unique:Moe,uniqueCount:koe,count:Loe},Doe={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:xa("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(s=>s!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,s;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((s=t.options.enableGrouping)!=null?s:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);if(typeof s=="number")return ih.sum;if(Object.prototype.toString.call(s)==="[object Date]")return ih.extent},e.getAggregationFn=()=>{var n,s;if(!e)throw new Error;return fm(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(s=t.options.aggregationFns)==null?void 0:s[e.columnDef.aggregationFn])!=null?n:ih[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,s;e.setGrouping(t?[]:(n=(s=e.initialState)==null?void 0:s.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const s=t.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(e._groupingValuesCache[n]=s.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,s)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var o;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}}};function Poe(e,t,n){if(!(t!=null&&t.length)||!n)return e;const s=e.filter(a=>!t.includes(a.id));return n==="remove"?s:[...t.map(a=>e.find(i=>i.id===a)).filter(Boolean),...s]}const Boe={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:xa("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Qt(n=>[sc(t,n)],n=>n.findIndex(s=>s.id===e.id),Jt(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var s;return((s=sc(t,n)[0])==null?void 0:s.id)===e.id},e.getIsLastColumn=n=>{var s;const o=sc(t,n);return((s=o[o.length-1])==null?void 0:s.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Qt(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,s)=>o=>{let a=[];if(!(t!=null&&t.length))a=o;else{const i=[...t],l=[...o];for(;l.length&&i.length;){const r=i.shift(),d=l.findIndex(u=>u.id===r);d>-1&&a.push(l.splice(d,1)[0])}a=[...a,...l]}return Poe(a,n,s)},Jt(e.options,"debugTable"))}},lh=()=>({left:[],right:[]}),Foe={getInitialState:e=>({columnPinning:lh(),...e}),getDefaultOptions:e=>({onColumnPinningChange:xa("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const s=e.getLeafColumns().map(o=>o.id).filter(Boolean);t.setColumnPinning(o=>{var a,i;if(n==="right"){var l,r;return{left:((l=o==null?void 0:o.left)!=null?l:[]).filter(p=>!(s!=null&&s.includes(p))),right:[...((r=o==null?void 0:o.right)!=null?r:[]).filter(p=>!(s!=null&&s.includes(p))),...s]}}if(n==="left"){var d,u;return{left:[...((d=o==null?void 0:o.left)!=null?d:[]).filter(p=>!(s!=null&&s.includes(p))),...s],right:((u=o==null?void 0:o.right)!=null?u:[]).filter(p=>!(s!=null&&s.includes(p)))}}return{left:((a=o==null?void 0:o.left)!=null?a:[]).filter(p=>!(s!=null&&s.includes(p))),right:((i=o==null?void 0:o.right)!=null?i:[]).filter(p=>!(s!=null&&s.includes(p)))}})},e.getCanPin=()=>e.getLeafColumns().some(s=>{var o,a,i;return((o=s.columnDef.enablePinning)!=null?o:!0)&&((a=(i=t.options.enableColumnPinning)!=null?i:t.options.enablePinning)!=null?a:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:s,right:o}=t.getState().columnPinning,a=n.some(l=>s==null?void 0:s.includes(l)),i=n.some(l=>o==null?void 0:o.includes(l));return a?"left":i?"right":!1},e.getPinnedIndex=()=>{var n,s;const o=e.getIsPinned();return o?(n=(s=t.getState().columnPinning)==null||(s=s[o])==null?void 0:s.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Qt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,s,o)=>{const a=[...s??[],...o??[]];return n.filter(i=>!a.includes(i.column.id))},Jt(t.options,"debugRows")),e.getLeftVisibleCells=Qt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,s)=>(s??[]).map(a=>n.find(i=>i.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Jt(t.options,"debugRows")),e.getRightVisibleCells=Qt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,s)=>(s??[]).map(a=>n.find(i=>i.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Jt(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,s;return e.setColumnPinning(t?lh():(n=(s=e.initialState)==null?void 0:s.columnPinning)!=null?n:lh())},e.getIsSomeColumnsPinned=t=>{var n;const s=e.getState().columnPinning;if(!t){var o,a;return!!((o=s.left)!=null&&o.length||(a=s.right)!=null&&a.length)}return!!((n=s[t])!=null&&n.length)},e.getLeftLeafColumns=Qt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(s=>t.find(o=>o.id===s)).filter(Boolean),Jt(e.options,"debugColumns")),e.getRightLeafColumns=Qt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(s=>t.find(o=>o.id===s)).filter(Boolean),Jt(e.options,"debugColumns")),e.getCenterLeafColumns=Qt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const o=[...n??[],...s??[]];return t.filter(a=>!o.includes(a.id))},Jt(e.options,"debugColumns"))}},vd={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},rh=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Uoe={getDefaultColumnDef:()=>vd,getInitialState:e=>({columnSizing:{},columnSizingInfo:rh(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:xa("columnSizing",e),onColumnSizingInfoChange:xa("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,s,o;const a=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:vd.minSize,(s=a??e.columnDef.size)!=null?s:vd.size),(o=e.columnDef.maxSize)!=null?o:vd.maxSize)},e.getStart=Qt(n=>[n,sc(t,n),t.getState().columnSizing],(n,s)=>s.slice(0,e.getIndex(n)).reduce((o,a)=>o+a.getSize(),0),Jt(t.options,"debugColumns")),e.getAfter=Qt(n=>[n,sc(t,n),t.getState().columnSizing],(n,s)=>s.slice(e.getIndex(n)+1).reduce((o,a)=>o+a.getSize(),0),Jt(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:s,...o}=n;return o})},e.getCanResize=()=>{var n,s;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((s=t.options.enableColumnResizing)!=null?s:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const s=o=>{if(o.subHeaders.length)o.subHeaders.forEach(s);else{var a;n+=(a=o.column.getSize())!=null?a:0}};return s(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const s=t.getColumn(e.column.id),o=s==null?void 0:s.getCanResize();return a=>{if(!s||!o||(a.persist==null||a.persist(),ch(a)&&a.touches&&a.touches.length>1))return;const i=e.getSize(),l=e?e.getLeafHeaders().map(E=>[E.column.id,E.column.getSize()]):[[s.id,s.getSize()]],r=ch(a)?Math.round(a.touches[0].clientX):a.clientX,d={},u=(E,y)=>{typeof y=="number"&&(t.setColumnSizingInfo(A=>{var C,O;const N=t.options.columnResizeDirection==="rtl"?-1:1,R=(y-((C=A==null?void 0:A.startOffset)!=null?C:0))*N,k=Math.max(R/((O=A==null?void 0:A.startSize)!=null?O:0),-.999999);return A.columnSizingStart.forEach(L=>{let[D,$]=L;d[D]=Math.round(Math.max($+$*k,0)*100)/100}),{...A,deltaOffset:R,deltaPercentage:k}}),(t.options.columnResizeMode==="onChange"||E==="end")&&t.setColumnSizing(A=>({...A,...d})))},p=E=>u("move",E),h=E=>{u("end",E),t.setColumnSizingInfo(y=>({...y,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=n||typeof document<"u"?document:null,_={moveHandler:E=>p(E.clientX),upHandler:E=>{g==null||g.removeEventListener("mousemove",_.moveHandler),g==null||g.removeEventListener("mouseup",_.upHandler),h(E.clientX)}},T={moveHandler:E=>(E.cancelable&&(E.preventDefault(),E.stopPropagation()),p(E.touches[0].clientX),!1),upHandler:E=>{var y;g==null||g.removeEventListener("touchmove",T.moveHandler),g==null||g.removeEventListener("touchend",T.upHandler),E.cancelable&&(E.preventDefault(),E.stopPropagation()),h((y=E.touches[0])==null?void 0:y.clientX)}},S=Goe()?{passive:!1}:!1;ch(a)?(g==null||g.addEventListener("touchmove",T.moveHandler,S),g==null||g.addEventListener("touchend",T.upHandler,S)):(g==null||g.addEventListener("mousemove",_.moveHandler,S),g==null||g.addEventListener("mouseup",_.upHandler,S)),t.setColumnSizingInfo(E=>({...E,startOffset:r,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:s.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?rh():(n=e.initialState.columnSizingInfo)!=null?n:rh())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0}}};let bd=null;function Goe(){if(typeof bd=="boolean")return bd;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return bd=e,bd}function ch(e){return e.type==="touchstart"}const Voe={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:xa("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(s=>({...s,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,s;const o=e.columns;return(n=o.length?o.some(a=>a.getIsVisible()):(s=t.getState().columnVisibility)==null?void 0:s[e.id])!=null?n:!0},e.getCanHide=()=>{var n,s;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((s=t.options.enableHiding)!=null?s:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Qt(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Jt(t.options,"debugRows")),e.getVisibleCells=Qt(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,s,o)=>[...n,...s,...o],Jt(t.options,"debugRows"))},createTable:e=>{const t=(n,s)=>Qt(()=>[s(),s().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Jt(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var s;e.setColumnVisibility(n?{}:(s=e.initialState.columnVisibility)!=null?s:{})},e.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((o,a)=>({...o,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;e.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function sc(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Hoe={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Koe={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:xa("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const s=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,s,o,a;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=t.options.enableGlobalFilter)!=null?s:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&((a=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?a:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Lo.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:s}=e.options;return fm(s)?s:s==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[s])!=null?t:Lo[s]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},zoe={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:xa("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var s,o;if(!t){e._queue(()=>{t=!0});return}if((s=(o=e.options.autoResetAll)!=null?o:e.options.autoResetExpanded)!=null?s:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=s=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(s),e.toggleAllRowsExpanded=s=>{s??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=s=>{var o,a;e.setExpanded(s?{}:(o=(a=e.initialState)==null?void 0:a.expanded)!=null?o:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const s=e.getState().expanded;return s===!0||Object.values(s).some(Boolean)},e.getIsAllRowsExpanded=()=>{const s=e.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||e.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},e.getExpandedDepth=()=>{let s=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(a=>{const i=a.split(".");s=Math.max(s,i.length)}),s},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(s=>{var o;const a=s===!0?!0:!!(s!=null&&s[e.id]);let i={};if(s===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{i[l]=!0}):i=s,n=(o=n)!=null?o:!a,!a&&n)return{...i,[e.id]:!0};if(a&&!n){const{[e.id]:l,...r}=i;return r}return s})},e.getIsExpanded=()=>{var n;const s=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:s===!0||s!=null&&s[e.id])},e.getCanExpand=()=>{var n,s,o;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((s=t.options.enableExpanding)!=null?s:!0)&&!!((o=e.subRows)!=null&&o.length)},e.getIsAllParentsExpanded=()=>{let n=!0,s=e;for(;n&&s.parentId;)s=t.getRow(s.parentId,!0),n=s.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},vf=0,bf=10,dh=()=>({pageIndex:vf,pageSize:bf}),Woe={getInitialState:e=>({...e,pagination:{...dh(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:xa("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var s,o;if(!t){e._queue(()=>{t=!0});return}if((s=(o=e.options.autoResetAll)!=null?o:e.options.autoResetPageIndex)!=null?s:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=s=>{const o=a=>_i(s,a);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(o)},e.resetPagination=s=>{var o;e.setPagination(s?dh():(o=e.initialState.pagination)!=null?o:dh())},e.setPageIndex=s=>{e.setPagination(o=>{let a=_i(s,o.pageIndex);const i=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return a=Math.max(0,Math.min(a,i)),{...o,pageIndex:a}})},e.resetPageIndex=s=>{var o,a;e.setPageIndex(s?vf:(o=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?o:vf)},e.resetPageSize=s=>{var o,a;e.setPageSize(s?bf:(o=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?o:bf)},e.setPageSize=s=>{e.setPagination(o=>{const a=Math.max(1,_i(s,o.pageSize)),i=o.pageSize*o.pageIndex,l=Math.floor(i/a);return{...o,pageIndex:l,pageSize:a}})},e.setPageCount=s=>e.setPagination(o=>{var a;let i=_i(s,(a=e.options.pageCount)!=null?a:-1);return typeof i=="number"&&(i=Math.max(-1,i)),{...o,pageCount:i}}),e.getPageOptions=Qt(()=>[e.getPageCount()],s=>{let o=[];return s&&s>0&&(o=[...new Array(s)].fill(null).map((a,i)=>i)),o},Jt(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:s}=e.getState().pagination,o=e.getPageCount();return o===-1?!0:o===0?!1:s<o-1},e.previousPage=()=>e.setPageIndex(s=>s-1),e.nextPage=()=>e.setPageIndex(s=>s+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var s;return(s=e.options.pageCount)!=null?s:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var s;return(s=e.options.rowCount)!=null?s:e.getPrePaginationRowModel().rows.length}}},uh=()=>({top:[],bottom:[]}),joe={getInitialState:e=>({rowPinning:uh(),...e}),getDefaultOptions:e=>({onRowPinningChange:xa("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,s,o)=>{const a=s?e.getLeafRows().map(r=>{let{id:d}=r;return d}):[],i=o?e.getParentRows().map(r=>{let{id:d}=r;return d}):[],l=new Set([...i,e.id,...a]);t.setRowPinning(r=>{var d,u;if(n==="bottom"){var p,h;return{top:((p=r==null?void 0:r.top)!=null?p:[]).filter(T=>!(l!=null&&l.has(T))),bottom:[...((h=r==null?void 0:r.bottom)!=null?h:[]).filter(T=>!(l!=null&&l.has(T))),...Array.from(l)]}}if(n==="top"){var g,_;return{top:[...((g=r==null?void 0:r.top)!=null?g:[]).filter(T=>!(l!=null&&l.has(T))),...Array.from(l)],bottom:((_=r==null?void 0:r.bottom)!=null?_:[]).filter(T=>!(l!=null&&l.has(T)))}}return{top:((d=r==null?void 0:r.top)!=null?d:[]).filter(T=>!(l!=null&&l.has(T))),bottom:((u=r==null?void 0:r.bottom)!=null?u:[]).filter(T=>!(l!=null&&l.has(T)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:o}=t.options;return typeof s=="function"?s(e):(n=s??o)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:s,bottom:o}=t.getState().rowPinning,a=n.some(l=>s==null?void 0:s.includes(l)),i=n.some(l=>o==null?void 0:o.includes(l));return a?"top":i?"bottom":!1},e.getPinnedIndex=()=>{var n,s;const o=e.getIsPinned();if(!o)return-1;const a=(n=o==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(i=>{let{id:l}=i;return l});return(s=a==null?void 0:a.indexOf(e.id))!=null?s:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,s;return e.setRowPinning(t?uh():(n=(s=e.initialState)==null?void 0:s.rowPinning)!=null?n:uh())},e.getIsSomeRowsPinned=t=>{var n;const s=e.getState().rowPinning;if(!t){var o,a;return!!((o=s.top)!=null&&o.length||(a=s.bottom)!=null&&a.length)}return!!((n=s[t])!=null&&n.length)},e._getPinnedRows=(t,n,s)=>{var o;return((o=e.options.keepPinnedRows)==null||o?(n??[]).map(i=>{const l=e.getRow(i,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(i=>t.find(l=>l.id===i))).filter(Boolean).map(i=>({...i,position:s}))},e.getTopRows=Qt(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Jt(e.options,"debugRows")),e.getBottomRows=Qt(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Jt(e.options,"debugRows")),e.getCenterRows=Qt(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,s)=>{const o=new Set([...n??[],...s??[]]);return t.filter(a=>!o.has(a.id))},Jt(e.options,"debugRows"))}},Yoe={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:xa("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const s={...n},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach(a=>{a.getCanSelect()&&(s[a.id]=!0)}):o.forEach(a=>{delete s[a.id]}),s})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const s=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),o={...n};return e.getRowModel().rows.forEach(a=>{Ef(o,a.id,s,!0,e)}),o}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Qt(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?mh(e,n):{rows:[],flatRows:[],rowsById:{}},Jt(e.options,"debugTable")),e.getFilteredSelectedRowModel=Qt(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?mh(e,n):{rows:[],flatRows:[],rowsById:{}},Jt(e.options,"debugTable")),e.getGroupedSelectedRowModel=Qt(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?mh(e,n):{rows:[],flatRows:[],rowsById:{}},Jt(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let s=!!(t.length&&Object.keys(n).length);return s&&t.some(o=>o.getCanSelect()&&!n[o.id])&&(s=!1),s},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=e.getState();let s=!!t.length;return s&&t.some(o=>!n[o.id])&&(s=!1),s},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,s)=>{const o=e.getIsSelected();t.setRowSelection(a=>{var i;if(n=typeof n<"u"?n:!o,e.getCanSelect()&&o===n)return a;const l={...a};return Ef(l,e.id,n,(i=s==null?void 0:s.selectChildren)!=null?i:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return c_(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Tf(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Tf(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return s=>{var o;n&&e.toggleSelected((o=s.target)==null?void 0:o.checked)}}}},Ef=(e,t,n,s,o)=>{var a;const i=o.getRow(t,!0);n?(i.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),i.getCanSelect()&&(e[t]=!0)):delete e[t],s&&(a=i.subRows)!=null&&a.length&&i.getCanSelectSubRows()&&i.subRows.forEach(l=>Ef(e,l.id,n,s,o))};function mh(e,t){const n=e.getState().rowSelection,s=[],o={},a=function(i,l){return i.map(r=>{var d;const u=c_(r,n);if(u&&(s.push(r),o[r.id]=r),(d=r.subRows)!=null&&d.length&&(r={...r,subRows:a(r.subRows)}),u)return r}).filter(Boolean)};return{rows:a(t.rows),flatRows:s,rowsById:o}}function c_(e,t){var n;return(n=t[e.id])!=null?n:!1}function Tf(e,t,n){var s;if(!((s=e.subRows)!=null&&s.length))return!1;let o=!0,a=!1;return e.subRows.forEach(i=>{if(!(a&&!o)&&(i.getCanSelect()&&(c_(i,t)?a=!0:o=!1),i.subRows&&i.subRows.length)){const l=Tf(i,t);l==="all"?a=!0:(l==="some"&&(a=!0),o=!1)}}),o?"all":a?"some":!1}const yf=/([0-9]+)/gm,Xoe=(e,t,n)=>ZA(Ni(e.getValue(n)).toLowerCase(),Ni(t.getValue(n)).toLowerCase()),qoe=(e,t,n)=>ZA(Ni(e.getValue(n)),Ni(t.getValue(n))),Zoe=(e,t,n)=>d_(Ni(e.getValue(n)).toLowerCase(),Ni(t.getValue(n)).toLowerCase()),Qoe=(e,t,n)=>d_(Ni(e.getValue(n)),Ni(t.getValue(n))),Joe=(e,t,n)=>{const s=e.getValue(n),o=t.getValue(n);return s>o?1:s<o?-1:0},eie=(e,t,n)=>d_(e.getValue(n),t.getValue(n));function d_(e,t){return e===t?0:e>t?1:-1}function Ni(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function ZA(e,t){const n=e.split(yf).filter(Boolean),s=t.split(yf).filter(Boolean);for(;n.length&&s.length;){const o=n.shift(),a=s.shift(),i=parseInt(o,10),l=parseInt(a,10),r=[i,l].sort();if(isNaN(r[0])){if(o>a)return 1;if(a>o)return-1;continue}if(isNaN(r[1]))return isNaN(i)?-1:1;if(i>l)return 1;if(l>i)return-1}return n.length-s.length}const xr={alphanumeric:Xoe,alphanumericCaseSensitive:qoe,text:Zoe,textCaseSensitive:Qoe,datetime:Joe,basic:eie},tie={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:xa("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const o of n){const a=o==null?void 0:o.getValue(e.id);if(Object.prototype.toString.call(a)==="[object Date]")return xr.datetime;if(typeof a=="string"&&(s=!0,a.split(yf).length>1))return xr.alphanumeric}return s?xr.text:xr.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,s;if(!e)throw new Error;return fm(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(s=t.options.sortingFns)==null?void 0:s[e.columnDef.sortingFn])!=null?n:xr[e.columnDef.sortingFn]},e.toggleSorting=(n,s)=>{const o=e.getNextSortingOrder(),a=typeof n<"u"&&n!==null;t.setSorting(i=>{const l=i==null?void 0:i.find(g=>g.id===e.id),r=i==null?void 0:i.findIndex(g=>g.id===e.id);let d=[],u,p=a?n:o==="desc";if(i!=null&&i.length&&e.getCanMultiSort()&&s?l?u="toggle":u="add":i!=null&&i.length&&r!==i.length-1?u="replace":l?u="toggle":u="replace",u==="toggle"&&(a||o||(u="remove")),u==="add"){var h;d=[...i,{id:e.id,desc:p}],d.splice(0,d.length-((h=t.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?d=i.map(g=>g.id===e.id?{...g,desc:p}:g):u==="remove"?d=i.filter(g=>g.id!==e.id):d=[{id:e.id,desc:p}];return d})},e.getFirstSortDir=()=>{var n,s;return((n=(s=e.columnDef.sortDescFirst)!=null?s:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var s,o;const a=e.getFirstSortDir(),i=e.getIsSorted();return i?i!==a&&((s=t.options.enableSortingRemoval)==null||s)&&(!(n&&(o=t.options.enableMultiRemove)!=null)||o)?!1:i==="desc"?"asc":"desc":a},e.getCanSort=()=>{var n,s;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((s=t.options.enableSorting)!=null?s:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,s;return(n=(s=e.columnDef.enableMultiSort)!=null?s:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const s=(n=t.getState().sorting)==null?void 0:n.find(o=>o.id===e.id);return s?s.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,s;return(n=(s=t.getState().sorting)==null?void 0:s.findIndex(o=>o.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return s=>{n&&(s.persist==null||s.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(s):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,s;e.setSorting(t?[]:(n=(s=e.initialState)==null?void 0:s.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},nie=[Aoe,Voe,Boe,Foe,Ioe,Coe,Hoe,Koe,tie,Doe,zoe,Woe,joe,Yoe,Uoe];function sie(e){var t,n;const s=[...nie,...(t=e._features)!=null?t:[]];let o={_features:s};const a=o._features.reduce((h,g)=>Object.assign(h,g.getDefaultOptions==null?void 0:g.getDefaultOptions(o)),{}),i=h=>o.options.mergeOptions?o.options.mergeOptions(a,h):{...a,...h};let r={...{},...(n=e.initialState)!=null?n:{}};o._features.forEach(h=>{var g;r=(g=h.getInitialState==null?void 0:h.getInitialState(r))!=null?g:r});const d=[];let u=!1;const p={_features:s,options:{...a,...e},initialState:r,_queue:h=>{d.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();u=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{o.setState(o.initialState)},setOptions:h=>{const g=_i(h,o.options);o.options=i(g)},getState:()=>o.options.state,setState:h=>{o.options.onStateChange==null||o.options.onStateChange(h)},_getRowId:(h,g,_)=>{var T;return(T=o.options.getRowId==null?void 0:o.options.getRowId(h,g,_))!=null?T:`${_?[_.id,g].join("."):g}`},getCoreRowModel:()=>(o._getCoreRowModel||(o._getCoreRowModel=o.options.getCoreRowModel(o)),o._getCoreRowModel()),getRowModel:()=>o.getPaginationRowModel(),getRow:(h,g)=>{let _=(g?o.getPrePaginationRowModel():o.getRowModel()).rowsById[h];if(!_&&(_=o.getCoreRowModel().rowsById[h],!_))throw new Error;return _},_getDefaultColumnDef:Qt(()=>[o.options.defaultColumn],h=>{var g;return h=(g=h)!=null?g:{},{header:_=>{const T=_.header.column.columnDef;return T.accessorKey?T.accessorKey:T.accessorFn?T.id:null},cell:_=>{var T,S;return(T=(S=_.renderValue())==null||S.toString==null?void 0:S.toString())!=null?T:null},...o._features.reduce((_,T)=>Object.assign(_,T.getDefaultColumnDef==null?void 0:T.getDefaultColumnDef()),{}),...h}},Jt(e,"debugColumns")),_getColumnDefs:()=>o.options.columns,getAllColumns:Qt(()=>[o._getColumnDefs()],h=>{const g=function(_,T,S){return S===void 0&&(S=0),_.map(E=>{const y=yoe(o,E,S,T),A=E;return y.columns=A.columns?g(A.columns,y,S+1):[],y})};return g(h)},Jt(e,"debugColumns")),getAllFlatColumns:Qt(()=>[o.getAllColumns()],h=>h.flatMap(g=>g.getFlatColumns()),Jt(e,"debugColumns")),_getAllFlatColumnsById:Qt(()=>[o.getAllFlatColumns()],h=>h.reduce((g,_)=>(g[_.id]=_,g),{}),Jt(e,"debugColumns")),getAllLeafColumns:Qt(()=>[o.getAllColumns(),o._getOrderColumnsFn()],(h,g)=>{let _=h.flatMap(T=>T.getLeafColumns());return g(_)},Jt(e,"debugColumns")),getColumn:h=>o._getAllFlatColumnsById()[h]};Object.assign(o,p);for(let h=0;h<o._features.length;h++){const g=o._features[h];g==null||g.createTable==null||g.createTable(o)}return o}function gm(){return e=>Qt(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(o,a,i){a===void 0&&(a=0);const l=[];for(let d=0;d<o.length;d++){const u=Soe(e,e._getRowId(o[d],d,i),o[d],d,a,void 0,i==null?void 0:i.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,l.push(u),e.options.getSubRows){var r;u.originalSubRows=e.options.getSubRows(o[d],d),(r=u.originalSubRows)!=null&&r.length&&(u.subRows=s(u.originalSubRows,a+1,u))}}return l};return n.rows=s(t),n},Jt(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function aie(e){const t=[],n=s=>{var o;t.push(s),(o=s.subRows)!=null&&o.length&&s.getIsExpanded()&&s.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function QA(e){return t=>Qt(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,s)=>{if(!s.rows.length)return s;const{pageSize:o,pageIndex:a}=n;let{rows:i,flatRows:l,rowsById:r}=s;const d=o*a,u=d+o;i=i.slice(d,u);let p;t.options.paginateExpandedRows?p={rows:i,flatRows:l,rowsById:r}:p=aie({rows:i,flatRows:l,rowsById:r}),p.flatRows=[];const h=g=>{p.flatRows.push(g),g.subRows.length&&g.subRows.forEach(h)};return p.rows.forEach(h),p},Jt(t.options,"debugTable"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ed(){return!0}const oie=Symbol("merge-proxy"),iie={get(e,t,n){return t===oie?n:e.get(t)},has(e,t){return e.has(t)},set:Ed,deleteProperty:Ed,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Ed,deleteProperty:Ed}},ownKeys(e){return e.keys()}};function ph(e){return"value"in e?e.value:e}function Hr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Proxy({get(s){for(let o=t.length-1;o>=0;o--){const a=ph(t[o])[s];if(a!==void 0)return a}},has(s){for(let o=t.length-1;o>=0;o--)if(s in ph(t[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<t.length;o++)s.push(...Object.keys(ph(t[o])));return[...Array.from(new Set(s))]}},iie)}const ab=No({props:["render","props"],setup:e=>()=>typeof e.render=="function"||typeof e.render=="object"?kn(e.render,e.props):e.render});function ob(e){return Hr(e,{data:I(e.data)})}function _m(e){const t=Mf(e.data),n=Hr({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(a,i){return t?{...a,...i}:Hr(a,i)}},t?ob(e):e),s=sie(n);if(t){const a=Lu(e.data);lt(a,()=>{s.setState(i=>({...i,data:a.value}))},{immediate:!0})}const o=U(s.initialState);return ea(()=>{s.setOptions(a=>{var i;const l=new Proxy({},{get:(r,d)=>o.value[d]});return Hr(a,t?ob(e):e,{state:Hr(l,(i=e.state)!=null?i:{}),onStateChange:r=>{r instanceof Function?o.value=r(o.value):o.value=r,e.onStateChange==null||e.onStateChange(r)}})})}),s}const lie={__name:"SortButton",props:{header:{type:Object,required:!0}},setup(e){const t={default:"i-lucide-chevrons-up-down",asc:"i-lucide-chevron-up",desc:"i-lucide-chevron-down"};return(n,s)=>(m(),f("span",{class:re(t[e.header.column.getIsSorted()||"default"])},null,2))}},rie={class:"sticky top-0 z-10 bg-n-slate-1"},cie=["onClick"],die={key:0,class:"flex place-items-center gap-1"},uie={class:"divide-y divide-n-slate-2"},vm={__name:"Table",props:{table:{type:Object,required:!0},fixed:{type:Boolean,default:!1},type:{type:String,default:"relaxed"}},setup(e){const t=e,n=w(()=>t.type==="relaxed"),s=w(()=>n.value?"first:rounded-bl-lg first:rounded-tl-lg last:rounded-br-lg last:rounded-tr-lg":"");return(o,a)=>(m(),f("table",{class:re({"table-fixed":e.fixed})},[c("thead",rie,[(m(!0),f(pe,null,ye(e.table.getHeaderGroups(),i=>(m(),f("tr",{key:i.id,class:"rounded-xl"},[(m(!0),f(pe,null,ye(i.headers,l=>(m(),f("th",{key:l.id,style:At({width:`${l.getSize()}px`}),class:re(["text-left py-3 px-5 font-medium text-sm text-n-slate-12",s.value]),onClick:r=>l.column.getCanSort()&&l.column.toggleSorting()},[l.isPlaceholder?x("",!0):(m(),f("div",die,[b(I(ab),{render:l.column.columnDef.header,props:l.getContext()},null,8,["render","props"]),l.column.getCanSort()?(m(),P(lie,{key:0,header:l},null,8,["header"])):x("",!0)]))],14,cie))),128))]))),128))]),c("tbody",uie,[(m(!0),f(pe,null,ye(e.table.getRowModel().rows,i=>(m(),f("tr",{key:i.id},[(m(!0),f(pe,null,ye(i.getVisibleCells(),l=>(m(),f("td",{key:l.id,class:re(n.value?"py-4 px-5":"py-2 px-5")},[b(I(ab),{render:l.column.columnDef.cell,props:l.getContext()},null,8,["render","props"])],2))),128))]))),128))])],2))}},mie={__name:"SummaryReportLink",props:{row:{type:Object,required:!0}},setup(e){const t=e,n=w(()=>`${t.row.original.type}_reports_show`);return(s,o)=>{const a=F("router-link");return m(),P(a,{to:{name:n.value,params:{id:e.row.original.id}},class:"text-n-slate-12 hover:underline"},{default:j(()=>[be(v(e.row.original.name),1)]),_:1},8,["to"])}}},pie={class:"flex-1 overflow-auto px-5 py-6 mt-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},u_={__name:"SummaryReports",props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},summaryKey:{type:String,default:""},fetchItemsKey:{type:String,required:!0}},setup(e,{expose:t}){const n=e,s=Ot(),o=U(0),a=U(0),i=U(!1),l=Ve([n.getterKey])||[],r=Ve([n.summaryKey])||[],d=O=>r.value.find(N=>N.id===Number(O))||{},u=hm(),{t:p}=He(),h=O=>kn("span",{class:O.getValue()?"":"text-n-slate-12"},O.getValue()),g=[u.accessor("name",{header:p(`SUMMARY_REPORTS.${n.type.toUpperCase()}`),width:300,cell:O=>kn(mie,O)}),u.accessor("conversationsCount",{header:p("SUMMARY_REPORTS.CONVERSATIONS"),width:200,cell:h}),u.accessor("avgFirstResponseTime",{header:p("SUMMARY_REPORTS.AVG_FIRST_RESPONSE_TIME"),width:200,cell:h}),u.accessor("avgResolutionTime",{header:p("SUMMARY_REPORTS.AVG_RESOLUTION_TIME"),width:200,cell:h}),u.accessor("avgReplyTime",{header:p("SUMMARY_REPORTS.AVG_REPLY_TIME"),width:200,cell:h}),u.accessor("resolutionsCount",{header:p("SUMMARY_REPORTS.RESOLUTION_COUNT"),width:200,cell:h})],_=O=>O?Wf(O):"--",T=O=>O?O.toLocaleString():"--",S=w(()=>l.value.map(O=>{const N=d(O.id),{conversationsCount:R,avgFirstResponseTime:k,avgResolutionTime:L,avgReplyTime:D,resolvedConversationsCount:$}=N;return{id:O.id,name:O.name,type:n.type,conversationsCount:T(R),avgFirstResponseTime:_(k),avgReplyTime:_(D),avgResolutionTime:_(L),resolutionsCount:T($)}})),E=()=>{s.dispatch(n.fetchItemsKey),s.dispatch(n.actionKey,{since:o.value,until:a.value,businessHours:i.value})};ut(()=>E());const y=O=>{o.value=O.from,a.value=O.to,i.value=O.businessHours,E()},A=_m({get data(){return S.value},columns:g,enableSorting:!1,getCoreRowModel:gm()});return t({downloadReports:()=>{const O={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(O[n.type]){const N=xc({type:n.type,to:a.value,businessHours:i.value}),R={from:o.value,to:a.value,fileName:N,businessHours:i.value};s.dispatch(O[n.type],R)}}}),(O,N)=>(m(),f(pe,null,[b(pm,{onFilterChange:y}),c("div",pie,[b(vm,{table:I(A)},null,8,["table"])])],64))}},hie={__name:"AgentReportsIndex",setup(e){const t=U(null),n=()=>{t.value.downloadReports()};return(s,o)=>(m(),f(pe,null,[b(ei,{"header-title":s.$t("AGENT_REPORTS.HEADER"),"header-description":s.$t("AGENT_REPORTS.DESCRIPTION")},{default:j(()=>[b(he,{label:s.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),b(u_,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchAgentSummaryReports","getter-key":"agents/getAgents","fetch-items-key":"agents/get","summary-key":"summaryReports/getAgentSummaryReports",type:"agent"},null,512)],64))}},fie={__name:"InboxReportsIndex",setup(e){const t=U(null),n=()=>{t.value.downloadReports()};return(s,o)=>(m(),f(pe,null,[b(ei,{"header-title":s.$t("INBOX_REPORTS.HEADER"),"header-description":s.$t("INBOX_REPORTS.DESCRIPTION")},{default:j(()=>[b(he,{label:s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),b(u_,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchInboxSummaryReports","getter-key":"inboxes/getInboxes","fetch-items-key":"inboxes/get","summary-key":"summaryReports/getInboxSummaryReports",type:"inbox"},null,512)],64))}},gie={__name:"TeamReportsIndex",setup(e){const t=U(null),n=()=>{t.value.downloadReports()};return(s,o)=>(m(),f(pe,null,[b(ei,{"header-title":s.$t("TEAM_REPORTS.HEADER"),"header-description":s.$t("TEAM_REPORTS.DESCRIPTION")},{default:j(()=>[b(he,{label:s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),b(u_,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchTeamSummaryReports","getter-key":"teams/getTeams","fetch-items-key":"teams/get","summary-key":"summaryReports/getTeamSummaryReports",type:"team"},null,512)],64))}},_ie=5,vie={components:{WootDateRangePicker:UA,Thumbnail:Qn},props:{currentFilter:{type:Object,default:()=>null},filterItemsList:{type:Array,default:()=>[]},groupByFilterItemsList:{type:Array,default:()=>[]},type:{type:String,default:"agent"},selectedGroupByFilter:{type:Object,default:()=>{}}},emits:["businessHoursToggle","dateRangeChange","filterChange","groupByFilterChange"],data(){return{currentSelectedFilter:this.currentFilter||null,currentDateRangeSelection:{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},customDateRange:[new Date,new Date],currentSelectedGroupByFilter:null,businessHoursSelected:!1}},computed:{dateRange(){return[{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},{id:1,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS")},{id:2,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS")},{id:3,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS")},{id:4,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_YEAR")},{id:5,name:this.$t("REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE")}]},isDateRangeSelected(){return this.currentDateRangeSelection.id===_ie},to(){return this.isDateRangeSelected?this.toCustomDate(this.customDateRange[1]):this.toCustomDate(new Date)},from(){if(this.isDateRangeSelected)return this.fromCustomDate(this.customDateRange[0]);const t={0:6,1:29,2:89,3:179,4:364}[this.currentDateRangeSelection.id],n=Ho(new Date,t);return this.fromCustomDate(n)},multiselectLabel(){return{agent:this.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"),label:this.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),inbox:this.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),team:this.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")}[this.type]||this.$t("FORMS.MULTISELECT.SELECT_ONE")},groupBy(){return this.isDateRangeSelected?ws[4].period:{0:ws[1].period,1:ws[2].period,2:ws[3].period,3:ws[3].period,4:ws[4].period}[this.currentDateRangeSelection.id]},notLast7Days(){return this.groupBy!==ws[1].period}},watch:{filterItemsList(e){this.currentSelectedFilter=this.currentFilter?this.currentFilter:e[0],this.changeFilterSelection()},groupByFilterItemsList(){this.currentSelectedGroupByFilter=this.selectedGroupByFilter},businessHoursSelected(){this.$emit("businessHoursToggle",this.businessHoursSelected)}},mounted(){this.onDateRangeChange()},methods:{onDateRangeChange(){this.$emit("dateRangeChange",{from:this.from,to:this.to,groupBy:this.groupBy})},fromCustomDate(e){return go(oa(e))},toCustomDate(e){return go(ho(e))},changeDateSelection(e){this.currentDateRangeSelection=e,this.onDateRangeChange()},changeFilterSelection(){this.$emit("filterChange",this.currentSelectedFilter)},onChange(e){this.customDateRange=e,this.onDateRangeChange()},changeGroupByFilterSelection(){this.$emit("groupByFilterChange",this.currentSelectedGroupByFilter)}}},bie={class:"grid grid-cols-1 md:grid-cols-3 gap-y-0.5 gap-x-2"},Eie={key:0,class:"multiselect-wrap--small"},Tie={class:"mb-2 text-xs font-medium"},yie={class:"flex min-w-0 items-center gap-2"},Aie={class:"my-0 text-slate-800 truncate dark:text-slate-75"},Sie={class:"flex items-center gap-2"},Iie={class:"my-0 text-slate-800 dark:text-slate-75"},Cie={key:1,class:"multiselect-wrap--small"},Nie={class:"mb-2 text-xs font-medium"},Oie={class:"flex items-center min-w-0 gap-2"},xie={class:"my-0 text-slate-800 truncate dark:text-slate-75"},wie={class:"flex items-center min-w-0 gap-2"},Rie={class:"my-0 text-slate-800 truncate dark:text-slate-75"},$ie={key:2,class:"multiselect-wrap--small"},Mie={class:"mb-2 text-xs font-medium"},kie={class:"multiselect-wrap--small"},Lie={class:"mb-2 text-xs font-medium"},Die={class:"flex items-center h-10 self-center order-5 md:order-2 md:justify-self-end"},Pie={class:"mr-2 text-sm whitespace-nowrap"},Bie={key:3,class:"order-3 md:order-4"},Fie={class:"mb-2 text-xs font-medium"},Uie={key:4,class:"multiselect-wrap--small order-4 md:order-5"},Gie={class:"mb-2 text-xs font-medium"};function Vie(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("multiselect"),r=F("woot-switch"),d=F("WootDateRangePicker");return m(),f("div",bie,[n.type==="agent"?(m(),f("div",Eie,[c("p",Tie,v(e.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL")),1),b(l,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":[t[0]||(t[0]=u=>o.currentSelectedFilter=u),a.changeFilterSelection],placeholder:a.multiselectLabel,label:"name","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:j(u=>[c("div",yie,[b(i,{src:u.option.thumbnail,status:u.option.availability_status,username:u.option.name,size:"22px"},null,8,["src","status","username"]),c("span",Aie,v(u.option.name),1)])]),options:j(u=>[c("div",Sie,[b(i,{src:u.option.thumbnail,status:u.option.availability_status,username:u.option.name,size:"22px"},null,8,["src","status","username"]),c("p",Iie,v(u.option.name),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):n.type==="label"?(m(),f("div",Cie,[c("p",Nie,v(e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL")),1),b(l,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":[t[1]||(t[1]=u=>o.currentSelectedFilter=u),a.changeFilterSelection],placeholder:a.multiselectLabel,label:"title","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:j(u=>[c("div",Oie,[c("div",{style:At({backgroundColor:u.option.color}),class:"w-5 h-5 rounded-full"},null,4),c("span",xie,v(u.option.title),1)])]),option:j(u=>[c("div",wie,[c("div",{style:At({backgroundColor:u.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-slate-100 dark:border-slate-800"},null,4),c("span",Rie,v(u.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):(m(),f("div",$ie,[c("p",Mie,[n.type==="inbox"?(m(),f(pe,{key:0},[be(v(e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):n.type==="team"?(m(),f(pe,{key:1},[be(v(e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):(m(),f(pe,{key:2},[be(v(e.$t("FORMS.MULTISELECT.SELECT_ONE")),1)],64))]),b(l,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":[t[2]||(t[2]=u=>o.currentSelectedFilter=u),a.changeFilterSelection],"track-by":"id",label:"name",placeholder:a.multiselectLabel,"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:n.filterItemsList,searchable:!1,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"])])),c("div",kie,[c("p",Lie,v(e.$t("REPORT.DURATION_FILTER_LABEL")),1),b(l,{modelValue:o.currentDateRangeSelection,"onUpdate:modelValue":t[3]||(t[3]=u=>o.currentDateRangeSelection=u),"track-by":"name",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:a.dateRange,searchable:!1,"allow-empty":!1,onSelect:a.changeDateSelection},null,8,["modelValue","placeholder","select-label","options","onSelect"])]),c("div",Die,[c("span",Pie,v(e.$t("REPORT.BUSINESS_HOURS")),1),c("span",null,[b(r,{modelValue:o.businessHoursSelected,"onUpdate:modelValue":t[4]||(t[4]=u=>o.businessHoursSelected=u)},null,8,["modelValue"])])]),a.isDateRangeSelected?(m(),f("div",Bie,[c("p",Fie,v(e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER")),1),b(d,{"show-range":"",value:o.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),class:"auto-width",onChange:a.onChange},null,8,["value","confirm-text","placeholder","onChange"])])):x("",!0),a.notLast7Days?(m(),f("div",Uie,[c("p",Gie,v(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),b(l,{modelValue:o.currentSelectedGroupByFilter,"onUpdate:modelValue":[t[5]||(t[5]=u=>o.currentSelectedGroupByFilter=u),a.changeGroupByFilterSelection],"track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:n.groupByFilterItemsList,"allow-empty":!1,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])):x("",!0)])}const Hie=Re(vie,[["render",Vie]]),wr={DAY:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"}],WEEK:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"}],MONTH:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"}],YEAR:[{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"},{id:4,groupByKey:"REPORT.GROUPING_OPTIONS.YEAR"}]},Kie={components:{ReportHeader:ei,V4Button:he,ReportFilters:Hie,ReportContainer:l_},props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},downloadButtonLabel:{type:String,default:"Download Reports"},reportTitle:{type:String,default:"Download Reports"},hasBackButton:{type:Boolean,default:!1},selectedItem:{type:Object,default:null}},data(){return{from:0,to:0,selectedFilter:this.selectedItem,groupBy:ws[1],groupByfilterItemsList:wr.DAY.map(this.translateOptions),selectedGroupByFilter:null,businessHours:!1}},computed:{filterItemsList(){return this.$store.getters[this.getterKey]||[]},isAgentType(){return this.type==="agent"},reportKeys(){return{CONVERSATIONS:"conversations_count",...!this.isAgentType&&{INCOMING_MESSAGES:"incoming_messages_count"},OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"}}},mounted(){this.$store.dispatch(this.actionKey)},methods:{fetchAllData(){if(this.selectedFilter){const{from:e,to:t,groupBy:n,businessHours:s}=this;this.$store.dispatch("fetchAccountSummary",{from:e,to:t,type:this.type,id:this.selectedFilter.id,groupBy:n.period,businessHours:s}),this.fetchChartData()}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{const{from:t,to:n,groupBy:s,businessHours:o}=this;this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],from:t,to:n,type:this.type,id:this.selectedFilter.id,groupBy:s.period,businessHours:o})}catch{Te(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},downloadReports(){const{from:e,to:t,type:n,businessHours:s}=this,o={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(o[n]){const a=xc({type:n,to:t,businessHours:s}),i={from:e,to:t,fileName:a,businessHours:s};this.$store.dispatch(o[n],i)}},onDateRangeChange({from:e,to:t,groupBy:n}){this.from!==0&&this.to!==0&&jt(Kl.FILTER_REPORT,{filterType:"date",reportType:this.type}),this.from=e,this.to=t,this.groupByfilterItemsList=this.fetchFilterItems(n);const s=this.groupByfilterItemsList.filter(o=>o.id===this.groupBy.id);s.length>0?this.selectedGroupByFilter=s[0]:(this.selectedGroupByFilter=this.groupByfilterItemsList[0],this.groupBy=ws[this.selectedGroupByFilter.id]),this.fetchAllData()},onFilterChange(e){e&&(this.selectedFilter=e,this.fetchAllData())},onGroupByFilterChange(e){var t;this.groupBy=ws[e.id],this.fetchAllData(),jt(Kl.FILTER_REPORT,{filterType:"groupBy",filterValue:(t=this.groupBy)==null?void 0:t.period,reportType:this.type})},fetchFilterItems(e){switch(e){case ws[2].period:return wr.WEEK.map(this.translateOptions);case ws[3].period:return wr.MONTH.map(this.translateOptions);case ws[4].period:return wr.YEAR.map(this.translateOptions);default:return wr.DAY.map(this.translateOptions)}},translateOptions(e){return{id:e.id,groupBy:this.$t(e.groupByKey)}},onBusinessHoursToggle(e){this.businessHours=e,this.fetchAllData(),jt(Kl.FILTER_REPORT,{filterType:"businessHours",filterValue:e,reportType:this.type})}}};function zie(e,t,n,s,o,a){const i=F("V4Button"),l=F("ReportHeader"),r=F("ReportFilters"),d=F("ReportContainer");return m(),f(pe,null,[b(l,{"header-title":n.reportTitle,"has-back-button":n.hasBackButton},{default:j(()=>[b(i,{label:n.downloadButtonLabel,icon:"i-ph-download-simple",size:"sm",onClick:a.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title","has-back-button"]),a.filterItemsList?(m(),P(r,{key:0,type:n.type,"filter-items-list":a.filterItemsList,"group-by-filter-items-list":o.groupByfilterItemsList,"selected-group-by-filter":o.selectedGroupByFilter,"current-filter":o.selectedFilter,onDateRangeChange:a.onDateRangeChange,onFilterChange:a.onFilterChange,onGroupByFilterChange:a.onGroupByFilterChange,onBusinessHoursToggle:a.onBusinessHoursToggle},null,8,["type","filter-items-list","group-by-filter-items-list","selected-group-by-filter","current-filter","onDateRangeChange","onFilterChange","onGroupByFilterChange","onBusinessHoursToggle"])):x("",!0),a.filterItemsList.length?(m(),P(d,{key:1,"group-by":o.groupBy,"report-keys":a.reportKeys},null,8,["group-by","report-keys"])):x("",!0)],64)}const bl=Re(Kie,[["render",zie]]),Wie={key:1,class:"w-full py-20"},jie={__name:"AgentReportsShow",setup(e){const t=xn(),n=Ot(),s=La("agents/getAgentById",t.params.id);return ut(()=>n.dispatch("agents/get")),(o,a)=>I(s).id?(m(),P(bl,{key:I(s).id,type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","selected-item":I(s),"download-button-label":o.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),"report-title":o.$t("AGENT_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(m(),f("div",Wie,[b(Gs,{class:"mx-auto"})]))}},Yie={key:1,class:"w-full py-20"},Xie={__name:"InboxReportsShow",setup(e){const t=xn(),n=La("inboxes/getInboxById",t.params.id);return(s,o)=>I(n).id?(m(),P(bl,{key:I(n).id,type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","selected-item":I(n),"download-button-label":s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":s.$t("INBOX_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(m(),f("div",Yie,[b(Gs,{class:"mx-auto"})]))}},qie={key:1,class:"w-full py-20"},Zie={__name:"TeamReportsShow",setup(e){const t=xn(),n=La("teams/getTeamById",t.params.id);return(s,o)=>I(n).id?(m(),P(bl,{key:I(n).id,type:"team","getter-key":"teams/getTeams","action-key":"teams/get","selected-item":I(n),"download-button-label":s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":s.$t("TEAM_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(m(),f("div",qie,[b(Gs,{class:"mx-auto"})]))}},Qie={__name:"AgentReports",setup(e){return(t,n)=>(m(),P(bl,{key:"agent-reports",type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","download-button-label":t.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),"report-title":t.$t("AGENT_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},Jie={__name:"InboxReports",setup(e){return(t,n)=>(m(),P(bl,{key:"inbox-reports",type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","download-button-label":t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":t.$t("INBOX_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},ele={__name:"LabelReports",setup(e){return(t,n)=>(m(),P(bl,{key:"label-reports",type:"label","getter-key":"labels/getLabels","action-key":"labels/get","download-button-label":t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":t.$t("LABEL_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},tle={__name:"TeamReports",setup(e){return(t,n)=>(m(),P(bl,{key:"team-reports",type:"team","getter-key":"teams/getTeams","action-key":"teams/get","download-button-label":t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":t.$t("TEAM_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},nle={class:"flex items-center m-0 text-sm font-medium text-n-slate-11"},sle={"data-test-id":"reportMetricLabel"},ale={"data-test-id":"reportMetricValue",class:"mt-1 mb-0 text-2xl text-n-slate-12"},Kr={__name:"ReportMetricCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},infoText:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup(e){return(t,n)=>{const s=F("fluent-icon"),o=ct("tooltip");return m(),f("div",{"data-test-id":"reportMetricContainer",class:re({"grayscale pointer-events-none opacity-30":e.disabled})},[c("h3",nle,[c("span",sle,v(e.label),1),ie(b(s,{"data-test-id":"reportMetricInfo",size:"14",icon:"info",class:"text-n-slate-11 my-0 mx-1 mt-0.5"},null,512),[[o,e.infoText]])]),c("h4",ale,v(e.value),1)],2)}}},ole={components:{BarChart:HE,CsatMetricCard:Kr},props:{filters:{type:Object,required:!0}},data(){return{csatRatings:tl}},computed:{...gt({metrics:"csat/getMetrics",ratingPercentage:"csat/getRatingPercentage",satisfactionScore:"csat/getSatisfactionScore",responseRate:"csat/getResponseRate"}),ratingFilterEnabled(){return!!this.filters.rating},chartData(){const e=[...tl].sort((t,n)=>n.value-t.value);return{labels:["Rating"],datasets:e.map(t=>({label:t.emoji,data:[this.ratingPercentage[t.value]],backgroundColor:t.color}))}},responseCount(){return this.metrics.totalResponseCount?this.metrics.totalResponseCount.toLocaleString():"--"},chartOptions(){return{indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,stacked:!0},y:{display:!1,stacked:!0}}}}},methods:{formatToPercent(e){return e?`${e}%`:"--"},ratingToEmoji(e){return tl.find(t=>t.value===Number(e)).emoji}}},ile={class:"flex-col lg:flex-row flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-8 gap-4"},lle={key:0,ref:"csatBarChart",class:"w-full md:w-1/2 md:max-w-[50%] flex-1 rtl:[direction:initial]"},rle={class:"flex items-center m-0 text-xs font-medium md:text-sm text-n-slate-12"},cle={class:"flex flex-row-reverse justify-end"},dle={class:"my-0 mx-0.5"},ule={class:"mt-2 h-6"};function mle(e,t,n,s,o,a){const i=F("CsatMetricCard"),l=F("BarChart");return m(),f("div",ile,[b(i,{label:e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:a.responseCount,class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),b(i,{disabled:a.ratingFilterEnabled,label:e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.TOOLTIP"),value:a.ratingFilterEnabled?"--":a.formatToPercent(e.satisfactionScore),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["disabled","label","info-text","value"]),b(i,{label:e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.TOOLTIP"),value:a.formatToPercent(e.responseRate),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),e.metrics.totalResponseCount&&!a.ratingFilterEnabled?(m(),f("div",lle,[c("h3",rle,[c("div",cle,[(m(!0),f(pe,null,ye(e.ratingPercentage,(r,d,u)=>(m(),f("div",{key:r+d+u,class:"ltr:pr-4 rtl:pl-4"},[c("span",dle,v(a.ratingToEmoji(d)),1),c("span",null,v(a.formatToPercent(r)),1)]))),128))])]),c("div",ule,[b(l,{collection:a.chartData,"chart-options":a.chartOptions},null,8,["collection","chart-options"])])],512)):x("",!0)])}const ple=Re(ole,[["render",mle]]),JA=Symbol("DropdownControl");function hle(){const e=to(JA,null);if(e===null)throw new Error("Component is missing a parent <DropdownContainer /> component.");return e}function fle(e){qn(JA,e)}const gle={class:"relative space-y-2"},_le={key:0,class:"absolute"},El={__name:"DropdownContainer",emits:["close"],setup(e,{emit:t}){const n=t,[s,o]=la(!1),a=()=>{s.value&&(n("close"),o(!1))};return fle({isOpen:s,toggle:o,closeMenu:a}),(i,l)=>ie((m(),f("div",gle,[et(i.$slots,"trigger",{isOpen:I(s),toggle:()=>I(o)()}),I(s)?(m(),f("div",_le,[et(i.$slots,"default")])):x("",!0)])),[[I(qo),a]])}},vle={class:"-mx-2 n-dropdown-section"},ble={key:0,class:"px-4 mb-3 mt-1 leading-4 font-medium tracking-[0.2px] text-n-slate-10 text-xs"},Ele={class:"gap-2 grid reset-base list-none px-2"},cr={__name:"DropdownSection",props:{title:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",vle,[e.title?(m(),f("div",ble,v(e.title),1)):x("",!0),c("ul",Ele,[et(t.$slots,"default")])]))}},Tle={class:"absolute"},Tl={__name:"DropdownBody",props:{strong:{type:Boolean,default:!1}},setup(e){const t=w(()=>e.strong?"border-n-strong":"border-n-weak"),n=w(()=>e.strong?"before:content-['\0A0'] before:absolute before:bottom-0 before:left-0 before:w-full before:h-full before:rounded-xl before:backdrop-contrast-70 before:backdrop-blur-sm before:z-0 [&>*]:relative":"");return(s,o)=>(m(),f("div",Tle,[c("ul",{class:re(["text-sm bg-n-alpha-3 backdrop-blur-[100px] border rounded-xl shadow-sm py-2 n-dropdown-body gap-2 grid list-none px-2 reset-base relative",[t.value,n.value]])},[et(s.$slots,"default")],2)]))}},yle={class:"n-dropdown-item"},Fa=Object.assign({inheritAttrs:!1},{__name:"DropdownItem",props:{label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},link:{type:[String,Object],default:""},nativeLink:{type:Boolean,default:!1},click:{type:Function,default:null},preserveOpen:{type:Boolean,default:!1}},setup(e){const t=e,{closeMenu:n}=hle(),s=w(()=>t.link?t.nativeLink&&typeof t.link=="string"?"a":"router-link":t.click?"button":"div"),o=()=>{t.click&&t.click(),t.preserveOpen||n()};return(a,i)=>(m(),f("li",yle,[(m(),P(hs(s.value),As(a.$attrs,{class:["flex text-left rtl:text-right items-center p-2 reset-base text-sm text-n-slate-12 w-full border-0",{"hover:bg-n-alpha-2 rounded-lg w-full gap-3":!a.$slots.default}],href:s.value==="a"?t.link:null,to:s.value==="router-link"?t.link:null,onClick:o}),{default:j(()=>[et(a.$slots,"default",{},()=>[et(a.$slots,"icon",{},()=>[e.icon?(m(),P(Ht,{key:0,class:"size-4 text-n-slate-11",icon:e.icon},null,8,["icon"])):x("",!0)]),et(a.$slots,"label",{},()=>[be(v(e.label),1)])])]),_:3},16,["class","href","to"]))]))}}),qd={__name:"FilterSelect",props:On({options:{type:Array,required:!0},hideLabel:{type:Boolean,default:!1},hideIcon:{type:Boolean,default:!1},variant:{type:String,default:"faded"}},{modelValue:{type:[String,Number],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Wn(e,"modelValue"),s=w(()=>t.options.find(i=>i.value===n.value)||{}),o=w(()=>t.hideIcon?null:s.value.icon||"i-lucide-chevron-down"),a=i=>{n.value=i};return(i,l)=>(m(),P(El,null,{trigger:j(({toggle:r})=>[et(i.$slots,"trigger",{toggle:r},()=>[b(he,{sm:"",slate:"",variant:e.variant,icon:o.value,"trailing-icon":!s.value.icon,label:e.hideLabel?null:s.value.label,onClick:r},null,8,["variant","icon","trailing-icon","label","onClick"])])]),default:j(()=>[b(Tl,{class:"top-0 min-w-48 z-50",strong:""},{default:j(()=>[b(cr,{class:"max-h-80 overflow-scroll"},{default:j(()=>[(m(!0),f(pe,null,ye(e.options,r=>(m(),P(Fa,{key:r.value,label:r.label,icon:r.icon,onClick:d=>a(r.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1})]),_:3}))}},Ale={class:"flex items-center justify-between"},Sle={class:"flex flex-1 items-center gap-2 justify-between"},Ile={class:"text-sm truncate text-n-slate-11 mb-0"},Cle={class:"flex items-center gap-2"},Nle={class:"isolate inline-flex items-center gap-1.5"},m_={__name:"Pagination",props:{table:{type:Object,required:!0},defaultPageSize:{type:Number,default:10},showPageSizeSelector:{type:Boolean,default:!1}},emits:["pageSizeChange"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=[{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:10})}`,value:10},{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:20})}`,value:20},{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:50})}`,value:50},{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:100})}`,value:100}],i=(_,T)=>{const S=new Intl.NumberFormat(navigator.language);return Array.from({length:T-_+1},(E,y)=>S.format(_+y))},l=w(()=>n.table.getState().pagination.pageIndex+1),r=w(()=>n.table.getPageCount()),d=w(()=>r.value<=3?i(1,r.value):l.value===1?i(1,3):l.value===r.value?i(r.value-2,r.value):i(l.value-1,l.value+1)),u=w(()=>n.table.getRowCount()),p=w(()=>{const{pagination:_}=n.table.getState();return _.pageIndex*_.pageSize+1}),h=w(()=>{const{pagination:_}=n.table.getState();return Math.min((_.pageIndex+1)*_.pageSize,u.value)}),g=w({get(){return n.table.getState().pagination.pageSize},set(_){n.table.setPageSize(Number(_)),s("pageSizeChange",Number(_))}});return ut(()=>{n.showPageSizeSelector&&n.defaultPageSize&&n.defaultPageSize!==10&&n.table.setPageSize(n.defaultPageSize)}),(_,T)=>(m(),f("div",Ale,[c("div",Sle,[c("p",Ile,v(_.$t("REPORT.PAGINATION.RESULTS",{start:p.value,end:h.value,total:u.value})),1),c("div",Cle,[e.showPageSizeSelector?(m(),P(qd,{key:0,modelValue:g.value,"onUpdate:modelValue":T[0]||(T[0]=S=>g.value=S),variant:"outline","hide-icon":"",class:"[&>button]:text-n-slate-11 [&>button]:hover:text-n-slate-12 [&>button]:h-6",options:a},null,8,["modelValue"])):x("",!0),c("nav",Nle,[b(he,{icon:"i-lucide-chevrons-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:T[1]||(T[1]=S=>e.table.setPageIndex(0))},null,8,["disabled"]),b(he,{icon:"i-lucide-chevron-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:T[2]||(T[2]=S=>e.table.previousPage())},null,8,["disabled"]),(m(!0),f(pe,null,ye(d.value,S=>(m(),P(he,{key:S,xs:"",outline:"",color:S==l.value?"blue":"slate",class:"!h-6 min-w-6",onClick:E=>e.table.setPageIndex(S-1)},{default:j(()=>[c("span",{class:re(["text-center",{"text-n-brand":S==l.value}])},v(S),3)]),_:2},1032,["color","onClick"]))),128)),b(he,{icon:"i-lucide-chevron-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:T[3]||(T[3]=S=>e.table.nextPage())},null,8,["disabled"]),b(he,{icon:"i-lucide-chevrons-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:T[4]||(T[4]=S=>e.table.setPageIndex(e.table.getPageCount()-1))},null,8,["disabled"])])])])]))}},Ole={class:"flex items-center gap-1.5 text-left"},Mu={__name:"UserAvatarWithName",props:{user:{type:Object,default:()=>({})},size:{type:String,default:"20px"},textClass:{type:String,default:"text-sm text-n-slate-12"}},setup(e){return(t,n)=>(m(),f("div",Ole,[b(Qn,{src:e.user.thumbnail,size:e.size,username:e.user.name,status:e.user.availability_status},null,8,["src","size","username","status"]),c("span",{class:re(["my-0 overflow-hidden whitespace-nowrap text-ellipsis text-capitalize",e.textClass])},v(e.user.name),3)]))}},xle={class:"text-right"},wle={class:"text-slate-600 dark:text-slate-200 text-sm"},Rle={__name:"ConversationCell",props:{row:{type:Object,required:!0}},setup(e){const t={name:"inbox_conversation",params:{conversation_id:e.row.original.conversationId}};return(n,s)=>{const o=F("router-link"),a=ct("tooltip");return m(),f("div",xle,[b(o,{to:t,class:"hover:underline"},{default:j(()=>[be(v(`#${e.row.original.conversationId}`),1)]),_:1}),ie((m(),f("div",wle,[be(v(e.row.original.createdAgo),1)])),[[a,e.row.original.createdAt]])])}}},$le={class:"shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},Mle={key:0,class:"table-pagination"},kle={__name:"CsatTable",props:{pageIndex:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=Ve("csat/getCSATResponses"),a=Ve("csat/getMetrics"),i=w(()=>o.value.map(h=>({contact:h.contact,assignedAgent:h.assigned_agent,rating:h.rating,feedbackText:h.feedback_message||"---",conversationId:h.conversation_id,createdAgo:ms(h.created_at),createdAt:su(h.created_at,"LLL d yyyy, h:mm a")}))),l=h=>kn("span",{class:h.getValue()?"":"text-slate-300 dark:text-slate-700"},h.getValue()?h.getValue():"---"),r=hm(),d=[r.accessor("contact",{header:s("CSAT_REPORTS.TABLE.HEADER.CONTACT_NAME"),width:200,cell:h=>{const{contact:g}=h.row.original;return g?kn(Mu,{user:g}):"--"}}),r.accessor("assignedAgent",{header:s("CSAT_REPORTS.TABLE.HEADER.AGENT_NAME"),width:200,cell:h=>{const{assignedAgent:g}=h.row.original;return g?kn(Mu,{user:g}):"--"}}),r.accessor("rating",{header:s("CSAT_REPORTS.TABLE.HEADER.RATING"),align:"center",width:80,cell:h=>{const{rating:g}=h.row.original,[_={}]=tl.filter(T=>T.value===g);return kn("span",{class:_.emoji?"emoji-response text-lg":"text-slate-300 dark:text-slate-700"},_.emoji||"---")}}),r.accessor("feedbackText",{header:s("CSAT_REPORTS.TABLE.HEADER.FEEDBACK_TEXT"),width:400,cell:l}),r.accessor("conversationId",{header:"",width:100,cell:h=>kn(Rle,h)})],u=w(()=>({pageIndex:e.pageIndex,pageSize:25})),p=_m({get data(){return i.value},columns:d,manualPagination:!0,enableSorting:!1,getCoreRowModel:gm(),get rowCount(){return a.value.totalResponseCount},state:{get pagination(){return u.value}},onPaginationChange:h=>{const g=h(u.value);n("pageChange",g.pageIndex)}});return(h,g)=>(m(),f("div",$le,[b(vm,{table:I(p),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),ie(c("div",{class:"h-48 flex items-center justify-center text-n-slate-12 text-sm"},v(h.$t("CSAT_REPORTS.NO_RECORDS")),513),[[ln,!i.value.length]]),I(a).totalResponseCount?(m(),f("div",Mle,[b(m_,{class:"mt-2",table:I(p)},null,8,["table"])])):x("",!0)]))}},Lle={name:"CsatResponses",components:{CsatMetrics:ple,CsatTable:kle,ReportFilterSelector:pm,ReportHeader:ei,V4Button:he},data(){return{pageIndex:0,from:0,to:0,userIds:[],inbox:null,team:null,rating:null}},computed:{...gt({accountId:"getCurrentAccountId",isFeatureEnabledOnAccount:"accounts/isFeatureEnabledonAccount"}),requestPayload(){return{from:this.from,to:this.to,user_ids:this.userIds,inbox_id:this.inbox,team_id:this.team,rating:this.rating}},isTeamsEnabled(){return this.isFeatureEnabledOnAccount(this.accountId,xt.TEAM_MANAGEMENT)}},methods:{getAllData(){try{this.$store.dispatch("csat/getMetrics",this.requestPayload),this.getResponses()}catch{Te(this.$t("REPORT.DATA_FETCHING_FAILED"))}},getResponses(){this.$store.dispatch("csat/get",{page:this.pageIndex+1,...this.requestPayload})},downloadReports(){const e="csat";try{this.$store.dispatch("csat/downloadCSATReports",{fileName:xc({type:e,to:this.to}),...this.requestPayload})}catch{Te(this.$t("REPORT.CSAT_REPORTS.DOWNLOAD_FAILED"))}},onPageNumberChange(e){this.pageIndex=e,this.getResponses()},onFilterChange({from:e,to:t,selectedAgents:n,selectedInbox:s,selectedTeam:o,selectedRating:a}){this.from!==0&&this.to!==0&&jt(Kl.FILTER_REPORT,{filterType:"date",reportType:"csat"}),this.from=e,this.to=t,this.userIds=n.map(i=>i.id),this.inbox=s==null?void 0:s.id,this.team=o==null?void 0:o.id,this.rating=a==null?void 0:a.value,this.getAllData()}}},Dle={class:"flex flex-col gap-4"};function Ple(e,t,n,s,o,a){const i=F("V4Button"),l=F("ReportHeader"),r=F("ReportFilterSelector"),d=F("CsatMetrics"),u=F("CsatTable");return m(),f(pe,null,[b(l,{"header-title":e.$t("CSAT_REPORTS.HEADER")},{default:j(()=>[b(i,{label:e.$t("CSAT_REPORTS.DOWNLOAD"),icon:"i-ph-download-simple",size:"sm",onClick:a.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),c("div",Dle,[b(r,{"show-agents-filter":"","show-inbox-filter":"","show-rating-filter":"","show-team-filter":a.isTeamsEnabled,"show-business-hours-switch":!1,onFilterChange:a.onFilterChange},null,8,["show-team-filter","onFilterChange"]),b(d,{filters:a.requestPayload},null,8,["filters"]),b(u,{"page-index":o.pageIndex,onPageChange:a.onPageNumberChange},null,8,["page-index","onPageChange"])])],64)}const Ble=Re(Lle,[["render",Ple]]),Fle={class:"flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},Ule={__name:"BotMetrics",props:{filters:{type:Object,required:!0}},setup(e){const t=e,n=U("0"),s=U("0"),o=U("0"),a=U("0"),i=r=>r?`${r}%`:"--",l=()=>{!t.filters.to||!t.filters.from||JN.getBotMetrics(t.filters).then(r=>{n.value=r.data.conversation_count.toLocaleString(),s.value=r.data.message_count.toLocaleString(),o.value=r.data.resolution_rate.toString(),a.value=r.data.handoff_rate.toString()})};return lt(()=>t.filters,l,{deep:!0}),ut(l),(r,d)=>(m(),f("div",Fle,[b(Kr,{label:r.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP"),value:n.value,class:"flex-1"},null,8,["label","info-text","value"]),b(Kr,{label:r.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:s.value,class:"flex-1"},null,8,["label","info-text","value"]),b(Kr,{label:r.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP"),value:i(o.value),class:"flex-1"},null,8,["label","info-text","value"]),b(Kr,{label:r.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP"),value:i(a.value),class:"flex-1"},null,8,["label","info-text","value"])]))}},Gle={name:"BotReports",components:{BotMetrics:Ule,ReportHeader:ei,ReportFilterSelector:pm,ReportContainer:l_},data(){return{from:0,to:0,groupBy:ws[1],reportKeys:{BOT_RESOLUTION_COUNT:"bot_resolutions_count",BOT_HANDOFF_COUNT:"bot_handoffs_count"},businessHours:!1}},computed:{requestPayload(){return{from:this.from,to:this.to}}},methods:{fetchAllData(){this.fetchBotSummary(),this.fetchChartData()},fetchBotSummary(){try{this.$store.dispatch("fetchBotSummary",this.getRequestPayload())}catch{Te(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],...this.getRequestPayload()})}catch{Te(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),jt(Kl.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"bots"})}}},Vle={class:"flex flex-col gap-4"};function Hle(e,t,n,s,o,a){const i=F("ReportHeader"),l=F("ReportFilterSelector"),r=F("BotMetrics"),d=F("ReportContainer");return m(),f(pe,null,[b(i,{"header-title":e.$t("BOT_REPORTS.HEADER")},null,8,["header-title"]),c("div",Vle,[b(l,{"show-agents-filter":!1,"show-group-by-filter":"","show-business-hours-switch":!1,onFilterChange:a.onFilterChange},null,8,["onFilterChange"]),b(r,{filters:a.requestPayload},null,8,["filters"]),b(d,{"account-summary-key":"getBotSummary","summary-fetching-key":"getBotSummaryFetchingStatus","group-by":o.groupBy,"report-keys":o.reportKeys},null,8,["group-by","report-keys"])])],64)}const Kle=Re(Gle,[["render",Hle]]),zle={class:"flex flex-col m-0.5 px-6 py-5 rounded-xl flex-grow text-n-slate-12 shadow outline-1 outline outline-n-container bg-n-solid-2 min-h-[10rem]"},Wle={class:"card-header grid w-full mb-6 grid-cols-[repeat(auto-fit,minmax(max-content,50%))] gap-y-2"},jle={class:"flex items-center gap-2 flex-row"},Yle={class:"mb-0 text-n-slate-12 font-medium text-lg"},Xle={class:"flex flex-row items-center py-0.5 px-2 rounded bg-n-teal-3 text-xs"},qle={class:"text-xs text-n-teal-11"},Zle={class:"flex flex-row items-center justify-end gap-2"},Qle={key:0,class:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},Jle={key:1,class:"items-center flex text-base justify-center px-12 py-6"},ere={class:"text-n-slate-11"},Tc={__name:"MetricCard",props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",zle,[c("div",Wle,[et(t.$slots,"header",{},()=>[c("div",jle,[c("h5",Yle,v(e.header),1),c("span",Xle,[n[0]||(n[0]=c("span",{class:"bg-n-teal-9 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"},null,-1)),c("span",qle,v(t.$t("OVERVIEW_REPORTS.LIVE")),1)])]),c("div",Zle,[et(t.$slots,"control")])])]),e.isLoading?e.isLoading?(m(),f("div",Jle,[b(Os),c("span",ere,v(e.loadingMessage),1)])):x("",!0):(m(),f("div",Qle,[et(t.$slots,"default")]))]))}},tre={class:"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72"},nre={class:"grid gap-[5px] flex-shrink-0"},sre={class:"grid gap-[5px] w-full min-w-[700px]"},are={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200"},ore={class:"grid gap-[5px] flex-shrink-0"},ire={class:"font-normal text-slate-700 dark:text-slate-200"},lre={class:"grid gap-[5px] w-full min-w-[700px]"},rre={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200"},cre={__name:"Heatmap",props:{heatmapData:{type:Array,default:()=>[]},numberOfRows:{type:Number,default:7},isLoading:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=He(),s=w(()=>eO(t.heatmapData)),o=w(()=>{const d=t.heatmapData.map(u=>u.value);return bN(d,[.2,.4,.6,.8,.9,.99])});function a(d){return d?d===1?n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION",{count:d}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:d}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS")}function i(d){return Ln(new Date(d),"MMM d, yyyy")}function l(d){const u=Hk(d);return[n("DAYS_OF_WEEK.SUNDAY"),n("DAYS_OF_WEEK.MONDAY"),n("DAYS_OF_WEEK.TUESDAY"),n("DAYS_OF_WEEK.WEDNESDAY"),n("DAYS_OF_WEEK.THURSDAY"),n("DAYS_OF_WEEK.FRIDAY"),n("DAYS_OF_WEEK.SATURDAY")][u]}function r(d){if(!d)return"outline-n-container dark:bg-slate-700/40 bg-slate-50/50";let u=[...o.value,1/0].findIndex(h=>d<=h&&d>0);return u>6&&(u=5),u===0?"outline-n-container dark:bg-slate-700/40 bg-slate-50/50":["bg-woot-50 dark:bg-woot-800/40 dark:outline-woot-800/80","bg-woot-100 dark:bg-woot-800/30 dark:outline-woot-800/80","bg-woot-200 dark:bg-woot-500/40 dark:outline-woot-700/80","bg-woot-300 dark:bg-woot-500/60 dark:outline-woot-600/80","bg-woot-600 dark:bg-woot-500/80 dark:outline-woot-500/80","bg-woot-800 dark:bg-woot-500 dark:outline-woot-400/80"][u-1]}return(d,u)=>{const p=ct("tooltip");return m(),f("div",tre,[e.isLoading?(m(),f(pe,{key:0},[c("div",nre,[(m(!0),f(pe,null,ye(e.numberOfRows,h=>(m(),f("div",{key:h,class:"w-full rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse h-8 min-w-[70px]"}))),128))]),c("div",sre,[(m(!0),f(pe,null,ye(e.numberOfRows,h=>(m(),f("div",{key:h,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(m(),f(pe,null,ye(24,g=>c("div",{key:g,class:"w-full h-8 rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse"})),64))]))),128))]),u[0]||(u[0]=c("div",null,null,-1)),c("div",are,[(m(),f(pe,null,ye(24,h=>c("div",{key:h,class:"flex items-center justify-center"},v(h-1)+"  "+v(h),1)),64))])],64)):(m(),f(pe,{key:1},[c("div",ore,[(m(!0),f(pe,null,ye(s.value.keys(),h=>(m(),f("div",{key:h,class:"h-8 min-w-[70px] text-slate-800 dark:text-slate-200 text-[10px] font-semibold flex flex-col items-end justify-center"},[be(v(l(new Date(h)))+" ",1),c("time",ire,v(i(h)),1)]))),128))]),c("div",lre,[(m(!0),f(pe,null,ye(s.value.keys(),h=>(m(),f("div",{key:h,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(m(!0),f(pe,null,ye(s.value.get(h),g=>ie((m(),f("div",{key:g.timestamp,class:re(["h-8 rounded-sm shadow-inner dark:outline dark:outline-1 shadow-black",r(g.value)])},null,2)),[[p,a(g.value),void 0,{top:!0}]])),128))]))),128))]),u[1]||(u[1]=c("div",null,null,-1)),c("div",rre,[(m(),f(pe,null,ye(24,h=>c("div",{key:h,class:"flex items-center justify-center"},v(h-1)+"  "+v(h),1)),64))])],64))])}}},bm=(e,t=6e4)=>{const n=U(null),s=()=>{n.value=setTimeout(async()=>{await e(),s()},t)},o=()=>{n.value&&(clearTimeout(n.value),n.value=null)};return ml(()=>{o()}),{startRefetching:s,stopRefetching:o}},dre={class:"bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container absolute rounded-xl z-50 py-2 px-2 gap-2 flex flex-col min-w-[136px] shadow-lg"},ure={key:0,class:"relative"},mre=["placeholder"],pre=["disabled","onClick"],hre={key:1,class:"flex-shrink-0"},fre={key:1,class:"text-sm text-n-slate-11 px-2 py-1.5"},ma={__name:"DropdownMenu",props:{menuItems:{type:Array,required:!0,validator:e=>e.every(t=>t.action&&t.value&&t.label)},thumbnailSize:{type:Number,default:20},showSearch:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},isSearching:{type:Boolean,default:!1},labelClass:{type:String,default:""}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(null),i=U(""),l=w(()=>i.value?n.menuItems.filter(d=>d.label.toLowerCase().includes(i.value.toLowerCase())):n.menuItems),r=d=>{const{action:u,value:p,...h}=d;s("action",{action:u,value:p,...h})};return ut(()=>{a.value&&n.showSearch&&a.value.focus()}),(d,u)=>(m(),f("div",dre,[e.showSearch?(m(),f("div",ure,[u[1]||(u[1]=c("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),ie(c("input",{ref_key:"searchInput",ref:a,"onUpdate:modelValue":u[0]||(u[0]=p=>i.value=p),type:"search",placeholder:e.searchPlaceholder||I(o)("DROPDOWN_MENU.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-8 py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,mre),[[at,i.value]])])):x("",!0),(m(!0),f(pe,null,ye(l.value,(p,h)=>(m(),f("button",{key:h,class:re(["inline-flex items-center justify-start w-full h-8 min-w-0 gap-2 px-2 py-1.5 transition-all duration-200 ease-in-out border-0 rounded-lg z-60 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2 disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50",{"bg-n-alpha-1 dark:bg-n-solid-active":p.isSelected,"text-n-ruby-11":p.action==="delete","text-n-slate-12":p.action!=="delete"}]),disabled:p.disabled,onClick:g=>r(p)},[et(d.$slots,"thumbnail",{item:p},()=>[p.thumbnail?(m(),P(yn,{key:0,name:p.thumbnail.name,src:p.thumbnail.src,size:e.thumbnailSize,"rounded-full":""},null,8,["name","src","size"])):x("",!0)]),p.icon?(m(),P(Ht,{key:0,icon:p.icon,class:"flex-shrink-0 size-3.5"},null,8,["icon"])):x("",!0),p.emoji?(m(),f("span",hre,v(p.emoji),1)):x("",!0),p.label?(m(),f("span",{key:2,class:re(["min-w-0 text-sm truncate",e.labelClass])},v(p.label),3)):x("",!0)],10,pre))),128)),l.value.length===0?(m(),f("div",fre,v(e.isSearching?I(o)("DROPDOWN_MENU.SEARCHING"):I(o)("DROPDOWN_MENU.EMPTY_STATE")),1)):x("",!0)]))}},gre={class:"flex flex-row flex-wrap max-w-full"},_re={class:"relative flex items-center group"},vre={__name:"HeatmapContainer",setup(e){const t=Ot(),n=Ve("getOverviewUIFlags"),s=Ve("getAccountConversationHeatmapData"),{t:o}=He(),a=[{label:o("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS"),value:6},{label:o("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS"),value:29}],i=U(6),l=w(()=>a.find(_=>_.value===i.value)),r=()=>{const _=ho(new Date);t.dispatch("downloadAccountConversationHeatmap",{daysBefore:i.value,to:go(_)})},[d,u]=la(),p=()=>{if(n.value.isFetchingAccountConversationsHeatmap)return;let _=ho(new Date),T=oa(Ho(_,Number(i.value)));t.dispatch("fetchAccountConversationHeatmap",{metric:"conversations_count",from:go(T),to:go(_),groupBy:"hour",businessHours:!1})},h=({value:_})=>{u(!1),i.value=_,p()},{startRefetching:g}=bm(p);return ut(()=>{p(),g()}),(_,T)=>{const S=ct("on-clickaway");return m(),f("div",gre,[b(Tc,{header:_.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER")},{control:j(()=>[ie((m(),f("div",_re,[b(he,{sm:"",slate:"",faded:"",label:l.value.label,class:"rounded-md group-hover:bg-n-alpha-2",onClick:T[0]||(T[0]=E=>I(u)())},null,8,["label"]),I(d)?(m(),P(ma,{key:0,"menu-items":a,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:T[1]||(T[1]=E=>h(E))})):x("",!0)])),[[S,()=>I(u)(!1)]]),b(he,{sm:"",slate:"",faded:"",label:I(o)("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.DOWNLOAD_REPORT"),class:"rounded-md group-hover:bg-n-alpha-2",onClick:r},null,8,["label"])]),default:j(()=>[b(cre,{"heatmap-data":I(s),"number-of-rows":i.value+1,"is-loading":I(n).isFetchingAccountConversationsHeatmap},null,8,["heatmap-data","number-of-rows","is-loading"])]),_:1},8,["header"])])}}},bre={key:1,class:"text-slate-300 dark:text-slate-700"},Ere={__name:"BaseCell",props:{content:{type:String,default:""}},setup(e){const t=Ve("accounts/isRTL");return(n,s)=>(m(),f("div",{class:re(["overflow-hidden whitespace-nowrap text-ellipsis",{"text-right":I(t)}])},[n.$slots.default||e.content?et(n.$slots,"default",{key:0},()=>[e.content?(m(),f(pe,{key:0},[be(v(e.content),1)],64)):x("",!0)]):(m(),f("span",bre," --- "))],2))}},Tre={class:"items-start flex flex-col min-w-0 my-0 mx-2"},yre={class:"overflow-hidden text-sm m-0 leading-[1.2] text-slate-800 dark:text-slate-100 whitespace-nowrap text-ellipsis"},Are={class:"text-xs text-slate-600 dark:text-slate-200"},Sre={__name:"AgentCell",props:{row:{type:Object,required:!0}},setup(e){const t=Ve("accounts/isRTL");return(n,s)=>(m(),P(Ere,null,{default:j(()=>[c("div",{class:re(["items-center flex text-left",{"flex-row-reverse":I(t)}])},[b(Qn,{src:e.row.original.thumbnail,size:"32px",username:e.row.original.agent,status:e.row.original.status},null,8,["src","username","status"]),c("div",Tre,[c("h6",yre,v(e.row.original.agent),1),c("span",Are,v(e.row.original.email),1)])],2)]),_:1}))}},Ire={class:"flex flex-col flex-1"},Cre={key:0,class:"items-center flex text-base justify-center p-8"},ib="report_overview_agent_table_page_size",Nre={__name:"AgentTable",props:{agents:{type:Array,default:()=>[]},agentMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=He(),{uiSettings:n,updateUISettings:s}=Mn(),o=()=>n.value[ib]||10,a=h=>{s({[ib]:h})},i=h=>e.agentMetrics.find(g=>g.assignee_id===Number(h))||{},l=w(()=>e.agents.map(h=>{const g=i(h.id);return{agent:h.available_name||h.name,email:h.email,thumbnail:h.thumbnail,open:g.open||0,unattended:g.unattended||0,status:h.availability_status}}).sort((h,g)=>{const _=g.open-h.open;return _===0?h.agent.localeCompare(g.agent):_})),r=h=>kn("span",{class:h.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},h.getValue()?h.getValue():"---"),d=hm(),u=[d.accessor("agent",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),cell:h=>kn(Sre,h),size:250}),d.accessor("open",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:r,size:100}),d.accessor("unattended",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:r,size:100})],p=_m({get data(){return l.value},columns:u,enableSorting:!1,getCoreRowModel:gm(),getPaginationRowModel:QA(),initialState:{pagination:{pageSize:o()}}});return(h,g)=>(m(),f("div",Ire,[b(vm,{table:I(p),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),b(m_,{class:"mt-2",table:I(p),"show-page-size-selector":"","default-page-size":o(),onPageSizeChange:a},null,8,["table","default-page-size"]),e.isLoading?(m(),f("div",Cre,[b(Os),c("span",null,v(h.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.agents.length?(m(),P(vl,{key:1,title:h.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")},null,8,["title"])):x("",!0)]))}},Ore={class:"flex flex-row flex-wrap max-w-full"},xre={__name:"AgentLiveReportContainer",setup(e){const t=Ot(),n=Ve("getOverviewUIFlags"),s=Ve("getAgentConversationMetric"),o=Ve("agents/getAgents"),a=()=>t.dispatch("fetchAgentConversationMetric"),{startRefetching:i}=bm(a);return ut(()=>{t.dispatch("agents/get"),a(),i()}),(l,r)=>(m(),f("div",Ore,[b(Tc,{header:l.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")},{default:j(()=>[b(Nre,{agents:I(o),"agent-metrics":I(s),"is-loading":I(n).isFetchingAgentConversationMetric},null,8,["agents","agent-metrics","is-loading"])]),_:1},8,["header"])]))}},wre={class:"flex flex-col flex-1"},Rre={key:0,class:"items-center flex text-base justify-center p-8"},lb="report_overview_team_table_page_size",$re={__name:"TeamTable",props:{teams:{type:Array,default:()=>[]},teamMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=He(),{uiSettings:n,updateUISettings:s}=Mn(),o=()=>n.value[lb]||10,a=h=>{s({[lb]:h})},i=h=>e.teamMetrics.find(g=>g.team_id===Number(h))||{},l=w(()=>e.teams.map(h=>{const g=i(h.id);return{agent:h.name,open:g.open||0,unattended:g.unattended||0}}).sort((h,g)=>{const _=g.open-h.open;return _===0?h.agent.localeCompare(g.agent):_})),r=h=>kn("span",{class:h.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},h.getValue()?h.getValue():"---"),d=hm(),u=[d.accessor("agent",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.TEAM"),cell:r,size:250}),d.accessor("open",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:r,size:100}),d.accessor("unattended",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:r,size:100})],p=_m({get data(){return l.value},columns:u,enableSorting:!1,getCoreRowModel:gm(),getPaginationRowModel:QA(),initialState:{pagination:{pageSize:o()}}});return(h,g)=>(m(),f("div",wre,[b(vm,{table:I(p),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),b(m_,{class:"mt-2",table:I(p),"show-page-size-selector":"","default-page-size":o(),onPageSizeChange:a},null,8,["table","default-page-size"]),e.isLoading?(m(),f("div",Rre,[b(Os),c("span",null,v(h.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.teams.length?(m(),P(vl,{key:1,title:h.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.NO_TEAMS")},null,8,["title"])):x("",!0)]))}},Mre={class:"flex flex-row flex-wrap max-w-full"},kre={__name:"TeamLiveReportContainer",setup(e){const t=Ot(),n=Ve("getOverviewUIFlags"),s=Ve("getTeamConversationMetric"),o=Ve("teams/getTeams"),a=()=>t.dispatch("fetchTeamConversationMetric"),{startRefetching:i}=bm(a);return ut(()=>{t.dispatch("teams/get"),a(),i()}),(l,r)=>(m(),f("div",Mre,[b(Tc,{header:l.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.HEADER")},{default:j(()=>[b($re,{teams:I(o),"team-metrics":I(s),"is-loading":I(n).isFetchingTeamConversationMetric},null,8,["teams","team-metrics","is-loading"])]),_:1},8,["header"])]))}},Lre={class:"flex flex-col items-center md:flex-row gap-4"},Dre={class:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},Pre={class:"relative flex items-center group z-50"},Bre={class:"text-base text-n-slate-11"},Fre={class:"text-n-slate-12 text-3xl mb-0 mt-1"},Ure={class:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},Gre={class:"text-base text-n-slate-11"},Vre={class:"text-n-slate-12 text-3xl mb-0 mt-1"},hh="OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS",Hre={__name:"StatsLiveReportsContainer",setup(e){const{t}=He(),n=Ve("getOverviewUIFlags"),s=Ve("agents/getAgentStatus"),o=Ve("getAccountConversationMetric"),a=Ot(),i=Ve("teams/getTeams"),l=w(()=>[{label:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.ALL_TEAMS"),value:null},...i.value.map(E=>({label:E.name,value:E.id}))]),r=w(()=>{let E={};return Object.keys(s.value).forEach(y=>{const A=t(`OVERVIEW_REPORTS.AGENT_STATUS.${tb[y]}`);E[A]=s.value[y]}),E}),d=w(()=>{let E={};return Object.keys(o.value).forEach(y=>{const A=t(`${hh}.${tb[y]}`);E[A]=o.value[y]}),E}),u=U(null),p=w(()=>(l.value.find(y=>y.value===u.value)||{}).label),h=()=>{const E={};u.value&&(E.team_id=u.value),a.dispatch("fetchAccountConversationMetric",E)},{startRefetching:g}=bm(h),[_,T]=la(),S=({value:E})=>{T(!1),u.value=E,h()};return ut(()=>{h(),g()}),(E,y)=>{const A=ct("on-clickaway");return m(),f("div",Lre,[c("div",Dre,[b(Tc,{header:I(t)(`${hh}.HEADER`),"is-loading":I(n).isFetchingAccountConversationMetric,"loading-message":I(t)(`${hh}.LOADING_MESSAGE`)},Vo({default:j(()=>[(m(!0),f(pe,null,ye(d.value,(C,O,N)=>(m(),f("div",{key:N,class:"flex-1 min-w-0 pb-2"},[c("h3",Bre,v(O),1),c("p",Fre,v(C),1)]))),128))]),_:2},[I(i).length?{name:"control",fn:j(()=>[ie((m(),f("div",Pre,[b(he,{sm:"",slate:"",faded:"",label:p.value,class:"capitalize rounded-md group-hover:bg-n-alpha-2",onClick:y[0]||(y[0]=C=>I(T)())},null,8,["label"]),I(_)?(m(),P(ma,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full","label-class":"capitalize",onAction:y[1]||(y[1]=C=>S(C))},null,8,["menu-items"])):x("",!0)])),[[A,()=>I(T)(!1)]])]),key:"0"}:void 0]),1032,["header","is-loading","loading-message"])]),c("div",Ure,[b(Tc,{header:E.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")},{default:j(()=>[(m(!0),f(pe,null,ye(r.value,(C,O,N)=>(m(),f("div",{key:N,class:"flex-1 min-w-0 pb-2"},[c("h3",Gre,v(O),1),c("p",Vre,v(C),1)]))),128))]),_:1},8,["header"])])])}}},Kre={class:"flex flex-col gap-4 pb-6"},zre={__name:"LiveReports",setup(e){return(t,n)=>(m(),f(pe,null,[b(ei,{"header-title":t.$t("OVERVIEW_REPORTS.HEADER")},null,8,["header-title"]),c("div",Kre,[b(Hre),b(vre),b(xre),b(kre)])],64))}},Wre={props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},toolTip:{type:String,required:!0},isLoading:{type:Boolean,default:!1}}},jre={class:"flex flex-col gap-2 items-start justify-center min-w-[10rem]"},Yre={class:"inline-flex items-center gap-1 text-sm font-medium text-n-slate-11"},Xre={key:0,class:"w-12 h-6 mb-0.5 rounded-md bg-n-slate-3 animate-pulse"},qre={key:1,class:"text-2xl font-medium text-n-slate-12"};function Zre(e,t,n,s,o,a){const i=F("fluent-icon"),l=ct("tooltip");return m(),f("div",jre,[c("span",Yre,[be(v(n.label)+" ",1),ie(b(i,{size:"14",icon:"information",type:"outline",class:"flex flex-shrink-0 text-sm font-normal sm:font-medium text-n-slate-10"},null,512),[[l,n.toolTip,void 0,{right:!0}]])]),n.isLoading?(m(),f("div",Xre)):(m(),f("span",qre,v(n.value),1))])}const fh=Re(Wre,[["render",Zre]]),Qre={class:"flex sm:flex-row flex-col w-full gap-4 sm:gap-14 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},Jre={__name:"SLAMetrics",props:{hitRate:{type:String,required:!0},noOfBreaches:{type:Number,required:!0},noOfConversations:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){return(t,n)=>(m(),f("div",Qre,[b(fh,{label:t.$t("SLA_REPORTS.METRICS.HIT_RATE.LABEL"),value:e.hitRate,"tool-tip":t.$t("SLA_REPORTS.METRICS.HIT_RATE.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[0]||(n[0]=c("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),b(fh,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.LABEL"),value:e.noOfBreaches,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[1]||(n[1]=c("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),b(fh,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.LABEL"),value:e.noOfConversations,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"])]))}},eS={__name:"TableHeaderCell",props:{span:{type:Number,required:!0},label:{type:String,required:!0}},setup(e){const t=e,n=w(()=>t.span===1?"col-span-1":t.span===2?"col-span-2":t.span===3?"col-span-3":t.span===4?"col-span-4":t.span===5?"col-span-5":t.span===6?"col-span-6":t.span===7?"col-span-7":t.span===8?"col-span-8":t.span===9?"col-span-9":t.span===10?"col-span-10":"col-span-1");return(s,o)=>(m(),f("div",{class:re(["flex items-center px-0 py-2 text-xs font-medium text-right uppercase text-n-slate-11 rtl:text-left",n.value])},[et(s.$slots,"default",{},()=>[be(v(e.label),1)])],2))}},ece=["title"],tS={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0}},setup(e){const t=e,n=Pf(),s=Ve("labels/getLabels"),o=w(()=>s.value.filter(({title:p})=>t.conversationLabels.includes(p))),a=U(!1),i=U(!1),l=U(-1),r=U(null),d=()=>{const p=n.before?100:0;if(!r.value)return;const h=Array.from(r.value.querySelectorAll(".label"));let g=0;i.value=!1,h.forEach((_,T)=>{g+=_.offsetWidth+8,g<r.value.clientWidth-p?l.value=T:i.value=h.length>1})};lt(o,()=>{Zt(()=>d())}),ut(()=>{d()});const u=p=>{p.stopPropagation(),a.value=!a.value,Zt(()=>d())};return(p,h)=>{const g=F("woot-label"),_=F("fluent-icon"),T=ct("resize");return ie((m(),f("div",{ref_key:"labelContainer",ref:r},[o.value.length||p.$slots.before?(m(),f("div",{key:0,class:re(["flex items-end flex-shrink min-w-0 gap-y-1",{"h-auto overflow-visible flex-row flex-wrap":a.value}])},[et(p.$slots,"before"),(m(!0),f(pe,null,ye(o.value,(S,E)=>(m(),P(g,{key:S?S.id:E,title:S.title,description:S.description,color:S.color,variant:"smooth",class:re(["!mb-0 max-w-[calc(100%-0.5rem)]",{"invisible absolute":!a.value&&E>l.value}]),small:""},null,8,["title","description","color","class"]))),128)),i.value?(m(),f("button",{key:0,title:a.value?p.$t("CONVERSATION.CARD.HIDE_LABELS"):p.$t("CONVERSATION.CARD.SHOW_LABELS"),class:"h-5 py-0 px-1 flex-shrink-0 mr-6 ml-0 rtl:ml-6 rtl:mr-0 rtl:rotate-180 text-slate-700 dark:text-slate-200 border-n-strong dark:border-n-strong",onClick:u},[b(_,{icon:a.value?"chevron-left":"chevron-right",size:"12"},null,8,["icon"])],8,ece)):x("",!0)],2)):x("",!0)])),[[T,d]])}}},tce={class:"flex justify-between w-full"},nce={class:"text-sm sticky top-0 h-fit font-normal tracking-[-0.6%] min-w-[140px] truncate text-n-slate-11"},sce={class:"flex flex-col w-full gap-2"},gh={__name:"SLAEventItem",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},setup(e){const t=n=>Ln(Dr(n),"MMM dd, yyyy, hh:mm a");return(n,s)=>(m(),f("div",tce,[c("span",nce,v(e.label),1),c("div",sce,[(m(!0),f(pe,null,ye(e.items,o=>(m(),f("span",{key:o.id,class:"text-sm font-normal text-n-slate-12 text-right tabular-nums"},v(t(o.created_at)),1))),128)),et(n.$slots,"showMore")])]))}},ace={class:"absolute flex flex-col items-start border-n-strong bg-n-solid-3 w-96 backdrop-blur-[100px] px-6 py-5 z-50 shadow rounded-xl gap-4 max-h-96 overflow-auto"},oce={class:"text-sm font-medium text-n-slate-12"},ice={key:0,class:"flex flex-col items-end w-full"},nS={__name:"SLAPopoverCard",props:{slaMissedEvents:{type:Array,required:!0}},setup(e){const t=e,{SLA_MISS_TYPES:n}=$t,s=U(!1),o=w(()=>t.slaMissedEvents.filter(d=>d.event_type===n.FRT)),a=w(()=>{const d=t.slaMissedEvents.filter(u=>u.event_type===n.NRT);return s.value?d:d.slice(0,6)}),i=w(()=>t.slaMissedEvents.filter(d=>d.event_type===n.RT)),l=w(()=>a.value.length>6),r=()=>{s.value=!s.value};return(d,u)=>(m(),f("div",ace,[c("span",oce,v(d.$t("SLA.EVENTS.TITLE")),1),o.value.length?(m(),P(gh,{key:0,label:d.$t("SLA.EVENTS.FRT"),items:o.value},null,8,["label","items"])):x("",!0),a.value.length?(m(),P(gh,{key:1,label:d.$t("SLA.EVENTS.NRT"),items:a.value},{showMore:j(()=>[l.value?(m(),f("div",ice,[b(he,{link:"",xs:"",slate:"",class:"hover:!no-underline",icon:s.value?"":"i-lucide-plus",label:s.value?d.$t("SLA.EVENTS.HIDE",{count:a.value.length}):d.$t("SLA.EVENTS.SHOW_MORE",{count:a.value.length}),onClick:r},null,8,["icon","label"])])):x("",!0)]),_:1},8,["label","items"])):x("",!0),i.value.length?(m(),P(gh,{key:2,label:d.$t("SLA.EVENTS.RT"),items:i.value},null,8,["label","items"])):x("",!0)]))}},lce={components:{SLAPopoverCard:nS,NextButton:he},props:{slaEvents:{type:Array,default:()=>[]}},data(){return{showSlaPopoverCard:!1}},methods:{closeSlaEvents(){this.showSlaPopoverCard=!1},openSlaEvents(){this.showSlaPopoverCard=!this.showSlaPopoverCard}}},rce={class:"flex items-center col-span-2 text-slate-11 justify-end"},cce={class:"relative"};function dce(e,t,n,s,o,a){const i=F("NextButton"),l=F("SLAPopoverCard"),r=ct("on-clickaway");return ie((m(),f("div",rce,[c("div",cce,[b(i,{link:"",slate:"",type:"button",label:e.$t("SLA_REPORTS.TABLE.VIEW_DETAILS"),onClick:a.openSlaEvents},null,8,["label","onClick"]),o.showSlaPopoverCard?(m(),P(l,{key:0,"sla-missed-events":n.slaEvents,class:"right-0"},null,8,["sla-missed-events"])):x("",!0)])])),[[r,a.closeSlaEvents]])}const uce=Re(lce,[["render",dce]]),mce={class:"grid items-center content-center w-full h-16 grid-cols-12 gap-4 px-6 py-0 border-b last:border-b-0 last:rounded-b-xl border-n-weak"},pce={class:"flex items-center gap-2 col-span-6 px-0 py-2 text-sm tracking-[0.5] text-slate-700 dark:text-slate-100 rtl:text-right"},hce={class:"text-n-slate-12"},fce={class:"text-slate-11"},gce={class:"capitalize truncate text-n-slate-12"},_ce={class:"flex items-center capitalize py-2 px-0 text-sm tracking-[0.5] text-slate-700 dark:text-slate-50 text-left rtl:text-right col-span-2"},vce={class:"flex items-center col-span-2 gap-2"},bce={key:1,class:"text-n-slate-11"},Ece={__name:"SLAReportItem",props:{slaName:{type:String,required:!0},conversationId:{type:Number,required:!0},conversation:{type:Object,required:!0},slaEvents:{type:Array,default:()=>[]}},setup(e){const t=e,n=w(()=>t.conversation.labels?t.conversation.labels.split(",").map(s=>s.trim()):[]);return(s,o)=>(m(),f("div",mce,[c("div",pce,[c("span",hce,v(`#${e.conversationId} `),1),c("span",fce,v(s.$t("SLA_REPORTS.WITH")),1),c("span",gce,v(e.conversation.contact.name),1),n.value.length?(m(),P(tS,{key:0,class:"w-[60%]","conversation-id":e.conversationId,"conversation-labels":n.value},null,8,["conversation-id","conversation-labels"])):x("",!0)]),c("div",_ce,v(e.slaName),1),c("div",vce,[e.conversation.assignee?(m(),P(Mu,{key:0,user:e.conversation.assignee},null,8,["user"])):(m(),f("span",bce," --- "))]),b(uce,{"sla-events":e.slaEvents},null,8,["sla-events"])]))}},Tce={name:"SLATable",components:{SLAReportItem:Ece,TableFooter:Pg,Spinner:Os,TableHeaderCell:eS},props:{slaReports:{type:Array,default:()=>[]},totalCount:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},isLoading:{type:Boolean,default:!1}},emits:["pageChange"],data(){return{pageNo:1}},computed:{shouldShowFooter(){return this.currentPage===1?this.totalCount>this.pageSize:this.slaReports.length>0}},methods:{onPageChange(e){this.$emit("pageChange",e)}}},yce={class:"min-w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 p-6"},Ace={class:"grid content-center h-12 grid-cols-12 gap-4 px-6 py-0 bg-n-slate-2 rounded-md"},Sce={key:0,class:"flex items-center justify-center h-32"},Ice={key:1},Cce={key:2,class:"flex items-center justify-center h-32"};function Nce(e,t,n,s,o,a){const i=F("TableHeaderCell"),l=F("Spinner"),r=F("SLAReportItem"),d=F("TableFooter");return m(),f("div",null,[c("div",yce,[c("div",Ace,[b(i,{span:6,label:e.$t("SLA_REPORTS.TABLE.HEADER.CONVERSATION")},null,8,["label"]),b(i,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.POLICY")},null,8,["label"]),b(i,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.AGENT")},null,8,["label"]),b(i,{span:1,label:""})]),n.isLoading?(m(),f("div",Sce,[b(l),c("span",null,v(e.$t("SLA_REPORTS.LOADING")),1)])):n.slaReports.length>0?(m(),f("div",Ice,[(m(!0),f(pe,null,ye(n.slaReports,u=>(m(),P(r,{key:u.applied_sla.id,"sla-name":u.applied_sla.sla_name,conversation:u.conversation,"conversation-id":u.conversation.id,"sla-events":u.sla_events},null,8,["sla-name","conversation","conversation-id","sla-events"]))),128))])):(m(),f("div",Cce,v(e.$t("SLA_REPORTS.NO_RECORDS")),1))]),a.shouldShowFooter?(m(),P(d,{key:0,"current-page":n.currentPage,"total-count":n.totalCount,"page-size":n.pageSize,onPageChange:a.onPageChange},null,8,["current-page","total-count","page-size","onPageChange"])):x("",!0)])}const Oce=Re(Tce,[["render",Nce]]),rb=(e,t)=>e.map(n=>({id:n.id,name:t==="labels"?n.title:n.name,type:t})),xce=(e,t,n)=>e.find(s=>t==="labels"?s.title===n:s.id.toString()===n.toString()),Td=(e,t)=>({keyToType:{assigned_agent_id:"agents",inbox_id:"inboxes",team_id:"teams",sla_policy_id:"sla",label_list:"labels"},typeToKey:{agents:"assigned_agent_id",inboxes:"inbox_id",teams:"team_id",sla:"sla_policy_id",labels:"label_list"}})[t][e],wce={class:"min-w-0 truncate"},Vc={__name:"DropdownButton",props:{buttonText:{type:String,default:""},trailingIcon:{type:Boolean,default:!1},icon:{type:String,default:""}},setup(e){return(t,n)=>(m(),P(he,{ghost:"",slate:"",sm:"",class:"relative",icon:e.icon,"trailing-icon":e.trailingIcon},{default:j(()=>[c("span",wce,v(e.buttonText),1),et(t.$slots,"dropdown")]),_:3},8,["icon","trailing-icon"]))}};function Rce(e,t){e.length<t.length&&([e,t]=[t,e]);let n=e.length,s=t.length;if(n===0||s===0)return 0;let o=Math.floor(n/2)-1,a=Array(s).fill(!1),i=Array(n).fill(""),l=0;for(let g=0;g<n;g++){let _=e[g];for(let T=0;T<s;T++){let S=t[T];if(T<=g+o&&T+o>=1&&_===S&&!a[T]){a[T]=!0,i[l++]=_;break}}}if(!l)return 0;let r=0;for(let g=0,_=0;_<s;_++)a[_]&&(t[_]!==i[g]&&r++,g++);let d=l,u=(d/n+d/s+(d-r/2)/d)/3,p=0,h=Math.min(4,s);for(let g=0;g<h;g++)e[g]===t[g]&&p++;return u+p*.1*(1-u)}function sS(e,t){let n=0,s=0;if(t&&e.length!==t.length)throw new Error("The number of values must be equal to the number of weights");for(let o=0;o<e.length;o++){let a=t?t[o]:1;n+=e[o]*a,s+=a}return n/s}function $ce(e){return Math.max(0,Math.min(1,e))}function aS(e){return e.split(/\s+/).filter((t,n,s)=>t&&s.indexOf(t)===n)}var oS={CONTAINS_MATCH:1.2,FIRST_SIMILARITY:1.1};function p_(e,t,n,s){if(!t||typeof t!="string")return e;let o=[],a=(s==null?void 0:s.threshold)??.8,i=t.trim().toLowerCase(),l=aS(i);return e.forEach(r=>{let d=[],u=[];n.forEach(h=>{var S;let g,_=1;typeof h=="string"?g=h:(g=h.name,_=h.weight),u.push(_);let T=(S=r[g])==null?void 0:S.trim().toLowerCase();if(T){let E=Mce(T,l);d.push(E)}else d.push(0)});let p=sS(d,u);p>=a&&o.push({object:r,similarity:p})}),o.sort((r,d)=>d.similarity-r.similarity),o.map(r=>r.object)}function Mce(e,t){let n=aS(e),s=t.map(o=>{let a=n.map(l=>kce(l,o)),i=Math.max(...a);return i===a[0]?i*oS.FIRST_SIMILARITY:$ce(i)});return sS(s)}function kce(e,t){let n=Rce(e,t);return e.includes(t)?n*oS.CONTAINS_MATCH:n}const Lce={class:"relative inline-flex items-center justify-start w-full p-3 border-0 rounded-none first:rounded-t-xl last:rounded-b-xl h-11 hover:enabled:bg-n-alpha-2"},Dce={class:"inline-flex items-center gap-3 overflow-hidden"},Pce={class:"text-sm font-medium truncate text-n-slate-12"},iS={__name:"DropdownListItemButton",props:{buttonText:{type:String,default:""},isActive:{type:Boolean,default:!1},icon:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){return(t,n)=>{const s=F("fluent-icon");return m(),f("button",Lce,[c("div",Dce,[e.icon?(m(),P(s,{key:0,icon:e.icon,size:"18",style:At({color:e.iconColor})},null,8,["icon","style"])):x("",!0),c("span",Pce,v(e.buttonText),1),e.isActive?(m(),P(s,{key:1,icon:"checkmark",size:"18",class:"flex-shrink-0 text-n-slate-12"})):x("",!0)]),et(t.$slots,"dropdown")])}}},Bce={class:"flex items-center justify-between h-10 min-h-[40px] sticky top-0 bg-n-solid-2 dark:bg-n-solid-2 z-10 gap-2 px-3 border-b rounded-t-xl border-n-weak"},Fce=["placeholder"],Uce={__name:"DropdownSearch",props:On({inputPlaceholder:{type:String,default:""},showClearFilter:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:On(["remove"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=Wn(e,"modelValue");return(o,a)=>{const i=F("fluent-icon");return m(),f("div",Bce,[c("div",{class:"flex items-center w-full gap-2",onKeyup:a[1]||(a[1]=Fn(Ke(()=>{},["prevent"]),["space"]))},[b(i,{icon:"search",size:"16",class:"text-n-slate-11 flex-shrink-0"}),ie(c("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),placeholder:e.inputPlaceholder,type:"text",class:"w-full mb-0 text-sm !outline-0 bg-transparent text-n-slate-12 placeholder:text-n-slate-10 reset-base"},null,8,Fce),[[at,s.value]])],32),!e.modelValue&&e.showClearFilter?(m(),P(he,{key:0,faded:"",xs:"",class:"flex-shrink-0",label:o.$t("REPORT.FILTER_ACTIONS.CLEAR_FILTER"),onClick:a[2]||(a[2]=l=>n("remove"))},null,8,["label"])):x("",!0)])}}},Gce={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},lS={__name:"DropdownEmptyState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",Gce,v(e.message),1))}},Vce={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},Hce={__name:"DropdownLoadingState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",Vce,v(e.message),1))}},yc={__name:"DropdownList",props:{listItems:{type:Array,default:()=>[]},enableSearch:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:""},activeFilterId:{type:[String,Number],default:null},showClearFilter:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},loadingPlaceholder:{type:String,default:""}},emits:["onSearch","select","removeFilter"],setup(e,{emit:t}){const n=e,s=t,o=U(""),a=Ko(h=>{s("onSearch",h)},300),i=h=>{o.value=h,a(h)},l=w(()=>o.value?p_(n.listItems,o.value,["name"]):n.listItems),r=w(()=>!l.value.length),d=h=>n.activeFilterId?h===n.activeFilterId:!1,u=w(()=>n.isLoading&&r.value&&n.loadingPlaceholder),p=w(()=>!n.isLoading&&r.value);return(h,g)=>(m(),f("div",{class:"absolute z-20 w-40 bg-n-solid-2 border-0 outline outline-1 outline-n-weak shadow rounded-xl max-h-[400px]",onClick:g[2]||(g[2]=Ke(()=>{},["stop"]))},[et(h.$slots,"search",{},()=>[e.enableSearch?(m(),P(Uce,{key:0,modelValue:o.value,"onUpdate:modelValue":[g[0]||(g[0]=_=>o.value=_),i],"input-placeholder":e.inputPlaceholder,"show-clear-filter":e.showClearFilter,onRemove:g[1]||(g[1]=_=>h.$emit("removeFilter"))},null,8,["modelValue","input-placeholder","show-clear-filter"])):x("",!0)]),et(h.$slots,"listItem",{},()=>[u.value?(m(),P(Hce,{key:0,message:e.loadingPlaceholder},null,8,["message"])):p.value?(m(),P(lS,{key:1,message:h.$t("REPORT.FILTER_ACTIONS.EMPTY_LIST")},null,8,["message"])):x("",!0),(m(!0),f(pe,null,ye(l.value,_=>(m(),P(iS,{key:_.id,"is-active":d(_.id),"button-text":_.name,icon:_.icon,"icon-color":_.iconColor,onClick:Ke(T=>s("select",_),["stop","prevent"])},null,8,["is-active","button-text","icon","icon-color","onClick"]))),128))])]))}},Kce={__name:"ActiveFilterChip",props:{name:{type:String,required:!0},id:{type:Number,required:!0},type:{type:String,required:!0},options:{type:Array,default:()=>[]},activeFilterType:{type:String,default:""},showMenu:{type:Boolean,default:!1},placeholder:{type:String,default:""},enableSearch:{type:Boolean,default:!1}},emits:["toggleDropdown","removeFilter","addFilter","closeDropdown"],setup(e,{emit:t}){const n=e,s=t,o=()=>s("toggleDropdown",n.type),a=()=>s("removeFilter",n.type),i=r=>s("addFilter",r),l=()=>s("closeDropdown");return(r,d)=>{const u=ct("on-clickaway");return m(),P(Vc,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":e.name,onClick:o},Vo({_:2},[e.showMenu&&e.activeFilterType===e.type?{name:"dropdown",fn:j(()=>[e.options?ie((m(),P(yc,{key:0,"show-clear-filter":"","list-items":e.options,"active-filter-id":e.id,"input-placeholder":e.placeholder,"enable-search":e.enableSearch,class:"flex flex-col w-[240px] overflow-y-auto left-0 md:left-auto md:right-0 top-10",onSelect:i,onRemoveFilter:a},null,8,["list-items","active-filter-id","input-placeholder","enable-search"])),[[u,l]]):x("",!0)]),key:"0"}:void 0]),1032,["button-text"])}}},zce={__name:"AddFilterChip",props:{name:{type:String,required:!0},menuOption:{type:Array,default:()=>[]},showMenu:{type:Boolean,default:!1},placeholderI18nKey:{type:String,default:""},enableSearch:{type:Boolean,default:!0},emptyStateMessage:{type:String,default:""}},emits:["toggleDropdown","addFilter","closeDropdown"],setup(e,{emit:t}){const n=t,s=U(null),o=u=>{s.value=u},a=()=>{s.value=null},i=u=>s.value===u,l=()=>n("toggleDropdown"),r=u=>{n("addFilter",u),a()},d=()=>{a(),n("closeDropdown")};return(u,p)=>{const h=ct("on-clickaway");return m(),P(Vc,{"button-text":e.name,icon:"i-lucide-filter",onClick:l},Vo({_:2},[e.showMenu?{name:"dropdown",fn:j(()=>[ie((m(),P(yc,{class:"left-0 md:right-0 top-10"},{listItem:j(()=>[e.menuOption.length?x("",!0):(m(),P(lS,{key:0,message:e.emptyStateMessage},null,8,["message"])),(m(!0),f(pe,null,ye(e.menuOption,g=>(m(),P(iS,{key:g.id,"button-text":g.name,onMouseenter:_=>o(g.id),onMouseleave:a,onFocus:_=>o(g.id)},Vo({_:2},[g.options&&i(g.id)?{name:"dropdown",fn:j(()=>[b(yc,{"list-items":g.options,"input-placeholder":u.$t(`${e.placeholderI18nKey}.${g.type.toUpperCase()}`),"enable-search":e.enableSearch,class:"flex flex-col w-[216px] overflow-y-auto top-0 left-36",onSelect:r},null,8,["list-items","input-placeholder","enable-search"])]),key:"0"}:void 0]),1032,["button-text","onMouseenter","onFocus"]))),128))]),_:1})),[[h,d]])]),key:"0"}:void 0]),1032,["button-text"])}}},Wce={components:{FilterButton:Vc,ActiveFilterChip:Kce,AddFilterChip:zce},emits:["filterChange"],data(){return{showDropdownMenu:!1,showSubDropdownMenu:!1,activeFilterType:"",appliedFilters:{assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...gt({agents:"agents/getAgents",inboxes:"inboxes/getInboxes",teams:"teams/getTeams",labels:"labels/getLabels",sla:"sla/getSLA"}),filterListMenuItems(){const e=[{id:"1",name:this.$t("SLA_REPORTS.DROPDOWN.SLA"),type:"sla"},{id:"2",name:this.$t("SLA_REPORTS.DROPDOWN.INBOXES"),type:"inboxes"},{id:"3",name:this.$t("SLA_REPORTS.DROPDOWN.AGENTS"),type:"agents"},{id:"4",name:this.$t("SLA_REPORTS.DROPDOWN.TEAMS"),type:"teams"},{id:"5",name:this.$t("SLA_REPORTS.DROPDOWN.LABELS"),type:"labels"}],n=Object.keys(this.appliedFilters).filter(s=>this.appliedFilters[s]).map(s=>Td(s,"keyToType"));return e.filter(({type:s})=>!n.includes(s)).map(({id:s,name:o,type:a})=>({id:s,name:o,type:a,options:rb(this[a],a)}))},activeFilters(){return Object.keys(this.appliedFilters).filter(t=>this.appliedFilters[t]).map(t=>{const n=Td(t,"keyToType"),s=xce(this[n],n,this.appliedFilters[t]);return{id:s.id,name:n==="labels"?s.title:s.name,type:n,options:rb(this[n],n)}})},hasActiveFilters(){return Object.values(this.appliedFilters).some(e=>e!==null)},isAllFilterSelected(){return!this.filterListMenuItems.length}},methods:{addFilter(e){const{type:t,id:n,name:s}=e,o=Td(t,"typeToKey");this.appliedFilters[o]=t==="labels"?s:n,this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},removeFilter(e){const t=Td(e,"typeToKey");this.appliedFilters[t]=null,this.$emit("filterChange",this.appliedFilters)},clearAllFilters(){this.appliedFilters={assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null},this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},showDropdown(){this.showSubDropdownMenu=!1,this.showDropdownMenu=!this.showDropdownMenu},closeDropdown(){this.showDropdownMenu=!1},openActiveFilterDropdown(e){this.closeDropdown(),this.activeFilterType=e,this.showSubDropdownMenu=!this.showSubDropdownMenu},closeActiveFilterDropdown(){this.activeFilterType="",this.showSubDropdownMenu=!1},resetDropdown(){this.closeDropdown(),this.closeActiveFilterDropdown()}}},jce={class:"flex flex-col flex-wrap items-start gap-2 md:items-center md:flex-nowrap md:flex-row"},Yce={key:0,class:"flex flex-wrap gap-2 md:flex-nowrap"},Xce={key:1,class:"w-full h-px border md:w-px md:h-5 border-slate-75 dark:border-slate-800"},qce={class:"flex items-center gap-2"},Zce={key:1,class:"w-px h-5 border border-slate-75 dark:border-slate-800"};function Qce(e,t,n,s,o,a){const i=F("ActiveFilterChip"),l=F("AddFilterChip"),r=F("FilterButton");return m(),f("div",jce,[a.hasActiveFilters?(m(),f("div",Yce,[(m(!0),f(pe,null,ye(a.activeFilters,d=>(m(),P(i,As({ref_for:!0},d,{key:d.type,placeholder:e.$t(`SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER.${d.type.toUpperCase()}`),"active-filter-type":o.activeFilterType,"show-menu":o.showSubDropdownMenu,"enable-search":"",onToggleDropdown:a.openActiveFilterDropdown,onCloseDropdown:a.closeActiveFilterDropdown,onAddFilter:a.addFilter,onRemoveFilter:a.removeFilter}),null,16,["placeholder","active-filter-type","show-menu","onToggleDropdown","onCloseDropdown","onAddFilter","onRemoveFilter"]))),128))])):x("",!0),a.hasActiveFilters&&!a.isAllFilterSelected?(m(),f("div",Xce)):x("",!0),c("div",qce,[a.isAllFilterSelected?x("",!0):(m(),P(l,{key:0,"placeholder-i18n-key":"SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER",name:e.$t("SLA_REPORTS.DROPDOWN.ADD_FIlTER"),"menu-option":a.filterListMenuItems,"show-menu":o.showDropdownMenu,"empty-state-message":e.$t("SLA_REPORTS.DROPDOWN.NO_FILTER"),onToggleDropdown:a.showDropdown,onCloseDropdown:a.closeDropdown,onAddFilter:a.addFilter},null,8,["name","menu-option","show-menu","empty-state-message","onToggleDropdown","onCloseDropdown","onAddFilter"])),a.hasActiveFilters?(m(),f("div",Zce)):x("",!0),a.hasActiveFilters?(m(),P(r,{key:2,"button-text":e.$t("SLA_REPORTS.DROPDOWN.CLEAR_ALL"),onClick:a.clearAllFilters},null,8,["button-text","onClick"])):x("",!0)])])}const Jce=Re(Wce,[["render",Qce]]),ede={components:{SLAFilter:Jce},emits:["filterChange"],data(){return{selectedDateRange:nc.LAST_7_DAYS,selectedGroupByFilter:null,customDateRange:[new Date,new Date]}},computed:{to(){return nu(this.customDateRange[1])},from(){return tu(this.customDateRange[0])}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.setInitialRange()},methods:{setInitialRange(){const{offset:e}=this.selectedDateRange,t=Ho(new Date,e),n=tu(t),s=nu(new Date);this.$emit("filterChange",{from:n,to:s,...this.selectedGroupByFilter})},emitChange(){const{from:e,to:t}=this;this.$emit("filterChange",{from:e,to:t,...this.selectedGroupByFilter})},emitFilterChange(e){this.selectedGroupByFilter=e,this.emitChange()},onDateRangeChange(e){this.customDateRange=e,this.emitChange()}}},tde={class:"flex flex-col flex-wrap w-full gap-3 md:flex-row"};function nde(e,t,n,s,o,a){const i=F("woot-date-picker"),l=F("SLAFilter");return m(),f("div",tde,[b(i,{onDateRangeChanged:a.onDateRangeChange},null,8,["onDateRangeChanged"]),b(l,{onFilterChange:a.emitFilterChange},null,8,["onFilterChange"])])}const sde=Re(ede,[["render",nde]]),ade={name:"SLAReports",components:{V4Button:he,ReportHeader:ei,SLAMetrics:Jre,SLATable:Oce,SLAReportFilters:sde},data(){return{pageNumber:1,activeFilter:{from:0,to:0,assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...gt({slaReports:"slaReports/getAll",slaMetrics:"slaReports/getMetrics",slaMeta:"slaReports/getMeta",uiFlags:"slaReports/getUIFlags"})},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("sla/get"),this.fetchSLAMetrics(),this.fetchSLAReports()},methods:{fetchSLAReports({pageNumber:e}={}){this.$store.dispatch("slaReports/get",{page:e||this.pageNumber,...this.activeFilter})},fetchSLAMetrics(){this.$store.dispatch("slaReports/getMetrics",this.activeFilter)},onPageChange(e){this.fetchSLAReports({pageNumber:e})},onFilterChange(e){this.activeFilter=e,this.fetchSLAReports(),this.fetchSLAMetrics()},downloadReports(){const e="sla";try{this.$store.dispatch("slaReports/download",{fileName:xc({type:e,to:this.activeFilter.to}),...this.activeFilter})}catch{Te(this.$t("SLA_REPORTS.DOWNLOAD_FAILED"))}}}},ode={class:"flex flex-col flex-1 gap-6"};function ide(e,t,n,s,o,a){const i=F("V4Button"),l=F("ReportHeader"),r=F("SLAReportFilters"),d=F("SLAMetrics"),u=F("SLATable");return m(),f(pe,null,[b(l,{"header-title":e.$t("SLA_REPORTS.HEADER")},{default:j(()=>[b(i,{label:e.$t("SLA_REPORTS.DOWNLOAD_SLA_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:a.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),c("div",ode,[b(r,{onFilterChange:a.onFilterChange},null,8,["onFilterChange"]),b(d,{"hit-rate":e.slaMetrics.hitRate,"no-of-breaches":e.slaMetrics.numberOfSLAMisses,"no-of-conversations":e.slaMetrics.numberOfConversations,"is-loading":e.uiFlags.isFetchingMetrics},null,8,["hit-rate","no-of-breaches","no-of-conversations","is-loading"]),b(u,{"sla-reports":e.slaReports,"is-loading":e.uiFlags.isFetching,"current-page":Number(e.slaMeta.currentPage),"total-count":Number(e.slaMeta.count),onPageChange:a.onPageChange},null,8,["sla-reports","is-loading","current-page","total-count","onPageChange"])])],64)}const lde=Re(ade,[["render",ide]]),Po={featureFlag:xt.REPORTS,permissions:["administrator","report_manage"]},rde=[{path:"agent",name:"agent_reports",meta:Po,component:Qie},{path:"inboxes",name:"inbox_reports",meta:Po,component:Jie},{path:"label",name:"label_reports",meta:Po,component:ele},{path:"teams",name:"team_reports",meta:Po,component:tle}],cde=[{path:"agents_overview",name:"agent_reports_index",meta:{permissions:["administrator","report_manage"]},component:hie},{path:"agents/:id",name:"agent_reports_show",meta:{permissions:["administrator","report_manage"]},component:jie},{path:"inboxes_overview",name:"inbox_reports_index",meta:{permissions:["administrator","report_manage"]},component:fie},{path:"inboxes/:id",name:"inbox_reports_show",meta:{permissions:["administrator","report_manage"]},component:Xie},{path:"teams_overview",name:"team_reports_index",meta:{permissions:["administrator","report_manage"]},component:gie},{path:"teams/:id",name:"team_reports_show",meta:{permissions:["administrator","report_manage"]},component:Zie}],dde={routes:[{path:Pt("accounts/:accountId/reports"),component:Sne,children:[{path:"",redirect:e=>({name:"account_overview_reports",params:e.params})},{path:"overview",name:"account_overview_reports",meta:Po,component:zre},{path:"conversation",name:"conversation_reports",meta:Po,component:voe},...rde,...cde,{path:"sla",name:"sla_reports",meta:Po,component:lde},{path:"csat",name:"csat_reports",meta:Po,component:Ble},{path:"bot",name:"bot_reports",meta:Po,component:Kle}]}]},rS={name:{required:it,minLength:Nn(2)},thresholdTime:{decimal:iN,minValue:Kf(.001)}},ude={props:{threshold:{type:Number,default:null},thresholdUnit:{type:String,default:"Minutes"},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["unit","isInValid","updateThreshold"],setup(){return{v$:Lt()}},data(){return{thresholdTime:this.threshold||"",thresholdUnitValue:this.thresholdUnit,options:[{value:"Minutes",label:"minutes"},{value:"Hours",label:"hours"},{value:"Days",label:"days"}]}},validations:rS,computed:{thresholdTimeErrorMessage(){let e="";return this.v$.thresholdTime.$error&&(!this.v$.thresholdTime.numeric||!this.v$.thresholdTime.minValue)&&(e=this.$t("SLA.FORM.THRESHOLD_TIME.INVALID_FORMAT_ERROR")),e}},watch:{threshold:{immediate:!0,handler(e){Number.isNaN(e)||(this.thresholdTime=e)}},thresholdUnit:{immediate:!0,handler(e){this.thresholdUnitValue=e}}},methods:{onThresholdUnitChange(){this.$emit("unit",this.thresholdUnitValue)},onThresholdTimeChange(){this.v$.thresholdTime.$touch();const e=this.v$.thresholdTime.$invalid;this.$emit("isInValid",e),this.$emit("updateThreshold",this.thresholdTime?Number(this.thresholdTime):null)}}},mde={class:"flex items-center w-full gap-3"},pde={class:"mt-7"},hde=["value"];function fde(e,t,n,s,o,a){const i=F("woot-input");return m(),f("div",mde,[b(i,{modelValue:o.thresholdTime,"onUpdate:modelValue":[t[0]||(t[0]=l=>o.thresholdTime=l),a.onThresholdTimeChange],type:"number",class:re([{error:s.v$.thresholdTime.$error},"flex-grow"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:n.label,placeholder:n.placeholder,error:a.thresholdTimeErrorMessage},null,8,["modelValue","class","label","placeholder","error","onUpdate:modelValue"]),c("div",pde,[ie(c("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.thresholdUnitValue=l),class:"px-4 py-1.5 min-w-[6.5rem] h-10 text-sm font-medium border-0 rounded-xl hover:cursor-pointer pr-7",onChange:t[2]||(t[2]=(...l)=>a.onThresholdUnitChange&&a.onThresholdUnitChange(...l))},[(m(!0),f(pe,null,ye(o.options,(l,r)=>(m(),f("option",{key:r,value:l.value},v(l.label),9,hde))),128))],544),[[Mt,o.thresholdUnitValue]])])])}const gde=Re(ude,[["render",fde]]),_de={components:{SlaTimeInput:gde,NextButton:he},props:{selectedResponse:{type:Object,default:()=>{}},submitLabel:{type:String,required:!0}},emits:["close","submitSla"],setup(){return{v$:Lt()}},data(){return{name:"",description:"",isSlaTimeInputsInvalid:!1,slaTimeInputsValidation:{},slaTimeInputs:[{threshold:null,unit:"Minutes",label:"SLA.FORM.FIRST_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.FIRST_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.NEXT_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.NEXT_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.RESOLUTION_TIME.LABEL",placeholder:"SLA.FORM.RESOLUTION_TIME.PLACEHOLDER"}],onlyDuringBusinessHours:!1}},validations:rS,computed:{...gt({uiFlags:"sla/getUIFlags"}),isSubmitDisabled(){return this.v$.name.$invalid||this.isSlaTimeInputsInvalid||this.uiFlags.isUpdating},slaNameErrorMessage(){let e="";return this.v$.name.$error&&(this.v$.name.required?this.v$.name.minLength||(e=this.$t("SLA.FORM.NAME.MINIMUM_LENGTH_ERROR")):e=this.$t("SLA.FORM.NAME.REQUIRED_ERROR")),e}},mounted(){this.selectedResponse&&this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){const{name:e,description:t,first_response_time_threshold:n,next_response_time_threshold:s,resolution_time_threshold:o,only_during_business_hours:a}=this.selectedResponse;this.name=e,this.description=t,this.onlyDuringBusinessHours=a;const i=[n,s,o];this.slaTimeInputs.forEach((l,r)=>{const d=PE(i[r],{minute:"Minutes",hour:"Hours",day:"Days"});l.threshold=d.time,l.unit=d.unit})},updateThreshold(e,t){this.slaTimeInputs[e].threshold=t},updateUnit(e,t){this.slaTimeInputs[e].unit=t},onSubmit(){const e={name:this.name,description:this.description,first_response_time_threshold:this.convertToSeconds(0),next_response_time_threshold:this.convertToSeconds(1),resolution_time_threshold:this.convertToSeconds(2),only_during_business_hours:this.onlyDuringBusinessHours};this.$emit("submitSla",e)},convertToSeconds(e){const{threshold:t,unit:n}=this.slaTimeInputs[e];return t===null||t===0?null:Number(t*({Minutes:60,Hours:3600,Days:86400}[n]||1))},handleIsInvalid(e,t){this.slaTimeInputsValidation={...this.slaTimeInputsValidation,[e]:t},this.checkValidationState()},checkValidationState(){const e=Object.values(this.slaTimeInputsValidation).some(t=>t);this.isSlaTimeInputsInvalid=e}}},vde={class:"flex flex-col h-auto overflow-auto"},bde={class:"mt-3 flex h-10 items-center text-sm w-full gap-2 border border-solid border-n-strong px-3 py-1.5 rounded-xl justify-between"},Ede={for:"sla_bh",class:"text-slate-700 dark:text-slate-200"},Tde={class:"flex items-center justify-end w-full gap-2 mt-8"};function yde(e,t,n,s,o,a){const i=F("woot-input"),l=F("SlaTimeInput"),r=F("woot-switch"),d=F("NextButton");return m(),f("div",vde,[c("form",{class:"flex flex-wrap mx-0",onSubmit:t[3]||(t[3]=Ke((...u)=>a.onSubmit&&a.onSubmit(...u),["prevent"]))},[b(i,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=u=>o.name=u),class:re([{error:s.v$.name.$error},"w-full"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.NAME.LABEL"),placeholder:e.$t("SLA.FORM.NAME.PLACEHOLDER"),error:a.slaNameErrorMessage,onInput:s.v$.name.$touch,onBlur:s.v$.name.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),b(i,{modelValue:o.description,"onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),class:"w-full",styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("SLA.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),(m(!0),f(pe,null,ye(o.slaTimeInputs,(u,p)=>(m(),P(l,{key:p,threshold:u.threshold,"threshold-unit":u.unit,label:e.$t(u.label),placeholder:e.$t(u.placeholder),onUpdateThreshold:h=>a.updateThreshold(p,h),onUnit:h=>a.updateUnit(p,h),onIsInValid:h=>a.handleIsInvalid(p,h)},null,8,["threshold","threshold-unit","label","placeholder","onUpdateThreshold","onUnit","onIsInValid"]))),128)),c("div",bde,[c("span",Ede,v(e.$t("SLA.FORM.BUSINESS_HOURS.PLACEHOLDER")),1),b(r,{id:"sla_bh",modelValue:o.onlyDuringBusinessHours,"onUpdate:modelValue":t[2]||(t[2]=u=>o.onlyDuringBusinessHours=u)},null,8,["modelValue"])]),c("div",Tde,[b(d,{faded:"",slate:"",type:"reset",label:e.$t("SLA.FORM.CANCEL"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(d,{type:"submit",label:n.submitLabel,disabled:a.isSubmitDisabled,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const Ade=Re(_de,[["render",yde]]),Sde={components:{SlaForm:Ade},emits:["close"],methods:{onClose(){this.$emit("close")},async addSLA(e){try{await this.$store.dispatch("sla/create",e),Te(this.$t("SLA.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.message||this.$t("SLA.ADD.API.ERROR_MESSAGE");Te(n)}}}},Ide={class:"flex flex-col h-auto overflow-auto"};function Cde(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("SlaForm");return m(),f("div",Ide,[b(i,{"header-title":e.$t("SLA.ADD.TITLE"),"header-content":e.$t("SLA.ADD.DESC")},null,8,["header-title","header-content"]),b(l,{"submit-label":e.$t("SLA.FORM.CREATE"),onSubmitSla:a.addSLA,onClose:a.onClose},null,8,["submit-label","onSubmitSla","onClose"])])}const Nde=Re(Sde,[["render",Cde]]),Ode={class:"flex relative flex-col sm:flex-row p-4 gap-4 sm:p-6 justify-between group outline outline-n-container outline-1 bg-n-solid-2 rounded-2xl shadow w-full"},xde={class:"flex flex-col min-w-0 items-start gap-3 max-w-[480px] w-full"},wde={class:"flex items-center justify-between w-full gap-3 sm:justify-normal whitespace-nowrap"},Rde={class:"justify-between tracking-tight font-medium truncate w-fit sm:justify-normal text-slate-900 dark:text-slate-25"},$de={class:"text-base text-slate-600 dark:text-slate-300 max-w-[25rem] w-full line-clamp-2"},Mde={key:0,class:"absolute flex-col items-center hidden gap-1 border-none ltr:-right-3 rtl:-left-3 top-3 group-hover:flex"},cS={__name:"BaseSettingsListItem",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",Ode,[et(t.$slots,"leftSection",{},()=>[c("div",xde,[c("div",wde,[c("h3",Rde,[et(t.$slots,"title",{},()=>[be(v(e.title),1)])]),et(t.$slots,"label")]),c("p",$de,[et(t.$slots,"description",{},()=>[be(v(e.description),1)])])])]),et(t.$slots,"rightSection"),t.$slots.actions?(m(),f("div",Mde,[et(t.$slots,"actions")])):x("",!0)]))}},kde={class:"flex flex-row items-start w-full h-full gap-1 sm:items-end sm:px-6 sm:py-2 sm:gap-2 sm:flex-col"},Lde={class:"inline-flex items-center gap-1 tracking-[-0.6%] text-sm ltr:pl-1.5 sm:ltr:pl-0 rtl:pr-1.5 sm:rtl:pr-0 text-slate-600 dark:text-slate-300"},Dde={class:"text-sm sm:text-2xl font-medium tracking-[-1.5%] text-slate-900 dark:text-slate-25"},_h={__name:"SLAResponseTime",props:{responseType:{type:String,default:""},responseTime:{type:String,default:""}},setup(e){return(t,n)=>{const s=F("fluent-icon"),o=ct("tooltip");return m(),f("div",kde,[c("span",Lde,[ie(b(s,{size:"14",icon:"information",type:"outline",class:"flex-shrink-0 hidden text-sm font-normal sm:flex sm:font-medium text-slate-500 dark:text-slate-500"},null,512),[[o,t.$t(`SLA.LIST.RESPONSE_TYPES.${e.responseType}`),void 0,{left:!0}]]),be(" "+v(t.$t(`SLA.LIST.RESPONSE_TYPES.SHORT_HAND.${e.responseType}`))+" ",1),n[0]||(n[0]=c("span",{class:"flex sm:hidden"},":",-1))]),c("span",Dde,v(e.responseTime),1)])}}},Pde={class:"inline-flex items-center min-w-0 gap-1 px-1.5 sm:px-2 py-1 border border-solid rounded-lg border-slate-75 dark:border-slate-700/50"},Bde={__name:"SLABusinessHoursLabel",props:{hasBusinessHours:{type:Boolean,required:!0}},setup(e){return(t,n)=>{const s=F("fluent-icon");return m(),f("div",Pde,[b(s,{size:"14",icon:e.hasBusinessHours?"alarm-on":"alarm-off",type:"outline",class:re(["flex-shrink-0",e.hasBusinessHours?"text-slate-600 dark:text-slate-400":"text-slate-300 dark:text-slate-700"])},null,8,["icon","class"]),c("span",{class:re(["hidden text-xs tracking-[0.2%] font-normal truncate sm:block",e.hasBusinessHours?"text-slate-600 dark:text-slate-400":"text-slate-300 dark:text-slate-700"])},v(e.hasBusinessHours?t.$t("SLA.LIST.BUSINESS_HOURS_ON"):t.$t("SLA.LIST.BUSINESS_HOURS_OFF")),3)])}}},Fde={class:"flex items-center divide-x rtl:divide-x-reverse sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-slate-75 sm:rtl:dark:border-slate-700/50 gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between divide-slate-75 dark:divide-slate-700/50"},Af={__name:"SLAListItem",props:{slaName:{type:String,required:!0},description:{type:String,required:!0},firstResponse:{type:String,required:!0},nextResponse:{type:String,required:!0},resolutionTime:{type:String,required:!0},hasBusinessHours:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=t;return(s,o)=>{const a=ct("tooltip");return m(),P(cS,{class:"sm:divide-x sm:divide-slate-75 sm:dark:divide-slate-700/50",title:e.slaName,description:e.description},{label:j(()=>[b(Bde,{"has-business-hours":e.hasBusinessHours},null,8,["has-business-hours"])]),rightSection:j(()=>[c("div",Fde,[b(_h,{"response-type":"FRT","response-time":e.firstResponse},null,8,["response-time"]),b(_h,{"response-type":"NRT","response-time":e.nextResponse},null,8,["response-time"]),b(_h,{"response-type":"RT","response-time":e.resolutionTime},null,8,["response-time"])])]),actions:j(()=>[ie(b(he,{faded:"",ruby:"",xs:"",icon:"i-lucide-trash-2","is-loading":e.isLoading,onClick:o[0]||(o[0]=i=>n("delete"))},null,8,["is-loading"]),[[a,s.$t("SLA.FORM.DELETE"),void 0,{top:!0}]])]),_:1},8,["title","description"])}}},Ude={class:"w-full min-h-[12rem] relative"},Gde={class:"w-full space-y-3"},Vde={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},dS={__name:"BaseEmptyState",setup(e){return(t,n)=>(m(),f("div",Ude,[c("div",Gde,[b(Af,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_1"),description:t.$t("SLA.LIST.EMPTY.DESC_1"),"first-response":"20m","next-response":"1h","resolution-time":"24h","has-business-hours":""},null,8,["sla-name","description"]),b(Af,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_2"),description:t.$t("SLA.LIST.EMPTY.DESC_2"),"first-response":"2h","next-response":"4h","resolution-time":"4d","has-business-hours":""},null,8,["sla-name","description"])]),c("div",Vde,[et(t.$slots,"default")])]))}},Hde={class:"max-w-xs text-sm font-medium text-center"},Kde={__name:"SLAEmptyState",emits:["primaryAction"],setup(e,{emit:t}){const n=t,s=()=>n("primaryAction");return(o,a)=>(m(),P(dS,null,{default:j(()=>[c("p",Hde,v(o.$t("SLA.LIST.404")),1),b(he,{icon:"i-lucide-plus",class:"mt-4",label:o.$t("SLA.ADD_ACTION_LONG"),onClick:s},null,8,["label"])]),_:1}))}},zde={__name:"SLAHeader",props:{showActions:{type:Boolean,default:!0}},emits:["add"],setup(e){return(t,n)=>(m(),P(Ds,{title:t.$t("SLA.HEADER"),description:t.$t("SLA.DESCRIPTION"),"link-text":t.$t("SLA.LEARN_MORE"),"feature-name":"sla"},Vo({_:2},[e.showActions?{name:"actions",fn:j(()=>[b(he,{label:t.$t("SLA.ADD_ACTION"),icon:"i-lucide-circle-plus",onClick:n[0]||(n[0]=s=>t.$emit("add"))},null,8,["label"])]),key:"0"}:void 0]),1032,["title","description","link-text"]))}},Wde={class:"flex items-center sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-slate-75 sm:rtl:dark:border-slate-700/50 gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between"},jde={__name:"SLAListItemLoading",setup(e){return(t,n)=>(m(),P(cS,{class:"opacity-50"},{title:j(()=>n[0]||(n[0]=[c("div",{class:"w-24 h-[26px] rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1)])),description:j(()=>n[1]||(n[1]=[c("div",{class:"w-64 h-4 mb-0.5 rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1),c("div",{class:"w-48 h-4 rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1)])),label:j(()=>n[2]||(n[2]=[c("div",{class:"w-32 h-[26px] bg-slate-50 dark:bg-slate-700 animate-pulse rounded-md"},null,-1)])),rightSection:j(()=>[c("div",Wde,[(m(),f(pe,null,ye(3,s=>c("div",{key:s,class:"flex justify-end w-1/3 h-full px-4"},n[3]||(n[3]=[c("div",{class:"w-32 h-full rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1)]))),64))])]),_:1}))}},Yde={class:"flex flex-col max-w-md px-6 py-6 border shadow bg-n-solid-1 rounded-xl border-n-weak"},Xde={class:"flex items-center w-full gap-2 mb-4"},qde={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},Zde={class:"text-base font-medium text-n-slate-12"},Qde={class:"text-sm font-normal text-n-slate-11"},Jde={class:"text-sm font-normal text-n-slate-11"},eue={key:0},tue={class:"mt-2 text-xs tracking-tight text-center text-n-slate-11"},nue={key:1,href:"/super_admin",class:"block w-full"},h_={__name:"BasePaywallModal",props:{featurePrefix:{type:String,required:!0},i18nKey:{type:String,required:!0},isOnChatwootCloud:{type:Boolean,default:!1},isSuperAdmin:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=t;return(s,o)=>{const a=ct("dompurify-html");return m(),f("div",Yde,[c("div",Xde,[c("span",qde,[b(Ht,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),c("span",Zde,v(s.$t(`${e.featurePrefix}.PAYWALL.TITLE`)),1)]),ie(c("p",Qde,null,512),[[a,s.$t(`${e.featurePrefix}.${e.i18nKey}.AVAILABLE_ON`)]]),c("p",Jde,[be(v(s.$t(`${e.featurePrefix}.${e.i18nKey}.UPGRADE_PROMPT`))+" ",1),!e.isOnChatwootCloud&&!e.isSuperAdmin?(m(),f("span",eue,v(s.$t(`${e.featurePrefix}.ENTERPRISE_PAYWALL.ASK_ADMIN`)),1)):x("",!0)]),e.isOnChatwootCloud?(m(),f(pe,{key:0},[b(he,{blue:"",solid:"",md:"",onClick:o[0]||(o[0]=i=>n("upgrade"))},{default:j(()=>[be(v(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1}),c("span",tue,v(s.$t(`${e.featurePrefix}.PAYWALL.CANCEL_ANYTIME`)),1)],64)):e.isSuperAdmin?(m(),f("a",nue,[b(he,{solid:"",blue:"",md:"",class:"w-full"},{default:j(()=>[be(v(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1})])):x("",!0)])}}},sue={__name:"SLAPaywallEnterprise",props:{isSuperAdmin:{type:Boolean,default:!1},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=e,s=t,o=n.isOnChatwootCloud?"PAYWALL":"ENTERPRISE_PAYWALL";return(a,i)=>(m(),P(dS,null,{default:j(()=>[b(h_,{"feature-prefix":"SLA","i18n-key":I(o),"is-on-chatwoot-cloud":e.isOnChatwootCloud,"is-super-admin":e.isSuperAdmin,onUpgrade:i[0]||(i[0]=l=>s("upgrade"))},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])]),_:1}))}},aue={components:{AddSLA:Nde,SettingsLayout:Ha,SLAEmptyState:Kde,SLAHeader:zde,SLAListItem:Af,SLAListItemLoading:jde,SLAPaywallEnterprise:sue},data(){return{loading:{},showAddPopup:!1,showDeleteConfirmationPopup:!1,selectedResponse:{}}},computed:{...gt({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",records:"sla/getSLA",currentUser:"getCurrentUser",accountId:"getCurrentAccountId",uiFlags:"sla/getUIFlags"}),deleteConfirmText(){return this.$t("SLA.DELETE.CONFIRM.YES")},deleteRejectText(){return this.$t("SLA.DELETE.CONFIRM.NO")},deleteMessage(){return` ${this.selectedResponse.name}`},isBehindAPaywall(){return!this.isFeatureEnabledonAccount(this.accountId,"sla")},isSuperAdmin(){return this.currentUser.type==="SuperAdmin"}},mounted(){this.$store.dispatch("sla/get")},methods:{openAddPopup(){this.isBehindAPaywall||(this.showAddPopup=!0)},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedResponse=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},confirmDeletion(){this.loading[this.selectedResponse.id]=!0,this.closeDeletePopup(),this.deleteSla(this.selectedResponse.id)},deleteSla(e){this.$store.dispatch("sla/delete",e).then(()=>{Te(this.$t("SLA.DELETE.API.SUCCESS_MESSAGE"))}).catch(()=>{Te(this.$t("SLA.DELETE.API.ERROR_MESSAGE"))}).finally(()=>{this.loading[this.selectedResponse.id]=!1})},displayTime(e){const{time:t,unit:n}=PE(e,{minute:"m",hour:"h",day:"d"});return t?`${t}${n}`:"-"},onClickCTA(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})}}},oue={key:2,class:"flex flex-col w-full h-full gap-3"};function iue(e,t,n,s,o,a){const i=F("SLAHeader"),l=F("SLAListItemLoading"),r=F("SLAPaywallEnterprise"),d=F("SLAEmptyState"),u=F("SLAListItem"),p=F("AddSLA"),h=F("woot-modal"),g=F("woot-delete-modal"),_=F("SettingsLayout");return m(),P(_,{"is-loading":e.uiFlags.isFetching,"loading-message":e.$t("SLA.LOADING")},{header:j(()=>[b(i,{"show-actions":e.records.length>0,onAdd:a.openAddPopup},null,8,["show-actions","onAdd"])]),loading:j(()=>[(m(),f(pe,null,ye(2,T=>b(l,{key:T,class:"mb-3"})),64))]),body:j(()=>[a.isBehindAPaywall?(m(),P(r,{key:0,"is-super-admin":a.isSuperAdmin,"is-on-chatwoot-cloud":e.isOnChatwootCloud,onUpgrade:a.onClickCTA},null,8,["is-super-admin","is-on-chatwoot-cloud","onUpgrade"])):e.records.length?(m(),f("div",oue,[(m(!0),f(pe,null,ye(e.records,T=>(m(),P(u,{key:T.title,"sla-name":T.name,description:T.description,"first-response":a.displayTime(T.first_response_time_threshold),"next-response":a.displayTime(T.next_response_time_threshold),"resolution-time":a.displayTime(T.resolution_time_threshold),"has-business-hours":T.only_during_business_hours,"is-loading":o.loading[T.id],onDelete:S=>a.openDeletePopup(T)},null,8,["sla-name","description","first-response","next-response","resolution-time","has-business-hours","is-loading","onDelete"]))),128))])):(m(),P(d,{key:1,onPrimaryAction:a.openAddPopup},null,8,["onPrimaryAction"])),b(h,{show:o.showAddPopup,"onUpdate:show":t[0]||(t[0]=T=>o.showAddPopup=T),"on-close":a.hideAddPopup},{default:j(()=>[b(p,{onClose:a.hideAddPopup},null,8,["onClose"])]),_:1},8,["show","on-close"]),b(g,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=T=>o.showDeleteConfirmationPopup=T),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:e.$t("SLA.DELETE.CONFIRM.TITLE"),message:e.$t("SLA.DELETE.CONFIRM.MESSAGE"),"message-value":a.deleteMessage,"confirm-text":a.deleteConfirmText,"reject-text":a.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message"])}const lue=Re(aue,[["render",iue]]),cb={featureFlag:xt.SLA,permissions:["administrator"],installationTypes:[Ns.CLOUD,Ns.ENTERPRISE]},rue={routes:[{path:Pt("accounts/:accountId/settings/sla"),component:da,props:{},children:[{path:"",name:"sla_wrapper",meta:cb,redirect:e=>({name:"sla_list",params:e.params})},{path:"list",name:"sla_list",meta:cb,component:lue}]}]},cue={class:"flex-1 overflow-auto"},due={class:"mt-6 flex-1 text-slate-700 dark:text-slate-300"},uue={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},mue={key:2,class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},pue={class:"divide-y divide-slate-50 dark:divide-slate-800"},hue={class:"py-4 ltr:pr-4 rtl:pl-4"},fue={class:"block font-medium capitalize"},gue={class:"mb-0"},_ue={class:"py-4 flex justify-end gap-1"},vue={__name:"Index",setup(e){const t=Ot(),{t:n}=He(),s=vn(),o=w(()=>s["teams/getTeams"].value),a=w(()=>s["teams/getUIFlags"].value),{isAdmin:i}=xo(),l=U({}),r=async({id:y})=>{try{l.value[y]=!0,await t.dispatch("teams/delete",y),Te(n("TEAMS_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{Te(n("TEAMS_SETTINGS.DELETE.API.ERROR_MESSAGE"))}finally{l.value[y]=!1}},d=U(!1),u=U({}),p=y=>{d.value=!0,u.value=y},h=()=>{d.value=!1,u.value={}},g=()=>{r(u.value),h()},_=w(()=>`${n("TEAMS_SETTINGS.DELETE.CONFIRM.YES")} ${u.value.name}`),T=w(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.NO")),S=w(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.TITLE",{teamName:u.value.name})),E=w(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.PLACE_HOLDER",{teamName:u.value.name}));return(y,A)=>{const C=F("router-link"),O=F("woot-loading-state"),N=F("woot-confirm-delete-modal"),R=ct("tooltip");return m(),f("div",cue,[b(Ds,{title:y.$t("TEAMS_SETTINGS.HEADER"),description:y.$t("TEAMS_SETTINGS.DESCRIPTION"),"link-text":y.$t("TEAMS_SETTINGS.LEARN_MORE"),"feature-name":"team_management"},{actions:j(()=>[I(i)?(m(),P(C,{key:0,to:{name:"settings_teams_new"}},{default:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:y.$t("TEAMS_SETTINGS.NEW_TEAM")},null,8,["label"])]),_:1})):x("",!0)]),_:1},8,["title","description","link-text"]),c("div",due,[a.value.isFetching?(m(),P(O,{key:0,message:y.$t("TEAMS_SETTINGS.LOADING")},null,8,["message"])):o.value.length?(m(),f("table",mue,[c("tbody",pue,[(m(!0),f(pe,null,ye(o.value,k=>(m(),f("tr",{key:k.id},[c("td",hue,[c("span",fue,v(k.name),1),c("p",gue,v(k.description),1)]),c("td",_ue,[b(C,{to:{name:"settings_teams_edit",params:{teamId:k.id}}},{default:j(()=>[I(i)?ie((m(),P(he,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[R,y.$t("TEAMS_SETTINGS.LIST.EDIT_TEAM"),void 0,{top:!0}]]):x("",!0)]),_:2},1032,["to"]),I(i)?ie((m(),P(he,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":l.value[k.id],onClick:L=>p(k)},null,8,["is-loading","onClick"])),[[R,y.$t("TEAMS_SETTINGS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):x("",!0)])]))),128))])])):(m(),f("p",uue,v(y.$t("TEAMS_SETTINGS.LIST.404")),1))]),d.value?(m(),P(N,{key:0,show:d.value,"onUpdate:show":A[0]||(A[0]=k=>d.value=k),title:S.value,message:y.$t("TEAMS_SETTINGS.DELETE.CONFIRM.MESSAGE"),"confirm-text":_.value,"reject-text":T.value,"confirm-value":u.value.name,"confirm-place-holder-text":E.value,onOnConfirm:g,onOnClose:h},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):x("",!0)])}}},bue={computed:{items(){const e=["WIZARD_CREATE","WIZARD_ADD_AGENTS","WIZARD_FINISH"],t={WIZARD_CREATE:"settings_teams_new",WIZARD_ADD_AGENTS:"settings_teams_add_agents",WIZARD_FINISH:"settings_teams_finish"};return e.map(n=>({title:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.BODY`),route:t[n]}))}}},Eue={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full px-5 flex-1"};function Tue(e,t,n,s,o,a){const i=F("woot-wizard"),l=F("router-view");return m(),f("div",Eue,[b(i,{class:"hidden md:block col-span-2",items:a.items},null,8,["items"]),b(l)])}const yue=Re(bue,[["render",Tue]]),Aue={computed:{items(){const e={EDIT_WIZARD_DETAILS:"settings_teams_edit",EDIT_WIZARD_AGENTS:"settings_teams_edit_members",EDIT_WIZARD_FINISH:"settings_teams_edit_finish"};return["EDIT_WIZARD_DETAILS","EDIT_WIZARD_AGENTS","EDIT_WIZARD_FINISH"].map(n=>({title:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.BODY`),route:e[n]}))}}},Sue={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full px-5 flex-1"};function Iue(e,t,n,s,o,a){const i=F("woot-wizard"),l=F("router-view");return m(),f("div",Sue,[b(i,{class:"hidden md:block col-span-2",items:a.items},null,8,["items"]),b(l)])}const Cue=Re(Aue,[["render",Iue]]),Nue={title:{required:it,minLength:Nn(2)},description:{},showOnSidebar:{}},Oue={components:{NextButton:he,FormInput:Hh},props:{onSubmit:{type:Function,default:()=>{}},submitInProgress:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},submitButtonText:{type:String,default:""}},setup(e){const t=e.formData||{},{description:n="",name:s="",allow_auto_assign:o=!0}=t,a=ks({description:n,title:s,allowAutoAssign:o}),l=Lt(Nue,a);return{state:a,v$:l}},methods:{handleSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.onSubmit({description:this.state.description,name:this.state.title,allow_auto_assign:this.state.allowAutoAssign})}}},xue={class:"flex-shrink-0 w-full"},wue={class:"w-full flex items-center gap-2"},Rue={for:"conversation_creation"},$ue={class:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},Mue={class:"w-full"};function kue(e,t,n,s,o,a){const i=F("FormInput"),l=F("NextButton");return m(),f("div",xue,[c("form",{class:"mx-0 grid gap-4",onSubmit:t[3]||(t[3]=Ke((...r)=>a.handleSubmit&&a.handleSubmit(...r),["prevent"]))},[b(i,{modelValue:s.state.title,"onUpdate:modelValue":t[0]||(t[0]=r=>s.state.title=r),name:"title",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.NAME.PLACEHOLDER"),"has-error":s.v$.title.$error,"error-message":s.v$.title.$error?s.v$.title.$errors[0].$message:"",onBlur:s.v$.title.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),b(i,{modelValue:s.state.description,"onUpdate:modelValue":t[1]||(t[1]=r=>s.state.description=r),name:"description",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.PLACEHOLDER"),"has-error":s.v$.description.$error,"error-message":s.v$.description.$error?s.v$.description.$errors[0].$message:"",onBlur:s.v$.description.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),c("div",wue,[ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.state.allowAutoAssign=r),type:"checkbox",value:!0},null,512),[[Kt,s.state.allowAutoAssign]]),c("label",Rue,v(e.$t("TEAMS_SETTINGS.FORM.AUTO_ASSIGN.LABEL")),1)]),c("div",$ue,[c("div",Mue,[b(l,{type:"submit",label:n.submitButtonText,disabled:s.v$.title.$invalid||n.submitInProgress,"is-loading":n.submitInProgress},null,8,["label","disabled","is-loading"])])])],32)])}const uS=Re(Oue,[["render",kue]]),Lue={components:{TeamForm:uS,PageHeader:ta},data(){return{enabledFeatures:{}}},methods:{async createTeam(e){try{const t=await this.$store.dispatch("teams/create",{...e});Jn.replace({name:"settings_teams_add_agents",params:{page:"new",teamId:t.id}})}catch{Te(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},Due={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Pue={class:"flex flex-wrap"};function Bue(e,t,n,s,o,a){const i=F("PageHeader"),l=F("TeamForm");return m(),f("div",Due,[b(i,{"header-title":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),c("div",Pue,[b(l,{"on-submit":a.createTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.FORM.SUBMIT_CREATE")},null,8,["on-submit","submit-button-text"])])])}const Fue=Re(Lue,[["render",Bue]]),Uue={components:{TeamForm:uS,PageHeader:ta,Spinner:Os},data(){return{enabledFeatures:{}}},computed:{teamData(){const{teamId:e}=this.$route.params;return this.$store.getters["teams/getTeam"](e)},showTeamForm(){const{id:e}=this.teamData;return e&&!this.uiFlags.isFetching},...gt({uiFlags:"teams/getUIFlags"})},methods:{async updateTeam(e){try{const{teamId:t}=this.$route.params;await this.$store.dispatch("teams/update",{id:t,...e}),Jn.replace({name:"settings_teams_edit_members",params:{page:"edit",teamId:t}})}catch{Te(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},Gue={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Vue={class:"flex flex-wrap"};function Hue(e,t,n,s,o,a){const i=F("PageHeader"),l=F("TeamForm"),r=F("Spinner");return m(),f("div",Gue,[b(i,{"header-title":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),c("div",Vue,[a.showTeamForm?(m(),P(l,{key:0,"on-submit":a.updateTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.BUTTON_TEXT"),"form-data":a.teamData},null,8,["on-submit","submit-button-text","form-data"])):(m(),P(r,{key:1}))])])}const Kue=Re(Uue,[["render",Hue]]),zue={components:{NextButton:he,Thumbnail:Qn},props:{agentList:{type:Array,default:()=>[]},selectedAgents:{type:Array,default:()=>[]},updateSelectedAgents:{type:Function,default:()=>{}},isWorking:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},data(){return{}},computed:{selectedAgentCount(){return this.selectedAgents.length},allAgentsSelected(){return this.selectedAgents.length===this.agentList.length},disableSubmitButton(){return this.selectedAgentCount===0}},methods:{isAgentSelected(e){return this.selectedAgents.includes(e)},handleSelectAgent(e){const t=this.isAgentSelected(e);let n=[];t?n=this.selectedAgents.filter(s=>s!==e):n=[...this.selectedAgents,e],this.updateSelectedAgents(n)},selectAllAgents(){const e=this.agentList.map(t=>t.id);this.updateSelectedAgents(e)},agentRowClass(e){return{"is-active":this.isAgentSelected(e)}}}},Wue={class:"woot-table"},jue={class:"ltr:pl-2.5 rtl:pr-2.5"},Yue={class:"flex items-center"},Xue=["checked","title"],que={class:"text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5"},Zue={class:"text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5"},Que={class:"w-12"},Jue={class:"flex items-center"},eme=["checked","onClick"],tme={class:"flex items-center gap-2"},nme={class:"text-base mb-0 text-slate-800 dark:text-slate-100"},sme={class:"flex items-center justify-between mt-2"};function ame(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("NextButton");return m(),f("div",null,[t[1]||(t[1]=c("div",{class:"add-agents__header"},null,-1)),c("table",Wue,[c("thead",null,[c("tr",null,[c("td",jue,[c("div",Yue,[c("input",{name:"select-all-agents",type:"checkbox",checked:a.allAgentsSelected?"checked":"",title:e.$t("TEAMS_SETTINGS.AGENTS.SELECT_ALL"),onClick:t[0]||(t[0]=Ke((...r)=>a.selectAllAgents&&a.selectAllAgents(...r),["self"]))},null,8,Xue)])]),c("td",que,v(e.$t("TEAMS_SETTINGS.AGENTS.AGENT")),1),c("td",Zue,v(e.$t("TEAMS_SETTINGS.AGENTS.EMAIL")),1)])]),c("tbody",null,[(m(!0),f(pe,null,ye(n.agentList,r=>(m(),f("tr",{key:r.id,class:re(a.agentRowClass(r.id))},[c("td",Que,[c("div",Jue,[c("input",{type:"checkbox",checked:a.isAgentSelected(r.id),onClick:Ke(()=>a.handleSelectAgent(r.id),["self"])},null,8,eme)])]),c("td",null,[c("div",tme,[b(i,{src:r.thumbnail,size:"24px",username:r.name,status:r.availability_status},null,8,["src","username","status"]),c("h4",nme,v(r.name),1)])]),c("td",null,v(r.email||"---"),1)],2))),128))])]),c("div",sme,[c("p",null,v(e.$t("TEAMS_SETTINGS.AGENTS.SELECTED_COUNT",{selected:n.selectedAgents.length,total:n.agentList.length})),1),b(l,{type:"submit",label:n.submitButtonText,disabled:a.disableSubmitButton,"is-loading":n.isWorking},null,8,["label","disabled","is-loading"])])])}const mS=Re(zue,[["render",ame],["__scopeId","data-v-77026370"]]),ome={components:{PageHeader:ta,AgentSelector:mS},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:Lt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...gt({agentList:"agents/getAgents"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.ADD.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)}},mounted(){this.$store.dispatch("agents/get")},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},selectAllAgents(){this.selectedAgents=this.agentList.map(e=>e.id)},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/create",{teamId:e,agentsList:t}),Jn.replace({name:"settings_teams_finish",params:{page:"new",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){Te(n.message)}this.isCreating=!1}}},ime={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},lme={class:"w-full"},rme={class:"w-full"},cme={key:0},dme={class:"error-message"};function ume(e,t,n,s,o,a){const i=F("PageHeader"),l=F("AgentSelector");return m(),f("div",ime,[c("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=Ke((...r)=>a.addAgents&&a.addAgents(...r),["prevent"]))},[c("div",lme,[b(i,{"header-title":a.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.ADD.DESC")},null,8,["header-title","header-content"])]),c("div",rme,[s.v$.selectedAgents.$error?(m(),f("div",cme,[c("p",dme,v(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):x("",!0),b(l,{"agent-list":e.agentList,"selected-agents":o.selectedAgents,"update-selected-agents":a.updateSelectedAgents,"is-working":o.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.ADD.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])])],32)])}const mme=Re(ome,[["render",ume]]),pme={components:{Spinner:Os,PageHeader:ta,AgentSelector:mS},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:Lt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...gt({agentList:"agents/getAgents",uiFlags:"teamMembers/getUIFlags"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)},teamMembers(){return this.$store.getters["teamMembers/getTeamMembers"](this.teamId)},showAgentsList(){const{id:e}=this.currentTeam;return e&&!this.uiFlags.isFetching}},async mounted(){const{teamId:e}=this.$route.params;this.$store.dispatch("agents/get");try{await this.$store.dispatch("teamMembers/get",{teamId:e});const t=this.teamMembers.map(n=>n.id);this.updateSelectedAgents(t)}catch{this.updateSelectedAgents([])}},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/update",{teamId:e,agentsList:t}),Jn.replace({name:"settings_teams_edit_finish",params:{page:"edit",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){Te(n.message)}this.isCreating=!1}}},hme={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},fme={class:"w-full"},gme={class:"w-full"},_me={key:0},vme={class:"error-message"};function bme(e,t,n,s,o,a){const i=F("PageHeader"),l=F("AgentSelector"),r=F("Spinner");return m(),f("div",hme,[c("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=Ke((...d)=>a.addAgents&&a.addAgents(...d),["prevent"]))},[c("div",fme,[b(i,{"header-title":a.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.DESC")},null,8,["header-title","header-content"])]),c("div",gme,[s.v$.selectedAgents.$error?(m(),f("div",_me,[c("p",vme,v(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):x("",!0),a.showAgentsList?(m(),P(l,{key:1,"agent-list":e.agentList,"selected-agents":o.selectedAgents,"update-selected-agents":a.updateSelectedAgents,"is-working":o.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])):(m(),P(r,{key:2}))])],32)])}const Eme=Re(pme,[["render",bme]]),Tme={components:{NextButton:he,EmptyState:vl}},yme={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Ame={class:"w-full text-center"};function Sme(e,t,n,s,o,a){const i=F("NextButton"),l=F("router-link"),r=F("EmptyState");return m(),f("div",yme,[b(r,{title:e.$t("TEAMS_SETTINGS.FINISH.TITLE"),message:e.$t("TEAMS_SETTINGS.FINISH.MESSAGE"),"button-text":e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},{default:j(()=>[c("div",Ame,[b(l,{to:{name:"settings_teams_list"}},{default:j(()=>[b(i,{teal:"",label:e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1})])]),_:1},8,["title","message","button-text"])])}const db=Re(Tme,[["render",Sme]]),Ime={routes:[{path:Pt("accounts/:accountId/settings/teams"),component:da,children:[{path:"",redirect:e=>({name:"settings_teams_list",params:e.params})},{path:"list",name:"settings_teams_list",component:vue,meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]}}]},{path:Pt("accounts/:accountId/settings/teams"),component:Pc,props:()=>({headerTitle:"TEAMS_SETTINGS.HEADER",headerButtonText:"TEAMS_SETTINGS.NEW_TEAM",icon:"people-team",newButtonRoutes:["settings_teams_new"],showBackButton:!0}),children:[{path:"new",component:yue,children:[{path:"",name:"settings_teams_new",component:Fue,meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/finish",name:"settings_teams_finish",component:db,meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/agents",name:"settings_teams_add_agents",meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]},component:mme}]},{path:":teamId/edit",component:Cue,children:[{path:"",name:"settings_teams_edit",component:Kue,meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"agents",name:"settings_teams_edit_members",component:Eme,meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"finish",name:"settings_teams_edit_finish",meta:{featureFlag:xt.TEAM_MANAGEMENT,permissions:["administrator"]},component:db}]}]}]},Cme={class:"flex flex-col h-auto overflow-auto"},Nme={class:"w-full"},Ome=["placeholder"],xme={class:"w-full"},wme=["placeholder"],Rme={class:"w-full"},$me={class:"flex flex-col gap-2.5 mb-4 mt-2"},Mme=["id","value"],kme=["for"],Lme={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},Dme={__name:"CustomRoleModal",props:{mode:{type:String,default:"add",validator:e=>["add","edit"].includes(e)},selectedRole:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=Ot(),{t:a}=He(),i=U(""),l=U(""),r=U([]),d=U(null),u=ks({showLoading:!1,message:""}),p=w(()=>({name:{required:it,minLength:Nn(2)},description:{required:it},selectedPermissions:{required:it,minLength:Nn(1)}})),h=Lt(p,{name:i,description:l,selectedPermissions:r}),g=()=>{i.value="",l.value="",r.value=[],h.value.$reset()},_=()=>{i.value=n.selectedRole.name||"",l.value=n.selectedRole.description||"",r.value=n.selectedRole.permissions||[]};lt(r,(O,N)=>{const R=O.includes(yr)&&!N.includes(yr),k=N.includes(yr)&&!O.includes(yr);R?r.value=[...new Set([...r.value,nO,sO])]:k&&(r.value=r.value.filter(L=>L!==yr))},{deep:!0}),ut(()=>{var O;n.mode==="edit"&&_(),(O=d.value)==null||O.focus()});const T=O=>n.mode==="edit"?`CUSTOM_ROLE.EDIT.${O}`:`CUSTOM_ROLE.ADD.${O}`,S=w(()=>a(T("TITLE"))),E=w(()=>a(T("DESC"))),y=w(()=>a(T("SUBMIT"))),A=async()=>{if(h.value.$touch(),!h.value.$invalid){u.showLoading=!0;try{const O={name:i.value,description:l.value,permissions:r.value};n.mode==="edit"?(await o.dispatch("customRole/updateCustomRole",{id:n.selectedRole.id,...O}),Te(a("CUSTOM_ROLE.EDIT.API.SUCCESS_MESSAGE"))):(await o.dispatch("customRole/createCustomRole",O),Te(a("CUSTOM_ROLE.ADD.API.SUCCESS_MESSAGE"))),g(),s("close")}catch(O){const N=(O==null?void 0:O.message)||a("CUSTOM_ROLE.FORM.API.ERROR_MESSAGE");Te(N)}finally{u.showLoading=!1}}},C=w(()=>h.value.$invalid||u.showLoading);return(O,N)=>{const R=F("woot-modal-header");return m(),f("div",Cme,[b(R,{"header-title":S.value,"header-content":E.value},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col w-full",onSubmit:Ke(A,["prevent"])},[c("div",Nme,[c("label",{class:re({error:I(h).name.$error})},[be(v(O.$t("CUSTOM_ROLE.FORM.NAME.LABEL"))+" ",1),ie(c("input",{ref_key:"nameInput",ref:d,"onUpdate:modelValue":N[0]||(N[0]=k=>i.value=k),type:"text",placeholder:O.$t("CUSTOM_ROLE.FORM.NAME.PLACEHOLDER"),onBlur:N[1]||(N[1]=(...k)=>I(h).name.$touch&&I(h).name.$touch(...k))},null,40,Ome),[[at,i.value,void 0,{trim:!0}]])],2)]),c("div",xme,[c("label",{class:re({error:I(h).description.$error})},[be(v(O.$t("CUSTOM_ROLE.FORM.DESCRIPTION.LABEL"))+" ",1),ie(c("textarea",{"onUpdate:modelValue":N[2]||(N[2]=k=>l.value=k),rows:3,placeholder:O.$t("CUSTOM_ROLE.FORM.DESCRIPTION.PLACEHOLDER"),onBlur:N[3]||(N[3]=(...k)=>I(h).description.$touch&&I(h).description.$touch(...k))},null,40,wme),[[at,l.value]])],2)]),c("div",Rme,[c("label",{class:re({"text-red-500":I(h).selectedPermissions.$error})},v(O.$t("CUSTOM_ROLE.FORM.PERMISSIONS.LABEL")),3),c("div",$me,[(m(!0),f(pe,null,ye(I(tO),k=>(m(),f("div",{key:k,class:"flex items-center"},[ie(c("input",{id:k,"onUpdate:modelValue":N[4]||(N[4]=L=>r.value=L),type:"checkbox",value:k,name:"permissions",class:"ltr:mr-2 rtl:ml-2"},null,8,Mme),[[Kt,r.value]]),c("label",{for:k,class:"text-sm font-normal"},v(O.$t(`CUSTOM_ROLE.PERMISSIONS.${k.toUpperCase()}`)),9,kme)]))),128))])]),c("div",Lme,[b(he,{faded:"",slate:"",type:"reset",label:O.$t("CUSTOM_ROLE.FORM.CANCEL_BUTTON_TEXT"),onClick:N[5]||(N[5]=Ke(k=>s("close"),["prevent"]))},null,8,["label"]),b(he,{type:"submit",label:y.value,disabled:C.value,"is-loading":u.showLoading},null,8,["label","disabled","is-loading"])])],32)])}}},Pme={class:"divide-y divide-n-weak text-n-slate-11"},Bme=["title"],Fme={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},Ume={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},Gme={class:"flex justify-end gap-1 py-4"},pS={__name:"CustomRoleTableBody",props:{roles:{type:Array,required:!0},loading:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=a=>a.permissions.map(i=>s(Kg("CUSTOM_ROLE.PERMISSIONS",i))).join(", ");return(a,i)=>{const l=ct("tooltip");return m(),f("tbody",Pme,[(m(!0),f(pe,null,ye(e.roles,(r,d)=>(m(),f("tr",{key:d},[c("td",{class:"max-w-xs py-4 ltr:pr-4 rtl:pl-4 font-medium truncate align-baseline",title:r.name},v(r.name),9,Bme),c("td",Fme,v(r.description),1),c("td",Ume,v(o(r)),1),c("td",Gme,[ie(b(he,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:u=>n("edit",r)},null,8,["onClick"]),[[l,a.$t("CUSTOM_ROLE.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),ie(b(he,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[r.id],onClick:u=>n("delete",r)},null,8,["is-loading","onClick"]),[[l,a.$t("CUSTOM_ROLE.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])}}},Vme={class:"w-full min-h-[12rem] relative"},Hme={class:"w-full space-y-3 text-sm"},Kme={class:"opacity-30 dark:opacity-30"},zme={class:"mb-0"},Wme={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},jme={__name:"CustomRolePaywall",setup(e){const t=[{name:"All Permissions",description:"All permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage","contact_manage","report_manage","knowledge_base_manage"]},{name:"Conversation Permissions",description:"Conversation permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage"]},{name:"Contact Permissions",description:"Contact permissions",permissions:["contact_manage"]},{name:"Report Permissions",description:"Report permissions",permissions:["report_manage"]}],n=wn(),s=Ve("globalConfig/isOnChatwootCloud"),o=Ve("getCurrentUser"),a=Ve("getCurrentAccountId"),i=w(()=>o.value.type==="SuperAdmin"),l=w(()=>s.value?"PAYWALL":"ENTERPRISE_PAYWALL"),r=()=>{n.push({name:"billing_settings_index",params:{accountId:a.value}})},{t:d}=He(),u=w(()=>[d("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]);return(p,h)=>(m(),f("div",Vme,[c("div",Hme,[c("thead",Kme,[(m(!0),f(pe,null,ye(u.value,g=>(m(),f("th",{key:g,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-slate-700 dark:text-slate-300"},[c("span",zme,v(g),1)]))),128))]),b(pS,{class:"opacity-25 dark:opacity-20",roles:t,loading:{}})]),c("div",Wme,[b(h_,{"feature-prefix":"CUSTOM_ROLE","i18n-key":l.value,"is-on-chatwoot-cloud":I(s),"is-super-admin":i.value,onUpgrade:r},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])])]))}},Yme={key:1,class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},Xme={class:"mb-0"},qme={__name:"Index",setup(e){const t=Ot(),{t:n}=He(),s=U(!1),o=U("add"),a=U(null),i=U({}),l=U(!1),r=U({}),d=Ve("customRole/getCustomRoles"),u=Ve("customRole/getUIFlags"),p=w(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.YES")} ${r.value.name}`),h=w(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.NO")} ${r.value.name}`),g=w(()=>` ${r.value.name} ? `),_=Ve("accounts/isFeatureEnabledonAccount"),T=Ve("getCurrentAccountId"),S=w(()=>!_.value(T.value,"custom_roles")),E=async()=>{try{await t.dispatch("customRole/getCustomRole")}catch{}};ut(()=>{E()});const y=w(()=>[n("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]),A=$=>{i.value[r.value.id]=!1,r.value={},Te($)},C=()=>{S.value||(o.value="add",a.value=null,s.value=!0)},O=$=>{o.value="edit",a.value=$,s.value=!0},N=()=>{a.value=null,s.value=!1},R=$=>{l.value=!0,r.value=$},k=()=>{l.value=!1},L=async $=>{try{await t.dispatch("customRole/deleteCustomRole",$),A(n("CUSTOM_ROLE.DELETE.API.SUCCESS_MESSAGE"))}catch(M){const K=(M==null?void 0:M.message)||n("CUSTOM_ROLE.DELETE.API.ERROR_MESSAGE");A(K)}},D=()=>{i[r.value.id]=!0,k(),L(r.value.id)};return($,M)=>{const K=F("woot-modal"),B=F("woot-delete-modal");return m(),P(Ha,{"is-loading":I(u).fetchingList,"loading-message":$.$t("CUSTOM_ROLE.LOADING"),"no-records-found":!I(d).length&&!S.value,"no-records-message":$.$t("CUSTOM_ROLE.LIST.404")},{header:j(()=>[b(Ds,{title:$.$t("CUSTOM_ROLE.HEADER"),description:$.$t("CUSTOM_ROLE.DESCRIPTION"),"link-text":$.$t("CUSTOM_ROLE.LEARN_MORE"),"feature-name":"canned_responses"},{actions:j(()=>[b(he,{icon:"i-lucide-circle-plus",label:$.$t("CUSTOM_ROLE.HEADER_BTN_TXT"),disabled:S.value,onClick:C},null,8,["label","disabled"])]),_:1},8,["title","description","link-text"])]),body:j(()=>[S.value?(m(),P(jme,{key:0})):(m(),f("table",Yme,[c("thead",null,[(m(!0),f(pe,null,ye(y.value,H=>(m(),f("th",{key:H,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-slate-700 dark:text-slate-300"},[c("span",Xme,v(H),1)]))),128))]),b(pS,{roles:I(d),loading:i.value,onEdit:O,onDelete:R},null,8,["roles","loading"])]))]),default:j(()=>[b(K,{show:s.value,"onUpdate:show":M[0]||(M[0]=H=>s.value=H),"on-close":N},{default:j(()=>[b(Dme,{mode:o.value,"selected-role":a.value,onClose:N},null,8,["mode","selected-role"])]),_:1},8,["show"]),b(B,{show:l.value,"onUpdate:show":M[1]||(M[1]=H=>l.value=H),"on-close":k,"on-confirm":D,title:$.$t("CUSTOM_ROLE.DELETE.CONFIRM.TITLE"),message:$.$t("CUSTOM_ROLE.DELETE.CONFIRM.MESSAGE"),"message-value":g.value,"confirm-text":p.value,"reject-text":h.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},Zme={routes:[{path:Pt("accounts/:accountId/settings/custom-roles"),component:da,children:[{path:"",redirect:"list"},{path:"list",name:"custom_roles_list",meta:{featureFlag:xt.CUSTOM_ROLES,installationTypes:[Ns.CLOUD,Ns.ENTERPRISE],permissions:["administrator"]},component:qme}]}]},Qme={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-white dark:bg-slate-900"},Jme={__name:"Wrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=F("router-view");return m(),f("div",Qme,[b(s,null,{default:j(({Component:o})=>[e.keepAlive?(m(),P(Ic,{key:0},[(m(),P(hs(o)))],1024)):(m(),P(hs(o),{key:1}))]),_:1})])}}},epe={class:"flex flex-col gap-2"},tpe={class:"text-sm font-medium text-ash-900"},npe={__name:"UserProfilePicture",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(e,{emit:t}){const n=t,s=a=>{n("change",a)},o=()=>{n("delete")};return(a,i)=>(m(),f("div",epe,[c("span",tpe,v(a.$t("PROFILE_SETTINGS.FORM.PICTURE")),1),b(yn,{src:e.src||"",name:e.name||"",size:72,"allow-upload":"",onUpload:s,onDelete:o},null,8,["src","name"])]))}},spe={key:1,class:"text-sm font-medium truncate ltr:text-left rtl:text-right"},Em={__name:"Button",props:{variant:{type:String,default:"solid",validator:e=>["outline","ghost","solid"].includes(e)},size:{type:String,default:"large",validator:e=>["medium","large"].includes(e)},icon:{type:String,default:""},colorScheme:{type:String,default:"primary",validator:e=>["primary","secondary","danger"].includes(e)},trailingIcon:{type:Boolean,default:!1}},setup(e){const t=e,n=Bf(),s={outline:"outline outline-1 -outline-offset-1",ghost:"hover:text-600 active:text-600 focus:outline focus:outline-offset-1",solid:"hover:bg-700 active:bg-700 focus:outline focus:outline-offset-1 focus:outline-2"},o=w(()=>{if(n.disabled)return"bg-ash-200 text-ash-600 cursor-not-allowed";const r={primary:{outline:`${s.outline} outline-primary-400 hover:text-primary-600 active:text-primary-600`,ghost:`${s.ghost} focus:outline-primary-400`,solid:`${s.solid} bg-primary-600 text-white focus:outline-primary-400`},secondary:{outline:`${s.outline} outline-ash-400 hover:text-ash-900 active:text-ash-900 `,ghost:`${s.ghost} focus:outline-ash-400`,solid:`${s.solid} bg-ash-100 text-ash-900 focus:outline-ash-400`},danger:{outline:`${s.outline} outline-ruby-400 hover:text-ruby-600 active:text-ruby-600`,ghost:`${s.ghost} focus:outline-ruby-400`,solid:`${s.solid} bg-ruby-600 text-white focus:outline-ruby-400`}}[t.colorScheme];return r[t.variant]||r.solid}),a=w(()=>t.size==="medium"?"h-8 px-3 py-1.5 text-sm":"h-10 px-4 py-2.5 text"),i=w(()=>[o.value,a.value]);return(l,r)=>{const d=F("fluent-icon");return m(),f("button",As({class:["inline-flex items-center gap-1 text-sm font-medium reset-base rounded-xl w-fit",i.value]},l.$attrs),[e.icon&&!e.trailingIcon?(m(),P(d,{key:0,size:"1.16em",icon:e.icon,class:"flex-shrink-0"},null,8,["icon"])):x("",!0),l.$slots.default?(m(),f("span",spe,[et(l.$slots,"default")])):x("",!0),e.icon&&e.trailingIcon?(m(),P(d,{key:2,size:"1.16em",icon:e.icon,class:"flex-shrink-0"},null,8,["icon"])):x("",!0)],16)}}},ape={components:{FormButton:Em},props:{name:{type:String,default:""},email:{type:String,default:""},displayName:{type:String,default:""},emailEnabled:{type:Boolean,default:!1}},emits:["updateUser"],setup(){return{v$:Lt()}},data(){return{userName:this.name,userDisplayName:this.displayName,userEmail:this.email,inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{userName:{required:it,minLength:Nn(1)},userDisplayName:{},userEmail:{required:it,email:xi}},watch:{name:{handler(e){this.userName=e},immediate:!0},displayName:{handler(e){this.userDisplayName=e},immediate:!0},email:{handler(e){this.userEmail=e},immediate:!0}},methods:{async updateUser(){if(this.v$.$touch(),this.v$.$invalid){Te(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}this.$emit("updateUser",{name:this.userName,displayName:this.userDisplayName,email:this.userEmail})}}};function ope(e,t,n,s,o,a){const i=F("woot-input"),l=F("FormButton");return m(),f("form",{class:"flex flex-col gap-4",onSubmit:t[3]||(t[3]=Ke(r=>a.updateUser("profile"),["prevent"]))},[b(i,{modelValue:o.userName,"onUpdate:modelValue":t[0]||(t[0]=r=>o.userName=r),styles:o.inputStyles,class:re({error:s.v$.userName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.NAME.PLACEHOLDER"),error:`${s.v$.userName.$error?e.$t("PROFILE_SETTINGS.FORM.NAME.ERROR"):""}`,onInput:s.v$.userName.$touch,onBlur:s.v$.userName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),b(i,{modelValue:o.userDisplayName,"onUpdate:modelValue":t[1]||(t[1]=r=>o.userDisplayName=r),styles:o.inputStyles,class:re({error:s.v$.userDisplayName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.PLACEHOLDER"),error:`${s.v$.userDisplayName.$error?e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.ERROR"):""}`,onInput:s.v$.userDisplayName.$touch,onBlur:s.v$.userDisplayName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),n.emailEnabled?(m(),P(i,{key:0,modelValue:o.userEmail,"onUpdate:modelValue":t[2]||(t[2]=r=>o.userEmail=r),styles:o.inputStyles,class:re({error:s.v$.userEmail.$error}),label:e.$t("PROFILE_SETTINGS.FORM.EMAIL.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.EMAIL.PLACEHOLDER"),error:`${s.v$.userEmail.$error?e.$t("PROFILE_SETTINGS.FORM.EMAIL.ERROR"):""}`,onInput:s.v$.userEmail.$touch,onBlur:s.v$.userEmail.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"])):x("",!0),b(l,{type:"submit","color-scheme":"primary",variant:"solid",size:"large"},{default:j(()=>[be(v(e.$t("PROFILE_SETTINGS.BTN_TEXT")),1)]),_:1})],32)}const ipe=Re(ape,[["render",ope]]),lpe={__name:"MessageSignature",props:{messageSignature:{type:String,default:""}},emits:["updateSignature"],setup(e,{emit:t}){const n=e,s=t,o=u7,a=U(n.messageSignature);lt(()=>n.messageSignature??"",l=>{a.value=l});const i=()=>{s("updateSignature",a.value)};return(l,r)=>(m(),f("form",{class:"flex flex-col gap-6",onSubmit:r[1]||(r[1]=Ke(d=>i(),["prevent"]))},[b(wo,{id:"message-signature-input",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=d=>a.value=d),class:"message-editor h-[10rem] !px-3","is-format-mode":"",placeholder:l.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE.PLACEHOLDER"),"enabled-menu-options":I(o),"enable-suggestions":!1,"show-image-resize-toolbar":""},null,8,["modelValue","placeholder","enabled-menu-options"]),b(Em,{type:"submit","color-scheme":"primary",variant:"solid",size:"large"},{default:j(()=>[be(v(l.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.BTN_TEXT")),1)]),_:1})],32))}},rpe={components:{WithLabel:aO},props:{id:{type:String,default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},label:{type:String,required:!0},modelValue:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:modelValue"],methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}}},cpe=["id","selected","name"],dpe={value:"",disabled:"",selected:"",class:"hidden"},upe=["value"];function mpe(e,t,n,s,o,a){const i=F("WithLabel");return m(),P(i,{label:n.label,icon:n.icon,name:n.name,"has-error":n.hasError,"error-message":n.errorMessage},{default:j(()=>[c("select",{id:n.id,selected:n.modelValue,name:n.name,class:re([{"text-ash-400":!n.modelValue,"text-ash-900":n.modelValue,"pl-9":n.icon},"block w-full px-3 py-2 pr-6 mb-0 border-0 shadow-sm outline-none appearance-none rounded-xl select-caret ring-ash-200 ring-1 ring-inset placeholder:text-ash-900 focus:ring-2 focus:ring-inset focus:ring-primary-500 text-sm leading-6"]),onInput:t[0]||(t[0]=(...l)=>a.onInput&&a.onInput(...l))},[c("option",dpe,v(n.placeholder),1),et(e.$slots,"default",{},()=>[(m(!0),f(pe,null,ye(n.options,l=>(m(),f("option",{key:l.value,value:l.value},v(l.label),9,upe))),128))],!0)],42,cpe)]),_:3},8,["label","icon","name","has-error","error-message"])}const ac=Re(rpe,[["render",mpe],["__scopeId","data-v-b8315034"]]),ppe={class:"flex gap-2 justify-between w-full items-start"},hpe={class:"text-n-gray-12 font-medium leading-6 text-sm"},fpe={class:"text-n-gray-11"},gpe=["value","selected"],_pe={__name:"FontSize",props:{value:{type:String,default:"default"},label:{type:String,default:""},description:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,{fontSizeOptions:o}=xg(),a=w({get:()=>n.value,set:i=>{s("change",i)}});return(i,l)=>(m(),f("div",ppe,[c("div",null,[c("label",hpe,v(e.label),1),c("p",fpe,v(e.description),1)]),b(ac,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value=r),name:"fontSize",spacing:"compact",class:"min-w-28 mt-px",value:a.value,options:I(o),label:""},{default:j(()=>[(m(!0),f(pe,null,ye(I(o),r=>(m(),f("option",{key:r.value,value:r.value,selected:r.value===a.value},v(r.label),9,gpe))),128))]),_:1},8,["modelValue","value","options"])]))}},vpe={class:"flex flex-col gap-2 items-center w-full rounded-t-[5px]"},bpe={class:"grid grid-cols-[1fr_auto] items-center w-full gap-1"},Epe={class:"overflow-hidden text-base font-medium text-ash-900 text-left"},Tpe={class:"block truncate"},ype=["checked","name"],Ape={class:"text-ash-900 text-sm line-clamp-2 leading-[1.4] text-start"},Spe=["src","alt"],Ipe=["src","alt"],Cpe={__name:"HotKeyCard",props:{active:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},lightImage:{type:String,default:""},darkImage:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("button",{class:re(["flex flex-col gap-4 w-full h-fit p-4 rounded-md border border-n-weak dark:border-n-weak",{"border-primary-300 ":e.active}])},[c("div",vpe,[c("div",bpe,[c("div",Epe,[c("span",Tpe,v(e.title),1)]),c("input",{checked:e.active,type:"radio",name:`hotkey-${e.title}`,class:"shadow cursor-pointer grid place-items-center border-2 border-ash-200 appearance-none rounded-full w-5 h-5 checked:bg-primary-600 before:content-[''] before:bg-primary-600 before:border-4 before:rounded-full before:border-ash-25 checked:before:w-[18px] checked:before:h-[18px] checked:border checked:border-primary-600"},null,8,ype)]),c("span",Ape,v(e.description),1)]),c("div",null,[c("img",{src:e.lightImage,alt:`Light themed image for ${e.title}`,class:"block object-cover w-full dark:hidden"},null,8,Spe),c("img",{src:e.darkImage,alt:`Dark themed image for ${e.title}`,class:"hidden object-cover w-full dark:block"},null,8,Ipe)])],2))}},Npe={components:{FormButton:Em},setup(){return{v$:Lt()}},data(){return{currentPassword:"",password:"",passwordConfirmation:"",isPasswordChanging:!1,errorMessage:"",inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{currentPassword:{required:it},password:{minLength:Nn(6)},passwordConfirmation:{minLength:Nn(6),isEqPassword(e){return e===this.password}}},computed:{isButtonDisabled(){return!this.currentPassword||!this.passwordConfirmation||!this.v$.passwordConfirmation.isEqPassword}},methods:{async changePassword(){if(this.v$.$touch(),this.v$.$invalid){Te(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}let e=this.$t("PROFILE_SETTINGS.PASSWORD_UPDATE_SUCCESS");try{await this.$store.dispatch("updateProfile",{password:this.password,password_confirmation:this.passwordConfirmation,current_password:this.currentPassword})}catch(t){e=Qf(t)||this.$t("RESET_PASSWORD.API.ERROR_MESSAGE")}finally{Te(e)}}}},Ope={class:"flex flex-col w-full gap-4"};function xpe(e,t,n,s,o,a){const i=F("woot-input"),l=F("FormButton");return m(),f("form",{onSubmit:t[3]||(t[3]=Ke(r=>a.changePassword(),["prevent"]))},[c("div",Ope,[b(i,{modelValue:o.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=r=>o.currentPassword=r),type:"password",styles:o.inputStyles,class:re({error:s.v$.currentPassword.$error}),label:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.PLACEHOLDER"),error:`${s.v$.currentPassword.$error?e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.ERROR"):""}`,onInput:s.v$.currentPassword.$touch,onBlur:s.v$.currentPassword.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),b(i,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=r=>o.password=r),type:"password",styles:o.inputStyles,class:re({error:s.v$.password.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.PLACEHOLDER"),error:`${s.v$.password.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD.ERROR"):""}`,onInput:s.v$.password.$touch,onBlur:s.v$.password.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),b(i,{modelValue:o.passwordConfirmation,"onUpdate:modelValue":t[2]||(t[2]=r=>o.passwordConfirmation=r),type:"password",styles:o.inputStyles,class:re({error:s.v$.passwordConfirmation.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.PLACEHOLDER"),error:`${s.v$.passwordConfirmation.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.ERROR"):""}`,onInput:s.v$.passwordConfirmation.$touch,onBlur:s.v$.passwordConfirmation.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),b(l,{type:"submit","color-scheme":"primary",variant:"solid",size:"large",disabled:a.isButtonDisabled},{default:j(()=>[be(v(e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.BTN_TEXT")),1)]),_:1},8,["disabled"])])],32)}const wpe=Re(Npe,[["render",xpe]]),Rpe=["id","value"],f_={__name:"CheckBox",props:{isChecked:{type:Boolean,default:!1},value:{type:String,default:null}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,o=w({get:()=>n.isChecked,set:a=>s("update",n.value,a)});return(a,i)=>ie((m(),f("input",{id:e.value,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value=l),type:"checkbox",value:e.value,class:"flex-shrink-0 mt-0.5 border-ash-200 border bg-ash-50 checked:border-none checked:bg-primary-600 dark:checked:bg-primary-600 shadow-sm appearance-none rounded-[4px] w-4 h-4 focus:ring-1 after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center after:text-center after:text-xs after:font-bold after:relative"},null,8,Rpe)),[[Kt,o.value]])}},$pe={props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],methods:{onClick(){this.$emit("update:modelValue",!this.modelValue)}}},Mpe=["aria-checked"];function kpe(e,t,n,s,o,a){return m(),f("button",{type:"button",class:re(["relative flex-shrink-0 h-4 p-0 border-none shadow-inner w-7 rounded-3xl",n.modelValue?"bg-primary-600 shadow-primary-800":"shadow-ash-400 bg-ash-200"]),role:"switch","aria-checked":n.modelValue.toString(),onClick:t[0]||(t[0]=(...i)=>a.onClick&&a.onClick(...i))},[c("span",{"aria-hidden":"true",class:re(["rounded-full bg-white top-0.5 absolute dark:bg-white w-3 h-3 translate-y-0 duration-200 transition-transform ease-in-out",n.modelValue?"ltr:translate-x-0 rtl:translate-x-[0.75rem]":"ltr:-translate-x-[0.75rem] rtl:translate-x-0"])},null,2)],10,Mpe)}const Lpe=Re($pe,[["render",kpe]]),Dpe={components:{TableHeaderCell:eS,FormSwitch:Lpe,CheckBox:f_},data(){return{selectedEmailFlags:[],selectedPushFlags:[],enableAudioAlerts:!1,hasEnabledPushPermissions:!1,notificationTypes:oO}},computed:{...gt({accountId:"getCurrentAccountId",emailFlags:"userNotificationSettings/getSelectedEmailFlags",pushFlags:"userNotificationSettings/getSelectedPushFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasPushAPISupport(){return"Notification"in window},isSLAEnabled(){return this.isFeatureEnabledonAccount(this.accountId,xt.SLA)},filteredNotificationTypes(){return this.notificationTypes.filter(e=>this.isSLAEnabled?!0:!["sla_missed_first_response","sla_missed_next_response","sla_missed_resolution"].includes(e.value))}},watch:{emailFlags(e){this.selectedEmailFlags=e},pushFlags(e){this.selectedPushFlags=e}},mounted(){eP()&&this.getPushSubscription(),this.$store.dispatch("userNotificationSettings/get")},methods:{checkFlagStatus(e,t){return(e==="email"?this.selectedEmailFlags:this.selectedPushFlags).includes(`${e}_${t}`)},onRegistrationSuccess(){this.hasEnabledPushPermissions=!0},onRequestPermissions(){sP({onSuccess:this.onRegistrationSuccess})},getPushSubscription(){by(e=>e.pushManager.getSubscription().then(t=>{t?this.hasEnabledPushPermissions=!0:this.hasEnabledPushPermissions=!1}).catch(t=>console.log(t)))},async updateNotificationSettings(){try{this.$store.dispatch("userNotificationSettings/update",{selectedEmailFlags:this.selectedEmailFlags,selectedPushFlags:this.selectedPushFlags}),Te(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}catch{Te(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_ERROR"))}},handleInput(e,t){e==="email"?this.handleEmailInput(t):this.handlePushInput(t)},handleEmailInput(e){this.selectedEmailFlags=this.toggleInput(this.selectedEmailFlags,e),this.updateNotificationSettings()},handlePushInput(e){this.selectedPushFlags=this.toggleInput(this.selectedPushFlags,e),this.updateNotificationSettings()},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]}}},Ppe={id:"profile-settings-notifications",class:"flex flex-col gap-6"},Bpe={class:"hidden sm:block"},Fpe={class:"grid content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},Upe={class:"text-sm font-normal normal-case text-ash-800"},Gpe={class:"text-sm font-medium normal-case text-ash-900"},Vpe={class:"flex items-center justify-between gap-1"},Hpe={class:"text-sm font-medium normal-case text-ash-900 whitespace-nowrap"},Kpe={class:"grid items-center content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},zpe={class:"flex flex-row items-start gap-2 col-span-7 px-0 py-2 text-sm tracking-[0.5] rtl:text-right"},Wpe={class:"text-sm text-ash-900"},jpe={class:"flex flex-col gap-6 sm:hidden"},Ype={class:"text-sm font-medium normal-case text-ash-900"},Xpe={class:"flex flex-col gap-4"},qpe={class:"text-sm text-ash-900"},Zpe={class:"flex items-center justify-start gap-2"},Qpe={class:"text-sm font-medium normal-case text-ash-900"},Jpe={class:"flex flex-col gap-4"},ehe={class:"text-sm text-ash-900"},the={class:"flex items-center justify-between w-full gap-2 p-4 border border-solid border-ash-200 rounded-xl"},nhe={class:"flex flex-row items-center gap-2"},she={class:"text-sm text-ash-900"};function ahe(e,t,n,s,o,a){const i=F("TableHeaderCell"),l=F("CheckBox"),r=F("fluent-icon"),d=F("FormSwitch");return m(),f("div",Ppe,[c("div",Bpe,[c("div",Fpe,[b(i,{span:7,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE')}`"},{default:j(()=>[c("span",Upe,v(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE")),1)]),_:1}),b(i,{span:2,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL')}`"},{default:j(()=>[c("span",Gpe,v(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL")),1)]),_:1}),b(i,{span:3,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH')}`"},{default:j(()=>[c("div",Vpe,[c("span",Hpe,v(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH")),1)])]),_:1})]),(m(!0),f(pe,null,ye(a.filteredNotificationTypes,(u,p)=>(m(),f("div",{key:p},[c("div",Kpe,[c("div",zpe,[c("span",Wpe,v(e.$t(u.label)),1)]),(m(),f(pe,null,ye(["email","push"],(h,g)=>c("div",{key:g,class:re(["flex items-start gap-2 px-0 text-sm tracking-[0.5] text-left rtl:text-right",`col-span-${h==="push"?3:2}`])},[b(l,{value:`${h}_${u.value}`,"is-checked":a.checkFlagStatus(h,u.value,o.selectedPushFlags),onUpdate:_=>a.handleInput(h,_)},null,8,["value","is-checked","onUpdate"])],2)),64))])]))),128))]),c("div",jpe,[c("span",Ype,v(e.$t("PROFILE_SETTINGS.FORM.EMAIL_NOTIFICATIONS_SECTION.TITLE")),1),c("div",Xpe,[(m(!0),f(pe,null,ye(a.filteredNotificationTypes,(u,p)=>(m(),f("div",{key:p,class:"flex flex-row items-start gap-2"},[b(l,{id:`email_${u.value}`,value:`email_${u.value}`,"is-checked":a.checkFlagStatus("email",u.value),onUpdate:a.handleEmailInput},null,8,["id","value","is-checked","onUpdate"]),c("span",qpe,v(e.$t(u.label)),1)]))),128))]),c("div",Zpe,[c("span",Qpe,v(e.$t("PROFILE_SETTINGS.FORM.PUSH_NOTIFICATIONS_SECTION.TITLE")),1)]),c("div",Jpe,[(m(!0),f(pe,null,ye(a.filteredNotificationTypes,(u,p)=>(m(),f("div",{key:p,class:"flex flex-row items-start gap-2"},[b(l,{id:`push_${u.value}`,value:`push_${u.value}`,"is-checked":a.checkFlagStatus("push",u.value),onUpdate:a.handlePushInput},null,8,["id","value","is-checked","onUpdate"]),c("span",ehe,v(e.$t(u.label)),1)]))),128))])]),c("div",the,[c("div",nhe,[b(r,{icon:"alert",class:"flex-shrink-0 text-ash-900",size:"18"}),c("span",she,v(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.BROWSER_PERMISSION")),1)]),b(d,{"model-value":o.hasEnabledPushPermissions,"onUpdate:modelValue":a.onRequestPermissions},null,8,["model-value","onUpdate:modelValue"])])])}const ohe=Re(Dpe,[["render",ahe]]),ihe={class:"flex items-center gap-2"},lhe=["value","selected"],rhe={__name:"AudioAlertTone",props:{value:{type:String,required:!0,validator:e=>["ding","bell","chime","magic","ping"].includes(e)},label:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>[{value:"ding",label:"Ding"},{value:"bell",label:"Bell"},{value:"chime",label:"Chime"},{value:"magic",label:"Magic"},{value:"ping",label:"Ping"}]),a=w({get:()=>n.value,set:r=>{s("change",r)}}),i=new Audio,l=async()=>{try{i.src=`/audio/dashboard/${a.value}.mp3`,await i.play()}catch(r){nr(r)}};return(r,d)=>{const u=ct("tooltip");return m(),f("div",ihe,[b(ac,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=p=>a.value=p),name:"alertTone",spacing:"compact",class:"flex-grow",value:a.value,options:o.value,label:e.label},{default:j(()=>[(m(!0),f(pe,null,ye(o.value,p=>(m(),f("option",{key:p.label,value:p.value,selected:p.value===a.value},v(p.label),9,lhe))),128))]),_:1},8,["modelValue","value","options","label"]),ie((m(),f("button",{class:"border-0 shadow-sm outline-none flex justify-center items-center size-10 appearance-none rounded-xl ring-ash-200 ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-primary-500 flex-shrink-0 mt-[1.75rem]",onClick:l},[b(Ht,{icon:"i-lucide-volume-2"})])),[[u,r.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.PLAY"),void 0,{top:!0}]])])}}},che={class:"pb-1 text-sm font-medium leading-6 text-ash-900"},dhe={class:"grid gap-3 mt-2"},uhe=["for"],mhe={class:"text-n-slate-11 text-sm font-medium mt-2"},phe={__name:"AudioAlertEvent",props:{label:{type:String,default:""},value:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,o=iO,a=Object.values(nv),i=w({get:()=>{if(n.value==="none")return[];if(n.value==="mine")return[nv.ASSIGNED];if(n.value==="all")return[...a];const d=n.value.split("+").filter(u=>a.includes(u));return[...new Set(d)]},set:d=>{const u=d.filter(Boolean).sort(),p=[...new Set(u)];if(p.length===0){s("update","none");return}s("update",p.join("+"))}}),l=(d,u)=>{let p=i.value;d?p.push(u):p=p.filter(h=>h!==u),i.value=p},r=w(()=>{const d="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_COMBINATIONS.";return n.value===""||n.value==="none"?d+"NONE":d+i.value.join("+").toUpperCase()});return(d,u)=>(m(),f("div",null,[c("label",che,v(e.label),1),c("div",dhe,[(m(!0),f(pe,null,ye(I(o),p=>(m(),f("div",{key:p.value,class:"flex items-center gap-2"},[b(f_,{id:`checkbox-${p.value}`,"is-checked":i.value.includes(p.value),onUpdate:(h,g)=>l(g,p.value)},null,8,["id","is-checked","onUpdate"]),c("label",{for:`checkbox-${p.value}`,class:"text-sm text-ash-900 font-normal"},v(d.$t(`PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPES.${p.label.toUpperCase()}`)),9,uhe)]))),128)),c("div",mhe,v(d.$t(r.value)),1)])]))}},hhe={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-ash-900"},fhe={class:"flex flex-col gap-3 mt-2"},ghe=["for"],_he={__name:"AudioAlertCondition",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},emits:["change"],setup(e,{emit:t}){const n=t,s=(o,a)=>{n("change",o,a)};return(o,a)=>(m(),f("div",null,[c("label",hhe,v(e.label),1),c("div",fhe,[(m(!0),f(pe,null,ye(e.items,i=>(m(),f("div",{key:i.id,class:"flex flex-row items-start gap-2"},[b(f_,{id:`checkbox-condition-${i.value}`,"is-checked":i.model,value:i.value,onUpdate:s},null,8,["id","is-checked","value"]),c("label",{class:"text-sm font-normal text-ash-900",for:`checkbox-condition-${i.value}`},v(i.label),9,ghe)]))),128))])]))}},vhe={id:"profile-settings-notifications",class:"flex flex-col gap-6"},Rr="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION",bhe={__name:"AudioNotifications",setup(e){const t=Ot(),n=vn(),s=w(()=>n.getCurrentUser.value),{uiSettings:o,updateUISettings:a}=Mn(),{t:i}=He(),l=U(""),r=U(!1),d=U(!1),u=U("ding"),p=U([]),h=E=>{const y=sr(E);l.value=y.enableAudioAlerts,r.value=!y.alwaysPlayAudioAlert,d.value=y.alertIfUnreadAssignedConversationExist,p.value=[{id:"audio1",label:i(`${Rr}.CONDITIONS.CONDITION_ONE`),model:r.value,value:"tab_is_inactive"},{id:"audio2",label:i(`${Rr}.CONDITIONS.CONDITION_TWO`),model:d.value,value:"conversations_are_read"}],u.value=y.notificationTone||"ding"};lt(o,E=>{h(E)},{immediate:!0});const g=E=>{a(E),lO(s.value),Te(i("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))};ut(()=>{t.dispatch("userNotificationSettings/get")});const _=E=>{l.value=E,g({enable_audio_alerts:E})},T=(E,y)=>{E==="tab_is_inactive"?g({always_play_audio_alert:!y}):E==="conversations_are_read"&&g({alert_if_unread_assigned_conversation_exist:y})},S=E=>{g({notification_tone:E})};return(E,y)=>(m(),f("div",vhe,[b(rhe,{value:u.value,label:E.$t(`${Rr}.DEFAULT_TONE.TITLE`),onChange:S},null,8,["value","label"]),b(phe,{label:E.$t(`${Rr}.ALERT_TYPE.TITLE`),value:l.value,onUpdate:_},null,8,["label","value"]),b(_he,{items:p.value,label:E.$t(`${Rr}.CONDITIONS.TITLE`),onChange:T},null,8,["items","label"])]))}},Ehe={class:"flex flex-col items-start w-full gap-6"},The={class:"flex flex-col w-full gap-4"},yhe={key:0,class:"text-lg font-medium text-ash-900"},Ahe={key:1,class:"mb-0 text-sm font-normal text-ash-900"},She={class:"flex flex-col w-full gap-6"},Ihe={__name:"FormSection",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",Ehe,[c("div",The,[e.title?(m(),f("h4",yhe,v(e.title),1)):x("",!0),n[0]||(n[0]=c("div",{class:"flex flex-row items-center justify-between"},[c("div",{class:"flex-grow h-px bg-ash-200"})],-1)),e.description?(m(),f("p",Ahe,v(e.description),1)):x("",!0)]),c("div",She,[et(t.$slots,"default")])]))}},Che={class:"flex flex-row justify-between gap-4"},Nhe={__name:"AccessToken",props:{value:{type:String,default:""}},emits:["onCopy"],setup(e,{emit:t}){const n=e,s=t,o=U("password"),a=()=>{o.value=o.value==="password"?"text":"password"},i=w(()=>o.value==="password"?"eye-hide":"eye-show"),l=()=>{s("onCopy",n.value)};return(r,d)=>{const u=F("fluent-icon"),p=F("woot-input");return m(),f("div",Che,[b(p,{name:"access_token",class:"flex-1 [&>input]:!py-1.5 ltr:[&>input]:!pr-9 ltr:[&>input]:!pl-3 rtl:[&>input]:!pl-9 rtl:[&>input]:!pr-3 focus:[&>input]:!border-slate-200 focus:[&>input]:dark:!border-slate-600 [&>input]:cursor-not-allowed relative",styles:{borderRadius:"12px",fontSize:"14px",marginBottom:"2px"},type:o.value,"model-value":e.value,readonly:""},{masked:j(()=>[c("button",{class:"absolute top-1.5 ltr:right-0.5 rtl:left-0.5",onClick:a},[b(u,{icon:i.value,size:16},null,8,["icon"])])]),_:1},8,["type","model-value"]),b(Em,{type:"submit",size:"large",icon:"text-copy",variant:"outline","color-scheme":"secondary",onClick:l},{default:j(()=>[be(v(r.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.COPY")),1)]),_:1})])}}};function Hc(){const e=Ve("getCurrentUser"),t=Ve("accounts/isFeatureEnabledonAccount"),n=Ve("globalConfig/isOnChatwootCloud"),s=Ve("globalConfig/isACustomBrandedInstance"),{isEnterprise:o,enterprisePlanName:a}=Ra(),{accountId:i}=Ls(),l=()=>Pu(e.value,i.value),r=T=>T?t.value(i.value,T):!0,d=T=>{if(!T||!T.length)return!0;const S=l();return Zf(T,S)},u=T=>{if(Array.isArray(T)&&T.length>0){const S={[Ns.ENTERPRISE]:o,[Ns.CLOUD]:n.value,[Ns.COMMUNITY]:!0};return T.some(E=>S[E])}return!0},p=T=>T?xk.includes(T):!0,h=w(()=>o?a!=="community":!0);return{checkPermissions:d,shouldShowPaywall:T=>{const S=I(T);if(!S||s.value)return!1;if(p(S)){if(n.value)return!r(S);if(o)return!h.value}return!1},shouldShow:(T,S,E)=>{const y=I(T),A=I(S),C=I(E);return!d(A)||!u(C)?!1:s.value?r(y):n.value?r(y)||p(y):o?r(y)||p(y)&&!h.value:!0}}}const Ao={__name:"policy",props:{as:{type:String,default:"div"},permissions:{type:Array,required:!0},featureFlag:{type:String,default:null},installationTypes:{type:Array,default:null}},setup(e){const t=e,{shouldShow:n}=Hc(),s=w(()=>n(t.featureFlag,t.permissions,t.installationTypes));return(o,a)=>s.value?(m(),P(hs(e.as),{key:0},{default:j(()=>[et(o.$slots,"default")]),_:3})):x("",!0)}},Ohe={components:{MessageSignature:lpe,FormSection:Ihe,FontSize:_pe,UserProfilePicture:npe,Policy:Ao,UserBasicDetails:ipe,HotKeyCard:Cpe,ChangePassword:wpe,NotificationPreferences:ohe,AudioNotifications:bhe,AccessToken:Nhe},mixins:[Yo],setup(){const{isEditorHotKeyEnabled:e,updateUISettings:t}=Mn(),{currentFontSize:n,updateFontSize:s}=xg();return{currentFontSize:n,updateFontSize:s,isEditorHotKeyEnabled:e,updateUISettings:t}},data(){return{avatarFile:"",avatarUrl:"",name:"",displayName:"",email:"",messageSignature:"",hotKeys:[{key:"enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-enter-dark.svg"},{key:"cmd_enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter-dark.svg"}],notificationPermissions:[...ys,...Bs],audioNotificationPermissions:[...ys,...Bs]}},computed:{...gt({currentUser:"getCurrentUser",currentUserId:"getCurrentUserID",globalConfig:"globalConfig/get"})},mounted(){this.currentUserId&&this.initializeUser()},methods:{initializeUser(){this.name=this.currentUser.name,this.email=this.currentUser.email,this.avatarUrl=this.currentUser.avatar_url,this.displayName=this.currentUser.display_name,this.messageSignature=this.currentUser.message_signature},async dispatchUpdate(e,t,n){let s="";try{return await this.$store.dispatch("updateProfile",e),s=t,!0}catch(o){return s=Qf(o)||n,!1}finally{Te(s)}},async updateProfile(e){const{name:t,email:n,displayName:s}=e,o=this.currentUser.email!==n;this.name=t||this.name,this.email=n||this.email,this.displayName=s||this.displayName;const a={name:this.name,email:this.email,displayName:this.displayName,avatar:this.avatarFile},i=await this.dispatchUpdate(a,o?this.$t("PROFILE_SETTINGS.AFTER_EMAIL_CHANGED"):this.$t("PROFILE_SETTINGS.UPDATE_SUCCESS"),this.$t("RESET_PASSWORD.API.ERROR_MESSAGE"));o&&i&&rO()},async updateSignature(e){const t={message_signature:e};let n=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_SUCCESS"),s=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_ERROR");await this.dispatchUpdate(t,n,s)},updateProfilePicture({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async deleteProfilePicture(){try{await this.$store.dispatch("deleteAvatar"),this.avatarUrl="",this.avatarFile="",Te(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_SUCCESS"))}catch{Te(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_FAILED"))}},toggleHotKey(e){this.hotKeys=this.hotKeys.map(t=>t.key===e?{...t,active:!t.active}:t),this.updateUISettings({editor_message_key:e}),Te(this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.UPDATE_SUCCESS"))},async onCopyToken(e){await dl(e),Te(this.$t("COMPONENTS.CODE.COPY_SUCCESSFUL"))}}},xhe={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md"},whe={class:"flex flex-col gap-6"},Rhe={class:"text-2xl font-medium text-ash-900"},$he={class:"flex flex-col justify-between w-full gap-5 sm:gap-4 sm:flex-row"};function Mhe(e,t,n,s,o,a){const i=F("UserProfilePicture"),l=F("UserBasicDetails"),r=F("FontSize"),d=F("FormSection"),u=F("MessageSignature"),p=F("HotKeyCard"),h=F("ChangePassword"),g=F("AudioNotifications"),_=F("Policy"),T=F("NotificationPreferences"),S=F("AccessToken");return m(),f("div",xhe,[c("div",whe,[c("h2",Rhe,v(e.$t("PROFILE_SETTINGS.TITLE")),1),b(i,{src:o.avatarUrl,name:o.name,onChange:a.updateProfilePicture,onDelete:a.deleteProfilePicture},null,8,["src","name","onChange","onDelete"]),b(l,{name:o.name,"display-name":o.displayName,email:o.email,"email-enabled":!e.globalConfig.disableUserProfileUpdate,onUpdateUser:a.updateProfile},null,8,["name","display-name","email","email-enabled","onUpdateUser"])]),b(d,{title:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.NOTE")},{default:j(()=>[b(r,{value:s.currentFontSize,label:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.NOTE"),onChange:s.updateFontSize},null,8,["value","label","description","onChange"])]),_:1},8,["title","description"]),b(d,{title:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.NOTE")},{default:j(()=>[b(u,{"message-signature":o.messageSignature,onUpdateSignature:a.updateSignature},null,8,["message-signature","onUpdateSignature"])]),_:1},8,["title","description"]),b(d,{title:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.NOTE")},{default:j(()=>[c("div",$he,[(m(!0),f(pe,null,ye(o.hotKeys,E=>(m(),f("button",{key:E.key,class:"px-0 reset-base w-full sm:flex-1"},[(m(),P(p,{key:E.title,title:E.title,description:E.description,"light-image":E.lightImage,"dark-image":E.darkImage,active:s.isEditorHotKeyEnabled(E.key),onClick:y=>a.toggleHotKey(E.key)},null,8,["title","description","light-image","dark-image","active","onClick"]))]))),128))])]),_:1},8,["title","description"]),e.globalConfig.disableUserProfileUpdate?x("",!0):(m(),P(d,{key:0,title:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.TITLE")},{default:j(()=>[b(h)]),_:1},8,["title"])),b(_,{permissions:o.audioNotificationPermissions},{default:j(()=>[b(d,{title:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.NOTE")},{default:j(()=>[b(g)]),_:1},8,["title","description"])]),_:1},8,["permissions"]),b(_,{permissions:o.notificationPermissions},{default:j(()=>[b(d,{title:e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TITLE")},{default:j(()=>[b(T)]),_:1},8,["title"])]),_:1},8,["permissions"]),b(d,{title:e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.TITLE"),description:e.useInstallationName(e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.NOTE"),e.globalConfig.installationName)},{default:j(()=>[b(S,{value:e.currentUser.access_token,onOnCopy:a.onCopyToken},null,8,["value","onOnCopy"])]),_:1},8,["title","description"])])}const khe=Re(Ohe,[["render",Mhe]]),Lhe={routes:[{path:Pt("accounts/:accountId/profile"),name:"profile_settings",meta:{permissions:["administrator","agent","custom_role"]},component:Jme,children:[{path:"settings",name:"profile_settings_index",component:khe,meta:{permissions:["administrator","agent","custom_role"]}}]}]},Dhe={routes:[{path:Pt("accounts/:accountId/settings"),name:"settings_home",meta:{permissions:[...ys,...Bs]},redirect:e=>Ia.getters.getCurrentRole==="administrator"&&Ia.getters.getCurrentCustomRoleId===null?{name:"general_settings_index",params:e.params}:{name:"canned_list",params:e.params}},...p6.routes,...eB.routes,...PB.routes,...S9.routes,...jF.routes,...IU.routes,...VU.routes,..._G.routes,...hQ.routes,...jee.routes,...Tte.routes,...bne.routes,...dde.routes,...rue.routes,...Ime.routes,...Zme.routes,...Lhe.routes]};function Phe(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):-1}let Zd;function Sf(){Sf.init||(Sf.init=!0,Zd=Phe()!==-1)}var Tm={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Sf(),Zt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Zd&&this.$el.appendChild(e),e.data="about:blank",Zd||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Zd&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Bhe=CE();SE("data-v-b329ee4c");const Fhe={class:"resize-observer",tabindex:"-1"};IE();const Uhe=Bhe((e,t,n,s,o,a)=>(m(),P("div",Fhe)));Tm.render=Uhe;Tm.__scopeId="data-v-b329ee4c";Tm.__file="src/components/ResizeObserver.vue";function Qd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qd=function(t){return typeof t}:Qd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function Ghe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vhe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Hhe(e,t,n){return t&&Vhe(e.prototype,t),e}function ub(e){return Khe(e)||zhe(e)||Whe(e)||jhe()}function Khe(e){if(Array.isArray(e))return If(e)}function zhe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Whe(e,t){if(e){if(typeof e=="string")return If(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return If(e,t)}}function If(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function jhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yhe(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function Xhe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,a,i=function(r){for(var d=arguments.length,u=new Array(d>1?d-1:0),p=1;p<d;p++)u[p-1]=arguments[p];if(a=u,!(s&&r===o)){var h=n.leading;typeof h=="function"&&(h=h(r,o)),(!s||r!==o)&&h&&e.apply(void 0,[r].concat(ub(a))),o=r,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[r].concat(ub(a))),s=0},t)}};return i._clear=function(){clearTimeout(s),s=null},i}function hS(e,t){if(e===t)return!0;if(Qd(e)==="object"){for(var n in e)if(!hS(e[n],t[n]))return!1;return!0}return!1}var qhe=function(){function e(t,n,s){Ghe(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,s)}return Hhe(e,[{key:"createObserver",value:function(n,s){var o=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Yhe(n),this.callback=function(l,r){o.options.callback(l,r),l&&o.options.once&&(o.frozen=!0,o.destroyObserver())},this.callback&&this.options.throttle){var a=this.options.throttleOptions||{},i=a.leading;this.callback=Xhe(this.callback,this.options.throttle,{leading:function(r){return i==="both"||i==="visible"&&r||i==="hidden"&&!r}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(l){var r=l[0];if(l.length>1){var d=l.find(function(p){return p.isIntersecting});d&&(r=d)}if(o.callback){var u=r.isIntersecting&&r.intersectionRatio>=o.threshold;if(u===o.oldResult)return;o.oldResult=u,o.callback(u,r)}},this.options.intersection),Zt(function(){o.observer&&o.observer.observe(o.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function fS(e,t,n){var s=t.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var o=new qhe(e,s,n);e._vue_visibilityState=o}}function Zhe(e,t,n){var s=t.value,o=t.oldValue;if(!hS(s,o)){var a=e._vue_visibilityState;if(!s){gS(e);return}a?a.createObserver(s,n):fS(e,{value:s},n)}}function gS(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var Qhe={beforeMount:fS,updated:Zhe,unmounted:gS};function Jhe(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s&&s.push(n)||e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&s.splice(s.indexOf(n)>>>0,1)},emit:function(t,n){(e.get(t)||[]).slice().map(function(s){s(n)}),(e.get("*")||[]).slice().map(function(s){s(t,n)})}}}var efe={itemsLimit:1e3},tfe=/(auto|scroll)/;function _S(e,t){return e.parentNode===null?t:_S(e.parentNode,t.concat([e]))}var vh=function(t,n){return getComputedStyle(t,null).getPropertyValue(n)},nfe=function(t){return vh(t,"overflow")+vh(t,"overflow-y")+vh(t,"overflow-x")},sfe=function(t){return tfe.test(nfe(t))};function mb(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=_S(e.parentNode,[]),n=0;n<t.length;n+=1)if(sfe(t[n]))return t[n];return document.scrollingElement||document.documentElement}}function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}var vS={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function bS(){return this.items.length&&Cf(this.items[0])!=="object"}var Nf=!1;if(typeof window<"u"){Nf=!1;try{var afe=Object.defineProperty({},"passive",{get:function(){Nf=!0}});window.addEventListener("test",null,afe)}catch{}}let ofe=0;var g_={name:"RecycleScroller",components:{ResizeObserver:Tm},directives:{ObserveVisibility:Qhe},props:{...vS,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,n=this.sizeField,s=this.minItemSize;let o=1e4,a=0,i;for(let l=0,r=t.length;l<r;l++)i=t[l][n]||s,i<o&&(o=i),a+=i,e[l]={accumulator:a,size:i};return this.$_computedMinItemSize=o,e}return[]},simpleArray:bS,itemIndexByKey(){const{keyField:e,items:t}=this,n={};for(let s=0,o=t.length;s<o;s++)n[t[s][e]]=s;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,n,s,o){const a=Fd({id:ofe++,index:t,used:!0,key:s,type:o}),i=pC({item:n,position:0,nr:a});return e.push(i),i},unuseView(e,t=!1){const n=this.$_unusedViews,s=e.nr.type;let o=n.get(s);o||(o=[],n.set(s,o)),o.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const n=this.itemSize,s=this.gridItems||1,o=this.itemSecondarySize||n,a=this.$_computedMinItemSize,i=this.typeField,l=this.simpleArray?null:this.keyField,r=this.items,d=r.length,u=this.sizes,p=this.$_views,h=this.$_unusedViews,g=this.pool,_=this.itemIndexByKey;let T,S,E,y,A;if(!d)T=S=y=A=E=0;else if(this.$_prerender)T=y=0,S=A=Math.min(this.prerender,r.length),E=null;else{const D=this.getScroll();if(t){let K=D.start-this.$_lastUpdateScrollPosition;if(K<0&&(K=-K),n===null&&K<a||K<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=D.start;const $=this.buffer;D.start-=$,D.end+=$;let M=0;if(this.$refs.before&&(M=this.$refs.before.scrollHeight,D.start-=M),this.$refs.after){const K=this.$refs.after.scrollHeight;D.end+=K}if(n===null){let K,B=0,H=d-1,G=~~(d/2),V;do V=G,K=u[G].accumulator,K<D.start?B=G:G<d-1&&u[G+1].accumulator>D.start&&(H=G),G=~~((B+H)/2);while(G!==V);for(G<0&&(G=0),T=G,E=u[d-1].accumulator,S=G;S<d&&u[S].accumulator<D.end;S++);for(S===-1?S=r.length-1:(S++,S>d&&(S=d)),y=T;y<d&&M+u[y].accumulator<D.start;y++);for(A=y;A<d&&M+u[A].accumulator<D.end;A++);}else{T=~~(D.start/n*s);const K=T%s;T-=K,S=Math.ceil(D.end/n*s),y=Math.max(0,Math.floor((D.start-M)/n*s)),A=Math.floor((D.end-M)/n*s),T<0&&(T=0),S>d&&(S=d),y<0&&(y=0),A>d&&(A=d),E=Math.ceil(d/s)*n}}S-T>efe.itemsLimit&&this.itemsLimitError(),this.totalSize=E;let C;const O=T<=this.$_endIndex&&S>=this.$_startIndex;if(O)for(let D=0,$=g.length;D<$;D++)C=g[D],C.nr.used&&(e&&(C.nr.index=_[C.item[l]]),(C.nr.index==null||C.nr.index<T||C.nr.index>=S)&&this.unuseView(C));const N=O?null:new Map;let R,k,L;for(let D=T;D<S;D++){R=r[D];const $=l?R[l]:R;if($==null)throw new Error(`Key is ${$} on item (keyField is '${l}')`);if(C=p.get($),!n&&!u[D].size){C&&this.unuseView(C);continue}k=R[i];let M=h.get(k),K=!1;if(!C)O?M&&M.length?C=M.pop():C=this.addView(g,D,R,$,k):(L=N.get(k)||0,(!M||L>=M.length)&&(C=this.addView(g,D,R,$,k),this.unuseView(C,!0),M=h.get(k)),C=M[L],N.set(k,L+1)),p.delete(C.nr.key),C.nr.used=!0,C.nr.index=D,C.nr.key=$,C.nr.type=k,p.set($,C),K=!0;else if(!C.nr.used&&(C.nr.used=!0,K=!0,M)){const B=M.indexOf(C);B!==-1&&M.splice(B,1)}C.item=R,K&&(D===r.length-1&&this.$emit("scroll-end"),D===0&&this.$emit("scroll-start")),n===null?(C.position=u[D-1].accumulator,C.offset=0):(C.position=Math.floor(D/s)*n,C.offset=D%s*o)}return this.$_startIndex=T,this.$_endIndex=S,this.emitUpdate&&this.$emit("update",T,S,y,A),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:O}},getListenerTarget(){let e=mb(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,n=t==="vertical";let s;if(this.pageMode){const o=e.getBoundingClientRect(),a=n?o.height:o.width;let i=-(n?o.top:o.left),l=n?window.innerHeight:window.innerWidth;i<0&&(l+=i,i=0),i+l>a&&(l=a-i),s={start:i,end:i+l}}else n?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Nf?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const n=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/n)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,s,o;if(this.pageMode){const a=mb(this.$el),i=a.tagName==="HTML"?0:a[t.scroll],l=a.getBoundingClientRect(),d=this.$el.getBoundingClientRect()[t.start]-l[t.start];n=a,s=t.scroll,o=e+i+d}else n=this.$el,s=t.scroll,o=e;n[s]=o},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const ife={key:0,ref:"before",class:"vue-recycle-scroller__slot"},lfe={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function rfe(e,t,n,s,o,a){const i=F("ResizeObserver"),l=ct("observe-visibility");return ie((m(),f("div",{class:re(["vue-recycle-scroller",{ready:o.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...r)=>a.handleScroll&&a.handleScroll(...r))},[e.$slots.before?(m(),f("div",ife,[et(e.$slots,"before")],512)):x("v-if",!0),(m(),P(hs(n.listTag),{ref:"wrapper",style:At({[e.direction==="vertical"?"minHeight":"minWidth"]:o.totalSize+"px"}),class:re(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:j(()=>[(m(!0),f(pe,null,ye(o.pool,r=>(m(),P(hs(n.itemTag),As({key:r.nr.id,style:o.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${r.position}px) translate${e.direction==="vertical"?"X":"Y"}(${r.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&o.hoverKey===r.nr.key}]]},hC(n.skipHover?{}:{mouseenter:()=>{o.hoverKey=r.nr.key},mouseleave:()=>{o.hoverKey=null}})),{default:j(()=>[et(e.$slots,"default",{item:r.item,index:r.nr.index,active:r.nr.used})]),_:2},1040,["style","class"]))),128)),et(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(m(),f("div",lfe,[et(e.$slots,"after")],512)):x("v-if",!0),b(i,{onNotify:a.handleResize},null,8,["onNotify"])],34)),[[l,a.handleVisibilityChange]])}g_.render=rfe;g_.__file="src/components/RecycleScroller.vue";var __={name:"DynamicScroller",components:{RecycleScroller:g_},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let n,s;if(t.borderBoxSize){const o=t.borderBoxSize[0];n=o.inlineSize,s=o.blockSize}else n=t.contentRect.width,s=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,n,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...vS,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:bS,itemsWithSize(){const e=[],{items:t,keyField:n,simpleArray:s}=this,o=this.vscrollData.sizes,a=t.length;for(let i=0;i<a;i++){const l=t[i],r=s?i:l[n];let d=o[r];typeof d>"u"&&!this.$_undefinedMap[r]&&(d=0),e.push({item:l,id:r,size:d})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const n=this.$el.scrollTop;let s=0,o=0;const a=Math.min(e.length,t.length);for(let l=0;l<a&&!(s>=n);l++)s+=t[l].size||this.minItemSize,o+=e[l].size||this.minItemSize;const i=o-s;i!==0&&(this.$el.scrollTop+=i)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=Jhe()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const n=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[n]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function cfe(e,t,n,s,o,a){const i=F("RecycleScroller");return m(),P(i,As({ref:"scroller",items:a.itemsWithSize,"min-item-size":n.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:a.onScrollerResize,onVisible:a.onScrollerVisible}),{default:j(({item:l,index:r,active:d})=>[et(e.$slots,"default",NE(OE({item:l.item,index:r,active:d,itemWithSize:l})))]),before:j(()=>[et(e.$slots,"before")]),after:j(()=>[et(e.$slots,"after")]),empty:j(()=>[et(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}__.render=cfe;__.__file="src/components/DynamicScroller.vue";var ES={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const n=this.vscrollData.sizes[t],s=this.vscrollData.sizes[e];n!=null&&n!==s&&this.applySize(n)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,n=this.$el.offsetHeight;this.applyWidthHeight(t,n)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const n=~~(this.vscrollParent.direction==="vertical"?t:e);n&&this.size!==n&&this.applySize(n)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,n){this.id===e&&this.applyWidthHeight(t,n)}},render(){return kn(this.tag,this.$slots.default())}};ES.__file="src/components/DynamicScrollerItem.vue";const dfe={props:{selectedValue:{type:String,required:!0},items:{type:Array,required:!0},type:{type:String,required:!0},pathPrefix:{type:String,required:!0}},emits:["onChangeFilter"],data(){return{activeValue:this.selectedValue}},methods:{onTabChange(){this.type==="status"?this.$store.dispatch("setChatStatusFilter",this.activeValue):this.$store.dispatch("setChatSortFilter",this.activeValue),this.$emit("onChangeFilter",this.activeValue,this.type)}}},ufe=["value"];function mfe(e,t,n,s,o,a){return ie((m(),f("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.activeValue=i),class:"w-32 h-6 py-0 pl-2 pr-6 mx-1 my-0 text-xs border border-solid bg-n-slate-3 dark:bg-n-solid-3 border-n-weak dark:border-n-weak text-n-slate-12",onChange:t[1]||(t[1]=i=>a.onTabChange())},[(m(!0),f(pe,null,ye(n.items,i=>(m(),f("option",{key:i,value:i},v(e.$t(`${n.pathPrefix}.${i}.TEXT`)),9,ufe))),128))],544)),[[Mt,o.activeValue]])}const pfe=Re(dfe,[["render",mfe]]),hfe=Object.freeze(["open","resolved","pending","snoozed","all"]),ffe=Object.freeze(["last_activity_at_asc","last_activity_at_desc","created_at_desc","created_at_asc","priority_desc","priority_asc","waiting_since_asc","waiting_since_desc"]),gfe={components:{FilterItem:pfe,NextButton:he},props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["changeFilter"],setup(){const{updateUISettings:e}=Mn();return{updateUISettings:e}},data(){return{showActionsDropdown:!1,chatStatusItems:hfe,chatSortItems:ffe}},computed:{...gt({chatStatusFilter:"getChatStatusFilter",chatSortFilter:"getChatSortFilter"}),chatStatus(){return this.chatStatusFilter||$t.STATUS_TYPE.OPEN},sortFilter(){return this.chatSortFilter||$t.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC}},methods:{onTabChange(e){this.$emit("changeFilter",e),this.closeDropdown()},toggleDropdown(){this.showActionsDropdown=!this.showActionsDropdown},closeDropdown(){this.showActionsDropdown=!1},onChangeFilter(e,t){this.$emit("changeFilter",e,t),this.saveSelectedFilter(t,e)},saveSelectedFilter(e,t){this.updateUISettings({conversations_filter_by:{status:e==="status"?t:this.chatStatus,order_by:e==="sort"?t:this.sortFilter}})}}},_fe={class:"relative flex"},vfe={class:"flex items-center justify-between last:mt-4"},bfe={class:"text-xs font-medium text-n-slate-12"},Efe={class:"flex items-center justify-between last:mt-4"},Tfe={class:"text-xs font-medium text-n-slate-12"};function yfe(e,t,n,s,o,a){const i=F("NextButton"),l=F("FilterItem"),r=ct("tooltip"),d=ct("on-clickaway");return m(),f("div",_fe,[ie(b(i,{icon:"i-lucide-arrow-up-down",slate:"",faded:"",xs:"",onClick:a.toggleDropdown},null,8,["onClick"]),[[r,e.$t("CHAT_LIST.SORT_TOOLTIP_LABEL"),void 0,{right:!0}]]),o.showActionsDropdown?ie((m(),f("div",{key:0,class:re(["mt-1 dropdown-pane dropdown-pane--open !w-52 !p-4 top-6 border !border-n-weak dark:!border-n-weak !bg-n-alpha-3 dark:!bg-n-alpha-3 backdrop-blur-[100px]",{"ltr:left-0 rtl:right-0":!n.isOnExpandedLayout,"ltr:right-0 rtl:left-0":n.isOnExpandedLayout}])},[c("div",vfe,[c("span",bfe,v(e.$t("CHAT_LIST.CHAT_SORT.STATUS")),1),b(l,{type:"status","selected-value":a.chatStatus,items:o.chatStatusItems,"path-prefix":"CHAT_LIST.CHAT_STATUS_FILTER_ITEMS",onOnChangeFilter:a.onChangeFilter},null,8,["selected-value","items","onOnChangeFilter"])]),c("div",Efe,[c("span",Tfe,v(e.$t("CHAT_LIST.CHAT_SORT.ORDER_BY")),1),b(l,{type:"sort","selected-value":a.sortFilter,items:o.chatSortItems,"path-prefix":"CHAT_LIST.SORT_ORDER_ITEMS",onOnChangeFilter:a.onChangeFilter},null,8,["selected-value","items","onOnChangeFilter"])])],2)),[[d,a.closeDropdown]]):x("",!0)])}const Afe=Re(gfe,[["render",yfe]]),Sfe={components:{NextButton:he},props:{isOnExpandedLayout:{type:Boolean,default:!1}},emits:["toggle"],methods:{toggle(){this.$emit("toggle")}}};function Ife(e,t,n,s,o,a){const i=F("NextButton"),l=ct("tooltip");return ie((m(),P(i,{icon:n.isOnExpandedLayout?"i-lucide-arrow-left-to-line":"i-lucide-arrow-right-to-line",slate:"",xs:"",faded:"",class:"flex-shrink-0 rtl:rotate-180 ltr:rotate-0",onClick:a.toggle},null,8,["icon","onClick"])),[[l,e.$t("CONVERSATION.SWITCH_VIEW_LAYOUT"),void 0,{left:!0}]])}const TS=Re(Sfe,[["render",Ife]]),Cfe={class:"flex items-center justify-center min-w-0"},Nfe=["title"],Ofe={key:0,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0"},xfe={class:"flex items-center gap-1"},wfe={class:"relative"},Rfe={class:"relative"},$fe={key:2,class:"relative"},Mfe={__name:"ChatListHeader",props:{pageTitle:{type:String,required:!0},hasAppliedFilters:{type:Boolean,required:!0},hasActiveFolders:{type:Boolean,required:!0},activeStatus:{type:String,required:!0},isOnExpandedLayout:{type:Boolean,required:!0}},emits:["addFolders","deleteFolders","resetFilters","basicFilterChange","filtersModal"],setup(e,{emit:t}){const n=e,s=t,{uiSettings:o,updateUISettings:a}=Mn(),i=Ve("getCurrentAccountId"),l=Ve("accounts/isFeatureEnabledonAccount"),r=(h,g)=>{s("basicFilterChange",h,g)},d=w(()=>n.hasAppliedFilters||n.hasActiveFolders),u=w(()=>l.value(i.value,xt.CHATWOOT_V4)),p=()=>{const{LAYOUT_TYPES:h}=$t,{conversation_display_type:g=h.CONDENSED}=o.value,_=g===h.CONDENSED?h.EXPANDED:h.CONDENSED;a({conversation_display_type:_,previously_used_conversation_display_type:_})};return(h,g)=>{const _=ct("tooltip");return m(),f("div",{class:re(["flex items-center justify-between gap-2 px-4",{"pb-3 border-b border-n-strong":d.value,"pt-3 pb-2":u.value,"mb-2 pb-0":!u.value}])},[c("div",Cfe,[c("h1",{class:"text-lg font-medium truncate text-n-slate-12",title:e.pageTitle},v(e.pageTitle),9,Nfe),d.value?x("",!0):(m(),f("span",Ofe,v(h.$t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${e.activeStatus}.TEXT`)),1))]),c("div",xfe,[e.hasAppliedFilters&&!e.hasActiveFolders?(m(),f(pe,{key:0},[c("div",wfe,[ie(b(he,{icon:"i-lucide-save",slate:"",xs:"",faded:"",onClick:g[0]||(g[0]=T=>s("addFolders"))},null,512),[[_,h.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"),void 0,{"top-end":!0}]]),c("div",{id:"saveFilterTeleportTarget",class:re(["absolute z-40 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),ie(b(he,{icon:"i-lucide-circle-x",ruby:"",faded:"",xs:"",onClick:g[1]||(g[1]=T=>s("resetFilters"))},null,512),[[_,h.$t("FILTER.CLEAR_BUTTON_LABEL"),void 0,{"top-end":!0}]])],64)):x("",!0),e.hasActiveFolders?(m(),f(pe,{key:1},[c("div",Rfe,[ie(b(he,{id:"toggleConversationFilterButton",icon:"i-lucide-pen-line",slate:"",xs:"",faded:"",onClick:g[2]||(g[2]=T=>s("filtersModal"))},null,512),[[_,h.$t("FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON"),void 0,{"top-end":!0}]]),c("div",{id:"conversationFilterTeleportTarget",class:re(["absolute z-40 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),ie(b(he,{id:"toggleConversationFilterButton",icon:"i-lucide-trash-2",ruby:"",xs:"",faded:"",onClick:g[3]||(g[3]=T=>s("deleteFolders"))},null,512),[[_,h.$t("FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON"),void 0,{"top-end":!0}]])],64)):(m(),f("div",$fe,[ie(b(he,{id:"toggleConversationFilterButton",icon:"i-lucide-list-filter",slate:"",xs:"",faded:"",onClick:g[4]||(g[4]=T=>s("filtersModal"))},null,512),[[_,h.$t("FILTER.TOOLTIP_LABEL"),void 0,{right:!0}]]),c("div",{id:"conversationFilterTeleportTarget",class:re(["absolute z-40 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)])),d.value?x("",!0):(m(),P(Afe,{key:3,"is-on-expanded-layout":e.isOnExpandedLayout,onChangeFilter:r},null,8,["is-on-expanded-layout"])),u.value?(m(),P(TS,{key:4,"is-on-expanded-layout":e.isOnExpandedLayout,onToggle:p},null,8,["is-on-expanded-layout"])):x("",!0)])],2)}}},bn={EQUAL_TO:"equal_to",NOT_EQUAL_TO:"not_equal_to",IS_PRESENT:"is_present",IS_NOT_PRESENT:"is_not_present",CONTAINS:"contains",DOES_NOT_CONTAIN:"does_not_contain",IS_GREATER_THAN:"is_greater_than",IS_LESS_THAN:"is_less_than",DAYS_BEFORE:"days_before",STARTS_WITH:"starts_with"},kfe=[bn.IS_PRESENT,bn.IS_NOT_PRESENT],Lfe={[bn.DAYS_BEFORE]:"plainText"},Dfe={[bn.EQUAL_TO]:"i-ph-equals-bold",[bn.NOT_EQUAL_TO]:"i-ph-not-equals-bold",[bn.IS_PRESENT]:"i-ph-member-of-bold",[bn.IS_NOT_PRESENT]:"i-ph-not-member-of-bold",[bn.CONTAINS]:"i-ph-superset-of-bold",[bn.DOES_NOT_CONTAIN]:"i-ph-not-superset-of-bold",[bn.IS_GREATER_THAN]:"i-ph-greater-than-bold",[bn.IS_LESS_THAN]:"i-ph-less-than-bold",[bn.DAYS_BEFORE]:"i-ph-calendar-minus-bold",[bn.STARTS_WITH]:"i-ph-caret-line-right-bold"};function yS(){const{t:e}=He(),t=w(()=>Object.values(bn).reduce((r,d)=>(r[d]={value:d,label:e(`FILTER.OPERATOR_LABELS.${d}`),hasInput:!kfe.includes(d),inputOverride:Lfe[d]||null,icon:kn("span",{class:`${Dfe[d]} !text-n-blue-text`})},r),{})),n=w(()=>[t.value[bn.EQUAL_TO],t.value[bn.NOT_EQUAL_TO]]),s=w(()=>[t.value[bn.EQUAL_TO],t.value[bn.NOT_EQUAL_TO],t.value[bn.IS_PRESENT],t.value[bn.IS_NOT_PRESENT]]),o=w(()=>[t.value[bn.EQUAL_TO],t.value[bn.NOT_EQUAL_TO],t.value[bn.CONTAINS],t.value[bn.DOES_NOT_CONTAIN]]),a=w(()=>[t.value[bn.EQUAL_TO],t.value[bn.NOT_EQUAL_TO],t.value[bn.IS_PRESENT],t.value[bn.IS_NOT_PRESENT],t.value[bn.IS_GREATER_THAN],t.value[bn.IS_LESS_THAN]]),i=w(()=>[t.value[bn.IS_GREATER_THAN],t.value[bn.IS_LESS_THAN],t.value[bn.DAYS_BEFORE]]);return{operators:t,equalityOperators:n,presenceOperators:s,containmentOperators:o,comparisonOperators:a,dateOperators:i,getOperatorTypes:r=>{switch(r){case"list":return n.value;case"text":return o.value;case"number":return n.value;case"link":return n.value;case"date":return a.value;case"checkbox":return n.value;default:return n.value}}}}const Bn={STATUS:"status",PRIORITY:"priority",ASSIGNEE_ID:"assignee_id",INBOX_ID:"inbox_id",TEAM_ID:"team_id",DISPLAY_ID:"display_id",CAMPAIGN_ID:"campaign_id",LABELS:"labels",BROWSER_LANGUAGE:"browser_language",COUNTRY_CODE:"country_code",REFERER:"referer",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at"},ds={NAME:"name",EMAIL:"email",PHONE_NUMBER:"phone_number",IDENTIFIER:"identifier",COUNTRY_CODE:"country_code",CITY:"city",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at",REFERER:"referer",BLOCKED:"blocked"},Pfe=e=>{switch(e){case"date":return"date";case"text":return"plainText";case"list":return"searchSelect";case"checkbox":return"booleanSelect";default:return"plainText"}},AS=(e,t,n="conversation")=>{const s=Object.values(n==="conversation"?Bn:ds);return e.filter(o=>!s.includes(o.attributeKey)).map(o=>({attributeKey:o.attributeKey,value:o.attributeKey,attributeName:o.attributeDisplayName,label:o.attributeDisplayName,inputType:Pfe(o.attributeDisplayType),filterOperators:t(o.attributeDisplayType),options:o.attributeDisplayType==="list"?o.attributeValues.map(a=>({id:a,name:a})):[],attributeModel:"customAttributes"}))},pb=e=>(e==null?void 0:e.replaceAll("_"," "))??"";function Bfe(){const{t:e}=He(),t=Ve("attributes/getConversationAttributes"),n=Ve("labels/getLabels"),s=Ve("agents/getAgents"),o=Ve("inboxes/getInboxes"),a=Ve("teams/getTeams"),i=Ve("campaigns/getAllCampaigns"),{equalityOperators:l,presenceOperators:r,containmentOperators:d,dateOperators:u,getOperatorTypes:p}=yS(),h=w(()=>AS(t.value,p,"conversation"));return{filterTypes:w(()=>[{attributeKey:Bn.STATUS,value:Bn.STATUS,attributeName:e("FILTER.ATTRIBUTES.STATUS"),label:e("FILTER.ATTRIBUTES.STATUS"),inputType:"multiSelect",options:["open","resolved","pending","snoozed","all"].map(_=>({id:_,name:e(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${_}.TEXT`)})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Bn.PRIORITY,value:Bn.PRIORITY,attributeName:e("FILTER.ATTRIBUTES.PRIORITY"),label:e("FILTER.ATTRIBUTES.PRIORITY"),inputType:"multiSelect",options:["low","medium","high","urgent"].map(_=>({id:_,name:e(`CONVERSATION.PRIORITY.OPTIONS.${_.toUpperCase()}`)})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Bn.ASSIGNEE_ID,value:Bn.ASSIGNEE_ID,attributeName:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),label:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),inputType:"searchSelect",options:s.value.map(_=>({id:_.id,name:_.name})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Bn.INBOX_ID,value:Bn.INBOX_ID,attributeName:e("FILTER.ATTRIBUTES.INBOX_NAME"),label:e("FILTER.ATTRIBUTES.INBOX_NAME"),inputType:"searchSelect",options:o.value.map(_=>({..._,icon:Yy(_).value})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Bn.TEAM_ID,value:Bn.TEAM_ID,attributeName:e("FILTER.ATTRIBUTES.TEAM_NAME"),label:e("FILTER.ATTRIBUTES.TEAM_NAME"),inputType:"searchSelect",options:a.value,dataType:"number",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Bn.DISPLAY_ID,value:Bn.DISPLAY_ID,attributeName:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),label:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),inputType:"plainText",datatype:"number",filterOperators:d.value,attributeModel:"standard"},{attributeKey:Bn.CAMPAIGN_ID,value:Bn.CAMPAIGN_ID,attributeName:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),label:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),inputType:"searchSelect",options:i.value.map(_=>({id:_.id,name:_.title})),datatype:"number",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Bn.LABELS,value:Bn.LABELS,attributeName:e("FILTER.ATTRIBUTES.LABELS"),label:e("FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:n.value.map(_=>({id:_.title,name:_.title,icon:kn("span",{class:"rounded-full",style:{backgroundColor:_.color,height:"6px",width:"6px"}})})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Bn.BROWSER_LANGUAGE,value:Bn.BROWSER_LANGUAGE,attributeName:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),label:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),inputType:"searchSelect",options:Xf,dataType:"text",filterOperators:l.value,attributeModel:"additional"},{attributeKey:Bn.COUNTRY_CODE,value:Bn.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:Ua,dataType:"text",filterOperators:l.value,attributeModel:"additional"},{attributeKey:Bn.REFERER,value:Bn.REFERER,attributeName:e("FILTER.ATTRIBUTES.REFERER_LINK"),label:e("FILTER.ATTRIBUTES.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:d.value,attributeModel:"additional"},{attributeKey:Bn.CREATED_AT,value:Bn.CREATED_AT,attributeName:e("FILTER.ATTRIBUTES.CREATED_AT"),label:e("FILTER.ATTRIBUTES.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},{attributeKey:Bn.LAST_ACTIVITY_AT,value:Bn.LAST_ACTIVITY_AT,attributeName:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),label:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},...h.value])}}const Ffe=["onClick"],Ufe={class:"truncate"},Gfe={key:0,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},Vfe={class:"truncate"},Hfe={class:"flex items-center border-none px-3 gap-2"},Kfe={class:"text-n-slate-11"},zfe={__name:"MultiSelect",props:On({options:{type:Array,required:!0},maxChips:{type:Number,default:3}},{modelValue:{type:[Array,String],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=He(),n=Wn(e,"modelValue"),s=w(()=>!(!n.value||!Array.isArray(n.value)||n.value.length===0)),o=w(()=>s.value?n.value.map(u=>u.id):[]),a=w(()=>s.value?e.options.filter(u=>o.value.includes(u.id)):[]),i=w(()=>s.value?a.value.length===e.maxChips+1?a.value:a.value.slice(0,e.maxChips):[]),l=w(()=>s.value?a.value.length===e.maxChips+1?[]:a.value.slice(e.maxChips):[]),r=w(()=>s.value?l.value.map(u=>u.name).join(", "):""),d=u=>{const p={id:u.id,name:u.name},h=p.id;if(!s.value){n.value=[p];return}o.value.includes(h)?n.value=n.value.filter(g=>g.id!==h):n.value=[...n.value,p]};return(u,p)=>{const h=ct("tooltip");return m(),P(El,null,{trigger:j(({toggle:g})=>[s.value?(m(),f("button",{key:0,class:"bg-n-alpha-2 py-2 rounded-lg h-8 flex items-center px-0",onClick:g},[(m(!0),f(pe,null,ye(i.value,_=>(m(),f("div",{key:_.name,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},[_.icon?(m(),P(Ht,{key:0,icon:_.icon,class:"flex-shrink-0"},null,8,["icon"])):x("",!0),c("span",Ufe,v(_.name),1)]))),128)),l.value.length>0?ie((m(),f("div",Gfe,[c("span",Vfe,v(I(t)("COMBOBOX.MORE",{count:l.value.length})),1)])),[[h,r.value,void 0,{top:!0}]]):x("",!0),c("div",Hfe,[b(Ht,{icon:"i-lucide-plus"})])],8,Ffe)):(m(),P(he,{key:1,sm:"",slate:"",faded:"",onClick:g},{icon:j(()=>[b(Ht,{icon:"i-lucide-plus",class:"text-n-slate-11"})]),default:j(()=>[c("span",Kfe,v(I(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["onClick"]))]),default:j(()=>[b(Tl,{class:"top-0 min-w-48 z-50",strong:""},{default:j(()=>[b(cr,{class:"max-h-80 overflow-scroll"},{default:j(()=>[(m(!0),f(pe,null,ye(e.options,g=>(m(),P(Fa,{key:g.id,icon:g.icon,"preserve-open":"",onClick:_=>d(g)},{label:j(()=>[be(v(g.name)+" ",1),o.value.includes(g.id)?(m(),P(Ht,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):x("",!0)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})}}},Wfe={class:"text-n-slate-11"},jfe={key:0,class:"relative"},Yfe=["placeholder"],hb={__name:"SingleSelect",props:On({options:{type:Array,required:!0},disableSearch:{type:Boolean,default:!1}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=He(),n=Wn(e,"modelValue"),s=U(""),o=w(()=>e.options?p_(e.options,s.value,["name"]):[]),a=w(()=>{if(!e.options||!n.value)return null;const l=Array.isArray(n.value)?n.value[0]:n.value;return e.options.find(r=>r.id===l.id)}),i=l=>{const r={id:l.id,name:l.name};n.value&&n.value.id===r.id?n.value=null:n.value=r};return(l,r)=>(m(),P(El,null,{trigger:j(({toggle:d})=>[a.value?(m(),P(he,{key:0,sm:"",slate:"",faded:"",icon:a.value.icon,label:a.value.name,onClick:d},null,8,["icon","label","onClick"])):(m(),P(he,{key:1,sm:"",slate:"",faded:"",onClick:d},{icon:j(()=>[b(Ht,{icon:"i-lucide-plus",class:"text-n-slate-11"})]),default:j(()=>[c("span",Wfe,v(I(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["onClick"]))]),default:j(()=>[b(Tl,{class:"top-0 min-w-56 z-50",strong:""},{default:j(()=>[e.disableSearch?x("",!0):(m(),f("div",jfe,[b(Ht,{class:"absolute size-4 left-2 top-2",icon:"i-lucide-search"}),ie(c("input",{"onUpdate:modelValue":r[0]||(r[0]=d=>s.value=d),autofocus:"",class:"p-1.5 pl-8 text-n-slate-11 bg-n-alpha-1 rounded-lg w-full",placeholder:I(t)("COMBOBOX.SEARCH_PLACEHOLDER")},null,8,Yfe),[[at,s.value]])])),b(cr,{class:"max-h-80 overflow-scroll"},{default:j(()=>[o.value.length?(m(!0),f(pe,{key:0},ye(o.value,d=>(m(),P(Fa,{key:d.id,icon:d.icon,onClick:u=>i(d)},{label:j(()=>[be(v(d.name)+" ",1),a.value&&a.value.id===d.id?(m(),P(Ht,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):x("",!0)]),_:2},1032,["icon","onClick"]))),128)):s.value?(m(),P(Fa,{key:1,disabled:""},{default:j(()=>[be(v(I(t)("COMBOBOX.EMPTY_SEARCH_RESULTS",{searchTerm:s.value})),1)]),_:1})):(m(),P(Fa,{key:2,disabled:""},{default:j(()=>[be(v(I(t)("COMBOBOX.EMPTY_STATE")),1)]),_:1}))]),_:1})]),_:1})]),_:1}))}},Xfe={class:"list-none"},qfe=["type","placeholder"],Zfe={key:0,class:"text-sm text-n-ruby-11"},ku={__name:"ConditionRow",props:On({showQueryOperator:{type:Boolean,default:!1},filterTypes:{type:Array,required:!0}},{attributeKey:{type:String,required:!0},attributeKeyModifiers:{},values:{type:[String,Number,Array,Object],required:!0},valuesModifiers:{},filterOperator:{type:String,required:!0},filterOperatorModifiers:{},queryOperator:{type:String,required:!1,default:void 0,validator:e=>["and","or"].includes(e)},queryOperatorModifiers:{}}),emits:On(["remove"],["update:attributeKey","update:values","update:filterOperator","update:queryOperator"]),setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=U(!1),i=Wn(e,"attributeKey"),l=Wn(e,"values"),r=Wn(e,"filterOperator"),d=Wn(e,"queryOperator"),u=O=>e.filterTypes.find(N=>N.attributeKey===O),p=w(()=>u(i.value)),h=(O,N)=>{const R=O.filterOperators.find(k=>k.value===N);return R||O.filterOperators[0]},g=w(()=>h(p.value,r.value)),_=(O,N)=>O.inputOverride??N.inputType,T=w(()=>_(g.value,p.value)),S=w(()=>[{label:o("FILTER.QUERY_DROPDOWN_LABELS.AND"),value:"and",icon:kn("span",{class:"i-lucide-ampersands !text-n-blue-text"})},{label:o("FILTER.QUERY_DROPDOWN_LABELS.OR"),value:"or",icon:kn("span",{class:"i-woot-logic-or !text-n-blue-text"})}]),E=w(()=>[{id:!0,name:o("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:o("FILTER.ATTRIBUTE_LABELS.FALSE")}]),y=w(()=>ky($s({attributeKey:i.value,filterOperator:r.value,values:l.value}))),A=O=>{const N=u(O),R=h(N,r.value),k=_(R,N);k==="multiSelect"?l.value=[]:["searchSelect","booleanSelect"].includes(k)?l.value={}:l.value="",r.value=R.value};return lt([i,l,r],()=>{a.value=!1}),t({validate:()=>(a.value=!0,!y.value)}),(O,N)=>(m(),f("li",Xfe,[c("div",{class:re(["flex items-center gap-2 rounded-md",{"animate-wiggle":a.value&&y.value}])},[e.showQueryOperator?(m(),P(qd,{key:0,modelValue:d.value,"onUpdate:modelValue":N[0]||(N[0]=R=>d.value=R),variant:"faded","hide-icon":"",class:"text-sm",options:S.value},null,8,["modelValue","options"])):x("",!0),b(qd,{modelValue:i.value,"onUpdate:modelValue":[N[1]||(N[1]=R=>i.value=R),A],variant:"faded",options:e.filterTypes},null,8,["modelValue","options"]),b(qd,{modelValue:r.value,"onUpdate:modelValue":N[2]||(N[2]=R=>r.value=R),variant:"ghost",options:p.value.filterOperators},null,8,["modelValue","options"]),g.value.hasInput?(m(),f(pe,{key:1},[T.value==="multiSelect"?(m(),P(zfe,{key:0,modelValue:l.value,"onUpdate:modelValue":N[3]||(N[3]=R=>l.value=R),options:p.value.options},null,8,["modelValue","options"])):T.value==="searchSelect"?(m(),P(hb,{key:1,modelValue:l.value,"onUpdate:modelValue":N[4]||(N[4]=R=>l.value=R),options:p.value.options},null,8,["modelValue","options"])):T.value==="booleanSelect"?(m(),P(hb,{key:2,modelValue:l.value,"onUpdate:modelValue":N[5]||(N[5]=R=>l.value=R),"disable-search":"",options:E.value},null,8,["modelValue","options"])):ie((m(),f("input",{key:3,"onUpdate:modelValue":N[6]||(N[6]=R=>l.value=R),type:T.value==="date"?"date":"text",class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base",placeholder:I(o)("FILTER.INPUT_PLACEHOLDER")},null,8,qfe)),[[Ff,l.value]])],64)):x("",!0),b(he,{sm:"",solid:"",slate:"",icon:"i-lucide-trash",onClick:N[7]||(N[7]=Ke(R=>s("remove"),["stop"]))})],2),a.value&&y.value?(m(),f("span",Zfe,v(I(o)(`FILTER.ERRORS.${y.value}`)),1)):x("",!0)]))}},Qfe={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},Jfe={class:"text-base font-medium leading-6 text-n-slate-12"},ege={key:0},tge={class:"border-b border-n-weak pb-6"},nge={class:"text-n-slate-11 text-sm mb-2"},sge=["placeholder"],age={class:"grid gap-4 list-none"},oge={class:"flex gap-2 justify-between"},ige={class:"flex gap-2"},lge={__name:"ConversationFilter",props:On({isFolderView:{type:Boolean,default:!1},folderName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:On(["applyFilter","updateFolder","close"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:o}=Bfe(),a=Wn(e,"modelValue"),i=U(n.folderName),l={attributeKey:"status",filterOperator:"equal_to",values:[],queryOperator:"and"},{t:r}=He(),d=Ot(),u=()=>{a.value=[{...l}]},p=A=>{a.value.length===1?u():a.value.splice(A,1)},h=()=>{a.value.push({...l})},g=Us("conditionsRef"),_=()=>g.value.every(A=>A.validate()),T=()=>{_()&&s("updateFolder",a.value,i.value)};function S(){_()&&(d.dispatch("setConversationFilters",$s(JSON.parse(JSON.stringify(a.value)))),s("applyFilter",a.value),jt(ba.APPLY_FILTER,{appliedFilters:a.value.map(A=>({key:A.attributeKey,operator:A.filterOperator,queryOperator:A.queryOperator}))}))}const E=w(()=>n.isFolderView?r("FILTER.EDIT_CUSTOM_FILTER"):r("FILTER.TITLE"));ml(()=>s("close"));const y=[()=>s("close"),{ignore:["#toggleConversationFilterButton"]}];return(A,C)=>ie((m(),f("div",Qfe,[c("h3",Jfe,v(E.value),1),n.isFolderView?(m(),f("div",ege,[c("label",tge,[c("div",nge,v(I(r)("FILTER.FOLDER_LABEL")),1),ie(c("input",{"onUpdate:modelValue":C[0]||(C[0]=O=>i.value=O),class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base w-full",placeholder:I(r)("FILTER.INPUT_PLACEHOLDER")},null,8,sge),[[at,i.value]])])])):x("",!0),c("ul",age,[(m(!0),f(pe,null,ye(a.value,(O,N)=>(m(),f(pe,{key:O.id},[N===0?(m(),P(ku,{ref_for:!0,ref_key:"conditionsRef",ref:g,key:`filter-${O.attributeKey}-0`,"attribute-key":O.attributeKey,"onUpdate:attributeKey":R=>O.attributeKey=R,"filter-operator":O.filterOperator,"onUpdate:filterOperator":R=>O.filterOperator=R,values:O.values,"onUpdate:values":R=>O.values=R,"filter-types":I(o),"show-query-operator":!1,onRemove:R=>p(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(m(),P(ku,{key:`filter-${O.attributeKey}-${N}`,ref_for:!0,ref_key:"conditionsRef",ref:g,"attribute-key":O.attributeKey,"onUpdate:attributeKey":R=>O.attributeKey=R,"filter-operator":O.filterOperator,"onUpdate:filterOperator":R=>O.filterOperator=R,"query-operator":a.value[N-1].queryOperator,"onUpdate:queryOperator":R=>a.value[N-1].queryOperator=R,values:O.values,"onUpdate:values":R=>O.values=R,"show-query-operator":"","filter-types":I(o),onRemove:R=>p(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),c("div",oge,[b(he,{sm:"",ghost:"",blue:"",onClick:h},{default:j(()=>[be(v(A.$t("FILTER.ADD_NEW_FILTER")),1)]),_:1}),c("div",ige,[b(he,{sm:"",faded:"",slate:"",onClick:u},{default:j(()=>[be(v(I(r)("FILTER.CLEAR_BUTTON_LABEL")),1)]),_:1}),e.isFolderView?(m(),P(he,{key:0,sm:"",solid:"",blue:"",disabled:!i.value,onClick:T},{default:j(()=>[be(v(I(r)("FILTER.UPDATE_BUTTON_LABEL")),1)]),_:1},8,["disabled"])):(m(),P(he,{key:1,sm:"",solid:"",blue:"",onClick:S},{default:j(()=>[be(v(I(r)("FILTER.SUBMIT_BUTTON_LABEL")),1)]),_:1}))])])])),[[I(qo),y]])}},rge={components:{NextButton:he},directives:{onClickOutside:qo},props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:()=>{}},openLastSavedItem:{type:Function,default:()=>{}}},emits:["close"],setup(){return{v$:Lt()}},data(){return{show:!0,name:""}},computed:{isButtonDisabled(){return this.v$.name.$invalid}},validations:{name:{required:it,minLength:Nn(1)}},methods:{onClose(){this.$emit("close")},async saveCustomViews(){if(this.v$.$touch(),!this.v$.$invalid){try{await this.$store.dispatch("customViews/create",{name:this.name,filter_type:this.filterType,query:this.customViewsQuery}),this.alertMessage=this.filterType===0?this.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),this.onClose(),jt(ll.SAVE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.filterType===0?t:this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE")}finally{Te(this.alertMessage)}this.openLastSavedItem()}}}},cge={class:"z-40 max-w-3xl lg:w-[500px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},dge={class:"text-base font-medium leading-6 text-n-slate-12"},uge=["placeholder"],mge={key:0,class:"text-xs text-n-ruby-11 ml-1 rtl:mr-1"},pge={class:"flex flex-row justify-end w-full gap-2"};function hge(e,t,n,s,o,a){const i=F("NextButton"),l=ct("on-click-outside");return ie((m(),f("div",cge,[c("h3",dge,v(e.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")),1),c("form",{class:"w-full grid gap-6",onSubmit:t[2]||(t[2]=Ke((...r)=>a.saveCustomViews&&a.saveCustomViews(...r),["prevent"]))},[c("label",{class:re({error:s.v$.name.$error})},[ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.name=r),class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base w-full",placeholder:e.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.name.$touch&&s.v$.name.$touch(...r))},null,40,uge),[[at,o.name]]),s.v$.name.$error?(m(),f("span",mge,v(e.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE")),1)):x("",!0)],2),c("div",pge,[b(i,{faded:"",slate:"",sm:"",onClick:Ke(a.onClose,["prevent"])},{default:j(()=>[be(v(e.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON")),1)]),_:1},8,["onClick"]),b(i,{solid:"",blue:"",sm:"",disabled:a.isButtonDisabled},{default:j(()=>[be(v(e.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON")),1)]),_:1},8,["disabled"])])],32)])),[[l,[()=>e.$emit("close"),{ignore:["#saveFilterTeleportTarget"]}]]])}const fge=Re(rge,[["render",hge]]),gge={__name:"ChatTypeTabs",props:{items:{type:Array,default:()=>[]},activeTab:{type:String,default:$t.ASSIGNEE_TYPE.ME}},emits:["chatTabChange"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>n.items.findIndex(l=>l.key===n.activeTab)),a=l=>{if(l>=0&&l<n.items.length){const r=n.items[l];r.key!==n.activeTab&&s("chatTabChange",r.key)}};return Vs({"Alt+KeyN":{action:()=>{if(n.activeTab===$t.ASSIGNEE_TYPE.ALL)a(0);else{const l=(o.value+1)%n.items.length;a(l)}}}}),(l,r)=>{const d=F("woot-tabs-item"),u=F("woot-tabs");return m(),P(u,{index:o.value,class:"w-full px-4 py-0 tab--chat-type",onChange:a},{default:j(()=>[(m(!0),f(pe,null,ye(e.items,(p,h)=>(m(),P(d,{key:p.key,index:h,name:p.name,count:p.count},null,8,["index","name","count"]))),128))]),_:1},8,["index"])}}},_ge=Re(gge,[["__scopeId","data-v-db44a478"]]),vge=(e,t)=>e&&t?e.created_at>=t.created_at?e:t:e||t,bge=(e=[])=>{const t=[];return e.forEach(n=>{n.source_id?t.findIndex(o=>n.source_id===o.source_id)<0&&t.push(n):t.push(n)}),t},Ege=e=>{const t=e.messages[e.messages.length-1],n=e.messages.filter(a=>a.message_type!==2),s=n[n.length-1],o=e.last_non_activity_message;return!s&&!o?t:vge(s,o)},Tge=(e,t)=>e.filter(n=>n.created_at*1e3<=t*1e3),yge=(e,t)=>e.filter(n=>n.created_at*1e3>t*1e3),Age={name:"MessagePreview",props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},setup(){const{getPlainText:e}=oo();return{getPlainText:e}},computed:{messageByAgent(){const{message_type:e}=this.message;return e===ov.OUTGOING},isMessageAnActivity(){const{message_type:e}=this.message;return e===ov.ACTIVITY},isMessagePrivate(){const{private:e}=this.message;return e},parsedLastMessage(){const{content_attributes:e}=this.message,{email:{subject:t}={}}=e||{};return this.getPlainText(t||this.message.content)},lastMessageFileType(){const[{file_type:e}={}]=this.message.attachments;return e},attachmentIcon(){return vC[this.lastMessageFileType]},attachmentMessageContent(){return`CHAT_LIST.ATTACHMENTS.${this.lastMessageFileType}.CONTENT`},isMessageSticker(){return this.message&&this.message.content_type==="sticker"}}},Sge={class:"overflow-hidden text-ellipsis whitespace-nowrap"},Ige={key:1},Cge={key:2},Nge={key:3},Oge={key:4};function xge(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",Sge,[n.showMessageType?(m(),f(pe,{key:0},[a.isMessagePrivate?(m(),P(i,{key:0,size:"16",class:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",icon:"lock-closed"})):a.messageByAgent?(m(),P(i,{key:1,size:"16",class:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",icon:"arrow-reply"})):a.isMessageAnActivity?(m(),P(i,{key:2,size:"16",class:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",icon:"info"})):x("",!0)],64)):x("",!0),n.message.content&&a.isMessageSticker?(m(),f("span",Ige,[b(i,{size:"16",class:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",icon:"image"}),be(" "+v(e.$t("CHAT_LIST.ATTACHMENTS.image.CONTENT")),1)])):n.message.content?(m(),f("span",Cge,v(a.parsedLastMessage),1)):n.message.attachments?(m(),f("span",Nge,[a.attachmentIcon&&n.showMessageType?(m(),P(i,{key:0,size:"16",class:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",icon:a.attachmentIcon},null,8,["icon"])):x("",!0),be(" "+v(e.$t(`${a.attachmentMessageContent}`)),1)])):(m(),f("span",Oge,v(n.defaultEmptyMessage||e.$t("CHAT_LIST.NO_CONTENT")),1))])}const v_=Re(Age,[["render",xge]]),wge={props:{inbox:{type:Object,default:()=>{}}},computed:{computedInboxClass(){const{phone_number:e,channel_type:t}=this.inbox;return cO(t,e)}}},Rge={class:"inbox--name inline-flex items-center py-0.5 px-0 leading-3 whitespace-nowrap bg-none text-n-slate-11 text-xs my-0 mx-2.5"};function $ge(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",Rge,[b(i,{class:"mr-0.5 rtl:ml-0.5 rtl:mr-0",icon:a.computedInboxClass,size:"12"},null,8,["icon"]),be(" "+v(n.inbox.name),1)])}const b_=Re(wge,[["render",$ge]]),bh=(e,t)=>e.filter(n=>n.availability_status===t).sort((n,s)=>n.name.localeCompare(s.name)),SS=e=>{const t=bh(e,"online"),n=bh(e,"busy"),s=bh(e,"offline");return[...t,...n,...s]},IS=(e,t,n)=>e.map(o=>o.id===t.id?{...o,availability_status:t.accounts.find(a=>a.id===n).availability_status}:o),Mge={components:{Thumbnail:Qn},props:{option:{type:Object,default:()=>{}},variant:{type:String,default:"default"}}},kge={class:"menu text-slate-800 dark:text-slate-100 min-h-7 min-w-0",role:"button"},Lge={class:"menu-label truncate min-w-0 flex-1"};function Dge(e,t,n,s,o,a){const i=F("fluent-icon"),l=F("Thumbnail");return m(),f("div",kge,[n.variant==="icon"&&n.option.icon?(m(),P(i,{key:0,icon:n.option.icon,size:"14",class:"flex-shrink-0"},null,8,["icon"])):x("",!0),n.variant==="label"&&n.option.color?(m(),f("span",{key:1,class:"label-pill flex-shrink-0",style:At({backgroundColor:n.option.color})},null,4)):x("",!0),n.variant==="agent"?(m(),P(l,{key:2,username:n.option.label,src:n.option.thumbnail,status:n.option.status,size:"20px",class:"flex-shrink-0"},null,8,["username","src","status"])):x("",!0),c("p",Lge,v(n.option.label),1)])}const CS=Re(Mge,[["render",Dge],["__scopeId","data-v-18e8244a"]]),Pge={class:"flex items-center h-4"},Bge={class:"my-0 mx-2 text-xs"},Fge={__name:"menuItemWithSubmenu",props:{option:{type:Object,default:()=>{}},subMenuAvailable:{type:Boolean,default:!0}},setup(e){const t=Us("menuRef"),{width:n,height:s}=PT(),{bottom:o,right:a}=DT(t),i=w(()=>s.value-o.value<240?"bottom-0":"top-0"),l=w(()=>n.value-a.value<240?"right-full":"left-full"),r=w(()=>[i.value,l.value]);return(d,u)=>{const p=F("fluent-icon");return m(),f("div",{ref_key:"menuRef",ref:t,class:re(["text-slate-800 dark:text-slate-100 menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-n-alpha-3/50 backdrop-blur-[100px] justify-between hover:bg-n-brand/10 cursor-pointer dark:hover:bg-n-solid-3",e.subMenuAvailable?"":"opacity-50 cursor-not-allowed"])},[c("div",Pge,[b(p,{icon:e.option.icon,size:"14",class:"menu-icon"},null,8,["icon"]),c("p",Bge,v(e.option.label),1)]),b(p,{icon:"chevron-right",size:"12"}),e.subMenuAvailable?(m(),f("div",{key:0,class:re(["submenu bg-n-alpha-3 backdrop-blur-[100px] p-1 shadow-lg rounded-md absolute hidden max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer",r.value])},[et(d.$slots,"default",{},void 0,!0)],2)):x("",!0)],2)}}},Uge=Re(Fge,[["__scopeId","data-v-1128093b"]]),Gge={components:{Spinner:Os}},Vge={class:"agent-placeholder"};function Hge(e,t,n,s,o,a){const i=F("Spinner");return m(),f("div",Vge,[b(i),c("p",null,v(e.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")),1)])}const Kge=Re(Gge,[["render",Hge],["__scopeId","data-v-96965fb6"]]),zge={components:{MenuItem:CS,MenuItemWithSubmenu:Uge,AgentLoadingPlaceholder:Kge},props:{chatId:{type:Number,default:null},status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null}},emits:["updateConversation","assignPriority","markAsUnread","markAsRead","assignAgent","assignTeam","assignLabel"],data(){return{STATUS_TYPE:$t.STATUS_TYPE,readOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_READ"),icon:"mail"},unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail"},statusMenuConfig:[{key:$t.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:$t.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"},{key:$t.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"}],snoozeOption:{key:$t.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:"priority",label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter(e=>e.key!==this.priority)},labelMenuConfig:{key:"label",icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:"agent",icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:"team",icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")}}},computed:{...gt({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags",currentUser:"getCurrentUser",currentAccountId:"getCurrentAccountId"}),filteredAgentOnAvailability(){const e=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),t=IS(e,this.currentUser,this.currentAccountId);return SS(t)},assignableAgents(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.filteredAgentOnAvailability]},showSnooze(){return this.status===$t.STATUS_TYPE.OPEN}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{toggleStatus(e,t){this.$emit("updateConversation",e,t)},async snoozeConversation(){await this.$store.dispatch("setContextMenuChatId",this.chatId),document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority(e){this.$emit("assignPriority",e)},show(e){return this.status!==e},generateMenuLabelConfig(e,t="text"){return{key:e.id,...t==="icon"&&{icon:e.icon},...t==="label"&&{color:e.color},...t==="agent"&&{thumbnail:e.thumbnail},...t==="agent"&&{status:e.availability_status},...t==="text"&&{label:e.label},...t==="label"&&{label:e.title},...t==="agent"&&{label:e.name},...t==="team"&&{label:e.name}}}}},Wge={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px]"};function jge(e,t,n,s,o,a){const i=F("MenuItem"),l=F("MenuItemWithSubmenu"),r=F("AgentLoadingPlaceholder");return m(),f("div",Wge,[n.hasUnreadMessages?(m(),P(i,{key:1,option:o.readOption,variant:"icon",onClick:t[1]||(t[1]=Ke(d=>e.$emit("markAsRead"),["stop"]))},null,8,["option"])):(m(),P(i,{key:0,option:o.unreadOption,variant:"icon",onClick:t[0]||(t[0]=Ke(d=>e.$emit("markAsUnread"),["stop"]))},null,8,["option"])),t[3]||(t[3]=c("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),(m(!0),f(pe,null,ye(o.statusMenuConfig,d=>(m(),f(pe,null,[a.show(d.key)?(m(),P(i,{key:d.key,option:d,variant:"icon",onClick:Ke(u=>a.toggleStatus(d.key,null),["stop"])},null,8,["option","onClick"])):x("",!0)],64))),256)),a.showSnooze?(m(),P(i,{key:2,option:o.snoozeOption,variant:"icon",onClick:t[2]||(t[2]=Ke(d=>a.snoozeConversation(),["stop"]))},null,8,["option"])):x("",!0),t[4]||(t[4]=c("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),b(l,{option:o.priorityConfig},{default:j(()=>[(m(!0),f(pe,null,ye(o.priorityConfig.options,(d,u)=>(m(),P(i,{key:u,option:d,onClick:Ke(p=>a.assignPriority(d.key),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option"]),b(l,{option:o.labelMenuConfig,"sub-menu-available":!!e.labels.length},{default:j(()=>[(m(!0),f(pe,null,ye(e.labels,d=>(m(),P(i,{key:d.id,option:a.generateMenuLabelConfig(d,"label"),variant:"label",onClick:Ke(u=>e.$emit("assignLabel",d),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"]),b(l,{option:o.agentMenuConfig,"sub-menu-available":!!a.assignableAgents.length},{default:j(()=>[e.assignableAgentsUiFlags.isFetching?(m(),P(r,{key:0})):(m(!0),f(pe,{key:1},ye(a.assignableAgents,d=>(m(),P(i,{key:d.id,option:a.generateMenuLabelConfig(d,"agent"),variant:"agent",onClick:Ke(u=>e.$emit("assignAgent",d),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"]),b(l,{option:o.teamMenuConfig,"sub-menu-available":!!e.teams.length},{default:j(()=>[(m(!0),f(pe,null,ye(e.teams,d=>(m(),P(i,{key:d.id,option:a.generateMenuLabelConfig(d,"team"),onClick:Ke(u=>e.$emit("assignTeam",d),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])])}const Yge=Re(zge,[["render",jge]]),NS=6e4,Of=NS*60,yd=Of*24,Xge={name:"TimeAgo",props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data(){return{lastActivityAtTimeAgo:ms(this.lastActivityTimestamp),createdAtTimeAgo:ms(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime(){return lc(this.lastActivityAtTimeAgo)},createdAtTime(){return lc(this.createdAtTimeAgo)},createdAt(){return Date.now()-this.createdAtTimestamp*1e3>yd*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")} ${J_(this.createdAtTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")} ${this.createdAtTimeAgo}`},lastActivity(){return Date.now()-this.lastActivityTimestamp*1e3>yd*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")} ${J_(this.lastActivityTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")} ${this.lastActivityAtTimeAgo}`},tooltipText(){return`${this.createdAt}
              ${this.lastActivity}`}},watch:{lastActivityTimestamp(){this.lastActivityAtTimeAgo=ms(this.lastActivityTimestamp)},createdAtTimestamp(){this.createdAtTimeAgo=ms(this.createdAtTimestamp)}},mounted(){this.isAutoRefreshEnabled&&this.createTimer()},unmounted(){clearTimeout(this.timer)},methods:{createTimer(){this.timer=setTimeout(()=>{this.lastActivityAtTimeAgo=ms(this.lastActivityTimestamp),this.createdAtTimeAgo=ms(this.createdAtTimestamp),this.createTimer()},this.refreshTime())},refreshTime(){const e=Date.now()-this.lastActivityTimestamp*1e3;return e>yd?yd:e>Of?Of:NS}}},qge={class:"ml-auto leading-4 text-xxs text-n-slate-10 hover:text-slate-11"};function Zge(e,t,n,s,o,a){const i=ct("tooltip");return ie((m(),f("div",qge,[c("span",null,v(`${a.createdAtTime}  ${a.lastActivityTime}`),1)])),[[i,{content:a.tooltipText,delay:{show:1e3,hide:0},hideOnClick:!0},void 0,{top:!0}]])}const Qge=Re(Xge,[["render",Zge]]),Jge={name:"PriorityMark",props:{priority:{type:String,default:"",validate:e=>[...Object.values(qs),""].includes(e)}},data(){return{CONVERSATION_PRIORITY:qs}},computed:{tooltipText(){return this.$t(`CONVERSATION.PRIORITY.OPTIONS.${this.priority.toUpperCase()}`)},isUrgent(){return this.priority===qs.URGENT}}};function e_e(e,t,n,s,o,a){const i=F("fluent-icon"),l=ct("tooltip");return n.priority?ie((m(),f("span",{key:0,class:re(["shrink-0 rounded-sm inline-flex items-center justify-center w-3.5 h-3.5",{"bg-n-ruby-4 text-n-ruby-10":a.isUrgent,"bg-n-slate-4 text-n-slate-11":!a.isUrgent}])},[b(i,{icon:`priority-${n.priority.toLowerCase()}`,size:a.isUrgent?12:14,class:"flex-shrink-0","view-box":"0 0 14 14"},null,8,["icon","size"])],2)),[[l,{content:a.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0}]]):x("",!0)}const t_e=Re(Jge,[["render",e_e]]),n_e=6e4,s_e={components:{SLAPopoverCard:nS},props:{chat:{type:Object,default:()=>({})},showExtendedInfo:{type:Boolean,default:!1}},data(){return{timer:null,showSlaPopover:!1,slaStatus:{threshold:null,isSlaMissed:!1,type:null,icon:null}}},computed:{slaPolicyId(){var e;return(e=this.chat)==null?void 0:e.sla_policy_id},appliedSLA(){var e;return(e=this.chat)==null?void 0:e.applied_sla},slaEvents(){var e;return(e=this.chat)==null?void 0:e.sla_events},hasSlaThreshold(){var e;return(e=this.slaStatus)==null?void 0:e.threshold},isSlaMissed(){var e;return(e=this.slaStatus)==null?void 0:e.isSlaMissed},slaTextStyles(){return this.isSlaMissed?"text-n-ruby-11":"text-n-amber-11"},slaStatusText(){var n,s;const e=(s=(n=this.slaStatus)==null?void 0:n.type)==null?void 0:s.toUpperCase(),t=this.isSlaMissed?"MISSED":"DUE";return this.$t(`CONVERSATION.HEADER.SLA_STATUS.${e}`,{status:this.$t(`CONVERSATION.HEADER.SLA_STATUS.${t}`)})},showSlaPopoverCard(){return this.showExtendedInfo&&this.showSlaPopover&&this.slaEvents.length}},watch:{chat(){this.updateSlaStatus()}},mounted(){this.updateSlaStatus(),this.createTimer()},unmounted(){this.timer&&clearTimeout(this.timer)},methods:{createTimer(){this.timer=setTimeout(()=>{this.updateSlaStatus(),this.createTimer()},n_e)},updateSlaStatus(){this.slaStatus=BE({appliedSla:this.appliedSLA,chat:this.chat})},openSlaPopover(){this.showExtendedInfo&&(this.showSlaPopover=!0)},closeSlaPopover(){this.showSlaPopover=!1}}};function a_e(e,t,n,s,o,a){const i=F("fluent-icon"),l=F("SLAPopoverCard"),r=ct("on-clickaway");return a.hasSlaThreshold?(m(),f("div",{key:0,class:re(["relative flex items-center cursor-pointer min-w-fit",n.showExtendedInfo?"h-[26px] rounded-lg bg-n-alpha-1":"rounded h-5  border border-n-strong"])},[ie((m(),f("div",{class:re(["flex items-center w-full truncate",n.showExtendedInfo?"px-1.5":"px-2 gap-1"]),onMouseover:t[0]||(t[0]=d=>a.openSlaPopover())},[c("div",{class:re(["flex items-center gap-1",n.showExtendedInfo&&"ltr:pr-1.5 rtl:pl-1.5 ltr:border-r rtl:border-l border-n-strong"])},[b(i,{size:"14",icon:o.slaStatus.icon,type:"outline","icon-lib":a.isSlaMissed?"lucide":"fluent",class:re(["flex-shrink-0",a.slaTextStyles])},null,8,["icon","icon-lib","class"]),n.showExtendedInfo?(m(),f("span",{key:0,class:re(["text-xs font-medium",a.slaTextStyles])},v(a.slaStatusText),3)):x("",!0)],2),c("span",{class:re(["text-xs font-medium",[a.slaTextStyles,n.showExtendedInfo&&"ltr:pl-1.5 rtl:pr-1.5"]])},v(o.slaStatus.threshold),3)],34)),[[r,a.closeSlaPopover]]),a.showSlaPopoverCard?(m(),P(l,{key:0,"sla-missed-events":a.slaEvents,class:"right-0 top-7"},null,8,["sla-missed-events"])):x("",!0)],2)):x("",!0)}const OS=Re(s_e,[["render",a_e]]),ym={__name:"ContextMenu",props:{x:{type:Number,default:0},y:{type:Number,default:0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=Us("menuRef"),{width:a,height:i}=PT(),{width:l,height:r}=DT(o),d=(p,h,g,_,T,S)=>{let E=p,y=h;const A=E+g>T,C=y+_>S;return A&&(E=T-g),C&&(y=S-_),{left:Math.max(0,E),top:Math.max(0,y)}},u=w(()=>{if(!o.value)return{top:`${n.y}px`,left:`${n.x}px`};const{left:p,top:h}=d(n.x,n.y,l.value,r.value,a.value,i.value);return{top:`${h}px`,left:`${p}px`}});return ut(()=>{Zt(()=>{var p;return(p=o.value)==null?void 0:p.focus()})}),(p,h)=>(m(),P(Si,{to:"body"},[c("div",{ref_key:"menuRef",ref:o,class:"fixed outline-none z-[9999] cursor-pointer",style:At(u.value),tabindex:"0",onBlur:h[0]||(h[0]=g=>s("close"))},[et(p.$slots,"default")],36)]))}},o_e={components:{CardLabels:tS,InboxName:b_,Thumbnail:Qn,ConversationContextMenu:Yge,TimeAgo:Qge,MessagePreview:v_,PriorityMark:t_e,SLACardLabel:OS,ContextMenu:ym},mixins:[Ro],props:{activeLabel:{type:String,default:""},chat:{type:Object,default:()=>{}},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1},enableContextMenu:{type:Boolean,default:!1},kanbanItem:{type:Object,default:null},funnels:{type:Array,default:()=>[]}},emits:["contextMenuToggle","assignAgent","assignLabel","assignTeam","markAsUnread","assignPriority","updateConversationStatus","update:kanbanItem","markAsRead"],data(){return{hovered:!1,showContextMenu:!1,contextMenu:{x:null,y:null},isKanbanInfoVisible:!0}},computed:{...gt({currentChat:"getSelectedChat",inboxesList:"inboxes/getInboxes",activeInbox:"getSelectedInbox",currentUser:"getCurrentUser",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),bulkActionCheck(){return!this.hideThumbnail&&!this.hovered&&!this.selected},chatMetadata(){return this.chat.meta||{}},assignee(){return this.chatMetadata.assignee||{}},currentContact(){return this.$store.getters["contacts/getContact"](this.chatMetadata.sender.id)},isActiveChat(){return this.currentChat.id===this.chat.id},unreadCount(){return this.chat.unread_count},hasUnread(){return this.unreadCount>0},isInboxNameVisible(){return!this.activeInbox},lastMessageInChat(){return Ege(this.chat)},inbox(){const{inbox_id:e}=this.chat;return this.$store.getters["inboxes/getInbox"](e)},showInboxName(){return!this.hideInboxName&&this.isInboxNameVisible&&this.inboxesList.length>1},inboxName(){return this.inbox.name||""},hasSlaPolicyId(){var e;return(e=this.chat)==null?void 0:e.sla_policy_id},currentFunnel(){var e;return(e=this.kanbanItem)!=null&&e.funnel?this.kanbanItem.funnel:null},kanbanStageLabel(){var t;if(!this.kanbanItem||!((t=this.currentFunnel)!=null&&t.stages))return null;const e=this.currentFunnel.stages[this.kanbanItem.funnel_stage];return(e==null?void 0:e.name)||this.kanbanItem.funnel_stage},kanbanTagClasses(){var t;if(!this.kanbanItem||!((t=this.currentFunnel)!=null&&t.stages))return"";const e=this.currentFunnel.stages[this.kanbanItem.funnel_stage];return e!=null&&e.color?"rounded-full":"bg-slate-50 text-slate-700 dark:bg-slate-900 dark:text-slate-200"},kanbanTagStyle(){var t;if(!this.kanbanItem||!((t=this.currentFunnel)!=null&&t.stages))return{};const e=this.currentFunnel.stages[this.kanbanItem.funnel_stage];return e!=null&&e.color?{backgroundColor:`${e.color}20`,color:e.color}:{}},kanbanFunnelStyle(){return{backgroundColor:"#64748B20",color:"#64748B"}},isKanbanEnabled(){return this.isFeatureEnabledonAccount(this.accountId,"kanban_board")},showKanbanInfo(){return this.isKanbanInfoVisible&&this.kanbanItem&&this.currentFunnel}},watch:{kanbanItem:{immediate:!0,handler(e){this.isKanbanEnabled&&(this.isKanbanInfoVisible=!!(e!=null&&e.funnel))}},"chat.kanban_items":{immediate:!0,handler(e){e&&e.length>0&&this.$emit("update:kanbanItem",e[0])}}},methods:{onCardClick(e){const{activeInbox:t,chat:n}=this,s=Pt(Jf({accountId:this.accountId,activeInbox:t,id:n.id,label:this.activeLabel,teamId:this.teamId,foldersId:this.foldersId,conversationType:this.conversationType}));if(e.metaKey||e.ctrlKey){window.open(window.chatwootConfig.hostURL+s,"_blank","noopener noreferrer nofollow");return}this.isActiveChat||Jn.push({path:s})},onThumbnailHover(){this.hovered=!this.hideThumbnail},onThumbnailLeave(){this.hovered=!1},onSelectConversation(e){const t=e?"selectConversation":"deSelectConversation";this.$emit(t,this.chat.id,this.inbox.id)},openContextMenu(e){this.enableContextMenu&&(e.preventDefault(),this.$emit("contextMenuToggle",!0),this.contextMenu.x=e.pageX||e.clientX,this.contextMenu.y=e.pageY||e.clientY,this.showContextMenu=!0)},closeContextMenu(){this.$emit("contextMenuToggle",!1),this.showContextMenu=!1,this.contextMenu.x=null,this.contextMenu.y=null},onUpdateConversation(e,t){this.closeContextMenu(),this.$emit("updateConversationStatus",this.chat.id,e,t)},async onAssignAgent(e){this.$emit("assignAgent",e,[this.chat.id]),this.closeContextMenu()},async onAssignLabel(e){this.$emit("assignLabel",[e.title],[this.chat.id]),this.closeContextMenu()},async onAssignTeam(e){this.$emit("assignTeam",e,this.chat.id),this.closeContextMenu()},async markAsUnread(){this.$emit("markAsUnread",this.chat.id),this.closeContextMenu()},async markAsRead(){this.$emit("markAsRead",this.chat.id),this.closeContextMenu()},async assignPriority(e){this.$emit("assignPriority",e,this.chat.id),this.closeContextMenu()}}},i_e=["value","checked"],l_e={class:"px-0 py-3 border-b group-hover:border-transparent flex-1 border-n-slate-3 w-[calc(100%-40px)]"},r_e={class:"flex justify-between conversation-card--meta"},c_e={class:"flex gap-2 ml-2 rtl:mr-2 rtl:ml-0"},d_e={key:0,class:"text-n-slate-11 text-xs font-medium leading-3 py-0.5 px-0 inline-flex text-ellipsis overflow-hidden whitespace-nowrap"},u_e={class:"absolute flex flex-col conversation--meta ltr:right-4 rtl:left-4 top-4"},m_e={class:"ml-auto font-normal leading-4 text-xxs"},p_e={class:"unread shadow-lg rounded-full hidden text-xxs font-semibold h-4 leading-4 ml-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-n-teal-9"},h_e={key:2,class:"flex gap-1 mt-2 ml-2"};function f_e(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("InboxName"),r=F("fluent-icon"),d=F("PriorityMark"),u=F("MessagePreview"),p=F("TimeAgo"),h=F("SLACardLabel"),g=F("CardLabels"),_=F("ConversationContextMenu"),T=F("ContextMenu");return m(),f("div",{class:re(["relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full px-4 py-0 border-t-0 border-b-0 border-l-2 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3 group",{"active animate-card-select bg-n-alpha-1 dark:bg-n-alpha-3 border-n-weak":a.isActiveChat,"unread-chat":a.hasUnread,"has-inbox-name":a.showInboxName,"conversation-selected":n.selected}]),onClick:t[4]||(t[4]=(...S)=>a.onCardClick&&a.onCardClick(...S)),onContextmenu:t[5]||(t[5]=S=>a.openContextMenu(S))},[c("div",{class:"relative",onMouseenter:t[2]||(t[2]=(...S)=>a.onThumbnailHover&&a.onThumbnailHover(...S)),onMouseleave:t[3]||(t[3]=(...S)=>a.onThumbnailLeave&&a.onThumbnailLeave(...S))},[o.hovered||n.selected?(m(),f("label",{key:0,class:"checkbox-wrapper absolute inset-0 z-20 backdrop-blur-[2px]",onClick:t[1]||(t[1]=Ke(()=>{},["stop"]))},[c("input",{value:n.selected,checked:n.selected,class:"checkbox",type:"checkbox",onChange:t[0]||(t[0]=S=>a.onSelectConversation(S.target.checked))},null,40,i_e)])):x("",!0),n.hideThumbnail?x("",!0):(m(),P(i,{key:1,src:a.currentContact.thumbnail,badge:e.inboxBadge,username:a.currentContact.name,status:a.currentContact.availability_status,size:"40px"},null,8,["src","badge","username","status"]))],32),c("div",l_e,[c("div",r_e,[a.showInboxName?(m(),P(l,{key:0,inbox:a.inbox},null,8,["inbox"])):x("",!0),c("div",c_e,[n.showAssignee&&a.assignee.name?(m(),f("span",d_e,[b(r,{icon:"person",size:"12",class:"text-n-slate-11"}),be(" "+v(a.assignee.name),1)])):x("",!0),b(d,{priority:n.chat.priority},null,8,["priority"])])]),c("h4",{class:re(["conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap w-[calc(100%-70px)] text-n-slate-12",a.hasUnread?"font-semibold":"font-medium"])},v(a.currentContact.name),3),a.lastMessageInChat?(m(),P(u,{key:0,message:a.lastMessageInChat,class:re(["conversation--message my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] text-sm",a.hasUnread?"font-medium text-n-slate-12":"text-n-slate-11"])},null,8,["message","class"])):(m(),f("p",{key:1,class:re(["conversation--message text-n-slate-11 text-sm my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] overflow-hidden text-ellipsis whitespace-nowrap",a.hasUnread?"font-medium text-n-slate-12":"text-n-slate-11"])},[b(r,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-10",icon:"info"}),c("span",null,v(e.$t("CHAT_LIST.NO_MESSAGES")),1)],2)),c("div",u_e,[c("span",m_e,[b(p,{"last-activity-timestamp":n.chat.timestamp,"created-at-timestamp":n.chat.created_at},null,8,["last-activity-timestamp","created-at-timestamp"])]),c("span",p_e,v(a.unreadCount>9?"9+":a.unreadCount),1)]),b(g,{"conversation-labels":n.chat.labels,class:"mt-0.5 mx-2 mb-0"},Vo({_:2},[a.hasSlaPolicyId?{name:"before",fn:j(()=>[b(h,{chat:n.chat,class:"ltr:mr-1 rtl:ml-1"},null,8,["chat"])]),key:"0"}:void 0]),1032,["conversation-labels"]),a.showKanbanInfo?(m(),f("div",h_e,[c("span",{class:"text-xs font-medium px-2 py-0.5 rounded-full",style:At(a.kanbanFunnelStyle)},v(a.currentFunnel.name),5),c("span",{class:re(["text-xs font-medium px-2 py-0.5",a.kanbanTagClasses]),style:At(a.kanbanTagStyle)},v(a.kanbanStageLabel),7)])):x("",!0)]),o.showContextMenu?(m(),P(T,{key:0,x:o.contextMenu.x,y:o.contextMenu.y,onClose:a.closeContextMenu},{default:j(()=>[b(_,{status:n.chat.status,"inbox-id":a.inbox.id,priority:n.chat.priority,"chat-id":n.chat.id,"has-unread-messages":a.hasUnread,onUpdateConversation:a.onUpdateConversation,onAssignAgent:a.onAssignAgent,onAssignLabel:a.onAssignLabel,onAssignTeam:a.onAssignTeam,onMarkAsUnread:a.markAsUnread,onMarkAsRead:a.markAsRead,onAssignPriority:a.assignPriority},null,8,["status","inbox-id","priority","chat-id","has-unread-messages","onUpdateConversation","onAssignAgent","onAssignLabel","onAssignTeam","onMarkAsUnread","onMarkAsRead","onAssignPriority"])]),_:1},8,["x","y","onClose"])):x("",!0)],34)}const xS=Re(o_e,[["render",f_e],["__scopeId","data-v-eec013fa"]]),g_e={components:{ConversationCard:xS},inject:["selectConversation","deSelectConversation","assignAgent","assignTeam","assignLabels","updateConversationStatus","toggleContextMenu","markAsUnread","markAsRead","assignPriority","isConversationSelected"],props:{source:{type:Object,required:!0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},kanbanItem:{type:Object,default:null}},data(){return{localKanbanItem:this.kanbanItem}},watch:{kanbanItem(e){this.localKanbanItem=e}},methods:{updateKanbanItem(e){this.localKanbanItem=e,this.$emit("update:kanbanItem",e)}}};function __e(e,t,n,s,o,a){const i=F("ConversationCard");return m(),P(i,{key:n.source.id,"active-label":n.label,"team-id":n.teamId,"folders-id":n.foldersId,chat:n.source,"conversation-type":n.conversationType,selected:a.isConversationSelected(n.source.id),"show-assignee":n.showAssignee,"kanban-item":o.localKanbanItem,"enable-context-menu":"",onSelectConversation:a.selectConversation,onDeSelectConversation:a.deSelectConversation,onAssignAgent:a.assignAgent,onAssignTeam:a.assignTeam,onAssignLabel:a.assignLabels,onUpdateConversationStatus:a.updateConversationStatus,onContextMenuToggle:a.toggleContextMenu,onMarkAsUnread:a.markAsUnread,onAssignPriority:a.assignPriority,"onUpdate:kanbanItem":a.updateKanbanItem,onMarkAsRead:a.markAsRead},null,8,["active-label","team-id","folders-id","chat","conversation-type","selected","show-assignee","kanban-item","onSelectConversation","onDeSelectConversation","onAssignAgent","onAssignTeam","onAssignLabel","onUpdateConversationStatus","onContextMenuToggle","onMarkAsUnread","onAssignPriority","onUpdate:kanbanItem","onMarkAsRead"])}const v_e=Re(g_e,[["render",__e]]),b_e={props:{show:{type:Boolean,default:!1},activeCustomView:{type:Object,default:()=>{}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:()=>{}}},emits:["close","update:show"],computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},activeCustomViews(){return this.activeFilterType===0?"conversation":this.activeFilterType===1?"contact":""},deleteMessage(){return` ${this.activeCustomView&&this.activeCustomView.name}?`},deleteConfirmText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES")}`},deleteRejectText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO")}`},isFolderSection(){return this.activeFilterType===0&&this.$route.name!=="home"},isSegmentSection(){return this.activeFilterType===1&&this.$route.name!=="contacts_dashboard"}},methods:{async deleteSavedCustomViews(){var e;try{const t=Number(this.customViewsId),n=this.activeCustomViews;await this.$store.dispatch("customViews/delete",{id:t,filterType:n}),this.closeDeletePopup(),Te(this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),jt(ll.DELETE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(t){const n=(e=t==null?void 0:t.response)!=null&&e.message||this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE");Te(n)}this.openLastItemAfterDelete()},closeDeletePopup(){this.$emit("close")}}};function E_e(e,t,n,s,o,a){const i=F("woot-delete-modal");return m(),f("div",null,[a.localShow?(m(),P(i,{key:0,show:a.localShow,"onUpdate:show":t[0]||(t[0]=l=>a.localShow=l),"on-close":a.closeDeletePopup,"on-confirm":a.deleteSavedCustomViews,title:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":a.deleteMessage,"confirm-text":a.deleteConfirmText,"reject-text":a.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):x("",!0)])}const T_e=Re(b_e,[["render",E_e]]),Ad=$t.SNOOZE_OPTIONS,y_e=e=>{const t=jT(Dk(e,1));return qT(t)?t:vc(t,{days:(8-t.getDay())%7})},A_e=e=>{const t=Zi(vc(e,{months:1}));return qT(t)?t:vc(t,{days:(8-t.getDay())%7})},S_e=e=>vc(e,{days:1}),Eh=e=>uL(dL(cL(e,9),0),0),E_=(e,t=new Date)=>{let n=null;return e===Ad.AN_HOUR_FROM_NOW?n=vc(t,{hours:1}):e===Ad.UNTIL_TOMORROW?n=Eh(S_e(t)):e===Ad.UNTIL_NEXT_WEEK?n=Eh(y_e(t)):e===Ad.UNTIL_NEXT_MONTH&&(n=Eh(A_e(t))),n?go(n):null},I_e=e=>{if(!e)return null;const t=new Date(e);return MC(t)?Ln(t,"h.mmaaa"):e?Ln(t,"d MMM, h.mmaaa"):null},C_e=e=>e?go(new Date(e)):null,N_e=e=>{if(!e)return null;const t={minutes:"m",minute:"m",hours:"h",hour:"h",days:"d",day:"d",months:"mo",month:"mo",years:"y",year:"y"};return e.replace(/^in\s+/i,"").replace(/\s(minute|hour|day|month|year)s?\b/gi,(s,o)=>t[o.toLowerCase()]||s)},fb="CMD_MUTE_CONVERSATION",gb="CMD_UNMUTE_CONVERSATION",_b="CMD_SEND_TRANSCRIPT",O_e="CMD_REOPEN_CONVERSATION",x_e="CMD_RESOLVE_CONVERSATION",w_e="CMD_SNOOZE_CONVERSATION",R_e="CMD_AI_ASSIST",vb="CMD_BULK_ACTION_SNOOZE_CONVERSATION",bb="CMD_BULK_ACTION_REOPEN_CONVERSATION",Eb="CMD_BULK_ACTION_RESOLVE_CONVERSATION",Tb="CMD_SNOOZE_NOTIFICATION",$_e={components:{Thumbnail:Qn,Spinner:Os,NextButton:he},props:{selectedInboxes:{type:Array,default:()=>[]},conversationCount:{type:Number,default:0}},emits:["select","close"],data(){return{query:"",selectedAgent:null,goBackToAgentList:!1}},computed:{...gt({uiFlags:"bulkActions/getUIFlags",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"}),filteredAgents(){return this.query?this.assignableAgents.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase())):[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.assignableAgents]},assignableAgents(){return this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.selectedInboxes.join(","))},conversationLabel(){return this.conversationCount>1?"conversations":"conversation"}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",this.selectedInboxes)},methods:{submit(){this.$emit("select",this.selectedAgent)},goBack(){this.goBackToAgentList=!0,this.selectedAgent=null},assignAgent(e){this.selectedAgent=e},onClose(){this.$emit("close")},onCloseAgentList(){this.selectedAgent===null&&!this.goBackToAgentList&&this.onClose(),this.goBackToAgentList=!1}}},M_e={class:"bulk-action__agents"},k_e={class:"flex items-center justify-between header"},L_e={class:"container"},D_e={key:0,class:"agent__list-loading"},P_e={key:1,class:"agent__list-container"},B_e={key:0},F_e={class:"search-container"},U_e={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},G_e=["placeholder"],V_e=["onClick"],H_e={class:"my-0 text-slate-800 dark:text-slate-75"},K_e={key:1,class:"agent-confirmation-container"},z_e={key:0},W_e={key:1},j_e={class:"agent-confirmation-actions"};function Y_e(e,t,n,s,o,a){const i=F("NextButton"),l=F("Spinner"),r=F("fluent-icon"),d=F("Thumbnail"),u=ct("on-clickaway");return ie((m(),f("div",M_e,[t[2]||(t[2]=c("div",{class:"triangle"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),c("div",k_e,[c("span",null,v(e.$t("BULK_ACTION.AGENT_SELECT_LABEL")),1),b(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.onClose},null,8,["onClick"])]),c("div",L_e,[e.assignableAgentsUiFlags.isFetching?(m(),f("div",D_e,[b(l),c("p",null,v(e.$t("BULK_ACTION.AGENT_LIST_LOADING")),1)])):(m(),f("div",P_e,[o.selectedAgent?(m(),f("div",K_e,[o.selectedAgent.id?(m(),f("p",z_e,[be(v(e.$t("BULK_ACTION.ASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:a.conversationLabel}))+" ",1),c("strong",null,v(o.selectedAgent.name),1),t[1]||(t[1]=c("span",null,"?",-1))])):(m(),f("p",W_e,v(e.$t("BULK_ACTION.UNASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:a.conversationLabel})),1)),c("div",j_e,[b(i,{faded:"",sm:"",slate:"",type:"reset",label:e.$t("BULK_ACTION.GO_BACK_LABEL"),onClick:a.goBack},null,8,["label","onClick"]),b(i,{sm:"",type:"submit",label:e.$t("BULK_ACTION.YES"),"is-loading":e.uiFlags.isUpdating,onClick:a.submit},null,8,["label","is-loading","onClick"])])])):(m(),f("ul",B_e,[c("li",F_e,[c("div",U_e,[b(r,{icon:"search",class:"search-icon",size:"16"}),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.query=p),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,G_e),[[at,o.query]])])]),(m(!0),f(pe,null,ye(a.filteredAgents,p=>(m(),f("li",{key:p.id},[c("div",{class:"agent-list-item",onClick:h=>a.assignAgent(p)},[b(d,{src:p.thumbnail,status:p.availability_status,username:p.name,size:"22px"},null,8,["src","status","username"]),c("span",H_e,v(p.name),1)],8,V_e)]))),128))]))]))])])),[[u,a.onCloseAgentList]])}const X_e=Re($_e,[["render",Y_e],["__scopeId","data-v-29b8b2e2"]]),q_e={class:"absolute z-20 w-auto origin-top-right border border-solid rounded-lg shadow-md right-2 top-12 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak"},Z_e={class:"p-2.5 flex gap-1 items-center justify-between"},Q_e={class:"text-sm font-medium text-slate-600 dark:text-slate-100"},J_e={class:"px-2.5 pt-0 pb-2.5"},eve={__name:"UpdateActions",props:{showResolve:{type:Boolean,default:!0},showReopen:{type:Boolean,default:!0},showSnooze:{type:Boolean,default:!0}},emits:["update","close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U([{icon:"i-lucide-check",key:"resolved"},{icon:"i-lucide-redo",key:"open"},{icon:"i-lucide-alarm-clock",key:"snoozed"}]),i=u=>{if(u==="snoozed"){const p=document.querySelector("ninja-keys");p==null||p.open({parent:"bulk_action_snooze_conversation"})}else s("update",u)},l=()=>{s("close")},r=u=>({resolved:n.showResolve,open:n.showReopen,snoozed:n.showSnooze})[u]||!1,d=u=>({resolved:o("CONVERSATION.HEADER.RESOLVE_ACTION"),open:o("CONVERSATION.HEADER.REOPEN_ACTION"),snoozed:o("BULK_ACTION.UPDATE.SNOOZE_UNTIL")})[u]||"";return(u,p)=>{const h=ct("on-clickaway");return ie((m(),f("div",q_e,[p[0]||(p[0]=c("div",{class:"right-[var(--triangle-position)] block z-10 absolute text-left -top-3"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px",class:"fill-n-alpha-3 backdrop-blur-[100px] stroke-n-weak"})])],-1)),c("div",Z_e,[c("span",Q_e,v(u.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")),1),b(he,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:l})]),c("div",J_e,[b(ju,{class:"m-0 list-none"},{default:j(()=>[(m(!0),f(pe,null,ye(a.value,g=>(m(),f(pe,null,[r(g.key)?(m(),P(fc,{key:g.key},{default:j(()=>[b(he,{ghost:"",sm:"",slate:"",class:"!w-full ltr:!justify-start rtl:!justify-end",icon:g.icon,label:d(g.key),onClick:_=>i(g.key)},null,8,["icon","label","onClick"])]),_:2},1024)):x("",!0)],64))),256))]),_:1})])])),[[h,l]])}}},tve={components:{NextButton:he},emits:["update","close","assign"],data(){return{query:"",selectedLabels:[]}},computed:{...gt({labels:"labels/getLabels"}),filteredLabels(){return this.labels.filter(e=>e.title.toLowerCase().includes(this.query.toLowerCase()))}},methods:{isLabelSelected(e){return this.selectedLabels.includes(e)},assignLabels(e){this.$emit("update",e)},onClose(){this.$emit("close")}}},nve={class:"labels-container"},sve={class:"flex items-center justify-between header"},ave={class:"labels-list"},ove={class:"labels-list__header"},ive={class:"flex items-center justify-between h-8 gap-2 label-list-search"},lve=["placeholder"],rve={class:"labels-list__body"},cve=["value"],dve={class:"overflow-hidden label-title whitespace-nowrap text-ellipsis"},uve={class:"labels-list__footer"};function mve(e,t,n,s,o,a){const i=F("NextButton"),l=F("fluent-icon"),r=ct("on-clickaway");return ie((m(),f("div",nve,[t[3]||(t[3]=c("div",{class:"triangle"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),c("div",sve,[c("span",null,v(e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")),1),b(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.onClose},null,8,["onClick"])]),c("div",ave,[c("header",ove,[c("div",ive,[b(l,{icon:"search",class:"search-icon",size:"16"}),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.query=d),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm label--search_input"},null,8,lve),[[at,o.query]])])]),c("ul",rve,[(m(!0),f(pe,null,ye(a.filteredLabels,d=>(m(),f("li",{key:d.id,class:"label__list-item"},[c("label",{class:re(["item",{"label-selected":a.isLabelSelected(d.title)}])},[ie(c("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>o.selectedLabels=u),type:"checkbox",value:d.title,class:"label-checkbox"},null,8,cve),[[Kt,o.selectedLabels]]),c("span",dve,v(d.title),1),c("span",{class:"label-pill",style:At({backgroundColor:d.color})},null,4)],2)]))),128))]),c("footer",uve,[b(i,{sm:"",type:"submit",label:e.$t("BULK_ACTION.LABELS.ASSIGN_SELECTED_LABELS"),disabled:!o.selectedLabels.length,onClick:t[2]||(t[2]=d=>e.$emit("assign",o.selectedLabels))},null,8,["label","disabled"])])])])),[[r,a.onClose]])}const pve=Re(tve,[["render",mve],["__scopeId","data-v-fd6e0532"]]),hve={components:{NextButton:he},emits:["assignTeam","close"],data(){return{query:"",selectedteams:[]}},computed:{...gt({teams:"teams/getTeams"}),filteredTeams(){return[{name:"None",id:0},...this.teams.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))]}},methods:{assignTeam(e){this.$emit("assignTeam",e)},onClose(){this.$emit("close")}}},fve={class:"bulk-action__teams"},gve={class:"flex items-center justify-between header"},_ve={class:"container"},vve={class:"team__list-container"},bve={class:"search-container"},Eve={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},Tve=["placeholder"],yve=["onClick"],Ave={class:"my-0 ltr:ml-2 rtl:mr-2 text-slate-800 dark:text-slate-75"},Sve={key:1},Ive={class:"team__list-item"},Cve={class:"my-0 ltr:ml-2 rtl:mr-2 text-slate-800 dark:text-slate-75"};function Nve(e,t,n,s,o,a){const i=F("NextButton"),l=F("fluent-icon"),r=ct("on-clickaway");return ie((m(),f("div",fve,[t[1]||(t[1]=c("div",{class:"triangle"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),c("div",gve,[c("span",null,v(e.$t("BULK_ACTION.TEAMS.TEAM_SELECT_LABEL")),1),b(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.onClose},null,8,["onClick"])]),c("div",_ve,[c("div",vve,[c("ul",null,[c("li",bve,[c("div",Eve,[b(l,{icon:"search",class:"search-icon",size:"16"}),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.query=d),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,Tve),[[at,o.query]])])]),a.filteredTeams.length?(m(!0),f(pe,{key:0},ye(a.filteredTeams,d=>(m(),f("li",{key:d.id},[c("div",{class:"team__list-item",onClick:u=>a.assignTeam(d)},[c("span",Ave,v(d.name),1)],8,yve)]))),128)):(m(),f("li",Sve,[c("div",Ive,[c("span",Cve,v(e.$t("BULK_ACTION.TEAMS.NO_TEAMS_AVAILABLE")),1)])]))])])])])),[[r,a.onClose]])}const Ove=Re(hve,[["render",Nve],["__scopeId","data-v-2dfc4821"]]),xve={components:{DatePicker:FA,NextButton:he},emits:["close","chooseTime"],data(){return{snoozeTime:null,lang:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearFormat:"YYYY",monthFormat:"MMMM"}}},methods:{onClose(){this.$emit("close")},chooseTime(){this.$emit("chooseTime",this.snoozeTime)},disabledDate(e){const t=new Date;return t.setDate(t.getDate()-1),e<t},disabledTime(e){const t=new Date;return t.setHours(t.getHours()+1),e<t}}},wve={class:"flex flex-col"},Rve={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function $ve(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("DatePicker"),r=F("NextButton");return m(),f("div",wve,[b(i,{"header-title":e.$t("CONVERSATION.CUSTOM_SNOOZE.TITLE")},null,8,["header-title"]),c("form",{class:"modal-content w-full pt-2 px-5 pb-6",onSubmit:t[1]||(t[1]=Ke((...d)=>a.chooseTime&&a.chooseTime(...d),["prevent"]))},[b(l,{value:o.snoozeTime,"onUpdate:value":t[0]||(t[0]=d=>o.snoozeTime=d),type:"datetime",inline:"","input-class":"mx-input ",lang:o.lang,"disabled-date":a.disabledDate,"disabled-time":a.disabledTime},null,8,["value","lang","disabled-date","disabled-time"]),c("div",Rve,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.CANCEL"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.APPLY")},null,8,["label"])])],32)])}const T_=Re(xve,[["render",$ve]]),Mve={components:{AgentSelector:X_e,UpdateActions:eve,LabelActions:pve,TeamActions:Ove,CustomSnoozeModal:T_,NextButton:he},props:{conversations:{type:Array,default:()=>[]},allConversationsSelected:{type:Boolean,default:!1},selectedInboxes:{type:Array,default:()=>[]},showOpenAction:{type:Boolean,default:!1},showResolvedAction:{type:Boolean,default:!1},showSnoozedAction:{type:Boolean,default:!1}},emits:["selectAllConversations","assignAgent","updateConversations","assignLabels","assignTeam","resolveConversations"],data(){return{showAgentsList:!1,showUpdateActions:!1,showLabelActions:!1,showTeamsList:!1,popoverPositions:{},showCustomTimeSnoozeModal:!1}},mounted(){yt.on(vb,this.onCmdSnoozeConversation),yt.on(bb,this.onCmdReopenConversation),yt.on(Eb,this.onCmdResolveConversation)},unmounted(){yt.off(vb,this.onCmdSnoozeConversation),yt.off(bb,this.onCmdReopenConversation),yt.off(Eb,this.onCmdResolveConversation)},methods:{onCmdSnoozeConversation(e){e===$t.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?this.showCustomTimeSnoozeModal=!0:this.updateConversations("snoozed",E_(e)||null)},onCmdReopenConversation(){this.updateConversations("open",null)},onCmdResolveConversation(){this.updateConversations("resolved",null)},customSnoozeTime(e){this.showCustomTimeSnoozeModal=!1,e&&this.updateConversations("snoozed",go(e))},hideCustomSnoozeModal(){this.showCustomTimeSnoozeModal=!1},selectAll(e){this.$emit("selectAllConversations",e.target.checked)},submit(e){this.$emit("assignAgent",e)},updateConversations(e,t){this.$emit("updateConversations",e,t)},assignLabels(e){this.$emit("assignLabels",e)},assignTeam(e){this.$emit("assignTeam",e)},resolveConversations(){this.$emit("resolveConversations")},toggleUpdateActions(){this.showUpdateActions=!this.showUpdateActions},toggleLabelActions(){this.showLabelActions=!this.showLabelActions},toggleAgentList(){this.showAgentsList=!this.showAgentsList},toggleTeamsList(){this.showTeamsList=!this.showTeamsList}}},kve={class:"bulk-action__container"},Lve={class:"flex items-center justify-between"},Dve={class:"flex items-center justify-between bulk-action__panel"},Pve=["checked",".indeterminate"],Bve={class:"flex items-center gap-1 bulk-action__actions"},Fve={key:0,class:"bulk-action__alert"};function Uve(e,t,n,s,o,a){const i=F("NextButton"),l=F("LabelActions"),r=F("UpdateActions"),d=F("AgentSelector"),u=F("TeamActions"),p=F("CustomSnoozeModal"),h=F("woot-modal"),g=ct("tooltip");return m(),f("div",kve,[c("div",Lve,[c("label",Dve,[c("input",{type:"checkbox",class:"checkbox",checked:n.allConversationsSelected,".indeterminate":!n.allConversationsSelected,onChange:t[0]||(t[0]=_=>a.selectAll(_))},null,40,Pve),c("span",null,v(e.$t("BULK_ACTION.CONVERSATIONS_SELECTED",{conversationCount:n.conversations.length})),1)]),c("div",Bve,[ie(b(i,{icon:"i-lucide-tags",slate:"",xs:"",faded:"",onClick:a.toggleLabelActions},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")]]),ie(b(i,{icon:"i-lucide-repeat",slate:"",xs:"",faded:"",onClick:a.toggleUpdateActions},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")]]),ie(b(i,{icon:"i-lucide-user-round-plus",slate:"",xs:"",faded:"",onClick:a.toggleAgentList},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.ASSIGN_AGENT_TOOLTIP")]]),ie(b(i,{icon:"i-lucide-users-round",slate:"",xs:"",faded:"",onClick:a.toggleTeamsList},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.ASSIGN_TEAM_TOOLTIP")]])]),b(Ms,{name:"popover-animation"},{default:j(()=>[o.showLabelActions?(m(),P(l,{key:0,class:"label-actions-box",onAssign:a.assignLabels,onClose:t[1]||(t[1]=_=>o.showLabelActions=!1)},null,8,["onAssign"])):x("",!0)]),_:1}),b(Ms,{name:"popover-animation"},{default:j(()=>[o.showUpdateActions?(m(),P(r,{key:0,class:"update-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,"show-resolve":!n.showResolvedAction,"show-reopen":!n.showOpenAction,"show-snooze":!n.showSnoozedAction,onUpdate:a.updateConversations,onClose:t[2]||(t[2]=_=>o.showUpdateActions=!1)},null,8,["selected-inboxes","conversation-count","show-resolve","show-reopen","show-snooze","onUpdate"])):x("",!0)]),_:1}),b(Ms,{name:"popover-animation"},{default:j(()=>[o.showAgentsList?(m(),P(d,{key:0,class:"agent-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,onSelect:a.submit,onClose:t[3]||(t[3]=_=>o.showAgentsList=!1)},null,8,["selected-inboxes","conversation-count","onSelect"])):x("",!0)]),_:1}),b(Ms,{name:"popover-animation"},{default:j(()=>[o.showTeamsList?(m(),P(u,{key:0,class:"team-actions-box",onAssignTeam:a.assignTeam,onClose:t[4]||(t[4]=_=>o.showTeamsList=!1)},null,8,["onAssignTeam"])):x("",!0)]),_:1})]),n.allConversationsSelected?(m(),f("div",Fve,v(e.$t("BULK_ACTION.ALL_CONVERSATIONS_SELECTED_ALERT")),1)):x("",!0),b(h,{show:o.showCustomTimeSnoozeModal,"onUpdate:show":t[5]||(t[5]=_=>o.showCustomTimeSnoozeModal=_),"on-close":a.hideCustomSnoozeModal},{default:j(()=>[b(p,{onClose:a.hideCustomSnoozeModal,onChooseTime:a.customSnoozeTime},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const Gve=Re(Mve,[["render",Uve],["__scopeId","data-v-5bc5f40f"]]),wS={__name:"IntersectionObserver",props:{options:{type:Object,default:()=>({root:document,rootMargin:"100px 0 100px 0)"})}},emits:["observed"],setup(e,{emit:t}){const n=t,s=U("");return _$(s,([{isIntersecting:o}])=>{o&&n("observed")},e.options),(o,a)=>(m(),f("div",{ref_key:"observedElement",ref:s,class:"h-6 w-full"},null,512))}};function Vve(e){const t=()=>{const o=e.value.querySelectorAll("div.conversations-list div.conversation"),a=e.value.querySelector("div.conversations-list div.conversation.active"),i=[...o].indexOf(a),l=o.length-1;return{allConversations:o,activeConversation:a,activeConversationIndex:i,lastConversationIndex:l}},n=o=>{const{allConversations:a,activeConversationIndex:i,lastConversationIndex:l}=t(),r=o==="previous"?i-1:i+1;a.length>0&&r>=0&&r<=l?a[r].click():a.length>0&&a[o==="previous"?0:l].click()};Vs({"Alt+KeyJ":{action:()=>n("previous"),allowOnFocusedInput:!0},"Alt+KeyK":{action:()=>n("next"),allowOnFocusedInput:!0}})}function Hve(){const e=hn(),{t}=He(),n=Ve("bulkActions/getSelectedConversationIds"),s=U([]);function o(g,_){e.dispatch("bulkActions/setSelectedConversationIds",g),s.value=[...s.value,_]}function a(g,_){e.dispatch("bulkActions/removeSelectedConversationIds",g),s.value=s.value.filter(T=>T!==_)}function i(){e.dispatch("bulkActions/clearSelectedConversationIds"),s.value=[]}function l(g,_){const T=I(_);g?(e.dispatch("bulkActions/setSelectedConversationIds",T.map(S=>S.id)),s.value=T.map(S=>S.inbox_id)):i()}function r(g){return n.value.includes(g)}async function d(g,_=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:_||n.value,fields:{assignee_id:g.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),_?Te(t("CONVERSATION.CARD_CONTEXT_MENU.API.AGENT_ASSIGNMENT.SUCCESFUL",{agentName:g.name,conversationId:_})):Te(t("BULK_ACTION.ASSIGN_SUCCESFUL"))}catch{Te(t("BULK_ACTION.ASSIGN_FAILED"))}}async function u(g,_=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:_||n.value,labels:{add:g}}),e.dispatch("bulkActions/clearSelectedConversationIds"),_?Te(t("CONVERSATION.CARD_CONTEXT_MENU.API.LABEL_ASSIGNMENT.SUCCESFUL",{labelName:g[0],conversationId:_})):Te(t("BULK_ACTION.LABELS.ASSIGN_SUCCESFUL"))}catch{Te(t("BULK_ACTION.LABELS.ASSIGN_FAILED"))}}async function p(g){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{team_id:g.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),Te(t("BULK_ACTION.TEAMS.ASSIGN_SUCCESFUL"))}catch{Te(t("BULK_ACTION.TEAMS.ASSIGN_FAILED"))}}async function h(g,_){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{status:g},snoozed_until:_}),e.dispatch("bulkActions/clearSelectedConversationIds"),Te(t("BULK_ACTION.UPDATE.UPDATE_SUCCESFUL"))}catch{Te(t("BULK_ACTION.UPDATE.UPDATE_FAILED"))}}return{selectedConversations:n,selectedInboxes:s,selectConversation:o,deSelectConversation:a,selectAllConversations:l,resetBulkActions:i,isConversationSelected:r,onAssignAgent:d,onAssignLabels:u,onAssignTeamsForBulk:p,onUpdateConversations:h}}const Ca=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],$r=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],Yl=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],Kve=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],Xl=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}],zve=[{attributeKey:"status",attributeI18nKey:"STATUS",inputType:"multi_select",dataType:"text",filterOperators:Ca,attributeModel:"standard"},{attributeKey:"assignee_id",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",dataType:"text",filterOperators:$r,attributeModel:"standard"},{attributeKey:"priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",dataType:"text",filterOperators:Ca,attributeModel:"standard"},{attributeKey:"inbox_id",attributeI18nKey:"INBOX_NAME",inputType:"search_select",dataType:"text",filterOperators:$r,attributeModel:"standard"},{attributeKey:"team_id",attributeI18nKey:"TEAM_NAME",inputType:"search_select",dataType:"number",filterOperators:$r,attributeModel:"standard"},{attributeKey:"display_id",attributeI18nKey:"CONVERSATION_IDENTIFIER",inputType:"plain_text",dataType:"Number",filterOperators:Yl,attributeModel:"standard"},{attributeKey:"campaign_id",attributeI18nKey:"CAMPAIGN_NAME",inputType:"search_select",dataType:"Number",filterOperators:$r,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:$r,attributeModel:"standard"},{attributeKey:"browser_language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",dataType:"text",filterOperators:Ca,attributeModel:"additional"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",dataType:"text",filterOperators:Ca,attributeModel:"additional"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:Yl,attributeModel:"additional"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:Xl,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:Xl,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:Xl,attributeModel:"standard"}],Wve=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"status",i18nKey:"STATUS"},{key:"assignee_id",i18nKey:"ASSIGNEE_NAME"},{key:"inbox_id",i18nKey:"INBOX_NAME"},{key:"team_id",i18nKey:"TEAM_NAME"},{key:"display_id",i18nKey:"CONVERSATION_IDENTIFIER"},{key:"campaign_id",i18nKey:"CAMPAIGN_NAME"},{key:"labels",i18nKey:"LABELS"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"}]},{name:"Additional Filters",i18nGroup:"ADDITIONAL_FILTERS",attributes:[{key:"browser_language",i18nKey:"BROWSER_LANGUAGE"},{key:"country_code",i18nKey:"COUNTRY_NAME"},{key:"referer",i18nKey:"REFERER_LINK"}]}],jve=[{attributeKey:"name",attributeI18nKey:"NAME",inputType:"plain_text",dataType:"text",filterOperators:Ca,attribute_type:"standard"},{attributeKey:"email",attributeI18nKey:"EMAIL",inputType:"plain_text",dataType:"text",filterOperators:Yl,attribute_type:"standard"},{attributeKey:"phone_number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",dataType:"text",filterOperators:Yl,attribute_type:"standard"},{attributeKey:"identifier",attributeI18nKey:"IDENTIFIER",inputType:"plain_text",dataType:"number",filterOperators:Ca,attribute_type:"standard"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY",inputType:"search_select",dataType:"number",filterOperators:Ca,attribute_type:"standard"},{attributeKey:"city",attributeI18nKey:"CITY",inputType:"plain_text",dataType:"Number",filterOperators:Yl,attribute_type:"standard"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:Xl,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:Xl,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:Xl,attributeModel:"standard"},{attributeKey:"blocked",attributeI18nKey:"BLOCKED",inputType:"search_select",dataType:"text",filterOperators:Ca,attributeModel:"standard"}],Yve=e=>{switch(e){case"date":return"date";case"text":return"plain_text";case"list":return"search_select";case"checkbox":return"search_select";default:return"plain_text"}},Xve=e=>{switch(e){case"list":return Ca;case"text":return Yl;case"number":return Ca;case"link":return Ca;case"date":return Kve;case"checkbox":return Ca;default:return Ca}},qve=({filteri18nKey:e,attributeModel:t})=>{const{t:n}=He(),{getters:s}=Ot(),o=Wve;return{setFilterAttributes:()=>{const r=s["attributes/getAttributesByModel"](t),d={name:n(`${e}.GROUPS.CUSTOM_ATTRIBUTES`),attributes:r.map(h=>({key:h.attribute_key,name:h.attribute_display_name}))},u=o.map(h=>({name:n(`${e}.GROUPS.${h.i18nGroup}`),attributes:h.attributes.map(g=>({key:g.key,name:n(`${e}.ATTRIBUTES.${g.i18nKey}`)}))})),p=r.map(h=>({attributeKey:h.attribute_key,attributeI18nKey:`CUSTOM_ATTRIBUTE_${h.attribute_display_type.toUpperCase()}`,inputType:Yve(h.attribute_display_type),filterOperators:Xve(h.attribute_display_type),attributeModel:"custom_attributes"}));return{filterGroups:[...u,d],filterTypes:[...p]}},initializeStatusAndAssigneeFilterToModal:(r,d,u)=>r!==""?{attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:r,name:n(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${r}.TEXT`)}],query_operator:"and",custom_attribute_type:""}:u===$t.ASSIGNEE_TYPE.ME?{attribute_key:"assignee_id",filter_operator:"equal_to",values:d,query_operator:"and",custom_attribute_type:""}:null,initializeInboxTeamAndLabelFilterToModal:(r,d,u,p,h)=>{const g=[];return r&&g.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:r,name:d.name}],query_operator:"and",custom_attribute_type:""}),u&&g.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:p,query_operator:"and",custom_attribute_type:""}),h&&g.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:h,name:h}],query_operator:"and",custom_attribute_type:""}),g}}},Zve=(e,t,n)=>{if((e==="created_at"||e==="last_activity_at")&&t==="days_before")return"plain_text";const s=n.find(o=>o.attributeKey===e);return s==null?void 0:s.inputType},Qve=e=>({text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"})[e],Jve=(e,t)=>{const n=t.find(a=>a.attribute_key===e),{attribute_display_type:s}=n;return Qve(s)},Sd=(e,t,n,s)=>{const o=t==null?void 0:t.find(a=>a[n]===e[0]);return{id:e[0],name:o?o[s]:e[0]}},e0e=e=>e.map(t=>({id:t,name:t})),t0e=(e,t)=>t.filter(s=>e.includes(s.title)).map(({title:s})=>({id:s,name:s})),n0e=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:o})=>({id:s.toLowerCase(),name:o})),s0e=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:o})=>({id:s,name:o})),a0e=(e,t)=>t.filter(n=>e.includes(n.id)),o0e=(e,t)=>{const{attribute_key:n,values:s}=e,{languages:o,countries:a,agents:i,inboxes:l,teams:r,campaigns:d,labels:u,priority:p}=t;switch(n){case"status":return e0e(s);case"assignee_id":return Sd(s,i,"id","name");case"inbox_id":return Sd(s,l,"id","name");case"team_id":return Sd(s,r,"id","name");case"campaign_id":return Sd(s,d,"id","title");case"labels":return t0e(s,u);case"priority":return a0e(s,p);case"browser_language":return n0e(s,o);case"country_code":return s0e(s,a);default:return{id:s[0],name:s[0]}}},RS=(e,t)=>{const{attribute_key:n,filter_operator:s,values:o}=e,{filterTypes:a,allCustomAttributes:i}=t,l=Zve(n,s,a);return l===void 0?Jve(n,i)==="string"?o[0].toString():{id:o[0],name:o[0]}:l==="multi_select"||l==="search_select"?o0e(e,t):o[0].toString()},i0e={key:3,class:"flex items-center justify-center p-4 overflow-auto"},l0e={key:0,class:"text-center"},r0e={key:1,class:"p-4 text-center text-slate-400 dark:text-slate-300"},c0e={__name:"ChatList",props:{conversationInbox:{type:[String,Number],default:0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showConversationList:{default:!0,type:Boolean},isOnExpandedLayout:{default:!1,type:Boolean}},emits:["conversationLoad"],setup(e,{emit:t}){$t.ASSIGNEE_TYPE.KANBAN="kanban";const n=e,s=t,{uiSettings:o}=Mn(),{t:a}=He(),i=wn(),l=hn(),r=U(null),d=U(null),u=U($t.ASSIGNEE_TYPE.ME),p=U($t.STATUS_TYPE.OPEN),h=U($t.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),g=U(!1),_=U([]),T=U({}),S=U(!1),E=U(!1),y=U(!1),A=U([]),C=U(zve.map(ot=>({...ot,attributeName:a(`FILTER.ATTRIBUTES.${ot.attributeI18nKey}`)}))),O=Ve("getCurrentUser"),N=Ve("getFilteredConversations"),R=Ve("getMineChats"),k=Ve("getAllStatusChats"),L=Ve("getUnAssignedChats"),D=Ve("getChatListLoadingStatus"),$=Ve("getSelectedInbox"),M=Ve("conversationStats/getStats"),K=Ve("getAppliedConversationFiltersV2"),B=Ve("customViews/getConversationCustomViews"),H=Ve("agents/getAgents"),G=Ve("teams/getTeams"),V=Ve("inboxes/getInboxes"),Y=Ve("campaigns/getAllCampaigns"),ee=Ve("labels/getLabels"),X=Ve("getCurrentAccountId"),z=Ve("teams/getTeam");Vve(r);const{selectedConversations:W,selectedInboxes:q,selectConversation:Z,deSelectConversation:ne,selectAllConversations:ae,resetBulkActions:ue,isConversationSelected:te,onAssignAgent:ce,onAssignLabels:fe,onAssignTeamsForBulk:ke,onUpdateConversations:De}=Hve(),{initializeStatusAndAssigneeFilterToModal:Fe,initializeInboxTeamAndLabelFilterToModal:je}=qve({filteri18nKey:"FILTER",attributeModel:"conversation_attribute"}),Qe=w(()=>({root:r.value,rootMargin:"100px 0px 100px 0px"})),Ze=w(()=>K.value.length!==0),ft=w(()=>{if(n.foldersId){const ot=B.value.filter(Yt=>Yt.id===Number(n.foldersId)),[Tt]=ot;return Tt}}),kt=w(()=>{var ot;return(ot=ft.value)==null?void 0:ot.name}),Q=w(()=>!!(ft.value&&n.foldersId!==0)),oe=w(()=>Ze.value||Q.value),de=w(()=>{const{id:ot,name:Tt}=O.value;return{id:ot,name:Tt}}),Ce=w(()=>Pu(O.value,X.value)),Ae=w(()=>Kh(dO,Ce.value,ot=>ot.permissions).map(({key:ot,count:Tt})=>({key:ot,name:a(`CHAT_LIST.ASSIGNEE_TYPE_TABS.${ot}`),count:ot===$t.ASSIGNEE_TYPE.KANBAN?Ne.value:M.value[Tt]||0}))),Le=w(()=>oe.value||u.value===$t.ASSIGNEE_TYPE.ALL),Me=w(()=>oe.value?"appliedFilters":u.value),Ue=La("inboxes/getInbox",$),we=La("conversationPage/getCurrentPageFilter",u),ge=La("conversationPage/getCurrentPageFilter",Me),J=La("conversationPage/getHasEndReached",Me),Ee=La("attributes/getAttributesByModel","conversation_attribute"),$e=w(()=>Ae.value.find(Tt=>Tt.key===u.value).count),se=w(()=>{const Tt=_.value&&Array.isArray(_.value)&&!_.value.length,Yt=!oe.value&&Tt,Is=_.value.length<25&&$e.value<25&&$e.value>_.value.length;return Yt&&Is?1:we.value+1}),le=w(()=>({inboxId:n.conversationInbox?n.conversationInbox:void 0,assigneeType:u.value,status:p.value,sortBy:h.value,page:se.value,labels:n.label?[n.label]:void 0,teamId:n.teamId||void 0,conversationType:n.conversationType||void 0})),_e=w(()=>n.teamId?z.value(n.teamId):{}),Ie=w(()=>Ze.value?a("CHAT_LIST.TAB_HEADING"):Ue.value.name?Ue.value.name:_e.value.name?_e.value.name:n.label?`#${n.label}`:n.conversationType==="mention"?a("CHAT_LIST.MENTION_HEADING"):n.conversationType==="participating"?a("CONVERSATION_PARTICIPANTS.SIDEBAR_MENU_TITLE"):n.conversationType==="unattended"?a("CHAT_LIST.UNATTENDED_HEADING"):Q.value?ft.value.name:a("CHAT_LIST.TAB_HEADING")),Pe=w(()=>N.value.filter(ot=>ot.kanban_items&&ot.kanban_items.length>0)),Ne=w(()=>Pe.value.length),ve=w(()=>{let ot=[];if(oe.value)ot=[...N.value];else{const Tt=le.value;u.value==="me"?ot=[...R.value(Tt)]:u.value==="unassigned"?ot=[...L.value(Tt)]:u.value==="kanban"?ot=[...Pe.value]:ot=[...k.value(Tt)]}if(ft.value){const{payload:Tt}=ft.value.query;ot=ot.filter(Yt=>uO(Yt,Tt))}return ot}),me=w(()=>ve.value.length&&J.value&&!D.value),Oe=w(()=>ve.value.length===W.value.length&&ve.value.every(ot=>W.value.includes(ot.id))),Ge=w(()=>[...new Set(q.value)]);U([]),w(()=>l.getters["accounts/isFeatureEnabledonAccount"](X.value,"kanban_board"));function Se(){const{conversations_filter_by:ot={}}=o.value,{status:Tt,order_by:Yt}=ot;p.value=Tt||$t.STATUS_TYPE.OPEN,h.value=Object.values($t.SORT_BY_TYPE).includes(Yt)?Yt:$t.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC}function We(){s("conversationLoad")}function mt(ot){ot=$s(ot);let Tt=ge.value+1;l.dispatch("fetchFilteredConversations",{queryData:vo(ot),page:Tt}).then(We),g.value=!1}function Nt(ot){ot=$s(ot);let Tt=ge.value+1;l.dispatch("fetchFilteredConversations",{queryData:ot,page:Tt}).then(We)}function nt(ot){ot=$s(ot),ue(),T.value=vo(ot),l.dispatch("conversationPage/reset"),l.dispatch("emptyAllConversations"),mt(ot)}function St(){g.value=!1,A.value=[]}function qe(ot,Tt){const Yt=$s(ot),Is={...I(ft),name:I(Tt),query:vo(Yt)};l.dispatch("customViews/update",Is),St()}function bt(){S.value=!0}function Vt(){S.value=!1}function dt(){E.value=!0}function It(){E.value=!1}function rt(){return{agents:H.value,teams:G.value,inboxes:V.value,labels:ee.value,campaigns:Y.value,languages:Xf,countries:Ua,priority:[{id:"low",name:a("CONVERSATION.PRIORITY.OPTIONS.LOW")},{id:"medium",name:a("CONVERSATION.PRIORITY.OPTIONS.MEDIUM")},{id:"high",name:a("CONVERSATION.PRIORITY.OPTIONS.HIGH")},{id:"urgent",name:a("CONVERSATION.PRIORITY.OPTIONS.URGENT")}],filterTypes:C.value,allCustomAttributes:Ee.value}}function wt(){const ot=Fe(p.value,de.value,u.value);ot&&(A.value=[...A.value,To(ot)]);const Tt=je(n.conversationInbox,Ue.value,n.teamId,_e.value,n.label).map(To);A.value=[...A.value,...Tt]}function pn(ot){var Is,pa;const Tt=(pa=(Is=I(ot))==null?void 0:Is.query)==null?void 0:pa.payload;if(!Array.isArray(Tt))return;const Yt=Tt.map(Hs=>{const Cs=To(Hs),$o=Array.isArray(Cs.values)?RS($s(Hs),rt()):[];return{attributeKey:Cs.attributeKey,attributeModel:Cs.attributeModel,customAttributeType:Cs.customAttributeType,filterOperator:Cs.filterOperator,queryOperator:Cs.queryOperator??"and",values:$o}});A.value=[...A.value,...Yt]}function vt(){A.value=[...K.value]}function Ft(){if(g.value===!0){St();return}!Ze.value&&!Q.value&&wt(),Q.value&&pn(ft.value),Ze.value&&vt(),g.value=!0}function zt(){if(l.dispatch("updateChatListFilters",le.value),u.value===$t.ASSIGNEE_TYPE.KANBAN){We();return}l.dispatch("fetchAllConversations").then(We)}function un(){if(A.value=[],ue(),l.dispatch("conversationPage/reset"),l.dispatch("emptyAllConversations"),l.dispatch("clearConversationFilters"),Q.value){const ot=ft.value.query;Nt(ot)}n.foldersId||zt()}function fs(){if(!(J.value||D.value))if(!oe.value)zt();else if(Q.value){const ot=ft.value.query;Nt(ot)}else Ze.value&&mt(K.value)}function Pn(){const ot=d.value;if(ot&&ot.hasScrollbar){const{scrollTop:Tt,scrollHeight:Yt,clientHeight:Is}=ot.$el;Yt-(Tt+Is)<100&&fs()}}function An(ot){u.value!==ot&&(ue(),yt.emit("clearSearchInput"),u.value=ot,we.value||zt())}function rs(ot,Tt){Tt==="status"?p.value=ot:h.value=ot,un()}function gs(){const Tt=B.value[B.value.length-1].id;i.push({name:"folder_conversations",params:{id:Tt}})}function _s(){B.value.length>0?gs():(i.push({name:"home"}),zt())}async function Be(ot,Tt=null){l.dispatch("setCurrentChatPriority",{priority:ot,conversationId:Tt}),l.dispatch("assignPriority",{conversationId:Tt,priority:ot}).then(()=>{jt(ba.CHANGE_PRIORITY,{newValue:ot,from:"Context menu"}),Te(a("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:ot,conversationId:Tt}))})}async function Ye(ot){try{await l.dispatch("markMessagesUnread",{id:ot});const{params:{accountId:Tt,inbox_id:Yt,label:Is,teamId:pa},name:Hs}=xn();let Cs="";mO({route:{name:Hs}})?Cs="mention":pO({route:{name:Hs}})&&(Cs="unattended"),i.push(UE({accountId:Tt,conversationType:Cs,customViewId:n.foldersId,inboxId:Yt,label:Is,teamId:pa}))}catch{}}async function Xe(ot){try{await l.dispatch("markMessagesRead",{id:ot})}catch{}}async function pt(ot,Tt=null){try{await l.dispatch("assignTeam",{conversationId:Tt,teamId:ot.id}),Te(a("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.SUCCESFUL",{team:ot.name,conversationId:Tt}))}catch{Te(a("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.FAILED"))}}function Et(ot,Tt,Yt){l.dispatch("toggleStatus",{conversationId:ot,status:Tt,snoozedUntil:Yt}).then(()=>{Te(a("CONVERSATION.CHANGE_STATUS"))})}function ze(ot){return W.value.length?W.value.every(Tt=>{var Yt;return((Yt=l.getters.getConversationById(Tt))==null?void 0:Yt.status)===ot}):!1}function Rt(ot){y.value=ot}function Tn(ot){ae(ot,ve)}return yi("fetch_conversation_stats",()=>{l.dispatch("conversationStats/get",le.value)}),Ea(d,"scroll",Pn),ut(()=>{l.dispatch("setChatListFilters",le.value),Se(),l.dispatch("setChatStatusFilter",p.value),l.dispatch("setChatSortFilter",h.value),un(),Q.value&&l.dispatch("campaigns/get")}),qn("selectConversation",Z),qn("deSelectConversation",ne),qn("assignAgent",ce),qn("assignTeam",pt),qn("assignLabels",fe),qn("updateConversationStatus",Et),qn("toggleContextMenu",Rt),qn("markAsUnread",Ye),qn("markAsRead",Xe),qn("assignPriority",Be),qn("isConversationSelected",te),lt(_e,()=>un()),lt(w(()=>n.conversationInbox),()=>un()),lt(w(()=>n.label),()=>un()),lt(w(()=>n.conversationType),()=>un()),lt(ft,(ot,Tt)=>{ot!==Tt&&l.dispatch("customViews/setActiveConversationFolder",ot||null),un()}),lt(N,()=>{_.value=ve.value}),lt(le,(ot,Tt)=>{ot!==Tt&&l.dispatch("updateChatListFilters",ot)}),(ot,Tt)=>(m(),f("div",{class:re(["flex flex-col flex-shrink-0 bg-n-solid-1 conversations-list-wrap",[{hidden:!e.showConversationList},e.isOnExpandedLayout?"basis-full":"w-[360px] 2xl:w-[420px]"]])},[et(ot.$slots,"default"),b(Mfe,{"page-title":Ie.value,"has-applied-filters":Ze.value,"has-active-folders":Q.value,"active-status":p.value,"is-on-expanded-layout":e.isOnExpandedLayout,onAddFolders:bt,onDeleteFolders:dt,onFiltersModal:Ft,onResetFilters:un,onBasicFilterChange:rs},null,8,["page-title","has-applied-filters","has-active-folders","active-status","is-on-expanded-layout"]),S.value?(m(),P(Si,{key:0,to:"#saveFilterTeleportTarget"},[b(fge,{modelValue:A.value,"onUpdate:modelValue":Tt[0]||(Tt[0]=Yt=>A.value=Yt),"custom-views-query":T.value,"open-last-saved-item":gs,onClose:Vt},null,8,["modelValue","custom-views-query"])])):x("",!0),E.value?(m(),P(T_e,{key:1,show:E.value,"onUpdate:show":Tt[1]||(Tt[1]=Yt=>E.value=Yt),"active-custom-view":ft.value,"custom-views-id":e.foldersId,"open-last-item-after-delete":_s,onClose:It},null,8,["show","active-custom-view","custom-views-id"])):x("",!0),oe.value?x("",!0):(m(),P(_ge,{key:2,items:Ae.value,"active-tab":u.value,"is-compact":"",onChatTabChange:An},null,8,["items","active-tab"])),!I(D)&&!ve.value.length?(m(),f("p",i0e,v(ot.$t("CHAT_LIST.LIST.404")),1)):x("",!0),I(W).length?(m(),P(Gve,{key:4,conversations:I(W),"all-conversations-selected":Oe.value,"selected-inboxes":Ge.value,"show-open-action":ze("open"),"show-resolved-action":ze("resolved"),"show-snoozed-action":ze("snoozed"),onSelectAllConversations:Tn,onAssignAgent:I(ce),onUpdateConversations:I(De),onAssignLabels:I(fe),onAssignTeam:I(ke)},null,8,["conversations","all-conversations-selected","selected-inboxes","show-open-action","show-resolved-action","show-snoozed-action","onAssignAgent","onUpdateConversations","onAssignLabels","onAssignTeam"])):x("",!0),c("div",{ref_key:"conversationListRef",ref:r,class:re(["flex-1 overflow-hidden conversations-list hover:overflow-y-auto",{"overflow-hidden":y.value}])},[b(I(__),{ref_key:"conversationDynamicScroller",ref:d,items:ve.value,"min-item-size":24,class:"w-full h-full overflow-auto"},{default:j(({item:Yt,index:Is,active:pa})=>[b(I(ES),{item:Yt,active:pa,"data-index":Is,"size-dependencies":[Yt.messages,Yt.labels,Yt.uuid,Yt.inbox_id]},{default:j(()=>{var Hs;return[b(v_e,{source:Yt,label:e.label,"team-id":e.teamId,"folders-id":e.foldersId,"conversation-type":e.conversationType,"show-assignee":Le.value,"kanban-item":(Hs=Yt.kanban_items)==null?void 0:Hs[0],onSelectConversation:I(Z),onDeSelectConversation:I(ne)},null,8,["source","label","team-id","folders-id","conversation-type","show-assignee","kanban-item","onSelectConversation","onDeSelectConversation"])]}),_:2},1032,["item","active","data-index","size-dependencies"])]),after:j(()=>[I(D)?(m(),f("div",l0e,Tt[3]||(Tt[3]=[c("span",{class:"mt-4 mb-4 spinner"},null,-1)]))):me.value?(m(),f("p",r0e,v(ot.$t("CHAT_LIST.EOF")),1)):(m(),P(wS,{key:2,options:Qe.value,onObserved:fs},null,8,["options"]))]),_:1},8,["items"])],2),g.value?(m(),P(Si,{key:5,to:"#conversationFilterTeleportTarget"},[b(lge,{modelValue:A.value,"onUpdate:modelValue":Tt[2]||(Tt[2]=Yt=>A.value=Yt),"folder-name":kt.value,"is-folder-view":Q.value,onApplyFilter:nt,onUpdateFolder:qe,onClose:St},null,8,["modelValue","folder-name","is-folder-view"])])):x("",!0)],2))}},d0e={components:{NextButton:he},props:{show:{type:Boolean,default:!1},currentChat:{type:Object,default:()=>({})}},emits:["cancel","update:show"],setup(){return{v$:Lt()}},data(){return{email:"",selectedType:"",isSubmitting:!1}},validations:{email:{required:it,email:xi,minLength:Nn(4)}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},sentToOtherEmailAddress(){return this.selectedType==="other_email_address"},isFormValid(){return this.selectedType?this.sentToOtherEmailAddress?!!this.email&&!this.v$.email.$error:!0:!1},selectedEmailAddress(){const{meta:e}=this.currentChat;switch(this.selectedType){case"contact":return e.sender.email;case"assignee":return e.assignee.email;case"other_email_address":return this.email;default:return""}}},methods:{onCancel(){this.$emit("cancel")},async onSubmit(){this.isSubmitting=!1;try{await this.$store.dispatch("sendEmailTranscript",{email:this.selectedEmailAddress,conversationId:this.currentChat.id}),Te(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS")),this.onCancel()}catch{Te(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR"))}finally{this.isSubmitting=!1}}}},u0e={class:"flex flex-col h-auto overflow-auto"},m0e={class:"w-full"},p0e={key:0,class:"flex items-center gap-2"},h0e={for:"contact"},f0e={key:1,class:"flex items-center gap-2"},g0e={for:"assignee"},_0e={class:"flex items-center gap-2"},v0e={for:"other_email_address"},b0e={key:2,class:"w-[50%] mt-1"},E0e=["placeholder"],T0e={key:0,class:"message"},y0e={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function A0e(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("NextButton"),r=F("woot-modal");return m(),P(r,{show:a.localShow,"onUpdate:show":t[6]||(t[6]=d=>a.localShow=d),"on-close":a.onCancel},{default:j(()=>[c("div",u0e,[b(i,{"header-title":e.$t("EMAIL_TRANSCRIPT.TITLE"),"header-content":e.$t("EMAIL_TRANSCRIPT.DESC")},null,8,["header-title","header-content"]),c("form",{class:"w-full",onSubmit:t[5]||(t[5]=Ke((...d)=>a.onSubmit&&a.onSubmit(...d),["prevent"]))},[c("div",m0e,[n.currentChat.meta.sender&&n.currentChat.meta.sender.email?(m(),f("div",p0e,[ie(c("input",{id:"contact","onUpdate:modelValue":t[0]||(t[0]=d=>o.selectedType=d),type:"radio",name:"selectedType",value:"contact"},null,512),[[bi,o.selectedType]]),c("label",h0e,v(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_CONTACT")),1)])):x("",!0),n.currentChat.meta.assignee?(m(),f("div",f0e,[ie(c("input",{id:"assignee","onUpdate:modelValue":t[1]||(t[1]=d=>o.selectedType=d),type:"radio",name:"selectedType",value:"assignee"},null,512),[[bi,o.selectedType]]),c("label",g0e,v(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_AGENT")),1)])):x("",!0),c("div",_0e,[ie(c("input",{id:"other_email_address","onUpdate:modelValue":t[2]||(t[2]=d=>o.selectedType=d),type:"radio",name:"selectedType",value:"other_email_address"},null,512),[[bi,o.selectedType]]),c("label",v0e,v(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_OTHER_EMAIL_ADDRESS")),1)]),a.sentToOtherEmailAddress?(m(),f("div",b0e,[c("label",{class:re({error:s.v$.email.$error})},[ie(c("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>o.email=d),type:"text",placeholder:e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.PLACEHOLDER"),onInput:t[4]||(t[4]=(...d)=>s.v$.email.$touch&&s.v$.email.$touch(...d))},null,40,E0e),[[at,o.email]]),s.v$.email.$error?(m(),f("span",T0e,v(e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.ERROR")),1)):x("",!0)],2)])):x("",!0)]),c("div",y0e,[b(l,{faded:"",slate:"",type:"reset",label:e.$t("EMAIL_TRANSCRIPT.CANCEL"),onClick:Ke(a.onCancel,["prevent"])},null,8,["label","onClick"]),b(l,{type:"submit",label:e.$t("EMAIL_TRANSCRIPT.SUBMIT"),disabled:!a.isFormValid},null,8,["label","disabled"])])],32)])]),_:1},8,["show","on-close"])}const S0e=Re(d0e,[["render",A0e]]),I0e={class:"relative flex items-center justify-end resolve-actions"},C0e={key:0,class:"dropdown-pane dropdown-pane--open left-auto top-full mt-0.5 ltr:right-0 rtl:left-0 max-w-[12.5rem] min-w-[9.75rem]"},N0e={__name:"ResolveAction",setup(e){const t=Ot(),n=vn(),{t:s}=He(),o=U(null),a=U(!1),[i,l]=la(),r=()=>l(!1),d=()=>l(!0),u=w(()=>n.getSelectedChat.value),p=w(()=>u.value.status===$t.STATUS_TYPE.OPEN),h=w(()=>u.value.status===$t.STATUS_TYPE.PENDING),g=w(()=>u.value.status===$t.STATUS_TYPE.RESOLVED),_=w(()=>u.value.status===$t.STATUS_TYPE.SNOOZED),T=w(()=>!h.value&&!_.value),S=w(()=>h.value||_.value),E=()=>{const R=document.querySelectorAll(".conversations-list .conversation"),k=document.querySelector("div.conversations-list div.conversation.active"),L=[...R].indexOf(k),D=R.length-1;return{all:R,activeIndex:L,lastIndex:D}},y=()=>{document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},A=(R,k)=>{r(),a.value=!0,t.dispatch("toggleStatus",{conversationId:u.value.id,status:R,snoozedUntil:k}).then(()=>{Te(s("CONVERSATION.CHANGE_STATUS")),a.value=!1})},C=()=>{A($t.STATUS_TYPE.OPEN)},O=()=>{A($t.STATUS_TYPE.RESOLVED)};return Vs({"Alt+KeyM":{action:()=>{var R;return(R=o.value)==null?void 0:R.$el.click()},allowOnFocusedInput:!0},"Alt+KeyE":{action:async()=>{await A($t.STATUS_TYPE.RESOLVED)}},"$mod+Alt+KeyE":{action:async R=>{const{all:k,activeIndex:L,lastIndex:D}=E();await A($t.STATUS_TYPE.RESOLVED),L<D?k[L+1].click():k.length>1&&(k[0].click(),document.querySelector(".conversations-list").scrollTop=0),R.preventDefault()}}}),yi(O_e,C),yi(x_e,O),(R,k)=>{const L=ct("on-clickaway");return m(),f("div",I0e,[c("div",{class:re(["rounded-lg shadow outline-1 outline",S.value?"outline-transparent":"outline-n-container"])},[p.value?(m(),P(he,{key:0,label:I(s)("CONVERSATION.HEADER.RESOLVE_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":a.value,onClick:O},null,8,["label","is-loading"])):g.value?(m(),P(he,{key:1,label:I(s)("CONVERSATION.HEADER.REOPEN_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":a.value,onClick:C},null,8,["label","is-loading"])):S.value?(m(),P(he,{key:2,label:I(s)("CONVERSATION.HEADER.OPEN_ACTION"),size:"sm",color:"slate","is-loading":a.value,onClick:C},null,8,["label","is-loading"])):x("",!0),T.value?(m(),P(he,{key:3,ref_key:"arrowDownButtonRef",ref:o,icon:"i-lucide-chevron-down",disabled:a.value,size:"sm",class:"ltr:rounded-l-none rtl:rounded-r-none !outline-0",color:"slate","trailing-icon":"",onClick:d},null,8,["disabled"])):x("",!0)],2),I(i)?ie((m(),f("div",C0e,[b(ju,{class:"mb-0"},{default:j(()=>[h.value?x("",!0):(m(),P(fc,{key:0},{default:j(()=>[b(he,{label:I(s)("CONVERSATION.RESOLVE_DROPDOWN.SNOOZE_UNTIL"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-alarm-clock-minus",class:"w-full",onClick:k[0]||(k[0]=()=>y())},null,8,["label"])]),_:1})),h.value?x("",!0):(m(),P(fc,{key:1},{default:j(()=>[b(he,{label:I(s)("CONVERSATION.RESOLVE_DROPDOWN.MARK_PENDING"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-circle-dot-dashed",class:"w-full",onClick:k[1]||(k[1]=()=>A(I($t).STATUS_TYPE.PENDING))},null,8,["label"])]),_:1}))]),_:1})])),[[L,r]]):x("",!0)])}}},O0e=Re(N0e,[["__scopeId","data-v-f0b69171"]]),x0e={components:{EmailTranscriptModal:S0e,ResolveAction:O0e,ButtonV4:he},data(){return{showEmailActionsModal:!1}},computed:{...gt({currentChat:"getSelectedChat"})},mounted(){yt.on(fb,this.mute),yt.on(gb,this.unmute),yt.on(_b,this.toggleEmailActionsModal)},unmounted(){yt.off(fb,this.mute),yt.off(gb,this.unmute),yt.off(_b,this.toggleEmailActionsModal)},methods:{mute(){this.$store.dispatch("muteConversation",this.currentChat.id),Te(this.$t("CONTACT_PANEL.MUTED_SUCCESS"))},unmute(){this.$store.dispatch("unmuteConversation",this.currentChat.id),Te(this.$t("CONTACT_PANEL.UNMUTED_SUCCESS"))},toggleEmailActionsModal(){this.showEmailActionsModal=!this.showEmailActionsModal}}},w0e={class:"relative flex items-center gap-2 actions--container"};function R0e(e,t,n,s,o,a){const i=F("ButtonV4"),l=F("ResolveAction"),r=F("EmailTranscriptModal"),d=ct("tooltip");return m(),f("div",w0e,[e.currentChat.muted?ie((m(),P(i,{key:1,size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-volume-1",onClick:a.unmute},null,8,["onClick"])),[[d,e.$t("CONTACT_PANEL.UNMUTE_CONTACT"),void 0,{left:!0}]]):ie((m(),P(i,{key:0,size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-volume-off",onClick:a.mute},null,8,["onClick"])),[[d,e.$t("CONTACT_PANEL.MUTE_CONTACT")]]),ie(b(i,{size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-share",onClick:a.toggleEmailActionsModal},null,8,["onClick"]),[[d,e.$t("CONTACT_PANEL.SEND_TRANSCRIPT")]]),b(l,{"conversation-id":e.currentChat.id,status:e.currentChat.status},null,8,["conversation-id","status"]),o.showEmailActionsModal?(m(),P(r,{key:2,show:o.showEmailActionsModal,"current-chat":e.currentChat,onCancel:a.toggleEmailActionsModal},null,8,["show","current-chat","onCancel"])):x("",!0)])}const $0e=Re(x0e,[["render",R0e],["__scopeId","data-v-7ce0f056"]]);class M0e extends Xo{constructor(){super("integrations/linear",{accountScoped:!0})}getTeams(){return axios.get(`${this.url}/teams`)}getTeamEntities(t){return axios.get(`${this.url}/team_entities?team_id=${t}`)}createIssue(t){return axios.post(`${this.url}/create_issue`,t)}link_issue(t,n,s){return axios.post(`${this.url}/link_issue`,{issue_id:n,conversation_id:t,title:s})}getLinkedIssue(t){return axios.get(`${this.url}/linked_issues?conversation_id=${t}`)}unlinkIssue(t){return axios.post(`${this.url}/unlink_issue`,{link_id:t})}searchIssues(t){return axios.get(`${this.url}/search_issue?q=${t}`)}}const vi=new M0e,k0e={class:"flex items-center justify-end w-full gap-2 mt-2"},L0e={__name:"LinkIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U([]),i=U(!1),l=U({id:null,name:""}),r=U(!1),d=U(!1),u=U(""),p=()=>{a.value=[],i.value=!i.value},h=w(()=>l.value.id?l.value.name:o("INTEGRATION_SETTINGS.LINEAR.LINK.SELECT")),g=w(()=>!l.value.id||d.value),_=y=>{l.value=y,p()},T=()=>{s("close")},S=async y=>{if(a.value=[],!!y){u.value=y;try{r.value=!0;const A=await vi.searchIssues(y);a.value=A.data.map(C=>({id:C.id,name:`${C.identifier} ${C.title}`,icon:"status",iconColor:C.state.color}))}catch(A){const C=zl(A,o("INTEGRATION_SETTINGS.LINEAR.LINK.ERROR"));Te(C)}finally{r.value=!1}}},E=async()=>{const{id:y}=l.value;try{d.value=!0,await vi.link_issue(n.conversationId,y,n.title),Te(o("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_SUCCESS")),u.value="",a.value=[],T(),jt(eg.LINK_ISSUE)}catch(A){const C=zl(A,o("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_ERROR"));Te(C)}finally{d.value=!1}};return(y,A)=>{const C=ct("on-clickaway");return m(),f("div",{class:re(["flex flex-col justify-between",i.value?"h-[256px]":"gap-2"])},[b(Vc,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":h.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:p},Vo({_:2},[i.value?{name:"dropdown",fn:j(()=>[a.value?ie((m(),P(yc,{key:0,"show-clear-filter":!1,"list-items":a.value,"active-filter-id":l.value.id,"is-loading":r.value,"input-placeholder":y.$t("INTEGRATION_SETTINGS.LINEAR.LINK.SEARCH"),"loading-placeholder":y.$t("INTEGRATION_SETTINGS.LINEAR.LINK.LOADING"),"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onOnSearch:S,onSelect:_},null,8,["list-items","active-filter-id","is-loading","input-placeholder","loading-placeholder"])),[[C,p]]):x("",!0)]),key:"0"}:void 0]),1032,["button-text"]),c("div",k0e,[b(he,{faded:"",slate:"",type:"reset",label:y.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Ke(T,["prevent"])},null,8,["label"]),b(he,{type:"submit",label:y.$t("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE"),disabled:g.value,"is-loading":d.value,onClick:Ke(E,["prevent"])},null,8,["label","disabled","is-loading"])])],2)}}},D0e={title:{required:it},teamId:{required:it}},P0e={key:0,class:"mt-1 message"},B0e=Object.assign({name:"SearchableDropdown"},{__name:"SearchableDropdown",props:{type:{type:String,required:!0},label:{type:String,default:null},items:{type:Array,required:!0},value:{type:[Number,String],default:null},placeholder:{type:String,default:null},error:{type:String,default:null}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,o=U(!1),a=()=>{o.value=!o.value},i=p=>{s("change",p,n.type),a()},l=w(()=>!!n.error),r=w(()=>n.value?n.items.find(p=>p.id===n.value):null),d=w(()=>{var p;return((p=r.value)==null?void 0:p.name)||n.placeholder}),u=w(()=>{var p;return((p=r.value)==null?void 0:p.id)||null});return(p,h)=>{const g=ct("on-clickaway");return m(),f("div",{class:re(["flex w-full",e.type==="stateId"&&o.value?"h-[150px]":"gap-2"])},[c("label",{class:re(["w-full",{error:l.value}])},[be(v(e.label)+" ",1),b(Vc,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":d.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:a},Vo({_:2},[o.value?{name:"dropdown",fn:j(()=>[ie(b(yc,{"show-clear-filter":!1,"list-items":e.items,"active-filter-id":u.value,"input-placeholder":e.placeholder,"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onSelect:i},null,8,["list-items","active-filter-id","input-placeholder"]),[[g,a]])]),key:"0"}:void 0]),1032,["button-text"]),l.value?(m(),f("span",P0e,v(e.error),1)):x("",!0)],2)],2)}}}),F0e=["placeholder"],U0e={class:"flex flex-col gap-4"},G0e={class:"flex items-center justify-end w-full gap-2 mt-8"},V0e={__name:"CreateIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U([]),i=U([]),l=U([]),r=U([]),d=U([]),u=[{id:0,name:"No priority"},{id:1,name:"Urgent"},{id:2,name:"High"},{id:3,name:"Normal"},{id:4,name:"Low"}],p=["Backlog","Todo","In Progress","Done","Canceled"],h=U(!1),g={borderRadius:"0.75rem",fontSize:"0.875rem"},_=ks({title:"",description:"",teamId:"",assigneeId:"",labelId:"",stateId:"",priority:"",projectId:""}),T=Lt(D0e,_),S=w(()=>T.value.title.$invalid||h.value),E=w(()=>T.value.title.$error?o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.REQUIRED_ERROR"):""),y=w(()=>T.value.teamId.$error?o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.REQUIRED_ERROR"):""),A=w(()=>[{type:"teamId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.LABEL",items:a.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.SEARCH",error:y.value},{type:"assigneeId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.LABEL",items:i.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.SEARCH",error:""},{type:"labelId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.LABEL",items:r.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.SEARCH",error:""},{type:"priority",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.LABEL",items:u,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.SEARCH",error:""},{type:"projectId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.LABEL",items:l.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.SEARCH",error:""},{type:"stateId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.LABEL",items:d.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.SEARCH",error:""}]),C=()=>s("close"),O=async()=>{try{const L=await vi.getTeams();a.value=L.data}catch(L){const D=zl(L,o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ERROR"));Te(D)}},N=async()=>{try{const L=await vi.getTeamEntities(_.teamId);i.value=L.data.users,r.value=L.data.labels,l.value=L.data.projects,d.value=p.map(D=>L.data.states.find($=>$.name===D)).filter(Boolean)}catch(L){const D=zl(L,o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ENTITIES_ERROR"));Te(D)}},R=(L,D)=>{_[D]=L.id,D==="teamId"&&(_.assigneeId="",_.stateId="",_.labelId="",_.projectId="",N())},k=async()=>{if(T.value.$touch(),T.value.$invalid)return;const L={team_id:_.teamId,title:_.title,description:_.description||void 0,assignee_id:_.assigneeId||void 0,project_id:_.projectId||void 0,state_id:_.stateId||void 0,priority:_.priority||void 0,label_ids:_.labelId?[_.labelId]:void 0};try{h.value=!0;const D=await vi.createIssue(L),{id:$}=D.data;await vi.link_issue(n.conversationId,$,n.title),Te(o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_SUCCESS")),jt(eg.CREATE_ISSUE),C()}catch(D){const $=zl(D,o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_ERROR"));Te($)}finally{h.value=!1}};return ut(O),(L,D)=>{const $=F("woot-input");return m(),f("div",null,[b($,{modelValue:_.title,"onUpdate:modelValue":D[0]||(D[0]=M=>_.title=M),class:re([{error:I(T).title.$error},"w-full"]),styles:{...g,padding:"0.375rem 0.75rem"},label:L.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.LABEL"),placeholder:L.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.PLACEHOLDER"),error:E.value,onInput:I(T).title.$touch},null,8,["modelValue","class","styles","label","placeholder","error","onInput"]),c("label",null,[be(v(L.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.LABEL"))+" ",1),ie(c("textarea",{"onUpdate:modelValue":D[1]||(D[1]=M=>_.description=M),style:At({...g,padding:"0.5rem 0.75rem"}),rows:"3",class:"text-sm",placeholder:L.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.PLACEHOLDER")},null,12,F0e),[[at,_.description]])]),c("div",U0e,[(m(!0),f(pe,null,ye(A.value,M=>(m(),P(B0e,{key:M.type,type:M.type,value:_[M.type],label:L.$t(M.label),items:M.items,placeholder:L.$t(M.placeholder),error:M.error,onChange:R},null,8,["type","value","label","items","placeholder","error"]))),128))]),c("div",G0e,[b(he,{faded:"",slate:"",type:"reset",label:L.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Ke(C,["prevent"])},null,8,["label"]),b(he,{type:"submit",label:L.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE"),disabled:S.value,"is-loading":h.value,onClick:Ke(k,["prevent"])},null,8,["label","disabled","is-loading"])])])}}},H0e={class:"flex flex-col h-auto overflow-auto"},K0e={class:"flex flex-col h-auto overflow-auto"},z0e={class:"flex flex-col px-8 pb-4"},W0e={key:0,class:"flex flex-col px-8 pb-4"},j0e={key:1,class:"flex flex-col px-8 pb-4"},Y0e={__name:"CreateOrLinkIssue",props:{accountId:{type:[Number,String],required:!0},conversation:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(0),i=w(()=>{const{meta:{sender:{name:u=null}={}}={}}=n.conversation;return o("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_TITLE",{conversationId:n.conversation.id,name:u})}),l=U([{key:0,name:o("INTEGRATION_SETTINGS.LINEAR.CREATE")},{key:1,name:o("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE")}]),r=()=>{s("close")},d=u=>{a.value=u};return(u,p)=>{const h=F("woot-modal-header"),g=F("woot-tabs-item"),_=F("woot-tabs");return m(),f("div",H0e,[b(h,{"header-title":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.TITLE"),"header-content":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.DESCRIPTION")},null,8,["header-title","header-content"]),c("div",K0e,[c("div",z0e,[b(_,{class:"ltr:[&>ul]:pl-0 rtl:[&>ul]:pr-0",index:a.value,onChange:d},{default:j(()=>[(m(!0),f(pe,null,ye(l.value,(T,S)=>(m(),P(g,{key:T.key,index:S,name:T.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index"])]),a.value===0?(m(),f("div",W0e,[b(V0e,{"account-id":e.accountId,"conversation-id":e.conversation.id,title:i.value,onClose:r},null,8,["account-id","conversation-id","title"])])):(m(),f("div",j0e,[b(L0e,{"conversation-id":e.conversation.id,title:i.value,onClose:r},null,8,["conversation-id","title"])]))])])}}},X0e={class:"flex flex-row justify-between"},q0e={class:"flex items-center justify-center gap-1 h-[24px] px-2 py-1 border rounded-lg border-ash-200"},Z0e={class:"text-xs font-medium text-ash-900"},Q0e={class:"flex items-center gap-1"},J0e={__name:"IssueHeader",props:{identifier:{type:String,required:!0},issueUrl:{type:String,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,o=to("isUnlinking"),a=()=>{s("unlinkIssue")},i=()=>{window.open(n.issueUrl,"_blank")};return(l,r)=>{const d=F("fluent-icon");return m(),f("div",X0e,[c("div",q0e,[b(d,{icon:"linear",size:"19",class:"text-[#5E6AD2]","view-box":"0 0 19 19"}),c("span",Z0e,v(e.identifier),1)]),c("div",Q0e,[b(he,{ghost:"",xs:"",slate:"",icon:"i-lucide-unlink",class:"!transition-none","is-loading":I(o),onClick:a},null,8,["is-loading"]),b(he,{ghost:"",xs:"",slate:"",class:"!transition-none",icon:"i-lucide-arrow-up-right",onClick:i})])])}}},e1e={class:"absolute flex flex-col items-start bg-white dark:bg-slate-800 z-50 px-4 py-3 border border-solid border-ash-200 w-[384px] rounded-xl gap-4 max-h-96 overflow-auto"},t1e={class:"flex flex-col w-full"},n1e={class:"mt-2 text-sm font-medium text-ash-900"},s1e={key:0,class:"mt-1 text-sm text-ash-800 line-clamp-3"},a1e={class:"flex flex-row items-center h-6 gap-2"},o1e={key:1,class:"w-px h-3 bg-ash-200"},i1e={class:"flex items-center gap-1 py-1"},l1e={class:"text-xs text-ash-900"},r1e={key:2,class:"w-px h-3 bg-ash-200"},c1e={key:3,class:"flex items-center gap-1 py-1"},d1e={class:"text-xs text-ash-900"},u1e={key:0,class:"flex flex-wrap items-center gap-1"},m1e={class:"flex items-center"},p1e={class:"text-xs text-ash-800"},h1e={__name:"Issue",props:{issue:{type:Object,required:!0},linkId:{type:String,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,o={1:"Urgent",2:"High",3:"Medium",4:"Low"},a=w(()=>{const{createdAt:u}=n.issue;return Ln(new Date(u),"hh:mm a, MMM dd")}),i=w(()=>{const u=n.issue.assignee;if(!u)return null;const{name:p,avatarUrl:h}=u;return{name:p,thumbnail:h}}),l=w(()=>{var u;return((u=n.issue.labels)==null?void 0:u.nodes)||[]}),r=w(()=>o[n.issue.priority]),d=()=>{s("unlinkIssue",n.linkId)};return(u,p)=>{const h=F("fluent-icon"),g=F("woot-label");return m(),f("div",e1e,[c("div",t1e,[b(J0e,{identifier:e.issue.identifier,"link-id":e.linkId,"issue-url":e.issue.url,onUnlinkIssue:d},null,8,["identifier","link-id","issue-url"]),c("span",n1e,v(e.issue.title),1),e.issue.description?(m(),f("span",s1e,v(e.issue.description),1)):x("",!0)]),c("div",a1e,[i.value?(m(),P(Mu,{key:0,user:i.value,class:"py-1"},null,8,["user"])):x("",!0),i.value?(m(),f("div",o1e)):x("",!0),c("div",i1e,[b(h,{icon:"status",size:"14",style:At({color:e.issue.state.color})},null,8,["style"]),c("h6",l1e,v(e.issue.state.name),1)]),r.value?(m(),f("div",r1e)):x("",!0),r.value?(m(),f("div",c1e,[b(h,{icon:`priority-${r.value.toLowerCase()}`,size:"14","view-box":"0 0 12 12"},null,8,["icon"]),c("h6",d1e,v(r.value),1)])):x("",!0)]),l.value.length?(m(),f("div",u1e,[(m(!0),f(pe,null,ye(l.value,_=>(m(),P(g,{key:_.id,title:_.name,description:_.description,color:_.color,variant:"smooth",small:""},null,8,["title","description","color"]))),128))])):x("",!0),c("div",m1e,[c("span",p1e,v(u.$t("INTEGRATION_SETTINGS.LINEAR.ISSUE.CREATED_AT",{createdAt:a.value})),1)])])}}},f1e={key:0,class:"text-xs font-medium text-n-slate-11"},g1e=Object.assign({name:"Linear"},{__name:"index",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,n=vn(),{t:s}=He(),o=U(null),a=U(!1),i=U(!1),l=U(!1);qn("isUnlinking",l);const r=n.getCurrentAccountId,d=w(()=>n.getConversationById.value(t.conversationId)),u=w(()=>o.value===null?s("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK_BUTTON"):null),p=async()=>{o.value=null;try{const E=(await vi.getLinkedIssue(t.conversationId)).data;o.value=E&&E.length?E[0]:null}catch{}},h=async S=>{try{l.value=!0,await vi.unlinkIssue(S),jt(eg.UNLINK_ISSUE),o.value=null,Te(s("INTEGRATION_SETTINGS.LINEAR.UNLINK.SUCCESS"))}catch(E){const y=zl(E,s("INTEGRATION_SETTINGS.LINEAR.UNLINK.ERROR"));Te(y)}finally{l.value=!1}},g=()=>{o.value||(i.value=!0),a.value=!0},_=()=>{i.value=!1,p()},T=()=>{a.value=!1};return lt(()=>t.conversationId,()=>{p()}),ut(()=>{p()}),(S,E)=>{const y=F("fluent-icon"),A=F("woot-modal"),C=ct("on-clickaway"),O=ct("tooltip");return m(),f("div",{class:re(["relative",{group:o.value}])},[ie((m(),P(he,{sm:"",ghost:"",slate:"",class:"!gap-1",onClick:g},{default:j(()=>[b(y,{icon:"linear",size:"19",class:"text-[#5E6AD2] flex-shrink-0","view-box":"0 0 19 19"}),o.value?(m(),f("span",f1e,v(o.value.issue.identifier),1)):x("",!0)]),_:1})),[[C,T],[O,u.value]]),o.value?(m(),P(h1e,{key:0,issue:o.value.issue,"link-id":o.value.id,class:"absolute right-0 top-[40px] invisible group-hover:visible",onUnlinkIssue:h},null,8,["issue","link-id"])):x("",!0),b(A,{show:i.value,"onUpdate:show":E[0]||(E[0]=N=>i.value=N),"on-close":_,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:j(()=>[b(Y0e,{conversation:d.value,"account-id":I(r),onClose:_},null,8,["conversation","account-id"])]),_:1},8,["show"])],2)}}}),_1e={components:{BackButton:ir,InboxName:b_,MoreActions:$0e,Thumbnail:Qn,SLACardLabel:OS,Linear:g1e,NextButton:he},mixins:[Ro],props:{chat:{type:Object,default:()=>{}},isContactPanelOpen:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},isInboxView:{type:Boolean,default:!1}},emits:["contactPanelToggle"],setup(e,{emit:t}){Vs({"Alt+KeyO":{action:()=>t("contactPanelToggle")}})},computed:{...gt({currentChat:"getSelectedChat",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",appIntegrations:"integrations/getAppIntegrations"}),chatMetadata(){return this.chat.meta},backButtonUrl(){const{params:{accountId:e,inbox_id:t,label:n,teamId:s},name:o}=this.$route;return UE({accountId:e,inboxId:t,label:n,teamId:s,conversationType:o==="conversation_mentions"?"mention":""})},isHMACVerified(){return this.isAWebWidgetInbox?this.chatMetadata.hmac_verified:!0},currentContact(){return this.$store.getters["contacts/getContact"](this.chat.meta.sender.id)},isSnoozed(){return this.currentChat.status===$t.STATUS_TYPE.SNOOZED},snoozedDisplayText(){const{snoozed_until:e}=this.currentChat;return e?`${this.$t("CONVERSATION.HEADER.SNOOZED_UNTIL")} ${I_e(e)}`:this.$t("CONVERSATION.HEADER.SNOOZED_UNTIL_NEXT_REPLY")},contactPanelToggleText(){return`${this.isContactPanelOpen?this.$t("CONVERSATION.HEADER.CLOSE"):this.$t("CONVERSATION.HEADER.OPEN")} ${this.$t("CONVERSATION.HEADER.DETAILS")}`},inbox(){const{inbox_id:e}=this.chat;return this.$store.getters["inboxes/getInbox"](e)},hasMultipleInboxes(){return this.$store.getters["inboxes/getInboxes"].length>1},hasSlaPolicyId(){var e;return(e=this.chat)==null?void 0:e.sla_policy_id},isLinearIntegrationEnabled(){return this.appIntegrations.find(e=>e.id==="linear"&&!!e.hooks.length)},isLinearFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,xt.LINEAR)}}},v1e={class:"flex flex-col items-center justify-between px-4 py-2 border-b bg-n-background border-n-weak md:flex-row"},b1e={class:"flex items-center justify-start max-w-full min-w-0 w-fit"},E1e={class:"flex flex-col items-start min-w-0 ml-2 overflow-hidden rtl:ml-0 rtl:mr-2 w-fit"},T1e={class:"flex flex-row items-center max-w-full gap-1 p-0 m-0 w-fit"},y1e={class:"text-base font-medium truncate leading-tight text-n-slate-12"},A1e={class:"flex items-center gap-2 overflow-hidden text-xs conversation--header--actions text-ellipsis whitespace-nowrap"},S1e={key:1,class:"font-medium text-n-amber-10"};function I1e(e,t,n,s,o,a){const i=F("BackButton"),l=F("Thumbnail"),r=F("NextButton"),d=F("fluent-icon"),u=F("InboxName"),p=F("SLACardLabel"),h=F("Linear"),g=F("MoreActions"),_=ct("tooltip");return m(),f("div",v1e,[c("div",{class:re(["flex flex-col items-center justify-center flex-1 w-full min-w-0",n.isInboxView?"sm:flex-row":"md:flex-row"])},[c("div",b1e,[n.showBackButton?(m(),P(i,{key:0,"back-url":a.backButtonUrl,class:"ltr:mr-2 rtl:ml-2"},null,8,["back-url"])):x("",!0),b(l,{src:a.currentContact.thumbnail,badge:e.inboxBadge,username:a.currentContact.name,status:a.currentContact.availability_status},null,8,["src","badge","username","status"]),c("div",E1e,[c("div",T1e,[b(r,{link:"",slate:"",onClick:t[0]||(t[0]=Ke(T=>e.$emit("contactPanelToggle"),["prevent"]))},{default:j(()=>[c("span",y1e,v(a.currentContact.name),1)]),_:1}),a.isHMACVerified?x("",!0):ie((m(),P(d,{key:0,size:"14",class:"text-n-amber-10 my-0 mx-0 min-w-[14px]",icon:"warning"},null,512)),[[_,e.$t("CONVERSATION.UNVERIFIED_SESSION")]])]),c("div",A1e,[a.hasMultipleInboxes?(m(),P(u,{key:0,inbox:a.inbox},null,8,["inbox"])):x("",!0),a.isSnoozed?(m(),f("span",S1e,v(a.snoozedDisplayText),1)):x("",!0),b(r,{link:"",xs:"",blue:"",label:a.contactPanelToggleText,onClick:t[1]||(t[1]=T=>e.$emit("contactPanelToggle"))},null,8,["label"])])])]),c("div",{class:re(["flex flex-row items-center justify-end flex-grow gap-2 mt-3 header-actions-wrap lg:mt-0",{"justify-end":n.isContactPanelOpen}])},[a.hasSlaPolicyId?(m(),P(p,{key:0,chat:n.chat,"show-extended-info":""},null,8,["chat"])):x("",!0),a.isLinearIntegrationEnabled&&a.isLinearFeatureEnabled?(m(),P(h,{key:1,"conversation-id":e.currentChat.id},null,8,["conversation-id"])):x("",!0),b(g,{"conversation-id":e.currentChat.id},null,8,["conversation-id"])],2)],2)])}const C1e=Re(_1e,[["render",I1e],["__scopeId","data-v-88991220"]]),N1e={components:{LoadingState:$c},props:{config:{type:Array,default:()=>[]},currentChat:{type:Object,default:()=>({})},isVisible:{type:Boolean,default:!1},position:{type:Number,required:!0}},data(){return{hasOpenedAtleastOnce:!1,iframeLoading:!0}},computed:{dashboardAppContext(){return{conversation:this.currentChat,contact:this.$store.getters["contacts/getContact"](this.contactId),currentAgent:this.currentAgent}},contactId(){var e,t,n;return(n=(t=(e=this.currentChat)==null?void 0:e.meta)==null?void 0:t.sender)==null?void 0:n.id},currentAgent(){const{id:e,name:t,email:n}=this.$store.getters.getCurrentUser;return{id:e,name:t,email:n}}},watch:{isVisible(){this.isVisible&&(this.hasOpenedAtleastOnce=!0)}},mounted(){window.addEventListener("message",this.triggerEvent)},unmounted(){window.removeEventListener("message",this.triggerEvent)},methods:{triggerEvent(e){this.isVisible&&e.data==="chatwoot-dashboard-app:fetch-info"&&this.onIframeLoad(0)},getFrameId(e){return`dashboard-app--frame-${this.position}-${e}`},onIframeLoad(e){const t=document.getElementById(this.getFrameId(e)),n={event:"appContext",data:this.dashboardAppContext};t.contentWindow.postMessage(JSON.stringify(n),"*"),this.iframeLoading=!1}}},O1e={key:0,class:"dashboard-app--container"},x1e=["id","src","onLoad"];function w1e(e,t,n,s,o,a){const i=F("LoadingState");return o.hasOpenedAtleastOnce?(m(),f("div",O1e,[(m(!0),f(pe,null,ye(n.config,(l,r)=>(m(),f("div",{key:r,class:"dashboard-app--list"},[o.iframeLoading?(m(),P(i,{key:0,message:e.$t("DASHBOARD_APPS.LOADING_MESSAGE"),class:"dashboard-app_loading-container"},null,8,["message"])):x("",!0),l.type==="frame"&&l.url?(m(),f("iframe",{key:1,id:a.getFrameId(r),src:l.url,onLoad:()=>a.onIframeLoad(r)},null,40,x1e)):x("",!0)]))),128))])):x("",!0)}const R1e=Re(N1e,[["render",w1e],["__scopeId","data-v-e20fef4a"]]),$1e={class:"h-full w-full bg-white dark:bg-slate-900 border border-slate-100 dark:border-white/10 rounded-lg p-4 flex flex-col"},M1e={class:"flex-1 flex items-center justify-center"},k1e=["src","alt"],L1e={class:"mt-auto"},D1e={class:"text-base text-slate-800 dark:text-slate-100 font-interDisplay font-semibold tracking-[0.3px]"},P1e={class:"text-slate-600 dark:text-slate-400 text-sm"},Id={__name:"OnboardingFeatureCard",props:{imageSrc:{type:String,default:""},imageAlt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},to:{type:String,default:""},linkText:{type:String,default:""}},setup(e){return(t,n)=>{const s=F("router-link");return m(),f("div",$1e,[c("div",M1e,[c("img",{src:e.imageSrc,alt:e.imageAlt,class:"h-36 w-auto mx-auto"},null,8,k1e)]),c("div",L1e,[c("p",D1e,v(e.title),1),c("p",P1e,v(e.description),1),e.to?(m(),P(s,{key:0,to:{name:e.to},class:"no-underline text-woot-500 text-sm font-medium"},{default:j(()=>[c("span",null,v(e.linkText),1),n[0]||(n[0]=c("span",{class:"ml-2"},v(""),-1))]),_:1},8,["to"])):x("",!0)])])}}},B1e={class:"min-h-screen lg:max-w-5xl max-w-4xl mx-auto grid grid-cols-2 grid-rows-[auto_1fr_1fr] auto-rows-min gap-4 p-8 w-full font-inter overflow-auto"},F1e={class:"col-span-full self-start"},U1e={class:"text-xl font-semibold text-slate-900 dark:text-white font-interDisplay tracking-[0.3px]"},G1e={class:"text-slate-600 dark:text-slate-400 max-w-2xl text-base"},V1e={__name:"OnboardingView",setup(e){const t=vn(),{t:n}=He(),s=w(()=>t["globalConfig/get"].value),o=w(()=>t.getCurrentUser.value),a=w(()=>{const i=new Date().getHours();let l;return i<12?l="ONBOARDING.GREETING_MORNING":i<18?l="ONBOARDING.GREETING_AFTERNOON":l="ONBOARDING.GREETING_EVENING",n(l,{name:o.value.name,installationName:s.value.installationName})});return(i,l)=>(m(),f("div",B1e,[c("div",F1e,[c("p",U1e,v(a.value),1),c("p",G1e,v(i.$t("ONBOARDING.DESCRIPTION",{installationName:s.value.installationName})),1)]),b(Id,{"image-src":"/dashboard/images/onboarding/omnichannel-inbox.png","image-alt":"Omnichannel",to:"settings_inbox_new",title:i.$t("ONBOARDING.ALL_CONVERSATION.TITLE"),description:i.$t("ONBOARDING.ALL_CONVERSATION.DESCRIPTION"),"link-text":i.$t("ONBOARDING.ALL_CONVERSATION.NEW_LINK")},null,8,["title","description","link-text"]),b(Id,{"image-src":"/dashboard/images/onboarding/teams.png","image-alt":"Teams",to:"settings_teams_new",title:i.$t("ONBOARDING.TEAM_MEMBERS.TITLE"),description:i.$t("ONBOARDING.TEAM_MEMBERS.DESCRIPTION"),"link-text":i.$t("ONBOARDING.TEAM_MEMBERS.NEW_LINK")},null,8,["title","description","link-text"]),b(Id,{"image-src":"/dashboard/images/onboarding/canned-responses.png","image-alt":"Canned responses",to:"canned_list",title:i.$t("ONBOARDING.CANNED_RESPONSES.TITLE"),description:i.$t("ONBOARDING.CANNED_RESPONSES.DESCRIPTION"),"link-text":i.$t("ONBOARDING.CANNED_RESPONSES.NEW_LINK")},null,8,["title","description","link-text"]),b(Id,{"image-src":"/dashboard/images/onboarding/labels.png","image-alt":"Labels",to:"labels_list",title:i.$t("ONBOARDING.LABELS.TITLE"),description:i.$t("ONBOARDING.LABELS.DESCRIPTION"),"link-text":i.$t("ONBOARDING.LABELS.NEW_LINK")},null,8,["title","description","link-text"])]))}},H1e={props:{customClass:{type:String,default:""}}};function K1e(e,t,n,s,o,a){return m(),f("kbd",{class:re(["hotkey p-0.5 min-w-[1rem] uppercase",n.customClass])},[et(e.$slots,"default")],2)}const Hl=Re(H1e,[["render",K1e]]),z1e={components:{Hotkey:Hl},data(){return{keyShortcuts:[{key:"K",description:this.$t("CONVERSATION.EMPTY_STATE.CMD_BAR")},{key:"/",description:this.$t("CONVERSATION.EMPTY_STATE.KEYBOARD_SHORTCUTS")}]}}},W1e={class:"flex flex-col gap-2 mt-9"},j1e={class:"flex items-center gap-2"},Y1e={class:"text-sm font-medium text-center text-n-slate-12"};function X1e(e,t,n,s,o,a){const i=F("Hotkey");return m(),f("div",W1e,[(m(!0),f(pe,null,ye(o.keyShortcuts,l=>(m(),f("div",{key:l.key,class:"flex items-center gap-2"},[c("div",j1e,[b(i,{"custom-class":"w-8 h-6 text-lg font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:j(()=>t[0]||(t[0]=[be("  ")])),_:1}),b(i,{"custom-class":"w-8 h-6 text-xs font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:j(()=>[be(v(l.key),1)]),_:2},1024)]),c("span",Y1e,v(l.description),1)]))),128))])}const q1e=Re(z1e,[["render",X1e]]),Z1e="/vite/assets/no-chat-dark-BSWrQBd3.svg",Q1e="/vite/assets/no-chat-okxWD-4P.svg",J1e={components:{FeaturePlaceholder:q1e},props:{message:{type:String,required:!0}}},ebe={class:"flex flex-col items-center justify-center h-full"},tbe={class:"text-sm text-slate-800 dark:text-slate-200 font-medium text-center"};function nbe(e,t,n,s,o,a){const i=F("FeaturePlaceholder");return m(),f("div",ebe,[t[1]||(t[1]=c("img",{class:"m-4 w-32 hidden dark:block",src:Z1e,alt:"No Chat dark"},null,-1)),t[2]||(t[2]=c("img",{class:"m-4 w-32 block dark:hidden",src:Q1e,alt:"No Chat"},null,-1)),c("span",tbe,[be(v(n.message)+" ",1),t[0]||(t[0]=c("br",null,null,-1))]),b(i)])}const sbe=Re(J1e,[["render",nbe]]),abe={components:{OnboardingView:V1e,EmptyStateMessage:sbe},props:{isOnExpandedLayout:{type:Boolean,default:!1}},setup(){const{isAdmin:e}=xo(),{accountScopedUrl:t}=Ls();return{isAdmin:e,accountScopedUrl:t}},computed:{...gt({currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",uiFlags:"inboxes/getUIFlags",loadingChatList:"getChatListLoadingStatus"}),loadingIndicatorMessage(){return this.uiFlags.isFetching?this.$t("CONVERSATION.LOADING_INBOXES"):this.$t("CONVERSATION.LOADING_CONVERSATIONS")},conversationMissingMessage(){return this.isOnExpandedLayout?this.$t("CONVERSATION.404"):this.$t("CONVERSATION.SELECT_A_CONVERSATION")},newInboxURL(){return this.accountScopedUrl("settings/inboxes/new")},emptyClassName(){return!this.inboxesList.length&&!this.uiFlags.isFetching&&!this.loadingChatList&&this.isAdmin?"h-full overflow-auto w-full":"flex-1 min-w-0 px-0 flex flex-col items-center justify-center h-full"}}},obe={key:1,class:"clearfix mx-auto"},ibe={key:2,class:"flex flex-col items-center justify-center h-full"};function lbe(e,t,n,s,o,a){const i=F("woot-loading-state"),l=F("OnboardingView"),r=F("EmptyStateMessage");return m(),f("div",{class:re(a.emptyClassName)},[e.uiFlags.isFetching||e.loadingChatList?(m(),P(i,{key:0,message:a.loadingIndicatorMessage},null,8,["message"])):x("",!0),!e.inboxesList.length&&!e.uiFlags.isFetching&&!e.loadingChatList?(m(),f("div",obe,[s.isAdmin?(m(),P(l,{key:0})):(m(),P(r,{key:1,message:e.$t("CONVERSATION.NO_INBOX_AGENT")},null,8,["message"]))])):!e.uiFlags.isFetching&&!e.loadingChatList?(m(),f("div",ibe,[e.allConversations.length?e.allConversations.length&&!e.currentChat.id?(m(),P(r,{key:1,message:a.conversationMissingMessage},null,8,["message"])):x("",!0):(m(),P(r,{key:0,message:e.$t("CONVERSATION.NO_MESSAGE_1")},null,8,["message"]))])):x("",!0)],2)}const rbe=Re(abe,[["render",lbe]]);class cbe extends Xo{constructor(){super("integrations",{accountScoped:!0}),this.conversation_events=["summarize","reply_suggestion","label_suggestion"],this.message_events=["rephrase"]}processEvent({type:t="rephrase",content:n,tone:s,conversationId:o,hookId:a}){let i={tone:s,content:n};return this.conversation_events.includes(t)&&(i={conversation_display_id:o}),axios.post(`${this.url}/hooks/${a}/process_event`,{event:{name:t,data:i}})}}const yb=new cbe,dbe=e=>e.toLowerCase().split(",").filter(t=>t.trim()).map(t=>t.trim()).filter((t,n,s)=>s.indexOf(t)===n);function Kc(){const e=Ot(),t=vn(),{t:n}=He(),s=w(()=>t["integrations/getUIFlags"].value),o=Ve("integrations/getAppIntegrations"),a=Ve("getSelectedChat"),i=Ve("draftMessages/getReplyEditorMode"),l=w(()=>{var A;return(A=o.value.find(C=>C.id==="openai"&&!!C.hooks.length))==null?void 0:A.hooks[0]}),r=w(()=>!!l.value),d=w(()=>{if(l.value){const{settings:A={}}=l.value||{};return A.label_suggestion}return!1}),u=w(()=>s.value.isFetching),p=w(()=>{var A;return(A=l.value)==null?void 0:A.id}),h=w(()=>{var A;return(A=a.value)==null?void 0:A.id}),g=w(()=>`draft-${h.value}-${i.value}`),_=w(()=>t["draftMessages/get"].value(g.value)),T=async()=>{o.value.length||await e.dispatch("integrations/get")},S=async(A,C)=>{const O=iu[A.toUpperCase()];O&&jt(O,{type:A,...C})},E=async()=>{if(!h.value)return[];try{const A=await yb.processEvent({type:"label_suggestion",hookId:p.value,conversationId:h.value}),{data:{message:C}}=A;return dbe(C)}catch{return[]}},y=async(A="rephrase")=>{var C;try{const O=await yb.processEvent({hookId:p.value,type:A,content:_.value,conversationId:h.value}),{data:{message:N}}=O;return N}catch(O){const N=O.response.data.error,R=((C=N==null?void 0:N.error)==null?void 0:C.message)||n("INTEGRATION_SETTINGS.OPEN_AI.GENERATE_ERROR");return Te(R),""}};return ut(()=>{T()}),{draftMessage:_,uiFlags:s,appIntegrations:o,currentChat:a,replyMode:i,isAIIntegrationEnabled:r,isLabelSuggestionFeatureEnabled:d,isFetchingAppIntegrations:u,fetchIntegrationsIfRequired:T,recordAnalytics:S,fetchLabelSuggestions:E,processEvent:y}}const Ab=[],ube={mounted(){const e=this.getKeyboardEvents();if(e){const t=this.wrapEventsInKeybindingsHandler(e),n=mN(t);this.addEventHandler(n)}},unmounted(){var e;if(this.$el&&((e=this.$el.dataset)!=null&&e.keydownHandlerIndex)){const t=Ab[this.$el.dataset.keydownHandlerIndex];document.removeEventListener("keydown",t)}},methods:{addEventHandler(e){const t=Ab.push(e)-1,n=this.getElementToBind();n&&n.dataset&&(document.addEventListener("keydown",e),n.dataset.keydownHandlerIndex=t)},getElementToBind(){return this.$el},getKeyboardEvents(){return null},wrapEventsInKeybindingsHandler(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this.keydownWrapper(e[n])}),t},keydownWrapper(e){return t=>{const n=typeof e=="function"?e:e.action,s=typeof e=="function"?!1:e.allowOnFocusedInput;dN(t)&&(uN(t)&&t.target.blur(),!s)||n(t)}}}},mbe={class:"reply-editor bg-n-slate-9/10 rounded-md py-1 pl-2 pr-1 text-xs tracking-wide mt-2 flex items-center gap-1.5 -mx-2"},pbe={class:"flex-grow gap-1 mt-px text-xs truncate"},hbe={__name:"ReplyToMessage",props:{message:{type:Object,required:!0}},emits:["dismiss"],setup(e,{emit:t}){const n=t;return(s,o)=>{const a=F("fluent-icon"),i=ct("tooltip");return m(),f("div",mbe,[b(a,{class:"flex-shrink-0 icon",icon:"arrow-reply",size:"14"}),c("div",pbe,[be(v(s.$t("CONVERSATION.REPLYBOX.REPLYING_TO"))+" ",1),b(v_,{message:e.message,"show-message-type":!1,"default-empty-message":s.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND"),class:"inline"},null,8,["message","default-empty-message"])]),ie(b(he,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o[0]||(o[0]=Ke(l=>n("dismiss"),["stop"]))},null,512),[[i,s.$t("CONVERSATION.REPLYBOX.DISMISS_REPLY")]])])}}},fbe={class:"flex overflow-auto max-h-[12.5rem]"},gbe={class:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},_be=["src"],vbe={key:1,class:"relative w-6 h-6 text-lg text-left -top-px"},bbe={class:"max-w-3/5 min-w-[50%] overflow-hidden text-ellipsis"},Ebe={class:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},Tbe={class:"w-[30%] justify-center"},ybe={class:"overflow-hidden text-xs text-ellipsis whitespace-nowrap"},Abe={class:"flex items-center justify-center"},Sbe={__name:"AttachmentsPreview",props:{attachments:{type:Array,default:()=>[]}},emits:["removeAttachment"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>n.attachments.filter(u=>!(u!=null&&u.isRecordedAudio))),a=w(()=>n.attachments.filter(u=>u.isRecordedAudio)),i=u=>{s("removeAttachment",o.value.filter((p,h)=>h!==u).concat(a.value))},l=u=>{const p=u.byte_size||u.size;return tN(p,0)},r=u=>(u.content_type||u.type).includes("image"),d=u=>u.filename||u.name;return(u,p)=>(m(),f("div",fbe,[(m(!0),f(pe,null,ye(o.value,(h,g)=>(m(),f("div",{key:h.id,class:"preview-item flex items-center p-1 bg-slate-50 dark:bg-slate-800 gap-1 rounded-md w-[15rem] mb-1"},[c("div",gbe,[r(h.resource)?(m(),f("img",{key:0,class:"object-cover w-6 h-6 rounded-sm",src:h.thumb},null,8,_be)):(m(),f("span",vbe,"  "))]),c("div",bbe,[c("span",Ebe,v(d(h.resource)),1)]),c("div",Tbe,[c("span",ybe,v(l(h.resource)),1)]),c("div",Abe,[b(he,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:_=>i(g)},null,8,["onClick"])])]))),128))]))}},Ibe={__name:"EditorModeToggle",props:{mode:{type:String,default:xs.REPLY}},emits:["toggleMode"],setup(e){const t=e,n=Us("wootEditorReplyMode"),s=Us("wootEditorPrivateMode"),o=fu(n),a=fu(s),i=w(()=>t.mode===xs.NOTE),l=w(()=>`${(i.value?a.width.value:o.width.value)+16}px`),r=w(()=>`${i.value?o.width.value+16:0}px`);return(d,u)=>(m(),f("button",{class:"flex items-center w-auto h-8 p-1 transition-all border rounded-full bg-n-alpha-2 group relative duration-300 ease-in-out z-0",onClick:u[0]||(u[0]=p=>d.$emit("toggleMode"))},[c("div",{ref_key:"wootEditorReplyMode",ref:n,class:"flex items-center gap-1 px-2 z-20"},v(d.$t("CONVERSATION.REPLYBOX.REPLY")),513),c("div",{ref_key:"wootEditorPrivateMode",ref:s,class:"flex items-center gap-1 px-2 z-20"},v(d.$t("CONVERSATION.REPLYBOX.PRIVATE_NOTE")),513),c("div",{class:"absolute shadow-sm rounded-full h-6 w-[var(--chip-width)] transition-all duration-300 ease-in-out translate-x-[var(--translate-x)] rtl:translate-x-[var(--rtl-translate-x)] bg-n-solid-1",style:At({"--chip-width":l.value,"--translate-x":r.value,"--rtl-translate-x":"calc(-1 * var(--translate-x))"})},null,4)]))}},Cbe={name:"ReplyTopPanel",components:{NextButton:he,EditorModeToggle:Ibe},props:{mode:{type:String,default:xs.REPLY},isMessageLengthReachingThreshold:{type:Boolean,default:()=>!1},charactersRemaining:{type:Number,default:()=>0}},emits:["setReplyMode","togglePopout"],setup(e,{emit:t}){const n=l=>{t("setReplyMode",l)},s=()=>{n(xs.REPLY)},o=()=>{n(xs.NOTE)},a=()=>{const l=e.mode===xs.REPLY?xs.NOTE:xs.REPLY;n(l)};return Vs({"Alt+KeyP":{action:()=>o(),allowOnFocusedInput:!0},"Alt+KeyL":{action:()=>s(),allowOnFocusedInput:!0}}),{handleModeToggle:a,handleReplyClick:s,handleNoteClick:o,REPLY_EDITOR_MODES:xs}},computed:{replyButtonClass(){return{"is-active":this.mode===xs.REPLY}},noteButtonClass(){return{"is-active":this.mode===xs.NOTE}},charLengthClass(){return this.charactersRemaining<0?"text-red-600":"text-slate-600"},characterLengthWarning(){return this.charactersRemaining<0?`${-this.charactersRemaining} ${sv.NEGATIVE}`:`${this.charactersRemaining} ${sv.UNDER_50}`}}},Nbe={class:"flex justify-between h-[3.25rem] gap-2 ltr:pl-3 rtl:pr-3"},Obe={class:"flex items-center mx-4 my-0"},xbe={key:0,class:"text-xs"};function wbe(e,t,n,s,o,a){const i=F("EditorModeToggle"),l=F("NextButton");return m(),f("div",Nbe,[b(i,{mode:n.mode,class:"mt-3",onToggleMode:s.handleModeToggle},null,8,["mode","onToggleMode"]),c("div",Obe,[n.isMessageLengthReachingThreshold?(m(),f("div",xbe,[c("span",{class:re(a.charLengthClass)},v(a.characterLengthWarning),3)])):x("",!0)]),b(l,{ghost:"",class:"ltr:rounded-bl-md rtl:rounded-br-md ltr:rounded-br-none rtl:rounded-bl-none ltr:rounded-tl-none rtl:rounded-tr-none text-n-slate-11 ltr:rounded-tr-[11px] rtl:rounded-tl-[11px]",icon:"i-lucide-maximize-2",onClick:t[0]||(t[0]=r=>e.$emit("togglePopout"))})])}const Rbe=Re(Cbe,[["render",wbe]]),Th=e=>e.length?e.replace(/\s+/g,"").split(",").every(n=>xi.$validator(n)):!0,$be={components:{ButtonV4:he},props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},emits:["update:bccEmails","update:ccEmails","update:toEmails"],setup(){return{v$:Lt()}},data(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails(e){e!==this.bccEmailsVal&&(this.bccEmailsVal=e)},ccEmails(e){e!==this.ccEmailsVal&&(this.ccEmailsVal=e)},toEmails(e){e!==this.toEmailsVal&&(this.toEmailsVal=e)}},mounted(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails(e){return Th(e)}},bccEmailsVal:{hasValidEmails(e){return Th(e)}},toEmailsVal:{hasValidEmails(e){return Th(e)}}},methods:{handleAddBcc(){this.showBcc=!0},onBlur(){this.v$.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},Mbe={key:0},kbe={class:"input-group-label"},Lbe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},Dbe={class:"input-group-wrap"},Pbe={class:"input-group-label"},Bbe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},Fbe={key:0,class:"message"},Ube={key:1,class:"input-group-wrap"},Gbe={class:"input-group-label"},Vbe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},Hbe={key:0,class:"message"};function Kbe(e,t,n,s,o,a){const i=F("woot-input"),l=F("ButtonV4");return m(),f("div",null,[n.toEmails?(m(),f("div",Mbe,[c("div",{class:re(["input-group small",{error:s.v$.toEmailsVal.$error}])},[c("label",kbe,v(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO")),1),c("div",Lbe,[b(i,{modelValue:s.v$.toEmailsVal.$model,"onUpdate:modelValue":t[0]||(t[0]=r=>s.v$.toEmailsVal.$model=r),type:"text",class:re(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.toEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:a.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2)])):x("",!0),c("div",Dbe,[c("div",{class:re(["input-group small",{error:s.v$.ccEmailsVal.$error}])},[c("label",Pbe,v(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL")),1),c("div",Bbe,[b(i,{modelValue:s.v$.ccEmailsVal.$model,"onUpdate:modelValue":t[1]||(t[1]=r=>s.v$.ccEmailsVal.$model=r),class:re(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.ccEmailsVal.$error}]),type:"text",placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:a.onBlur},null,8,["modelValue","class","placeholder","onBlur"])]),o.showBcc?x("",!0):(m(),P(l,{key:0,label:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"),ghost:"",xs:"",primary:"",onClick:a.handleAddBcc},null,8,["label","onClick"]))],2),s.v$.ccEmailsVal.$error?(m(),f("span",Fbe,v(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR")),1)):x("",!0)]),o.showBcc?(m(),f("div",Ube,[c("div",{class:re(["input-group small",{error:s.v$.bccEmailsVal.$error}])},[c("label",Gbe,v(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL")),1),c("div",Vbe,[b(i,{modelValue:s.v$.bccEmailsVal.$model,"onUpdate:modelValue":t[2]||(t[2]=r=>s.v$.bccEmailsVal.$model=r),type:"text",class:re(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.bccEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER"),onBlur:a.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2),s.v$.bccEmailsVal.$error?(m(),f("span",Hbe,v(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR")),1)):x("",!0)])):x("",!0)])}const zbe=Re($be,[["render",Kbe],["__scopeId","data-v-aa13b592"]]);class Wbe extends Xo{constructor(){super("integrations/dyte",{accountScoped:!0})}createAMeeting(t){return axios.post(`${this.url}/create_a_meeting`,{conversation_id:t})}addParticipantToMeeting(t){return axios.post(`${this.url}/add_participant_to_meeting`,{message_id:t})}}const y_=new Wbe,jbe={components:{NextButton:he},props:{conversationId:{type:Number,default:0}},data(){return{isLoading:!1}},computed:{...gt({appIntegrations:"integrations/getAppIntegrations"}),isVideoIntegrationEnabled(){return this.appIntegrations.find(e=>e.id==="dyte"&&!!e.hooks.length)}},mounted(){this.appIntegrations.length||this.$store.dispatch("integrations/get")},methods:{async onClick(){this.isLoading=!0;try{await y_.createAMeeting(this.conversationId)}catch{Te(this.$t("INTEGRATION_SETTINGS.DYTE.CREATE_ERROR"))}finally{this.isLoading=!1}}}};function Ybe(e,t,n,s,o,a){const i=F("NextButton"),l=ct("tooltip");return a.isVideoIntegrationEnabled?ie((m(),P(i,{key:0,icon:"i-ph-video-camera",slate:"",faded:"",sm:"",onClick:a.onClick},null,8,["onClick"])),[[l,e.$t("INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT"),void 0,{"top-end":!0}]]):x("",!0)}const Xbe=Re(jbe,[["render",Ybe]]),qbe={components:{NextButton:he},emits:["close"],setup(){const{updateUISettings:e}=Mn(),{recordAnalytics:t}=Kc(),n=Lt();return{updateUISettings:e,v$:n,recordAnalytics:t}},data(){return{value:""}},validations:{value:{required:it}},methods:{onClose(){this.$emit("close")},onDismiss(){Te(this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DISMISS_MESSAGE")),this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.onClose()},async finishOpenAI(){var t,n;const e={app_id:"openai",settings:{api_key:this.value}};try{await this.$store.dispatch("integrations/createHook",e),this.alertMessage=this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.SUCCESS_MESSAGE"),this.recordAnalytics(iu.ADDED_AI_INTEGRATION_VIA_CTA_BUTTON),this.onClose()}catch(s){const o=(n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message;this.alertMessage=o||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{Te(this.alertMessage)}},openOpenAIDoc(){window.open("https://www.chatwoot.com/blog/v2-17","_blank")}}},Zbe={class:"flex-1 min-w-0 px-0"},Qbe={class:"w-full mt-2"},Jbe={class:"flex flex-row justify-between w-full gap-2 px-0 py-2"},eEe={class:"flex items-center gap-1"};function tEe(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("woot-input"),r=F("NextButton");return m(),f("div",Zbe,[b(i,{"header-title":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.TITLE"),"header-content":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col flex-wrap modal-content",onSubmit:t[1]||(t[1]=Ke((...d)=>a.finishOpenAI&&a.finishOpenAI(...d),["prevent"]))},[c("div",Qbe,[b(l,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=d=>o.value=d),type:"text",class:re({error:s.v$.value.$error}),placeholder:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.KEY_PLACEHOLDER"),onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"])]),c("div",Jbe,[b(r,{ghost:"",type:"button",class:"!px-3",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.NEED_HELP"),onClick:Ke(a.openOpenAIDoc,["prevent"])},null,8,["label","onClick"]),c("div",eEe,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.DISMISS"),onClick:Ke(a.onDismiss,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",disabled:s.v$.value.$invalid,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.FINISH")},null,8,["disabled","label"])])])],32)])}const nEe=Re(qbe,[["render",tEe]]),sEe={},aEe={class:"animation-container margin-top-1"},oEe={class:"ai-typing--wrap"};function iEe(e,t){const n=F("fluent-icon");return m(),f("div",aEe,[c("div",oEe,[b(n,{icon:"wand",size:"14",class:"ai-typing--icon"}),c("label",null,v(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.AI_WRITING")),1)]),t[0]||(t[0]=c("span",{class:"loader"},null,-1)),t[1]||(t[1]=c("span",{class:"loader"},null,-1)),t[2]||(t[2]=c("span",{class:"loader"},null,-1))])}const lEe=Re(sEe,[["render",iEe],["__scopeId","data-v-ddf88734"]]),rEe={components:{AILoader:lEe,NextButton:he},props:{aiOption:{type:String,required:!0}},emits:["close","applyText"],setup(){const{formatMessage:e}=oo(),{draftMessage:t,processEvent:n,recordAnalytics:s}=Kc();return{draftMessage:t,processEvent:n,recordAnalytics:s,formatMessage:e}},data(){return{generatedContent:"",isGenerating:!0}},computed:{headerTitle(){var t;const e=(t=this.aiOption)==null?void 0:t.toUpperCase();return e?this.$t("INTEGRATION_SETTINGS.OPEN_AI.WITH_AI",{option:this.$t(`INTEGRATION_SETTINGS.OPEN_AI.OPTIONS.${e}`)}):""}},mounted(){this.generateAIContent(this.aiOption)},methods:{onClose(){this.$emit("close")},async generateAIContent(e="rephrase"){this.isGenerating=!0,this.generatedContent=await this.processEvent(e),this.isGenerating=!1},applyText(){this.recordAnalytics(this.aiOption),this.$emit("applyText",this.generatedContent),this.onClose()}}},cEe={class:"flex flex-col"},dEe={key:0,class:"w-full"},uEe={class:"mt-1 text-base text-slate-700 dark:text-slate-100"},mEe={class:"mt-1 text-base text-slate-700 dark:text-slate-100"},pEe={key:1},hEe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function fEe(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("AILoader"),r=F("NextButton"),d=ct("dompurify-html");return m(),f("div",cEe,[b(i,{"header-title":a.headerTitle},null,8,["header-title"]),c("form",{class:"flex flex-col w-full modal-content",onSubmit:t[0]||(t[0]=Ke((...u)=>a.applyText&&a.applyText(...u),["prevent"]))},[s.draftMessage?(m(),f("div",dEe,[c("h4",uEe,v(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.DRAFT_TITLE")),1),ie(c("p",null,null,512),[[d,s.formatMessage(s.draftMessage,!1)]]),c("h4",mEe,v(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.GENERATED_TITLE")),1)])):x("",!0),c("div",null,[o.isGenerating?(m(),P(l,{key:0})):ie((m(),f("p",pEe,null,512)),[[d,s.formatMessage(o.generatedContent,!1)]])]),c("div",hEe,[b(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.CANCEL"),onClick:Ke(a.onClose,["prevent"])},null,8,["label","onClick"]),b(r,{type:"submit",disabled:!o.generatedContent,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.APPLY")},null,8,["disabled","label"])])],32)])}const gEe=Re(rEe,[["render",fEe],["__scopeId","data-v-93fde312"]]),_Ee={class:"relative"},vEe={__name:"AIAssistanceCTAButton",emits:["open"],setup(e,{emit:t}){const n=t,s=()=>{n("open")};return(o,a)=>(m(),f("div",_Ee,[b(he,{class:"cta-btn cta-btn-light dark:cta-btn-dark hover:cta-btn-light-hover dark:hover:cta-btn-dark-hover",label:o.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),icon:"i-ph-magic-wand",sm:"",onClick:s},null,8,["label"]),a[0]||(a[0]=c("div",{class:"radar-ping-animation absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-woot-500 dark:bg-woot-500"},null,-1)),a[1]||(a[1]=c("div",{class:"absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-woot-500 dark:bg-woot-500 opacity-50"},null,-1))]))}},bEe=Re(vEe,[["__scopeId","data-v-0c97b5f8"]]),EEe={components:{NextButton:he,AIAssistanceModal:gEe,AICTAModal:nEe,AIAssistanceCTAButton:bEe},emits:["replaceText"],setup(e,{emit:t}){const{uiSettings:n,updateUISettings:s}=Mn(),{isAIIntegrationEnabled:o,draftMessage:a,recordAnalytics:i}=Kc(),{isAdmin:l}=xo(),r=U(""),d=p=>{r.value=p};return Vs({"$mod+KeyZ":{action:()=>{r.value&&(t("replaceText",r.value),r.value="")},allowOnFocusedInput:!0}}),{uiSettings:n,updateUISettings:s,isAdmin:l,initialMessage:r,initializeMessage:d,recordAnalytics:i,isAIIntegrationEnabled:o,draftMessage:a}},data:()=>({showAIAssistanceModal:!1,showAICtaModal:!1,aiOption:""}),computed:{...gt({isAChatwootInstance:"globalConfig/isAChatwootInstance"}),isAICTAModalDismissed(){return this.uiSettings.is_open_ai_cta_modal_dismissed},shouldShowAIAssistCTAButtonForAdmin(){return this.isAdmin&&!this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed&&this.isAChatwootInstance},shouldShowAIAssistCTAButton(){return this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed}},mounted(){yt.on(R_e,this.onAIAssist),this.initializeMessage(this.draftMessage)},methods:{hideAIAssistanceModal(){this.recordAnalytics("DISMISS_AI_SUGGESTION",{aiOption:this.aiOption}),this.showAIAssistanceModal=!1},openAIAssist(){this.isAICTAModalDismissed||this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.initializeMessage(this.draftMessage),document.querySelector("ninja-keys").open({parent:"ai_assist"})},hideAICtaModal(){this.showAICtaModal=!1},openAICta(){this.showAICtaModal=!0},onAIAssist(e){this.aiOption=e,this.showAIAssistanceModal=!0},insertText(e){this.$emit("replaceText",e)}}},TEe={key:0,class:"relative"},yEe={key:1,class:"relative"};function AEe(e,t,n,s,o,a){const i=F("AIAssistanceCTAButton"),l=F("NextButton"),r=F("AIAssistanceModal"),d=F("woot-modal"),u=F("AICTAModal"),p=ct("tooltip");return m(),f("div",null,[s.isAIIntegrationEnabled?(m(),f("div",TEe,[a.shouldShowAIAssistCTAButton?(m(),P(i,{key:0,onOpen:a.openAIAssist},null,8,["onOpen"])):ie((m(),P(l,{key:1,icon:"i-ph-magic-wand",slate:"",faded:"",sm:"",onClick:a.openAIAssist},null,8,["onClick"])),[[p,e.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),void 0,{"top-end":!0}]]),b(d,{show:e.showAIAssistanceModal,"onUpdate:show":t[0]||(t[0]=h=>e.showAIAssistanceModal=h),"on-close":a.hideAIAssistanceModal},{default:j(()=>[b(r,{"ai-option":e.aiOption,onApplyText:a.insertText,onClose:a.hideAIAssistanceModal},null,8,["ai-option","onApplyText","onClose"])]),_:1},8,["show","on-close"])])):a.shouldShowAIAssistCTAButtonForAdmin?(m(),f("div",yEe,[b(i,{onClick:a.openAICta},null,8,["onClick"]),b(d,{show:e.showAICtaModal,"onUpdate:show":t[1]||(t[1]=h=>e.showAICtaModal=h),"on-close":a.hideAICtaModal},{default:j(()=>[b(u,{onClose:a.hideAICtaModal},null,8,["onClose"])]),_:1},8,["show","on-close"])])):x("",!0)])}const SEe=Re(EEe,[["render",AEe]]),IEe={name:"ReplyBottomPanel",components:{NextButton:he,FileUpload:au,VideoCallButton:Xbe,AIAssistanceButton:SEe},mixins:[Ro],props:{mode:{type:String,default:xs.REPLY},onSend:{type:Function,default:()=>{}},sendButtonText:{type:String,default:""},recordingAudioDurationText:{type:String,default:"00:00"},inbox:{type:Object,default:()=>({})},showFileUpload:{type:Boolean,default:!1},showAudioRecorder:{type:Boolean,default:!1},onFileUpload:{type:Function,default:()=>{}},toggleEmojiPicker:{type:Function,default:()=>{}},toggleAudioRecorder:{type:Function,default:()=>{}},toggleAudioRecorderPlayPause:{type:Function,default:()=>{}},isRecordingAudio:{type:Boolean,default:!1},recordingAudioState:{type:String,default:""},isSendDisabled:{type:Boolean,default:!1},showEditorToggle:{type:Boolean,default:!1},isOnPrivateNote:{type:Boolean,default:!1},enableMultipleFileUpload:{type:Boolean,default:!0},hasWhatsappTemplates:{type:Boolean,default:!1},conversationId:{type:Number,required:!0},message:{type:String,default:""},newConversationModalActive:{type:Boolean,default:!1},portalSlug:{type:String,required:!0},conversationType:{type:String,default:""}},emits:["replaceText","toggleInsertArticle","toggleEditor","selectWhatsappTemplate","openScheduleModal"],setup(){const{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t}=Mn(),{isStacklab:n}=Ra(),s=U(!1);return Vs({"$mod+Alt+KeyA":{action:()=>{document.querySelector("#conversationAttachment").click()},allowOnFocusedInput:!0}}),{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t,uploadRef:s,isStacklab:n}},computed:{...gt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"integrations/getUIFlags"}),isNote(){return this.mode===xs.NOTE},wrapClass(){return{"is-note-mode":this.isNote}},showAttachButton(){return this.showFileUpload||this.isNote},showAudioRecorderButton(){return this.isALineChannel?!1:this.isFeatureEnabledonAccount(this.accountId,xt.VOICE_RECORDER)&&this.showAudioRecorder},showAudioPlayStopButton(){return this.showAudioRecorder&&this.isRecordingAudio},isInstagramDM(){return this.conversationType==="instagram_direct_message"},allowedFileTypes(){return this.isATwilioWhatsAppChannel?bC:this.isALineChannel?EC:this.isAInstagramChannel||this.isInstagramDM?TC:eu},enableDragAndDrop(){return!this.newConversationModalActive},audioRecorderPlayStopIcon(){switch(this.recordingAudioState){case"playing":return"i-ph-pause";case"paused":return"i-ph-play";case"stopped":return"i-ph-play";default:return"i-ph-stop"}},showMessageSignatureButton(){return!this.isOnPrivateNote},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},signatureToggleTooltip(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},enableInsertArticleInReply(){return this.portalSlug},isFetchingAppIntegrations(){return this.uiFlags.isFetching}},mounted(){Hf.start()},methods:{toggleMessageSignature(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature)},replaceText(e){this.$emit("replaceText",e)},toggleInsertArticle(){this.$emit("toggleInsertArticle")}}},CEe={class:"left-wrap"},NEe={class:"fixed top-0 bottom-0 left-0 right-0 z-20 flex flex-col items-center justify-center w-full h-full gap-2 text-slate-900 dark:text-slate-50 bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},OEe={class:"text-2xl break-words text-slate-900 dark:text-slate-50"},xEe={class:"right-wrap"};function wEe(e,t,n,s,o,a){const i=F("NextButton"),l=F("FileUpload"),r=F("VideoCallButton"),d=F("AIAssistanceButton"),u=F("fluent-icon"),p=ct("tooltip");return m(),f("div",{class:re(["flex justify-between p-3",a.wrapClass])},[c("div",CEe,[ie(b(i,{icon:"i-ph-smiley-sticker",slate:"",faded:"",sm:"",onClick:n.toggleEmojiPicker},null,8,["onClick"]),[[p,e.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),void 0,{"top-end":!0}]]),ie((m(),P(l,{ref:"uploadRef","input-id":"conversationAttachment",size:4096*4096,accept:a.allowedFileTypes,multiple:n.enableMultipleFileUpload,drop:a.enableDragAndDrop,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},onInputFile:n.onFileUpload},{default:j(()=>[a.showAttachButton?ie((m(),P(i,{key:0,icon:"i-ph-paperclip",slate:"",faded:"",sm:""},null,512)),[[p,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]):x("",!0)]),_:1},8,["accept","multiple","drop","onInputFile"])),[[p,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]),a.showAudioRecorderButton?ie((m(),P(i,{key:0,icon:n.isRecordingAudio?"i-ph-microphone-slash":"i-ph-microphone",slate:"",faded:"",sm:"",onClick:n.toggleAudioRecorder},null,8,["icon","onClick"])),[[p,e.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON"),void 0,{"top-end":!0}]]):x("",!0),n.showEditorToggle?ie((m(),P(i,{key:1,icon:"i-ph-quotes",slate:"",faded:"",sm:"",onClick:t[0]||(t[0]=h=>e.$emit("toggleEditor"))},null,512)),[[p,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):x("",!0),a.showAudioPlayStopButton?ie((m(),P(i,{key:2,icon:a.audioRecorderPlayStopIcon,slate:"",faded:"",sm:"",label:n.recordingAudioDurationText,onClick:n.toggleAudioRecorderPlayPause},null,8,["icon","label","onClick"])),[[p,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):x("",!0),a.showMessageSignatureButton?ie((m(),P(i,{key:3,icon:"i-ph-signature",slate:"",faded:"",sm:"",onClick:a.toggleMessageSignature},null,8,["onClick"])),[[p,a.signatureToggleTooltip,void 0,{"top-end":!0}]]):x("",!0),s.isStacklab===!0?ie((m(),P(i,{key:4,icon:"i-ph-calendar",slate:"",faded:"",sm:"",onClick:t[1]||(t[1]=h=>e.$emit("open-schedule-modal"))},null,512)),[[p,e.$t("SCHEDULE_MESSAGES.TITLE"),void 0,{"top-end":!0}]]):x("",!0),n.hasWhatsappTemplates?ie((m(),P(i,{key:5,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:t[2]||(t[2]=h=>e.$emit("selectWhatsappTemplate"))},null,512)),[[p,e.$t("CONVERSATION.FOOTER.WHATSAPP_TEMPLATES"),void 0,{"top-end":!0}]]):x("",!0),(e.isAWebWidgetInbox||e.isAPIInbox)&&!n.isOnPrivateNote?(m(),P(r,{key:6,"conversation-id":n.conversationId},null,8,["conversation-id"])):x("",!0),a.isFetchingAppIntegrations?x("",!0):(m(),P(d,{key:7,"conversation-id":n.conversationId,"is-private-note":n.isOnPrivateNote,message:n.message,onReplaceText:a.replaceText},null,8,["conversation-id","is-private-note","message","onReplaceText"])),b(Ms,{name:"modal-fade"},{default:j(()=>[ie(c("div",NEe,[b(u,{icon:"cloud-backup",size:"40"}),c("h4",OEe,v(e.$t("CONVERSATION.REPLYBOX.DRAG_DROP")),1)],512),[[ln,s.uploadRef&&s.uploadRef.dropActive]])]),_:1}),a.enableInsertArticleInReply?ie((m(),P(i,{key:8,icon:"i-ph-article-ny-times",slate:"",faded:"",sm:"",onClick:a.toggleInsertArticle},null,8,["onClick"])),[[p,e.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH"),void 0,{"top-end":!0}]]):x("",!0)]),c("div",xEe,[b(i,{label:n.sendButtonText,type:"submit",sm:"",color:a.isNote?"amber":"blue",disabled:n.isSendDisabled,class:"flex-shrink-0",onClick:n.onSend},null,8,["label","color","disabled","onClick"])])],2)}const REe=Re(IEe,[["render",wEe],["__scopeId","data-v-46117456"]]),$Ee={af:"Afrikaans",af_NA:"Afrikaans (Namibia)",af_ZA:"Afrikaans (South Africa)",ak:"Akan",ak_GH:"Akan (Ghana)",sq:"Albanian",sq_AL:"Albanian (Albania)",sq_XK:"Albanian (Kosovo)",sq_MK:"Albanian (Macedonia)",am:"Amharic",am_ET:"Amharic (Ethiopia)",ar:"Arabic",ar_DZ:"Arabic (Algeria)",ar_BH:"Arabic (Bahrain)",ar_TD:"Arabic (Chad)",ar_KM:"Arabic (Comoros)",ar_DJ:"Arabic (Djibouti)",ar_EG:"Arabic (Egypt)",ar_ER:"Arabic (Eritrea)",ar_IQ:"Arabic (Iraq)",ar_IL:"Arabic (Israel)",ar_JO:"Arabic (Jordan)",ar_KW:"Arabic (Kuwait)",ar_LB:"Arabic (Lebanon)",ar_LY:"Arabic (Libya)",ar_MR:"Arabic (Mauritania)",ar_MA:"Arabic (Morocco)",ar_OM:"Arabic (Oman)",ar_PS:"Arabic (Palestinian Territories)",ar_QA:"Arabic (Qatar)",ar_SA:"Arabic (Saudi Arabia)",ar_SO:"Arabic (Somalia)",ar_SS:"Arabic (South Sudan)",ar_SD:"Arabic (Sudan)",ar_SY:"Arabic (Syria)",ar_TN:"Arabic (Tunisia)",ar_AE:"Arabic (United Arab Emirates)",ar_EH:"Arabic (Western Sahara)",ar_YE:"Arabic (Yemen)",hy:"Armenian",hy_AM:"Armenian (Armenia)",as:"Assamese",as_IN:"Assamese (India)",az:"Azerbaijani",az_AZ:"Azerbaijani (Azerbaijan)",az_Cyrl_AZ:"Azerbaijani (Cyrillic, Azerbaijan)",az_Cyrl:"Azerbaijani (Cyrillic)",az_Latn_AZ:"Azerbaijani (Latin, Azerbaijan)",az_Latn:"Azerbaijani (Latin)",bm:"Bambara",bm_Latn_ML:"Bambara (Latin, Mali)",bm_Latn:"Bambara (Latin)",eu:"Basque",eu_ES:"Basque (Spain)",be:"Belarusian",be_BY:"Belarusian (Belarus)",bn:"Bengali",bn_BD:"Bengali (Bangladesh)",bn_IN:"Bengali (India)",bs:"Bosnian",bs_BA:"Bosnian (Bosnia & Herzegovina)",bs_Cyrl_BA:"Bosnian (Cyrillic, Bosnia & Herzegovina)",bs_Cyrl:"Bosnian (Cyrillic)",bs_Latn_BA:"Bosnian (Latin, Bosnia & Herzegovina)",bs_Latn:"Bosnian (Latin)",br:"Breton",br_FR:"Breton (France)",bg:"Bulgarian",bg_BG:"Bulgarian (Bulgaria)",my:"Burmese",my_MM:"Burmese (Myanmar (Burma))",ca:"Catalan",ca_AD:"Catalan (Andorra)",ca_FR:"Catalan (France)",ca_IT:"Catalan (Italy)",ca_ES:"Catalan (Spain)",zh:"Chinese",zh_CN:"Chinese (China)",zh_HK:"Chinese (Hong Kong SAR China)",zh_MO:"Chinese (Macau SAR China)",zh_Hans_CN:"Chinese (Simplified, China)",zh_Hans_HK:"Chinese (Simplified, Hong Kong SAR China)",zh_Hans_MO:"Chinese (Simplified, Macau SAR China)",zh_Hans_SG:"Chinese (Simplified, Singapore)",zh_Hans:"Chinese (Simplified)",zh_SG:"Chinese (Singapore)",zh_TW:"Chinese (Taiwan)",zh_Hant_HK:"Chinese (Traditional, Hong Kong SAR China)",zh_Hant_MO:"Chinese (Traditional, Macau SAR China)",zh_Hant_TW:"Chinese (Traditional, Taiwan)",zh_Hant:"Chinese (Traditional)",kw:"Cornish",kw_GB:"Cornish (United Kingdom)",hr:"Croatian",hr_BA:"Croatian (Bosnia & Herzegovina)",hr_HR:"Croatian (Croatia)",cs:"Czech",cs_CZ:"Czech (Czech Republic)",da:"Danish",da_DK:"Danish (Denmark)",da_GL:"Danish (Greenland)",nl:"Dutch",nl_AW:"Dutch (Aruba)",nl_BE:"Dutch (Belgium)",nl_BQ:"Dutch (Caribbean Netherlands)",nl_CW:"Dutch (Curaao)",nl_NL:"Dutch (Netherlands)",nl_SX:"Dutch (Sint Maarten)",nl_SR:"Dutch (Suriname)",dz:"Dzongkha",dz_BT:"Dzongkha (Bhutan)",en:"English",en_AS:"English (American Samoa)",en_AI:"English (Anguilla)",en_AG:"English (Antigua & Barbuda)",en_AU:"English (Australia)",en_BS:"English (Bahamas)",en_BB:"English (Barbados)",en_BE:"English (Belgium)",en_BZ:"English (Belize)",en_BM:"English (Bermuda)",en_BW:"English (Botswana)",en_IO:"English (British Indian Ocean Territory)",en_VG:"English (British Virgin Islands)",en_CM:"English (Cameroon)",en_CA:"English (Canada)",en_KY:"English (Cayman Islands)",en_CX:"English (Christmas Island)",en_CC:"English (Cocos (Keeling) Islands)",en_CK:"English (Cook Islands)",en_DG:"English (Diego Garcia)",en_DM:"English (Dominica)",en_ER:"English (Eritrea)",en_FK:"English (Falkland Islands)",en_FJ:"English (Fiji)",en_GM:"English (Gambia)",en_GH:"English (Ghana)",en_GI:"English (Gibraltar)",en_GD:"English (Grenada)",en_GU:"English (Guam)",en_GG:"English (Guernsey)",en_GY:"English (Guyana)",en_HK:"English (Hong Kong SAR China)",en_IN:"English (India)",en_IE:"English (Ireland)",en_IM:"English (Isle of Man)",en_JM:"English (Jamaica)",en_JE:"English (Jersey)",en_KE:"English (Kenya)",en_KI:"English (Kiribati)",en_LS:"English (Lesotho)",en_LR:"English (Liberia)",en_MO:"English (Macau SAR China)",en_MG:"English (Madagascar)",en_MW:"English (Malawi)",en_MY:"English (Malaysia)",en_MT:"English (Malta)",en_MH:"English (Marshall Islands)",en_MU:"English (Mauritius)",en_FM:"English (Micronesia)",en_MS:"English (Montserrat)",en_NA:"English (Namibia)",en_NR:"English (Nauru)",en_NZ:"English (New Zealand)",en_NG:"English (Nigeria)",en_NU:"English (Niue)",en_NF:"English (Norfolk Island)",en_MP:"English (Northern Mariana Islands)",en_PK:"English (Pakistan)",en_PW:"English (Palau)",en_PG:"English (Papua New Guinea)",en_PH:"English (Philippines)",en_PN:"English (Pitcairn Islands)",en_PR:"English (Puerto Rico)",en_RW:"English (Rwanda)",en_WS:"English (Samoa)",en_SC:"English (Seychelles)",en_SL:"English (Sierra Leone)",en_SG:"English (Singapore)",en_SX:"English (Sint Maarten)",en_SB:"English (Solomon Islands)",en_ZA:"English (South Africa)",en_SS:"English (South Sudan)",en_SH:"English (St. Helena)",en_KN:"English (St. Kitts & Nevis)",en_LC:"English (St. Lucia)",en_VC:"English (St. Vincent & Grenadines)",en_SD:"English (Sudan)",en_SZ:"English (Swaziland)",en_TZ:"English (Tanzania)",en_TK:"English (Tokelau)",en_TO:"English (Tonga)",en_TT:"English (Trinidad & Tobago)",en_TC:"English (Turks & Caicos Islands)",en_TV:"English (Tuvalu)",en_UM:"English (U.S. Outlying Islands)",en_VI:"English (U.S. Virgin Islands)",en_UG:"English (Uganda)",en_GB:"English (United Kingdom)",en_US:"English (United States)",en_VU:"English (Vanuatu)",en_ZM:"English (Zambia)",en_ZW:"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",et_EE:"Estonian (Estonia)",ee:"Ewe",ee_GH:"Ewe (Ghana)",ee_TG:"Ewe (Togo)",fo:"Faroese",fo_FO:"Faroese (Faroe Islands)",fi:"Finnish",fi_FI:"Finnish (Finland)",fr:"French",fr_DZ:"French (Algeria)",fr_BE:"French (Belgium)",fr_BJ:"French (Benin)",fr_BF:"French (Burkina Faso)",fr_BI:"French (Burundi)",fr_CM:"French (Cameroon)",fr_CA:"French (Canada)",fr_CF:"French (Central African Republic)",fr_TD:"French (Chad)",fr_KM:"French (Comoros)",fr_CG:"French (Congo - Brazzaville)",fr_CD:"French (Congo - Kinshasa)",fr_CI:"French (Cte dIvoire)",fr_DJ:"French (Djibouti)",fr_GQ:"French (Equatorial Guinea)",fr_FR:"French (France)",fr_GF:"French (French Guiana)",fr_PF:"French (French Polynesia)",fr_GA:"French (Gabon)",fr_GP:"French (Guadeloupe)",fr_GN:"French (Guinea)",fr_HT:"French (Haiti)",fr_LU:"French (Luxembourg)",fr_MG:"French (Madagascar)",fr_ML:"French (Mali)",fr_MQ:"French (Martinique)",fr_MR:"French (Mauritania)",fr_MU:"French (Mauritius)",fr_YT:"French (Mayotte)",fr_MC:"French (Monaco)",fr_MA:"French (Morocco)",fr_NC:"French (New Caledonia)",fr_NE:"French (Niger)",fr_RE:"French (Runion)",fr_RW:"French (Rwanda)",fr_SN:"French (Senegal)",fr_SC:"French (Seychelles)",fr_BL:"French (St. Barthlemy)",fr_MF:"French (St. Martin)",fr_PM:"French (St. Pierre & Miquelon)",fr_CH:"French (Switzerland)",fr_SY:"French (Syria)",fr_TG:"French (Togo)",fr_TN:"French (Tunisia)",fr_VU:"French (Vanuatu)",fr_WF:"French (Wallis & Futuna)",ff:"Fulah",ff_CM:"Fulah (Cameroon)",ff_GN:"Fulah (Guinea)",ff_MR:"Fulah (Mauritania)",ff_SN:"Fulah (Senegal)",gl:"Galician",gl_ES:"Galician (Spain)",lg:"Ganda",lg_UG:"Ganda (Uganda)",ka:"Georgian",ka_GE:"Georgian (Georgia)",de:"German",de_AT:"German (Austria)",de_BE:"German (Belgium)",de_DE:"German (Germany)",de_LI:"German (Liechtenstein)",de_LU:"German (Luxembourg)",de_CH:"German (Switzerland)",el:"Greek",el_CY:"Greek (Cyprus)",el_GR:"Greek (Greece)",gu:"Gujarati",gu_IN:"Gujarati (India)",ha:"Hausa",ha_GH:"Hausa (Ghana)",ha_Latn_GH:"Hausa (Latin, Ghana)",ha_Latn_NE:"Hausa (Latin, Niger)",ha_Latn_NG:"Hausa (Latin, Nigeria)",ha_Latn:"Hausa (Latin)",ha_NE:"Hausa (Niger)",ha_NG:"Hausa (Nigeria)",he:"Hebrew",he_IL:"Hebrew (Israel)",hi:"Hindi",hi_IN:"Hindi (India)",hu:"Hungarian",hu_HU:"Hungarian (Hungary)",is:"Icelandic",is_IS:"Icelandic (Iceland)",ig:"Igbo",ig_NG:"Igbo (Nigeria)",id:"Indonesian",id_ID:"Indonesian (Indonesia)",ga:"Irish",ga_IE:"Irish (Ireland)",it:"Italian",it_IT:"Italian (Italy)",it_SM:"Italian (San Marino)",it_CH:"Italian (Switzerland)",ja:"Japanese",ja_JP:"Japanese (Japan)",kl:"Kalaallisut",kl_GL:"Kalaallisut (Greenland)",kn:"Kannada",kn_IN:"Kannada (India)",ks:"Kashmiri",ks_Arab_IN:"Kashmiri (Arabic, India)",ks_Arab:"Kashmiri (Arabic)",ks_IN:"Kashmiri (India)",kk:"Kazakh",kk_Cyrl_KZ:"Kazakh (Cyrillic, Kazakhstan)",kk_Cyrl:"Kazakh (Cyrillic)",kk_KZ:"Kazakh (Kazakhstan)",km:"Khmer",km_KH:"Khmer (Cambodia)",ki:"Kikuyu",ki_KE:"Kikuyu (Kenya)",rw:"Kinyarwanda",rw_RW:"Kinyarwanda (Rwanda)",ko:"Korean",ko_KP:"Korean (North Korea)",ko_KR:"Korean (South Korea)",ky:"Kyrgyz",ky_Cyrl_KG:"Kyrgyz (Cyrillic, Kyrgyzstan)",ky_Cyrl:"Kyrgyz (Cyrillic)",ky_KG:"Kyrgyz (Kyrgyzstan)",lo:"Lao",lo_LA:"Lao (Laos)",lv:"Latvian",lv_LV:"Latvian (Latvia)",ln:"Lingala",ln_AO:"Lingala (Angola)",ln_CF:"Lingala (Central African Republic)",ln_CG:"Lingala (Congo - Brazzaville)",ln_CD:"Lingala (Congo - Kinshasa)",lt:"Lithuanian",lt_LT:"Lithuanian (Lithuania)",lu:"Luba-Katanga",lu_CD:"Luba-Katanga (Congo - Kinshasa)",lb:"Luxembourgish",lb_LU:"Luxembourgish (Luxembourg)",mk:"Macedonian",mk_MK:"Macedonian (Macedonia)",mg:"Malagasy",mg_MG:"Malagasy (Madagascar)",ms:"Malay",ms_BN:"Malay (Brunei)",ms_Latn_BN:"Malay (Latin, Brunei)",ms_Latn_MY:"Malay (Latin, Malaysia)",ms_Latn_SG:"Malay (Latin, Singapore)",ms_Latn:"Malay (Latin)",ms_MY:"Malay (Malaysia)",ms_SG:"Malay (Singapore)",ml:"Malayalam",ml_IN:"Malayalam (India)",mt:"Maltese",mt_MT:"Maltese (Malta)",gv:"Manx",gv_IM:"Manx (Isle of Man)",mr:"Marathi",mr_IN:"Marathi (India)",mn:"Mongolian",mn_Cyrl_MN:"Mongolian (Cyrillic, Mongolia)",mn_Cyrl:"Mongolian (Cyrillic)",mn_MN:"Mongolian (Mongolia)",ne:"Nepali",ne_IN:"Nepali (India)",ne_NP:"Nepali (Nepal)",nd:"North Ndebele",nd_ZW:"North Ndebele (Zimbabwe)",se:"Northern Sami",se_FI:"Northern Sami (Finland)",se_NO:"Northern Sami (Norway)",se_SE:"Northern Sami (Sweden)",no:"Norwegian",no_NO:"Norwegian (Norway)",nb:"Norwegian Bokml",nb_NO:"Norwegian Bokml (Norway)",nb_SJ:"Norwegian Bokml (Svalbard & Jan Mayen)",nn:"Norwegian Nynorsk",nn_NO:"Norwegian Nynorsk (Norway)",or:"Oriya",or_IN:"Oriya (India)",om:"Oromo",om_ET:"Oromo (Ethiopia)",om_KE:"Oromo (Kenya)",os:"Ossetic",os_GE:"Ossetic (Georgia)",os_RU:"Ossetic (Russia)",ps:"Pashto",ps_AF:"Pashto (Afghanistan)",fa:"Persian",fa_AF:"Persian (Afghanistan)",fa_IR:"Persian (Iran)",pl:"Polish",pl_PL:"Polish (Poland)",pt:"Portuguese",pt_AO:"Portuguese (Angola)",pt_BR:"Portuguese (Brazil)",pt_CV:"Portuguese (Cape Verde)",pt_GW:"Portuguese (Guinea-Bissau)",pt_MO:"Portuguese (Macau SAR China)",pt_MZ:"Portuguese (Mozambique)",pt_PT:"Portuguese (Portugal)",pt_ST:"Portuguese (So Tom & Prncipe)",pt_TL:"Portuguese (Timor-Leste)",pa:"Punjabi",pa_Arab_PK:"Punjabi (Arabic, Pakistan)",pa_Arab:"Punjabi (Arabic)",pa_Guru_IN:"Punjabi (Gurmukhi, India)",pa_Guru:"Punjabi (Gurmukhi)",pa_IN:"Punjabi (India)",pa_PK:"Punjabi (Pakistan)",qu:"Quechua",qu_BO:"Quechua (Bolivia)",qu_EC:"Quechua (Ecuador)",qu_PE:"Quechua (Peru)",ro:"Romanian",ro_MD:"Romanian (Moldova)",ro_RO:"Romanian (Romania)",rm:"Romansh",rm_CH:"Romansh (Switzerland)",rn:"Rundi",rn_BI:"Rundi (Burundi)",ru:"Russian",ru_BY:"Russian (Belarus)",ru_KZ:"Russian (Kazakhstan)",ru_KG:"Russian (Kyrgyzstan)",ru_MD:"Russian (Moldova)",ru_RU:"Russian (Russia)",ru_UA:"Russian (Ukraine)",sg:"Sango",sg_CF:"Sango (Central African Republic)",gd:"Scottish Gaelic",gd_GB:"Scottish Gaelic (United Kingdom)",sr:"Serbian",sr_BA:"Serbian (Bosnia & Herzegovina)",sr_Cyrl_BA:"Serbian (Cyrillic, Bosnia & Herzegovina)",sr_Cyrl_XK:"Serbian (Cyrillic, Kosovo)",sr_Cyrl_ME:"Serbian (Cyrillic, Montenegro)",sr_Cyrl_RS:"Serbian (Cyrillic, Serbia)",sr_Cyrl:"Serbian (Cyrillic)",sr_XK:"Serbian (Kosovo)",sr_Latn_BA:"Serbian (Latin, Bosnia & Herzegovina)",sr_Latn_XK:"Serbian (Latin, Kosovo)",sr_Latn_ME:"Serbian (Latin, Montenegro)",sr_Latn_RS:"Serbian (Latin, Serbia)",sr_Latn:"Serbian (Latin)",sr_ME:"Serbian (Montenegro)",sr_RS:"Serbian (Serbia)",sh:"Serbo-Croatian",sh_BA:"Serbo-Croatian (Bosnia & Herzegovina)",sn:"Shona",sn_ZW:"Shona (Zimbabwe)",ii:"Sichuan Yi",ii_CN:"Sichuan Yi (China)",si:"Sinhala",si_LK:"Sinhala (Sri Lanka)",sk:"Slovak",sk_SK:"Slovak (Slovakia)",sl:"Slovenian",sl_SI:"Slovenian (Slovenia)",so:"Somali",so_DJ:"Somali (Djibouti)",so_ET:"Somali (Ethiopia)",so_KE:"Somali (Kenya)",so_SO:"Somali (Somalia)",es:"Spanish",es_AR:"Spanish (Argentina)",es_BO:"Spanish (Bolivia)",es_IC:"Spanish (Canary Islands)",es_EA:"Spanish (Ceuta & Melilla)",es_CL:"Spanish (Chile)",es_CO:"Spanish (Colombia)",es_CR:"Spanish (Costa Rica)",es_CU:"Spanish (Cuba)",es_DO:"Spanish (Dominican Republic)",es_EC:"Spanish (Ecuador)",es_SV:"Spanish (El Salvador)",es_GQ:"Spanish (Equatorial Guinea)",es_GT:"Spanish (Guatemala)",es_HN:"Spanish (Honduras)",es_MX:"Spanish (Mexico)",es_NI:"Spanish (Nicaragua)",es_PA:"Spanish (Panama)",es_PY:"Spanish (Paraguay)",es_PE:"Spanish (Peru)",es_PH:"Spanish (Philippines)",es_PR:"Spanish (Puerto Rico)",es_ES:"Spanish (Spain)",es_US:"Spanish (United States)",es_UY:"Spanish (Uruguay)",es_VE:"Spanish (Venezuela)",sw:"Swahili",sw_KE:"Swahili (Kenya)",sw_TZ:"Swahili (Tanzania)",sw_UG:"Swahili (Uganda)",sv:"Swedish",sv_AX:"Swedish (land Islands)",sv_FI:"Swedish (Finland)",sv_SE:"Swedish (Sweden)",tl:"Tagalog",tl_PH:"Tagalog (Philippines)",ta:"Tamil",ta_IN:"Tamil (India)",ta_MY:"Tamil (Malaysia)",ta_SG:"Tamil (Singapore)",ta_LK:"Tamil (Sri Lanka)",te:"Telugu",te_IN:"Telugu (India)",th:"Thai",th_TH:"Thai (Thailand)",bo:"Tibetan",bo_CN:"Tibetan (China)",bo_IN:"Tibetan (India)",ti:"Tigrinya",ti_ER:"Tigrinya (Eritrea)",ti_ET:"Tigrinya (Ethiopia)",to:"Tongan",to_TO:"Tongan (Tonga)",tr:"Turkish",tr_CY:"Turkish (Cyprus)",tr_TR:"Turkish (Turkey)",uk:"Ukrainian",uk_UA:"Ukrainian (Ukraine)",ur:"Urdu",ur_IN:"Urdu (India)",ur_PK:"Urdu (Pakistan)",ug:"Uyghur",ug_Arab_CN:"Uyghur (Arabic, China)",ug_Arab:"Uyghur (Arabic)",ug_CN:"Uyghur (China)",uz:"Uzbek",uz_AF:"Uzbek (Afghanistan)",uz_Arab_AF:"Uzbek (Arabic, Afghanistan)",uz_Arab:"Uzbek (Arabic)",uz_Cyrl_UZ:"Uzbek (Cyrillic, Uzbekistan)",uz_Cyrl:"Uzbek (Cyrillic)",uz_Latn_UZ:"Uzbek (Latin, Uzbekistan)",uz_Latn:"Uzbek (Latin)",uz_UZ:"Uzbek (Uzbekistan)",vi:"Vietnamese",vi_VN:"Vietnamese (Vietnam)",cy:"Welsh",cy_GB:"Welsh (United Kingdom)",fy:"Western Frisian",fy_NL:"Western Frisian (Netherlands)",yi:"Yiddish",yo:"Yoruba",yo_BJ:"Yoruba (Benin)",yo_NG:"Yoruba (Nigeria)",zu:"Zulu",zu_ZA:"Zulu (South Africa)"},MEe={class:"flex flex-col py-1"},kEe={class:"flex items-center justify-between py-2 mb-1"},LEe={class:"text-base text-slate-900 dark:text-slate-25"},DEe={class:"relative"},PEe={class:"absolute ltr:left-0 rtl:right-0 w-8 top-0.5 h-8 flex justify-center items-center"},BEe=["placeholder","value"],FEe={__name:"Header",props:{title:{type:String,default:"Chatwoot"}},emits:["search","close"],setup(e,{emit:t}){const n=t,s=U(null),o=U("");ut(()=>{s.value.focus()});const a=r=>{n("search",r.target.value)},i=()=>{n("close")};return Vs({Slash:{action:r=>{r.preventDefault(),s.value.focus()}},Escape:{action:()=>{i()},allowOnFocusedInput:!0}}),(r,d)=>{const u=F("fluent-icon");return m(),f("div",MEe,[c("div",kEe,[c("h3",LEe,v(e.title),1),b(he,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:i})]),c("div",DEe,[c("div",PEe,[b(u,{icon:"search",class:"",size:"18"})]),c("input",{ref_key:"searchInputRef",ref:s,type:"text",placeholder:r.$t("HELP_CENTER.ARTICLE_SEARCH.PLACEHOLDER"),class:"block w-full !h-9 ltr:!pl-8 rtl:!pr-8 dark:!bg-n-slate-2 !border-n-weak !bg-n-slate-2 text-sm rounded-md leading-8 text-slate-700 shadow-sm ring-2 ring-transparent ring-slate-300 border border-solid placeholder:text-slate-400 focus:border-woot-600 focus:ring-woot-200 !mb-0 focus:bg-slate-25 dark:focus:bg-slate-700 dark:focus:ring-woot-700",value:o.value,onInput:a},null,40,BEe)])])}}},UEe={class:"w-full mb-0 -mx-1 text-sm rounded-sm ltr:text-left rtl:text-right text-slate-900 dark:text-slate-25 hover:underline group-hover:underline"},GEe={class:"flex content-between items-center gap-0.5 w-full"},VEe={class:"w-full mb-0 text-sm ltr:text-left rtl:text-right text-slate-600 dark:text-slate-300"},HEe={class:"flex gap-0.5"},KEe={__name:"ArticleSearchResultItem",props:{id:{type:Number,default:0},title:{type:String,default:"Untitled"},url:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""}},emits:["insert","preview"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=r=>{r.stopPropagation(),s("insert",n.id)},i=r=>{r.stopPropagation(),s("preview",n.id)},l=async r=>{r.stopPropagation(),await dl(n.url),Te(o("CONTACT_PANEL.COPY_SUCCESSFUL"))};return(r,d)=>(m(),f("button",{class:"flex flex-col w-full gap-1 px-2 py-1 bg-white border border-transparent border-solid rounded-md cursor-pointer dark:bg-slate-900 hover:bg-slate-25 hover:dark:bg-slate-800 group focus:outline-none focus:bg-slate-25 focus:border-slate-500 dark:focus:border-slate-400 dark:focus:bg-slate-800",onClick:i},[c("h4",UEe,v(e.title),1),c("div",GEe,[c("p",VEe,v(e.locale)+" "+v(" / ")+" "+v(e.category||r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.UNCATEGORIZED")),1),c("div",HEe,[b(he,{title:r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.COPY_LINK"),faded:"",slate:"",xs:"",type:"reset",icon:"i-lucide-copy",class:"invisible group-hover:visible",onClick:l},null,8,["title"]),b(he,{xs:"",faded:"",slate:"",label:r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.INSERT_ARTICLE"),onClick:a},null,8,["label"])])])]))}},zEe={name:"SearchResults",components:{SearchResultItem:KEe},props:{articles:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},searchQuery:{type:String,default:""}},emits:["preview","insert"],computed:{showNoResults(){return this.searchQuery&&this.articles.length===0}},methods:{handlePreview(e){this.$emit("preview",e)},handleInsert(e){this.$emit("insert",e)}}},WEe={class:"flex justify-end h-full gap-1 py-4 overflow-y-auto bg-white dark:bg-slate-900"},jEe={class:"flex flex-col w-full gap-1"},YEe={key:0,class:"empty-state-message"},XEe={key:1,class:"empty-state-message"};function qEe(e,t,n,s,o,a){const i=F("SearchResultItem");return m(),f("div",WEe,[c("div",jEe,[n.isLoading?(m(),f("div",YEe,v(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.SEARCH_LOADER")),1)):a.showNoResults?(m(),f("div",XEe,v(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.NO_RESULT")),1)):(m(!0),f(pe,{key:2},ye(n.articles,l=>(m(),P(i,{id:l.id,key:l.id,title:l.title,body:l.content,url:l.url,category:l.category.name,locale:l.localeName,onPreview:a.handlePreview,onInsert:a.handleInsert},null,8,["id","title","body","url","category","locale","onPreview","onInsert"]))),128))])])}const ZEe=Re(zEe,[["render",qEe],["__scopeId","data-v-c8009ce7"]]),QEe={class:"h-full w-full flex flex-col flex-1 overflow-hidden"},JEe={class:"py-1"},eTe={class:"-ml-4 h-full overflow-y-auto"},tTe={class:"w-full h-full min-h-0"},nTe={class:"flex justify-end gap-2 py-2"},sTe={__name:"ArticleView",props:{url:{type:String,default:""}},emits:["back","insert"],setup(e,{emit:t}){const n=t,s=a=>{a.stopPropagation(),n("back")},o=a=>{a.stopPropagation(),n("insert")};return(a,i)=>(m(),f("div",QEe,[c("div",JEe,[b(he,{link:"",xs:"",label:a.$t("HELP_CENTER.ARTICLE_SEARCH.BACK_RESULTS"),icon:"i-lucide-chevron-left",onClick:s},null,8,["label"])]),c("div",eTe,[c("div",tTe,[b(RO,{url:e.url},null,8,["url"])])]),c("div",nTe,[b(he,{faded:"",slate:"",sm:"",type:"reset",icon:"i-lucide-chevron-left",label:a.$t("HELP_CENTER.ARTICLE_SEARCH.BACK"),onClick:s},null,8,["label"]),b(he,{sm:"",type:"submit",icon:"i-lucide-arrow-down-to-dot",label:a.$t("HELP_CENTER.ARTICLE_SEARCH.INSERT_ARTICLE"),onClick:o},null,8,["label"])])]))}},$S=e=>{const{hostURL:t,helpCenterURL:n}=window.chatwootConfig;return`${n||t||""}/hc/${e}`},aTe=(e,t,n,s)=>`${$S(e)}/articles/${s}`,wvt=e=>{switch(e){case"draft":return 0;case"published":return 1;case"archived":return 2;default:return}},Rvt=[{label:"Articles",icon:"i-lucide-book",action:"portals_articles_index",value:["portals_articles_index","portals_articles_new","portals_articles_edit"]},{label:"Categories",icon:"i-lucide-folder",action:"portals_categories_index",value:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"]},{label:"Locales",icon:"i-lucide-languages",action:"portals_locales_index",value:["portals_locales_index"]},{label:"Settings",icon:"i-lucide-settings",action:"portals_settings_index",value:["portals_settings_index"]}],ol={DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived"},oTe={publish:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.PUBLISH",value:ol.PUBLISHED,action:"publish",icon:"i-lucide-check"},draft:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DRAFT",value:ol.DRAFT,action:"draft",icon:"i-lucide-pencil-line"},archive:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.ARCHIVE",value:ol.ARCHIVED,action:"archive",icon:"i-lucide-archive-restore"},delete:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DELETE",value:"delete",action:"delete",icon:"i-lucide-trash"}},Sb={[ol.ARCHIVED]:["publish","draft"],[ol.DRAFT]:["publish","archive"],[ol.PUBLISHED]:["draft","archive"]},$vt={ALL:"all"},Mvt="all",kvt=[{key:"ALL",value:"all"},{key:"MINE",value:"mine"},{key:"DRAFT",value:"draft"},{key:"ARCHIVED",value:"archived"}],Lvt=[{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.MAKE_DEFAULT",action:"change-default",value:"default",icon:"i-lucide-star"},{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.DELETE",action:"delete",value:"delete",icon:"i-lucide-trash"}],Dvt={published:["archive","draft"],archived:["draft"],draft:["archive"]},iTe={name:"ArticleSearchPopover",components:{SearchHeader:FEe,SearchResults:ZEe,ArticleView:sTe},props:{selectedPortalSlug:{type:String,required:!0}},emits:["close","insert"],data(){return{searchQuery:"",isLoading:!1,searchResults:[],activeId:"",debounceSearch:()=>{}}},computed:{articleViewerUrl(){const e=this.activeArticle(this.activeId);if(!e)return"";const t=document.body.classList.contains("dark"),n=new URL(e.url);return n.searchParams.set("show_plain_layout","true"),t&&n.searchParams.set("theme","dark"),`${n}`},searchResultsWithUrl(){return this.searchResults.map(e=>({...e,localeName:this.localeName(e.category.locale||"en"),url:this.generateArticleUrl(e)}))}},mounted(){this.fetchArticlesByQuery(this.searchQuery),this.debounceSearch=Ko(this.fetchArticlesByQuery,500,!1)},methods:{generateArticleUrl(e){return aTe(this.selectedPortalSlug,"","",e.slug)},localeName(e){return $Ee[e]},activeArticle(e){return this.searchResultsWithUrl.find(t=>t.id===e)},onSearch(e){this.searchQuery=e,this.activeId="",this.debounceSearch(e)},onClose(){this.$emit("close"),this.searchQuery="",this.activeId="",this.searchResults=[]},async fetchArticlesByQuery(e){try{const t=e?"":"views";this.isLoading=!0,this.searchResults=[];const{data:n}=await hO.searchArticles({portalSlug:this.selectedPortalSlug,query:e,sort:t});this.searchResults=n.payload,this.isLoading=!0}catch{}finally{this.isLoading=!1}},handlePreview(e){this.activeId=e},onBack(){this.activeId=""},onInsert(e){const t=this.activeArticle(e||this.activeId);this.$emit("insert",t),Te(this.$t("HELP_CENTER.ARTICLE_SEARCH.SUCCESS_ARTICLE_INSERTED")),this.onClose()}}},lTe={class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},rTe={class:"flex flex-col px-4 pb-4 rounded-md shadow-md border border-solid border-slate-50 dark:border-slate-800 bg-white dark:bg-slate-900 z-[1000] max-w-[720px] md:w-[20rem] lg:w-[24rem] xl:w-[28rem] 2xl:w-[32rem] h-[calc(100vh-20rem)] max-h-[40rem]"};function cTe(e,t,n,s,o,a){const i=F("SearchHeader"),l=F("ArticleView"),r=F("SearchResults"),d=ct("on-clickaway");return m(),f("div",lTe,[ie((m(),f("div",rTe,[b(i,{title:e.$t("HELP_CENTER.ARTICLE_SEARCH.TITLE"),class:"w-full sticky top-0 bg-[inherit]",onClose:a.onClose,onSearch:a.onSearch},null,8,["title","onClose","onSearch"]),o.activeId?(m(),P(l,{key:0,url:a.articleViewerUrl,onBack:a.onBack,onInsert:a.onInsert},null,8,["url","onBack","onInsert"])):(m(),P(r,{key:1,"search-query":o.searchQuery,"is-loading":o.isLoading,"portal-slug":n.selectedPortalSlug,articles:a.searchResultsWithUrl,onPreview:a.handlePreview,onInsert:a.onInsert},null,8,["search-query","is-loading","portal-slug","articles","onPreview","onInsert"]))])),[[d,a.onClose]])])}const dTe=Re(iTe,[["render",cTe]]),uTe={class:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-slate-25 dark:hover:bg-slate-800 border border-dashed border-slate-100 dark:border-slate-700 rounded-sm overflow-auto"},mTe={class:"w-fit !m-0"},pTe={__name:"MessageSignatureMissingAlert",setup(e){const t=wn(),n=()=>t.push({name:"profile_settings_index"});return(s,o)=>(m(),f("div",uTe,[c("p",mTe,[be(v(s.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+" ",1),b(he,{link:"",label:s.$t("CONVERSATION.FOOTER.CLICK_HERE"),onClick:n},null,8,["label"])])]))}};function Qs(e,t,n,s){return new(n||(n=Promise))(function(o,a){function i(d){try{r(s.next(d))}catch(u){a(u)}}function l(d){try{r(s.throw(d))}catch(u){a(u)}}function r(d){var u;d.done?o(d.value):(u=d.value,u instanceof n?u:new n(function(p){p(u)})).then(i,l)}r((s=s.apply(e,t||[])).next())})}let zc=class{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const o=()=>{this.un(t,o),this.un(t,n)};return this.on(t,o),o}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}};const Ib={decode:function(e,t){return Qs(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const s=n[0];if(s.some(o=>o>1||o<-1)){const o=s.length;let a=0;for(let i=0;i<o;i++){const l=Math.abs(s[i]);l>a&&(a=l)}for(const i of n)for(let l=0;l<o;l++)i[l]/=a}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function MS(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[s,o]of Object.entries(t))if(s==="children")for(const[a,i]of Object.entries(t))typeof i=="string"?n.appendChild(document.createTextNode(i)):n.appendChild(MS(a,i));else s==="style"?Object.assign(n.style,o):s==="textContent"?n.textContent=o:n.setAttribute(s,o.toString());return n}function Cb(e,t,n){const s=MS(e,t||{});return n==null||n.appendChild(s),s}var hTe=Object.freeze({__proto__:null,createElement:Cb,default:Cb});const fTe={fetchBlob:function(e,t,n){return Qs(this,void 0,void 0,function*(){const s=yield fetch(e,n);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return function(o,a){Qs(this,void 0,void 0,function*(){if(!o.body||!o.headers)return;const i=o.body.getReader(),l=Number(o.headers.get("Content-Length"))||0;let r=0;const d=p=>Qs(this,void 0,void 0,function*(){r+=(p==null?void 0:p.length)||0;const h=Math.round(r/l*100);a(h)}),u=()=>Qs(this,void 0,void 0,function*(){let p;try{p=yield i.read()}catch{return}p.done||(d(p.value),yield u())});u()})}(s.clone(),t),s.blob()})}};class gTe extends zc{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,s){return this.media.addEventListener(t,n,s),()=>this.media.removeEventListener(t,n,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const s=this.getSrc();if(t&&s===t)return;this.revokeSrc();const o=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=o}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Qs(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class tr extends zc{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const s=this.parentFromOptionsContainer(t.container);this.parent=s;const[o,a]=this.initHtml();s.appendChild(o),this.container=o,this.scrollContainer=a.querySelector(".scroll"),this.wrapper=a.querySelector(".wrapper"),this.canvasWrapper=a.querySelector(".canvases"),this.progressWrapper=a.querySelector(".progress"),this.cursor=a.querySelector(".cursor"),n&&a.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const s=this.wrapper.getBoundingClientRect(),o=n.clientX-s.left,a=n.clientY-s.top;return[o/s.width,a/s.height]};if(this.wrapper.addEventListener("click",n=>{const[s,o]=t(n);this.emit("click",s,o)}),this.wrapper.addEventListener("dblclick",n=>{const[s,o]=t(n);this.emit("dblclick",s,o)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,a=n/s,i=(n+o)/s;this.emit("scroll",a,i,n,n+o)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,s,o,a=3,i=0,l=100){if(!t)return()=>{};const r=matchMedia("(pointer: coarse)").matches;let d=()=>{};const u=p=>{if(p.button!==i)return;p.preventDefault(),p.stopPropagation();let h=p.clientX,g=p.clientY,_=!1;const T=Date.now(),S=O=>{if(O.preventDefault(),O.stopPropagation(),r&&Date.now()-T<l)return;const N=O.clientX,R=O.clientY,k=N-h,L=R-g;if(_||Math.abs(k)>a||Math.abs(L)>a){const D=t.getBoundingClientRect(),{left:$,top:M}=D;_||(s==null||s(h-$,g-M),_=!0),n(k,L,N-$,R-M),h=N,g=R}},E=O=>{if(_){const N=O.clientX,R=O.clientY,k=t.getBoundingClientRect(),{left:L,top:D}=k;o==null||o(N-L,R-D)}d()},y=O=>{O.relatedTarget&&O.relatedTarget!==document.documentElement||E(O)},A=O=>{_&&(O.stopPropagation(),O.preventDefault())},C=O=>{_&&O.preventDefault()};document.addEventListener("pointermove",S),document.addEventListener("pointerup",E),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("click",A,{capture:!0}),d=()=>{document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",E),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",C),setTimeout(()=>{document.removeEventListener("click",A,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{d(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,s)=>{this.emit("drag",Math.max(0,Math.min(1,s/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var s;const o=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const a=this.parent.clientHeight||128;return n!=null&&n.every(i=>!i.overlay)?a/o:a}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,s=n*t;this.setScroll(s)}destroy(){var t,n;this.subscriptions.forEach(s=>s()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,s;const o=()=>{n&&clearTimeout(n),s&&s()};return this.timeouts.push(o),()=>new Promise((a,i)=>{o(),s=i,n=setTimeout(()=>{n=void 0,s=void 0,a()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),s=n.getContext("2d"),o=n.height*(window.devicePixelRatio||1),a=s.createLinearGradient(0,0,0,o),i=1/(t.length-1);return t.forEach((l,r)=>{const d=r*i;a.addColorStop(d,l)}),a}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,s,o){const a=t[0],i=t[1]||t[0],l=a.length,{width:r,height:d}=s.canvas,u=d/2,p=this.getPixelRatio(),h=n.barWidth?n.barWidth*p:1,g=n.barGap?n.barGap*p:n.barWidth?h/2:0,_=n.barRadius||0,T=r/(h+g)/l,S=_&&"roundRect"in s?"roundRect":"rect";s.beginPath();let E=0,y=0,A=0;for(let C=0;C<=l;C++){const O=Math.round(C*T);if(O>E){const k=Math.round(y*u*o),L=k+Math.round(A*u*o)||1;let D=u-k;n.barAlign==="top"?D=0:n.barAlign==="bottom"&&(D=d-L),s[S](E*(h+g),D,h,L,_),E=O,y=0,A=0}const N=Math.abs(a[C]||0),R=Math.abs(i[C]||0);N>y&&(y=N),R>A&&(A=R)}s.fill(),s.closePath()}renderLineWaveform(t,n,s,o){const a=i=>{const l=t[i]||t[0],r=l.length,{height:d}=s.canvas,u=d/2,p=s.canvas.width/r;s.moveTo(0,u);let h=0,g=0;for(let _=0;_<=r;_++){const T=Math.round(_*p);if(T>h){const E=u+(Math.round(g*u*o)||1)*(i===0?-1:1);s.lineTo(h,E),h=T,g=0}const S=Math.abs(l[_]||0);S>g&&(g=S)}s.lineTo(h,u)};s.beginPath(),a(0),a(1),s.fill(),s.closePath()}renderWaveform(t,n,s){if(s.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,s);let o=n.barHeight||1;if(n.normalize){const a=Array.from(t[0]).reduce((i,l)=>Math.max(i,Math.abs(l)),0);o=a?1/a:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,s,o):this.renderLineWaveform(t,n,s,o)}renderSingleCanvas(t,n,s,o,a,i,l){const r=this.getPixelRatio(),d=document.createElement("canvas");d.width=Math.round(s*r),d.height=Math.round(o*r),d.style.width=`${s}px`,d.style.height=`${o}px`,d.style.left=`${Math.round(a)}px`,i.appendChild(d);const u=d.getContext("2d");if(this.renderWaveform(t,n,u),d.width>0&&d.height>0){const p=d.cloneNode(),h=p.getContext("2d");h.drawImage(d,0,0),h.globalCompositeOperation="source-in",h.fillStyle=this.convertColorValues(n.progressColor),h.fillRect(0,0,d.width,d.height),l.appendChild(p)}}renderMultiCanvas(t,n,s,o,a,i){const l=this.getPixelRatio(),{clientWidth:r}=this.scrollContainer,d=s/l;let u=Math.min(tr.MAX_CANVAS_WIDTH,r,d),p={};if(n.barWidth||n.barGap){const S=n.barWidth||.5,E=S+(n.barGap||S/2);u%E!=0&&(u=Math.floor(u/E)*E)}const h=S=>{if(S<0||S>=g||p[S])return;p[S]=!0;const E=S*u,y=Math.min(d-E,u);if(y<=0)return;const A=t.map(C=>{const O=Math.floor(E/d*C.length),N=Math.floor((E+y)/d*C.length);return C.slice(O,N)});this.renderSingleCanvas(A,n,y,o,E,a,i)},g=Math.ceil(d/u);if(!this.isScrollable){for(let S=0;S<g;S++)h(S);return}const _=this.scrollContainer.scrollLeft/d,T=Math.floor(_*g);h(T-1),h(T),h(T+1),g>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:S}=this.scrollContainer,E=Math.floor(S/d*g);Object.keys(p).length>tr.MAX_NODES&&(a.innerHTML="",i.innerHTML="",p={}),h(E-1),h(E),h(E+1)}))}renderChannel(t,n,s,o){var{overlay:a}=n,i=function(u,p){var h={};for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&p.indexOf(g)<0&&(h[g]=u[g]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(g=Object.getOwnPropertySymbols(u);_<g.length;_++)p.indexOf(g[_])<0&&Object.prototype.propertyIsEnumerable.call(u,g[_])&&(h[g[_]]=u[g[_]])}return h}(n,["overlay"]);const l=document.createElement("div"),r=this.getHeight(i.height,i.splitChannels);l.style.height=`${r}px`,a&&o>0&&(l.style.marginTop=`-${r}px`),this.canvasWrapper.style.minHeight=`${r}px`,this.canvasWrapper.appendChild(l);const d=l.cloneNode();this.progressWrapper.appendChild(d),this.renderMultiCanvas(t,i,s,r,l,d)}render(t){return Qs(this,void 0,void 0,function*(){var n;this.timeouts.forEach(r=>r()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),o=this.scrollContainer.clientWidth,a=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=a>o;const i=this.options.fillParent&&!this.isScrollable,l=(i?o:a)*s;if(this.wrapper.style.width=i?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let r=0;r<t.numberOfChannels;r++){const d=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[r]);this.renderChannel([t.getChannelData(r)],d,l,r)}else{const r=[t.getChannelData(0)];t.numberOfChannels>1&&r.push(t.getChannelData(1)),this.renderChannel(r,this.options,l,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:s}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:o}=this.progressWrapper.getBoundingClientRect();let a=o-s;a*=2,a=a<0?Math.floor(a):Math.ceil(a),a/=2,this.scrollContainer.scrollLeft+=a}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:s,scrollWidth:o,clientWidth:a}=this.scrollContainer,i=t*o,l=s,r=s+a,d=a/2;if(this.isDragging)i+30>r?this.scrollContainer.scrollLeft+=30:i-30<l&&(this.scrollContainer.scrollLeft-=30);else{(i<l||i>r)&&(this.scrollContainer.scrollLeft=i-(this.options.autoCenter?d:0));const u=i-s-d;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,p=u/o,h=(u+a)/o;this.emit("scroll",p,h,u,u+a)}}renderProgress(t,n){if(isNaN(t))return;const s=100*t;this.canvasWrapper.style.clipPath=`polygon(${s}% 0, 100% 0, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=`translateX(-${Math.round(s)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,s){return Qs(this,void 0,void 0,function*(){const o=this.canvasWrapper.querySelectorAll("canvas");if(!o.length)throw new Error("No waveform data");if(s==="dataURL"){const a=Array.from(o).map(i=>i.toDataURL(t,n));return Promise.resolve(a)}return Promise.all(Array.from(o).map(a=>new Promise((i,l)=>{a.toBlob(r=>{r?i(r):l(new Error("Could not export image"))},t,n)})))})}}tr.MAX_CANVAS_WIDTH=8e3,tr.MAX_NODES=10;class _Te extends zc{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Nb extends zc{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Qs(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Qs(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,s;const o=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+o),(s=this.bufferNode)===null||s===void 0||s.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Qs(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let s=0;s<n;s++)t.push(this.buffer.getChannelData(s));return t}}const vTe={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Ac extends gTe{static create(t){return new Ac(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Nb:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},vTe,t),this.timer=new _Te;const s=n?void 0:this.getMediaElement();this.renderer=new tr(this.options,s),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const o=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:i}=this.options;(o||a&&i)&&this.load(o,a,i).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,s,o)=>{const a=this.getDuration();this.emit("scroll",t*a,n*a,s,o)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let s;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?s=0:this.options.dragToSeek===!0?s=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(s=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},s),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,s,o){return Qs(this,void 0,void 0,function*(){var a;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!s){const l=this.options.fetchParams||{};window.AbortController&&!l.signal&&(this.abortController=new AbortController,l.signal=(a=this.abortController)===null||a===void 0?void 0:a.signal);const r=d=>this.emit("loading",d);n=yield fTe.fetchBlob(t,r,l)}this.setSrc(t,n);const i=yield new Promise(l=>{const r=o||this.getDuration();r?l(r):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>l(this.getDuration()),{once:!0}))});if(!t&&!n){const l=this.getMediaElement();l instanceof Nb&&(l.duration=i)}if(s)this.decodedData=Ib.createBuffer(s,i||0);else if(n){const l=yield n.arrayBuffer();this.decodedData=yield Ib.decode(l,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,s){return Qs(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,s)}catch(o){throw this.emit("error",o),o}})}loadBlob(t,n,s){return Qs(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,s)}catch(o){throw this.emit("error",o),o}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const o=Math.min(t,this.decodedData.numberOfChannels),a=[];for(let i=0;i<o;i++){const l=this.decodedData.getChannelData(i),r=[],d=l.length/n;for(let u=0;u<n;u++){const p=l.slice(Math.floor(u*d),Math.ceil((u+1)*d));let h=0;for(let g=0;g<p.length;g++){const _=p[g];Math.abs(_)>Math.abs(h)&&(h=_)}r.push(Math.round(h*s)/s)}a.push(r)}return a}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Qs(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Qs(this,arguments,void 0,function*(t="image/png",n=1,s="dataURL"){return this.renderer.exportImage(t,n,s)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Ac.BasePlugin=class extends zc{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},Ac.dom=hTe;function yh(e,t,n,s){return new(n||(n=Promise))(function(o,a){function i(d){try{r(s.next(d))}catch(u){a(u)}}function l(d){try{r(s.throw(d))}catch(u){a(u)}}function r(d){var u;d.done?o(d.value):(u=d.value,u instanceof n?u:new n(function(p){p(u)})).then(i,l)}r((s=s.apply(e,[])).next())})}class kS{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const o=()=>{this.un(t,o),this.un(t,n)};return this.on(t,o),o}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}}class bTe extends kS{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class ETe extends kS{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const TTe=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class A_ extends bTe{constructor(t){var n,s,o,a,i,l;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(s=t.scrollingWaveform)!==null&&s!==void 0&&s,scrollingWaveformWindow:(o=t.scrollingWaveformWindow)!==null&&o!==void 0?o:5,continuousWaveform:(a=t.continuousWaveform)!==null&&a!==void 0&&a,renderRecordedAudio:(i=t.renderRecordedAudio)===null||i===void 0||i,mediaRecorderTimeslice:(l=t.mediaRecorderTimeslice)!==null&&l!==void 0?l:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new ETe,this.subscriptions.push(this.timer.on("tick",()=>{const r=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+r,this.emit("record-progress",this.duration)}))}static create(t){return new A_(t||{})}renderMicStream(t){var n;const s=new AudioContext,o=s.createMediaStreamSource(t),a=s.createAnalyser();o.connect(a),this.options.continuousWaveform&&(a.fftSize=32);const i=a.frequencyBinCount,l=new Float32Array(i);let r=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const d=setInterval(()=>{var u,p,h,g;if(!this.isWaveformPaused){if(a.getFloatTimeDomainData(l),this.options.scrollingWaveform){const _=Math.floor((this.options.scrollingWaveformWindow||0)*s.sampleRate),T=Math.min(_,this.dataWindow?this.dataWindow.length+i:i),S=new Float32Array(_);if(this.dataWindow){const E=Math.max(0,_-this.dataWindow.length);S.set(this.dataWindow.slice(-T+i),E)}S.set(l,_-i),this.dataWindow=S}else if(this.options.continuousWaveform){if(!this.dataWindow){const T=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((p=(u=this.wavesurfer)===null||u===void 0?void 0:u.getWidth())!==null&&p!==void 0?p:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(T)}let _=0;for(let T=0;T<i;T++){const S=Math.abs(l[T]);S>_&&(_=S)}if(r+1>this.dataWindow.length){const T=new Float32Array(2*this.dataWindow.length);T.set(this.dataWindow,0),this.dataWindow=T}this.dataWindow[r]=_,r++}else this.dataWindow=l;if(this.wavesurfer){const _=((g=(h=this.dataWindow)===null||h===void 0?void 0:h.length)!==null&&g!==void 0?g:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:_).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(T=>{console.error("Error rendering real-time recording data:",T)})}}},10);return{onDestroy:()=>{clearInterval(d),o==null||o.disconnect(),s==null||s.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(d),this.stopMic()}}}startMic(t){return yh(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(a){throw new Error("Error accessing the microphone: "+a.message)}const{onDestroy:s,onEnd:o}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",s)),this.subscriptions.push(this.once("record-end",o)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return yh(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const s=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||TTe.find(i=>MediaRecorder.isTypeSupported(i)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=s,this.stopRecording();const o=[];s.ondataavailable=i=>{i.data.size>0&&o.push(i.data),this.emit("record-data-available",i.data)};const a=i=>{var l;const r=new Blob(o,{type:s.mimeType});this.emit(i,r),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(l=this.wavesurfer)===null||l===void 0||l.load(URL.createObjectURL(r)))};s.onpause=()=>a("record-pause"),s.onstop=()=>a("record-end"),s.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return yh(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}var S_={};function yTe(e){return new Int8Array(e)}function ATe(e){return new Int16Array(e)}function LS(e){return new Int32Array(e)}function DS(e){return new Float32Array(e)}function STe(e){return new Float64Array(e)}function PS(e){if(e.length==1)return DS(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(PS(e));return n}function BS(e){if(e.length==1)return LS(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(BS(e));return n}function FS(e){if(e.length==1)return ATe(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(FS(e));return n}function US(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(US(e));return n}var GS={};GS.fill=function(e,t,n,s){if(arguments.length==2)for(var o=0;o<e.length;o++)e[o]=arguments[1];else for(var o=t;o<n;o++)e[o]=s};var Wc={};Wc.arraycopy=function(e,t,n,s,o){for(var a=t+o;t<a;)n[s++]=e[t++]};Wc.out={};Wc.out.println=function(e){console.log(e)};Wc.out.printf=function(){console.log.apply(console,arguments)};var Am={};Am.SQRT2=1.4142135623730951;Am.FAST_LOG10=function(e){return Math.log10(e)};Am.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function jo(e){this.ordinal=e}jo.short_block_allowed=new jo(0);jo.short_block_coupled=new jo(1);jo.short_block_dispensed=new jo(2);jo.short_block_forced=new jo(3);var VS={};VS.MAX_VALUE=34028235e31;function wa(e){this.ordinal=e}wa.vbr_off=new wa(0);wa.vbr_mt=new wa(1);wa.vbr_rh=new wa(2);wa.vbr_abr=new wa(3);wa.vbr_mtrh=new wa(4);wa.vbr_default=wa.vbr_mtrh;var ITe=function(e){},jn={System:Wc,VbrMode:wa,Float:VS,ShortBlock:jo,Util:Am,Arrays:GS,new_array_n:US,new_byte:yTe,new_double:STe,new_float:DS,new_float_n:PS,new_int:LS,new_int_n:BS,new_short_n:FS,assert:ITe},Ah,Ob;function CTe(){if(Ob)return Ah;Ob=1;var e=jn,t=e.System,n=e.Util,s=e.Arrays,o=e.new_float,a=na();function i(){var l=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*n.SQRT2*.5/2384e-9,.017876148*n.SQRT2*.5/2384e-9,.003134727*n.SQRT2*.5/2384e-9,.002457142*n.SQRT2*.5/2384e-9,971317e-9*n.SQRT2*.5/2384e-9,218868e-9*n.SQRT2*.5/2384e-9,101566e-9*n.SQRT2*.5/2384e-9,13828e-9*n.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],r=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],d=r[a.SHORT_TYPE],u=r[a.SHORT_TYPE],p=r[a.SHORT_TYPE],h=r[a.SHORT_TYPE],g=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function _(E,y,A){for(var C=10,O=y+238-14-286,N=-15;N<0;N++){var R,k,L;R=l[C+-10],k=E[O+-224]*R,L=E[y+224]*R,R=l[C+-9],k+=E[O+-160]*R,L+=E[y+160]*R,R=l[C+-8],k+=E[O+-96]*R,L+=E[y+96]*R,R=l[C+-7],k+=E[O+-32]*R,L+=E[y+32]*R,R=l[C+-6],k+=E[O+32]*R,L+=E[y+-32]*R,R=l[C+-5],k+=E[O+96]*R,L+=E[y+-96]*R,R=l[C+-4],k+=E[O+160]*R,L+=E[y+-160]*R,R=l[C+-3],k+=E[O+224]*R,L+=E[y+-224]*R,R=l[C+-2],k+=E[y+-256]*R,L-=E[O+256]*R,R=l[C+-1],k+=E[y+-192]*R,L-=E[O+192]*R,R=l[C+0],k+=E[y+-128]*R,L-=E[O+128]*R,R=l[C+1],k+=E[y+-64]*R,L-=E[O+64]*R,R=l[C+2],k+=E[y+0]*R,L-=E[O+0]*R,R=l[C+3],k+=E[y+64]*R,L-=E[O+-64]*R,R=l[C+4],k+=E[y+128]*R,L-=E[O+-128]*R,R=l[C+5],k+=E[y+192]*R,L-=E[O+-192]*R,k*=l[C+6],R=L-k,A[30+N*2]=L+k,A[31+N*2]=l[C+7]*R,C+=18,y--,O++}{var k,L,D,$;L=E[y+-16]*l[C+-10],k=E[y+-32]*l[C+-2],L+=(E[y+-48]-E[y+16])*l[C+-9],k+=E[y+-96]*l[C+-1],L+=(E[y+-80]+E[y+48])*l[C+-8],k+=E[y+-160]*l[C+0],L+=(E[y+-112]-E[y+80])*l[C+-7],k+=E[y+-224]*l[C+1],L+=(E[y+-144]+E[y+112])*l[C+-6],k-=E[y+32]*l[C+2],L+=(E[y+-176]-E[y+144])*l[C+-5],k-=E[y+96]*l[C+3],L+=(E[y+-208]+E[y+176])*l[C+-4],k-=E[y+160]*l[C+4],L+=(E[y+-240]-E[y+208])*l[C+-3],k-=E[y+224],D=k-L,$=k+L,L=A[14],k=A[15]-L,A[31]=$+L,A[30]=D+k,A[15]=D-k,A[14]=$-L}{var M;M=A[28]-A[0],A[0]+=A[28],A[28]=M*l[C+-2*18+7],M=A[29]-A[1],A[1]+=A[29],A[29]=M*l[C+-2*18+7],M=A[26]-A[2],A[2]+=A[26],A[26]=M*l[C+-4*18+7],M=A[27]-A[3],A[3]+=A[27],A[27]=M*l[C+-4*18+7],M=A[24]-A[4],A[4]+=A[24],A[24]=M*l[C+-6*18+7],M=A[25]-A[5],A[5]+=A[25],A[25]=M*l[C+-6*18+7],M=A[22]-A[6],A[6]+=A[22],A[22]=M*n.SQRT2,M=A[23]-A[7],A[7]+=A[23],A[23]=M*n.SQRT2-A[7],A[7]-=A[6],A[22]-=A[7],A[23]-=A[22],M=A[6],A[6]=A[31]-M,A[31]=A[31]+M,M=A[7],A[7]=A[30]-M,A[30]=A[30]+M,M=A[22],A[22]=A[15]-M,A[15]=A[15]+M,M=A[23],A[23]=A[14]-M,A[14]=A[14]+M,M=A[20]-A[8],A[8]+=A[20],A[20]=M*l[C+-10*18+7],M=A[21]-A[9],A[9]+=A[21],A[21]=M*l[C+-10*18+7],M=A[18]-A[10],A[10]+=A[18],A[18]=M*l[C+-12*18+7],M=A[19]-A[11],A[11]+=A[19],A[19]=M*l[C+-12*18+7],M=A[16]-A[12],A[12]+=A[16],A[16]=M*l[C+-14*18+7],M=A[17]-A[13],A[13]+=A[17],A[17]=M*l[C+-14*18+7],M=-A[20]+A[24],A[20]+=A[24],A[24]=M*l[C+-12*18+7],M=-A[21]+A[25],A[21]+=A[25],A[25]=M*l[C+-12*18+7],M=A[4]-A[8],A[4]+=A[8],A[8]=M*l[C+-12*18+7],M=A[5]-A[9],A[5]+=A[9],A[9]=M*l[C+-12*18+7],M=A[0]-A[12],A[0]+=A[12],A[12]=M*l[C+-4*18+7],M=A[1]-A[13],A[1]+=A[13],A[13]=M*l[C+-4*18+7],M=A[16]-A[28],A[16]+=A[28],A[28]=M*l[C+-4*18+7],M=-A[17]+A[29],A[17]+=A[29],A[29]=M*l[C+-4*18+7],M=n.SQRT2*(A[2]-A[10]),A[2]+=A[10],A[10]=M,M=n.SQRT2*(A[3]-A[11]),A[3]+=A[11],A[11]=M,M=n.SQRT2*(-A[18]+A[26]),A[18]+=A[26],A[26]=M-A[18],M=n.SQRT2*(-A[19]+A[27]),A[19]+=A[27],A[27]=M-A[19],M=A[2],A[19]-=A[3],A[3]-=M,A[2]=A[31]-M,A[31]+=M,M=A[3],A[11]-=A[19],A[18]-=M,A[3]=A[30]-M,A[30]+=M,M=A[18],A[27]-=A[11],A[19]-=M,A[18]=A[15]-M,A[15]+=M,M=A[19],A[10]-=M,A[19]=A[14]-M,A[14]+=M,M=A[10],A[11]-=M,A[10]=A[23]-M,A[23]+=M,M=A[11],A[26]-=M,A[11]=A[22]-M,A[22]+=M,M=A[26],A[27]-=M,A[26]=A[7]-M,A[7]+=M,M=A[27],A[27]=A[6]-M,A[6]+=M,M=n.SQRT2*(A[0]-A[4]),A[0]+=A[4],A[4]=M,M=n.SQRT2*(A[1]-A[5]),A[1]+=A[5],A[5]=M,M=n.SQRT2*(A[16]-A[20]),A[16]+=A[20],A[20]=M,M=n.SQRT2*(A[17]-A[21]),A[17]+=A[21],A[21]=M,M=-n.SQRT2*(A[8]-A[12]),A[8]+=A[12],A[12]=M-A[8],M=-n.SQRT2*(A[9]-A[13]),A[9]+=A[13],A[13]=M-A[9],M=-n.SQRT2*(A[25]-A[29]),A[25]+=A[29],A[29]=M-A[25],M=-n.SQRT2*(A[24]+A[28]),A[24]-=A[28],A[28]=M-A[24],M=A[24]-A[16],A[24]=M,M=A[20]-M,A[20]=M,M=A[28]-M,A[28]=M,M=A[25]-A[17],A[25]=M,M=A[21]-M,A[21]=M,M=A[29]-M,A[29]=M,M=A[17]-A[1],A[17]=M,M=A[9]-M,A[9]=M,M=A[25]-M,A[25]=M,M=A[5]-M,A[5]=M,M=A[21]-M,A[21]=M,M=A[13]-M,A[13]=M,M=A[29]-M,A[29]=M,M=A[1]-A[0],A[1]=M,M=A[16]-M,A[16]=M,M=A[17]-M,A[17]=M,M=A[8]-M,A[8]=M,M=A[9]-M,A[9]=M,M=A[24]-M,A[24]=M,M=A[25]-M,A[25]=M,M=A[4]-M,A[4]=M,M=A[5]-M,A[5]=M,M=A[20]-M,A[20]=M,M=A[21]-M,A[21]=M,M=A[12]-M,A[12]=M,M=A[13]-M,A[13]=M,M=A[28]-M,A[28]=M,M=A[29]-M,A[29]=M,M=A[0],A[0]+=A[31],A[31]-=M,M=A[1],A[1]+=A[30],A[30]-=M,M=A[16],A[16]+=A[15],A[15]-=M,M=A[17],A[17]+=A[14],A[14]-=M,M=A[8],A[8]+=A[23],A[23]-=M,M=A[9],A[9]+=A[22],A[22]-=M,M=A[24],A[24]+=A[7],A[7]-=M,M=A[25],A[25]+=A[6],A[6]-=M,M=A[4],A[4]+=A[27],A[27]-=M,M=A[5],A[5]+=A[26],A[26]-=M,M=A[20],A[20]+=A[11],A[11]-=M,M=A[21],A[21]+=A[10],A[10]-=M,M=A[12],A[12]+=A[19],A[19]-=M,M=A[13],A[13]+=A[18],A[18]-=M,M=A[28],A[28]+=A[3],A[3]-=M,M=A[29],A[29]+=A[2],A[2]-=M}}function T(E,y){for(var A=0;A<3;A++){var C,O,N,R,k,L;R=E[y+2*3]*r[a.SHORT_TYPE][0]-E[y+5*3],C=E[y+0*3]*r[a.SHORT_TYPE][2]-E[y+3*3],O=R+C,N=R-C,R=E[y+5*3]*r[a.SHORT_TYPE][0]+E[y+2*3],C=E[y+3*3]*r[a.SHORT_TYPE][2]+E[y+0*3],k=R+C,L=-R+C,C=(E[y+1*3]*r[a.SHORT_TYPE][1]-E[y+4*3])*2069978111953089e-26,R=(E[y+4*3]*r[a.SHORT_TYPE][1]+E[y+1*3])*2069978111953089e-26,E[y+3*0]=O*190752519173728e-25+C,E[y+3*5]=-k*190752519173728e-25+R,N=N*.8660254037844387*1907525191737281e-26,k=k*.5*1907525191737281e-26+R,E[y+3*1]=N-k,E[y+3*2]=N+k,O=O*.5*1907525191737281e-26-C,L=L*.8660254037844387*1907525191737281e-26,E[y+3*3]=O+L,E[y+3*4]=O-L,y++}}function S(E,y,A){var C,O;{var N,R,k,L,D,$,M,K;N=A[17]-A[9],k=A[15]-A[11],L=A[14]-A[12],D=A[0]+A[8],$=A[1]+A[7],M=A[2]+A[6],K=A[3]+A[5],E[y+17]=D+M-K-($-A[4]),O=(D+M-K)*u[19]+($-A[4]),C=(N-k-L)*u[18],E[y+5]=C+O,E[y+6]=C-O,R=(A[16]-A[10])*u[18],$=$*u[19]+A[4],C=N*u[12]+R+k*u[13]+L*u[14],O=-D*u[16]+$-M*u[17]+K*u[15],E[y+1]=C+O,E[y+2]=C-O,C=N*u[13]-R-k*u[14]+L*u[12],O=-D*u[17]+$-M*u[15]+K*u[16],E[y+9]=C+O,E[y+10]=C-O,C=N*u[14]-R+k*u[12]-L*u[13],O=D*u[15]-$+M*u[16]-K*u[17],E[y+13]=C+O,E[y+14]=C-O}{var B,H,G,V,Y,ee,X,z;B=A[8]-A[0],G=A[6]-A[2],V=A[5]-A[3],Y=A[17]+A[9],ee=A[16]+A[10],X=A[15]+A[11],z=A[14]+A[12],E[y+0]=Y+X+z+(ee+A[13]),C=(Y+X+z)*u[19]-(ee+A[13]),O=(B-G+V)*u[18],E[y+11]=C+O,E[y+12]=C-O,H=(A[7]-A[1])*u[18],ee=A[13]-ee*u[19],C=Y*u[15]-ee+X*u[16]+z*u[17],O=B*u[14]+H+G*u[12]+V*u[13],E[y+3]=C+O,E[y+4]=C-O,C=-Y*u[17]+ee-X*u[15]-z*u[16],O=B*u[13]+H-G*u[14]-V*u[12],E[y+7]=C+O,E[y+8]=C-O,C=-Y*u[16]+ee-X*u[17]-z*u[15],O=B*u[12]-H+G*u[13]-V*u[14],E[y+15]=C+O,E[y+16]=C-O}}this.mdct_sub48=function(E,y,A){for(var C=y,O=286,N=0;N<E.channels_out;N++){for(var R=0;R<E.mode_gr;R++){for(var k,L=E.l3_side.tt[R][N],D=L.xr,$=0,M=E.sb_sample[N][1-R],K=0,B=0;B<18/2;B++)for(_(C,O,M[K]),_(C,O+32,M[K+1]),K+=2,O+=64,k=1;k<32;k+=2)M[K-1][k]*=-1;for(k=0;k<32;k++,$+=18){var H=L.block_type,G=E.sb_sample[N][R],V=E.sb_sample[N][1-R];if(L.mixed_block_flag!=0&&k<2&&(H=0),E.amp_filter[k]<1e-12)s.fill(D,$+0,$+18,0);else{if(E.amp_filter[k]<1)for(var B=0;B<18;B++)V[B][g[k]]*=E.amp_filter[k];if(H==a.SHORT_TYPE){for(var B=-12/4;B<0;B++){var Y=r[a.SHORT_TYPE][B+3];D[$+B*3+9]=G[9+B][g[k]]*Y-G[8-B][g[k]],D[$+B*3+18]=G[14-B][g[k]]*Y+G[15+B][g[k]],D[$+B*3+10]=G[15+B][g[k]]*Y-G[14-B][g[k]],D[$+B*3+19]=V[2-B][g[k]]*Y+V[3+B][g[k]],D[$+B*3+11]=V[3+B][g[k]]*Y-V[2-B][g[k]],D[$+B*3+20]=V[8-B][g[k]]*Y+V[9+B][g[k]]}T(D,$)}else{for(var ee=o(18),B=-36/4;B<0;B++){var X,z;X=r[H][B+27]*V[B+9][g[k]]+r[H][B+36]*V[8-B][g[k]],z=r[H][B+9]*G[B+9][g[k]]-r[H][B+18]*G[8-B][g[k]],ee[B+9]=X-z*d[3+B+9],ee[B+18]=X*d[3+B+9]+z}S(D,$,ee)}}if(H!=a.SHORT_TYPE&&k!=0)for(var B=7;B>=0;--B){var W,q;W=D[$+B]*p[20+B]+D[$+-1-B]*h[28+B],q=D[$+B]*h[28+B]-D[$+-1-B]*p[20+B],D[$+-1-B]=W,D[$+B]=q}}}if(C=A,O=286,E.mode_gr==1)for(var Z=0;Z<18;Z++)t.arraycopy(E.sb_sample[N][1][Z],0,E.sb_sample[N][0][Z],0,32)}}}return Ah=i,Ah}var Sh,xb;function HS(){if(xb)return Sh;xb=1;var e=na(),t=jn,n=t.System,s=t.new_float,o=t.new_float_n;function a(){this.l=s(e.SBMAX_l),this.s=o([e.SBMAX_s,3]);var i=this;this.assign=function(l){n.arraycopy(l.l,0,i.l,0,e.SBMAX_l);for(var r=0;r<e.SBMAX_s;r++)for(var d=0;d<3;d++)i.s[r][d]=l.s[r][d]}}return Sh=a,Sh}var Ih,wb;function NTe(){if(wb)return Ih;wb=1;var e=HS();function t(){this.thm=new e,this.en=new e}return Ih=t,Ih}function ao(e){var t=e;this.ordinal=function(){return t}}ao.STEREO=new ao(0);ao.JOINT_STEREO=new ao(1);ao.DUAL_CHANNEL=new ao(2);ao.MONO=new ao(3);ao.NOT_SET=new ao(4);var jc=ao,Ch,Rb;function na(){if(Rb)return Ch;Rb=1;var e=jn,t=e.System,n=e.VbrMode,s=e.new_array_n,o=e.new_float,a=e.new_float_n,i=e.new_int,l=e.assert;r.ENCDELAY=576,r.POSTDELAY=1152,r.MDCTDELAY=48,r.FFTOFFSET=224+r.MDCTDELAY,r.DECDELAY=528,r.SBLIMIT=32,r.CBANDS=64,r.SBPSY_l=21,r.SBPSY_s=12,r.SBMAX_l=22,r.SBMAX_s=13,r.PSFB21=6,r.PSFB12=6,r.BLKSIZE=1024,r.HBLKSIZE=r.BLKSIZE/2+1,r.BLKSIZE_s=256,r.HBLKSIZE_s=r.BLKSIZE_s/2+1,r.NORM_TYPE=0,r.START_TYPE=1,r.SHORT_TYPE=2,r.STOP_TYPE=3,r.MPG_MD_LR_LR=0,r.MPG_MD_LR_I=1,r.MPG_MD_MS_LR=2,r.MPG_MD_MS_I=3,r.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function r(){var d=CTe(),u=NTe(),p=jc,h=r.FFTOFFSET,g=r.MPG_MD_MS_LR,_=null;this.psy=null;var T=null,S=null,E=null;this.setModules=function(N,R,k,L){_=N,this.psy=R,T=R,S=L,E=k};var y=new d;function A(N){var R,k;if(N.ATH.useAdjust==0){N.ATH.adjust=1;return}if(k=N.loudness_sq[0][0],R=N.loudness_sq[1][0],N.channels_out==2?(k+=N.loudness_sq[0][1],R+=N.loudness_sq[1][1]):(k+=k,R+=R),N.mode_gr==2&&(k=Math.max(k,R)),k*=.5,k*=N.ATH.aaSensitivityP,k>.03125)N.ATH.adjust>=1?N.ATH.adjust=1:N.ATH.adjust<N.ATH.adjustLimit&&(N.ATH.adjust=N.ATH.adjustLimit),N.ATH.adjustLimit=1;else{var L=31.98*k+625e-6;N.ATH.adjust>=L?(N.ATH.adjust*=L*.075+.925,N.ATH.adjust<L&&(N.ATH.adjust=L)):N.ATH.adjustLimit>=L?N.ATH.adjust=L:N.ATH.adjust<N.ATH.adjustLimit&&(N.ATH.adjust=N.ATH.adjustLimit),N.ATH.adjustLimit=L}}function C(N){var R,k;for(l(0<=N.bitrate_index&&N.bitrate_index<16),l(0<=N.mode_ext&&N.mode_ext<4),N.bitrate_stereoMode_Hist[N.bitrate_index][4]++,N.bitrate_stereoMode_Hist[15][4]++,N.channels_out==2&&(N.bitrate_stereoMode_Hist[N.bitrate_index][N.mode_ext]++,N.bitrate_stereoMode_Hist[15][N.mode_ext]++),R=0;R<N.mode_gr;++R)for(k=0;k<N.channels_out;++k){var L=N.l3_side.tt[R][k].block_type|0;N.l3_side.tt[R][k].mixed_block_flag!=0&&(L=4),N.bitrate_blockType_Hist[N.bitrate_index][L]++,N.bitrate_blockType_Hist[N.bitrate_index][5]++,N.bitrate_blockType_Hist[15][L]++,N.bitrate_blockType_Hist[15][5]++}}function O(N,R){var k=N.internal_flags,L,D;if(k.lame_encode_frame_init==0){var $,M,K=o(2014),B=o(2014);for(k.lame_encode_frame_init=1,$=0,M=0;$<286+576*(1+k.mode_gr);++$)$<576*k.mode_gr?(K[$]=0,k.channels_out==2&&(B[$]=0)):(K[$]=R[0][M],k.channels_out==2&&(B[$]=R[1][M]),++M);for(D=0;D<k.mode_gr;D++)for(L=0;L<k.channels_out;L++)k.l3_side.tt[D][L].block_type=r.SHORT_TYPE;y.mdct_sub48(k,K,B),l(576>=r.FFTOFFSET),l(k.mf_size>=r.BLKSIZE+N.framesize-r.FFTOFFSET),l(k.mf_size>=512+N.framesize-32)}}this.lame_encode_mp3_frame=function(N,R,k,L,D,$){var M,K=s([2,2]);K[0][0]=new u,K[0][1]=new u,K[1][0]=new u,K[1][1]=new u;var B=s([2,2]);B[0][0]=new u,B[0][1]=new u,B[1][0]=new u,B[1][1]=new u;var H,G=[null,null],V=N.internal_flags,Y=a([2,4]),ee=[.5,.5],X=[[0,0],[0,0]],z=[[0,0],[0,0]],W,q,Z;if(G[0]=R,G[1]=k,V.lame_encode_frame_init==0&&O(N,G),V.padding=0,(V.slot_lag-=V.frac_SpF)<0&&(V.slot_lag+=N.out_samplerate,V.padding=1),V.psymodel!=0){var ne,ae=[null,null],ue=0,te=i(2);for(Z=0;Z<V.mode_gr;Z++){for(q=0;q<V.channels_out;q++)ae[q]=G[q],ue=576+Z*576-r.FFTOFFSET;if(N.VBR==n.vbr_mtrh||N.VBR==n.vbr_mt?ne=T.L3psycho_anal_vbr(N,ae,ue,Z,K,B,X[Z],z[Z],Y[Z],te):ne=T.L3psycho_anal_ns(N,ae,ue,Z,K,B,X[Z],z[Z],Y[Z],te),ne!=0)return-4;for(N.mode==p.JOINT_STEREO&&(ee[Z]=Y[Z][2]+Y[Z][3],ee[Z]>0&&(ee[Z]=Y[Z][3]/ee[Z])),q=0;q<V.channels_out;q++){var ce=V.l3_side.tt[Z][q];ce.block_type=te[q],ce.mixed_block_flag=0}}}else for(Z=0;Z<V.mode_gr;Z++)for(q=0;q<V.channels_out;q++)V.l3_side.tt[Z][q].block_type=r.NORM_TYPE,V.l3_side.tt[Z][q].mixed_block_flag=0,z[Z][q]=X[Z][q]=700;if(A(V),y.mdct_sub48(V,G[0],G[1]),V.mode_ext=r.MPG_MD_LR_LR,N.force_ms)V.mode_ext=r.MPG_MD_MS_LR;else if(N.mode==p.JOINT_STEREO){var fe=0,ke=0;for(Z=0;Z<V.mode_gr;Z++)for(q=0;q<V.channels_out;q++)fe+=z[Z][q],ke+=X[Z][q];if(fe<=1*ke){var De=V.l3_side.tt[0],Fe=V.l3_side.tt[V.mode_gr-1];De[0].block_type==De[1].block_type&&Fe[0].block_type==Fe[1].block_type&&(V.mode_ext=r.MPG_MD_MS_LR)}}if(V.mode_ext==g?(H=B,W=z):(H=K,W=X),N.analysis&&V.pinfo!=null)for(Z=0;Z<V.mode_gr;Z++)for(q=0;q<V.channels_out;q++)V.pinfo.ms_ratio[Z]=V.ms_ratio[Z],V.pinfo.ms_ener_ratio[Z]=ee[Z],V.pinfo.blocktype[Z][q]=V.l3_side.tt[Z][q].block_type,V.pinfo.pe[Z][q]=W[Z][q],t.arraycopy(V.l3_side.tt[Z][q].xr,0,V.pinfo.xr[Z][q],0,576),V.mode_ext==g&&(V.pinfo.ers[Z][q]=V.pinfo.ers[Z][q+2],t.arraycopy(V.pinfo.energy[Z][q+2],0,V.pinfo.energy[Z][q],0,V.pinfo.energy[Z][q].length));if(N.VBR==n.vbr_off||N.VBR==n.vbr_abr){var je,Qe;for(je=0;je<18;je++)V.nsPsy.pefirbuf[je]=V.nsPsy.pefirbuf[je+1];for(Qe=0,Z=0;Z<V.mode_gr;Z++)for(q=0;q<V.channels_out;q++)Qe+=W[Z][q];for(V.nsPsy.pefirbuf[18]=Qe,Qe=V.nsPsy.pefirbuf[9],je=0;je<9;je++)Qe+=(V.nsPsy.pefirbuf[je]+V.nsPsy.pefirbuf[18-je])*r.fircoef[je];for(Qe=670*5*V.mode_gr*V.channels_out/Qe,Z=0;Z<V.mode_gr;Z++)for(q=0;q<V.channels_out;q++)W[Z][q]*=Qe}if(V.iteration_loop.iteration_loop(N,W,ee,H),_.format_bitstream(N),M=_.copy_buffer(V,L,D,$,1),N.bWriteVbrTag&&S.addVbrFrame(N),N.analysis&&V.pinfo!=null){for(q=0;q<V.channels_out;q++){var Ze;for(Ze=0;Ze<h;Ze++)V.pinfo.pcmdata[q][Ze]=V.pinfo.pcmdata[q][Ze+N.framesize];for(Ze=h;Ze<1600;Ze++)V.pinfo.pcmdata[q][Ze]=G[q][Ze-h]}E.set_frame_pinfo(N,H)}return C(V),M}}return Ch=r,Ch}var KS=jn,$b=KS.Util,Mb=KS.new_float,cs=na();function OTe(){var e=Mb(cs.BLKSIZE),t=Mb(cs.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(a,i,l){var r=0,d,u,p;l<<=1;var h=i+l;d=4;do{var g,_,T,S,E,y,A;A=d>>1,S=d,E=d<<1,y=E+S,d=E<<1,u=i,p=u+A;do{var C,O,N,R;O=a[u+0]-a[u+S],C=a[u+0]+a[u+S],R=a[u+E]-a[u+y],N=a[u+E]+a[u+y],a[u+E]=C-N,a[u+0]=C+N,a[u+y]=O-R,a[u+S]=O+R,O=a[p+0]-a[p+S],C=a[p+0]+a[p+S],R=$b.SQRT2*a[p+y],N=$b.SQRT2*a[p+E],a[p+E]=C-N,a[p+0]=C+N,a[p+y]=O-R,a[p+S]=O+R,p+=d,u+=d}while(u<h);for(_=n[r+0],g=n[r+1],T=1;T<A;T++){var k,L;k=1-2*g*g,L=2*g*_,u=i+T,p=i+S-T;do{var D,$,M,C,O,K,N,B,R,H;$=L*a[u+S]-k*a[p+S],D=k*a[u+S]+L*a[p+S],O=a[u+0]-D,C=a[u+0]+D,K=a[p+0]-$,M=a[p+0]+$,$=L*a[u+y]-k*a[p+y],D=k*a[u+y]+L*a[p+y],R=a[u+E]-D,N=a[u+E]+D,H=a[p+E]-$,B=a[p+E]+$,$=g*N-_*H,D=_*N+g*H,a[u+E]=C-D,a[u+0]=C+D,a[p+y]=K-$,a[p+S]=K+$,$=_*B-g*R,D=g*B+_*R,a[p+E]=M-D,a[p+0]=M+D,a[u+y]=O-$,a[u+S]=O+$,p+=d,u+=d}while(u<h);k=_,_=k*n[r+0]-g*n[r+1],g=k*n[r+1]+g*n[r+0]}r+=2}while(d<l)}var o=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(a,i,l,r,d){for(var u=0;u<3;u++){var p=cs.BLKSIZE_s/2,h=65535&576/3*(u+1),g=cs.BLKSIZE_s/8-1;do{var _,T,S,E,y,A=o[g<<2]&255;_=t[A]*r[l][d+A+h],y=t[127-A]*r[l][d+A+h+128],T=_-y,_=_+y,S=t[A+64]*r[l][d+A+h+64],y=t[63-A]*r[l][d+A+h+192],E=S-y,S=S+y,p-=4,i[u][p+0]=_+S,i[u][p+2]=_-S,i[u][p+1]=T+E,i[u][p+3]=T-E,_=t[A+1]*r[l][d+A+h+1],y=t[126-A]*r[l][d+A+h+129],T=_-y,_=_+y,S=t[A+65]*r[l][d+A+h+65],y=t[62-A]*r[l][d+A+h+193],E=S-y,S=S+y,i[u][p+cs.BLKSIZE_s/2+0]=_+S,i[u][p+cs.BLKSIZE_s/2+2]=_-S,i[u][p+cs.BLKSIZE_s/2+1]=T+E,i[u][p+cs.BLKSIZE_s/2+3]=T-E}while(--g>=0);s(i[u],p,cs.BLKSIZE_s/2)}},this.fft_long=function(a,i,l,r,d){var u=cs.BLKSIZE/8-1,p=cs.BLKSIZE/2;do{var h,g,_,T,S,E=o[u]&255;h=e[E]*r[l][d+E],S=e[E+512]*r[l][d+E+512],g=h-S,h=h+S,_=e[E+256]*r[l][d+E+256],S=e[E+768]*r[l][d+E+768],T=_-S,_=_+S,p-=4,i[p+0]=h+_,i[p+2]=h-_,i[p+1]=g+T,i[p+3]=g-T,h=e[E+1]*r[l][d+E+1],S=e[E+513]*r[l][d+E+513],g=h-S,h=h+S,_=e[E+257]*r[l][d+E+257],S=e[E+769]*r[l][d+E+769],T=_-S,_=_+S,i[p+cs.BLKSIZE/2+0]=h+_,i[p+cs.BLKSIZE/2+2]=h-_,i[p+cs.BLKSIZE/2+1]=g+T,i[p+cs.BLKSIZE/2+3]=g-T}while(--u>=0);s(i,p,cs.BLKSIZE/2)},this.init_fft=function(a){for(var i=0;i<cs.BLKSIZE;i++)e[i]=.42-.5*Math.cos(2*Math.PI*(i+.5)/cs.BLKSIZE)+.08*Math.cos(4*Math.PI*(i+.5)/cs.BLKSIZE);for(var i=0;i<cs.BLKSIZE_s/2;i++)t[i]=.5*(1-Math.cos(2*Math.PI*(i+.5)/cs.BLKSIZE_s))}}var xTe=OTe,ti=jn,$l=ti.VbrMode,kb=ti.Float,Ml=ti.ShortBlock,ga=ti.Util,wTe=ti.Arrays,bs=ti.new_float,Ma=ti.new_float_n,Ui=ti.new_int,tn=ti.assert,RTe=xTe,tt=na();function $Te(){var e=jc,t=new RTe,n=2.302585092994046,s=2,o=16,a=2,i=16,l=.34,r=1/(14752*14752)/(tt.BLKSIZE/2),d=.01,u=.8,p=.6,h=.3,g=3.5,_=21,T=.2302585093;function S(se,le){for(var _e=0,Ie=0;Ie<tt.BLKSIZE/2;++Ie)_e+=se[Ie]*le.ATH.eql_w[Ie];return _e*=r,_e}function E(se,le,_e,Ie,Pe,Ne,ve,me,Oe,Ge,Se){var We=se.internal_flags;if(Oe<2)t.fft_long(We,Ie[Pe],Oe,Ge,Se),t.fft_short(We,Ne[ve],Oe,Ge,Se);else if(Oe==2){for(var mt=tt.BLKSIZE-1;mt>=0;--mt){var Nt=Ie[Pe+0][mt],nt=Ie[Pe+1][mt];Ie[Pe+0][mt]=(Nt+nt)*ga.SQRT2*.5,Ie[Pe+1][mt]=(Nt-nt)*ga.SQRT2*.5}for(var St=2;St>=0;--St)for(var mt=tt.BLKSIZE_s-1;mt>=0;--mt){var Nt=Ne[ve+0][St][mt],nt=Ne[ve+1][St][mt];Ne[ve+0][St][mt]=(Nt+nt)*ga.SQRT2*.5,Ne[ve+1][St][mt]=(Nt-nt)*ga.SQRT2*.5}}le[0]=Ie[Pe+0][0],le[0]*=le[0];for(var mt=tt.BLKSIZE/2-1;mt>=0;--mt){var qe=Ie[Pe+0][tt.BLKSIZE/2-mt],bt=Ie[Pe+0][tt.BLKSIZE/2+mt];le[tt.BLKSIZE/2-mt]=(qe*qe+bt*bt)*.5}for(var St=2;St>=0;--St){_e[St][0]=Ne[ve+0][St][0],_e[St][0]*=_e[St][0];for(var mt=tt.BLKSIZE_s/2-1;mt>=0;--mt){var qe=Ne[ve+0][St][tt.BLKSIZE_s/2-mt],bt=Ne[ve+0][St][tt.BLKSIZE_s/2+mt];_e[St][tt.BLKSIZE_s/2-mt]=(qe*qe+bt*bt)*.5}}{for(var Vt=0,mt=11;mt<tt.HBLKSIZE;mt++)Vt+=le[mt];We.tot_ener[Oe]=Vt}if(se.analysis){for(var mt=0;mt<tt.HBLKSIZE;mt++)We.pinfo.energy[me][Oe][mt]=We.pinfo.energy_save[Oe][mt],We.pinfo.energy_save[Oe][mt]=le[mt];We.pinfo.pe[me][Oe]=We.pe[Oe]}se.athaa_loudapprox==2&&Oe<2&&(We.loudness_sq[me][Oe]=We.loudness_sq_save[Oe],We.loudness_sq_save[Oe]=S(le,We))}var y=8,A=23,C=15,O,N,R,k=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function L(){O=Math.pow(10,(y+1)/16),N=Math.pow(10,(A+1)/16),R=Math.pow(10,C/10)}var D=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],$=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],M=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function K(se,le,_e,Ie,Pe,Ne){var ve;if(le>se)if(le<se*N)ve=le/se;else return se+le;else{if(se>=le*N)return se+le;ve=se/le}if(se+=le,Ie+3<=6){if(ve>=O)return se;var me=0|ga.FAST_LOG10_X(ve,16);return se*$[me]}var me=0|ga.FAST_LOG10_X(ve,16);if(le=Pe.ATH.cb_l[_e]*Pe.ATH.adjust,se<R*le){if(se>le){var Oe,Ge;return Oe=1,me<=13&&(Oe=M[me]),Ge=ga.FAST_LOG10_X(se/le,10/15),se*((D[me]-Oe)*Ge+Oe)}return me>13?se:se*M[me]}return se*D[me]}var B=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function H(se,le,_e){var Ie;if(se<0&&(se=0),le<0&&(le=0),se<=0)return le;if(le<=0)return se;if(le>se?Ie=le/se:Ie=se/le,-2<=_e&&_e<=2){if(Ie>=O)return se+le;var Pe=0|ga.FAST_LOG10_X(Ie,16);return(se+le)*B[Pe]}return Ie<N?se+le:(se<le&&(se=le),se)}function G(se,le){var _e=se.internal_flags;if(_e.channels_out>1){for(var Ie=0;Ie<tt.SBMAX_l;Ie++){var Pe=_e.thm[0].l[Ie],Ne=_e.thm[1].l[Ie];_e.thm[0].l[Ie]+=Ne*le,_e.thm[1].l[Ie]+=Pe*le}for(var Ie=0;Ie<tt.SBMAX_s;Ie++)for(var ve=0;ve<3;ve++){var Pe=_e.thm[0].s[Ie][ve],Ne=_e.thm[1].s[Ie][ve];_e.thm[0].s[Ie][ve]+=Ne*le,_e.thm[1].s[Ie][ve]+=Pe*le}}}function V(se){for(var le=0;le<tt.SBMAX_l;le++)if(!(se.thm[0].l[le]>1.58*se.thm[1].l[le]||se.thm[1].l[le]>1.58*se.thm[0].l[le])){var _e=se.mld_l[le]*se.en[3].l[le],Ie=Math.max(se.thm[2].l[le],Math.min(se.thm[3].l[le],_e));_e=se.mld_l[le]*se.en[2].l[le];var Pe=Math.max(se.thm[3].l[le],Math.min(se.thm[2].l[le],_e));se.thm[2].l[le]=Ie,se.thm[3].l[le]=Pe}for(var le=0;le<tt.SBMAX_s;le++)for(var Ne=0;Ne<3;Ne++)if(!(se.thm[0].s[le][Ne]>1.58*se.thm[1].s[le][Ne]||se.thm[1].s[le][Ne]>1.58*se.thm[0].s[le][Ne])){var _e=se.mld_s[le]*se.en[3].s[le][Ne],Ie=Math.max(se.thm[2].s[le][Ne],Math.min(se.thm[3].s[le][Ne],_e));_e=se.mld_s[le]*se.en[2].s[le][Ne];var Pe=Math.max(se.thm[3].s[le][Ne],Math.min(se.thm[2].s[le][Ne],_e));se.thm[2].s[le][Ne]=Ie,se.thm[3].s[le][Ne]=Pe}}function Y(se,le,_e){var Ie=le,Pe=Math.pow(10,_e);le*=2,Ie*=2;for(var Ne=0;Ne<tt.SBMAX_l;Ne++){var ve,me,Oe,Ge;if(Ge=se.ATH.cb_l[se.bm_l[Ne]]*Pe,ve=Math.min(Math.max(se.thm[0].l[Ne],Ge),Math.max(se.thm[1].l[Ne],Ge)),me=Math.max(se.thm[2].l[Ne],Ge),Oe=Math.max(se.thm[3].l[Ne],Ge),ve*le<me+Oe){var Se=ve*Ie/(me+Oe);me*=Se,Oe*=Se}se.thm[2].l[Ne]=Math.min(me,se.thm[2].l[Ne]),se.thm[3].l[Ne]=Math.min(Oe,se.thm[3].l[Ne])}Pe*=tt.BLKSIZE_s/tt.BLKSIZE;for(var Ne=0;Ne<tt.SBMAX_s;Ne++)for(var We=0;We<3;We++){var ve,me,Oe,Ge;if(Ge=se.ATH.cb_s[se.bm_s[Ne]]*Pe,ve=Math.min(Math.max(se.thm[0].s[Ne][We],Ge),Math.max(se.thm[1].s[Ne][We],Ge)),me=Math.max(se.thm[2].s[Ne][We],Ge),Oe=Math.max(se.thm[3].s[Ne][We],Ge),ve*le<me+Oe){var Se=ve*le/(me+Oe);me*=Se,Oe*=Se}se.thm[2].s[Ne][We]=Math.min(se.thm[2].s[Ne][We],me),se.thm[3].s[Ne][We]=Math.min(se.thm[3].s[Ne][We],Oe)}}function ee(se,le,_e,Ie,Pe){var Ne,ve,me=0,Oe=0;for(Ne=ve=0;Ne<tt.SBMAX_s;++ve,++Ne){for(var Ge=se.bo_s[Ne],Se=se.npart_s,We=Ge<Se?Ge:Se;ve<We;)tn(le[ve]>=0),tn(_e[ve]>=0),me+=le[ve],Oe+=_e[ve],ve++;if(se.en[Ie].s[Ne][Pe]=me,se.thm[Ie].s[Ne][Pe]=Oe,ve>=Se){++Ne;break}tn(le[ve]>=0),tn(_e[ve]>=0);{var mt=se.PSY.bo_s_weight[Ne],Nt=1-mt;me=mt*le[ve],Oe=mt*_e[ve],se.en[Ie].s[Ne][Pe]+=me,se.thm[Ie].s[Ne][Pe]+=Oe,me=Nt*le[ve],Oe=Nt*_e[ve]}}for(;Ne<tt.SBMAX_s;++Ne)se.en[Ie].s[Ne][Pe]=0,se.thm[Ie].s[Ne][Pe]=0}function X(se,le,_e,Ie){var Pe,Ne,ve=0,me=0;for(Pe=Ne=0;Pe<tt.SBMAX_l;++Ne,++Pe){for(var Oe=se.bo_l[Pe],Ge=se.npart_l,Se=Oe<Ge?Oe:Ge;Ne<Se;)tn(le[Ne]>=0),tn(_e[Ne]>=0),ve+=le[Ne],me+=_e[Ne],Ne++;if(se.en[Ie].l[Pe]=ve,se.thm[Ie].l[Pe]=me,Ne>=Ge){++Pe;break}tn(le[Ne]>=0),tn(_e[Ne]>=0);{var We=se.PSY.bo_l_weight[Pe],mt=1-We;ve=We*le[Ne],me=We*_e[Ne],se.en[Ie].l[Pe]+=ve,se.thm[Ie].l[Pe]+=me,ve=mt*le[Ne],me=mt*_e[Ne]}}for(;Pe<tt.SBMAX_l;++Pe)se.en[Ie].l[Pe]=0,se.thm[Ie].l[Pe]=0}function z(se,le,_e,Ie,Pe,Ne){var ve=se.internal_flags,me,Oe;for(Oe=me=0;Oe<ve.npart_s;++Oe){for(var Ge=0,Se=ve.numlines_s[Oe],We=0;We<Se;++We,++me){var mt=le[Ne][me];Ge+=mt}_e[Oe]=Ge}for(tn(Oe==ve.npart_s),me=Oe=0;Oe<ve.npart_s;Oe++){var Nt=ve.s3ind_s[Oe][0],nt=ve.s3_ss[me++]*_e[Nt];for(++Nt;Nt<=ve.s3ind_s[Oe][1];)nt+=ve.s3_ss[me]*_e[Nt],++me,++Nt;{var St=a*ve.nb_s1[Pe][Oe];Ie[Oe]=Math.min(nt,St)}if(ve.blocktype_old[Pe&1]==tt.SHORT_TYPE){var St=i*ve.nb_s2[Pe][Oe],qe=Ie[Oe];Ie[Oe]=Math.min(St,qe)}ve.nb_s2[Pe][Oe]=ve.nb_s1[Pe][Oe],ve.nb_s1[Pe][Oe]=nt,tn(Ie[Oe]>=0)}for(;Oe<=tt.CBANDS;++Oe)_e[Oe]=0,Ie[Oe]=0}function W(se,le,_e,Ie){var Pe=se.internal_flags;se.short_blocks==Ml.short_block_coupled&&!(le[0]!=0&&le[1]!=0)&&(le[0]=le[1]=0);for(var Ne=0;Ne<Pe.channels_out;Ne++)Ie[Ne]=tt.NORM_TYPE,se.short_blocks==Ml.short_block_dispensed&&(le[Ne]=1),se.short_blocks==Ml.short_block_forced&&(le[Ne]=0),le[Ne]!=0?(tn(Pe.blocktype_old[Ne]!=tt.START_TYPE),Pe.blocktype_old[Ne]==tt.SHORT_TYPE&&(Ie[Ne]=tt.STOP_TYPE)):(Ie[Ne]=tt.SHORT_TYPE,Pe.blocktype_old[Ne]==tt.NORM_TYPE&&(Pe.blocktype_old[Ne]=tt.START_TYPE),Pe.blocktype_old[Ne]==tt.STOP_TYPE&&(Pe.blocktype_old[Ne]=tt.SHORT_TYPE)),_e[Ne]=Pe.blocktype_old[Ne],Pe.blocktype_old[Ne]=Ie[Ne]}function q(se,le,_e){return _e>=1?se:_e<=0?le:le>0?Math.pow(se/le,_e)*le:0}var Z=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function ne(se,le){for(var _e=309.07,Ie=0;Ie<tt.SBMAX_s-1;Ie++)for(var Pe=0;Pe<3;Pe++){var Ne=se.thm.s[Ie][Pe];if(Ne>0){var ve=Ne*le,me=se.en.s[Ie][Pe];me>ve&&(me>ve*1e10?_e+=Z[Ie]*(10*n):_e+=Z[Ie]*ga.FAST_LOG10(me/ve))}}return _e}var ae=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ue(se,le){for(var _e=281.0575,Ie=0;Ie<tt.SBMAX_l-1;Ie++){var Pe=se.thm.l[Ie];if(Pe>0){var Ne=Pe*le,ve=se.en.l[Ie];ve>Ne&&(ve>Ne*1e10?_e+=ae[Ie]*(10*n):_e+=ae[Ie]*ga.FAST_LOG10(ve/Ne))}}return _e}function te(se,le,_e,Ie,Pe){var Ne,ve;for(Ne=ve=0;Ne<se.npart_l;++Ne){var me=0,Oe=0,Ge;for(Ge=0;Ge<se.numlines_l[Ne];++Ge,++ve){var Se=le[ve];me+=Se,Oe<Se&&(Oe=Se)}_e[Ne]=me,Ie[Ne]=Oe,Pe[Ne]=me*se.rnumlines_l[Ne],tn(se.rnumlines_l[Ne]>=0),tn(_e[Ne]>=0),tn(Ie[Ne]>=0),tn(Pe[Ne]>=0)}}function ce(se,le,_e,Ie){var Pe=k.length-1,Ne=0,ve=_e[Ne]+_e[Ne+1];if(ve>0){var me=le[Ne];me<le[Ne+1]&&(me=le[Ne+1]),tn(se.numlines_l[Ne]+se.numlines_l[Ne+1]-1>0),ve=20*(me*2-ve)/(ve*(se.numlines_l[Ne]+se.numlines_l[Ne+1]-1));var Oe=0|ve;Oe>Pe&&(Oe=Pe),Ie[Ne]=Oe}else Ie[Ne]=0;for(Ne=1;Ne<se.npart_l-1;Ne++)if(ve=_e[Ne-1]+_e[Ne]+_e[Ne+1],ve>0){var me=le[Ne-1];me<le[Ne]&&(me=le[Ne]),me<le[Ne+1]&&(me=le[Ne+1]),tn(se.numlines_l[Ne-1]+se.numlines_l[Ne]+se.numlines_l[Ne+1]-1>0),ve=20*(me*3-ve)/(ve*(se.numlines_l[Ne-1]+se.numlines_l[Ne]+se.numlines_l[Ne+1]-1));var Oe=0|ve;Oe>Pe&&(Oe=Pe),Ie[Ne]=Oe}else Ie[Ne]=0;if(tn(Ne==se.npart_l-1),ve=_e[Ne-1]+_e[Ne],ve>0){var me=le[Ne-1];me<le[Ne]&&(me=le[Ne]),tn(se.numlines_l[Ne-1]+se.numlines_l[Ne]-1>0),ve=20*(me*2-ve)/(ve*(se.numlines_l[Ne-1]+se.numlines_l[Ne]-1));var Oe=0|ve;Oe>Pe&&(Oe=Pe),Ie[Ne]=Oe}else Ie[Ne]=0;tn(Ne==se.npart_l-1)}var fe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(se,le,_e,Ie,Pe,Ne,ve,me,Oe,Ge){var Se=se.internal_flags,We=Ma([2,tt.BLKSIZE]),mt=Ma([2,3,tt.BLKSIZE_s]),Nt=bs(tt.CBANDS+1),nt=bs(tt.CBANDS+1),St=bs(tt.CBANDS+2),qe=Ui(2),bt=Ui(2),Vt,dt,It,rt,wt,pn,vt,Ft,zt=Ma([2,576]),un,fs=Ui(tt.CBANDS+2),Pn=Ui(tt.CBANDS+2);for(wTe.fill(Pn,0),Vt=Se.channels_out,se.mode==e.JOINT_STEREO&&(Vt=4),se.VBR==$l.vbr_off?un=Se.ResvMax==0?0:Se.ResvSize/Se.ResvMax*.5:se.VBR==$l.vbr_rh||se.VBR==$l.vbr_mtrh||se.VBR==$l.vbr_mt?un=.6:un=1,dt=0;dt<Se.channels_out;dt++){var An=le[dt],rs=_e+576-350-_+192;for(rt=0;rt<576;rt++){var gs,_s;for(gs=An[rs+rt+10],_s=0,wt=0;wt<(_-1)/2-1;wt+=2)gs+=fe[wt]*(An[rs+rt+wt]+An[rs+rt+_-wt]),_s+=fe[wt+1]*(An[rs+rt+wt+1]+An[rs+rt+_-wt-1]);zt[dt][rt]=gs+_s}Pe[Ie][dt].en.assign(Se.en[dt]),Pe[Ie][dt].thm.assign(Se.thm[dt]),Vt>2&&(Ne[Ie][dt].en.assign(Se.en[dt+2]),Ne[Ie][dt].thm.assign(Se.thm[dt+2]))}for(dt=0;dt<Vt;dt++){var Be,Ye,Xe=bs(12),pt=[0,0,0,0],Et=bs(12),ze=1,Rt,Tn=bs(tt.CBANDS),ot=bs(tt.CBANDS),Tt=[0,0,0,0],Yt=bs(tt.HBLKSIZE),Is=Ma([3,tt.HBLKSIZE_s]);for(tn(Se.npart_s<=tt.CBANDS),tn(Se.npart_l<=tt.CBANDS),rt=0;rt<3;rt++)Xe[rt]=Se.nsPsy.last_en_subshort[dt][rt+6],tn(Se.nsPsy.last_en_subshort[dt][rt+4]>0),Et[rt]=Xe[rt]/Se.nsPsy.last_en_subshort[dt][rt+4],pt[0]+=Xe[rt];if(dt==2)for(rt=0;rt<576;rt++){var pa,Hs;pa=zt[0][rt],Hs=zt[1][rt],zt[0][rt]=pa+Hs,zt[1][rt]=pa-Hs}{var Cs=zt[dt&1],$o=0;for(rt=0;rt<9;rt++){for(var Lm=$o+64,vs=1;$o<Lm;$o++)vs<Math.abs(Cs[$o])&&(vs=Math.abs(Cs[$o]));Se.nsPsy.last_en_subshort[dt][rt]=Xe[rt+3]=vs,pt[1+rt/3]+=vs,vs>Xe[rt+3-2]?(tn(Xe[rt+3-2]>0),vs=vs/Xe[rt+3-2]):Xe[rt+3-2]>vs*10?vs=Xe[rt+3-2]/(vs*10):vs=0,Et[rt+3]=vs}}if(se.analysis){var hr=Et[0];for(rt=1;rt<12;rt++)hr<Et[rt]&&(hr=Et[rt]);Se.pinfo.ers[Ie][dt]=Se.pinfo.ers_save[dt],Se.pinfo.ers_save[dt]=hr}for(Rt=dt==3?Se.nsPsy.attackthre_s:Se.nsPsy.attackthre,rt=0;rt<12;rt++)Tt[rt/3]==0&&Et[rt]>Rt&&(Tt[rt/3]=rt%3+1);for(rt=1;rt<4;rt++){var fr;pt[rt-1]>pt[rt]?(tn(pt[rt]>0),fr=pt[rt-1]/pt[rt]):(tn(pt[rt-1]>0),fr=pt[rt]/pt[rt-1]),fr<1.7&&(Tt[rt]=0,rt==1&&(Tt[0]=0))}for(Tt[0]!=0&&Se.nsPsy.lastAttacks[dt]!=0&&(Tt[0]=0),(Se.nsPsy.lastAttacks[dt]==3||Tt[0]+Tt[1]+Tt[2]+Tt[3]!=0)&&(ze=0,Tt[1]!=0&&Tt[0]!=0&&(Tt[1]=0),Tt[2]!=0&&Tt[1]!=0&&(Tt[2]=0),Tt[3]!=0&&Tt[2]!=0&&(Tt[3]=0)),dt<2?bt[dt]=ze:ze==0&&(bt[0]=bt[1]=0),Oe[dt]=Se.tot_ener[dt],Ye=mt,Be=We,E(se,Yt,Is,Be,dt&1,Ye,dt&1,Ie,dt,le,_e),te(Se,Yt,Nt,Tn,ot),ce(Se,Tn,ot,fs),Ft=0;Ft<3;Ft++){var gr,Ks;for(z(se,Is,nt,St,dt,Ft),ee(Se,nt,St,dt,Ft),vt=0;vt<tt.SBMAX_s;vt++){if(Ks=Se.thm[dt].s[vt][Ft],Ks*=u,Tt[Ft]>=2||Tt[Ft+1]==1){var Al=Ft!=0?Ft-1:2,vs=q(Se.thm[dt].s[vt][Al],Ks,p*un);Ks=Math.min(Ks,vs)}if(Tt[Ft]==1){var Al=Ft!=0?Ft-1:2,vs=q(Se.thm[dt].s[vt][Al],Ks,h*un);Ks=Math.min(Ks,vs)}else if(Ft!=0&&Tt[Ft-1]==3||Ft==0&&Se.nsPsy.lastAttacks[dt]==3){var Al=Ft!=2?Ft+1:0,vs=q(Se.thm[dt].s[vt][Al],Ks,h*un);Ks=Math.min(Ks,vs)}gr=Xe[Ft*3+3]+Xe[Ft*3+4]+Xe[Ft*3+5],Xe[Ft*3+5]*6<gr&&(Ks*=.5,Xe[Ft*3+4]*6<gr&&(Ks*=.5)),Se.thm[dt].s[vt][Ft]=Ks}}for(Se.nsPsy.lastAttacks[dt]=Tt[2],pn=0,It=0;It<Se.npart_l;It++){for(var Mo=Se.s3ind[It][0],_r=Nt[Mo]*k[fs[Mo]],ko=Se.s3_ll[pn++]*_r;++Mo<=Se.s3ind[It][1];)_r=Nt[Mo]*k[fs[Mo]],ko=K(ko,Se.s3_ll[pn++]*_r,Mo,Mo-It,Se);ko*=.158489319246111,Se.blocktype_old[dt&1]==tt.SHORT_TYPE?St[It]=ko:St[It]=q(Math.min(ko,Math.min(s*Se.nb_1[dt][It],o*Se.nb_2[dt][It])),ko,un),Se.nb_2[dt][It]=Se.nb_1[dt][It],Se.nb_1[dt][It]=ko}for(;It<=tt.CBANDS;++It)Nt[It]=0,St[It]=0;X(Se,Nt,St,dt)}if((se.mode==e.STEREO||se.mode==e.JOINT_STEREO)&&se.interChRatio>0&&G(se,se.interChRatio),se.mode==e.JOINT_STEREO){var ki;V(Se),ki=se.msfix,Math.abs(ki)>0&&Y(Se,ki,se.ATHlower*Se.ATH.adjust)}for(W(se,bt,Ge,qe),dt=0;dt<Vt;dt++){var Li,Di=0,vr,co;dt>1?(Li=me,Di=-2,vr=tt.NORM_TYPE,(Ge[0]==tt.SHORT_TYPE||Ge[1]==tt.SHORT_TYPE)&&(vr=tt.SHORT_TYPE),co=Ne[Ie][dt-2]):(Li=ve,Di=0,vr=Ge[dt],co=Pe[Ie][dt]),vr==tt.SHORT_TYPE?Li[Di+dt]=ne(co,Se.masking_lower):Li[Di+dt]=ue(co,Se.masking_lower),se.analysis&&(Se.pinfo.pe[Ie][dt]=Li[Di+dt])}return 0};function ke(se,le,_e,Ie,Pe,Ne,ve,me){var Oe=se.internal_flags;if(Ie<2)t.fft_long(Oe,ve[me],Ie,le,_e);else if(Ie==2)for(var Ge=tt.BLKSIZE-1;Ge>=0;--Ge){var Se=ve[me+0][Ge],We=ve[me+1][Ge];ve[me+0][Ge]=(Se+We)*ga.SQRT2*.5,ve[me+1][Ge]=(Se-We)*ga.SQRT2*.5}Ne[0]=ve[me+0][0],Ne[0]*=Ne[0];for(var Ge=tt.BLKSIZE/2-1;Ge>=0;--Ge){var mt=ve[me+0][tt.BLKSIZE/2-Ge],Nt=ve[me+0][tt.BLKSIZE/2+Ge];Ne[tt.BLKSIZE/2-Ge]=(mt*mt+Nt*Nt)*.5}{for(var nt=0,Ge=11;Ge<tt.HBLKSIZE;Ge++)nt+=Ne[Ge];Oe.tot_ener[Ie]=nt}if(se.analysis){for(var Ge=0;Ge<tt.HBLKSIZE;Ge++)Oe.pinfo.energy[Pe][Ie][Ge]=Oe.pinfo.energy_save[Ie][Ge],Oe.pinfo.energy_save[Ie][Ge]=Ne[Ge];Oe.pinfo.pe[Pe][Ie]=Oe.pe[Ie]}}function De(se,le,_e,Ie,Pe,Ne,ve,me){var Oe=se.internal_flags;if(Pe==0&&Ie<2&&t.fft_short(Oe,ve[me],Ie,le,_e),Ie==2)for(var Ge=tt.BLKSIZE_s-1;Ge>=0;--Ge){var Se=ve[me+0][Pe][Ge],We=ve[me+1][Pe][Ge];ve[me+0][Pe][Ge]=(Se+We)*ga.SQRT2*.5,ve[me+1][Pe][Ge]=(Se-We)*ga.SQRT2*.5}Ne[Pe][0]=ve[me+0][Pe][0],Ne[Pe][0]*=Ne[Pe][0];for(var Ge=tt.BLKSIZE_s/2-1;Ge>=0;--Ge){var mt=ve[me+0][Pe][tt.BLKSIZE_s/2-Ge],Nt=ve[me+0][Pe][tt.BLKSIZE_s/2+Ge];Ne[Pe][tt.BLKSIZE_s/2-Ge]=(mt*mt+Nt*Nt)*.5}}function Fe(se,le,_e,Ie){var Pe=se.internal_flags;se.athaa_loudapprox==2&&_e<2&&(Pe.loudness_sq[le][_e]=Pe.loudness_sq_save[_e],Pe.loudness_sq_save[_e]=S(Ie,Pe))}var je=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Qe(se,le,_e,Ie,Pe,Ne,ve,me,Oe,Ge){for(var Se=Ma([2,576]),We=se.internal_flags,mt=We.channels_out,Nt=se.mode==e.JOINT_STEREO?4:mt,nt=0;nt<mt;nt++){firbuf=le[nt];for(var St=_e+576-350-_+192,qe=0;qe<576;qe++){var bt,Vt;bt=firbuf[St+qe+10],Vt=0;for(var dt=0;dt<(_-1)/2-1;dt+=2)bt+=je[dt]*(firbuf[St+qe+dt]+firbuf[St+qe+_-dt]),Vt+=je[dt+1]*(firbuf[St+qe+dt+1]+firbuf[St+qe+_-dt-1]);Se[nt][qe]=bt+Vt}Pe[Ie][nt].en.assign(We.en[nt]),Pe[Ie][nt].thm.assign(We.thm[nt]),Nt>2&&(Ne[Ie][nt].en.assign(We.en[nt+2]),Ne[Ie][nt].thm.assign(We.thm[nt+2]))}for(var nt=0;nt<Nt;nt++){var It=bs(12),rt=bs(12),wt=[0,0,0,0],pn=Se[nt&1],vt=0,Ft=nt==3?We.nsPsy.attackthre_s:We.nsPsy.attackthre,zt=1;if(nt==2)for(var qe=0,dt=576;dt>0;++qe,--dt){var un=Se[0][qe],fs=Se[1][qe];Se[0][qe]=un+fs,Se[1][qe]=un-fs}for(var qe=0;qe<3;qe++)rt[qe]=We.nsPsy.last_en_subshort[nt][qe+6],tn(We.nsPsy.last_en_subshort[nt][qe+4]>0),It[qe]=rt[qe]/We.nsPsy.last_en_subshort[nt][qe+4],wt[0]+=rt[qe];for(var qe=0;qe<9;qe++){for(var Pn=vt+64,An=1;vt<Pn;vt++)An<Math.abs(pn[vt])&&(An=Math.abs(pn[vt]));We.nsPsy.last_en_subshort[nt][qe]=rt[qe+3]=An,wt[1+qe/3]+=An,An>rt[qe+3-2]?(tn(rt[qe+3-2]>0),An=An/rt[qe+3-2]):rt[qe+3-2]>An*10?An=rt[qe+3-2]/(An*10):An=0,It[qe+3]=An}for(var qe=0;qe<3;++qe){var rs=rt[qe*3+3]+rt[qe*3+4]+rt[qe*3+5],gs=1;rt[qe*3+5]*6<rs&&(gs*=.5,rt[qe*3+4]*6<rs&&(gs*=.5)),me[nt][qe]=gs}if(se.analysis){for(var _s=It[0],qe=1;qe<12;qe++)_s<It[qe]&&(_s=It[qe]);We.pinfo.ers[Ie][nt]=We.pinfo.ers_save[nt],We.pinfo.ers_save[nt]=_s}for(var qe=0;qe<12;qe++)Oe[nt][qe/3]==0&&It[qe]>Ft&&(Oe[nt][qe/3]=qe%3+1);for(var qe=1;qe<4;qe++){var Be=wt[qe-1],Ye=wt[qe],Xe=Math.max(Be,Ye);Xe<4e4&&Be<1.7*Ye&&Ye<1.7*Be&&(qe==1&&Oe[nt][0]<=Oe[nt][qe]&&(Oe[nt][0]=0),Oe[nt][qe]=0)}Oe[nt][0]<=We.nsPsy.lastAttacks[nt]&&(Oe[nt][0]=0),(We.nsPsy.lastAttacks[nt]==3||Oe[nt][0]+Oe[nt][1]+Oe[nt][2]+Oe[nt][3]!=0)&&(zt=0,Oe[nt][1]!=0&&Oe[nt][0]!=0&&(Oe[nt][1]=0),Oe[nt][2]!=0&&Oe[nt][1]!=0&&(Oe[nt][2]=0),Oe[nt][3]!=0&&Oe[nt][2]!=0&&(Oe[nt][3]=0)),nt<2?Ge[nt]=zt:zt==0&&(Ge[0]=Ge[1]=0),ve[nt]=We.tot_ener[nt]}}function Ze(se,le,_e){if(_e==0)for(var Ie=0;Ie<se.npart_s;Ie++)se.nb_s2[le][Ie]=se.nb_s1[le][Ie],se.nb_s1[le][Ie]=0}function ft(se,le){for(var _e=0;_e<se.npart_l;_e++)se.nb_2[le][_e]=se.nb_1[le][_e],se.nb_1[le][_e]=0}function kt(se,le,_e,Ie){var Pe=k.length-1,Ne=0,ve=_e[Ne]+_e[Ne+1];if(ve>0){var me=le[Ne];me<le[Ne+1]&&(me=le[Ne+1]),tn(se.numlines_s[Ne]+se.numlines_s[Ne+1]-1>0),ve=20*(me*2-ve)/(ve*(se.numlines_s[Ne]+se.numlines_s[Ne+1]-1));var Oe=0|ve;Oe>Pe&&(Oe=Pe),Ie[Ne]=Oe}else Ie[Ne]=0;for(Ne=1;Ne<se.npart_s-1;Ne++)if(ve=_e[Ne-1]+_e[Ne]+_e[Ne+1],tn(Ne+1<se.npart_s),ve>0){var me=le[Ne-1];me<le[Ne]&&(me=le[Ne]),me<le[Ne+1]&&(me=le[Ne+1]),tn(se.numlines_s[Ne-1]+se.numlines_s[Ne]+se.numlines_s[Ne+1]-1>0),ve=20*(me*3-ve)/(ve*(se.numlines_s[Ne-1]+se.numlines_s[Ne]+se.numlines_s[Ne+1]-1));var Oe=0|ve;Oe>Pe&&(Oe=Pe),Ie[Ne]=Oe}else Ie[Ne]=0;if(tn(Ne==se.npart_s-1),ve=_e[Ne-1]+_e[Ne],ve>0){var me=le[Ne-1];me<le[Ne]&&(me=le[Ne]),tn(se.numlines_s[Ne-1]+se.numlines_s[Ne]-1>0),ve=20*(me*2-ve)/(ve*(se.numlines_s[Ne-1]+se.numlines_s[Ne]-1));var Oe=0|ve;Oe>Pe&&(Oe=Pe),Ie[Ne]=Oe}else Ie[Ne]=0;tn(Ne==se.npart_s-1)}function Q(se,le,_e,Ie,Pe,Ne){var ve=se.internal_flags,me=new float[tt.CBANDS],Oe=bs(tt.CBANDS),Ge,Se,We,mt=new int[tt.CBANDS];for(We=Se=0;We<ve.npart_s;++We){var Nt=0,nt=0,St=ve.numlines_s[We];for(Ge=0;Ge<St;++Ge,++Se){var qe=le[Ne][Se];Nt+=qe,nt<qe&&(nt=qe)}_e[We]=Nt,me[We]=nt,Oe[We]=Nt/St,tn(Oe[We]>=0)}for(tn(We==ve.npart_s);We<tt.CBANDS;++We)me[We]=0,Oe[We]=0;for(kt(ve,me,Oe,mt),Se=We=0;We<ve.npart_s;We++){var bt=ve.s3ind_s[We][0],Vt=ve.s3ind_s[We][1],dt,It,rt,wt,pn;for(dt=mt[bt],It=1,wt=ve.s3_ss[Se]*_e[bt]*k[mt[bt]],++Se,++bt;bt<=Vt;)dt+=mt[bt],It+=1,rt=ve.s3_ss[Se]*_e[bt]*k[mt[bt]],wt=H(wt,rt,bt-We),++Se,++bt;dt=(1+2*dt)/(2*It),pn=k[dt]*.5,wt*=pn,Ie[We]=wt,ve.nb_s2[Pe][We]=ve.nb_s1[Pe][We],ve.nb_s1[Pe][We]=wt,rt=me[We],rt*=ve.minval_s[We],rt*=pn,Ie[We]>rt&&(Ie[We]=rt),ve.masking_lower>1&&(Ie[We]*=ve.masking_lower),Ie[We]>_e[We]&&(Ie[We]=_e[We]),ve.masking_lower<1&&(Ie[We]*=ve.masking_lower),tn(Ie[We]>=0)}for(;We<tt.CBANDS;++We)_e[We]=0,Ie[We]=0}function oe(se,le,_e,Ie,Pe){var Ne=bs(tt.CBANDS),ve=bs(tt.CBANDS),me=Ui(tt.CBANDS+2),Oe;te(se,le,_e,Ne,ve),ce(se,Ne,ve,me);var Ge=0;for(Oe=0;Oe<se.npart_l;Oe++){var Se,We,mt,Nt,nt=se.s3ind[Oe][0],St=se.s3ind[Oe][1],qe=0,bt=0;for(qe=me[nt],bt+=1,We=se.s3_ll[Ge]*_e[nt]*k[me[nt]],++Ge,++nt;nt<=St;)qe+=me[nt],bt+=1,Se=se.s3_ll[Ge]*_e[nt]*k[me[nt]],Nt=H(We,Se,nt-Oe),We=Nt,++Ge,++nt;if(qe=(1+2*qe)/(2*bt),mt=k[qe]*.5,We*=mt,se.blocktype_old[Pe&1]==tt.SHORT_TYPE){var Vt=s*se.nb_1[Pe][Oe];Vt>0?Ie[Oe]=Math.min(We,Vt):Ie[Oe]=Math.min(We,_e[Oe]*h)}else{var dt=o*se.nb_2[Pe][Oe],It=s*se.nb_1[Pe][Oe],Vt;dt<=0&&(dt=We),It<=0&&(It=We),se.blocktype_old[Pe&1]==tt.NORM_TYPE?Vt=Math.min(It,dt):Vt=It,Ie[Oe]=Math.min(We,Vt)}se.nb_2[Pe][Oe]=se.nb_1[Pe][Oe],se.nb_1[Pe][Oe]=We,Se=Ne[Oe],Se*=se.minval_l[Oe],Se*=mt,Ie[Oe]>Se&&(Ie[Oe]=Se),se.masking_lower>1&&(Ie[Oe]*=se.masking_lower),Ie[Oe]>_e[Oe]&&(Ie[Oe]=_e[Oe]),se.masking_lower<1&&(Ie[Oe]*=se.masking_lower),tn(Ie[Oe]>=0)}for(;Oe<tt.CBANDS;++Oe)_e[Oe]=0,Ie[Oe]=0}function de(se,le){var _e=se.internal_flags;se.short_blocks==Ml.short_block_coupled&&!(le[0]!=0&&le[1]!=0)&&(le[0]=le[1]=0);for(var Ie=0;Ie<_e.channels_out;Ie++)se.short_blocks==Ml.short_block_dispensed&&(le[Ie]=1),se.short_blocks==Ml.short_block_forced&&(le[Ie]=0)}function Ce(se,le,_e){for(var Ie=se.internal_flags,Pe=0;Pe<Ie.channels_out;Pe++){var Ne=tt.NORM_TYPE;le[Pe]!=0?(tn(Ie.blocktype_old[Pe]!=tt.START_TYPE),Ie.blocktype_old[Pe]==tt.SHORT_TYPE&&(Ne=tt.STOP_TYPE)):(Ne=tt.SHORT_TYPE,Ie.blocktype_old[Pe]==tt.NORM_TYPE&&(Ie.blocktype_old[Pe]=tt.START_TYPE),Ie.blocktype_old[Pe]==tt.STOP_TYPE&&(Ie.blocktype_old[Pe]=tt.SHORT_TYPE)),_e[Pe]=Ie.blocktype_old[Pe],Ie.blocktype_old[Pe]=Ne}}function Ae(se,le,_e,Ie,Pe,Ne,ve){for(var me=Ne*2,Oe=Ne>0?Math.pow(10,Pe):1,Ge,Se,We=0;We<ve;++We){var mt=se[2][We],Nt=se[3][We],nt=le[0][We],St=le[1][We],qe=le[2][We],bt=le[3][We];if(nt<=1.58*St&&St<=1.58*nt){var Vt=_e[We]*Nt,dt=_e[We]*mt;Se=Math.max(qe,Math.min(bt,Vt)),Ge=Math.max(bt,Math.min(qe,dt))}else Se=qe,Ge=bt;if(Ne>0){var It,rt,wt=Ie[We]*Oe;if(It=Math.min(Math.max(nt,wt),Math.max(St,wt)),qe=Math.max(Se,wt),bt=Math.max(Ge,wt),rt=qe+bt,rt>0&&It*me<rt){var pn=It*me/rt;qe*=pn,bt*=pn}Se=Math.min(qe,Se),Ge=Math.min(bt,Ge)}Se>mt&&(Se=mt),Ge>Nt&&(Ge=Nt),le[2][We]=Se,le[3][We]=Ge}}this.L3psycho_anal_vbr=function(se,le,_e,Ie,Pe,Ne,ve,me,Oe,Ge){var Se=se.internal_flags,We,mt,Nt=bs(tt.HBLKSIZE),nt=Ma([3,tt.HBLKSIZE_s]),St=Ma([2,tt.BLKSIZE]),qe=Ma([2,3,tt.BLKSIZE_s]),bt=Ma([4,tt.CBANDS]),Vt=Ma([4,tt.CBANDS]),dt=Ma([4,3]),It=.6,rt=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],wt=Ui(2),pn=se.mode==e.JOINT_STEREO?4:Se.channels_out;Qe(se,le,_e,Ie,Pe,Ne,Oe,dt,rt,wt),de(se,wt);{for(var vt=0;vt<pn;vt++){var Ft=vt&1;We=St,ke(se,le,_e,vt,Ie,Nt,We,Ft),Fe(se,Ie,vt,Nt),wt[Ft]!=0?oe(Se,Nt,bt[vt],Vt[vt],vt):ft(Se,vt)}wt[0]+wt[1]==2&&se.mode==e.JOINT_STEREO&&Ae(bt,Vt,Se.mld_cb_l,Se.ATH.cb_l,se.ATHlower*Se.ATH.adjust,se.msfix,Se.npart_l);for(var vt=0;vt<pn;vt++){var Ft=vt&1;wt[Ft]!=0&&X(Se,bt[vt],Vt[vt],vt)}}{for(var zt=0;zt<3;zt++){for(var vt=0;vt<pn;++vt){var Ft=vt&1;wt[Ft]!=0?Ze(Se,vt,zt):(mt=qe,De(se,le,_e,vt,zt,nt,mt,Ft),Q(se,nt,bt[vt],Vt[vt],vt,zt))}wt[0]+wt[1]==0&&se.mode==e.JOINT_STEREO&&Ae(bt,Vt,Se.mld_cb_s,Se.ATH.cb_s,se.ATHlower*Se.ATH.adjust,se.msfix,Se.npart_s);for(var vt=0;vt<pn;++vt){var Ft=vt&1;wt[Ft]==0&&ee(Se,bt[vt],Vt[vt],vt,zt)}}for(var vt=0;vt<pn;vt++){var Ft=vt&1;if(wt[Ft]==0)for(var un=0;un<tt.SBMAX_s;un++){for(var fs=bs(3),zt=0;zt<3;zt++){var Pn=Se.thm[vt].s[un][zt];if(Pn*=u,rt[vt][zt]>=2||rt[vt][zt+1]==1){var An=zt!=0?zt-1:2,rs=q(Se.thm[vt].s[un][An],Pn,p*It);Pn=Math.min(Pn,rs)}else if(rt[vt][zt]==1){var An=zt!=0?zt-1:2,rs=q(Se.thm[vt].s[un][An],Pn,h*It);Pn=Math.min(Pn,rs)}else if(zt!=0&&rt[vt][zt-1]==3||zt==0&&Se.nsPsy.lastAttacks[vt]==3){var An=zt!=2?zt+1:0,rs=q(Se.thm[vt].s[un][An],Pn,h*It);Pn=Math.min(Pn,rs)}Pn*=dt[vt][zt],fs[zt]=Pn}for(var zt=0;zt<3;zt++)Se.thm[vt].s[un][zt]=fs[zt]}}}for(var vt=0;vt<pn;vt++)Se.nsPsy.lastAttacks[vt]=rt[vt][2];Ce(se,wt,Ge);for(var vt=0;vt<pn;vt++){var gs,_s,Be,Ye;vt>1?(gs=me,_s=-2,Be=tt.NORM_TYPE,(Ge[0]==tt.SHORT_TYPE||Ge[1]==tt.SHORT_TYPE)&&(Be=tt.SHORT_TYPE),Ye=Ne[Ie][vt-2]):(gs=ve,_s=0,Be=Ge[vt],Ye=Pe[Ie][vt]),Be==tt.SHORT_TYPE?gs[_s+vt]=ne(Ye,Se.masking_lower):gs[_s+vt]=ue(Ye,Se.masking_lower),se.analysis&&(Se.pinfo.pe[Ie][vt]=gs[_s+vt])}return 0};function Le(se,le){var _e=se,Ie;return _e>=0?Ie=-_e*27:Ie=_e*le,Ie<=-72?0:Math.exp(Ie*T)}function Me(se){var le=0,_e=0;{var Ie=0,Pe,Ne;for(Ie=0;Le(Ie,se)>1e-20;Ie-=1);for(Pe=Ie,Ne=0;Math.abs(Ne-Pe)>1e-12;)Ie=(Ne+Pe)/2,Le(Ie,se)>0?Ne=Ie:Pe=Ie;le=Pe}{var Ie=0,Pe,Ne;for(Ie=0;Le(Ie,se)>1e-20;Ie+=1);for(Pe=0,Ne=Ie;Math.abs(Ne-Pe)>1e-12;)Ie=(Ne+Pe)/2,Le(Ie,se)>0?Pe=Ie:Ne=Ie;_e=Ne}{var ve=0,me=1e3,Oe;for(Oe=0;Oe<=me;++Oe){var Ie=le+Oe*(_e-le)/me,Ge=Le(Ie,se);ve+=Ge}{var Se=(me+1)/(ve*(_e-le));return Se}}}function Ue(se){var le,_e,Ie,Pe;return le=se,le>=0?le*=3:le*=1.5,le>=.5&&le<=2.5?(Pe=le-.5,_e=8*(Pe*Pe-2*Pe)):_e=0,le+=.474,Ie=15.811389+7.5*le-17.5*Math.sqrt(1+le*le),Ie<=-60?0:(le=Math.exp((_e+Ie)*T),le/=.6609193,le)}function we(se){return se<0&&(se=0),se=se*.001,13*Math.atan(.76*se)+3.5*Math.atan(se*se/(7.5*7.5))}function ge(se,le,_e,Ie,Pe,Ne,ve,me,Oe,Ge,Se,We){var mt=bs(tt.CBANDS+1),Nt=me/(We>15?2*576:2*192),nt=Ui(tt.HBLKSIZE),St;me/=Oe;var qe=0,bt=0;for(St=0;St<tt.CBANDS;St++){var Vt,dt;for(Vt=we(me*qe),mt[St]=me*qe,dt=qe;we(me*dt)-Vt<l&&dt<=Oe/2;dt++);for(se[St]=dt-qe,bt=St+1;qe<dt;)tn(qe<tt.HBLKSIZE),nt[qe++]=St;if(qe>Oe/2){qe=Oe/2,++St;break}}tn(St<tt.CBANDS),mt[St]=me*qe;for(var It=0;It<We;It++){var rt,wt,pn,vt,Ft;pn=Ge[It],vt=Ge[It+1],rt=0|Math.floor(.5+Se*(pn-.5)),rt<0&&(rt=0),wt=0|Math.floor(.5+Se*(vt-.5)),wt>Oe/2&&(wt=Oe/2),_e[It]=(nt[rt]+nt[wt])/2,le[It]=nt[wt];var zt=Nt*vt;ve[It]=(zt-mt[le[It]])/(mt[le[It]+1]-mt[le[It]]),ve[It]<0?ve[It]=0:ve[It]>1&&(ve[It]=1),Ft=we(me*Ge[It]*Se),Ft=Math.min(Ft,15.5)/15.5,Ne[It]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Ft))-2.5)}qe=0;for(var un=0;un<bt;un++){var fs=se[un],Vt,Pn;Vt=we(me*qe),Pn=we(me*(qe+fs-1)),Ie[un]=.5*(Vt+Pn),Vt=we(me*(qe-.5)),Pn=we(me*(qe+fs-.5)),Pe[un]=Pn-Vt,qe+=fs}return bt}function J(se,le,_e,Ie,Pe,Ne){var ve=Ma([tt.CBANDS,tt.CBANDS]),me,Oe=0;if(Ne)for(var Ge=0;Ge<le;Ge++)for(me=0;me<le;me++){var Se=Ue(_e[Ge]-_e[me])*Ie[me];ve[Ge][me]=Se*Pe[Ge]}else for(me=0;me<le;me++)for(var We=15+Math.min(21/_e[me],12),mt=Me(We),Ge=0;Ge<le;Ge++){var Se=mt*Le(_e[Ge]-_e[me],We)*Ie[me];ve[Ge][me]=Se*Pe[Ge]}for(var Ge=0;Ge<le;Ge++){for(me=0;me<le&&!(ve[Ge][me]>0);me++);for(se[Ge][0]=me,me=le-1;me>0&&!(ve[Ge][me]>0);me--);se[Ge][1]=me,Oe+=se[Ge][1]-se[Ge][0]+1}for(var Nt=bs(Oe),nt=0,Ge=0;Ge<le;Ge++)for(me=se[Ge][0];me<=se[Ge][1];me++)Nt[nt++]=ve[Ge][me];return Nt}function Ee(se){var le=we(se);return le=Math.min(le,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*le))-2.5)}this.psymodel_init=function(se){var le=se.internal_flags,_e,Ie=!0,Pe=13,Ne=24,ve=0,me=0,Oe=-8.25,Ge=-4.5,Se=bs(tt.CBANDS),We=bs(tt.CBANDS),mt=bs(tt.CBANDS),Nt=se.out_samplerate;switch(se.experimentalZ){default:case 0:Ie=!0;break;case 1:Ie=!(se.VBR==$l.vbr_mtrh||se.VBR==$l.vbr_mt);break;case 2:Ie=!1;break;case 3:Pe=8,ve=-1.75,me=-.0125,Oe=-8.25,Ge=-2.25;break}for(le.ms_ener_ratio_old=.25,le.blocktype_old[0]=le.blocktype_old[1]=tt.NORM_TYPE,_e=0;_e<4;++_e){for(var qe=0;qe<tt.CBANDS;++qe)le.nb_1[_e][qe]=1e20,le.nb_2[_e][qe]=1e20,le.nb_s1[_e][qe]=le.nb_s2[_e][qe]=1;for(var nt=0;nt<tt.SBMAX_l;nt++)le.en[_e].l[nt]=1e20,le.thm[_e].l[nt]=1e20;for(var qe=0;qe<3;++qe){for(var nt=0;nt<tt.SBMAX_s;nt++)le.en[_e].s[nt][qe]=1e20,le.thm[_e].s[nt][qe]=1e20;le.nsPsy.lastAttacks[_e]=0}for(var qe=0;qe<9;qe++)le.nsPsy.last_en_subshort[_e][qe]=10}for(le.loudness_sq_save[0]=le.loudness_sq_save[1]=0,le.npart_l=ge(le.numlines_l,le.bo_l,le.bm_l,Se,We,le.mld_l,le.PSY.bo_l_weight,Nt,tt.BLKSIZE,le.scalefac_band.l,tt.BLKSIZE/(2*576),tt.SBMAX_l),tn(le.npart_l<tt.CBANDS),_e=0;_e<le.npart_l;_e++){var St=ve;Se[_e]>=Pe&&(St=me*(Se[_e]-Pe)/(Ne-Pe)+ve*(Ne-Se[_e])/(Ne-Pe)),mt[_e]=Math.pow(10,St/10),le.numlines_l[_e]>0?le.rnumlines_l[_e]=1/le.numlines_l[_e]:le.rnumlines_l[_e]=0}le.s3_ll=J(le.s3ind,le.npart_l,Se,We,mt,Ie);var qe=0;for(_e=0;_e<le.npart_l;_e++){var bt;bt=kb.MAX_VALUE;for(var Vt=0;Vt<le.numlines_l[_e];Vt++,qe++){var dt=Nt*qe/(1e3*tt.BLKSIZE),It;It=this.ATHformula(dt*1e3,se)-20,It=Math.pow(10,.1*It),It*=le.numlines_l[_e],bt>It&&(bt=It)}le.ATH.cb_l[_e]=bt,bt=-20+Se[_e]*20/10,bt>6&&(bt=100),bt<-15&&(bt=-15),bt-=8,le.minval_l[_e]=Math.pow(10,bt/10)*le.numlines_l[_e]}for(le.npart_s=ge(le.numlines_s,le.bo_s,le.bm_s,Se,We,le.mld_s,le.PSY.bo_s_weight,Nt,tt.BLKSIZE_s,le.scalefac_band.s,tt.BLKSIZE_s/(2*192),tt.SBMAX_s),tn(le.npart_s<tt.CBANDS),qe=0,_e=0;_e<le.npart_s;_e++){var bt,St=Oe;Se[_e]>=Pe&&(St=Ge*(Se[_e]-Pe)/(Ne-Pe)+Oe*(Ne-Se[_e])/(Ne-Pe)),mt[_e]=Math.pow(10,St/10),bt=kb.MAX_VALUE;for(var Vt=0;Vt<le.numlines_s[_e];Vt++,qe++){var dt=Nt*qe/(1e3*tt.BLKSIZE_s),It;It=this.ATHformula(dt*1e3,se)-20,It=Math.pow(10,.1*It),It*=le.numlines_s[_e],bt>It&&(bt=It)}le.ATH.cb_s[_e]=bt,bt=-7+Se[_e]*7/12,Se[_e]>12&&(bt*=1+Math.log(1+bt)*3.1),Se[_e]<12&&(bt*=1+Math.log(1-bt)*2.3),bt<-15&&(bt=-15),bt-=8,le.minval_s[_e]=Math.pow(10,bt/10)*le.numlines_s[_e]}le.s3_ss=J(le.s3ind_s,le.npart_s,Se,We,mt,Ie),L(),t.init_fft(le),le.decay=Math.exp(-1*n/(d*Nt/192));{var rt;rt=g,se.exp_nspsytune&2&&(rt=1),Math.abs(se.msfix)>0&&(rt=se.msfix),se.msfix=rt;for(var wt=0;wt<le.npart_l;wt++)le.s3ind[wt][1]>le.npart_l-1&&(le.s3ind[wt][1]=le.npart_l-1)}var pn=576*le.mode_gr/Nt;if(le.ATH.decay=Math.pow(10,-12/10*pn),le.ATH.adjust=.01,le.ATH.adjustLimit=1,tn(le.bo_l[tt.SBMAX_l-1]<=le.npart_l),tn(le.bo_s[tt.SBMAX_s-1]<=le.npart_s),se.ATHtype!=-1){var dt,vt=se.out_samplerate/tt.BLKSIZE,Ft=0;for(dt=0,_e=0;_e<tt.BLKSIZE/2;++_e)dt+=vt,le.ATH.eql_w[_e]=1/Math.pow(10,this.ATHformula(dt,se)/10),Ft+=le.ATH.eql_w[_e];for(Ft=1/Ft,_e=tt.BLKSIZE/2;--_e>=0;)le.ATH.eql_w[_e]*=Ft}{for(var wt=qe=0;wt<le.npart_s;++wt)for(_e=0;_e<le.numlines_s[wt];++_e)++qe;for(var wt=qe=0;wt<le.npart_l;++wt)for(_e=0;_e<le.numlines_l[wt];++_e)++qe}for(qe=0,_e=0;_e<le.npart_l;_e++){var dt=Nt*(qe+le.numlines_l[_e]/2)/(1*tt.BLKSIZE);le.mld_cb_l[_e]=Ee(dt),qe+=le.numlines_l[_e]}for(;_e<tt.CBANDS;++_e)le.mld_cb_l[_e]=1;for(qe=0,_e=0;_e<le.npart_s;_e++){var dt=Nt*(qe+le.numlines_s[_e]/2)/(1*tt.BLKSIZE_s);le.mld_cb_s[_e]=Ee(dt),qe+=le.numlines_s[_e]}for(;_e<tt.CBANDS;++_e)le.mld_cb_s[_e]=1;return 0};function $e(se,le){se<-.3&&(se=3410),se/=1e3,se=Math.max(.1,se);var _e=3.64*Math.pow(se,-.8)-6.8*Math.exp(-.6*Math.pow(se-3.4,2))+6*Math.exp(-.15*Math.pow(se-8.7,2))+(.6+.04*le)*.001*Math.pow(se,4);return _e}this.ATHformula=function(se,le){var _e;switch(le.ATHtype){case 0:_e=$e(se,9);break;case 1:_e=$e(se,-1);break;case 2:_e=$e(se,0);break;case 3:_e=$e(se,1)+6;break;case 4:_e=$e(se,le.ATHcurve);break;default:_e=$e(se,0);break}return _e}}var MTe=$Te,kTe=jc;function LTe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=kTe.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var DTe=LTe,PTe=na(),zS={};zS.SFBMAX=PTe.SBMAX_s*3;var Sm=zS,WS=jn,BTe=WS.new_float,Gi=WS.new_int,Nh=Sm;function FTe(){this.xr=BTe(576),this.l3_enc=Gi(576),this.scalefac=Gi(Nh.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Gi(3),this.subblock_gain=Gi(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Gi(Nh.SFBMAX),this.window=Gi(Nh.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Gi(4),this.max_nonzero_coeff=0;var e=this;function t(s){return new Int32Array(s)}function n(s){return new Float32Array(s)}this.assign=function(s){e.xr=n(s.xr),e.l3_enc=t(s.l3_enc),e.scalefac=t(s.scalefac),e.xrpow_max=s.xrpow_max,e.part2_3_length=s.part2_3_length,e.big_values=s.big_values,e.count1=s.count1,e.global_gain=s.global_gain,e.scalefac_compress=s.scalefac_compress,e.block_type=s.block_type,e.mixed_block_flag=s.mixed_block_flag,e.table_select=t(s.table_select),e.subblock_gain=t(s.subblock_gain),e.region0_count=s.region0_count,e.region1_count=s.region1_count,e.preflag=s.preflag,e.scalefac_scale=s.scalefac_scale,e.count1table_select=s.count1table_select,e.part2_length=s.part2_length,e.sfb_lmax=s.sfb_lmax,e.sfb_smin=s.sfb_smin,e.psy_lmax=s.psy_lmax,e.sfbmax=s.sfbmax,e.psymax=s.psymax,e.sfbdivide=s.sfbdivide,e.width=t(s.width),e.window=t(s.window),e.count1bits=s.count1bits,e.sfb_partition_table=s.sfb_partition_table.slice(0),e.slen=t(s.slen),e.max_nonzero_coeff=s.max_nonzero_coeff}}var I_=FTe,UTe=jn,Lb=UTe.new_int,GTe=I_;function VTe(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Lb(4),Lb(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new GTe}var HTe=VTe,jS=jn,Cd=jS.System,Nd=jS.new_int,Od=na();function KTe(e,t,n,s){this.l=Nd(1+Od.SBMAX_l),this.s=Nd(1+Od.SBMAX_s),this.psfb21=Nd(1+Od.PSFB21),this.psfb12=Nd(1+Od.PSFB12);var o=this.l,a=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Cd.arraycopy(this.arrL,0,o,0,Math.min(this.arrL.length,this.l.length)),Cd.arraycopy(this.arrS,0,a,0,Math.min(this.arrS.length,this.s.length)),Cd.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Cd.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var YS=KTe,C_=jn,Oh=C_.new_float,zTe=C_.new_float_n,WTe=C_.new_int,Db=na();function jTe(){this.last_en_subshort=zTe([4,9]),this.lastAttacks=WTe(4),this.pefirbuf=Oh(19),this.longfact=Oh(Db.SBMAX_l),this.shortfact=Oh(Db.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var YTe=jTe;function XTe(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var qTe=XTe,dr=jn,ZTe=dr.new_byte,QTe=dr.new_double,ka=dr.new_float,Vi=dr.new_float_n,ja=dr.new_int,xd=dr.new_int_n,JTe=HTe,eye=YS,tye=YTe,nye=qTe,Pb=HS(),ss=na(),sye=Sm;Go.MFSIZE=3*1152+ss.ENCDELAY-ss.MDCTDELAY;Go.MAX_HEADER_BUF=256;Go.MAX_BITS_PER_CHANNEL=4095;Go.MAX_BITS_PER_GRANULE=7680;Go.BPC=320;function Go(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Vi([2,Go.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new JTe,this.ms_ratio=ka(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=ja(2),this.CurrentStep=ja(2),this.masking_lower=0,this.bv_scf=ja(576),this.pseudohalf=ja(sye.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Go.BPC+1),this.itime=QTe(2),this.sideinfo_len=0,this.sb_sample=Vi([2,2,18,ss.SBLIMIT]),this.amp_filter=ka(32);function t(){this.write_timing=0,this.ptr=0,this.buf=ZTe(e)}this.header=new Array(Go.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new eye,this.minval_l=ka(ss.CBANDS),this.minval_s=ka(ss.CBANDS),this.nb_1=Vi([4,ss.CBANDS]),this.nb_2=Vi([4,ss.CBANDS]),this.nb_s1=Vi([4,ss.CBANDS]),this.nb_s2=Vi([4,ss.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=ka(4),this.loudness_sq=Vi([2,2]),this.loudness_sq_save=ka(2),this.mld_l=ka(ss.SBMAX_l),this.mld_s=ka(ss.SBMAX_s),this.bm_l=ja(ss.SBMAX_l),this.bo_l=ja(ss.SBMAX_l),this.bm_s=ja(ss.SBMAX_s),this.bo_s=ja(ss.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=xd([ss.CBANDS,2]),this.s3ind_s=xd([ss.CBANDS,2]),this.numlines_s=ja(ss.CBANDS),this.numlines_l=ja(ss.CBANDS),this.rnumlines_l=ka(ss.CBANDS),this.mld_cb_l=ka(ss.CBANDS),this.mld_cb_s=ka(ss.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=ka(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=ja(2),this.nsPsy=new tye,this.VBR_seek_table=new nye,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=xd([16,5]),this.bitrate_blockType_Hist=xd([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new Pb;for(var n=0;n<this.thm.length;n++)this.thm[n]=new Pb;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var Im=Go,aye=jn,Hi=aye.new_float,Ki=na();function oye(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Hi(Ki.SBMAX_l),this.s=Hi(Ki.SBMAX_s),this.psfb21=Hi(Ki.PSFB21),this.psfb12=Hi(Ki.PSFB12),this.cb_l=Hi(Ki.CBANDS),this.cb_s=Hi(Ki.CBANDS),this.eql_w=Hi(Ki.BLKSIZE/2)}var iye=oye,XS=jn,_a=XS.System,Bb=XS.Arrays;is.STEPS_per_dB=100;is.MAX_dB=120;is.GAIN_NOT_ENOUGH_SAMPLES=-24601;is.GAIN_ANALYSIS_ERROR=0;is.GAIN_ANALYSIS_OK=1;is.INIT_GAIN_ANALYSIS_ERROR=0;is.INIT_GAIN_ANALYSIS_OK=1;is.YULE_ORDER=10;is.MAX_ORDER=is.YULE_ORDER;is.MAX_SAMP_FREQ=48e3;is.RMS_WINDOW_TIME_NUMERATOR=1;is.RMS_WINDOW_TIME_DENOMINATOR=20;is.MAX_SAMPLES_PER_WINDOW=is.MAX_SAMP_FREQ*is.RMS_WINDOW_TIME_NUMERATOR/is.RMS_WINDOW_TIME_DENOMINATOR+1;function is(){var e=64.82,t=.95,n=is.RMS_WINDOW_TIME_NUMERATOR,s=is.RMS_WINDOW_TIME_DENOMINATOR,o=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],a=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function i(p,h,g,_,T,S){for(;T--!=0;)g[_]=1e-10+p[h+0]*S[0]-g[_-1]*S[1]+p[h-1]*S[2]-g[_-2]*S[3]+p[h-2]*S[4]-g[_-3]*S[5]+p[h-3]*S[6]-g[_-4]*S[7]+p[h-4]*S[8]-g[_-5]*S[9]+p[h-5]*S[10]-g[_-6]*S[11]+p[h-6]*S[12]-g[_-7]*S[13]+p[h-7]*S[14]-g[_-8]*S[15]+p[h-8]*S[16]-g[_-9]*S[17]+p[h-9]*S[18]-g[_-10]*S[19]+p[h-10]*S[20],++_,++h}function l(p,h,g,_,T,S){for(;T--!=0;)g[_]=p[h+0]*S[0]-g[_-1]*S[1]+p[h-1]*S[2]-g[_-2]*S[3]+p[h-2]*S[4],++_,++h}function r(p,h){for(var g=0;g<MAX_ORDER;g++)p.linprebuf[g]=p.lstepbuf[g]=p.loutbuf[g]=p.rinprebuf[g]=p.rstepbuf[g]=p.routbuf[g]=0;switch(0|h){case 48e3:p.reqindex=0;break;case 44100:p.reqindex=1;break;case 32e3:p.reqindex=2;break;case 24e3:p.reqindex=3;break;case 22050:p.reqindex=4;break;case 16e3:p.reqindex=5;break;case 12e3:p.reqindex=6;break;case 11025:p.reqindex=7;break;case 8e3:p.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return p.sampleWindow=0|(h*n+s-1)/s,p.lsum=0,p.rsum=0,p.totsamp=0,Bb.ill(p.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(p,h){return r(p,h)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(p.linpre=MAX_ORDER,p.rinpre=MAX_ORDER,p.lstep=MAX_ORDER,p.rstep=MAX_ORDER,p.lout=MAX_ORDER,p.rout=MAX_ORDER,Bb.fill(p.B,0),INIT_GAIN_ANALYSIS_OK)};function d(p){return p*p}this.AnalyzeSamples=function(p,h,g,_,T,S,E){var y,A,C,O,N,R,k;if(S==0)return GAIN_ANALYSIS_OK;switch(k=0,N=S,E){case 1:_=h,T=g;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(S<MAX_ORDER?(_a.arraycopy(h,g,p.linprebuf,MAX_ORDER,S),_a.arraycopy(_,T,p.rinprebuf,MAX_ORDER,S)):(_a.arraycopy(h,g,p.linprebuf,MAX_ORDER,MAX_ORDER),_a.arraycopy(_,T,p.rinprebuf,MAX_ORDER,MAX_ORDER));N>0;){R=N>p.sampleWindow-p.totsamp?p.sampleWindow-p.totsamp:N,k<MAX_ORDER?(y=p.linpre+k,A=p.linprebuf,C=p.rinpre+k,O=p.rinprebuf,R>MAX_ORDER-k&&(R=MAX_ORDER-k)):(y=g+k,A=h,C=T+k,O=_),i(A,y,p.lstepbuf,p.lstep+p.totsamp,R,o[p.reqindex]),i(O,C,p.rstepbuf,p.rstep+p.totsamp,R,o[p.reqindex]),l(p.lstepbuf,p.lstep+p.totsamp,p.loutbuf,p.lout+p.totsamp,R,a[p.reqindex]),l(p.rstepbuf,p.rstep+p.totsamp,p.routbuf,p.rout+p.totsamp,R,a[p.reqindex]),y=p.lout+p.totsamp,A=p.loutbuf,C=p.rout+p.totsamp,O=p.routbuf;for(var L=R%8;L--!=0;)p.lsum+=d(A[y++]),p.rsum+=d(O[C++]);for(L=R/8;L--!=0;)p.lsum+=d(A[y+0])+d(A[y+1])+d(A[y+2])+d(A[y+3])+d(A[y+4])+d(A[y+5])+d(A[y+6])+d(A[y+7]),y+=8,p.rsum+=d(O[C+0])+d(O[C+1])+d(O[C+2])+d(O[C+3])+d(O[C+4])+d(O[C+5])+d(O[C+6])+d(O[C+7]),C+=8;if(N-=R,k+=R,p.totsamp+=R,p.totsamp==p.sampleWindow){var D=is.STEPS_per_dB*10*Math.log10((p.lsum+p.rsum)/p.totsamp*.5+1e-37),$=D<=0?0:0|D;$>=p.A.length&&($=p.A.length-1),p.A[$]++,p.lsum=p.rsum=0,_a.arraycopy(p.loutbuf,p.totsamp,p.loutbuf,0,MAX_ORDER),_a.arraycopy(p.routbuf,p.totsamp,p.routbuf,0,MAX_ORDER),_a.arraycopy(p.lstepbuf,p.totsamp,p.lstepbuf,0,MAX_ORDER),_a.arraycopy(p.rstepbuf,p.totsamp,p.rstepbuf,0,MAX_ORDER),p.totsamp=0}if(p.totsamp>p.sampleWindow)return GAIN_ANALYSIS_ERROR}return S<MAX_ORDER?(_a.arraycopy(p.linprebuf,S,p.linprebuf,0,MAX_ORDER-S),_a.arraycopy(p.rinprebuf,S,p.rinprebuf,0,MAX_ORDER-S),_a.arraycopy(h,g,p.linprebuf,MAX_ORDER-S,S),_a.arraycopy(_,T,p.rinprebuf,MAX_ORDER-S,S)):(_a.arraycopy(h,g+S-MAX_ORDER,p.linprebuf,0,MAX_ORDER),_a.arraycopy(_,T+S-MAX_ORDER,p.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function u(p,h){var g,_=0;for(g=0;g<h;g++)_+=p[g];if(_==0)return GAIN_NOT_ENOUGH_SAMPLES;var T=0|Math.ceil(_*(1-t));for(g=h;g-- >0&&!((T-=p[g])<=0););return e-g/is.STEPS_per_dB}this.GetTitleGain=function(p){for(var h=u(p.A,p.A.length),g=0;g<p.A.length;g++)p.B[g]+=p.A[g],p.A[g]=0;for(var g=0;g<MAX_ORDER;g++)p.linprebuf[g]=p.lstepbuf[g]=p.loutbuf[g]=p.rinprebuf[g]=p.rstepbuf[g]=p.routbuf[g]=0;return p.totsamp=0,p.lsum=p.rsum=0,h}}var qS=is,ZS=jn,kl=ZS.new_float,Fb=ZS.new_int,va=qS;function lye(){this.linprebuf=kl(va.MAX_ORDER*2),this.linpre=0,this.lstepbuf=kl(va.MAX_SAMPLES_PER_WINDOW+va.MAX_ORDER),this.lstep=0,this.loutbuf=kl(va.MAX_SAMPLES_PER_WINDOW+va.MAX_ORDER),this.lout=0,this.rinprebuf=kl(va.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=kl(va.MAX_SAMPLES_PER_WINDOW+va.MAX_ORDER),this.rstep=0,this.routbuf=kl(va.MAX_SAMPLES_PER_WINDOW+va.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Fb(0|va.STEPS_per_dB*va.MAX_dB),this.B=Fb(0|va.STEPS_per_dB*va.MAX_dB)}var rye=lye;function cye(e){this.bits=e}var QS=cye,N_=jn,Ub=N_.new_float,dye=N_.new_int,Gb=N_.assert,uye=QS,Vb=na(),mye=Sm,pye=Im;function hye(e){var t=e;this.quantize=t,this.iteration_loop=function(n,s,o,a){var i=n.internal_flags,l=Ub(mye.SFBMAX),r=Ub(576),d=dye(2),u=0,p,h=i.l3_side,g=new uye(u);this.quantize.rv.ResvFrameBegin(n,g),u=g.bits;for(var _=0;_<i.mode_gr;_++){p=this.quantize.qupvt.on_pe(n,s,d,u,_,_),i.mode_ext==Vb.MPG_MD_MS_LR&&(this.quantize.ms_convert(i.l3_side,_),this.quantize.qupvt.reduce_side(d,o[_],u,p));for(var T=0;T<i.channels_out;T++){var S,E,y=h.tt[_][T];y.block_type!=Vb.SHORT_TYPE?(S=0,E=i.PSY.mask_adjust-S):(S=0,E=i.PSY.mask_adjust_short-S),i.masking_lower=Math.pow(10,E*.1),this.quantize.init_outer_loop(i,y),this.quantize.init_xrpow(i,y,r)&&(this.quantize.qupvt.calc_xmin(n,a[_][T],y,l),this.quantize.outer_loop(n,y,l,r,T,d[T])),this.quantize.iteration_finish_one(i,_,T),Gb(y.part2_3_length<=pye.MAX_BITS_PER_CHANNEL),Gb(y.part2_3_length<=d[T])}}this.quantize.rv.ResvFrameEnd(i,u)}}var fye=hye;function gn(e,t,n,s){this.xlen=e,this.linmax=t,this.table=n,this.hlen=s}var ht={};ht.t1HB=[1,1,1,0];ht.t2HB=[1,2,1,3,1,1,3,2,0];ht.t3HB=[3,2,1,1,1,1,3,2,0];ht.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];ht.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];ht.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];ht.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];ht.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];ht.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];ht.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];ht.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];ht.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];ht.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];ht.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];ht.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];ht.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];ht.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];ht.t1l=[1,4,3,5];ht.t2l=[1,4,7,4,5,7,6,7,8];ht.t3l=[2,3,7,4,4,7,6,7,8];ht.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];ht.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];ht.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];ht.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];ht.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];ht.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];ht.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];ht.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];ht.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];ht.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];ht.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];ht.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];ht.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];ht.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];ht.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];ht.ht=[new gn(0,0,null,null),new gn(2,0,ht.t1HB,ht.t1l),new gn(3,0,ht.t2HB,ht.t2l),new gn(3,0,ht.t3HB,ht.t3l),new gn(0,0,null,null),new gn(4,0,ht.t5HB,ht.t5l),new gn(4,0,ht.t6HB,ht.t6l),new gn(6,0,ht.t7HB,ht.t7l),new gn(6,0,ht.t8HB,ht.t8l),new gn(6,0,ht.t9HB,ht.t9l),new gn(8,0,ht.t10HB,ht.t10l),new gn(8,0,ht.t11HB,ht.t11l),new gn(8,0,ht.t12HB,ht.t12l),new gn(16,0,ht.t13HB,ht.t13l),new gn(0,0,null,ht.t16_5l),new gn(16,0,ht.t15HB,ht.t15l),new gn(1,1,ht.t16HB,ht.t16l),new gn(2,3,ht.t16HB,ht.t16l),new gn(3,7,ht.t16HB,ht.t16l),new gn(4,15,ht.t16HB,ht.t16l),new gn(6,63,ht.t16HB,ht.t16l),new gn(8,255,ht.t16HB,ht.t16l),new gn(10,1023,ht.t16HB,ht.t16l),new gn(13,8191,ht.t16HB,ht.t16l),new gn(4,15,ht.t24HB,ht.t24l),new gn(5,31,ht.t24HB,ht.t24l),new gn(6,63,ht.t24HB,ht.t24l),new gn(7,127,ht.t24HB,ht.t24l),new gn(8,255,ht.t24HB,ht.t24l),new gn(9,511,ht.t24HB,ht.t24l),new gn(11,2047,ht.t24HB,ht.t24l),new gn(13,8191,ht.t24HB,ht.t24l),new gn(0,0,ht.t32HB,ht.t32l),new gn(0,0,ht.t33HB,ht.t33l)];ht.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];ht.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];ht.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];ht.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];ht.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];ht.scfsi_band=[0,6,11,16,21];var O_=ht,xh,Hb;function JS(){if(Hb)return xh;Hb=1;var e=YS,t=jn,n=t.VbrMode,s=t.Float,o=t.Util,a=t.new_float,i=t.new_int,l=t.assert,r=na(),d=QS,u=Im;p.Q_MAX=257,p.Q_MAX2=116,p.LARGE_BITS=1e5,p.IXMAX_VAL=8206;function p(){var h=x_(),g=null,_=null,T=null;this.setModules=function(H,G,V){g=H,_=G,T=V};function S(H){return l(0<=H+p.Q_MAX2&&H<p.Q_MAX),k[H+p.Q_MAX2]}this.IPOW20=function(H){return l(0<=H&&H<p.Q_MAX),L[H]};var E=2220446049250313e-31,y=p.IXMAX_VAL,A=y+2,C=p.Q_MAX,O=p.Q_MAX2;p.LARGE_BITS;var N=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var R=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=R,this.sfBandIndex=[new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var k=a(C+O+1),L=a(C),D=a(A),$=a(A);this.adj43=$;function M(H,G){var V=T.ATHformula(G,H);return V-=N,V=Math.pow(10,V/10+H.ATHlower),V}function K(H){for(var G=H.internal_flags.ATH.l,V=H.internal_flags.ATH.psfb21,Y=H.internal_flags.ATH.s,ee=H.internal_flags.ATH.psfb12,X=H.internal_flags,z=H.out_samplerate,W=0;W<r.SBMAX_l;W++){var q=X.scalefac_band.l[W],Z=X.scalefac_band.l[W+1];G[W]=s.MAX_VALUE;for(var ne=q;ne<Z;ne++){var ae=ne*z/1152,ue=M(H,ae);G[W]=Math.min(G[W],ue)}}for(var W=0;W<r.PSFB21;W++){var q=X.scalefac_band.psfb21[W],Z=X.scalefac_band.psfb21[W+1];V[W]=s.MAX_VALUE;for(var ne=q;ne<Z;ne++){var ae=ne*z/1152,ue=M(H,ae);V[W]=Math.min(V[W],ue)}}for(var W=0;W<r.SBMAX_s;W++){var q=X.scalefac_band.s[W],Z=X.scalefac_band.s[W+1];Y[W]=s.MAX_VALUE;for(var ne=q;ne<Z;ne++){var ae=ne*z/384,ue=M(H,ae);Y[W]=Math.min(Y[W],ue)}Y[W]*=X.scalefac_band.s[W+1]-X.scalefac_band.s[W]}for(var W=0;W<r.PSFB12;W++){var q=X.scalefac_band.psfb12[W],Z=X.scalefac_band.psfb12[W+1];ee[W]=s.MAX_VALUE;for(var ne=q;ne<Z;ne++){var ae=ne*z/384,ue=M(H,ae);ee[W]=Math.min(ee[W],ue)}ee[W]*=X.scalefac_band.s[13]-X.scalefac_band.s[12]}if(H.noATH){for(var W=0;W<r.SBMAX_l;W++)G[W]=1e-20;for(var W=0;W<r.PSFB21;W++)V[W]=1e-20;for(var W=0;W<r.SBMAX_s;W++)Y[W]=1e-20;for(var W=0;W<r.PSFB12;W++)ee[W]=1e-20}X.ATH.floor=10*Math.log10(M(H,-1))}this.iteration_init=function(H){var G=H.internal_flags,V=G.l3_side,Y;if(G.iteration_init_init==0){for(G.iteration_init_init=1,V.main_data_begin=0,K(H),D[0]=0,Y=1;Y<A;Y++)D[Y]=Math.pow(Y,4/3);for(Y=0;Y<A-1;Y++)$[Y]=Y+1-Math.pow(.5*(D[Y]+D[Y+1]),.75);for($[Y]=.5,Y=0;Y<C;Y++)L[Y]=Math.pow(2,(Y-210)*-.1875);for(Y=0;Y<=C+O;Y++)k[Y]=Math.pow(2,(Y-210-O)*.25);g.huffman_init(G);{var ee,X,z,W;for(Y=H.exp_nspsytune>>2&63,Y>=32&&(Y-=64),ee=Math.pow(10,Y/4/10),Y=H.exp_nspsytune>>8&63,Y>=32&&(Y-=64),X=Math.pow(10,Y/4/10),Y=H.exp_nspsytune>>14&63,Y>=32&&(Y-=64),z=Math.pow(10,Y/4/10),Y=H.exp_nspsytune>>20&63,Y>=32&&(Y-=64),W=z*Math.pow(10,Y/4/10),Y=0;Y<r.SBMAX_l;Y++){var q;Y<=6?q=ee:Y<=13?q=X:Y<=20?q=z:q=W,G.nsPsy.longfact[Y]=q}for(Y=0;Y<r.SBMAX_s;Y++){var q;Y<=5?q=ee:Y<=10?q=X:Y<=11?q=z:q=W,G.nsPsy.shortfact[Y]=q}}}},this.on_pe=function(H,G,V,Y,ee,X){var z=H.internal_flags,W=0,q,Z=i(2),ne,ae=new d(W),ue=_.ResvMaxBits(H,Y,ae,X);W=ae.bits;var te=W+ue;for(te>u.MAX_BITS_PER_GRANULE&&(te=u.MAX_BITS_PER_GRANULE),q=0,ne=0;ne<z.channels_out;++ne)V[ne]=Math.min(u.MAX_BITS_PER_CHANNEL,W/z.channels_out),Z[ne]=0|V[ne]*G[ee][ne]/700-V[ne],Z[ne]>Y*3/4&&(Z[ne]=Y*3/4),Z[ne]<0&&(Z[ne]=0),Z[ne]+V[ne]>u.MAX_BITS_PER_CHANNEL&&(Z[ne]=Math.max(0,u.MAX_BITS_PER_CHANNEL-V[ne])),q+=Z[ne];if(q>ue)for(ne=0;ne<z.channels_out;++ne)Z[ne]=ue*Z[ne]/q;for(ne=0;ne<z.channels_out;++ne)V[ne]+=Z[ne],ue-=Z[ne];for(q=0,ne=0;ne<z.channels_out;++ne)q+=V[ne];if(q>u.MAX_BITS_PER_GRANULE){var ce=0;for(ne=0;ne<z.channels_out;++ne)V[ne]*=u.MAX_BITS_PER_GRANULE,V[ne]/=q,ce+=V[ne]}return te},this.reduce_side=function(H,G,V,Y){l(H[0]+H[1]<=u.MAX_BITS_PER_GRANULE);var ee=.33*(.5-G)/.5;ee<0&&(ee=0),ee>.5&&(ee=.5);var X=0|ee*.5*(H[0]+H[1]);X>u.MAX_BITS_PER_CHANNEL-H[0]&&(X=u.MAX_BITS_PER_CHANNEL-H[0]),X<0&&(X=0),H[1]>=125&&(H[1]-X>125?(H[0]<V&&(H[0]+=X),H[1]-=X):(H[0]+=H[1]-125,H[1]=125)),X=H[0]+H[1],X>Y&&(H[0]=Y*H[0]/X,H[1]=Y*H[1]/X),l(H[0]<=u.MAX_BITS_PER_CHANNEL),l(H[1]<=u.MAX_BITS_PER_CHANNEL),l(H[0]+H[1]<=u.MAX_BITS_PER_GRANULE)},this.athAdjust=function(H,G,V){var Y=90.30873362,ee=94.82444863,X=o.FAST_LOG10_X(G,10),z=H*H,W=0;return X-=V,z>1e-20&&(W=1+o.FAST_LOG10_X(z,10/Y)),W<0&&(W=0),X*=W,X+=V+Y-ee,Math.pow(10,.1*X)},this.calc_xmin=function(H,G,V,Y){var ee=0,X=H.internal_flags,z,W=0,q=0,Z=X.ATH,ne=V.xr,ae=H.VBR==n.vbr_mtrh?1:0,ue=X.masking_lower;for((H.VBR==n.vbr_mtrh||H.VBR==n.vbr_mt)&&(ue=1),z=0;z<V.psy_lmax;z++){var te,ce,fe,ke,De,Fe;H.VBR==n.vbr_rh||H.VBR==n.vbr_mtrh?ce=athAdjust(Z.adjust,Z.l[z],Z.floor):ce=Z.adjust*Z.l[z],De=V.width[z],fe=ce/De,ke=E,Fe=De>>1,te=0;do{var je,Qe;je=ne[W]*ne[W],te+=je,ke+=je<fe?je:fe,W++,Qe=ne[W]*ne[W],te+=Qe,ke+=Qe<fe?Qe:fe,W++}while(--Fe>0);if(te>ce&&q++,z==r.SBPSY_l){var Ze=ce*X.nsPsy.longfact[z];ke<Ze&&(ke=Ze)}if(ae!=0&&(ce=ke),!H.ATHonly){var ft=G.en.l[z];if(ft>0){var Ze;Ze=te*G.thm.l[z]*ue/ft,ae!=0&&(Ze*=X.nsPsy.longfact[z]),ce<Ze&&(ce=Ze)}}ae!=0?Y[ee++]=ce:Y[ee++]=ce*X.nsPsy.longfact[z]}var kt=575;if(V.block_type!=r.SHORT_TYPE)for(var Q=576;Q--!=0&&h.EQ(ne[Q],0);)kt=Q;V.max_nonzero_coeff=kt;for(var oe=V.sfb_smin;z<V.psymax;oe++,z+=3){var De,de,Ce;for(H.VBR==n.vbr_rh||H.VBR==n.vbr_mtrh?Ce=athAdjust(Z.adjust,Z.s[oe],Z.floor):Ce=Z.adjust*Z.s[oe],De=V.width[z],de=0;de<3;de++){var te=0,ce,fe,ke,Fe=De>>1;fe=Ce/De,ke=E;do{var je,Qe;je=ne[W]*ne[W],te+=je,ke+=je<fe?je:fe,W++,Qe=ne[W]*ne[W],te+=Qe,ke+=Qe<fe?Qe:fe,W++}while(--Fe>0);if(te>Ce&&q++,oe==r.SBPSY_s){var Ze=Ce*X.nsPsy.shortfact[oe];ke<Ze&&(ke=Ze)}if(ae!=0?ce=ke:ce=Ce,!H.ATHonly&&!H.ATHshort){var ft=G.en.s[oe][de];if(ft>0){var Ze;Ze=te*G.thm.s[oe][de]*ue/ft,ae!=0&&(Ze*=X.nsPsy.shortfact[oe]),ce<Ze&&(ce=Ze)}}ae!=0?Y[ee++]=ce:Y[ee++]=ce*X.nsPsy.shortfact[oe]}H.useTemporal&&(Y[ee-3]>Y[ee-3+1]&&(Y[ee-3+1]+=(Y[ee-3]-Y[ee-3+1])*X.decay),Y[ee-3+1]>Y[ee-3+2]&&(Y[ee-3+2]+=(Y[ee-3+1]-Y[ee-3+2])*X.decay))}return q};function B(H){this.s=H}this.calc_noise_core=function(H,G,V,Y){var ee=0,X=G.s,z=H.l3_enc;if(X>H.count1)for(;V--!=0;){var W;W=H.xr[X],X++,ee+=W*W,W=H.xr[X],X++,ee+=W*W}else if(X>H.big_values){var q=a(2);for(q[0]=0,q[1]=Y;V--!=0;){var W;W=Math.abs(H.xr[X])-q[z[X]],X++,ee+=W*W,W=Math.abs(H.xr[X])-q[z[X]],X++,ee+=W*W}}else for(;V--!=0;){var W;W=Math.abs(H.xr[X])-D[z[X]]*Y,X++,ee+=W*W,W=Math.abs(H.xr[X])-D[z[X]]*Y,X++,ee+=W*W}return G.s=X,ee},this.calc_noise=function(H,G,V,Y,ee){var X=0,z=0,W,q,Z=0,ne=0,ae=0,ue=-20,te=0,ce=H.scalefac,fe=0;for(Y.over_SSD=0,W=0;W<H.psymax;W++){var ke=H.global_gain-(ce[fe++]+(H.preflag!=0?R[W]:0)<<H.scalefac_scale+1)-H.subblock_gain[H.window[W]]*8,De=0;if(ee!=null&&ee.step[W]==ke)De=ee.noise[W],te+=H.width[W],V[X++]=De/G[z++],De=ee.noise_log[W];else{var Fe=S(ke);if(q=H.width[W]>>1,te+H.width[W]>H.max_nonzero_coeff){var je;je=H.max_nonzero_coeff-te+1,je>0?q=je>>1:q=0}var Qe=new B(te);De=this.calc_noise_core(H,Qe,q,Fe),te=Qe.s,ee!=null&&(ee.step[W]=ke,ee.noise[W]=De),De=V[X++]=De/G[z++],De=o.FAST_LOG10(Math.max(De,1e-20)),ee!=null&&(ee.noise_log[W]=De)}if(ee!=null&&(ee.global_gain=H.global_gain),ae+=De,De>0){var Ze;Ze=Math.max(0|De*10+.5,1),Y.over_SSD+=Ze*Ze,Z++,ne+=De}ue=Math.max(ue,De)}return Y.over_count=Z,Y.tot_noise=ae,Y.over_noise=ne,Y.max_noise=ue,Z},this.set_pinfo=function(H,G,V,Y,ee){var X=H.internal_flags,z,W,q,Z,ne,ae=G.scalefac_scale==0?.5:1,ue=G.scalefac,te=a(L3Side.SFBMAX),ce=a(L3Side.SFBMAX),fe=new CalcNoiseResult;calc_xmin(H,V,G,te),calc_noise(G,te,ce,fe,null);var ke=0;for(W=G.sfb_lmax,G.block_type!=r.SHORT_TYPE&&G.mixed_block_flag==0&&(W=22),z=0;z<W;z++){var De=X.scalefac_band.l[z],Fe=X.scalefac_band.l[z+1],je=Fe-De;for(Z=0;ke<Fe;ke++)Z+=G.xr[ke]*G.xr[ke];Z/=je,ne=1e15,X.pinfo.en[Y][ee][z]=ne*Z,X.pinfo.xfsf[Y][ee][z]=ne*te[z]*ce[z]/je,V.en.l[z]>0&&!H.ATHonly?Z=Z/V.en.l[z]:Z=0,X.pinfo.thr[Y][ee][z]=ne*Math.max(Z*V.thm.l[z],X.ATH.l[z]),X.pinfo.LAMEsfb[Y][ee][z]=0,G.preflag!=0&&z>=11&&(X.pinfo.LAMEsfb[Y][ee][z]=-ae*R[z]),z<r.SBPSY_l&&(l(ue[z]>=0),X.pinfo.LAMEsfb[Y][ee][z]-=ae*ue[z])}if(G.block_type==r.SHORT_TYPE)for(W=z,z=G.sfb_smin;z<r.SBMAX_s;z++)for(var De=X.scalefac_band.s[z],Fe=X.scalefac_band.s[z+1],je=Fe-De,Qe=0;Qe<3;Qe++){for(Z=0,q=De;q<Fe;q++)Z+=G.xr[ke]*G.xr[ke],ke++;Z=Math.max(Z/je,1e-20),ne=1e15,X.pinfo.en_s[Y][ee][3*z+Qe]=ne*Z,X.pinfo.xfsf_s[Y][ee][3*z+Qe]=ne*te[W]*ce[W]/je,V.en.s[z][Qe]>0?Z=Z/V.en.s[z][Qe]:Z=0,(H.ATHonly||H.ATHshort)&&(Z=0),X.pinfo.thr_s[Y][ee][3*z+Qe]=ne*Math.max(Z*V.thm.s[z][Qe],X.ATH.s[z]),X.pinfo.LAMEsfb_s[Y][ee][3*z+Qe]=-2*G.subblock_gain[Qe],z<r.SBPSY_s&&(X.pinfo.LAMEsfb_s[Y][ee][3*z+Qe]-=ae*ue[W]),W++}X.pinfo.LAMEqss[Y][ee]=G.global_gain,X.pinfo.LAMEmainbits[Y][ee]=G.part2_3_length+G.part2_length,X.pinfo.LAMEsfbits[Y][ee]=G.part2_length,X.pinfo.over[Y][ee]=fe.over_count,X.pinfo.max_noise[Y][ee]=fe.max_noise*10,X.pinfo.over_noise[Y][ee]=fe.over_noise*10,X.pinfo.tot_noise[Y][ee]=fe.tot_noise*10,X.pinfo.over_SSD[Y][ee]=fe.over_SSD}}return xh=p,xh}var wh,Kb;function e2(){if(Kb)return wh;Kb=1;var e=jn,t=e.System,n=e.Arrays,s=e.new_int,o=e.assert,a=na(),i=O_,l=I_,r=JS();function d(){var u=null;this.qupvt=null,this.setModules=function(X){this.qupvt=X,u=X};function p(X){this.bits=0|X}var h=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function g(X,z,W,q,Z,ne){var ae=.5946/z;for(X=X>>1;X--!=0;)Z[ne++]=ae>W[q++]?0:1,Z[ne++]=ae>W[q++]?0:1}function _(X,z,W,q,Z,ne){X=X>>1;var ae=X%2;for(X=X>>1;X--!=0;){var ue,te,ce,fe,ke,De,Fe,je;ue=W[q++]*z,te=W[q++]*z,ke=0|ue,ce=W[q++]*z,De=0|te,fe=W[q++]*z,Fe=0|ce,ue+=u.adj43[ke],je=0|fe,te+=u.adj43[De],Z[ne++]=0|ue,ce+=u.adj43[Fe],Z[ne++]=0|te,fe+=u.adj43[je],Z[ne++]=0|ce,Z[ne++]=0|fe}if(ae!=0){var ue,te,ke,De;ue=W[q++]*z,te=W[q++]*z,ke=0|ue,De=0|te,ue+=u.adj43[ke],te+=u.adj43[De],Z[ne++]=0|ue,Z[ne++]=0|te}}function T(X,z,W,q,Z){var ne,ae,ue=0,te,ce=0,fe=0,ke=0,De=z,Fe=0,je=De,Qe=0,Ze=X,ft=0;for(te=Z!=null&&q.global_gain==Z.global_gain,q.block_type==a.SHORT_TYPE?ae=38:ae=21,ne=0;ne<=ae;ne++){var kt=-1;if((te||q.block_type==a.NORM_TYPE)&&(kt=q.global_gain-(q.scalefac[ne]+(q.preflag!=0?u.pretab[ne]:0)<<q.scalefac_scale+1)-q.subblock_gain[q.window[ne]]*8),o(q.width[ne]>=0),te&&Z.step[ne]==kt)ce!=0&&(_(ce,W,Ze,ft,je,Qe),ce=0),fe!=0&&(g(fe,W,Ze,ft,je,Qe),fe=0);else{var Q=q.width[ne];if(ue+q.width[ne]>q.max_nonzero_coeff){var oe;oe=q.max_nonzero_coeff-ue+1,n.fill(z,q.max_nonzero_coeff,576,0),Q=oe,Q<0&&(Q=0),ne=ae+1}if(ce==0&&fe==0&&(je=De,Qe=Fe,Ze=X,ft=ke),Z!=null&&Z.sfb_count1>0&&ne>=Z.sfb_count1&&Z.step[ne]>0&&kt>=Z.step[ne]?(ce!=0&&(_(ce,W,Ze,ft,je,Qe),ce=0,je=De,Qe=Fe,Ze=X,ft=ke),fe+=Q):(fe!=0&&(g(fe,W,Ze,ft,je,Qe),fe=0,je=De,Qe=Fe,Ze=X,ft=ke),ce+=Q),Q<=0){fe!=0&&(g(fe,W,Ze,ft,je,Qe),fe=0),ce!=0&&(_(ce,W,Ze,ft,je,Qe),ce=0);break}}ne<=ae&&(Fe+=q.width[ne],ke+=q.width[ne],ue+=q.width[ne])}ce!=0&&(_(ce,W,Ze,ft,je,Qe),ce=0),fe!=0&&(g(fe,W,Ze,ft,je,Qe),fe=0)}function S(X,z,W){var q=0,Z=0;do{var ne=X[z++],ae=X[z++];q<ne&&(q=ne),Z<ae&&(Z=ae)}while(z<W);return q<Z&&(q=Z),q}function E(X,z,W,q,Z,ne){var ae=i.ht[q].xlen*65536+i.ht[Z].xlen,ue=0,te;do{var ce=X[z++],fe=X[z++];ce!=0&&(ce>14&&(ce=15,ue+=ae),ce*=16),fe!=0&&(fe>14&&(fe=15,ue+=ae),ce+=fe),ue+=i.largetbl[ce]}while(z<W);return te=ue&65535,ue>>=16,ue>te&&(ue=te,q=Z),ne.bits+=ue,q}function y(X,z,W,q){var Z=0,ne=i.ht[1].hlen;do{var ae=X[z+0]*2+X[z+1];z+=2,Z+=ne[ae]}while(z<W);return q.bits+=Z,1}function A(X,z,W,q,Z){var ne=0,ae,ue=i.ht[q].xlen,te;q==2?te=i.table23:te=i.table56;do{var ce=X[z+0]*ue+X[z+1];z+=2,ne+=te[ce]}while(z<W);return ae=ne&65535,ne>>=16,ne>ae&&(ne=ae,q++),Z.bits+=ne,q}function C(X,z,W,q,Z){var ne=0,ae=0,ue=0,te=i.ht[q].xlen,ce=i.ht[q].hlen,fe=i.ht[q+1].hlen,ke=i.ht[q+2].hlen;do{var De=X[z+0]*te+X[z+1];z+=2,ne+=ce[De],ae+=fe[De],ue+=ke[De]}while(z<W);var Fe=q;return ne>ae&&(ne=ae,Fe++),ne>ue&&(ne=ue,Fe=q+2),Z.bits+=ne,Fe}var O=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function N(X,z,W,q){var Z=S(X,z,W);switch(Z){case 0:return Z;case 1:return y(X,z,W,q);case 2:case 3:return A(X,z,W,O[Z-1],q);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return C(X,z,W,O[Z-1],q);default:if(Z>r.IXMAX_VAL)return q.bits=r.LARGE_BITS,-1;Z-=15;var ne;for(ne=24;ne<32&&!(i.ht[ne].linmax>=Z);ne++);var ae;for(ae=ne-8;ae<24&&!(i.ht[ae].linmax>=Z);ae++);return E(X,z,W,ae,ne,q)}}this.noquant_count_bits=function(X,z,W){var q=z.l3_enc,Z=Math.min(576,z.max_nonzero_coeff+2>>1<<1);for(W!=null&&(W.sfb_count1=0);Z>1&&!(q[Z-1]|q[Z-2]);Z-=2);z.count1=Z;for(var ne=0,ae=0;Z>3;Z-=4){var ue;if(((q[Z-1]|q[Z-2]|q[Z-3]|q[Z-4])&2147483647)>1)break;ue=((q[Z-4]*2+q[Z-3])*2+q[Z-2])*2+q[Z-1],ne+=i.t32l[ue],ae+=i.t33l[ue]}var te=ne;if(z.count1table_select=0,ne>ae&&(te=ae,z.count1table_select=1),z.count1bits=te,z.big_values=Z,Z==0)return te;if(z.block_type==a.SHORT_TYPE)ne=3*X.scalefac_band.s[3],ne>z.big_values&&(ne=z.big_values),ae=z.big_values;else if(z.block_type==a.NORM_TYPE){if(ne=z.region0_count=X.bv_scf[Z-2],ae=z.region1_count=X.bv_scf[Z-1],o(ne+ae+2<a.SBPSY_l),ae=X.scalefac_band.l[ne+ae+2],ne=X.scalefac_band.l[ne+1],ae<Z){var ce=new p(te);z.table_select[2]=N(q,ae,Z,ce),te=ce.bits}}else z.region0_count=7,z.region1_count=a.SBMAX_l-1-7-1,ne=X.scalefac_band.l[8],ae=Z,ne>ae&&(ne=ae);if(ne=Math.min(ne,Z),ae=Math.min(ae,Z),0<ne){var ce=new p(te);z.table_select[0]=N(q,0,ne,ce),te=ce.bits}if(ne<ae){var ce=new p(te);z.table_select[1]=N(q,ne,ae,ce),te=ce.bits}if(X.use_best_huffman==2&&(z.part2_3_length=te,best_huffman_divide(X,z),te=z.part2_3_length),W!=null&&z.block_type==a.NORM_TYPE){for(var fe=0;X.scalefac_band.l[fe]<z.big_values;)fe++;W.sfb_count1=fe}return te},this.count_bits=function(X,z,W,q){var Z=W.l3_enc,ne=r.IXMAX_VAL/u.IPOW20(W.global_gain);if(W.xrpow_max>ne)return r.LARGE_BITS;if(T(z,Z,u.IPOW20(W.global_gain),W,q),X.substep_shaping&2)for(var ae=0,ue=W.global_gain+W.scalefac_scale,te=.634521682242439/u.IPOW20(ue),ce=0;ce<W.sfbmax;ce++){var fe=W.width[ce];if(X.pseudohalf[ce]==0)ae+=fe;else{var ke;for(ke=ae,ae+=fe;ke<ae;++ke)Z[ke]=z[ke]>=te?Z[ke]:0}}return this.noquant_count_bits(X,W,q)};function R(X,z,W,q,Z,ne,ae){for(var ue=z.big_values,te=0;te<=22;te++)q[te]=r.LARGE_BITS;for(var te=0;te<16;te++){var ce=X.scalefac_band.l[te+1];if(ce>=ue)break;var fe=0,ke=new p(fe),De=N(W,0,ce,ke);fe=ke.bits;for(var Fe=0;Fe<8;Fe++){var je=X.scalefac_band.l[te+Fe+2];if(je>=ue)break;var Qe=fe;ke=new p(Qe);var Ze=N(W,ce,je,ke);Qe=ke.bits,q[te+Fe]>Qe&&(q[te+Fe]=Qe,Z[te+Fe]=te,ne[te+Fe]=De,ae[te+Fe]=Ze)}}}function k(X,z,W,q,Z,ne,ae,ue){for(var te=z.big_values,ce=2;ce<a.SBMAX_l+1;ce++){var fe=X.scalefac_band.l[ce];if(fe>=te)break;var ke=Z[ce-2]+z.count1bits;if(W.part2_3_length<=ke)break;var De=new p(ke),Fe=N(q,fe,te,De);ke=De.bits,!(W.part2_3_length<=ke)&&(W.assign(z),W.part2_3_length=ke,W.region0_count=ne[ce-2],W.region1_count=ce-2-ne[ce-2],W.table_select[0]=ae[ce-2],W.table_select[1]=ue[ce-2],W.table_select[2]=Fe)}}this.best_huffman_divide=function(X,z){var W=new l,q=z.l3_enc,Z=s(23),ne=s(23),ae=s(23),ue=s(23);if(!(z.block_type==a.SHORT_TYPE&&X.mode_gr==1)){W.assign(z),z.block_type==a.NORM_TYPE&&(R(X,z,q,Z,ne,ae,ue),k(X,W,z,q,Z,ne,ae,ue));var te=W.big_values;if(!(te==0||(q[te-2]|q[te-1])>1)&&(te=z.count1+2,!(te>576))){W.assign(z),W.count1=te;for(var ce=0,fe=0;te>W.big_values;te-=4){var ke=((q[te-4]*2+q[te-3])*2+q[te-2])*2+q[te-1];ce+=i.t32l[ke],fe+=i.t33l[ke]}if(W.big_values=te,W.count1table_select=0,ce>fe&&(ce=fe,W.count1table_select=1),W.count1bits=ce,W.block_type==a.NORM_TYPE)k(X,W,z,q,Z,ne,ae,ue);else{if(W.part2_3_length=ce,ce=X.scalefac_band.l[8],ce>te&&(ce=te),ce>0){var De=new p(W.part2_3_length);W.table_select[0]=N(q,0,ce,De),W.part2_3_length=De.bits}if(te>ce){var De=new p(W.part2_3_length);W.table_select[1]=N(q,ce,te,De),W.part2_3_length=De.bits}z.part2_3_length>W.part2_3_length&&z.assign(W)}}}};var L=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],D=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],$=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],M=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];d.slen1_tab=$,d.slen2_tab=M;function K(X,z){for(var W,q=z.tt[1][X],Z=z.tt[0][X],ne=0;ne<i.scfsi_band.length-1;ne++){for(W=i.scfsi_band[ne];W<i.scfsi_band[ne+1]&&!(Z.scalefac[W]!=q.scalefac[W]&&q.scalefac[W]>=0);W++);if(W==i.scfsi_band[ne+1]){for(W=i.scfsi_band[ne];W<i.scfsi_band[ne+1];W++)q.scalefac[W]=-1;z.scfsi[X][ne]=1}}var ae=0,ue=0;for(W=0;W<11;W++)q.scalefac[W]!=-1&&(ue++,ae<q.scalefac[W]&&(ae=q.scalefac[W]));for(var te=0,ce=0;W<a.SBPSY_l;W++)q.scalefac[W]!=-1&&(ce++,te<q.scalefac[W]&&(te=q.scalefac[W]));for(var ne=0;ne<16;ne++)if(ae<L[ne]&&te<D[ne]){var fe=$[ne]*ue+M[ne]*ce;q.part2_length>fe&&(q.part2_length=fe,q.scalefac_compress=ne)}}this.best_scalefac_store=function(X,z,W,q){var Z=q.tt[z][W],ne,ae,ue,te,ce=0;for(ue=0,ne=0;ne<Z.sfbmax;ne++){var fe=Z.width[ne];for(ue+=fe,te=-fe;te<0&&Z.l3_enc[te+ue]==0;te++);te==0&&(Z.scalefac[ne]=ce=-2)}if(Z.scalefac_scale==0&&Z.preflag==0){var ke=0;for(ne=0;ne<Z.sfbmax;ne++)Z.scalefac[ne]>0&&(ke|=Z.scalefac[ne]);if(!(ke&1)&&ke!=0){for(ne=0;ne<Z.sfbmax;ne++)Z.scalefac[ne]>0&&(Z.scalefac[ne]>>=1);Z.scalefac_scale=ce=1}}if(Z.preflag==0&&Z.block_type!=a.SHORT_TYPE&&X.mode_gr==2){for(ne=11;ne<a.SBPSY_l&&!(Z.scalefac[ne]<u.pretab[ne]&&Z.scalefac[ne]!=-2);ne++);if(ne==a.SBPSY_l){for(ne=11;ne<a.SBPSY_l;ne++)Z.scalefac[ne]>0&&(Z.scalefac[ne]-=u.pretab[ne]);Z.preflag=ce=1}}for(ae=0;ae<4;ae++)q.scfsi[W][ae]=0;for(X.mode_gr==2&&z==1&&q.tt[0][W].block_type!=a.SHORT_TYPE&&q.tt[1][W].block_type!=a.SHORT_TYPE&&(K(W,q),ce=0),ne=0;ne<Z.sfbmax;ne++)Z.scalefac[ne]==-2&&(Z.scalefac[ne]=0);ce!=0&&(X.mode_gr==2?this.scale_bitcount(Z):this.scale_bitcount_lsf(X,Z))};function B(X,z){for(var W=0;W<z;++W)if(X[W]<0)return!1;return!0}var H=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],G=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],V=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(X){var z,W,q=0,Z=0,ne,ae=X.scalefac;if(o(B(ae,X.sfbmax)),X.block_type==a.SHORT_TYPE)ne=H,X.mixed_block_flag!=0&&(ne=G);else if(ne=V,X.preflag==0){for(W=11;W<a.SBPSY_l&&!(ae[W]<u.pretab[W]);W++);if(W==a.SBPSY_l)for(X.preflag=1,W=11;W<a.SBPSY_l;W++)ae[W]-=u.pretab[W]}for(W=0;W<X.sfbdivide;W++)q<ae[W]&&(q=ae[W]);for(;W<X.sfbmax;W++)Z<ae[W]&&(Z=ae[W]);for(X.part2_length=r.LARGE_BITS,z=0;z<16;z++)q<L[z]&&Z<D[z]&&X.part2_length>ne[z]&&(X.part2_length=ne[z],X.scalefac_compress=z);return X.part2_length==r.LARGE_BITS};var Y=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(X,z){var W,q,Z,ne,ae,ue,te,ce,fe=s(4),ke=z.scalefac;for(z.preflag!=0?W=2:W=0,te=0;te<4;te++)fe[te]=0;if(z.block_type==a.SHORT_TYPE){q=1;var De=u.nr_of_sfb_block[W][q];for(ce=0,Z=0;Z<4;Z++)for(ne=De[Z]/3,te=0;te<ne;te++,ce++)for(ae=0;ae<3;ae++)ke[ce*3+ae]>fe[Z]&&(fe[Z]=ke[ce*3+ae])}else{q=0;var De=u.nr_of_sfb_block[W][q];for(ce=0,Z=0;Z<4;Z++)for(ne=De[Z],te=0;te<ne;te++,ce++)ke[ce]>fe[Z]&&(fe[Z]=ke[ce])}for(ue=!1,Z=0;Z<4;Z++)fe[Z]>Y[W][Z]&&(ue=!0);if(!ue){var Fe,je,Qe,Ze;for(z.sfb_partition_table=u.nr_of_sfb_block[W][q],Z=0;Z<4;Z++)z.slen[Z]=ee[fe[Z]];switch(Fe=z.slen[0],je=z.slen[1],Qe=z.slen[2],Ze=z.slen[3],W){case 0:z.scalefac_compress=(Fe*5+je<<4)+(Qe<<2)+Ze;break;case 1:z.scalefac_compress=400+(Fe*5+je<<2)+Qe;break;case 2:z.scalefac_compress=500+Fe*3+je;break;default:t.err.printf(`intensity stereo not implemented yet
`);break}}if(!ue)for(o(z.sfb_partition_table!=null),z.part2_length=0,Z=0;Z<4;Z++)z.part2_length+=z.slen[Z]*z.sfb_partition_table[Z];return ue};var ee=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(X){for(var z=2;z<=576;z+=2){for(var W=0,q;X.scalefac_band.l[++W]<z;);for(q=h[W][0];X.scalefac_band.l[q+1]>z;)q--;for(q<0&&(q=h[W][0]),X.bv_scf[z-2]=q,q=h[W][1];X.scalefac_band.l[q+X.bv_scf[z-2]+2]>z;)q--;q<0&&(q=h[W][1]),X.bv_scf[z-1]=q}}}return wh=d,wh}var Rh,zb;function x_(){if(zb)return Rh;zb=1;var e=jn,t=e.System,n=e.Arrays,s=e.new_byte,o=e.new_float_n,a=e.new_int,i=e.assert,l=e2(),r=O_,d=na(),u=Im;p.EQ=function(h,g){return Math.abs(h)>Math.abs(g)?Math.abs(h-g)<=Math.abs(h)*1e-6:Math.abs(h-g)<=Math.abs(g)*1e-6},p.NEQ=function(h,g){return!p.EQ(h,g)};function p(){var h=w_(),g=this,_=32773,T=null,S=null,E=null,y=null;this.setModules=function(z,W,q,Z){T=z,S=W,E=q,y=Z};var A=null,C=0,O=0,N=0;this.getframebits=function(z){var W=z.internal_flags,q;W.bitrate_index!=0?q=r.bitrate_table[z.version][W.bitrate_index]:q=z.brate;var Z=0|(z.version+1)*72e3*q/z.out_samplerate+W.padding;return 8*Z};function R(z){t.arraycopy(z.header[z.w_ptr].buf,0,A,O,z.sideinfo_len),O+=z.sideinfo_len,C+=z.sideinfo_len*8,z.w_ptr=z.w_ptr+1&u.MAX_HEADER_BUF-1}function k(z,W,q){for(;q>0;){var Z;N==0&&(N=8,O++,i(O<h.LAME_MAXMP3BUFFER),i(z.header[z.w_ptr].write_timing>=C),z.header[z.w_ptr].write_timing==C&&R(z),A[O]=0),Z=Math.min(q,N),q-=Z,N-=Z,A[O]|=W>>q<<N,C+=Z}}function L(z,W,q){for(;q>0;){var Z;N==0&&(N=8,O++,i(O<h.LAME_MAXMP3BUFFER),A[O]=0),Z=Math.min(q,N),q-=Z,N-=Z,A[O]|=W>>q<<N,C+=Z}}function D(z,W){var q=z.internal_flags,Z;if(W>=8&&(k(q,76,8),W-=8),W>=8&&(k(q,65,8),W-=8),W>=8&&(k(q,77,8),W-=8),W>=8&&(k(q,69,8),W-=8),W>=32){var ne=E.getLameShortVersion();if(W>=32)for(Z=0;Z<ne.length&&W>=8;++Z)W-=8,k(q,ne.charAt(Z),8)}for(;W>=1;W-=1)k(q,q.ancillary_flag,1),q.ancillary_flag^=z.disable_reservoir?0:1}function $(z,W,q){for(var Z=z.header[z.h_ptr].ptr;q>0;){var ne=Math.min(q,8-(Z&7));q-=ne,z.header[z.h_ptr].buf[Z>>3]|=W>>q<<8-(Z&7)-ne,Z+=ne}z.header[z.h_ptr].ptr=Z}function M(z,W){z<<=8;for(var q=0;q<8;q++)z<<=1,W<<=1,(W^z)&65536&&(W^=_);return W}this.CRC_writeheader=function(z,W){var q=65535;q=M(W[2]&255,q),q=M(W[3]&255,q);for(var Z=6;Z<z.sideinfo_len;Z++)q=M(W[Z]&255,q);W[4]=byte(q>>8),W[5]=byte(q&255)};function K(z,W){var q=z.internal_flags,Z,ne,ae;if(Z=q.l3_side,q.header[q.h_ptr].ptr=0,n.fill(q.header[q.h_ptr].buf,0,q.sideinfo_len,0),z.out_samplerate<16e3?$(q,4094,12):$(q,4095,12),$(q,z.version,1),$(q,1,2),$(q,z.error_protection?0:1,1),$(q,q.bitrate_index,4),$(q,q.samplerate_index,2),$(q,q.padding,1),$(q,z.extension,1),$(q,z.mode.ordinal(),2),$(q,q.mode_ext,2),$(q,z.copyright,1),$(q,z.original,1),$(q,z.emphasis,2),z.error_protection&&$(q,0,16),z.version==1){for(i(Z.main_data_begin>=0),$(q,Z.main_data_begin,9),q.channels_out==2?$(q,Z.private_bits,3):$(q,Z.private_bits,5),ae=0;ae<q.channels_out;ae++){var ue;for(ue=0;ue<4;ue++)$(q,Z.scfsi[ae][ue],1)}for(ne=0;ne<2;ne++)for(ae=0;ae<q.channels_out;ae++){var te=Z.tt[ne][ae];$(q,te.part2_3_length+te.part2_length,12),$(q,te.big_values/2,9),$(q,te.global_gain,8),$(q,te.scalefac_compress,4),te.block_type!=d.NORM_TYPE?($(q,1,1),$(q,te.block_type,2),$(q,te.mixed_block_flag,1),te.table_select[0]==14&&(te.table_select[0]=16),$(q,te.table_select[0],5),te.table_select[1]==14&&(te.table_select[1]=16),$(q,te.table_select[1],5),$(q,te.subblock_gain[0],3),$(q,te.subblock_gain[1],3),$(q,te.subblock_gain[2],3)):($(q,0,1),te.table_select[0]==14&&(te.table_select[0]=16),$(q,te.table_select[0],5),te.table_select[1]==14&&(te.table_select[1]=16),$(q,te.table_select[1],5),te.table_select[2]==14&&(te.table_select[2]=16),$(q,te.table_select[2],5),i(0<=te.region0_count&&te.region0_count<16),i(0<=te.region1_count&&te.region1_count<8),$(q,te.region0_count,4),$(q,te.region1_count,3)),$(q,te.preflag,1),$(q,te.scalefac_scale,1),$(q,te.count1table_select,1)}}else for(i(Z.main_data_begin>=0),$(q,Z.main_data_begin,8),$(q,Z.private_bits,q.channels_out),ne=0,ae=0;ae<q.channels_out;ae++){var te=Z.tt[ne][ae];$(q,te.part2_3_length+te.part2_length,12),$(q,te.big_values/2,9),$(q,te.global_gain,8),$(q,te.scalefac_compress,9),te.block_type!=d.NORM_TYPE?($(q,1,1),$(q,te.block_type,2),$(q,te.mixed_block_flag,1),te.table_select[0]==14&&(te.table_select[0]=16),$(q,te.table_select[0],5),te.table_select[1]==14&&(te.table_select[1]=16),$(q,te.table_select[1],5),$(q,te.subblock_gain[0],3),$(q,te.subblock_gain[1],3),$(q,te.subblock_gain[2],3)):($(q,0,1),te.table_select[0]==14&&(te.table_select[0]=16),$(q,te.table_select[0],5),te.table_select[1]==14&&(te.table_select[1]=16),$(q,te.table_select[1],5),te.table_select[2]==14&&(te.table_select[2]=16),$(q,te.table_select[2],5),i(0<=te.region0_count&&te.region0_count<16),i(0<=te.region1_count&&te.region1_count<8),$(q,te.region0_count,4),$(q,te.region1_count,3)),$(q,te.scalefac_scale,1),$(q,te.count1table_select,1)}z.error_protection&&CRC_writeheader(q,q.header[q.h_ptr].buf);{var ce=q.h_ptr;i(q.header[ce].ptr==q.sideinfo_len*8),q.h_ptr=ce+1&u.MAX_HEADER_BUF-1,q.header[q.h_ptr].write_timing=q.header[ce].write_timing+W,q.h_ptr==q.w_ptr&&t.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function B(z,W){var q=r.ht[W.count1table_select+32],Z,ne=0,ae=W.big_values,ue=W.big_values;for(i(W.count1table_select<2),Z=(W.count1-W.big_values)/4;Z>0;--Z){var te=0,ce=0,fe;fe=W.l3_enc[ae+0],fe!=0&&(ce+=8,W.xr[ue+0]<0&&te++),fe=W.l3_enc[ae+1],fe!=0&&(ce+=4,te*=2,W.xr[ue+1]<0&&te++),fe=W.l3_enc[ae+2],fe!=0&&(ce+=2,te*=2,W.xr[ue+2]<0&&te++),fe=W.l3_enc[ae+3],fe!=0&&(ce++,te*=2,W.xr[ue+3]<0&&te++),ae+=4,ue+=4,k(z,te+q.table[ce],q.hlen[ce]),ne+=q.hlen[ce]}return ne}function H(z,W,q,Z,ne){var ae=r.ht[W],ue=0;if(W==0)return ue;for(var te=q;te<Z;te+=2){var ce=0,fe=0,ke=ae.xlen,De=ae.xlen,Fe=0,je=ne.l3_enc[te],Qe=ne.l3_enc[te+1];if(je!=0&&(ne.xr[te]<0&&Fe++,ce--),W>15){if(je>14){var Ze=je-15;i(Ze<=ae.linmax),Fe|=Ze<<1,fe=ke,je=15}if(Qe>14){var ft=Qe-15;i(ft<=ae.linmax),Fe<<=ke,Fe|=ft,fe+=ke,Qe=15}De=16}Qe!=0&&(Fe<<=1,ne.xr[te+1]<0&&Fe++,ce--),je=je*De+Qe,fe-=ce,ce+=ae.hlen[je],k(z,ae.table[je],ce),k(z,Fe,fe),ue+=ce+fe}return ue}function G(z,W){var q=3*z.scalefac_band.s[3];q>W.big_values&&(q=W.big_values);var Z=H(z,W.table_select[0],0,q,W);return Z+=H(z,W.table_select[1],q,W.big_values,W),Z}function V(z,W){var q,Z,ne,ae;q=W.big_values;var ue=W.region0_count+1;return i(ue<z.scalefac_band.l.length),ne=z.scalefac_band.l[ue],ue+=W.region1_count+1,i(ue<z.scalefac_band.l.length),ae=z.scalefac_band.l[ue],ne>q&&(ne=q),ae>q&&(ae=q),Z=H(z,W.table_select[0],0,ne,W),Z+=H(z,W.table_select[1],ne,ae,W),Z+=H(z,W.table_select[2],ae,q,W),Z}function Y(z){var W,q,Z,ne,ae=0,ue=z.internal_flags,te=ue.l3_side;if(z.version==1)for(W=0;W<2;W++)for(q=0;q<ue.channels_out;q++){var ce=te.tt[W][q],fe=l.slen1_tab[ce.scalefac_compress],ke=l.slen2_tab[ce.scalefac_compress];for(ne=0,Z=0;Z<ce.sfbdivide;Z++)ce.scalefac[Z]!=-1&&(k(ue,ce.scalefac[Z],fe),ne+=fe);for(;Z<ce.sfbmax;Z++)ce.scalefac[Z]!=-1&&(k(ue,ce.scalefac[Z],ke),ne+=ke);i(ne==ce.part2_length),ce.block_type==d.SHORT_TYPE?ne+=G(ue,ce):ne+=V(ue,ce),ne+=B(ue,ce),i(ne==ce.part2_3_length+ce.part2_length),ae+=ne}else for(W=0,q=0;q<ue.channels_out;q++){var ce=te.tt[W][q],De,Fe,je=0;if(i(ce.sfb_partition_table!=null),ne=0,Z=0,Fe=0,ce.block_type==d.SHORT_TYPE){for(;Fe<4;Fe++){var Qe=ce.sfb_partition_table[Fe]/3,Ze=ce.slen[Fe];for(De=0;De<Qe;De++,Z++)k(ue,Math.max(ce.scalefac[Z*3+0],0),Ze),k(ue,Math.max(ce.scalefac[Z*3+1],0),Ze),k(ue,Math.max(ce.scalefac[Z*3+2],0),Ze),je+=3*Ze}ne+=G(ue,ce)}else{for(;Fe<4;Fe++){var Qe=ce.sfb_partition_table[Fe],Ze=ce.slen[Fe];for(De=0;De<Qe;De++,Z++)k(ue,Math.max(ce.scalefac[Z],0),Ze),je+=Ze}ne+=V(ue,ce)}ne+=B(ue,ce),i(ne==ce.part2_3_length),i(je==ce.part2_length),ae+=je+ne}return ae}function ee(){this.total=0}function X(z,W){var q=z.internal_flags,Z,ne,ae,ue,te;return te=q.w_ptr,ue=q.h_ptr-1,ue==-1&&(ue=u.MAX_HEADER_BUF-1),Z=q.header[ue].write_timing-C,W.total=Z,Z>=0&&(ne=1+ue-te,ue<te&&(ne=1+ue-te+u.MAX_HEADER_BUF),Z-=ne*8*q.sideinfo_len),ae=g.getframebits(z),Z+=ae,W.total+=ae,W.total%8!=0?W.total=1+W.total/8:W.total=W.total/8,W.total+=O+1,Z<0&&t.err.println(`strange error flushing buffer ... 
`),Z}this.flush_bitstream=function(z){var W=z.internal_flags,q,Z,ne=W.h_ptr-1;if(ne==-1&&(ne=u.MAX_HEADER_BUF-1),q=W.l3_side,!((Z=X(z,new ee))<0)){if(D(z,Z),i(W.header[ne].write_timing+this.getframebits(z)==C),W.ResvSize=0,q.main_data_begin=0,W.findReplayGain){var ae=T.GetTitleGain(W.rgdata);i(NEQ(ae,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),W.RadioGain=Math.floor(ae*10+.5)|0}W.findPeakSample&&(W.noclipGainChange=Math.ceil(Math.log10(W.PeakSample/32767)*20*10)|0,W.noclipGainChange>0&&(EQ(z.scale,1)||EQ(z.scale,0))?W.noclipScale=Math.floor(32767/W.PeakSample*100)/100:W.noclipScale=-1)}},this.add_dummy_byte=function(z,W,q){for(var Z=z.internal_flags,ne;q-- >0;)for(L(Z,W,8),ne=0;ne<u.MAX_HEADER_BUF;++ne)Z.header[ne].write_timing+=8},this.format_bitstream=function(z){var W=z.internal_flags,q;q=W.l3_side;var Z=this.getframebits(z);D(z,q.resvDrain_pre),K(z,Z);var ne=8*W.sideinfo_len;if(ne+=Y(z),D(z,q.resvDrain_post),ne+=q.resvDrain_post,q.main_data_begin+=(Z-ne)/8,X(z,new ee)!=W.ResvSize&&t.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),q.main_data_begin*8!=W.ResvSize&&(t.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*q.main_data_begin,W.ResvSize,q.resvDrain_post,q.resvDrain_pre,8*W.sideinfo_len,ne-q.resvDrain_post-8*W.sideinfo_len,ne,ne%8,Z),t.err.println("This is a fatal error.  It has several possible causes:"),t.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),t.err.println(" 9%%  Your system is overclocked"),t.err.println(" 1%%  bug in LAME encoding library"),W.ResvSize=q.main_data_begin*8),C>1e9){var ae;for(ae=0;ae<u.MAX_HEADER_BUF;++ae)W.header[ae].write_timing-=C;C=0}return 0},this.copy_buffer=function(z,W,q,Z,ne){var ae=O+1;if(ae<=0)return 0;if(Z!=0&&ae>Z)return-1;if(t.arraycopy(A,0,W,q,ae),O=-1,N=0,ne!=0){var ue=a(1);if(ue[0]=z.nMusicCRC,y.updateMusicCRC(ue,W,q,ae),z.nMusicCRC=ue[0],ae>0&&(z.VBR_seek_table.nBytesWritten+=ae),z.decode_on_the_fly){for(var te=o([2,1152]),ce=ae,fe=-1,ke;fe!=0;)if(fe=S.hip_decode1_unclipped(z.hip,W,q,ce,te[0],te[1]),ce=0,fe==-1&&(fe=0),fe>0){if(z.findPeakSample){for(ke=0;ke<fe;ke++)te[0][ke]>z.PeakSample?z.PeakSample=te[0][ke]:-te[0][ke]>z.PeakSample&&(z.PeakSample=-te[0][ke]);if(z.channels_out>1)for(ke=0;ke<fe;ke++)te[1][ke]>z.PeakSample?z.PeakSample=te[1][ke]:-te[1][ke]>z.PeakSample&&(z.PeakSample=-te[1][ke])}if(z.findReplayGain&&T.AnalyzeSamples(z.rgdata,te[0],0,te[1],0,fe,z.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return ae},this.init_bit_stream_w=function(z){A=s(h.LAME_MAXMP3BUFFER),z.h_ptr=z.w_ptr=0,z.header[z.h_ptr].write_timing=0,O=-1,N=0,C=0}}return Rh=p,Rh}var $h,Wb;function w_(){if(Wb)return $h;Wb=1;var e=jn,t=e.System,n=e.VbrMode,s=e.ShortBlock,o=e.new_float,a=e.new_int_n,i=e.new_short_n,l=e.assert,r=MTe,d=DTe,u=Im,p=iye,h=rye,g=fye,_=x_(),T=O_,S=na();function E(){var y=jc,A=this,C=128*1024;E.V9=410,E.V8=420,E.V7=430,E.V6=440,E.V5=450,E.V4=460,E.V3=470,E.V2=480,E.V1=490,E.V0=500,E.R3MIX=1e3,E.STANDARD=1001,E.EXTREME=1002,E.INSANE=1003,E.STANDARD_FAST=1004,E.EXTREME_FAST=1005,E.MEDIUM=1006,E.MEDIUM_FAST=1007;var O=16384+C;E.LAME_MAXMP3BUFFER=O;var N,R,k,L,D,$=new r,M,K,B;this.enc=new S,this.setModules=function(Q,oe,de,Ce,Ae,Le,Me,Ue,we){N=Q,R=oe,k=de,L=Ce,D=Ae,M=Le,K=Ue,B=we,this.enc.setModules(R,$,L,M)};function H(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=o(S.SBMAX_l),this.bo_s_weight=o(S.SBMAX_s)}function G(){this.lowerlimit=0}function V(Q,oe){this.lowpass=oe}var Y=4294479419;function ee(Q){var oe;return Q.class_id=Y,oe=Q.internal_flags=new u,Q.mode=y.NOT_SET,Q.original=1,Q.in_samplerate=44100,Q.num_channels=2,Q.num_samples=-1,Q.bWriteVbrTag=!0,Q.quality=-1,Q.short_blocks=null,oe.subblock_gain=-1,Q.lowpassfreq=0,Q.highpassfreq=0,Q.lowpasswidth=-1,Q.highpasswidth=-1,Q.VBR=n.vbr_off,Q.VBR_q=4,Q.ATHcurve=-1,Q.VBR_mean_bitrate_kbps=128,Q.VBR_min_bitrate_kbps=0,Q.VBR_max_bitrate_kbps=0,Q.VBR_hard_min=0,oe.VBR_min_bitrate=1,oe.VBR_max_bitrate=13,Q.quant_comp=-1,Q.quant_comp_short=-1,Q.msfix=-1,oe.resample_ratio=1,oe.OldValue[0]=180,oe.OldValue[1]=180,oe.CurrentStep[0]=4,oe.CurrentStep[1]=4,oe.masking_lower=1,oe.nsPsy.attackthre=-1,oe.nsPsy.attackthre_s=-1,Q.scale=-1,Q.athaa_type=-1,Q.ATHtype=-1,Q.athaa_loudapprox=-1,Q.athaa_sensitivity=0,Q.useTemporal=null,Q.interChRatio=-1,oe.mf_samples_to_encode=S.ENCDELAY+S.POSTDELAY,Q.encoder_padding=0,oe.mf_size=S.ENCDELAY-S.MDCTDELAY,Q.findReplayGain=!1,Q.decode_on_the_fly=!1,oe.decode_on_the_fly=!1,oe.findReplayGain=!1,oe.findPeakSample=!1,oe.RadioGain=0,oe.AudiophileGain=0,oe.noclipGainChange=0,oe.noclipScale=-1,Q.preset=0,Q.write_id3tag_automatic=!0,0}this.lame_init=function(){var Q=new d;return ee(Q),Q.lame_allocated_gfp=1,Q};function X(Q){return Q>1?0:Q<=0?1:Math.cos(Math.PI/2*Q)}this.nearestBitrateFullIndex=function(Q){var oe=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],de=0,Ce=0,Ae=0,Le=0;Le=oe[16],Ae=16,Ce=oe[16],de=16;for(var Me=0;Me<16;Me++)if(Math.max(Q,oe[Me+1])!=Q){Le=oe[Me+1],Ae=Me+1,Ce=oe[Me],de=Me;break}return Le-Q>Q-Ce?de:Ae};function z(Q,oe){var de=44100;return oe>=48e3?de=48e3:oe>=44100?de=44100:oe>=32e3?de=32e3:oe>=24e3?de=24e3:oe>=22050?de=22050:oe>=16e3?de=16e3:oe>=12e3?de=12e3:oe>=11025?de=11025:oe>=8e3&&(de=8e3),Q==-1?de:(Q<=15960&&(de=44100),Q<=15250&&(de=32e3),Q<=11220&&(de=24e3),Q<=9970&&(de=22050),Q<=7230&&(de=16e3),Q<=5420&&(de=12e3),Q<=4510&&(de=11025),Q<=3970&&(de=8e3),oe<de?oe>44100?48e3:oe>32e3?44100:oe>24e3?32e3:oe>22050?24e3:oe>16e3?22050:oe>12e3?16e3:oe>11025?12e3:oe>8e3?11025:8e3:de)}function W(Q,oe){switch(Q){case 44100:return oe.version=1,0;case 48e3:return oe.version=1,1;case 32e3:return oe.version=1,2;case 22050:return oe.version=0,0;case 24e3:return oe.version=0,1;case 16e3:return oe.version=0,2;case 11025:return oe.version=0,0;case 12e3:return oe.version=0,1;case 8e3:return oe.version=0,2;default:return oe.version=0,-1}}function q(Q,oe,de){de<16e3&&(oe=2);for(var Ce=T.bitrate_table[oe][1],Ae=2;Ae<=14;Ae++)T.bitrate_table[oe][Ae]>0&&Math.abs(T.bitrate_table[oe][Ae]-Q)<Math.abs(Ce-Q)&&(Ce=T.bitrate_table[oe][Ae]);return Ce}function Z(Q,oe,de){de<16e3&&(oe=2);for(var Ce=0;Ce<=14;Ce++)if(T.bitrate_table[oe][Ce]>0&&T.bitrate_table[oe][Ce]==Q)return Ce;return-1}function ne(Q,oe){var de=[new V(8,2e3),new V(16,3700),new V(24,3900),new V(32,5500),new V(40,7e3),new V(48,7500),new V(56,1e4),new V(64,11e3),new V(80,13500),new V(96,15100),new V(112,15600),new V(128,17e3),new V(160,17500),new V(192,18600),new V(224,19400),new V(256,19700),new V(320,20500)],Ce=A.nearestBitrateFullIndex(oe);Q.lowerlimit=de[Ce].lowpass}function ae(Q){var oe=Q.internal_flags,de=32,Ce=-1;if(oe.lowpass1>0){for(var Ae=999,Le=0;Le<=31;Le++){var Me=Le/31;Me>=oe.lowpass2&&(de=Math.min(de,Le)),oe.lowpass1<Me&&Me<oe.lowpass2&&(Ae=Math.min(Ae,Le))}Ae==999?oe.lowpass1=(de-.75)/31:oe.lowpass1=(Ae-.75)/31,oe.lowpass2=de/31}if(oe.highpass2>0&&oe.highpass2<.9*(.75/31)&&(oe.highpass1=0,oe.highpass2=0,t.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),oe.highpass2>0){for(var Ue=-1,Le=0;Le<=31;Le++){var Me=Le/31;Me<=oe.highpass1&&(Ce=Math.max(Ce,Le)),oe.highpass1<Me&&Me<oe.highpass2&&(Ue=Math.max(Ue,Le))}oe.highpass1=Ce/31,Ue==-1?oe.highpass2=(Ce+.75)/31:oe.highpass2=(Ue+.75)/31}for(var Le=0;Le<32;Le++){var we,ge,Me=Le/31;oe.highpass2>oe.highpass1?we=X((oe.highpass2-Me)/(oe.highpass2-oe.highpass1+1e-20)):we=1,oe.lowpass2>oe.lowpass1?ge=X((Me-oe.lowpass1)/(oe.lowpass2-oe.lowpass1+1e-20)):ge=1,oe.amp_filter[Le]=we*ge}}function ue(Q){var oe=Q.internal_flags;switch(Q.quality){default:case 9:oe.psymodel=0,oe.noise_shaping=0,oe.noise_shaping_amp=0,oe.noise_shaping_stop=0,oe.use_best_huffman=0,oe.full_outer_loop=0;break;case 8:Q.quality=7;case 7:oe.psymodel=1,oe.noise_shaping=0,oe.noise_shaping_amp=0,oe.noise_shaping_stop=0,oe.use_best_huffman=0,oe.full_outer_loop=0;break;case 6:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.noise_shaping_amp=0,oe.noise_shaping_stop=0,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=0,oe.full_outer_loop=0;break;case 5:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.noise_shaping_amp=0,oe.noise_shaping_stop=0,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=0,oe.full_outer_loop=0;break;case 4:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.noise_shaping_amp=0,oe.noise_shaping_stop=0,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=1,oe.full_outer_loop=0;break;case 3:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.noise_shaping_amp=1,oe.noise_shaping_stop=1,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=1,oe.full_outer_loop=0;break;case 2:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.substep_shaping==0&&(oe.substep_shaping=2),oe.noise_shaping_amp=1,oe.noise_shaping_stop=1,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=1,oe.full_outer_loop=0;break;case 1:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.substep_shaping==0&&(oe.substep_shaping=2),oe.noise_shaping_amp=2,oe.noise_shaping_stop=1,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=1,oe.full_outer_loop=0;break;case 0:oe.psymodel=1,oe.noise_shaping==0&&(oe.noise_shaping=1),oe.substep_shaping==0&&(oe.substep_shaping=2),oe.noise_shaping_amp=2,oe.noise_shaping_stop=1,oe.subblock_gain==-1&&(oe.subblock_gain=1),oe.use_best_huffman=1,oe.full_outer_loop=0;break}}function te(Q){var oe=Q.internal_flags;Q.frameNum=0,Q.write_id3tag_automatic&&K.id3tag_write_v2(Q),oe.bitrate_stereoMode_Hist=a([16,5]),oe.bitrate_blockType_Hist=a([16,6]),oe.PeakSample=0,Q.bWriteVbrTag&&M.InitVbrTag(Q)}this.lame_init_params=function(Q){var oe=Q.internal_flags;if(oe.Class_ID=0,oe.ATH==null&&(oe.ATH=new p),oe.PSY==null&&(oe.PSY=new H),oe.rgdata==null&&(oe.rgdata=new h),oe.channels_in=Q.num_channels,oe.channels_in==1&&(Q.mode=y.MONO),oe.channels_out=Q.mode==y.MONO?1:2,oe.mode_ext=S.MPG_MD_MS_LR,Q.mode==y.MONO&&(Q.force_ms=!1),Q.VBR==n.vbr_off&&Q.VBR_mean_bitrate_kbps!=128&&Q.brate==0&&(Q.brate=Q.VBR_mean_bitrate_kbps),Q.VBR==n.vbr_off||Q.VBR==n.vbr_mtrh||Q.VBR==n.vbr_mt||(Q.free_format=!1),Q.VBR==n.vbr_off&&Q.brate==0&&_.EQ(Q.compression_ratio,0)&&(Q.compression_ratio=11.025),Q.VBR==n.vbr_off&&Q.compression_ratio>0&&(Q.out_samplerate==0&&(Q.out_samplerate=map2MP3Frequency(int(.97*Q.in_samplerate))),Q.brate=0|Q.out_samplerate*16*oe.channels_out/(1e3*Q.compression_ratio),oe.samplerate_index=W(Q.out_samplerate,Q),Q.free_format||(Q.brate=q(Q.brate,Q.version,Q.out_samplerate))),Q.out_samplerate!=0&&(Q.out_samplerate<16e3?(Q.VBR_mean_bitrate_kbps=Math.max(Q.VBR_mean_bitrate_kbps,8),Q.VBR_mean_bitrate_kbps=Math.min(Q.VBR_mean_bitrate_kbps,64)):Q.out_samplerate<32e3?(Q.VBR_mean_bitrate_kbps=Math.max(Q.VBR_mean_bitrate_kbps,8),Q.VBR_mean_bitrate_kbps=Math.min(Q.VBR_mean_bitrate_kbps,160)):(Q.VBR_mean_bitrate_kbps=Math.max(Q.VBR_mean_bitrate_kbps,32),Q.VBR_mean_bitrate_kbps=Math.min(Q.VBR_mean_bitrate_kbps,320))),Q.lowpassfreq==0){var de=16e3;switch(Q.VBR){case n.vbr_off:{var Ce=new G;ne(Ce,Q.brate),de=Ce.lowerlimit;break}case n.vbr_abr:{var Ce=new G;ne(Ce,Q.VBR_mean_bitrate_kbps),de=Ce.lowerlimit;break}case n.vbr_rh:{var Ae=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=Q.VBR_q&&Q.VBR_q<=9){var Le=Ae[Q.VBR_q],Me=Ae[Q.VBR_q+1],Ue=Q.VBR_q_frac;de=linear_int(Le,Me,Ue)}else de=19500;break}default:{var Ae=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=Q.VBR_q&&Q.VBR_q<=9){var Le=Ae[Q.VBR_q],Me=Ae[Q.VBR_q+1],Ue=Q.VBR_q_frac;de=linear_int(Le,Me,Ue)}else de=19500}}Q.mode==y.MONO&&(Q.VBR==n.vbr_off||Q.VBR==n.vbr_abr)&&(de*=1.5),Q.lowpassfreq=de|0}if(Q.out_samplerate==0&&(2*Q.lowpassfreq>Q.in_samplerate&&(Q.lowpassfreq=Q.in_samplerate/2),Q.out_samplerate=z(Q.lowpassfreq|0,Q.in_samplerate)),Q.lowpassfreq=Math.min(20500,Q.lowpassfreq),Q.lowpassfreq=Math.min(Q.out_samplerate/2,Q.lowpassfreq),Q.VBR==n.vbr_off&&(Q.compression_ratio=Q.out_samplerate*16*oe.channels_out/(1e3*Q.brate)),Q.VBR==n.vbr_abr&&(Q.compression_ratio=Q.out_samplerate*16*oe.channels_out/(1e3*Q.VBR_mean_bitrate_kbps)),Q.bWriteVbrTag||(Q.findReplayGain=!1,Q.decode_on_the_fly=!1,oe.findPeakSample=!1),oe.findReplayGain=Q.findReplayGain,oe.decode_on_the_fly=Q.decode_on_the_fly,oe.decode_on_the_fly&&(oe.findPeakSample=!0),oe.findReplayGain&&N.InitGainAnalysis(oe.rgdata,Q.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return Q.internal_flags=null,-6;switch(oe.decode_on_the_fly&&!Q.decode_only&&(oe.hip!=null&&B.hip_decode_exit(oe.hip),oe.hip=B.hip_decode_init()),oe.mode_gr=Q.out_samplerate<=24e3?1:2,Q.framesize=576*oe.mode_gr,Q.encoder_delay=S.ENCDELAY,oe.resample_ratio=Q.in_samplerate/Q.out_samplerate,Q.VBR){case n.vbr_mt:case n.vbr_rh:case n.vbr_mtrh:{var we=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];Q.compression_ratio=we[Q.VBR_q]}break;case n.vbr_abr:Q.compression_ratio=Q.out_samplerate*16*oe.channels_out/(1e3*Q.VBR_mean_bitrate_kbps);break;default:Q.compression_ratio=Q.out_samplerate*16*oe.channels_out/(1e3*Q.brate);break}if(Q.mode==y.NOT_SET&&(Q.mode=y.JOINT_STEREO),Q.highpassfreq>0?(oe.highpass1=2*Q.highpassfreq,Q.highpasswidth>=0?oe.highpass2=2*(Q.highpassfreq+Q.highpasswidth):oe.highpass2=1*2*Q.highpassfreq,oe.highpass1/=Q.out_samplerate,oe.highpass2/=Q.out_samplerate):(oe.highpass1=0,oe.highpass2=0),Q.lowpassfreq>0?(oe.lowpass2=2*Q.lowpassfreq,Q.lowpasswidth>=0?(oe.lowpass1=2*(Q.lowpassfreq-Q.lowpasswidth),oe.lowpass1<0&&(oe.lowpass1=0)):oe.lowpass1=1*2*Q.lowpassfreq,oe.lowpass1/=Q.out_samplerate,oe.lowpass2/=Q.out_samplerate):(oe.lowpass1=0,oe.lowpass2=0),ae(Q),oe.samplerate_index=W(Q.out_samplerate,Q),oe.samplerate_index<0)return Q.internal_flags=null,-1;if(Q.VBR==n.vbr_off){if(Q.free_format)oe.bitrate_index=0;else if(Q.brate=q(Q.brate,Q.version,Q.out_samplerate),oe.bitrate_index=Z(Q.brate,Q.version,Q.out_samplerate),oe.bitrate_index<=0)return Q.internal_flags=null,-1}else oe.bitrate_index=1;Q.analysis&&(Q.bWriteVbrTag=!1),oe.pinfo!=null&&(Q.bWriteVbrTag=!1),R.init_bit_stream_w(oe);for(var ge=oe.samplerate_index+3*Q.version+6*(Q.out_samplerate<16e3?1:0),J=0;J<S.SBMAX_l+1;J++)oe.scalefac_band.l[J]=L.sfBandIndex[ge].l[J];for(var J=0;J<S.PSFB21+1;J++){var Ee=(oe.scalefac_band.l[22]-oe.scalefac_band.l[21])/S.PSFB21,$e=oe.scalefac_band.l[21]+J*Ee;oe.scalefac_band.psfb21[J]=$e}oe.scalefac_band.psfb21[S.PSFB21]=576;for(var J=0;J<S.SBMAX_s+1;J++)oe.scalefac_band.s[J]=L.sfBandIndex[ge].s[J];for(var J=0;J<S.PSFB12+1;J++){var Ee=(oe.scalefac_band.s[13]-oe.scalefac_band.s[12])/S.PSFB12,$e=oe.scalefac_band.s[12]+J*Ee;oe.scalefac_band.psfb12[J]=$e}oe.scalefac_band.psfb12[S.PSFB12]=192,Q.version==1?oe.sideinfo_len=oe.channels_out==1?21:36:oe.sideinfo_len=oe.channels_out==1?13:21,Q.error_protection&&(oe.sideinfo_len+=2),te(Q),oe.Class_ID=Y;{var se;for(se=0;se<19;se++)oe.nsPsy.pefirbuf[se]=700*oe.mode_gr*oe.channels_out;Q.ATHtype==-1&&(Q.ATHtype=4)}switch(l(Q.VBR_q<=9),l(Q.VBR_q>=0),Q.VBR){case n.vbr_mt:Q.VBR=n.vbr_mtrh;case n.vbr_mtrh:{Q.useTemporal==null&&(Q.useTemporal=!1),k.apply_preset(Q,500-Q.VBR_q*10,0),Q.quality<0&&(Q.quality=LAME_DEFAULT_QUALITY),Q.quality<5&&(Q.quality=0),Q.quality>5&&(Q.quality=5),oe.PSY.mask_adjust=Q.maskingadjust,oe.PSY.mask_adjust_short=Q.maskingadjust_short,Q.experimentalY?oe.sfb21_extra=!1:oe.sfb21_extra=Q.out_samplerate>44e3,oe.iteration_loop=new VBRNewIterationLoop(D);break}case n.vbr_rh:{k.apply_preset(Q,500-Q.VBR_q*10,0),oe.PSY.mask_adjust=Q.maskingadjust,oe.PSY.mask_adjust_short=Q.maskingadjust_short,Q.experimentalY?oe.sfb21_extra=!1:oe.sfb21_extra=Q.out_samplerate>44e3,Q.quality>6&&(Q.quality=6),Q.quality<0&&(Q.quality=LAME_DEFAULT_QUALITY),oe.iteration_loop=new VBROldIterationLoop(D);break}default:{var le;oe.sfb21_extra=!1,Q.quality<0&&(Q.quality=LAME_DEFAULT_QUALITY),le=Q.VBR,le==n.vbr_off&&(Q.VBR_mean_bitrate_kbps=Q.brate),k.apply_preset(Q,Q.VBR_mean_bitrate_kbps,0),Q.VBR=le,oe.PSY.mask_adjust=Q.maskingadjust,oe.PSY.mask_adjust_short=Q.maskingadjust_short,le==n.vbr_off?oe.iteration_loop=new g(D):oe.iteration_loop=new ABRIterationLoop(D);break}}if(l(Q.scale>=0),Q.VBR!=n.vbr_off){if(oe.VBR_min_bitrate=1,oe.VBR_max_bitrate=14,Q.out_samplerate<16e3&&(oe.VBR_max_bitrate=8),Q.VBR_min_bitrate_kbps!=0&&(Q.VBR_min_bitrate_kbps=q(Q.VBR_min_bitrate_kbps,Q.version,Q.out_samplerate),oe.VBR_min_bitrate=Z(Q.VBR_min_bitrate_kbps,Q.version,Q.out_samplerate),oe.VBR_min_bitrate<0)||Q.VBR_max_bitrate_kbps!=0&&(Q.VBR_max_bitrate_kbps=q(Q.VBR_max_bitrate_kbps,Q.version,Q.out_samplerate),oe.VBR_max_bitrate=Z(Q.VBR_max_bitrate_kbps,Q.version,Q.out_samplerate),oe.VBR_max_bitrate<0))return-1;Q.VBR_min_bitrate_kbps=T.bitrate_table[Q.version][oe.VBR_min_bitrate],Q.VBR_max_bitrate_kbps=T.bitrate_table[Q.version][oe.VBR_max_bitrate],Q.VBR_mean_bitrate_kbps=Math.min(T.bitrate_table[Q.version][oe.VBR_max_bitrate],Q.VBR_mean_bitrate_kbps),Q.VBR_mean_bitrate_kbps=Math.max(T.bitrate_table[Q.version][oe.VBR_min_bitrate],Q.VBR_mean_bitrate_kbps)}return Q.tune&&(oe.PSY.mask_adjust+=Q.tune_value_a,oe.PSY.mask_adjust_short+=Q.tune_value_a),ue(Q),l(Q.scale>=0),Q.athaa_type<0?oe.ATH.useAdjust=3:oe.ATH.useAdjust=Q.athaa_type,oe.ATH.aaSensitivityP=Math.pow(10,Q.athaa_sensitivity/-10),Q.short_blocks==null&&(Q.short_blocks=s.short_block_allowed),Q.short_blocks==s.short_block_allowed&&(Q.mode==y.JOINT_STEREO||Q.mode==y.STEREO)&&(Q.short_blocks=s.short_block_coupled),Q.quant_comp<0&&(Q.quant_comp=1),Q.quant_comp_short<0&&(Q.quant_comp_short=0),Q.msfix<0&&(Q.msfix=0),Q.exp_nspsytune=Q.exp_nspsytune|1,Q.internal_flags.nsPsy.attackthre<0&&(Q.internal_flags.nsPsy.attackthre=r.NSATTACKTHRE),Q.internal_flags.nsPsy.attackthre_s<0&&(Q.internal_flags.nsPsy.attackthre_s=r.NSATTACKTHRE_S),l(Q.scale>=0),Q.scale<0&&(Q.scale=1),Q.ATHtype<0&&(Q.ATHtype=4),Q.ATHcurve<0&&(Q.ATHcurve=4),Q.athaa_loudapprox<0&&(Q.athaa_loudapprox=2),Q.interChRatio<0&&(Q.interChRatio=0),Q.useTemporal==null&&(Q.useTemporal=!0),oe.slot_lag=oe.frac_SpF=0,Q.VBR==n.vbr_off&&(oe.slot_lag=oe.frac_SpF=(Q.version+1)*72e3*Q.brate%Q.out_samplerate|0),L.iteration_init(Q),$.psymodel_init(Q),l(Q.scale>=0),0};function ce(Q,oe){(Q.in_buffer_0==null||Q.in_buffer_nsamples<oe)&&(Q.in_buffer_0=o(oe),Q.in_buffer_1=o(oe),Q.in_buffer_nsamples=oe)}this.lame_encode_flush=function(Q,oe,de,Ce){var Ae=Q.internal_flags,Le=i([2,1152]),Me=0,Ue,we,ge,J,Ee=Ae.mf_samples_to_encode-S.POSTDELAY,$e=fe(Q);if(Ae.mf_samples_to_encode<1)return 0;for(Ue=0,Q.in_samplerate!=Q.out_samplerate&&(Ee+=16*Q.out_samplerate/Q.in_samplerate),ge=Q.framesize-Ee%Q.framesize,ge<576&&(ge+=Q.framesize),Q.encoder_padding=ge,J=(Ee+ge)/Q.framesize;J>0&&Me>=0;){var se=$e-Ae.mf_size,le=Q.frameNum;se*=Q.in_samplerate,se/=Q.out_samplerate,se>1152&&(se=1152),se<1&&(se=1),we=Ce-Ue,Ce==0&&(we=0),Me=this.lame_encode_buffer(Q,Le[0],Le[1],se,oe,de,we),de+=Me,Ue+=Me,J-=le!=Q.frameNum?1:0}if(Ae.mf_samples_to_encode=0,Me<0||(we=Ce-Ue,Ce==0&&(we=0),R.flush_bitstream(Q),Me=R.copy_buffer(Ae,oe,de,we,1),Me<0))return Me;if(de+=Me,Ue+=Me,we=Ce-Ue,Ce==0&&(we=0),Q.write_id3tag_automatic){if(K.id3tag_write_v1(Q),Me=R.copy_buffer(Ae,oe,de,we,0),Me<0)return Me;Ue+=Me}return Ue},this.lame_encode_buffer=function(Q,oe,de,Ce,Ae,Le,Me){var Ue=Q.internal_flags,we=[null,null];if(Ue.Class_ID!=Y)return-3;if(Ce==0)return 0;ce(Ue,Ce),we[0]=Ue.in_buffer_0,we[1]=Ue.in_buffer_1;for(var ge=0;ge<Ce;ge++)we[0][ge]=oe[ge],Ue.channels_in>1&&(we[1][ge]=de[ge]);return ke(Q,we[0],we[1],Ce,Ae,Le,Me)};function fe(Q){var oe=S.BLKSIZE+Q.framesize-S.FFTOFFSET;return oe=Math.max(oe,512+Q.framesize-32),oe}function ke(Q,oe,de,Ce,Ae,Le,Me){var Ue=Q.internal_flags,we=0,ge,J,Ee,$e,se,le=[null,null],_e=[null,null];if(Ue.Class_ID!=Y)return-3;if(Ce==0)return 0;if(se=R.copy_buffer(Ue,Ae,Le,Me,0),se<0)return se;if(Le+=se,we+=se,_e[0]=oe,_e[1]=de,_.NEQ(Q.scale,0)&&_.NEQ(Q.scale,1))for(J=0;J<Ce;++J)_e[0][J]*=Q.scale,Ue.channels_out==2&&(_e[1][J]*=Q.scale);if(_.NEQ(Q.scale_left,0)&&_.NEQ(Q.scale_left,1))for(J=0;J<Ce;++J)_e[0][J]*=Q.scale_left;if(_.NEQ(Q.scale_right,0)&&_.NEQ(Q.scale_right,1))for(J=0;J<Ce;++J)_e[1][J]*=Q.scale_right;if(Q.num_channels==2&&Ue.channels_out==1)for(J=0;J<Ce;++J)_e[0][J]=.5*(_e[0][J]+_e[1][J]),_e[1][J]=0;$e=fe(Q),le[0]=Ue.mfbuf[0],le[1]=Ue.mfbuf[1];for(var Ie=0;Ce>0;){var Pe=[null,null],Ne=0,ve=0;Pe[0]=_e[0],Pe[1]=_e[1];var me=new Fe;if(kt(Q,le,Pe,Ie,Ce,me),Ne=me.n_in,ve=me.n_out,Ue.findReplayGain&&!Ue.decode_on_the_fly&&N.AnalyzeSamples(Ue.rgdata,le[0],Ue.mf_size,le[1],Ue.mf_size,ve,Ue.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(Ce-=Ne,Ie+=Ne,Ue.channels_out==2,Ue.mf_size+=ve,l(Ue.mf_size<=u.MFSIZE),Ue.mf_samples_to_encode<1&&(Ue.mf_samples_to_encode=S.ENCDELAY+S.POSTDELAY),Ue.mf_samples_to_encode+=ve,Ue.mf_size>=$e){var Oe=Me-we;if(Me==0&&(Oe=0),ge=De(Q,le[0],le[1],Ae,Le,Oe),ge<0)return ge;for(Le+=ge,we+=ge,Ue.mf_size-=Q.framesize,Ue.mf_samples_to_encode-=Q.framesize,Ee=0;Ee<Ue.channels_out;Ee++)for(J=0;J<Ue.mf_size;J++)le[Ee][J]=le[Ee][J+Q.framesize]}}return we}function De(Q,oe,de,Ce,Ae,Le){var Me=A.enc.lame_encode_mp3_frame(Q,oe,de,Ce,Ae,Le);return Q.frameNum++,Me}function Fe(){this.n_in=0,this.n_out=0}function je(){this.num_used=0}function Qe(Q,oe){return oe!=0?Qe(oe,Q%oe):Q}function Ze(Q,oe,de){var Ce=Math.PI*oe;Q/=de,Q<0&&(Q=0),Q>1&&(Q=1);var Ae=Q-.5,Le=.42-.5*Math.cos(2*Q*Math.PI)+.08*Math.cos(4*Q*Math.PI);return Math.abs(Ae)<1e-9?Ce/Math.PI:Le*Math.sin(de*Ce*Ae)/(Math.PI*de*Ae)}function ft(Q,oe,de,Ce,Ae,Le,Me,Ue,we){var ge=Q.internal_flags,J,Ee=0,$e,se=Q.out_samplerate/Qe(Q.out_samplerate,Q.in_samplerate);se>u.BPC&&(se=u.BPC);var le=Math.abs(ge.resample_ratio-Math.floor(.5+ge.resample_ratio))<1e-4?1:0,_e=1/ge.resample_ratio;_e>1&&(_e=1);var Ie=31;Ie%2==0&&--Ie,Ie+=le;var Pe=Ie+1;if(ge.fill_buffer_resample_init==0){for(ge.inbuf_old[0]=o(Pe),ge.inbuf_old[1]=o(Pe),J=0;J<=2*se;++J)ge.blackfilt[J]=o(Pe);for(ge.itime[0]=0,ge.itime[1]=0,Ee=0;Ee<=2*se;Ee++){var Ne=0,ve=(Ee-se)/(2*se);for(J=0;J<=Ie;J++)Ne+=ge.blackfilt[Ee][J]=Ze(J-ve,_e,Ie);for(J=0;J<=Ie;J++)ge.blackfilt[Ee][J]/=Ne}ge.fill_buffer_resample_init=1}var me=ge.inbuf_old[we];for($e=0;$e<Ce;$e++){var Oe,Ge;if(Oe=$e*ge.resample_ratio,Ee=0|Math.floor(Oe-ge.itime[we]),Ie+Ee-Ie/2>=Me)break;var ve=Oe-ge.itime[we]-(Ee+.5*(Ie%2));Ge=0|Math.floor(ve*2*se+se+.5);var Se=0;for(J=0;J<=Ie;++J){var We=0|J+Ee-Ie/2,mt;mt=We<0?me[Pe+We]:Ae[Le+We],Se+=mt*ge.blackfilt[Ge][J]}oe[de+$e]=Se}if(Ue.num_used=Math.min(Me,Ie+Ee-Ie/2),ge.itime[we]+=Ue.num_used-$e*ge.resample_ratio,Ue.num_used>=Pe)for(J=0;J<Pe;J++)me[J]=Ae[Le+Ue.num_used+J-Pe];else{var Nt=Pe-Ue.num_used;for(J=0;J<Nt;++J)me[J]=me[J+Ue.num_used];for(Ee=0;J<Pe;++J,++Ee)me[J]=Ae[Le+Ee];l(Ee==Ue.num_used)}return $e}function kt(Q,oe,de,Ce,Ae,Le){var Me=Q.internal_flags;if(Me.resample_ratio<.9999||Me.resample_ratio>1.0001)for(var Ue=0;Ue<Me.channels_out;Ue++){var we=new je;Le.n_out=ft(Q,oe[Ue],Me.mf_size,Q.framesize,de[Ue],Ce,Ae,we,Ue),Le.n_in=we.num_used}else{Le.n_out=Math.min(Q.framesize,Ae),Le.n_in=Le.n_out;for(var ge=0;ge<Le.n_out;++ge)oe[0][Me.mf_size+ge]=de[0][Ce+ge],Me.channels_out==2&&(oe[1][Me.mf_size+ge]=de[1][Ce+ge])}}}return $h=E,$h}var gye=jn,uo=gye.VbrMode;function _ye(){var e=w_();function t(u,p,h,g,_,T,S,E,y,A,C,O,N,R,k){this.vbr_q=u,this.quant_comp=p,this.quant_comp_s=h,this.expY=g,this.st_lrm=_,this.st_s=T,this.masking_adj=S,this.masking_adj_short=E,this.ath_lower=y,this.ath_curve=A,this.ath_sensitivity=C,this.interch=O,this.safejoint=N,this.sfb21mod=R,this.msfix=k}function n(u,p,h,g,_,T,S,E,y,A,C,O,N,R){this.quant_comp=p,this.quant_comp_s=h,this.safejoint=g,this.nsmsfix=_,this.st_lrm=T,this.st_s=S,this.nsbass=E,this.scale=y,this.masking_adj=A,this.ath_lower=C,this.ath_curve=O,this.interch=N,this.sfscale=R}var s;this.setModules=function(u){s=u};var o=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],a=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(u,p,h){var g=u.VBR==uo.vbr_rh?o:a,_=u.VBR_q_frac,T=g[p],S=g[p+1],E=T;T.st_lrm=T.st_lrm+_*(S.st_lrm-T.st_lrm),T.st_s=T.st_s+_*(S.st_s-T.st_s),T.masking_adj=T.masking_adj+_*(S.masking_adj-T.masking_adj),T.masking_adj_short=T.masking_adj_short+_*(S.masking_adj_short-T.masking_adj_short),T.ath_lower=T.ath_lower+_*(S.ath_lower-T.ath_lower),T.ath_curve=T.ath_curve+_*(S.ath_curve-T.ath_curve),T.ath_sensitivity=T.ath_sensitivity+_*(S.ath_sensitivity-T.ath_sensitivity),T.interch=T.interch+_*(S.interch-T.interch),T.msfix=T.msfix+_*(S.msfix-T.msfix),d(u,E.vbr_q),h!=0?u.quant_comp=E.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=E.quant_comp),h!=0?u.quant_comp_short=E.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=E.quant_comp_s),E.expY!=0&&(u.experimentalY=E.expY!=0),h!=0?u.internal_flags.nsPsy.attackthre=E.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=E.st_lrm),h!=0?u.internal_flags.nsPsy.attackthre_s=E.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=E.st_s),h!=0?u.maskingadjust=E.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=E.masking_adj),h!=0?u.maskingadjust_short=E.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=E.masking_adj_short),h!=0?u.ATHlower=-E.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-E.ath_lower/10),h!=0?u.ATHcurve=E.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=E.ath_curve),h!=0?u.athaa_sensitivity=E.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=E.ath_sensitivity),E.interch>0&&(h!=0?u.interChRatio=E.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=E.interch)),E.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|E.safejoint),E.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|E.sfb21mod<<20),h!=0?u.msfix=E.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=E.msfix),h==0&&(u.VBR_q=p,u.VBR_q_frac=_)}var l=[new n(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new n(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new n(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new n(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new n(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new n(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new n(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new n(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new n(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new n(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new n(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new n(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new n(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new n(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new n(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function r(u,p,h){var g=p,_=s.nearestBitrateFullIndex(p);if(u.VBR=uo.vbr_abr,u.VBR_mean_bitrate_kbps=g,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),l[_].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),l[_].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(l[_].nsbass)>0){var T=int(l[_].nsbass*4);T<0&&(T+=64),u.exp_nspsytune=u.exp_nspsytune|T<<2}return h!=0?u.quant_comp=l[_].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=l[_].quant_comp),h!=0?u.quant_comp_short=l[_].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=l[_].quant_comp_s),h!=0?u.msfix=l[_].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=l[_].nsmsfix),h!=0?u.internal_flags.nsPsy.attackthre=l[_].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=l[_].st_lrm),h!=0?u.internal_flags.nsPsy.attackthre_s=l[_].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=l[_].st_s),h!=0?u.scale=l[_].scale:Math.abs(u.scale- -1)>0||(u.scale=l[_].scale),h!=0?u.maskingadjust=l[_].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=l[_].masking_adj),l[_].masking_adj>0?h!=0?u.maskingadjust_short=l[_].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=l[_].masking_adj*.9):h!=0?u.maskingadjust_short=l[_].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=l[_].masking_adj*1.1),h!=0?u.ATHlower=-l[_].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-l[_].ath_lower/10),h!=0?u.ATHcurve=l[_].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=l[_].ath_curve),h!=0?u.interChRatio=l[_].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=l[_].interch),p}this.apply_preset=function(u,p,h){switch(p){case e.R3MIX:{p=e.V3,u.VBR=uo.vbr_mtrh;break}case e.MEDIUM:{p=e.V4,u.VBR=uo.vbr_rh;break}case e.MEDIUM_FAST:{p=e.V4,u.VBR=uo.vbr_mtrh;break}case e.STANDARD:{p=e.V2,u.VBR=uo.vbr_rh;break}case e.STANDARD_FAST:{p=e.V2,u.VBR=uo.vbr_mtrh;break}case e.EXTREME:{p=e.V0,u.VBR=uo.vbr_rh;break}case e.EXTREME_FAST:{p=e.V0,u.VBR=uo.vbr_mtrh;break}case e.INSANE:return p=320,u.preset=p,r(u,p,h),u.VBR=uo.vbr_off,p}switch(u.preset=p,p){case e.V9:return i(u,9,h),p;case e.V8:return i(u,8,h),p;case e.V7:return i(u,7,h),p;case e.V6:return i(u,6,h),p;case e.V5:return i(u,5,h),p;case e.V4:return i(u,4,h),p;case e.V3:return i(u,3,h),p;case e.V2:return i(u,2,h),p;case e.V1:return i(u,1,h),p;case e.V0:return i(u,0,h),p}return 8<=p&&p<=320?r(u,p,h):(u.preset=0,p)};function d(u,p){var h=0;return 0>p&&(h=-1,p=0),9<p&&(h=-1,p=9),u.VBR_q=p,u.VBR_q_frac=0,h}}var vye=_ye;function bye(){this.setModules=function(e,t){}}var Eye=bye;function Tye(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var yye=Tye,t2=jn,jb=t2.new_float,Aye=t2.new_int;function Sye(){this.global_gain=0,this.sfb_count1=0,this.step=Aye(39),this.noise=jb(39),this.noise_log=jb(39)}var Iye=Sye,ur=jn,si=ur.System,Yb=ur.VbrMode,Mh=ur.Util,Ll=ur.Arrays,Mr=ur.new_float,kr=ur.assert,Cye=Eye,kh=yye,Nye=Iye,_n=na(),Xb=I_,qb=Sm;function Oye(){var e;this.rv=null;var t;this.qupvt=null;var n,s=new Cye,o;this.setModules=function(E,y,A,C){e=E,t=y,this.rv=y,n=A,this.qupvt=A,o=C,s.setModules(n,o)},this.ms_convert=function(E,y){for(var A=0;A<576;++A){var C=E.tt[y][0].xr[A],O=E.tt[y][1].xr[A];E.tt[y][0].xr[A]=(C+O)*(Mh.SQRT2*.5),E.tt[y][1].xr[A]=(C-O)*(Mh.SQRT2*.5)}};function a(E,y,A,C){C=0;for(var O=0;O<=A;++O){var N=Math.abs(E.xr[O]);C+=N,y[O]=Math.sqrt(N*Math.sqrt(N)),y[O]>E.xrpow_max&&(E.xrpow_max=y[O])}return C}this.init_xrpow=function(E,y,A){var C=0,O=0|y.max_nonzero_coeff;if(y.xrpow_max=0,Ll.fill(A,O,576,0),C=a(y,A,O,C),C>1e-20){var N=0;E.substep_shaping&2&&(N=1);for(var R=0;R<y.psymax;R++)E.pseudohalf[R]=N;return!0}return Ll.fill(y.l3_enc,0,576,0),!1};function i(E,y){var A=E.ATH,C=y.xr;if(y.block_type!=_n.SHORT_TYPE)for(var O=!1,N=_n.PSFB21-1;N>=0&&!O;N--){var R=E.scalefac_band.psfb21[N],k=E.scalefac_band.psfb21[N+1],L=n.athAdjust(A.adjust,A.psfb21[N],A.floor);E.nsPsy.longfact[21]>1e-12&&(L*=E.nsPsy.longfact[21]);for(var D=k-1;D>=R;D--)if(Math.abs(C[D])<L)C[D]=0;else{O=!0;break}}else for(var $=0;$<3;$++)for(var O=!1,N=_n.PSFB12-1;N>=0&&!O;N--){var R=E.scalefac_band.s[12]*3+(E.scalefac_band.s[13]-E.scalefac_band.s[12])*$+(E.scalefac_band.psfb12[N]-E.scalefac_band.psfb12[0]),k=R+(E.scalefac_band.psfb12[N+1]-E.scalefac_band.psfb12[N]),M=n.athAdjust(A.adjust,A.psfb12[N],A.floor);E.nsPsy.shortfact[12]>1e-12&&(M*=E.nsPsy.shortfact[12]);for(var D=k-1;D>=R;D--)if(Math.abs(C[D])<M)C[D]=0;else{O=!0;break}}}this.init_outer_loop=function(E,y){y.part2_3_length=0,y.big_values=0,y.count1=0,y.global_gain=210,y.scalefac_compress=0,y.table_select[0]=0,y.table_select[1]=0,y.table_select[2]=0,y.subblock_gain[0]=0,y.subblock_gain[1]=0,y.subblock_gain[2]=0,y.subblock_gain[3]=0,y.region0_count=0,y.region1_count=0,y.preflag=0,y.scalefac_scale=0,y.count1table_select=0,y.part2_length=0,y.sfb_lmax=_n.SBPSY_l,y.sfb_smin=_n.SBPSY_s,y.psy_lmax=E.sfb21_extra?_n.SBMAX_l:_n.SBPSY_l,y.psymax=y.psy_lmax,y.sfbmax=y.sfb_lmax,y.sfbdivide=11;for(var A=0;A<_n.SBMAX_l;A++)y.width[A]=E.scalefac_band.l[A+1]-E.scalefac_band.l[A],y.window[A]=3;if(y.block_type==_n.SHORT_TYPE){var C=Mr(576);y.sfb_smin=0,y.sfb_lmax=0,y.mixed_block_flag!=0&&(y.sfb_smin=3,y.sfb_lmax=E.mode_gr*2+4),y.psymax=y.sfb_lmax+3*((E.sfb21_extra?_n.SBMAX_s:_n.SBPSY_s)-y.sfb_smin),y.sfbmax=y.sfb_lmax+3*(_n.SBPSY_s-y.sfb_smin),y.sfbdivide=y.sfbmax-18,y.psy_lmax=y.sfb_lmax;var O=E.scalefac_band.l[y.sfb_lmax];si.arraycopy(y.xr,0,C,0,576);for(var A=y.sfb_smin;A<_n.SBMAX_s;A++)for(var N=E.scalefac_band.s[A],R=E.scalefac_band.s[A+1],k=0;k<3;k++)for(var L=N;L<R;L++)y.xr[O++]=C[3*L+k];for(var D=y.sfb_lmax,A=y.sfb_smin;A<_n.SBMAX_s;A++)y.width[D]=y.width[D+1]=y.width[D+2]=E.scalefac_band.s[A+1]-E.scalefac_band.s[A],y.window[D]=0,y.window[D+1]=1,y.window[D+2]=2,D+=3}y.count1bits=0,y.sfb_partition_table=n.nr_of_sfb_block[0][0],y.slen[0]=0,y.slen[1]=0,y.slen[2]=0,y.slen[3]=0,y.max_nonzero_coeff=575,Ll.fill(y.scalefac,0),i(E,y)};function l(E){this.ordinal=E}l.BINSEARCH_NONE=new l(0),l.BINSEARCH_UP=new l(1),l.BINSEARCH_DOWN=new l(2);function r(E,y,A,C,O){var N,R=E.CurrentStep[C],k=!1,L=E.OldValue[C],D=l.BINSEARCH_NONE;for(y.global_gain=L,A-=y.part2_length;;){var $;if(N=o.count_bits(E,O,y,null),R==1||N==A)break;N>A?(D==l.BINSEARCH_DOWN&&(k=!0),k&&(R/=2),D=l.BINSEARCH_UP,$=R):(D==l.BINSEARCH_UP&&(k=!0),k&&(R/=2),D=l.BINSEARCH_DOWN,$=-R),y.global_gain+=$,y.global_gain<0&&(y.global_gain=0,k=!0),y.global_gain>255&&(y.global_gain=255,k=!0)}for(kr(y.global_gain>=0),kr(y.global_gain<256);N>A&&y.global_gain<255;)y.global_gain++,N=o.count_bits(E,O,y,null);return E.CurrentStep[C]=L-y.global_gain>=4?4:2,E.OldValue[C]=y.global_gain,y.part2_3_length=N,N}this.trancate_smallspectrums=function(E,y,A,C){var O=Mr(qb.SFBMAX);if(!(!(E.substep_shaping&4)&&y.block_type==_n.SHORT_TYPE||E.substep_shaping&128)){n.calc_noise(y,A,O,new kh,null);for(var R=0;R<576;R++){var N=0;y.l3_enc[R]!=0&&(N=Math.abs(y.xr[R])),C[R]=N}var R=0,k=8;y.block_type==_n.SHORT_TYPE&&(k=6);do{var L,D,$,M,K=y.width[k];if(R+=K,!(O[k]>=1)&&(Ll.sort(C,R-K,K),!BitStream.EQ(C[R-1],0))){L=(1-O[k])*A[k],D=0,M=0;do{var B;for($=1;M+$<K&&!BitStream.NEQ(C[M+R-K],C[M+R+$-K]);$++);if(B=C[M+R-K]*C[M+R-K]*$,L<B){M!=0&&(D=C[M+R-K-1]);break}L-=B,M+=$}while(M<K);if(!BitStream.EQ(D,0))do Math.abs(y.xr[R-K])<=D&&(y.l3_enc[R-K]=0);while(--K>0)}}while(++k<y.psymax);y.part2_3_length=o.noquant_count_bits(E,y,null)}};function d(E){for(var y=0;y<E.sfbmax;y++)if(E.scalefac[y]+E.subblock_gain[E.window[y]]==0)return!1;return!0}function u(E){return Mh.FAST_LOG10(.368+.632*E*E*E)}function p(E,y){for(var A=1e-37,C=0;C<y.psymax;C++)A+=u(E[C]);return Math.max(1e-20,A)}function h(E,y,A,C,O){var N;switch(E){default:case 9:{y.over_count>0?(N=A.over_SSD<=y.over_SSD,A.over_SSD==y.over_SSD&&(N=A.bits<y.bits)):N=A.max_noise<0&&A.max_noise*10+A.bits<=y.max_noise*10+y.bits;break}case 0:N=A.over_count<y.over_count||A.over_count==y.over_count&&A.over_noise<y.over_noise||A.over_count==y.over_count&&BitStream.EQ(A.over_noise,y.over_noise)&&A.tot_noise<y.tot_noise;break;case 8:A.max_noise=p(O,C);case 1:N=A.max_noise<y.max_noise;break;case 2:N=A.tot_noise<y.tot_noise;break;case 3:N=A.tot_noise<y.tot_noise&&A.max_noise<y.max_noise;break;case 4:N=A.max_noise<=0&&y.max_noise>.2||A.max_noise<=0&&y.max_noise<0&&y.max_noise>A.max_noise-.2&&A.tot_noise<y.tot_noise||A.max_noise<=0&&y.max_noise>0&&y.max_noise>A.max_noise-.2&&A.tot_noise<y.tot_noise+y.over_noise||A.max_noise>0&&y.max_noise>-.05&&y.max_noise>A.max_noise-.1&&A.tot_noise+A.over_noise<y.tot_noise+y.over_noise||A.max_noise>0&&y.max_noise>-.1&&y.max_noise>A.max_noise-.15&&A.tot_noise+A.over_noise+A.over_noise<y.tot_noise+y.over_noise+y.over_noise;break;case 5:N=A.over_noise<y.over_noise||BitStream.EQ(A.over_noise,y.over_noise)&&A.tot_noise<y.tot_noise;break;case 6:N=A.over_noise<y.over_noise||BitStream.EQ(A.over_noise,y.over_noise)&&(A.max_noise<y.max_noise||BitStream.EQ(A.max_noise,y.max_noise)&&A.tot_noise<=y.tot_noise);break;case 7:N=A.over_count<y.over_count||A.over_noise<y.over_noise;break}return y.over_count==0&&(N=N&&A.bits<y.bits),N}function g(E,y,A,C,O){var N=E.internal_flags,R;y.scalefac_scale==0?R=1.2968395546510096:R=1.6817928305074292;for(var k=0,L=0;L<y.sfbmax;L++)k<A[L]&&(k=A[L]);var D=N.noise_shaping_amp;switch(D==3&&(O?D=2:D=1),D){case 2:break;case 1:k>1?k=Math.pow(k,.5):k*=.95;break;case 0:default:k>1?k=1:k*=.95;break}for(var $=0,L=0;L<y.sfbmax;L++){var M=y.width[L],K;if($+=M,!(A[L]<k)){if(N.substep_shaping&2&&(N.pseudohalf[L]=N.pseudohalf[L]==0?1:0,N.pseudohalf[L]==0&&N.noise_shaping_amp==2))return;for(y.scalefac[L]++,K=-M;K<0;K++)C[$+K]*=R,C[$+K]>y.xrpow_max&&(y.xrpow_max=C[$+K]);if(N.noise_shaping_amp==2)return}}}function _(E,y){for(var A=1.2968395546510096,C=0,O=0;O<E.sfbmax;O++){var N=E.width[O],R=E.scalefac[O];if(E.preflag!=0&&(R+=n.pretab[O]),C+=N,R&1){R++;for(var k=-N;k<0;k++)y[C+k]*=A,y[C+k]>E.xrpow_max&&(E.xrpow_max=y[C+k])}E.scalefac[O]=R>>1}E.preflag=0,E.scalefac_scale=1}function T(E,y,A){var C,O=y.scalefac;for(C=0;C<y.sfb_lmax;C++)if(O[C]>=16)return!0;for(var N=0;N<3;N++){var R=0,k=0;for(C=y.sfb_lmax+N;C<y.sfbdivide;C+=3)R<O[C]&&(R=O[C]);for(;C<y.sfbmax;C+=3)k<O[C]&&(k=O[C]);if(!(R<16&&k<8)){if(y.subblock_gain[N]>=7)return!0;y.subblock_gain[N]++;var L=E.scalefac_band.l[y.sfb_lmax];for(C=y.sfb_lmax+N;C<y.sfbmax;C+=3){var D,$=y.width[C],M=O[C];if(M=M-(4>>y.scalefac_scale),M>=0){O[C]=M,L+=$*3;continue}O[C]=0;{var K=210+(M<<y.scalefac_scale+1);D=n.IPOW20(K)}L+=$*(N+1);for(var B=-$;B<0;B++)A[L+B]*=D,A[L+B]>y.xrpow_max&&(y.xrpow_max=A[L+B]);L+=$*(3-N-1)}{var D=n.IPOW20(202);L+=y.width[C]*(N+1);for(var B=-y.width[C];B<0;B++)A[L+B]*=D,A[L+B]>y.xrpow_max&&(y.xrpow_max=A[L+B])}}}return!1}function S(E,y,A,C,O){var N=E.internal_flags;g(E,y,A,C,O);var R=d(y);return R?!1:(N.mode_gr==2?R=o.scale_bitcount(y):R=o.scale_bitcount_lsf(N,y),R?(N.noise_shaping>1&&(Ll.fill(N.pseudohalf,0),y.scalefac_scale==0?(_(y,C),R=!1):y.block_type==_n.SHORT_TYPE&&N.subblock_gain>0&&(R=T(N,y,C)||d(y))),R||(N.mode_gr==2?R=o.scale_bitcount(y):R=o.scale_bitcount_lsf(N,y)),!R):!0)}this.outer_loop=function(E,y,A,C,O,N){var R=E.internal_flags,k=new Xb,L=Mr(576),D=Mr(qb.SFBMAX),$=new kh,M,K=new Nye,B=9999999,H=!1,G=!1,V=0;if(r(R,y,N,O,C),R.noise_shaping==0)return 100;n.calc_noise(y,A,D,$,K),$.bits=y.part2_3_length,k.assign(y);var Y=0;for(si.arraycopy(C,0,L,0,576);!H;){do{var ee=new kh,X,z=255;if(R.substep_shaping&2?X=20:X=3,R.sfb21_extra&&(D[k.sfbmax]>1||k.block_type==_n.SHORT_TYPE&&(D[k.sfbmax+1]>1||D[k.sfbmax+2]>1))||!S(E,k,D,C,G))break;k.scalefac_scale!=0&&(z=254);var W=N-k.part2_length;if(W<=0)break;for(;(k.part2_3_length=o.count_bits(R,C,k,K))>W&&k.global_gain<=z;)k.global_gain++;if(k.global_gain>z)break;if($.over_count==0){for(;(k.part2_3_length=o.count_bits(R,C,k,K))>B&&k.global_gain<=z;)k.global_gain++;if(k.global_gain>z)break}if(n.calc_noise(k,A,D,ee,K),ee.bits=k.part2_3_length,y.block_type!=_n.SHORT_TYPE?M=E.quant_comp:M=E.quant_comp_short,M=h(M,$,ee,k,D)?1:0,M!=0)B=y.part2_3_length,$=ee,y.assign(k),Y=0,si.arraycopy(C,0,L,0,576);else if(R.full_outer_loop==0&&(++Y>X&&$.over_count==0||R.noise_shaping_amp==3&&G&&Y>30||R.noise_shaping_amp==3&&G&&k.global_gain-V>15))break}while(k.global_gain+k.scalefac_scale<255);R.noise_shaping_amp==3?G?H=!0:(k.assign(y),si.arraycopy(L,0,C,0,576),Y=0,V=k.global_gain,G=!0):H=!0}return kr(y.global_gain+y.scalefac_scale<=255),E.VBR==Yb.vbr_rh||E.VBR==Yb.vbr_mtrh?si.arraycopy(L,0,C,0,576):R.substep_shaping&1&&trancate_smallspectrums(R,y,A,C),$.over_count},this.iteration_finish_one=function(E,y,A){var C=E.l3_side,O=C.tt[y][A];o.best_scalefac_store(E,y,A,C),E.use_best_huffman==1&&o.best_huffman_divide(E,O),t.ResvAdjust(E,O)},this.VBR_encode_granule=function(E,y,A,C,O,N,R){var k=E.internal_flags,L=new Xb,D=Mr(576),$=R,M=R+1,K=(R+N)/2,B,H,G=0,V=k.sfb21_extra;kr($<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Ll.fill(L.l3_enc,0);do K>$-42?k.sfb21_extra=!1:k.sfb21_extra=V,H=outer_loop(E,y,A,C,O,K),H<=0?(G=1,M=y.part2_3_length,L.assign(y),si.arraycopy(C,0,D,0,576),R=M-32,B=R-N,K=(R+N)/2):(N=K+32,B=R-N,K=(R+N)/2,G!=0&&(G=2,y.assign(L),si.arraycopy(D,0,C,0,576)));while(B>12);k.sfb21_extra=V,G==2&&si.arraycopy(L.l3_enc,0,y.l3_enc,0,576),kr(y.part2_3_length<=$)},this.get_framebits=function(E,y){var A=E.internal_flags;A.bitrate_index=A.VBR_min_bitrate;var C=e.getframebits(E);A.bitrate_index=1,C=e.getframebits(E);for(var O=1;O<=A.VBR_max_bitrate;O++){A.bitrate_index=O;var N=new MeanBits(C);y[O]=t.ResvFrameBegin(E,N),C=N.bits}},this.VBR_old_prepare=function(E,y,A,C,O,N,R,k,L){var D=E.internal_flags,$,M=0,K=1,B=0;D.bitrate_index=D.VBR_max_bitrate;var H=t.ResvFrameBegin(E,new MeanBits(0))/D.mode_gr;get_framebits(E,N);for(var G=0;G<D.mode_gr;G++){var V=n.on_pe(E,y,k[G],H,G,0);D.mode_ext==_n.MPG_MD_MS_LR&&(ms_convert(D.l3_side,G),n.reduce_side(k[G],A[G],H,V));for(var Y=0;Y<D.channels_out;++Y){var ee=D.l3_side.tt[G][Y];ee.block_type!=_n.SHORT_TYPE?(M=1.28/(1+Math.exp(3.5-y[G][Y]/300))-.05,$=D.PSY.mask_adjust-M):(M=2.56/(1+Math.exp(3.5-y[G][Y]/300))-.14,$=D.PSY.mask_adjust_short-M),D.masking_lower=Math.pow(10,$*.1),init_outer_loop(D,ee),L[G][Y]=n.calc_xmin(E,C[G][Y],ee,O[G][Y]),L[G][Y]!=0&&(K=0),R[G][Y]=126,B+=k[G][Y]}}for(var G=0;G<D.mode_gr;G++)for(var Y=0;Y<D.channels_out;Y++)B>N[D.VBR_max_bitrate]&&(k[G][Y]*=N[D.VBR_max_bitrate],k[G][Y]/=B),R[G][Y]>k[G][Y]&&(R[G][Y]=k[G][Y]);return K},this.bitpressure_strategy=function(E,y,A,C){for(var O=0;O<E.mode_gr;O++)for(var N=0;N<E.channels_out;N++){for(var R=E.l3_side.tt[O][N],k=y[O][N],L=0,D=0;D<R.psy_lmax;D++)k[L++]*=1+.029*D*D/_n.SBMAX_l/_n.SBMAX_l;if(R.block_type==_n.SHORT_TYPE)for(var D=R.sfb_smin;D<_n.SBMAX_s;D++)k[L++]*=1+.029*D*D/_n.SBMAX_s/_n.SBMAX_s,k[L++]*=1+.029*D*D/_n.SBMAX_s/_n.SBMAX_s,k[L++]*=1+.029*D*D/_n.SBMAX_s/_n.SBMAX_s;C[O][N]=0|Math.max(A[O][N],.9*C[O][N])}},this.VBR_new_prepare=function(E,y,A,C,O,N){var R=E.internal_flags,k=1,L=0,D=0,$;if(E.free_format){R.bitrate_index=0;var M=new MeanBits(L);$=t.ResvFrameBegin(E,M),L=M.bits,O[0]=$}else{R.bitrate_index=R.VBR_max_bitrate;var M=new MeanBits(L);t.ResvFrameBegin(E,M),L=M.bits,get_framebits(E,O),$=O[R.VBR_max_bitrate]}for(var K=0;K<R.mode_gr;K++){n.on_pe(E,y,N[K],L,K,0),R.mode_ext==_n.MPG_MD_MS_LR&&ms_convert(R.l3_side,K);for(var B=0;B<R.channels_out;++B){var H=R.l3_side.tt[K][B];R.masking_lower=Math.pow(10,R.PSY.mask_adjust*.1),init_outer_loop(R,H),n.calc_xmin(E,A[K][B],H,C[K][B])!=0&&(k=0),D+=N[K][B]}}for(var K=0;K<R.mode_gr;K++)for(var B=0;B<R.channels_out;B++)D>$&&(N[K][B]*=$,N[K][B]/=D);return k},this.calc_target_bits=function(E,y,A,C,O,N){var R=E.internal_flags,k=R.l3_side,L,D,$,M,K=0;R.bitrate_index=R.VBR_max_bitrate;var B=new MeanBits(K);for(N[0]=t.ResvFrameBegin(E,B),K=B.bits,R.bitrate_index=1,K=e.getframebits(E)-R.sideinfo_len*8,O[0]=K/(R.mode_gr*R.channels_out),K=E.VBR_mean_bitrate_kbps*E.framesize*1e3,R.substep_shaping&1&&(K*=1.09),K/=E.out_samplerate,K-=R.sideinfo_len*8,K/=R.mode_gr*R.channels_out,L=.93+.07*(11-E.compression_ratio)/(11-5.5),L<.9&&(L=.9),L>1&&(L=1),D=0;D<R.mode_gr;D++){var H=0;for($=0;$<R.channels_out;$++){if(C[D][$]=int(L*K),y[D][$]>700){var G=int((y[D][$]-700)/1.4),V=k.tt[D][$];C[D][$]=int(L*K),V.block_type==_n.SHORT_TYPE&&G<K/2&&(G=K/2),G>K*3/2?G=K*3/2:G<0&&(G=0),C[D][$]+=G}C[D][$]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(C[D][$]=LameInternalFlags.MAX_BITS_PER_CHANNEL),H+=C[D][$]}if(H>LameInternalFlags.MAX_BITS_PER_GRANULE)for($=0;$<R.channels_out;++$)C[D][$]*=LameInternalFlags.MAX_BITS_PER_GRANULE,C[D][$]/=H}if(R.mode_ext==_n.MPG_MD_MS_LR)for(D=0;D<R.mode_gr;D++)n.reduce_side(C[D],A[D],K*R.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(M=0,D=0;D<R.mode_gr;D++)for($=0;$<R.channels_out;$++)C[D][$]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(C[D][$]=LameInternalFlags.MAX_BITS_PER_CHANNEL),M+=C[D][$];if(M>N[0])for(D=0;D<R.mode_gr;D++)for($=0;$<R.channels_out;$++)C[D][$]*=N[0],C[D][$]/=M}}var xye=Oye,wye=jn,Zb=wye.assert;function Rye(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var s=t.internal_flags,o,a=s.l3_side,i=e.getframebits(t);n.bits=(i-s.sideinfo_len*8)/s.mode_gr;var l=8*256*s.mode_gr-8;t.brate>320?o=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(o=8*1440,t.strict_ISO&&(o=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=o-i,s.ResvMax>l&&(s.ResvMax=l),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var r=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return r>o&&(r=o),Zb(s.ResvMax%8==0),Zb(s.ResvMax>=0),a.resvDrain_pre=0,s.pinfo!=null&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),r},this.ResvMaxBits=function(t,n,s,o){var a=t.internal_flags,i,l=a.ResvSize,r=a.ResvMax;o!=0&&(l+=n),a.substep_shaping&1&&(r*=.9),s.bits=n,l*10>r*9?(i=l-r*9/10,s.bits+=i,a.substep_shaping|=128):(i=0,a.substep_shaping&=127,!t.disable_reservoir&&!(a.substep_shaping&1)&&(s.bits-=.1*n));var d=l<a.ResvMax*6/10?l:a.ResvMax*6/10;return d-=i,d<0&&(d=0),d},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var s,o=t.l3_side;t.ResvSize+=n*t.mode_gr;var a=0;o.resvDrain_post=0,o.resvDrain_pre=0,(s=t.ResvSize%8)!=0&&(a+=s),s=t.ResvSize-a-t.ResvMax,s>0&&(a+=s);{var i=Math.min(o.main_data_begin*8,a)/8;o.resvDrain_pre+=8*i,a-=8*i,t.ResvSize-=8*i,o.main_data_begin-=i}o.resvDrain_post+=a,t.ResvSize-=a}}var $ye=Rye;function Mye(){var e="http://www.mp3dev.org/",t=3,n=98,s=4,o=0,a=93;this.getLameVersion=function(){return t+"."+n+"."+s},this.getLameShortVersion=function(){return t+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return o+"."+a},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var kye=Mye,mr=jn,Lye=mr.System,Lh=mr.VbrMode,Qb=mr.ShortBlock,Dye=mr.Arrays,wd=mr.new_byte,Pye=mr.assert;Sc.NUMTOCENTRIES=100;Sc.MAXFRAMESIZE=2880;function Sc(){var e,t,n;this.setModules=function(K,B,H){e=K,t=B,n=H};var s=1,o=2,a=4,i=8,l=Sc.NUMTOCENTRIES,r=Sc.MAXFRAMESIZE,d=l+4+4+4+4+4,u=d+9+1+1+8+1+1+3+1+1+2+4+2+2,p=128,h=64,g=32,_=null,T="Xing",S="Info",E=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function y(K,B){if(K.nVbrNumFrames++,K.sum+=B,K.seen++,!(K.seen<K.want)&&(K.pos<K.size&&(K.bag[K.pos]=K.sum,K.pos++,K.seen=0),K.pos==K.size)){for(var H=1;H<K.size;H+=2)K.bag[H/2]=K.bag[H];K.want*=2,K.pos/=2}}function A(K,B){if(!(K.pos<=0))for(var H=1;H<l;++H){var G=H/l,V,Y,ee=0|Math.floor(G*K.pos);ee>K.pos-1&&(ee=K.pos-1),V=K.bag[ee],Y=K.sum;var X=0|256*V/Y;X>255&&(X=255),B[H]=255&X}}this.addVbrFrame=function(K){var B=K.internal_flags,H=Tables.bitrate_table[K.version][B.bitrate_index];Pye(B.VBR_seek_table.bag!=null),y(B.VBR_seek_table,H)};function C(K,B){var H=K[B+0]&255;return H<<=8,H|=K[B+1]&255,H<<=8,H|=K[B+2]&255,H<<=8,H|=K[B+3]&255,H}function O(K,B,H){K[B+0]=255&(H>>24&255),K[B+1]=255&(H>>16&255),K[B+2]=255&(H>>8&255),K[B+3]=255&(H&255)}function N(K,B,H){K[B+0]=255&(H>>8&255),K[B+1]=255&(H&255)}function R(K,B){return new String(K,B,T.length(),_).equals(T)||new String(K,B,S.length(),_).equals(S)}function k(K,B,H){return 255&(K<<B|H&~(-1<<B))}function L(K,B){var H=K.internal_flags;B[0]=k(B[0],8,255),B[1]=k(B[1],3,7),B[1]=k(B[1],1,K.out_samplerate<16e3?0:1),B[1]=k(B[1],1,K.version),B[1]=k(B[1],2,1),B[1]=k(B[1],1,K.error_protection?0:1),B[2]=k(B[2],4,H.bitrate_index),B[2]=k(B[2],2,H.samplerate_index),B[2]=k(B[2],1,0),B[2]=k(B[2],1,K.extension),B[3]=k(B[3],2,K.mode.ordinal()),B[3]=k(B[3],2,H.mode_ext),B[3]=k(B[3],1,K.copyright),B[3]=k(B[3],1,K.original),B[3]=k(B[3],2,K.emphasis),B[0]=255;var G=255&(B[1]&241),V;K.version==1?V=p:K.out_samplerate<16e3?V=g:V=h,K.VBR==Lh.vbr_off&&(V=K.brate);var Y;K.free_format?Y=0:Y=255&16*e.BitrateIndex(V,K.version,K.out_samplerate),K.version==1?(B[1]=255&(G|10),G=255&(B[2]&13),B[2]=255&(Y|G)):(B[1]=255&(G|2),G=255&(B[2]&13),B[2]=255&(Y|G))}this.getVbrTag=function(K){var B=new VBRTagData,H=0;B.flags=0;var G=K[H+1]>>3&1,V=K[H+2]>>2&3,Y=K[H+3]>>6&3,ee=K[H+2]>>4&15;if(ee=Tables.bitrate_table[G][ee],K[H+1]>>4==14?B.samprate=Tables.samplerate_table[2][V]:B.samprate=Tables.samplerate_table[G][V],G!=0?Y!=3?H+=36:H+=21:Y!=3?H+=21:H+=13,!R(K,H))return null;H+=4,B.hId=G;var X=B.flags=C(K,H);if(H+=4,X&s&&(B.frames=C(K,H),H+=4),X&o&&(B.bytes=C(K,H),H+=4),X&a){if(B.toc!=null)for(var z=0;z<l;z++)B.toc[z]=K[H+z];H+=l}B.vbrScale=-1,X&i&&(B.vbrScale=C(K,H),H+=4),B.headersize=(G+1)*72e3*ee/B.samprate,H+=21;var W=K[H+0]<<4;W+=K[H+1]>>4;var q=(K[H+1]&15)<<8;return q+=K[H+2]&255,(W<0||W>3e3)&&(W=-1),(q<0||q>3e3)&&(q=-1),B.encDelay=W,B.encPadding=q,B},this.InitVbrTag=function(K){var B=K.internal_flags,H;K.version==1?H=p:K.out_samplerate<16e3?H=g:H=h,K.VBR==Lh.vbr_off&&(H=K.brate);var G=(K.version+1)*72e3*H/K.out_samplerate,V=B.sideinfo_len+u;if(B.VBR_seek_table.TotalFrameSize=G,G<V||G>r){K.bWriteVbrTag=!1;return}B.VBR_seek_table.nVbrNumFrames=0,B.VBR_seek_table.nBytesWritten=0,B.VBR_seek_table.sum=0,B.VBR_seek_table.seen=0,B.VBR_seek_table.want=1,B.VBR_seek_table.pos=0,B.VBR_seek_table.bag==null&&(B.VBR_seek_table.bag=new int[400],B.VBR_seek_table.size=400);var Y=wd(r);L(K,Y);for(var ee=B.VBR_seek_table.TotalFrameSize,X=0;X<ee;++X)t.add_dummy_byte(K,Y[X]&255,1)};function D(K,B){var H=B^K;return B=B>>8^E[H&255],B}this.updateMusicCRC=function(K,B,H,G){for(var V=0;V<G;++V)K[0]=D(B[H+V],K[0])};function $(K,B,H,G,V){var Y=K.internal_flags,ee=0,X=K.encoder_delay,z=K.encoder_padding,W=100-10*K.VBR_q-K.quality,q=n.getLameVeryShortVersion(),Z,ne=0,ae,ue=[1,5,3,2,4,0,3],te=0|(K.lowpassfreq/100+.5>255?255:K.lowpassfreq/100+.5),ce=0,fe=0,ke=0,De=K.internal_flags.noise_shaping,Fe=0,je=0,Qe=0,Ze=0,ft=0,kt=(K.exp_nspsytune&1)!=0,Q=(K.exp_nspsytune&2)!=0,oe=!1,de=!1,Ce=K.internal_flags.nogap_total,Ae=K.internal_flags.nogap_current,Le=K.ATHtype,Me=0,Ue;switch(K.VBR){case vbr_abr:Ue=K.VBR_mean_bitrate_kbps;break;case vbr_off:Ue=K.brate;break;default:Ue=K.VBR_min_bitrate_kbps}switch(K.VBR.ordinal()<ue.length?Z=ue[K.VBR.ordinal()]:Z=0,ae=16*ne+Z,Y.findReplayGain&&(Y.RadioGain>510&&(Y.RadioGain=510),Y.RadioGain<-510&&(Y.RadioGain=-510),fe=8192,fe|=3072,Y.RadioGain>=0?fe|=Y.RadioGain:(fe|=512,fe|=-Y.RadioGain)),Y.findPeakSample&&(ce=Math.abs(0|Y.PeakSample/32767*Math.pow(2,23)+.5)),Ce!=-1&&(Ae>0&&(de=!0),Ae<Ce-1&&(oe=!0)),Me=Le+((kt?1:0)<<4)+((Q?1:0)<<5)+((oe?1:0)<<6)+((de?1:0)<<7),W<0&&(W=0),K.mode){case MONO:Fe=0;break;case STEREO:Fe=1;break;case DUAL_CHANNEL:Fe=2;break;case JOINT_STEREO:K.force_ms?Fe=4:Fe=3;break;case NOT_SET:default:Fe=7;break}K.in_samplerate<=32e3?Qe=0:K.in_samplerate==48e3?Qe=2:K.in_samplerate>48e3?Qe=3:Qe=1,(K.short_blocks==Qb.short_block_forced||K.short_blocks==Qb.short_block_dispensed||K.lowpassfreq==-1&&K.highpassfreq==-1||K.scale_left<K.scale_right||K.scale_left>K.scale_right||K.disable_reservoir&&K.brate<320||K.noATH||K.ATHonly||Le==0||K.in_samplerate<=32e3)&&(je=1),Ze=De+(Fe<<2)+(je<<5)+(Qe<<6),ft=Y.nMusicCRC,O(H,G+ee,W),ee+=4;for(var we=0;we<9;we++)H[G+ee+we]=255&q.charAt(we);ee+=9,H[G+ee]=255&ae,ee++,H[G+ee]=255&te,ee++,O(H,G+ee,ce),ee+=4,N(H,G+ee,fe),ee+=2,N(H,G+ee,ke),ee+=2,H[G+ee]=255&Me,ee++,Ue>=255?H[G+ee]=255:H[G+ee]=255&Ue,ee++,H[G+ee]=255&X>>4,H[G+ee+1]=255&(X<<4)+(z>>8),H[G+ee+2]=255&z,ee+=3,H[G+ee]=255&Ze,ee++,H[G+ee++]=0,N(H,G+ee,K.preset),ee+=2,O(H,G+ee,B),ee+=4,N(H,G+ee,ft),ee+=2;for(var ge=0;ge<ee;ge++)V=D(H[G+ge],V);return N(H,G+ee,V),ee+=2,ee}function M(K){K.seek(0);var B=wd(10);K.readFully(B);var H;return new String(B,"ISO-8859-1").startsWith("ID3")?H=0:H=((B[6]&127)<<21|(B[7]&127)<<14|(B[8]&127)<<7|B[9]&127)+B.length,H}this.getLameTagFrame=function(K,B){var H=K.internal_flags;if(!K.bWriteVbrTag||H.Class_ID!=Lame.LAME_ID||H.VBR_seek_table.pos<=0)return 0;if(B.length<H.VBR_seek_table.TotalFrameSize)return H.VBR_seek_table.TotalFrameSize;Dye.fill(B,0,H.VBR_seek_table.TotalFrameSize,0),L(K,B);var G=wd(l);if(K.free_format)for(var V=1;V<l;++V)G[V]=255&255*V/100;else A(H.VBR_seek_table,G);var Y=H.sideinfo_len;K.error_protection&&(Y-=2),K.VBR==Lh.vbr_off?(B[Y++]=255&S.charAt(0),B[Y++]=255&S.charAt(1),B[Y++]=255&S.charAt(2),B[Y++]=255&S.charAt(3)):(B[Y++]=255&T.charAt(0),B[Y++]=255&T.charAt(1),B[Y++]=255&T.charAt(2),B[Y++]=255&T.charAt(3)),O(B,Y,s+o+a+i),Y+=4,O(B,Y,H.VBR_seek_table.nVbrNumFrames),Y+=4;var ee=H.VBR_seek_table.nBytesWritten+H.VBR_seek_table.TotalFrameSize;O(B,Y,0|ee),Y+=4,Lye.arraycopy(G,0,B,Y,G.length),Y+=G.length,K.error_protection&&t.CRC_writeheader(H,B);for(var X=0,V=0;V<Y;V++)X=D(B[V],X);return Y+=$(K,ee,B,Y,X),H.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(K,B){var H=K.internal_flags;if(H.VBR_seek_table.pos<=0||(B.seek(B.length()),B.length()==0))return-1;var G=M(B);B.seek(G);var V=wd(r),Y=getLameTagFrame(K,V);return Y>V.length?-1:(Y<1||B.write(V,0,Y),0)}}var Bye=Sc,n2=jn,Jb=n2.new_byte,Fye=n2.assert,Uye=w_(),Gye=vye,Vye=qS,Hye=JS(),Kye=xye,zye=e2(),Wye=$ye,jye=jc,Yye=x_();na();var Xye=kye,qye=Bye;function Zye(){this.setModules=function(e,t){}}function Qye(){this.setModules=function(e,t,n){}}function Jye(){}function eAe(){this.setModules=function(e,t){}}function tAe(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var s=new Uye,o=new Zye,a=new Vye,i=new Yye,l=new Gye,r=new Hye,d=new Kye,u=new qye,p=new Xye,h=new eAe,g=new Wye,_=new zye,T=new Qye,S=new Jye;s.setModules(a,i,l,r,d,u,p,h,S),i.setModules(a,S,p,u),h.setModules(i,p),l.setModules(s),d.setModules(i,g,r,_),r.setModules(_,g,s.enc.psy),g.setModules(i),_.setModules(r),u.setModules(s,i,p),o.setModules(T,S),T.setModules(p,h,l);var E=s.lame_init();E.num_channels=e,E.in_samplerate=t,E.brate=n,E.mode=jye.STEREO,E.quality=3,E.bWriteVbrTag=!1,E.disable_reservoir=!0,E.write_id3tag_automatic=!1,s.lame_init_params(E);var y=1152,A=0|1.25*y+7200,C=Jb(A);this.encodeBuffer=function(O,N){e==1&&(N=O),Fye(O.length==N.length),O.length>y&&(y=O.length,A=0|1.25*y+7200,C=Jb(A));var R=s.lame_encode_buffer(E,O,N,O.length,C,0,A);return new Int8Array(C.subarray(0,R))},this.flush=function(){var O=s.lame_encode_flush(E,C,0,A);return new Int8Array(C.subarray(0,O))}}function qa(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Cm(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}qa.RIFF=Cm("RIFF");qa.WAVE=Cm("WAVE");qa.fmt_=Cm("fmt ");qa.data=Cm("data");qa.readHeader=function(e){var t=new qa,n=e.getUint32(0,!1);if(qa.RIFF==n&&(e.getUint32(4,!0),qa.WAVE==e.getUint32(8,!1)&&qa.fmt_==e.getUint32(12,!1))){var s=e.getUint32(16,!0),o=20;switch(s){case 16:case 18:t.channels=e.getUint16(o+2,!0),t.sampleRate=e.getUint32(o+4,!0);break;default:throw"extended fmt chunk not implemented"}o+=s;for(var a=qa.data,i=0;a!=n&&(n=e.getUint32(o,!1),i=e.getUint32(o+4,!0),a!=n);)o+=i+8;return t.dataLen=i,t.dataOffset=o+8,t}};S_.Mp3Encoder=tAe;S_.WavHeader=qa;const Rd=(e,t,n)=>{for(let s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))},nAe=async(e,t,n)=>{const s=e.length*t*2,o=new ArrayBuffer(44+s),a=new DataView(o);Rd(a,0,"RIFF"),a.setUint32(4,36+s,!0),Rd(a,8,"WAVE"),Rd(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,t,!0),a.setUint32(24,n,!0),a.setUint32(28,n*t*2,!0),a.setUint16(32,t*2,!0),a.setUint16(34,16,!0),Rd(a,36,"data"),a.setUint32(40,s,!0);const i=44;for(let l=0;l<e.length;l++)for(let r=0;r<t;r++){const d=Math.max(-1,Math.min(1,e.getChannelData(r)[l]));a.setInt16(i+(l*t+r)*2,d*32767,!0)}return new Blob([o],{type:"audio/wav"})},s2=async e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=await e.arrayBuffer();return await t.decodeAudioData(n)},sAe=async e=>{const t=await s2(e);return nAe(t,t.numberOfChannels,t.sampleRate)},aAe=(e,t,n,s=128)=>{const o=[],a=new S_.Mp3Encoder(e,t,s),i=1152;for(let r=0;r<n.length;r+=i){const d=Math.min(r+i,n.length),u=n.subarray(r,d),p=a.encodeBuffer(u);p.length>0&&o.push(new Int8Array(p))}const l=a.flush();return l.length>0&&o.push(new Int8Array(l)),new Blob(o,{type:"audio/mp3"})},oAe=async(e,t=128)=>{try{const n=await s2(e),s=new Int16Array(n.length*n.numberOfChannels);let o=0;for(let a=0;a<n.length;a+=1)for(let i=0;i<n.numberOfChannels;i+=1){const l=Math.max(-1,Math.min(1,n.getChannelData(i)[a]));s[o]=l<0?l*32768:l*32767,o+=1}return aAe(n.numberOfChannels,n.sampleRate,s,t)}catch{throw new Error("Conversion to MP3 failed.")}},iAe=async(e,t,n=128)=>{let s;if(t==="audio/wav")s=await sAe(e);else if(t==="audio/mp3")s=await oAe(e,n);else throw new Error("Unsupported output format");return s},lAe={__name:"AudioRecorder",props:{audioRecordFormat:{type:String,required:!0}},emits:["recorderProgressChanged","finishRecord","pause","play"],setup(e,{expose:t,emit:n}){const s=e,o=n,a=U(null),i=U(null),l=U(null),r=U(!1),d=U(!1),u=U(!1),p=S=>{const E=Wk({start:0,end:S});return Ln(new Date(0,0,0,0,E.minutes,E.seconds),"mm:ss")},h=()=>{i.value=Ac.create({container:a.value,waveColor:"#1F93FF",progressColor:"#6E6F73",height:100,barWidth:2,barGap:1,barRadius:2,plugins:[A_.create({scrollingWaveform:!0,renderRecordedAudio:!1})]}),i.value.on("pause",()=>o("pause")),i.value.on("play",()=>o("play")),l.value=i.value.plugins[0],i.value.on("finish",()=>{d.value=!1}),l.value.on("record-end",async S=>{const E=URL.createObjectURL(S),y=await iAe(S,s.audioRecordFormat),A=`${MN()}.mp3`,C=new File([y],A,{type:s.audioRecordFormat});i.value.load(E),o("finishRecord",{name:C.name,type:C.type,size:C.size,file:C}),u.value=!0,r.value=!1}),l.value.on("record-progress",S=>{o("recorderProgressChanged",p(S))})},g=()=>{r.value&&(l.value.stopRecording(),r.value=!1)},_=()=>{l.value.startRecording(),r.value=!0},T=()=>{u.value&&(i.value.playPause(),d.value=!d.value)};return ut(()=>{h(),_()}),ia(()=>{i.value&&i.value.destroy()}),t({playPause:T,stopRecording:g,record:l}),(S,E)=>(m(),f("div",{ref_key:"waveformContainer",ref:a,class:"w-full p-1"},null,512))}},rAe=["DOCUMENT","IMAGE","VIDEO"],cAe={props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],data(){return{query:""}},computed:{whatsAppTemplateMessages(){return this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).filter(e=>e.status.toLowerCase()==="approved").filter(e=>e.components.every(t=>!rAe.includes(t.format)))},filteredTemplateMessages(){return this.whatsAppTemplateMessages.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))}},methods:{getTemplatebody(e){return e.components.find(t=>t.type==="BODY").text}}},dAe={class:"w-full"},uAe={class:"gap-1 bg-n-alpha-black2 items-center flex mb-2.5 py-0 px-2.5 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},mAe=["placeholder"],pAe={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},hAe=["onClick"],fAe={class:"flex items-center justify-between mb-2.5"},gAe={class:"text-sm"},_Ae={class:"inline-block px-2 py-1 text-xs leading-none bg-n-slate-3 rounded-lg cursor-default text-n-slate-12"},vAe={class:"font-medium"},bAe={class:"label-body"},EAe={class:"mt-5"},TAe={class:"font-medium"},yAe={key:0};function AAe(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",dAe,[c("div",uAe,[b(i,{icon:"search",class:"text-n-slate-12",size:"16"}),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.query=l),type:"search",placeholder:e.$t("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,mAe),[[at,o.query]])]),c("div",pAe,[(m(!0),f(pe,null,ye(a.filteredTemplateMessages,(l,r)=>(m(),f("div",{key:l.id},[c("button",{class:"rounded-lg cursor-pointer block p-2.5 text-left w-full hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:d=>e.$emit("onSelect",l)},[c("div",null,[c("div",fAe,[c("p",gAe,v(l.name),1),c("span",_Ae,v(e.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+" : "+v(l.language),1)]),c("div",null,[c("p",vAe,v(e.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.TEMPLATE_BODY")),1),c("p",bAe,v(a.getTemplatebody(l)),1)]),c("div",EAe,[c("p",TAe,v(e.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.CATEGORY")),1),c("p",null,v(l.category),1)])])],8,hAe),r!=a.filteredTemplateMessages.length-1?(m(),f("hr",{key:`hr-${r}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):x("",!0)]))),128)),a.filteredTemplateMessages.length?x("",!0):(m(),f("div",yAe,[c("p",null,[be(v(e.$t("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),c("strong",null,v(o.query),1)])]))])])}const SAe=Re(cAe,[["render",AAe],["__scopeId","data-v-1e6919e9"]]),IAe={components:{NextButton:he},props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","resetTemplate"],setup(e,{emit:t}){const n=h=>h.replace(/{{|}}/g,""),s=h=>Object.keys(h).every(_=>h[_]),o=U({}),a=w(()=>e.template.components.find(h=>h.type==="BODY").text),i=w(()=>a.value.match(/{{([^}]+)}}/g)),l=w(()=>a.value.replace(/{{([^}]+)}}/g,(h,g)=>{const _=n(g);return o.value[_]||`{{${g}}}`})),r=Lt({processedParams:{requiredIfKeysPresent:ou(i),allKeysRequired:s}},{processedParams:o}),d=()=>{const h=a.value.match(/{{([^}]+)}}/g);if(!h)return;const g=h.map(_=>n(_));o.value=g.reduce((_,T)=>(_[T]="",_),{})},u=()=>{t("resetTemplate")},p=()=>{if(r.value.$touch(),r.value.$invalid)return;const h={message:l.value,templateParams:{name:e.template.name,category:e.template.category,language:e.template.language,namespace:e.template.namespace,processed_params:o.value}};t("sendMessage",h)};return ut(d),{processedParams:o,variables:i,templateString:a,processedString:l,v$:r,resetTemplate:u,sendMessage:p}}},CAe={class:"w-full"},NAe={key:0,class:"p-2.5"},OAe={class:"text-sm font-semibold mb-2.5"},xAe={class:"bg-n-alpha-black2 text-n-slate-12 inline-block rounded-md text-xs py-2.5 px-6"},wAe={key:0,class:"bg-n-ruby-9/20 rounded-md text-n-ruby-9 p-2.5 text-center"},RAe={class:"flex justify-end gap-2"};function $Ae(e,t,n,s,o,a){const i=F("woot-input"),l=F("NextButton");return m(),f("div",CAe,[ie(c("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.processedString=r),rows:"4",readonly:"",class:"template-input"},null,512),[[at,s.processedString]]),s.variables?(m(),f("div",NAe,[c("p",OAe,v(e.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(m(!0),f(pe,null,ye(s.processedParams,(r,d)=>(m(),f("div",{key:d,class:"items-center flex mb-2.5"},[c("span",xAe,v(d),1),b(i,{modelValue:s.processedParams[d],"onUpdate:modelValue":u=>s.processedParams[d]=u,type:"text",class:"flex-1 text-sm ml-2.5",styles:{marginBottom:0}},null,8,["modelValue","onUpdate:modelValue"])]))),128)),s.v$.$dirty&&s.v$.$invalid?(m(),f("p",wAe,v(e.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):x("",!0)])):x("",!0),c("footer",RAe,[b(l,{faded:"",slate:"",type:"reset",label:e.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"),onClick:s.resetTemplate},null,8,["label","onClick"]),b(l,{type:"button",label:e.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),onClick:s.sendMessage},null,8,["label","onClick"])])])}const MAe=Re(IAe,[["render",$Ae]]),kAe={components:{TemplatesPicker:SAe,TemplateParser:MAe},props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],data(){return{selectedWaTemplate:null}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},modalHeaderContent(){return this.selectedWaTemplate?this.$t("WHATSAPP_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:this.selectedWaTemplate.name}):this.$t("WHATSAPP_TEMPLATES.MODAL.SUBTITLE")}},methods:{pickTemplate(e){this.selectedWaTemplate=e},onResetTemplate(){this.selectedWaTemplate=null},onSendMessage(e){this.$emit("onSend",e)},onClose(){this.$emit("cancel")}}},LAe={class:"row modal-content"};function DAe(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("TemplatesPicker"),r=F("TemplateParser"),d=F("woot-modal");return m(),P(d,{show:a.localShow,"onUpdate:show":t[0]||(t[0]=u=>a.localShow=u),"on-close":a.onClose,size:"modal-big"},{default:j(()=>[b(i,{"header-title":e.$t("WHATSAPP_TEMPLATES.MODAL.TITLE"),"header-content":a.modalHeaderContent},null,8,["header-title","header-content"]),c("div",LAe,[o.selectedWaTemplate?(m(),P(r,{key:1,template:o.selectedWaTemplate,onResetTemplate:a.onResetTemplate,onSendMessage:a.onSendMessage},null,8,["template","onResetTemplate","onSendMessage"])):(m(),P(l,{key:0,"inbox-id":n.inboxId,onOnSelect:a.pickTemplate},null,8,["inbox-id","onOnSelect"]))])]),_:1},8,["show","on-close"])}const PAe=Re(kAe,[["render",DAe],["__scopeId","data-v-aadd6c10"]]),BAe={computed:{...gt({accountId:"getCurrentAccountId"})},methods:{onFileUpload(e){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(e):this.onIndirectFileUpload(e)},onDirectFileUpload(e){const t=this.isATwilioSMSChannel?Gh:oc;e&&(il(e,t)?new Hf.DirectUpload(e.file,`/api/v1/accounts/${this.accountId}/conversations/${this.currentChat.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:s=>{s.setRequestHeader("api_access_token",this.currentUser.access_token)}}).create((s,o)=>{s?Te(s):this.attachFile({file:e,blob:o})}):Te(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t})))},onIndirectFileUpload(e){const t=this.isATwilioSMSChannel?Gh:oc;e&&(il(e,t)?this.attachFile({file:e}):Te(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t})))}}},FAe={components:{ContextMenu:ym},props:{show:{type:Boolean,default:!1},conversationId:{type:[Number,String],required:!0}},data(){return{title:"",message:"",selectedInbox:"",scheduledTime:"",isLoading:!1,scheduledMessages:[],isScheduledMessagesOpen:!0,isEditing:!1,editingMessageId:null,enabledFeatures:{},showDeleteConfirmation:!1,messageToDelete:null,expandedMessages:[],statusFilter:"all",filterMenuItems:[{id:"all",label:"Todos os status",icon:"list"},{id:"pending",label:"Pendentes",icon:"clock"},{id:"sent",label:"Enviados",icon:"checkmark"}],showFilterMenu:!1,filterMenuPosition:{x:0,y:0}}},computed:{...gt({currentChat:"getSelectedChat",inboxes:"inboxes/getInboxes",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),account(){return this.$store.getters["accounts/getAccount"](this.accountId)},isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,xt.SCHEDULE_MESSAGES)},pendingMessagesCount(){return this.scheduledMessages.filter(e=>e.status==="pending").length},filteredMessages(){return this.statusFilter==="all"?this.scheduledMessages:this.scheduledMessages.filter(e=>e.status===this.statusFilter)}},async mounted(){console.log("[ScheduleMessageModal] isFeatureEnabled:",this.isFeatureEnabled),console.log("[ScheduleMessageModal] mounted"),console.log("[ScheduleMessageModal] enabledFeatures:",this.enabledFeatures),console.log("[ScheduleMessageModal] isFeatureEnabled:",this.isFeatureEnabled),await this.fetchScheduledMessages(),this.isFeatureEnabled||(console.log("[ScheduleMessageModal] Feature desabilitada, fechando modal"),this.onClose())},methods:{initializeEnabledFeatures(){this.enabledFeatures=this.account.features},async fetchScheduledMessages(){try{const e=await Yi.getScheduledMessages(this.conversationId);console.log("Resposta da API:",e),this.scheduledMessages=e.data.payload||[],console.log("Mensagens agendadas:",this.scheduledMessages)}catch(e){console.error("Erro ao buscar mensagens:",e),Te("Erro ao carregar mensagens agendadas","error")}},onClose(){this.$emit("close"),this.resetForm()},resetForm(){console.log("Iniciando reset do formulrio"),this.title="",this.message="",this.selectedInbox="",this.scheduledTime="",this.isLoading=!1,this.isEditing=!1,this.editingMessageId=null,console.log("Formulrio resetado")},async onSubmit(){try{this.isLoading=!0;const e={scheduled_message:{inbox_id:this.selectedInbox,content:this.message,scheduled_at:new Date(this.scheduledTime).toISOString(),title:this.title}};await Yi.scheduleMessage({conversation_id:this.conversationId,...e.scheduled_message}),Te("Mensagem agendada com sucesso","success"),await this.fetchScheduledMessages(),this.resetForm(),this.onClose()}catch{Te("No foi possvel agendar a mensagem. Tente novamente.","error")}finally{this.isLoading=!1}},async updateScheduledMessage(){try{this.isLoading=!0;const e={inbox_id:this.selectedInbox,content:this.message,scheduled_at:new Date(this.scheduledTime).toISOString(),title:this.title};await Yi.updateScheduledMessage(this.conversationId,this.editingMessageId,e),Te("Agendamento atualizado com sucesso","success"),await this.fetchScheduledMessages(),this.resetForm(),this.onClose()}catch{Te("No foi possvel atualizar o agendamento. Tente novamente.","error")}finally{this.isLoading=!1}},formatDate(e){return new Date(e*1e3).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},getInboxName(e){const t=this.inboxes.find(n=>n.id===e);return t?t.name:"Caixa no encontrada"},getStatusText(e){return e==="sent"?"Enviado":"Pendente"},getStatusClass(e){return{"status-pending":e==="pending","status-sent":e==="sent"}},handleEdit(e){console.log("Preenchendo formulrio para edio:",e),this.title=e.title,this.message=e.message,this.selectedInbox=e.inbox_id;const t=new Date(e.scheduled_at*1e3);this.scheduledTime=t.toISOString().slice(0,16),this.isEditing=!0,this.editingMessageId=e.id,this.isScheduledMessagesOpen=!1},async deleteMessage(e){this.messageToDelete=e,this.showDeleteConfirmation=!0},closeDeleteModal(){this.showDeleteConfirmation=!1,this.messageToDelete=null},async confirmDelete(){try{await Yi.deleteScheduledMessage(this.conversationId,this.messageToDelete),await this.fetchScheduledMessages(),Te("Agendamento excludo com sucesso","success")}catch{Te("No foi possvel excluir o agendamento","error")}finally{this.closeDeleteModal()}},toggleScheduledMessages(){this.isScheduledMessagesOpen=!this.isScheduledMessagesOpen},handleSubmit(e){this.isEditing||this.onSubmit()},toggleMessageExpand(e){const t=this.expandedMessages.indexOf(e);t===-1?this.expandedMessages.push(e):this.expandedMessages.splice(t,1)},openFilterMenu(e){e.stopPropagation();const t=e.target.getBoundingClientRect();this.filterMenuPosition={x:t.left,y:t.bottom+4},this.showFilterMenu=!0},closeFilterMenu(){this.showFilterMenu=!1},handleFilterSelect(e){this.statusFilter=e.id,this.closeFilterMenu()}}},UAe={class:"schedule-message-container"},GAe={class:"schedule-message"},VAe={class:"form-column"},HAe={class:"form-group"},KAe={class:"form-group"},zAe={class:"form-group"},WAe=["value"],jAe={class:"form-group"},YAe={class:"modal-footer dark:border-slate-600"},XAe={class:"button-wrapper"},qAe={class:"scheduled-list-column"},ZAe={class:"scheduled-messages"},QAe={class:"scheduled-messages-header"},JAe={class:"header-content"},eSe={class:"title-group"},tSe={class:"dark:text-slate-100"},nSe={key:0,class:"counter"},sSe={key:0,class:"empty-state"},aSe={class:"empty-state-content"},oSe={key:1,class:"scheduled-messages-list"},iSe=["onClick"],lSe={class:"header-content"},rSe={class:"title-section"},cSe={class:"title-and-badge"},dSe={class:"title"},uSe={class:"meta-info"},mSe={class:"datetime"},pSe={class:"inbox"},hSe={class:"message-expandable"},fSe={class:"message-preview"},gSe={class:"preview-header"},_Se={class:"preview-content"},vSe={class:"actions"},bSe={class:"delete-confirmation-modal"},ESe={class:"modal-footer"},TSe={class:"button-wrapper"};function ySe(e,t,n,s,o,a){const i=F("woot-button"),l=F("fluent-icon"),r=F("woot-modal"),d=F("context-menu");return m(),f("div",UAe,[b(r,{show:a.isFeatureEnabled&&n.show,"on-close":a.onClose,"show-close-button":!0,"close-on-backdrop-click":!0},{default:j(()=>[t[22]||(t[22]=c("div",{class:"modal-header"},[c("div",{class:"header-content"},[c("div",{class:"title-group"},[c("h1",{class:"modal-title"},"Agendamento de Mensagem")])])],-1)),c("div",GAe,[c("div",VAe,[c("form",{class:"schedule-message__form",onSubmit:t[4]||(t[4]=Ke((...u)=>a.handleSubmit&&a.handleSubmit(...u),["prevent"])),onClick:t[5]||(t[5]=Ke(()=>{},["stop"]))},[c("div",HAe,[t[7]||(t[7]=c("label",{class:"dark:text-slate-100"},"Ttulo",-1)),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.title=u),type:"text",class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",placeholder:"Digite um ttulo para identificar este agendamento",required:""},null,512),[[at,o.title]])]),c("div",KAe,[t[8]||(t[8]=c("label",{class:"dark:text-slate-100"},"Mensagem",-1)),ie(c("textarea",{"onUpdate:modelValue":t[1]||(t[1]=u=>o.message=u),class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",placeholder:"Digite a mensagem que ser enviada",required:""},null,512),[[at,o.message]])]),c("div",zAe,[t[10]||(t[10]=c("label",{class:"dark:text-slate-100"},"Selecione um canal",-1)),ie(c("select",{"onUpdate:modelValue":t[2]||(t[2]=u=>o.selectedInbox=u),class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",required:""},[t[9]||(t[9]=c("option",{value:""},"Selecione um canal",-1)),(m(!0),f(pe,null,ye(e.inboxes,u=>(m(),f("option",{key:u.id,value:u.id},v(u.name),9,WAe))),128))],512),[[Mt,o.selectedInbox]])]),c("div",jAe,[t[11]||(t[11]=c("label",{class:"dark:text-slate-100"},"Data e Hora do Envio",-1)),ie(c("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>o.scheduledTime=u),type:"datetime-local",class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",required:""},null,512),[[at,o.scheduledTime]])]),c("div",YAe,[c("div",XAe,[b(i,{variant:"clear",size:"small",onClick:a.onClose},{default:j(()=>t[12]||(t[12]=[be(" Cancelar ")])),_:1},8,["onClick"]),o.isEditing?(m(),P(i,{key:1,variant:"primary",size:"small","color-scheme":"success",type:"button",onClick:a.updateScheduledMessage},{default:j(()=>t[14]||(t[14]=[be(" Salvar alteraes ")])),_:1},8,["onClick"])):(m(),P(i,{key:0,variant:"primary",size:"small","color-scheme":"success",type:"submit"},{default:j(()=>t[13]||(t[13]=[be(" Agendar mensagem ")])),_:1}))])])],32)]),c("div",qAe,[c("div",ZAe,[c("div",QAe,[c("div",JAe,[c("div",eSe,[c("h3",tSe,[t[15]||(t[15]=be(" Mensagens Agendadas ")),o.scheduledMessages.length>0?(m(),f("span",nSe,v(a.pendingMessagesCount),1)):x("",!0)]),o.scheduledMessages.length>0?(m(),P(i,{key:0,variant:"clear",size:"small",class:"filter-button",onClick:t[6]||(t[6]=u=>a.openFilterMenu(u))},{default:j(()=>[b(l,{icon:"filter",size:"16"})]),_:1})):x("",!0)])])]),o.scheduledMessages.length===0?(m(),f("div",sSe,[c("div",aSe,[b(l,{icon:"calendar",size:"32",class:"empty-icon"}),t[16]||(t[16]=c("p",{class:"empty-text"},"Nenhuma mensagem agendada",-1)),t[17]||(t[17]=c("p",{class:"empty-subtext"}," As mensagens agendadas aparecero aqui ",-1))])])):(m(),f("div",oSe,[(m(!0),f(pe,null,ye(a.filteredMessages,u=>(m(),f("div",{key:u.id,class:"scheduled-message"},[c("div",{class:"message-header",onClick:p=>a.toggleMessageExpand(u.id)},[c("div",lSe,[c("div",rSe,[c("div",cSe,[c("span",dSe,v(u.title),1),c("span",{class:re(["status-badge",a.getStatusClass(u.status)])},[t[18]||(t[18]=c("span",{class:"pulse-dot"},null,-1)),be(" "+v(a.getStatusText(u.status)),1)],2)]),b(l,{icon:o.expandedMessages.includes(u.id)?"chevron-up":"chevron-down",size:"14",class:"expand-icon"},null,8,["icon"])]),c("div",uSe,[c("div",mSe,[b(l,{icon:"calendar",size:"12",class:"icon"}),be(" "+v(a.formatDate(u.scheduled_at)),1)]),c("div",pSe,[b(l,{icon:"chat",size:"12",class:"icon"}),be(" "+v(a.getInboxName(u.inbox_id)),1)])])])],8,iSe),ie(c("div",hSe,[c("div",fSe,[c("div",gSe,[b(l,{icon:"chat",size:"14",class:"preview-icon"}),t[19]||(t[19]=c("span",null,"Mensagem Agendada",-1))]),c("div",_Se,v(u.message),1)]),c("div",vSe,[b(i,{variant:"clear",size:"small",class:"action-button edit",onClick:Ke(p=>a.handleEdit(u),["stop","prevent"])},{default:j(()=>[b(l,{icon:"edit",size:"12"}),t[20]||(t[20]=be(" Editar "))]),_:2},1032,["onClick"]),b(i,{variant:"clear",size:"small",class:"action-button delete",onClick:Ke(p=>a.deleteMessage(u.id),["stop"])},{default:j(()=>[b(l,{icon:"delete",size:"12"}),t[21]||(t[21]=be(" Excluir "))]),_:2},1032,["onClick"])])],512),[[ln,o.expandedMessages.includes(u.id)]])]))),128))]))])])])]),_:1},8,["show","on-close"]),b(r,{show:o.showDeleteConfirmation,"on-close":a.closeDeleteModal,"show-close-button":!0,"close-on-backdrop-click":!0},{default:j(()=>[c("div",bSe,[t[25]||(t[25]=c("div",{class:"modal-header"},[c("div",{class:"header-content"},[c("div",{class:"title-group"},[c("h1",{class:"modal-title"},"Excluir agendamento")])])],-1)),t[26]||(t[26]=c("div",{class:"modal-content"},[c("p",{class:"modal-message"}," Tem certeza que deseja excluir este agendamento? Esta ao no pode ser desfeita. ")],-1)),c("div",ESe,[c("div",TSe,[b(i,{variant:"clear",size:"small",onClick:a.closeDeleteModal},{default:j(()=>t[23]||(t[23]=[be(" No, manter ")])),_:1},8,["onClick"]),b(i,{variant:"primary","color-scheme":"alert",size:"small",onClick:a.confirmDelete},{default:j(()=>t[24]||(t[24]=[be(" Sim, excluir ")])),_:1},8,["onClick"])])])])]),_:1},8,["show","on-close"]),b(d,{show:o.showFilterMenu,x:o.filterMenuPosition.x,y:o.filterMenuPosition.y,items:o.filterMenuItems,"selected-id":o.statusFilter,onSelect:a.handleFilterSelect,onClose:a.closeFilterMenu},null,8,["show","x","y","items","selected-id","onSelect","onClose"])])}const ASe=Re(FAe,[["render",ySe],["__scopeId","data-v-98a43197"]]),SSe=Du(()=>Oo(()=>import("./EmojiInput-C1k9EJvN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),ISe={components:{ArticleSearchPopover:dTe,AttachmentPreview:Sbe,AudioRecorder:lAe,Banner:Lc,CannedResponse:Mg,EmojiInput:SSe,MessageSignatureMissingAlert:pTe,ReplyBottomPanel:REe,ReplyEmailHead:zbe,ReplyToMessage:hbe,ReplyTopPanel:Rbe,ResizableTextArea:Vf,WhatsappTemplates:PAe,WootMessageEditor:wo,ScheduleMessageModal:ASe},mixins:[Ro,BAe,ube],emits:["update:popoutReplyBox","togglePopout"],setup(){const{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s}=Mn(),o=fC(),a=Us("replyEditor");return{uiSettings:e,popoutReplyBox:o,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s,replyEditor:a}},data(){return{message:"",inReplyTo:{},isFocused:!1,showEmojiPicker:!1,attachedFiles:[],isRecordingAudio:!1,recordingAudioState:"",recordingAudioDurationText:"",isUploading:!1,replyType:xs.REPLY,mentionSearchKey:"",hasSlashCommand:!1,bccEmails:"",ccEmails:"",toEmails:"",doAutoSaveDraft:()=>{},showWhatsAppTemplatesModal:!1,updateEditorSelectionWith:"",undefinedVariableMessage:"",showMentions:!1,showUserMentions:!1,showCannedMenu:!1,showVariablesMenu:!1,newConversationModalActive:!1,showArticleSearchPopover:!1,hasRecordedAudio:!1,showScheduleMessageModal:!1}},computed:{...gt({isRTL:"accounts/isRTL",currentChat:"getSelectedChat",messageSignature:"getMessageSignature",currentUser:"getCurrentUser",lastEmail:"getLastEmailInSelectedChat",globalConfig:"globalConfig/get"}),currentContact(){return this.$store.getters["contacts/getContact"](this.currentChat.meta.sender.id)},shouldShowReplyToMessage(){var e;return((e=this.inReplyTo)==null?void 0:e.id)&&!this.isPrivate&&this.inboxHasFeature(bc.REPLY_TO)&&!this.is360DialogWhatsAppChannel},showRichContentEditor(){if(this.isOnPrivateNote||this.isRichEditorEnabled)return!0;if(this.isAPIInbox){const{display_rich_content_editor:e=!1}=this.uiSettings;return e}return!1},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:0;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{Te(this.$t("CONVERSATION.CHANGE_AGENT"))})}},showSelfAssignBanner(){return this.message!==""&&!this.isOnPrivateNote&&(!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id)},hasWhatsappTemplates(){return!!this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).length},isPrivate(){return this.currentChat.can_reply||this.isAWhatsAppChannel?this.isOnPrivateNote:!0},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},messagePlaceHolder(){return this.isPrivate?this.$t("CONVERSATION.FOOTER.PRIVATE_MSG_INPUT"):this.$t("CONVERSATION.FOOTER.MSG_INPUT")},isMessageLengthReachingThreshold(){return this.message.length>this.maxLength-50},charactersRemaining(){return this.maxLength-this.message.length},isReplyButtonDisabled(){return this.isATwitterInbox?!0:this.hasAttachments||this.hasRecordedAudio?!1:this.isMessageEmpty||this.message.length===0||this.message.length>this.maxLength},sender(){return{name:this.currentUser.name,thumbnail:this.currentUser.avatar_url}},conversationType(){const{additional_attributes:e}=this.currentChat;return(e?e.type:"")||""},maxLength(){return this.isPrivate?Sl.GENERAL:this.isAFacebookInbox?Sl.FACEBOOK:this.isAWhatsAppChannel?Sl.TWILIO_WHATSAPP:this.isASmsInbox?Sl.TWILIO_SMS:this.isAnEmailChannel?Sl.EMAIL:Sl.GENERAL},showFileUpload(){return this.isAWebWidgetInbox||this.isAFacebookInbox||this.isAWhatsAppChannel||this.isAPIInbox||this.isAnEmailChannel||this.isASmsInbox||this.isATelegramChannel||this.isALineChannel||this.isAInstagramChannel},replyButtonLabel(){let e=this.$t("CONVERSATION.REPLYBOX.SEND");this.isPrivate&&(e=this.$t("CONVERSATION.REPLYBOX.CREATE"));const t=this.isEditorHotKeyEnabled("cmd_enter")?"( + )":"()";return`${e} ${t}`},replyBoxClass(){return{"is-private":this.isPrivate,"is-focused":this.isFocused||this.hasAttachments}},hasAttachments(){return this.attachedFiles.length},isRichEditorEnabled(){return this.isAWebWidgetInbox||this.isAnEmailChannel},showAudioRecorder(){return!this.isOnPrivateNote&&this.showFileUpload},showAudioRecorderEditor(){return this.showAudioRecorder&&this.isRecordingAudio},isOnPrivateNote(){return this.replyType===xs.NOTE},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=$t,{conversation_display_type:t=e}=this.uiSettings;return t!==e},emojiDialogClassOnExpandedLayoutAndRTLView(){return this.isOnExpandedLayout||this.popoutReplyBox?"emoji-dialog--expanded":this.isRTL?"emoji-dialog--rtl":""},isMessageEmpty(){return this.message?!this.message.trim().replace(/\n/g,"").length:!0},showReplyHead(){return!this.isOnPrivateNote&&this.isAnEmailChannel},enableMultipleFileUpload(){return this.isAnEmailChannel||this.isAWebWidgetInbox||this.isAPIInbox||this.isAWhatsAppChannel||this.isATelegramChannel},isSignatureEnabledForInbox(){return!this.isPrivate&&this.sendWithSignature},isSignatureAvailable(){return!!this.signatureToApply},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},editorMessageKey(){const{editor_message_key:e}=this.uiSettings;return e},commandPlusEnterToSendEnabled(){return this.editorMessageKey==="cmd_enter"},enterToSendEnabled(){return this.editorMessageKey==="enter"},conversationId(){return this.currentChat.id},conversationIdByRoute(){return this.conversationId},editorStateId(){return`draft-${this.conversationIdByRoute}-${this.replyType}`},audioRecordFormat(){return this.isAWhatsAppChannel||this.isATelegramChannel?Pm.MP3:this.isAPIInbox?Pm.MP3:Pm.WAV},messageVariables(){return SN({conversation:this.currentChat,contact:this.currentContact})},signatureToApply(){return this.showRichContentEditor?this.messageSignature:nl(this.messageSignature)},connectedPortalSlug(){const{help_center:e={}}=this.inbox,{slug:t=""}=e;return t}},watch:{currentChat(e){const{can_reply:t}=e;this.setCCAndToEmailsFromLastChat(),!this.isOnPrivateNote&&(t||this.isAWhatsAppChannel?this.replyType=xs.REPLY:this.replyType=xs.NOTE,this.fetchAndSetReplyTo())},"currentChat.messages":{handler(){this.setCCAndToEmailsFromLastChat()},deep:!0},conversationIdByRoute(e,t){e!==t&&(this.setToDraft(t,this.replyType),this.getFromDraft(),this.resetRecorderAndClearAttachments())},message(e){const t=_o(e,this.signatureToApply),n=t.startsWith("/");this.hasSlashCommand=n&&!this.showRichContentEditor,this.showMentions=this.hasSlashCommand,this.mentionSearchKey=this.hasSlashCommand?t.substring(1):"",this.doAutoSaveDraft()},replyType(e,t){this.setToDraft(this.conversationIdByRoute,t),this.getFromDraft()}},mounted(){this.getFromDraft(),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.handleKeyEvents),this.setCCAndToEmailsFromLastChat(),this.doAutoSaveDraft=Ko(()=>{this.saveDraft(this.conversationIdByRoute,this.replyType)},500,!0),this.fetchAndSetReplyTo(),yt.on(sn.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),yt.on(sn.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive),yt.on(sn.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor)},unmounted(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.handleKeyEvents),yt.off(sn.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),yt.off(sn.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor),yt.off(sn.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},methods:{handleInsert(e){const{url:t,title:n}=e;if(this.isRichEditorEnabled){const a=n.split(`
`).filter(i=>i.trim()!=="").join(" ");yt.emit(sn.INSERT_INTO_RICH_EDITOR,`[${a}](${t})`)}else this.addIntoEditor(`${this.$t("CONVERSATION.REPLYBOX.INSERT_READ_MORE")} ${t}`);jt(ba.INSERT_ARTICLE_LINK)},toggleRichContentEditor(){this.updateUISettings({display_rich_content_editor:!this.showRichContentEditor});const e=nl(this.messageSignature);if(!this.showRichContentEditor&&this.messageSignature){let t=_o(this.message,this.messageSignature);t=nl(t),t=mi(t,e),this.message=t}else this.message=nN(this.message,e,this.messageSignature)},resetRecorderAndClearAttachments(){this.resetAudioRecorderInput(),this.attachedFiles=[]},saveDraft(e,t){if(this.message||this.message===""){const n=`draft-${e}-${t}`,s=AN(this.message||"");this.$store.dispatch("draftMessages/set",{key:n,message:s})}},setToDraft(e,t){this.saveDraft(e,t),this.message=""},getFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`,t=this.$store.getters["draftMessages/get"](e)||"";this.message=this.toggleSignatureForDraft(t)}},toggleSignatureForDraft(e){return this.isPrivate?e:this.sendWithSignature?mi(e,this.signatureToApply):_o(e,this.signatureToApply)},removeFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`;this.$store.dispatch("draftMessages/delete",{key:e})}},getElementToBind(){return this.replyEditor},getKeyboardEvents(){return{Escape:{action:()=>{this.hideEmojiPicker(),this.hideMentions()},allowOnFocusedInput:!0},"$mod+KeyK":{action:e=>{e.preventDefault(),document.querySelector("ninja-keys").open()},allowOnFocusedInput:!0},Enter:{action:e=>{this.isAValidEvent("enter")&&(this.onSendReply(),e.preventDefault())},allowOnFocusedInput:!0},"$mod+Enter":{action:()=>{this.isAValidEvent("cmd_enter")&&this.onSendReply()},allowOnFocusedInput:!0}}},isAValidEvent(e){return!this.showUserMentions&&!this.showMentions&&!this.showCannedMenu&&!this.showVariablesMenu&&this.isFocused&&this.isEditorHotKeyEnabled(e)},onPaste(e){const t=e.clipboardData.files;!this.showRichContentEditor&&t.length!==0&&this.$refs.messageInput.$el.blur(),!(!t.length||!t[0])&&t.forEach(n=>{const{name:s,type:o,size:a}=n;this.onFileUpload({name:s,type:o,size:a,file:n})})},toggleUserMention(e){this.showUserMentions=e},toggleCannedMenu(e){this.showCannedMenu=e},toggleVariablesMenu(e){this.showVariablesMenu=e},openWhatsappTemplateModal(){this.showWhatsAppTemplatesModal=!0},hideWhatsappTemplatesModal(){this.showWhatsAppTemplatesModal=!1},toggleScheduleModal(){console.log("toggleScheduleModal chamado",this.showScheduleMessageModal),this.showScheduleMessageModal=!this.showScheduleMessageModal,console.log("aps toggle",this.showScheduleMessageModal)},onClickSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,avatar_url:l}=this.currentUser,r={account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,thumbnail:l};this.assignedAgent=r},confirmOnSendReply(){if(!this.isReplyButtonDisabled&&!this.showMentions){const e=this.isATwilioWhatsAppChannel||this.isAWhatsAppCloudChannel||this.is360DialogWhatsAppChannel,t=this.isAInstagramChannel;if((e||t)&&!this.isPrivate)this.sendMessageAsMultipleMessages(this.message);else{const n=this.getMessagePayload(this.message);this.sendMessage(n)}this.isPrivate||this.clearEmailField(),this.clearMessage(),this.hideEmojiPicker(),this.$emit("update:popoutReplyBox",!1)}},sendMessageAsMultipleMessages(e){this.getMultipleMessagesPayload(e).forEach(n=>{this.sendMessage(n)})},sendMessageAnalyticsData(e){var t;return e?jt(ba.SENT_PRIVATE_NOTE):jt(ba.SENT_MESSAGE,{channelType:this.channelType,signatureEnabled:this.sendWithSignature,hasReplyTo:!!((t=this.inReplyTo)!=null&&t.id)})},async onSendReply(){const e=yN({message:this.message,variables:this.messageVariables});if(e.length>0){const t=e.length>1?e.length:1;this.undefinedVariableMessage=this.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.MESSAGE",{undefinedVariablesCount:t,undefinedVariables:e.join(", ")}),await this.$refs.confirmDialog.showConfirmation()&&this.confirmOnSendReply()}else this.confirmOnSendReply()},async sendMessage(e){var t,n;try{await this.$store.dispatch("createPendingMessageAndSend",e),yt.emit(sn.SCROLL_TO_MESSAGE),yt.emit(sn.MESSAGE_SENT),this.removeFromDraft(),this.sendMessageAnalyticsData(e.private)}catch(s){const o=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.error)||this.$t("CONVERSATION.MESSAGE_ERROR");Te(o)}},async onSendWhatsAppReply(e){this.sendMessage({conversationId:this.currentChat.id,...e}),this.hideWhatsappTemplatesModal()},replaceText(e){this.sendWithSignature&&!this.private&&(e=mi(e,this.signatureToApply));const t=TN({message:e,variables:this.messageVariables});setTimeout(()=>{jt(ba.INSERTED_A_CANNED_RESPONSE),this.message=t},100)},setReplyMode(e=xs.REPLY){const{can_reply:t}=this.currentChat;if(this.$store.dispatch("draftMessages/setReplyEditorMode",{mode:e}),(t||this.isAWhatsAppChannel)&&(this.replyType=e),this.showRichContentEditor){this.isRecordingAudio&&this.toggleAudioRecorder();return}this.$nextTick(()=>this.$refs.messageInput.focus())},clearEditorSelection(){this.updateEditorSelectionWith=""},insertIntoTextEditor(e,t,n){const{message:s}=this,o=s.slice(0,t)+e+s.slice(n,s.length);this.message=o},addIntoEditor(e){if(this.showRichContentEditor&&(this.updateEditorSelectionWith=e,this.onFocus()),!this.showRichContentEditor){const{selectionStart:t,selectionEnd:n}=this.$refs.messageInput.$el;this.insertIntoTextEditor(e,t,n)}},clearMessage(){this.message="",this.sendWithSignature&&!this.isPrivate&&(this.message=mi(this.message,this.signatureToApply)),this.attachedFiles=[],this.isRecordingAudio=!1,this.resetReplyToMessage(),this.resetAudioRecorderInput()},clearEmailField(){this.ccEmails="",this.bccEmails="",this.toEmails=""},toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker},toggleAudioRecorder(){this.isRecordingAudio=!this.isRecordingAudio,this.isRecorderAudioStopped=!this.isRecordingAudio,this.isRecordingAudio||this.resetAudioRecorderInput()},toggleAudioRecorderPlayPause(){this.isRecordingAudio&&(this.isRecorderAudioStopped?this.isRecorderAudioStopped&&this.$refs.audioRecorderInput.playPause():(this.isRecorderAudioStopped=!0,this.$refs.audioRecorderInput.stopRecording()))},hideEmojiPicker(){this.showEmojiPicker&&this.toggleEmojiPicker()},hideMentions(){this.showMentions=!1},onTypingOn(){this.toggleTyping("on")},onTypingOff(){this.toggleTyping("off")},onBlur(){this.isFocused=!1,this.saveDraft(this.conversationIdByRoute,this.replyType)},onFocus(){this.isFocused=!0},onRecordProgressChanged(e){this.recordingAudioDurationText=e},onFinishRecorder(e){this.recordingAudioState="stopped",this.hasRecordedAudio=!0;const t={...e,isRecordedAudio:!0};return e&&this.onFileUpload(t)},toggleTyping(e){const t=this.currentChat.id,n=this.isPrivate;t&&this.$store.dispatch("conversationTypingStatus/toggleTyping",{status:e,conversationId:t,isPrivate:n})},attachFile({blob:e,file:t}){const n=new FileReader;n.readAsDataURL(t.file),n.onloadend=()=>{this.attachedFiles.push({currentChatId:this.currentChat.id,resource:e||t,isPrivate:this.isPrivate,thumb:n.result,blobSignedId:e?e.signed_id:void 0,isRecordedAudio:(t==null?void 0:t.isRecordedAudio)||!1})}},removeAttachment(e){this.attachedFiles=e},setReplyToInPayload(e){var t;return(t=this.inReplyTo)!=null&&t.id?{...e,contentAttributes:{...e.contentAttributes,in_reply_to:this.inReplyTo.id}}:e},getMultipleMessagesPayload(e){const t=[];if(this.attachedFiles&&this.attachedFiles.length){let s=this.isAInstagramChannel?"":e;this.attachedFiles.forEach(o=>{const a=this.globalConfig.directUploadsEnabled?o.blobSignedId:o.resource.file;let i={conversationId:this.currentChat.id,files:[a],private:!1,message:s,sender:this.sender};i=this.setReplyToInPayload(i),t.push(i),this.isAInstagramChannel||(s="")})}const n=!this.attachedFiles||!this.attachedFiles.length;if(this.isAInstagramChannel&&this.message||!this.isAInstagramChannel&&n){let s={conversationId:this.currentChat.id,message:e,private:!1,sender:this.sender};s=this.setReplyToInPayload(s),t.push(s)}return t},getMessagePayload(e){let t={conversationId:this.currentChat.id,message:e,private:this.isPrivate,sender:this.sender};return t=this.setReplyToInPayload(t),this.attachedFiles&&this.attachedFiles.length&&(t.files=[],this.attachedFiles.forEach(n=>{this.globalConfig.directUploadsEnabled?t.files.push(n.blobSignedId):t.files.push(n.resource.file)})),this.ccEmails&&!this.isOnPrivateNote&&(t.ccEmails=this.ccEmails),this.bccEmails&&!this.isOnPrivateNote&&(t.bccEmails=this.bccEmails),this.toEmails&&!this.isOnPrivateNote&&(t.toEmails=this.toEmails),t},setCcEmails(e){this.bccEmails=e.bccEmails,this.ccEmails=e.ccEmails},setCCAndToEmailsFromLastChat(){var i,l,r;const e=((r=(l=(i=this.currentChat)==null?void 0:i.meta)==null?void 0:l.sender)==null?void 0:r.email)||"",{email:t,forward_to_email:n}=this.inbox,{cc:s,bcc:o,to:a}=EN(this.lastEmail,e,t,n);this.toEmails=a.join(", "),this.ccEmails=s.join(", "),this.bccEmails=o.join(", ")},fetchAndSetReplyTo(){var n,s;const e=Pa.MESSAGE_REPLY_TO,t=Na.getFromJsonStore(e,this.conversationId);this.inReplyTo=(s=(n=this.currentChat)==null?void 0:n.messages)==null?void 0:s.find(o=>o.id===t)},resetReplyToMessage(){const e=Pa.MESSAGE_REPLY_TO;Na.deleteFromJsonStore(e,this.conversationId),yt.emit(sn.TOGGLE_REPLY_TO_MESSAGE)},onNewConversationModalActive(e){this.newConversationModalActive=e},onSearchPopoverClose(){this.showArticleSearchPopover=!1},toggleInsertArticle(){this.showArticleSearchPopover=!this.showArticleSearchPopover},resetAudioRecorderInput(){this.recordingAudioDurationText="00:00",this.isRecordingAudio=!1,this.recordingAudioState="",this.hasRecordedAudio=!1,this.attachedFiles=this.attachedFiles.filter(e=>!(e!=null&&e.isRecordedAudio))}}},CSe={class:"reply-box__top"};function NSe(e,t,n,s,o,a){const i=F("Banner"),l=F("ReplyTopPanel"),r=F("ArticleSearchPopover"),d=F("ReplyToMessage"),u=F("CannedResponse"),p=F("EmojiInput"),h=F("ReplyEmailHead"),g=F("AudioRecorder"),_=F("ResizableTextArea"),T=F("WootMessageEditor"),S=F("AttachmentPreview"),E=F("MessageSignatureMissingAlert"),y=F("ReplyBottomPanel"),A=F("WhatsappTemplates"),C=F("ScheduleMessageModal"),O=F("woot-confirm-modal"),N=ct("on-clickaway");return m(),f(pe,null,[a.showSelfAssignBanner?(m(),P(i,{key:0,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg banner--self-assign","banner-message":e.$t("CONVERSATION.NOT_ASSIGNED_TO_YOU"),"has-action-button":"","action-button-label":e.$t("CONVERSATION.ASSIGN_TO_ME"),onPrimaryAction:a.onClickSelfAssign},null,8,["banner-message","action-button-label","onPrimaryAction"])):x("",!0),c("div",{ref:"replyEditor",class:re(["reply-box",a.replyBoxClass])},[b(l,{mode:o.replyType,"is-message-length-reaching-threshold":a.isMessageLengthReachingThreshold,"characters-remaining":a.charactersRemaining,"popout-reply-box":s.popoutReplyBox,onSetReplyMode:a.setReplyMode,onTogglePopout:t[0]||(t[0]=R=>e.$emit("togglePopout"))},null,8,["mode","is-message-length-reaching-threshold","characters-remaining","popout-reply-box","onSetReplyMode"]),o.showArticleSearchPopover&&a.connectedPortalSlug?(m(),P(r,{key:0,"selected-portal-slug":a.connectedPortalSlug,onInsert:a.handleInsert,onClose:a.onSearchPopoverClose},null,8,["selected-portal-slug","onInsert","onClose"])):x("",!0),c("div",CSe,[a.shouldShowReplyToMessage?(m(),P(d,{key:0,message:o.inReplyTo,onDismiss:a.resetReplyToMessage},null,8,["message","onDismiss"])):x("",!0),o.showMentions&&o.hasSlashCommand?ie((m(),P(u,{key:1,class:"normal-editor__canned-box","search-key":o.mentionSearchKey,onReplace:a.replaceText},null,8,["search-key","onReplace"])),[[N,a.hideMentions]]):x("",!0),o.showEmojiPicker?ie((m(),P(p,{key:2,class:re(a.emojiDialogClassOnExpandedLayoutAndRTLView),"on-click":a.addIntoEditor},null,8,["class","on-click"])),[[N,a.hideEmojiPicker]]):x("",!0),a.showReplyHead?(m(),P(h,{key:3,"cc-emails":o.ccEmails,"onUpdate:ccEmails":t[1]||(t[1]=R=>o.ccEmails=R),"bcc-emails":o.bccEmails,"onUpdate:bccEmails":t[2]||(t[2]=R=>o.bccEmails=R),"to-emails":o.toEmails,"onUpdate:toEmails":t[3]||(t[3]=R=>o.toEmails=R)},null,8,["cc-emails","bcc-emails","to-emails"])):x("",!0),a.showAudioRecorderEditor?(m(),P(g,{key:4,ref:"audioRecorderInput","audio-record-format":a.audioRecordFormat,onRecorderProgressChanged:a.onRecordProgressChanged,onFinishRecord:a.onFinishRecorder,onPlay:t[4]||(t[4]=R=>o.recordingAudioState="playing"),onPause:t[5]||(t[5]=R=>o.recordingAudioState="paused")},null,8,["audio-record-format","onRecorderProgressChanged","onFinishRecord"])):a.showRichContentEditor?(m(),P(T,{key:6,modelValue:o.message,"onUpdate:modelValue":t[7]||(t[7]=R=>o.message=R),"editor-id":a.editorStateId,class:"input","is-private":a.isOnPrivateNote,placeholder:a.messagePlaceHolder,"update-selection-with":o.updateEditorSelectionWith,"min-height":4,"enable-variables":"",variables:a.messageVariables,signature:a.signatureToApply,"allow-signature":"","channel-type":e.channelType,onTypingOff:a.onTypingOff,onTypingOn:a.onTypingOn,onFocus:a.onFocus,onBlur:a.onBlur,onToggleUserMention:a.toggleUserMention,onToggleCannedMenu:a.toggleCannedMenu,onToggleVariablesMenu:a.toggleVariablesMenu,onClearSelection:a.clearEditorSelection},null,8,["modelValue","editor-id","is-private","placeholder","update-selection-with","variables","signature","channel-type","onTypingOff","onTypingOn","onFocus","onBlur","onToggleUserMention","onToggleCannedMenu","onToggleVariablesMenu","onClearSelection"])):(m(),P(_,{key:5,ref:"messageInput",modelValue:o.message,"onUpdate:modelValue":t[6]||(t[6]=R=>o.message=R),class:"rounded-none input",placeholder:a.messagePlaceHolder,"min-height":4,signature:a.signatureToApply,"allow-signature":"","send-with-signature":a.sendWithSignature,onTypingOff:a.onTypingOff,onTypingOn:a.onTypingOn,onFocus:a.onFocus,onBlur:a.onBlur},null,8,["modelValue","placeholder","signature","send-with-signature","onTypingOff","onTypingOn","onFocus","onBlur"]))]),a.hasAttachments&&!a.showAudioRecorderEditor?(m(),f("div",{key:1,class:"attachment-preview-box",onPaste:t[8]||(t[8]=(...R)=>a.onPaste&&a.onPaste(...R))},[b(S,{class:"flex-col mt-4",attachments:o.attachedFiles,onRemoveAttachment:a.removeAttachment},null,8,["attachments","onRemoveAttachment"])],32)):x("",!0),a.isSignatureEnabledForInbox&&!a.isSignatureAvailable?(m(),P(E,{key:2})):x("",!0),b(y,{"conversation-id":a.conversationId,"enable-multiple-file-upload":a.enableMultipleFileUpload,"has-whatsapp-templates":a.hasWhatsappTemplates,inbox:a.inbox,"is-on-private-note":a.isOnPrivateNote,"is-recording-audio":o.isRecordingAudio,"is-send-disabled":a.isReplyButtonDisabled,mode:o.replyType,"on-file-upload":e.onFileUpload,"on-send":a.onSendReply,"conversation-type":a.conversationType,"recording-audio-duration-text":o.recordingAudioDurationText,"recording-audio-state":o.recordingAudioState,"send-button-text":a.replyButtonLabel,"show-audio-recorder":a.showAudioRecorder,"show-editor-toggle":e.isAPIInbox&&!a.isOnPrivateNote,"show-emoji-picker":o.showEmojiPicker,"show-file-upload":a.showFileUpload,"toggle-audio-recorder-play-pause":a.toggleAudioRecorderPlayPause,"toggle-audio-recorder":a.toggleAudioRecorder,"toggle-emoji-picker":a.toggleEmojiPicker,message:o.message,"portal-slug":a.connectedPortalSlug,"new-conversation-modal-active":o.newConversationModalActive,onSelectWhatsappTemplate:a.openWhatsappTemplateModal,onToggleEditor:a.toggleRichContentEditor,onReplaceText:a.replaceText,onToggleInsertArticle:a.toggleInsertArticle,onOpenScheduleModal:a.toggleScheduleModal},null,8,["conversation-id","enable-multiple-file-upload","has-whatsapp-templates","inbox","is-on-private-note","is-recording-audio","is-send-disabled","mode","on-file-upload","on-send","conversation-type","recording-audio-duration-text","recording-audio-state","send-button-text","show-audio-recorder","show-editor-toggle","show-emoji-picker","show-file-upload","toggle-audio-recorder-play-pause","toggle-audio-recorder","toggle-emoji-picker","message","portal-slug","new-conversation-modal-active","onSelectWhatsappTemplate","onToggleEditor","onReplaceText","onToggleInsertArticle","onOpenScheduleModal"]),b(A,{"inbox-id":a.inbox.id,show:o.showWhatsAppTemplatesModal,onClose:a.hideWhatsappTemplatesModal,onOnSend:a.onSendWhatsAppReply,onCancel:a.hideWhatsappTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),o.showScheduleMessageModal?(m(),P(C,{key:3,"conversation-id":a.conversationId,"inbox-id":a.inbox.id,show:o.showScheduleMessageModal,onClose:a.toggleScheduleModal},null,8,["conversation-id","inbox-id","show","onClose"])):x("",!0),b(O,{ref:"confirmDialog",title:e.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.TITLE"),description:o.undefinedVariableMessage},null,8,["title","description"])],2)],64)}const OSe=Re(ISe,[["render",NSe],["__scopeId","data-v-68e4f870"]]),xSe={mixins:[Ro],props:{sender:{type:Object,default:()=>({})},createdAt:{type:Number,default:0},storySender:{type:String,default:""},externalError:{type:String,default:""},storyId:{type:String,default:""},isEmail:{type:Boolean,default:!0},isPrivate:{type:Boolean,default:!0},isATweet:{type:Boolean,default:!0},messageType:{type:Number,default:1},messageStatus:{type:String,default:""},sourceId:{type:String,default:""},inboxId:{type:[String,Number],default:0}},computed:{inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},isIncoming(){return Sa.INCOMING===this.messageType},isOutgoing(){return Sa.OUTGOING===this.messageType},isTemplate(){return Sa.TEMPLATE===this.messageType},isDelivered(){return zr.DELIVERED===this.messageStatus},isRead(){return zr.READ===this.messageStatus},isSent(){return zr.SENT===this.messageStatus},readableTime(){return Cc(this.createdAt,"LLL d, h:mm a")},screenName(){const{additional_attributes:e={}}=this.sender||{};return(e==null?void 0:e.screen_name)||""},linkToTweet(){if(!this.sourceId||!this.inbox.name)return"";const{screenName:e,sourceId:t}=this;return`https://twitter.com/${e||this.inbox.name}/status/${t}`},linkToStory(){if(!this.storyId||!this.storySender)return"";const{storySender:e,storyId:t}=this;return`https://www.instagram.com/stories/direct/${e}_${t}`},showStatusIndicators(){return!!((this.isOutgoing||this.isTemplate)&&!this.isPrivate)},showSentIndicator(){return this.showStatusIndicators?this.isAnEmailChannel?!!this.sourceId:this.isAWhatsAppChannel||this.isATwilioChannel||this.isAFacebookInbox||this.isASmsInbox||this.isATelegramChannel?this.sourceId&&this.isSent:!!this.isALineChannel:!1},showDeliveredIndicator(){return this.showStatusIndicators?this.isAWhatsAppChannel||this.isATwilioChannel||this.isASmsInbox||this.isAFacebookInbox?this.sourceId&&this.isDelivered:this.isAWebWidgetInbox||this.isAPIInbox?this.isSent:this.isALineChannel?this.isDelivered:!1:!1},showReadIndicator(){return this.showStatusIndicators?this.isAWhatsAppChannel||this.isATwilioChannel||this.isAFacebookInbox?this.sourceId&&this.isRead:this.isAWebWidgetInbox||this.isAPIInbox?this.isRead:!1:!1}}},wSe={class:"message-text--metadata"},RSe={key:0,class:"read-indicator-wrap"},$Se={key:1,class:"read-indicator-wrap"},MSe={key:2,class:"read-indicator-wrap"},kSe={key:3,class:"read-indicator-wrap"},LSe=["href"];function DSe(e,t,n,s,o,a){const i=F("fluent-icon"),l=ct("tooltip");return m(),f("div",wSe,[c("span",{class:re(["time",{"has-status-icon":a.showSentIndicator||a.showDeliveredIndicator||a.showReadIndicator}])},v(a.readableTime),3),n.externalError?(m(),f("span",RSe,[ie(b(i,{icon:"error-circle",class:"action--icon",size:"14"},null,512),[[l,n.externalError,void 0,{"top-start":!0}]])])):x("",!0),a.showReadIndicator?(m(),f("span",$Se,[ie(b(i,{icon:"checkmark-double",class:"action--icon read-tick read-indicator",size:"14"},null,512),[[l,e.$t("CHAT_LIST.MESSAGE_READ"),void 0,{"top-start":!0}]])])):a.showDeliveredIndicator?(m(),f("span",MSe,[ie(b(i,{icon:"checkmark-double",class:"action--icon read-tick",size:"14"},null,512),[[l,e.$t("CHAT_LIST.DELIVERED"),void 0,{"top-start":!0}]])])):a.showSentIndicator?(m(),f("span",kSe,[ie(b(i,{icon:"checkmark",class:"action--icon read-tick",size:"14"},null,512),[[l,e.$t("CHAT_LIST.SENT"),void 0,{"top-start":!0}]])])):x("",!0),n.isEmail?ie((m(),P(i,{key:4,icon:"mail",class:"action--icon",size:"16"},null,512)),[[l,e.$t("CHAT_LIST.RECEIVED_VIA_EMAIL"),void 0,{"top-start":!0}]]):x("",!0),n.isPrivate?ie((m(),P(i,{key:5,icon:"lock-closed",class:"action--icon lock--icon--private",size:"16",onMouseenter:t[0]||(t[0]=r=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=r=>e.isHovered=!1)},null,512)),[[l,e.$t("CONVERSATION.VISIBLE_TO_AGENTS"),void 0,{"top-start":!0}]]):x("",!0),n.isATweet&&(a.isOutgoing||a.isIncoming)&&a.linkToTweet?(m(),f("a",{key:6,href:a.linkToTweet,target:"_blank",rel:"noopener noreferrer nofollow"},[ie(b(i,{icon:"open",class:"cursor-pointer action--icon",size:"16"},null,512),[[l,e.$t("CHAT_LIST.VIEW_TWEET_IN_TWITTER"),void 0,{"top-start":!0}]])],8,LSe)):x("",!0)])}const PSe=Re(xSe,[["render",DSe],["__scopeId","data-v-705d330b"]]),BSe={components:{NextButton:he},props:{name:{type:String,default:""},phoneNumber:{type:String,default:""}},computed:{formattedPhoneNumber(){return this.phoneNumber.replace(/\s|-|[A-Za-z]/g,"")},rawPhoneNumber(){return this.phoneNumber.replace(/\D/g,"")}},methods:{async addContact(){try{let e=await this.filterContactByNumber(this.rawPhoneNumber);e||(e=await this.$store.dispatch("contacts/create",this.getContactObject()),Te(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))),this.openContactNewTab(e.id)}catch(e){e instanceof wc?e.data.includes("phone_number")&&Te(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e instanceof ar?Te(e.data):Te(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},getContactObject(){return{name:this.name,phone_number:`+${this.rawPhoneNumber}`}},async filterContactByNumber(e){const n={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[e],attribute_model:"standard",custom_attribute_type:""}]};return(await this.$store.dispatch("contacts/filter",{queryPayload:n,resetState:!1})).shift()},openContactNewTab(e){const n=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${e}`;window.open(n,"_blank")}}},FSe={class:"contact--group"},USe={class:"meta"},GSe={class:"overflow-hidden whitespace-nowrap text-ellipsis margin-bottom-0"},VSe={key:0,class:"link-wrap"};function HSe(e,t,n,s,o,a){const i=F("fluent-icon"),l=F("NextButton");return m(),f("div",FSe,[b(i,{icon:"call",class:"file--icon",size:"18"}),c("div",USe,[c("p",GSe,v(n.phoneNumber),1)]),a.formattedPhoneNumber?(m(),f("div",VSe,[b(l,{ghost:"",xs:"",label:e.$t("CONVERSATION.SAVE_CONTACT"),onClick:Ke(a.addContact,["prevent"])},null,8,["label","onClick"])])):x("",!0)])}const KSe=Re(BSe,[["render",HSe],["__scopeId","data-v-4b700ca4"]]),zSe={props:{url:{type:String,required:!0}},computed:{fileName(){return this.url?this.url.substring(this.url.lastIndexOf("/")+1)||this.$t("CONVERSATION.UNKNOWN_FILE_TYPE"):this.$t("CONVERSATION.UNKNOWN_FILE_TYPE")}},methods:{openLink(){const e=window.open(this.url,"_blank","noopener");e&&e.focus()}}},WSe={class:"file message-text__wrap"},jSe={class:"icon-wrap"},YSe={class:"meta"},XSe={class:"attachment-name text-slate-700 dark:text-slate-400"},qSe=["href"];function ZSe(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",WSe,[c("div",jSe,[b(i,{icon:"document",class:"file--icon",size:"32"})]),c("div",YSe,[c("h5",XSe,v(decodeURI(a.fileName)),1),c("a",{class:"download clear link button small",rel:"noreferrer noopener nofollow",target:"_blank",href:n.url},v(e.$t("CONVERSATION.DOWNLOAD")),9,qSe)])])}const QSe=Re(zSe,[["render",ZSe],["__scopeId","data-v-9e2ca52f"]]),JSe=e=>{const i="center center",l=U(1),r=U(i),d=U(0),u=w(()=>({transform:`rotate(${d.value}deg)`})),p=w(()=>({transform:`scale(${l.value})`,cursor:l.value<3?"zoom-in":"zoom-out",transformOrigin:`${r.value}`})),h=()=>{e.value&&(r.value=i)},g=O=>{if(!e.value)return;h();const N=O==="clockwise"?90:-90;d.value=(d.value+N)%360,l.value=1,h()},_=(O,N)=>{if(!e.value)return{x:50,y:50};const R=e.value.getBoundingClientRect(),{relativeX:k,relativeY:L}=IN(O,N,R),{rotatedX:D,rotatedY:$}=CN(k,L,d.value);return NN(D,$,R.width,R.height)},T=(O,N,R)=>{if(!e.value)return;const k=Math.max(1,Math.min(3,l.value+O));if(k!==l.value){if(N!=null&&R!=null&&l.value===1){const{x:L,y:D}=_(N,R);r.value=`${L}% ${D}%`}l.value=k}},S=O=>{if(!e.value)return;O.preventDefault();const N=l.value>=3?1:3,{x:R,y:k}=_(O.clientX,O.clientY);r.value=`${R}% ${k}%`,l.value=N},E=O=>{if(!e.value)return;O.preventDefault();const N=O.deltaY>0?-.2:.2;T(N,O.clientX,O.clientY)},y=Ko(O=>{if(!e.value||l.value!==1)return;const{x:N,y:R}=_(O.clientX,O.clientY);r.value=`${N}% ${R}%`},100,!1),A=Ko(()=>{e.value&&l.value===1&&(r.value=i)},110,!1);return{zoomScale:l,imgTransformOriginPoint:r,activeImageRotation:d,imageWrapperStyle:u,imageStyle:p,getZoomOrigin:_,resetTransformOrigin:h,onRotate:g,onZoom:T,onDoubleClickZoomImage:S,onWheelImageZoom:E,onMouseMove:y,onMouseLeave:A,resetZoomAndRotation:()=>{d.value=0,l.value=1,h()}}},e2e={key:0,class:"flex items-center min-w-[15rem] shrink-0"},t2e={class:"flex flex-col ml-2 rtl:ml-0 rtl:mr-2 overflow-hidden"},n2e={class:"text-base leading-5 m-0 font-medium"},s2e={class:"overflow-hidden text-n-slate-12 whitespace-nowrap text-ellipsis"},a2e={class:"text-xs text-n-slate-11 whitespace-nowrap text-ellipsis"},o2e={class:"flex-1 mx-2 px-2 truncate text-sm font-medium text-center text-n-slate-12"},i2e={class:"truncate"},l2e={class:"flex items-center gap-2 ml-2 shrink-0"},r2e={class:"flex items-stretch flex-1 h-full overflow-hidden"},c2e={class:"flex items-center justify-center w-16 shrink-0"},d2e={class:"flex-1 flex items-center justify-center overflow-hidden"},u2e=["src"],m2e=["src"],p2e=["src"],h2e={class:"flex items-center justify-center w-16 shrink-0"},f2e={class:"z-10 flex items-center justify-center h-12 border-t border-n-weak"},g2e={class:"rounded-md flex items-center justify-center px-3 py-1 bg-n-slate-3 text-n-slate-12 text-sm font-medium"},pr={__name:"GalleryView",props:On({attachment:{type:Object,required:!0},allAttachments:{type:Array,required:!0}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:On(["close"],["update:show"]),setup(e,{emit:t}){const n=e,s=t,o=Wn(e,"show"),{t:a}=He(),i=vn(),l={IMAGE:"image",VIDEO:"video",IG_REEL:"ig_reel",AUDIO:"audio"},r=U(!1),d=U({}),u=U(""),p=U(n.allAttachments.findIndex(X=>X.message_id===n.attachment.message_id)||0),h=Us("imageRef"),{imageWrapperStyle:g,imageStyle:_,onRotate:T,activeImageRotation:S,onZoom:E,onDoubleClickZoomImage:y,onWheelImageZoom:A,onMouseMove:C,onMouseLeave:O,resetZoomAndRotation:N}=JSe(h),R=w(()=>i.getCurrentUser.value),k=w(()=>n.allAttachments.length>1),L=w(()=>{const{created_at:X}=d.value;return X&&Cc(X,"LLL d yyyy, h:mm a")||""}),D=w(()=>u.value===l.IMAGE),$=w(()=>[l.VIDEO,l.IG_REEL].includes(u.value)),M=w(()=>u.value===l.AUDIO),K=w(()=>{var ne,ae,ue;const{name:X,available_name:z,avatar_url:W,thumbnail:q,id:Z}=((ne=d.value)==null?void 0:ne.sender)||((ae=n.attachment)==null?void 0:ae.sender)||{};return{name:((ue=R.value)==null?void 0:ue.id)===Z?"You":X||z||"",avatar:q||W||""}}),B=w(()=>{const{data_url:X}=d.value;if(!X)return"";const z=X.split("/").pop();return z?decodeURIComponent(z):""}),H=()=>s("close"),G=X=>{const{file_type:z}=X;Object.values(l).includes(z)&&(d.value=X,u.value=z)},V=(X,z)=>{X&&(p.value=z,G(X),N())},Y=async()=>{const{file_type:X,data_url:z,extension:W}=d.value;if(Object.values(l).includes(X))try{r.value=!0,await jf({url:z,type:X,extension:W})}catch{Te(a("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{r.value=!1}};return Vs({Escape:{action:H},ArrowLeft:{action:()=>{V(n.allAttachments[p.value-1],p.value-1)}},ArrowRight:{action:()=>{V(n.allAttachments[p.value+1],p.value+1)}}}),ut(()=>{G(n.attachment)}),(X,z)=>{const W=F("woot-modal"),q=ct("dompurify-html");return m(),P(Si,{to:"body"},[b(W,{show:o.value,"onUpdate:show":z[14]||(z[14]=Z=>o.value=Z),"full-width":"","show-close-button":!1,"on-close":H},{default:j(()=>[c("div",{class:"bg-n-background flex flex-col h-[inherit] w-[inherit] overflow-hidden select-none",onClick:H},[c("header",{class:"z-10 flex items-center justify-between w-full h-16 px-6 py-2 bg-n-background border-b border-n-weak",onClick:z[4]||(z[4]=Ke(()=>{},["stop"]))},[K.value?(m(),f("div",e2e,[K.value.avatar?(m(),P(Qn,{key:0,username:K.value.name,src:K.value.avatar,class:"flex-shrink-0"},null,8,["username","src"])):x("",!0),c("div",t2e,[c("h3",n2e,[c("span",s2e,v(K.value.name),1)]),c("span",a2e,v(L.value),1)])])):x("",!0),c("div",o2e,[ie(c("span",i2e,null,512),[[q,B.value]])]),c("div",l2e,[D.value?(m(),P(he,{key:0,icon:"i-lucide-zoom-in",slate:"",ghost:"",onClick:z[0]||(z[0]=Z=>I(E)(.1))})):x("",!0),D.value?(m(),P(he,{key:1,icon:"i-lucide-zoom-out",slate:"",ghost:"",onClick:z[1]||(z[1]=Z=>I(E)(-.1))})):x("",!0),D.value?(m(),P(he,{key:2,icon:"i-lucide-rotate-ccw",slate:"",ghost:"",onClick:z[2]||(z[2]=Z=>I(T)("counter-clockwise"))})):x("",!0),D.value?(m(),P(he,{key:3,icon:"i-lucide-rotate-cw",slate:"",ghost:"",onClick:z[3]||(z[3]=Z=>I(T)("clockwise"))})):x("",!0),b(he,{icon:"i-lucide-download",slate:"",ghost:"","is-loading":r.value,disabled:r.value,onClick:Y},null,8,["is-loading","disabled"]),b(he,{icon:"i-lucide-x",slate:"",ghost:"",onClick:H})])]),c("main",r2e,[c("div",c2e,[k.value?(m(),P(he,{key:0,icon:"i-lucide-chevron-left",class:"z-10",blue:"",faded:"",lg:"",disabled:p.value===0,onClick:z[5]||(z[5]=Ke(Z=>V(e.allAttachments[p.value-1],p.value-1),["stop"]))},null,8,["disabled"])):x("",!0)]),c("div",d2e,[D.value?(m(),f("div",{key:0,style:At(I(g)),class:re(["flex items-center justify-center origin-center",{"w-[calc(100dvh-8rem)] h-[calc(100dvw-7rem)]":I(S)%180!==0,"size-full":I(S)%180===0}])},[(m(),f("img",{ref_key:"imageRef",ref:h,key:d.value.message_id,src:d.value.data_url,style:At(I(_)),class:"max-h-full max-w-full object-contain duration-100 ease-in-out transform select-none",onClick:z[6]||(z[6]=Ke(()=>{},["stop"])),onDblclick:z[7]||(z[7]=Ke((...Z)=>I(y)&&I(y)(...Z),["stop"])),onWheel:z[8]||(z[8]=Ke((...Z)=>I(A)&&I(A)(...Z),["prevent","stop"])),onMousemove:z[9]||(z[9]=(...Z)=>I(C)&&I(C)(...Z)),onMouseleave:z[10]||(z[10]=(...Z)=>I(O)&&I(O)(...Z))},null,44,u2e))],6)):x("",!0),$.value?(m(),f("video",{key:d.value.message_id,src:d.value.data_url,controls:"",playsInline:"",class:"max-h-full max-w-full object-contain",onClick:z[11]||(z[11]=Ke(()=>{},["stop"]))},null,8,m2e)):x("",!0),M.value?(m(),f("audio",{key:d.value.message_id,controls:"",class:"w-full max-w-md",onClick:z[12]||(z[12]=Ke(()=>{},["stop"]))},[c("source",{src:`${d.value.data_url}?t=${Date.now()}`},null,8,p2e)])):x("",!0)]),c("div",h2e,[k.value?(m(),P(he,{key:0,icon:"i-lucide-chevron-right",class:"z-10",blue:"",faded:"",lg:"",disabled:p.value===e.allAttachments.length-1,onClick:z[13]||(z[13]=Ke(Z=>V(e.allAttachments[p.value+1],p.value+1),["stop"]))},null,8,["disabled"])):x("",!0)])]),c("footer",f2e,[c("div",g2e,v(`${p.value+1} / ${e.allAttachments.length}`),1)])])]),_:1},8,["show"])])}}},$d={IMAGE:"image",VIDEO:"video",AUDIO:"audio",IG_REEL:"ig_reel"},_2e={components:{GalleryView:pr},props:{attachment:{type:Object,required:!0}},emits:["error"],data(){return{show:!1,isImageError:!1}},computed:{...gt({currentChatAttachments:"getSelectedChatAttachments"}),isImage(){return this.attachment.file_type===$d.IMAGE},isVideo(){return this.attachment.file_type===$d.VIDEO||this.attachment.file_type===$d.IG_REEL},isAudio(){return this.attachment.file_type===$d.AUDIO},timeStampURL(){return GE(this.dataUrl)},attachmentTypeClasses(){return{image:this.isImage,video:this.isVideo}},filteredCurrentChatAttachments(){return this.currentChatAttachments.filter(t=>["image","video","audio"].includes(t.file_type))},dataUrl(){return this.attachment.data_url},imageWidth(){return this.attachment.width?`${this.attachment.width}px`:"auto"},imageHeight(){return this.attachment.height?`${this.attachment.height}px`:"auto"}},watch:{attachment(){this.isImageError=!1}},methods:{onClose(){this.show=!1},onClick(e){if(pN(e)){window.open(this.attachment.data_url,"_blank");return}this.show=!0},onImgError(){this.isImageError=!0,this.$emit("error")}}},v2e=["src","width","height"],b2e=["src"],E2e={key:2,controls:"",class:"skip-context-menu mb-0.5"},T2e=["src"];function y2e(e,t,n,s,o,a){const i=F("GalleryView");return m(),f("div",{class:re(["message-text__wrap",a.attachmentTypeClasses])},[a.isImage&&!o.isImageError?(m(),f("img",{key:0,class:"bg-woot-200 dark:bg-woot-900",src:a.dataUrl,width:a.imageWidth,height:a.imageHeight,onClick:t[0]||(t[0]=(...l)=>a.onClick&&a.onClick(...l)),onError:t[1]||(t[1]=(...l)=>a.onImgError&&a.onImgError(...l))},null,40,v2e)):x("",!0),a.isVideo?(m(),f("video",{key:1,src:a.dataUrl,muted:"",playsInline:"",onError:t[2]||(t[2]=(...l)=>a.onImgError&&a.onImgError(...l)),onClick:t[3]||(t[3]=(...l)=>a.onClick&&a.onClick(...l))},null,40,b2e)):a.isAudio?(m(),f("audio",E2e,[c("source",{src:a.timeStampURL},null,8,T2e)])):x("",!0),o.show?(m(),P(i,{key:3,show:o.show,"onUpdate:show":t[4]||(t[4]=l=>o.show=l),attachment:n.attachment,"all-attachments":a.filteredCurrentChatAttachments,onError:a.onImgError,onClose:a.onClose},null,8,["show","attachment","all-attachments","onError","onClose"])):x("",!0)],2)}const A2e=Re(_2e,[["render",y2e]]),S2e={components:{NextButton:he},props:{messageId:{type:Number,required:!0}},data(){return{isLoading:!1,dyteAuthToken:"",isSDKMounted:!1}},computed:{meetingLink(){return ME(this.dyteAuthToken)}},methods:{async joinTheCall(){this.isLoading=!0;try{const{data:{token:e}={}}=await y_.addParticipantToMeeting(this.messageId);this.dyteAuthToken=e}catch{Te(this.$t("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{this.isLoading=!1}},leaveTheRoom(){this.dyteAuthToken=""}}},I2e={key:0,class:"video-call--container"},C2e=["src"];function N2e(e,t,n,s,o,a){const i=F("NextButton");return m(),f("div",null,[b(i,{blue:"",sm:"",icon:"i-lucide-video",label:e.$t("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),"is-loading":o.isLoading,onClick:a.joinTheCall},null,8,["label","is-loading","onClick"]),o.dyteAuthToken?(m(),f("div",I2e,[c("iframe",{src:a.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,C2e),b(i,{sm:"",class:"mt-2",label:e.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM"),onClick:a.leaveTheRoom},null,8,["label","onClick"])])):x("",!0)])}const O2e=Re(S2e,[["render",N2e]]),x2e={components:{DyteVideoCall:O2e},mixins:[Ro],props:{messageId:{type:[String,Number],default:0},contentAttributes:{type:Object,default:()=>({})},inboxId:{type:[String,Number],default:0}},computed:{showDyteIntegration(){return(this.isAPIInbox||this.isAWebWidgetInbox)&&this.contentAttributes.type==="dyte"},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)}}};function w2e(e,t,n,s,o,a){const i=F("DyteVideoCall");return a.showDyteIntegration?(m(),P(i,{key:0,"message-id":n.messageId,"meeting-data":n.contentAttributes.data},null,8,["message-id","meeting-data"])):x("",!0)}const R2e=Re(x2e,[["render",w2e]]),$2e={class:"flex flex-row items-center justify-start gap-1 w-full py-1 px-0 cursor-pointer overflow-hidden"},M2e={class:"flex flex-col items-start flex-1 min-w-0"},k2e=["title"],L2e={class:"flex items-center"},D2e=["href"],P2e={__name:"Location",props:{latitude:{type:Number,default:void 0},longitude:{type:Number,default:void 0},name:{type:String,default:""}},setup(e){const t=e,n=w(()=>`https://maps.google.com/?q=${t.latitude},${t.longitude}`);return(s,o)=>{const a=F("fluent-icon");return m(),f("div",$2e,[b(a,{icon:"location",class:"text-slate-600 dark:text-slate-200 leading-none my-0 flex items-center flex-shrink-0",size:"32"}),c("div",M2e,[c("h5",{class:"text-sm text-slate-800 dark:text-slate-100 truncate m-0 w-full",title:e.name},v(e.name),9,k2e),c("div",L2e,[c("a",{class:"text-woot-600 dark:text-woot-600 text-xs underline",rel:"noreferrer noopener nofollow",target:"_blank",href:n.value},v(s.$t("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP")),9,D2e)])])])}}},B2e={props:{emailAttributes:{type:Object,default:()=>({})},isIncoming:{type:Boolean,default:!0},cc:{type:Array,default:()=>[]},bcc:{type:Array,default:()=>[]}},computed:{fromMail(){return(this.emailAttributes.from||[]).join(", ")},toMails(){return(this.emailAttributes.to||[]).join(", ")},ccMails(){return(this.emailAttributes.cc||this.cc||[]).join(", ")},bccMails(){return(this.emailAttributes.bcc||this.bcc||[]).join(", ")},subject(){return this.emailAttributes.subject||""},showHead(){return this.toMails||this.ccMails||this.bccMails||this.fromMail}}},F2e={key:0,class:"meta-wrap"},U2e={class:"message__content--type"},G2e={key:1,class:"meta-wrap"},V2e={class:"message__content--type"},H2e={key:2,class:"meta-wrap"},K2e={class:"message__content--type"},z2e={key:3,class:"meta-wrap"},W2e={class:"message__content--type"},j2e={key:4,class:"meta-wrap"},Y2e={class:"message__content--type"};function X2e(e,t,n,s,o,a){return a.showHead?(m(),f("div",{key:0,class:re(["message__mail-head",{"is-incoming":n.isIncoming}])},[a.fromMail?(m(),f("div",F2e,[c("span",U2e,v(e.$t("EMAIL_HEADER.FROM"))+":",1),c("span",null,v(a.fromMail),1)])):x("",!0),a.toMails?(m(),f("div",G2e,[c("span",V2e,v(e.$t("EMAIL_HEADER.TO"))+":",1),c("span",null,v(a.toMails),1)])):x("",!0),a.ccMails?(m(),f("div",H2e,[c("span",K2e,v(e.$t("EMAIL_HEADER.CC"))+":",1),c("span",null,v(a.ccMails),1)])):x("",!0),a.bccMails?(m(),f("div",z2e,[c("span",W2e,v(e.$t("EMAIL_HEADER.BCC"))+":",1),c("span",null,v(a.bccMails),1)])):x("",!0),a.subject?(m(),f("div",j2e,[c("span",Y2e,v(e.$t("EMAIL_HEADER.SUBJECT"))+": ",1),c("span",null,v(a.subject),1)])):x("",!0)],2)):x("",!0)}const q2e=Re(B2e,[["render",X2e],["__scopeId","data-v-51e2a9d6"]]),Z2e={name:"ReplyTo",components:{MessagePreview:v_},props:{message:{type:Object,required:!0},messageType:{type:Number,required:!0},parentHasAttachments:{type:Boolean,required:!0}},data(){return{MESSAGE_TYPE:Sa}},methods:{scrollToMessage(){yt.emit(sn.SCROLL_TO_MESSAGE,{messageId:this.message.id})}}};function Q2e(e,t,n,s,o,a){const i=F("MessagePreview");return m(),f("div",{class:re(["px-2 py-1.5 rounded-sm min-w-[10rem] mb-2",{"bg-slate-50 dark:bg-slate-600 dark:text-slate-50":n.messageType===o.MESSAGE_TYPE.INCOMING,"bg-woot-600 text-woot-50":n.messageType===o.MESSAGE_TYPE.OUTGOING,"-mx-2":!n.parentHasAttachments}]),onClick:t[0]||(t[0]=(...l)=>a.scrollToMessage&&a.scrollToMessage(...l))},[b(i,{class:"cursor-pointer",message:n.message,"show-message-type":!1,"default-empty-message":e.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")},null,8,["message","default-empty-message"])],2)}const J2e=Re(Z2e,[["render",Q2e]]),eE={a:["class","href","id","style","target"],address:["class","id","style"],b:["class","id","style"],blockquote:["class","id","style"],br:["class","id","style"],caption:["class","id","style"],cite:["class","id","style"],code:["class","id","style"],col:["align","bgcolor","char","charoff","class","id","style","valign","width"],colgroup:["align","bgcolor","char","charoff","class","id","style","valign","width"],center:["class","id","style"],dd:["class","id","style"],div:["align","class","dir","id","style"],dt:["class","id","style"],em:["class","id","style"],font:["class","color","face","id","size","style"],h1:["align","class","dir","id","style"],h2:["align","class","dir","id","style"],h3:["align","class","dir","id","style"],h4:["align","class","dir","id","style"],h5:["align","class","dir","id","style"],h6:["align","class","dir","id","style"],hr:["align","size","width"],i:["class","id","style"],img:["align","alt","border","class","height","hspace","id","src","style","title","usemap","vspace","width"],label:["class","id","style"],legend:["class","id","style"],li:["class","dir","id","style","type"],ol:["class","dir","id","style","type","start","reversed"],p:["align","class","dir","id","style"],pre:["class","id","style"],span:["class","id","style"],strong:["class","id","style"],style:[],sub:["class","id","style"],sup:["class","id","style"],table:["align","bgcolor","border","cellpadding","cellspacing","class","dir","frame","id","rules","style","width"],tbody:["class","id","style"],td:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],tfoot:["align","bgcolor","char","charoff","class","id","style","valign"],th:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],thead:["align","bgcolol","char","charoff","class","id","style","valign"],tr:["align","bgcolor","char","charoff","class","dir","id","style","valign"],u:["class","id","style"],ul:["class","dir","id","style"]},eIe=["script","iframe","textarea","title","noscript","noembed","svg"],tIe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"];function nIe(e,t){return t?e.split(",").map(n=>n.trim()).map(n=>{const s=n.replace(/\./g,"."+t+"_").replace(/#/g,"#"+t+"_");return s.toLowerCase().startsWith("body")?"#"+t+" "+s.substring(4):"#"+t+" "+s}).join(","):e}function sIe(e,t,n){return e.trim().replace(/expression\((.*?)\)/g,"").replace(/url\(["']?(.*?)["']?\)/g,(s,o)=>n?`url("${encodeURI(n(decodeURI(o)))}")`:t.includes(o.toLowerCase().split(":")[0])?s:"")}function a2(e,t,n,s,o){if(!e)return;const a=[];for(let i=0;i<e.length;i++){const l=e[i];a.push(l)}for(const i of a)if(n.includes(i)){const l=e.getPropertyValue(i);e.setProperty(i,sIe(l,t,o),s?e.getPropertyPriority(i):void 0)}else e.removeProperty(i)}function tE(e,t,n,s,o,a){e.selectorText=nIe(e.selectorText,t),a2(e.style,n,s,o,a)}const nE=["http","https","mailto"];function aIe(e,{dropAllHtmlTags:t=!1,rewriteExternalLinks:n,rewriteExternalResources:s,id:o="msg_"+String.fromCharCode(...new Array(24).fill(void 0).map(()=>Math.random()*25%25+65)),allowedSchemas:a=nE,allowedCssProperties:i=tIe,preserveCssPriority:l=!0,noWrapper:r=!1}){var d,u,p,h,g;r&&(o="");const _=new DOMParser().parseFromString(e,"text/html");a=Array.isArray(a)?a.map(C=>C.toLowerCase()):nE;const T=_.createNodeIterator(_.documentElement,NodeFilter.SHOW_COMMENT);let S;for(;S=T.nextNode();)(d=S.parentNode)==null||d.removeChild(S);const E=[...eIe];t&&E.push("style"),_.querySelectorAll(E.join(", ")).forEach(C=>C.remove()),_.querySelectorAll("head > style").forEach(C=>{_.body.appendChild(C)});const y=[],A=_.createNodeIterator(_.body,NodeFilter.SHOW_ELEMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});for(;S=A.nextNode();){const C=S,O=C.tagName.toLowerCase();if(!(O==="body"||O==="html")){if(t){if(S.textContent){const N=_.createTextNode(S.textContent);(u=S.parentNode)==null||u.replaceChild(N,S)}else(p=S.parentNode)==null||p.removeChild(S);continue}if(O in eE){const N=eE[O];for(const R of C.getAttributeNames())if(!N.includes(R))C.removeAttribute(R);else if(R==="class"&&!r)C.setAttribute(R,((h=C.getAttribute(R))==null?void 0:h.split(" ").map(k=>o+"_"+k).join(" "))??"");else if(R==="id"&&!r)C.setAttribute(R,o+"_"+(C.getAttribute(R)??""));else if(R==="href"||R==="src"){const k=C.getAttribute(R)??"";R==="href"&&n?C.setAttribute(R,n(k)):R==="src"&&s?C.setAttribute(R,s(k)):a.includes(k.toLowerCase().split(":")[0])||C.removeAttribute(R)}a2(C.style,a,i,l,s),O==="a"&&(C.setAttribute("rel","noopener noreferrer"),C.setAttribute("target","_blank"))}else C.insertAdjacentHTML("afterend",C.innerHTML),y.push(C)}}for(const C of y)try{try{(g=C.parentNode)==null||g.removeChild(C)}catch{C.outerHTML=""}}catch{try{C.remove()}catch{}}if(_.querySelectorAll("body style").forEach(C=>{const O=C,N=O.sheet,R=[];if(!N.cssRules){O.textContent="";return}for(let k=0;k<N.cssRules.length;k++){const L=N.cssRules[k];if("selectorText"in L)tE(L,o,a,i,l,s),R.push(L);else if("cssRules"in L&&"media"in L){const D=L,$=[];for(let M=0;M<D.cssRules.length;M++){const K=D.cssRules[M];K.type===K.STYLE_RULE&&(tE(K,o,a,i,l,s),$.push(K))}for(;D.cssRules.length>0;)D.deleteRule(0);for(const M of $)D.insertRule(M.cssText,D.cssRules.length);R.push(D)}}O.textContent=R.map(k=>k.cssText).join(`
`)}),r)return _.body.innerHTML;{const C=_.createElement("div");return C.id=o,C.innerHTML=_.body.innerHTML,C.outerHTML}}function oIe(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function iIe(e,t,n){let s=e??"";return(s==null?void 0:s.length)===0&&t&&(s=oIe(t).split(`
`).map(o=>"<p>"+o+"</p>").join(`
`)),aIe(s,n??{})}const lIe=["innerHTML"],rIe=["title"],xf=No({__name:"Letter",props:{className:{},html:{},text:{},useIframe:{type:Boolean},iframeTitle:{},rewriteExternalLinks:{},rewriteExternalResources:{},allowedCssProperties:{},allowedSchemas:{},preserveCssPriority:{type:Boolean}},setup(e){const t=e,{className:n,html:s,text:o,useIframe:a,iframeTitle:i,rewriteExternalLinks:l,rewriteExternalResources:r,allowedSchemas:d,allowedCssProperties:u,preserveCssPriority:p}=ks(t),h=iIe(s,o,{rewriteExternalResources:r,rewriteExternalLinks:l,allowedSchemas:d,preserveCssPriority:p,allowedCssProperties:u}),g="data:text/html;charset=utf-8,"+encodeURIComponent(h);return(_,T)=>I(a)?I(a)?(m(),f("div",{key:1,class:re([I(n)])},[c("iframe",{src:g,title:I(i)},null,8,rIe)],2)):x("",!0):(m(),f("div",{key:0,class:re([I(n)]),innerHTML:I(h)},null,10,lIe))}}),cIe={components:{Letter:xf,GalleryView:pr},props:{message:{type:String,default:""},isEmail:{type:Boolean,default:!0},displayQuotedButton:{type:Boolean,default:!1}},data(){return{showQuotedContent:!1,showGalleryViewer:!1,attachment:{},availableAttachments:[]}},computed:{isQuotedContentPresent(){return this.isEmail?this.showQuotedContent:this.message.includes("<blockquote")},showQuoteToggle(){return this.isEmail?this.displayQuotedButton:!1}},methods:{toggleQuotedContent(){this.showQuotedContent=!this.showQuotedContent},handleClickOnContent(e){const t=e.target.tagName==="IMG",n=e.target.closest("A");t&&!n&&this.openImagePreview(e.target.src)},openImagePreview(e){this.showGalleryViewer=!0,this.attachment={file_type:"image",data_url:e,message_id:Math.floor(Math.random()*100)},this.availableAttachments=[{...this.attachment}]},onClose(){this.showGalleryViewer=!1,this.resetAttachmentData()},resetAttachmentData(){this.attachment={},this.availableAttachments=[]}}},dIe={key:0,class:"text-content"},uIe={key:0,class:"flex items-center gap-0.5"},mIe={key:1,class:"flex items-center gap-0.5"};function pIe(e,t,n,s,o,a){const i=F("Letter"),l=F("fluent-icon"),r=F("GalleryView"),d=ct("dompurify-html");return m(),f("div",{class:re(["message-text__wrap",{"show--quoted":a.isQuotedContentPresent,"hide--quoted":!a.isQuotedContentPresent}])},[n.isEmail?(m(),f("div",{key:1,onClick:t[0]||(t[0]=(...u)=>a.handleClickOnContent&&a.handleClickOnContent(...u))},[b(i,{class:"text-content bg-white dark:bg-white text-slate-900 dark:text-slate-900 p-2 rounded-[4px]",html:n.message},null,8,["html"])])):ie((m(),f("div",dIe,null,512)),[[d,n.message]]),a.showQuoteToggle?(m(),f("button",{key:2,class:"py-1 text-xs cursor-pointer text-slate-300 dark:text-slate-300",onClick:t[1]||(t[1]=(...u)=>a.toggleQuotedContent&&a.toggleQuotedContent(...u))},[o.showQuotedContent?(m(),f("span",uIe,[b(l,{icon:"chevron-up",size:"16"}),be(" "+v(e.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)])):(m(),f("span",mIe,[b(l,{icon:"chevron-down",size:"16"}),be(" "+v(e.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)]))])):x("",!0),o.showGalleryViewer?(m(),P(r,{key:3,show:o.showGalleryViewer,"onUpdate:show":t[2]||(t[2]=u=>o.showGalleryViewer=u),attachment:o.attachment,"all-attachments":o.availableAttachments,onError:a.onClose,onClose:a.onClose},null,8,["show","attachment","all-attachments","onError","onClose"])):x("",!0)],2)}const hIe=Re(cIe,[["render",pIe]]),fIe={components:{AddCannedModal:Fy,MenuItem:CS,ContextMenu:ym,NextButton:he},props:{message:{type:Object,required:!0},isOpen:{type:Boolean,default:!1},enabledOptions:{type:Object,default:()=>({})},contextMenuPosition:{type:Object,default:()=>({})},hideButton:{type:Boolean,default:!1}},emits:["open","close","replyTo"],setup(){const{getPlainText:e}=oo();return{getPlainText:e}},data(){return{isCannedResponseModalOpen:!1,showDeleteModal:!1}},computed:{...gt({getAccount:"accounts/getAccount",currentAccountId:"getCurrentAccountId"}),plainTextContent(){return this.getPlainText(this.messageContent)},conversationId(){return this.message.conversation_id??this.message.conversationId},messageId(){return this.message.id},messageContent(){return this.message.content},contentAttributes(){return $s(this.message.content_attributes??this.message.contentAttributes)}},methods:{async copyLinkToMessage(){const e=window.chatwootConfig.hostURL+Pt(Jf({id:this.conversationId,accountId:this.currentAccountId}));await dl(`${e}?messageId=${this.messageId}`),Te(this.$t("CONVERSATION.CONTEXT_MENU.LINK_COPIED")),this.handleClose()},async handleCopy(){await dl(this.plainTextContent),Te(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL")),this.handleClose()},showCannedResponseModal(){jt(rl.ADDED_TO_CANNED_RESPONSE),this.isCannedResponseModalOpen=!0},hideCannedResponseModal(){this.isCannedResponseModalOpen=!1,this.handleClose()},handleOpen(e){this.$emit("open",e)},handleClose(e){this.$emit("close",e)},handleTranslate(){const{locale:e}=this.getAccount(this.currentAccountId);this.$store.dispatch("translateMessage",{conversationId:this.conversationId,messageId:this.messageId,targetLanguage:e||"en"}),jt(ba.TRANSLATE_A_MESSAGE),this.handleClose()},handleReplyTo(){this.$emit("replyTo",this.message),this.handleClose()},openDeleteModal(){this.handleClose(),this.showDeleteModal=!0},async confirmDeletion(){try{await this.$store.dispatch("deleteMessage",{conversationId:this.conversationId,messageId:this.messageId}),Te(this.$t("CONVERSATION.SUCCESS_DELETE_MESSAGE")),this.handleClose()}catch{Te(this.$t("CONVERSATION.FAIL_DELETE_MESSSAGE"))}},closeDeleteModal(){this.showDeleteModal=!1}}},gIe={class:"context-menu"},_Ie={class:"menu-container"},vIe={key:4};function bIe(e,t,n,s,o,a){const i=F("AddCannedModal"),l=F("woot-modal"),r=F("woot-delete-modal"),d=F("NextButton"),u=F("MenuItem"),p=F("ContextMenu");return m(),f("div",gIe,[o.isCannedResponseModalOpen&&n.enabledOptions.cannedResponse?(m(),P(l,{key:0,show:o.isCannedResponseModalOpen,"onUpdate:show":t[0]||(t[0]=h=>o.isCannedResponseModalOpen=h),"on-close":a.hideCannedResponseModal},{default:j(()=>[b(i,{"response-content":a.plainTextContent,"on-close":a.hideCannedResponseModal},null,8,["response-content","on-close"])]),_:1},8,["show","on-close"])):x("",!0),o.showDeleteModal?(m(),P(r,{key:1,show:o.showDeleteModal,"onUpdate:show":t[1]||(t[1]=h=>o.showDeleteModal=h),class:"context-menu--delete-modal","on-close":a.closeDeleteModal,"on-confirm":a.confirmDeletion,title:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.TITLE"),message:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.MESSAGE"),"confirm-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.DELETE"),"reject-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.CANCEL")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])):x("",!0),n.hideButton?x("",!0):(m(),P(d,{key:2,ghost:"",slate:"",sm:"",icon:"i-lucide-ellipsis-vertical",class:"invisible group-hover/context-menu:visible",onClick:a.handleOpen},null,8,["onClick"])),n.isOpen&&!o.isCannedResponseModalOpen?(m(),P(p,{key:3,x:n.contextMenuPosition.x,y:n.contextMenuPosition.y,onClose:a.handleClose},{default:j(()=>[c("div",_Ie,[n.enabledOptions.replyTo?(m(),P(u,{key:0,option:{icon:"arrow-reply",label:e.$t("CONVERSATION.CONTEXT_MENU.REPLY_TO")},variant:"icon",onClick:Ke(a.handleReplyTo,["stop"])},null,8,["option","onClick"])):x("",!0),n.enabledOptions.copy?(m(),P(u,{key:1,option:{icon:"clipboard",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY")},variant:"icon",onClick:Ke(a.handleCopy,["stop"])},null,8,["option","onClick"])):x("",!0),n.enabledOptions.copy?(m(),P(u,{key:2,option:{icon:"translate",label:e.$t("CONVERSATION.CONTEXT_MENU.TRANSLATE")},variant:"icon",onClick:Ke(a.handleTranslate,["stop"])},null,8,["option","onClick"])):x("",!0),t[2]||(t[2]=c("hr",null,null,-1)),b(u,{option:{icon:"link",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY_PERMALINK")},variant:"icon",onClick:Ke(a.copyLinkToMessage,["stop"])},null,8,["option","onClick"]),n.enabledOptions.cannedResponse?(m(),P(u,{key:3,option:{icon:"comment-add",label:e.$t("CONVERSATION.CONTEXT_MENU.CREATE_A_CANNED_RESPONSE")},variant:"icon",onClick:Ke(a.showCannedResponseModal,["stop"])},null,8,["option","onClick"])):x("",!0),n.enabledOptions.delete?(m(),f("hr",vIe)):x("",!0),n.enabledOptions.delete?(m(),P(u,{key:5,option:{icon:"delete",label:e.$t("CONVERSATION.CONTEXT_MENU.DELETE")},variant:"icon",onClick:Ke(a.openDeleteModal,["stop"])},null,8,["option","onClick"])):x("",!0)])]),_:1},8,["x","y","onClose"])):x("",!0)])}const o2=Re(fIe,[["render",bIe],["__scopeId","data-v-0118805b"]]),EIe={components:{},props:{url:{type:String,required:!0}},emits:["error"],data(){return{show:!1}},methods:{onClose(){this.show=!1},onClick(){this.show=!0}}},TIe={class:"image message-text__wrap"},yIe=["src"],AIe=["src"];function SIe(e,t,n,s,o,a){const i=F("woot-modal");return m(),f("div",TIe,[c("img",{src:n.url,onClick:t[0]||(t[0]=(...l)=>a.onClick&&a.onClick(...l)),onError:t[1]||(t[1]=l=>e.$emit("error"))},null,40,yIe),b(i,{show:o.show,"onUpdate:show":t[2]||(t[2]=l=>o.show=l),"full-width":"","on-close":a.onClose},{default:j(()=>[c("img",{src:n.url,class:"modal-image skip-context-menu"},null,8,AIe)]),_:1},8,["show","on-close"])])}const IIe=Re(EIe,[["render",SIe]]),CIe={props:{url:{type:String,required:!0}},emits:["error"],data(){return{show:!1}},mounted(){this.$refs.videoElement.onerror=()=>{this.$emit("error")}},methods:{onClose(){this.show=!1},onClick(){this.show=!0}}},NIe={class:"video message-text__wrap"},OIe=["src"],xIe=["src"];function wIe(e,t,n,s,o,a){const i=F("woot-modal");return m(),f("div",NIe,[c("video",{ref:"videoElement",src:n.url,muted:"",playsInline:"",onClick:t[0]||(t[0]=(...l)=>a.onClick&&a.onClick(...l))},null,8,OIe),b(i,{show:o.show,"onUpdate:show":t[1]||(t[1]=l=>o.show=l),"on-close":a.onClose},{default:j(()=>[c("video",{src:n.url,controls:"",playsInline:"",class:"modal-video skip-context-menu mx-auto"},null,8,xIe)]),_:1},8,["show","on-close"])])}const RIe=Re(CIe,[["render",wIe]]),$Ie={},MIe={class:"flex items-center justify-center px-8 h-28 w-full bg-slate-100 text-slate-700 dark:bg-slate-500 dark:text-slate-75"},kIe={class:"mb-0 text-slate-700 dark:text-slate-75"};function LIe(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",MIe,[b(i,{icon:"document-error",size:"32"}),c("p",kIe,v(e.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])}const DIe=Re($Ie,[["render",LIe]]),PIe={components:{BubbleImage:IIe,BubbleVideo:RIe,InstagramStoryErrorPlaceHolder:DIe},props:{storyUrl:{type:String,default:""}},emits:["error"],data(){return{hasImgStoryError:!1,hasVideoStoryError:!1}},methods:{onImageLoadError(){this.hasImgStoryError=!0,this.emitError()},onVideoLoadError(){this.hasVideoStoryError=!0,this.emitError()},emitError(){this.$emit("error")}}};function BIe(e,t,n,s,o,a){const i=F("BubbleImage"),l=F("BubbleVideo"),r=F("InstagramStoryErrorPlaceHolder");return o.hasImgStoryError?o.hasVideoStoryError?(m(),P(r,{key:2})):(m(),P(l,{key:1,url:n.storyUrl,onError:a.onVideoLoadError},null,8,["url","onError"])):(m(),P(i,{key:0,url:n.storyUrl,onError:a.onImageLoadError},null,8,["url","onError"]))}const i2=Re(PIe,[["render",BIe]]),FIe={components:{InstagramStory:i2},props:{storyUrl:{type:String,default:""}},data(){return{hasImgStoryError:!1,hasVideoStoryError:!1}},methods:{onImageLoadError(){this.hasImgStoryError=!0},onVideoLoadError(){this.hasVideoStoryError=!0}}},UIe={class:"my-0 px-2 pb-0 pt-0 border-l-4 border-solid border-slate-75 dark:border-slate-600 text-slate-600 dark:text-slate-200"};function GIe(e,t,n,s,o,a){const i=F("InstagramStory");return m(),f("blockquote",UIe,[c("span",null,v(e.$t("CONVERSATION.REPLIED_TO_STORY")),1),b(i,{"story-url":n.storyUrl,class:"mt-3 rounded-md"},null,8,["story-url"])])}const VIe=Re(FIe,[["render",GIe]]),HIe={INCOMING_EMAIL:"incoming_email"},KIe=e=>{const{submitted_values:t=[]}=e,[n]=t;return n&&n.title?`<strong>${n.title}</strong>`:""},zIe=e=>{const{submitted_email:t=""}=e;return t?`<strong>${t}</strong>`:""},WIe=(e,{noResponseText:t})=>{const{items:n,submitted_values:s=[]}=e;if(s.length){const o=s.reduce((i,l)=>(i[l.name]=l.value,i),{});let a="";return n.forEach(i=>{a+=`<div>${i.label}</div>`;const l=o[i.name]||t;a+=`<strong>${l}</strong><br/><br/>`}),a}return""},jIe=(e,{ratingTitle:t,feedbackTitle:n})=>{const{submitted_values:{csat_survey_response:s={}}={}}=e,{rating:o,feedback_message:a}=s||{};let i="";if(o){const[l={}]=tl.filter(r=>r.value===o);i+=`<div><strong>${t}</strong></div>`,i+=`<p>${l.emoji}</p>`}return a&&(i+=`<div><strong>${n}</strong></div>`,i+=`<p>${a}</p>`),i},YIe=(e,t,{noResponseText:n="No response",csat:{ratingTitle:s="Rating",feedbackTitle:o="Feedback"}={}}={})=>{const i={input_select:KIe,input_email:zIe,form:WIe,input_csat:jIe}[e];return i&&typeof i=="function"?i(t,{noResponseText:n,ratingTitle:s,feedbackTitle:o}):""},XIe={components:{BubbleActions:PSe,BubbleContact:KSe,BubbleFile:QSe,BubbleImageAudioVideo:A2e,BubbleIntegration:R2e,BubbleLocation:P2e,BubbleMailHead:q2e,BubbleReplyTo:J2e,BubbleText:hIe,ContextMenu:o2,InstagramStory:i2,InstagramStoryReply:VIe,Spinner:Os,NextButton:he},props:{data:{type:Object,required:!0},isATweet:{type:Boolean,default:!1},isAFacebookInbox:{type:Boolean,default:!1},isInstagram:{type:Boolean,default:!1},isAWhatsAppChannel:{type:Boolean,default:!1},isAnEmailInbox:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:()=>({})}},setup(){const{formatMessage:e}=oo();return{formatMessage:e}},data(){return{showContextMenu:!1,hasMediaLoadError:!1,contextMenuPosition:{},showBackgroundHighlight:!1}},computed:{attachments(){var e;return(e=this.data)==null?void 0:e.attachments.map(t=>({...t,sender:this.data.sender||{},created_at:this.data.created_at||""}))},hasOneDayPassed(){var e;return kC(new Date,(e=this.data)==null?void 0:e.created_at)>=1},shouldRenderMessage(){return this.hasAttachments||this.data.content||this.isEmailContentType||this.isUnsupported||this.isAnIntegrationMessage},emailMessageContent(){const{html_content:{full:e}={},text_content:{full:t}={}}=this.contentAttributes.email||{};return e||(t?t.replace(/\n/g,"<br>"):"")},displayQuotedButton(){return this.emailMessageContent.includes("<blockquote")?!0:(this.isIncoming,!1)},message(){if(this.emailMessageContent&&this.isIncoming)return this.emailMessageContent;const e=YIe(this.contentType,this.contentAttributes,{noResponseText:this.$t("CONVERSATION.NO_RESPONSE"),csat:{ratingTitle:this.$t("CONVERSATION.RATING_TITLE"),feedbackTitle:this.$t("CONVERSATION.FEEDBACK_TITLE")}});return this.contentType==="input_csat"?this.$t("CONVERSATION.CSAT_REPLY_MESSAGE")+e:this.formatMessage(this.data.content,this.isATweet,this.data.private)+e},inReplyToMessageId(){var e;return(e=this.data.content_attributes)==null?void 0:e.in_reply_to},isAnInstagramStory(){return this.contentAttributes.image_type==="story_mention"},contextMenuEnabledOptions(){return{copy:this.hasText,delete:this.hasText||this.hasAttachments,cannedResponse:this.isOutgoing&&this.hasText,replyTo:!this.data.private&&this.inboxSupportsReplyTo.outgoing}},contentAttributes(){return this.data.content_attributes||{}},externalError(){return this.contentAttributes.external_error||""},sender(){return this.data.sender||{}},status(){return this.data.status},storySender(){return this.contentAttributes.story_sender||null},storyId(){return this.contentAttributes.story_id||null},storyUrl(){return this.contentAttributes.story_url||null},contentType(){const{data:{content_type:e}}=this;return e},twitterProfileLink(){const e=this.sender.additional_attributes||{},{screen_name:t}=e;return`https://twitter.com/${t}`},alignBubble(){const{message_type:e}=this.data,t=e===Sa.ACTIVITY,n=e===Sa.INCOMING,s=e===Sa.OUTGOING||e===Sa.TEMPLATE;return{center:t,left:n,right:s,"has-context-menu":this.showContextMenu,"has-tweet-menu":this.isATweet,"has-bg":this.showBackgroundHighlight}},createdAt(){return this.contentAttributes.external_created_at||this.data.created_at},isBubble(){return[0,1,3].includes(this.data.message_type)},isIncoming(){return this.data.message_type===Sa.INCOMING},isOutgoing(){return this.data.message_type===Sa.OUTGOING},isTemplate(){return this.data.message_type===Sa.TEMPLATE},isAnIntegrationMessage(){return this.contentType==="integrations"},emailHeadAttributes(){return{email:this.contentAttributes.email,cc:this.contentAttributes.cc_emails,bcc:this.contentAttributes.bcc_emails}},hasAttachments(){return!!(this.data.attachments&&this.data.attachments.length>0)},isMessageDeleted(){return this.contentAttributes.deleted},hasText(){return!!this.data.content},tooltipForSender(){const e=this.senderNameForAvatar,{message_type:t}=this.data;return t===Sa.OUTGOING||t===Sa.TEMPLATE?{content:`${this.$t("CONVERSATION.SENT_BY")} ${e}`}:!1},errorMessageTooltip(){return this.isFailed?this.externalError||this.$t("CONVERSATION.SEND_FAILED"):""},wrapClass(){return{wrap:this.isBubble,"activity-wrap":!this.isBubble,"is-pending":this.isPending,"is-failed":this.isFailed,"is-email":this.isEmailContentType,"is-deleted":this.isMessageDeleted}},bubbleClass(){return{bubble:this.isBubble,"is-private":this.data.private,"is-unsupported":this.isUnsupported,"is-image":this.hasMediaAttachment("image"),"is-video":this.hasMediaAttachment("video"),"is-text":this.hasText,"is-from-bot":this.isSentByBot,"is-failed":this.isFailed,"is-email":this.isEmailContentType,"is-deleted":this.isMessageDeleted}},isUnsupported(){return this.contentAttributes.is_unsupported??!1},isPending(){return this.data.status===zr.PROGRESS},isFailed(){return this.data.status===zr.FAILED},isSentByBot(){return this.isPending||this.isFailed?!1:!this.sender.type||this.sender.type==="agent_bot"},shouldShowContextMenu(){return!(this.isFailed||this.isPending||this.isUnsupported)},showAvatar(){return this.isOutgoing||this.isTemplate?!0:this.isATweet&&this.isIncoming&&this.sender},senderNameForAvatar(){if(this.isOutgoing||this.isTemplate){const{name:e=this.$t("CONVERSATION.BOT")}=this.sender||{};return e}return""},isEmailContentType(){return this.contentType===HIe.INCOMING_EMAIL}},watch:{data(){this.hasMediaLoadError=!1}},mounted(){this.hasMediaLoadError=!1,yt.on(sn.ON_MESSAGE_LIST_SCROLL,this.closeContextMenu),this.setupHighlightTimer()},unmounted(){yt.off(sn.ON_MESSAGE_LIST_SCROLL,this.closeContextMenu),clearTimeout(this.higlightTimeout)},methods:{isAttachmentImageVideoAudio(e){return["image","audio","video","story_mention","ig_reel"].includes(e)},hasMediaAttachment(e){return this.hasAttachments&&this.data.attachments.length>0?this.compareMessageFileType(this.data,e):!1},compareMessageFileType(e,t){try{const{attachments:n=[{}]}=e,{file_type:s}=n[0];return s===t&&!this.hasMediaLoadError}catch(n){return zf("attachment-parsing-error",{messageData:e,type:t,hasMediaLoadError:this.hasMediaLoadError}),nr(n),!1}},handleContextMenuClick(){this.showContextMenu=!this.showContextMenu},async retrySendMessage(){await this.$store.dispatch("sendMessageWithData",this.data)},onMediaLoadError(){this.hasMediaLoadError=!0},openContextMenu(e){var n,s;(n=e.target)!=null&&n.classList.contains("skip-context-menu")||((s=e.target)==null?void 0:s.tagName.toLowerCase())==="a"||getSelection().toString()||(e.preventDefault(),e.type==="contextmenu"&&jt(rl.OPEN_MESSAGE_CONTEXT_MENU),this.contextMenuPosition={x:e.pageX||e.clientX,y:e.pageY||e.clientY},this.showContextMenu=!0)},closeContextMenu(){this.showContextMenu=!1,this.contextMenuPosition={x:null,y:null}},handleReplyTo(){const e=Pa.MESSAGE_REPLY_TO,{conversation_id:t,id:n}=this.data;Na.updateJsonStore(e,t,n),yt.emit(sn.TOGGLE_REPLY_TO_MESSAGE,this.data)},setupHighlightTimer(){if(Number(this.$route.query.messageId)!==Number(this.data.id))return;this.showBackgroundHighlight=!0;const e=1e3;this.higlightTimeout=setTimeout(()=>{this.showBackgroundHighlight=!1},e)}}},qIe=["id"],ZIe={key:0,class:"message-failed--alert"},QIe={key:2},JIe={key:4,class:"chat-bubble has-attachment agent"},eCe={key:5},tCe={key:2,class:"sender--info"},nCe=["href"],sCe={key:0,class:"context-menu-wrap"};function aCe(e,t,n,s,o,a){const i=F("NextButton"),l=F("BubbleMailHead"),r=F("InstagramStoryReply"),d=F("BubbleReplyTo"),u=F("BubbleText"),p=F("BubbleIntegration"),h=F("InstagramStory"),g=F("BubbleImageAudioVideo"),_=F("BubbleLocation"),T=F("BubbleContact"),S=F("BubbleFile"),E=F("BubbleActions"),y=F("Spinner"),A=F("woot-thumbnail"),C=F("ContextMenu"),O=ct("tooltip");return a.shouldRenderMessage?(m(),f("li",{key:0,id:`message${n.data.id}`,class:re(["group/context-menu",[a.alignBubble]])},[c("div",{class:re(a.wrapClass)},[a.isFailed&&!a.hasOneDayPassed&&!n.isAnEmailInbox?(m(),f("div",ZIe,[ie(b(i,{ghost:"",xs:"",ruby:"",icon:"i-lucide-refresh-ccw",onClick:a.retrySendMessage},null,8,["onClick"]),[[O,e.$t("CONVERSATION.TRY_AGAIN"),void 0,{"top-end":!0}]])])):x("",!0),c("div",{class:re(a.bubbleClass),onContextmenu:t[0]||(t[0]=N=>a.openContextMenu(N))},[b(l,{"email-attributes":a.contentAttributes.email,cc:a.emailHeadAttributes.cc,bcc:a.emailHeadAttributes.bcc,"is-incoming":a.isIncoming},null,8,["email-attributes","cc","bcc","is-incoming"]),a.storyUrl?(m(),P(r,{key:0,"story-url":a.storyUrl},null,8,["story-url"])):x("",!0),a.inReplyToMessageId&&n.inboxSupportsReplyTo.incoming?(m(),P(d,{key:1,message:n.inReplyTo,"message-type":n.data.message_type,"parent-has-attachments":a.hasAttachments},null,8,["message","message-type","parent-has-attachments"])):x("",!0),a.isUnsupported?(m(),f("div",QIe,[n.isAFacebookInbox&&n.isInstagram?(m(),f(pe,{key:0},[be(v(e.$t("CONVERSATION.UNSUPPORTED_MESSAGE_INSTAGRAM")),1)],64)):n.isAFacebookInbox?(m(),f(pe,{key:1},[be(v(e.$t("CONVERSATION.UNSUPPORTED_MESSAGE_FACEBOOK")),1)],64)):(m(),f(pe,{key:2},[be(v(e.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)],64))])):n.data.content?(m(),P(u,{key:3,message:a.message,"is-email":a.isEmailContentType,"display-quoted-button":a.displayQuotedButton},null,8,["message","is-email","display-quoted-button"])):x("",!0),b(p,{"message-id":n.data.id,"content-attributes":a.contentAttributes,"inbox-id":n.data.inbox_id},null,8,["message-id","content-attributes","inbox-id"]),a.isPending&&a.hasAttachments?(m(),f("span",JIe,v(e.$t("CONVERSATION.UPLOADING_ATTACHMENTS")),1)):x("",!0),!a.isPending&&a.hasAttachments?(m(),f("div",eCe,[(m(!0),f(pe,null,ye(a.attachments,N=>(m(),f("div",{key:N.id},[a.isAnInstagramStory?(m(),P(h,{key:0,"story-url":N.data_url,onError:a.onMediaLoadError},null,8,["story-url","onError"])):a.isAttachmentImageVideoAudio(N.file_type)?(m(),P(g,{key:1,attachment:N,onError:a.onMediaLoadError},null,8,["attachment","onError"])):N.file_type==="location"?(m(),P(_,{key:2,latitude:N.coordinates_lat,longitude:N.coordinates_long,name:N.fallback_title},null,8,["latitude","longitude","name"])):N.file_type==="contact"?(m(),P(T,{key:3,name:n.data.content,"phone-number":N.fallback_title},null,8,["name","phone-number"])):(m(),P(S,{key:4,url:N.data_url},null,8,["url"]))]))),128))])):x("",!0),b(E,{id:n.data.id,sender:n.data.sender,"story-sender":a.storySender,"external-error":a.errorMessageTooltip,"story-id":`${a.storyId}`,"is-a-tweet":n.isATweet,"is-a-whatsapp-channel":n.isAWhatsAppChannel,"is-email":a.isEmailContentType,"is-private":n.data.private,"message-type":n.data.message_type,"message-status":a.status,"source-id":n.data.source_id,"inbox-id":n.data.inbox_id,"created-at":a.createdAt},null,8,["id","sender","story-sender","external-error","story-id","is-a-tweet","is-a-whatsapp-channel","is-email","is-private","message-type","message-status","source-id","inbox-id","created-at"])],34),a.isPending?(m(),P(y,{key:1,size:"tiny"})):x("",!0),a.showAvatar?ie((m(),f("div",tCe,[b(A,{src:a.sender.thumbnail,username:a.senderNameForAvatar,size:"16px"},null,8,["src","username"]),n.isATweet&&a.isIncoming?(m(),f("a",{key:0,class:"sender--available-name",href:a.twitterProfileLink,target:"_blank",rel:"noopener noreferrer nofollow"},v(a.sender.name),9,nCe)):x("",!0)])),[[O,a.tooltipForSender,void 0,{left:!0}]]):x("",!0)],2),a.shouldShowContextMenu?(m(),f("div",sCe,[a.isBubble&&!a.isMessageDeleted?(m(),P(C,{key:0,"context-menu-position":o.contextMenuPosition,"is-open":o.showContextMenu,"enabled-options":a.contextMenuEnabledOptions,message:n.data,onOpen:a.openContextMenu,onClose:a.closeContextMenu,onReplyTo:a.handleReplyTo},null,8,["context-menu-position","is-open","enabled-options","message","onOpen","onClose","onReplyTo"])):x("",!0)])):x("",!0)],10,qIe)):x("",!0)}const oCe=Re(XIe,[["render",aCe]]),us={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},Rn={USER:"user",AGENT:"agent",ACTIVITY:"activity",PRIVATE:"private",BOT:"bot",ERROR:"error",TEMPLATE:"template",EMAIL:"email",UNSUPPORTED:"unsupported"},Dh={USER:"User",AGENT_BOT:"agent_bot"},Ts={LEFT:"left",RIGHT:"right",CENTER:"center"},Cn={SENT:"sent",DELIVERED:"delivered",READ:"read",FAILED:"failed",PROGRESS:"progress"},os={IMAGE:"image",AUDIO:"audio",VIDEO:"video",FILE:"file",LOCATION:"location",FALLBACK:"fallback",SHARE:"share",STORY_MENTION:"story_mention",CONTACT:"contact",IG_REEL:"ig_reel"},po={TEXT:"text",INPUT_TEXT:"input_text",INPUT_TEXTAREA:"input_textarea",INPUT_EMAIL:"input_email",INPUT_SELECT:"input_select",CARDS:"cards",FORM:"form",ARTICLE:"article",INCOMING_EMAIL:"incoming_email",INPUT_CSAT:"input_csat",INTEGRATIONS:"integrations",STICKER:"sticker"};os.IMAGE,os.VIDEO,os.AUDIO,os.IG_REEL;const l2=Symbol("MessageControl");function ls(){const e=to(l2,null);if(e===null)throw new Error("Component is missing a parent <Message /> component.");const t=Ve("getSelectedChatAttachments"),n=w(()=>{const s=t.value.filter(o=>[os.IMAGE,os.VIDEO,os.IG_REEL,os.AUDIO].includes(o.file_type));return $s(s)});return{...e,filteredCurrentChatAttachments:n}}function iCe(e){qn(l2,e)}const lCe={__name:"MessageStatus",props:{status:{type:String,required:!0,validator:e=>Object.values(Cn).includes(e)}},setup(e){const{t}=He(),n=["i-lucide-clock-1","i-lucide-clock-2","i-lucide-clock-3","i-lucide-clock-4","i-lucide-clock-5","i-lucide-clock-6","i-lucide-clock-7","i-lucide-clock-8","i-lucide-clock-9","i-lucide-clock-10","i-lucide-clock-11","i-lucide-clock-12"],s=U(n[0]);o$(()=>{const d=(n.indexOf(s.value)+1)%n.length;s.value=n[d]},500,{immediate:e.status===Cn.PROGRESS,immediateCallback:!1});const a=w(()=>({[Cn.SENT]:"i-lucide-check",[Cn.DELIVERED]:"i-lucide-check-check",[Cn.READ]:"i-lucide-check-check"})[e.status]),i=w(()=>({[Cn.SENT]:"text-n-slate-10",[Cn.DELIVERED]:"text-n-slate-10",[Cn.READ]:"text-[#7EB6FF]"})[e.status]),l=w(()=>({[Cn.SENT]:t("CHAT_LIST.SENT"),[Cn.DELIVERED]:t("CHAT_LIST.DELIVERED"),[Cn.READ]:t("CHAT_LIST.MESSAGE_READ"),[Cn.PROGRESS]:t("CHAT_LIST.SENDING")})[e.status]);return(r,d)=>{const u=ct("tooltip");return e.status===I(Cn).PROGRESS?ie((m(),P(Ht,{key:0,icon:s.value,class:"text-n-slate-10"},null,8,["icon"])),[[u,l.value,void 0,{"top-start":!0}]]):ie((m(),P(Ht,{key:1,icon:a.value,class:re([i.value,"size-[14px]"])},null,8,["icon","class"])),[[u,l.value,void 0,{"top-start":!0}]])}}},rCe=()=>{const e=Ve("getSelectedChat"),t=Ve("inboxes/getInboxById"),n=w(()=>{const O=e.value.inbox_id;return To(t.value(O),{deep:!0})}),s=w(()=>n.value.channelType),o=w(()=>s.value===Dt.API),a=w(()=>s.value===Dt.FB),i=w(()=>s.value===Dt.WEB),l=w(()=>s.value===Dt.TWILIO),r=w(()=>s.value===Dt.LINE),d=w(()=>s.value===Dt.EMAIL),u=w(()=>s.value===Dt.TELEGRAM),p=w(()=>n.value.provider||""),h=w(()=>d.value&&n.value.provider==="microsoft"),g=w(()=>d.value&&n.value.provider==="google"),_=w(()=>{const{medium:O=""}=n.value;return l.value&&O==="sms"}),T=w(()=>s.value===Dt.SMS||_.value),S=w(()=>{const{medium:O=""}=n.value;return l.value&&O==="whatsapp"}),E=w(()=>s.value===Dt.WHATSAPP&&p.value==="whatsapp_cloud"),y=w(()=>s.value===Dt.WHATSAPP&&p.value==="default"),A=w(()=>s.value===Dt.WHATSAPP||S.value),C=w(()=>s.value===Dt.INSTAGRAM);return{inbox:n,isAFacebookInbox:a,isALineChannel:r,isAPIInbox:o,isASmsInbox:T,isATelegramChannel:u,isATwilioChannel:l,isAWebWidgetInbox:i,isAWhatsAppChannel:A,isAMicrosoftInbox:h,isAGoogleInbox:g,isATwilioWhatsAppChannel:S,isAWhatsAppCloudChannel:E,is360DialogWhatsAppChannel:y,isAnEmailChannel:d,isAInstagramChannel:C}},cCe={class:"text-xs flex items-center gap-1.5"},dCe={class:"inline"},uCe={class:"inline"},mCe={__name:"MessageMeta",setup(e){const{isAFacebookInbox:t,isALineChannel:n,isAPIInbox:s,isASmsInbox:o,isATelegramChannel:a,isATwilioChannel:i,isAWebWidgetInbox:l,isAWhatsAppChannel:r,isAnEmailChannel:d,isAInstagramChannel:u}=rCe(),{status:p,isPrivate:h,createdAt:g,sourceId:_,messageType:T,contentAttributes:S}=ls(),E=w(()=>Cc(g.value,"LLL d, h:mm a")),y=w(()=>{var R;return h.value||p.value===Cn.FAILED||(R=S.value)!=null&&R.deleted?!1:T.value===us.OUTGOING||T.value===us.TEMPLATE}),A=w(()=>y.value?d.value?!!_.value:r.value||i.value||t.value||o.value||a.value||u.value?_.value&&p.value===Cn.SENT:!!n.value:!1),C=w(()=>y.value?r.value||i.value||o.value||t.value?_.value&&p.value===Cn.DELIVERED:l.value||s.value?p.value===Cn.SENT:n.value?p.value===Cn.DELIVERED:!1:!1),O=w(()=>y.value?r.value||i.value||t.value||u.value?_.value&&p.value===Cn.READ:l.value||s.value?p.value===Cn.READ:!1:!1),N=w(()=>O.value?Cn.READ:C.value?Cn.DELIVERED:A.value?Cn.SENT:Cn.PROGRESS);return(R,k)=>(m(),f("div",cCe,[c("div",dCe,[c("time",uCe,v(E.value),1)]),I(h)?(m(),P(Ht,{key:0,icon:"i-lucide-lock-keyhole",class:"size-3"})):x("",!0),y.value?(m(),P(lCe,{key:1,status:N.value},null,8,["status"])):x("",!0)]))}},pCe={class:"line-clamp-2 break-all"},ro={__name:"Base",setup(e){const{variant:t,orientation:n,inReplyTo:s,shouldGroupWithNext:o}=ls(),{t:a}=He(),i={[Rn.AGENT]:"bg-n-solid-blue text-n-slate-12",[Rn.PRIVATE]:"bg-n-solid-amber text-n-amber-12 [&_.prosemirror-mention-node]:font-semibold",[Rn.USER]:"bg-n-slate-4 text-n-slate-12",[Rn.ACTIVITY]:"bg-n-alpha-1 text-n-slate-11 text-sm",[Rn.BOT]:"bg-n-solid-iris text-n-slate-12",[Rn.TEMPLATE]:"bg-n-solid-iris text-n-slate-12",[Rn.ERROR]:"bg-n-ruby-4 text-n-ruby-12",[Rn.EMAIL]:"w-full",[Rn.UNSUPPORTED]:"bg-n-solid-amber/70 border border-dashed border-n-amber-12 text-n-amber-12"},l={[Ts.LEFT]:"left-bubble rounded-xl ltr:rounded-bl-sm rtl:rounded-br-sm",[Ts.RIGHT]:"right-bubble rounded-xl ltr:rounded-br-sm rtl:rounded-bl-sm",[Ts.CENTER]:"rounded-md"},r=w(()=>({[Ts.LEFT]:"justify-start",[Ts.RIGHT]:"justify-end",[Ts.CENTER]:"justify-center"})[n.value]),d=w(()=>{const h=[i[t.value]];return t.value!==Rn.ACTIVITY?h.push(l[n.value]):h.push("rounded-lg"),h}),u=()=>{yt.emit(sn.SCROLL_TO_MESSAGE,{messageId:s.value.id})},p=w(()=>{if(!s)return"";const{content:h,attachments:g}=s.value;if(h)return h;if(g!=null&&g.length){const _=g[0],T=_.fileType??_.file_type;return a(`CHAT_LIST.ATTACHMENTS.${T}.CONTENT`)}return a("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")});return(h,g)=>(m(),f("div",{class:re(["text-sm",[d.value,{"max-w-lg":I(t)!==I(Rn).EMAIL}]])},[I(s)?(m(),f("div",{key:0,class:"bg-n-alpha-black1 rounded-lg p-2 -mx-1 mb-2 cursor-pointer",onClick:u},[c("span",pCe,v(p.value),1)])):x("",!0),et(h.$slots,"default"),!I(o)&&I(t)!==I(Rn).ACTIVITY?(m(),P(mCe,{key:1,class:re([[r.value,I(t)===I(Rn).EMAIL?"px-3 pb-3":"",I(t)===I(Rn).PRIVATE?"text-n-amber-12/50":"text-n-slate-11"],"mt-2"])},null,8,["class"])):x("",!0)],2))}},hCe={class:"prose prose-bubble"},r2={__name:"FormattedContent",props:{content:{type:String,required:!0}},setup(e){const t=e,{variant:n}=ls(),s=w(()=>n.value===Rn.ACTIVITY?t.content:new tg(t.content).formattedMessage);return(o,a)=>{const i=ct("dompurify-html");return ie((m(),f("span",hCe,null,512)),[[i,s.value]])}}},fCe={key:0,class:"flex flex-col items-center justify-center gap-1 text-xs text-center rounded-lg size-full bg-n-alpha-1 text-n-slate-11"},gCe=["src"],_Ce={__name:"Image",props:{attachment:{type:Object,required:!0}},setup(e){const t=U(!1),n=U(!1),{filteredCurrentChatAttachments:s}=ls(),o=()=>{t.value=!0};return(a,i)=>(m(),f(pe,null,[c("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer",onClick:i[0]||(i[0]=l=>n.value=!0)},[t.value?(m(),f("div",fCe,[b(Ht,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),be(" "+v(a.$t("COMPONENTS.MEDIA.LOADING_FAILED")),1)])):(m(),f("img",{key:1,class:"object-cover w-full h-full skip-context-menu",src:e.attachment.dataUrl,onError:o},null,40,gCe))]),n.value?(m(),P(pr,{key:0,show:n.value,"onUpdate:show":i[1]||(i[1]=l=>n.value=l),attachment:I($s)(e.attachment),"all-attachments":I(s),onError:o,onClose:i[2]||(i[2]=()=>n.value=!1)},null,8,["show","attachment","all-attachments"])):x("",!0)],64))}},vCe=["src"],bCe={class:"absolute w-full h-full inset-0 p-1 flex items-center justify-center"},ECe={class:"size-7 bg-n-slate-1/60 backdrop-blur-sm rounded-full overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.4)]"},TCe={__name:"Video",props:{attachment:{type:Object,required:!0}},setup(e){const t=U(!1),{filteredCurrentChatAttachments:n}=ls();return(s,o)=>(m(),f(pe,null,[c("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer relative group",onClick:o[0]||(o[0]=a=>t.value=!0)},[c("video",{src:e.attachment.dataUrl,class:"w-full h-full object-cover",muted:"",playsInline:""},null,8,vCe),c("div",bCe,[c("div",ECe,[b(Ht,{icon:"i-teenyicons-play-small-solid",class:"size-7 text-n-slate-12/80 backdrop-blur"})])])]),t.value?(m(),P(pr,{key:0,show:t.value,"onUpdate:show":o[1]||(o[1]=a=>t.value=a),attachment:I($s)(e.attachment),"all-attachments":I(n),onError:s.onError,onClose:o[2]||(o[2]=()=>t.value=!1)},null,8,["show","attachment","all-attachments","onError"])):x("",!0)],64))}},yCe=["src"],ACe={class:"tabular-nums text-xs"},SCe={class:"flex-1 items-center flex px-2"},ICe=["max","value"],CCe={class:"text-xs text-n-slate-11 font-medium"},c2=Object.assign({inheritAttrs:!1},{__name:"Audio",props:{attachment:{type:Object,required:!0}},setup(e){const t=w(()=>GE(e.attachment.dataUrl)),n=Us("audioPlayer"),s=U(!1),o=U(!1),a=U(0),i=U(0),l=U(1),r=()=>{var y;i.value=(y=n.value)==null?void 0:y.duration},d=w(()=>`${l.value}x`);ut(()=>{var y;i.value=(y=n.value)==null?void 0:y.duration,n.value.playbackRate=l.value});const u=y=>{if(!y||Number.isNaN(y))return"00:00";const A=Math.floor(y/60),C=Math.floor(y%60);return`${A.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},p=()=>{n.value.muted=!n.value.muted,o.value=n.value.muted},h=()=>{var y;a.value=(y=n.value)==null?void 0:y.currentTime},g=y=>{const A=Number(y.target.value);n.value.currentTime=A,a.value=A},_=()=>{s.value?(n.value.pause(),s.value=!1):(n.value.play(),s.value=!0)},T=()=>{s.value=!1,a.value=0,l.value=1,n.value.playbackRate=1},S=()=>{const y=[1,1.5,2],C=(y.indexOf(l.value)+1)%y.length;l.value=y[C],n.value.playbackRate=l.value},E=async()=>{const{fileType:y,dataUrl:A,extension:C}=e.attachment;jf({url:A,type:y,extension:C})};return(y,A)=>(m(),f(pe,null,[c("audio",{ref_key:"audioPlayer",ref:n,controls:"",class:"hidden",onLoadedmetadata:r,onTimeupdate:h,onEnded:T},[c("source",{src:t.value},null,8,yCe)],544),c("div",As(y.$attrs,{class:"rounded-xl w-full gap-1 p-1.5 bg-n-alpha-white flex items-center border border-n-container shadow-[0px_2px_8px_0px_rgba(94,94,94,0.06)]"}),[c("button",{class:"p-0 border-0 size-8",onClick:_},[s.value?(m(),P(Ht,{key:0,class:"size-8",icon:"i-teenyicons-pause-small-solid"})):(m(),P(Ht,{key:1,class:"size-8",icon:"i-teenyicons-play-small-solid"}))]),c("div",ACe,v(u(a.value))+" / "+v(u(i.value)),1),c("div",SCe,[c("input",{type:"range",min:"0",max:i.value,value:a.value,class:"w-full h-1 bg-n-slate-12/40 rounded-lg appearance-none cursor-pointer accent-current",onInput:g},null,40,ICe)]),c("button",{class:"border-0 w-10 h-6 grid place-content-center bg-n-alpha-2 hover:bg-alpha-3 rounded-2xl",onClick:S},[c("span",CCe,v(d.value),1)]),c("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:p},[o.value?(m(),P(Ht,{key:0,class:"size-4",icon:"i-lucide-volume-off"})):(m(),P(Ht,{key:1,class:"size-4",icon:"i-lucide-volume-2"}))]),c("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:E},[b(Ht,{class:"size-4",icon:"i-lucide-download"})])],16)],64))}}),d2={__name:"FileIcon",props:{fileType:{type:String,required:!0}},setup(e){const t=w(()=>({"7z":"i-woot-file-zip",csv:"i-woot-file-csv",doc:"i-woot-file-doc",docx:"i-woot-file-doc",json:"i-woot-file-txt",odt:"i-woot-file-doc",pdf:"i-woot-file-pdf",ppt:"i-woot-file-ppt",pptx:"i-woot-file-ppt",rar:"i-woot-file-zip",rtf:"i-woot-file-doc",tar:"i-woot-file-zip",txt:"i-woot-file-txt",xls:"i-woot-file-xls",xlsx:"i-woot-file-xls",zip:"i-woot-file-zip"})[e.fileType]||"i-teenyicons-text-document-solid");return(n,s)=>(m(),P(Ht,{icon:t.value},null,8,["icon"]))}},NCe={class:"h-9 bg-n-alpha-white gap-2 overflow-hidden items-center flex px-2 rounded-lg border border-n-container"},OCe=["title"],xCe=["href"],wCe={__name:"File",props:{attachment:{type:Object,required:!0}},setup(e){const{t}=He(),n=w(()=>{var a;return ON(((a=e.attachment)==null?void 0:a.dataUrl)||"")}),s=w(()=>{const{base:a,type:i}=n.value,l=(r,d,u)=>r.length>d?`${r.substring(0,d).trimEnd()}${u?"..":"..."}`:r;return i?`${l(a,12,!0)}.${i}`:l(a,14,!1)}),o=w(()=>({"7z":"dark:text-[#EDEEF0] text-[#2F265F]",csv:"text-amber-12",doc:"dark:text-[#D6E1FF] text-[#1F2D5C]",docx:"dark:text-[#D6E1FF] text-[#1F2D5C]",json:"text-n-slate-12",odt:"dark:text-[#D6E1FF] text-[#1F2D5C]",pdf:"text-n-slate-12",ppt:"dark:text-[#FFE0C2] text-[#582D1D]",pptx:"dark:text-[#FFE0C2] text-[#582D1D]",rar:"dark:text-[#EDEEF0] text-[#2F265F]",rtf:"dark:text-[#D6E1FF] text-[#1F2D5C]",tar:"dark:text-[#EDEEF0] text-[#2F265F]",txt:"text-n-slate-12",xls:"text-n-teal-12",xlsx:"text-n-teal-12",zip:"dark:text-[#EDEEF0] text-[#2F265F]"})[n.value.type]||"text-n-slate-12");return(a,i)=>{const l=ct("tooltip");return m(),f("div",NCe,[b(d2,{class:"flex-shrink-0","file-type":n.value.type},null,8,["file-type"]),c("span",{class:re(["flex-1 min-w-0 text-sm max-w-36",o.value]),title:n.value.name},v(s.value),11,OCe),ie((m(),f("a",{class:"flex-shrink-0 size-9 grid place-content-center cursor-pointer text-n-slate-11 hover:text-n-slate-12 transition-colors",href:e.attachment.dataUrl,rel:"noreferrer noopener nofollow",target:"_blank"},[b(Ht,{icon:"i-lucide-download"})],8,xCe)),[[l,I(t)("CONVERSATION.DOWNLOAD")]])])}}},u2=Object.assign({inheritAttrs:!1},{__name:"AttachmentChips",props:{attachments:{type:Array,default:()=>[]}},setup(e){const t=e,n=Bf(),{orientation:s}=ls(),o=w(()=>{const d=[n.class,"flex","flex-wrap"];return s.value==="right"&&d.push("justify-end"),d}),a=w(()=>Array.isArray(t.attachments)?t.attachments:[]),i=w(()=>{const d=[os.IMAGE,os.VIDEO];return a.value.filter(p=>d.includes(p.fileType)).sort((p,h)=>d.indexOf(p.fileType)-d.indexOf(h.fileType))}),l=w(()=>a.value.filter(d=>d.fileType===os.AUDIO)),r=w(()=>a.value.filter(d=>d.fileType===os.FILE));return(d,u)=>(m(),f(pe,null,[i.value.length?(m(),f("div",{key:0,class:re(o.value)},[(m(!0),f(pe,null,ye(i.value,p=>(m(),f(pe,{key:p.id},[p.fileType===I(os).IMAGE?(m(),P(_Ce,{key:0,attachment:p},null,8,["attachment"])):p.fileType===I(os).VIDEO?(m(),P(TCe,{key:1,attachment:p},null,8,["attachment"])):x("",!0)],64))),128))],2)):x("",!0),l.value.length?(m(),f("div",{key:1,class:re(o.value)},[(m(!0),f(pe,null,ye(l.value,p=>(m(),f("div",{key:p.id},[b(c2,{class:"bg-n-alpha-3 dark:bg-n-alpha-2 text-n-slate-12",attachment:p},null,8,["attachment"])]))),128))],2)):x("",!0),r.value.length?(m(),f("div",{key:2,class:re(o.value)},[(m(!0),f(pe,null,ye(r.value,p=>(m(),P(wCe,{key:p.id,attachment:p},null,8,["attachment"]))),128))],2)):x("",!0)],64))}}),m2={__name:"TranslationToggle",props:{showingOriginal:Boolean},emits:["toggle"],setup(e){return(t,n)=>(m(),f("span",null,[c("span",{class:"text-xs text-n-slate-11 cursor-pointer hover:underline select-none",onClick:n[0]||(n[0]=s=>t.$emit("toggle"))},v(e.showingOriginal?t.$t("CONVERSATION.VIEW_TRANSLATED"):t.$t("CONVERSATION.VIEW_ORIGINAL")),1)]))}};function p2(e){const t=w(()=>{if(!e.value)return!1;const{translations:s={}}=e.value;return Object.keys(s||{}).length>0}),n=w(()=>{if(!t.value)return null;const s=e.value.translations;return s[Object.keys(s)[0]]});return{hasTranslations:t,translationContent:n}}const RCe={class:"gap-3 flex flex-col"},$Ce={key:0,class:"text-n-slate-11"},MCe={key:0,class:"px-2 py-1 rounded-lg bg-n-alpha-3"},kCe={__name:"Index",setup(e){const{content:t,attachments:n,contentAttributes:s,messageType:o}=ls(),{hasTranslations:a,translationContent:i}=p2(s),l=U(!1),r=w(()=>l.value?t.value:a.value?i.value:t.value),d=w(()=>o.value===us.TEMPLATE),u=w(()=>{var h;return!t.value&&!((h=n.value)!=null&&h.length)}),p=()=>{l.value=!l.value};return(h,g)=>(m(),P(ro,{class:"px-4 py-3","data-bubble-name":"text"},{default:j(()=>[c("div",RCe,[u.value?(m(),f("span",$Ce,v(h.$t("CONVERSATION.NO_CONTENT")),1)):x("",!0),r.value?(m(),P(r2,{key:1,content:r.value},null,8,["content"])):x("",!0),I(a)?(m(),P(m2,{key:2,class:"-mt-3","showing-original":l.value,onToggle:p},null,8,["showing-original"])):x("",!0),b(u2,{attachments:I(n),class:"gap-2"},null,8,["attachments"]),d.value?(m(),f(pe,{key:3},[I(s).submittedEmail?(m(),f("div",MCe,v(I(s).submittedEmail),1)):x("",!0)],64)):x("",!0)])]),_:1}))}},LCe=["title"],DCe={__name:"Activity",setup(e){const{content:t,createdAt:n}=ls(),s=w(()=>Cc(n.value,"LLL d, h:mm a"));return(o,a)=>{const i=ct("dompurify-html"),l=ct("tooltip");return ie((m(),P(ro,{class:"px-2 py-0.5 !rounded-full flex min-w-0 items-center gap-2","data-bubble-name":"activity"},{default:j(()=>[ie(c("span",{title:I(t)},null,8,LCe),[[i,I(t)]])]),_:1})),[[l,s.value,void 0,{top:!0}]])}}},PCe={key:0,class:"flex items-center gap-1 text-center rounded-lg"},BCe={class:"mb-0 text-n-slate-11"},FCe={key:1,class:"relative group rounded-lg overflow-hidden"},UCe=["src","width","height"],GCe={class:"absolute right-2 bottom-2 hidden group-hover:flex gap-2"},VCe={__name:"Image",emits:["error"],setup(e,{emit:t}){const n=t,{t:s}=He(),{filteredCurrentChatAttachments:o,attachments:a}=ls(),i=w(()=>a.value[0]),l=U(!1),r=U(!1),d=U(!1),u=()=>{l.value=!0,n("error")},p=async()=>{const{fileType:h,dataUrl:g,extension:_}=i.value;try{d.value=!0,await jf({url:g,type:h,extension:_})}catch{Te(s("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{d.value=!1}};return(h,g)=>(m(),f(pe,null,[b(ro,{class:"overflow-hidden p-3","data-bubble-name":"image",onClick:g[1]||(g[1]=_=>r.value=!0)},{default:j(()=>[l.value?(m(),f("div",PCe,[b(Ht,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),c("p",BCe,v(h.$t("COMPONENTS.MEDIA.IMAGE_UNAVAILABLE")),1)])):(m(),f("div",FCe,[c("img",{class:"skip-context-menu",src:i.value.dataUrl,width:i.value.width,height:i.value.height,onClick:g[0]||(g[0]=(..._)=>h.onClick&&h.onClick(..._)),onError:u},null,40,UCe),g[4]||(g[4]=c("div",{class:"inset-0 p-2 pointer-events-none absolute bg-gradient-to-tl from-n-slate-12/30 dark:from-n-slate-1/50 via-transparent to-transparent hidden group-hover:flex"},null,-1)),c("div",GCe,[b(he,{xs:"",solid:"",slate:"",icon:"i-lucide-expand",class:"opacity-60"}),b(he,{xs:"",solid:"",slate:"",icon:"i-lucide-download",class:"opacity-60","is-loading":d.value,disabled:d.value,onClick:Ke(p,["stop"])},null,8,["is-loading","disabled"])])]))]),_:1}),r.value?(m(),P(pr,{key:0,show:r.value,"onUpdate:show":g[2]||(g[2]=_=>r.value=_),attachment:I($s)(i.value),"all-attachments":I(o),onError:u,onClose:g[3]||(g[3]=()=>r.value=!1)},null,8,["show","attachment","all-attachments"])):x("",!0)],64))}},HCe={class:"grid gap-4 min-w-64"},KCe={class:"grid gap-3"},zCe={class:"space-y-1"},WCe={key:0,class:"text-n-slate-12 text-sm truncate"},jCe={key:0,class:"truncate text-sm text-n-slate-12"},YCe={key:1,class:"truncate text-sm text-n-slate-11"},XCe={key:0,class:"mb-2"},qCe=["href"],Nm={__name:"BaseAttachment",props:{icon:{type:[String,Object],required:!0},iconBgColor:{type:String,default:"bg-n-alpha-3"},senderTranslationKey:{type:String,required:!0},content:{type:String,required:!0},title:{type:String,default:""},action:{type:Object,required:!0,validator:e=>e.label&&(e.href||e.onClick)}},setup(e){const{sender:t}=ls(),{t:n}=He(),s=w(()=>{var o;return((o=t==null?void 0:t.value)==null?void 0:o.name)||""});return(o,a)=>(m(),P(ro,{class:"overflow-hidden p-3","data-bubble-name":"attachment"},{default:j(()=>[c("div",HCe,[c("div",KCe,[c("div",{class:re(["size-8 rounded-lg grid place-content-center",e.iconBgColor])},[et(o.$slots,"icon",{},()=>[b(Ht,{icon:e.icon,class:"text-white size-4"},null,8,["icon"])])],2),c("div",zCe,[s.value?(m(),f("div",WCe,v(I(n)(e.senderTranslationKey,{sender:s.value})),1)):x("",!0),et(o.$slots,"default",{},()=>[e.title?(m(),f("div",jCe,v(e.title),1)):x("",!0),e.content?(m(),f("div",YCe,v(e.content),1)):x("",!0)])])]),e.action?(m(),f("div",XCe,[e.action.href?(m(),f("a",{key:0,href:e.action.href,rel:"noreferrer noopener nofollow",target:"_blank",class:"w-full block bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container"},v(e.action.label),9,qCe)):(m(),f("button",{key:1,class:"w-full bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container",onClick:a[0]||(a[0]=(...i)=>e.action.onClick&&e.action.onClick(...i))},v(e.action.label),1))])):x("",!0)])]),_:3}))}},ZCe={__name:"File",setup(e){const{attachments:t}=ls(),{t:n}=He(),s=w(()=>t.value[0].dataUrl),o=w(()=>s.value&&s.value.substring(s.value.lastIndexOf("/")+1)||n("CONVERSATION.UNKNOWN_FILE_TYPE")),a=w(()=>o.value.split(".").pop());return(i,l)=>(m(),P(Nm,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-n-alpha-3 dark:bg-n-alpha-white","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.FILE",content:decodeURI(o.value),action:{href:s.value,label:i.$t("CONVERSATION.DOWNLOAD")}},{icon:j(()=>[b(d2,{"file-type":a.value,class:"size-4"},null,8,["file-type"])]),_:1},8,["content","action"]))}},QCe={__name:"Audio",setup(e){const{attachments:t}=ls(),n=w(()=>t.value[0]);return(s,o)=>(m(),P(ro,{class:"bg-transparent","data-bubble-name":"audio"},{default:j(()=>[b(c2,{attachment:n.value,class:"p-2 text-n-slate-12 skip-context-menu"},null,8,["attachment"])]),_:1}))}},JCe={class:"relative group rounded-lg overflow-hidden"},eNe={key:0,class:"absolute p-2 flex items-start justify-end right-0 pointer-events-none"},tNe=["src"],sE={__name:"Video",emits:["error"],setup(e,{emit:t}){const n=t,s=U(!1),o=U(!1),{filteredCurrentChatAttachments:a,attachments:i}=ls(),l=()=>{s.value=!0,n("error")},r=w(()=>i.value[0]),d=w(()=>r.value.fileType===os.IG_REEL);return(u,p)=>(m(),f(pe,null,[b(ro,{class:"overflow-hidden p-3","data-bubble-name":"video",onClick:p[0]||(p[0]=h=>o.value=!0)},{default:j(()=>[c("div",JCe,[d.value?(m(),f("div",eNe,[b(Ht,{icon:"i-lucide-instagram",class:"text-white shadow-lg"})])):x("",!0),c("video",{controls:"",class:re(["rounded-lg skip-context-menu",{"max-w-48":d.value,"max-w-full":!d.value}]),src:r.value.dataUrl,onError:l},null,42,tNe)])]),_:1}),o.value?(m(),P(pr,{key:0,show:o.value,"onUpdate:show":p[1]||(p[1]=h=>o.value=h),attachment:I($s)(r.value),"all-attachments":I(a),onError:u.onError,onClose:p[2]||(p[2]=()=>o.value=!1)},null,8,["show","attachment","all-attachments","onError"])):x("",!0)],64))}},nNe={key:0,class:"mb-2"},sNe=["src"],aNe=["src"],oNe={key:3,class:"flex items-center gap-1 px-5 py-4 text-center rounded-lg bg-n-alpha-1"},iNe={class:"mb-0 text-n-slate-11"},lNe={__name:"InstagramStory",emits:["error"],setup(e,{emit:t}){const n=t,{variant:s,content:o,attachments:a}=ls(),i=w(()=>a.value[0]),l=U(!1),r=U(!1),d=w(()=>s.value===Rn.ACTIVITY?o.value:new tg(o.value).formattedMessage),u=()=>{l.value=!0,n("error")},p=()=>{r.value=!0,n("error")};return(h,g)=>{const _=ct("dompurify-html");return m(),P(ro,{class:"p-3 overflow-hidden","data-bubble-name":"ig-story"},{default:j(()=>[I(o)?ie((m(),f("div",nNe,null,512)),[[_,d.value]]):x("",!0),l.value?r.value?(m(),f("div",oNe,[b(Ht,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),c("p",iNe,v(h.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])):(m(),f("video",{key:2,class:"rounded-lg max-w-80 skip-context-menu",controls:"",src:i.value.dataUrl,onError:p},null,40,aNe)):(m(),f("img",{key:1,class:"rounded-lg max-w-80 skip-context-menu",src:i.value.dataUrl,onError:u},null,40,sNe))]),_:1})}}},rNe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"],aE=rNe,oE=[".gmail_quote_container",".gmail_quote",".OutlookQuote",".email-quote",".quoted-text",".quote",'[class*="quote"]','[class*="Quote"]'],cNe=[/On .* wrote:/i,/-----Original Message-----/i,/Sent: /i,/From: /i];class iE{static extractQuotes(t){const n=document.createElement("div");return n.innerHTML=t,oE.forEach(o=>{n.querySelectorAll(o).forEach(a=>{a.remove()})}),this.findTextNodeQuotes(n).forEach(o=>{o.remove()}),n.innerHTML}static hasQuotes(t){const n=document.createElement("div");n.innerHTML=t;for(const o of oE)if(n.querySelector(o))return!0;return this.findTextNodeQuotes(n).length>0}static findTextNodeQuotes(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);for(let o=s.nextNode();o!==null;o=s.nextNode())if(cNe.some(i=>i.test(o.textContent))){const i=this.findParentBlock(o);i&&!n.includes(i)&&n.push(i)}return n}static findParentBlock(t){const n=["DIV","P","BLOCKQUOTE","SECTION"];let s=t.parentElement;for(;s;){if(n.includes(s.tagName))return s;s=s.parentElement}return null}}const dNe={key:1},uNe={key:2},mNe={key:3},pNe={key:4},hNe={__name:"EmailMeta",setup(e){const{contentAttributes:t,status:n,sender:s}=ls(),o=w(()=>n.value===Cn.FAILED),a=w(()=>{var h,g;return((g=(h=t.value)==null?void 0:h.email)==null?void 0:g.from)??[]}),i=w(()=>{var h,g;return((g=(h=t.value)==null?void 0:h.email)==null?void 0:g.to)??[]}),l=w(()=>{var h,g,_;return((h=t.value)==null?void 0:h.ccEmails)??((_=(g=t.value)==null?void 0:g.email)==null?void 0:_.cc)??[]}),r=w(()=>{const h=a.value[0]??"",g=s.value.email??"";return!h&&!g?null:h===g?s.value.name:null}),d=w(()=>{var h,g,_;return((h=t.value)==null?void 0:h.bccEmails)??((_=(g=t.value)==null?void 0:g.email)==null?void 0:_.bcc)??[]}),u=w(()=>{var h,g;return((g=(h=t.value)==null?void 0:h.email)==null?void 0:g.subject)??""}),p=w(()=>a.value[0]||i.value.length||l.value.length||d.value.length||u.value);return(h,g)=>ie((m(),f("section",{class:re(["space-y-1 rtl:pl-9 ltr:pr-9 text-sm break-words",o.value?"text-n-ruby-11":"text-n-slate-11"])},[p.value?(m(),f(pe,{key:0},[a.value[0]?(m(),f("div",{key:0,class:re(o.value?"text-n-ruby-11":"text-n-slate-12")},[r.value?(m(),f(pe,{key:0},[c("span",null,v(r.value),1),be(" <"+v(a.value[0])+"> ",1)],64)):(m(),f(pe,{key:1},[be(v(a.value[0]),1)],64))],2)):x("",!0),i.value.length?(m(),f("div",dNe,v(h.$t("EMAIL_HEADER.TO"))+": "+v(i.value.join(", ")),1)):x("",!0),l.value.length?(m(),f("div",uNe,v(h.$t("EMAIL_HEADER.CC"))+": "+v(l.value.join(", ")),1)):x("",!0),d.value.length?(m(),f("div",mNe,v(h.$t("EMAIL_HEADER.BCC"))+": "+v(d.value.join(", ")),1)):x("",!0),u.value?(m(),f("div",pNe,v(h.$t("EMAIL_HEADER.SUBJECT"))+": "+v(u.value),1)):x("",!0)],64)):x("",!0)],2)),[[ln,p.value]])}},fNe={key:0,class:"absolute left-0 right-0 bottom-0 h-40 px-8 flex items-end bg-gradient-to-t from-n-slate-4 via-n-slate-4 via-20% to-transparent"},gNe={key:1,class:"px-4 pb-4 space-y-2"},lE={__name:"Index",setup(e){const{content:t,contentAttributes:n,attachments:s,messageType:o}=ls(),a=U(!1),i=U(!1),l=U(!1),r=U(!1),d=Us("contentContainer");ut(()=>{var R;a.value=((R=d.value)==null?void 0:R.scrollHeight)>400});const u=w(()=>o.value===us.OUTGOING),p=w(()=>!u.value),{hasTranslations:h,translationContent:g}=p2(n),_=w(()=>{var k,L,D;const R=((D=(L=(k=n==null?void 0:n.value)==null?void 0:k.email)==null?void 0:L.textContent)==null?void 0:D.full)??t.value;return R==null?void 0:R.replace(/\n/g,"<br>")}),T=w(()=>{var R,k,L;return((L=(k=(R=n==null?void 0:n.value)==null?void 0:R.email)==null?void 0:k.htmlContent)==null?void 0:L.full)??_.value}),S=w(()=>h.value&&!r.value?g.value:t.value),E=w(()=>h.value&&!r.value?g.value:_.value),y=w(()=>h.value&&!r.value?g.value:T.value),A=w(()=>iE.extractQuotes(y.value)),C=w(()=>iE.hasQuotes(y.value)),O=w(()=>r.value?"original":h.value?"translated":"original"),N=()=>{r.value=!r.value};return(R,k)=>(m(),P(ro,{class:re(["w-full",{"bg-n-slate-4":p.value,"bg-n-solid-blue":u.value}]),"data-bubble-name":"email"},{default:j(()=>[b(hNe,{class:re(["p-3",{"border-b border-n-strong":p.value,"border-b border-n-slate-8/20":u.value}])},null,8,["class"]),c("section",{ref_key:"contentContainer",ref:d,class:"p-3"},[c("div",{class:re({"max-h-[400px] overflow-hidden relative":!i.value&&a.value,"overflow-y-scroll relative":i.value})},[a.value&&!i.value?(m(),f("div",fNe,[c("button",{class:"text-n-slate-12 py-2 px-8 mx-auto text-center flex items-center gap-2",onClick:k[0]||(k[0]=L=>i.value=!0)},[b(Ht,{icon:"i-lucide-maximize-2"}),be(" "+v(R.$t("EMAIL_HEADER.EXPAND")),1)])])):x("",!0),u.value&&I(t)?(m(),P(r2,{key:1,class:"text-n-slate-12",content:S.value},null,8,["content"])):(m(),f(pe,{key:2},[l.value?(m(),P(I(xf),{key:`letter-quoted-${O.value}`,"class-name":"prose prose-bubble !max-w-none letter-render","allowed-css-properties":[...I(aE),"transform","transform-origin"],html:y.value,text:E.value},null,8,["allowed-css-properties","html","text"])):(m(),P(I(xf),{key:`letter-unquoted-${O.value}`,"class-name":"prose prose-bubble !max-w-none letter-render",html:A.value,"allowed-css-properties":[...I(aE),"transform","transform-origin"],text:E.value},null,8,["html","allowed-css-properties","text"]))],64)),C.value?(m(),f("button",{key:3,class:"text-n-slate-11 px-1 leading-none text-sm bg-n-alpha-black2 text-center flex items-center gap-1 mt-2",onClick:k[1]||(k[1]=L=>l.value=!l.value)},[l.value?(m(),f(pe,{key:0},[be(v(R.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)],64)):(m(),f(pe,{key:1},[be(v(R.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)],64)),b(Ht,{icon:l.value?"i-lucide-chevron-up":"i-lucide-chevron-down"},null,8,["icon"])])):x("",!0)],2)],512),I(h)?(m(),P(m2,{key:0,class:"py-2 px-3","showing-original":r.value,onToggle:N},null,8,["showing-original"])):x("",!0),Array.isArray(I(s))&&I(s).length?(m(),f("section",gNe,[b(u2,{attachments:I(s),class:"gap-1"},null,8,["attachments"])])):x("",!0)]),_:1},8,["class"]))}},_Ne={__name:"Unsupported",setup(e){return(t,n)=>(m(),P(ro,{class:"px-4 py-3 text-sm","data-bubble-name":"unsupported"},{default:j(()=>[be(v(t.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)]),_:1}))}},vNe={__name:"Contact",setup(e){const{attachments:t}=ls(),n=Ot(),{t:s}=He(),o=w(()=>t.value[0]),a=w(()=>o.value.fallbackTitle),i=w(()=>{const{meta:_}=o.value??{},{firstName:T,lastName:S}=_??{};return`${T??""} ${S??""}`.trim()}),l=w(()=>a.value.replace(/\s|-|[A-Za-z]/g,"")),r=w(()=>a.value.replace(/\D/g,""));function d(){return{name:i.value,phone_number:`+${r.value}`}}async function u(_){const S={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[_],attribute_model:"standard",custom_attribute_type:""}]};return(await n.dispatch("contacts/filter",{queryPayload:S,resetState:!1})).shift()}function p(_){const S=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${_}`;window.open(S,"_blank")}async function h(){try{let _=await u(r);_||(_=await n.dispatch("contacts/create",d()),Te(s("CONTACT_FORM.SUCCESS_MESSAGE"))),p(_.id)}catch(_){_ instanceof wc?_.data.includes("phone_number")&&Te(s("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):_ instanceof ar?Te(_.data):Te(s("CONTACT_FORM.ERROR_MESSAGE"))}}const g=w(()=>({label:s("CONVERSATION.SAVE_CONTACT"),onClick:h}));return(_,T)=>(m(),P(Nm,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-[#D6409F]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.CONTACT",title:i.value,content:a.value,action:l.value?g.value:null},null,8,["title","content","action"]))}},bNe={key:0,class:"text-sm truncate text-n-slate-12"},ENe={key:1,class:"video-call--container"},TNe=["src"],yNe={key:2},ANe={__name:"Dyte",setup(e){const{content:t,sender:n,id:s}=ls(),{t:o}=He(),a=U(!1),i=U(""),l=w(()=>ME(i.value)),r=async()=>{a.value=!0;try{const{data:{token:p}={}}=await y_.addParticipantToMeeting(s.value);i.value=p}catch{Te(o("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{a.value=!1}},d=()=>{i.value=""},u=w(()=>({label:o("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),onClick:r}));return(p,h)=>(m(),P(Nm,{icon:"i-ph-video-camera-fill","icon-bg-color":"bg-[#2781F6]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.MEETING",action:u.value},{default:j(()=>[I(n)?x("",!0):(m(),f("div",bNe,v(I(t)),1)),i.value?(m(),f("div",ENe,[c("iframe",{src:l.value,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,TNe),c("button",{class:"px-4 py-2 text-sm rounded-lg bg-n-solid-3 mt-3",onClick:d},v(p.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM")),1)])):(m(),f("div",yNe,v("")))]),_:1},8,["action"]))}},SNe={__name:"Location",setup(e){const{attachments:t}=ls(),{t:n}=He(),s=w(()=>t.value[0]),o=w(()=>s.value.coordinatesLat),a=w(()=>s.value.coordinatesLong),i=w(()=>s.value.fallbackTitle??s.value.fallback_title),l=w(()=>`https://maps.google.com/?q=${o.value},${a.value}`);return(r,d)=>(m(),P(Nm,{icon:"i-ph-navigation-arrow-fill","icon-bg-color":"bg-[#0D9B8A]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.LOCATION",content:i.value,action:{label:I(n)("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP"),href:l.value}},null,8,["content","action"]))}},INe={key:0,class:"mt-4"},CNe={class:"text-n-slate-11 italic"},NNe={key:0,class:"text-n-slate-11 italic mt-2"},ONe={__name:"CSAT",setup(e){const{contentAttributes:t}=ls(),{t:n}=He(),s=w(()=>{var i,l;return((l=(i=t.value)==null?void 0:i.submittedValues)==null?void 0:l.csatSurveyResponse)??{}}),o=w(()=>!!s.value.rating),a=w(()=>o.value?tl.find(i=>i.value===s.value.rating):null);return(i,l)=>(m(),P(ro,{class:"px-4 py-3","data-bubble-name":"csat"},{default:j(()=>[c("h4",null,v(I(n)("CONVERSATION.CSAT_REPLY_MESSAGE")),1),o.value?(m(),f("dl",INe,[c("dt",CNe,v(I(n)("CONVERSATION.RATING_TITLE")),1),c("dd",null,v(I(n)(a.value.translationKey)),1),s.value.feedbackMessage?(m(),f("dt",NNe,v(I(n)("CONVERSATION.FEEDBACK_TITLE")),1)):x("",!0),c("dd",null,v(s.value.feedbackMessage),1)])):x("",!0)]),_:1}))}},xNe=["title"],wNe={key:0,class:"mt-4"},RNe={class:"text-n-slate-11 italic mt-2"},$Ne={key:1,class:"my-2 font-medium"},MNe={__name:"Form",setup(e){const{content:t,contentAttributes:n,contentType:s}=ls(),{t:o}=He(),a=w(()=>{var i;if(s.value===po.FORM){const{items:l,submittedValues:r=[]}=n.value;return r.length?r.map(d=>{const u=l.find(p=>p.name===d.name);return{title:d.value,value:d.value,label:u==null?void 0:u.label}}):[]}if(s.value===po.INPUT_SELECT){const[l]=((i=n.value)==null?void 0:i.submittedValues)??[];return l?[{title:l.title,value:l.value,label:""}]:[]}return[]});return(i,l)=>{const r=ct("dompurify-html");return m(),P(ro,{class:"px-4 py-3","data-bubble-name":"csat"},{default:j(()=>[ie(c("span",{title:I(t)},null,8,xNe),[[r,I(t)]]),a.value.length?(m(),f("dl",wNe,[(m(!0),f(pe,null,ye(a.value,d=>(m(),f(pe,{key:d.title},[c("dt",RNe,v(d.label||I(o)("CONVERSATION.RESPONSE")),1),c("dd",null,v(d.title),1)],64))),128))])):(m(),f("div",$Ne,v(I(o)("CONVERSATION.NO_RESPONSE")),1))]),_:1})}}},kNe={class:"text-xs text-n-ruby-11 flex items-center gap-1.5"},LNe={class:"relative group"},DNe={class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer"},PNe={__name:"MessageError",props:{error:{type:String,required:!0}},setup(e){const{orientation:t}=ls(),{t:n}=He();return(s,o)=>(m(),f("div",kNe,[c("span",null,v(I(n)("CHAT_LIST.FAILED_TO_SEND")),1),c("div",LNe,[c("div",DNe,[b(Ht,{icon:"i-lucide-alert-triangle",class:"text-n-ruby-11 size-[14px]"})]),c("div",{class:re(["absolute bg-n-alpha-3 px-4 py-3 border rounded-xl border-n-strong text-n-slate-12 bottom-6 w-52 text-xs backdrop-blur-[100px] shadow-[0px_0px_24px_0px_rgba(0,0,0,0.12)] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all break-all",{"ltr:left-0 rtl:right-0":I(t)===I(Ts).LEFT,"ltr:right-0 rtl:left-0":I(t)===I(Ts).RIGHT}])},v(e.error),3)])]))}},BNe=["id","data-message-id"],FNe={key:0},UNe={key:0,class:"[grid-area:avatar] flex items-end"},GNe={key:2,class:"context-menu-wrap"},VNe={__name:"Message",props:{id:{type:Number,required:!0},messageType:{type:Number,required:!0,validator:e=>Object.values(us).includes(e)},status:{type:String,required:!0,validator:e=>Object.values(Cn).includes(e)},attachments:{type:Array,default:()=>[]},content:{type:String,default:null},contentAttributes:{type:Object,default:()=>({})},contentType:{type:String,default:"text",validator:e=>Object.values(po).includes(e)},conversationId:{type:Number,required:!0},createdAt:{type:Number,required:!0},currentUserId:{type:Number,required:!0},groupWithNext:{type:Boolean,default:!1},inboxId:{type:Number,default:null},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:null},isEmailInbox:{type:Boolean,default:!1},private:{type:Boolean,default:!1},sender:{type:Object,default:null},senderId:{type:Number,default:null},senderType:{type:String,default:null},sourceId:{type:String,default:""}},setup(e){const t=e,n=U({}),s=U(!1),o=U(!1),{t:a}=He(),i=xn(),l=w(()=>{var B;return t.private?Rn.PRIVATE:t.isEmailInbox&&[us.INCOMING,us.OUTGOING].includes(t.messageType)||t.contentType===po.INCOMING_EMAIL?Rn.EMAIL:t.status===Cn.FAILED?Rn.ERROR:(B=t.contentAttributes)!=null&&B.isUnsupported?Rn.UNSUPPORTED:(!t.sender||t.sender.type===Dh.AGENT_BOT)&&t.messageType===us.OUTGOING?Rn.BOT:{[us.INCOMING]:Rn.USER,[us.ACTIVITY]:Rn.ACTIVITY,[us.OUTGOING]:Rn.AGENT,[us.TEMPLATE]:Rn.TEMPLATE}[t.messageType]||Rn.USER}),r=w(()=>{var B,H;if(t.status===Cn.PROGRESS&&t.messageType===us.OUTGOING)return!0;const M=t.senderId??((B=t.sender)==null?void 0:B.id),K=t.senderType??((H=t.sender)==null?void 0:H.type);return!K||!M?!1:K.toLowerCase()===Dh.USER.toLowerCase()&&t.currentUserId===M}),d=w(()=>r.value?Ts.RIGHT:t.messageType===us.ACTIVITY?Ts.CENTER:Ts.LEFT),u=w(()=>({[Ts.LEFT]:"justify-start",[Ts.RIGHT]:"justify-end",[Ts.CENTER]:"justify-center"})[d.value]),p=w(()=>({[Ts.LEFT]:"grid grid-cols-[24px_1fr]",[Ts.RIGHT]:"grid grid-cols-1fr"})[d.value]),h=w(()=>({[Ts.LEFT]:`
      "avatar bubble"
      "spacer meta"
    `,[Ts.RIGHT]:`
      "bubble"
      "meta"
    `})[d.value]),g=w(()=>t.status===Cn.FAILED?!1:t.groupWithNext),_=w(()=>!(t.messageType===us.ACTIVITY||d.value===Ts.RIGHT)),T=w(()=>{var M;if(t.isEmailInbox&&!t.private&&[us.INCOMING,us.OUTGOING].includes(t.messageType))return lE;if(t.contentType===po.INPUT_CSAT)return ONe;if([po.INPUT_SELECT,po.FORM].includes(t.contentType))return MNe;if(t.contentType===po.INCOMING_EMAIL)return lE;if((M=t.contentAttributes)!=null&&M.isUnsupported)return _Ne;if(t.contentAttributes.type==="dyte")return ANe;if(t.contentAttributes.imageType==="story_mention")return lNe;if(Array.isArray(t.attachments)&&t.attachments.length===1){const K=t.attachments[0].fileType;if(!t.content){if(K===os.IMAGE)return VCe;if(K===os.FILE)return ZCe;if(K===os.AUDIO)return QCe;if(K===os.VIDEO||K===os.IG_REEL)return sE;if(K===os.LOCATION)return SNe}if(K===os.CONTACT)return vNe}return kCe}),S=w(()=>{var M;return!(t.status===Cn.FAILED||t.status===Cn.PROGRESS||(M=t.contentAttributes)!=null&&M.isUnsupported)}),E=w(()=>t.messageType!==us.ACTIVITY),y=w(()=>{var M;return(M=t.contentAttributes)==null?void 0:M.deleted}),A=w(()=>({id:t.id,content_attributes:t.contentAttributes,content:t.content,conversation_id:t.conversationId})),C=w(()=>{const M=!!t.content,K=!!(t.attachments&&t.attachments.length>0),B=t.messageType===us.OUTGOING;return{copy:M,delete:M||K,cannedResponse:B&&M,replyTo:!t.private&&t.inboxSupportsReplyTo.outgoing}}),O=w(()=>{var G;const M=!!(t.attachments&&t.attachments.length>0),K=t.contentType===po.INCOMING_EMAIL,B=(G=t.contentAttributes)==null?void 0:G.isUnsupported,H=t.contentType===po.INTEGRATIONS;return M||t.content||K||B||H});function N(M){var B,H;(B=M.target)!=null&&B.classList.contains("skip-context-menu")||((H=M.target)==null?void 0:H.tagName.toLowerCase())==="a"||getSelection().toString()||(M.preventDefault(),M.type==="contextmenu"&&jt(rl.OPEN_MESSAGE_CONTEXT_MENU),n.value={x:M.pageX||M.clientX,y:M.pageY||M.clientY},o.value=!0)}function R(){o.value=!1,n.value={x:null,y:null}}function k(){const M=Pa.MESSAGE_REPLY_TO,{conversationId:K,id:B}=t;Na.updateJsonStore(M,K,B),yt.emit(sn.TOGGLE_REPLY_TO_MESSAGE,t)}const L=w(()=>{var M;return!t.sender||t.sender.type===Dh.AGENT_BOT?{name:a("CONVERSATION.BOT"),src:""}:t.sender?{name:t.sender.name,src:(M=t.sender)==null?void 0:M.thumbnail}:{name:"",src:""}}),D=w(()=>L.value.name===""?"":`${a("CONVERSATION.SENT_BY")} ${L.value.name}`);return ut(()=>{if(Number(i.query.messageId)!==Number(t.id))return;s.value=!0,i$(()=>{s.value=!1},1e3)}),iCe({...gC(t),isPrivate:w(()=>t.private),variant:l,orientation:d,isMyMessage:r,shouldGroupWithNext:g}),(M,K)=>{const B=ct("tooltip");return O.value?(m(),f("div",{key:0,id:`message${t.id}`,class:re(["flex w-full message-bubble-container mb-2",[u.value,{"group-with-next":g.value,"bg-n-alpha-1":s.value}]]),"data-message-id":t.id},[l.value===I(Rn).ACTIVITY?(m(),f("div",FNe,[b(DCe,{content:e.content},null,8,["content"])])):(m(),f("div",{key:1,class:re([[p.value,{"gap-y-2":e.contentAttributes.externalError,"w-full":l.value===I(Rn).EMAIL}],"gap-x-3"]),style:At({gridTemplateAreas:h.value})},[!g.value&&_.value?ie((m(),f("div",UNe,[b(yn,As(L.value,{size:24}),null,16)])),[[B,D.value,void 0,{"right-end":!0}]]):x("",!0),c("div",{class:re(["[grid-area:bubble] flex",{"ltr:pl-9 rtl:pl-0 justify-end":d.value===I(Ts).RIGHT,"min-w-0":l.value===I(Rn).EMAIL}]),onContextmenu:K[0]||(K[0]=H=>N(H))},[(m(),P(hs(T.value)))],34),e.contentAttributes.externalError?(m(),P(PNe,{key:1,class:re(["[grid-area:meta]",u.value]),error:e.contentAttributes.externalError},null,8,["class","error"])):x("",!0)],6)),S.value?(m(),f("div",GNe,[E.value&&!y.value?(m(),P(o2,{key:0,"context-menu-position":n.value,"is-open":o.value,"enabled-options":C.value,message:A.value,"hide-button":"",onOpen:N,onClose:R,onReplyTo:k},null,8,["context-menu-position","is-open","enabled-options","message"])):x("",!0)])):x("",!0)],10,BNe)):x("",!0)}}},HNe={class:"px-4 bg-n-background"},KNe={__name:"MessageList",props:{currentUserId:{type:Number,required:!0},firstUnreadId:{type:Number,default:null},isAnEmailChannel:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({incoming:!1,outgoing:!1})},messages:{type:Array,default:()=>[]}},setup(e){const t=e,n=w(()=>To(t.messages,{deep:!0})),s=(a,i)=>{var T,S;if(a===i.length-1)return!1;const l=i[a],r=i[a+1];if(r.status==="failed")return!1;const d=r.senderId??((T=r.sender)==null?void 0:T.id),u=l.senderId??((S=l.sender)==null?void 0:S.id),p=d===u,h=r.messageType,g=l.messageType,_=h===us.TEMPLATE&&g===us.TEMPLATE;return!p||_||g!==h?!1:Math.floor(r.createdAt/60)===Math.floor(l.createdAt/60)},o=a=>{var r,d,u;if(!a)return null;const i=((r=a.contentAttributes)==null?void 0:r.inReplyTo)??((d=a.content_attributes)==null?void 0:d.in_reply_to);if(!i)return null;const l=(u=t.messages)==null?void 0:u.find(p=>p.id===i);return l?To(l):null};return(a,i)=>(m(),f("ul",HNe,[et(a.$slots,"beforeAll"),(m(!0),f(pe,null,ye(n.value,(l,r)=>(m(),f(pe,{key:l.id},[e.firstUnreadId&&l.id===e.firstUnreadId?et(a.$slots,"unreadBadge",{key:0}):x("",!0),b(VNe,As({ref_for:!0},l,{"is-email-inbox":e.isAnEmailChannel,"in-reply-to":o(l),"group-with-next":s(r,n.value),"inbox-supports-reply-to":e.inboxSupportsReplyTo,"current-user-id":e.currentUserId,"data-clarity-mask":"True"}),null,16,["is-email-inbox","in-reply-to","group-with-next","inbox-supports-reply-to","current-user-id"])],64))),128)),et(a.$slots,"after")]))}},zNe={name:"LabelSuggestion",components:{Avatar:FN,NextButton:he},props:{suggestedLabels:{type:Array,required:!0},chatLabels:{type:Array,required:!1,default:()=>[]}},setup(){const{isAIIntegrationEnabled:e}=Kc();return{isAIIntegrationEnabled:e}},data(){return{isDismissed:!1,isHovered:!1,selectedLabels:[]}},computed:{...gt({allLabels:"labels/getLabels",currentAccountId:"getCurrentAccountId",currentChat:"getSelectedChat"}),conversationId(){var e;return(e=this.currentChat)==null?void 0:e.id},labelTooltip(){return this.preparedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.MULTIPLE_SUGGESTION"):this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.SINGLE_SUGGESTION")},addButtonText(){return this.selectedLabels.length===1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABEL"):this.selectedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABELS"):this.$t("LABEL_MGMT.SUGGESTIONS.ADD_ALL_LABELS")},preparedLabels(){return this.allLabels.filter(e=>this.suggestedLabels.includes(e.title))},shouldShowSuggestions(){return this.isDismissed||!this.isAIIntegrationEnabled?!1:this.preparedLabels.length&&this.chatLabels.length===0}},watch:{conversationId:{immediate:!0,handler(){this.selectedLabels=[],this.isDismissed=this.isConversationDismissed()}}},methods:{pushOrAddLabel(e){if(this.preparedLabels.length===1){this.addAllLabels();return}this.selectedLabels.includes(e)?this.selectedLabels=this.selectedLabels.filter(t=>t!==e):this.selectedLabels.push(e)},dismissSuggestions(){Na.setFlag(Pa.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId),this.isDismissed=!0,this.trackLabelEvent(iu.DISMISS_LABEL_SUGGESTION)},isConversationDismissed(){return Na.getFlag(Pa.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId)},addAllLabels(){let e=this.selectedLabels;e.length||(e=this.preparedLabels.map(t=>t.title)),this.$store.dispatch("conversationLabels/update",{conversationId:this.conversationId,labels:e}),this.trackLabelEvent(iu.APPLY_LABEL_SUGGESTION)},trackLabelEvent(e){const t={conversationId:this.conversationId,account:this.currentAccountId,suggestions:this.suggestedLabels,labelsApplied:this.selectedLabels.length?this.selectedLabels:this.suggestedLabels};jt(e,t)}}},WNe={class:"wrap"},jNe={class:"label-suggestion--container"},YNe={class:"label-suggestion--title"},XNe={class:"label-suggestion--options"},qNe=["onClick"],ZNe={key:0,class:"inline-flex items-center gap-1"},QNe={class:"sender--info has-tooltip","data-original-title":"null"};function JNe(e,t,n,s,o,a){const i=F("woot-label"),l=F("NextButton"),r=F("fluent-icon"),d=F("Avatar"),u=F("woot-thumbnail"),p=ct("tooltip");return a.shouldShowSuggestions?(m(),f("li",{key:0,class:"label-suggestion right",onMouseover:t[0]||(t[0]=h=>o.isHovered=!0),onMouseleave:t[1]||(t[1]=h=>o.isHovered=!1)},[c("div",WNe,[c("div",jNe,[c("h6",YNe,v(e.$t("LABEL_MGMT.SUGGESTIONS.SUGGESTED_LABELS")),1),c("div",XNe,[(m(!0),f(pe,null,ye(a.preparedLabels,h=>ie((m(),f("button",{key:h.title,class:"label-suggestion--option !px-0",onClick:g=>a.pushOrAddLabel(h.title)},[b(i,As({variant:"dashed",ref_for:!0},h,{"bg-color":o.selectedLabels.includes(h.title)?"var(--w-100)":""}),null,16,["bg-color"])],8,qNe)),[[p,{content:o.selectedLabels.includes(h.title)?e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT"):a.labelTooltip,delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])),128)),a.preparedLabels.length===1?ie((m(),P(l,{key:0,faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:o.isHovered?"ruby":"blue",onClick:a.dismissSuggestions},null,8,["color","onClick"])),[[p,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]]):x("",!0)]),a.preparedLabels.length>1?(m(),f("div",ZNe,[b(l,{xs:"",icon:"i-lucide-plus",class:"flex-shrink-0",variant:o.selectedLabels.length===0?"faded":"solid",label:a.addButtonText,onClick:a.addAllLabels},null,8,["variant","label","onClick"]),ie(b(l,{faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:o.isHovered?"ruby":"blue",onClick:a.dismissSuggestions},null,8,["color","onClick"]),[[p,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])):x("",!0)]),c("div",QNe,[ie((m(),P(u,{size:"16px"},{default:j(()=>[b(d,{class:"user-thumbnail thumbnail-rounded"},{default:j(()=>[b(r,{class:"chatwoot-ai-icon",icon:"chatwoot-ai"})]),_:1})]),_:1})),[[p,{content:e.$t("LABEL_MGMT.SUGGESTIONS.POWERED_BY"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])])],32)):x("",!0)}const eOe=Re(zNe,[["render",JNe],["__scopeId","data-v-9c457524"]]),tOe=(e,t)=>e+t.scrollHeight,nOe=(e,t,n)=>{let s=[...n].reduce(tOe,0);return e-s-t/2},Ph={FACEBOOK:"https://developers.facebook.com/docs/messenger-platform/policy/policy-overview/",TWILIO_WHATSAPP:"https://www.twilio.com/docs/whatsapp/tutorial/send-whatsapp-notification-messages-templates#sending-non-template-messages-within-a-24-hour-session",WHATSAPP_CLOUD:"https://business.whatsapp.com/policy#:~:text=You%20may%20reply%20to%20a,messages%20via%20approved%20Message%20Templates."},sOe={components:{Message:oCe,NextMessageList:KNe,ReplyBox:OSe,Banner:Lc,ConversationLabelSuggestion:eOe,NextButton:he},mixins:[Ro],props:{isContactPanelOpen:{type:Boolean,default:!1},isInboxView:{type:Boolean,default:!1}},emits:["contactPanelToggle"],setup(){const e=U(!1),{isEnterprise:t}=Ra(),n=()=>{e.value=!1},s=()=>{e.value=!e.value};Vs({Escape:{action:n}});const{isAIIntegrationEnabled:a,isLabelSuggestionFeatureEnabled:i,fetchIntegrationsIfRequired:l,fetchLabelSuggestions:r}=Kc(),d=Ve("getCurrentAccountId"),p=Ve("accounts/isFeatureEnabledonAccount").value(d.value,xt.CHATWOOT_V4);return{isEnterprise:t,isPopOutReplyBox:e,closePopOutReplyBox:n,showPopOutReplyBox:s,isAIIntegrationEnabled:a,isLabelSuggestionFeatureEnabled:i,fetchIntegrationsIfRequired:l,fetchLabelSuggestions:r,showNextBubbles:p}},data(){return{isLoadingPrevious:!0,heightBeforeLoad:null,conversationPanel:null,hasUserScrolled:!1,isProgrammaticScroll:!1,messageSentSinceOpened:!1,labelSuggestions:[]}},computed:{...gt({currentChat:"getSelectedChat",currentUserId:"getCurrentUserID",listLoadingStatus:"getAllMessagesLoaded",currentAccountId:"getCurrentAccountId"}),isOpen(){var e;return((e=this.currentChat)==null?void 0:e.status)===$t.STATUS_TYPE.OPEN},shouldShowLabelSuggestions(){return this.isOpen&&this.isEnterprise&&this.isAIIntegrationEnabled&&!this.messageSentSinceOpened},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},typingUsersList(){return this.$store.getters["conversationTypingStatus/getUserList"](this.currentChat.id)},isAnyoneTyping(){return this.typingUsersList.length!==0},typingUserNames(){const e=this.typingUsersList;if(this.isAnyoneTyping){const[t,n]=fO(e);return this.$t(t,n)}return""},getMessages(){const e=this.currentChat.messages||[];return this.isAWhatsAppChannel?bge(e):e},readMessages(){return Tge(this.getMessages,this.currentChat.agent_last_seen_at)},unReadMessages(){return yge(this.getMessages,this.currentChat.agent_last_seen_at)},shouldShowSpinner(){return this.currentChat&&this.currentChat.dataFetched===void 0||!this.listLoadingStatus&&this.isLoadingPrevious},conversationType(){const{additional_attributes:e}=this.currentChat;return(e?e.type:"")||""},isATweet(){return this.conversationType==="tweet"},isRightOrLeftIcon(){return this.isContactPanelOpen?"arrow-chevron-right":"arrow-chevron-left"},getLastSeenAt(){const{contact_last_seen_at:e}=this.currentChat;return e},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,t=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===Dt.FB&&t},replyWindowBannerMessage(){if(this.isAWhatsAppChannel)return this.$t("CONVERSATION.TWILIO_WHATSAPP_CAN_REPLY");if(this.isAPIInbox){const{additional_attributes:e={}}=this.inbox;if(e){const{agent_reply_time_window_message:t,agent_reply_time_window:n}=e;return t||this.$t("CONVERSATION.API_HOURS_WINDOW",{hours:n})}return""}return this.$t("CONVERSATION.CANNOT_REPLY")},replyWindowLink(){return this.isAFacebookInbox||this.isAInstagramChannel?Ph.FACEBOOK:this.isAWhatsAppCloudChannel?Ph.WHATSAPP_CLOUD:this.isAPIInbox?"":Ph.TWILIO_WHATSAPP},replyWindowLinkText(){return this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAInstagramChannel?this.$t("CONVERSATION.24_HOURS_WINDOW"):this.isAPIInbox?"":this.$t("CONVERSATION.TWILIO_WHATSAPP_24_HOURS_WINDOW")},unreadMessageCount(){return this.currentChat.unread_count||0},unreadMessageLabel(){const e=this.unreadMessageCount>9?"9+":this.unreadMessageCount,t=this.unreadMessageCount>1?"CONVERSATION.UNREAD_MESSAGES":"CONVERSATION.UNREAD_MESSAGE";return`${e} ${this.$t(t)}`},isInstagramDM(){return this.conversationType==="instagram_direct_message"},inboxSupportsReplyTo(){const e=this.inboxHasFeature(bc.REPLY_TO),t=this.inboxHasFeature(bc.REPLY_TO_OUTGOING)&&!this.is360DialogWhatsAppChannel;return{incoming:e,outgoing:t}}},watch:{currentChat(e,t){e.id!==t.id&&(this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions(),this.messageSentSinceOpened=!1)}},created(){yt.on(sn.SCROLL_TO_MESSAGE,this.onScrollToMessage),yt.on(sn.FETCH_LABEL_SUGGESTIONS,this.fetchSuggestions),yt.on(sn.MESSAGE_SENT,()=>{this.messageSentSinceOpened=!0})},mounted(){this.addScrollListener(),this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions()},unmounted(){this.removeBusListeners(),this.removeScrollListener()},methods:{async fetchSuggestions(){this.labelSuggestions=[],!this.isLabelSuggestionDismissed()&&this.isEnterprise&&(await this.fetchIntegrationsIfRequired(),this.isLabelSuggestionFeatureEnabled&&(this.labelSuggestions=await this.fetchLabelSuggestions({conversationId:this.currentChat.id}),this.$nextTick(()=>{const{messageId:e}=this.$route.query;!e&&!this.hasUserScrolled&&this.scrollToBottom()})))},isLabelSuggestionDismissed(){return Na.getFlag(Pa.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.currentChat.id)},fetchAllAttachmentsFromCurrentChat(){this.$store.dispatch("fetchAllAttachments",this.currentChat.id)},removeBusListeners(){yt.off(sn.SCROLL_TO_MESSAGE,this.onScrollToMessage)},onScrollToMessage({messageId:e=""}={}){this.$nextTick(()=>{const t=document.getElementById("message"+e);t?(this.isProgrammaticScroll=!0,t.scrollIntoView({behavior:"smooth"}),this.fetchPreviousMessages()):this.scrollToBottom()}),this.makeMessagesRead()},addScrollListener(){this.conversationPanel=this.$el.querySelector(".conversation-panel"),this.setScrollParams(),this.conversationPanel.addEventListener("scroll",this.handleScroll),this.$nextTick(()=>this.scrollToBottom()),this.isLoadingPrevious=!1},removeScrollListener(){this.conversationPanel.removeEventListener("scroll",this.handleScroll)},scrollToBottom(){this.isProgrammaticScroll=!0;let e=[],t=this.conversationPanel.querySelector(".label-suggestion");this.unreadMessageCount>0?e=this.conversationPanel.querySelectorAll(".message--unread"):t?e=[t]:e=Array.from(this.conversationPanel.querySelectorAll(".message--read")).slice(-1),this.conversationPanel.scrollTop=nOe(this.conversationPanel.scrollHeight,this.$el.scrollHeight,e)},onToggleContactPanel(){this.$emit("contactPanelToggle")},setScrollParams(){this.heightBeforeLoad=this.conversationPanel.scrollHeight,this.scrollTopBeforeLoad=this.conversationPanel.scrollTop},async fetchPreviousMessages(e=0){this.setScrollParams();const t=this.currentChat.dataFetched===!0&&!this.listLoadingStatus&&!this.isLoadingPrevious;if(e<100&&!this.isLoadingPrevious&&t){this.isLoadingPrevious=!0;try{await this.$store.dispatch("fetchPreviousMessages",{conversationId:this.currentChat.id,before:this.currentChat.messages[0].id});const n=this.conversationPanel.scrollHeight-this.heightBeforeLoad;this.conversationPanel.scrollTop=this.scrollTopBeforeLoad+n,this.setScrollParams()}catch{}finally{this.isLoadingPrevious=!1}}},handleScroll(e){this.isProgrammaticScroll?(this.isProgrammaticScroll=!1,this.hasUserScrolled=!1):this.hasUserScrolled=!0,yt.emit(sn.ON_MESSAGE_LIST_SCROLL),this.fetchPreviousMessages(e.target.scrollTop)},makeMessagesRead(){this.$store.dispatch("markMessagesRead",{id:this.currentChat.id})},getInReplyToMessage(e){var n,s;if(!e)return{};const t=(n=e.content_attributes)==null?void 0:n.in_reply_to;return t?(s=this.currentChat)==null?void 0:s.messages.find(o=>o.id===t):{}}}},aOe={class:"flex flex-col justify-between flex-grow h-full min-w-0 m-0"},oOe={class:"flex justify-end"},iOe={class:"min-h-[4rem]"},lOe={key:0,class:"spinner message"},rOe={class:"unread--toast"},cOe={key:3,class:"conversation-panel"},dOe={class:"min-h-[4rem]"},uOe={key:0,class:"spinner message"},mOe={class:"unread--toast"},pOe={key:0,class:"absolute flex items-center w-full h-0 -top-7"},hOe={class:"flex py-2 pr-4 pl-5 shadow-md rounded-full bg-white dark:bg-slate-700 text-n-slate-11 text-xs font-semibold my-2.5 mx-auto"};function fOe(e,t,n,s,o,a){var h;const i=F("Banner"),l=F("NextButton"),r=F("ConversationLabelSuggestion"),d=F("NextMessageList"),u=F("Message"),p=F("ReplyBox");return m(),f("div",aOe,[e.currentChat.can_reply?a.hasDuplicateInstagramInbox?(m(),P(i,{key:1,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":e.$t("CONVERSATION.OLD_INSTAGRAM_INBOX_REPLY_BANNER")},null,8,["banner-message"])):x("",!0):(m(),P(i,{key:0,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":a.replyWindowBannerMessage,"href-link":a.replyWindowLink,"href-link-text":a.replyWindowLinkText},null,8,["banner-message","href-link","href-link-text"])),c("div",oOe,[b(l,{faded:"",xs:"",slate:"",class:re(["!rounded-r-none rtl:rotate-180 !rounded-2xl !fixed z-10",n.isInboxView?"top-52 md:top-40":"top-32"]),icon:n.isContactPanelOpen?"i-ph-caret-right-fill":"i-ph-caret-left-fill",onClick:a.onToggleContactPanel},null,8,["icon","class","onClick"])]),s.showNextBubbles?(m(),P(d,{key:2,class:"conversation-panel","current-user-id":e.currentUserId,"first-unread-id":(h=a.unReadMessages[0])==null?void 0:h.id,"is-an-email-channel":e.isAnEmailChannel,"inbox-supports-reply-to":a.inboxSupportsReplyTo,messages:a.getMessages},{beforeAll:j(()=>[b(Ms,{name:"slide-up"},{default:j(()=>[c("li",iOe,[a.shouldShowSpinner?(m(),f("span",lOe)):x("",!0)])]),_:1})]),unreadBadge:j(()=>[ie(c("li",rOe,[c("span",null,v(a.unreadMessageLabel),1)],512),[[ln,a.unreadMessageCount!=0]])]),after:j(()=>[a.shouldShowLabelSuggestions?(m(),P(r,{key:0,"suggested-labels":o.labelSuggestions,"chat-labels":e.currentChat.labels,"conversation-id":e.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):x("",!0)]),_:1},8,["current-user-id","first-unread-id","is-an-email-channel","inbox-supports-reply-to","messages"])):(m(),f("ul",cOe,[b(Ms,{name:"slide-up"},{default:j(()=>[c("li",dOe,[a.shouldShowSpinner?(m(),f("span",uOe)):x("",!0)])]),_:1}),(m(!0),f(pe,null,ye(a.readMessages,g=>(m(),P(u,{key:g.id,class:"message--read ph-no-capture","data-clarity-mask":"True",data:g,"is-a-tweet":a.isATweet,"is-a-whatsapp-channel":e.isAWhatsAppChannel,"is-web-widget-inbox":e.isAWebWidgetInbox,"is-a-facebook-inbox":e.isAFacebookInbox,"is-an-email-inbox":e.isAnEmailChannel,"is-instagram":a.isInstagramDM,"inbox-supports-reply-to":a.inboxSupportsReplyTo,"in-reply-to":a.getInReplyToMessage(g)},null,8,["data","is-a-tweet","is-a-whatsapp-channel","is-web-widget-inbox","is-a-facebook-inbox","is-an-email-inbox","is-instagram","inbox-supports-reply-to","in-reply-to"]))),128)),ie(c("li",mOe,[c("span",null,v(a.unreadMessageCount>9?"9+":a.unreadMessageCount)+" "+v(a.unreadMessageCount>1?e.$t("CONVERSATION.UNREAD_MESSAGES"):e.$t("CONVERSATION.UNREAD_MESSAGE")),1)],512),[[ln,a.unreadMessageCount!=0]]),(m(!0),f(pe,null,ye(a.unReadMessages,g=>(m(),P(u,{key:g.id,class:"message--unread ph-no-capture","data-clarity-mask":"True",data:g,"is-a-tweet":a.isATweet,"is-a-whatsapp-channel":e.isAWhatsAppChannel,"is-web-widget-inbox":e.isAWebWidgetInbox,"is-a-facebook-inbox":e.isAFacebookInbox,"is-instagram-dm":a.isInstagramDM,"inbox-supports-reply-to":a.inboxSupportsReplyTo,"in-reply-to":a.getInReplyToMessage(g)},null,8,["data","is-a-tweet","is-a-whatsapp-channel","is-web-widget-inbox","is-a-facebook-inbox","is-instagram-dm","inbox-supports-reply-to","in-reply-to"]))),128)),a.shouldShowLabelSuggestions?(m(),P(r,{key:0,"suggested-labels":o.labelSuggestions,"chat-labels":e.currentChat.labels,"conversation-id":e.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):x("",!0)])),c("div",{class:re(["conversation-footer",{"modal-mask":s.isPopOutReplyBox,"bg-n-background":s.showNextBubbles&&!s.isPopOutReplyBox}])},[a.isAnyoneTyping?(m(),f("div",pOe,[c("div",hOe,[be(v(a.typingUserNames)+" ",1),t[1]||(t[1]=c("img",{class:"w-6 ltr:ml-2 rtl:mr-2",src:sN,alt:"Someone is typing"},null,-1))])])):x("",!0),b(p,{"popout-reply-box":s.isPopOutReplyBox,"onUpdate:popoutReplyBox":t[0]||(t[0]=g=>s.isPopOutReplyBox=g),onTogglePopout:s.showPopOutReplyBox},null,8,["popout-reply-box","onTogglePopout"])],2)])}const gOe=Re(sOe,[["render",fOe],["__scopeId","data-v-9f23acc4"]]),_Oe=["placeholder"],vOe={__name:"CopilotInput",emits:["send"],setup(e,{emit:t}){const n=t,s=U(""),o=()=>{s.value.trim()&&(n("send",s.value),s.value="")};return(a,i)=>(m(),f("form",{class:"border border-n-weak bg-n-alpha-3 rounded-lg h-12 flex",onSubmit:Ke(o,["prevent"])},[ie(c("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>s.value=l),type:"text",placeholder:a.$t("CAPTAIN.COPILOT.SEND_MESSAGE"),class:"w-full reset-base bg-transparent px-4 py-3 text-n-slate-11 text-sm",onKeyup:Fn(o,["enter"])},null,40,_Oe),[[at,s.value]]),i[1]||(i[1]=c("button",{class:"h-auto w-12 flex items-center justify-center text-n-slate-11",type:"submit"},[c("i",{class:"i-ph-arrow-up"})],-1))],32))}},bOe={},EOe={class:"flex justify-start"},TOe={class:"flex items-center space-x-2"},yOe={class:"text-n-iris-11 font-medium"};function AOe(e,t,n,s,o,a){return m(),f("div",EOe,[c("div",TOe,[c("span",yOe,v(e.$t("CAPTAIN.COPILOT.LOADER")),1),t[0]||(t[0]=c("div",{class:"flex space-x-1"},[c("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.3s]"}),c("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.15s]"}),c("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce"})],-1))])])}const SOe=Re(bOe,[["render",AOe]]),IOe={class:"flex flex-row gap-2"},COe={class:"space-y-1 text-n-slate-12"},NOe={class:"font-medium"},OOe={class:"break-words"},xOe={__name:"CopilotAgentMessage",props:{message:{type:Object,required:!0},supportAgent:{type:Object,required:!0}},setup(e){return(t,n)=>(m(),f("div",IOe,[b(yn,{name:e.supportAgent.available_name,src:e.supportAgent.avatar_url,size:24,"rounded-full":""},null,8,["name","src"]),c("div",COe,[c("div",NOe,v(t.$t("CAPTAIN.COPILOT.YOU")),1),c("div",OOe,v(e.message.content),1)])]))}},wOe={class:"flex flex-row gap-2"},ROe={class:"flex flex-col gap-1 text-n-slate-12"},$Oe={class:"font-medium"},MOe={key:0,class:"text-n-ruby-11"},kOe={key:1,class:"prose-sm break-words"},LOe={class:"flex flex-row mt-1"},DOe={__name:"CopilotAssistantMessage",props:{message:{type:Object,required:!0},conversationInboxType:{type:String,required:!0}},setup(e){const t=e,n=w(()=>new tg(t.message.content).formattedMessage),s=w(()=>[Dt.WEB,Dt.EMAIL].includes(t.conversationInboxType)),o=w(()=>{var i;return!((i=t.message)!=null&&i.content)}),a=()=>{var i,l;s.value?yt.emit(sn.INSERT_INTO_RICH_EDITOR,(i=t.message)==null?void 0:i.content):yt.emit(sn.INSERT_INTO_NORMAL_EDITOR,(l=t.message)==null?void 0:l.content),jt(zh.USE_CAPTAIN_RESPONSE)};return(i,l)=>{const r=ct("dompurify-html");return m(),f("div",wOe,[b(yn,{name:"Captain Copilot","icon-name":"i-woot-captain",size:24,"rounded-full":""}),c("div",ROe,[c("div",$Oe,v(i.$t("CAPTAIN.NAME")),1),o.value?(m(),f("span",MOe,v(i.$t("CAPTAIN.COPILOT.EMPTY_MESSAGE")),1)):ie((m(),f("div",kOe,null,512)),[[r,n.value]]),c("div",LOe,[o.value?x("",!0):(m(),P(he,{key:0,label:i.$t("CAPTAIN.COPILOT.USE"),faded:"",sm:"",slate:"",onClick:a},null,8,["label"]))])])])}}},POe={class:"flex gap-1 justify-between w-full"},BOe={class:"items-start flex gap-1 flex-col"},FOe={class:"text-n-slate-12 text-sm"},UOe={class:"line-clamp-2 text-n-slate-11 text-xs"},GOe={key:0,class:"flex items-center justify-center flex-shrink-0 w-4 h-4 rounded-full bg-n-slate-12 dark:bg-n-slate-11"},VOe={__name:"ToggleCopilotAssistant",props:{assistants:{type:Array,required:!0},activeAssistant:{type:Object,required:!0}},emits:["setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=w(()=>n.activeAssistant?n.activeAssistant.name:o("CAPTAIN.COPILOT.SELECT_ASSISTANT"));return(i,l)=>(m(),f("div",null,[b(El,null,{trigger:j(({toggle:r,isOpen:d})=>[b(he,{label:a.value,icon:"i-woot-captain",ghost:"",slate:"",xs:"",class:re({"bg-n-alpha-2":d}),onClick:r},null,8,["label","class","onClick"])]),default:j(()=>[b(Tl,{class:"bottom-9 min-w-64 z-50",strong:""},{default:j(()=>[b(cr,{class:"max-h-80 overflow-scroll"},{default:j(()=>[(m(!0),f(pe,null,ye(e.assistants,r=>(m(),P(Fa,{key:r.id,class:"!items-start !gap-1 flex-col cursor-pointer",onClick:()=>s("setAssistant",r)},{label:j(()=>{var d;return[c("div",POe,[c("div",BOe,[c("span",FOe,v(r.name),1),c("span",UOe,v(r.description),1)]),r.id===((d=e.activeAssistant)==null?void 0:d.id)?(m(),f("div",GOe,l[0]||(l[0]=[c("i",{class:"i-lucide-check text-white dark:text-n-slate-1 size-3"},null,-1)]))):x("",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}},HOe={class:"flex flex-col h-full text-sm leading-6 tracking-tight"},KOe={key:0,class:"h-full w-full flex items-center justify-center"},zOe={class:"h-fit px-3 py-3 space-y-1"},WOe={class:"text-xs text-n-slate-10"},jOe=["onClick"],YOe={class:"mx-3 mt-px mb-2"},XOe={class:"flex items-center gap-2 justify-between w-full mb-1"},qOe={key:1},ZOe={__name:"Copilot",props:{supportAgent:{type:Object,default:()=>({})},messages:{type:Array,default:()=>[]},isCaptainTyping:{type:Boolean,default:!1},conversationInboxType:{type:String,required:!0},assistants:{type:Array,default:()=>[]},activeAssistant:{type:Object,default:()=>({})}},emits:["sendMessage","reset","setAssistant"],setup(e,{emit:t}){const n=e,s=t,o=["assistant","system"],a=p=>{s("sendMessage",p),jt(zh.SEND_MESSAGE)},i=p=>{s("sendMessage",p.prompt),jt(zh.SEND_SUGGESTED)},l=()=>{s("reset")},r=U(null),d=async()=>{await Zt(),r.value&&(r.value.scrollTop=r.value.scrollHeight)},u=[{label:"Summarize this conversation",prompt:"Summarize the key points discussed between the customer and the support agent, including the customer's concerns, questions, and the solutions or responses provided by the support agent"},{label:"Suggest an answer",prompt:"Analyze the customers inquiry, and draft a response that effectively addresses their concerns or questions. Ensure the reply is clear, concise, and provides helpful information."},{label:"Rate this conversation",prompt:"Review the conversation to see how well it meets the customers needs. Share a rating out of 5 based on tone, clarity, and effectiveness."}];return lt([()=>n.messages,()=>n.isCaptainTyping],()=>{d()},{deep:!0}),(p,h)=>(m(),f("div",HOe,[c("div",{ref_key:"chatContainer",ref:r,class:"flex-1 px-4 py-4 space-y-6 overflow-y-auto"},[(m(!0),f(pe,null,ye(e.messages,g=>(m(),f(pe,{key:g.id},[g.role==="user"?(m(),P(xOe,{key:0,"support-agent":e.supportAgent,message:g},null,8,["support-agent","message"])):o.includes(g.role)?(m(),P(DOe,{key:1,message:g,"conversation-inbox-type":e.conversationInboxType},null,8,["message","conversation-inbox-type"])):x("",!0)],64))),128)),e.isCaptainTyping?(m(),P(SOe,{key:0})):x("",!0)],512),e.messages.length?x("",!0):(m(),f("div",KOe,[c("div",zOe,[c("span",WOe,v(p.$t("COPILOT.TRY_THESE_PROMPTS")),1),(m(),f(pe,null,ye(u,g=>c("button",{key:g.label,class:"px-2 py-1 rounded-md border border-n-weak bg-n-slate-2 text-n-slate-11 flex items-center gap-1",onClick:()=>i(g)},[c("span",null,v(g.label),1),b(Ht,{icon:"i-lucide-chevron-right"})],8,jOe)),64))])])),c("div",YOe,[c("div",XOe,[e.assistants.length?(m(),P(VOe,{key:0,assistants:e.assistants,"active-assistant":e.activeAssistant,onSetAssistant:h[0]||(h[0]=g=>s("setAssistant",g))},null,8,["assistants","active-assistant"])):(m(),f("div",qOe)),e.messages.length?(m(),f("button",{key:2,class:"text-xs flex items-center gap-1 hover:underline",onClick:l},[h[1]||(h[1]=c("i",{class:"i-lucide-refresh-ccw"},null,-1)),c("span",null,v(p.$t("CAPTAIN.COPILOT.RESET")),1)])):x("",!0)]),b(vOe,{class:"mb-1 w-full",onSend:a})])]))}},QOe={__name:"CopilotContainer",props:{conversationId:{type:[Number,String],required:!0},conversationInboxType:{type:String,required:!0}},setup(e){const t=e,n=Ot(),s=Ve("getCurrentUser"),o=Ve("captainAssistants/getRecords"),a=Ve("getCopilotAssistant"),{uiSettings:i,updateUISettings:l}=Mn(),r=U([]),d=U(!1),u=U(null),p=w(()=>{const T=i.value.preferred_captain_assistant_id;if(T){const S=o.value.find(E=>E.id===T);if(S)return S}if(a.value){const S=o.value.find(E=>E.id===a.value.id);if(S)return S}return o.value[0]}),h=async T=>{u.value=T.id,await l({preferred_captain_assistant_id:T.id})},g=()=>{r.value=[]},_=async T=>{r.value.push({id:r.value.length+1,role:"user",content:T}),d.value=!0;try{const{data:S}=await Yi.requestCopilot(t.conversationId,{previous_history:r.value.map(E=>({role:E.role,content:E.content})).slice(0,-1),message:T,assistant_id:u.value});r.value.push({id:new Date().getTime(),role:"assistant",content:S.message})}catch(S){console.log(S)}finally{d.value=!1}};return ut(()=>{n.dispatch("captainAssistants/get")}),ea(()=>{var T;t.conversationId&&(n.dispatch("getInboxCaptainAssistantById",t.conversationId),u.value=(T=p.value)==null?void 0:T.id)}),(T,S)=>(m(),P(ZOe,{messages:r.value,"support-agent":I(s),"is-captain-typing":d.value,"conversation-inbox-type":e.conversationInboxType,assistants:I(o),"active-assistant":p.value,onSetAssistant:h,onSendMessage:_,onReset:g},null,8,["messages","support-agent","is-captain-typing","conversation-inbox-type","assistants","active-assistant"]))}},JOe={props:{icon:{type:String,default:""},iconSize:{type:[Number,String],default:20},emoji:{type:String,default:""}},computed:{...gt({uiSettings:"getUISettings"}),isIconTypeEmoji(){const{icon_type:e}=this.uiSettings||{};return e==="emoji"},showEmoji(){return this.isIconTypeEmoji&&this.emoji&&UN(this.emoji)},showIcon(){return!this.showEmoji&&this.icon},iconContent(){return this.showEmoji?this.emoji:""},className(){return{"icon--emoji":this.showEmoji,"icon--font":this.showIcon,[this.icon]:this.showIcon}}}};function exe(e,t,n,s,o,a){const i=F("fluent-icon");return a.showEmoji?(m(),f("i",{key:0,class:re(a.className)},v(a.iconContent),3)):a.showIcon?(m(),P(i,{key:1,size:n.iconSize,icon:n.icon,class:re(["flex-shrink-0",a.className])},null,8,["size","icon","class"])):x("",!0)}const R_=Re(JOe,[["render",exe],["__scopeId","data-v-93a331dd"]]),txe={class:"text-sm"},nxe={class:"flex justify-between"},sxe={class:"text-n-slate-12 text-sm mb-0 py-0 pr-2 pl-0"},axe={class:"flex flex-row"},oxe={class:"flex justify-end w-3 text-n-blue-text cursor-pointer"},ai={__name:"AccordionItem",props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=()=>{n("toggle")};return(o,a)=>{const i=F("fluent-icon");return m(),f("div",txe,[c("button",{class:re(["flex items-center select-none w-full rounded-lg bg-n-slate-2 outline outline-1 outline-n-weak m-0 cursor-grab justify-between py-2 px-4 drag-handle",{"rounded-bl-none rounded-br-none":e.isOpen}]),onClick:Ke(s,["stop"])},[c("div",nxe,[b(R_,{class:"inline-block w-5",icon:e.icon,emoji:e.emoji},null,8,["icon","emoji"]),c("h5",sxe,v(e.title),1)]),c("div",axe,[et(o.$slots,"button"),c("div",oxe,[e.isOpen?(m(),P(i,{key:0,size:"24",icon:"subtract",type:"solid"})):(m(),P(i,{key:1,size:"24",icon:"add",type:"solid"}))])])],2),e.isOpen?(m(),f("div",{key:0,class:re(["bg-n-background outline outline-1 outline-n-weak -mt-[-1px] border-t-0 rounded-br-lg rounded-bl-lg",e.compact?"p-0":"px-2 py-4"])},[et(o.$slots,"default")],2)):x("",!0)])}}},ixe={components:{ConversationCard:xS,Spinner:Gs},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:{conversations(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations(){return this.conversations.filter(e=>e.id!==Number(this.conversationId))},...gt({uiFlags:"contactConversations/getUIFlags"})},watch:{contactId(e,t){e&&e!==t&&this.$store.dispatch("contactConversations/get",e)}},mounted(){this.$store.dispatch("contactConversations/get",this.contactId)}},lxe={key:0,class:""},rxe={key:0,class:"no-label-message px-4 p-3"},cxe={key:1,class:"contact-conversation--list"},dxe={key:1,class:"flex items-center justify-center py-5"};function uxe(e,t,n,s,o,a){const i=F("ConversationCard"),l=F("Spinner");return e.uiFlags.isFetching?(m(),f("div",dxe,[b(l)])):(m(),f("div",lxe,[a.previousConversations.length?(m(),f("div",cxe,[(m(!0),f(pe,null,ye(a.previousConversations,r=>(m(),P(i,{key:r.id,chat:r,"hide-inbox-name":!1,"hide-thumbnail":"",class:"compact"},null,8,["chat"]))),128))])):(m(),f("div",rxe,[c("span",null,v(e.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND")),1)]))]))}const mxe=Re(ixe,[["render",uxe],["__scopeId","data-v-320736ab"]]);function h2(e=!0){const{t}=He(),n=Ve("getCurrentUser"),s=Ve("getSelectedChat"),o=Ve("getCurrentAccountId"),a=Ve("inboxAssignableAgents/getAssignableAgents"),i=w(()=>{var p;return(p=s.value)==null?void 0:p.inbox_id}),l=w(()=>{var p,h;return(h=(p=s.value)==null?void 0:p.meta)==null?void 0:h.assignee}),r=()=>({confirmed:!0,name:t("AGENT_MGMT.MULTI_SELECTOR.LIST.NONE")||"None",id:0,role:"agent",account_id:0,email:"None"}),d=w(()=>i.value?a.value(i.value):[]);return{agentsList:w(()=>{const p=d.value||[],h=IS(p,n.value,o.value),g=SS(h);return[...e&&l.value?[r()]:[],...g]}),assignableAgents:d}}const pxe={props:{title:{type:String,required:!0},value:{type:[String,Number],default:""},compact:{type:Boolean,default:!1}}},hxe={class:"items-center flex justify-between mb-1.5"},fxe={class:"text-sm font-medium text-slate-800 dark:text-slate-100"},gxe={key:0,class:"break-words"};function _xe(e,t,n,s,o,a){return m(),f("div",{class:re(["overflow-auto",n.compact?"py-0 px-0":"py-3 px-4"])},[c("div",hxe,[c("span",fxe,v(n.title),1),et(e.$slots,"button")]),n.value?(m(),f("div",gxe,[et(e.$slots,"default",{},()=>[be(v(n.value),1)])])):x("",!0)],2)}const f2=Re(pxe,[["render",_xe]]),vxe={components:{WootDropdownItem:fc,WootDropdownMenu:ju,Thumbnail:Qn,NextButton:he},props:{options:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},emits:["select"],data(){return{search:""}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.search.toLowerCase()))},noResult(){return this.filteredOptions.length===0&&this.search!==""}},mounted(){this.focusInput()},methods:{onclick(e){this.$emit("select",e)},focusInput(){this.$refs.searchbar.focus()},isActive(e){return this.selectedItems.some(t=>t&&e.id===t.id)}}},bxe={class:"dropdown-wrap"},Exe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},Txe=["placeholder"],yxe={class:"flex items-start justify-start flex-auto overflow-auto mt-2"},Axe={class:"w-full max-h-[10rem]"},Sxe={class:"flex items-center justify-between w-full min-w-0 gap-2"},Ixe=["title"],Cxe={key:0,class:"w-full justify-center items-center flex text-n-slate-10 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"};function Nxe(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("NextButton"),r=F("WootDropdownItem"),d=F("WootDropdownMenu");return m(),f("div",bxe,[c("div",Exe,[ie(c("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=u=>o.search=u),type:"text",class:"search-input",autofocus:"true",placeholder:n.inputPlaceholder},null,8,Txe),[[at,o.search]])]),c("div",yxe,[c("div",Axe,[b(d,null,{default:j(()=>[(m(!0),f(pe,null,ye(a.filteredOptions,u=>(m(),P(r,{key:u.id},{default:j(()=>[b(l,{slate:"",variant:a.isActive(u)?"faded":"ghost","trailing-icon":"",icon:a.isActive(u)?"i-lucide-check":"",class:"w-full !px-2.5",onClick:()=>a.onclick(u)},{default:j(()=>[c("div",Sxe,[c("span",{class:"my-0 overflow-hidden text-sm leading-4 whitespace-nowrap text-ellipsis",title:u.name},v(u.name),9,Ixe)]),n.hasThumbnail?(m(),P(i,{key:0,src:u.thumbnail,size:"24px",username:u.name,status:u.availability_status,"has-border":""},null,8,["src","username","status"])):x("",!0)]),_:2},1032,["variant","icon","onClick"])]),_:2},1024))),128))]),_:1}),a.noResult?(m(),f("h4",Cxe,v(n.noSearchResult),1)):x("",!0)])])])}const g2=Re(vxe,[["render",Nxe],["__scopeId","data-v-b33ca22a"]]),Oxe={class:"flex items-center justify-between w-full min-w-0"},xxe={key:0,class:"text-sm text-ellipsis text-n-slate-12"},wxe=["title"],Rxe={class:"flex items-center justify-between mb-1"},$xe={class:"m-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis"},Mxe={__name:"MultiselectDropdown",props:{options:{type:Array,default:()=>[]},selectedItem:{type:Object,default:()=>({})},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,[o,a]=la(!1),i=()=>a(!1),l=d=>{s("select",d),i()},r=w(()=>!!(n.selectedItem&&n.selectedItem.id));return(d,u)=>(m(),P(I(gl),{onTrigger:i},{default:j(()=>[c("div",{class:"relative w-full mb-2",onKeyup:Fn(i,["esc"])},[b(he,{slate:"",outline:"","trailing-icon":"",icon:I(o)?"i-lucide-chevron-up":"i-lucide-chevron-down",class:"w-full !px-2",onClick:u[0]||(u[0]=()=>I(a)())},{default:j(()=>[c("div",Oxe,[r.value?(m(),f("h4",{key:1,class:"items-center overflow-hidden text-sm leading-tight whitespace-nowrap text-ellipsis text-n-slate-12",title:e.selectedItem.name},v(e.selectedItem.name),9,wxe)):(m(),f("h4",xxe,v(e.multiselectorPlaceholder),1))]),r.value&&e.hasThumbnail?(m(),P(Qn,{key:0,src:e.selectedItem.thumbnail,size:"24px",status:e.selectedItem.availability_status,username:e.selectedItem.name},null,8,["src","status","username"])):x("",!0)]),_:1},8,["icon"]),c("div",{class:re([{"dropdown-pane--open":I(o)},"dropdown-pane"])},[c("div",Rxe,[c("h4",$xe,v(e.multiselectorTitle),1),b(he,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:i})]),I(o)?(m(),P(g2,{key:0,options:e.options,"selected-items":[e.selectedItem],"has-thumbnail":e.hasThumbnail,"input-placeholder":e.inputPlaceholder,"no-search-result":e.noSearchResult,onSelect:l},null,8,["options","selected-items","has-thumbnail","input-placeholder","no-search-result"])):x("",!0)],2)],32)]),_:1}))}},_2=Re(Mxe,[["__scopeId","data-v-31376a22"]]);function kxe(){const e=Ot(),t=vn(),n=w(()=>t.getSelectedChat.value),s=w(()=>{var p;return(p=n.value)==null?void 0:p.id}),o=w(()=>t["labels/getLabels"].value),a=w(()=>e.getters["conversationLabels/getConversationLabels"](s.value)),i=w(()=>o.value.filter(({title:p})=>a.value.includes(p))),l=w(()=>o.value.filter(({title:p})=>!a.value.includes(p))),r=async p=>{await e.dispatch("conversationLabels/update",{conversationId:s.value,labels:p})};return{accountLabels:o,savedLabels:a,activeLabels:i,inactiveLabels:l,addLabelToConversation:p=>{const h=i.value.map(g=>g.title);h.push(p.title),r(h)},removeLabelFromConversation:p=>{const h=i.value.map(g=>g.title).filter(g=>g!==p);r(h)},onUpdateLabels:r}}const Lxe={components:{NextButton:he},props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},emits:["selectLabel"],methods:{onClick(){this.$emit("selectLabel",this.title)}}},Dxe={class:"flex items-center min-w-0 gap-2"},Pxe=["title"];function Bxe(e,t,n,s,o,a){const i=F("NextButton"),l=F("woot-dropdown-item");return m(),P(l,null,{default:j(()=>[b(i,{slate:"",ghost:"",blue:"","trailing-icon":"",icon:n.selected?"i-lucide-circle-check":"",class:re(["w-full !px-2.5 justify-between",{"!flex-row":!n.selected}]),onClick:a.onClick},{default:j(()=>[c("div",Dxe,[n.color?(m(),f("div",{key:0,class:"size-3 flex-shrink-0 rounded-full outline outline-1 outline-n-weak",style:At({backgroundColor:n.color})},null,4)):x("",!0),c("span",{class:"overflow-hidden text-ellipsis whitespace-nowrap leading-[1.1]",title:n.title},v(n.title),9,Pxe)])]),_:1},8,["icon","class","onClick"])]),_:1})}const Fxe=Re(Lxe,[["render",Bxe]]),Uxe=/[^a-zA-Z0-9_-]/g,Gxe=/\s+/g,Vxe=(e="")=>e?e.trim().toLowerCase().replace(Gxe,"-").replace(Uxe,""):"",Hxe={components:{LabelDropdownItem:Fxe,AddLabelModal:Wg,Hotkey:Hl,NextButton:he},props:{accountLabels:{type:Array,default:()=>[]},selectedLabels:{type:Array,default:()=>[]},allowCreation:{type:Boolean,default:!1}},emits:["update","add","remove"],data(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder(){const e=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?`${e}:`:e},filteredActiveLabels(){return this.search?p_(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult(){return this.filteredActiveLabels.length===0},hasExactMatchInResults(){return this.filteredActiveLabels.some(e=>e.title===this.search)},shouldShowCreate(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch(){return Vxe(this.search)}},mounted(){this.focusInput()},methods:{focusInput(){this.$refs.searchbar.focus()},updateLabels(e){this.$emit("update",e)},onAdd(e){this.$emit("add",e)},onRemove(e){this.$emit("remove",e)},onAddRemove(e){this.selectedLabels.includes(e.title)?this.onRemove(e.title):this.onAdd(e)},showCreateModal(){this.createModalVisible=!0},hideCreateModal(){this.createModalVisible=!1}}},Kxe={class:"flex flex-col w-full max-h-[12.5rem]"},zxe={class:"flex items-center justify-center mb-1"},Wxe={class:"flex-grow m-0 overflow-hidden text-sm text-slate-800 dark:text-slate-100 whitespace-nowrap text-ellipsis"},jxe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},Yxe=["placeholder"],Xxe={class:"flex items-start justify-start flex-auto flex-grow flex-shrink overflow-auto"},qxe={class:"w-full my-1"},Zxe={key:0,class:"flex justify-center py-4 px-2.5 font-medium text-xs text-slate-700 dark:text-slate-200"},Qxe={key:1,class:"flex pt-1 border-t border-solid border-slate-100 dark:border-slate-900"};function Jxe(e,t,n,s,o,a){const i=F("Hotkey"),l=F("LabelDropdownItem"),r=F("woot-dropdown-menu"),d=F("NextButton"),u=F("AddLabelModal"),p=F("woot-modal");return m(),f("div",Kxe,[c("div",zxe,[c("h4",Wxe,v(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE")),1),b(i,{"custom-class":"border border-solid text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-600 text-xxs border-slate-75 dark:border-slate-600 flex-shrink-0"},{default:j(()=>t[2]||(t[2]=[be(v("L"))])),_:1})]),c("div",jxe,[ie(c("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=h=>o.search=h),type:"text",class:"search-input",autofocus:"true",placeholder:e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},null,8,Yxe),[[at,o.search]])]),c("div",Xxe,[c("div",qxe,[b(r,null,{default:j(()=>[(m(!0),f(pe,null,ye(a.filteredActiveLabels,h=>(m(),P(l,{key:h.title,title:h.title,color:h.color,selected:n.selectedLabels.includes(h.title),onSelectLabel:g=>a.onAddRemove(h)},null,8,["title","color","selected","onSelectLabel"]))),128))]),_:1}),a.noResult?(m(),f("div",Zxe,v(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT")),1)):x("",!0),n.allowCreation&&a.shouldShowCreate?(m(),f("div",Qxe,[b(d,{icon:"i-lucide-plus",slate:"",sm:"",ghost:"",label:`${a.createLabelPlaceholder} ${a.parsedSearch}`,disabled:a.hasExactMatchInResults,onClick:a.showCreateModal},null,8,["label","disabled","onClick"]),b(p,{show:o.createModalVisible,"onUpdate:show":t[1]||(t[1]=h=>o.createModalVisible=h),"on-close":a.hideCreateModal},{default:j(()=>[b(u,{"prefill-title":a.parsedSearch,onClose:a.hideCreateModal},null,8,["prefill-title","onClose"])]),_:1},8,["show","on-close"])])):x("",!0)])])])}const ewe=Re(Hxe,[["render",Jxe]]),twe={__name:"AddLabel",emits:["add"],setup(e,{emit:t}){const n=t,s=()=>{n("add")};return(o,a)=>(m(),P(he,{faded:"",xs:"",icon:"i-lucide-plus",class:"mb-0.5 ltr:mr-0.5 rtl:ml-0.5 !rounded-[4px]",label:o.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"),onClick:s},null,8,["label"]))}},nwe={components:{Spinner:Os,LabelDropdown:ewe,AddLabel:twe},setup(){const{isAdmin:e}=xo(),{savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:o,removeLabelFromConversation:a}=kxe(),i=U(!1),l=()=>{i.value=!i.value},r=()=>{i.value=!1};return Vs({KeyL:{action:u=>{u.preventDefault(),l()}},Escape:{action:()=>{i.value&&l()},allowOnFocusedInput:!0}}),{isAdmin:e,savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:o,removeLabelFromConversation:a,showSearchDropdownLabel:i,closeDropdownLabel:r,toggleLabels:l}},data(){return{selectedLabels:[]}},computed:{...gt({conversationUiFlags:"conversationLabels/getUIFlags"})}},swe={class:"sidebar-labels-wrap"},awe={key:0,class:"contact-conversation--list"},owe={class:"dropdown-wrap"};function iwe(e,t,n,s,o,a){const i=F("AddLabel"),l=F("woot-label"),r=F("LabelDropdown"),d=F("Spinner"),u=ct("on-clickaway");return m(),f("div",swe,[e.conversationUiFlags.isFetching?(m(),P(d,{key:1})):(m(),f("div",awe,[ie((m(),f("div",{class:"label-wrap flex flex-wrap",onKeyup:t[0]||(t[0]=Fn((...p)=>s.closeDropdownLabel&&s.closeDropdownLabel(...p),["esc"]))},[b(i,{onAdd:s.toggleLabels},null,8,["onAdd"]),(m(!0),f(pe,null,ye(s.activeLabels,p=>(m(),P(l,{key:p.id,title:p.title,description:p.description,"show-close":"",color:p.color,variant:"smooth",class:"max-w-[calc(100%-0.5rem)]",onRemove:s.removeLabelFromConversation},null,8,["title","description","color","onRemove"]))),128)),c("div",owe,[c("div",{class:re([{"dropdown-pane--open":s.showSearchDropdownLabel},"dropdown-pane"])},[s.showSearchDropdownLabel?(m(),P(r,{key:0,"account-labels":s.accountLabels,"selected-labels":s.savedLabels,"allow-creation":s.isAdmin,onAdd:s.addLabelToConversation,onRemove:s.removeLabelFromConversation},null,8,["account-labels","selected-labels","allow-creation","onAdd","onRemove"])):x("",!0)],2)])],32)),[[u,s.closeDropdownLabel]])]))])}const lwe=Re(nwe,[["render",iwe],["__scopeId","data-v-a91eae04"]]),rwe={components:{ContactDetailsItem:f2,MultiselectDropdown:_2,ConversationLabels:lwe,NextButton:he},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=h2();return{agentsList:e}},data(){return{priorityOptions:[{id:null,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),thumbnail:"/assets/images/dashboard/priority/none.svg"},{id:qs.URGENT,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),thumbnail:`/assets/images/dashboard/priority/${qs.URGENT}.svg`},{id:qs.HIGH,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),thumbnail:`/assets/images/dashboard/priority/${qs.HIGH}.svg`},{id:qs.MEDIUM,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),thumbnail:`/assets/images/dashboard/priority/${qs.MEDIUM}.svg`},{id:qs.LOW,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),thumbnail:`/assets/images/dashboard/priority/${qs.LOW}.svg`}]}},computed:{...gt({currentChat:"getSelectedChat",currentUser:"getCurrentUser",teams:"teams/getTeams"}),hasAnAssignedTeam(){var e,t;return!!((t=(e=this.currentChat)==null?void 0:e.meta)!=null&&t.team)},teamsList(){return this.hasAnAssignedTeam?[{id:0,name:this.$t("TEAMS_SETTINGS.LIST.NONE")},...this.teams]:this.teams},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:0;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{Te(this.$t("CONVERSATION.CHANGE_AGENT"))})}},assignedTeam:{get(){return this.currentChat.meta.team},set(e){const t=this.currentChat.id,n=e?e.id:0;this.$store.dispatch("setCurrentChatTeam",{team:e,conversationId:t}),this.$store.dispatch("assignTeam",{conversationId:t,teamId:n}).then(()=>{Te(this.$t("CONVERSATION.CHANGE_TEAM"))})}},assignedPriority:{get(){return this.priorityOptions.find(t=>t.id===this.currentChat.priority)||this.priorityOptions[0]},set(e){var o;const t=this.currentChat.id,n=(o=this.currentChat)==null?void 0:o.priority,s=e?e.id:null;this.$store.dispatch("setCurrentChatPriority",{priority:s,conversationId:t}),this.$store.dispatch("assignPriority",{conversationId:t,priority:s}).then(()=>{jt(ba.CHANGE_PRIORITY,{oldValue:n,newValue:s,from:"Conversation Sidebar"}),Te(this.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:e.name,conversationId:t}))})}},showSelfAssign(){return!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id}},methods:{onSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,avatar_url:l}=this.currentUser,r={account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,thumbnail:l};this.assignedAgent=r},onClickAssignAgent(e){this.assignedAgent&&this.assignedAgent.id===e.id?this.assignedAgent=null:this.assignedAgent=e},onClickAssignTeam(e){this.assignedTeam&&this.assignedTeam.id===e.id?this.assignedTeam=null:this.assignedTeam=e},onClickAssignPriority(e){const t=this.assignedPriority&&this.assignedPriority.id===e.id;this.assignedPriority=t?null:e}}},cwe={class:"bg-white dark:bg-slate-900"},dwe={class:"multiselect-wrap--small"},uwe={class:"multiselect-wrap--small"},mwe={class:"multiselect-wrap--small"};function pwe(e,t,n,s,o,a){const i=F("NextButton"),l=F("ContactDetailsItem"),r=F("MultiselectDropdown"),d=F("ConversationLabels");return m(),f("div",cwe,[c("div",dwe,[b(l,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ASSIGNEE_LABEL")},{button:j(()=>[a.showSelfAssign?(m(),P(i,{key:0,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_SIDEBAR.SELF_ASSIGN"),onClick:a.onSelfAssign},null,8,["label","onClick"])):x("",!0)]),_:1},8,["title"]),b(r,{options:s.agentsList,"selected-item":a.assignedAgent,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.AGENT"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.AGENT"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.AGENT"),onSelect:a.onClickAssignAgent},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),c("div",uwe,[b(l,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.TEAM_LABEL")},null,8,["title"]),b(r,{options:a.teamsList,"selected-item":a.assignedTeam,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.TEAM"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.TEAM"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.TEAM"),onSelect:a.onClickAssignTeam},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),c("div",mwe,[b(l,{compact:"",title:e.$t("CONVERSATION.PRIORITY.TITLE")},null,8,["title"]),b(r,{options:o.priorityOptions,"selected-item":a.assignedPriority,"multiselector-title":e.$t("CONVERSATION.PRIORITY.TITLE"),"multiselector-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SELECT_PLACEHOLDER"),"no-search-result":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.NO_RESULTS"),"input-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.INPUT_PLACEHOLDER"),onSelect:a.onClickAssignPriority},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),b(l,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_LABELS")},null,8,["title"]),b(d,{"conversation-id":n.conversationId},null,8,["conversation-id"])])}const hwe=Re(rwe,[["render",pwe]]),fwe={components:{Thumbnail:Qn},props:{usersList:{type:Array,default:()=>[]},size:{type:String,default:"24px"},showMoreThumbnailsCount:{type:Boolean,default:!1},moreThumbnailsText:{type:String,default:""},gap:{type:String,default:"normal",validator(e){return["normal","","tight"].includes(e)}}}},gwe={class:"overlapping-thumbnails"},_we={key:0,class:"thumbnail-more-text"};function vwe(e,t,n,s,o,a){const i=F("Thumbnail"),l=ct("tooltip");return m(),f("div",gwe,[(m(!0),f(pe,null,ye(n.usersList,r=>ie((m(),P(i,{key:r.id,title:r.name,src:r.thumbnail,username:r.name,"has-border":"",size:n.size,class:re(`overlapping-thumbnail gap-${n.gap}`)},null,8,["title","src","username","size","class"])),[[l,r.name]])),128)),n.showMoreThumbnailsCount?(m(),f("span",_we,v(n.moreThumbnailsText),1)):x("",!0)])}const bwe=Re(fwe,[["render",vwe],["__scopeId","data-v-44d47396"]]),Ewe={components:{Spinner:Os,ThumbnailGroup:bwe,MultiselectDropdownItems:g2,NextButton:he},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=h2(!1);return{agentsList:e}},data(){return{selectedWatchers:[],showDropDown:!1}},computed:{...gt({watchersUiFlas:"conversationWatchers/getUIFlags",currentUser:"getCurrentUser"}),watchersFromStore(){return this.$store.getters["conversationWatchers/getByConversationId"](this.conversationId)},watchersList:{get(){return this.selectedWatchers},set(e){this.selectedWatchers=[...e];const t=e.map(n=>n.id);this.updateParticipant(t)}},isUserWatching(){return this.selectedWatchers.some(e=>e.id===this.currentUser.id)},thumbnailList(){return this.selectedWatchers.slice(0,4)},moreAgentCount(){return this.watchersList.length-4},moreThumbnailsText(){return this.moreAgentCount>1?this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANTS_TEXT",{count:this.moreAgentCount}):this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANT_TEXT",{count:1})},showMoreThumbs(){return this.moreAgentCount>0},totalWatchersText(){return this.selectedWatchers.length>1?this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANTS_TEXT",{count:this.selectedWatchers.length}):this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANT_TEXT",{count:1})}},watch:{conversationId(){this.fetchParticipants()},watchersFromStore(e=[]){this.selectedWatchers=[...e]}},mounted(){this.fetchParticipants(),this.$store.dispatch("agents/get")},methods:{fetchParticipants(){const e=this.conversationId;this.$store.dispatch("conversationWatchers/show",{conversationId:e})},async updateParticipant(e){const t=this.conversationId;let n=this.$t("CONVERSATION_PARTICIPANTS.API.SUCCESS_MESSAGE");try{await this.$store.dispatch("conversationWatchers/update",{conversationId:t,userIds:e})}catch(s){n=(s==null?void 0:s.message)||this.$t("CONVERSATION_PARTICIPANTS.API.ERROR_MESSAGE")}finally{Te(n)}this.fetchParticipants()},onOpenDropdown(){this.showDropDown=!0},onCloseDropdown(){this.showDropDown=!1},onClickItem(e){if(this.watchersList.some(n=>n.id===e.id)){const n=this.watchersList.filter(s=>s.id!==e.id);this.watchersList=[...n]}else this.watchersList=[...this.watchersList,e]},onSelfAssign(){this.watchersList=[...this.selectedWatchers,this.currentUser]}}},Twe={class:"relative bg-white dark:bg-slate-900"},ywe={class:"flex justify-between"},Awe={class:"flex justify-between w-full mb-1"},Swe={key:0,class:"m-0 text-sm total-watchers"},Iwe={key:1,class:"m-0 text-sm text-slate-400 dark:text-slate-700"},Cwe={class:"flex items-center justify-between"},Nwe={key:0,class:"m-0 text-sm text-slate-300 dark:text-slate-300"},Owe={class:"flex items-center justify-between mb-1"},xwe={class:"m-0 overflow-hidden text-sm whitespace-nowrap text-ellipsis text-slate-800 dark:text-slate-100"};function wwe(e,t,n,s,o,a){const i=F("Spinner"),l=F("NextButton"),r=F("ThumbnailGroup"),d=F("MultiselectDropdownItems"),u=ct("tooltip"),p=ct("on-clickaway");return m(),f("div",Twe,[c("div",ywe,[c("div",Awe,[c("div",null,[a.watchersList.length?(m(),f("p",Swe,[e.watchersUiFlas.isFetching?(m(),P(i,{key:0,size:"tiny"})):x("",!0),be(" "+v(a.totalWatchersText),1)])):(m(),f("p",Iwe,v(e.$t("CONVERSATION_PARTICIPANTS.NO_PARTICIPANTS_TEXT")),1))]),ie(b(l,{slate:"",ghost:"",sm:"",icon:"i-lucide-settings",class:"relative -top-1",title:e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),onClick:a.onOpenDropdown},null,8,["title","onClick"]),[[u,e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),void 0,{left:!0}]])])]),c("div",Cwe,[b(r,{"more-thumbnails-text":a.moreThumbnailsText,"show-more-thumbnails-count":a.showMoreThumbs,"users-list":a.thumbnailList},null,8,["more-thumbnails-text","show-more-thumbnails-count","users-list"]),a.isUserWatching?(m(),f("p",Nwe,v(e.$t("CONVERSATION_PARTICIPANTS.YOU_ARE_WATCHING")),1)):(m(),P(l,{key:1,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_PARTICIPANTS.WATCH_CONVERSATION"),onClick:a.onSelfAssign},null,8,["label","onClick"]))]),ie((m(),f("div",{class:re([{"dropdown-pane--open":o.showDropDown},"dropdown-pane"])},[c("div",Owe,[c("h4",xwe,v(e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS")),1),b(l,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:a.onCloseDropdown},null,8,["onClick"])]),b(d,{options:s.agentsList,"selected-items":o.selectedWatchers,"has-thumbnail":"",onSelect:a.onClickItem},null,8,["options","selected-items","onSelect"])],2)),[[p,()=>{a.onCloseDropdown()}]])])}const Rwe=Re(Ewe,[["render",wwe],["__scopeId","data-v-d343fa58"]]),$we={components:{EmojiOrIcon:R_,NextButton:he},props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{async onCopy(e){e.preventDefault(),await dl(this.value),Te(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL"))}}},Mwe={class:"w-full h-5 ltr:-ml-1 rtl:-mr-1"},kwe=["href"],Lwe=["title"],Dwe={key:1,class:"text-sm text-n-slate-11"},Pwe={key:1,class:"flex items-center gap-2 text-n-slate-11"},Bwe={key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis"},Fwe={key:1,class:"text-sm text-n-slate-11"};function Uwe(e,t,n,s,o,a){const i=F("EmojiOrIcon"),l=F("NextButton"),r=ct("dompurify-html");return m(),f("div",Mwe,[n.href?(m(),f("a",{key:0,href:n.href,class:"flex items-center gap-2 text-n-slate-11 hover:underline"},[b(i,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?(m(),f("span",{key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis",title:n.value},v(n.value),9,Lwe)):(m(),f("span",Dwe,v(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1)),n.showCopy?(m(),P(l,{key:2,ghost:"",xs:"",slate:"",class:"ltr:-ml-1 rtl:-mr-1",icon:"i-lucide-clipboard",onClick:a.onCopy},null,8,["onClick"])):x("",!0)],8,kwe)):(m(),f("div",Pwe,[b(i,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?ie((m(),f("span",Bwe,null,512)),[[r,n.value]]):(m(),f("span",Fwe,v(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1))]))])}const Gwe=Re($we,[["render",Uwe]]),Vwe={props:{socialProfiles:{type:Object,default:()=>({})}},data(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"},{key:"telegram",icon:"telegram",link:"https://t.me/"}]}},computed:{availableProfiles(){return this.socialMediaLinks.filter(e=>!!this.socialProfiles[e.key])}}},Hwe={key:0,class:"flex items-end gap-3 mx-0 my-2"},Kwe=["href"];function zwe(e,t,n,s,o,a){const i=F("fluent-icon");return a.availableProfiles.length?(m(),f("div",Hwe,[(m(!0),f(pe,null,ye(a.availableProfiles,l=>(m(),f("a",{key:l.key,href:`${l.link}${n.socialProfiles[l.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"},[b(i,{icon:`brand-${l.key}`,size:"16",class:"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"},null,8,["icon"])],8,Kwe))),128))])):x("",!0)}const Wwe=Re(Vwe,[["render",zwe]]),jwe={components:{NextButton:he},props:{contact:{type:Object,default:()=>({})},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:()=>{}}},emits:["cancel","success"],setup(){return{v$:Lt()}},data(){return{countries:Ua,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:it},description:{},email:{email:xi},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber(){return vu(this.phoneNumber)},isPhoneNumberNotValid(){return this.phoneNumber!==""?!tv(this.phoneNumber,this.activeDialCode)||(this.phoneNumber!==""?this.activeDialCode==="":!1):!1},phoneNumberError(){return this.activeDialCode===""?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):tv(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:this.phoneNumber===""&&this.activeDialCode!==""?"":this.activeDialCode?`${this.activeDialCode}${this.phoneNumber}`:""}},watch:{contact(){this.setContactObject()}},mounted(){this.setContactObject(),this.setDialCode()},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("success")},countryNameWithCode({name:e,id:t}){return t?!e&&!t?"":`${e} (${t})`:e},setDialCode(){if(this.phoneNumber!==""&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){const e=this.parsePhoneNumber.countryCallingCode;this.activeDialCode=`+${e}`}},setContactObject(){const{email:e,phone_number:t,name:n}=this.contact,s=this.contact.additional_attributes||{};this.name=n||"",this.email=e||"",this.phoneNumber=t||"",this.companyName=s.company_name||"",this.country={id:s.country_code||"",name:s.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=s.city||"",this.description=s.description||"",this.avatarUrl=this.contact.thumbnail||"";const{social_profiles:o={},screen_name:a}=s;this.socialProfileUserNames={twitter:o.twitter||a||"",facebook:o.facebook||"",linkedin:o.linkedin||"",github:o.github||"",instagram:o.instagram||""}},getContactObject(){this.country===null&&(this.country={id:"",name:""});const e={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:{...this.contact.additional_attributes,description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames}};return this.avatarFile&&(e.avatar=this.avatarFile,e.isFormData=!0),e},setPhoneCode(e){if(this.phoneNumber!==""&&this.parsePhoneNumber){const t=this.parsePhoneNumber.countryCallingCode;if(t===e)return;this.activeDialCode=`+${t}`;const n=this.phoneNumber.replace(`+${t}`,`${e}`);this.phoneNumber=n}else this.activeDialCode=e},async handleSubmit(){if(this.v$.$touch(),!(this.v$.$invalid||this.isPhoneNumberNotValid))try{await this.onSubmit(this.getContactObject()),this.onSuccess(),Te(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))}catch(e){e instanceof wc?e.data.includes("email")?Te(this.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):e.data.includes("phone_number")&&Te(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e instanceof ar?Te(e.data):Te(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{this.contact&&this.contact.id&&(await this.$store.dispatch("contacts/deleteAvatar",this.contact.id),Te(this.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"))),this.avatarFile=null,this.avatarUrl="",this.activeDialCode=""}catch(e){Te(e.message?e.message:this.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"))}}}},Ywe={class:"w-full"},Xwe={class:"w-full"},qwe=["placeholder"],Zwe=["placeholder"],Qwe={key:0,class:"message"},Jwe={class:"w-full"},eRe=["placeholder"],tRe={class:"w-full"},nRe={key:0,class:"message"},sRe={key:0,class:"relative mx-0 mt-0 mb-2.5 p-2 rounded-md text-sm border border-solid border-yellow-500 text-yellow-700 dark:border-yellow-700 bg-yellow-200/60 dark:bg-yellow-200/20 dark:text-yellow-400"},aRe={class:"w-full"},oRe={class:"w-full"},iRe={class:"flex items-center h-10 px-2 text-sm border-solid bg-slate-50 border-y ltr:border-l rtl:border-r ltr:rounded-l-md rtl:rounded-r-md dark:bg-slate-700 text-slate-800 dark:text-slate-100 border-slate-200 dark:border-slate-600"},lRe=["onUpdate:modelValue"],rRe={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"};function cRe(e,t,n,s,o,a){const i=F("woot-avatar-uploader"),l=F("woot-phone-input"),r=F("woot-input"),d=F("multiselect"),u=F("NextButton");return m(),f("form",{class:"w-full px-8 pt-6 pb-8 contact--form",onSubmit:t[10]||(t[10]=Ke((...p)=>a.handleSubmit&&a.handleSubmit(...p),["prevent"]))},[c("div",null,[c("div",Ywe,[b(i,{label:e.$t("CONTACT_FORM.FORM.AVATAR.LABEL"),src:o.avatarUrl,"username-avatar":o.name,"delete-avatar":!!o.avatarUrl,class:"settings-item",onOnAvatarSelect:a.handleImageUpload,onOnAvatarDelete:a.handleAvatarDelete},null,8,["label","src","username-avatar","delete-avatar","onOnAvatarSelect","onOnAvatarDelete"])])]),c("div",null,[c("div",Xwe,[c("label",{class:re({error:s.v$.name.$error})},[be(v(e.$t("CONTACT_FORM.FORM.NAME.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.name=p),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...p)=>s.v$.name.$touch&&s.v$.name.$touch(...p))},null,40,qwe),[[at,o.name]])],2),c("label",{class:re({error:s.v$.email.$error})},[be(v(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+" ",1),ie(c("input",{"onUpdate:modelValue":t[2]||(t[2]=p=>o.email=p),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER"),onInput:t[3]||(t[3]=(...p)=>s.v$.email.$touch&&s.v$.email.$touch(...p))},null,40,Zwe),[[at,o.email]]),s.v$.email.$error?(m(),f("span",Qwe,v(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR")),1)):x("",!0)],2)])]),c("div",Jwe,[c("label",{class:re({error:s.v$.description.$error})},[be(v(e.$t("CONTACT_FORM.FORM.BIO.LABEL"))+" ",1),ie(c("textarea",{"onUpdate:modelValue":t[4]||(t[4]=p=>o.description=p),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER"),onInput:t[5]||(t[5]=(...p)=>s.v$.description.$touch&&s.v$.description.$touch(...p))},null,40,eRe),[[at,o.description]])],2)]),c("div",null,[c("div",tRe,[c("label",{class:re({error:a.isPhoneNumberNotValid})},[be(v(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+" ",1),b(l,{modelValue:o.phoneNumber,"onUpdate:modelValue":t[6]||(t[6]=p=>o.phoneNumber=p),value:o.phoneNumber,error:a.isPhoneNumberNotValid,placeholder:e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER"),onBlur:s.v$.phoneNumber.$touch,onSetCode:a.setPhoneCode},null,8,["modelValue","value","error","placeholder","onBlur","onSetCode"]),a.isPhoneNumberNotValid?(m(),f("span",nRe,v(a.phoneNumberError),1)):x("",!0)],2),a.isPhoneNumberNotValid||!o.phoneNumber?(m(),f("div",sRe,v(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP")),1)):x("",!0)])]),b(r,{modelValue:o.companyName,"onUpdate:modelValue":t[7]||(t[7]=p=>o.companyName=p),class:"w-full",label:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),c("div",null,[c("div",aRe,[c("label",null,v(e.$t("CONTACT_FORM.FORM.COUNTRY.LABEL")),1),b(d,{modelValue:o.country,"onUpdate:modelValue":t[8]||(t[8]=p=>o.country=p),"track-by":"id",label:"name",placeholder:e.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":e.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":e.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":a.countryNameWithCode,"max-height":160,options:o.countries,"allow-empty":"","option-height":104},null,8,["modelValue","placeholder","select-label","deselect-label","custom-label","options"])])]),b(r,{modelValue:o.city,"onUpdate:modelValue":t[9]||(t[9]=p=>o.city=p),class:"w-full",label:e.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),c("div",oRe,[c("label",null,v(e.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.SOCIAL_PROFILES")),1),(m(!0),f(pe,null,ye(o.socialProfileKeys,p=>(m(),f("div",{key:p.key,class:"flex items-stretch w-full mb-4"},[c("span",iRe,v(p.prefixURL),1),ie(c("input",{"onUpdate:modelValue":h=>o.socialProfileUserNames[p.key]=h,class:"input-group-field ltr:!rounded-l-none rtl:rounded-r-none !mb-0",type:"text"},null,8,lRe),[[at,o.socialProfileUserNames[p.key]]])]))),128))]),c("div",rRe,[b(u,{type:"submit",label:e.$t("CONTACT_FORM.FORM.SUBMIT"),"is-loading":n.inProgress},null,8,["label","is-loading"]),b(u,{faded:"",slate:"",type:"reset",label:e.$t("CONTACT_FORM.FORM.CANCEL"),onClick:Ke(a.onCancel,["prevent"])},null,8,["label","onClick"])])],32)}const dRe=Re(jwe,[["render",cRe],["__scopeId","data-v-cfe61f83"]]),uRe={components:{ContactForm:dRe},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:()=>({})}},emits:["cancel","update:show"],computed:{...gt({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("cancel")},async onSubmit(e){await this.$store.dispatch("contacts/update",e),await this.$store.dispatch("contacts/fetchContactableInbox",this.contact.id)}}},mRe={class:"flex flex-col h-auto overflow-auto"};function pRe(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("ContactForm"),r=F("woot-modal");return m(),P(r,{show:a.localShow,"onUpdate:show":t[0]||(t[0]=d=>a.localShow=d),"on-close":a.onCancel,"modal-type":"right-aligned"},{default:j(()=>[c("div",mRe,[b(i,{"header-title":`${e.$t("EDIT_CONTACT.TITLE")} - ${n.contact.name||n.contact.email}`,"header-content":e.$t("EDIT_CONTACT.DESC")},null,8,["header-title","header-content"]),b(l,{contact:n.contact,"in-progress":e.uiFlags.isUpdating,"on-submit":a.onSubmit,onSuccess:a.onSuccess,onCancel:a.onCancel},null,8,["contact","in-progress","on-submit","onSuccess","onCancel"])])]),_:1},8,["show","on-close"])}const hRe=Re(uRe,[["render",pRe]]),fRe={props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}},gRe={key:0,class:"my-4 relative p-2.5 border rounded-[4px] text-slate-800 dark:text-slate-100 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800"},_Re={class:"text-base font-medium text-slate-900 dark:text-white"},vRe={class:"ml-0 list-none"};function bRe(e,t,n,s,o,a){const i=ct("dompurify-html");return n.parentContactName?(m(),f("div",gRe,[c("h5",_Re,v(e.$t("MERGE_CONTACTS.SUMMARY.TITLE")),1),c("ul",vRe,[c("li",null,[t[0]||(t[0]=c("span",{class:"inline-block mr-1"},"",-1)),ie(c("span",null,null,512),[[i,e.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:n.primaryContactName})]])]),c("li",null,[t[1]||(t[1]=c("span",{class:"inline-block mr-1"},"",-1)),ie(c("span",null,null,512),[[i,e.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:n.primaryContactName,parentContactName:n.parentContactName})]])])])])):x("",!0)}const ERe=Re(fRe,[["render",bRe]]),TRe={components:{Thumbnail:Qn},props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}}},yRe={class:"option-item--user"},ARe={class:"option__user-data"},SRe={class:"option__title"},IRe={key:0,class:"user-identifier"},CRe={class:"option__body"},NRe={key:0,class:"email-icon-wrap"},ORe={key:1,class:"phone-icon-wrap"},xRe={key:2};function wRe(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("fluent-icon");return m(),f("div",yRe,[b(i,{src:n.thumbnail,size:"28px",username:n.name},null,8,["src","username"]),c("div",ARe,[c("h5",SRe,[be(v(n.name)+" ",1),n.identifier?(m(),f("span",IRe,v(e.$t("MERGE_CONTACTS.DROPDOWN_ITEM.ID",{identifier:n.identifier})),1)):x("",!0)]),c("p",CRe,[n.email?(m(),f("span",NRe,[b(l,{class:"merge-contact--icon",icon:"mail",size:"12"}),be(" "+v(n.email),1)])):x("",!0),n.phoneNumber?(m(),f("span",ORe,[b(l,{class:"merge-contact--icon",icon:"call",size:"12"}),be(" "+v(n.phoneNumber),1)])):x("",!0),!n.phoneNumber&&!n.email?(m(),f("span",xRe,v("---"))):x("",!0)])])])}const RRe=Re(TRe,[["render",wRe],["__scopeId","data-v-3bcd22e2"]]),$Re={components:{MergeContactSummary:ERe,ContactDropdownItem:RRe,NextButton:he},props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:()=>[]}},emits:["search","submit","cancel"],setup(){return{v$:Lt()}},validations:{primaryContact:{required:it},parentContact:{required:it}},data(){return{parentContact:void 0}},computed:{parentContactName(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange(e){this.$emit("search",e)},onSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.parentContact.id)},onCancel(){this.$emit("cancel")}}},MRe={class:"multiselect__label"},kRe={key:0,class:"message"},LRe={class:"flex multiselect-wrap--medium"},DRe={class:"w-8 relative text-base text-slate-100 dark:text-slate-600 after:content-[''] after:h-12 after:w-0 after:left-4 after:absolute after:border-l after:border-solid after:border-slate-100 after:dark:border-slate-600 before:content-[''] before:h-0 before:w-4 before:left-4 before:top-12 before:absolute before:border-b before:border-solid before:border-slate-100 before:dark:border-slate-600"},PRe={class:"flex flex-col w-full"},BRe={class:"multiselect__label"},FRe={class:"flex justify-end gap-2 mt-6"};function URe(e,t,n,s,o,a){const i=F("woot-label"),l=F("ContactDropdownItem"),r=F("multiselect"),d=F("fluent-icon"),u=F("MergeContactSummary"),p=F("NextButton");return m(),f("form",{onSubmit:t[1]||(t[1]=Ke((...h)=>a.onSubmit&&a.onSubmit(...h),["prevent"]))},[c("div",null,[c("div",null,[c("div",{class:re(["mt-1 multiselect-wrap--medium",{error:s.v$.parentContact.$error}])},[c("label",MRe,[be(v(e.$t("MERGE_CONTACTS.PARENT.TITLE"))+" ",1),b(i,{title:e.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:"",class:"ml-2"},null,8,["title"])]),b(r,{modelValue:o.parentContact,"onUpdate:modelValue":t[0]||(t[0]=h=>o.parentContact=h),options:n.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:e.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":"",loading:n.isSearching,"max-height":150,"open-direction":"top",onSearchChange:a.searchChange},{singleLabel:j(h=>[b(l,{thumbnail:h.option.thumbnail,identifier:h.option.id,name:h.option.name,email:h.option.email,"phone-number":h.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),option:j(h=>[b(l,{thumbnail:h.option.thumbnail,identifier:h.option.id,name:h.option.name,email:h.option.email,"phone-number":h.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),noResult:j(()=>[c("span",null,v(e.$t("AGENT_MGMT.SEARCH.NO_RESULTS")),1)]),_:1},8,["modelValue","options","placeholder","loading","onSearchChange"]),s.v$.parentContact.$error?(m(),f("span",kRe,v(e.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR")),1)):x("",!0)],2)]),c("div",LRe,[c("div",DRe,[b(d,{icon:"arrow-up",class:"absolute -top-1 left-2",size:"17"})]),c("div",PRe,[c("label",BRe,[be(v(e.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+" ",1),b(i,{title:e.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:"",class:"ml-2"},null,8,["title"])]),b(r,{"model-value":n.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},{singleLabel:j(h=>[b(l,{thumbnail:h.option.thumbnail,name:h.option.name,identifier:h.option.id,email:h.option.email,"phone-number":h.option.phoneNumber},null,8,["thumbnail","name","identifier","email","phone-number"])]),_:1},8,["model-value"])])])]),b(u,{"primary-contact-name":n.primaryContact.name,"parent-contact-name":a.parentContactName},null,8,["primary-contact-name","parent-contact-name"]),c("div",FRe,[b(p,{faded:"",slate:"",type:"reset",label:e.$t("MERGE_CONTACTS.FORM.CANCEL"),onClick:Ke(a.onCancel,["prevent"])},null,8,["label","onClick"]),b(p,{type:"submit","is-loading":n.isMerging,label:e.$t("MERGE_CONTACTS.FORM.SUBMIT")},null,8,["is-loading","label"])])],32)}const GRe=Re($Re,[["render",URe],["__scopeId","data-v-7ee883a2"]]),VRe={components:{MergeContact:GRe},props:{show:{type:Boolean,default:!1},primaryContact:{type:Object,required:!0}},emits:["close","update:show"],data(){return{isSearching:!1,searchResults:[]}},computed:{...gt({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onClose(){this.$emit("close")},async onContactSearch(e){this.isSearching=!0,this.searchResults=[];try{const{data:{payload:t}}=await pl.search(e);this.searchResults=t.filter(n=>n.id!==this.primaryContact.id)}catch{Te(this.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"))}finally{this.isSearching=!1}},async onMergeContacts(e){jt(ll.MERGED_CONTACTS);try{await this.$store.dispatch("contacts/merge",{childId:this.primaryContact.id,parentId:e}),Te(this.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),this.onClose()}catch{Te(this.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"))}}}};function HRe(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("MergeContact"),r=F("woot-modal");return m(),P(r,{show:a.localShow,"onUpdate:show":t[0]||(t[0]=d=>a.localShow=d),"on-close":a.onClose},{default:j(()=>[b(i,{"header-title":e.$t("MERGE_CONTACTS.TITLE"),"header-content":e.$t("MERGE_CONTACTS.DESCRIPTION")},null,8,["header-title","header-content"]),b(l,{"primary-contact":n.primaryContact,"is-searching":o.isSearching,"is-merging":e.uiFlags.isMerging,"search-results":o.searchResults,onSearch:a.onContactSearch,onCancel:a.onClose,onSubmit:a.onMergeContacts},null,8,["primary-contact","is-searching","is-merging","search-results","onSearch","onCancel","onSubmit"])]),_:1},8,["show","on-close"])}const KRe=Re(VRe,[["render",HRe]]),rE={"Channel::Email":1,"Channel::Whatsapp":2,"Channel::Sms":3,"Channel::TwilioSms":4,"Channel::WebWidget":5,"Channel::Api":6},v2=({name:e,email:t,channelType:n,phoneNumber:s})=>n===Dt.EMAIL?`${e} (${t})`:n===Dt.TWILIO||n===Dt.WHATSAPP?`${e} (${s})`:e,zRe=({name:e,id:t,email:n,channelType:s,phoneNumber:o,...a})=>({id:t,icon:Rc(s,o,"line"),label:v2({name:e,email:n,channelType:s,phoneNumber:o}),action:"inbox",value:t,name:e,email:n,phoneNumber:o,channelType:s,...a}),WRe=(e,t)=>{const n=rE[e.channelType]||999,s=rE[t.channelType]||999;if(n!==s)return n-s;const o=e.name||"",a=t.name||"";return o.localeCompare(a)},jRe=e=>e?e.map(zRe).sort(WRe):[],YRe=e=>{var n;const t=((n=e.match(/^([^@]*)@/))==null?void 0:n[1])||e.split("@")[0];return t.charAt(0).toUpperCase()+t.slice(1)},b2=e=>e.map(t=>({...t.inbox,sourceId:t.sourceId})),cE=(e,t=[])=>!e||!e.length?[]:e.map(n=>{const s=t.find(o=>o.id===n.id)||{};return{...sr(s,{deep:!0}),...n}}),XRe=(e,t)=>{const n=[];return e.forEach(s=>{t?n.push(s.blobSignedId):n.push(s.resource.file)}),n},qRe=({targetInbox:e,selectedContact:t,message:n,subject:s,ccEmails:o,bccEmails:a,currentUser:i,attachedFiles:l=[],directUploadsEnabled:r=!1})=>{const d={inboxId:e.id,sourceId:e.sourceId,contactId:Number(t.id),message:{content:n},assigneeId:i.id};return l!=null&&l.length&&(d.files=XRe(l,r)),s&&(d.mailSubject=s),o&&(d.message.cc_emails=o),a&&(d.message.bcc_emails=a),d},ZRe=({targetInbox:e,selectedContact:t,message:n,templateParams:s,currentUser:o})=>({inboxId:e.id,sourceId:e.sourceId,contactId:t.id,message:{content:n,template_params:s},assigneeId:o.id}),QRe=({keys:e=["email"],query:t})=>({payload:e.map(n=>{const s={attribute_key:n,filter_operator:"contains",values:[t],attribute_model:"standard"};return e.findIndex(o=>o===n)!==e.length-1&&(s.query_operator="or"),s})}),JRe=async({keys:e,query:t})=>{const{data:{payload:n}}=await pl.filter(void 0,"name",QRe({keys:e,query:t})),s=sr(n,{deep:!0});return(s==null?void 0:s.filter(a=>a.phoneNumber||a.email))||[]},e$e=async e=>{const t={name:e.startsWith("+")?e.slice(1):YRe(e),...e.startsWith("+")?{phone_number:e}:{email:e}},{data:{payload:{contact:n}}}=await pl.create(t);return sr(n,{deep:!0})},t$e=async e=>{const{data:{payload:t=[]}}=await pl.getContactableInboxes(e),n=sr(t,{deep:!0});return b2(n)},di={SINGLE:"single",MULTIPLE:"multiple"},Oa={EMAIL:"email",TEL:"tel",TEXT:"text"},E2=e=>{if(!e)return!0;try{return j3(e)}catch{return!1}},n$e=e=>{try{const t=W3(e);return{isValid:(t==null?void 0:t.isValid())||!1,formattedValue:(t==null?void 0:t.formatInternational())||e}}catch{return{isValid:!1,formattedValue:e}}},s$e=e=>({newTag:{...e===Oa.EMAIL?{email:xi}:{},...e===Oa.TEL?{isValidPhone:E2}:{}}}),a$e=(e,t,n)=>e===Oa.TEL?!E2(t):n.$invalid,o$e=(e,t,n)=>{let s=!0,o=e;if(t===Oa.EMAIL)s=!n;else if(t===Oa.TEL){const{isValid:a,formattedValue:i}=n$e(e);s=a,o=i}return{isValid:s,formattedValue:o}},i$e=(e,t,n)=>({label:e,value:t,...n===Oa.EMAIL?{email:t}:{},...n===Oa.TEL?{phoneNumber:t}:{},thumbnail:{name:e,src:""},action:"create"}),l$e=({mode:e,tags:t,menuItems:n,newTag:s,isLoading:o,type:a,isNewTagInValidType:i})=>{if(e===di.SINGLE&&t.length>=1)return[];const l=n.filter(u=>!t.includes(u.label)),r=s==null?void 0:s.trim();if(r&&!t.includes(r)&&!o&&!l.length){const{isValid:u,formattedValue:p}=o$e(r,a,i);if(u)return[i$e(p,r,a)]}return l},r$e=(e,t)=>!(e===di.SINGLE&&t>=1),c$e=(e,t)=>e.find(n=>n.email===t),d$e={class:"relative flex items-center justify-between w-full gap-3 whitespace-nowrap"},u$e=["for"],m$e=["id","type","placeholder","disabled","onKeydown"],T2={__name:"InlineInput",props:On({type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},customLabelClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},disabled:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!1}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:On(["enterPress","input","blur","focus"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const s=e,o=n,a=Wn(e,"modelValue"),i=U(null),l=()=>{o("enterPress")},r=p=>{o("input",p.target.value),a.value=p.target.value},d=p=>{o("blur",p.target.value)},u=p=>{o("focus",p.target.value)};return ut(()=>{Zt(()=>{var p;s.focusOnMount&&((p=i.value)==null||p.focus())})}),t({focus:()=>{var p;return(p=i.value)==null?void 0:p.focus()}}),(p,h)=>(m(),f("div",d$e,[e.label?(m(),f("label",{key:0,for:e.id,class:re([e.customLabelClass,"mb-0.5 text-sm font-medium text-n-slate-12"])},v(e.label),11,u$e)):x("",!0),et(p.$slots,"prefix"),ie(c("input",{id:e.id,ref_key:"inlineInputRef",ref:i,"onUpdate:modelValue":h[0]||(h[0]=g=>a.value=g),type:e.type,placeholder:e.placeholder,disabled:e.disabled,class:re([e.customInputClass,"flex w-full reset-base text-sm h-6 !mb-0 border-0 rounded-none outline-none outline-0 bg-transparent dark:bg-transparent placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 dark:text-n-slate-12 transition-all duration-500 ease-in-out"]),onInput:r,onFocus:u,onBlur:d,onKeydown:Fn(Ke(l,["prevent"]),["enter"])},null,42,m$e),[[Ff,a.value]])]))}},p$e={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},h$e=["onClick"],f$e={key:0,class:"relative flex items-center gap-2 flex-1 min-w-[200px] w-full"},wf={__name:"TagInput",props:On({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},type:{type:String,default:Oa.TEXT},isLoading:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[],validator:e=>e.every(({action:t,value:n,label:s})=>t&&n&&s)},showDropdown:{type:Boolean,default:!1},mode:{type:String,default:di.MULTIPLE,validator:e=>[di.SINGLE,di.MULTIPLE].includes(e)},focusOnMount:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:On(["update:modelValue","input","blur","focus","onClickOutside","add","remove"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,o=Wn(e,"modelValue"),a=U(null),i=U(n.modelValue),l=U(""),r=U(!0),d=w(()=>s$e(n.type)),u=Lt(d,{newTag:l}),p=w(()=>a$e(n.type,l.value,u.value)),h=w(()=>n.mode===di.SINGLE?r.value&&!i.value.length:r.value||!i.value.length),g=w(()=>n.mode===di.SINGLE&&i.value.length>=1?!1:n.showDropdown),_=w(()=>l$e({mode:n.mode,tags:i.value,menuItems:n.menuItems,newTag:l.value,isLoading:n.isLoading,type:n.type,isNewTagInValidType:p.value})),T=L=>{const D=c$e(n.menuItems,L);return D?s("add",{value:L,...D}):s("add",{value:L,action:"create"})},S=L=>{var D;i.value.push(L),l.value="",o.value=i.value,(D=a.value)==null||D.focus()},E=async()=>{var D;const L=(D=l.value)==null?void 0:D.trim();if(L){if(!r$e(n.mode,i.value.length)){l.value="";return}if([Oa.EMAIL,Oa.TEL].includes(n.type)||n.allowCreate){if(!await u.value.$validate())return;T(L)}S(L)}},y=L=>{i.value.splice(L,1),o.value=i.value,s("remove")},A=async({email:L,phoneNumber:D,...$})=>{if(n.mode===di.SINGLE&&i.value.length>=1||!n.showDropdown)return;const M=n.type==="email";if(l.value=M?L:D,!await u.value.$validate())return;const K=M?{email:L,...$}:{phoneNumber:D,...$};s("add",K),S(L)},C=()=>{var L;s("focus"),(L=a.value)==null||L.focus(),r.value=!0},O=L=>{L.key===","&&(L.preventDefault(),E())},N=()=>{i.value.length&&(r.value=!1),s("onClickOutside")};lt(()=>n.modelValue,L=>{i.value=L}),lt(()=>l.value,async L=>{var D;n.type==="email"&&((D=L==null?void 0:L.trim())==null?void 0:D.length)>2&&await u.value.$validate()});const R=L=>s("input",L),k=L=>s("blur",L);return(L,D)=>ie((m(),f("div",{class:"flex flex-wrap w-full gap-2 border border-transparent focus:outline-none",tabindex:"0",onFocus:C,onClick:C},[(m(!0),f(pe,null,ye(i.value,($,M)=>(m(),f("div",{key:M,class:"flex items-center justify-center max-w-full gap-1 px-3 py-1 rounded-lg h-7 bg-n-alpha-2"},[c("span",p$e,v($),1),c("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3.5 text-n-slate-11",onClick:Ke(K=>y(M),["stop"])},null,8,h$e)]))),128)),h.value||g.value?(m(),f("div",f$e,[b(T2,{ref_key:"tagInputRef",ref:a,modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=$=>l.value=$),placeholder:e.placeholder,disabled:e.disabled,class:"w-full","focus-on-mount":e.focusOnMount,"custom-input-class":`w-full ${p.value?"!text-n-ruby-9 dark:!text-n-ruby-9":""}`,onEnterPress:E,onFocus:C,onInput:R,onBlur:k,onKeydown:O},null,8,["modelValue","placeholder","disabled","focus-on-mount","custom-input-class"]),g.value?(m(),P(ma,{key:0,"menu-items":_.value,"is-searching":e.isLoading,class:"left-0 z-[100] top-8 overflow-y-auto max-h-60 w-[inherit] max-w-md dark:!outline-n-slate-5",onAction:A},null,8,["menu-items","is-searching"])):x("",!0)])):x("",!0)],32)),[[I(qo),()=>N()]])}},g$e={class:"relative flex-1 px-4 py-3 overflow-y-visible"},_$e={class:"flex items-baseline w-full gap-3 min-h-7"},v$e={class:"text-sm font-medium text-n-slate-11 whitespace-nowrap"},b$e={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 px-3 min-h-7 min-w-0"},E$e={class:"text-sm truncate text-n-slate-12"},T$e={class:"text-sm truncate text-n-slate-12"},Md="COMPOSE_NEW_CONVERSATION.FORM.CONTACT_SELECTOR",y$e={__name:"ContactSelector",props:{contacts:{type:Array,required:!0},selectedContact:{type:Object,default:null},showContactsDropdown:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},isCreatingContact:{type:Boolean,required:!0},contactId:{type:String,default:null},contactableInboxesList:{type:Array,default:()=>[]},showInboxesDropdown:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1}},emits:["searchContacts","setSelectedContact","clearSelectedContact","updateDropdown"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(Oa.EMAIL),i=w(()=>{var u;return(u=n.contacts)==null?void 0:u.map(({name:p,id:h,thumbnail:g,email:_,...T})=>({id:h,label:_?`${p} (${_})`:p,value:h,thumbnail:{name:p,src:g},...T,name:p,email:_,action:"contact"}))}),l=w(()=>{const{name:u,email:p="",phoneNumber:h=""}=n.selectedContact||{};return p?`${u} (${p})`:h?`${u} (${h})`:u||""}),r=w(()=>n.hasErrors?"[&_input]:placeholder:!text-n-ruby-9 [&_input]:dark:placeholder:!text-n-ruby-9":""),d=u=>{a.value=u.startsWith("+")?Oa.TEL:Oa.EMAIL,s("searchContacts",u)};return(u,p)=>{var h;return m(),f("div",g$e,[c("div",_$e,[c("label",v$e,v(I(o)(`${Md}.LABEL`)),1),e.isCreatingContact?(m(),f("div",b$e,[c("span",E$e,v(I(o)(`${Md}.CONTACT_CREATING`)),1)])):e.selectedContact?(m(),f("div",{key:1,class:re(["flex items-center gap-1.5 rounded-md bg-n-alpha-2 min-h-7 min-w-0",e.contactId?"px-3":"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1"])},[c("span",T$e,v(e.isCreatingContact?I(o)(`${Md}.CONTACT_CREATING`):l.value),1),e.contactId?x("",!0):(m(),P(he,{key:0,variant:"ghost",icon:"i-lucide-x",color:"slate",disabled:e.contactId,size:"xs",onClick:p[0]||(p[0]=g=>s("clearSelectedContact"))},null,8,["disabled"]))],2)):(m(),P(wf,{key:2,placeholder:I(o)(`${Md}.TAG_INPUT_PLACEHOLDER`),mode:"single","menu-items":i.value,"show-dropdown":e.showContactsDropdown,"is-loading":e.isLoading,disabled:((h=e.contactableInboxesList)==null?void 0:h.length)>0&&e.showInboxesDropdown,"allow-create":"",type:a.value,class:re(["flex-1 min-h-7",r.value]),"focus-on-mount":"",onInput:d,onOnClickOutside:p[1]||(p[1]=g=>s("updateDropdown","contacts",!1)),onAdd:p[2]||(p[2]=g=>s("setSelectedContact",g)),onRemove:p[3]||(p[3]=g=>s("clearSelectedContact"))},null,8,["placeholder","menu-items","show-dropdown","is-loading","disabled","type","class"]))])])}}},A$e={class:"flex items-center flex-1 w-full gap-3 px-4 py-3 overflow-y-visible"},S$e={class:"mb-0.5 text-sm font-medium text-n-slate-11 whitespace-nowrap"},I$e={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 truncate ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 h-7 min-w-0"},C$e={class:"text-sm truncate text-n-slate-12"},N$e={key:1,class:"relative flex items-center h-7"},O$e={__name:"InboxSelector",props:{targetInbox:{type:Object,default:null},selectedContact:{type:Object,default:null},showInboxesDropdown:{type:Boolean,required:!0},contactableInboxesList:{type:Array,default:()=>[]},hasErrors:{type:Boolean,default:!1}},emits:["updateInbox","toggleDropdown","handleInboxAction"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=w(()=>v2(n.targetInbox));return(i,l)=>{var r;return m(),f("div",A$e,[c("label",S$e,v(I(o)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.LABEL")),1),e.targetInbox?(m(),f("div",I$e,[c("span",C$e,v(a.value),1),b(he,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"flex-shrink-0",onClick:l[0]||(l[0]=d=>s("updateInbox",null))})])):ie((m(),f("div",N$e,[b(he,{label:I(o)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.BUTTON"),variant:"link",size:"sm",color:e.hasErrors?"ruby":"slate",disabled:!e.selectedContact,class:"hover:!no-underline",onClick:l[1]||(l[1]=d=>s("toggleDropdown",!e.showInboxesDropdown))},null,8,["label","color","disabled"]),((r=e.contactableInboxesList)==null?void 0:r.length)>0&&e.showInboxesDropdown?(m(),P(ma,{key:0,"menu-items":e.contactableInboxesList,class:"left-0 z-[100] top-8 overflow-y-auto max-h-60 w-fit max-w-sm dark:!outline-n-slate-5",onAction:l[2]||(l[2]=d=>s("handleInboxAction",d))},null,8,["menu-items"])):x("",!0)])),[[I(qo),()=>s("toggleDropdown",!1)]])])}}},x$e={class:"flex flex-col divide-y divide-n-strong"},w$e={class:"flex items-baseline flex-1 w-full h-8 gap-3 px-4 py-3"},R$e={class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},$$e={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},M$e={class:"flex items-center w-full gap-3 min-h-7"},k$e={key:0,class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},L$e={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},zi="COMPOSE_NEW_CONVERSATION.FORM.EMAIL_OPTIONS",D$e={__name:"EmailOptions",props:On({contacts:{type:Array,required:!0},showCcEmailsDropdown:{type:Boolean,required:!1},showBccEmailsDropdown:{type:Boolean,required:!1},isLoading:{type:Boolean,default:!1},hasErrors:{type:Boolean,default:!1}},{subject:{type:String,default:""},subjectModifiers:{},ccEmails:{type:String,default:""},ccEmailsModifiers:{},bccEmails:{type:String,default:""},bccEmailsModifiers:{}}),emits:On(["searchCcEmails","searchBccEmails","updateDropdown"],["update:subject","update:ccEmails","update:bccEmails"]),setup(e,{emit:t}){const n=e,s=t,o=U(!1),a=()=>{o.value=!o.value},i=Wn(e,"subject"),l=Wn(e,"ccEmails"),r=Wn(e,"bccEmails"),{t:d}=He(),u=w(()=>n.ccEmails?n.ccEmails.split(",").map(S=>S.trim()):[]),p=w(()=>n.bccEmails?n.bccEmails.split(",").map(S=>S.trim()):[]),h=w(()=>{var S;return(S=n.contacts)==null?void 0:S.map(({name:E,id:y,email:A})=>({id:y,label:A,email:A,thumbnail:{name:E,src:""},value:y,action:"email"}))}),g=S=>{l.value=S.join(",")},_=S=>{r.value=S.join(",")},T=w(()=>n.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"");return(S,E)=>(m(),f("div",x$e,[c("div",w$e,[b(T2,{modelValue:i.value,"onUpdate:modelValue":E[0]||(E[0]=y=>i.value=y),placeholder:I(d)(`${zi}.SUBJECT_PLACEHOLDER`),label:I(d)(`${zi}.SUBJECT_LABEL`),"focus-on-mount":"","custom-input-class":T.value},null,8,["modelValue","placeholder","label","custom-input-class"])]),c("div",R$e,[c("label",$$e,v(I(d)(`${zi}.CC_LABEL`)),1),c("div",M$e,[b(wf,{"model-value":u.value,placeholder:I(d)(`${zi}.CC_PLACEHOLDER`),"menu-items":h.value,"show-dropdown":e.showCcEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7",onFocus:E[1]||(E[1]=y=>s("updateDropdown","cc",!0)),onInput:E[2]||(E[2]=y=>s("searchCcEmails",y)),onOnClickOutside:E[3]||(E[3]=y=>s("updateDropdown","cc",!1)),"onUpdate:modelValue":g},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"]),b(he,{label:I(d)(`${zi}.BCC_BUTTON`),variant:"ghost",size:"sm",color:"slate",class:"flex-shrink-0",onClick:a},null,8,["label"])])]),o.value?(m(),f("div",k$e,[c("label",L$e,v(I(d)(`${zi}.BCC_LABEL`)),1),b(wf,{"model-value":p.value,placeholder:I(d)(`${zi}.BCC_PLACEHOLDER`),"menu-items":h.value,"show-dropdown":e.showBccEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7","focus-on-mount":"",onFocus:E[4]||(E[4]=y=>s("updateDropdown","bcc",!0)),onInput:E[5]||(E[5]=y=>s("searchBccEmails",y)),onOnClickOutside:E[6]||(E[6]=y=>s("updateDropdown","bcc",!1)),"onUpdate:modelValue":_},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"])])):x("",!0)]))}},P$e={class:"flex flex-col min-w-0 gap-1"},B$e={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},F$e={key:0,class:"flex items-center justify-end h-4 ltr:right-3 rtl:left-3"},U$e={key:0,class:"text-xs tabular-nums text-n-slate-10"},G$e={__name:"Editor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},focusOnMount:{type:Boolean,default:!1},maxLength:{type:Number,default:200},showCharacterCount:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=Pf(),a=U(!1),i=w(()=>n.modelValue.length),l=w(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-green-500 dark:text-green-400";default:return"text-n-slate-11 dark:text-n-slate-11"}}),r=p=>{n.disabled||s("update:modelValue",p)},d=()=>{n.disabled||(a.value=!0)},u=()=>{n.disabled||(a.value=!1)};return lt(()=>n.modelValue,p=>{n.maxLength&&n.showCharacterCount&&!o.actions&&i.value>=n.maxLength&&s("update:modelValue",p.slice(0,n.maxLength))}),(p,h)=>(m(),f("div",P$e,[e.label?(m(),f("label",B$e,v(e.label),1)):x("",!0),c("div",{class:re(["flex flex-col w-full gap-2 px-3 py-3 transition-all duration-500 ease-in-out border rounded-lg editor-wrapper bg-n-alpha-black2",[{"cursor-not-allowed opacity-50 pointer-events-none !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":a.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!a.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!a.value}]])},[b(wo,{"model-value":e.modelValue,placeholder:e.placeholder,"focus-on-mount":e.focusOnMount,disabled:e.disabled,"enable-variables":e.enableVariables,"enable-canned-responses":e.enableCannedResponses,onInput:r,onFocus:d,onBlur:u},null,8,["model-value","placeholder","focus-on-mount","disabled","enable-variables","enable-canned-responses"]),e.showCharacterCount||I(o).actions?(m(),f("div",F$e,[e.showCharacterCount&&!I(o).actions?(m(),f("span",U$e,v(i.value)+" / "+v(e.maxLength),1)):et(p.$slots,"actions",{key:1},void 0,!0)])):x("",!0)],2),e.message?(m(),f("p",{key:1,class:re(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",l.value])},v(e.message),3)):x("",!0)]))}},Yc=Re(G$e,[["__scopeId","data-v-8b4480e9"]]),V$e={__name:"MessageEditor",props:On({isEmailOrWebWidgetInbox:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1},hasAttachments:{type:Boolean,default:!1},sendWithSignature:{type:Boolean,default:!1},messageSignature:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,{t:n}=He(),s=Wn(e,"modelValue"),o=U({hasSlashCommand:!1,showMentions:!1,mentionSearchKey:""}),a=w(()=>nl(t.messageSignature));lt(s,r=>{if(t.isEmailOrWebWidgetInbox)return;const d=r?_o(r,a.value):"",u=d.startsWith("/");o.value={...o.value,hasSlashCommand:u,showMentions:u,mentionSearchKey:u?d.slice(1):""}},{immediate:!0});const i=()=>{o.value.showMentions=!1},l=async r=>{const d=t.sendWithSignature?mi(r,a.value):r;await Zt(),s.value=d};return(r,d)=>{const u=ct("on-clickaway");return m(),f("div",{class:re(["flex-1 h-full",[!e.hasAttachments&&"min-h-[200px]"]])},[e.isEmailOrWebWidgetInbox?(m(),P(Yc,{key:0,modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=p=>s.value=p),placeholder:I(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:re(["[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 [&>div]:!bg-transparent h-full [&_.ProseMirror-woot-style]:!max-h-[200px]",e.hasErrors?"[&_.empty-node]:before:!text-n-ruby-9 [&_.empty-node]:dark:before:!text-n-ruby-9":""]),"enable-variables":"","show-character-count":!1},null,8,["modelValue","placeholder","class"])):(m(),P(Rg,{key:1,modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=p=>s.value=p),placeholder:I(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:"!px-0 [&>div]:!px-4 [&>div]:!border-transparent [&>div]:!bg-transparent","custom-text-area-class":e.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"","auto-height":"","allow-signature":"",signature:e.messageSignature,"send-with-signature":e.sendWithSignature},{default:j(()=>[o.value.showMentions&&o.value.hasSlashCommand?ie((m(),P(Mg,{key:0,class:"normal-editor__canned-box","search-key":o.value.mentionSearchKey,onReplace:l},null,8,["search-key"])),[[u,i]]):x("",!0)]),_:1},8,["modelValue","placeholder","custom-text-area-class","signature","send-with-signature"]))],2)}}},H$e=({isATwilioSMSChannel:e,attachFile:t})=>{const{t:n}=He(),s=Ve("getCurrentAccountId"),o=Ve("getCurrentUser"),a=Ve("getSelectedChat"),i=Ve("globalConfig/get"),l=w(()=>e?Gh:oc),r=p=>{p&&(il(p,l.value)?new Hf.DirectUpload(p.file,`/api/v1/accounts/${s.value}/conversations/${a.value.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:g=>{g.setRequestHeader("api_access_token",o.value.access_token)}}).create((g,_)=>{g?Te(g):t({file:p,blob:_})}):Te(n("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:l.value})))},d=p=>{p&&(il(p,l.value)?t({file:p}):Te(n("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:l.value})))};return{onFileUpload:p=>{i.value.directUploadsEnabled?r(p):d(p)}}},K$e={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto left-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},z$e={class:"text-sm text-n-slate-12"},W$e=["innerHTML"],j$e={key:0,class:"text-sm font-medium text-n-slate-12"},Y$e={class:"flex items-center h-8 text-sm min-w-6 ltr:text-left rtl:text-right text-n-slate-10"},X$e={class:"flex items-end justify-between w-full gap-3 h-14"},q$e={__name:"WhatsappTemplateParser",props:{template:{type:Object,required:!0}},emits:["sendMessage","back"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U({}),i=w(()=>{var S;return((S=n.template)==null?void 0:S.name)||""}),l=w(()=>{var S,E;return(E=(S=n.template)==null?void 0:S.components)==null?void 0:E.find(y=>y.type==="BODY").text}),r=S=>S.replace(/{{|}}/g,""),d=w(()=>l.value.replace(/{{([^}]+)}}/g,(S,E)=>{const y=r(E);return a.value[y]||`{{${E}}}`})),u=w(()=>(l.value.match(/{{([^}]+)}}/g)||[]).reduce((E,y)=>{const A=r(y),C=a.value[A]||y;return E.replace(y,`<span class="break-all text-n-slate-12">${C}</span>`)},l.value)),p=w(()=>{const S={};return Object.keys(a.value).forEach(E=>{S[E]={required:ou(!0)}}),{processedParams:S}}),h=Lt(p,{processedParams:a}),g=S=>{var E;return(E=h.value.processedParams[S])!=null&&E.$error?"error":"info"},_=()=>{const S=l.value.match(/{{([^}]+)}}/g);if(!S)return;const E=S.map(y=>r(y));a.value=E.reduce((y,A)=>(y[A]="",y),{})},T=async()=>{if(!await h.value.$validate())return;const E={message:d.value,templateParams:{name:n.template.name,category:n.template.category,language:n.template.language,namespace:n.template.namespace,processed_params:a.value}};s("sendMessage",E)};return ut(()=>{_()}),(S,E)=>(m(),f("div",K$e,[c("span",z$e,v(I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.TEMPLATE_NAME",{templateName:i.value})),1),c("p",{class:"mb-0 text-sm text-n-slate-11",innerHTML:u.value},null,8,W$e),Object.keys(a.value).length?(m(),f("span",j$e,v(I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.VARIABLES")),1)):x("",!0),(m(!0),f(pe,null,ye(a.value,(y,A)=>(m(),f("div",{key:A,class:"flex items-center w-full gap-2"},[c("span",Y$e,v(A),1),b(ps,{modelValue:a.value[A],"onUpdate:modelValue":C=>a.value[A]=C,"custom-input-class":"!h-8 w-full !bg-transparent",class:"w-full","message-type":g(A)},null,8,["modelValue","onUpdate:modelValue","message-type"])]))),128)),c("div",X$e,[b(he,{label:I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.BACK"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:E[0]||(E[0]=y=>s("back"))},null,8,["label"]),b(he,{label:I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.SEND_MESSAGE"),class:"w-full font-medium",onClick:T},null,8,["label"])])]))}},Z$e={class:"relative"},Q$e={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto left-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},J$e={class:"relative w-full"},eMe=["placeholder"],tMe=["onClick"],nMe={class:"text-sm text-n-slate-12"},sMe={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},aMe={key:0,class:"w-full pt-2 text-sm text-n-slate-11"},oMe={__name:"WhatsAppOptions",props:{messageTemplates:{type:Array,default:()=>[]}},emits:["sendMessage"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=["DOCUMENT","IMAGE","VIDEO"],i=U(""),l=U(null),r=U(!1),d=w(()=>(Array.isArray(n.messageTemplates)?n.messageTemplates:[]).filter(E=>{var y;return((y=E==null?void 0:E.status)==null?void 0:y.toLowerCase())==="approved"}).filter(E=>{var y;return(y=E==null?void 0:E.components)==null?void 0:y.every(A=>!a.includes(A.format))})),u=w(()=>d.value.filter(S=>S.name.toLowerCase().includes(i.value.toLowerCase()))),p=S=>S.components.find(E=>E.type==="BODY").text,h=()=>{i.value="",r.value=!r.value},g=S=>{l.value=S,r.value=!1},_=()=>{l.value=null,r.value=!0},T=S=>{s("sendMessage",S),l.value=null};return(S,E)=>(m(),f("div",Z$e,[b(he,{icon:"i-ri-whatsapp-line",label:I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:l.value,class:"!text-xs font-medium",onClick:h},null,8,["label","disabled"]),r.value?(m(),f("div",Q$e,[c("div",J$e,[E[1]||(E[1]=c("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),ie(c("input",{"onUpdate:modelValue":E[0]||(E[0]=y=>i.value=y),type:"search",placeholder:I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,eMe),[[at,i.value]])]),(m(!0),f(pe,null,ye(u.value,y=>(m(),f("div",{key:y.id,class:"flex flex-col w-full gap-2 p-2 rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:A=>g(y)},[c("span",nMe,v(y.name),1),c("p",sMe,v(p(y)),1)],8,tMe))),128)),u.value.length===0?(m(),f("p",aMe,v(I(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.EMPTY_STATE")),1)):x("",!0)])):x("",!0),l.value?(m(),P(q$e,{key:1,template:l.value,onSendMessage:T,onBack:_},null,8,["template"])):x("",!0)]))}},iMe={class:"flex items-center justify-between w-full h-[3.25rem] gap-2 px-4 py-3"},lMe={class:"flex items-center gap-2"},rMe={key:1,class:"relative"},cMe={class:"flex items-center gap-2"},dMe={__name:"ActionButtons",props:{attachedFiles:{type:Array,default:()=>[]},isWhatsappInbox:{type:Boolean,default:!1},isEmailOrWebWidgetInbox:{type:Boolean,default:!1},isTwilioSmsInbox:{type:Boolean,default:!1},messageTemplates:{type:Array,default:()=>[]},channelType:{type:String,default:""},isLoading:{type:Boolean,default:!1},disableSendButton:{type:Boolean,default:!1},hasSelectedInbox:{type:Boolean,default:!1},hasNoInbox:{type:Boolean,default:!1},isDropdownActive:{type:Boolean,default:!1},messageSignature:{type:String,default:""}},emits:["discard","sendMessage","sendWhatsappMessage","insertEmoji","addSignature","removeSignature","attachFile"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(null),i=U(!1),l=Du(()=>Oo(()=>import("./EmojiInput-C1k9EJvN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),r=w(()=>n.isEmailOrWebWidgetInbox?n.messageSignature:nl(n.messageSignature)),{fetchSignatureFlagFromUISettings:d,setSignatureFlagForInbox:u,isEditorHotKeyEnabled:p}=Mn(),h=w(()=>d(n.channelType)),g=()=>{r.value&&(h.value?s("addSignature",r.value):s("removeSignature",r.value))},_=()=>{u(n.channelType,!h.value),g()};lt(()=>n.hasSelectedInbox,A=>{Zt(()=>{A&&n.isEmailOrWebWidgetInbox&&g()})},{immediate:!0});const T=A=>{s("insertEmoji",A)},{onFileUpload:S}=H$e({isATwilioSMSChannel:n.isTwilioSmsInbox,attachFile:({blob:A,file:C})=>{if(!C)return;const O=new FileReader;O.readAsDataURL(C.file),O.onloadend=()=>{const N={resource:A||C,isPrivate:!1,thumb:O.result,blobSignedId:A==null?void 0:A.signed_id};s("attachFile",[...n.attachedFiles,N])}}}),E=w(()=>{const A=p("cmd_enter")?" + ":"";return o("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.SEND",{keyCode:A})});return Vs({Enter:{action:()=>{p("enter")&&!n.isWhatsappInbox&&!n.isDropdownActive&&s("sendMessage")}},"$mod+Enter":{action:()=>{p("cmd_enter")&&!n.isWhatsappInbox&&!n.isDropdownActive&&s("sendMessage")}}}),(A,C)=>(m(),f("div",iMe,[c("div",lMe,[e.isWhatsappInbox?(m(),P(oMe,{key:0,"message-templates":e.messageTemplates,onSendMessage:C[0]||(C[0]=O=>s("sendWhatsappMessage",O))},null,8,["message-templates"])):x("",!0),!e.isWhatsappInbox&&!e.hasNoInbox?ie((m(),f("div",rMe,[b(he,{icon:"i-lucide-smile-plus",color:"slate",size:"sm",class:"!w-10",onClick:C[1]||(C[1]=O=>i.value=!i.value)}),i.value?(m(),P(I(l),{key:0,class:"left-0 top-full mt-1.5","on-click":T})):x("",!0)])),[[I(qo),()=>i.value=!1]]):x("",!0),e.isEmailOrWebWidgetInbox?(m(),P(I(au),{key:2,ref_key:"uploadAttachment",ref:a,"input-id":"composeNewConversationAttachment",size:4096*4096,accept:I(eu),multiple:"","drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},class:"p-px",onInputFile:I(S)},{default:j(()=>[b(he,{icon:"i-lucide-plus",color:"slate",size:"sm",class:"!w-10 relative"})]),_:1},8,["accept","onInputFile"])):x("",!0),e.hasSelectedInbox&&!e.isWhatsappInbox?(m(),P(he,{key:3,icon:"i-lucide-signature",color:"slate",size:"sm",class:"!w-10",onClick:_})):x("",!0)]),c("div",cMe,[b(he,{label:I(o)("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.DISCARD"),variant:"faded",color:"slate",size:"sm",class:"!text-xs font-medium",onClick:C[2]||(C[2]=O=>s("discard"))},null,8,["label"]),e.isWhatsappInbox?x("",!0):(m(),P(he,{key:0,label:E.value,size:"sm",class:"!text-xs font-medium",disabled:e.isLoading||e.disableSendButton,"is-loading":e.isLoading,onClick:C[3]||(C[3]=O=>s("sendMessage"))},null,8,["label","disabled","is-loading"]))])]))}},uMe=Re(dMe,[["__scopeId","data-v-719d0b26"]]),mMe={},pMe={class:"flex items-center w-full px-4 py-3 dark:bg-n-amber-11/15 bg-n-amber-3"},hMe={class:"text-sm dark:text-n-amber-11 text-n-amber-11"};function fMe(e,t){return m(),f("div",pMe,[c("span",hMe,v(e.$t("COMPOSE_NEW_CONVERSATION.FORM.NO_INBOX_ALERT")),1)])}const gMe=Re(mMe,[["render",fMe]]),_Me={class:"flex flex-col gap-4 p-4"},vMe={key:0,class:"flex flex-wrap gap-3"},bMe=["src"],EMe={key:1,class:"flex flex-wrap gap-3"},TMe={class:"text-sm font-medium text-n-slate-11"},yMe={__name:"AttachmentPreviews",props:{attachments:{type:Array,required:!0}},emits:["update:attachments"],setup(e,{emit:t}){const n=e,s=t,o=r=>(r.content_type||r.type).includes("image"),a=w(()=>n.attachments.filter(r=>o(r.resource))),i=w(()=>n.attachments.filter(r=>!o(r.resource))),l=r=>{const d=n.attachments.filter(u=>u.resource.id!==r);s("update:attachments",d)};return(r,d)=>(m(),f("div",_Me,[a.value.length>0?(m(),f("div",vMe,[(m(!0),f(pe,null,ye(a.value,u=>(m(),f("div",{key:u.id,class:"relative group/image w-[4.5rem] h-[4.5rem]"},[c("img",{class:"object-cover w-[4.5rem] h-[4.5rem] rounded-lg",src:u.thumb},null,8,bMe),b(he,{variant:"ghost",icon:"i-lucide-trash",color:"slate",class:"absolute top-1 right-1 !w-5 !h-5 transition-opacity duration-150 ease-in-out opacity-0 group-hover/image:opacity-100",onClick:p=>l(u.resource.id)},null,8,["onClick"])]))),128))])):x("",!0),i.value.length>0?(m(),f("div",EMe,[(m(!0),f(pe,null,ye(i.value,u=>(m(),f("div",{key:u.id,class:"max-w-[18.75rem] inline-flex items-center h-8 min-w-0 bg-n-alpha-2 dark:bg-n-solid-3 rounded-lg gap-3 ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2"},[c("span",TMe,v(I(xN)(u.resource)),1),b(he,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"shrink-0 !h-5 !w-5",onClick:p=>l(u.resource.id)},null,8,["onClick"])]))),128))])):x("",!0)]))}},AMe={class:"w-[42rem] divide-y divide-n-strong overflow-visible transition-all duration-300 ease-in-out top-full justify-between flex flex-col bg-n-alpha-3 border border-n-strong shadow-sm backdrop-blur-[100px] rounded-xl"},SMe={__name:"ComposeNewConversationForm",props:{contacts:{type:Array,default:()=>[]},contactId:{type:String,default:null},selectedContact:{type:Object,default:null},targetInbox:{type:Object,default:null},currentUser:{type:Object,default:null},isCreatingContact:{type:Boolean,default:!1},isFetchingInboxes:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isDirectUploadsEnabled:{type:Boolean,default:!1},contactConversationsUiFlags:{type:Object,default:null},contactsUiFlags:{type:Object,default:null},messageSignature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1}},emits:["searchContacts","discard","updateSelectedContact","updateTargetInbox","clearSelectedContact","createConversation"],setup(e,{emit:t}){const n=e,s=t,o=U(!1),a=U(!1),i=U(!1),l=U(!1),r=w(()=>n.contactConversationsUiFlags.isCreating),d=ks({message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),u=w(()=>{var ee,X,z,W,q,Z,ne,ae,ue;return{isEmail:((ee=n.targetInbox)==null?void 0:ee.channelType)===Dt.EMAIL,isTwilio:((X=n.targetInbox)==null?void 0:X.channelType)===Dt.TWILIO,isWhatsapp:((z=n.targetInbox)==null?void 0:z.channelType)===Dt.WHATSAPP,isWebWidget:((W=n.targetInbox)==null?void 0:W.channelType)===Dt.WEB,isApi:((q=n.targetInbox)==null?void 0:q.channelType)===Dt.API,isEmailOrWebWidget:((Z=n.targetInbox)==null?void 0:Z.channelType)===Dt.EMAIL||((ne=n.targetInbox)==null?void 0:ne.channelType)===Dt.WEB,isTwilioSMS:((ae=n.targetInbox)==null?void 0:ae.channelType)===Dt.TWILIO&&((ue=n.targetInbox)==null?void 0:ue.medium)==="sms"}}),p=w(()=>{var ee;return Object.keys(((ee=n.targetInbox)==null?void 0:ee.messageTemplates)||{}).length?n.targetInbox.messageTemplates:[]}),h=w(()=>{var ee;return((ee=n.targetInbox)==null?void 0:ee.channelType)||""}),g=w(()=>({selectedContact:{required:it},targetInbox:{required:it},message:{required:ou(!u.value.isWhatsapp)},subject:{required:ou(u.value.isEmail)}})),_=Lt(g,{selectedContact:w(()=>n.selectedContact),targetInbox:w(()=>n.targetInbox),message:w(()=>d.message),subject:w(()=>d.subject)}),T=w(()=>({isContactInvalid:_.value.selectedContact.$dirty&&_.value.selectedContact.$invalid,isInboxInvalid:_.value.targetInbox.$dirty&&_.value.targetInbox.$invalid,isSubjectInvalid:_.value.subject.$dirty&&_.value.subject.$invalid,isMessageInvalid:_.value.message.$dirty&&_.value.message.$invalid})),S=()=>{const{message:ee,subject:X,ccEmails:z,bccEmails:W,attachedFiles:q}=d;return qRe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:ee,subject:X,ccEmails:z,bccEmails:W,currentUser:n.currentUser,attachedFiles:q,directUploadsEnabled:n.isDirectUploadsEnabled})},E=w(()=>{var ee;return jRe((ee=n.selectedContact)==null?void 0:ee.contactInboxes)}),y=w(()=>n.selectedContact&&E.value.length===0&&!n.contactsUiFlags.isFetchingInboxes&&!n.isFetchingInboxes),A=w(()=>o.value||a.value||i.value||l.value),C=ee=>{o.value=!0,s("searchContacts",{keys:["email","phone_number","name"],query:ee})},O=(ee,X)=>{ee==="cc"?i.value=X:ee==="bcc"?l.value=X:o.value=X},N=ee=>{i.value=!0,s("searchContacts",{keys:["email"],query:ee})},R=ee=>{l.value=!0,s("searchContacts",{keys:["email"],query:ee})},k=async({value:ee,action:X,...z})=>{_.value.$reset(),s("updateSelectedContact",{value:ee,action:X,...z}),o.value=!1,a.value=!0},L=({value:ee,action:X,...z})=>{_.value.$reset(),s("updateTargetInbox",{...z}),a.value=!1,d.attachedFiles=[]},D=ee=>{if(_.value.$reset(),n.sendWithSignature){const X=u.value.isEmailOrWebWidget?n.messageSignature:nl(n.messageSignature);d.message=_o(d.message,X)}s("updateTargetInbox",ee),d.attachedFiles=[]},$=()=>{s("clearSelectedContact"),d.attachedFiles=[]},M=ee=>{d.message+=ee},K=ee=>{d.message=mi(d.message,ee)},B=ee=>{d.message=_o(d.message,ee)},H=ee=>{d.attachedFiles=ee},G=()=>{Object.assign(d,{message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),_.value.$reset()},V=async()=>{if(await _.value.$validate())try{await s("createConversation",{payload:S(),isFromWhatsApp:!1})&&G()}catch{}},Y=async({message:ee,templateParams:X})=>{const z=ZRe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:ee,templateParams:X,currentUser:n.currentUser});await s("createConversation",{payload:z,isFromWhatsApp:!0})};return(ee,X)=>(m(),f("div",AMe,[b(y$e,{contacts:e.contacts,"selected-contact":e.selectedContact,"show-contacts-dropdown":o.value,"is-loading":e.isLoading,"is-creating-contact":e.isCreatingContact,"contact-id":e.contactId,"contactable-inboxes-list":E.value,"show-inboxes-dropdown":a.value,"has-errors":T.value.isContactInvalid,onSearchContacts:C,onSetSelectedContact:k,onClearSelectedContact:$,onUpdateDropdown:O},null,8,["contacts","selected-contact","show-contacts-dropdown","is-loading","is-creating-contact","contact-id","contactable-inboxes-list","show-inboxes-dropdown","has-errors"]),y.value?(m(),P(gMe,{key:0})):(m(),P(O$e,{key:1,"target-inbox":e.targetInbox,"selected-contact":e.selectedContact,"show-inboxes-dropdown":a.value,"contactable-inboxes-list":E.value,"has-errors":T.value.isInboxInvalid,onUpdateInbox:D,onToggleDropdown:X[0]||(X[0]=z=>a.value=z),onHandleInboxAction:L},null,8,["target-inbox","selected-contact","show-inboxes-dropdown","contactable-inboxes-list","has-errors"])),u.value.isEmail?(m(),P(D$e,{key:2,"cc-emails":d.ccEmails,"onUpdate:ccEmails":X[1]||(X[1]=z=>d.ccEmails=z),"bcc-emails":d.bccEmails,"onUpdate:bccEmails":X[2]||(X[2]=z=>d.bccEmails=z),subject:d.subject,"onUpdate:subject":X[3]||(X[3]=z=>d.subject=z),contacts:e.contacts,"show-cc-emails-dropdown":i.value,"show-bcc-emails-dropdown":l.value,"is-loading":e.isLoading,"has-errors":T.value.isSubjectInvalid,onSearchCcEmails:N,onSearchBccEmails:R,onUpdateDropdown:O},null,8,["cc-emails","bcc-emails","subject","contacts","show-cc-emails-dropdown","show-bcc-emails-dropdown","is-loading","has-errors"])):x("",!0),!u.value.isWhatsapp&&!y.value?(m(),P(V$e,{key:3,modelValue:d.message,"onUpdate:modelValue":X[4]||(X[4]=z=>d.message=z),"message-signature":e.messageSignature,"send-with-signature":e.sendWithSignature,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"has-errors":T.value.isMessageInvalid,"has-attachments":d.attachedFiles.length>0},null,8,["modelValue","message-signature","send-with-signature","is-email-or-web-widget-inbox","has-errors","has-attachments"])):x("",!0),d.attachedFiles.length>0?(m(),P(yMe,{key:4,attachments:d.attachedFiles,"onUpdate:attachments":X[5]||(X[5]=z=>d.attachedFiles=z)},null,8,["attachments"])):x("",!0),b(uMe,{"attached-files":d.attachedFiles,"is-whatsapp-inbox":u.value.isWhatsapp,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"is-twilio-sms-inbox":u.value.isTwilioSMS,"message-templates":p.value,"channel-type":h.value,"is-loading":r.value,"disable-send-button":r.value,"has-selected-inbox":!!e.targetInbox,"has-no-inbox":y.value,"is-dropdown-active":A.value,"message-signature":e.messageSignature,onInsertEmoji:M,onAddSignature:K,onRemoveSignature:B,onAttachFile:H,onDiscard:X[6]||(X[6]=z=>ee.$emit("discard")),onSendMessage:V,onSendWhatsappMessage:Y},null,8,["attached-files","is-whatsapp-inbox","is-email-or-web-widget-inbox","is-twilio-sms-inbox","message-templates","channel-type","is-loading","disable-send-button","has-selected-inbox","has-no-inbox","is-dropdown-active","message-signature"])]))}},Om={__name:"ComposeConversation",props:{alignPosition:{type:String,default:"left"},contactId:{type:String,default:null},isModal:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=Ot(),{t:a}=He(),{fetchSignatureFlagFromUISettings:i}=Mn(),l=U([]),r=U(null),d=U(null),u=U(!1),p=U(!1),h=U(!1),g=U(!1),_=Ve("contacts/getContactById"),T=Ve("contacts/getUIFlags"),S=Ve("getCurrentUser"),E=Ve("globalConfig/get"),y=Ve("contactConversations/getUIFlags"),A=Ve("getMessageSignature"),C=Ve("inboxes/getInboxes"),O=w(()=>{var X;return i((X=d.value)==null?void 0:X.channelType)}),N=w(()=>E.value.directUploadsEnabled),R=w(()=>_.value(n.contactId)),k=w(()=>n.isModal?"":n.alignPosition==="right"?"absolute ltr:left-0 ltr:right-[unset] rtl:right-0 rtl:left-[unset]":"absolute rtl:left-0 rtl:right-[unset] ltr:right-0 ltr:left-[unset]"),L=Ko(async X=>{h.value=!0,l.value=[];try{l.value=await JRe(X),h.value=!1}catch{Te(a("COMPOSE_NEW_CONVERSATION.CONTACT_SEARCH.ERROR_MESSAGE"))}finally{h.value=!1}},300,!1),D=()=>{l.value=[]},$=async({value:X,action:z,...W})=>{let q;if(z==="create"){u.value=!0;try{q=await e$e(X),u.value=!1}catch{u.value=!1;return}}else q=W;if(r.value=q,q!=null&&q.id){p.value=!0;try{const Z=await t$e(q.id);r.value.contactInboxes=cE(Z,C.value),p.value=!1}catch{p.value=!1}}},M=X=>{d.value=X,D()},K=()=>{r.value=null,d.value=null},B=()=>{g.value=!1,n.contactId||(r.value=null),d.value=null,D(),s("close")},H=async({payload:X,isFromWhatsApp:z})=>{try{const W=await o.dispatch("contactConversations/create",{params:X,isFromWhatsApp:z}),q={type:"link",to:`/app/accounts/${W.account_id}/conversations/${W.id}`,message:a("COMPOSE_NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")};return B(),Te(a("COMPOSE_NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),q),!0}catch(W){return Te(W instanceof ar?W.data:a("COMPOSE_NEW_CONVERSATION.FORM.ERROR_MESSAGE")),!1}},G=()=>{g.value=!g.value};lt(R,()=>{var X;if(R.value&&n.contactId){const z=((X=R.value)==null?void 0:X.contactInboxes)||[],W=b2(z);r.value={...R.value,contactInboxes:cE(W,C.value)}}},{immediate:!0,deep:!0});const V=()=>{g.value&&(g.value=!1,s("close"))},Y=()=>{n.isModal&&V()};return ut(()=>D()),Vs({Escape:{action:()=>{g.value&&(g.value=!1)}}}),(X,z)=>ie((m(),f("div",{class:re(["relative",{"z-40":g.value}])},[et(X.$slots,"trigger",{isOpen:g.value,toggle:G}),g.value?(m(),f("div",{key:0,class:re({"fixed z-50 bg-n-alpha-black1 backdrop-blur-[4px] flex items-start pt-[clamp(3rem,15vh,12rem)] justify-center inset-0":e.isModal}),onClick:Ke(Y,["self"])},[b(SMe,{class:re([{"mt-2":!e.isModal},k.value]),contacts:l.value,"contact-id":e.contactId,"is-loading":h.value,"current-user":I(S),"selected-contact":r.value,"target-inbox":d.value,"is-creating-contact":u.value,"is-fetching-inboxes":p.value,"is-direct-uploads-enabled":N.value,"contact-conversations-ui-flags":I(y),"contacts-ui-flags":I(T),"message-signature":I(A),"send-with-signature":O.value,onSearchContacts:I(L),onResetContactSearch:D,onUpdateSelectedContact:$,onUpdateTargetInbox:M,onClearSelectedContact:K,onCreateConversation:H,onDiscard:B},null,8,["class","contacts","contact-id","is-loading","current-user","selected-contact","target-inbox","is-creating-contact","is-fetching-inboxes","is-direct-uploads-enabled","contact-conversations-ui-flags","contacts-ui-flags","message-signature","send-with-signature","onSearchContacts"])],2)):x("",!0)],2)),[[I(qo),[V,{ignore:["div.ProseMirror-prompt"]}]]])}},IMe={components:{NextButton:he,ContactInfoRow:Gwe,EditContact:hRe,Thumbnail:Qn,ComposeConversation:Om,SocialIcons:Wwe,ContactMergeModal:KRe},props:{contact:{type:Object,default:()=>({})},showAvatar:{type:Boolean,default:!0}},emits:["panelClose"],setup(){const{isAdmin:e}=xo();return{isAdmin:e}},data(){return{showEditModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:{...gt({uiFlags:"contacts/getUIFlags"}),contactProfileLink(){return`/app/accounts/${this.$route.params.accountId}/contacts/${this.contact.id}`},additionalAttributes(){return this.contact.additional_attributes||{}},location(){const{country:e="",city:t="",country_code:n}=this.additionalAttributes,s=[t,e].filter(o=>!!o).join(", ");return s?this.findCountryFlag(n,s):""},socialProfiles(){const{social_profiles:e,screen_name:t,social_telegram_user_name:n}=this.additionalAttributes;return{twitter:t,telegram:n,...e||{}}},confirmDeleteMessage(){return` ${this.contact.name}?`}},watch:{"contact.id":{handler(e){this.$store.dispatch("contacts/fetchContactableInbox",e)},immediate:!0}},methods:{dynamicTime:ms,toggleEditModal(){this.showEditModal=!this.showEditModal},openComposeConversationModal(e){e(),yt.emit(sn.NEW_CONVERSATION_MODAL,!0)},closeComposeConversationModal(){yt.emit(sn.NEW_CONVERSATION_MODAL,!1)},toggleDeleteModal(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion(){this.deleteContact(this.contact),this.closeDelete()},closeDelete(){this.showDeleteModal=!1,this.showEditModal=!1},findCountryFlag(e,t){try{if(!e)return`${t} `;const n=e==null?void 0:e.toLowerCase();return`${t} <span class="fi fi-${n} size-3.5"></span>`}catch{return""}},async deleteContact({id:e}){try{await this.$store.dispatch("contacts/delete",e),this.$emit("panelClose"),Te(this.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),bg(this.$route.name)?this.$router.push({name:_4(this.$route.name)}):Eg(this.$route.name)?this.$router.push({name:"inbox_view"}):this.$route.name!=="contacts_dashboard"&&this.$router.push({name:"contacts_dashboard"})}catch(t){Te(t.message?t.message:this.$t("DELETE_CONTACT.API.ERROR_MESSAGE"))}},closeMergeModal(){this.showMergeModal=!1},openMergeModal(){this.showMergeModal=!0}}},CMe={class:"relative items-center w-full p-4"},NMe={class:"flex flex-col w-full gap-2 text-left rtl:text-right"},OMe={class:"flex flex-row justify-between"},xMe={class:"flex flex-col items-start gap-1.5 min-w-0 w-full"},wMe={key:0,class:"flex items-center w-full min-w-0 gap-3"},RMe={class:"flex-shrink max-w-full min-w-0 my-0 text-base capitalize break-words text-n-slate-12"},$Me={class:"flex flex-row items-center gap-2"},MMe={key:0,class:"i-lucide-info text-sm text-n-slate-10"},kMe=["href"],LMe={key:1,class:"break-words mb-0.5"},DMe={class:"flex flex-col items-start w-full gap-2"},PMe={class:"flex items-center w-full mt-0.5 gap-2"};function BMe(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("ContactInfoRow"),r=F("SocialIcons"),d=F("NextButton"),u=F("ComposeConversation"),p=F("EditContact"),h=F("ContactMergeModal"),g=F("woot-delete-modal"),_=ct("tooltip");return m(),f("div",CMe,[c("div",NMe,[c("div",OMe,[n.showAvatar?(m(),P(i,{key:0,src:n.contact.thumbnail,size:"48px",username:n.contact.name,status:n.contact.availability_status},null,8,["src","username","status"])):x("",!0)]),c("div",xMe,[n.showAvatar?(m(),f("div",wMe,[c("h3",RMe,v(n.contact.name),1),c("div",$Me,[n.contact.created_at?ie((m(),f("span",MMe,null,512)),[[_,`${e.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${a.dynamicTime(n.contact.created_at)}`,void 0,{left:!0}]]):x("",!0),c("a",{href:a.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer",class:"leading-3"},t[1]||(t[1]=[c("span",{class:"i-lucide-external-link text-sm text-n-slate-10"},null,-1)]),8,kMe)])])):x("",!0),a.additionalAttributes.description?(m(),f("p",LMe,v(a.additionalAttributes.description),1)):x("",!0),c("div",DMe,[b(l,{href:n.contact.email?`mailto:${n.contact.email}`:"",value:n.contact.email,icon:"mail",emoji:"",title:e.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""},null,8,["href","value","title"]),b(l,{href:n.contact.phone_number?`tel:${n.contact.phone_number}`:"",value:n.contact.phone_number,icon:"call",emoji:"",title:e.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""},null,8,["href","value","title"]),n.contact.identifier?(m(),P(l,{key:0,value:n.contact.identifier,icon:"contact-identify",emoji:"",title:e.$t("CONTACT_PANEL.IDENTIFIER")},null,8,["value","title"])):x("",!0),b(l,{value:a.additionalAttributes.company_name,icon:"building-bank",emoji:"",title:e.$t("CONTACT_PANEL.COMPANY")},null,8,["value","title"]),a.location||a.additionalAttributes.location?(m(),P(l,{key:1,value:a.location||a.additionalAttributes.location,icon:"map",emoji:"",title:e.$t("CONTACT_PANEL.LOCATION")},null,8,["value","title"])):x("",!0),b(r,{"social-profiles":a.socialProfiles},null,8,["social-profiles"])])]),c("div",PMe,[b(u,{"contact-id":String(n.contact.id),"is-modal":"",onClose:a.closeComposeConversationModal},{trigger:j(({toggle:T})=>[ie(b(d,{icon:"i-ph-chat-circle-dots",slate:"",faded:"",sm:"",onClick:S=>a.openComposeConversationModal(T)},null,8,["onClick"]),[[_,e.$t("CONTACT_PANEL.NEW_MESSAGE"),void 0,{"top-end":!0}]])]),_:1},8,["contact-id","onClose"]),ie(b(d,{icon:"i-ph-pencil-simple",slate:"",faded:"",sm:"",onClick:a.toggleEditModal},null,8,["onClick"]),[[_,e.$t("EDIT_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]),ie(b(d,{icon:"i-ph-arrows-merge",slate:"",faded:"",sm:"",disabled:e.uiFlags.isMerging,onClick:a.openMergeModal},null,8,["disabled","onClick"]),[[_,e.$t("CONTACT_PANEL.MERGE_CONTACT"),void 0,{"top-end":!0}]]),s.isAdmin?ie((m(),P(d,{key:0,icon:"i-ph-trash",slate:"",faded:"",sm:"",ruby:"",disabled:e.uiFlags.isDeleting,onClick:a.toggleDeleteModal},null,8,["disabled","onClick"])),[[_,e.$t("DELETE_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]):x("",!0)]),o.showEditModal?(m(),P(p,{key:0,show:o.showEditModal,contact:n.contact,onCancel:a.toggleEditModal},null,8,["show","contact","onCancel"])):x("",!0),o.showMergeModal?(m(),P(h,{key:1,"primary-contact":n.contact,show:o.showMergeModal,onClose:a.closeMergeModal},null,8,["primary-contact","show","onClose"])):x("",!0)]),o.showDeleteModal?(m(),P(g,{key:0,show:o.showDeleteModal,"onUpdate:show":t[0]||(t[0]=T=>o.showDeleteModal=T),"on-close":a.closeDelete,"on-confirm":a.confirmDeletion,title:e.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:e.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":a.confirmDeleteMessage,"confirm-text":e.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":e.$t("DELETE_CONTACT.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):x("",!0)])}const FMe=Re(IMe,[["render",BMe]]),UMe={class:"relative group w-[inherit] whitespace-normal z-20"},GMe={class:"bg-white dark:bg-slate-900 w-fit ltr:left-4 rtl:right-4 top-0 border p-2.5 group-hover:flex items-center hidden absolute border-slate-75 dark:border-slate-800 rounded-lg shadow-md"},VMe={class:"text-slate-800 dark:text-slate-75 mb-0 text-xs"},HMe={__name:"HelperTextPopup",props:{message:{type:String,default:""}},setup(e){return(t,n)=>{const s=F("fluent-icon");return m(),f("div",UMe,[b(s,{icon:"info",size:"14",class:"mt-0.5 text-slate-600 absolute dark:text-slate-400"}),c("div",GMe,[c("p",VMe,v(e.message),1)])])}}},KMe="yyyy-MM-dd",zMe={components:{MultiselectDropdown:_2,HelperTextPopup:HMe,NextButton:he},props:{label:{type:String,required:!0},description:{type:String,default:""},values:{type:Array,default:()=>[]},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeRegex:{type:String,default:null},regexCue:{type:String,default:null},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},emits:["update","delete","copy"],setup(){return{v$:Lt()}},data(){return{isEditing:!1,editedValue:null}},computed:{displayValue(){return this.isAttributeTypeDate?this.value?new Date(this.value||new Date).toLocaleDateString():"":this.isAttributeTypeCheckbox?this.value==="false"?!1:this.value:this.value},formattedValue(){return this.isAttributeTypeDate?Ln(this.value?new Date(this.value):new Date,KMe):this.value},listOptions(){return this.values.map((e,t)=>({id:t+1,name:e}))},selectedItem(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox(){return this.attributeType==="checkbox"},isAttributeTypeList(){return this.attributeType==="list"},isAttributeTypeLink(){return this.attributeType==="link"},isAttributeTypeDate(){return this.attributeType==="date"},urlValue(){return Wh(this.value)?this.value:"---"},hrefURL(){return Wh(this.value)?this.value:""},notAttributeTypeCheckboxAndList(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage(){return this.v$.editedValue.$error},errorMessage(){return this.v$.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.v$.editedValue.regexValidation?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED"):this.regexCue?this.regexCue:this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_INPUT")}},watch:{value(){this.isEditing=!1,this.editedValue=this.formattedValue},contactId(){this.v$.$reset()}},validations(){return this.isAttributeTypeLink?{editedValue:{required:it,url:Oc}}:{editedValue:{required:it,regexValidation:e=>!(this.attributeRegex&&!Yf(this.attributeRegex).test(e))}}},mounted(){this.editedValue=this.formattedValue,yt.on(sn.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},unmounted(){yt.off(sn.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute(e){this.attributeKey===e&&this.onEdit()},focusInput(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onClickAway(){this.v$.$reset(),this.isEditing=!1},onEdit(){this.isEditing=!0,this.$nextTick(()=>{this.focusInput()})},onUpdateListValue(e){e&&(this.editedValue=e.name,this.onUpdate())},onUpdate(){const e=this.attributeType==="date"?JT(this.editedValue):this.editedValue;this.v$.$touch(),!this.v$.$invalid&&(this.isEditing=!1,this.$emit("update",this.attributeKey,e))},onDelete(){this.isEditing=!1,this.v$.$reset(),this.$emit("delete",this.attributeKey)},onCopy(){this.$emit("copy",this.value)}}},WMe={class:"px-4 py-3"},jMe={class:"flex items-center mb-1"},YMe={class:"flex items-center w-full m-0 text-sm error"},XMe={key:0,class:"flex items-center"},qMe={class:"flex items-center justify-between w-full"},ZMe={key:0},QMe={key:0},JMe={class:"flex items-center w-full mb-2"},e3e=["type"],t3e={key:0,class:"block w-full -mt-px text-sm font-normal text-n-ruby-11"},n3e=["href"],s3e={key:1,class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},a3e={class:"flex items-center max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},o3e={key:1};function i3e(e,t,n,s,o,a){const i=F("HelperTextPopup"),l=F("NextButton"),r=F("MultiselectDropdown"),d=ct("tooltip"),u=ct("on-clickaway");return m(),f("div",WMe,[c("div",jMe,[c("h4",YMe,[a.isAttributeTypeCheckbox?(m(),f("div",XMe,[ie(c("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.editedValue=p),class:"!my-0 ltr:mr-2 ltr:ml-0 rtl:mr-0 rtl:ml-2",type:"checkbox",onChange:t[1]||(t[1]=(...p)=>a.onUpdate&&a.onUpdate(...p))},null,544),[[Kt,o.editedValue]])])):x("",!0),c("div",qMe,[c("span",{class:re(["w-full inline-flex gap-1.5 items-start font-medium whitespace-nowrap text-sm mb-0",s.v$.editedValue.$error?"text-n-ruby-11":"text-n-slate-12"])},[be(v(n.label)+" ",1),n.description?(m(),P(i,{key:0,message:n.description,class:"mt-0.5"},null,8,["message"])):x("",!0)],2),n.showActions&&n.value?ie((m(),P(l,{key:0,slate:"",sm:"",link:"",icon:"i-lucide-trash-2",onClick:a.onDelete},null,8,["onClick"])),[[d,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),void 0,{left:!0}]]):x("",!0)])])]),a.notAttributeTypeCheckboxAndList?(m(),f("div",ZMe,[o.isEditing?ie((m(),f("div",QMe,[c("div",JMe,[ie(c("input",{ref:"inputfield","onUpdate:modelValue":t[2]||(t[2]=p=>o.editedValue=p),type:a.inputType,class:re(["!h-8 ltr:!rounded-r-none rtl:!rounded-l-none !mb-0 !text-sm",{error:s.v$.editedValue.$error}]),autofocus:"true",onBlur:t[3]||(t[3]=(...p)=>s.v$.editedValue.$touch&&s.v$.editedValue.$touch(...p)),onKeyup:t[4]||(t[4]=Fn((...p)=>a.onUpdate&&a.onUpdate(...p),["enter"]))},null,42,e3e),[[Ff,o.editedValue]]),c("div",null,[b(l,{sm:"",icon:"i-lucide-check",class:"ltr:rounded-l-none rtl:rounded-r-none h-[34px]",onClick:a.onUpdate},null,8,["onClick"])])]),a.shouldShowErrorMessage?(m(),f("span",t3e,v(a.errorMessage),1)):x("",!0)])),[[u,a.onClickAway]]):x("",!0),ie(c("div",{class:re(["flex group",{"is-editable":n.showActions}])},[a.isAttributeTypeLink?(m(),f("a",{key:0,href:a.hrefURL,target:"_blank",rel:"noopener noreferrer",class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},v(a.urlValue),9,n3e)):(m(),f("p",s3e,v(a.displayValue||"---"),1)),c("div",a3e,[n.showActions&&n.value?ie((m(),P(l,{key:0,xs:"",slate:"",ghost:"",icon:"i-lucide-clipboard",class:"hidden group-hover:flex flex-shrink-0",onClick:a.onCopy},null,8,["onClick"])),[[d,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY")]]):x("",!0),n.showActions?ie((m(),P(l,{key:1,xs:"",slate:"",ghost:"",icon:"i-lucide-pen",class:"hidden group-hover:flex flex-shrink-0",onClick:a.onEdit},null,8,["onClick"])),[[d,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),void 0,{right:!0}]]):x("",!0)])],2),[[ln,!o.isEditing]])])):x("",!0),a.isAttributeTypeList?(m(),f("div",o3e,[b(r,{options:a.listOptions,"selected-item":a.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER"),onSelect:a.onUpdateListValue},null,8,["options","selected-item","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])])):x("",!0)])}const l3e=Re(zMe,[["render",i3e],["__scopeId","data-v-ca4a3de2"]]),r3e={class:"conversation--details"},c3e={key:0,class:"p-3 text-center"},d3e={key:1,class:"flex items-center px-2 py-2"},u3e={__name:"CustomAttributes",props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null},attributeFrom:{type:String,required:!0},emptyStateMessage:{type:String,default:""},staticElements:{type:Array,default:()=>[]}},setup(e){const t=e,n=Ot(),s=vn(),o=xn(),{t:a}=He(),{uiSettings:i,updateUISettings:l}=Mn(),r=U(!1),[d,u]=la(!1),p=w(()=>s.getSelectedChat.value),h=w(()=>s["attributes/getAttributesByModel"].value(t.attributeType)),g=w(()=>{var B,H;return((H=(B=p.value.meta)==null?void 0:B.sender)==null?void 0:H.id)||o.params.contactId||t.contactId}),_=w(()=>s["contacts/getContact"].value(g.value)),T=w(()=>t.attributeType==="conversation_attribute"?p.value.custom_attributes||{}:_.value.custom_attributes||{}),S=w(()=>p.value.id),E=w(()=>d.value?a("CUSTOM_ATTRIBUTES.SHOW_LESS"):a("CUSTOM_ATTRIBUTES.SHOW_MORE")),y=w(()=>h.value.map(B=>{const H=Object.hasOwnProperty.call(T.value,B.attribute_key),V=B.attribute_display_type==="checkbox"?!1:"";return{...B,type:"custom_attribute",key:B.attribute_key,value:H?T.value[B.attribute_key]:V}})),A=w(()=>`conversation_elements_order_${t.attributeFrom}`),C=w(()=>{const B=i.value[A.value]??[],H=[...t.staticElements,...y.value];return B.length?H.sort((G,V)=>{const Y=B.indexOf(G.key),ee=B.indexOf(V.key);return Y===-1&&ee===-1?0:Y===-1?1:ee===-1?-1:Y-ee}):H}),O=w(()=>d.value||C.value.length<=5?C.value:C.value.slice(0,5)),N=(B=[],H=[])=>{const G=[...H],V=new Set(H);return B.filter(Y=>Y.startsWith("static-")&&!V.has(Y)).forEach(Y=>{const ee=B.slice(B.indexOf(Y)).find(X=>V.has(X));ee?G.splice(G.indexOf(ee),0,Y):G.push(Y)}),G},R=()=>{r.value=!1;const B=i.value[A.value]??[],H=C.value.map(({key:V})=>V),G=N(B,H);l({[A.value]:G})},k=()=>{if(!i.value[A.value]){const H=C.value.map(G=>G.key);l({[A.value]:H})}d.value=i.value[`show_all_attributes_${t.attributeFrom}`]||!1},L=()=>{u(),l({[`show_all_attributes_${t.attributeFrom}`]:d.value})},D=async(B,H)=>{var V;const G={...T.value,[B]:H};try{t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:S.value,customAttributes:G}):n.dispatch("contacts/update",{id:t.contactId,custom_attributes:G}),Te(a("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS"))}catch(Y){const ee=((V=Y==null?void 0:Y.response)==null?void 0:V.message)||a("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR");Te(ee)}},$=async B=>{var H;try{const{[B]:G,...V}=T.value;t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:S.value,customAttributes:V}):n.dispatch("contacts/deleteCustomAttributes",{id:t.contactId,customAttributes:[B]}),Te(a("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS"))}catch(G){const V=((H=G==null?void 0:G.response)==null?void 0:H.message)||a("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR");Te(V)}},M=async B=>{await dl(B),Te(a("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"))};ut(()=>{k()});const K=["[&>*:nth-child(odd)]:!bg-n-background [&>*:nth-child(even)]:!bg-n-slate-2","dark:[&>*:nth-child(odd)]:!bg-n-background dark:[&>*:nth-child(even)]:!bg-n-solid-1"];return(B,H)=>(m(),f("div",r3e,[b(I(lr),{list:O.value,disabled:!I(d),animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"key",class:re(["last:rounded-b-lg",K]),onStart:H[0]||(H[0]=G=>r.value=!0),onEnd:R},{item:j(({element:G})=>[c("div",{class:re(["drag-handle relative border-b border-n-weak/50 dark:border-n-weak/90",{"cursor-grab":I(d),"last:border-transparent dark:last:border-transparent":C.value.length<=5}])},[G.type==="static_attribute"?et(B.$slots,"staticItem",{key:0,element:G},void 0,!0):(m(),P(l3e,{key:G.id,"attribute-key":G.attribute_key,"attribute-type":G.attribute_display_type,values:G.attribute_values,label:G.attribute_display_name,description:G.attribute_description,value:G.value,"show-actions":"","attribute-regex":G.regex_pattern,"regex-cue":G.regex_cue,"contact-id":e.contactId,onUpdate:D,onDelete:$,onCopy:M},null,8,["attribute-key","attribute-type","values","label","description","value","attribute-regex","regex-cue","contact-id"]))],2)]),_:3},8,["list","disabled"]),!O.value.length&&e.emptyStateMessage?(m(),f("p",c3e,v(e.emptyStateMessage),1)):x("",!0),C.value.length>5?(m(),f("div",d3e,[b(he,{ghost:"",xs:"",icon:I(d)?"i-lucide-chevron-up":"i-lucide-chevron-down",label:E.value,onClick:L},null,8,["icon","label"])])):x("",!0)]))}},y2=Re(u3e,[["__scopeId","data-v-5ef6c1cb"]]),m3e={class:"conversation--details"},p3e=["href"],h3e={__name:"ConversationInfo",props:{conversationAttributes:{type:Object,default:()=>({})},contactAttributes:{type:Object,default:()=>({})}},setup(e){const t=e,n=w(()=>t.conversationAttributes.referer),s=w(()=>{var u;return(u=t.conversationAttributes.initiated_at)==null?void 0:u.timestamp}),o=w(()=>t.conversationAttributes.browser),a=w(()=>{if(!o.value)return"";const{browser_name:u="",browser_version:p=""}=o.value;return`${u} ${p}`}),i=w(()=>kN(t.conversationAttributes.browser_language)),l=w(()=>{if(!o.value)return"";const{platform_name:u="",platform_version:p=""}=o.value;return`${u} ${p}`}),r=w(()=>t.contactAttributes.created_at_ip),d=w(()=>[{content:s,title:"CONTACT_PANEL.INITIATED_AT",key:"static-initiated-at",type:"static_attribute"},{content:i,title:"CONTACT_PANEL.BROWSER_LANGUAGE",key:"static-browser-language",type:"static_attribute"},{content:n,title:"CONTACT_PANEL.INITIATED_FROM",key:"static-referer",type:"static_attribute"},{content:a,title:"CONTACT_PANEL.BROWSER",key:"static-browser",type:"static_attribute"},{content:l,title:"CONTACT_PANEL.OS",key:"static-platform",type:"static_attribute"},{content:r,title:"CONTACT_PANEL.IP_ADDRESS",key:"static-ip-address",type:"static_attribute"}].filter(u=>!!u.content.value));return(u,p)=>(m(),f("div",m3e,[b(y2,{"static-elements":d.value,"attribute-class":"conversation--attribute","attribute-from":"conversation_panel","attribute-type":"conversation_attribute"},{staticItem:j(({element:h})=>[(m(),P(f2,{key:h.title,title:u.$t(h.title),value:h.content.value},{default:j(()=>[h.key==="static-referer"?(m(),f("a",{key:0,href:h.content.value,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-n-brand"},v(h.content.value),9,p3e)):x("",!0)]),_:2},1032,["title","value"]))]),_:1},8,["static-elements"])]))}},f3e={class:"macro-preview absolute border border-n-weak max-h-[22.5rem] z-50 w-64 rounded-md bg-n-alpha-3 backdrop-blur-[100px] shadow-lg bottom-8 right-8 overflow-y-auto p-4 text-left rtl:text-right"},g3e={class:"mb-4 text-sm text-n-slate-12"},_3e={key:0,class:"top-[0.390625rem] absolute -bottom-1 left-0 w-px bg-slate-75 dark:bg-slate-600"},v3e={class:"mb-1 text-xs text-n-slate-11"},b3e={class:"text-n-slate-12 text-sm"},E3e={__name:"MacroPreview",props:{macro:{type:Object,required:!0}},setup(e){const t=e,n=Ve("labels/getLabels"),s=Ve("teams/getTeams"),o=Ve("agents/getAgents"),a=(l,r)=>({assign_team:Ute(s.value,r),add_label:F1(n.value,r),remove_label:F1(n.value,r),assign_agent:Gte(o.value,r),mute_conversation:null,snooze_conversation:null,resolve_conversation:null,remove_assigned_team:null,send_webhook_event:r[0],send_message:r[0],send_email_transcript:r[0],add_private_note:r[0]})[l]||"",i=w(()=>t.macro.actions.map(l=>({actionName:Fte(l.action_name),actionValue:a(l.action_name,l.action_params)})));return(l,r)=>(m(),f("div",f3e,[c("h6",g3e,v(e.macro.name),1),(m(!0),f(pe,null,ye(i.value,(d,u)=>(m(),f("div",{key:u,class:"relative pl-4 macro-block"},[u!==e.macro.actions.length-1?(m(),f("div",_3e)):x("",!0),r[0]||(r[0]=c("div",{class:"absolute -left-[0.21875rem] top-[0.2734375rem] w-2 h-2 rounded-full bg-n-solid-1 border-2 border-solid border-n-weak dark:border-slate-600"},null,-1)),c("p",v3e,v(l.$t(`MACROS.ACTIONS.${d.actionName}`)),1),c("p",b3e,v(d.actionValue),1)]))),128))]))}},T3e=Re(E3e,[["__scopeId","data-v-3f814fa0"]]),y3e={class:"relative flex items-center justify-between leading-4 rounded-md h-10 pl-3 pr-2"},A3e={class:"overflow-hidden whitespace-nowrap text-ellipsis font-medium text-n-slate-12"},S3e={class:"flex items-center gap-1 justify-end"},I3e={__name:"MacroItem",props:{macro:{type:Object,required:!0},conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,n=Ot(),{t:s}=He(),o=U(!1),a=U(!1),i=async d=>{try{o.value=!0,await n.dispatch("macros/execute",{macroId:d.id,conversationIds:[t.conversationId]}),jt(ba.EXECUTED_A_MACRO),Te(s("MACROS.EXECUTE.EXECUTED_SUCCESSFULLY"))}catch{Te(s("MACROS.ERROR"))}finally{o.value=!1}},l=()=>{a.value=!a.value},r=()=>{a.value=!1};return(d,u)=>{const p=ct("tooltip"),h=ct("on-clickaway");return m(),f("div",y3e,[c("span",A3e,v(e.macro.name),1),c("div",S3e,[ie(b(he,{icon:"i-lucide-info",slate:"",faded:"",xs:"",onClick:l},null,512),[[p,d.$t("MACROS.EXECUTE.PREVIEW"),void 0,{"left-start":!0}]]),ie(b(he,{icon:"i-lucide-play",slate:"",faded:"",xs:"","is-loading":o.value,onClick:u[0]||(u[0]=g=>i(e.macro))},null,8,["is-loading"]),[[p,d.$t("MACROS.EXECUTE.BUTTON_TOOLTIP"),void 0,{"left-start":!0}]])]),b(Ms,{name:"menu-slide"},{default:j(()=>[a.value?ie((m(),P(T3e,{key:0,macro:e.macro},null,8,["macro"])),[[h,r]]):x("",!0)]),_:1})])}}},C3e={key:0,class:"p-3"},N3e={class:"flex flex-col items-center justify-center h-full"},O3e={key:1,class:"flex items-center gap-2 justify-center p-6 text-n-slate-12"},x3e={class:"text-sm"},dE="macros_display_order",w3e={__name:"List",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=Ot(),{accountScopedUrl:n}=Ls(),{uiSettings:s,updateUISettings:o}=Mn(),a=U(!1),i=Ve("macros/getMacros"),l=Ve("macros/getUIFlags"),r=w({get:()=>{var g;const u=((g=s.value)==null?void 0:g[dE])??[],p=i.value??[];if(!u.length||!p.length)return p;const h=new Map(u.map((_,T)=>[_,T]));return[...p].sort((_,T)=>{const S=h.get(_.id)??1/0,E=h.get(T.id)??1/0;return S-E})},set:u=>{o({[dE]:u.map(({id:p})=>p)})}}),d=()=>{a.value=!1};return ut(()=>{t.dispatch("macros/get")}),(u,p)=>{const h=F("router-link");return m(),f("div",null,[!I(l).isFetching&&!I(i).length?(m(),f("div",C3e,[c("p",N3e,v(u.$t("MACROS.LIST.404")),1),b(h,{to:I(n)("settings/macros")},{default:j(()=>[b(he,{faded:"",xs:"",icon:"i-lucide-plus",class:"mt-1",label:u.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1},8,["to"])])):x("",!0),I(l).isFetching?(m(),f("div",O3e,[c("span",x3e,v(u.$t("MACROS.LOADING")),1),b(Gs,{class:"size-5"})])):x("",!0),!I(l).isFetching&&I(i).length?(m(),P(I(lr),{key:2,modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=g=>r.value=g),class:"p-1",animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"id",onStart:p[1]||(p[1]=g=>a.value=!0),onEnd:d},{item:j(({element:g})=>[(m(),P(I3e,{key:g.id,macro:g,"conversation-id":e.conversationId,class:"drag-handle cursor-grab"},null,8,["macro","conversation-id"]))]),_:1},8,["modelValue"])):x("",!0)])}}},R3e=Re(w3e,[["__scopeId","data-v-26b109bf"]]),$3e={class:"funnel-selector"},M3e={key:0,class:"md:inline hidden"},k3e={key:1,class:"md:inline hidden"},L3e={key:0,class:"dropdown-menu"},D3e=["onClick"],P3e={class:"p-4"},B3e={class:"funnel-list"},F3e=["onClick"],U3e={class:"funnel-name"},G3e={__name:"FunnelSelector",setup(e){const t=hn(),{t:n}=He(),s=U(!1),o=U(!1),a=U(window.innerWidth<768),i=w(()=>t.getters["funnel/getFunnels"]),l=w(()=>t.getters["funnel/getSelectedFunnel"]),r=w(()=>t.getters["funnel/getUIFlags"]),d=()=>{a.value?o.value=!0:s.value=!s.value},u=async g=>{try{await t.dispatch("funnel/setSelectedFunnel",g),s.value=!1,o.value=!1}catch{t.dispatch("notifications/show",{type:"error",message:n("KANBAN.ERRORS.FUNNEL_SELECTION_FAILED")})}},p=()=>{a.value=window.innerWidth<768},h=g=>{g.target.closest(".funnel-selector")||(s.value=!1)};return ut(async()=>{try{await t.dispatch("funnel/fetch"),!l.value&&i.value.length>0&&await u(i.value[0]),window.addEventListener("resize",p),document.addEventListener("click",h)}catch{t.dispatch("notifications/show",{type:"error",message:n("KANBAN.ERRORS.FUNNEL_FETCH_FAILED")})}}),ia(()=>{window.removeEventListener("resize",p),document.removeEventListener("click",h)}),(g,_)=>{const T=F("fluent-icon");return m(),f("div",$3e,[b(he,{type:"button",variant:"outline",color:"slate",size:"sm",isLoading:r.value.isFetching,onClick:d},{icon:j(()=>[b(T,{icon:"task",size:"16"})]),default:j(()=>[r.value.isFetching?(m(),f("span",M3e,v(g.$t("KANBAN.LOADING_FUNNELS")),1)):(m(),f("span",k3e,v(l.value?l.value.name:g.$t("KANBAN.SELECT_FUNNEL")),1)),b(T,{icon:"chevron-down",size:"16",class:"md:inline hidden ml-1"})]),_:1},8,["isLoading"]),s.value&&!a.value?(m(),f("div",L3e,[(m(!0),f(pe,null,ye(i.value,S=>{var E;return m(),f("div",{key:S.id,class:re(["dropdown-item",{active:((E=l.value)==null?void 0:E.id)===S.id}]),onClick:y=>u(S)},v(S.name),11,D3e)}),128))])):x("",!0),b(Wt,{show:o.value,"onUpdate:show":_[0]||(_[0]=S=>o.value=S),"on-close":()=>o.value=!1,size:"small"},{default:j(()=>[c("div",P3e,[_[1]||(_[1]=c("h3",{class:"text-lg font-medium mb-3"},"Selecionar Funil",-1)),c("div",B3e,[(m(!0),f(pe,null,ye(i.value,S=>{var E,y;return m(),f("button",{key:S.id,class:re(["funnel-option",{"funnel-active":((E=l.value)==null?void 0:E.id)===S.id}]),onClick:A=>u(S)},[b(T,{icon:"task",size:"18",class:"mr-2"}),c("div",U3e,v(S.name),1),((y=l.value)==null?void 0:y.id)===S.id?(m(),P(T,{key:0,icon:"checkmark",size:"16",class:"ml-auto text-woot-500"})):x("",!0)],10,F3e)}),128))])])]),_:1},8,["show","on-close"])])}}},$_=Re(G3e,[["__scopeId","data-v-ee8f7361"]]),V3e={class:"tabs-container"},H3e={class:"flex items-center gap-4 border-b border-slate-200 dark:border-slate-700"},K3e={class:"flex items-center gap-2"},z3e={class:"flex items-center gap-2"},W3e={class:"flex items-center gap-2"},j3e={class:"flex items-center gap-2"},Y3e={class:"flex items-center gap-2"},X3e={class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm"},q3e={key:0,class:"space-y-6"},Z3e={class:"flex items-center gap-3 mb-6"},Q3e={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},J3e={class:"text-base font-medium text-slate-800 dark:text-slate-100"},eke={class:"space-y-2"},tke={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},nke=["placeholder"],ske={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ake={class:"lg:col-span-1"},oke={class:"bg-gradient-to-br from-woot-50/50 to-white dark:from-slate-800/50 dark:to-slate-800 rounded-lg border border-woot-100 dark:border-slate-700 overflow-hidden"},ike={class:"p-4 border-b border-woot-100/50 dark:border-slate-700/50"},lke={class:"flex items-center justify-between"},rke={class:"flex items-center gap-4"},cke={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},dke={class:"flex items-center gap-2"},uke={for:"has-value",class:"text-xs text-slate-600 dark:text-slate-400"},mke={key:0,class:"divide-y divide-slate-100 dark:divide-slate-700/50"},pke={class:"p-4"},hke={class:"mb-4"},fke={class:"relative h-10"},gke=["placeholder"],_ke={class:"flex items-center h-10 gap-2"},vke={class:"relative flex-1 h-full"},bke=["placeholder"],Eke={class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},Tke={class:"text-slate-500 dark:text-slate-400 sm:text-sm"},yke={class:"relative currency-selector h-full"},Ake={class:"font-medium"},Ske=["onClick"],Ike={class:"mr-2"},Cke={class:"flex items-center justify-between gap-2"},Nke={class:"flex items-center gap-2 flex-1"},Oke={class:"text-sm text-slate-600 dark:text-slate-400"},xke={class:"flex items-center gap-1"},wke={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Rke={class:"text-xs text-slate-500 dark:text-slate-400"},$ke=["onClick"],Mke={class:"lg:col-span-2"},kke={class:"h-full flex flex-col bg-gradient-to-br from-slate-50/50 to-white dark:from-slate-800/50 dark:to-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},Lke={class:"p-4 border-b border-slate-200/50 dark:border-slate-700/50"},Dke={class:"block text-sm font-medium text-slate-600 dark:text-slate-300"},Pke={class:"flex-1 p-4"},Bke=["placeholder"],Fke={key:1,class:"space-y-6"},Uke={class:"grid grid-cols-2 gap-6"},Gke={class:"space-y-2"},Vke={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Hke={class:"space-y-2"},Kke={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},zke=["disabled"],Wke={value:"",disabled:""},jke=["value"],Yke={key:2,class:"space-y-6"},Xke={class:"flex items-center gap-3 mb-6"},qke={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},Zke={class:"text-base font-medium text-slate-800 dark:text-slate-100"},Qke={class:"space-y-4"},Jke={class:"space-y-1.5"},eLe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},tLe={class:"grid grid-cols-5 gap-2"},nLe=["value"],sLe={class:"space-y-1.5"},aLe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},oLe={class:"relative"},iLe=["disabled"],lLe={value:""},rLe=["value"],cLe={key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},dLe={key:3,class:"space-y-6"},uLe={class:"flex items-center gap-3 mb-6"},mLe={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},pLe={class:"text-base font-medium text-slate-800 dark:text-slate-100"},hLe={class:"space-y-4"},fLe={class:"flex items-center"},gLe={for:"has-scheduling",class:"ml-2 text-sm font-medium text-slate-700 dark:text-slate-300"},_Le={key:0,class:"space-y-4"},vLe={class:"flex gap-6"},bLe={class:"flex items-center"},ELe={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},TLe={class:"flex items-center"},yLe={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},ALe={key:0,class:"space-y-1.5"},SLe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},ILe={key:1,class:"space-y-1.5"},CLe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},NLe={key:4,class:"space-y-6"},OLe={class:"flex items-center gap-3 mb-6"},xLe={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},wLe={class:"text-base font-medium text-slate-800 dark:text-slate-100"},RLe={class:"space-y-4"},$Le={class:"space-y-3"},MLe={class:"flex items-center"},kLe={for:"has-conversation",class:"ml-2 text-sm font-medium text-slate-700 dark:text-slate-300"},LLe=["disabled"],DLe={value:""},PLe=["value"],BLe={key:0,class:"flex justify-center py-4"},FLe={key:1,class:"text-center py-4"},ULe={class:"text-sm text-slate-500"},GLe={class:"block text-sm font-medium"},VLe=["onUpdate:modelValue","placeholder"],HLe=["onUpdate:modelValue"],KLe={value:""},zLe=["value"],WLe={class:"flex items-center gap-2"},jLe=["onUpdate:modelValue"],YLe={class:"text-sm"},XLe=["onUpdate:modelValue","placeholder"],qLe={class:"flex justify-end space-x-2 pt-4 p-3"},ZLe={__name:"KanbanItemForm",props:{funnelId:{type:[String,Number],required:!0},stage:{type:String,required:!0},position:{type:Number,default:0},initialData:{type:Object,default:null},isEditing:{type:Boolean,default:!1},currentConversation:{type:Object,default:null},initialDate:{type:Date,default:null}},emits:["saved","close"],setup(e,{emit:t}){var ue,te,ce,fe,ke,De,Fe,je,Qe,Ze,ft,kt,Q,oe,de,Ce,Ae,Le,Me,Ue,we,ge,J,Ee,$e,se,le,_e,Ie,Pe,Ne;const n=(ve,me=!0)=>{if(!ve)return null;try{let Oe=new Date(ve);if(typeof ve=="string"&&ve.length===10){const nt=ve.split("-");Oe=new Date(nt[0],nt[1]-1,nt[2],12,0,0)}const Ge=Oe.getFullYear(),Se=String(Oe.getMonth()+1).padStart(2,"0"),We=String(Oe.getDate()).padStart(2,"0");if(!me)return`${Ge}-${Se}-${We}`;const mt=String(Oe.getHours()).padStart(2,"0"),Nt=String(Oe.getMinutes()).padStart(2,"0");return`${Ge}-${Se}-${We}T${mt}:${Nt}`}catch(Oe){return console.error("Erro ao formatar data:",Oe),null}},{t:s}=He(),o=hn(),a=t,i=U("general"),l=e,r=U(!1),d=U(!1),u=w(()=>o.getters["funnel/getSelectedFunnel"]),p=w(()=>{var ve;return(ve=u.value)!=null&&ve.stages?Object.entries(u.value.stages).map(([me,Oe])=>({id:me,name:Oe.name,position:Oe.position})).sort((me,Oe)=>me.position-Oe.position):[]}),h=U(!!((te=(ue=l.initialData)==null?void 0:ue.item_details)!=null&&te.conversation_id)),g=U([]),_=U(!1),T=U(!!((fe=(ce=l.initialData)==null?void 0:ce.item_details)!=null&&fe.value)),S=w(()=>{var ve,me,Oe,Ge;return!!((me=(ve=l.initialData)==null?void 0:ve.item_details)!=null&&me.scheduled_at||(Ge=(Oe=l.initialData)==null?void 0:Oe.item_details)!=null&&Ge.deadline_at||l.initialDate)}),E=U(S.value);S.value&&(E.value=!0);const y=U(((De=(ke=l.initialData)==null?void 0:ke.item_details)==null?void 0:De.scheduling_type)||((je=(Fe=l.initialData)==null?void 0:Fe.item_details)!=null&&je.scheduled_at?"schedule":"deadline"));U("R$");const A=U(""),C=[{symbol:"R$",code:"BRL",locale:"pt-BR"},{symbol:"$",code:"USD",locale:"en-US"},{symbol:"",code:"EUR",locale:"de-DE"}];U(C[0]);const O=U({title:((Qe=l.initialData)==null?void 0:Qe.title)||"",description:((ft=(Ze=l.initialData)==null?void 0:Ze.item_details)==null?void 0:ft.description)||((kt=l.initialData)==null?void 0:kt.description)||"",funnel_id:l.funnelId,funnel_stage:l.stage,position:l.position,item_details:{title:((Q=l.initialData)==null?void 0:Q.title)||"",description:((de=(oe=l.initialData)==null?void 0:oe.item_details)==null?void 0:de.description)||((Ce=l.initialData)==null?void 0:Ce.description)||"",value:null,currency:C[0],offers:[],priority:((Le=(Ae=l.initialData)==null?void 0:Ae.item_details)==null?void 0:Le.priority)||((Me=l.initialData)==null?void 0:Me.priority)||"none",agent_id:((we=(Ue=l.initialData)==null?void 0:Ue.item_details)==null?void 0:we.agent_id)||null,conversation_id:((J=(ge=l.initialData)==null?void 0:ge.item_details)==null?void 0:J.conversation_id)||null,scheduling_type:y.value,scheduled_at:null,deadline_at:null},custom_attributes:((Ee=l.initialData)==null?void 0:Ee.custom_attributes)||{}});console.log("[DEBUG] KanbanItemForm - initialData recebido:",l.initialData),console.log("[DEBUG] KanbanItemForm - description do initialData:",($e=l.initialData)==null?void 0:$e.description),console.log("[DEBUG] KanbanItemForm - item_details do initialData:",(se=l.initialData)==null?void 0:se.item_details),console.log("[DEBUG] KanbanItemForm - description dentro de item_details:",(_e=(le=l.initialData)==null?void 0:le.item_details)==null?void 0:_e.description),console.log("[DEBUG] KanbanItemForm - prioridade no initialData:",(Ie=l.initialData)==null?void 0:Ie.priority),console.log("[DEBUG] KanbanItemForm - prioridade dentro do item_details:",(Ne=(Pe=l.initialData)==null?void 0:Pe.item_details)==null?void 0:Ne.priority),console.log("[DEBUG] KanbanItemForm - prioridade inicializada no form:",O.value.item_details.priority);const N=U([]),R=U(!1),k=U({}),L=async()=>{try{R.value=!0,await o.dispatch("attributes/get"),N.value=o.getters["attributes/getAttributesByModel"]("conversation_attribute")}catch(ve){console.error("Erro ao carregar atributos:",ve)}finally{R.value=!1}},D=async()=>{var ve;if((ve=O.value.item_details)!=null&&ve.conversation_id)try{const me=O.value.item_details.conversation;me!=null&&me.custom_attributes&&(k.value=me.custom_attributes)}catch(me){console.error("Erro ao carregar atributos da conversa:",me)}};ut(async()=>{var me,Oe,Ge,Se,We,mt,Nt,nt,St,qe,bt;d.value=!0;try{await o.dispatch("agents/get")}catch(Vt){console.error("Erro ao carregar agentes:",Vt)}finally{d.value=!1}await L(),(Oe=(me=l.initialData)==null?void 0:me.item_details)!=null&&Oe.conversation_id&&await D(),(l.currentConversation||l.isEditing&&((Se=(Ge=l.initialData)==null?void 0:Ge.item_details)!=null&&Se.conversation_id))&&(h.value=!0,$());const ve=Vt=>{V.value&&!Vt.target.closest(".currency-selector")&&(V.value=!1)};document.addEventListener("mousedown",ve),ia(()=>{document.removeEventListener("mousedown",ve)}),(Nt=(mt=(We=l.initialData)==null?void 0:We.item_details)==null?void 0:mt.offers)!=null&&Nt.length&&(ee.value=[...l.initialData.item_details.offers]),S.value&&(E.value=!0,(St=(nt=l.initialData)==null?void 0:nt.item_details)!=null&&St.scheduled_at?(y.value="schedule",O.value.item_details.scheduled_at=n(l.initialData.item_details.scheduled_at),console.log("[DEBUG] Agendamento com hora configurado:",O.value.item_details.scheduled_at)):(bt=(qe=l.initialData)==null?void 0:qe.item_details)!=null&&bt.deadline_at?(y.value="deadline",O.value.item_details.deadline_at=n(l.initialData.item_details.deadline_at,!1),console.log("[DEBUG] Prazo configurado:",O.value.item_details.deadline_at)):l.initialDate&&(y.value="deadline",O.value.item_details.deadline_at=n(l.initialDate,!1),console.log("[DEBUG] Data inicial configurada como prazo:",O.value.item_details.deadline_at)),console.log("[DEBUG SCHEDULING] Checkbox de agendamento marcado:",E.value),console.log("[DEBUG SCHEDULING] Tipo de agendamento:",y.value),console.log("[DEBUG SCHEDULING] Data de agendamento:",O.value.item_details.scheduled_at),console.log("[DEBUG SCHEDULING] Data de prazo:",O.value.item_details.deadline_at))}),lt(E,ve=>{ve?(console.log("[DEBUG] Agendamento ativado"),O.value.item_details.scheduling_type||(y.value="deadline",O.value.item_details.scheduling_type="deadline")):(O.value.item_details.scheduled_at=null,O.value.item_details.deadline_at=null,console.log("[DEBUG] Agendamento desativado, valores limpos"))}),lt(y,(ve,me)=>{if(ve!==me)if(O.value.item_details.scheduling_type=ve,ve==="deadline")!O.value.item_details.deadline_at&&O.value.item_details.scheduled_at&&(O.value.item_details.deadline_at=n(O.value.item_details.scheduled_at,!1)),O.value.item_details.scheduled_at=null;else{if(!O.value.item_details.scheduled_at&&O.value.item_details.deadline_at){const Oe=new Date(O.value.item_details.deadline_at);Oe.setHours(12,0,0,0),O.value.item_details.scheduled_at=n(Oe)}O.value.item_details.deadline_at=null}});const $=async()=>{try{if(_.value=!0,l.currentConversation)g.value=[l.currentConversation];else{const ve=await Yi.get({});g.value=ve.data.data.payload}}catch(ve){console.error("Erro ao carregar conversas:",ve)}finally{_.value=!1}},M=(ve,me)=>{const Oe=Y.value;let Ge=ve.target.value.replace(/[^\d.,]/g,"");if(A.value=Ge,!ve.target.selectionStart&&Ge){const Se=Ge.replace(",","."),We=parseFloat(Se);Number.isNaN(We)||(ve.target.value=new Intl.NumberFormat(Oe.currency.locale,{style:"currency",currency:Oe.currency.code}).format(We),Oe.value=We)}},K=(ve,me)=>{const Oe=Y.value;if(!A.value){ve.target.value="",Oe.value=null;return}const Ge=A.value.replace(",","."),Se=parseFloat(Ge);if(Number.isNaN(Se)){ve.target.value="",Oe.value=null;return}ve.target.value=new Intl.NumberFormat(Oe.currency.locale,{style:"currency",currency:Oe.currency.code}).format(Se),Oe.value=Se};lt(T,ve=>{ve||(O.value.item_details.value=null,A.value="")}),lt(h,ve=>{ve?$():O.value.item_details.conversation_id=null}),ea(()=>{var ve,me,Oe,Ge,Se,We,mt,Nt,nt,St,qe,bt,Vt,dt,It,rt,wt,pn;console.log("watchEffect: ttulo atual",O.value.title),O.value={...O.value,funnel_id:((ve=u.value)==null?void 0:ve.id)||l.funnelId,funnel_stage:O.value.funnel_stage||l.stage,position:l.position,title:O.value.title||((me=l.initialData)==null?void 0:me.title)||((Ge=(Oe=l.initialData)==null?void 0:Oe.item_details)==null?void 0:Ge.title)||"",item_details:{...O.value.item_details,title:O.value.title||((Se=l.initialData)==null?void 0:Se.title)||((mt=(We=l.initialData)==null?void 0:We.item_details)==null?void 0:mt.title)||"",description:O.value.description,priority:O.value.item_details.priority||((nt=(Nt=l.initialData)==null?void 0:Nt.item_details)==null?void 0:nt.priority)||((St=l.initialData)==null?void 0:St.priority)||"none",value:O.value.item_details.value||((bt=(qe=l.initialData)==null?void 0:qe.item_details)==null?void 0:bt.value),currency:O.value.item_details.currency||((dt=(Vt=l.initialData)==null?void 0:Vt.item_details)==null?void 0:dt.currency),scheduled_at:O.value.item_details.scheduled_at||((rt=(It=l.initialData)==null?void 0:It.item_details)==null?void 0:rt.scheduled_at),deadline_at:O.value.item_details.deadline_at||((pn=(wt=l.initialData)==null?void 0:wt.item_details)==null?void 0:pn.deadline_at)}}}),lt(()=>O.value.title,ve=>{O.value.item_details&&(O.value.item_details.title=ve)}),lt(()=>O.value.description,ve=>{O.value.item_details&&(O.value.item_details.description=ve)});const B=()=>{var me;const ve={};return(me=O.value.title)!=null&&me.trim()||(ve.title=s("KANBAN.ERRORS.TITLE_REQUIRED")),O.value.funnel_id||(ve.funnel_id=s("KANBAN.ERRORS.FUNNEL_REQUIRED")),O.value.funnel_stage||(ve.funnel_stage=s("KANBAN.ERRORS.STAGE_REQUIRED")),Object.keys(ve).length>0?(yt.emit("newToastMessage",{message:ve[Object.keys(ve)[0]],type:"error"}),ve):null},H=[{id:"none",name:s("KANBAN.PRIORITY_LABELS.NONE")},{id:"low",name:s("KANBAN.PRIORITY_LABELS.LOW")},{id:"medium",name:s("KANBAN.PRIORITY_LABELS.MEDIUM")},{id:"high",name:s("KANBAN.PRIORITY_LABELS.HIGH")},{id:"urgent",name:s("KANBAN.PRIORITY_LABELS.URGENT")}],G=async ve=>{var Oe,Ge;if(ve.preventDefault(),!B())try{r.value=!0,O.value.item_details.title=O.value.title,O.value.item_details.description=O.value.description;let Se={};l.isEditing&&((Oe=l.initialData)!=null&&Oe.item_details)&&(Se=JSON.parse(JSON.stringify(l.initialData.item_details)),["notes","checklist","attachments","activities"].forEach(St=>{l.initialData.item_details[St]&&(Se[St]=l.initialData.item_details[St])})),["title","description","value","currency","priority","agent_id","conversation_id","scheduling_type","scheduled_at","deadline_at","custom_attributes"].forEach(nt=>{O.value.item_details[nt]!==void 0&&(Se[nt]=O.value.item_details[nt])}),Se.title=O.value.title,Se.offers=ee.value,ee.value.length>0&&(Se.value=ee.value[0].value,Se.currency=ee.value[0].currency);const mt={funnel_id:((Ge=u.value)==null?void 0:Ge.id)||l.funnelId,funnel_stage:O.value.funnel_stage,position:l.position,item_details:Se},Nt=l.isEditing?await o.dispatch("kanban/updateItemDetails",{itemId:l.initialData.id,details:mt}):await o.dispatch("kanban/createKanbanItem",mt);console.log("[FORM-DEBUG] Data returned from store action:",Nt),yt.emit("newToastMessage",{message:l.isEditing?"Item atualizado com sucesso":"Item criado com sucesso",type:"success"}),a("saved",Nt),a("close")}catch(Se){console.error("Erro ao salvar item:",Se),yt.emit("newToastMessage",{message:"Erro ao salvar item",type:"error"})}finally{r.value=!1}},V=U(!1),Y=U({description:"",value:"",currency:C[0]}),ee=U([]),X=U(null),z=()=>{Y.value.value&&Y.value.description&&(ee.value.push({description:Y.value.description,value:Y.value.value,currency:Y.value.currency}),O.value.item_details.value=ee.value[0].value,O.value.item_details.currency=ee.value[0].currency,Y.value={description:"",value:"",currency:C[0]})},W=ve=>{if(ee.value.splice(ve,1),ve===0&&ee.value.length>0){const[me]=ee.value;O.value.item_details.value=me.value,O.value.item_details.currency=me.currency,O.value.item_details.description=me.description}else ee.value.length===0&&(O.value.item_details.value=null,O.value.item_details.currency=C[0],O.value.item_details.description="");O.value.item_details.offers=ee.value.slice(1)},q=ve=>{X.value=X.value===ve?null:ve},Z=(ve,me)=>{Y.value.currency=ve,X.value=null},ne=(ve,me)=>{if(!ve)return"-";try{return new Intl.NumberFormat(me.locale,{style:"currency",currency:me.code,minimumFractionDigits:2,maximumFractionDigits:2}).format(ve)}catch(Oe){return console.error("Erro ao formatar valor:",Oe),ve.toString()}};lt(()=>{var ve;return(ve=O.value.item_details)==null?void 0:ve.conversation_id},async ve=>{ve?await D():k.value={}});const{isStacklab:ae}=Ra();return(ve,me)=>{var Ge;const Oe=F("fluent-icon");return m(),f("form",{class:"flex flex-col gap-4 max-h-[85vh] overflow-y-auto w-full px-4",onSubmit:Ke(G,["prevent"])},[c("div",V3e,[c("div",H3e,[c("button",{type:"button",class:re(["tab-button",[i.value==="general"?"tab-active":"tab-inactive"]]),onClick:me[0]||(me[0]=Se=>i.value="general")},[c("div",K3e,[b(Oe,{icon:"document",size:"16"}),be(" "+v(I(s)("KANBAN.TABS.GENERAL")),1)])],2),c("button",{type:"button",class:re(["tab-button",[i.value==="pipeline"?"tab-active":"tab-inactive"]]),onClick:me[1]||(me[1]=Se=>i.value="pipeline")},[c("div",z3e,[b(Oe,{icon:"task",size:"16"}),be(" "+v(I(s)("KANBAN.TABS.PIPELINE")),1)])],2),c("button",{type:"button",class:re(["tab-button",[i.value==="assignment"?"tab-active":"tab-inactive"]]),onClick:me[2]||(me[2]=Se=>i.value="assignment")},[c("div",W3e,[b(Oe,{icon:"bot",size:"16"}),be(" "+v(I(s)("KANBAN.TABS.ASSIGNMENT")),1)])],2),I(ae)===!0?(m(),f("button",{key:0,type:"button",class:re(["tab-button",[i.value==="scheduling"?"tab-active":"tab-inactive"]]),onClick:me[3]||(me[3]=Se=>i.value="scheduling")},[c("div",j3e,[b(Oe,{icon:"calendar-clock",size:"16"}),be(" "+v(I(s)("KANBAN.TABS.SCHEDULING")),1)])],2)):x("",!0),c("button",{type:"button",class:re(["tab-button",[i.value==="relationships"?"tab-active":"tab-inactive"]]),onClick:me[4]||(me[4]=Se=>i.value="relationships")},[c("div",Y3e,[b(Oe,{icon:"attach",size:"16"}),be(" "+v(I(s)("KANBAN.TABS.RELATIONSHIPS")),1)])],2),c("button",{type:"button",class:re(["tab-button",i.value==="custom_fields"?"tab-active":"tab-inactive"]),onClick:me[5]||(me[5]=Ke(Se=>i.value="custom_fields",["prevent","stop"]))},v(I(s)("KANBAN.TABS.CUSTOM_FIELDS")),3)])]),c("div",X3e,[i.value==="general"?(m(),f("div",q3e,[c("div",Z3e,[c("div",Q3e,[b(Oe,{icon:"document",size:"18",class:"text-woot-500"})]),c("h4",J3e,v(I(s)("KANBAN.TABS.GENERAL")),1)]),c("div",eke,[c("label",tke,v(I(s)("KANBAN.FORM.TITLE.LABEL")),1),ie(c("input",{"onUpdate:modelValue":me[6]||(me[6]=Se=>O.value.title=Se),type:"text",class:"w-full px-4 py-3 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 shadow-sm",placeholder:I(s)("KANBAN.FORM.TITLE.PLACEHOLDER"),required:""},null,8,nke),[[at,O.value.title]])]),c("div",ske,[c("div",ake,[c("div",oke,[c("div",ike,[c("div",lke,[c("div",rke,[c("span",cke,v(I(s)("KANBAN.FORM.VALUE.LABEL")),1)]),c("div",dke,[ie(c("input",{id:"has-value","onUpdate:modelValue":me[7]||(me[7]=Se=>T.value=Se),type:"checkbox",class:"w-4 h-4 text-woot-500 border-slate-300 rounded focus:ring-woot-500"},null,512),[[Kt,T.value]]),c("label",uke,v(I(s)("KANBAN.FORM.VALUE.HAS_VALUE")),1)])])]),T.value?(m(),f("div",mke,[c("div",pke,[c("div",hke,[c("div",fke,[ie(c("input",{"onUpdate:modelValue":me[8]||(me[8]=Se=>Y.value.description=Se),type:"text",class:"w-full h-full px-4 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",placeholder:I(s)("KANBAN.FORM.VALUE.OFFER_DESCRIPTION_PLACEHOLDER")},null,8,gke),[[at,Y.value.description]])])]),c("div",_ke,[c("div",vke,[ie(c("input",{"onUpdate:modelValue":me[9]||(me[9]=Se=>Y.value.value=Se),type:"text",inputmode:"decimal",class:"w-full h-full px-4 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 shadow-sm text-left pr-12",placeholder:I(s)("KANBAN.FORM.VALUE.PLACEHOLDER"),onInput:me[10]||(me[10]=Se=>M(Se)),onBlur:me[11]||(me[11]=Se=>K(Se))},null,40,bke),[[at,Y.value.value]]),c("div",Eke,[c("span",Tke,v(Y.value.currency.symbol),1)])]),c("div",yke,[c("button",{ref:"currencyButton",type:"button",class:"flex items-center h-full gap-2 px-3 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 transition-all min-w-[80px]",onClick:me[12]||(me[12]=()=>q("new"))},[c("span",Ake,v(Y.value.currency.code),1),b(Oe,{icon:"chevron-down",size:"12",class:re(["text-slate-400",{"rotate-180":X.value==="new"}])},null,8,["class"])],512),X.value==="new"?(m(),f("div",{key:0,class:"fixed right-auto mt-1 w-[120px] py-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-[99999]",style:At({top:ve.$refs.currencyButton.getBoundingClientRect().bottom+4+"px",left:ve.$refs.currencyButton.getBoundingClientRect().left+"px"})},[(m(),f(pe,null,ye(C,Se=>c("button",{key:Se.code,type:"button",class:re(["flex items-center w-full px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",{"text-woot-500 bg-woot-50 dark:bg-woot-900/20":Y.value.currency.code===Se.code,"text-slate-700 dark:text-slate-300":Y.value.currency.code!==Se.code}]),onClick:()=>Z(Se)},[c("span",Ike,v(Se.symbol),1),be(" "+v(Se.code),1)],10,Ske)),64))],4)):x("",!0)]),c("button",{type:"button",class:"p-2.5 bg-woot-500 hover:bg-woot-600 text-white rounded-lg transition-colors",onClick:z},[b(Oe,{icon:"add",size:"16"})])])]),(m(!0),f(pe,null,ye(ee.value,(Se,We)=>(m(),f("div",{key:We,class:"p-4"},[c("div",Cke,[c("div",Nke,[c("span",Oke,v(Se.description||I(s)("KANBAN.FORM.VALUE.OFFER_DESCRIPTION_PLACEHOLDER")),1),c("div",xke,[c("span",wke,v(ne(Se.value,Se.currency)),1),c("span",Rke,v(Se.currency.code),1)])]),c("button",{class:"p-1.5 text-slate-400 hover:text-ruby-500 dark:text-slate-500 dark:hover:text-ruby-400 hover:bg-ruby-50 dark:hover:bg-ruby-900/20 rounded transition-colors",onClick:()=>W(We)},[b(Oe,{icon:"dismiss",size:"16"})],8,$ke)])]))),128))])):x("",!0)])]),c("div",Mke,[c("div",kke,[c("div",Lke,[c("label",Dke,v(I(s)("KANBAN.FORM.DESCRIPTION.LABEL")),1)]),c("div",Pke,[ie(c("textarea",{"onUpdate:modelValue":me[13]||(me[13]=Se=>O.value.description=Se),rows:"4",class:"w-full h-full px-4 py-2.5 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 resize-none shadow-sm",placeholder:I(s)("KANBAN.FORM.DESCRIPTION.PLACEHOLDER")},null,8,Bke),[[at,O.value.description]])])])])])])):x("",!0),i.value==="pipeline"?(m(),f("div",Fke,[c("div",Uke,[c("div",Gke,[c("label",Vke,v(I(s)("KANBAN.FORM.FUNNEL.LABEL")),1),b($_,{class:"w-full"})]),c("div",Hke,[c("label",Kke,v(I(s)("KANBAN.FORM.STAGE.LABEL")),1),ie(c("select",{"onUpdate:modelValue":me[14]||(me[14]=Se=>O.value.funnel_stage=Se),class:"w-full px-4 py-2.5 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",disabled:!((Ge=u.value)!=null&&Ge.id)},[c("option",Wke,v(I(s)("KANBAN.FORM.STAGE.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(p.value,Se=>(m(),f("option",{key:Se.id,value:Se.id},v(Se.name),9,jke))),128))],8,zke),[[Mt,O.value.funnel_stage]])])])])):x("",!0),i.value==="assignment"?(m(),f("div",Yke,[c("div",Xke,[c("div",qke,[b(Oe,{icon:"bot",size:"18",class:"text-woot-500"})]),c("h4",Zke,v(I(s)("KANBAN.TABS.ASSIGNMENT")),1)]),c("div",Qke,[c("div",Jke,[c("label",eLe,v(I(s)("KANBAN.FORM.PRIORITY.LABEL")),1),c("div",tLe,[(m(),f(pe,null,ye(H,Se=>c("label",{key:Se.id,class:"relative flex cursor-pointer"},[ie(c("input",{"onUpdate:modelValue":me[15]||(me[15]=We=>O.value.item_details.priority=We),type:"radio",value:Se.id,class:"peer sr-only"},null,8,nLe),[[bi,O.value.item_details.priority]]),c("div",{class:re(["w-full px-3 py-2 text-xs text-center rounded-lg border transition-colors peer-checked:border-woot-500 peer-checked:bg-woot-50 peer-checked:text-woot-600 dark:peer-checked:bg-woot-900/20 dark:peer-checked:text-woot-400",[Se.id===O.value.item_details.priority?{"border-slate-200 bg-slate-100 text-slate-600 dark:bg-slate-700/50 dark:text-slate-300":Se.id==="none","border-ruby-200 bg-ruby-500 text-white dark:bg-ruby-500 dark:text-white":Se.id==="urgent","border-orange-200 bg-orange-600 text-white dark:bg-orange-600 dark:text-white":Se.id==="high","border-yellow-200 bg-yellow-500 text-white dark:bg-yellow-500 dark:text-white":Se.id==="medium","border-green-200 bg-[#22c55e] text-white dark:bg-[#22c55e] dark:text-white":Se.id==="low"}:{"border-slate-200 bg-slate-100 text-slate-500 dark:bg-slate-700/50 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700":Se.id==="none","border-ruby-200 bg-ruby-100 text-ruby-500 dark:bg-ruby-900/30 dark:text-ruby-400 hover:bg-ruby-200 dark:hover:bg-ruby-900/50":Se.id==="urgent","border-orange-200 bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400 hover:bg-orange-200 dark:hover:bg-orange-900/50":Se.id==="high","border-yellow-200 bg-yellow-100 text-[#996b00] dark:bg-yellow-900/30 dark:text-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50":Se.id==="medium","border-green-200 bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":Se.id==="low"}]])},v(Se.name),3)])),64))])]),c("div",sLe,[c("label",aLe,v(I(s)("KANBAN.FORM.AGENT.LABEL")),1),c("div",oLe,[ie(c("select",{"onUpdate:modelValue":me[16]||(me[16]=Se=>O.value.item_details.agent_id=Se),class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",disabled:d.value},[c("option",lLe,v(I(s)("KANBAN.FORM.AGENT.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(I(o).getters["agents/getAgents"],Se=>(m(),f("option",{key:Se.id,value:Se.id},v(Se.name),9,rLe))),128))],8,iLe),[[Mt,O.value.item_details.agent_id]]),d.value?(m(),f("div",cLe,me[33]||(me[33]=[c("span",{class:"loading-spinner"},null,-1)]))):x("",!0)])])])])):x("",!0),i.value==="scheduling"&&I(ae)===!0?(m(),f("div",dLe,[c("div",uLe,[c("div",mLe,[b(Oe,{icon:"calendar-clock",size:"18",class:"text-woot-500"})]),c("h4",pLe,v(I(s)("KANBAN.FORM.SCHEDULING.LABEL")),1)]),c("div",hLe,[c("div",fLe,[ie(c("input",{id:"has-scheduling","onUpdate:modelValue":me[17]||(me[17]=Se=>E.value=Se),type:"checkbox",class:"w-4 h-4 text-woot-500 border-slate-300 rounded focus:ring-woot-500"},null,512),[[Kt,E.value]]),c("label",gLe,v(I(s)("KANBAN.FORM.SCHEDULING.HAS_SCHEDULING")),1)]),E.value?(m(),f("div",_Le,[c("div",vLe,[c("label",bLe,[ie(c("input",{"onUpdate:modelValue":me[18]||(me[18]=Se=>y.value=Se),type:"radio",value:"deadline",class:"w-4 h-4 text-woot-500 border-slate-300 focus:ring-woot-500"},null,512),[[bi,y.value]]),c("span",ELe,v(I(s)("KANBAN.FORM.SCHEDULING.DEADLINE")),1)]),c("label",TLe,[ie(c("input",{"onUpdate:modelValue":me[19]||(me[19]=Se=>y.value=Se),type:"radio",value:"schedule",class:"w-4 h-4 text-woot-500 border-slate-300 focus:ring-woot-500"},null,512),[[bi,y.value]]),c("span",yLe,v(I(s)("KANBAN.FORM.SCHEDULING.SCHEDULE")),1)])]),y.value==="schedule"?(m(),f("div",ALe,[c("label",SLe,v(I(s)("KANBAN.FORM.SCHEDULING.DATETIME")),1),ie(c("input",{"onUpdate:modelValue":me[20]||(me[20]=Se=>O.value.item_details.scheduled_at=Se),type:"datetime-local",class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},null,512),[[at,O.value.item_details.scheduled_at]])])):(m(),f("div",ILe,[c("label",CLe,v(I(s)("KANBAN.FORM.SCHEDULING.DEADLINE_DATE")),1),ie(c("input",{"onUpdate:modelValue":me[21]||(me[21]=Se=>O.value.item_details.deadline_at=Se),type:"date",class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},null,512),[[at,O.value.item_details.deadline_at]])]))])):x("",!0)])])):x("",!0),i.value==="relationships"?(m(),f("div",NLe,[c("div",OLe,[c("div",xLe,[b(Oe,{icon:"attach",size:"18",class:"text-woot-500"})]),c("h4",wLe,v(I(s)("KANBAN.TABS.RELATIONSHIPS")),1)]),c("div",RLe,[c("div",$Le,[c("div",MLe,[ie(c("input",{id:"has-conversation","onUpdate:modelValue":me[22]||(me[22]=Se=>h.value=Se),type:"checkbox",class:"w-4 h-4 text-woot-500 border-slate-300 rounded focus:ring-woot-500"},null,512),[[Kt,h.value]]),c("label",kLe,v(I(s)("KANBAN.FORM.CONVERSATION.HAS_CONVERSATION")),1)]),h.value?ie((m(),f("select",{key:0,"onUpdate:modelValue":me[23]||(me[23]=Se=>O.value.item_details.conversation_id=Se),class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",disabled:_.value},[c("option",DLe,v(I(s)("KANBAN.FORM.CONVERSATION.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(g.value,Se=>(m(),f("option",{key:Se.id,value:Se.id}," #"+v(Se.id)+" - "+v(Se.meta.sender.name||Se.meta.sender.email),9,PLe))),128))],8,LLe)),[[Mt,O.value.item_details.conversation_id]]):x("",!0)])])])):x("",!0),i.value==="custom_fields"?(m(),f("div",{key:5,class:"space-y-6",onClick:me[31]||(me[31]=Ke(()=>{},["prevent","stop"]))},[R.value?(m(),f("div",BLe,me[34]||(me[34]=[c("span",{class:"loading-spinner"},null,-1)]))):N.value.length===0?(m(),f("div",FLe,[c("p",ULe,v(I(s)("KANBAN.FORM.CUSTOM_FIELDS.EMPTY")),1)])):(m(),f("div",{key:2,class:"space-y-4",onClick:me[30]||(me[30]=Ke(()=>{},["prevent","stop"]))},[(m(!0),f(pe,null,ye(N.value,Se=>(m(),f("div",{key:Se.attribute_key,class:"space-y-2",onClick:me[29]||(me[29]=Ke(()=>{},["prevent","stop"]))},[c("label",GLe,v(Se.attribute_display_name),1),Se.attribute_input_type==="text"?ie((m(),f("input",{key:0,"onUpdate:modelValue":We=>k.value[Se.attribute_key]=We,type:"text",class:"w-full rounded-lg",placeholder:Se.attribute_description,onClick:me[24]||(me[24]=Ke(()=>{},["prevent","stop"]))},null,8,VLe)),[[at,k.value[Se.attribute_key]]]):Se.attribute_input_type==="select"?ie((m(),f("select",{key:1,"onUpdate:modelValue":We=>k.value[Se.attribute_key]=We,class:"w-full rounded-lg",onClick:me[25]||(me[25]=Ke(()=>{},["prevent","stop"]))},[c("option",KLe,v(I(s)("KANBAN.FORM.CUSTOM_FIELDS.SELECT")),1),(m(!0),f(pe,null,ye(Se.attribute_values,We=>(m(),f("option",{key:We,value:We},v(We),9,zLe))),128))],8,HLe)),[[Mt,k.value[Se.attribute_key]]]):Se.attribute_input_type==="checkbox"?(m(),f("div",{key:2,onClick:me[27]||(me[27]=Ke(()=>{},["prevent","stop"]))},[c("label",WLe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":We=>k.value[Se.attribute_key]=We,class:"rounded",onClick:me[26]||(me[26]=Ke(()=>{},["prevent","stop"]))},null,8,jLe),[[Kt,k.value[Se.attribute_key]]]),c("span",YLe,v(Se.attribute_description),1)])])):Se.attribute_input_type==="number"?ie((m(),f("input",{key:3,"onUpdate:modelValue":We=>k.value[Se.attribute_key]=We,type:"number",class:"w-full rounded-lg",placeholder:Se.attribute_description,onClick:me[28]||(me[28]=Ke(()=>{},["prevent","stop"]))},null,8,XLe)),[[at,k.value[Se.attribute_key]]]):x("",!0)]))),128))]))])):x("",!0)]),c("div",qLe,[b(he,{type:"button",variant:"ghost",color:"slate",size:"sm",onClick:me[32]||(me[32]=Se=>a("close"))},{default:j(()=>[be(v(I(s)("KANBAN.CANCEL")),1)]),_:1}),b(he,{type:"submit",variant:"solid",color:"blue",size:"sm",isLoading:r.value},{default:j(()=>[be(v(I(s)("KANBAN.SAVE")),1)]),_:1},8,["isLoading"])])],32)}}},ul=Re(ZLe,[["__scopeId","data-v-a11c267e"]]);var kd={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}};function QLe(e,t,n){n=n||{};var s;return typeof kd[e]=="string"?s=kd[e]:t===1?s=kd[e].one:s=kd[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"em "+s:"h "+s:s}var JLe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},e4e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},t4e={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n4e={date:Gm({formats:JLe,defaultWidth:"full"}),time:Gm({formats:e4e,defaultWidth:"full"}),dateTime:Gm({formats:t4e,defaultWidth:"full"})},s4e={lastWeek:function(e,t,n){var s=e.getUTCDay(),o=s===0||s===6?"ltimo":"ltima";return"'"+o+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"};function a4e(e,t,n,s){var o=s4e[e];return typeof o=="function"?o(t,n,s):o}var o4e={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},i4e={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},l4e={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},r4e={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},c4e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},d4e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}};function u4e(e,t){var n=Number(e),s=t||{},o=String(s.unit);return o==="week"||o==="isoWeek"?n+"":n+""}var m4e={ordinalNumber:u4e,era:Er({values:o4e,defaultWidth:"wide"}),quarter:Er({values:i4e,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Er({values:l4e,defaultWidth:"wide"}),day:Er({values:r4e,defaultWidth:"wide"}),dayPeriod:Er({values:c4e,defaultWidth:"wide",formattingValues:d4e,defaultFormattingWidth:"wide"})},p4e=/^(\d+)[o]?/i,h4e=/\d+/i,f4e={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},g4e={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},_4e={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},v4e={any:[/1/i,/2/i,/3/i,/4/i]},b4e={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},E4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},T4e={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},y4e={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},A4e={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},S4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},I4e={ordinalNumber:LN({matchPattern:p4e,parsePattern:h4e,valueCallback:function(e){return parseInt(e,10)}}),era:Tr({matchPatterns:f4e,defaultMatchWidth:"wide",parsePatterns:g4e,defaultParseWidth:"any"}),quarter:Tr({matchPatterns:_4e,defaultMatchWidth:"wide",parsePatterns:v4e,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Tr({matchPatterns:b4e,defaultMatchWidth:"wide",parsePatterns:E4e,defaultParseWidth:"any"}),day:Tr({matchPatterns:T4e,defaultMatchWidth:"wide",parsePatterns:y4e,defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:A4e,defaultMatchWidth:"any",parsePatterns:S4e,defaultParseWidth:"any"})},Ai={code:"pt-BR",formatDistance:QLe,formatLong:n4e,formatRelative:a4e,localize:m4e,match:I4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};const C4e={props:{priority:{type:String,default:""}},data(){return{CONVERSATION_PRIORITY:qs}}},N4e={class:"inline-flex items-center justify-center rounded-md"},O4e={key:0,class:"h-4 w-4",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},x4e={key:1,class:"h-4 w-4",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w4e={key:2,class:"h-4 w-4",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R4e={key:3,class:"h-4 w-4",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function $4e(e,t,n,s,o,a){return m(),f("div",N4e,[n.priority===o.CONVERSATION_PRIORITY.HIGH?(m(),f("svg",O4e,t[0]||(t[0]=[c("rect",{x:"4",y:"12",width:"4",height:"8",rx:"1",fill:"#FFC291"},null,-1),c("rect",{x:"10",y:"8",width:"4",height:"12",rx:"1",fill:"#FFC291"},null,-1),c("rect",{x:"16",y:"4",width:"4",height:"16",rx:"1",fill:"#FFC291"},null,-1)]))):x("",!0),n.priority===o.CONVERSATION_PRIORITY.LOW?(m(),f("svg",x4e,t[1]||(t[1]=[c("rect",{x:"4",y:"12",width:"4",height:"8",rx:"1",fill:"#FFC291"},null,-1),c("rect",{x:"10",y:"8",width:"4",height:"12",rx:"1",fill:"#DDDDDD"},null,-1),c("rect",{x:"16",y:"4",width:"4",height:"16",rx:"1",fill:"#DDDDDD"},null,-1)]))):x("",!0),n.priority===o.CONVERSATION_PRIORITY.MEDIUM?(m(),f("svg",w4e,t[2]||(t[2]=[c("rect",{x:"4",y:"12",width:"4",height:"8",rx:"1",fill:"#FFC291"},null,-1),c("rect",{x:"10",y:"8",width:"4",height:"12",rx:"1",fill:"#FFC291"},null,-1),c("rect",{x:"16",y:"4",width:"4",height:"16",rx:"1",fill:"#DDDDDD"},null,-1)]))):x("",!0),n.priority===o.CONVERSATION_PRIORITY.URGENT?(m(),f("svg",R4e,t[3]||(t[3]=[c("rect",{x:"4",y:"12",width:"4",height:"8",rx:"1",fill:"#E5484D"},null,-1),c("rect",{x:"10",y:"8",width:"4",height:"12",rx:"1",fill:"#E5484D"},null,-1),c("rect",{x:"16",y:"4",width:"4",height:"16",rx:"1",fill:"#E5484D"},null,-1)]))):x("",!0)])}const M4e=Re(C4e,[["render",$4e]]),k4e={class:"send-message-template"},L4e={class:"modal-content"},D4e={class:"border border-dashed border-woot-500 dark:border-woot-400 rounded-lg p-4 mb-4 bg-woot-50/10 dark:bg-woot-900/10"},P4e={class:"flex items-center gap-3 mb-3"},B4e={class:"flex-1"},F4e={class:"text-sm font-medium text-woot-600 dark:text-woot-400"},U4e={class:"flex items-center gap-2 text-xs text-slate-500"},G4e={key:0},V4e={key:1},H4e={key:0,class:"flex items-center justify-center h-6 min-w-[1.5rem] px-2 bg-ruby-500 text-white text-xs font-medium rounded-full"},K4e={class:"grid grid-cols-2 gap-4 mb-3 pt-3 border-t border-woot-200/50 dark:border-woot-700/50"},z4e={class:"flex items-center gap-2"},W4e={class:"text-xs text-slate-700 dark:text-slate-300"},j4e={class:"flex items-center gap-2"},Y4e={class:"text-xs capitalize text-slate-700 dark:text-slate-300"},X4e={class:"flex items-center justify-between text-[10px] pt-3 border-t border-woot-200/50 dark:border-woot-700/50"},q4e={class:"text-woot-500 dark:text-woot-400"},Z4e={class:"flex items-center gap-3 text-slate-500"},Q4e={key:0},J4e={key:1},eDe={key:0,class:"mb-4"},tDe={key:1,class:"flex items-center justify-center py-8"},nDe={key:2,class:"flex flex-col items-center justify-center py-8"},sDe={key:3,class:"templates-container"},aDe={key:0,class:"templates-grid"},oDe=["onClick"],iDe={class:"template-info"},lDe={class:"flex items-center gap-2 mb-2"},rDe={class:"template-title flex-1"},cDe=["title"],dDe={class:"flex items-center gap-2 mt-2"},uDe={key:0,class:"text-[10px] px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"},mDe={key:1,class:"text-[10px] px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"},pDe={key:1,class:"empty-templates"},hDe={class:"flex flex-col items-center justify-center py-8 text-center"},fDe={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},gDe={class:"text-xs text-slate-500 dark:text-slate-400"},_De={class:"mt-4 flex justify-center"},vDe={key:2,class:"mt-2"},bDe=["placeholder"],EDe={class:"modal-footer"},TDe={key:0,class:"mb-2 text-sm text-ruby-500 text-center"},yDe={class:"flex justify-end gap-2"},ADe={__name:"SendMessageTemplate",props:{conversationId:{type:[Number,String],required:!0},currentStage:{type:String,required:!0},contact:{type:Object,default:()=>({})},conversation:{type:Object,default:()=>({})},item:{type:Object,required:!0},items:{type:Array,default:()=>[]},isBulk:{type:Boolean,default:!1}},emits:["close","send"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!1),i=U(!1),l=U([]),r=U(null),d=U(null),u=U(null),p=U(!1),h=U(""),g=async()=>{try{a.value=!0;const A=await Js.get();l.value=A.data}catch(A){r.value=A.message,console.error("Erro ao carregar funis:",A)}finally{a.value=!1}},_=w(()=>{const A=[];return l.value.forEach(C=>{var O;(O=C.stages[n.currentStage])!=null&&O.message_templates&&A.push(...C.stages[n.currentStage].message_templates)}),A}),T=w(()=>{var C;const A=l.value.find(O=>O.stages[n.currentStage]);return((C=A==null?void 0:A.stages[n.currentStage])==null?void 0:C.color)||"#E5E7EB"}),S=async()=>{var A;try{i.value=!0;const C=p.value?h.value:u.value.content;n.isBulk?await Promise.all(n.items.map(O=>{var N;return lu.create({conversationId:O.item_details.conversation.id,message:C,private:!1,message_type:"outgoing",inbox_id:((N=O.item_details.conversation)==null?void 0:N.inbox_id)||1})})):await lu.create({conversationId:n.conversationId,message:C,private:!1,message_type:"outgoing",inbox_id:((A=n.conversation)==null?void 0:A.inbox_id)||1}),yt.emit("newToastMessage",{message:n.isBulk?"Mensagens enviadas com sucesso":"Mensagem enviada com sucesso",action:{type:"success"}}),s("send")}catch(C){yt.emit("newToastMessage",{message:"Erro ao enviar mensagem(ns)",action:{type:"error"}}),console.error("Erro detalhado em handleSendMessage:",C)}finally{i.value=!1}},E=()=>{g()};ut(()=>{E()}),ml(()=>{u.value=null,l.value=[],r.value=null});const y=w(()=>{var O,N;const A=(N=(O=n.conversation)==null?void 0:O.meta)==null?void 0:N.channel;return{"Channel::WebWidget":{name:"Website"},"Channel::Api":{name:"API"},"Channel::Email":{name:"Email"},"Channel::TwitterProfile":{name:"Twitter"},"Channel::FacebookPage":{name:"Facebook"},"Channel::TelegramBot":{name:"Telegram"},"Channel::WhatsApp":{name:"WhatsApp"}}[A]||{name:"Chat"}});return(A,C)=>{var N,R,k,L,D,$,M,K,B,H,G,V,Y;const O=F("fluent-icon");return m(),f("div",k4e,[c("div",L4e,[c("div",D4e,[c("div",P4e,[b(yn,{src:(N=e.contact)==null?void 0:N.thumbnail,name:(R=e.contact)==null?void 0:R.name,size:40},null,8,["src","name"]),c("div",B4e,[c("h4",F4e,v(((k=e.contact)==null?void 0:k.name)||I(o)("KANBAN.ITEM_CONVERSATION.NO_CONTACT")),1),c("div",U4e,[(L=e.contact)!=null&&L.email?(m(),f("span",G4e,[C[3]||(C[3]=c("span",{class:"material-icons-outlined text-sm mr-1"},"mail",-1)),be(" "+v(I(o)("KANBAN.ITEM_CONVERSATION.CONTACT.EMAIL"))+": "+v(e.contact.email),1)])):x("",!0),(D=e.contact)!=null&&D.phone_number?(m(),f("span",V4e,[C[4]||(C[4]=c("span",{class:"material-icons-outlined text-sm mr-1"},"phone",-1)),be(" "+v(I(o)("KANBAN.ITEM_CONVERSATION.CONTACT.PHONE"))+": "+v(e.contact.phone_number),1)])):x("",!0)])]),($=e.conversation)!=null&&$.unread_count?(m(),f("div",H4e,v(e.conversation.unread_count>9?"9+":e.conversation.unread_count),1)):x("",!0)]),c("div",K4e,[c("div",null,[C[5]||(C[5]=c("p",{class:"text-[10px] uppercase tracking-wider text-woot-500 dark:text-woot-400 mb-1"}," Canal ",-1)),c("div",z4e,[c("span",W4e,v(y.value.name),1)])]),c("div",null,[C[6]||(C[6]=c("p",{class:"text-[10px] uppercase tracking-wider text-woot-500 dark:text-woot-400 mb-1"}," Status ",-1)),c("div",j4e,[c("span",{class:re(["w-2 h-2 rounded-full",{"bg-green-500":((M=e.conversation)==null?void 0:M.status)==="open","bg-yellow-500":((K=e.conversation)==null?void 0:K.status)==="pending","bg-slate-500":((B=e.conversation)==null?void 0:B.status)==="resolved"}])},null,2),c("span",Y4e,v(((H=e.conversation)==null?void 0:H.status)||"desconhecido"),1)])])]),c("div",X4e,[c("div",q4e," Conversa #"+v((G=e.conversation)==null?void 0:G.id),1),c("div",Z4e,[(V=e.conversation)!=null&&V.created_at?(m(),f("span",Q4e," Criado em: "+v(new Date(e.conversation.created_at).toLocaleDateString()),1)):x("",!0),(Y=e.conversation)!=null&&Y.last_activity_at?(m(),f("span",J4e," ltima atividade: "+v(new Date(e.conversation.last_activity_at).toLocaleDateString()),1)):x("",!0)])])]),p.value?x("",!0):(m(),f("div",eDe,C[7]||(C[7]=[c("h4",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Selecione um template ",-1),c("p",{class:"text-xs text-slate-500 dark:text-slate-400"}," Escolha um template para enviar uma mensagem pr-definida ",-1)]))),a.value&&!p.value?(m(),f("div",tDe,C[8]||(C[8]=[c("span",{class:"loading-spinner"},null,-1)]))):r.value&&!p.value?(m(),f("div",nDe,[b(O,{icon:"error",size:"24",class:"text-ruby-500 mb-2"}),C[10]||(C[10]=c("p",{class:"text-slate-600 dark:text-slate-400"}," Erro ao carregar templates ",-1)),b(he,{variant:"ghost",color:"slate",size:"sm",class:"mt-2",onClick:g},{default:j(()=>C[9]||(C[9]=[be(" Tentar novamente ")])),_:1})])):(m(),f("div",sDe,[_.value.length&&!p.value?(m(),f("div",aDe,[c("div",{class:"templates-list grid grid-cols-2 gap-4 p-2 rounded-lg",style:At({backgroundColor:`${T.value}15`,border:`1px solid ${T.value}`})},[(m(!0),f(pe,null,ye(_.value,ee=>{var X,z,W;return m(),f("div",{key:ee.id,class:re(["template-item",{selected:((X=u.value)==null?void 0:X.id)===ee.id}]),onClick:q=>u.value=ee},[c("div",iDe,[c("div",lDe,[c("h5",rDe,v(ee.title),1)]),c("p",{class:"template-content line-clamp-2",title:ee.content},v(ee.content),9,cDe),c("div",dDe,[(z=ee.webhook)!=null&&z.enabled?(m(),f("span",uDe," Webhook ")):x("",!0),(W=ee.conditions)!=null&&W.enabled?(m(),f("span",mDe," Condies ")):x("",!0)])])],10,oDe)}),128))],4)])):p.value?x("",!0):(m(),f("div",pDe,[c("div",hDe,[b(O,{icon:"document",size:"24",class:"text-slate-400 dark:text-slate-600 mb-2"}),c("h4",fDe,v(I(o)("KANBAN.MESSAGE_TEMPLATES.NO_TEMPLATES")),1),c("p",gDe,v(I(o)("KANBAN.MESSAGE_TEMPLATES.NO_TEMPLATES_DESCRIPTION")),1)])])),c("div",_De,[c("button",{class:"text-sm text-woot-500 hover:text-woot-600 dark:text-woot-400 dark:hover:text-woot-300 hover:underline",onClick:C[0]||(C[0]=ee=>p.value=!p.value)},v(p.value?I(o)("KANBAN.SEND_MESSAGE.SELECT_TEMPLATE"):I(o)("KANBAN.SEND_MESSAGE.CUSTOM_MESSAGE")),1)]),p.value?(m(),f("div",vDe,[ie(c("textarea",{"onUpdate:modelValue":C[1]||(C[1]=ee=>h.value=ee),class:"w-full p-3 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",placeholder:I(o)("KANBAN.SEND_MESSAGE.CUSTOM_MESSAGE_PLACEHOLDER"),rows:"4"},null,8,bDe),[[at,h.value]])])):x("",!0)]))]),c("footer",EDe,[d.value?(m(),f("div",TDe,v(d.value),1)):x("",!0),c("div",yDe,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:C[2]||(C[2]=ee=>s("close"))},{default:j(()=>[be(v(I(o)("CANCEL")),1)]),_:1}),b(he,{variant:"solid",color:"blue",size:"sm",disabled:!u.value&&!h.value||i.value,isLoading:i.value,onClick:S},{default:j(()=>[be(v(i.value?I(o)("KANBAN.SEND_MESSAGE.STATUS.SENDING"):u.value?I(o)("KANBAN.SEND_MESSAGE.ACTIONS.SEND_SELECTED",{title:u.value.title}):h.value?I(o)("KANBAN.SEND_MESSAGE.ACTIONS.SEND_CUSTOM"):I(o)("KANBAN.SEND_MESSAGE.ACTIONS.SEND")),1)]),_:1},8,["disabled","isLoading"])])])])}}},A2=Re(ADe,[["__scopeId","data-v-57b4b7cb"]]),SDe={class:"item-statistics bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},IDe={class:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-3"},CDe={class:"grid grid-cols-2 gap-4"},NDe={class:"block text-xs text-slate-500 dark:text-slate-400"},ODe={class:"block text-sm font-medium text-slate-800 dark:text-slate-200"},xDe={__name:"KanbanItemStatistics",props:{item:{type:Object,required:!0},notes:{type:Array,default:()=>[]},checklistItems:{type:Array,default:()=>[]},attachments:{type:Array,default:()=>[]}},setup(e){const t=e,{t:n}=He(),s=w(()=>t.checklistItems.length),o=w(()=>t.checklistItems.filter(i=>i.completed).length),a=w(()=>{var u,p;const i=t.item.stage_entered_at?Nc(new Date(t.item.stage_entered_at),{locale:Ai,addSuffix:!1}):n("KANBAN.STATISTICS.NOT_AVAILABLE"),l=((u=t.notes)==null?void 0:u.length)||0,r=`${o.value}/${s.value}`,d=((p=t.attachments)==null?void 0:p.length)||0;return[{icon:"book-clock",label:n("KANBAN.STATISTICS.TIME_IN_STAGE"),value:i},{icon:"comment-add",label:n("KANBAN.STATISTICS.NOTES"),value:l},{icon:"checkmark-circle",label:n("KANBAN.STATISTICS.CHECKLIST"),value:r},{icon:"attach",label:n("KANBAN.STATISTICS.ATTACHMENTS"),value:d}]});return(i,l)=>{const r=F("fluent-icon");return m(),f("div",SDe,[c("h3",IDe,v(I(n)("KANBAN.STATISTICS.TITLE")),1),c("div",CDe,[(m(!0),f(pe,null,ye(a.value,d=>(m(),f("div",{key:d.label,class:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg"},[b(r,{icon:d.icon,size:"18",class:"text-slate-500 dark:text-slate-400"},null,8,["icon"]),c("div",null,[c("span",NDe,v(d.label),1),c("span",ODe,v(d.value),1)])]))),128))])])}}},wDe=Re(xDe,[["__scopeId","data-v-f024e47d"]]),RDe={class:"quick-actions bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},$De={class:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-3"},MDe={class:"grid grid-cols-4 gap-2"},kDe=["onClick"],LDe={class:"text-xs mt-1 text-slate-600 dark:text-slate-400"},DDe={__name:"KanbanQuickActions",emits:["quick-action"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=[{id:"move",icon:"arrow-right",color:"emerald",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.MOVE")},{id:"assign",icon:"person",color:"violet",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.ASSIGN")},{id:"chat",icon:"chat",color:"amber",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.CHAT")},{id:"duplicate",icon:"copy",color:"sky",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.DUPLICATE")}],a=i=>{n("quick-action",i)};return(i,l)=>{const r=F("fluent-icon");return m(),f("div",RDe,[c("h3",$De,v(I(s)("KANBAN.QUICK_ACTIONS")),1),c("div",MDe,[(m(),f(pe,null,ye(o,d=>c("button",{key:d.id,class:re(["quick-action-btn flex flex-col items-center",{"hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-600 dark:hover:text-emerald-400":d.color==="emerald","hover:bg-violet-50 dark:hover:bg-violet-900/20 hover:text-violet-600 dark:hover:text-violet-400":d.color==="violet","hover:bg-amber-50 dark:hover:bg-amber-900/20 hover:text-amber-600 dark:hover:text-amber-400":d.color==="amber","hover:bg-sky-50 dark:hover:bg-sky-900/20 hover:text-sky-600 dark:hover:text-sky-400":d.color==="sky"}]),onClick:u=>a(d.id)},[b(r,{icon:d.icon,size:"20",class:re({"text-emerald-500 dark:text-emerald-400":d.color==="emerald","text-violet-500 dark:text-violet-400":d.color==="violet","text-amber-500 dark:text-amber-400":d.color==="amber","text-sky-500 dark:text-sky-400":d.color==="sky"})},null,8,["icon","class"]),c("span",LDe,v(d.description),1)],10,kDe)),64))])])}}},PDe=Re(DDe,[["__scopeId","data-v-32ede582"]]),BDe={class:"header-section"},FDe={class:"flex items-center justify-between gap-4 mb-3"},UDe={class:"text-xl font-semibold text-slate-900 dark:text-slate-100"},GDe={class:"flex items-center gap-2"},VDe={key:1,class:"px-3 py-1.5 text-sm font-medium rounded-full bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-50"},HDe={key:0,class:"text-base text-slate-600 dark:text-slate-400 mb-4"},KDe={class:"info-grid"},zDe={class:"info-card"},WDe={class:"info-label"},jDe={class:"info-content"},YDe={key:0,class:"loading-text"},XDe={key:1,class:"flex items-center gap-2"},qDe={class:"font-medium"},ZDe={key:2,class:"no-data-text"},QDe={key:0,class:"info-card"},JDe={class:"info-label"},e8e={class:"flex items-center gap-2 flex-1"},t8e={key:0,class:"flex items-center justify-between w-full"},n8e={class:"text-xs text-slate-700 dark:text-slate-300 truncate my-0"},s8e={key:0,class:"flex items-center justify-center h-4 min-w-[1rem] px-1 text-[0.625rem] font-medium bg-ruby-500 text-white rounded-full flex-shrink-0"},a8e={key:1,class:"text-xs text-slate-500 flex items-center"},o8e={key:2,class:"text-xs text-slate-500 flex items-center"},i8e={key:1,class:"info-card"},l8e={class:"info-label"},r8e={class:"info-content value-text"},c8e={class:"info-card"},d8e={class:"info-label"},u8e={class:"info-content flex items-center gap-2"},m8e={class:"font-medium"},p8e={class:"text-xs text-slate-500"},h8e={__name:"KanbanItemHeader",props:{item:{type:Object,required:!0},agentInfo:{type:Object,default:null},loadingAgent:{type:Boolean,default:!1},conversationData:{type:Object,default:null},loadingConversation:{type:Boolean,default:!1},currentStageName:{type:String,default:""},itemDescription:{type:String,default:""}},emits:["navigate-to-conversation","context-menu"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=w(()=>{var _,T;const h=((T=(_=n.item.item_details)==null?void 0:_.priority)==null?void 0:T.toLowerCase())||"none";return h==="none"?null:{high:{label:o("KANBAN.PRIORITY_LABELS.HIGH"),class:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50"},medium:{label:o("KANBAN.PRIORITY_LABELS.MEDIUM"),class:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50"},low:{label:o("KANBAN.PRIORITY_LABELS.LOW"),class:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50"}}[h]||null}),i=w(()=>{var g,_;const h={high:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50",medium:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50",low:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50",none:"bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-50"};return h[((_=(g=n.item.item_details)==null?void 0:g.priority)==null?void 0:_.toLowerCase())||"none"]||h.none}),l=w(()=>{var h;return(h=n.item.item_details)!=null&&h.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.item.item_details.value):null}),r=w(()=>{var S,E,y,A;const h=(E=(S=n.conversationData)==null?void 0:S.contact)==null?void 0:E.name,g=(A=(y=n.conversationData)==null?void 0:y.contact)==null?void 0:A.email,_=o("KANBAN.ITEM_CONVERSATION.NO_CONTACT"),T=h||g||_;return T.length>10?`${T.substring(0,10)}...`:T}),d=h=>{if(!h||!h.stage_entered_at)return"";try{return o("KANBAN.STAGE.TIME_IN_STAGE",{time:Nc(new Date(h.stage_entered_at),{locale:Ai,addSuffix:!1})})}catch{return""}},u=(h,g)=>{s("navigate-to-conversation",h,g)},p=(h,g)=>{s("context-menu",h,g)};return(h,g)=>{var T,S,E,y,A;const _=F("fluent-icon");return m(),f("div",BDe,[c("div",FDe,[c("h3",UDe,v(n.item.item_details.title),1),c("div",GDe,[b(M4e,{priority:((T=n.item.item_details)==null?void 0:T.priority)||"none"},null,8,["priority"]),(S=n.item.item_details)!=null&&S.priority&&n.item.item_details.priority!=="none"?(m(),f("span",{key:0,class:re(["px-3 py-1.5 text-sm font-medium rounded-full",i.value])},v(((E=a.value)==null?void 0:E.label)||I(o)(`KANBAN.PRIORITY_LABELS.${(((y=n.item.item_details)==null?void 0:y.priority)||"NONE").toUpperCase()}`)),3)):(m(),f("span",VDe,v(I(o)("KANBAN.PRIORITY_LABELS.NONE")),1))])]),e.itemDescription?(m(),f("p",HDe,v(e.itemDescription),1)):x("",!0),c("div",KDe,[c("div",zDe,[c("span",WDe,v(I(o)("KANBAN.ITEM_DETAILS.AGENT_RESPONSIBLE")),1),c("div",jDe,[e.loadingAgent?(m(),f("div",YDe,v(I(o)("KANBAN.ITEM_DETAILS.LOADING_AGENT")),1)):e.agentInfo?(m(),f("div",XDe,[b(yn,{name:e.agentInfo.name,src:e.agentInfo.avatar_url,size:28},null,8,["name","src"]),c("span",qDe,v(e.agentInfo.name),1)])):(m(),f("div",ZDe,v(I(o)("KANBAN.ITEM_DETAILS.NO_AGENT")),1))])]),(A=n.item.item_details)!=null&&A.conversation_id?(m(),f("div",QDe,[c("span",JDe,v(I(o)("KANBAN.FORM.CONVERSATION.LABEL")),1),c("div",{class:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700 min-h-[1.5rem] cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick:g[0]||(g[0]=C=>{var O,N;return u(C,(N=(O=n.item.item_details)==null?void 0:O.conversation)==null?void 0:N.display_id)}),onContextmenu:g[1]||(g[1]=C=>p(C,n.item.item_details.conversation_id))},[c("div",e8e,[b(_,{icon:"chat",class:"text-slate-500 dark:text-slate-400 flex-shrink-0",size:"16"}),e.conversationData?(m(),f("div",t8e,[c("div",n8e,[be(" #"+v(e.conversationData.display_id)+" - "+v(r.value)+" ",1),c("span",{class:re(["ml-2 text-xs px-2 py-0.5 rounded-full",{"bg-green-100 text-green-700":e.conversationData.status==="open","bg-yellow-100 text-yellow-700":e.conversationData.status==="pending","bg-slate-100 text-slate-700":e.conversationData.status==="resolved"}])},v(e.conversationData.status),3)]),e.conversationData.unread_count>0?(m(),f("span",s8e,v(e.conversationData.unread_count>9?"9+":e.conversationData.unread_count),1)):x("",!0)])):e.loadingConversation?(m(),f("div",a8e,v(I(o)("KANBAN.LOADING_CONVERSATION")),1)):(m(),f("div",o8e,v(I(o)("KANBAN.CONVERSATION_NOT_FOUND")),1))])],32)])):x("",!0),l.value?(m(),f("div",i8e,[c("span",l8e,v(I(o)("KANBAN.FORM.VALUE.LABEL")),1),c("span",r8e,v(l.value),1)])):x("",!0),c("div",c8e,[c("span",d8e,v(I(o)("KANBAN.FORM.STAGE.LABEL")),1),c("div",u8e,[c("span",m8e,v(e.currentStageName),1),c("span",p8e,v(d(e.item)),1)])])])])}}},f8e=Re(h8e,[["__scopeId","data-v-958020ab"]]),g8e={class:"kanban-details flex gap-4"},_8e={class:"w-2/3 p-8 space-y-6"},v8e={class:"space-y-4"},b8e={class:"flex border-b border-slate-200 dark:border-slate-700 mb-6"},E8e=["onClick"],T8e={class:"flex items-center gap-2"},y8e={class:"space-y-6"},A8e={key:0,class:"space-y-4"},S8e={class:"note-input-section"},I8e=["placeholder"],C8e={class:"flex flex-col gap-2 mt-2"},N8e={class:"flex items-center gap-2"},O8e=["disabled"],x8e={key:0},w8e={key:0,class:"flex items-center gap-2 px-2 py-1 text-xs text-slate-600 dark:text-slate-400"},R8e={class:"truncate"},$8e=["disabled"],M8e={key:0,class:"item-selector absolute z-50 left-8 right-8 mt-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg"},k8e={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},L8e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},D8e={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},P8e={key:0,class:"p-4 text-center text-sm text-slate-500"},B8e={key:1,class:"p-4 text-center"},F8e={class:"text-sm text-slate-500"},U8e={key:2,class:"divide-y divide-slate-100 dark:divide-slate-700"},G8e=["onClick"],V8e={class:"flex items-center gap-3"},H8e={class:"flex items-center gap-3 flex-1 min-w-0"},K8e={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate flex-1"},z8e={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 whitespace-nowrap"},W8e={class:"flex items-center gap-1 text-xs text-slate-400 whitespace-nowrap"},j8e={key:0,class:"mt-1 ml-6 text-xs text-slate-500 dark:text-slate-400 line-clamp-1"},Y8e={key:1,class:"conversation-selector absolute z-50 left-8 right-8 mt-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg"},X8e={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},q8e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Z8e={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},Q8e={key:0,class:"p-4 text-center text-sm text-slate-500"},J8e={key:1,class:"p-4 text-center"},e5e={class:"text-sm text-slate-500"},t5e={key:2,class:"divide-y divide-slate-100 dark:divide-slate-700"},n5e=["onClick"],s5e={class:"flex items-center gap-3"},a5e={class:"flex items-center gap-3 flex-1 min-w-0"},o5e={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate flex-1"},i5e={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 whitespace-nowrap"},l5e={class:"flex items-center gap-1 text-xs text-slate-400 whitespace-nowrap"},r5e={key:0,class:"mt-1 ml-6 text-xs text-slate-500 dark:text-slate-400 line-clamp-1"},c5e={key:2,class:"contact-selector absolute z-50 left-8 right-8 mt-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg"},d5e={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},u5e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},m5e={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},p5e={key:0,class:"p-4 text-center text-sm text-slate-500"},h5e={key:1,class:"p-4 text-center"},f5e={class:"text-sm text-slate-500"},g5e={key:2,class:"divide-y divide-slate-100 dark:divide-slate-700"},_5e=["onClick"],v5e={class:"flex items-center gap-3"},b5e={class:"flex items-center gap-2"},E5e={key:0,class:"mt-1 ml-9 flex items-center gap-4 text-xs text-slate-500"},T5e={key:0,class:"flex items-center gap-1"},y5e={key:1,class:"flex items-center gap-1"},A5e={class:"notes-section"},S5e={class:"note-layout"},I5e={class:"note-content"},C5e={class:"flex items-start justify-between"},N5e={class:"note-text"},O5e={class:"flex items-center gap-1"},x5e=["onClick"],w5e={class:"icon-button"},R5e=["onClick"],$5e={class:"icon-button"},M5e={class:"note-metadata"},k5e={class:"flex items-center gap-2"},L5e={class:"note-author"},D5e={class:"note-date"},P5e={key:0,class:"note-files"},B5e={class:"file-info"},F5e={class:"file-icon"},U5e=["href","title"],G5e=["onClick"],V5e={key:0,class:"note-images"},H5e=["src","alt","onClick"],K5e={key:1,class:"space-y-4"},z5e={class:"flex items-center justify-between mb-3"},W5e={class:"flex items-center gap-2"},j5e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Y5e={class:"text-xs text-slate-500"},X5e={class:"flex items-center gap-2"},q5e={class:"h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},Z5e={key:0,class:"space-y-2"},Q5e={class:"relative flex items-center cursor-pointer"},J5e=["checked","onChange"],ePe={class:"flex items-center gap-2 flex-1"},tPe={key:0,class:"flex items-center gap-1 px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full"},nPe={class:"truncate max-w-[150px]"},sPe={key:1,class:"flex items-center gap-1 px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full"},aPe={class:"truncate max-w-[150px]"},oPe={key:2,class:"flex items-center gap-1 px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full"},iPe={class:"truncate max-w-[150px]"},lPe=["onClick"],rPe=["onClick"],cPe={class:"mt-3"},dPe={class:"flex gap-2 mb-2"},uPe=["placeholder"],mPe={class:"flex gap-2"},pPe=["disabled"],hPe={key:2,class:"space-y-4"},fPe={class:"flex justify-between items-center"},gPe=["disabled"],_Pe={key:0},vPe={class:"attachments-grid"},bPe={key:0,class:"attachment-section"},EPe={class:"section-title"},TPe={class:"images-grid"},yPe=["src","alt","onClick"],APe={class:"attachment-info"},SPe={class:"flex flex-col"},IPe={class:"attachment-name"},CPe={class:"attachment-source"},NPe=["onClick"],OPe={key:1,class:"attachment-section"},xPe={class:"section-title"},wPe={class:"files-grid"},RPe={class:"file-info"},$Pe={class:"file-icon"},MPe={class:"flex flex-col"},kPe=["href","title"],LPe={class:"file-source"},DPe=["onClick"],PPe={key:3,class:"space-y-4"},BPe={class:"flex justify-end mb-2"},FPe={key:0,class:"mb-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-auto max-h-96"},UPe={class:"text-xs"},GPe={key:1,class:"p-4 text-center bg-slate-50 dark:bg-slate-800 rounded-lg"},VPe={class:"text-sm text-slate-600 dark:text-slate-400"},HPe={key:2,class:"history-timeline"},KPe={class:"history-connector"},zPe={class:"history-icon"},WPe={class:"history-content"},jPe={class:"history-header"},YPe={class:"flex items-center gap-2"},XPe={class:"history-title"},qPe={class:"history-date"},ZPe={class:"history-details"},QPe={class:"history-text"},JPe={class:"history-author"},e6e={class:"text-xs text-slate-600 dark:text-slate-400"},t6e={key:4,class:"space-y-6"},n6e={class:"flex items-center justify-between mb-4"},s6e={class:"flex items-center gap-3"},a6e={class:"w-10 h-10 rounded-lg bg-woot-50 dark:bg-woot-900/20 flex items-center justify-center"},o6e={class:"text-base font-medium text-slate-900 dark:text-slate-100"},i6e={class:"text-sm text-slate-500"},l6e={key:0,class:"grid gap-4 md:grid-cols-2"},r6e={class:"flex items-start justify-between"},c6e={class:"space-y-1"},d6e={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},u6e={class:"text-xs text-slate-500"},m6e={class:"mt-3 pt-3 border-t border-slate-100 dark:border-slate-700"},p6e={class:"flex items-center gap-2"},h6e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},f6e={key:1,class:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-6 text-center"},g6e={class:"w-12 h-12 mx-auto mb-4 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center"},_6e={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},v6e={class:"text-sm text-slate-500"},b6e={class:"w-1/3 p-4 space-y-6"},E6e={class:"p-4 space-y-4"},T6e={class:"text-lg font-medium text-slate-900 dark:text-slate-100"},y6e={class:"space-y-2"},A6e={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},S6e={class:"space-y-2"},I6e={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},C6e=["value"],N6e={class:"flex justify-end gap-2 mt-4"},O6e={class:"settings-modal"},x6e={class:"settings-header"},w6e={class:"text-lg font-medium"},R6e={class:"settings-content"},$6e={__name:"KanbanItemDetails",props:{item:{type:Object,required:!0}},emits:["update:item","close","edit","item-updated"],setup(e,{emit:t}){var _s;const n=e,s=t,{t:o}=He(),a=hn(),i=wn(),{isStacklab:l}=Ra(),r=U(!1),d=U(!1),u=U(!1),p=U([]),h=U([]),g=U([]),_=U(!1),T=U(!1),S=U(!1),E=U(null),y=U(null),A=U(null),C=U("notes"),O=U(""),N=U(!1),R=U(null),k=U(""),L=U([]),D=U(!1),$=U(((_s=n.item.item_details)==null?void 0:_s.checklist)||[]),M=w(()=>N.value?$.value.filter(Be=>!Be.completed):$.value),K=w(()=>$.value.length),B=w(()=>$.value.filter(Be=>Be.completed).length),H=w(()=>K.value===0?0:B.value/K.value*100),G=w(()=>{var Ye;const Be=a.getters["funnel/getSelectedFunnel"];return!(Be!=null&&Be.stages)||!n.item.funnel_stage?"":((Ye=Be.stages[n.item.funnel_stage])==null?void 0:Ye.name)||n.item.funnel_stage}),V=w(()=>a.getters.getCurrentUser),Y=async()=>{try{D.value=!0;const Be=await gO.getAttributesByModel();L.value=Be.data.filter(Ye=>Ye.attribute_model==="conversation_attribute")}catch(Be){console.error("Erro ao carregar atributos:",Be)}finally{D.value=!1}},ee=w(()=>{var Be,Ye;return((Ye=(Be=n.item.item_details)==null?void 0:Be.conversation)==null?void 0:Ye.custom_attributes)||{}});w(()=>{var Xe,pt;const Be=((pt=(Xe=n.item.item_details)==null?void 0:Xe.priority)==null?void 0:pt.toLowerCase())||"none";return Be==="none"?null:{high:{label:o("KANBAN.PRIORITY_LABELS.HIGH"),class:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50"},medium:{label:o("KANBAN.PRIORITY_LABELS.MEDIUM"),class:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50"},low:{label:o("KANBAN.PRIORITY_LABELS.LOW"),class:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50"}}[Be]||null}),w(()=>{var Ye,Xe;const Be={high:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50",medium:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50",low:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50",none:"bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-50"};return Be[((Xe=(Ye=n.item.item_details)==null?void 0:Ye.priority)==null?void 0:Xe.toLowerCase())||"none"]||Be.none}),w(()=>{var Be;return(Be=n.item.item_details)!=null&&Be.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.item.item_details.value):null});const X=U(null),z=U(!1),W=async Be=>{var Ye,Xe,pt;if(Be)try{if(z.value=!0,(Ye=n.item.item_details)!=null&&Ye.agent)X.value=n.item.item_details.agent;else{const Et=((pt=(Xe=a.getters["funnel/getSelectedFunnel"])==null?void 0:Xe.settings)==null?void 0:pt.agents)||[];X.value=Et.find(ze=>ze.id===Be)}}catch(Et){console.error("Erro ao obter dados do agente:",Et)}finally{z.value=!1}},q=w(()=>X.value?{name:X.value.name,avatar_url:X.value.thumbnail}:null),Z=w(()=>{var Be;return((Be=n.item.item_details)==null?void 0:Be.conversation)||null}),ne=U(!1),ae=async Be=>{var Ye;if(Be)try{if(ne.value=!0,(Ye=n.item.item_details)!=null&&Ye.conversation)Z.value=n.item.item_details.conversation;else{const pt=(await Yi.get({assigneeType:["all"],status:["open","pending","resolved"]})).data.data.payload;Z.value=pt.find(Et=>Et.id===Be)}}catch(Xe){console.error("Erro ao carregar dados da conversa:",Xe)}finally{ne.value=!1}},ue=U(""),te=U([]),ce=U(!1),fe=U(null);U("");const ke=U([]),De=U(!1),Fe=U(""),je=Be=>{try{return!!(Be&&typeof Be=="object"&&Be.fileType&&typeof Be.fileType=="string"&&Be.fileType.startsWith("image/"))}catch{return!1}},Qe=Be=>{var Ye;return((Ye=Be.attachments)==null?void 0:Ye.some(Xe=>!je(Xe)))||!1},Ze=Be=>{var Ye;return((Ye=Be.attachments)==null?void 0:Ye.some(je))||!1},ft=Be=>{var Ye;return((Ye=Be.attachments)==null?void 0:Ye.filter(Xe=>!je(Xe)))||[]},kt=Be=>{var Ye;return((Ye=Be.attachments)==null?void 0:Ye.filter(je))||[]},Q=Be=>!Be||!Be.fileType?"":Be.fileType.includes("pdf")?"":"",oe=async(Be,Ye)=>{var Xe;try{const pt={id:Date.now(),type:Be,details:Ye,created_at:new Date().toISOString(),user:{id:V.value.id,name:V.value.name,avatar_url:V.value.avatar_url}},Et=[...((Xe=n.item.item_details)==null?void 0:Xe.activities)||[],pt],ze={...n.item,item_details:{...n.item.item_details,activities:Et}},{data:Rt}=await In.updateItem(n.item.id,ze);s("update:item",Rt),s("item-updated"),n.item.item_details=Rt.item_details}catch(pt){console.error("Erro ao registrar atividade:",pt)}},de=async()=>{var Be;if(!(!ue.value.trim()&&!ke.value.length))try{if(ce.value=!0,fe.value){const Ye=te.value.map(Et=>Et.id===fe.value?{...Et,text:ue.value,attachments:[...Et.attachments||[],...ke.value],updated_at:new Date().toISOString(),author:V.value.name,author_id:V.value.id,author_avatar:V.value.avatar_url}:Et),Xe={...n.item,item_details:{...n.item.item_details,notes:Ye}},{data:pt}=await In.updateItem(n.item.id,Xe);s("update:item",pt),s("item-updated"),te.value=pt.item_details.notes,n.item.item_details=pt.item_details,await oe("note_added",{note_text:ue.value.substring(0,100),has_attachments:ke.value.length>0})}else{const Ye={id:Date.now(),text:ue.value,created_at:new Date().toISOString(),attachments:ke.value,author:V.value.name,author_id:V.value.id,author_avatar:V.value.avatar_url},Xe=[...((Be=n.item.item_details)==null?void 0:Be.notes)||[],Ye],pt={...n.item,item_details:{...n.item.item_details,notes:Xe}},{data:Et}=await In.updateItem(n.item.id,pt);s("update:item",Et),s("item-updated"),te.value=Et.item_details.notes,n.item.item_details=Et.item_details,await oe("note_added",{note_text:ue.value.substring(0,100),has_attachments:ke.value.length>0})}ue.value="",ke.value=[],Fe.value="",fe.value=null}catch(Ye){console.error("Erro ao adicionar nota:",Ye)}finally{ce.value=!1}};lt(()=>{var Be;return(Be=n.item.item_details)==null?void 0:Be.notes},Be=>{Be&&(te.value=Be)},{immediate:!0});const Ce=Be=>{y.value=Be.id,d.value=!1},Ae=async()=>{var Be;try{S.value=!0;const Ye=await pl.get();g.value=((Be=Ye.data)==null?void 0:Be.payload)||[]}catch(Ye){console.error("Erro ao carregar contatos:",Ye)}finally{S.value=!1}},Le=Be=>{A.value=Be.id,u.value=!1},Me=Be=>p.value.find(Ye=>Ye.id===Be),Ue=Be=>{E.value=Be.id,r.value=!1},we=async()=>{if(O.value.trim())try{const Be={id:Date.now(),text:O.value.trim(),completed:!1,created_at:new Date().toISOString()},Ye=[...$.value,Be],Xe={...n.item,item_details:{...n.item.item_details,checklist:Ye}},{data:pt}=await In.updateItem(n.item.id,Xe);$.value=pt.item_details.checklist,n.item.item_details=pt.item_details,await oe("checklist_item_added",{item_text:Be.text}),O.value=""}catch(Be){console.error("Erro ao adicionar item ao checklist:",Be)}},ge=async Be=>{try{const Ye=$.value.map(Et=>({...Et,completed:Et.id===Be.id?!Et.completed:Et.completed})),Xe={account_id:n.item.account_id,funnel_id:n.item.funnel_id,funnel_stage:n.item.funnel_stage,position:n.item.position,custom_attributes:n.item.custom_attributes||{},item_details:{...n.item.item_details,checklist:Ye},timer_started_at:n.item.timer_started_at,timer_duration:n.item.timer_duration},{data:pt}=await In.updateItem(n.item.id,Xe);$.value=pt.item_details.checklist,n.item.item_details=pt.item_details,s("update:item",pt),s("item-updated"),await oe("checklist_item_toggled",{item_text:Be.text,completed:!Be.completed})}catch(Ye){console.error("Erro ao atualizar item do checklist:",Ye)}},J=async()=>{try{const Be={account_id:n.item.account_id,funnel_id:n.item.funnel_id,funnel_stage:n.item.funnel_stage,position:n.item.position,custom_attributes:n.item.custom_attributes||{},item_details:{...n.item.item_details,checklist:[]},timer_started_at:n.item.timer_started_at,timer_duration:n.item.timer_duration},{data:Ye}=await In.updateItem(n.item.id,Be);$.value=Ye.item_details.checklist||[],s("update:item",Ye),s("item-updated")}catch(Be){console.error("Erro ao deletar checklist:",Be)}},Ee=async Be=>{var Ye;try{const Xe=$.value.filter(ze=>ze.id!==Be.id);$.value=Xe;const pt={...n.item,item_details:{...n.item.item_details,checklist:Xe}},{data:Et}=await In.updateItem(n.item.id,pt);s("update:item",Et),s("item-updated")}catch(Xe){$.value=((Ye=n.item.item_details)==null?void 0:Ye.checklist)||[],console.error("Erro ao remover item do checklist:",Xe)}},$e=()=>{r.value?r.value=!1:(r.value=!0,d.value=!1,u.value=!1)},se=()=>{d.value?d.value=!1:(d.value=!0,r.value=!1,u.value=!1)},le=()=>{u.value?u.value=!1:(u.value=!0,r.value=!1,d.value=!1)};w(()=>{if(r.value)return o("KANBAN.CANCEL");if(E.value){const Be=p.value.find(Ye=>Ye.id===E.value);return(Be==null?void 0:Be.title)||o("KANBAN.FORM.NOTES.LINK_ITEM")}return o("KANBAN.FORM.NOTES.LINK_ITEM")}),w(()=>{if(d.value)return o("KANBAN.CANCEL");if(y.value){const Be=h.value.find(Ye=>Ye.id===y.value);return Be?`#${Be.id} - ${Be.title}`:o("KANBAN.FORM.NOTES.LINK_CONVERSATION")}return o("KANBAN.FORM.NOTES.LINK_CONVERSATION")}),w(()=>{if(u.value)return o("KANBAN.CANCEL");if(A.value){const Be=g.value.find(Ye=>Ye.id===A.value);return(Be==null?void 0:Be.name)||o("KANBAN.FORM.NOTES.LINK_CONTACT")}return o("KANBAN.FORM.NOTES.LINK_CONTACT")}),w(()=>{if(r.value)return o("KANBAN.CANCEL");if(E.value){const Be=p.value.find(Ye=>Ye.id===E.value);return(Be==null?void 0:Be.title)||o("KANBAN.FORM.NOTES.LINK_ITEM")}return o("KANBAN.FORM.NOTES.LINK_ITEM")});const _e=Be=>{R.value=Be.id,k.value=Be.text,O.value=Be.text},Ie=async()=>{try{const Be=$.value.map(pt=>pt.id===R.value?{...pt,text:O.value}:pt),Ye={...n.item,item_details:{...n.item.item_details,checklist:Be}},{data:Xe}=await In.updateItem(n.item.id,Ye);$.value=Be,R.value=null,k.value="",O.value="",s("update:item",Xe),s("item-updated")}catch(Be){console.error("Erro ao editar item do checklist:",Be)}},Pe=()=>{R.value=null,k.value="",O.value=""},Ne=async Be=>{var Ye;if(Be){if(Fe.value=Be.file.name,!((Ye=n.item)!=null&&Ye.id)){console.error("ID do item no encontrado:",n.item);return}De.value=!0;try{if(il(Be,oc)){const Xe=new FormData;Xe.append("attachment",Be.file);const pt=`/api/v1/accounts/${a.getters.getCurrentAccountId}/kanban/items/${n.item.id}/note_attachments`,Et=await axios.post(pt,Xe,{headers:{"Content-Type":"multipart/form-data"}}),ze={id:Et.data.id.toString(),url:Et.data.attachment_url,filename:Be.file.name,fileType:Be.file.type||"application/octet-stream",source:{type:"note",id:Date.now()}};ke.value=[...ke.value,ze]}}catch(Xe){console.error("Erro ao fazer upload:",Xe.message)}finally{De.value=!1}}},ve=async Be=>{const Ye=Be.source.type==="item",Xe=Ye?`/api/v1/accounts/${a.getters.getCurrentAccountId}/kanban/items/${n.item.id}/attachments/${Be.id}`:`/api/v1/accounts/${a.getters.getCurrentAccountId}/kanban/items/${n.item.id}/note_attachments/${Be.id}`;try{if(await axios.delete(Xe),Ye){const pt=n.item.item_details.attachments.filter(Rt=>Rt.id!==Be.id),Et={...n.item,item_details:{...n.item.item_details,attachments:pt}},{data:ze}=await In.updateItem(n.item.id,Et);s("update:item",ze),s("item-updated"),n.item.item_details=ze.item_details}else{const pt=te.value.map(Rt=>Rt.id===Be.source.id?{...Rt,attachments:Rt.attachments.filter(Tn=>Tn.id!==Be.id)}:Rt),Et={...n.item,item_details:{...n.item.item_details,notes:pt}},{data:ze}=await In.updateItem(n.item.id,Et);s("update:item",ze),s("item-updated"),te.value=ze.item_details.notes,n.item.item_details=ze.item_details}}catch(pt){console.error("Erro ao remover anexo:",pt.message)}},me=Be=>{if(!Be)return"";try{return Ln(new Date(Be),"dd/MM/yyyy HH:mm",{locale:Ai})}catch(Ye){return console.error("Erro ao formatar data:",Ye),""}},Oe=w(()=>{var Xe,pt;const Be=te.value.reduce((Et,ze)=>ze.attachments&&Array.isArray(ze.attachments)?[...Et,...ze.attachments.map(Rt=>{var Tn,ot;return{...Rt,source:{type:"note",id:ze.id,date:ze.created_at,text:((Tn=ze.text)==null?void 0:Tn.substring(0,50))+(((ot=ze.text)==null?void 0:ot.length)>50?"...":"")}}})]:Et,[]),Ye=((pt=(Xe=n.item.item_details)==null?void 0:Xe.attachments)==null?void 0:pt.map(Et=>({...Et,source:{type:"item",id:n.item.id}})))||[];return[...Be,...Ye]});ut(()=>{var Ye,Xe,pt,Et,ze,Rt,Tn,ot;Y(),(Ye=n.item.item_details)!=null&&Ye.agent_id&&W(n.item.item_details.agent_id),Ae(),(Xe=n.item.item_details)!=null&&Xe.notes&&(te.value=n.item.item_details.notes),(pt=n.item.item_details)!=null&&pt.checklist&&($.value=n.item.item_details.checklist),(Et=n.item.item_details)!=null&&Et.agent?(X.value=n.item.item_details.agent,z.value=!1):(ze=n.item.item_details)!=null&&ze.agent_id&&W(n.item.item_details.agent_id),(Rt=n.item.item_details)!=null&&Rt.conversation?(Z.value=n.item.item_details.conversation,ne.value=!1):(Tn=n.item.item_details)!=null&&Tn.conversation_id&&ae(n.item.item_details.conversation_id),(ot=n.item.item_details)!=null&&ot.conversation_id&&C.value==="custom_fields"&&Y(),C.value==="notes"&&u.value&&Ae();const Be=Tt=>{const Yt=Tt.target,Is=Yt.closest(".item-selector"),pa=Yt.closest(".conversation-selector"),Hs=Yt.closest(".contact-selector"),Cs=Yt.closest(".action-button");!Is&&!Cs&&r.value&&(r.value=!1),!pa&&!Cs&&d.value&&(d.value=!1),!Hs&&!Cs&&u.value&&(u.value=!1)};document.addEventListener("mousedown",Be),ia(()=>{document.removeEventListener("mousedown",Be)})}),ut(()=>{var Be,Ye,Xe,pt,Et,ze,Rt;(Be=n.item.item_details)!=null&&Be.notes&&(te.value=n.item.item_details.notes),(Ye=n.item.item_details)!=null&&Ye.checklist&&($.value=n.item.item_details.checklist),(Xe=n.item.item_details)!=null&&Xe.agent?(X.value=n.item.item_details.agent,z.value=!1):(pt=n.item.item_details)!=null&&pt.agent_id&&W(n.item.item_details.agent_id),(Et=n.item.item_details)!=null&&Et.conversation?(Z.value=n.item.item_details.conversation,ne.value=!1):(ze=n.item.item_details)!=null&&ze.conversation_id&&ae(n.item.item_details.conversation_id),(Rt=n.item.item_details)!=null&&Rt.conversation_id&&C.value==="custom_fields"&&Y(),C.value==="notes"&&u.value&&Ae()}),lt(C,Be=>{Be==="custom_fields"&&L.value.length===0&&Y(),Be==="notes"&&u.value&&g.value.length===0&&Ae()});const Ge=async Be=>{try{ce.value=!0;const Ye=te.value.filter(Et=>Et.id!==Be),Xe={...n.item,item_details:{...n.item.item_details,notes:Ye}},{data:pt}=await In.updateItem(n.item.id,Xe);s("update:item",pt),s("item-updated"),te.value=pt.item_details.notes}catch(Ye){console.error("Erro ao remover a nota:",Ye)}finally{ce.value=!1}},Se=Be=>{fe.value=Be.id,ue.value=Be.text},We=async Be=>{var Ye;if(Be){if(!((Ye=n.item)!=null&&Ye.id)){console.error("ID do item no encontrado:",n.item);return}De.value=!0;try{if(il(Be,oc)){const Xe=new FormData;Xe.append("attachment",Be.file);const pt=`/api/v1/accounts/${a.getters.getCurrentAccountId}/kanban/items/${n.item.id}/attachments`,Et=await axios.post(pt,Xe,{headers:{"Content-Type":"multipart/form-data"}}),ze={id:Et.data.id.toString(),url:Et.data.attachment_url,filename:Be.file.name,fileType:Be.file.type||"application/octet-stream",source:{type:"item",id:n.item.id}},Rt=[...n.item.item_details.attachments||[],ze],Tn={...n.item,item_details:{...n.item.item_details,attachments:Rt}},{data:ot}=await In.updateItem(n.item.id,Tn);s("update:item",ot),s("item-updated"),n.item.item_details=ot.item_details,await oe("attachment_added",{filename:Be.file.name,file_type:Be.file.type})}}catch(Xe){console.error("Erro ao fazer upload:",Xe.message)}finally{De.value=!1}}},mt=w(()=>{var Ye;console.log("Histrico: item_details",n.item.item_details);const Be=((Ye=n.item.item_details)==null?void 0:Ye.activities)||[];return console.log("Atividades encontradas:",Be.length),Be.map(Xe=>{var Rt,Tn;console.log("Processando atividade:",Xe.type,Xe);let pt,Et,ze;switch(Xe.type){case"attachment_added":pt="attach",Et=o("KANBAN.HISTORY.ATTACHMENT_ADDED"),ze=`${o("KANBAN.HISTORY.FILE")}: ${Xe.details.filename}`;break;case"note_added":pt="comment-add",Et=o("KANBAN.HISTORY.NOTE_ADDED"),ze=Xe.details.note_text;break;case"checklist_item_added":pt="add-circle",Et=o("KANBAN.HISTORY.CHECKLIST_ITEM_ADDED"),ze=Xe.details.item_text;break;case"checklist_item_toggled":pt=Xe.details.completed?"checkmark":"dismiss",Et=o("KANBAN.HISTORY.CHECKLIST_ITEM_UPDATED"),ze=`${Xe.details.item_text} - ${Xe.details.completed?o("KANBAN.HISTORY.COMPLETED"):o("KANBAN.HISTORY.PENDING")}`;break;case"priority_changed":pt="alert",Et=o("KANBAN.HISTORY.PRIORITY_CHANGED"),ze=`${Xe.details.old_priority||o("KANBAN.HISTORY.NONE")}  ${Xe.details.new_priority}`;break;case"status_changed":pt="status",Et=o("KANBAN.HISTORY.STATUS_CHANGED"),ze=`${Xe.details.old_status||o("KANBAN.HISTORY.PENDING")}  ${Xe.details.new_status}`;break;case"stage_changed":pt="arrow-right",Et=o("KANBAN.HISTORY.STAGE_CHANGED"),ze=`${Xe.details.old_stage||"-"}  ${Xe.details.new_stage}`;break;case"value_changed":pt="credit-card-person",Et=o("KANBAN.HISTORY.VALUE_CHANGED");const ot=Xe.details.old_value||"0",Tt=Xe.details.new_value,Yt=((Rt=Xe.details.currency)==null?void 0:Rt.symbol)||"R$";ze=`${Yt} ${ot}  ${Yt} ${Tt}`;break;case"agent_changed":pt="person",Et=o("KANBAN.HISTORY.AGENT_CHANGED"),ze=`${Xe.details.old_agent||o("KANBAN.HISTORY.NONE")}  ${Xe.details.new_agent||o("KANBAN.HISTORY.NONE")}`;break;case"conversation_linked":pt="chat",Et=o("KANBAN.HISTORY.CONVERSATION_LINKED"),ze=`${((Tn=Xe.details.user)==null?void 0:Tn.name)||o("KANBAN.SYSTEM")} ${o("KANBAN.HISTORY.LINKED_CONVERSATION")} #${Xe.details.conversation_id} - ${Xe.details.conversation_title}`;break;default:pt="info",Et=`${o("KANBAN.HISTORY.ACTIVITY")}: ${Xe.type}`,ze=JSON.stringify(Xe.details)}return{...Xe,icon:pt,title:Et,details:ze}}).reverse()}),Nt=(Be,Ye)=>{if(Be.stopPropagation(),!Ye)return;const Xe=a.getters.getCurrentAccountId;try{i.push({name:"inbox_conversation_through_inbox",params:{accountId:Xe,conversationId:Ye}})}catch(pt){console.error("Erro ao navegar para a conversa:",pt),window.location.href=`/app/accounts/${Xe}/conversations/${Ye}`}},nt=(Be,Ye)=>{!Ye||!Z.value||(Be.preventDefault(),St.value=!0,qe.value={x:Be.clientX,y:Be.clientY})},St=U(!1),qe=U({x:0,y:0}),bt=U(!1),Vt=({template:Be,conversationId:Ye})=>{bt.value=!1},dt=()=>{var Xe,pt,Et;if(St.value=!1,console.log("Dados do item:",n.item),console.log("Dados da conversa:",(Xe=n.item.item_details)==null?void 0:Xe.conversation),!((Et=(pt=n.item.item_details)==null?void 0:pt.conversation)!=null&&Et.id)){console.log("ID da conversa no encontrado");return}const Be=a.getters.getCurrentAccountId,Ye=n.item.item_details.conversation.id;console.log("Navegando para conversa:",{accountId:Be,conversationId:Ye,route:"inbox_conversation_through_inbox"});try{i.push({name:"inbox_conversation_through_inbox",params:{accountId:Be,conversationId:Ye}})}catch(ze){console.error("Erro na navegao:",ze),window.location.href=`/app/accounts/${Be}/conversations/${Ye}`}};lt(bt,Be=>{Be||Zt(()=>{St.value=!1})});const It=[{id:"notes",icon:"document",label:o("KANBAN.TABS.NOTES")},{id:"checklist",icon:"checkmark-circle",label:o("KANBAN.TABS.CHECKLIST")},{id:"attachments",icon:"attach",label:o("KANBAN.TABS.ATTACHMENTS")},{id:"history",icon:"calendar-clock",label:o("KANBAN.TABS.HISTORY")},{id:"custom_fields",icon:"edit",label:o("KANBAN.TABS.CUSTOM_FIELDS")}];w(()=>{var Ye,Xe,pt,Et;const Be=((Xe=(Ye=Z.value)==null?void 0:Ye.contact)==null?void 0:Xe.name)||((Et=(pt=Z.value)==null?void 0:pt.contact)==null?void 0:Et.email)||"";return Be.length>17?`${Be.substring(0,10)}...`:Be}),w(()=>{var Be,Ye;return((Ye=(Be=n.item.item_details)==null?void 0:Be.conversation)==null?void 0:Ye.labels)||[]}),w(()=>{var Ye,Xe,pt;const Be=(pt=(Xe=(Ye=n.item.item_details)==null?void 0:Ye.conversation)==null?void 0:Xe.meta)==null?void 0:pt.channel;return(Be==null?void 0:Be.replace("Channel::",""))||""}),w(()=>{var Be,Ye;return(Ye=(Be=n.item.item_details)==null?void 0:Be.conversation)==null?void 0:Ye.last_non_activity_message}),w(()=>{var Ye,Xe;const Be=(Xe=(Ye=n.item.item_details)==null?void 0:Ye.conversation)==null?void 0:Xe.last_activity_at;if(!Be)return"";try{const pt=new Date(Number(Be)*1e3);return isNaN(pt.getTime())?"":Nc(pt,{addSuffix:!0,locale:Ai})}catch(pt){return console.error("Erro ao formatar data:",pt),""}}),w(()=>{var Et,ze,Rt,Tn;const Be=(ze=(Et=Z.value)==null?void 0:Et.contact)==null?void 0:ze.name,Ye=(Tn=(Rt=Z.value)==null?void 0:Rt.contact)==null?void 0:Tn.email,Xe=o("KANBAN.ITEM_CONVERSATION.NO_CONTACT"),pt=Be||Ye||Xe;return pt.length>10?`${pt.substring(0,10)}...`:pt});const rt=U(!1);ut(()=>{var Be,Ye;console.log("KanbanItemDetails montado com item:",n.item),console.log("Item details:",n.item.item_details),(Be=n.item.item_details)!=null&&Be.activities&&console.log("Atividades:",(Ye=n.item.item_details)==null?void 0:Ye.activities.length)});const wt=w(()=>{var Be;return((Be=n.item.item_details)==null?void 0:Be.description)||n.item.description||""});U("");const pn=Be=>{var Ye,Xe,pt;switch(Be){case"move":vt.value=!0;break;case"assign":console.log("=== Debug Navegao ===");const Et=a.getters.getCurrentAccountId,ze=(pt=(Xe=(Ye=n.item.item_details)==null?void 0:Ye.conversation)==null?void 0:Xe.contact)==null?void 0:pt.id;if(!ze){console.log("ID do contato no encontrado");return}const Rt={name:"contacts_show",params:{accountId:Et,id:ze}};console.log("Route Config:",Rt);try{console.log("Tentando navegar via router.push..."),i.push(Rt)}catch(Tn){console.error("Erro na navegao:",Tn);const ot=`/app/accounts/${Et}/contacts/${ze}`;console.log("Usando fallback URL:",ot),window.location.href=ot}break;case"chat":bt.value=!0;break;case"duplicate":fs();break}},vt=U(!1),Ft=U({funnel_id:n.item.funnel_id,funnel_stage:n.item.funnel_stage}),zt=w(()=>{const Be=a.getters["funnel/getSelectedFunnel"];return Be!=null&&Be.stages?Object.entries(Be.stages).map(([Ye,Xe])=>({id:Ye,name:Xe.name,position:Xe.position})).sort((Ye,Xe)=>Ye.position-Xe.position):[]}),un=async()=>{try{const Be={...n.item,funnel_id:Ft.value.funnel_id,funnel_stage:Ft.value.funnel_stage},{data:Ye}=await In.updateItem(n.item.id,Be);s("update:item",Ye),vt.value=!1,await oe("stage_changed",{old_stage:n.item.funnel_stage,new_stage:Ft.value.funnel_stage})}catch(Be){console.error("Erro ao mover item:",Be)}},fs=async()=>{try{const Be={...n.item,id:void 0,item_details:{...n.item.item_details,title:`${n.item.item_details.title} (Cpia)`}},{data:Ye}=await In.createItem(Be);yt.emit("newToastMessage",{message:"Item duplicado com sucesso",action:{type:"success"}})}catch{yt.emit("newToastMessage",{message:"Erro ao duplicar o item",action:{type:"error"}})}},Pn=U([]),An=U(!1),rs=async()=>{var Ye,Xe;const Be=a.getters.getCurrentAccountId;if(!((Xe=(Ye=n.item.item_details)==null?void 0:Ye.conversation)!=null&&Xe.id)||!Be){console.log("No conversation ID or account ID found");return}try{An.value=!0;const pt=await lu.getPreviousMessages({accountId:Be,conversationId:n.item.item_details.conversation.id,before:Math.floor(Date.now()/1e3)});Pn.value=pt.data.payload.filter(Et=>Et.message_type===1).map(Et=>{var ze,Rt;return{id:Et.id,text:Et.content,isMe:((ze=Et.sender)==null?void 0:ze.id)===((Rt=V.value)==null?void 0:Rt.id),timestamp:new Date(Number(Et.created_at)*1e3).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),sender:Et.sender}}),Zt(()=>{gs()})}catch(pt){console.error("Error loading messages:",pt)}finally{An.value=!1}},gs=()=>{const Be=document.querySelector(".chat-messages");Be&&(Be.scrollTop=Be.scrollHeight)};return lt(()=>{var Be,Ye;return(Ye=(Be=n.item.item_details)==null?void 0:Be.conversation)==null?void 0:Ye.id},Be=>{console.log("Conversation ID changed:",Be),Be&&rs()}),ut(()=>{console.log("Component mounted, loading messages..."),rs()}),(Be,Ye)=>{var pt,Et;const Xe=F("fluent-icon");return m(),f(pe,null,[c("div",g8e,[c("div",_8e,[b(f8e,{item:n.item,"agent-info":q.value,"loading-agent":z.value,"conversation-data":Z.value,"loading-conversation":ne.value,"current-stage-name":G.value,"item-description":wt.value,onNavigateToConversation:Nt,onContextMenu:nt},null,8,["item","agent-info","loading-agent","conversation-data","loading-conversation","current-stage-name","item-description"]),c("div",v8e,[c("div",b8e,[(m(),f(pe,null,ye(It,ze=>c("button",{key:ze.id,class:re(["tab-button",C.value===ze.id?"tab-active":"tab-inactive"]),onClick:Rt=>C.value=ze.id},[c("div",T8e,[b(Xe,{icon:ze.icon,size:"16"},null,8,["icon"]),be(" "+v(ze.label),1)])],10,E8e)),64))]),c("div",y8e,[C.value==="notes"?(m(),f("div",A8e,[c("div",S8e,[ie(c("textarea",{"onUpdate:modelValue":Ye[0]||(Ye[0]=ze=>ue.value=ze),class:"w-full px-3 py-2 text-sm border border-slate-200 bg-slate-50 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300 resize-none",placeholder:I(o)("KANBAN.FORM.NOTES.PLACEHOLDER"),rows:"3"},null,8,I8e),[[at,ue.value]]),c("div",C8e,[c("div",N8e,[I(l)===!0?(m(),P(I(au),{key:0,ref:"upload",accept:I(eu),onInputFile:Ne},{default:j(()=>[c("button",{class:"action-button hover:bg-slate-100 dark:hover:bg-slate-600",disabled:De.value},[b(Xe,{icon:"attach",size:"20"}),De.value?(m(),f("span",x8e,"...")):x("",!0)],8,O8e)]),_:1},8,["accept"])):x("",!0),I(l)===!0?(m(),f("button",{key:1,class:"action-button",onClick:$e},[b(Xe,{icon:"link",size:"20"})])):x("",!0),I(l)===!0?(m(),f("button",{key:2,class:"action-button",onClick:se},[b(Xe,{icon:"chat",size:"20"})])):x("",!0),I(l)===!0?(m(),f("button",{key:3,class:"action-button",onClick:le},[b(Xe,{icon:"person",size:"20"})])):x("",!0)]),Fe.value?(m(),f("div",w8e,[b(Xe,{icon:"document",size:"12"}),c("span",R8e,v(Fe.value),1)])):x("",!0)]),c("button",{class:"primary-button",disabled:!ue.value.trim(),onClick:de},v(I(o)("KANBAN.ADD")),9,$8e)]),r.value?(m(),f("div",M8e,[c("div",k8e,[c("h4",L8e,v(I(o)("KANBAN.FORM.NOTES.SELECT_ITEM")),1)]),c("div",D8e,[_.value?(m(),f("div",P8e,[Ye[12]||(Ye[12]=c("span",{class:"loading-spinner w-4 h-4 mr-2"},null,-1)),be(" "+v(I(o)("KANBAN.LOADING")),1)])):p.value.length===0?(m(),f("div",B8e,[c("p",F8e,v(I(o)("KANBAN.FORM.NOTES.NO_ITEMS")),1)])):(m(),f("div",U8e,[(m(!0),f(pe,null,ye(p.value,ze=>(m(),f("button",{key:ze.id,class:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:bg-slate-50 dark:focus:bg-slate-700",onClick:Rt=>Ue(ze)},[c("div",V8e,[c("div",{class:re(["flex-shrink-0 w-1.5 h-5 rounded-full",{"bg-ruby-500":ze.priority==="high","bg-yellow-500":ze.priority==="medium","bg-green-500":ze.priority==="low","bg-slate-300":ze.priority==="none"}])},null,2),c("div",H8e,[c("h4",K8e,v(ze.title),1),c("span",z8e,v(ze.stage_name),1),c("span",W8e,[b(Xe,{icon:"calendar",size:"12"}),be(" "+v(ze.createdAt),1)])])]),ze.description?(m(),f("p",j8e,v(ze.description),1)):x("",!0)],8,G8e))),128))]))])])):x("",!0),d.value?(m(),f("div",Y8e,[c("div",X8e,[c("h4",q8e,v(I(o)("KANBAN.FORM.NOTES.SELECT_CONVERSATION")),1)]),c("div",Z8e,[T.value?(m(),f("div",Q8e,[Ye[13]||(Ye[13]=c("span",{class:"loading-spinner w-4 h-4 mr-2"},null,-1)),be(" "+v(I(o)("KANBAN.LOADING")),1)])):h.value.length===0?(m(),f("div",J8e,[c("p",e5e,v(I(o)("KANBAN.FORM.NOTES.NO_CONVERSATIONS")),1)])):(m(),f("div",t5e,[(m(!0),f(pe,null,ye(h.value,ze=>(m(),f("button",{key:ze.id,class:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:bg-slate-50 dark:focus:bg-slate-700",onClick:Rt=>Ce(ze)},[c("div",s5e,[c("div",{class:re(["flex-shrink-0 w-1.5 h-5 rounded-full",{"bg-green-500":ze.status==="open","bg-yellow-500":ze.status==="pending","bg-slate-500":ze.status==="resolved"}])},null,2),c("div",a5e,[c("h4",o5e," #"+v(ze.id)+" - "+v(ze.title),1),c("span",i5e,v(ze.channel_type),1),c("span",l5e,[b(Xe,{icon:"contact-card",size:"12"}),be(" "+v(ze.created_at),1)])])]),ze.description?(m(),f("p",r5e,v(ze.description),1)):x("",!0)],8,n5e))),128))]))])])):x("",!0),u.value?(m(),f("div",c5e,[c("div",d5e,[c("h4",u5e,v(I(o)("KANBAN.FORM.NOTES.SELECT_CONTACT")),1)]),c("div",m5e,[S.value?(m(),f("div",p5e,[Ye[14]||(Ye[14]=c("span",{class:"loading-spinner w-4 h-4 mr-2"},null,-1)),be(" "+v(I(o)("KANBAN.LOADING")),1)])):g.value.length===0?(m(),f("div",h5e,[c("p",f5e,v(I(o)("KANBAN.FORM.NOTES.NO_CONTACTS")),1)])):(m(),f("div",g5e,[(m(!0),f(pe,null,ye(g.value,ze=>(m(),f("button",{key:ze.id,class:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:bg-slate-50 dark:focus:bg-slate-700",onClick:Rt=>Le(ze)},[c("div",v5e,[c("div",{class:"cursor-pointer",onClick:dt},[ze.avatar_url?(m(),P(yn,{key:0,src:ze.avatar_url,name:ze.name,size:24},null,8,["src","name"])):x("",!0)]),c("div",b5e,[c("h3",{class:"text-sm font-medium text-slate-900 dark:text-slate-100 cursor-pointer hover:text-woot-500 dark:hover:text-woot-400",onClick:dt},v(ze.name),1)])]),ze.phone||ze.last_activity_at?(m(),f("div",E5e,[ze.phone?(m(),f("span",T5e,[b(Xe,{icon:"call",size:"12"}),be(" "+v(ze.phone),1)])):x("",!0),ze.last_activity_at?(m(),f("span",y5e,[b(Xe,{icon:"alarm",size:"12"}),be(" "+v(I(o)("KANBAN.FORM.NOTES.LAST_ACTIVITY"))+": "+v(ze.last_activity_at),1)])):x("",!0)])):x("",!0)],8,_5e))),128))]))])])):x("",!0),c("div",A5e,[(m(!0),f(pe,null,ye(te.value,ze=>(m(),f("div",{key:ze.id,class:"note-card"},[c("div",S5e,[c("div",I5e,[c("div",C5e,[c("div",N5e,v(ze.text),1),c("div",O5e,[c("button",{class:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",onClick:Rt=>Se(ze)},[c("span",w5e,[b(Xe,{icon:"edit",size:"16"})])],8,x5e),c("button",{class:"p-1 text-slate-400 hover:text-ruby-600 dark:hover:text-ruby-400",onClick:Rt=>Ge(ze.id)},[c("span",$5e,[b(Xe,{icon:"delete",size:"16"})])],8,R5e)])]),c("div",M5e,[c("div",k5e,[b(yn,{name:ze.author,src:ze.author_avatar,size:20},null,8,["name","src"]),c("span",L5e,v(ze.author),1)]),c("span",D5e,v(me(ze.created_at||new Date)),1)]),Qe(ze)?(m(),f("div",P5e,[(m(!0),f(pe,null,ye(ft(ze),Rt=>(m(),f("div",{key:Rt.id,class:"file-attachment"},[c("div",B5e,[c("span",F5e,v(Q(Rt)),1),c("a",{href:Rt.url,target:"_blank",class:"file-name",title:Rt.filename},v(Rt.filename),9,U5e)]),c("button",{class:"file-action",onClick:Tn=>ve(Rt)},[b(Xe,{icon:"delete",size:"12"})],8,G5e)]))),128))])):x("",!0)]),Ze(ze)?(m(),f("div",V5e,[(m(!0),f(pe,null,ye(kt(ze),Rt=>(m(),f("div",{key:Rt.id,class:"image-preview"},[c("img",{src:Rt.url,alt:Rt.filename,class:"preview-image",onClick:Tn=>Be.openImagePreview(Rt.url)},null,8,H5e)]))),128))])):x("",!0)])]))),128))])])):x("",!0),C.value==="checklist"?(m(),f("div",K5e,[c("div",z5e,[c("div",W5e,[c("span",j5e,v(I(o)("KANBAN.FORM.CHECKLIST.PROGRESS")),1),c("span",Y5e,v(B.value)+"/"+v(K.value)+" "+v(I(o)("KANBAN.FORM.CHECKLIST.ITEMS")),1)]),c("div",X5e,[c("button",{class:"text-sm text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-400",onClick:Ye[1]||(Ye[1]=ze=>N.value=!N.value)},v(I(o)("KANBAN.FORM.CHECKLIST.HIDE_COMPLETED")),1),c("button",{class:"text-sm text-ruby-600 hover:text-ruby-700 dark:text-ruby-400 dark:hover:text-ruby-300",onClick:J},v(I(o)("DELETE")),1)])]),c("div",q5e,[c("div",{class:"h-full bg-woot-500 transition-all duration-300 ease-out",style:At({width:`${H.value}%`})},null,4)]),$.value.length>0?(m(),f("div",Z5e,[(m(!0),f(pe,null,ye(M.value,ze=>{var Rt,Tn;return m(),f("div",{key:ze.id,class:"group flex items-center gap-3 p-2 hover:bg-slate-50/50 dark:hover:bg-slate-800/50 rounded-lg transition-colors duration-200"},[c("label",Q5e,[c("input",{type:"checkbox",checked:ze.completed,class:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-slate-300 dark:border-slate-600 checked:border-woot-500 dark:checked:border-woot-500 checked:bg-woot-500 dark:checked:bg-woot-500 transition-all duration-200",onChange:ot=>ge(ze)},null,40,J5e),b(Xe,{icon:"checkmark",size:"12",class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200"})]),c("div",ePe,[c("span",{class:re([{"line-through text-slate-400 dark:text-slate-500":ze.completed,"text-slate-700 dark:text-slate-300":!ze.completed},"text-sm transition-colors duration-200"])},v(ze.text),3),ze.linked_item_id?(m(),f("div",tPe,[b(Xe,{icon:"link",size:"10"}),c("span",nPe,v(((Rt=Me(ze.linked_item_id))==null?void 0:Rt.title)||I(o)("KANBAN.FORM.NOTES.ITEM_NOT_FOUND")),1)])):x("",!0),ze.linked_conversation_id?(m(),f("div",sPe,[b(Xe,{icon:"chat",size:"10"}),c("span",aPe," #"+v(ze.linked_conversation_id),1)])):x("",!0),ze.linked_contact_id?(m(),f("div",oPe,[b(Xe,{icon:"scan-person",size:"10"}),c("span",iPe,v(((Tn=g.value.value.find(ot=>ot.id===ze.linked_contact_id))==null?void 0:Tn.name)||I(o)("KANBAN.FORM.NOTES.CONTACT_NOT_FOUND")),1)])):x("",!0)]),c("button",{class:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-woot-500 dark:text-slate-500 dark:hover:text-woot-400 transition-all duration-200",onClick:ot=>_e(ze)},[b(Xe,{icon:"edit",size:"14"})],8,lPe),c("button",{class:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-ruby-500 dark:text-slate-500 dark:hover:text-ruby-400 transition-all duration-200",onClick:ot=>Ee(ze)},[b(Xe,{icon:"dismiss",size:"14"})],8,rPe)])}),128))])):x("",!0),c("div",cPe,[c("div",dPe,[ie(c("input",{"onUpdate:modelValue":Ye[2]||(Ye[2]=ze=>O.value=ze),type:"text",class:"flex-1 h-10 px-3 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",placeholder:I(o)("KANBAN.FORM.CHECKLIST.ADD_ITEM"),onKeyup:Ye[3]||(Ye[3]=Fn(ze=>R.value?Ie():we(),["enter"]))},null,40,uPe),[[at,O.value]]),c("div",mPe,[R.value?(m(),f("button",{key:0,class:"text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",onClick:Pe},v(I(o)("KANBAN.CANCEL")),1)):x("",!0),c("button",{class:"relative inline-flex items-center h-10 px-4 text-sm font-medium text-white bg-woot-500 hover:bg-woot-600 dark:bg-woot-600 dark:hover:bg-woot-700 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!O.value.trim(),onClick:Ye[4]||(Ye[4]=ze=>R.value?Ie():we())},[b(Xe,{icon:R.value?"checkmark":"add-circle",class:"mr-1.5",size:"14"},null,8,["icon"]),be(" "+v(R.value?I(o)("SAVE"):I(o)("ADD")),1)],8,pPe)])])])])):x("",!0),C.value==="attachments"?(m(),f("div",hPe,[c("div",fPe,[b(I(au),{ref:"uploadItem",accept:I(eu),onInputFile:We},{default:j(()=>[c("button",{class:"primary-button flex items-center gap-2",disabled:De.value},[b(Xe,{icon:"attach",size:"16"}),be(" "+v(I(o)("KANBAN.ITEM_DETAILS.ATTACHMENTS.ADD_FILE"))+" ",1),De.value?(m(),f("span",_Pe,"...")):x("",!0)],8,gPe)]),_:1},8,["accept"])]),c("div",vPe,[Oe.value.some(je)?(m(),f("div",bPe,[c("h4",EPe,v(I(o)("KANBAN.ITEM_DETAILS.ATTACHMENTS.IMAGES")),1),c("div",TPe,[(m(!0),f(pe,null,ye(Oe.value.filter(je),ze=>(m(),f("div",{key:ze.id,class:"image-card"},[c("img",{src:ze.url,alt:ze.filename,class:"attachment-preview",onClick:Rt=>Be.openImagePreview(ze.url)},null,8,yPe),c("div",APe,[c("div",SPe,[c("span",IPe,v(ze.filename),1),c("span",CPe,v(ze.source.type==="note"?`Nota: ${ze.source.text}`:"Anexo do item"),1)]),c("button",{class:"delete-button",onClick:Rt=>ve(ze)},[b(Xe,{icon:"delete",size:"12"})],8,NPe)])]))),128))])])):x("",!0),Oe.value.some(ze=>!je(ze))?(m(),f("div",OPe,[c("h4",xPe,v(I(o)("KANBAN.ITEM_DETAILS.ATTACHMENTS.FILES")),1),c("div",wPe,[(m(!0),f(pe,null,ye(Oe.value.filter(ze=>!je(ze)),ze=>(m(),f("div",{key:ze.id,class:"file-card"},[c("div",RPe,[c("span",$Pe,v(Q(ze)),1),c("div",MPe,[c("a",{href:ze.url,target:"_blank",class:"file-name",title:ze.filename},v(ze.filename),9,kPe),c("span",LPe,v(ze.source.type==="note"?`Nota: ${ze.source.text}`:"Anexo do item"),1)])]),c("button",{class:"delete-button",onClick:Rt=>ve(ze)},[b(Xe,{icon:"delete",size:"12"})],8,DPe)]))),128))])])):x("",!0)])])):x("",!0),C.value==="history"?(m(),f("div",PPe,[c("div",BPe,[c("button",{class:"text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",onClick:Ye[5]||(Ye[5]=ze=>rt.value=!rt.value)},v(rt.value?I(o)("KANBAN.DEBUG.HIDE"):I(o)(" KANBAN.DEBUG.SHOW")),1)]),rt.value?(m(),f("div",FPe,[c("pre",UPe,v(JSON.stringify((pt=n.item.item_details)==null?void 0:pt.activities,null,2)),1)])):x("",!0),mt.value.length===0?(m(),f("div",GPe,[c("p",VPe,v(I(o)("KANBAN.HISTORY.NO_ACTIVITY")),1)])):(m(),f("div",HPe,[(m(!0),f(pe,null,ye(mt.value,(ze,Rt)=>(m(),f("div",{key:ze.id,class:"history-item"},[c("div",KPe,[c("div",zPe,[b(Xe,{icon:ze.icon,size:"16"},null,8,["icon"])])]),c("div",WPe,[c("div",jPe,[c("div",YPe,[c("span",XPe,v(ze.title),1)]),c("span",qPe,v(me(ze.created_at)),1)]),c("div",ZPe,[c("p",QPe,v(ze.details),1)]),c("div",JPe,[ze.user?(m(),P(yn,{key:0,name:ze.user.name,src:ze.user.avatar_url,size:20},null,8,["name","src"])):x("",!0),c("span",e6e,v(ze.user?ze.user.name:I(o)("SYSTEM")),1)])])]))),128))]))])):x("",!0),C.value==="custom_fields"?(m(),f("div",t6e,[c("div",n6e,[c("div",s6e,[c("div",a6e,[b(Xe,{icon:"edit",size:"20",class:"text-woot-500"})]),c("div",null,[c("h3",o6e,v(I(o)("KANBAN.CUSTOM_FIELDS.TITLE")),1),c("p",i6e,v(I(o)("KANBAN.CUSTOM_FIELDS.CONVERSATION_ATTRIBUTES"))+v((Et=n.item.item_details)==null?void 0:Et.conversation_id),1)])])]),L.value.length>0?(m(),f("div",l6e,[(m(!0),f(pe,null,ye(L.value,ze=>(m(),f("div",{key:ze.attribute_key,class:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 hover:shadow-sm transition-shadow"},[c("div",r6e,[c("div",c6e,[c("h4",d6e,v(ze.attribute_display_name),1),c("p",u6e,v(ze.attribute_description),1)]),c("span",{class:re(["px-2 py-1 text-xs rounded-full",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-400":ee.value[ze.attribute_key],"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400":!ee.value[ze.attribute_key]}])},v(ze.attribute_input_type),3)]),c("div",m6e,[c("div",p6e,[c("span",h6e,v(ee.value[ze.attribute_key]||I(o)("KANBAN.CUSTOM_FIELDS.NOT_FILLED")),1)])])]))),128))])):(m(),f("div",f6e,[c("div",g6e,[b(Xe,{icon:"form",size:"24",class:"text-slate-400"})]),c("h3",_6e,v(I(o)("KANBAN.CUSTOM_FIELDS.NO_CUSTOM_FIELDS")),1),c("p",v6e,v(I(o)("KANBAN.CUSTOM_FIELDS.NO_CUSTOM_FIELDS_DESCRIPTION")),1)]))])):x("",!0)])])]),c("div",b6e,[b(PDe,{onQuickAction:pn}),b(wDe,{item:n.item,notes:te.value,"checklist-items":$.value,attachments:Oe.value},null,8,["item","notes","checklist-items","attachments"])])]),vt.value?(m(),P(Wt,{key:0,show:vt.value,onClose:Ye[9]||(Ye[9]=ze=>vt.value=!1)},{default:j(()=>[c("div",E6e,[c("h3",T6e,v(I(o)("KANBAN.BULK_ACTIONS.MOVE.TITLE")),1),c("div",y6e,[c("label",A6e,v(I(o)("KANBAN.FORM.FUNNEL.LABEL")),1),b($_,{modelValue:Ft.value.funnel_id,"onUpdate:modelValue":Ye[6]||(Ye[6]=ze=>Ft.value.funnel_id=ze),class:"h-10"},null,8,["modelValue"])]),c("div",S6e,[c("label",I6e,v(I(o)("KANBAN.FORM.STAGE.LABEL")),1),ie(c("select",{"onUpdate:modelValue":Ye[7]||(Ye[7]=ze=>Ft.value.funnel_stage=ze),class:"w-full h-10 px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},[(m(!0),f(pe,null,ye(zt.value,ze=>(m(),f("option",{key:ze.id,value:ze.id},v(ze.name),9,C6e))),128))],512),[[Mt,Ft.value.funnel_stage]])]),c("div",N6e,[c("button",{class:"px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",onClick:Ye[8]||(Ye[8]=ze=>vt.value=!1)},v(I(o)("KANBAN.CANCEL")),1),c("button",{class:"px-4 py-2 text-sm text-white bg-woot-500 hover:bg-woot-600 rounded-lg transition-colors",onClick:un},v(I(o)("KANBAN.MOVE")),1)])])]),_:1},8,["show"])):x("",!0),b(Wt,{show:bt.value,"onUpdate:show":Ye[11]||(Ye[11]=ze=>bt.value=ze),"on-close":()=>bt.value=!1,"show-close-button":!0,size:"medium","close-on-backdrop-click":!1,class:re({"z-50":bt.value})},{default:j(()=>{var ze,Rt,Tn,ot;return[c("div",O6e,[c("header",x6e,[c("h3",w6e,v(I(o)("KANBAN.SEND_MESSAGE.TITLE")),1)]),c("div",R6e,[b(A2,{"conversation-id":(ze=n.item.item_details)==null?void 0:ze.conversation_id,"current-stage":n.item.funnel_stage||"",contact:(Tn=(Rt=n.item.item_details)==null?void 0:Rt.conversation)==null?void 0:Tn.contact,conversation:(ot=n.item.item_details)==null?void 0:ot.conversation,item:n.item,onClose:Ye[10]||(Ye[10]=()=>bt.value=!1),onSend:Vt},null,8,["conversation-id","current-stage","contact","conversation","item"])])])]}),_:1},8,["show","on-close","class"])],64)}}},xm=Re($6e,[["__scopeId","data-v-189f0f66"]]),M6e={class:"p-4"},k6e={key:0,class:"flex flex-col gap-4"},L6e={class:"flex flex-col gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},D6e={class:"flex items-center justify-between"},P6e={class:"flex items-center justify-between"},B6e={class:"text-xs font-medium"},F6e={class:"flex flex-col gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-woot-500/50 dark:border-woot-400/50"},U6e={key:0,class:"flex items-center justify-between"},G6e={class:"text-sm font-semibold text-slate-700 dark:text-slate-200"},V6e={class:"flex items-center justify-between"},H6e={key:1,class:"flex flex-col gap-2"},K6e={key:0,class:"flex items-center justify-between"},z6e={class:"text-sm text-slate-700 dark:text-slate-200"},W6e={key:1,class:"flex items-center justify-between"},j6e={class:"text-sm text-slate-700 dark:text-slate-200"},Y6e={key:0,class:"flex flex-col gap-3"},X6e={class:"flex flex-col gap-3"},q6e={class:"flex items-center gap-2 mb-2"},Z6e={class:"text-xs font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded"},Q6e={class:"text-xs text-slate-500"},J6e={class:"text-sm text-slate-700 dark:text-slate-200 whitespace-pre-wrap"},eBe={class:"flex justify-center gap-2 mt-2"},tBe={key:1,class:"flex flex-col items-center justify-center gap-4 text-center p-6 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},nBe={class:"p-6"},sBe={class:"text-lg font-medium mb-4 flex items-center gap-2"},aBe={__name:"KanbanActions",props:{conversationId:{type:[Number,String],required:!0}},emits:[],setup(e,{emit:t}){const n=e,s=hn(),o=U(null),a=U([]),i=U(!1),l=U(null),r=U(!1),d=U(null),u=U([]),p=w(()=>s.getters.getSelectedChat),h=w(()=>{var G,V,Y;return((Y=(V=(G=p.value)==null?void 0:G.meta)==null?void 0:V.sender)==null?void 0:Y.name)||"Sem nome"}),g=w(()=>p.value?{id:p.value.id,meta:p.value.meta,messages:p.value.messages||[]}:null);lt(()=>n.conversationId,async(G,V)=>{console.log(`[ACTIONS-VUE-DEBUG] Watch conversationId: ${V} -> ${G}`),G&&G!==V&&await C()});const _=w(()=>{const G=l.value||o.value;return!(G!=null&&G.funnel_id)||!a.value.length?null:a.value.find(V=>V.id===G.funnel_id)}),T=w(()=>{var Y;const G=l.value||o.value;if(!G||!((Y=_.value)!=null&&Y.stages))return null;const V=_.value.stages[G.funnel_stage];return(V==null?void 0:V.name)||G.funnel_stage}),S=w(()=>{var Y;const G=l.value||o.value;if(!G||!((Y=_.value)!=null&&Y.stages))return{};const V=_.value.stages[G.funnel_stage];return V!=null&&V.color?{backgroundColor:`${V.color}20`,color:V.color}:{}}),E=w(()=>({backgroundColor:"#64748B20",color:"#64748B"})),y=w(()=>{var Y,ee,X,z,W,q,Z;if(o.value)return{...o.value,description:((Y=o.value.item_details)==null?void 0:Y.description)||"",item_details:{...o.value.item_details,description:((ee=o.value.item_details)==null?void 0:ee.description)||"",_agent:(X=o.value.item_details)!=null&&X.agent_id?u.value.find(ne=>ne.id===o.value.item_details.agent_id):null},_conversation:g.value};const G=(W=(z=p.value)==null?void 0:z.meta)==null?void 0:W.assignee,V=((q=p.value)==null?void 0:q.priority)||"none";return{title:h.value,description:"",funnel_id:(Z=a.value[0])==null?void 0:Z.id,funnel_stage:"lead",item_details:{title:h.value,description:"",conversation_id:n.conversationId,agent_id:(G==null?void 0:G.id)||null,_agent:G,priority:V},_conversation:g.value}}),A=async()=>{try{const G=await Js.get();a.value=G.data}catch(G){console.error("Erro ao buscar funis:",G)}},C=async()=>{console.log("[ACTIONS-VUE-DEBUG] fetchKanbanItem chamado."),console.log("[ACTIONS-VUE-DEBUG] fetchKanbanItem - props.conversationId:",n.conversationId,`(Tipo: ${typeof n.conversationId})`);try{if(!n.conversationId){console.log("[ACTIONS-VUE-DEBUG] fetchKanbanItem - Sem conversationId, retornando."),o.value=null;return}const G=await In.getItemByConversationId(n.conversationId);if(console.log("[ACTIONS-VUE-DEBUG] fetchKanbanItem - Resposta da API:",JSON.stringify(G.data)),!Array.isArray(G.data)){console.error("[ACTIONS-VUE-DEBUG] fetchKanbanItem - Resposta da API no  um array:",G.data),o.value=null;return}console.log(`[ACTIONS-VUE-DEBUG] fetchKanbanItem - Procurando por conversation_id: ${n.conversationId} (Tipo: ${typeof n.conversationId})`);const V=G.data.find(Y=>{var z;const ee=Y==null?void 0:Y.conversation_display_id,X=(z=Y==null?void 0:Y.item_details)==null?void 0:z.conversation_id;return console.log(`[ACTIONS-VUE-DEBUG] fetchKanbanItem - Verificando item ID: ${Y==null?void 0:Y.id}, display_id: ${ee} (Tipo: ${typeof ee}), details_conv_id: ${X} (Tipo: ${typeof X})`),console.log(`[ACTIONS-VUE-DEBUG] fetchKanbanItem - Comparando display_id: ${ee} (${typeof ee}) === ${n.conversationId} (${typeof n.conversationId}) -> Resultado: ${String(ee)===String(n.conversationId)}`),String(ee)===String(n.conversationId)});console.log("[ACTIONS-VUE-DEBUG] fetchKanbanItem - Item encontrado:",V?JSON.stringify(V):"Nenhum"),o.value=V||null,console.log("[ACTIONS-VUE-DEBUG] fetchKanbanItem - kanbanItem.value definido como:",o.value?JSON.stringify(o.value):"null")}catch(G){console.error("[ACTIONS-VUE-DEBUG] Erro ao buscar item do Kanban:",G),o.value=null}},O=async G=>{var V,Y,ee;console.log("[ACTIONS-VUE-DEBUG] handleKanbanFormSave chamado com item:",G);try{if(G&&(console.log("[ACTIONS-VUE-DEBUG] handleKanbanFormSave - Atualizando kanbanItem.value localmente ANTES de fetch."),o.value={...G,item_details:{...G.item_details,_agent:(V=G.item_details)!=null&&V.agent_id?u.value.find(X=>X.id===G.item_details.agent_id):(ee=(Y=o.value)==null?void 0:Y.item_details)==null?void 0:ee._agent,conversation:g.value}}),i.value=!1,l.value=null,p.value&&o.value){const X={...p.value,kanban_items:[o.value]};s.commit("UPDATE_CONVERSATION",X)}yt.emit("kanban.item.updated")}catch(X){console.error("Erro ao salvar item:",X),yt.emit("newToastMessage",{message:"Erro ao salvar alteraes",type:"error"})}},N=async()=>{try{const{data:G}=await Bu.get();u.value=G,console.log("[ACTIONS-VUE-DEBUG] fetchAgents - Agentes carregados:",u.value.length)}catch{}};ut(async()=>{console.log("[ACTIONS-VUE-DEBUG] Componente KanbanActions montado."),await Promise.all([A(),N(),C()]),console.log("[ACTIONS-VUE-DEBUG] onMounted - Fetches iniciais concludos."),console.log("[ACTIONS-VUE-DEBUG] onMounted - kanbanItem.value inicial:",o.value)});const R=w(()=>{var Y,ee;const G=(ee=(Y=o.value)==null?void 0:Y.item_details)==null?void 0:ee.priority,V={low:"Baixa",medium:"Mdia",high:"Alta",urgent:"Urgente",none:"Nenhuma"};return V[G]||V.none}),k=w(()=>{var ee,X;const G=(X=(ee=o.value)==null?void 0:ee.item_details)==null?void 0:X.priority,V={low:"#10B981",medium:"#F59E0B",high:"#EF4444",urgent:"#7C3AED",none:"#64748B"},Y=V[G]||V.none;return{backgroundColor:`${Y}20`,color:Y}}),L=w(()=>{var G,V,Y,ee;return!!((V=(G=o.value)==null?void 0:G.item_details)!=null&&V.deadline_at||(ee=(Y=o.value)==null?void 0:Y.item_details)!=null&&ee.scheduled_at)}),D=(G,V)=>G?new Intl.NumberFormat((V==null?void 0:V.locale)||"pt-BR",{style:"currency",currency:(V==null?void 0:V.code)||"BRL"}).format(G):"-",$=G=>G?Ln(new Date(G),"dd/MM/yyyy",{locale:Ai}):"-",M=G=>G?Ln(new Date(G),"dd/MM/yyyy 's' HH:mm",{locale:Ai}):"-",K=G=>G?Nc(new Date(G),{locale:Ai,addSuffix:!0}):"",B=G=>{var Y,ee,X,z;const V={...G,title:((Y=G.item_details)==null?void 0:Y.title)||h.value,description:((ee=G.item_details)==null?void 0:ee.description)||"",priority:((X=G.item_details)==null?void 0:X.priority)||"none",funnel_stage:G.funnel_stage,item_details:{...G.item_details,priority:((z=G.item_details)==null?void 0:z.priority)||"none"}};d.value=V,r.value=!0},H=async()=>{console.log("[ACTIONS-VUE-DEBUG] handleDetailsUpdate chamado (modal de detalhes fechado). Chamando fetchKanbanItem."),await C(),console.log("[ACTIONS-VUE-DEBUG] handleDetailsUpdate - kanbanItem.value APS fetch:",o.value)};return(G,V)=>{var ee;const Y=F("fluent-icon");return m(),f("div",M6e,[o.value&&_.value?(m(),f("div",k6e,[c("div",L6e,[c("div",D6e,[V[9]||(V[9]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Funil:",-1)),c("span",{class:"text-xs font-medium px-3 py-1 rounded-full",style:At(E.value)},v(_.value.name),5)]),c("div",P6e,[V[10]||(V[10]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Etapa:",-1)),c("span",{class:"text-xs font-medium px-3 py-1 rounded-full",style:At(S.value)},v(T.value),5)]),o.value.stage_entered_at?(m(),f("div",{key:0,class:"flex items-center justify-between mt-1 py-2 px-3 rounded text-white",style:At(S.value)},[V[11]||(V[11]=c("span",{class:"text-xs"}," Tempo na etapa ",-1)),c("span",B6e,v(K(o.value.stage_entered_at)),1)],4)):x("",!0)]),c("div",F6e,[o.value.item_details.value?(m(),f("div",U6e,[V[12]||(V[12]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Valor:",-1)),c("span",G6e,v(D(o.value.item_details.value,o.value.item_details.currency)),1)])):x("",!0),c("div",V6e,[V[13]||(V[13]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Prioridade:",-1)),c("span",{class:"text-xs font-medium px-3 py-1 rounded-full",style:At(k.value)},v(R.value),5)]),L.value?(m(),f("div",H6e,[o.value.item_details.deadline_at?(m(),f("div",K6e,[V[14]||(V[14]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium flex items-center gap-1"},[c("i",{class:"icon-calendar-clock text-base align-text-bottom"}),be(" Prazo: ")],-1)),c("span",z6e,v($(o.value.item_details.deadline_at)),1)])):x("",!0),o.value.item_details.scheduled_at?(m(),f("div",W6e,[V[15]||(V[15]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium flex items-center gap-1"},[c("i",{class:"icon-calendar text-base align-text-bottom"}),be(" Agendado: ")],-1)),c("span",j6e,v(M(o.value.item_details.scheduled_at)),1)])):x("",!0)])):x("",!0)]),(ee=o.value.item_details.notes)!=null&&ee.length?(m(),f("div",Y6e,[V[16]||(V[16]=c("div",{class:"flex items-center gap-2"},[c("i",{class:"icon-message-square text-slate-600 dark:text-slate-400"}),c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Notas")],-1)),c("div",X6e,[(m(!0),f(pe,null,ye(o.value.item_details.notes,X=>(m(),f("div",{key:X.id,class:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-100 dark:border-slate-700 shadow-sm"},[c("div",q6e,[c("span",Z6e,v(X.author),1),c("span",Q6e,v(M(X.created_at)),1)]),c("p",J6e,v(X.text),1)]))),128))])])):x("",!0),c("div",eBe,[b(he,{variant:"outline",color:"slate",size:"sm",class:"w-full sm:w-auto",onClick:V[0]||(V[0]=X=>i.value=!0)},{icon:j(()=>[b(Y,{icon:"edit",size:"16"})]),default:j(()=>[V[17]||(V[17]=be(" Atualizar Funil "))]),_:1}),b(he,{variant:"solid",color:"blue",size:"sm",class:"w-full sm:w-auto",onClick:V[1]||(V[1]=X=>B(o.value))},{icon:j(()=>[b(Y,{icon:"info",size:"16"})]),default:j(()=>[V[18]||(V[18]=be(" Ver Detalhes "))]),_:1})])])):(m(),f("div",tBe,[V[20]||(V[20]=c("i",{class:"icon-funnel text-3xl text-slate-400 dark:text-slate-500"},null,-1)),V[21]||(V[21]=c("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Nenhum item do Kanban associado ",-1)),b(he,{variant:"solid",color:"blue",size:"sm",onClick:V[2]||(V[2]=X=>i.value=!0)},{icon:j(()=>[b(Y,{icon:"add",size:"16"})]),default:j(()=>[V[19]||(V[19]=be(" Definir Funil "))]),_:1})])),b(Wt,{show:i.value,"onUpdate:show":V[5]||(V[5]=X=>i.value=X),size:"full-width","on-close":()=>{i.value=!1,l.value.value=null}},{default:j(()=>[c("div",nBe,[c("h3",sBe,[V[22]||(V[22]=c("i",{class:"icon-funnel text-slate-600 dark:text-slate-400"},null,-1)),be(" "+v(o.value?"Editar Item do Kanban":"Criar Item do Kanban"),1)]),a.value[0]?(m(),P(ul,{key:0,"funnel-id":y.value.funnel_id||a.value[0].id,stage:y.value.funnel_stage||"lead","initial-data":y.value,"is-editing":!!o.value,"current-conversation":g.value,onSaved:O,onClose:V[3]||(V[3]=X=>i.value=!1),"onUpdate:preview":V[4]||(V[4]=X=>l.value.value=X)},null,8,["funnel-id","stage","initial-data","is-editing","current-conversation"])):x("",!0)])]),_:1},8,["show","on-close"]),b(Wt,{show:r.value,"onUpdate:show":V[8]||(V[8]=X=>r.value=X),size:"full-width","on-close":()=>{r.value=!1,d.value.value=null,H()}},{default:j(()=>[d.value?(m(),P(xm,{key:0,item:d.value,onClose:V[6]||(V[6]=()=>{r.value=!1,d.value.value=null,H()}),onEdit:V[7]||(V[7]=()=>{r.value=!1,i.value=!0}),onItemUpdated:H},null,8,["item"])):x("",!0)]),_:1},8,["show","on-close"])])}}};class oBe extends Xo{constructor(){super("integrations/shopify",{accountScoped:!0})}getOrders(t){return axios.get(`${this.url}/orders`,{params:{contact_id:t}})}}const iBe=new oBe,lBe={class:"py-3 border-b border-n-weak last:border-b-0 flex flex-col gap-1.5"},rBe={class:"flex justify-between items-center"},cBe={class:"font-medium flex"},dBe=["href"],uBe=["title"],mBe={class:"text-sm text-n-slate-12"},pBe={class:"text-n-slate-11 border-r border-n-weak pr-2"},hBe={class:"text-n-slate-11 pl-2"},fBe={key:0},gBe=["title"],_Be={__name:"ShopifyOrderItem",props:{order:{type:Object,required:!0}},setup(e){const t=e,{t:n}=He(),s=u=>Ln(new Date(u),"MMM d, yyyy"),o=(u,p)=>new Intl.NumberFormat("en",{style:"currency",currency:p||"USD"}).format(u),a=u=>({paid:"bg-n-teal-5 text-n-teal-12"})[u]||"bg-slate-50 text-slate-700",i=(u,p="")=>`CONVERSATION_SIDEBAR.SHOPIFY.${u.toUpperCase()}_STATUS.${p.toUpperCase()}`,l=w(()=>{const{fulfillment_status:u}=t.order;return u?n(i("FULFILLMENT",u)):""}),r=w(()=>{const{financial_status:u}=t.order;return u?n(i("FINANCIAL",u)):""}),d=u=>({fulfilled:"text-green-600",partial:"text-yellow-600",unfulfilled:"text-red-600"})[u]||"text-slate-600";return(u,p)=>(m(),f("div",lBe,[c("div",rBe,[c("div",cBe,[c("a",{href:e.order.admin_url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline text-n-slate-12 cursor-pointer truncate"},[be(v(u.$t("CONVERSATION_SIDEBAR.SHOPIFY.ORDER_ID",{id:e.order.id}))+" ",1),p[0]||(p[0]=c("i",{class:"i-lucide-external-link pl-5"},null,-1))],8,dBe)]),c("div",{class:re([a(e.order.financial_status),"text-xs px-2 py-1 rounded capitalize truncate"]),title:r.value},v(r.value),11,uBe)]),c("div",mBe,[c("span",pBe,v(s(e.order.created_at)),1),c("span",hBe,v(o(e.order.total_price,e.order.currency)),1)]),l.value?(m(),f("div",fBe,[c("span",{class:re([d(e.order.fulfillment_status),"capitalize font-medium"]),title:l.value},v(l.value),11,gBe)])):x("",!0)]))}},vBe={class:"px-4 py-2 text-n-slate-12"},bBe={key:0,class:"text-center text-n-slate-12"},EBe={key:1,class:"flex justify-center items-center p-4"},TBe={key:2,class:"text-center text-n-ruby-12"},yBe={key:3,class:"text-center text-n-slate-12"},ABe={key:4},SBe={__name:"ShopifyOrdersList",props:{contactId:{type:[Number,String],required:!0}},setup(e){const t=e,n=La("contacts/getContact",t.contactId),s=w(()=>{var r,d;return!!((r=n.value)!=null&&r.email)||!!((d=n.value)!=null&&d.phone_number)}),o=U([]),a=U(!0),i=U(""),l=async()=>{var r,d;try{a.value=!0;const u=await iBe.getOrders(t.contactId);o.value=u.data.orders}catch(u){i.value=((d=(r=u.response)==null?void 0:r.data)==null?void 0:d.error)||"CONVERSATION_SIDEBAR.SHOPIFY.ERROR"}finally{a.value=!1}};return lt(()=>t.contactId,()=>{s.value&&l()},{immediate:!0}),(r,d)=>(m(),f("div",vBe,[s.value?a.value?(m(),f("div",EBe,[b(Gs,{size:"32",class:"text-n-brand"})])):i.value?(m(),f("div",TBe,v(i.value),1)):o.value.length?(m(),f("div",ABe,[(m(!0),f(pe,null,ye(o.value,u=>(m(),P(_Be,{key:u.id,order:u},null,8,["order"]))),128))])):(m(),f("div",yBe,v(r.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1)):(m(),f("div",bBe,v(r.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1))]))}},IBe={class:"w-full"},CBe={class:"list-group pb-8"},NBe={key:0,class:"conversation--actions"},OBe={key:1,class:"conversation--actions"},xBe={key:2},wBe={key:3},RBe={key:4},$Be={key:6},MBe={key:7},kBe={__name:"ContactPanel",props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0},onToggle:{type:Function,default:()=>{}}},setup(e){const t=e,{updateUISettings:n,isContactSidebarItemOpen:s,conversationSidebarItemsOrder:o,toggleSidebarUIState:a}=Mn(),i=U(!1),l=U([]),r=La("integrations/getIntegration","shopify"),d=w(()=>r.value.enabled),u=Ot(),p=Ve("getSelectedChat"),h=w(()=>t.conversationId),g=Ve("conversationMetadata/getConversationMetadata"),_=w(()=>g.value(h.value)),T=w(()=>_.value.additional_attributes||{}),S=w(()=>{var k;return(k=p.value.meta)==null?void 0:k.channel}),E=Ve("contacts/getContact"),y=w(()=>{var k,L;return(L=(k=p.value.meta)==null?void 0:k.sender)==null?void 0:L.id}),A=w(()=>E.value(y.value)),C=w(()=>A.value.additional_attributes||{}),O=()=>{y.value&&u.dispatch("contacts/show",{id:y.value})};lt(h,(k,L)=>{k&&k!==L&&O()}),lt(y,O);const N=t.onToggle,R=()=>{i.value=!1,n({conversation_sidebar_items_order:l.value})};return ut(()=>{l.value=[...o.value];const k="kanban_panel",L={name:k,enabled:!0},D=l.value.findIndex($=>$.name===k);D!==-1&&l.value.splice(D,1),l.value.unshift(L),O(),u.dispatch("attributes/get",0)}),(k,L)=>{const D=F("woot-feature-toggle");return m(),f("div",IBe,[b(FMe,{contact:A.value,"channel-type":S.value,onTogglePanel:I(N)},null,8,["contact","channel-type","onTogglePanel"]),c("div",CBe,[b(I(lr),{list:l.value,animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"name",class:"flex flex-col gap-3",onStart:L[8]||(L[8]=$=>i.value=!0),onEnd:R},{item:j(({element:$})=>[(m(),f("div",{key:$.name,class:"px-2"},[$.name==="conversation_actions"?(m(),f("div",NBe,[b(ai,{title:k.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_ACTIONS"),"is-open":I(s)("is_conv_actions_open"),onToggle:L[0]||(L[0]=M=>I(a)("is_conv_actions_open",M))},{default:j(()=>[b(hwe,{"conversation-id":h.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):$.name==="conversation_participants"?(m(),f("div",OBe,[b(ai,{title:k.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_TITLE"),"is-open":I(s)("is_conv_participants_open"),onToggle:L[1]||(L[1]=M=>I(a)("is_conv_participants_open",M))},{default:j(()=>[b(Rwe,{"conversation-id":h.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):$.name==="conversation_info"?(m(),f("div",xBe,[b(ai,{title:k.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_INFO"),"is-open":I(s)("is_conv_details_open"),compact:"",onToggle:L[2]||(L[2]=M=>I(a)("is_conv_details_open",M))},{default:j(()=>[b(h3e,{"conversation-attributes":T.value,"contact-attributes":C.value},null,8,["conversation-attributes","contact-attributes"])]),_:1},8,["title","is-open"])])):$.name==="contact_attributes"?(m(),f("div",wBe,[b(ai,{title:k.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":I(s)("is_contact_attributes_open"),compact:"",onToggle:L[3]||(L[3]=M=>I(a)("is_contact_attributes_open",M))},{default:j(()=>[b(y2,{"attribute-type":"contact_attribute","attribute-from":"conversation_contact_panel","contact-id":A.value.id,"empty-state-message":k.$t("CONVERSATION_CUSTOM_ATTRIBUTES.NO_RECORDS_FOUND")},null,8,["contact-id","empty-state-message"])]),_:1},8,["title","is-open"])])):$.name==="previous_conversation"?(m(),f("div",RBe,[A.value.id?(m(),P(ai,{key:0,title:k.$t("CONVERSATION_SIDEBAR.ACCORDION.PREVIOUS_CONVERSATION"),"is-open":I(s)("is_previous_conv_open"),compact:"",onToggle:L[4]||(L[4]=M=>I(a)("is_previous_conv_open",M))},{default:j(()=>[b(mxe,{"contact-id":A.value.id,"conversation-id":h.value},null,8,["contact-id","conversation-id"])]),_:1},8,["title","is-open"])):x("",!0)])):$.name==="macros"?(m(),P(D,{key:5,"feature-key":"macros"},{default:j(()=>[b(ai,{title:k.$t("CONVERSATION_SIDEBAR.ACCORDION.MACROS"),"is-open":I(s)("is_macro_open"),compact:"",onToggle:L[5]||(L[5]=M=>I(a)("is_macro_open",M))},{default:j(()=>[b(R3e,{"conversation-id":h.value},null,8,["conversation-id"])]),_:1},8,["title","is-open"])]),_:1})):$.name==="shopify_orders"&&d.value?(m(),f("div",$Be,[b(ai,{title:k.$t("CONVERSATION_SIDEBAR.ACCORDION.SHOPIFY_ORDERS"),"is-open":I(s)("is_shopify_orders_open"),compact:"",onToggle:L[6]||(L[6]=M=>I(a)("is_shopify_orders_open",M))},{default:j(()=>[b(SBe,{"contact-id":y.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):$.name==="kanban_panel"?(m(),f("div",MBe,[b(ai,{title:"Kanban","is-open":I(s)("is_kanban_panel_open"),compact:"",onToggle:L[7]||(L[7]=M=>I(a)("is_kanban_panel_open",M))},{default:j(()=>[b(aBe,{"conversation-id":h.value},null,8,["conversation-id"])]),_:1},8,["is-open"])])):x("",!0)]))]),_:1},8,["list"])])])}}},LBe=Re(kBe,[["__scopeId","data-v-034a1ef4"]]),DBe={class:"flex items-center h-8 rounded-lg bg-n-alpha-1 w-fit"},PBe=["onClick"],S2={__name:"TabBar",props:{initialActiveTab:{type:Number,default:0},tabs:{type:Array,required:!0,validator:e=>e.every(t=>typeof t.label=="string"&&(t.count?typeof t.count=="number":!0))}},emits:["tabChanged"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>n.initialActiveTab),a=l=>{s("tabChanged",n.tabs[l])},i=l=>l>o.value&&l<n.tabs.length-1||l<o.value-1&&l>-1;return(l,r)=>(m(),f("div",DBe,[(m(!0),f(pe,null,ye(e.tabs,(d,u)=>(m(),f(pe,{key:u},[c("button",{class:re(["relative px-4 truncate py-1.5 text-sm border-0 outline-1 outline rounded-lg transition-colors duration-300 ease-in-out hover:text-n-brand",[o.value===u?"text-n-blue-text bg-n-solid-active outline-n-container dark:outline-transparent":"text-n-slate-10 outline-transparent h-8"]]),onClick:p=>a(u)},v(d.label)+" "+v(d.count?`(${d.count})`:""),11,PBe),c("div",{class:re(["w-px h-3.5 rounded my-auto transition-colors duration-300 ease-in-out",i(u)?"bg-n-strong":"bg-transparent dark:bg-transparent"])},null,2)],64))),128))]))}},BBe={class:"ltr:border-l rtl:border-r border-n-weak h-full overflow-hidden z-10 w-80 min-w-80 2xl:min-w-96 2xl:w-96 flex flex-col bg-n-background"},FBe={key:0,class:"p-2"},UBe={class:"flex flex-1 overflow-auto"},GBe={__name:"ConversationSidebar",props:{currentChat:{required:!0,type:Object}},emits:["toggleContactPanel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=w(()=>{var _,T;return((T=(_=n.currentChat)==null?void 0:_.meta)==null?void 0:T.channel)||""}),i=[{key:"CONTACT",value:"contact"},{key:"COPILOT",value:"copilot"}],l=w(()=>i.map(_=>({label:o(`CONVERSATION.SIDEBAR.${_.key}`),value:_.value}))),r=U(0),d=()=>{s("toggleContactPanel")},u=_=>{r.value=l.value.findIndex(T=>T.value===_.value)},p=Ve("getCurrentAccountId"),h=Ve("accounts/isFeatureEnabledonAccount"),g=w(()=>h.value(p.value,xt.CAPTAIN));return(_,T)=>(m(),f("div",BBe,[g.value?(m(),f("div",FBe,[b(S2,{tabs:l.value,"initial-active-tab":r.value,class:"w-full [&>button]:w-full",onTabChanged:u},null,8,["tabs","initial-active-tab"])])):x("",!0),c("div",UBe,[r.value?r.value===1&&g.value?(m(),P(QOe,{key:e.currentChat.id,"conversation-inbox-type":a.value,"conversation-id":e.currentChat.id,class:"flex-1"},null,8,["conversation-inbox-type","conversation-id"])):x("",!0):(m(),P(LBe,{key:0,"conversation-id":e.currentChat.id,"inbox-id":e.currentChat.inbox_id,"on-toggle":d},null,8,["conversation-id","inbox-id"]))])]))}},VBe={components:{ConversationSidebar:GBe,ConversationHeader:C1e,DashboardAppFrame:R1e,EmptyState:rbe,MessagesView:gOe},props:{inboxId:{type:[Number,String],default:"",required:!1},isInboxView:{type:Boolean,default:!1},isContactPanelOpen:{type:Boolean,default:!0},isOnExpandedLayout:{type:Boolean,default:!0}},emits:["contactPanelToggle"],data(){return{activeIndex:0}},computed:{...gt({currentChat:"getSelectedChat",dashboardApps:"dashboardApps/getRecords"}),filteredDashboardApps(){return this.dashboardApps.filter(e=>e.show_in_navigation===!1)},dashboardAppTabs(){return[{key:"messages",index:0,name:this.$t("CONVERSATION.DASHBOARD_APP_TAB_MESSAGES")},...this.filteredDashboardApps.map((e,t)=>({key:`dashboard-${e.id}`,index:t+1,name:e.title}))]},showContactPanel(){return this.isContactPanelOpen&&this.currentChat.id}},watch:{"currentChat.inbox_id":{immediate:!0,handler(e){e&&this.$store.dispatch("inboxAssignableAgents/fetch",[e])}},"currentChat.id"(){this.fetchLabels(),this.activeIndex=0}},mounted(){this.fetchLabels(),this.$store.dispatch("dashboardApps/get")},methods:{fetchLabels(){this.currentChat.id&&this.$store.dispatch("conversationLabels/get",this.currentChat.id)},onToggleContactPanel(){this.$emit("contactPanelToggle")},onDashboardAppTabChange(e){this.activeIndex=e}}},HBe={class:"flex h-full min-h-0 m-0"};function KBe(e,t,n,s,o,a){const i=F("ConversationHeader"),l=F("woot-tabs-item"),r=F("woot-tabs"),d=F("MessagesView"),u=F("EmptyState"),p=F("ConversationSidebar"),h=F("DashboardAppFrame");return m(),f("div",{class:re(["conversation-details-wrap bg-n-background",{"border-l rtl:border-l-0 rtl:border-r border-n-weak":!n.isOnExpandedLayout}])},[e.currentChat.id?(m(),P(i,{key:0,chat:e.currentChat,"is-inbox-view":n.isInboxView,"is-contact-panel-open":n.isContactPanelOpen,"show-back-button":n.isOnExpandedLayout&&!n.isInboxView,onContactPanelToggle:a.onToggleContactPanel},null,8,["chat","is-inbox-view","is-contact-panel-open","show-back-button","onContactPanelToggle"])):x("",!0),a.filteredDashboardApps.length&&e.currentChat.id?(m(),P(r,{key:1,index:o.activeIndex,class:"-mt-px bg-white dashboard-app--tabs dark:bg-slate-900",onChange:a.onDashboardAppTabChange},{default:j(()=>[(m(!0),f(pe,null,ye(a.dashboardAppTabs,g=>(m(),P(l,{key:g.key,index:g.index,name:g.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])):x("",!0),ie(c("div",HBe,[e.currentChat.id?(m(),P(d,{key:0,"inbox-id":n.inboxId,"is-inbox-view":n.isInboxView,"is-contact-panel-open":n.isContactPanelOpen,onContactPanelToggle:a.onToggleContactPanel},null,8,["inbox-id","is-inbox-view","is-contact-panel-open","onContactPanelToggle"])):x("",!0),!e.currentChat.id&&!n.isInboxView?(m(),P(u,{key:1,"is-on-expanded-layout":n.isOnExpandedLayout},null,8,["is-on-expanded-layout"])):x("",!0),a.showContactPanel?(m(),P(p,{key:2,"current-chat":e.currentChat,onToggleContactPanel:a.onToggleContactPanel},null,8,["current-chat","onToggleContactPanel"])):x("",!0)],512),[[ln,!o.activeIndex]]),(m(!0),f(pe,null,ye(a.filteredDashboardApps,(g,_)=>ie((m(),P(h,{key:e.currentChat.id+"-"+g.id,"is-visible":o.activeIndex-1===_,config:a.filteredDashboardApps[_].content,position:_,"current-chat":e.currentChat},null,8,["is-visible","config","position","current-chat"])),[[ln,o.activeIndex-1===_]])),128))],2)}const I2=Re(VBe,[["render",KBe],["__scopeId","data-v-8a03d0b3"]]),zBe={components:{SwitchLayout:TS},directives:{focus:{inserted(e){e.focus()}}},props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["toggleConversationLayout"],computed:{...gt({accountId:"getCurrentAccountId"}),searchUrl(){return Pt(`accounts/${this.accountId}/search`)}}},WBe={class:"relative"},jBe={class:"flex px-4 pb-1 justify-between items-center flex-row gap-1 pt-2.5 border-b border-transparent"},YBe={class:"flex flex-shrink-0"},XBe={class:"mb-0 overflow-hidden text-sm search--label whitespace-nowrap text-ellipsis text-n-slate-11"};function qBe(e,t,n,s,o,a){const i=F("woot-sidemenu-icon"),l=F("fluent-icon"),r=F("router-link"),d=F("SwitchLayout");return m(),f("div",WBe,[c("div",jBe,[b(i,{size:"xs",class:"relative top-0 ltr:-ml-1.5 rtl:-mr-1.5 flex-shrink-0 focus:!bg-n-solid-3 dark:!hover:bg-n-solid-2 hover:!bg-n-alpha-2"}),b(r,{to:a.searchUrl,class:"inline-flex items-center flex-1 h-6 min-w-0 gap-1 px-2 py-0 text-left rounded-md rtl:mr-2.5 search-link rtl:text-right bg-n-slate-9/10 hover:bg-n-slate-3"},{default:j(()=>[c("div",YBe,[b(l,{icon:"search",class:"search--icon text-n-slate-11",size:"16"})]),c("p",XBe,v(e.$t("CONVERSATION.SEARCH_MESSAGES")),1)]),_:1},8,["to"]),b(d,{"is-on-expanded-layout":n.isOnExpandedLayout,onToggle:t[0]||(t[0]=u=>e.$emit("toggleConversationLayout"))},null,8,["is-on-expanded-layout"])])])}const ZBe=Re(zBe,[["render",qBe],["__scopeId","data-v-f6938865"]]),C2={__name:"CmdBarConversationSnooze",setup(e){const t=Ot(),n=vn(),{t:s}=He(),o=U(!1),a=w(()=>n.getSelectedChat.value),i=w(()=>n.getContextMenuChatId.value),l=async(p,h)=>{var g;await t.dispatch("toggleStatus",{conversationId:((g=a.value)==null?void 0:g.id)||i.value,status:p,snoozedUntil:h}),t.dispatch("setContextMenuChatId",null),Te(s("CONVERSATION.CHANGE_STATUS"))},r=p=>{p===$t.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?o.value=!0:l($t.STATUS_TYPE.SNOOZED,E_(p)||null)},d=p=>{o.value=!1,p&&l($t.STATUS_TYPE.SNOOZED,go(p))},u=()=>{t.dispatch("setContextMenuChatId",null),o.value=!1};return yi(w_e,r),(p,h)=>{const g=F("woot-modal");return m(),P(g,{show:o.value,"onUpdate:show":h[0]||(h[0]=_=>o.value=_),"on-close":u},{default:j(()=>[b(T_,{onClose:u,onChooseTime:d})]),_:1},8,["show"])}}},QBe={components:{ChatList:c0e,ConversationBox:I2,PopOverSearch:ZBe,CmdBarConversationSnooze:C2},beforeRouteLeave(e,t,n){this.conversationId&&this.$store.dispatch("clearSelectedState"),n()},props:{inboxId:{type:[String,Number],default:0},conversationId:{type:[String,Number],default:0},label:{type:String,default:""},teamId:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0}},setup(){const{uiSettings:e,updateUISettings:t}=Mn(),{accountId:n}=Ls();return{uiSettings:e,updateUISettings:t,accountId:n}},data(){return{showSearchModal:!1}},computed:{...gt({chatList:"getAllConversations",currentChat:"getSelectedChat",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),showConversationList(){return this.isOnExpandedLayout?!this.conversationId:!0},showMessageView(){return this.conversationId?!0:!this.isOnExpandedLayout},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=$t,{conversation_display_type:t=e}=this.uiSettings;return t!==e},isContactPanelOpen(){if(this.currentChat.id){const{is_contact_sidebar_open:e}=this.uiSettings;return e}return!1},showPopOverSearch(){return!this.isFeatureEnabledonAccount(this.accountId,xt.CHATWOOT_V4)}},watch:{conversationId(){this.fetchConversationIfUnavailable()}},created(){this.conversationId||this.$store.dispatch("clearSelectedState")},mounted(){this.$store.dispatch("agents/get"),this.initialize(),this.$watch("$store.state.route",()=>this.initialize()),this.$watch("chatList.length",()=>{this.setActiveChat()})},methods:{onConversationLoad(){this.fetchConversationIfUnavailable()},initialize(){this.$store.dispatch("setActiveInbox",this.inboxId),this.setActiveChat()},toggleConversationLayout(){const{LAYOUT_TYPES:e}=$t,{conversation_display_type:t=e.CONDENSED}=this.uiSettings,n=t===e.CONDENSED?e.EXPANDED:e.CONDENSED;this.updateUISettings({conversation_display_type:n,previously_used_conversation_display_type:n})},fetchConversationIfUnavailable(){if(!this.conversationId)return;this.findConversation()||this.$store.dispatch("getConversation",this.conversationId)},findConversation(){const e=parseInt(this.conversationId,10),[t]=this.chatList.filter(n=>n.id===e);return t},setActiveChat(){if(this.conversationId){const e=this.findConversation();if(!e||e.id===this.currentChat.id)return;const{messageId:t}=this.$route.query;this.$store.dispatch("setActiveChat",{data:e,after:t}).then(()=>{yt.emit(sn.SCROLL_TO_MESSAGE,{messageId:t})})}else this.$store.dispatch("clearSelectedState")},onToggleContactPanel(){this.updateUISettings({is_contact_sidebar_open:!this.isContactPanelOpen})},onSearch(){this.showSearchModal=!0},closeSearch(){this.showSearchModal=!1}}},JBe={class:"flex w-full h-full"};function e9e(e,t,n,s,o,a){const i=F("PopOverSearch"),l=F("ChatList"),r=F("ConversationBox"),d=F("CmdBarConversationSnooze");return m(),f("section",JBe,[b(l,{"show-conversation-list":a.showConversationList,"conversation-inbox":n.inboxId,label:n.label,"team-id":n.teamId,"conversation-type":n.conversationType,"folders-id":n.foldersId,"is-on-expanded-layout":a.isOnExpandedLayout,onConversationLoad:a.onConversationLoad},{default:j(()=>[a.showPopOverSearch?(m(),P(i,{key:0,"is-on-expanded-layout":a.isOnExpandedLayout,onToggleConversationLayout:a.toggleConversationLayout},null,8,["is-on-expanded-layout","onToggleConversationLayout"])):x("",!0)]),_:1},8,["show-conversation-list","conversation-inbox","label","team-id","conversation-type","folders-id","is-on-expanded-layout","onConversationLoad"]),a.showMessageView?(m(),P(r,{key:0,"inbox-id":n.inboxId,"is-contact-panel-open":a.isContactPanelOpen,"is-on-expanded-layout":a.isOnExpandedLayout,onContactPanelToggle:a.onToggleContactPanel},null,8,["inbox-id","is-contact-panel-open","is-on-expanded-layout","onContactPanelToggle"])):x("",!0),b(d)])}const js=Re(QBe,[["render",e9e]]),Ys=["administrator","agent","conversation_manage","conversation_unassigned_manage","conversation_participating_manage"],t9e={routes:[{path:Pt("accounts/:accountId/dashboard"),name:"home",meta:{permissions:Ys},component:js,props:()=>({inboxId:0})},{path:Pt("accounts/:accountId/conversations/:conversation_id"),name:"inbox_conversation",meta:{permissions:Ys},component:js,props:e=>({inboxId:0,conversationId:e.params.conversation_id})},{path:Pt("accounts/:accountId/inbox/:inbox_id"),name:"inbox_dashboard",meta:{permissions:Ys},component:js,props:e=>({inboxId:e.params.inbox_id})},{path:Pt("accounts/:accountId/inbox/:inbox_id/conversations/:conversation_id"),name:"conversation_through_inbox",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversation_id,inboxId:e.params.inbox_id})},{path:Pt("accounts/:accountId/label/:label"),name:"label_conversations",meta:{permissions:Ys},component:js,props:e=>({label:e.params.label})},{path:Pt("accounts/:accountId/label/:label/conversations/:conversation_id"),name:"conversations_through_label",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversation_id,label:e.params.label})},{path:Pt("accounts/:accountId/team/:teamId"),name:"team_conversations",meta:{permissions:Ys},component:js,props:e=>({teamId:e.params.teamId})},{path:Pt("accounts/:accountId/team/:teamId/conversations/:conversationId"),name:"conversations_through_team",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversationId,teamId:e.params.teamId})},{path:Pt("accounts/:accountId/custom_view/:id"),name:"folder_conversations",meta:{permissions:Ys},component:js,props:e=>({foldersId:e.params.id})},{path:Pt("accounts/:accountId/custom_view/:id/conversations/:conversation_id"),name:"conversations_through_folders",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversation_id,foldersId:e.params.id})},{path:Pt("accounts/:accountId/mentions/conversations"),name:"conversation_mentions",meta:{permissions:Ys},component:js,props:()=>({conversationType:"mention"})},{path:Pt("accounts/:accountId/mentions/conversations/:conversationId"),name:"conversation_through_mentions",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversationId,conversationType:"mention"})},{path:Pt("accounts/:accountId/unattended/conversations"),name:"conversation_unattended",meta:{permissions:Ys},component:js,props:()=>({conversationType:"unattended"})},{path:Pt("accounts/:accountId/unattended/conversations/:conversationId"),name:"conversation_through_unattended",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversationId,conversationType:"unattended"})},{path:Pt("accounts/:accountId/participating/conversations"),name:"conversation_participating",meta:{permissions:Ys},component:js,props:()=>({conversationType:"participating"})},{path:Pt("accounts/:accountId/participating/conversations/:conversationId"),name:"conversation_through_participating",meta:{permissions:Ys},component:js,props:e=>({conversationId:e.params.conversationId,conversationType:"participating"})}]},n9e={class:"flex items-center"},s9e=["placeholder","value"],a9e={__name:"SearchHeader",emits:["search"],setup(e,{emit:t}){const n=t,s=U(""),o=U(!1),a=Us("searchInput"),i=p=>{p.key==="/"&&document.activeElement.tagName!=="INPUT"?(p.preventDefault(),a.value.focus()):p.key==="Escape"&&document.activeElement.tagName==="INPUT"&&(p.preventDefault(),a.value.blur())},l=Ko(p=>n("search",p.length>1||p.match(/^[0-9]+$/)?p:""),500),r=p=>{s.value=p.target.value,l(s.value)},d=()=>{o.value=!0},u=()=>{o.value=!1};return ut(()=>{a.value.focus(),document.addEventListener("keydown",i)}),ia(()=>{document.removeEventListener("keydown",i)}),(p,h)=>{const g=F("fluent-icon"),_=F("woot-label");return m(),f("div",{class:re(["input-container rounded-xl transition-[border-bottom] duration-[0.2s] ease-[ease-in-out] relative flex items-center py-2 px-4 h-14 gap-2 border border-solid bg-n-alpha-black2",{"border-n-brand":o.value,"border-n-weak":!o.value}])},[c("div",n9e,[b(g,{icon:"search",class:re(["icon",{"text-n-blue-text":o.value,"text-n-slate-10":!o.value}]),"aria-hidden":"true"},null,8,["class"])]),c("input",{ref_key:"searchInput",ref:a,type:"search",class:"reset-base outline-none w-full m-0 bg-transparent border-transparent shadow-none text-n-slate-12 dark:text-n-slate-12 active:border-transparent active:shadow-none hover:border-transparent hover:shadow-none focus:border-transparent focus:shadow-none",placeholder:p.$t("SEARCH.INPUT_PLACEHOLDER"),value:s.value,onFocus:d,onBlur:u,onInput:r},null,40,s9e),b(_,{title:p.$t("SEARCH.PLACEHOLDER_KEYBINDING"),"show-close":!1,small:"",class:"!m-0 whitespace-nowrap !bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong"},null,8,["title"])],2)}}},o9e={class:"mt-1 border-b border-n-weak"},i9e={__name:"SearchTabs",props:{tabs:{type:Array,default:()=>[]},selectedTab:{type:Number,default:0}},emits:["tabChange"],setup(e,{emit:t}){const n=e,s=t,o=U(n.selectedTab);lt(()=>n.selectedTab,(i,l)=>{i!==l&&(o.value=n.selectedTab)});const a=i=>{o.value=i,s("tabChange",n.tabs[i].key)};return(i,l)=>{const r=F("woot-tabs-item"),d=F("woot-tabs");return m(),f("div",o9e,[b(d,{index:o.value,border:!1,onChange:a},{default:j(()=>[(m(!0),f(pe,null,ye(e.tabs,(u,p)=>(m(),P(r,{key:u.key,index:p,name:u.name,count:u.count,"show-badge":u.showBadge},null,8,["index","name","count","show-badge"]))),128))]),_:1},8,["index"])])}}},l9e={class:"mx-0 my-2"},r9e={key:0,class:"sticky top-0 p-2 z-50 mb-0.5 bg-n-background"},c9e={class:"text-sm text-n-slate-12"},d9e={key:2,class:"flex items-center justify-center px-4 py-6 m-2 rounded-xl bg-n-slate-2 dark:bg-n-solid-1"},u9e={class:"mx-2 my-0 text-center text-n-slate-11"},M_={__name:"SearchResultSection",props:{title:{type:String,default:""},empty:{type:Boolean,default:!1},query:{type:String,default:""},showTitle:{type:Boolean,default:!0},isFetching:{type:Boolean,default:!0}},setup(e){const t=e,n=w(()=>t.title.toLowerCase());return(s,o)=>{const a=F("woot-loading-state"),i=F("fluent-icon");return m(),f("section",l9e,[e.showTitle?(m(),f("div",r9e,[c("h3",c9e,v(e.title),1)])):x("",!0),et(s.$slots,"default"),e.isFetching?(m(),P(a,{key:1,message:e.empty?s.$t("SEARCH.SEARCHING_DATA"):s.$t("SEARCH.LOADING_DATA")},null,8,["message"])):x("",!0),e.empty&&!e.isFetching?(m(),f("div",d9e,[b(i,{icon:"info",size:"16px",class:"text-n-slate-11"}),c("p",u9e,v(s.$t("SEARCH.EMPTY_STATE",{item:n.value,query:e.query})),1)])):x("",!0)])}}},m9e={class:"flex-grow min-w-0 ml-2"},p9e={class:"flex items-center min-w-0 justify-between gap-1 mb-1"},h9e={class:"flex"},f9e={class:"flex items-center justify-center h-5 ml-1 rounded bg-n-slate-3 dark:bg-n-solid-3 w-fit rtl:ml-0 rtl:mr-1"},g9e={class:"text-xs font-normal min-w-0 truncate text-n-slate-11 dark:text-n-slate-11"},_9e={class:"flex flex-wrap gap-x-2 gap-y-1.5"},v9e={class:"text-xs font-normal text-n-slate-11 dark:text-n-slate-11"},N2={__name:"SearchResultConversationItem",props:{id:{type:Number,default:0},inbox:{type:Object,default:()=>({})},name:{type:String,default:""},email:{type:String,default:""},accountId:{type:[String,Number],default:""},createdAt:{type:[String,Date,Number],default:""},messageId:{type:Number,default:0},emailSubject:{type:String,default:""}},setup(e){const t=e,n=w(()=>{const i={};return t.messageId&&(i.messageId=t.messageId),Pt(`accounts/${t.accountId}/conversations/${t.id}`,i)}),s=ms(t.createdAt),o=w(()=>[{label:"SEARCH.FROM",value:t.name,show:!!t.name},{label:"SEARCH.EMAIL",value:t.email,show:!!t.email},{label:"SEARCH.EMAIL_SUBJECT",value:t.emailSubject,show:!!t.emailSubject}]),a=w(()=>o.value.filter(i=>i.show));return(i,l)=>{const r=F("woot-label"),d=F("router-link");return m(),P(d,{to:n.value,class:"flex p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:j(()=>[b(yn,{name:"chats",size:24,"icon-name":"i-lucide-messages-square",class:"[&>span]:rounded"}),c("div",m9e,[c("div",p9e,[c("div",h9e,[b(r,{class:"!bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong m-0",title:`#${e.id}`,"show-close":!1,small:""},null,8,["title"]),c("div",f9e,[b(b_,{inbox:e.inbox,class:"mr-2 rtl:mr-0 rtl:ml-2 bg-n-slate-3 dark:bg-n-solid-3 text-n-slate-11 dark:text-n-slate-11"},null,8,["inbox"])])]),c("span",g9e,v(I(s)),1)]),c("div",_9e,[(m(!0),f(pe,null,ye(a.value,u=>(m(),f("h5",{key:u.label,class:"m-0 text-sm min-w-0 text-n-slate-12 dark:text-n-slate-12 truncate"},[c("span",v9e,v(i.$t(u.label))+": ",1),be(" "+v(u.value),1)]))),128))]),et(i.$slots,"default")])]),_:3},8,["to"])}}},b9e={key:0,class:"space-y-1.5 list-none"},E9e={__name:"SearchResultConversationsList",props:{conversations:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=e,n=Ve("getCurrentAccountId"),s=w(()=>t.conversations.map(o=>{var a;return{...o,mail_subject:((a=o.additional_attributes)==null?void 0:a.mail_subject)||""}}));return(o,a)=>(m(),P(M_,{title:o.$t("SEARCH.SECTION.CONVERSATIONS"),empty:!e.conversations.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:j(()=>[e.conversations.length?(m(),f("ul",b9e,[(m(!0),f(pe,null,ye(s.value,i=>(m(),f("li",{key:i.id},[b(N2,{id:i.id,name:i.contact.name,email:i.contact.email,"account-id":I(n),inbox:i.inbox,"created-at":i.created_at,"email-subject":i.mail_subject},null,8,["id","name","email","account-id","inbox","created-at","email-subject"])]))),128))])):x("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},T9e={key:0,class:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t to-transparent from-n-background flex items-end justify-center pb-2"},y9e={__name:"ReadMore",props:{shrink:{type:Boolean,default:!1}},emits:["expand"],setup(e){return(t,n)=>(m(),f("div",null,[c("div",{class:re({"max-h-[100px] overflow-hidden relative":e.shrink})},[et(t.$slots,"default"),e.shrink?(m(),f("div",T9e,[b(he,{label:t.$t("SEARCH.READ_MORE"),icon:"i-lucide-chevrons-down",blue:"",xs:"",faded:"",class:"backdrop-filter backdrop-blur-[2px]",onClick:n[0]||(n[0]=Ke(s=>t.$emit("expand"),["prevent"]))},null,8,["label"])])):x("",!0)],2)]))}},A9e={class:"header"},S9e={class:"text-n-slate-11"},I9e={class:"message-content"},C9e={__name:"MessageContent",props:{author:{type:String,default:""},content:{type:String,default:""},searchTerm:{type:String,default:""}},setup(e){const t=e,{highlightContent:n}=oo(),s=Us("messageContainer"),o=U(!1),a=()=>{const r=s.value;if(r){const d=r.querySelector(".message-content");o.value=d.offsetHeight>150}},i=r=>{var d=document.createTextNode(r),u=document.createElement("p");return u.appendChild(d),u.innerText},l=(r="")=>{const d=i(r);return n(d,t.searchTerm,"searchkey--highlight")};return ut(()=>{lt(()=>s.value,a),Zt(a)}),(r,d)=>{const u=ct("dompurify-html");return m(),f("blockquote",{ref_key:"messageContainer",ref:s,class:"message border-l-2 border-n-weak"},[c("p",A9e,[c("strong",S9e,v(e.author),1),be(" "+v(r.$t("SEARCH.WROTE")),1)]),b(y9e,{shrink:o.value,onExpand:d[0]||(d[0]=p=>o.value=!1)},{default:j(()=>[ie(c("div",I9e,null,512),[[u,l(e.content)]])]),_:1},8,["shrink"])],512)}}},N9e=Re(C9e,[["__scopeId","data-v-879926cf"]]),O9e={key:0,class:"space-y-1.5 list-none"},x9e={__name:"SearchResultMessagesList",props:{messages:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const{t}=He(),n=Ve("getCurrentAccountId"),s=o=>o&&o.sender&&o.sender.name?o.sender.name:t("SEARCH.BOT_LABEL");return(o,a)=>(m(),P(M_,{title:o.$t("SEARCH.SECTION.MESSAGES"),empty:!e.messages.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:j(()=>[e.messages.length?(m(),f("ul",O9e,[(m(!0),f(pe,null,ye(e.messages,i=>(m(),f("li",{key:i.id},[b(N2,{id:i.conversation_id,"account-id":I(n),inbox:i.inbox,"created-at":i.created_at,"message-id":i.id},{default:j(()=>[b(N9e,{author:s(i),content:i.content,"search-term":e.query},null,8,["author","content","search-term"])]),_:2},1032,["id","account-id","inbox","created-at","message-id"])]))),128))])):x("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},w9e={class:"ml-2 rtl:mr-2 min-w-0 rtl:ml-0"},R9e={class:"text-sm name truncate min-w-0 text-n-slate-12"},$9e={class:"grid items-center m-0 gap-1 text-sm grid-cols-[minmax(0,1fr)_auto_auto]"},M9e=["title"],k9e={key:1,class:"text-n-slate-10"},L9e={key:2,class:"text-n-slate-12"},D9e={__name:"SearchResultContactItem",props:{id:{type:[String,Number],default:0},email:{type:String,default:""},phone:{type:String,default:""},name:{type:String,default:""},thumbnail:{type:String,default:""},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=w(()=>Pt(`accounts/${t.accountId}/contacts/${t.id}`));return(s,o)=>{const a=F("router-link");return m(),P(a,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:j(()=>[b(yn,{name:e.name,src:e.thumbnail,size:24,"rounded-full":"",class:"mt-0.5"},null,8,["name","src"]),c("div",w9e,[c("h5",R9e,v(e.name),1),c("p",$9e,[e.email?(m(),f("span",{key:0,class:"truncate text-n-slate-12",title:e.email},v(e.email),9,M9e)):x("",!0),e.phone?(m(),f("span",k9e,"")):x("",!0),e.phone?(m(),f("span",L9e,v(e.phone),1)):x("",!0)])])]),_:1},8,["to"])}}},P9e={key:0,class:"space-y-1.5 list-none"},B9e={__name:"SearchResultContactsList",props:{contacts:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=Ve("getCurrentAccountId");return(n,s)=>(m(),P(M_,{title:n.$t("SEARCH.SECTION.CONTACTS"),empty:!e.contacts.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:j(()=>[e.contacts.length?(m(),f("ul",P9e,[(m(!0),f(pe,null,ye(e.contacts,o=>(m(),f("li",{key:o.id},[b(D9e,{id:o.id,name:o.name,email:o.email,phone:o.phone_number,"account-id":I(t),thumbnail:o.thumbnail},null,8,["id","name","email","phone","account-id","thumbnail"])]))),128))])):x("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},F9e={class:"flex flex-col w-full h-full bg-n-background"},U9e={class:"flex w-full p-4"},G9e={class:"flex flex-col flex-grow w-full h-full overflow-hidden"},V9e={class:"w-full max-w-4xl mx-auto"},H9e={class:"flex flex-col w-full px-4"},K9e={class:"flex-grow w-full h-full overflow-y-auto"},z9e={class:"w-full max-w-4xl mx-auto px-4 pb-6"},W9e={key:0},j9e={key:0,class:"flex justify-center mt-4 mb-6"},Y9e={key:1,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 rounded-md"},X9e={class:"m-2 text-center text-n-slate-11"},q9e={key:2,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 text-center rounded-md"},Z9e={class:"text-center margin-bottom-0"},Q9e={class:"m-2 text-center text-n-slate-11"},J9e=15,e7e={__name:"SearchView",setup(e){const t=wn(),n=Ot(),{t:s}=He(),o=U("all"),a=U(""),i=U({contacts:1,conversations:1,messages:1}),l=Ve("getCurrentUser"),r=Ve("getCurrentAccountId"),d=Ve("conversationSearch/getContactRecords"),u=Ve("conversationSearch/getConversationRecords"),p=Ve("conversationSearch/getMessageRecords"),h=Ve("conversationSearch/getUIFlags"),g=(Z,ne)=>Z.value.map(ae=>({...ae,type:ne})),_=w(()=>g(d,"contact")),T=w(()=>g(u,"conversation")),S=w(()=>g(p,"message")),E=w(()=>o.value==="all"),y=Z=>E.value?Z.value.slice(0,5):Z.value,A=w(()=>y(_)),C=w(()=>y(T)),O=w(()=>y(S)),N=Z=>w(()=>o.value===Z||E.value),R=N("contacts"),k=N("conversations"),L=N("messages"),D=w(()=>Pu(l.value,r.value)),$={all:{permissions:[Bl,...ys,...Bs],count:()=>null},contacts:{permissions:[...ys,Bl],count:()=>_.value.length},conversations:{permissions:[...ys,...Bs],count:()=>T.value.length},messages:{permissions:[...ys,...Bs],count:()=>S.value.length}},M=w(()=>{const Z=Object.entries($).map(([ne,ae])=>({key:ne,name:s(`SEARCH.TABS.${ne.toUpperCase()}`),count:ae.count(),showBadge:ne!=="all",permissions:ae.permissions}));return Kh(Z,D.value,ne=>ne.permissions)}),K=w(()=>{const Z={contacts:{permissions:[...ys,Bl],count:()=>A.value.length},conversations:{permissions:[...ys,...Bs],count:()=>C.value.length+O.value.length}};return Kh(Z,D.value,ne=>ne.permissions,(ne,ae)=>ae.count).reduce((ne,ae)=>ne+ae(),0)}),B=w(()=>{const Z=M.value.findIndex(ne=>ne.key===o.value);return Z>=0?Z:0}),H=w(()=>{const{contact:Z,message:ne,conversation:ae,isFetching:ue}=h.value;return ue||Z.isFetching||ne.isFetching||ae.isFetching}),G=w(()=>K.value===0&&h.value.isSearchCompleted&&E.value&&!H.value&&a.value),V=w(()=>h.value.isSearchCompleted&&K.value!==0||H.value||!E.value&&a.value&&!H.value),Y=w(()=>{if(!a.value||H.value||o.value==="all")return!1;const Z={contacts:_.value,conversations:T.value,messages:S.value}[o.value];return(Z==null?void 0:Z.length)>0&&Z.length===i.value[o.value]*J9e}),ee=w(()=>{var Z,ne,ae;return{contacts:((Z=_.value)==null?void 0:Z.length)>5&&E.value,conversations:((ne=T.value)==null?void 0:ne.length)>5&&E.value,messages:((ae=S.value)==null?void 0:ae.length)>5&&E.value}}),X=()=>{i.value={contacts:1,conversations:1,messages:1},n.dispatch("conversationSearch/clearSearchResults")},z=Z=>{a.value=Z,X(),Z&&(jt(ba.SEARCH_CONVERSATION),n.dispatch("conversationSearch/fullSearch",{q:Z,page:1}))},W=()=>{window.history.length>2?t.go(-1):t.push({name:"home"}),X()},q=()=>{const Z={contacts:"conversationSearch/contactSearch",conversations:"conversationSearch/conversationSearch",messages:"conversationSearch/messageSearch"};if(h.value.isFetching||o.value==="all")return;const ne=o.value;i.value[ne]+=1,n.dispatch(Z[ne],{q:a.value,page:i.value[ne]})};return ut(()=>{n.dispatch("conversationSearch/clearSearchResults")}),ia(()=>{a.value="",n.dispatch("conversationSearch/clearSearchResults")}),(Z,ne)=>{const ae=F("fluent-icon");return m(),f("div",F9e,[c("div",U9e,[b(he,{label:I(s)("GENERAL_SETTINGS.BACK"),icon:"i-lucide-chevron-left",faded:"",primary:"",sm:"",onClick:W},null,8,["label"])]),c("section",G9e,[c("div",V9e,[c("div",H9e,[b(a9e,{onSearch:z}),a.value?(m(),P(i9e,{key:0,tabs:M.value,"selected-tab":B.value,onTabChange:ne[0]||(ne[0]=ue=>o.value=ue)},null,8,["tabs","selected-tab"])):x("",!0)])]),c("div",K9e,[c("div",z9e,[V.value?(m(),f("div",W9e,[b(Ao,{permissions:[...I(ys),I(Bl)],class:"flex flex-col justify-center"},{default:j(()=>[I(R)?(m(),P(B9e,{key:0,"is-fetching":I(h).contact.isFetching,contacts:A.value,query:a.value,"show-title":E.value},null,8,["is-fetching","contacts","query","show-title"])):x("",!0),ee.value.contacts?(m(),P(he,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:ne[1]||(ne[1]=ue=>o.value="contacts")},null,8,["label"])):x("",!0)]),_:1},8,["permissions"]),b(Ao,{permissions:[...I(ys),...I(Bs)],class:"flex flex-col justify-center"},{default:j(()=>[I(L)?(m(),P(x9e,{key:0,"is-fetching":I(h).message.isFetching,messages:O.value,query:a.value,"show-title":E.value},null,8,["is-fetching","messages","query","show-title"])):x("",!0),ee.value.messages?(m(),P(he,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:ne[2]||(ne[2]=ue=>o.value="messages")},null,8,["label"])):x("",!0)]),_:1},8,["permissions"]),b(Ao,{permissions:[...I(ys),...I(Bs)],class:"flex flex-col justify-center"},{default:j(()=>[I(k)?(m(),P(E9e,{key:0,"is-fetching":I(h).conversation.isFetching,conversations:C.value,query:a.value,"show-title":E.value},null,8,["is-fetching","conversations","query","show-title"])):x("",!0),ee.value.conversations?(m(),P(he,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:ne[3]||(ne[3]=ue=>o.value="conversations")},null,8,["label"])):x("",!0)]),_:1},8,["permissions"]),Y.value?(m(),f("div",j9e,[E.value?x("",!0):(m(),P(he,{key:0,label:I(s)("SEARCH.LOAD_MORE"),icon:"i-lucide-cloud-download",slate:"",sm:"",faded:"",onClick:q},null,8,["label"]))])):x("",!0)])):G.value?(m(),f("div",Y9e,[b(ae,{icon:"info",size:"16px",class:"text-n-slate-11"}),c("p",X9e,v(I(s)("SEARCH.EMPTY_STATE_FULL",{query:a.value})),1)])):a.value?x("",!0):(m(),f("div",q9e,[c("p",Z9e,[b(ae,{icon:"search",size:"24px",class:"text-n-slate-11"})]),c("p",Q9e,v(I(s)("SEARCH.EMPTY_STATE_DEFAULT")),1)]))])])])])}}},t7e=[{path:Pt("accounts/:accountId/search"),name:"search",meta:{permissions:[...ys,...Bs,Bl]},component:e7e}],n7e={class:"relative flex flex-col gap-1 w-fit"},s7e={key:0,class:"absolute ltr:left-full rtl:right-full select-none max-w-48 ltr:ml-1 rtl:mr-1 flex flex-col gap-1 bg-n-alpha-3 backdrop-blur-[100px] p-1 top-0 shadow-lg rounded-lg border border-n-weak"},uE={__name:"SelectMenu",props:{options:{type:Array,required:!0},modelValue:{type:String,required:!0},label:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=U(!1),a=w(()=>n.label),i=()=>{o.value=!o.value},l=r=>{s("update:modelValue",r),o.value=!1};return(r,d)=>{const u=ct("on-clickaway");return ie((m(),f("div",n7e,[b(he,{icon:"i-lucide-chevron-down",size:"sm","trailing-icon":"",color:"slate",variant:"faded",class:re(["!w-fit",{"dark:!bg-n-alpha-2 !bg-n-slate-9/20":o.value}]),label:a.value,onClick:i},null,8,["class","label"]),o.value?(m(),f("div",s7e,[(m(!0),f(pe,null,ye(e.options,p=>(m(),P(he,{key:p.value,label:p.label,icon:p.value===e.modelValue?"i-lucide-check":"",size:"sm",variant:"ghost",color:"slate","trailing-icon":"",class:re(["!justify-end !px-2.5 !h-7",{"!bg-n-alpha-2":p.value===e.modelValue}]),onClick:h=>l(p.value)},null,8,["label","icon","class","onClick"]))),128))])):x("",!0)])),[[u,()=>o.value=!1]])}}},a7e={class:"relative"},o7e={key:0,class:"absolute top-full mt-1 ltr:right-0 rtl:left-0 flex flex-col gap-4 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4"},i7e={class:"flex items-center justify-between gap-2"},l7e={class:"text-sm text-n-slate-12"},r7e={class:"flex items-center justify-between gap-2"},c7e={class:"text-sm text-n-slate-12"},d7e={__name:"ContactSortMenu",props:{activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""}},emits:["update:sort"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!1),i=[{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.NAME"),value:"name"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.EMAIL"),value:"email"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COMPANY"),value:"company_name"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COUNTRY"),value:"country"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CITY"),value:"city"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.LAST_ACTIVITY"),value:"last_activity_at"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CREATED_AT"),value:"created_at"}],l=[{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.ASCENDING"),value:""},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.DESCENDING"),value:"-"}],r=Jd(n,"activeSort"),d=Jd(n,"activeOrdering"),u=w(()=>{const _=i.find(T=>T.value===r.value);return(_==null?void 0:_.label)||o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")}),p=w(()=>{const _=l.find(T=>T.value===d.value);return(_==null?void 0:_.label)||o("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")}),h=_=>{s("update:sort",{sort:_,order:n.activeOrdering})},g=_=>{s("update:sort",{sort:n.activeSort,order:_})};return(_,T)=>{const S=ct("on-clickaway");return m(),f("div",a7e,[b(he,{icon:"i-lucide-arrow-down-up",color:"slate",size:"sm",variant:"ghost",class:re(a.value?"bg-n-alpha-2":""),onClick:T[0]||(T[0]=E=>a.value=!a.value)},null,8,["class"]),a.value?ie((m(),f("div",o7e,[c("div",i7e,[c("span",l7e,v(I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")),1),b(uE,{"model-value":r.value,options:i,label:u.value,"onUpdate:modelValue":h},null,8,["model-value","label"])]),c("div",r7e,[c("span",c7e,v(I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")),1),b(uE,{"model-value":d.value,options:l,label:p.value,"onUpdate:modelValue":g},null,8,["model-value","label"])])])),[[S,()=>a.value=!1]]):x("",!0)])}}},u7e={class:"relative"},m7e={__name:"ContactMoreActions",emits:["add","import","export"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=[{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.ADD_CONTACT"),action:"add",value:"add",icon:"i-lucide-plus"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.EXPORT_CONTACT"),action:"export",value:"export",icon:"i-lucide-upload"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.IMPORT_CONTACT"),action:"import",value:"import",icon:"i-lucide-download"}],a=U(!1),i=({action:l})=>{l==="add"?n("add"):l==="import"?n("import"):l==="export"&&n("export")};return(l,r)=>{const d=ct("on-clickaway");return ie((m(),f("div",u7e,[b(he,{icon:"i-lucide-ellipsis-vertical",color:"slate",variant:"ghost",size:"sm",class:re(a.value?"bg-n-alpha-2":""),onClick:r[0]||(r[0]=u=>a.value=!a.value)},null,8,["class"]),a.value?(m(),P(ma,{key:0,"menu-items":o,class:"ltr:right-0 rtl:left-0 mt-1 w-52 top-full",onAction:r[1]||(r[1]=u=>i(u))})):x("",!0)])),[[d,()=>a.value=!1]])}}},p7e={class:"sticky top-0 z-10"},h7e={class:"flex items-center justify-between w-full h-20 px-6 gap-2 mx-auto max-w-[60rem]"},f7e={class:"text-xl font-medium truncate text-n-slate-12"},g7e={class:"flex items-center flex-shrink-0 gap-4"},_7e={key:0,class:"flex items-center gap-2"},v7e={class:"flex items-center gap-2"},b7e={key:0,class:"relative"},E7e={key:0,class:"absolute top-0 right-0 w-2 h-2 rounded-full bg-n-brand"},T7e={__name:"ContactHeader",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},headerTitle:{type:String,required:!0},buttonLabel:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},isSegmentsView:{type:Boolean,default:!1},hasActiveFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1}},emits:["search","filter","update:sort","add","import","export","createSegment","deleteSegment"],setup(e,{emit:t}){const n=t;return(s,o)=>(m(),f("header",p7e,[c("div",h7e,[c("span",f7e,v(e.headerTitle),1),c("div",g7e,[e.showSearch?(m(),f("div",_7e,[b(ps,{"model-value":e.searchValue,type:"search",placeholder:s.$t("CONTACTS_LAYOUT.HEADER.SEARCH_PLACEHOLDER"),"custom-input-class":["h-8 [&:not(.focus)]:!border-transparent bg-n-alpha-2 dark:bg-n-solid-1 ltr:!pl-8 !py-1 rtl:!pr-8"],onInput:o[0]||(o[0]=a=>n("search",a.target.value))},{prefix:j(()=>[b(Ht,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-2 rtl:right-2"})]),_:1},8,["model-value","placeholder"])])):x("",!0),c("div",v7e,[e.isLabelView?x("",!0):(m(),f("div",b7e,[b(he,{id:"toggleContactsFilterButton",icon:e.isSegmentsView?"i-lucide-pen-line":"i-lucide-list-filter",color:"slate",size:"sm",class:"relative w-8",variant:"ghost",onClick:o[1]||(o[1]=a=>n("filter"))},{default:j(()=>[e.hasActiveFilters&&!e.isSegmentsView?(m(),f("div",E7e)):x("",!0)]),_:1},8,["icon"]),et(s.$slots,"filter")])),e.hasActiveFilters&&!e.isSegmentsView&&!e.isLabelView?(m(),P(he,{key:1,icon:"i-lucide-save",color:"slate",size:"sm",variant:"ghost",onClick:o[2]||(o[2]=a=>n("createSegment"))})):x("",!0),e.isSegmentsView&&!e.isLabelView?(m(),P(he,{key:2,icon:"i-lucide-trash",color:"slate",size:"sm",variant:"ghost",onClick:o[3]||(o[3]=a=>n("deleteSegment"))})):x("",!0),b(d7e,{"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"onUpdate:sort":o[4]||(o[4]=a=>n("update:sort",a))},null,8,["active-sort","active-ordering"]),b(m7e,{onAdd:o[5]||(o[5]=a=>n("add")),onImport:o[6]||(o[6]=a=>n("import")),onExport:o[7]||(o[7]=a=>n("export"))})]),o[8]||(o[8]=c("div",{class:"w-px h-4 bg-n-strong"},null,-1)),b(Om,null,{trigger:j(({toggle:a})=>[b(he,{label:e.buttonLabel,size:"sm",onClick:a},null,8,["label","onClick"])]),_:1})])])]))}},y7e={class:"absolute z-[9999] w-full mt-1 transition-opacity duration-200 border rounded-md shadow-lg bg-n-solid-1 border-n-strong"},A7e={class:"relative border-b border-n-strong"},S7e=["value","placeholder"],I7e=["aria-multiselectable"],C7e=["aria-selected","onClick"],N7e={key:0,class:"flex-shrink-0 i-lucide-check size-4 text-n-slate-11"},O7e={key:0,class:"px-3 py-2 text-sm text-slate-600 dark:text-slate-300"},O2={__name:"ComboBoxDropdown",props:On({open:{type:Boolean,required:!0},options:{type:Array,required:!0},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},multiple:{type:Boolean,default:!1},selectedValues:{type:[String,Number,Array],default:()=>[]}},{searchValue:{type:String,default:""},searchValueModifiers:{}}),emits:On(["select","search"],["update:searchValue"]),setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Wn(e,"searchValue"),l=U(null),r=u=>Array.isArray(s.selectedValues)?s.selectedValues.includes(u.value):u.value===s.selectedValues,d=u=>{i.value=u.target.value,o("search",u.target.value)};return t({focus:()=>{var u;return(u=l.value)==null?void 0:u.focus()}}),(u,p)=>ie((m(),f("div",y7e,[c("div",A7e,[p[0]||(p[0]=c("span",{class:"absolute i-lucide-search top-2.5 size-4 left-3"},null,-1)),c("input",{ref_key:"searchInput",ref:l,value:i.value,type:"search",placeholder:e.searchPlaceholder||I(a)("COMBOBOX.SEARCH_PLACEHOLDER"),class:"reset-base w-full py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-t-md bg-n-solid-1 text-slate-900 dark:text-slate-50",onInput:d},null,40,S7e)]),c("ul",{class:"py-1 mb-0 overflow-auto max-h-60",role:"listbox","aria-multiselectable":e.multiple},[(m(!0),f(pe,null,ye(e.options,h=>(m(),f("li",{key:h.value,class:re(["flex items-center justify-between w-full gap-2 px-3 py-2 text-sm transition-colors duration-150 cursor-pointer hover:bg-n-alpha-2",{"bg-n-alpha-2":r(h)}]),role:"option","aria-selected":r(h),onClick:g=>o("select",h)},[c("span",{class:re([{"font-medium":r(h)},"text-n-slate-12"])},v(h.label),3),r(h)?(m(),f("span",N7e)):x("",!0)],10,C7e))),128)),e.options.length===0?(m(),f("li",O7e,v(e.emptyState||I(a)("COMBOBOX.EMPTY_STATE")),1)):x("",!0)],8,I7e)],512)),[[ln,e.open]])}},Oi={__name:"ComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1},useApiResults:{type:Boolean,default:!1}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(n.modelValue),i=U(!1),l=U(""),r=U(null),d=U(null),u=w(()=>{if(n.useApiResults&&l.value)return n.options;const T=l.value.toLowerCase();return n.options.filter(S=>S.label.toLowerCase().includes(T))}),p=w(()=>n.placeholder||o("COMBOBOX.PLACEHOLDER")),h=w(()=>{const T=n.options.find(S=>S.value===a.value);return(T==null?void 0:T.label)??p.value}),g=T=>{a.value=T.value,s("update:modelValue",T.value),i.value=!1,l.value=""},_=()=>{n.disabled||(i.value=!i.value,i.value&&(l.value="",Zt(()=>{var T;return(T=r.value)==null?void 0:T.focus()})))};return lt(()=>n.modelValue,T=>{a.value=T}),(T,S)=>(m(),f("div",{ref_key:"comboboxRef",ref:d,class:re(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:S[3]||(S[3]=Ke(()=>{},["prevent"]))},[b(I(gl),{onTrigger:S[2]||(S[2]=E=>i.value=!1)},{default:j(()=>[b(he,{variant:"outline",color:e.hasError&&!i.value?"ruby":i.value?"blue":"slate",label:h.value,"trailing-icon":"",disabled:e.disabled,class:re(["justify-between w-full !px-3 !py-2.5 text-n-slate-12 font-normal group-hover/combobox:border-n-slate-6 [&:not(.focused)]:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:outline-n-weak focus:outline-n-brand",{focused:i.value}]),icon:i.value?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:_},null,8,["color","label","disabled","class","icon"]),b(O2,{ref_key:"dropdownRef",ref:r,"search-value":l.value,"onUpdate:searchValue":S[0]||(S[0]=E=>l.value=E),open:i.value,options:u.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,"selected-values":a.value,onSearch:S[1]||(S[1]=E=>s("search",E)),onSelect:g},null,8,["search-value","open","options","search-placeholder","empty-state","selected-values"]),e.message?(m(),f("p",{key:0,class:re(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},v(e.message),3)):x("",!0)]),_:1})],2))}},x7e={class:"flex items-center flex-shrink-0"},w7e={key:0,class:"inline-flex justify-center text-sm whitespace-nowrap"},R7e={key:0,class:"text-sm left-[38px] top-2.5 text-n-slate-11 ltr:!pl-1 rtl:!pr-1"},$7e={key:0,class:"min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out text-n-ruby-9 dark:text-n-ruby-9"},M7e={__name:"PhoneNumberInput",props:On({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Wn(e,"modelValue"),{t:s}=He(),o=U(!1),a=U(""),i=U(DE()),l=U(LE()),r=U(""),d={phoneNumber:{minLength:Nn(2),numeric:lN},activeDialCode:{required:it,validDialCode:O=>Ua.some(N=>N.dial_code===O)}},u=Lt(d,{phoneNumber:r,activeDialCode:l}),p=w(()=>u.value.$invalid),h=w(()=>Ua.map(O=>({value:O.id,label:O.name,dialCode:O.dial_code,emoji:O.emoji,isSelected:String(i.value)===String(O.id),action:"phoneNumberInput"}))),g=w(()=>{const O=a.value.toLowerCase();return h.value.filter(({label:N,dialCode:R,value:k})=>[N,R,k].some(L=>L.toLowerCase().includes(O)))}),_=w(()=>i.value?h.value.find(O=>O.value===i.value):""),T=w(()=>{const O="outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8",N="has-[:focus]:outline-n-brand dark:has-[:focus]:outline-n-brand";return t.showBorder?p.value?O:`${N} outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak`:p.value?O:`outline-transparent ${N}`}),S=w(()=>u.value.$dirty?u.value.activeDialCode.$invalid?s("PHONE_INPUT.DIAL_CODE_ERROR"):u.value.phoneNumber.$invalid&&s("PHONE_INPUT.ERROR"):""),E=O=>{const N=O?`${l.value}${O}`:"";n.value=N},y=async({value:O,dialCode:N})=>{!O||!o.value||(i.value=O,l.value=N,a.value="",o.value=!1,!u.value.$invalid&&r.value&&E(r.value))},A=()=>{o.value=!o.value},C=()=>{o.value=!1};return lt(r,async O=>{await u.value.$touch(),u.value.$invalid||E(O)}),lt(n,O=>{const N=vu(O);N&&(N!=null&&N.country&&(i.value=N.country),N!=null&&N.countryCallingCode&&(l.value=`+${N.countryCallingCode}`),r.value=O.replace(`+${N.countryCallingCode}`,""))},{immediate:!0}),(O,N)=>{const R=ct("on-clickaway");return m(),f("div",null,[ie((m(),f("div",{class:re(["relative flex items-center h-8 transition-all duration-500 ease-in-out outline outline-1 outline-offset-[-1px] rounded-lg bg-n-alpha-black2",[T.value,{"cursor-not-allowed opacity-50":e.disabled}]])},[b(ps,{modelValue:r.value,"onUpdate:modelValue":N[0]||(N[0]=k=>r.value=k),type:"tel",placeholder:e.placeholder,disabled:e.disabled,"custom-input-class":"!border-0 !outline-none h-8 !py-0.5 !bg-transparent ltr:!pl-1 rtl:!pr-1",class:"w-full !flex-row"},{prefix:j(()=>{var k;return[c("div",x7e,[b(he,{label:((k=_.value)==null?void 0:k.emoji)||"",color:"slate",size:"sm",icon:_.value?"i-lucide-chevron-down":"i-lucide-globe","trailing-icon":"",disabled:e.disabled,class:"!h-[1.875rem] top-1 ltr:ml-px rtl:mr-px !px-2 outline-0 !outline-none !rounded-lg border-0 ltr:!rounded-r-none rtl:!rounded-l-none",onClick:A},{default:j(()=>{var L;return[_.value?(m(),f("span",w7e,v((L=_.value)==null?void 0:L.emoji),1)):x("",!0)]}),_:1},8,["label","icon","disabled"]),_.value?(m(),f("span",R7e,v(l.value),1)):x("",!0)])]}),_:1},8,["modelValue","placeholder","disabled"]),o.value?(m(),P(ma,{key:0,"menu-items":g.value,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:y},null,8,["menu-items"])):x("",!0)],2)),[[R,()=>C()]]),S.value?(m(),f(pe,{key:0},[S.value?(m(),f("p",$7e,v(S.value),1)):x("",!0)],64)):x("",!0)])}}},k7e={class:"flex flex-col gap-6"},L7e={class:"flex flex-col items-start gap-2"},D7e={class:"py-1 text-sm font-medium text-n-slate-12"},P7e={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},B7e={class:"flex flex-col items-start gap-2"},F7e={class:"py-1 text-sm font-medium text-n-slate-12"},U7e={class:"flex flex-wrap gap-2"},G7e=["onUpdate:modelValue","placeholder","size"],k_={__name:"ContactsForm",props:{contactData:{type:Object,default:null},isDetailsView:{type:Boolean,default:!1},isNewContact:{type:Boolean,default:!1}},emits:["update"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i={FIRST_NAME:{field:"firstName"},LAST_NAME:{field:"lastName"},EMAIL_ADDRESS:{field:"email"},PHONE_NUMBER:{field:"phoneNumber"},CITY:{field:"additionalAttributes.city"},COUNTRY:{field:"additionalAttributes.countryCode"},BIO:{field:"additionalAttributes.description"},COMPANY_NAME:{field:"additionalAttributes.companyName"}},l={LINKEDIN:"i-ri-linkedin-box-fill",FACEBOOK:"i-ri-facebook-circle-fill",INSTAGRAM:"i-ri-instagram-line",TWITTER:"i-ri-twitter-x-fill",GITHUB:"i-ri-github-fill"},r={id:0,name:"",email:"",firstName:"",lastName:"",phoneNumber:"",additionalAttributes:{description:"",companyName:"",countryCode:"",country:"",city:"",socialProfiles:{facebook:"",github:"",instagram:"",linkedin:"",twitter:""}}},d=ks({...r}),p=Lt({firstName:{required:it},email:{email:xi}},d),h=w(()=>p.value.$invalid),g=()=>{if(s.isNewContact)return;const{id:k,name:L="",email:D,phoneNumber:$,additionalAttributes:M={}}=s.contactData||{},{firstName:K,lastName:B}=wN(L||""),{description:H="",companyName:G="",countryCode:V="",country:Y="",city:ee="",socialProfiles:X={}}=M||{};Object.assign(d,{id:k,name:L,firstName:K,lastName:B,email:D,phoneNumber:$,additionalAttributes:{description:H,companyName:G,countryCode:V,country:Y,city:ee,socialProfiles:X}})},_=w(()=>Ua.map(({name:k,id:L})=>({label:k,value:L}))),T=w(()=>Object.keys(i).map(k=>({key:k,placeholder:a(`CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM.${k}.PLACEHOLDER`)}))),S=w(()=>Object.entries(l).map(([k,L])=>({key:k,placeholder:a(`CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.FORM.${k}.PLACEHOLDER`),icon:L}))),E=k=>{var D;const L=(D=i[k])==null?void 0:D.field;return["firstName","email"].includes(L)},y=k=>{var L;return(L=i[k])==null?void 0:L.field},A=k=>{var D;const L=(D=i[k])==null?void 0:D.field;return L?w({get:()=>{var K,B;if(L==="firstName"||L==="lastName")return((K=d[L])==null?void 0:K.toString())||"";const[$,M]=L.split(".");return((B=M?d[$][M]:d[$])==null?void 0:B.toString())||""},set:async $=>{if(L==="firstName"||L==="lastName")d[L]=$,d.name=`${d.firstName} ${d.lastName}`.trim();else{const[K,B]=L.split(".");B?d[K][B]=$:d[K]=$}if(await p.value.$validate()){const{firstName:K,lastName:B,...H}=d;o("update",H)}}}):null},C=k=>{var L;return E(k)&&((L=p.value[y(k)])!=null&&L.$error)?"error":"info"},O=k=>{const L=Ua.find(D=>D.id===k);d.additionalAttributes.country=(L==null?void 0:L.name)||"",o("update",d)},N=()=>{p.value.$reset()},R=()=>{Object.assign(d,r)};return lt(()=>s.contactData,g,{immediate:!0,deep:!0}),t({state:d,resetValidation:N,isFormInvalid:h,resetForm:R}),(k,L)=>(m(),f("div",k7e,[c("div",L7e,[c("span",D7e,v(I(a)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.TITLE")),1),c("div",P7e,[(m(!0),f(pe,null,ye(T.value,D=>(m(),f(pe,{key:D.key},[D.key==="COUNTRY"?(m(),P(Oi,{key:0,modelValue:d.additionalAttributes.countryCode,"onUpdate:modelValue":[L[0]||(L[0]=$=>d.additionalAttributes.countryCode=$),O],options:_.value,placeholder:D.placeholder,class:re(["[&>div>button]:h-8",{"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:!outline-transparent":!e.isDetailsView,"[&>div>button]:!bg-n-alpha-black2":e.isDetailsView}])},null,8,["modelValue","options","placeholder","class"])):D.key==="PHONE_NUMBER"?(m(),P(M7e,{key:1,modelValue:A(D.key).value,"onUpdate:modelValue":$=>A(D.key).value=$,placeholder:D.placeholder,"show-border":e.isDetailsView},null,8,["modelValue","onUpdate:modelValue","placeholder","show-border"])):(m(),P(ps,{key:2,modelValue:A(D.key).value,"onUpdate:modelValue":$=>A(D.key).value=$,placeholder:D.placeholder,"message-type":C(D.key),"custom-input-class":`h-8 !pt-1 !pb-1 ${e.isDetailsView?"":"[&:not(.error,.focus)]:!outline-transparent"}`,class:"w-full",onInput:$=>E(D.key)&&I(p)[y(D.key)].$touch(),onBlur:$=>E(D.key)&&I(p)[y(D.key)].$touch()},null,8,["modelValue","onUpdate:modelValue","placeholder","message-type","custom-input-class","onInput","onBlur"]))],64))),128))])]),c("div",B7e,[c("span",F7e,v(I(a)("CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.TITLE")),1),c("div",U7e,[(m(!0),f(pe,null,ye(S.value,D=>(m(),f("div",{key:D.key,class:re(["flex items-center h-8 gap-2 px-2 rounded-lg",{"bg-n-alpha-2 dark:bg-n-solid-2":e.isDetailsView,"bg-n-alpha-2 dark:bg-n-solid-3":!e.isDetailsView}])},[b(Ht,{icon:D.icon,class:"flex-shrink-0 text-n-slate-11 size-4"},null,8,["icon"]),ie(c("input",{"onUpdate:modelValue":$=>d.additionalAttributes.socialProfiles[D.key.toLowerCase()]=$,class:"w-auto min-w-[100px] text-sm bg-transparent outline-none reset-base text-n-slate-12 dark:text-n-slate-12 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10",placeholder:D.placeholder,size:D.placeholder.length,onInput:L[1]||(L[1]=$=>o("update",d))},null,40,G7e),[[at,d.additionalAttributes.socialProfiles[D.key.toLowerCase()]]])],2))),128))])])]))}},V7e={class:"flex items-center justify-between w-full gap-3"},x2={__name:"CreateNewContactDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=U(null),i=U(null),l=U(null),r=Ve("contacts/getUIFlags"),d=w(()=>r.value.isCreating),u=_=>{l.value=_},p=async()=>{l.value&&s("create",l.value)},h=()=>{var _;(_=i.value)==null||_.resetForm(),a.value.close()},g=()=>{a.value.close()};return t({dialogRef:a,contactsFormRef:i,onSuccess:h}),(_,T)=>(m(),P(Ss,{ref_key:"dialogRef",ref:a,width:"3xl",onConfirm:p},{footer:j(()=>{var S;return[c("div",V7e,[b(he,{label:I(o)("DIALOG.BUTTONS.CANCEL"),variant:"link",type:"reset",class:"h-10 hover:!no-underline hover:text-n-brand",onClick:g},null,8,["label"]),b(he,{type:"submit",label:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SAVE_CONTACT"),color:"blue",disabled:(S=i.value)==null?void 0:S.isFormInvalid,"is-loading":d.value},null,8,["label","disabled","is-loading"])])]}),default:j(()=>[b(k_,{ref_key:"contactsFormRef",ref:i,"is-new-contact":"",onUpdate:u},null,512)]),_:1},512))}},H7e={__name:"ContactExportDialog",emits:["export"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=xn(),i=U(null),l=Ve("customViews/getContactCustomViews"),r=Ve("contacts/getAppliedContactFilters"),d=Ve("contacts/getUIFlags"),u=w(()=>d.value.isExporting),p=w(()=>a.params.segmentId),h=w(()=>p.value?l.value.find(T=>T.id===Number(p.value)):void 0),g=async()=>{let T={payload:[]};p.value&&h.value?T=h.value.query:Object.keys(r.value).length>0&&(T=vo(r.value)),s("export",{...T,label:a.params.label||""})},_=async()=>{var T;await g(),(T=i.value)==null||T.close()};return t({dialogRef:i}),(T,S)=>(m(),P(Ss,{ref_key:"dialogRef",ref:i,title:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.TITLE"),description:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.DESCRIPTION"),"confirm-button-label":I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.CONFIRM"),"is-loading":u.value,"disable-confirm-button":u.value,onConfirm:_},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}},K7e={class:"mb-0 text-sm text-n-slate-11"},z7e={class:"flex flex-col gap-2"},W7e={class:"flex items-center gap-2"},j7e={class:"text-sm text-n-slate-12 whitespace-nowrap"},Y7e={class:"flex items-center justify-between w-full gap-2"},X7e={key:0,class:"text-sm text-n-slate-12"},q7e={key:2,class:"flex items-center gap-1"},Z7e="/downloads/import-contacts-sample.csv",Q7e={__name:"ContactImportDialog",emits:["import"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=Ve("contacts/getUIFlags"),i=w(()=>a.value.isImporting),l=U(null),r=U(null),d=U(null),u=U(""),p=()=>{var S;return(S=r.value)==null?void 0:S.click()},h=S=>{const E=S.lastIndexOf("."),y=S.slice(E),A=S.slice(0,E);return A.length>20?`${A.slice(0,20)}...${y}`:S},g=()=>{var E;const S=(E=r.value)==null?void 0:E.files[0];d.value=S,u.value=S?h(S.name):""},_=()=>{d.value=null,r.value&&(r.value.value=null),u.value=""},T=async()=>{d.value&&s("import",d.value)};return t({dialogRef:l}),(S,E)=>(m(),P(Ss,{ref_key:"dialogRef",ref:l,title:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.TITLE"),"confirm-button-label":I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.IMPORT"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:T},{description:j(()=>[c("p",K7e,[be(v(I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DESCRIPTION"))+" ",1),c("a",{href:Z7e,target:"_blank",rel:"noopener noreferrer",download:"import-contacts-sample.csv",class:"text-n-blue-text"},v(I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DOWNLOAD_LABEL")),1)])]),default:j(()=>[c("div",z7e,[c("div",W7e,[c("label",j7e,v(I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.LABEL")),1),c("div",Y7e,[d.value?(m(),f("span",X7e,v(u.value),1)):x("",!0),d.value?(m(),f("div",q7e,[b(he,{label:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHANGE"),color:"slate",variant:"ghost",size:"sm",onClick:p},null,8,["label"]),E[0]||(E[0]=c("div",{class:"w-px h-3 bg-n-strong"},null,-1)),b(he,{icon:"i-lucide-trash",color:"slate",variant:"ghost",size:"sm",onClick:_})])):(m(),P(he,{key:1,label:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHOOSE_FILE"),icon:"i-lucide-upload",color:"slate",variant:"ghost",size:"sm",class:"!w-fit",onClick:p},null,8,["label"]))])])]),c("input",{ref_key:"fileInput",ref:r,type:"file",accept:"text/csv",class:"hidden",onChange:g},null,544)]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},J7e=1,eFe={__name:"CreateSegmentDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=Ve("customViews/getUIFlags"),i=w(()=>a.value.isCreating),l=U(null),r=ks({name:""}),u=Lt({name:{required:it}},r),p=async()=>{await u.value.$validate()&&(s("create",{name:r.name,filter_type:J7e}),r.name="",u.value.$reset())};return t({dialogRef:l}),(h,g)=>(m(),P(Ss,{ref_key:"dialogRef",ref:l,title:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.TITLE"),"confirm-button-label":I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.CONFIRM"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:p},{default:j(()=>[b(ps,{modelValue:r.name,"onUpdate:modelValue":g[0]||(g[0]=_=>r.name=_),label:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.LABEL"),placeholder:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.PLACEHOLDER"),message:I(u).name.$error?I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR"):"","message-type":I(u).name.$error?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},tFe="contact",nFe={__name:"DeleteSegmentDialog",emits:["delete"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=Ve("customViews/getUIFlags"),i=w(()=>a.value.isDeleting),l=U(null),r=async()=>{s("delete",{filterType:tFe})};return t({dialogRef:l}),(d,u)=>(m(),P(Ss,{ref_key:"dialogRef",ref:l,type:"alert",title:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.TITLE"),description:I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.DESCRIPTION"),"confirm-button-label":I(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.CONFIRM"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:r},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}};function sFe(){const{t:e}=He(),t=Ve("attributes/getContactAttributes"),{equalityOperators:n,containmentOperators:s,dateOperators:o,getOperatorTypes:a}=yS(),i=w(()=>AS(t.value,a,"contact"));return{filterTypes:w(()=>[{attributeKey:ds.NAME,value:ds.NAME,attributeName:e("CONTACTS_LAYOUT.FILTER.NAME"),label:e("CONTACTS_LAYOUT.FILTER.NAME"),inputType:"plainText",dataType:"text",filterOperators:n.value,attributeModel:"standard"},{attributeKey:ds.EMAIL,value:ds.EMAIL,attributeName:e("CONTACTS_LAYOUT.FILTER.EMAIL"),label:e("CONTACTS_LAYOUT.FILTER.EMAIL"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ds.PHONE_NUMBER,value:ds.PHONE_NUMBER,attributeName:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),label:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ds.IDENTIFIER,value:ds.IDENTIFIER,attributeName:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),label:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),inputType:"plainText",dataType:"number",filterOperators:n.value,attributeModel:"standard"},{attributeKey:ds.COUNTRY_CODE,value:ds.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:Ua,dataType:"number",filterOperators:n.value,attributeModel:"additional"},{attributeKey:ds.CITY,value:ds.CITY,attributeName:e("CONTACTS_LAYOUT.FILTER.CITY"),label:e("CONTACTS_LAYOUT.FILTER.CITY"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ds.CREATED_AT,value:ds.CREATED_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),label:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:o.value,attributeModel:"standard"},{attributeKey:ds.LAST_ACTIVITY_AT,value:ds.LAST_ACTIVITY_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),label:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:o.value,attributeModel:"standard"},{attributeKey:ds.REFERER,value:ds.REFERER,attributeName:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),label:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:ds.BLOCKED,value:ds.BLOCKED,attributeName:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),label:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),inputType:"searchSelect",options:[{id:"true",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_TRUE")},{id:"false",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_FALSE")}],dataType:"text",filterOperators:n.value,attributeModel:"standard"},...i.value])}}const aFe={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},oFe={class:"text-base font-medium leading-6 text-n-slate-12"},iFe={key:0},lFe={class:"pb-6 border-b border-n-weak"},rFe={class:"mb-2 text-sm text-n-slate-11"},cFe=["placeholder"],dFe={class:"grid gap-4 list-none"},uFe={class:"flex justify-between gap-2"},mFe={class:"flex gap-2"},pFe={__name:"ContactsFilter",props:On({isSegmentView:{type:Boolean,default:!1},segmentName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:On(["applyFilter","updateSegment","close","clearFilters"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:o}=sFe(),a=Wn(e,"modelValue"),i=U(n.segmentName),l={attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"},{t:r}=He(),d=Ot(),u=()=>{s("clearFilters"),a.value=[{...l}]},p=A=>{a.value.length===1?u():a.value.splice(A,1)},h=()=>{a.value.push({...l})},g=Us("conditionsRef"),_=()=>g.value.every(A=>A.validate()),T=()=>{_()&&s("updateSegment",a.value,i.value)};function S(){_()&&(d.dispatch("contacts/setContactFilters",$s(JSON.parse(JSON.stringify(a.value)))),s("applyFilter",a.value),jt(ll.APPLY_FILTER,{appliedFilters:a.value.map(A=>({key:A.attributeKey,operator:A.filterOperator,queryOperator:A.queryOperator}))}))}const E=w(()=>n.isSegmentView?r("CONTACTS_LAYOUT.FILTER.EDIT_SEGMENT"):r("CONTACTS_LAYOUT.FILTER.TITLE"));ml(()=>s("close"));const y=[()=>s("close"),{ignore:["#toggleContactsFilterButton"]}];return(A,C)=>ie((m(),f("div",aFe,[c("h3",oFe,v(E.value),1),n.isSegmentView?(m(),f("div",iFe,[c("label",lFe,[c("div",rFe,v(A.$t("CONTACTS_LAYOUT.FILTER.SEGMENT.LABEL")),1),ie(c("input",{"onUpdate:modelValue":C[0]||(C[0]=O=>i.value=O),class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base w-full",placeholder:I(r)("CONTACTS_LAYOUT.FILTER.SEGMENT.INPUT_PLACEHOLDER")},null,8,cFe),[[at,i.value]])])])):x("",!0),c("ul",dFe,[(m(!0),f(pe,null,ye(a.value,(O,N)=>(m(),f(pe,{key:O.id},[N===0?(m(),P(ku,{ref_for:!0,ref_key:"conditionsRef",ref:g,key:`filter-${O.attributeKey}-0`,"attribute-key":O.attributeKey,"onUpdate:attributeKey":R=>O.attributeKey=R,"filter-operator":O.filterOperator,"onUpdate:filterOperator":R=>O.filterOperator=R,values:O.values,"onUpdate:values":R=>O.values=R,"filter-types":I(o),"show-query-operator":!1,onRemove:R=>p(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(m(),P(ku,{key:`filter-${O.attributeKey}-${N}`,ref_for:!0,ref_key:"conditionsRef",ref:g,"attribute-key":O.attributeKey,"onUpdate:attributeKey":R=>O.attributeKey=R,"filter-operator":O.filterOperator,"onUpdate:filterOperator":R=>O.filterOperator=R,"query-operator":a.value[N-1].queryOperator,"onUpdate:queryOperator":R=>a.value[N-1].queryOperator=R,values:O.values,"onUpdate:values":R=>O.values=R,"show-query-operator":"","filter-types":I(o),onRemove:R=>p(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),c("div",uFe,[b(he,{sm:"",ghost:"",blue:"",onClick:h},{default:j(()=>[be(v(A.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.ADD_FILTER")),1)]),_:1}),c("div",mFe,[b(he,{sm:"",faded:"",slate:"",onClick:u},{default:j(()=>[be(v(A.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.CLEAR_FILTERS")),1)]),_:1}),e.isSegmentView?(m(),P(he,{key:0,sm:"",solid:"",blue:"",disabled:!i.value,onClick:T},{default:j(()=>[be(v(A.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.UPDATE_SEGMENT")),1)]),_:1},8,["disabled"])):(m(),P(he,{key:1,sm:"",solid:"",blue:"",onClick:S},{default:j(()=>[be(v(A.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.APPLY_FILTERS")),1)]),_:1}))])])])),[[I(qo),y]])}},hFe={__name:"ContactListHeaderWrapper",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},headerTitle:{type:String,default:""},segmentsId:{type:[String,Number],default:0},activeSegment:{type:Object,default:null},hasAppliedFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1}},emits:["update:sort","search","applyFilter","clearFilters"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=wn(),r=U(null),d=U(null),u=U(null),p=U(null),h=U(null),g=U(!1),_=U([]),T=U({}),S=Ve("contacts/getAppliedContactFiltersV4"),E=Ve("attributes/getContactAttributes"),y=w(()=>s.activeSegment&&s.segmentsId!==0),A=w(()=>{var z;return(z=s.activeSegment)==null?void 0:z.name}),C=async()=>{var z,W;await((z=r.value)==null?void 0:z.contactsFormRef.resetValidation()),(W=r.value)==null||W.dialogRef.open()},O=()=>{var z;return(z=u.value)==null?void 0:z.dialogRef.open()},N=()=>{var z;return(z=d.value)==null?void 0:z.dialogRef.open()},R=()=>{var z;return(z=p.value)==null?void 0:z.dialogRef.open()},k=()=>{var z;return(z=h.value)==null?void 0:z.dialogRef.open()},L=async z=>{var W;try{await i.dispatch("contacts/create",z),(W=r.value)==null||W.onSuccess(),Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SUCCESS_MESSAGE"))}catch(q){const Z="CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION";q instanceof wc?q.data.includes("email")?Te(a(`${Z}.EMAIL_ADDRESS_DUPLICATE`)):q.data.includes("phone_number")&&Te(a(`${Z}.PHONE_NUMBER_DUPLICATE`)):q instanceof ar?Te(q.data):Te(a(`${Z}.ERROR_MESSAGE`))}},D=async z=>{var W;try{await i.dispatch("contacts/import",z),(W=u.value)==null||W.dialogRef.close(),Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.SUCCESS_MESSAGE")),jt(ll.IMPORT_SUCCESS)}catch(q){Te(q.message??a("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.ERROR_MESSAGE")),jt(ll.IMPORT_FAILURE)}},$=async z=>{try{await i.dispatch("contacts/export",z),Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.SUCCESS_MESSAGE"))}catch(W){Te(W.message||a("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.ERROR_MESSAGE"))}},M=async z=>{var W,q;try{const Z={...z,query:T.value},ne=await i.dispatch("customViews/create",Z);(W=p.value)==null||W.dialogRef.close(),Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.SUCCESS_MESSAGE"));const ae=(q=ne==null?void 0:ne.data)==null?void 0:q.id;if(!ae)return;l.push({name:"contacts_dashboard_segments_index",params:{segmentId:ae},query:{page:1}})}catch{Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR_MESSAGE"))}},K=async z=>{var W;try{await i.dispatch("customViews/delete",{id:Number(s.segmentsId),...z}),l.push({name:"contacts_dashboard_index",query:{page:1}}),(W=h.value)==null||W.dialogRef.close(),Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.SUCCESS_MESSAGE"))}catch{Te(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.ERROR_MESSAGE"))}},B=()=>{g.value=!1,_.value=[]},H=async()=>{o("clearFilters")},G=async z=>{z=$s(z),T.value=vo(z),o("applyFilter",vo(z)),g.value=!1},V=async(z,W)=>{z=$s(z);const q={...s.activeSegment,name:W,query:vo(z)};await i.dispatch("customViews/update",q),B()},Y=()=>({countries:Ua,filterTypes:jve,allCustomAttributes:$s(E.value)}),ee=z=>{var Z,ne;const W=(ne=(Z=I(z))==null?void 0:Z.query)==null?void 0:ne.payload;if(!Array.isArray(W))return;const q=W.map(ae=>{const ue=To(ae),te=Array.isArray(ue.values)?RS($s(ae),Y()):[];return{attributeKey:ue.attributeKey,attributeModel:ue.attributeModel,customAttributeType:ue.customAttributeType,filterOperator:ue.filterOperator,queryOperator:ue.queryOperator??"and",values:te}});_.value=[..._.value,...q]},X=()=>{_.value=[],y.value?ee(s.activeSegment):_.value=s.hasAppliedFilters?[...S.value]:[{attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"}],g.value=!0};return t({onToggleFilters:X}),(z,W)=>(m(),f(pe,null,[b(T7e,{"show-search":e.showSearch,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"is-segments-view":y.value,"is-label-view":e.isLabelView,"has-active-filters":e.hasAppliedFilters,"button-label":I(a)("CONTACTS_LAYOUT.HEADER.MESSAGE_BUTTON"),onSearch:W[1]||(W[1]=q=>o("search",q)),"onUpdate:sort":W[2]||(W[2]=q=>o("update:sort",q)),onAdd:C,onImport:O,onExport:N,onFilter:X,onCreateSegment:R,onDeleteSegment:k},{filter:j(()=>[g.value?(m(),P(pFe,{key:0,modelValue:_.value,"onUpdate:modelValue":W[0]||(W[0]=q=>_.value=q),"segment-name":A.value,"is-segment-view":y.value,class:"absolute mt-1 ltr:right-0 rtl:left-0 top-full",onApplyFilter:G,onUpdateSegment:V,onClose:B,onClearFilters:H},null,8,["modelValue","segment-name","is-segment-view"])):x("",!0)]),_:1},8,["show-search","search-value","active-sort","active-ordering","header-title","is-segments-view","is-label-view","has-active-filters","button-label"]),b(x2,{ref_key:"createNewContactDialogRef",ref:r,onCreate:L},null,512),b(H7e,{ref_key:"contactExportDialogRef",ref:d,onExport:$},null,512),b(Q7e,{ref_key:"contactImportDialogRef",ref:u,onImport:D},null,512),b(eFe,{ref_key:"createSegmentDialogRef",ref:p,onCreate:M},null,512),b(nFe,{ref_key:"deleteSegmentDialogRef",ref:h,onDelete:K},null,512)],64))}},fFe={class:"flex flex-wrap items-center w-full gap-2 mx-auto"},gFe={key:0,class:"inline-flex items-center gap-2 h-7"},_Fe={class:"lowercase whitespace-nowrap first-letter:capitalize text-n-slate-12"},vFe={class:"px-1 text-xs text-n-slate-10 whitespace-nowrap"},bFe={key:0,class:"content-center h-full px-1 text-xs font-medium uppercase rounded-lg text-n-slate-10"},EFe={key:1,class:"w-px h-3 rounded-lg bg-n-strong"},TFe={__name:"ActiveFilterPreview",props:{appliedFilters:{type:Array,default:()=>[]},maxVisibleFilters:{type:Number,default:2},clearButtonLabel:{type:String,default:""},moreFiltersLabel:{type:String,default:""},showClearButton:{type:Boolean,default:!0}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=t,s=i=>!["email"].includes(i),o=i=>({equal_to:"is",not_equal_to:"is not",contains:"contains",does_not_contain:"does not contain",is_present:"is present",is_not_present:"is not present",is_greater_than:"is greater than",is_less_than:"is less than",days_before:"days before"})[i]||pb(i),a=i=>i?Array.isArray(i)?i.join(", "):typeof i=="object"&&i.name?i.name:i:"";return(i,l)=>(m(),f("div",fFe,[(m(!0),f(pe,null,ye(e.appliedFilters,(r,d)=>(m(),f(pe,{key:d},[d<e.maxVisibleFilters?(m(),f("div",gFe,[c("div",{class:"flex items-center h-full min-w-0 gap-1 px-2 py-1 text-xs border rounded-lg hover:bg-n-solid-2 max-w-72 border-n-weak hover:cursor-pointer",onClick:l[0]||(l[0]=u=>n("openFilter"))},[c("span",_Fe,v(I(pb)(r.attributeKey)),1),c("span",vFe,v(o(r.filterOperator)),1),r.values?(m(),f("span",{key:0,class:re(["lowercase truncate text-n-slate-12",{"first-letter:capitalize":s(r.attributeKey)}])},v(a(r.values)),3)):x("",!0)]),d<e.maxVisibleFilters-1&&d<e.appliedFilters.length-1?(m(),f("span",bFe,v(r.queryOperator),1)):x("",!0)])):x("",!0)],64))),128)),e.appliedFilters.length>e.maxVisibleFilters?(m(),f("div",{key:0,class:"inline-flex items-center content-center px-1 text-xs rounded-lg text-n-slate-10 hover:text-n-slate-11 h-7 hover:cursor-pointer",onClick:l[1]||(l[1]=r=>n("openFilter"))},v(e.moreFiltersLabel),1)):x("",!0),e.showClearButton?(m(),f("div",EFe)):x("",!0),e.showClearButton?(m(),P(he,{key:2,label:e.clearButtonLabel,size:"xs",class:"!px-1",variant:"ghost",onClick:l[2]||(l[2]=r=>n("clearFilters"))},null,8,["label"])):x("",!0)]))}},yFe={__name:"ContactsActiveFiltersPreview",props:{activeSegment:{type:Object,default:null}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=xn(),i=Ve("contacts/getAppliedContactFiltersV4"),l=w(()=>a.params.segmentId),r=w(()=>{var g,_;const p=(_=(g=n.activeSegment)==null?void 0:g.query)==null?void 0:_.payload;return Array.isArray(p)?p.map(T=>{const S=To(T);return{attributeKey:S.attributeKey,attributeModel:S.attributeModel,customAttributeType:S.customAttributeType,filterOperator:S.filterOperator,queryOperator:S.queryOperator??"and",values:S.values}}):[]}),d=w(()=>n.activeSegment&&l.value!==0),u=w(()=>d.value?r.value:i.value);return(p,h)=>(m(),P(TFe,{"applied-filters":u.value,"max-visible-filters":2,"more-filters-label":I(o)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.MORE_FILTERS",{count:u.value.length-2}),"clear-button-label":I(o)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.CLEAR_FILTERS"),"show-clear-button":!d.value,class:"max-w-[60rem] px-6",onOpenFilter:h[0]||(h[0]=g=>s("openFilter")),onClearFilters:h[1]||(h[1]=g=>s("clearFilters"))},null,8,["applied-filters","more-filters-label","clear-button-label","show-clear-button"]))}},AFe={class:"flex justify-between h-12 w-full max-w-[calc(60rem-3px)] outline outline-n-container outline-1 -outline-offset-1 mx-auto bg-n-solid-2 rounded-xl py-2 ltr:pl-4 rtl:pr-4 ltr:pr-3 rtl:pl-3 items-center before:absolute before:inset-x-0 before:-top-4 before:bg-gradient-to-t before:from-n-background before:from-10% before:dark:from-0% before:to-transparent before:h-4 before:pointer-events-none"},SFe={class:"flex items-center gap-3"},IFe={class:"min-w-0 text-sm font-normal line-clamp-1 text-n-slate-11"},CFe={class:"flex items-center gap-2"},NFe={class:"inline-flex items-center gap-2 text-sm text-n-slate-11"},OFe={class:"px-3 tabular-nums py-0.5 bg-n-alpha-black2 rounded-md"},xFe={class:"truncate"},w2={__name:"PaginationFooter",props:{currentPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:16},currentPageInfo:{type:String,default:""}},emits:["update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=w(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=w(()=>(n.currentPage-1)*n.itemsPerPage+1),l=w(()=>Math.min(i.value+n.itemsPerPage-1,n.totalItems)),r=w(()=>n.currentPage===1),d=w(()=>n.currentPage===a.value),u=g=>{g>=1&&g<=a.value&&s("update:currentPage",g)},p=w(()=>o(n.currentPageInfo?n.currentPageInfo:"PAGINATION_FOOTER.SHOWING",{startItem:i.value,endItem:l.value,totalItems:n.totalItems})),h=w(()=>o("PAGINATION_FOOTER.CURRENT_PAGE_INFO",{currentPage:"",totalPages:a.value}));return(g,_)=>(m(),f("div",AFe,[c("div",SFe,[c("span",IFe,v(p.value),1)]),c("div",CFe,[b(he,{icon:"i-lucide-chevrons-left",variant:"ghost",size:"sm",color:"slate",class:"!w-8 !h-6",disabled:r.value,onClick:_[0]||(_[0]=T=>u(1))},null,8,["disabled"]),b(he,{icon:"i-lucide-chevron-left",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:r.value,onClick:_[1]||(_[1]=T=>u(e.currentPage-1))},null,8,["disabled"]),c("div",NFe,[c("span",OFe,v(e.currentPage),1),c("span",xFe,v(h.value),1)]),b(he,{icon:"i-lucide-chevron-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:d.value,onClick:_[2]||(_[2]=T=>u(e.currentPage+1))},null,8,["disabled"]),b(he,{icon:"i-lucide-chevrons-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:d.value,onClick:_[3]||(_[3]=T=>u(a.value))},null,8,["disabled"])])]))}},wFe={class:"flex w-full h-full gap-4 overflow-hidden justify-evenly bg-n-background"},RFe={class:"flex flex-col w-full h-full transition-all duration-300"},$Fe={class:"flex-1 overflow-y-auto"},MFe={class:"w-full mx-auto max-w-[60rem]"},kFe={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"},LFe={__name:"ContactsListLayout",props:{searchValue:{type:String,default:""},headerTitle:{type:String,default:""},showPaginationFooter:{type:Boolean,default:!0},currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},itemsPerPage:{type:Number,default:15},activeSort:{type:String,default:""},activeOrdering:{type:String,default:""},activeSegment:{type:Object,default:null},segmentsId:{type:[String,Number],default:0},hasAppliedFilters:{type:Boolean,default:!1},isFetchingList:{type:Boolean,default:!1}},emits:["update:currentPage","update:sort","search","applyFilter","clearFilters"],setup(e,{emit:t}){const n=t,s=xn(),o=U(null),a=w(()=>s.name!=="contacts_dashboard_segments_index"),i=w(()=>s.name==="contacts_dashboard_labels_index"),l=d=>{n("update:currentPage",d)},r=()=>{var d;(d=o.value)==null||d.onToggleFilters()};return(d,u)=>(m(),f("section",wFe,[c("div",RFe,[b(hFe,{ref_key:"contactListHeaderWrapper",ref:o,"show-search":a.value,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"active-segment":e.activeSegment,"segments-id":e.segmentsId,"has-applied-filters":e.hasAppliedFilters,"is-label-view":i.value,"onUpdate:sort":u[0]||(u[0]=p=>n("update:sort",p)),onSearch:u[1]||(u[1]=p=>n("search",p)),onApplyFilter:u[2]||(u[2]=p=>n("applyFilter",p)),onClearFilters:u[3]||(u[3]=p=>n("clearFilters"))},null,8,["show-search","search-value","active-sort","active-ordering","header-title","active-segment","segments-id","has-applied-filters","is-label-view"]),c("main",$Fe,[c("div",MFe,[(e.hasAppliedFilters||!a.value)&&!e.isFetchingList&&!i.value?(m(),P(yFe,{key:0,"active-segment":e.activeSegment,onClearFilters:u[4]||(u[4]=p=>n("clearFilters")),onOpenFilter:r},null,8,["active-segment"])):x("",!0),et(d.$slots,"default")])]),e.showPaginationFooter?(m(),f("footer",kFe,[b(w2,{"current-page-info":"CONTACTS_LAYOUT.PAGINATION_FOOTER.SHOWING","current-page":e.currentPage,"total-items":e.totalItems,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":l},null,8,["current-page","total-items","items-per-page"])])):x("",!0)])]))}},DFe={class:"flex flex-col w-full shadow outline-1 outline outline-n-container group/cardLayout rounded-2xl bg-n-solid-2"},yl={__name:"CardLayout",props:{layout:{type:String,default:"col"},selectable:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(m(),f("div",DFe,[c("div",{class:re(["flex w-full gap-3 py-5",[e.layout==="col"?"flex-col":"flex-row justify-between items-center",e.selectable?"px-10 py-6":"px-6"]]),onClick:s},[et(o.$slots,"default")],2),et(o.$slots,"after")]))}},PFe={__name:"Flag",props:{country:{type:String,required:!0},squared:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{const s=["fi",`fi-${t.country.toLowerCase()}`,"flex-shrink-0"];return t.squared&&s.push("fis"),kn("span",{class:s})};return(s,o)=>(m(),P(hs(n)))}},BFe={class:"flex items-center justify-start flex-1 gap-4"},FFe={class:"flex flex-col gap-0.5 flex-1"},UFe={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},GFe={class:"text-base font-medium truncate text-n-slate-12"},VFe={class:"inline-flex items-center gap-1"},HFe={key:0,class:"i-ph-building-light size-4 text-n-slate-10 mb-0.5"},KFe={key:1,class:"text-sm truncate text-n-slate-11"},zFe={class:"flex flex-wrap items-center justify-start gap-x-3 gap-y-1"},WFe=["title"],jFe={class:"text-sm text-n-slate-11"},YFe={key:1,class:"w-px h-3 truncate bg-n-slate-6"},XFe={key:2,class:"text-sm truncate text-n-slate-11"},qFe={key:3,class:"w-px h-3 truncate bg-n-slate-6"},ZFe={key:4,class:"inline-flex items-center gap-2 text-sm truncate text-n-slate-11"},QFe={key:5,class:"w-px h-3 truncate bg-n-slate-6"},JFe={class:"w-full"},eUe={class:"flex flex-col gap-6 p-6 border-t border-n-strong"},R2={__name:"ContactsCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},email:{type:String,default:""},additionalAttributes:{type:Object,default:()=>({})},phoneNumber:{type:String,default:""},thumbnail:{type:String,default:""},isExpanded:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1}},emits:["toggle","updateContact","showContact"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(null),i=()=>({id:n.id,name:n.name,email:n.email,phoneNumber:n.phoneNumber,additionalAttributes:n.additionalAttributes}),l=U(i()),r=w(()=>{var S;return(S=a.value)==null?void 0:S.isFormInvalid}),d=w(()=>Ua.reduce((S,E)=>(S[E.code]=E,S[E.id]=E,S),{})),u=w(()=>{const S=n.additionalAttributes||{},{country:E,countryCode:y,city:A}=S;if(!E&&!y)return null;const C=d.value[E]||d.value[y];return C?{countryCode:C.id,city:A?`${A},`:null,name:C.name}:null}),p=w(()=>u.value?[u.value.city,u.value.name].filter(Boolean).join(" "):""),h=S=>{Object.assign(l.value,S)},g=()=>{s("updateContact",l.value)},_=()=>{s("toggle"),l.value=i()},T=()=>s("showContact",n.id);return(S,E)=>(m(),P(yl,{key:e.id,layout:"row"},{after:j(()=>[b(Ms,{"enter-active-class":"overflow-hidden transition-all duration-300 ease-out","leave-active-class":"overflow-hidden transition-all duration-300 ease-in","enter-from-class":"overflow-hidden opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[690px] sm:max-h-[470px] md:max-h-[410px]","leave-from-class":"opacity-100 max-h-[690px] sm:max-h-[470px] md:max-h-[410px]","leave-to-class":"overflow-hidden opacity-0 max-h-0"},{default:j(()=>[ie(c("div",JFe,[c("div",eUe,[b(k_,{ref_key:"contactsFormRef",ref:a,"contact-data":l.value,onUpdate:h},null,8,["contact-data"]),c("div",null,[b(he,{label:I(o)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":e.isUpdating,disabled:e.isUpdating||r.value,onClick:g},null,8,["label","is-loading","disabled"])])])],512),[[ln,e.isExpanded]])]),_:1})]),default:j(()=>{var y,A;return[c("div",BFe,[b(yn,{name:e.name,src:e.thumbnail,size:48,"rounded-full":""},null,8,["name","src"]),c("div",FFe,[c("div",UFe,[c("span",GFe,v(e.name),1),c("span",VFe,[(y=e.additionalAttributes)!=null&&y.companyName?(m(),f("span",HFe)):x("",!0),(A=e.additionalAttributes)!=null&&A.companyName?(m(),f("span",KFe,v(e.additionalAttributes.companyName),1)):x("",!0)])]),c("div",zFe,[e.email?(m(),f("div",{key:0,class:"truncate max-w-72",title:e.email},[c("span",jFe,v(e.email),1)],8,WFe)):x("",!0),e.email?(m(),f("div",YFe)):x("",!0),e.phoneNumber?(m(),f("span",XFe,v(e.phoneNumber),1)):x("",!0),e.phoneNumber?(m(),f("div",qFe)):x("",!0),u.value?(m(),f("span",ZFe,[b(PFe,{country:u.value.countryCode,class:"size-3.5"},null,8,["country"]),be(" "+v(p.value),1)])):x("",!0),u.value?(m(),f("div",QFe)):x("",!0),b(he,{label:I(o)("CONTACTS_LAYOUT.CARD.VIEW_DETAILS"),variant:"link",size:"xs",onClick:T},null,8,["label"])])])]),b(he,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",class:re({"rotate-180":e.isExpanded}),onClick:_},null,8,["class"])]}),_:1}))}},tUe={class:"flex flex-col gap-4 px-6 pt-4 pb-6"},nUe={__name:"ContactsList",props:{contacts:{type:Array,required:!0}},setup(e){const{t}=He(),n=Ot(),s=wn(),o=xn(),a=Ve("contacts/getUIFlags"),i=w(()=>a.value.isUpdating),l=U(null),r=async p=>{try{await n.dispatch("contacts/update",p),Te(t("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch(h){const g="CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM";h instanceof wc?h.data.includes("email")?Te(t(`${g}.EMAIL_ADDRESS.DUPLICATE`)):h.data.includes("phone_number")&&Te(t(`${g}.PHONE_NUMBER.DUPLICATE`)):h instanceof ar?Te(h.data):Te(t(`${g}.ERROR_MESSAGE`))}},d=async p=>{const h={contacts_dashboard_segments_index:["contacts_edit_segment","segmentId"],contacts_dashboard_labels_index:["contacts_edit_label","label"]},[g,_]=h[o.name]||["contacts_edit"],T={contactId:p,..._&&{[_]:o.params[_]}};await s.push({name:g,params:T,query:o.query})},u=p=>{l.value=l.value===p?null:p};return(p,h)=>(m(),f("div",tUe,[(m(!0),f(pe,null,ye(e.contacts,g=>(m(),P(R2,{id:g.id,key:g.id,name:g.name,email:g.email,thumbnail:g.thumbnail,"phone-number":g.phoneNumber,"additional-attributes":g.additionalAttributes,"is-expanded":l.value===g.id,"is-updating":i.value,onToggle:_=>u(g.id),onUpdateContact:r,onShowContact:d},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","is-expanded","is-updating","onToggle"]))),128))]))}},sUe={class:"relative flex flex-col items-center justify-center w-full h-full overflow-hidden"},aUe={class:"relative w-full max-w-[60rem] mx-auto overflow-hidden h-full max-h-[28rem]"},oUe={class:"w-full h-full space-y-4 overflow-y-hidden opacity-50 pointer-events-none"},iUe={class:"absolute inset-x-0 bottom-0 flex flex-col items-center justify-end w-full h-full pb-20 bg-gradient-to-t from-n-background from-25% dark:from-n-background to-transparent"},lUe={class:"flex flex-col items-center justify-center gap-6"},rUe={class:"flex flex-col items-center justify-center gap-3"},cUe={class:"text-3xl font-medium text-center text-slate-900 dark:text-white font-interDisplay"},dUe={class:"max-w-xl text-base text-center text-slate-600 dark:text-slate-300 font-interDisplay tracking-[0.3px]"},Mi={__name:"EmptyStateLayout",props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},actionPerms:{type:Array,default:()=>[]}},setup(e){return(t,n)=>(m(),f("section",sUe,[c("div",aUe,[c("div",oUe,[et(t.$slots,"empty-state-item")]),c("div",iUe,[c("div",lUe,[c("div",rUe,[c("h2",cUe,v(e.title),1),c("p",dUe,v(e.subtitle),1)]),b(Ao,{permissions:e.actionPerms},{default:j(()=>[et(t.$slots,"actions")]),_:3},8,["permissions"])])])])]))}},uUe=[{additionalAttributes:{city:"Los Angeles",country:"United States",description:"I'm Candice, a developer focusing on building web solutions. Currently, Im working as a Product Developer at Chatwoot.",companyName:"Chatwoot",countryCode:"US",socialProfiles:{github:"candice-dev",twitter:"candice_w_dev",facebook:"candice.dev",linkedin:"candice-matherson",instagram:"candice.codes"}},availabilityStatus:"offline",email:"candice.matherson@chatwoot.com",id:22,name:"Candice Matherson",phoneNumber:"+14155552671",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-11-11T11:53:09.299Z",linkContact:"https://example.com",listContact:"Follow-Up",textContact:"Hi there!",numberContact:"42",checkboxContact:!1},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"San Francisco",country:"United States",description:"Passionate about design and user experience.",companyName:"Designify",countryCode:"US",socialProfiles:{github:"ophelia-folkard",twitter:"oph_designs",facebook:"ophelia.folkard",linkedin:"ophelia-folkard",instagram:"ophelia.design"}},availabilityStatus:"offline",email:"ophelia.folkard@designify.com",id:21,name:"Ophelia Folkard",phoneNumber:"+14155552672",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-10-05T10:12:34.567Z",linkContact:"https://designify.com",listContact:"Prospects",textContact:"Looking forward to connecting!"},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Austin",country:"United States",description:"Avid coder and tech enthusiast.",companyName:"CodeHub",countryCode:"US",socialProfiles:{github:"willy_castelot",twitter:"willy_code",facebook:"willy.castelot",linkedin:"willy-castelot",instagram:"willy.coder"}},availabilityStatus:"offline",email:"willy.castelot@codehub.io",id:20,name:"Willy Castelot",phoneNumber:"+14155552673",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets collaborate!",checkboxContact:!0},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Seattle",country:"United States",description:"Product manager with a love for innovation.",companyName:"InnovaTech",countryCode:"US",socialProfiles:{github:"elisabeth-d",twitter:"elisabeth_innova",facebook:"elisabeth.derington",linkedin:"elisabeth-derington",instagram:"elisabeth.innovates"}},availabilityStatus:"offline",email:"elisabeth.derington@innova.com",id:19,name:"Elisabeth Derington",phoneNumber:"+14155552674",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets schedule a call."},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Chicago",country:"United States",description:"Marketing specialist and content creator.",companyName:"Contently",countryCode:"US",socialProfiles:{github:"olia-olenchenko",twitter:"olia_content",facebook:"olia.olenchenko",linkedin:"olia-olenchenko",instagram:"olia.creates"}},availabilityStatus:"offline",email:"olia.olenchenko@contently.com",id:18,name:"Olia Olenchenko",phoneNumber:"+14155552675",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Boston",country:"United States",description:"SEO expert and analytics enthusiast.",companyName:"OptiSearch",countryCode:"US",socialProfiles:{github:"nate-vannuchi",twitter:"nate_seo",facebook:"nathaniel.vannuchi",linkedin:"nathaniel-vannuchi",instagram:"nate.optimizes"}},availabilityStatus:"offline",email:"nathaniel.vannuchi@optisearch.com",id:17,name:"Nathaniel Vannuchi",phoneNumber:"+14155552676",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Denver",country:"United States",description:"UI/UX designer with a flair for minimalist designs.",companyName:"Minimal Designs",countryCode:"US",socialProfiles:{github:"merrile-petruk",twitter:"merrile_ux",facebook:"merrile.petruk",linkedin:"merrile-petruk",instagram:"merrile.designs"}},availabilityStatus:"offline",email:"merrile.petruk@minimal.com",id:16,name:"Merrile Petruk",phoneNumber:"+14155552677",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Miami",country:"United States",description:"Entrepreneur with a background in e-commerce.",companyName:"Ecom Solutions",countryCode:"US",socialProfiles:{github:"cordell-d",twitter:"cordell_entrepreneur",facebook:"cordell.dalinder",linkedin:"cordell-dalinder",instagram:"cordell.ecom"}},availabilityStatus:"offline",email:"cordell.dalinder@ecomsolutions.com",id:15,name:"Cordell Dalinder",phoneNumber:"+14155552678",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232}],mUe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},pUe={key:0},hUe={__name:"ContactEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""},showButton:{type:Boolean,default:!0},buttonLabel:{type:String,default:""}},emits:["create"],setup(e,{emit:t}){const n=t,s=U(null),o=()=>{var a;(a=s.value)==null||a.dialogRef.open()};return(a,i)=>(m(),P(Mi,{title:e.title,subtitle:e.subtitle},{"empty-state-item":j(()=>[c("div",mUe,[(m(!0),f(pe,null,ye(I(uUe).slice(0,5),l=>(m(),P(R2,{id:l.id,key:l.id,name:l.name,email:l.email,thumbnail:l.thumbnail,"phone-number":l.phoneNumber,"additional-attributes":l.additionalAttributes,"is-expanded":l.id===0,onToggle:r=>a.toggleExpanded(l.id)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","is-expanded","onToggle"]))),128))])]),actions:j(()=>[e.showButton?(m(),f("div",pUe,[b(he,{label:e.buttonLabel,icon:"i-lucide-plus",onClick:o},null,8,["label"]),b(x2,{ref_key:"createNewContactDialogRef",ref:s,onCreate:i[0]||(i[0]=l=>n("create",l))},null,512)])):x("",!0)]),_:1},8,["title","subtitle"]))}},fUe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},gUe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},_Ue={key:1,class:"flex items-center justify-center py-10"},vUe={class:"text-base text-n-slate-11"},bUe="last_activity_at",EUe=300,Ld={__name:"ContactsIndex",setup(e){const t=Ot(),n=xn(),s=wn(),{t:o}=He(),{updateUISettings:a,uiSettings:i}=Mn(),l=Ve("contacts/getContactsList"),r=Ve("contacts/getUIFlags"),d=Ve("customViews/getUIFlags"),u=Ve("customViews/getContactCustomViews"),p=Ve("contacts/getAppliedContactFilters"),h=Ve("contacts/getMeta"),g=w(()=>{var ae;return(ae=n.query)==null?void 0:ae.search}),_=U(g.value||""),T=w(()=>{var ae;return Number((ae=n.query)==null?void 0:ae.page)||1}),S=(ae="")=>{const ue=ae.startsWith("-");return{sort:(ue?ae.slice(1):ae)||bUe,order:ue?"-":""}},{contacts_sort_by:E=""}=i.value??{},{sort:y,order:A}=S(E),C=ks({activeSort:y,activeOrdering:A}),O=w(()=>n.params.label),N=w(()=>n.params.segmentId),R=w(()=>r.value.isFetching||d.value.isFetching),k=w(()=>{var ae;return Number((ae=h.value)==null?void 0:ae.currentPage)}),L=w(()=>{var ae;return(ae=h.value)==null?void 0:ae.count}),D=w(()=>{if(N.value)return u.value.find(ae=>ae.id===Number(N.value))}),$=w(()=>l.value.length>0),M=w(()=>n.name==="contacts_dashboard_index"&&T.value===1),K=w(()=>p.value.length>0),B=w(()=>!g.value&&!$.value&&M.value&&!K.value),H=w(()=>(g.value||K.value||!M.value)&&!$.value),G=w(()=>{var ae;return g.value?o("CONTACTS_LAYOUT.HEADER.SEARCH_TITLE"):N.value?(ae=D.value)==null?void 0:ae.name:O.value?`#${O.value}`:o("CONTACTS_LAYOUT.HEADER.TITLE")}),V=(ae,ue="")=>{const te={...n.query,page:ae.toString(),...ue?{search:ue}:{}};ue||delete te.search,s.replace({query:te})},Y=()=>`${C.activeOrdering}${C.activeSort}`,ee=(ae=1)=>({page:ae,sortAttr:Y(),label:O.value}),X=async(ae=1)=>{await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/get",ee(ae)),V(ae)},z=async(ae,ue=1)=>{!N.value&&!K.value||(await t.dispatch("contacts/filter",{...ee(ue),queryPayload:ae}),V(ue))},W=Ko(async(ae,ue=1)=>{if(await t.dispatch("contacts/clearContactFilters"),_.value=ae,!ae){V(ue),await X(ue);return}V(ue,ae),await t.dispatch("contacts/search",{...ee(ue),search:encodeURIComponent(ae)})},EUe),q=async ae=>{var ue,te;if(V(ae,_.value),!R.value){if(g.value){await W(g.value,ae);return}if(_.value="",(K.value||(ue=D.value)!=null&&ue.query)&&!O.value){const ce=((te=D.value)==null?void 0:te.query)||vo(p.value);await z(ce,ae);return}await X(ae)}},Z=async({sort:ae,order:ue})=>{var te;if(Object.assign(C,{activeSort:ae,activeOrdering:ue}),await a({contacts_sort_by:Y()}),g.value){await W(_.value);return}await(N.value||K.value?z(N.value?(te=D.value)==null?void 0:te.query:vo(p.value)):X())},ne=async ae=>{await t.dispatch("contacts/create",ae)};return lt(()=>{var ae;return(ae=i.value)==null?void 0:ae.contacts_sort_by},ae=>{if(ae){const{sort:ue,order:te}=S(ae);C.activeSort=ue,C.activeOrdering=te}},{immediate:!0}),lt([O,D],()=>{q(T.value)},{deep:!0}),lt(g,ae=>{R.value||(_.value=ae||"",ae===void 0&&X())}),ut(async()=>{if(N.value)D.value&&N.value&&await z(D.value.query,T.value);else{if(g.value){await W(g.value,T.value);return}await X(T.value)}}),(ae,ue)=>(m(),f("div",fUe,[b(LFe,{"search-value":_.value,"header-title":G.value,"current-page":k.value,"total-items":L.value,"show-pagination-footer":!R.value&&$.value,"active-sort":C.activeSort,"active-ordering":C.activeOrdering,"active-segment":D.value,"segments-id":N.value,"is-fetching-list":R.value,"has-applied-filters":K.value,"onUpdate:currentPage":q,onSearch:I(W),"onUpdate:sort":Z,onApplyFilter:z,onClearFilters:X},{default:j(()=>[R.value?(m(),f("div",gUe,[b(Gs)])):(m(),f(pe,{key:1},[B.value?(m(),P(hUe,{key:0,class:"pt-14",title:I(o)("CONTACTS_LAYOUT.EMPTY_STATE.TITLE"),subtitle:I(o)("CONTACTS_LAYOUT.EMPTY_STATE.SUBTITLE"),"button-label":I(o)("CONTACTS_LAYOUT.EMPTY_STATE.BUTTON_LABEL"),onCreate:ne},null,8,["title","subtitle","button-label"])):H.value?(m(),f("div",_Ue,[c("span",vUe,v(g.value||!K.value?I(o)("CONTACTS_LAYOUT.EMPTY_STATE.SEARCH_EMPTY_STATE_TITLE"):I(o)("CONTACTS_LAYOUT.EMPTY_STATE.LIST_EMPTY_STATE_TITLE")),1)])):(m(),P(nUe,{key:2,contacts:I(l)},null,8,["contacts"]))],64))]),_:1},8,["search-value","header-title","current-page","total-items","show-pagination-footer","active-sort","active-ordering","active-segment","segments-id","is-fetching-list","has-applied-filters","onSearch"])]))}},TUe=["aria-label"],yUe={class:"flex items-center mb-0"},AUe={class:"min-w-0 truncate"},SUe={class:"text-sm truncate text-slate-900 dark:text-slate-50 max-w-56"},IUe={__name:"Breadcrumb",props:{items:{type:Array,required:!0}},emits:["click"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=a=>{n("click",a)};return(a,i)=>(m(),f("nav",{"aria-label":I(s)("BREADCRUMB.ARIA_LABEL"),class:"flex items-center h-8"},[c("ol",yUe,[(m(!0),f(pe,null,ye(e.items,(l,r)=>(m(),f("li",{key:r,class:"flex items-center"},[r===0?(m(),f("button",{key:0,class:"inline-flex items-center justify-center min-w-0 gap-2 p-0 text-sm font-medium transition-all duration-200 ease-in-out border-0 rounded-lg text-n-slate-11 hover:text-n-slate-12 outline-transparent max-w-56",onClick:o},[c("span",AUe,v(l.label),1)])):(m(),f(pe,{key:1},[b(Ht,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 mx-2 size-4 text-n-slate-11 dark:text-n-slate-11"}),c("span",SUe,v(l.emoji?l.emoji:"")+" "+v(l.label),1)],64))]))),128))])],8,TUe))}},CUe={class:"relative flex items-center"},NUe={key:0,class:"flex items-center gap-1"},OUe={__name:"ListAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),[a,i]=la(),l=w(()=>{var d;return((d=n.attribute.attributeValues)==null?void 0:d.map(u=>({label:u,value:u,action:"select",isSelected:u===n.attribute.value})))||[]}),r=async d=>{s("update",d.value),i(!1)};return(d,u)=>{const p=ct("on-clickaway");return m(),f("div",{class:re(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[ie((m(),f("div",CUe,[c("span",{class:re(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate flex-1":e.isEditingView}]),onClick:u[0]||(u[0]=h=>I(i)(!n.isEditingView))},v(e.attribute.value||I(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.SELECT")),3),I(a)?(m(),P(ma,{key:0,"menu-items":l.value,"show-search":"",class:re(["w-48 mt-2 top-full",{"ltr:right-0 rtl:left-0":!e.isEditingView,"ltr:left-0 rtl:right-0":e.isEditingView}]),onAction:u[1]||(u[1]=h=>r(h))},null,8,["menu-items","class"])):x("",!0)])),[[p,()=>I(i)(!1)]]),e.isEditingView?(m(),f("div",NUe,[b(he,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[2]||(u[2]=h=>I(i)())}),b(he,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[3]||(u[3]=h=>s("delete"))})])):x("",!0)],2)}}},xUe=["aria-checked"],wUe={class:"sr-only"},RUe={__name:"Switch",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:On(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,{t:s}=He(),o=Wn(e,"modelValue"),a=()=>{o.value=!o.value,n("change",!o.value)};return(i,l)=>(m(),f("button",{type:"button",class:re(["relative h-4 transition-colors duration-200 ease-in-out rounded-full w-7 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:ring-offset-n-slate-2 focus:ring-offset-2",o.value?"bg-n-brand":"bg-n-alpha-1 dark:bg-n-alpha-2"]),role:"switch","aria-checked":o.value,onClick:a},[c("span",wUe,v(I(s)("SWITCH.TOGGLE")),1),c("span",{class:re(["absolute top-[0.07rem] left-0.5 h-3 w-3 transform rounded-full shadow-sm transition-transform duration-200 ease-in-out",o.value?"translate-x-2.5 bg-white":"translate-x-0 bg-white dark:bg-n-black"])},null,2)],10,xUe))}},$Ue={__name:"CheckboxAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,o=U(!!n.attribute.value),a=i=>{s("update",i)};return(i,l)=>(m(),f("div",{class:re(["flex items-center w-full gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[b(RUe,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=r=>o.value=r),onChange:a},null,8,["modelValue"]),e.isEditingView?(m(),P(he,{key:0,variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:l[1]||(l[1]=r=>s("delete"))})):x("",!0)],2))}},MUe={key:1,class:"flex items-center gap-1"},kUe={key:2,class:"flex items-center w-full"},LUe={__name:"DateAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!1),i=U(n.attribute.value||""),r=Lt({editedValue:{required:it,isDate:_=>new Date(_).toISOString()}},{editedValue:i}),d=w(()=>n.attribute.value?new Date(n.attribute.value).toLocaleDateString():o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),u=w(()=>r.value.$errors.length>0),p=w({get(){const _=i.value??n.attribute.value;return _?new Date(_).toISOString().slice(0,10):a.value&&!u.value?new Date().toISOString().slice(0,10):""},set(_){i.value=_&&new Date(_).toISOString()}}),h=_=>{a.value=typeof _=="boolean"?_:!a.value,a.value&&!i.value&&(r.value.$reset(),i.value=new Date().toISOString())},g=async()=>{await r.value.$validate()&&(s("update",JT(i.value)),a.value=!1)};return(_,T)=>{const S=ct("on-clickaway");return m(),f("div",{class:re(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[a.value?x("",!0):(m(),f("span",{key:0,class:re(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView}]),onClick:T[0]||(T[0]=E=>h(!e.isEditingView))},v(d.value),3)),e.isEditingView&&!a.value?(m(),f("div",MUe,[b(he,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[1]||(T[1]=E=>h(!0))}),b(he,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[2]||(T[2]=E=>s("delete"))})])):x("",!0),a.value?ie((m(),f("div",kUe,[b(ps,{modelValue:p.value,"onUpdate:modelValue":T[3]||(T[3]=E=>p.value=E),type:"date",class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",message:u.value?I(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_DATE"):"","message-type":u.value?"error":"info",autofocus:"","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:Fn(g,["enter"])},null,8,["modelValue","message","message-type"]),b(he,{icon:"i-lucide-check",color:u.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:g},null,8,["color"])])),[[S,()=>h(!1)]]):x("",!0)],2)}}},DUe=["href"],PUe={key:1,class:"flex items-center gap-1"},BUe={key:2,class:"flex items-center w-full"},FUe={__name:"OtherAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!1),i=U(n.attribute.value||""),l=w(()=>n.attribute.attributeDisplayType==="link"),r=w(()=>n.attribute.attributeDisplayType==="text"),d=w(()=>n.attribute.attributeDisplayType==="number"),u=w(()=>({editedValue:{required:it,...l.value&&{url:E=>!E||Wh(E)},...r.value&&n.attribute.regexPattern&&{regexValidation:E=>E?Yf(n.attribute.regexPattern).test(E):!0}}})),p=Lt(u,{editedValue:i}),h=w(()=>p.value.$error),g=w(()=>{var E,y,A;return h.value?l.value&&((E=p.value.editedValue.url)!=null&&E.$invalid)?o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_URL"):r.value&&n.attribute.regexPattern&&((y=p.value.editedValue.regexValidation)!=null&&y.$invalid)?n.attribute.regexCue||o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_INPUT"):d.value&&((A=p.value.editedValue.required)!=null&&A.$invalid)?o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_NUMBER"):o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.REQUIRED"):""}),_=w(()=>{switch(n.attribute.attributeDisplayType){case"link":return"url";case"number":return"number";default:return"text"}}),T=E=>{a.value=typeof E=="boolean"?E:!a.value,a.value&&(p.value.$reset(),i.value=n.attribute.value||"")},S=async()=>{await p.value.$validate()&&(s("update",i.value),T(!1))};return(E,y)=>{const A=ct("on-clickaway");return m(),f("div",{class:re(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[a.value?x("",!0):(m(),f("span",{key:0,class:re(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView&&!l.value,"truncate hover:text-n-brand text-n-blue-text":e.isEditingView&&l.value}]),onClick:y[1]||(y[1]=C=>T(!e.isEditingView))},[l.value&&e.attribute.value&&e.isEditingView?(m(),f("a",{key:0,href:e.attribute.value,target:"_blank",rel:"noopener noreferrer",class:"hover:underline",onClick:y[0]||(y[0]=Ke(()=>{},["stop"]))},v(e.attribute.value),9,DUe)):(m(),f(pe,{key:1},[be(v(e.attribute.value||I(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),1)],64))],2)),e.isEditingView&&!a.value?(m(),f("div",PUe,[b(he,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:y[2]||(y[2]=C=>T(!0))}),b(he,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:y[3]||(y[3]=C=>s("delete"))})])):x("",!0),a.value?ie((m(),f("div",BUe,[b(ps,{modelValue:i.value,"onUpdate:modelValue":y[4]||(y[4]=C=>i.value=C),placeholder:I(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT"),type:_.value,class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",autofocus:"",message:g.value,"message-type":h.value?"error":"info","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:Fn(S,["enter"])},null,8,["modelValue","placeholder","type","message","message-type"]),b(he,{icon:"i-lucide-check",color:h.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:S},null,8,["color"])])),[[A,()=>T(!1)]]):x("",!0)],2)}}},UUe={class:"flex items-center justify-between truncate"},GUe={class:"text-sm font-medium truncate text-n-slate-12"},mE={__name:"ContactCustomAttributeItem",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},setup(e){const t=e,n=Ot(),{t:s}=He(),o=xn(),a=async()=>{var d;try{await n.dispatch("contacts/deleteCustomAttributes",{id:o.params.contactId,customAttributes:[t.attribute.attributeKey]}),Te(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_SUCCESS_MESSAGE"))}catch(u){Te(((d=u==null?void 0:u.response)==null?void 0:d.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_ERROR"))}},i=async d=>{var u;try{await n.dispatch("contacts/update",{id:o.params.contactId,customAttributes:{[t.attribute.attributeKey]:d}}),Te(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.SUCCESS_MESSAGE"))}catch(p){Te(((u=p==null?void 0:p.response)==null?void 0:u.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.UPDATE_ERROR"))}},l={list:OUe,checkbox:$Ue,date:LUe,default:FUe},r=w(()=>l[t.attribute.attributeDisplayType]||l.default);return(d,u)=>(m(),f("div",{class:re(["grid grid-cols-[140px,1fr] group/attribute items-center w-full gap-2",e.isEditingView?"min-h-10":"min-h-11"])},[c("div",UUe,[c("span",GUe,v(e.attribute.attributeDisplayName),1)]),(m(),P(hs(r.value),{attribute:e.attribute,"is-editing-view":e.isEditingView,onUpdate:i,onDelete:a},null,40,["attribute","is-editing-view"]))],2))}},VUe={key:0,class:"flex flex-col gap-6 px-6 py-6"},HUe={key:0,class:"flex flex-col gap-2"},KUe={key:1,class:"flex items-center gap-3"},zUe={class:"text-sm font-medium text-n-slate-10"},WUe={class:"flex flex-col gap-3"},jUe={key:0,class:"relative"},YUe=["placeholder"],XUe={key:1,class:"flex items-center justify-start h-11"},qUe={class:"text-sm text-n-slate-11"},ZUe={key:2,class:"flex flex-col gap-2"},QUe={key:1,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},JUe={__name:"ContactCustomAttributes",props:{selectedContact:{type:Object,default:null}},setup(e){const t=e,{t:n}=He(),{uiSettings:s}=Mn(),o=U(""),a=Ve("attributes/getContactAttributes")||[],i=w(()=>{var S;return((S=a.value)==null?void 0:S.length)>0}),l=(S,E,y)=>!S.length||!E?[]:S.reduce((A,C)=>{const{attributeKey:O}=C;return y(O,E)&&A.push({...C,value:E[O]??""}),A},[]),r=w(()=>s.value.conversation_elements_order_conversation_contact_panel??[]),d=S=>{const E=r.value;if(!(E!=null&&E.length))return S;const y=new Map(E.map((A,C)=>[A,C]));return[...S].sort((A,C)=>{const O=y.get(A.attributeKey)??1/0,N=y.get(C.attributeKey)??1/0;return O-N})},u=w(()=>{var E;const S=l(a.value,(E=t.selectedContact)==null?void 0:E.customAttributes,(y,A)=>y in A);return d(S)}),p=w(()=>{var E;const S=l(a.value,(E=t.selectedContact)==null?void 0:E.customAttributes,(y,A)=>!(y in A));return d(S)}),h=w(()=>{var S;return(S=p.value)==null?void 0:S.filter(E=>E.attributeDisplayName.toLowerCase().includes(o.value.toLowerCase()))}),g=w(()=>{var S;return(S=p.value)==null?void 0:S.length}),_=w(()=>g.value===0),T=w(()=>u.value.length===0);return(S,E)=>i.value?(m(),f("div",VUe,[T.value?x("",!0):(m(),f("div",HUe,[(m(!0),f(pe,null,ye(u.value,y=>(m(),P(mE,{key:y.id,"is-editing-view":"",attribute:y},null,8,["attribute"]))),128))])),_.value?x("",!0):(m(),f("div",KUe,[E[1]||(E[1]=c("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1)),c("span",zUe,v(I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.UNUSED_ATTRIBUTES",{count:g.value})),1),E[2]||(E[2]=c("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1))])),c("div",WUe,[_.value?x("",!0):(m(),f("div",jUe,[E[3]||(E[3]=c("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),ie(c("input",{"onUpdate:modelValue":E[0]||(E[0]=y=>o.value=y),type:"search",placeholder:I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,YUe),[[at,o.value]])])),h.value.length===0&&!_.value?(m(),f("div",XUe,[c("p",qUe,v(I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.NO_ATTRIBUTES")),1)])):x("",!0),_.value?x("",!0):(m(),f("div",ZUe,[(m(!0),f(pe,null,ye(h.value,y=>(m(),P(mE,{key:y.id,attribute:y},null,8,["attribute"]))),128))]))])])):(m(),f("p",QUe,v(I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.EMPTY_STATE")),1))}},eGe={class:"flex w-full h-full overflow-hidden justify-evenly bg-n-background"},tGe={class:"flex flex-col w-full h-full transition-all duration-300 ltr:2xl:ml-56 rtl:2xl:mr-56"},nGe={class:"sticky top-0 z-10 px-6 3xl:px-0"},sGe={class:"w-full mx-auto max-w-[40.625rem]"},aGe={class:"flex items-center justify-between w-full h-20 gap-2"},oGe={class:"flex items-center gap-2"},iGe={class:"flex-1 px-6 overflow-y-auto 3xl:px-px"},lGe={class:"w-full py-4 mx-auto max-w-[40.625rem]"},rGe={key:0,class:"overflow-y-auto justify-end min-w-52 w-full py-6 max-w-md border-l border-n-weak bg-n-solid-2"},cGe={__name:"ContactsDetailsLayout",props:{selectedContact:{type:Object,default:()=>({})},isUpdating:{type:Boolean,default:!1}},emits:["goToContactsList","toggleBlock"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=Pf(),i=xn(),l=w(()=>i.params.contactId),r=w(()=>{var g;return(g=n.selectedContact)==null?void 0:g.name}),d=w(()=>{const g=[{label:o("CONTACTS_LAYOUT.HEADER.BREADCRUMB.CONTACTS"),link:"#"}];return n.selectedContact&&g.push({label:r.value}),g}),u=w(()=>{var g;return(g=n.selectedContact)==null?void 0:g.blocked}),p=()=>{s("goToContactsList")},h=()=>{s("toggleBlock",u.value)};return(g,_)=>(m(),f("section",eGe,[c("div",tGe,[c("header",nGe,[c("div",sGe,[c("div",aGe,[b(IUe,{items:d.value,onClick:p},null,8,["items"]),c("div",oGe,[b(he,{label:u.value?g.$t("CONTACTS_LAYOUT.HEADER.UNBLOCK_CONTACT"):g.$t("CONTACTS_LAYOUT.HEADER.BLOCK_CONTACT"),size:"sm",slate:"","is-loading":e.isUpdating,disabled:e.isUpdating,onClick:h},null,8,["label","is-loading","disabled"]),b(Om,{"contact-id":l.value},{trigger:j(({toggle:T})=>[b(he,{label:g.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),size:"sm",onClick:T},null,8,["label","onClick"])]),_:1},8,["contact-id"])])])])]),c("main",iGe,[c("div",lGe,[et(g.$slots,"default")])])]),I(a).sidebar?(m(),f("div",rGe,[et(g.$slots,"sidebar")])):x("",!0)]))}},dGe={class:"text-sm text-n-slate-12 ltr:mr-px rtl:ml-px"},uGe={__name:"LabelItem",props:{label:{type:Object,default:null},isHovered:{type:Boolean,default:!1}},emits:["remove","hover"],setup(e,{emit:t}){const n=e,s=t,o=()=>{var i;s("remove",(i=n.label)==null?void 0:i.id)},a=()=>{var i;s("hover",(i=n.label)==null?void 0:i.id)};return(i,l)=>(m(),f("div",{class:"flex items-center px-1 py-1 overflow-hidden transition-all duration-300 ease-out rounded-md bg-n-alpha-2 h-7",onMouseenter:a},[c("div",{class:"w-2 h-2 m-1 rounded-sm",style:At({backgroundColor:e.label.color})},null,4),c("span",dGe,v(e.label.title),1),c("div",{class:re(["w-0 flex relative ltr:left-1 rtl:right-1 flex-shrink-0 overflow-hidden transition-[width] duration-300 ease-out",{"w-6":e.isHovered}])},[b(he,{class:re(["transition-opacity duration-200 !h-7 ltr:rounded-r-md rtl:rounded-l-md ltr:rounded-l-none rtl:rounded-r-none w-6 bg-transparent",{"opacity-0":!e.isHovered,"opacity-100":e.isHovered}]),slate:"",xs:"",faded:"",icon:"i-lucide-x",onClick:o},null,8,["class"])],2)],32))}},mGe={class:"relative"},pGe={class:"text-sm text-n-slate-11"},hGe={__name:"AddLabel",props:{labelMenuItems:{type:Array,default:()=>[]}},emits:["updateLabel"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=U(!1);return(a,i)=>{const l=ct("on-clickaway");return m(),f("div",mGe,[c("button",{class:re(["flex items-center gap-1 px-2 py-1 rounded-md outline-dashed h-6 outline-1 outline-n-slate-6 hover:bg-n-alpha-2",{"bg-n-alpha-2":o.value}]),onClick:i[0]||(i[0]=r=>o.value=!o.value)},[i[2]||(i[2]=c("span",{class:"i-lucide-plus"},null,-1)),c("span",pGe,v(I(s)("LABEL.TAG_BUTTON")),1)],2),o.value?ie((m(),P(ma,{key:0,"menu-items":e.labelMenuItems,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:i[1]||(i[1]=r=>n("updateLabel",r))},{thumbnail:j(({item:r})=>[c("div",{class:"rounded-sm size-2",style:At({backgroundColor:r.thumbnail.color})},null,4)]),_:1},8,["menu-items"])),[[l,()=>o.value=!1]]):x("",!0)])}}},fGe={__name:"ContactLabels",props:{contactId:{type:[String,Number],default:null}},setup(e){const t=e,n=Ot(),s=xn(),o=U(!1),a=U(null),i=Ve("labels/getLabels"),l=Ve("contactLabels/getContactLabels"),r=w(()=>{const T=l.value(t.contactId);return i.value.filter(({title:S})=>T.includes(S))}),d=w(()=>{var T;return(T=i.value)==null?void 0:T.map(S=>({label:S.title,value:S.id,thumbnail:{name:S.title,color:S.color},isSelected:r.value.some(E=>E.id===S.id),action:"contactLabel"})).toSorted((S,E)=>Number(S.isSelected)-Number(E.isSelected))}),u=async T=>{T&&n.dispatch("contactLabels/get",T)},p=async({value:T})=>{try{const S=r.value.map(A=>A.title),E=i.value.find(A=>A.id===T);if(!E)return;let y;S.includes(E.title)?y=S.filter(A=>A!==E.title):y=[...S,E.title],await n.dispatch("contactLabels/update",{contactId:t.contactId,labels:y}),o.value=!1}catch{}},h=T=>p({value:T});lt(()=>t.contactId,(T,S)=>{T!==S&&u(T)}),ut(()=>{s.params.contactId&&u(s.params.contactId)});const g=()=>{a.value=null},_=T=>{a.value=T};return(T,S)=>(m(),f("div",{class:"flex flex-wrap items-center gap-2",onMouseleave:g},[(m(!0),f(pe,null,ye(r.value,E=>(m(),P(uGe,{key:E.id,label:E,"is-hovered":a.value===E.id,onRemove:h,onHover:y=>_(E.id)},null,8,["label","is-hovered","onHover"]))),128)),b(hGe,{"label-menu-items":d.value,onUpdateLabel:p},null,8,["label-menu-items"])],32))}},gGe={__name:"ConfirmContactDeleteDialog",props:{selectedContact:{type:Object,default:null}},emits:["goToContactsList"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=xn(),r=U(null),d=async p=>{if(p)try{await i.dispatch("contacts/delete",p),Te(a("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.SUCCESS_MESSAGE"))}catch{Te(a("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.ERROR_MESSAGE"))}},u=async()=>{var p;o("goToContactsList"),await d(l.params.contactId||s.selectedContact.id),(p=r.value)==null||p.close()};return t({dialogRef:r}),(p,h)=>(m(),P(Ss,{ref_key:"dialogRef",ref:r,type:"alert",title:I(a)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.TITLE"),description:I(a)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.DESCRIPTION",{contactName:s.selectedContact.name}),"confirm-button-label":I(a)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.CONFIRM"),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},_Ge={class:"flex flex-col items-start gap-8 pb-6"},vGe={class:"flex flex-col items-start gap-3"},bGe={class:"flex flex-col gap-1"},EGe={class:"text-base font-medium text-n-slate-12"},TGe={class:"flex flex-col gap-1.5"},yGe={key:0,class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},AGe={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},SGe={key:0,class:"i-ph-activity text-n-slate-10 size-4"},IGe={class:"flex flex-col items-start gap-6"},CGe={class:"flex flex-col items-start w-full gap-4 pt-6 border-t border-n-strong"},NGe={class:"flex flex-col gap-2"},OGe={class:"text-base font-medium text-n-slate-12"},xGe={class:"text-sm text-n-slate-11"},wGe={__name:"ContactDetails",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=Ot(),i=U(null),l=U(null),r=U(""),d=U(null),u=Ve("contacts/getUIFlags"),p=w(()=>u.value.isUpdating),h=w(()=>{var R;return(R=d.value)==null?void 0:R.isFormInvalid}),g=U({}),_=()=>n.selectedContact?{...n.selectedContact}:{};ut(()=>{Object.assign(g.value,_())});const T=w(()=>{var R;return(R=g.value)!=null&&R.createdAt?ms(g.value.createdAt):""}),S=w(()=>{var R;return(R=g.value)!=null&&R.lastActivityAt?ms(g.value.lastActivityAt):""}),E=w(()=>{var R;return r.value?r.value:(R=g.value)==null?void 0:R.thumbnail}),y=R=>{Object.assign(g.value,R)},A=async()=>{try{const{customAttributes:R,...k}=g.value;await a.dispatch("contacts/update",k),await a.dispatch("contacts/fetchContactableInbox",n.selectedContact.id),Te(o("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch{Te(o("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.ERROR_MESSAGE"))}},C=()=>{var R;(R=i.value)==null||R.dialogRef.open()},O=async({file:R,url:k})=>{var L;l.value=R,r.value=k;try{await a.dispatch("contacts/update",{...(L=d.value)==null?void 0:L.state,avatar:R,isFormData:!0}),Te(o("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.SUCCESS_MESSAGE"))}catch{Te(o("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.ERROR_MESSAGE"))}},N=async()=>{try{n.selectedContact&&n.selectedContact.id&&(await a.dispatch("contacts/deleteAvatar",n.selectedContact.id),Te(o("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.SUCCESS_MESSAGE"))),l.value=null,r.value="",g.value.thumbnail=null}catch(R){Te(R.message?R.message:o("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.ERROR_MESSAGE"))}};return(R,k)=>{var L,D,$,M,K,B;return m(),f("div",_Ge,[c("div",vGe,[b(yn,{src:E.value||"",name:((L=e.selectedContact)==null?void 0:L.name)||"",size:72,"allow-upload":"",onUpload:O,onDelete:N},null,8,["src","name"]),c("div",bGe,[c("h3",EGe,v((D=e.selectedContact)==null?void 0:D.name),1),c("div",TGe,[($=e.selectedContact)!=null&&$.identifier?(m(),f("span",yGe,[k[1]||(k[1]=c("span",{class:"i-ph-user-gear text-n-slate-10 size-4"},null,-1)),be(" "+v((M=e.selectedContact)==null?void 0:M.identifier),1)])):x("",!0),c("span",AGe,[(K=e.selectedContact)!=null&&K.identifier?(m(),f("span",SGe)):x("",!0),be(" "+v(R.$t("CONTACTS_LAYOUT.DETAILS.CREATED_AT",{date:T.value}))+"  "+v(R.$t("CONTACTS_LAYOUT.DETAILS.LAST_ACTIVITY",{date:S.value})),1)])])]),b(fGe,{"contact-id":(B=e.selectedContact)==null?void 0:B.id},null,8,["contact-id"])]),c("div",IGe,[b(k_,{ref_key:"contactsFormRef",ref:d,"contact-data":g.value,"is-details-view":"",onUpdate:y},null,8,["contact-data"]),b(he,{label:I(o)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":p.value,disabled:p.value||h.value,onClick:A},null,8,["label","is-loading","disabled"])]),c("div",CGe,[c("div",NGe,[c("h6",OGe,v(I(o)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT")),1),c("span",xGe,v(I(o)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT_DESCRIPTION")),1)]),b(he,{label:I(o)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),color:"ruby",onClick:C},null,8,["label"])]),b(gGe,{ref_key:"confirmDeleteContactDialogRef",ref:i,"selected-contact":e.selectedContact,onGoToContactsList:k[0]||(k[0]=H=>s("goToContactsList"))},null,8,["selected-contact"])])}}},RGe={class:"flex flex-col gap-2 py-2 mx-6 border-b border-n-strong group/note"},$Ge={class:"flex items-center justify-between"},MGe={class:"flex items-center gap-1.5 py-2.5 min-w-0"},kGe={class:"min-w-0 truncate"},LGe={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},DGe={class:"font-medium"},PGe={class:"font-medium"},BGe={class:"mb-0 prose-sm prose-p:mb-1 prose-p:mt-0 prose-ul:mb-1 prose-ul:mt-0 text-n-slate-12"},FGe={__name:"ContactNoteItem",props:{note:{type:Object,required:!0},writtenBy:{type:String,required:!0}},emits:["delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),{formatMessage:a}=oo(),i=()=>{s("delete",n.note.id)};return(l,r)=>{var u,p,h,g;const d=ct("dompurify-html");return m(),f("div",RGe,[c("div",$Ge,[c("div",MGe,[b(yn,{name:((p=(u=e.note)==null?void 0:u.user)==null?void 0:p.name)||"Bot",src:((g=(h=e.note)==null?void 0:h.user)==null?void 0:g.thumbnail)||"/assets/images/chatwoot_bot.png",size:16,"rounded-full":""},null,8,["name","src"]),c("div",kGe,[c("span",LGe,[c("span",DGe,v(e.writtenBy),1),be(" "+v(I(o)("CONTACTS_LAYOUT.SIDEBAR.NOTES.WROTE"))+" ",1),c("span",PGe,v(I(ms)(e.note.createdAt)),1)])])]),b(he,{variant:"faded",color:"ruby",size:"xs",icon:"i-lucide-trash",class:"opacity-0 group-hover/note:opacity-100",onClick:i})]),ie(c("p",BGe,null,512),[[d,I(a)(e.note.content||"")]])])}}},UGe={class:"flex flex-col gap-6 py-6"},GGe={class:"flex items-center gap-3"},VGe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},HGe={key:1},KGe={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"},zGe={__name:"ContactNotes",setup(e){const{t}=He(),n=Ot(),s=xn(),o=ks({message:""}),a=Ve("getCurrentUser"),i=Ve("contactNotes/getAllNotesByContactId"),l=Ve("contactNotes/getUIFlags"),r=w(()=>l.value.isFetching),d=w(()=>l.value.isCreating),u=w(()=>i.value(s.params.contactId)),p=T=>{var E,y;return((E=T==null?void 0:T.user)==null?void 0:E.id)===a.value.id?t("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):((y=T==null?void 0:T.user)==null?void 0:y.name)||"Bot"},h=T=>{if(!T)return;const{contactId:S}=s.params;n.dispatch("contactNotes/create",{content:T,contactId:S}),o.message=""},g=T=>{if(!T)return;const{contactId:S}=s.params;n.dispatch("contactNotes/delete",{noteId:T,contactId:S})};return Vs({"$mod+Enter":{action:()=>h(o.message),allowOnFocusedInput:!0}}),(T,S)=>(m(),f("div",UGe,[b(Yc,{modelValue:o.message,"onUpdate:modelValue":S[1]||(S[1]=E=>o.message=E),placeholder:I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),"focus-on-mount":"",class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 px-6"},{actions:j(()=>[c("div",GGe,[b(he,{variant:"link",color:"blue",size:"sm",label:I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),class:"hover:no-underline","is-loading":d.value,disabled:!o.message||d.value,onClick:S[0]||(S[0]=E=>h(o.message))},null,8,["label","is-loading","disabled"])])]),_:1},8,["modelValue","placeholder"]),r.value?(m(),f("div",VGe,[b(Gs)])):u.value.length>0?(m(),f("div",HGe,[(m(!0),f(pe,null,ye(u.value,E=>(m(),P(FGe,{key:E.id,note:E,"written-by":p(E),onDelete:g},null,8,["note","written-by"]))),128))])):(m(),f("p",KGe,v(I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EMPTY_STATE")),1))]))}},WGe={class:"flex items-end w-full gap-2 pb-1"},jGe={class:"w-full mb-0 text-sm leading-7 text-n-slate-12 line-clamp-2"},YGe={class:"flex items-center flex-shrink-0 gap-2 pb-2"},XGe={key:0,class:"inline-flex items-center justify-center rounded-full size-5 bg-n-brand"},qGe={class:"text-xs font-semibold text-white"},ZGe={__name:"CardMessagePreview",props:{conversation:{type:Object,required:!0}},setup(e){const t=e,{t:n}=He(),{getPlainText:s}=oo(),o=w(()=>{const{lastNonActivityMessage:l={},customAttributes:r={}}=t.conversation,{email:{subject:d}={}}=r;return s(d||(l==null?void 0:l.content)||n("CHAT_LIST.NO_CONTENT"))}),a=w(()=>{const{meta:{assignee:l={}}={}}=t.conversation;return{name:l.name??l.availableName,thumbnail:l.thumbnail,status:l.availabilityStatus}}),i=w(()=>{const{unreadCount:l}=t.conversation;return l});return(l,r)=>(m(),f("div",WGe,[c("p",jGe,v(o.value),1),c("div",YGe,[b(yn,{name:a.value.name,src:a.value.thumbnail,size:20,status:a.value.status,"rounded-full":""},null,8,["name","src","status"]),i.value>0?(m(),f("div",XGe,[c("span",qGe,v(i.value),1)])):x("",!0)])]))}},QGe={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=Object.freeze({DEFAULT_WIDTH:80,CHAR_WIDTH:{SHORT:8,LONG:6},BASE_WIDTH:12,THRESHOLD:5}),s=U(null),o=U(1),a=w(()=>{var p;const u=new Set(t.conversationLabels);return(p=t.accountLabels)==null?void 0:p.filter(({title:h})=>u.has(h))}),i=({title:u=""})=>{const p=u.length>n.THRESHOLD?n.CHAR_WIDTH.LONG:n.CHAR_WIDTH.SHORT;return u.length*p+n.BASE_WIDTH},l=u=>u.length?u.reduce((h,g)=>h+i(g),0)/u.length:n.DEFAULT_WIDTH,r=w(()=>{var u;return(u=a.value)==null?void 0:u.slice(0,o.value)}),d=()=>{if(!s.value)return;const u=s.value.offsetWidth,p=l(a.value);o.value=Math.max(1,Math.floor(u/p))};return(u,p)=>{const h=ct("resize");return ie((m(),f("div",{ref_key:"containerRef",ref:s,class:"flex items-center gap-2.5 w-full min-w-0 h-6 overflow-hidden"},[(m(!0),f(pe,null,ye(r.value,(g,_)=>(m(),f("div",{key:g.id,class:re(["flex items-center gap-1.5 min-w-0",[_!==r.value.length-1?"flex-shrink-0 text-ellipsis":"flex-shrink"]])},[c("div",{style:At({backgroundColor:g.color}),class:"size-1.5 rounded-full flex-shrink-0"},null,4),c("span",{class:re(["text-sm text-n-slate-10 whitespace-nowrap",{truncate:_===r.value.length-1}])},v(g.title),3)],2))),128))])),[[h,d]])}}},JGe={class:"flex items-center min-w-fit gap-0.5 h-6"},eVe={class:"flex items-center justify-center size-4"},tVe=6e4,$2={__name:"SLACardLabel",props:{conversation:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,s=U(null),o=U({threshold:null,isSlaMissed:!1,type:null,icon:null}),a=h=>Object.keys(h).reduce((g,_)=>(g[_.replace(/([A-Z])/g,"_$1").toLowerCase()]=h[_],g),{}),i=w(()=>{var h;return(h=n.conversation)==null?void 0:h.appliedSla}),l=w(()=>{var h;return(h=o.value)==null?void 0:h.isSlaMissed}),r=w(()=>{var h,g;return((h=o.value)==null?void 0:h.threshold)&&((g=i.value)==null?void 0:g.id)}),d=w(()=>{var h,g;return(g=(h=o.value)==null?void 0:h.type)==null?void 0:g.toUpperCase()}),u=()=>{o.value=BE({appliedSla:a(i.value||{}),chat:n.conversation})},p=()=>{s.value=setTimeout(()=>{u(),p()},tVe)};return ut(()=>{u(),p()}),ia(()=>{s.value&&clearTimeout(s.value)}),lt(()=>n.conversation,u),t({hasSlaThreshold:r}),(h,g)=>(m(),f("div",JGe,[c("div",eVe,[(m(),f("svg",{width:"10",height:"13",viewBox:"0 0 10 13",fill:"none",class:re(l.value?"fill-n-ruby-10":"fill-n-slate-9"),xmlns:"http://www.w3.org/2000/svg"},g[0]||(g[0]=[c("path",{d:"M4.55091 12.412C7.44524 12.412 9.37939 10.4571 9.37939 7.51446C9.37939 2.63072 5.21405 0.599854 2.36808 0.599854C1.81546 0.599854 1.45626 0.800176 1.45626 1.1801C1.45626 1.32516 1.52534 1.48404 1.64277 1.62219C2.27828 2.38204 2.92069 3.27314 2.93451 4.36455C2.93451 4.5925 2.9276 4.78592 2.76181 5.08295L3.05194 5.03459C2.81017 4.21949 2.18848 3.63234 1.5806 3.63234C1.32501 3.63234 1.15232 3.81884 1.15232 4.09514C1.15232 4.23331 1.19377 4.56488 1.19377 4.79974C1.19377 5.95332 0.26123 6.69935 0.26123 8.67495C0.26123 10.92 1.97434 12.412 4.55091 12.412ZM4.68906 10.8923C3.65982 10.8923 2.96905 10.2637 2.96905 9.33119C2.96905 8.3572 3.66672 8.01181 3.75652 7.38322C3.76344 7.32796 3.79107 7.31414 3.83251 7.34867C4.08809 7.57663 4.24697 7.85293 4.37822 8.1776C4.67525 7.77696 4.81341 6.9204 4.73051 6.0293C4.72361 5.97404 4.75814 5.94642 4.80649 5.96713C6.02916 6.53357 6.65085 7.74241 6.65085 8.82693C6.65085 9.92527 6.00844 10.8923 4.68906 10.8923Z"},null,-1)]),2))]),c("span",{class:re(["text-sm truncate",l.value?"text-n-ruby-11":"text-n-slate-11"])},v(`${d.value}: ${o.value.threshold}`),3)]))}},nVe={class:"flex flex-col w-full gap-1"},sVe={class:"flex items-center justify-between w-full gap-2 py-1 h-7"},aVe={class:"mb-0 text-sm leading-7 text-n-slate-12 line-clamp-1"},oVe={key:0,class:"inline-flex items-center justify-center flex-shrink-0 rounded-full size-5 bg-n-brand"},iVe={class:"text-xs font-semibold text-white"},lVe={key:0,class:"w-px h-3 bg-n-slate-4"},rVe={class:"overflow-hidden"},cVe={__name:"CardMessagePreviewWithMeta",props:{conversation:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e,{expose:t}){const n=e,{t:s}=He(),o=U(null),{getPlainText:a}=oo(),i=w(()=>{const{lastNonActivityMessage:u={},customAttributes:p={}}=n.conversation,{email:{subject:h}={}}=p;return a(h||(u==null?void 0:u.content)||s("CHAT_LIST.NO_CONTENT"))}),l=w(()=>{const{meta:{assignee:u={}}={}}=n.conversation;return{name:u.name??u.availableName,thumbnail:u.thumbnail,status:u.availabilityStatus}}),r=w(()=>{const{unreadCount:u}=n.conversation;return u}),d=w(()=>{var u,p;return((u=o.value)==null?void 0:u.hasSlaThreshold)&&((p=n.conversation)==null?void 0:p.slaPolicyId)});return t({hasSlaThreshold:d}),(u,p)=>(m(),f("div",nVe,[c("div",sVe,[c("p",aVe,v(i.value),1),r.value>0?(m(),f("div",oVe,[c("span",iVe,v(r.value),1)])):x("",!0)]),c("div",{class:re(["grid items-center gap-2.5 h-7",d.value?"grid-cols-[auto_auto_1fr_20px]":"grid-cols-[1fr_20px]"])},[ie(b($2,{ref_key:"slaCardLabelRef",ref:o,conversation:e.conversation},null,8,["conversation"]),[[ln,d.value]]),d.value?(m(),f("div",lVe)):x("",!0),c("div",rVe,[b(QGe,{"conversation-labels":e.conversation.labels,"account-labels":e.accountLabels},null,8,["conversation-labels","account-labels"])]),b(yn,{name:l.value.name,src:l.value.thumbnail,size:20,status:l.value.status,"rounded-full":""},null,8,["name","src","status"])],2)]))}},dVe={class:"inline-flex items-center justify-center rounded-md"},uVe={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mVe={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pVe={key:2,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hVe={key:3,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M2={__name:"CardPriorityIcon",props:{priority:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",dVe,[e.priority===I(qs).LOW?(m(),f("svg",uVe,n[0]||(n[0]=[Bo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-slate-6"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):x("",!0),e.priority===I(qs).MEDIUM?(m(),f("svg",mVe,n[1]||(n[1]=[Bo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):x("",!0),e.priority===I(qs).HIGH?(m(),f("svg",pVe,n[2]||(n[2]=[Bo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-amber-9"></rect></g>',2)]))):x("",!0),e.priority===I(qs).URGENT?(m(),f("svg",hVe,n[3]||(n[3]=[Bo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-ruby-9"></rect></g>',2)]))):x("",!0)]))}},fVe={class:"flex flex-col w-full gap-1 min-w-0"},gVe={class:"flex items-center justify-between h-6 gap-2"},_Ve={class:"text-base font-medium truncate text-n-slate-12"},vVe={class:"flex items-center gap-2"},bVe={class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-5"},EVe={class:"text-sm text-n-slate-10"},TVe={__name:"ConversationCard",props:{conversation:{type:Object,required:!0},contact:{type:Object,required:!0},stateInbox:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=wn(),s=xn(),o=U(null),a=w(()=>t.contact),i=w(()=>{var T;return(T=a.value)==null?void 0:T.name}),l=w(()=>{var T;return(T=a.value)==null?void 0:T.thumbnail}),r=w(()=>{var T;return(T=a.value)==null?void 0:T.availabilityStatus}),d=w(()=>t.stateInbox),u=w(()=>{var T;return(T=d.value)==null?void 0:T.name}),p=w(()=>{const{phoneNumber:T,channelType:S}=d.value;return Rc(S,T)}),h=w(()=>{var S;const T=(S=t.conversation)==null?void 0:S.timestamp;return T?lc(ms(T)):""}),g=w(()=>{var S;const{labels:T=[]}=t.conversation;return!((S=o.value)!=null&&S.hasSlaThreshold)&&T.length===0}),_=T=>{const S=Pt(Jf({accountId:s.params.accountId,id:t.conversation.id}));if(T.metaKey||T.ctrlKey){window.open(window.chatwootConfig.hostURL+S,"_blank","noopener noreferrer nofollow");return}n.push({path:S})};return(T,S)=>{const E=ct("tooltip");return m(),f("div",{role:"button",class:"flex w-full gap-3 px-3 py-4 transition-all duration-300 ease-in-out cursor-pointer",onClick:_},[b(yn,{name:i.value,src:l.value,size:24,status:r.value,"rounded-full":""},null,8,["name","src","status"]),c("div",fVe,[c("div",gVe,[c("h4",_Ve,v(i.value),1),c("div",vVe,[b(M2,{priority:e.conversation.priority||null},null,8,["priority"]),ie((m(),f("div",bVe,[b(Ht,{icon:p.value,class:"flex-shrink-0 text-n-slate-11 size-3"},null,8,["icon"])])),[[E,u.value,void 0,{left:!0}]]),c("span",EVe,v(h.value),1)])]),ie(b(ZGe,{conversation:e.conversation},null,8,["conversation"]),[[ln,g.value]]),ie(b(cVe,{ref_key:"cardMessagePreviewWithMetaRef",ref:o,conversation:e.conversation,"account-labels":e.accountLabels},null,8,["conversation","account-labels"]),[[ln,!g.value]])])])}}},yVe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},AVe={key:1,class:"px-6 py-4 divide-y divide-n-strong [&>*:hover]:!border-y-transparent [&>*:hover+*]:!border-t-transparent"},SVe={key:2,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},IVe={__name:"ContactHistory",setup(e){const{t}=He(),n=xn(),s=Ve("contactConversations/getAllConversationsByContactId"),o=Ve("contacts/getContactById"),a=Ve("inboxes/getInboxById"),i=Ve("labels/getLabels"),l=w(()=>i.value),r=Ve("contactConversations/getUIFlags"),d=w(()=>r.value.isFetching),u=w(()=>s.value(n.params.contactId));return(p,h)=>d.value?(m(),f("div",yVe,[b(Gs)])):u.value.length>0?(m(),f("div",AVe,[(m(!0),f(pe,null,ye(u.value,g=>(m(),P(TVe,{key:g.id,conversation:g,contact:I(o)(g.meta.sender.id),"state-inbox":I(a)(g.inboxId),"account-labels":l.value,class:"rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3"},null,8,["conversation","contact","state-inbox","account-labels"]))),128))])):(m(),f("p",SVe,v(I(t)("CONTACTS_LAYOUT.SIDEBAR.HISTORY.EMPTY_STATE")),1))}},CVe={class:"flex flex-col"},NVe={class:"flex flex-col gap-2"},OVe={class:"flex items-center justify-between h-5 gap-2"},xVe={class:"text-sm text-n-slate-12"},wVe={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-teal-11 bg-n-alpha-2"},RVe={class:"relative flex justify-center gap-2 top-4"},$Ve={class:"flex flex-col gap-2"},MVe={class:"flex items-center justify-between h-5 gap-2"},kVe={class:"text-sm text-n-slate-12"},LVe={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-ruby-11 bg-n-alpha-2"},DVe={class:"border border-n-strong h-[60px] gap-2 flex items-center rounded-xl p-3"},PVe={class:"flex flex-col w-full min-w-0 gap-1"},BVe={class:"text-sm leading-4 truncate text-n-slate-11"},FVe={class:"text-sm leading-4 truncate text-n-slate-11"},UVe={__name:"ContactMergeForm",props:{selectedContact:{type:Object,required:!0},primaryContactId:{type:[Number,null],default:null},primaryContactList:{type:Array,default:()=>[]},isSearching:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:primaryContactId","search"],setup(e,{emit:t}){const n=t,{t:s}=He();return(o,a)=>(m(),f("div",CVe,[c("div",NVe,[c("div",OVe,[c("label",xVe,v(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY")),1),c("span",wVe,v(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_HELP_LABEL")),1)]),b(Oi,{id:"inbox","use-api-results":"","model-value":e.primaryContactId,options:e.primaryContactList,"empty-state":e.isSearching?I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.IS_SEARCHING"):I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.EMPTY_STATE"),"search-placeholder":I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_PLACEHOLDER"),placeholder:I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PLACEHOLDER"),"has-error":e.hasError,message:e.errorMessage,class:"[&>div>button]:bg-n-alpha-black2","onUpdate:modelValue":a[0]||(a[0]=i=>n("update:primaryContactId",i)),onSearch:a[1]||(a[1]=i=>n("search",i))},null,8,["model-value","options","empty-state","search-placeholder","placeholder","has-error","message"])]),c("div",RVe,[(m(),f(pe,null,ye(3,i=>c("div",{key:i,class:"relative w-4 h-8"},a[2]||(a[2]=[c("div",{class:"absolute w-0 h-0 border-l-[4px] border-r-[4px] border-b-[6px] border-l-transparent border-r-transparent border-n-strong ltr:translate-x-[4px] rtl:-translate-x-[4px] -translate-y-[4px]"},null,-1),c("div",{class:"absolute w-[1px] h-full bg-n-strong left-1/2 transform -translate-x-1/2"},null,-1)]))),64))]),c("div",$Ve,[c("div",MVe,[c("label",kVe,v(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT")),1),c("span",LVe,v(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT_HELP_LABEL")),1)]),c("div",DVe,[b(yn,{name:e.selectedContact.name||"",src:e.selectedContact.thumbnail||"",size:32,"rounded-full":""},null,8,["name","src"]),c("div",PVe,[c("span",BVe,v(e.selectedContact.name),1),c("span",FVe,v(e.selectedContact.email),1)])])])]))}},GVe={class:"flex flex-col gap-8 px-6 py-6"},VVe={class:"flex flex-col gap-2"},HVe={class:"text-base text-n-slate-12"},KVe={class:"text-sm text-n-slate-11"},zVe={class:"flex items-center justify-between gap-3"},WVe={__name:"ContactMerge",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList","resetTab"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=Ot(),i=xn(),l=ks({primaryContactId:null}),r=Ve("contacts/getUIFlags"),d=U([]),u=U(!1),h=Lt({primaryContactId:{required:it}},l),g=w(()=>r.value.isMerging),_=w(()=>{var y;return((y=d.value)==null?void 0:y.map(A=>({value:A.id,label:`(ID: ${A.id}) ${A.name}`})))??[]}),T=Ko(async y=>{u.value=!0,d.value=[];try{const{data:{payload:A}}=await pl.search(y);d.value=A.filter(C=>C.id!==n.selectedContact.id),u.value=!1}catch{Te(o("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_ERROR_MESSAGE"))}finally{u.value=!1}},300,!1),S=()=>{l.primaryContactId===null&&s("resetTab"),l.primaryContactId=null,d.value=[],u.value=!1},E=async()=>{if(await h.value.$validate()){jt(ll.MERGED_CONTACTS);try{await a.dispatch("contacts/merge",{childId:n.selectedContact.id||i.params.contactId,parentId:l.primaryContactId}),s("goToContactsList"),Te(o("CONTACTS_LAYOUT.SIDEBAR.MERGE.SUCCESS_MESSAGE")),S()}catch{Te(o("CONTACTS_LAYOUT.SIDEBAR.MERGE.ERROR_MESSAGE"))}}};return(y,A)=>(m(),f("div",GVe,[c("div",VVe,[c("h4",HVe,v(I(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.TITLE")),1),c("p",KVe,v(I(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.DESCRIPTION")),1)]),b(UVe,{"primary-contact-id":l.primaryContactId,"onUpdate:primaryContactId":A[0]||(A[0]=C=>l.primaryContactId=C),"selected-contact":e.selectedContact,"primary-contact-list":_.value,"is-searching":u.value,"has-error":!!I(h).primaryContactId.$error,"error-message":I(h).primaryContactId.$error?I(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_REQUIRED_ERROR"):"",onSearch:I(T)},null,8,["primary-contact-id","selected-contact","primary-contact-list","is-searching","has-error","error-message","onSearch"]),c("div",zVe,[b(he,{variant:"faded",color:"slate",label:I(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:S},null,8,["label"]),b(he,{label:I(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CONFIRM"),class:"w-full","is-loading":g.value,disabled:g.value,onClick:E},null,8,["label","is-loading","disabled"])])]))}},jVe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},YVe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},XVe={class:"px-6"},qVe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},Dd={__name:"ContactManageView",setup(e){const t=Ot(),n=xn(),s=wn(),o=Ve("contacts/getContactById"),a=Ve("contacts/getUIFlags"),i=U("attributes"),l=U(null),r=w(()=>a.value.isFetchingItem),d=w(()=>a.value.isMerging),u=w(()=>a.value.isUpdating),p=w(()=>o.value(n.params.contactId)),h=w(()=>r.value||d.value),{t:g}=He(),_=[{key:"ATTRIBUTES",value:"attributes"},{key:"HISTORY",value:"history"},{key:"NOTES",value:"notes"},{key:"MERGE",value:"merge"}],T=w(()=>_.map(k=>({label:g(`CONTACTS_LAYOUT.SIDEBAR.TABS.${k.key}`),value:k.value}))),S=w(()=>_.findIndex(k=>k.value===i.value)),E=()=>{var k;(k=window.history.state)!=null&&k.back||window.history.length>1?s.back():s.push(`/app/accounts/${n.params.accountId}/contacts?page=1`)},y=async()=>{n.params.contactId&&(await t.dispatch("contacts/show",{id:n.params.contactId}),await t.dispatch("contacts/fetchContactableInbox",n.params.contactId))},A=k=>{i.value=k.value},C=()=>{const{contactId:k}=n.params;k&&t.dispatch("contactNotes/get",{contactId:k})},O=()=>{const{contactId:k}=n.params;k&&t.dispatch("contactConversations/get",k)},N=()=>{t.dispatch("attributes/get")},R=async k=>{const L={success:{block:g("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_SUCCESS_MESSAGE"),unblock:g("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_SUCCESS_MESSAGE")},error:{block:g("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_ERROR_MESSAGE"),unblock:g("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_ERROR_MESSAGE")}};try{await t.dispatch("contacts/update",{...p.value,blocked:!k}),Te(k?L.success.unblock:L.success.block)}catch{Te(k?L.error.unblock:L.error.block)}};return ut(()=>{y(),C(),O(),N()}),(k,L)=>(m(),f("div",jVe,[b(cGe,{"button-label":k.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),"selected-contact":p.value,"is-detail-view":"","show-pagination-footer":!1,"is-updating":u.value,onGoToContactsList:E,onToggleBlock:R},{sidebar:j(()=>[c("div",XVe,[b(S2,{tabs:T.value,"initial-active-tab":S.value,class:"w-full [&>button]:w-full bg-n-alpha-black2",onTabChanged:A},null,8,["tabs","initial-active-tab"])]),r.value?(m(),f("div",qVe,[b(Gs)])):(m(),f(pe,{key:1},[i.value==="attributes"?(m(),P(JUe,{key:0,"selected-contact":p.value},null,8,["selected-contact"])):x("",!0),i.value==="notes"?(m(),P(zGe,{key:1})):x("",!0),i.value==="history"?(m(),P(IVe,{key:2})):x("",!0),i.value==="merge"?(m(),P(WVe,{key:3,ref_key:"contactMergeRef",ref:l,"selected-contact":p.value,onGoToContactsList:E,onResetTab:L[0]||(L[0]=D=>A(_[0]))},null,8,["selected-contact"])):x("",!0)],64))]),default:j(()=>[h.value?(m(),f("div",YVe,[b(Gs)])):p.value?(m(),P(wGe,{key:1,"selected-contact":p.value,onGoToContactsList:E},null,8,["selected-contact"])):x("",!0)]),_:1},8,["button-label","selected-contact","is-updating"])]))}},oi={featureFlag:xt.CRM,permissions:["administrator","agent","contact_manage"]},ZVe=[{path:Pt("accounts/:accountId/contacts"),component:Ld,meta:oi,children:[{path:"",name:"contacts_dashboard_index",component:Ld,meta:oi},{path:"segments/:segmentId",name:"contacts_dashboard_segments_index",component:Ld,meta:oi},{path:"labels/:label",name:"contacts_dashboard_labels_index",component:Ld,meta:oi}]},{path:Pt("accounts/:accountId/contacts/:contactId"),component:Dd,meta:oi,children:[{path:"",name:"contacts_edit",component:Dd,meta:oi},{path:"segments/:segmentId",name:"contacts_edit_segment",component:Dd,meta:oi},{path:"labels/:label",name:"contacts_edit_label",component:Dd,meta:oi}]}],QVe={components:{Thumbnail:Qn,Spinner:Os,EmptyState:vl,NextButton:he},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},onClickNotification:{type:Function,default:()=>{}},onMarkAllDoneClick:{type:Function,default:()=>{}}},computed:{...gt({notificationMetadata:"notifications/getMeta"}),showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{dynamicTime:ms}},JVe={class:"flex-grow flex-shrink h-full px-4 py-8 overflow-hidden bg-n-background"},eHe={class:"flex w-full items-center justify-between gap-2 mb-4"},tHe={class:"text-xl font-medium text-n-slate-12"},nHe={class:"woot-table notifications-table overflow-auto"},sHe=["onClick"],aHe={class:"overflow-hidden flex-view notification-contant--wrap whitespace-nowrap text-ellipsis"},oHe={class:"notification--title"},iHe={class:"overflow-hidden notification--message-title whitespace-nowrap text-ellipsis"},lHe={class:"text-right"},rHe={class:"notification--type"},cHe={class:"thumbnail--column"},dHe={class:"text-right timestamp--column"},uHe={class:"notification--created-at"},mHe={key:0,class:"notification--unread-indicator"},pHe={key:1,class:"notifications--loader"};function hHe(e,t,n,s,o,a){const i=F("NextButton"),l=F("Thumbnail"),r=F("EmptyState"),d=F("Spinner");return m(),f("section",JVe,[c("div",eHe,[c("h6",tHe,v(e.$t("NOTIFICATIONS_PAGE.HEADER")),1),e.notificationMetadata.unreadCount?(m(),P(i,{key:0,type:"submit",sm:"",label:e.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),"is-loading":n.isUpdating,onClick:n.onMarkAllDoneClick},null,8,["label","is-loading","onClick"])):x("",!0)]),c("table",nHe,[ie(c("tbody",null,[(m(!0),f(pe,null,ye(n.notifications,u=>(m(),f("tr",{key:u.id,class:re({"is-unread":u.read_at===null}),onClick:()=>n.onClickNotification(u)},[c("td",null,[c("div",aHe,[c("h5",oHe,v(`#${u.primary_actor?u.primary_actor.id:e.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),c("span",iHe,v(u.push_message_title),1)])]),c("td",lHe,[c("span",rHe,v(e.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${u.notification_type}`)),1)]),c("td",cHe,[u.primary_actor.meta.assignee?(m(),P(l,{key:0,src:u.primary_actor.meta.assignee.thumbnail,size:"36px",username:u.primary_actor.meta.assignee.name},null,8,["src","username"])):x("",!0)]),c("td",null,[c("div",dHe,[c("span",uHe,v(a.dynamicTime(u.last_activity_at)),1)])]),c("td",null,[u.read_at?x("",!0):(m(),f("div",mHe))])],10,sHe))),128))],512),[[ln,!n.isLoading]])]),a.showEmptyResult?(m(),P(r,{key:0,title:e.$t("NOTIFICATIONS_PAGE.LIST.404")},null,8,["title"])):x("",!0),n.isLoading?(m(),f("div",pHe,[b(d),c("span",null,v(e.$t("NOTIFICATIONS_PAGE.LIST.LOADING_MESSAGE")),1)])):x("",!0)])}const fHe=Re(QVe,[["render",hHe],["__scopeId","data-v-e6d1cec3"]]),gHe={components:{NotificationTable:fHe,TableFooter:Pg},computed:{...gt({accountId:"getCurrentAccountId",meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"})},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(e){window.history.pushState({},null,`${this.$route.path}?page=${e}`),this.$store.dispatch("notifications/get",{page:e})},openConversation(e){const{primary_actor_id:t,primary_actor_type:n,primary_actor:{id:s},notification_type:o}=e;jt(rl.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:o}),this.$store.dispatch("notifications/read",{id:e.id,primaryActorId:t,primaryActorType:n,unreadCount:this.meta.unreadCount}),this.$router.push(`/app/accounts/${this.accountId}/conversations/${s}`)},onMarkAllDoneClick(){jt(rl.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")}}},_He={class:"h-full overflow-y-auto"},vHe={class:"flex flex-col h-full"};function bHe(e,t,n,s,o,a){const i=F("NotificationTable"),l=F("TableFooter");return m(),f("div",_He,[c("div",vHe,[b(i,{notifications:e.records,"is-loading":e.uiFlags.isFetching,"is-updating":e.uiFlags.isUpdating,"on-click-notification":a.openConversation,"on-mark-all-done-click":a.onMarkAllDoneClick},null,8,["notifications","is-loading","is-updating","on-click-notification","on-mark-all-done-click"]),b(l,{class:"border-t border-slate-75 dark:border-slate-700/50","current-page":Number(e.meta.currentPage),"total-count":e.meta.count,"page-size":15,onPageChange:a.onPageChange},null,8,["current-page","total-count","onPageChange"])])])}const EHe=Re(gHe,[["render",bHe],["__scopeId","data-v-58580fb0"]]),THe=[{path:Pt("accounts/:accountId/notifications"),component:Pc,props:{headerTitle:"",icon:"",showNewButton:!1,showSidemenuIcon:!1},children:[{path:"",name:"notifications_index",component:EHe,meta:{permissions:["administrator","agent","custom_role"]}}]}],yHe={CONVERSATION_MENTION:["i-lucide-at-sign","text-n-blue-text"],CONVERSATION_ASSIGNMENT:["i-lucide-chevrons-right","text-n-blue-text"],CONVERSATION_CREATION:["i-lucide-mail-plus","text-n-blue-text"],PARTICIPATING_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],ASSIGNED_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],SLA_MISSED_FIRST_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_NEXT_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_RESOLUTION:["i-lucide-heart-crack","text-n-ruby-11"]},AHe={role:"button",class:"flex items-center w-full h-8 px-2 py-1 rounded-md cursor-pointer hover:text-n-blue-text min-w-0"},SHe={class:"text-xs font-medium truncate text-n-slate-12"},k2={__name:"MenuItem",props:{label:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",AHe,[c("span",SHe,v(e.label),1)]))}},IHe={components:{MenuItem:k2,ContextMenu:ym},props:{contextMenuPosition:{type:Object,default:()=>({})},menuItems:{type:Array,default:()=>[]}},emits:["close","selectAction"],methods:{handleClose(){this.$emit("close")},onMenuItemClick(e){this.$emit("selectAction",e),this.handleClose()}}},CHe={class:"bg-n-alpha-3 backdrop-blur-[100px] w-40 py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl"};function NHe(e,t,n,s,o,a){const i=F("MenuItem"),l=F("ContextMenu");return m(),P(l,{x:n.contextMenuPosition.x,y:n.contextMenuPosition.y,onClose:a.handleClose},{default:j(()=>[c("div",CHe,[(m(!0),f(pe,null,ye(n.menuItems,r=>(m(),P(i,{key:r.key,label:r.label,onClick:Ke(d=>a.onMenuItemClick(r.key),["stop"])},null,8,["label","onClick"]))),128))])]),_:1},8,["x","y","onClose"])}const OHe=Re(IHe,[["render",NHe]]),xHe={class:"flex items-start gap-2"},wHe={class:"mb-0 line-clamp-2"},RHe={class:"flex items-center justify-between h-6 gap-2"},$He={class:"flex items-center flex-1 min-w-0 gap-1"},MHe={key:0,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},kHe={key:1,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},LHe={class:"flex items-center flex-shrink-0 gap-2"},DHe={key:0,class:"w-px h-3 rounded-sm bg-n-slate-4"},PHe={key:2,class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-4"},BHe={class:"text-sm text-n-slate-10"},FHe={__name:"InboxCard",props:{inboxItem:{type:Object,default:()=>({})},stateInbox:{type:Object,default:()=>({})}},emits:["click","contextMenuOpen","contextMenuClose","markNotificationAsRead","markNotificationAsUnRead","deleteNotification"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!1),i=U({x:null,y:null}),l=U(null),r={emphasis:"text-sm font-medium text-n-slate-11",emphasisUnread:"text-sm font-medium text-n-slate-12",normal:"text-sm font-normal text-n-slate-11",normalUnread:"text-sm text-n-slate-12"},d=w(()=>{var D;return(D=n.inboxItem)==null?void 0:D.primaryActor}),u=w(()=>{var D;return(D=d.value)==null?void 0:D.meta}),p=w(()=>{var D;return(D=u.value)==null?void 0:D.sender}),h=w(()=>{var D;return!((D=n.inboxItem)!=null&&D.readAt)}),g=w(()=>n.stateInbox),_=w(()=>{const{phoneNumber:D,channelType:$}=g.value;return Rc($,D)}),T=w(()=>{var D,$;return((D=l.value)==null?void 0:D.hasSlaThreshold)&&(($=d.value)==null?void 0:$.slaPolicyId)}),S=w(()=>{var $;const D=($=n.inboxItem)==null?void 0:$.lastActivityAt;return D?lc(ms(D)):""}),E=w(()=>[{key:"delete",label:o("INBOX.MENU_ITEM.DELETE")},{key:h.value?"mark_as_read":"mark_as_unread",label:o(`INBOX.MENU_ITEM.MARK_AS_${h.value?"READ":"UNREAD"}`)}]),y=w(()=>({emphasis:h.value?r.emphasisUnread:r.emphasis,normal:h.value?r.normalUnread:r.normal})),A=D=>D.startsWith(": ")?D.slice(2):D.replace(/^([^:]+):/g,($,M)=>`<span class="${y.value.emphasis}">${M}:</span>`),C=w(()=>{var $;const D=`<span class="${y.value.normal}">${A((($=n.inboxItem)==null?void 0:$.pushMessageBody)||"")}</span>`;return h.value?`<span class="inline-flex flex-shrink-0 w-2 h-2 mb-px rounded-full bg-n-iris-10 ltr:mr-1 rtl:ml-1"></span> ${D}`:D}),O=w(()=>{var K,B;const D=((B=(K=n.inboxItem)==null?void 0:K.notificationType)==null?void 0:B.toUpperCase())||"",[$="",M="text-n-blue-text"]=yHe[D]||[];return{text:D?o(`INBOX.TYPES_NEXT.${D}`):"",icon:$,color:M}}),N=w(()=>{const{snoozedUntil:D}=n.inboxItem;return D?N_e(ms(C_e(D))):null}),R=w(()=>{var D,$;return($=(D=n.inboxItem)==null?void 0:D.meta)==null?void 0:$.lastSnoozedAt}),k=w(()=>R.value?o("INBOX.TYPES_NEXT.SNOOZED_ENDS"):o("INBOX.TYPES_NEXT.SNOOZED_UNTIL",{time:lc(N.value)})),L={close:()=>{a.value=!1,i.value={x:null,y:null},s("contextMenuClose")},open:D=>{D.preventDefault(),i.value={x:D.pageX||D.clientX,y:D.pageY||D.clientY},a.value=!0,s("contextMenuOpen")},handle:D=>{var M;const $={mark_as_read:()=>s("markNotificationAsRead",n.inboxItem),mark_as_unread:()=>s("markNotificationAsUnRead",n.inboxItem),delete:()=>s("deleteNotification",n.inboxItem)};(M=$[D])==null||M.call($)}};return Df(L.close),(D,$)=>{var B,H,G;const M=ct("dompurify-html"),K=ct("tooltip");return m(),f("div",{role:"button",class:"flex flex-col w-full gap-2 p-3 transition-all duration-300 ease-in-out cursor-pointer",onContextmenu:$[0]||($[0]=V=>L.open(V)),onClick:$[1]||($[1]=V=>s("click"))},[c("div",xHe,[b(yn,{name:p.value.name,src:p.value.thumbnail,size:20,"rounded-full":"",class:"mt-1"},null,8,["name","src"]),ie(c("p",wHe,null,512),[[M,C.value]])]),c("div",RHe,[c("div",$He,[N.value||R.value?(m(),f("div",MHe,[b(Ht,{icon:R.value?"i-lucide-alarm-clock-off":"i-lucide-alarm-clock-plus",class:re(["flex-shrink-0 size-4",h.value?"text-n-blue-text":"text-n-slate-11"])},null,8,["icon","class"]),c("span",{class:re(["text-xs font-medium truncate",h.value?"text-n-blue-text":"text-n-slate-11"])},v(k.value),3)])):O.value.text?(m(),f("div",kHe,[b(Ht,{icon:O.value.icon,class:re([h.value?O.value.color:"text-n-slate-11","flex-shrink-0 size-4"])},null,8,["icon","class"]),c("span",{class:re(["text-xs font-medium truncate",h.value?O.value.color:"text-n-slate-11"])},v(O.value.text),3)])):x("",!0)]),c("div",LHe,[ie(b($2,{ref_key:"slaCardLabel",ref:l,conversation:d.value,class:re(["[&>span]:text-xs",!h.value&&"[&>span]:text-n-slate-11 [&>div>svg]:fill-n-slate-11"])},null,8,["conversation","class"]),[[ln,T.value]]),T.value?(m(),f("div",DHe)):x("",!0),(B=d.value)!=null&&B.priority?(m(),P(M2,{key:1,priority:(H=d.value)==null?void 0:H.priority,class:"[&>svg]:size-4"},null,8,["priority"])):x("",!0),_.value?ie((m(),f("div",PHe,[b(Ht,{icon:_.value,class:"flex-shrink-0 text-n-slate-11 size-2.5"},null,8,["icon"])])),[[K,(G=g.value)==null?void 0:G.name,void 0,{left:!0}]]):x("",!0),c("span",BHe,v(S.value),1)])]),a.value?(m(),P(OHe,{key:0,"context-menu-position":i.value,"menu-items":E.value,onClose:L.close,onSelectAction:L.handle},null,8,["context-menu-position","menu-items","onClose","onSelectAction"])):x("",!0)],32)}}},UHe={components:{MenuItem:k2},emits:["optionClick"],data(){return{menuItems:[{key:"mark_all_read",label:this.$t("INBOX.MENU_ITEM.MARK_ALL_READ")},{key:"delete_all",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL")},{key:"delete_all_read",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL_READ")}]}},methods:{onClick(e){this.$emit("optionClick",e)}}},GHe={class:"z-50 flex flex-col max-w-64 min-w-40 gap-1 bg-n-alpha-3 backdrop-blur-[100px] divide-y py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl divide-n-weak dark:divide-n-strong"},VHe={class:"flex flex-col"};function HHe(e,t,n,s,o,a){const i=F("MenuItem");return m(),f("div",GHe,[c("div",VHe,[(m(!0),f(pe,null,ye(o.menuItems,l=>(m(),P(i,{key:l.key,label:l.label,onClick:Ke(r=>a.onClick(l.key),["stop"])},null,8,["label","onClick"]))),128))])])}const KHe=Re(UHe,[["render",HHe]]),zHe={components:{NextButton:he},emits:["filter"],setup(){const{uiSettings:e,updateUISettings:t}=Mn();return{uiSettings:e,updateUISettings:t}},data(){return{showSortMenu:!1,displayOptions:[{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.SNOOZED"),key:$t.INBOX_DISPLAY_BY.SNOOZED,selected:!1,type:$t.INBOX_FILTER_TYPE.STATUS},{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.READ"),key:$t.INBOX_DISPLAY_BY.READ,selected:!1,type:$t.INBOX_FILTER_TYPE.TYPE}],sortOptions:[{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.NEWEST"),key:$t.INBOX_SORT_BY.NEWEST,type:$t.INBOX_FILTER_TYPE.SORT_ORDER},{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.OLDEST"),key:$t.INBOX_SORT_BY.OLDEST,type:$t.INBOX_FILTER_TYPE.SORT_ORDER}],activeSort:$t.INBOX_SORT_BY.NEWEST,activeDisplayFilter:{status:"",type:""}}},computed:{activeSortOption(){var e;return((e=this.sortOptions.find(t=>t.key===this.activeSort))==null?void 0:e.name)||""}},mounted(){this.setSavedFilter()},methods:{updateDisplayOption(e){this.displayOptions.forEach(t=>{t.key===e.key&&(t.selected=!e.selected,this.activeDisplayFilter[t.type]=t.selected?t.key:"",this.saveSelectedDisplayFilter(),this.$emit("filter",e))})},openSortMenu(){this.showSortMenu=!this.showSortMenu},onSortOptionClick(e){this.activeSort=e.key,this.showSortMenu=!1,this.saveSelectedDisplayFilter(),this.$emit("filter",e)},saveSelectedDisplayFilter(){this.updateUISettings({inbox_filter_by:{...this.activeDisplayFilter,sort_by:this.activeSort||$t.INBOX_SORT_BY.NEWEST}})},setSavedFilter(){const{inbox_filter_by:e={}}=this.uiSettings,{status:t,type:n,sort_by:s}=e;this.activeSort=s||$t.INBOX_SORT_BY.NEWEST,this.displayOptions.forEach(o=>{o.selected=o.type===$t.INBOX_FILTER_TYPE.STATUS?o.key===t:o.key===n,this.activeDisplayFilter[o.type]=o.selected?o.key:""})}}},WHe={class:"flex flex-col bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container shadow-lg z-50 max-w-64 min-w-[170px] w-fit rounded-xl divide-y divide-n-weak dark:divide-n-strong"},jHe={class:"flex items-center gap-2 justify-between p-3 rounded-t-lg h-11"},YHe={class:"flex gap-1.5 min-w-0"},XHe={class:"text-xs font-medium text-n-slate-12 truncate min-w-0"},qHe={class:"relative"},ZHe={key:0,class:"absolute flex flex-col gap-0.5 bg-n-alpha-3 backdrop-blur-[100px] z-60 rounded-lg p-0.5 w-fit min-w-20 max-w-32 top-px outline outline-1 outline-n-container dark:outline-n-strong"},QHe=["onClick"],JHe={key:0,class:"i-lucide-check size-2.5 flex-shrink-0 text-n-blue-text"},eKe={class:"px-3 py-4 text-xs font-medium text-n-slate-11"},tKe={class:"flex flex-col divide-y divide-n-weak dark:divide-n-strong"},nKe=["id","name","checked","onChange"],sKe=["for"];function aKe(e,t,n,s,o,a){const i=F("NextButton"),l=ct("on-clickaway");return m(),f("div",WHe,[c("div",jHe,[c("div",YHe,[t[0]||(t[0]=c("span",{class:"i-lucide-arrow-down-up size-3.5 text-n-slate-12"},null,-1)),c("span",XHe,v(e.$t("INBOX.DISPLAY_MENU.SORT")),1)]),ie((m(),f("div",qHe,[b(i,{label:a.activeSortOption,icon:"i-lucide-chevron-down",slate:"","trailing-icon":"",xs:"",outline:"",class:"w-fit min-w-20 max-w-32",onClick:a.openSortMenu},null,8,["label","onClick"]),o.showSortMenu?(m(),f("div",ZHe,[(m(!0),f(pe,null,ye(o.sortOptions,r=>(m(),f("div",{key:r.key,role:"button",class:re(["flex rounded-md h-5 w-full items-center justify-between px-1.5 py-0.5 gap-2 whitespace-nowrap",{"bg-n-brand/10 dark:bg-n-brand/10":o.activeSort===r.key}]),onClick:Ke(d=>a.onSortOptionClick(r),["stop"])},[c("span",{class:re(["text-xs font-medium hover:text-n-brand truncate min-w-0 dark:hover:text-n-brand",{"text-n-blue-text dark:text-n-blue-text":o.activeSort===r.key,"text-n-slate-11":o.activeSort!==r.key}])},v(r.name),3),o.activeSort===r.key?(m(),f("span",JHe)):x("",!0)],10,QHe))),128))])):x("",!0)])),[[l,()=>o.showSortMenu=!1]])]),c("div",null,[c("span",eKe,v(e.$t("INBOX.DISPLAY_MENU.DISPLAY")),1),c("div",tKe,[(m(!0),f(pe,null,ye(o.displayOptions,r=>(m(),f("div",{key:r.key,class:"flex items-center px-3 py-2 gap-1.5 h-9"},[c("input",{id:r.key,type:"checkbox",name:r.key,checked:r.selected,class:"m-0 border-[1.5px] shadow border-slate-200 dark:border-slate-600 appearance-none rounded-[4px] w-4 h-4 dark:bg-slate-800 focus:ring-1 focus:ring-slate-100 dark:focus:ring-slate-700 checked:bg-n-brand dark:checked:bg-n-brand after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center checked:border-t checked:border-woot-700 dark:checked:border-woot-300 checked:border-b-0 checked:border-r-0 checked:border-l-0 after:text-center after:text-xs after:font-bold after:relative after:-top-[1.5px]",onChange:d=>a.updateDisplayOption(r)},null,40,nKe),c("label",{for:r.key,class:"text-xs font-medium text-slate-800 !ml-0 !mr-0 dark:text-slate-100"},v(r.name),9,sKe)]))),128))])])])}const oKe=Re(zHe,[["render",aKe]]),iKe={components:{NextButton:he,InboxOptionMenu:KHe,InboxDisplayMenu:oKe},props:{isContextMenuOpen:{type:Boolean,default:!1}},emits:["redirect","filter"],data(){return{showInboxDisplayMenu:!1,showInboxOptionMenu:!1}},watch:{isContextMenuOpen:{handler(e){e&&(this.showInboxDisplayMenu=!1,this.showInboxOptionMenu=!1)},immediate:!0}},methods:{markAllRead(){jt(Xi.MARK_ALL_NOTIFICATIONS_AS_READ),this.$store.dispatch("notifications/readAll").then(()=>{Te(this.$t("INBOX.ALERTS.MARK_ALL_READ"))})},deleteAll(){this.$store.dispatch("notifications/deleteAll").then(()=>{Te(this.$t("INBOX.ALERTS.DELETE_ALL"))})},deleteAllRead(){this.$store.dispatch("notifications/deleteAllRead").then(()=>{Te(this.$t("INBOX.ALERTS.DELETE_ALL_READ"))})},openInboxDisplayMenu(){this.showInboxDisplayMenu=!this.showInboxDisplayMenu},openInboxOptionsMenu(){this.showInboxOptionMenu=!this.showInboxOptionMenu},onInboxOptionMenuClick(e){const n={mark_all_read:()=>this.markAllRead(),delete_all:()=>this.deleteAll(),delete_all_read:()=>this.deleteAllRead()}[e];n&&n(),this.$emit("redirect")},onFilterChange(e){this.$emit("filter",e),this.showInboxDisplayMenu=!1,this.$emit("redirect")}}},lKe={class:"flex items-center justify-between w-full gap-1 h-14 px-4 mb-2"},rKe={class:"flex items-center gap-2 min-w-0 flex-1"},cKe={class:"min-w-0 text-lg font-medium truncate text-n-slate-12"},dKe={class:"relative"},uKe={class:"relative flex items-center gap-1"};function mKe(e,t,n,s,o,a){const i=F("NextButton"),l=F("InboxDisplayMenu"),r=F("InboxOptionMenu"),d=ct("on-clickaway");return m(),f("div",lKe,[c("div",rKe,[c("h1",cKe,v(e.$t("INBOX.LIST.TITLE")),1),c("div",dKe,[b(i,{label:e.$t("INBOX.LIST.DISPLAY_DROPDOWN"),icon:"i-lucide-chevron-down","trailing-icon":"",slate:"",xs:"",faded:"",onClick:a.openInboxDisplayMenu},null,8,["label","onClick"]),o.showInboxDisplayMenu?ie((m(),P(l,{key:0,class:"absolute mt-1 top-full ltr:left-0 rtl:right-0",onFilter:a.onFilterChange},null,8,["onFilter"])),[[d,a.openInboxDisplayMenu]]):x("",!0)])]),c("div",uKe,[b(i,{icon:"i-lucide-sliders-vertical",slate:"",xs:"",faded:"",onClick:a.openInboxOptionsMenu},null,8,["onClick"]),o.showInboxOptionMenu?ie((m(),P(r,{key:0,class:"absolute top-full mt-1 ltr:right-0 ltr:lg:right-[unset] rtl:left-0 rtl:lg:left-[unset]",onOptionClick:a.onInboxOptionMenuClick},null,8,["onOptionClick"])),[[d,a.openInboxOptionsMenu]]):x("",!0)])])}const pKe=Re(iKe,[["render",mKe]]),hKe={components:{InboxCard:FHe,InboxListHeader:pKe,IntersectionObserver:wS,CmdBarConversationSnooze:C2},setup(){const{uiSettings:e}=Mn();return{uiSettings:e}},data(){return{infiniteLoaderOptions:{root:this.$refs.notificationList,rootMargin:"100px 0px 100px 0px"},page:1,status:"",type:"",sortOrder:$t.INBOX_SORT_BY.NEWEST,isInboxContextMenuOpen:!1,notificationIdToSnooze:null}},computed:{...gt({meta:"notifications/getMeta",uiFlags:"notifications/getUIFlags",notification:"notifications/getFilteredNotifications",notificationV4:"notifications/getFilteredNotificationsV4",inboxById:"inboxes/getInboxById"}),currentNotificationId(){return Number(this.$route.params.notification_id)},inboxFilters(){return{page:this.page,status:this.status,type:this.type,sortOrder:this.sortOrder}},notifications(){return this.notification(this.inboxFilters)},notificationsV4(){return this.notificationV4(this.inboxFilters)},showEndOfList(){return this.uiFlags.isAllNotificationsLoaded&&!this.uiFlags.isFetching},showEmptyState(){return!this.uiFlags.isFetching&&!this.notifications.length}},watch:{inboxFilters(e,t){e!==t&&this.$store.dispatch("notifications/updateNotificationFilters",e)}},mounted(){this.setSavedFilter(),this.fetchNotifications()},methods:{stateInbox(e){return this.inboxById(e)},fetchNotifications(){this.page=1,this.$store.dispatch("notifications/clear");const e=this.inboxFilters;this.$store.dispatch("notifications/index",e)},redirectToInbox(){this.$route.name!=="inbox_view"&&this.$router.replace({name:"inbox_view"})},loadMoreNotifications(){this.uiFlags.isAllNotificationsLoaded||(this.$store.dispatch("notifications/index",{page:this.page+1,status:this.status,type:this.type,sortOrder:this.sortOrder}),this.page+=1)},markNotificationAsRead(e){jt(Xi.MARK_NOTIFICATION_AS_READ);const{id:t,primary_actor_id:n,primary_actor_type:s}=e;this.$store.dispatch("notifications/read",{id:t,primaryActorId:n,primaryActorType:s,unreadCount:this.meta.unreadCount}).then(()=>{Te(this.$t("INBOX.ALERTS.MARK_AS_READ")),this.$store.dispatch("notifications/unReadCount")})},markNotificationAsUnRead(e){jt(Xi.MARK_NOTIFICATION_AS_UNREAD),this.redirectToInbox();const{id:t}=e;this.$store.dispatch("notifications/unread",{id:t}).then(()=>{Te(this.$t("INBOX.ALERTS.MARK_AS_UNREAD")),this.$store.dispatch("notifications/unReadCount")})},deleteNotification(e){jt(Xi.DELETE_NOTIFICATION),this.redirectToInbox(),this.$store.dispatch("notifications/delete",{notification:e,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{Te(this.$t("INBOX.ALERTS.DELETE"))})},onFilterChange(e){const{STATUS:t,TYPE:n,SORT_ORDER:s}=$t.INBOX_FILTER_TYPE;e.type===t&&(this.status=e.selected?e.key:""),e.type===n&&(this.type=e.selected?e.key:""),e.type===s&&(this.sortOrder=e.key),this.fetchNotifications()},setSavedFilter(){const{inbox_filter_by:e={}}=this.uiSettings,{status:t,type:n,sort_by:s}=e;this.status=t,this.type=n,this.sortOrder=s||$t.INBOX_SORT_BY.NEWEST,this.$store.dispatch("notifications/setNotificationFilters",this.inboxFilters)},openConversation(e){const{id:t,primaryActorId:n,primaryActorType:s,primaryActor:{inboxId:o},notificationType:a}=e;this.$route.params.notification_id!==t&&(jt(Xi.OPEN_CONVERSATION_VIA_INBOX,{notificationType:a}),this.$store.dispatch("notifications/read",{id:t,primaryActorId:n,primaryActorType:s,unreadCount:this.meta.unreadCount}).then(()=>{this.$store.dispatch("notifications/unReadCount")}),this.$router.push({name:"inbox_view_conversation",params:{inboxId:o,notification_id:t}}))}}},fKe={class:"flex w-full h-full bg-n-solid-1"},gKe={ref:"notificationList",class:"flex flex-col gap-px w-full h-[calc(100%-56px)] pb-3 overflow-x-hidden px-3 overflow-y-auto divide-y divide-n-weak [&>*:hover]:!border-y-transparent [&>*.active]:!border-y-transparent [&>*:hover+*]:!border-t-transparent [&>*.active+*]:!border-t-transparent"},_Ke={key:0,class:"text-center"},vKe={key:1,class:"p-4 text-sm font-medium text-center text-slate-400 dark:text-slate-400"};function bKe(e,t,n,s,o,a){const i=F("InboxListHeader"),l=F("InboxCard"),r=F("IntersectionObserver"),d=F("router-view"),u=F("CmdBarConversationSnooze");return m(),f("section",fKe,[c("div",{class:re(["flex flex-col h-full w-full lg:min-w-[400px] lg:max-w-[400px] ltr:border-r rtl:border-l border-n-weak",a.currentNotificationId?"hidden xl:flex":"flex"])},[b(i,{"is-context-menu-open":o.isInboxContextMenuOpen,onFilter:a.onFilterChange,onRedirect:a.redirectToInbox},null,8,["is-context-menu-open","onFilter","onRedirect"]),c("div",gKe,[(m(!0),f(pe,null,ye(a.notificationsV4,p=>{var h;return m(),P(l,{key:p.id,"inbox-item":p,"state-inbox":a.stateInbox((h=p.primaryActor)==null?void 0:h.inboxId),class:re(["rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3",a.currentNotificationId===p.id?"bg-n-alpha-1 dark:bg-n-alpha-3 click-animation rounded-xl active":""]),onMarkNotificationAsRead:a.markNotificationAsRead,onMarkNotificationAsUnRead:a.markNotificationAsUnRead,onDeleteNotification:a.deleteNotification,onContextMenuOpen:t[0]||(t[0]=g=>o.isInboxContextMenuOpen=!0),onContextMenuClose:t[1]||(t[1]=g=>o.isInboxContextMenuOpen=!1),onClick:g=>a.openConversation(p)},null,8,["inbox-item","state-inbox","class","onMarkNotificationAsRead","onMarkNotificationAsUnRead","onDeleteNotification","onClick"])}),128)),e.uiFlags.isFetching?(m(),f("div",_Ke,t[2]||(t[2]=[c("span",{class:"mt-4 mb-4 spinner"},null,-1)]))):x("",!0),a.showEmptyState?(m(),f("p",vKe,v(e.$t("INBOX.LIST.NO_NOTIFICATIONS")),1)):x("",!0),!a.showEndOfList&&!e.uiFlags.isFetching?(m(),P(r,{key:2,options:o.infiniteLoaderOptions,onObserved:a.loadMoreNotifications},null,8,["options","onObserved"])):x("",!0)],512)],2),b(d),b(u)])}const EKe=Re(hKe,[["render",bKe],["__scopeId","data-v-d4106083"]]),TKe={components:{NextButton:he},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0}},emits:["prev","next"],computed:{isUpDisabled(){return this.currentIndex===1},isDownDisabled(){return this.currentIndex===this.totalLength||this.totalLength<=1}},methods:{handleUpClick(){this.currentIndex>1&&this.$emit("prev")},handleDownClick(){this.currentIndex<this.totalLength&&this.$emit("next")}}},yKe={class:"flex gap-2 items-center"},AKe={class:"flex gap-1 items-center"},SKe={class:"flex items-center gap-1 whitespace-nowrap"},IKe={class:"text-sm font-medium text-n-slate-12 tabular-nums"},CKe={key:0,class:"text-sm text-n-slate-9 relative -top-px"},NKe={key:1,class:"text-sm text-n-slate-9 tabular-nums"};function OKe(e,t,n,s,o,a){const i=F("NextButton");return m(),f("div",yKe,[c("div",AKe,[b(i,{icon:"i-lucide-chevron-up",xs:"",slate:"",faded:"",disabled:a.isUpDisabled,onClick:a.handleUpClick},null,8,["disabled","onClick"]),b(i,{icon:"i-lucide-chevron-down",xs:"",slate:"",faded:"",disabled:a.isDownDisabled,onClick:a.handleDownClick},null,8,["disabled","onClick"])]),c("div",SKe,[c("span",IKe,v(n.totalLength<=1?"1":n.currentIndex),1),n.totalLength>1?(m(),f("span",CKe," / ")):x("",!0),n.totalLength>1?(m(),f("span",NKe,v(n.totalLength),1)):x("",!0)])])}const xKe=Re(TKe,[["render",OKe]]),wKe={components:{PaginationButton:xKe,NextButton:he,BackButton:ir,CustomSnoozeModal:T_},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0},activeNotification:{type:Object,default:null}},emits:["next","prev"],data(){return{showCustomSnoozeModal:!1}},computed:{...gt({meta:"notifications/getMeta"})},mounted(){yt.on(Tb,this.onCmdSnoozeNotification)},unmounted(){yt.off(Tb,this.onCmdSnoozeNotification)},methods:{openSnoozeNotificationModal(){document.querySelector("ninja-keys").open({parent:"snooze_notification"})},hideCustomSnoozeModal(){this.showCustomSnoozeModal=!1},async snoozeNotification(e){var t;try{await this.$store.dispatch("notifications/snooze",{id:(t=this.activeNotification)==null?void 0:t.id,snoozedUntil:e}),Te(this.$t("INBOX.ALERTS.SNOOZE"))}catch{}},onCmdSnoozeNotification(e){if(e===$t.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME)this.showCustomSnoozeModal=!0;else{const t=E_(e)||null;this.snoozeNotification(t)}},scheduleCustomSnooze(e){if(this.showCustomSnoozeModal=!1,e){const t=go(e)||null;this.snoozeNotification(t)}},deleteNotification(){jt(Xi.DELETE_NOTIFICATION),this.$store.dispatch("notifications/delete",{notification:this.activeNotification,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{Te(this.$t("INBOX.ALERTS.DELETE"))}),this.$router.replace({name:"inbox_view"})},onClickNext(){this.$emit("next")},onClickPrev(){this.$emit("prev")},onClickGoToInboxList(){this.$router.replace({name:"inbox_view"})}}},RKe={class:"flex items-center justify-between w-full gap-2 py-2 border-b ltr:pl-4 rtl:pl-2 h-14 ltr:pr-2 rtl:pr-4 rtl:border-r border-n-weak"},$Ke={class:"flex items-center gap-4"},MKe={class:"flex items-center gap-2"};function kKe(e,t,n,s,o,a){const i=F("BackButton"),l=F("PaginationButton"),r=F("NextButton"),d=F("CustomSnoozeModal"),u=F("woot-modal");return m(),f("div",RKe,[c("div",$Ke,[b(i,{compact:"","button-label":e.$t("INBOX.ACTION_HEADER.BACK"),class:"xl:hidden flex"},null,8,["button-label"]),n.totalLength>1?(m(),P(l,{key:0,"total-length":n.totalLength,"current-index":n.currentIndex+1,onNext:a.onClickNext,onPrev:a.onClickPrev},null,8,["total-length","current-index","onNext","onPrev"])):x("",!0)]),c("div",MKe,[b(r,{label:e.$t("INBOX.ACTION_HEADER.SNOOZE"),icon:"i-lucide-bell-minus",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:a.openSnoozeNotificationModal},null,8,["label","onClick"]),b(r,{label:e.$t("INBOX.ACTION_HEADER.DELETE"),icon:"i-lucide-trash-2",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:a.deleteNotification},null,8,["label","onClick"])]),b(u,{show:o.showCustomSnoozeModal,"onUpdate:show":t[0]||(t[0]=p=>o.showCustomSnoozeModal=p),"on-close":a.hideCustomSnoozeModal},{default:j(()=>[b(d,{onClose:a.hideCustomSnoozeModal,onChooseTime:a.scheduleCustomSnooze},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const LKe=Re(wKe,[["render",kKe]]),DKe={props:{emptyStateMessage:{type:String,default:""}},computed:{...gt({uiFlags:"notifications/getUIFlags"}),emptyMessage(){return this.emptyStateMessage?this.emptyStateMessage:this.$t("INBOX.LIST.NOTE")}}},PKe={class:"items-center justify-center hidden w-full h-full text-center bg-n-background lg:flex"},BKe={key:0,class:"my-4 spinner"},FKe={key:1,class:"flex flex-col items-center gap-2"},UKe={class:"text-sm font-medium text-slate-500 dark:text-slate-300"};function GKe(e,t,n,s,o,a){const i=F("fluent-icon");return m(),f("div",PKe,[e.uiFlags.isFetching?(m(),f("span",BKe)):(m(),f("div",FKe,[b(i,{icon:"mail-inbox",size:"40",class:"text-slate-600 dark:text-slate-400"}),c("span",UKe,v(a.emptyMessage),1)]))])}const L2=Re(DKe,[["render",GKe]]),VKe={components:{InboxItemHeader:LKe,InboxEmptyState:L2,ConversationBox:I2},setup(){const{uiSettings:e,updateUISettings:t}=Mn();return{uiSettings:e,updateUISettings:t}},data(){return{isConversationLoading:!1}},computed:{...gt({notification:"notifications/getFilteredNotifications",currentChat:"getSelectedChat",activeNotificationById:"notifications/getNotificationById",conversationById:"getConversationById",uiFlags:"notifications/getUIFlags",meta:"notifications/getMeta"}),notifications(){return this.notification({sortOrder:this.activeSortOrder})},inboxId(){return Number(this.$route.params.inboxId)},notificationId(){return Number(this.$route.params.notification_id)},activeNotification(){return this.activeNotificationById(this.notificationId)},conversationId(){var e,t;return(t=(e=this.activeNotification)==null?void 0:e.primary_actor)==null?void 0:t.id},totalNotificationCount(){return this.meta.count},showEmptyState(){var e;return!this.conversationId||!((e=this.notifications)!=null&&e.length)&&this.uiFlags.isFetching},activeNotificationIndex(){var e;return(e=this.notifications)==null?void 0:e.findIndex(t=>t.id===this.notificationId)},activeSortOrder(){const{inbox_filter_by:e={}}=this.uiSettings,{sort_by:t}=e;return t||"desc"},isContactPanelOpen(){if(this.currentChat.id){const{is_contact_sidebar_open:e}=this.uiSettings;return e}return!1}},watch:{conversationId:{immediate:!0,handler(e,t){e!==t&&this.fetchConversationById()}}},mounted(){this.$store.dispatch("agents/get")},methods:{async fetchConversationById(){if(!this.notificationId||!this.conversationId)return;this.$store.dispatch("clearSelectedState");const e=this.findConversation();if(e){this.setActiveChat(e);return}this.isConversationLoading=!0,await this.$store.dispatch("getConversation",this.conversationId),this.setActiveChat(),this.isConversationLoading=!1},setActiveChat(){const e=this.findConversation();e&&this.$store.dispatch("setActiveChat",{data:e}).then(()=>{yt.emit(sn.SCROLL_TO_MESSAGE)})},findConversation(){return this.conversationById(this.conversationId)},navigateToConversation(e,t){let n;t==="prev"&&e?n=e-1:t==="next"&&e<this.totalNotificationCount&&(n=e+1);const s=this.notifications[n];s&&this.openNotification(s)},openNotification(e){const{id:t,primary_actor_id:n,primary_actor_type:s,primary_actor:{meta:{unreadCount:o}={}},notification_type:a}=e;jt(Xi.OPEN_CONVERSATION_VIA_INBOX,{notificationType:a}),this.$store.dispatch("notifications/read",{id:t,primaryActorId:n,primaryActorType:s,unreadCount:o}),this.$router.push({name:"inbox_view_conversation",params:{notification_id:t}})},onClickNext(){this.navigateToConversation(this.activeNotificationIndex,"next")},onClickPrev(){this.navigateToConversation(this.activeNotificationIndex,"prev")},onToggleContactPanel(){this.updateUISettings({is_contact_sidebar_open:!this.isContactPanelOpen})}}},HKe={class:"h-full w-full xl:w-[calc(100%-400px)]"},KKe={key:0,class:"flex w-full h-full"},zKe={key:1,class:"flex flex-col w-full h-full"},WKe={key:0,class:"flex items-center h-[calc(100%-56px)] justify-center bg-slate-25 dark:bg-slate-800"};function jKe(e,t,n,s,o,a){const i=F("InboxEmptyState"),l=F("InboxItemHeader"),r=F("ConversationBox");return m(),f("div",HKe,[a.showEmptyState?(m(),f("div",KKe,[b(i,{"empty-state-message":e.$t("INBOX.LIST.NO_MESSAGES_AVAILABLE")},null,8,["empty-state-message"])])):(m(),f("div",zKe,[b(l,{class:"flex-1","total-length":a.totalNotificationCount,"current-index":a.activeNotificationIndex,"active-notification":a.activeNotification,onNext:a.onClickNext,onPrev:a.onClickPrev},null,8,["total-length","current-index","active-notification","onNext","onPrev"]),o.isConversationLoading?(m(),f("div",WKe,t[0]||(t[0]=[c("span",{class:"my-4 spinner"},null,-1)]))):(m(),P(r,{key:1,class:"h-[calc(100%-56px)] [&.conversation-details-wrap]:!border-0","is-inbox-view":"","inbox-id":a.inboxId,"is-contact-panel-open":a.isContactPanelOpen,"is-on-expanded-layout":!1,onContactPanelToggle:a.onToggleContactPanel},null,8,["inbox-id","is-contact-panel-open","onContactPanelToggle"]))]))])}const YKe=Re(VKe,[["render",jKe]]),XKe=[{path:Pt("accounts/:accountId/inbox-view"),component:EKe,children:[{path:"",name:"inbox_view",component:L2,meta:{permissions:[...ys,...Bs],featureFlag:xt.CHATWOOT_V4}},{path:":notification_id",name:"inbox_view_conversation",component:YKe,meta:{permissions:[...ys,...Bs],featureFlag:xt.CHATWOOT_V4}}]}],Ya=(e="")=>{const t=e?`/${e}`:"";return Pt(`accounts/:accountId/portals${t}`)},qKe={components:{NextButton:he},data(){return{helpCenterDocsURL:$t.HELP_CENTER_DOCS_URL,upgradeFeature:[{key:1,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.TITLE"),icon:"book-copy",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.DESCRIPTION")},{key:2,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.TITLE"),icon:"globe-line",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.DESCRIPTION")},{key:3,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.TITLE"),icon:"heart-handshake",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.DESCRIPTION")},{key:4,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.TITLE"),icon:"search-check",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.DESCRIPTION")}]}},computed:{...gt({accountId:"getCurrentAccountId",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"})},methods:{openBillingPage(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},openHelpCenterDocs(){window.open(this.helpCenterDocsURL,"_blank")}}},ZKe={class:"flex flex-col gap-12 sm:gap-16 items-center justify-center py-0 px-4 md:px-0 w-full min-h-screen max-w-full overflow-auto bg-white dark:bg-slate-900"},QKe={class:"flex flex-col justify-start sm:justify-center gap-6"},JKe={class:"flex flex-col gap-1.5 items-start sm:items-center"},eze={class:"text-slate-900 dark:text-white text-left sm:text-center text-4xl sm:text-5xl mb-6 font-semibold"},tze={class:"max-w-2xl text-base font-normal leading-6 text-left sm:text-center text-slate-700 dark:text-slate-200"},nze={key:0,class:"flex flex-row gap-3 justify-start items-center sm:justify-center"},sze={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-16 w-full max-w-2xl overflow-auto"},aze={class:"flex gap-2 flex-row"},oze={class:"font-semibold text-lg text-slate-800 dark:text-slate-25"},ize={class:"text-sm leading-6 text-slate-700 dark:text-slate-100"};function lze(e,t,n,s,o,a){const i=F("NextButton"),l=F("fluent-icon");return m(),f("div",ZKe,[c("div",QKe,[c("div",JKe,[c("h1",eze,v(e.$t("HELP_CENTER.UPGRADE_PAGE.TITLE")),1),c("p",tze,v(e.isOnChatwootCloud?e.$t("HELP_CENTER.UPGRADE_PAGE.DESCRIPTION"):e.$t("HELP_CENTER.UPGRADE_PAGE.SELF_HOSTED_DESCRIPTION")),1)]),e.isOnChatwootCloud?(m(),f("div",nze,[b(i,{outline:"",label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.LEARN_MORE"),onClick:a.openHelpCenterDocs},null,8,["label","onClick"]),b(i,{label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.UPGRADE"),onClick:a.openBillingPage},null,8,["label","onClick"])])):x("",!0)]),c("div",sze,[(m(!0),f(pe,null,ye(o.upgradeFeature,r=>(m(),f("div",{key:r.key,class:"w-64 min-w-full"},[c("div",aze,[c("div",null,[b(l,{icon:r.icon,"icon-lib":"lucide",size:26,class:"mt-px text-slate-800 dark:text-slate-25"},null,8,["icon"])]),c("div",null,[c("h5",oze,v(r.title),1),c("p",ize,v(r.description),1)])])]))),128))])])}const rze=Re(qKe,[["render",lze]]),cze={class:"flex flex-grow-0 w-full h-full min-h-0 app-wrapper"},dze={key:0,class:"flex flex-1 h-full px-0 overflow-hidden bg-white dark:bg-slate-900"},uze={__name:"HelpCenterPageRouteView",setup(e){const t=xn(),n=hn(),{uiSettings:s,updateUISettings:o}=Mn(),a=w(()=>n.getters.getCurrentAccountId),i=w(()=>n.getters["portals/allPortals"]),l=(_,T)=>n.getters["accounts/isFeatureEnabledonAccount"](_,T),r=w(()=>l(a.value,xt.HELP_CENTER)),d=w(()=>{const _=t.params.portalSlug||s.value.last_active_portal_slug;return _?n.getters["portals/portalBySlug"](_):i.value[0]}),u=w(()=>{var _;return d.value?(_=d.value.meta)==null?void 0:_.default_locale:""}),p=w(()=>t.params.locale||u.value),h=w(()=>d.value?d.value.slug:""),g=async()=>{await n.dispatch("portals/index");const _={portalSlug:h.value,locale:p.value};n.dispatch("portals/show",_),n.dispatch("categories/index",_),n.dispatch("agents/get")};return ut(()=>g()),lt(()=>t.params.portalSlug,_=>{_&&_!==s.value.last_active_portal_slug&&o({last_active_portal_slug:_,last_active_locale_code:p.value})}),(_,T)=>{const S=F("router-view");return m(),f("div",cze,[r.value?(m(),f("section",dze,[b(S)])):(m(),P(rze,{key:1}))])}}},mze={class:"flex items-center justify-center w-full bg-n-background text-slate-600 dark:text-slate-200"},pze={__name:"PortalsIndexPage",setup(e){const t=hn(),n=wn(),{uiSettings:s}=Mn(),o=xn(),a=w(()=>t.getters["portals/allPortals"]),i=p=>!!a.value.find(h=>h.slug===p),l=(p,h)=>{n.replace({name:p,params:h,replace:!0})},r=()=>{const{last_active_portal_slug:p,last_active_locale_code:h}=s.value||{};if(i(p))return{portalSlug:p,locale:h};if(a.value.length>0){const{slug:g,meta:{default_locale:_}={}}=a.value[0];return{portalSlug:g,locale:_}}return null},d=()=>{const p=r(),{navigationPath:h}=o.params,_=["portals_articles_index","portals_categories_index","portals_locales_index","portals_settings_index"].includes(h)?h:"portals_articles_index";return p?l(_,p):l("portals_new",{})},u=async()=>{await t.dispatch("portals/index"),Zt(()=>d())};return ut(()=>u()),(p,h)=>(m(),f("div",mze,[b(Gs)]))}},hze={class:"flex justify-between w-full gap-1"},fze={class:"flex items-center gap-2"},gze={class:"relative flex items-center group"},_ze={class:"flex items-center justify-between w-full gap-4"},vze={class:"flex items-center gap-4"},bze={class:"flex items-center gap-1"},Eze={class:"text-sm truncate text-n-slate-11"},Tze={class:"block text-sm whitespace-nowrap text-n-slate-11"},yze={class:"inline-flex items-center gap-1 text-n-slate-11 whitespace-nowrap"},Aze={class:"text-sm"},Sze={class:"text-sm text-n-slate-11 line-clamp-1"},pE={__name:"ArticleCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},status:{type:String,required:!0},author:{type:Object,default:null},category:{type:Object,required:!0},views:{type:Number,required:!0},updatedAt:{type:Number,required:!0}},emits:["openArticle","articleAction"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),[a,i]=la(),l=w(()=>{const S=Object.entries(oTe).reduce((y,[A,C])=>(y[A]={...C,label:o(C.label)},y),{});return[...(Sb[n.status]||Sb[ol.PUBLISHED]).map(y=>S[y]),S.delete]}),r=w(()=>{switch(n.status){case"archived":return"text-n-slate-12";case"draft":return"text-n-amber-11";default:return"text-n-teal-11"}}),d=w(()=>{switch(n.status){case"archived":return o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.ARCHIVED");case"draft":return o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.DRAFT");default:return o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.PUBLISHED")}}),u=w(()=>{var S;return(S=n.category)!=null&&S.slug?`${n.category.icon} ${n.category.name}`:o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.CATEGORY.UNCATEGORISED")}),p=w(()=>{var S,E;return((S=n.author)==null?void 0:S.name)||((E=n.author)==null?void 0:E.availableName)||""}),h=w(()=>{var S;return(S=n.author)==null?void 0:S.thumbnail}),g=w(()=>ms(n.updatedAt)),_=({action:S,value:E})=>{i(!1),s("articleAction",{action:S,value:E,id:n.id})},T=S=>{s("openArticle",S)};return(S,E)=>{const y=ct("on-clickaway");return m(),P(yl,null,{default:j(()=>[c("div",hze,[c("span",{class:"text-base cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12 line-clamp-1",onClick:E[0]||(E[0]=A=>T(e.id))},v(e.title),1),c("div",fze,[c("span",{class:re(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",r.value])},v(d.value),3),ie((m(),f("div",gze,[b(he,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:E[1]||(E[1]=A=>I(i)())}),I(a)?(m(),P(ma,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full",onAction:E[2]||(E[2]=A=>_(A))},null,8,["menu-items"])):x("",!0)])),[[y,()=>I(i)(!1)]])])]),c("div",_ze,[c("div",vze,[c("div",bze,[b(yn,{name:p.value,src:h.value,size:16,"rounded-full":""},null,8,["name","src"]),c("span",Eze,v(p.value||"-"),1)]),c("span",Tze,v(u.value),1),c("div",yze,[b(Ht,{icon:"i-lucide-eye",class:"size-4"}),c("span",Aze,v(I(o)("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.VIEWS",{count:e.views})),1)])]),c("span",Sze,v(g.value),1)])]),_:1})}}},hE=[{id:1,title:"How to get an SSL certificate for your Help Center's custom domain",status:"draft",updatedAt:1729205669,author:{availableName:"Michael"},category:{slug:"configuration",icon:"",name:"Setup & Configuration"},views:3400},{id:2,title:"Setting up your first Help Center portal",status:"published",updatedAt:1729205669,author:{availableName:"John"},category:{slug:"onboarding",icon:"",name:"Onboarding"},views:400},{id:3,title:"Best practices for organizing your Help Center content",status:"archived",updatedAt:1729205669,author:{availableName:"Fernando"},category:{slug:"best-practices",icon:"",name:"Best Practices"},views:400},{id:4,title:"Customizing the appearance of your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Jane"},category:{slug:"design",icon:"",name:"Design"},views:400},{id:5,title:"Integrating your Help Center with third-party tools",status:"published",updatedAt:1729205669,author:{availableName:"Sarah"},category:{slug:"integrations",icon:"",name:"Integrations"},views:2800},{id:6,title:"Managing user permissions in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Alex"},category:{slug:"administration",icon:"",name:"Administration"},views:1200},{id:7,title:"Creating and managing FAQ sections",status:"published",updatedAt:1729205669,author:{availableName:"Emily"},category:{slug:"content-management",icon:"",name:"Content Management"},views:5600},{id:8,title:"Implementing search functionality in your Help Center",status:"archived",updatedAt:1729205669,author:{availableName:"David"},category:{slug:"features",icon:"",name:"Features"},views:1800},{id:9,title:"Analyzing Help Center usage metrics",status:"published",updatedAt:1729205669,author:{availableName:"Rachel"},category:{slug:"analytics",icon:"",name:"Analytics"},views:3200},{id:10,title:"Setting up multilingual support in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Carlos"},category:{slug:"localization",icon:"",name:"Localization"},views:900},{id:11,title:"Creating interactive tutorials for your products",status:"published",updatedAt:1729205669,author:{availableName:"Olivia"},category:{slug:"education",icon:"",name:"Education"},views:4100},{id:12,title:"Implementing a feedback system in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Nathan"},category:{slug:"user-engagement",icon:"",name:"User Engagement"},views:750},{id:13,title:"Optimizing Help Center content for SEO",status:"published",updatedAt:1729205669,author:{availableName:"Sophia"},category:{slug:"seo",icon:"",name:"SEO"},views:2900},{id:14,title:"Creating a knowledge base for internal teams",status:"archived",updatedAt:1729205669,author:{availableName:"Daniel"},category:{slug:"internal-resources",icon:"",name:"Internal Resources"},views:1500}],Ize={class:"flex flex-col gap-6"},Cze={__name:"CreatePortalDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=Ot(),i=U(null),l=Ve("portals/isCreatingPortal"),r=ks({name:"",slug:"",domain:"",logoUrl:"",avatarBlobId:""}),d={name:{required:it,minLength:Nn(2)},slug:{required:it}},u=Lt(d,r),p=w(()=>u.value.name.$error?o("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR"):""),h=w(()=>u.value.slug.$error?o("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR"):""),g=w(()=>u.value.$invalid);lt(()=>r.name,()=>{r.slug=_O(r.name)});const _=y=>{s("create",{slug:y.slug,locale:"en"})},T=()=>{Object.keys(r).forEach(y=>{r[y]=""}),u.value.$reset()},S=async y=>{try{await a.dispatch("portals/create",y),i.value.close();const A={has_custom_domain:!!y.custom_domain};jt(av.ONBOARD_BASIC_INFORMATION,A),jt(av.CREATE_PORTAL,A),Te(o("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.SUCCESS_MESSAGE")),T(),_(y)}catch(A){i.value.close(),Te((A==null?void 0:A.message)||o("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.ERROR_MESSAGE"))}},E=async()=>{if(!await u.value.$validate())return;const A={name:r.name,slug:r.slug,custom_domain:r.domain,blob_id:r.avatarBlobId||null,color:"#2781F6"};await S(A)};return t({dialogRef:i}),(y,A)=>(m(),P(Ss,{ref_key:"dialogRef",ref:i,type:"edit",title:I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.TITLE"),"confirm-button-label":I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.CONFIRM_BUTTON_LABEL"),description:I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.DESCRIPTION"),"disable-confirm-button":g.value||I(l),"is-loading":I(l),onConfirm:E},{default:j(()=>[c("div",Ize,[b(ps,{id:"portal-name",modelValue:r.name,"onUpdate:modelValue":A[0]||(A[0]=C=>r.name=C),type:"text",placeholder:I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.PLACEHOLDER"),label:I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.LABEL"),"message-type":p.value?"error":"info",message:p.value||I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.MESSAGE")},null,8,["modelValue","placeholder","label","message-type","message"]),b(ps,{id:"portal-slug",modelValue:r.slug,"onUpdate:modelValue":A[1]||(A[1]=C=>r.slug=C),type:"text",placeholder:I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.PLACEHOLDER"),label:I(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.LABEL"),"message-type":h.value?"error":"info",message:h.value||I($S)(r.slug)},null,8,["modelValue","placeholder","label","message-type","message"])])]),_:1},8,["title","confirm-button-label","description","disable-confirm-button","is-loading"]))}},Nze={class:"grid grid-cols-2 gap-4 p-px"},Oze={class:"space-y-4"},xze={class:"space-y-4"},wze={__name:"PortalEmptyState",setup(e){const t=U(null),n=()=>{t.value.dialogRef.open()},s=wn(),o=({slug:a,locale:i})=>{s.push({name:"portals_articles_index",params:{portalSlug:a,locale:i}})};return(a,i)=>(m(),P(Mi,{title:a.$t("HELP_CENTER.TITLE"),subtitle:a.$t("HELP_CENTER.NEW_PAGE.DESCRIPTION")},{"empty-state-item":j(()=>[c("div",Nze,[c("div",Oze,[(m(!0),f(pe,null,ye(I(hE),(l,r)=>(m(),P(pE,{id:l.id,key:`article-${r}`,title:l.title,status:l.status,"updated-at":l.updatedAt,author:l.author,category:l.category,views:l.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))]),c("div",xze,[(m(!0),f(pe,null,ye(I(hE).reverse(),(l,r)=>(m(),P(pE,{id:l.id,key:`article-${r}`,title:l.title,status:l.status,"updated-at":l.updatedAt,author:l.author,category:l.category,views:l.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))])])]),actions:j(()=>[b(he,{label:a.$t("HELP_CENTER.NEW_PAGE.CREATE_PORTAL_BUTTON"),icon:"i-lucide-plus",onClick:n},null,8,["label"]),b(Cze,{ref_key:"createPortalDialogRef",ref:t,onCreate:o},null,512)]),_:1},8,["title","subtitle"]))}},Rze={class:"w-full h-full bg-n-background"},$ze={__name:"PortalsNewPage",setup(e){return(t,n)=>(m(),f("div",Rze,[b(wze)]))}},fE=()=>Oo(()=>import("./PortalsArticlesIndexPage-PlnSWY7Q.js"),__vite__mapDeps([13,2,3,4,5,6,14,15,16,1,7,8,9,17,18,19,20,11,21,22,23,24,25,26,10,27,28,29,30,31])),Mze=()=>Oo(()=>import("./PortalsArticlesNewPage-CyWrKSUj.js"),__vite__mapDeps([32,2,3,4,14,15,17,6,5,18,9,19,8,20,11,33,16,1,7,34,23,24,25,26,10,27,28,29,30])),gE=()=>Oo(()=>import("./PortalsArticlesEditPage-aUQJWgue.js"),__vite__mapDeps([35,2,3,4,14,15,17,6,18,9,19,8,20,11,5,33,16,1,7,34,23,24,25,26,10,27,28,29,30])),kze=()=>Oo(()=>import("./PortalsCategoriesIndexPage-C9xAYVpW.js"),__vite__mapDeps([36,2,3,4,5,6,14,15,17,18,9,19,8,20,11,16,1,7,21,22,23,24,25,26,10,27,28,29,30])),Lze=()=>Oo(()=>import("./PortalsLocalesIndexPage-r8uv-tWe.js"),__vite__mapDeps([37,2,3,4,5,6,16,1,7,8,9,14,15,17,18,19,20,11,23,24,25,26,10,27,28,29,30])),Dze=()=>Oo(()=>import("./PortalsSettingsIndexPage-CtITFyz-.js"),__vite__mapDeps([38,2,14,15,3,4,17,6,5,16,1,7,8,9,18,19,20,11,23,24,25,26,10,27,28,29,30])),ii={featureFlag:xt.HELP_CENTER,permissions:["administrator","agent","knowledge_base_manage"]},Pze=[{path:Ya(":portalSlug/:locale/:categorySlug?/articles/:tab?"),name:"portals_articles_index",meta:ii,component:fE},{path:Ya(":portalSlug/:locale/:categorySlug?/articles/new"),name:"portals_articles_new",meta:ii,component:Mze},{path:Ya(":portalSlug/:locale/:categorySlug?/articles/:tab?/edit/:articleSlug"),name:"portals_articles_edit",meta:ii,component:gE},{path:Ya(":portalSlug/:locale/categories"),name:"portals_categories_index",meta:ii,component:kze},{path:Ya(":portalSlug/:locale/categories/:categorySlug/articles"),name:"portals_categories_articles_index",meta:ii,component:fE},{path:Ya(":portalSlug/:locale/categories/:categorySlug/articles/:articleSlug"),name:"portals_categories_articles_edit",meta:ii,component:gE},{path:Ya(":portalSlug/locales"),name:"portals_locales_index",meta:ii,component:Lze},{path:Ya(":portalSlug/settings"),name:"portals_settings_index",meta:ii,component:Dze},{path:Ya("new"),name:"portals_new",meta:{featureFlag:xt.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:$ze},{path:Ya(":navigationPath"),name:"portals_index",meta:{featureFlag:xt.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:pze}],Bze={routes:[{path:Ya(),component:uze,redirect:e=>({name:"portals_index",params:{navigationPath:"portals_articles_index",...e.params}}),children:[...Pze]}]},Fze={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},Uze={__name:"CampaignsPageRouteView",props:{keepAlive:{type:Boolean,default:!0}},setup(e){const t=Ot();return ut(()=>{t.dispatch("campaigns/get"),t.dispatch("labels/get")}),(n,s)=>{const o=F("router-view");return m(),f("div",Fze,[b(o,null,{default:j(({Component:a})=>[e.keepAlive?(m(),P(Ic,{key:0},[(m(),P(hs(a)))],1024)):(m(),P(hs(a),{key:1}))]),_:1})])}}},wm={ONGOING:"ongoing",ONE_OFF:"one_off"},Gze={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},Vze={class:"sticky top-0 z-10 px-6 lg:px-0"},Hze={class:"w-full max-w-[60rem] mx-auto"},Kze={class:"flex items-center justify-between w-full h-20 gap-2"},zze={class:"text-xl font-medium text-n-slate-12"},Wze={class:"relative group/campaign-button"},jze={class:"flex-1 px-6 overflow-y-auto lg:px-0"},Yze={class:"w-full max-w-[60rem] mx-auto py-4"},D2={__name:"CampaignLayout",props:{headerTitle:{type:String,default:""},buttonLabel:{type:String,default:""}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>{const i=ct("on-clickaway");return m(),f("section",Gze,[c("header",Vze,[c("div",Hze,[c("div",Kze,[c("span",zze,v(e.headerTitle),1),ie((m(),f("div",Wze,[b(he,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:s},null,8,["label"]),et(o.$slots,"action")])),[[i,()=>n("close")]])])])]),c("main",jze,[c("div",Yze,[et(o.$slots,"default")])])])}}},Xze={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},qze={class:"flex items-center gap-1.5 flex-shrink-0"},Zze={class:"text-sm font-medium text-n-slate-12"},Qze={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},Jze={class:"flex items-center gap-1.5 flex-shrink-0"},eWe={class:"text-sm font-medium text-n-slate-12"},tWe={__name:"LiveChatCampaignDetails",props:{sender:{type:Object,default:null},inboxName:{type:String,default:""},inboxIcon:{type:String,default:""}},setup(e){const t=e,{t:n}=He(),s=w(()=>{var a;return((a=t.sender)==null?void 0:a.name)||n("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.BOT")}),o=w(()=>{var a;return(a=t.sender)==null?void 0:a.thumbnail});return(a,i)=>(m(),f(pe,null,[c("span",Xze,v(I(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.SENT_BY")),1),c("div",qze,[b(yn,{name:s.value,src:o.value,size:16,"rounded-full":""},null,8,["name","src"]),c("span",Zze,v(s.value),1)]),c("span",Qze,v(I(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.FROM")),1),c("div",Jze,[b(Ht,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),c("span",eWe,v(e.inboxName),1)])],64))}},nWe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},sWe={class:"flex items-center gap-1.5 flex-shrink-0"},aWe={class:"text-sm font-medium text-n-slate-12"},oWe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},iWe={class:"flex-1 text-sm font-medium truncate text-n-slate-12"},lWe={__name:"SMSCampaignDetails",props:{inboxName:{type:String,default:""},inboxIcon:{type:String,default:""},scheduledAt:{type:Number,default:0}},setup(e){const{t}=He();return(n,s)=>(m(),f(pe,null,[c("span",nWe,v(I(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.SENT_FROM")),1),c("div",sWe,[b(Ht,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),c("span",aWe,v(e.inboxName),1)]),c("span",oWe,v(I(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.ON")),1),c("span",iWe,v(I(su)(new Date(e.scheduledAt),"LLL d, h:mm a")),1)],64))}},rWe={class:"flex flex-col items-start justify-between flex-1 min-w-0 gap-2"},cWe={class:"flex justify-between gap-3 w-fit"},dWe={class:"text-base font-medium capitalize text-n-slate-12 line-clamp-1"},uWe={class:"text-sm text-n-slate-11 line-clamp-1 [&>p]:mb-0 h-6"},mWe={class:"flex items-center w-full h-6 gap-2 overflow-hidden"},pWe={class:"flex items-center justify-end w-20 gap-2"},_E="completed",L_={__name:"CampaignCard",props:{title:{type:String,default:""},message:{type:String,default:""},isLiveChatType:{type:Boolean,default:!1},isEnabled:{type:Boolean,default:!1},status:{type:String,default:""},sender:{type:Object,default:null},inbox:{type:Object,default:null},scheduledAt:{type:Number,default:0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),{formatMessage:a}=oo(),i=w(()=>n.isLiveChatType?n.isEnabled:n.status!==_E),l=w(()=>({"text-n-teal-11":i.value,"text-n-slate-12":!i.value})),r=w(()=>n.isLiveChatType?n.isEnabled?o("CAMPAIGN.LIVE_CHAT.CARD.STATUS.ENABLED"):o("CAMPAIGN.LIVE_CHAT.CARD.STATUS.DISABLED"):n.status===_E?o("CAMPAIGN.SMS.CARD.STATUS.COMPLETED"):o("CAMPAIGN.SMS.CARD.STATUS.SCHEDULED")),d=w(()=>{var p;return((p=n.inbox)==null?void 0:p.name)||""}),u=w(()=>{const{phone_number:p,channel_type:h}=n.inbox;return Rc(h,p)});return(p,h)=>{const g=ct("dompurify-html");return m(),P(yl,{layout:"row"},{default:j(()=>[c("div",rWe,[c("div",cWe,[c("span",dWe,v(e.title),1),c("span",{class:re(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",l.value])},v(r.value),3)]),ie(c("div",uWe,null,512),[[g,I(a)(e.message,!1,!1,!1)]]),c("div",mWe,[e.isLiveChatType?(m(),P(tWe,{key:0,sender:e.sender,"inbox-name":d.value,"inbox-icon":u.value},null,8,["sender","inbox-name","inbox-icon"])):(m(),P(lWe,{key:1,"inbox-name":d.value,"inbox-icon":u.value,"scheduled-at":e.scheduledAt},null,8,["inbox-name","inbox-icon","scheduled-at"]))])]),c("div",pWe,[e.isLiveChatType?(m(),P(he,{key:0,variant:"faded",size:"sm",color:"slate",icon:"i-lucide-sliders-vertical",onClick:h[0]||(h[0]=_=>s("edit"))})):x("",!0),b(he,{variant:"faded",color:"ruby",size:"sm",icon:"i-lucide-trash",onClick:h[1]||(h[1]=_=>s("delete"))})])]),_:1})}}},hWe={class:"flex flex-col gap-4"},P2={__name:"CampaignList",props:{campaigns:{type:Array,required:!0},isLiveChatType:{type:Boolean,default:!1}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,s=a=>n("edit",a),o=a=>n("delete",a);return(a,i)=>(m(),f("div",hWe,[(m(!0),f(pe,null,ye(e.campaigns,l=>(m(),P(L_,{key:l.id,title:l.title,message:l.message,"is-enabled":l.enabled,status:l.campaign_status,sender:l.sender,inbox:l.inbox,"scheduled-at":l.scheduled_at,"is-live-chat-type":e.isLiveChatType,onEdit:r=>s(l),onDelete:r=>o(l)},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at","is-live-chat-type","onEdit","onDelete"]))),128))]))}},fWe={class:"flex flex-col gap-1"},gWe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},_We={class:"flex flex-col gap-1"},vWe={for:"sentBy",class:"mb-0.5 text-sm font-medium text-n-slate-12"},bWe={class:"flex flex-col gap-2.5"},EWe={class:"mb-2.5 text-sm font-medium text-n-slate-12"},TWe={class:"flex items-center gap-2"},yWe={class:"text-sm font-medium text-n-slate-12"},AWe={class:"flex items-center gap-2"},SWe={class:"text-sm font-medium text-n-slate-12"},IWe={key:0,class:"flex items-center justify-between w-full gap-3"},B2={__name:"LiveChatCampaignForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},selectedCampaign:{type:Object,default:()=>({})},showActionButtons:{type:Boolean,default:!0}},emits:["submit","cancel"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l={uiFlags:Ve("campaigns/getUIFlags"),inboxes:Ve("inboxes/getWebsiteInboxes")},r=U([]),d={title:"",message:"",inboxId:null,senderId:0,enabled:!0,triggerOnlyDuringBusinessHours:!1,endPoint:"",timeOnPage:10},u=ks({...d}),p={shouldBeAValidURLPattern:$=>{try{return new LC($),!0}catch{return!1}},shouldStartWithHTTP:$=>$?$.startsWith("https://")||$.startsWith("http://"):!1},h={title:{required:it,minLength:Nn(1)},message:{required:it,minLength:Nn(1)},inboxId:{required:it},senderId:{required:it},endPoint:{required:it,...p},timeOnPage:{required:it}},g=Lt(h,u),_=w(()=>l.uiFlags.value.isCreating),T=w(()=>g.value.$invalid),S=($,M,K)=>($==null?void 0:$.map(B=>({value:B[M],label:B[K]})))??[],E=w(()=>S(l.inboxes.value,"id","name")),y=w(()=>[{value:0,label:"Bot"},...S(r.value,"id","name")]),A=($,M)=>g.value[$].$error?a(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.${M}.ERROR`):"",C=w(()=>({title:A("title","TITLE"),message:A("message","MESSAGE"),inbox:A("inboxId","INBOX"),endPoint:A("endPoint","END_POINT"),timeOnPage:A("timeOnPage","TIME_ON_PAGE"),sender:A("senderId","SENT_BY")})),O=()=>Object.assign(u,d),N=()=>o("cancel"),R=async $=>{var M,K;if(!$){r.value=[];return}try{const B=await i.dispatch("inboxMembers/get",{inboxId:$});r.value=((M=B==null?void 0:B.data)==null?void 0:M.payload)??[]}catch(B){r.value=[],Te(((K=B==null?void 0:B.response)==null?void 0:K.message)??a("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE"))}},k=()=>({title:u.title,message:u.message,inbox_id:u.inboxId,sender_id:u.senderId||null,enabled:u.enabled,trigger_only_during_business_hours:u.triggerOnlyDuringBusinessHours,trigger_rules:{url:u.endPoint,time_on_page:u.timeOnPage}}),L=async()=>{await g.value.$validate()&&(o("submit",k()),s.mode==="create"&&(O(),N()))},D=$=>{if(!$)return;const{title:M,message:K,inbox:{id:B},sender:H,enabled:G,trigger_only_during_business_hours:V,trigger_rules:{url:Y,time_on_page:ee}}=$;Object.assign(u,{title:M,message:K,inboxId:B,senderId:(H==null?void 0:H.id)??0,enabled:G,triggerOnlyDuringBusinessHours:V,endPoint:Y,timeOnPage:ee})};return lt(()=>u.inboxId,$=>{$&&R($)},{immediate:!0}),lt(()=>s.selectedCampaign,$=>{s.mode==="edit"&&$&&D($)},{immediate:!0}),t({prepareCampaignDetails:k,isSubmitDisabled:T}),($,M)=>(m(),f("form",{class:"flex flex-col gap-4",onSubmit:Ke(L,["prevent"])},[b(ps,{modelValue:u.title,"onUpdate:modelValue":M[0]||(M[0]=K=>u.title=K),label:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.LABEL"),placeholder:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.PLACEHOLDER"),message:C.value.title,"message-type":C.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),b(Yc,{modelValue:u.message,"onUpdate:modelValue":M[1]||(M[1]=K=>u.message=K),label:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.LABEL"),placeholder:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.PLACEHOLDER"),message:C.value.message,"message-type":C.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",fWe,[c("label",gWe,v(I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.LABEL")),1),b(Oi,{id:"inbox",modelValue:u.inboxId,"onUpdate:modelValue":M[2]||(M[2]=K=>u.inboxId=K),options:E.value,"has-error":!!C.value.inbox,placeholder:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.PLACEHOLDER"),message:C.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",_We,[c("label",vWe,v(I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.LABEL")),1),b(Oi,{id:"sentBy",modelValue:u.senderId,"onUpdate:modelValue":M[3]||(M[3]=K=>u.senderId=K),options:y.value,"has-error":!!C.value.sender,disabled:!u.inboxId,placeholder:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:C.value.sender},null,8,["modelValue","options","has-error","disabled","placeholder","message"])]),b(ps,{modelValue:u.endPoint,"onUpdate:modelValue":M[4]||(M[4]=K=>u.endPoint=K),type:"url",label:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.LABEL"),placeholder:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.PLACEHOLDER"),message:C.value.endPoint,"message-type":C.value.endPoint?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),b(ps,{modelValue:u.timeOnPage,"onUpdate:modelValue":M[5]||(M[5]=K=>u.timeOnPage=K),type:"number",label:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.LABEL"),placeholder:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.PLACEHOLDER"),message:C.value.timeOnPage,"message-type":C.value.timeOnPage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("fieldset",bWe,[c("legend",EWe,v(I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TITLE")),1),c("label",TWe,[ie(c("input",{"onUpdate:modelValue":M[6]||(M[6]=K=>u.enabled=K),type:"checkbox"},null,512),[[Kt,u.enabled]]),c("span",yWe,v(I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.ENABLED")),1)]),c("label",AWe,[ie(c("input",{"onUpdate:modelValue":M[7]||(M[7]=K=>u.triggerOnlyDuringBusinessHours=K),type:"checkbox"},null,512),[[Kt,u.triggerOnlyDuringBusinessHours]]),c("span",SWe,v(I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TRIGGER_ONLY_BUSINESS_HOURS")),1)])]),e.showActionButtons?(m(),f("div",IWe,[b(he,{type:"button",variant:"faded",color:"slate",label:I(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:N},null,8,["label"]),b(he,{type:"submit",label:I(a)(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.${e.mode.toUpperCase()}`),class:"w-full","is-loading":_.value,disabled:_.value||T.value},null,8,["label","is-loading","disabled"])])):x("",!0)],32))}},CWe={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-slate-50 dark:border-slate-900 shadow-md flex flex-col gap-6 max-h-[85vh] overflow-y-auto"},NWe={class:"text-base font-medium text-slate-900 dark:text-slate-50"},OWe={__name:"LiveChatCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=Ot(),{t:o}=He(),a=async r=>{var d;try{await s.dispatch("campaigns/create",r),jt(VE.CREATE_CAMPAIGN,{type:wm.ONGOING}),Te(o("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const p=((d=u==null?void 0:u.response)==null?void 0:d.message)||o("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE");Te(p)}},i=()=>n("close"),l=r=>{a(r),i()};return(r,d)=>(m(),f("div",CWe,[c("h3",NWe,v(I(o)("CAMPAIGN.LIVE_CHAT.CREATE.TITLE")),1),b(B2,{mode:"create",onSubmit:l,onCancel:i})]))}},xWe={__name:"EditLiveChatCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=He(),o=Ot(),a=U(null),i=U(null),l=Ve("campaigns/getUIFlags"),r=w(()=>l.value.isUpdating),d=w(()=>{var g;return(g=i.value)==null?void 0:g.isSubmitDisabled}),u=w(()=>n.selectedCampaign.id),p=async g=>{var _;try{await o.dispatch("campaigns/update",{id:u.value,...g}),Te(s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.SUCCESS_MESSAGE")),a.value.close()}catch(T){const S=((_=T==null?void 0:T.response)==null?void 0:_.message)||s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.ERROR_MESSAGE");Te(S)}},h=()=>{p(i.value.prepareCampaignDetails())};return t({dialogRef:a}),(g,_)=>(m(),P(Ss,{ref_key:"dialogRef",ref:a,type:"edit",title:I(s)("CAMPAIGN.LIVE_CHAT.EDIT.TITLE"),"is-loading":r.value,"disable-confirm-button":r.value||d.value,"overflow-y-auto":"",onConfirm:h},{default:j(()=>[b(B2,{ref_key:"liveChatCampaignFormRef",ref:i,mode:"edit","selected-campaign":e.selectedCampaign,"show-action-buttons":!1,onSubmit:h},null,8,["selected-campaign"])]),_:1},8,["title","is-loading","disable-confirm-button"]))}},F2={__name:"ConfirmDeleteCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=He(),o=Ot(),a=U(null),i=async r=>{if(r)try{await o.dispatch("campaigns/delete",r),Te(s("CAMPAIGN.CONFIRM_DELETE.API.SUCCESS_MESSAGE"))}catch{Te(s("CAMPAIGN.CONFIRM_DELETE.API.ERROR_MESSAGE"))}},l=async()=>{var r;await i(n.selectedCampaign.id),(r=a.value)==null||r.close()};return t({dialogRef:a}),(r,d)=>(m(),P(Ss,{ref_key:"dialogRef",ref:a,type:"alert",title:I(s)("CAMPAIGN.CONFIRM_DELETE.TITLE"),description:I(s)("CAMPAIGN.CONFIRM_DELETE.DESCRIPTION"),"confirm-button-label":I(s)("CAMPAIGN.CONFIRM_DELETE.CONFIRM"),onConfirm:l},null,8,["title","description","confirm-button-label"]))}},wWe=[{id:1,title:"Chatbot Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Alexa Rivera"},message:"Hello!  Need help with our chatbot features? Feel free to ask!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/features/chatbot/",time_on_page:10},trigger_only_during_business_hours:!0,created_at:"2024-10-24T13:10:26.636Z",updated_at:"2024-10-24T13:10:26.636Z"},{id:2,title:"Pricing Information Support",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Jamie Lee"},message:"Hello!  Any questions on pricing? Im here to help!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/pricings",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:08.763Z",updated_at:"2024-10-24T13:11:08.763Z"},{id:3,title:"Product Setup Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chatwoot"},message:"Hi! Chatwoot here. Need help setting up? Let me know!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://{*.}?chatwoot.com/apps/account/*/settings/inboxes/new/",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:44.285Z",updated_at:"2024-10-24T13:11:44.285Z"},{id:4,title:"General Assistance Campaign",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chris Barlow"},message:"Hi there!  Im here for any questions you may have. Lets chat!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://siv.com",time_on_page:200},trigger_only_during_business_hours:!1,created_at:"2024-10-29T19:54:33.741Z",updated_at:"2024-10-29T19:56:26.296Z"}],RWe=[{id:1,title:"Customer Feedback Request",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Enjoying our product? Share your feedback on G2 and earn a $25 Amazon coupon: https://chwt.app/g2-review",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1729775588,audience:[{id:4,type:"Label"},{id:5,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:13:08.496Z",updated_at:"2024-10-24T13:15:38.698Z"},{id:2,title:"Welcome New Customer",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome aboard!  Let us know if you have any questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1729732500,audience:[{id:1,type:"Label"},{id:6,type:"Label"},{id:5,type:"Label"},{id:2,type:"Label"},{id:4,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:14:00.168Z",updated_at:"2024-10-24T13:15:38.707Z"},{id:3,title:"New Business Welcome",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Were excited to have your business with us!",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1730368440,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"},{id:4,type:"Label"},{id:2,type:"Label"},{id:5,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-30T07:54:49.915Z",updated_at:"2024-10-30T07:54:49.915Z"},{id:4,title:"New Member Onboarding",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome to the team! Reach out if you have questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1730304840,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-29T16:14:10.374Z",updated_at:"2024-10-30T16:15:03.157Z"}],$We={class:"flex flex-col gap-4 p-px"},MWe={__name:"LiveChatCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(m(),P(Mi,{title:e.title,subtitle:e.subtitle},{"empty-state-item":j(()=>[c("div",$We,[(m(!0),f(pe,null,ye(I(wWe),s=>(m(),P(L_,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at,"is-live-chat-type":""},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},kWe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},LWe={__name:"LiveChatCampaignsPage",setup(e){const{t}=He(),n=vn(),s=U(null),o=U(null),a=U(null),i=Ve("campaigns/getUIFlags"),l=w(()=>i.value.isFetching),[r,d]=la(),u=w(()=>n["campaigns/getCampaigns"].value(wm.ONGOING)),p=w(()=>{var _;return((_=u.value)==null?void 0:_.length)===0&&!l.value}),h=_=>{a.value=_,s.value.dialogRef.open()},g=_=>{a.value=_,o.value.dialogRef.open()};return(_,T)=>(m(),P(D2,{"header-title":I(t)("CAMPAIGN.LIVE_CHAT.HEADER_TITLE"),"button-label":I(t)("CAMPAIGN.LIVE_CHAT.NEW_CAMPAIGN"),onClick:T[1]||(T[1]=S=>I(d)()),onClose:T[2]||(T[2]=S=>I(d)(!1))},{action:j(()=>[I(r)?(m(),P(OWe,{key:0,onClose:T[0]||(T[0]=S=>I(d)(!1))})):x("",!0)]),default:j(()=>[l.value?(m(),f("div",kWe,[b(Gs)])):p.value?(m(),P(MWe,{key:2,title:I(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.TITLE"),subtitle:I(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(m(),P(P2,{key:1,campaigns:u.value,"is-live-chat-type":"",onEdit:h,onDelete:g},null,8,["campaigns"])),b(xWe,{ref_key:"editLiveChatCampaignDialogRef",ref:s,"selected-campaign":a.value},null,8,["selected-campaign"]),b(F2,{ref_key:"confirmDeleteCampaignDialogRef",ref:o,"selected-campaign":a.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},DWe={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},PWe=["onClick"],BWe={key:0,class:"flex items-center text-sm text-n-slate-11"},Rf={__name:"TagMultiSelectComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=U(s.modelValue),l=U(!1),r=U(""),d=U(null),u=U(null),p=w(()=>{const E=r.value.toLowerCase();return s.options.filter(y=>{var A;return(A=y.label)==null?void 0:A.toLowerCase().includes(E)})}),h=w(()=>s.placeholder||a("COMBOBOX.PLACEHOLDER")),g=w(()=>i.value.map(E=>s.options.find(A=>A.value===E)||{value:E,label:E})),_=E=>{const y=i.value.indexOf(E.value);y===-1?i.value.push(E.value):i.value.splice(y,1),o("update:modelValue",i.value)},T=E=>{const y=i.value.indexOf(E);y!==-1&&(i.value.splice(y,1),o("update:modelValue",i.value))},S=()=>{s.disabled||(l.value=!l.value,l.value&&(r.value="",Zt(()=>{var E;return(E=d.value)==null?void 0:E.focus()})))};return lt(()=>s.modelValue,E=>{i.value=E}),t({toggleDropdown:S,open:l,disabled:s.disabled}),(E,y)=>(m(),f("div",{ref_key:"comboboxRef",ref:u,class:re(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:y[3]||(y[3]=Ke(()=>{},["prevent"]))},[b(I(gl),{onTrigger:y[2]||(y[2]=A=>l.value=!1)},{default:j(()=>[c("div",{class:re(["flex flex-wrap w-full gap-2 px-3 py-2.5 border rounded-lg cursor-pointer bg-n-alpha-black2 min-h-[42px] transition-all duration-500 ease-in-out",{"border-n-ruby-8":e.hasError,"border-n-weak dark:border-n-weak hover:border-n-slate-6 dark:hover:border-n-slate-6":!e.hasError&&!l.value,"border-n-brand":l.value,"cursor-not-allowed pointer-events-none opacity-50":e.disabled}]),onClick:S},[(m(!0),f(pe,null,ye(g.value,A=>(m(),f("div",{key:A.value,class:"flex items-center justify-center max-w-full gap-1 px-2 py-0.5 rounded-lg bg-n-alpha-black1",onClick:y[0]||(y[0]=Ke(()=>{},["stop"]))},[c("span",DWe,v(A.label),1),c("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3 text-n-slate-11",onClick:C=>T(A.value)},null,8,PWe)]))),128)),g.value.length===0?(m(),f("span",BWe,v(h.value),1)):x("",!0)],2),b(O2,{ref_key:"dropdownRef",ref:d,open:l.value,options:p.value,"search-value":r.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,multiple:"","selected-values":i.value,"onUpdate:searchValue":y[1]||(y[1]=A=>r.value=A),onSelect:_},null,8,["open","options","search-value","search-placeholder","empty-state","selected-values"]),e.message?(m(),f("p",{key:0,class:re(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},v(e.message),3)):x("",!0)]),_:1})],2))}},FWe={class:"flex flex-col gap-1"},UWe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},GWe={class:"flex flex-col gap-1"},VWe={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},HWe={class:"flex items-center justify-between w-full gap-3"},KWe={__name:"SMSCampaignForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=He(),o={uiFlags:Ve("campaigns/getUIFlags"),labels:Ve("labels/getLabels"),inboxes:Ve("inboxes/getSMSInboxes")},a={title:"",message:"",inboxId:null,scheduledAt:null,selectedAudience:[]},i=ks({...a}),l={title:{required:it,minLength:Nn(1)},message:{required:it,minLength:Nn(1)},inboxId:{required:it},scheduledAt:{required:it},selectedAudience:{required:it}},r=Lt(l,i),d=w(()=>o.uiFlags.value.isCreating),u=w(()=>{const N=new Date;return new Date(N.getTime()-N.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),p=(N,R,k)=>(N==null?void 0:N.map(L=>({value:L[R],label:L[k]})))??[],h=w(()=>p(o.labels.value,"id","title")),g=w(()=>p(o.inboxes.value,"id","name")),_=(N,R)=>r.value[N].$error?s(`CAMPAIGN.SMS.CREATE.FORM.${R}.ERROR`):"",T=w(()=>({title:_("title","TITLE"),message:_("message","MESSAGE"),inbox:_("inboxId","INBOX"),scheduledAt:_("scheduledAt","SCHEDULED_AT"),audience:_("selectedAudience","AUDIENCE")})),S=w(()=>r.value.$invalid),E=N=>N?new Date(N).toISOString():null,y=()=>{Object.assign(i,a)},A=()=>n("cancel"),C=()=>{var N;return{title:i.title,message:i.message,inbox_id:i.inboxId,scheduled_at:E(i.scheduledAt),audience:(N=i.selectedAudience)==null?void 0:N.map(R=>({id:R,type:"Label"}))}},O=async()=>{await r.value.$validate()&&(n("submit",C()),y(),A())};return(N,R)=>(m(),f("form",{class:"flex flex-col gap-4",onSubmit:Ke(O,["prevent"])},[b(ps,{modelValue:i.title,"onUpdate:modelValue":R[0]||(R[0]=k=>i.title=k),label:I(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.LABEL"),placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.PLACEHOLDER"),message:T.value.title,"message-type":T.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),b(Rg,{modelValue:i.message,"onUpdate:modelValue":R[1]||(R[1]=k=>i.message=k),label:I(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.LABEL"),placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.PLACEHOLDER"),"show-character-count":"",message:T.value.message,"message-type":T.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",FWe,[c("label",UWe,v(I(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.LABEL")),1),b(Oi,{id:"inbox",modelValue:i.inboxId,"onUpdate:modelValue":R[2]||(R[2]=k=>i.inboxId=k),options:g.value,"has-error":!!T.value.inbox,placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.PLACEHOLDER"),message:T.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",GWe,[c("label",VWe,v(I(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL")),1),b(Rf,{modelValue:i.selectedAudience,"onUpdate:modelValue":R[3]||(R[3]=k=>i.selectedAudience=k),options:h.value,label:I(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL"),placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!T.value.audience,message:T.value.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),b(ps,{modelValue:i.scheduledAt,"onUpdate:modelValue":R[4]||(R[4]=k=>i.scheduledAt=k),label:I(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:u.value,placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:T.value.scheduledAt,"message-type":T.value.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),c("div",HWe,[b(he,{variant:"faded",color:"slate",type:"button",label:I(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:A},null,8,["label"]),b(he,{label:I(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":d.value,disabled:d.value||S.value},null,8,["label","is-loading","disabled"])])],32))}},zWe={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-slate-50 dark:border-slate-900 shadow-md flex flex-col gap-6"},WWe={class:"text-base font-medium text-slate-900 dark:text-slate-50"},jWe={__name:"SMSCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=Ot(),{t:o}=He(),a=async r=>{var d;try{await s.dispatch("campaigns/create",r),jt(VE.CREATE_CAMPAIGN,{type:wm.ONE_OFF}),Te(o("CAMPAIGN.SMS.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const p=((d=u==null?void 0:u.response)==null?void 0:d.message)||o("CAMPAIGN.SMS.CREATE.FORM.API.ERROR_MESSAGE");Te(p)}},i=r=>{a(r)},l=()=>n("close");return(r,d)=>(m(),f("div",zWe,[c("h3",WWe,v(I(o)("CAMPAIGN.SMS.CREATE.TITLE")),1),b(KWe,{onSubmit:i,onCancel:l})]))}},YWe={class:"flex flex-col gap-4 p-px"},XWe={__name:"SMSCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(m(),P(Mi,{title:e.title,subtitle:e.subtitle},{"empty-state-item":j(()=>[c("div",YWe,[(m(!0),f(pe,null,ye(I(RWe),s=>(m(),P(L_,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},qWe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},ZWe={__name:"SMSCampaignsPage",setup(e){const{t}=He(),n=vn(),s=U(null),[o,a]=la(),i=Ve("campaigns/getUIFlags"),l=w(()=>i.value.isFetching),r=U(null),d=w(()=>n["campaigns/getCampaigns"].value(wm.ONE_OFF)),u=w(()=>{var h;return((h=d.value)==null?void 0:h.length)===0&&!l.value}),p=h=>{s.value=h,r.value.dialogRef.open()};return(h,g)=>(m(),P(D2,{"header-title":I(t)("CAMPAIGN.SMS.HEADER_TITLE"),"button-label":I(t)("CAMPAIGN.SMS.NEW_CAMPAIGN"),onClick:g[1]||(g[1]=_=>I(a)()),onClose:g[2]||(g[2]=_=>I(a)(!1))},{action:j(()=>[I(o)?(m(),P(jWe,{key:0,onClose:g[0]||(g[0]=_=>I(a)(!1))})):x("",!0)]),default:j(()=>[l.value?(m(),f("div",qWe,[b(Gs)])):u.value?(m(),P(XWe,{key:2,title:I(t)("CAMPAIGN.SMS.EMPTY_STATE.TITLE"),subtitle:I(t)("CAMPAIGN.SMS.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(m(),P(P2,{key:1,campaigns:d.value,onDelete:p},null,8,["campaigns"])),b(F2,{ref_key:"confirmDeleteCampaignDialogRef",ref:r,"selected-campaign":s.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},Pd={featureFlag:xt.CAMPAIGNS,permissions:["administrator"]},QWe={routes:[{path:Pt("accounts/:accountId/campaigns"),component:Uze,children:[{path:"",redirect:e=>({name:"campaigns_ongoing_index",params:e.params})},{path:"ongoing",name:"campaigns_ongoing_index",meta:Pd,redirect:e=>({name:"campaigns_livechat_index",params:e.params})},{path:"one_off",name:"campaigns_one_off_index",meta:Pd,redirect:e=>({name:"campaigns_sms_index",params:e.params})},{path:"live_chat",name:"campaigns_livechat_index",meta:Pd,component:LWe},{path:"sms",name:"campaigns_sms_index",meta:Pd,component:ZWe}]}]},JWe={class:"flex justify-between w-full gap-1"},eje={class:"text-base text-n-slate-12 line-clamp-1"},tje={class:"flex items-center gap-2"},nje={class:"relative flex items-center group"},sje={class:"flex items-center justify-between w-full gap-4"},aje={class:"text-sm truncate text-n-slate-11"},oje={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"},U2={__name:"AssistantCard",props:{id:{type:Number,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},updatedAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:o}=Hc(),{t:a}=He(),[i,l]=la(),r=w(()=>{const p=[{label:a("CAPTAIN.ASSISTANTS.OPTIONS.VIEW_CONNECTED_INBOXES"),value:"viewConnectedInboxes",action:"viewConnectedInboxes",icon:"i-lucide-link"}];return o(["administrator"])&&p.push({label:a("CAPTAIN.ASSISTANTS.OPTIONS.EDIT_ASSISTANT"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:a("CAPTAIN.ASSISTANTS.OPTIONS.DELETE_ASSISTANT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),p}),d=w(()=>ms(n.updatedAt)),u=({action:p,value:h})=>{l(!1),s("action",{action:p,value:h,id:n.id})};return(p,h)=>{const g=ct("on-clickaway");return m(),P(yl,null,{default:j(()=>[c("div",JWe,[c("span",eje,v(e.name),1),c("div",tje,[ie((m(),f("div",nje,[b(he,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=_=>I(l)())}),I(i)?(m(),P(ma,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h[1]||(h[1]=_=>u(_))},null,8,["menu-items"])):x("",!0)])),[[g,()=>I(l)(!1)]])])]),c("div",sje,[c("span",aje,v(e.description||"Description not available"),1),c("span",oje,v(d.value),1)])]),_:1})}}},Rm={__name:"DeleteDialog",props:{type:{type:String,required:!0},entity:{type:Object,required:!0},deletePayload:{type:Object,default:null}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=U(null),r=w(()=>s.type.toUpperCase()),d=async p=>{if(p)try{await i.dispatch(`captain${s.type}/delete`,p),o("deleteSuccess"),Te(a(`CAPTAIN.${r.value}.DELETE.SUCCESS_MESSAGE`))}catch{Te(a(`CAPTAIN.${r.value}.DELETE.ERROR_MESSAGE`))}},u=async()=>{var p;await d(s.deletePayload||s.entity.id),(p=l.value)==null||p.close()};return t({dialogRef:l}),(p,h)=>(m(),P(Ss,{ref_key:"deleteDialogRef",ref:l,type:"alert",title:I(a)(`CAPTAIN.${r.value}.DELETE.TITLE`),description:I(a)(`CAPTAIN.${r.value}.DELETE.DESCRIPTION`),"confirm-button-label":I(a)(`CAPTAIN.${r.value}.DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},ije={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},lje={class:"sticky top-0 z-10 px-6 xl:px-0"},rje={class:"w-full max-w-[60rem] mx-auto"},cje={class:"flex items-start lg:items-center justify-between w-full py-6 lg:py-0 lg:h-20 gap-4 lg:gap-2 flex-col lg:flex-row"},dje={class:"flex gap-4 items-center"},uje={class:"text-xl font-medium text-n-slate-12"},mje={key:0,class:"flex items-center gap-2"},pje={key:0,class:"relative group/campaign-button"},hje={class:"flex-1 px-6 overflow-y-auto xl:px-0"},fje={class:"w-full max-w-[60rem] mx-auto py-4"},gje={key:1,class:"flex items-center justify-center py-10 text-n-slate-11"},_je={key:2},vje={key:3},bje={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"},$m={__name:"PageLayout",props:{currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},headerTitle:{type:String,default:""},buttonPolicy:{type:Array,default:()=>[]},buttonLabel:{type:String,default:""},featureFlag:{type:String,default:""},isFetching:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},showPaginationFooter:{type:Boolean,default:!0}},emits:["click","close","update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{shouldShowPaywall:o}=Hc(),a=w(()=>o(n.featureFlag)),i=()=>{s("click")},l=r=>{s("update:currentPage",r)};return(r,d)=>{const u=ct("on-clickaway");return m(),f("section",ije,[c("header",lje,[c("div",rje,[c("div",cje,[c("div",dje,[et(r.$slots,"headerTitle",{},()=>[c("span",uje,v(e.headerTitle),1)]),e.isEmpty?x("",!0):(m(),f("div",mje,[d[0]||(d[0]=c("div",{class:"w-0.5 h-4 rounded-2xl bg-n-weak"},null,-1)),et(r.$slots,"knowMore")]))]),a.value?x("",!0):ie((m(),f("div",pje,[b(Ao,{permissions:e.buttonPolicy},{default:j(()=>[b(he,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:i},null,8,["label"])]),_:1},8,["permissions"]),et(r.$slots,"action")])),[[u,()=>s("close")]])])])]),c("main",hje,[c("div",fje,[a.value?x("",!0):et(r.$slots,"controls",{key:0}),e.isFetching?(m(),f("div",gje,[b(Gs)])):a.value?(m(),f("div",_je,[et(r.$slots,"paywall")])):e.isEmpty?(m(),f("div",vje,[et(r.$slots,"emptyState")])):et(r.$slots,"body",{key:4}),et(r.$slots,"default")])]),e.showPaginationFooter?(m(),f("footer",bje,[b(w2,{"current-page":e.currentPage,"total-items":e.totalCount,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":l},null,8,["current-page","total-items","items-per-page"])])):x("",!0)])}}},Eje={class:"w-full max-w-[60rem] mx-auto h-full max-h-[448px] grid place-content-center"},D_={__name:"Paywall",setup(e){const t=wn(),n=Ve("getCurrentUser"),s=w(()=>n.value.type==="SuperAdmin"),{accountId:o,isOnChatwootCloud:a}=Ls(),i=w(()=>a.value?"PAYWALL":"ENTERPRISE_PAYWALL"),l=()=>{t.push({name:"billing_settings_index",params:{accountId:o.value}})};return(r,d)=>(m(),f("div",Eje,[b(h_,{class:"mx-auto","feature-prefix":"CAPTAIN","i18n-key":i.value,"is-super-admin":s.value,"is-on-chatwoot-cloud":I(a),onUpgrade:l},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])]))}},Tje={class:"flex flex-col gap-2.5"},yje={class:"mb-3 text-sm font-medium text-n-slate-12"},Aje={class:"flex items-center gap-2"},Sje={class:"text-sm font-medium text-n-slate-12"},Ije={class:"flex items-center gap-2"},Cje={class:"text-sm font-medium text-n-slate-12"},Nje={class:"flex items-center justify-between w-full gap-3"},Oje={__name:"AssistantForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},assistant:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a={uiFlags:Ve("captainAssistants/getUIFlags")},l=ks({...{name:"",description:"",productName:"",featureFaq:!1,featureMemory:!1}}),r={name:{required:it,minLength:Nn(1)},description:{required:it,minLength:Nn(1)},productName:{required:it,minLength:Nn(1)}},d=Lt(r,l),u=w(()=>a.uiFlags.value.creatingItem),p=(E,y)=>d.value[E].$error?o(`CAPTAIN.ASSISTANTS.FORM.${y}.ERROR`):"",h=w(()=>({name:p("name","NAME"),description:p("description","DESCRIPTION"),productName:p("productName","PRODUCT_NAME")})),g=()=>s("cancel"),_=()=>({name:l.name,description:l.description,config:{product_name:l.productName,feature_faq:l.featureFaq,feature_memory:l.featureMemory}}),T=async()=>{await d.value.$validate()&&s("submit",_())},S=E=>{if(!E)return;const{name:y,description:A,config:C}=E;Object.assign(l,{name:y,description:A,productName:C.product_name,featureFaq:C.feature_faq||!1,featureMemory:C.feature_memory||!1})};return lt(()=>n.assistant,E=>{n.mode==="edit"&&E&&S(E)},{immediate:!0}),(E,y)=>(m(),f("form",{class:"flex flex-col gap-4",onSubmit:Ke(T,["prevent"])},[b(ps,{modelValue:l.name,"onUpdate:modelValue":y[0]||(y[0]=A=>l.name=A),label:I(o)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:I(o)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:h.value.name,"message-type":h.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),b(Yc,{modelValue:l.description,"onUpdate:modelValue":y[1]||(y[1]=A=>l.description=A),label:I(o)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:I(o)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:h.value.description,"message-type":h.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),b(ps,{modelValue:l.productName,"onUpdate:modelValue":y[2]||(y[2]=A=>l.productName=A),label:I(o)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:I(o)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:h.value.productName,"message-type":h.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("fieldset",Tje,[c("legend",yje,v(I(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),c("label",Aje,[ie(c("input",{"onUpdate:modelValue":y[3]||(y[3]=A=>l.featureFaq=A),type:"checkbox"},null,512),[[Kt,l.featureFaq]]),c("span",Sje,v(I(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),c("label",Ije,[ie(c("input",{"onUpdate:modelValue":y[4]||(y[4]=A=>l.featureMemory=A),type:"checkbox"},null,512),[[Kt,l.featureMemory]]),c("span",Cje,v(I(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)])]),c("div",Nje,[b(he,{type:"button",variant:"faded",color:"slate",label:I(o)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),b(he,{type:"submit",label:I(o)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},xje={__name:"CreateAssistantDialog",props:{selectedAssistant:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=U(null),r=U(null),d=T=>i.dispatch("captainAssistants/update",{id:s.selectedAssistant.id,...T}),u=w(()=>`CAPTAIN.ASSISTANTS.${s.type.toUpperCase()}`),p=T=>i.dispatch("captainAssistants/create",T),h=async T=>{try{s.type==="edit"?await d(T):await p(T),Te(a(`${u.value}.SUCCESS_MESSAGE`)),l.value.close()}catch(S){const E=(S==null?void 0:S.message)||a(`${u.value}.ERROR_MESSAGE`);Te(E)}},g=()=>{o("close")},_=()=>{l.value.close()};return t({dialogRef:l}),(T,S)=>(m(),P(Ss,{ref_key:"dialogRef",ref:l,type:"edit",title:I(a)(`${u.value}.TITLE`),description:I(a)("CAPTAIN.ASSISTANTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",onClose:g},{footer:j(()=>S[0]||(S[0]=[])),default:j(()=>[b(Oje,{ref_key:"assistantForm",ref:r,mode:e.type,assistant:e.selectedAssistant,onSubmit:h,onCancel:_},null,8,["mode","assistant"])]),_:1},8,["title","description"]))}},wje={class:"custom-dashed-border rounded-2xl py-5 px-6"},Rje={class:"flex flex-col md:flex-row items-start md:items-center gap-6"},$je={class:"flex-shrink-0 bg-gray-800 w-[7.5rem] h-[6.5rem] rounded-lg flex items-center justify-center overflow-hidden"},Mje=["src","alt"],kje=["src","alt"],Lje=["src","alt"],Dje={class:"flex flex-col flex-1 gap-3 ltr:pr-8 rtl:pl-8"},Pje={key:0,class:"text-n-slate-12 text-sm mb-0"},Bje={class:"flex gap-3"},P_={__name:"FeatureSpotlight",props:{title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""}},setup(e){const t=U(!1),n=()=>{t.value=!0},s=o=>{o&&window.open(o,"_blank")};return(o,a)=>(m(),f("section",wje,[c("div",Rje,[c("div",$je,[!t.value&&e.thumbnail?(m(),f("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover rounded-lg",loading:"lazy",onError:n},null,40,Mje)):(m(),f(pe,{key:1},[e.fallbackThumbnailDark?(m(),f("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",class:"w-full h-full object-cover hidden dark:block rounded-lg",loading:"lazy"},null,8,kje)):x("",!0),e.fallbackThumbnail?(m(),f("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover block dark:hidden rounded-lg",loading:"lazy"},null,8,Lje)):x("",!0)],64))]),c("div",Dje,[e.note?(m(),f("p",Pje,v(e.note),1)):x("",!0),c("div",Bje,[et(o.$slots,"actions",{},()=>[e.videoUrl?(m(),P(he,{key:0,label:o.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",onClick:a[0]||(a[0]=i=>s(e.videoUrl))},null,8,["label"])):x("",!0),e.learnMoreUrl?(m(),P(he,{key:1,label:o.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",icon:"i-lucide-arrow-up-right",onClick:a[1]||(a[1]=i=>s(e.learnMoreUrl))},null,8,["label"])):x("",!0)])])])])]))}},Fje=[{account_id:2,config:{product_name:"HelpDesk Pro"},created_at:1736033561,description:"An advanced AI assistant designed to enhance customer support solutions by automating workflows and providing instant responses.",id:4,name:"Support Genie"},{account_id:3,config:{product_name:"CRM Tools"},created_at:1736033562,description:"Helps streamline customer relationship management by organizing contacts, automating follow-ups, and providing insights.",id:5,name:"CRM Assistant"},{account_id:4,config:{product_name:"SalesFlow"},created_at:1736033563,description:"Optimizes your sales pipeline by tracking prospects, forecasting sales, and automating administrative tasks.",id:6,name:"SalesBot"},{account_id:5,config:{product_name:"TicketMaster AI"},created_at:1736033564,description:"Automates ticket assignment, categorization, and customer query responses to enhance support efficiency.",id:7,name:"TicketBot"},{account_id:6,config:{product_name:"FinanceAssist"},created_at:1736033565,description:"Provides financial analytics, reporting, and insights, helping teams make data-driven financial decisions.",id:8,name:"Finance Wizard"},{account_id:8,config:{product_name:"HR Assistant"},created_at:1736033567,description:"Streamlines HR operations including employee management, payroll, and recruitment processes.",id:10,name:"HR Helper"}],Uje=[{account_id:1,assistant:{id:1,name:"Helper Pro"},content:"Comprehensive guide on using conversation filters to manage chats effectively.",created_at:1736143272,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688192-how-to-use-conversation-filters",id:3059,name:"How to use Conversation Filters? | User Guide | Chatwoot",status:"available"},{account_id:2,assistant:{id:2,name:"Support Genie"},content:"Step-by-step guide for automating ticket assignments and improving support workflow in Chatwoot.",created_at:1736143273,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688200-automating-ticket-assignments",id:3060,name:"Automating Ticket Assignments | User Guide | Chatwoot",status:"available"},{account_id:3,assistant:{id:3,name:"CRM Assistant"},content:"A detailed guide on managing and organizing customer profiles for better relationship management.",created_at:1736143274,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688210-managing-customer-profiles",id:3061,name:"Managing Customer Profiles | User Guide | Chatwoot",status:"available"},{account_id:4,assistant:{id:4,name:"SalesBot"},content:"Learn how to optimize sales tracking and improve your sales forecasting using advanced features.",created_at:1736143275,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688220-sales-tracking-guide",id:3062,name:"Sales Tracking Guide | User Guide | Chatwoot",status:"available"},{account_id:5,assistant:{id:5,name:"TicketBot"},content:"How to efficiently create, manage, and resolve tickets in Chatwoot.",created_at:1736143276,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688230-managing-tickets",id:3063,name:"Managing Tickets | User Guide | Chatwoot",status:"available"},{account_id:6,assistant:{id:6,name:"Finance Wizard"},content:"Detailed guide on how to use financial reporting tools and generate insightful analytics.",created_at:1736143277,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688240-financial-reporting",id:3064,name:"Financial Reporting | User Guide | Chatwoot",status:"available"}],Gje=[{account_id:1,answer:"Messenger may be deactivated because you are on a free plan or the limit for inboxes might have been reached.",created_at:1736283330,id:87,question:"Why is my Messenger in Chatwoot deactivated?",status:"pending",assistant:{account_id:1,config:{product_name:"Chatwoot"},created_at:1736033280,description:"Assists with general queries and system-wide issues.",id:1,name:"Assistant 2"}},{account_id:2,answer:"You can integrate your WhatsApp account by navigating to the Integrations section and selecting the WhatsApp integration option.",created_at:1736283340,id:88,question:"How do I integrate WhatsApp with Chatwoot?",assistant:{account_id:2,config:{product_name:"Chatwoot"},created_at:1736033281,description:"Helps with integration and setup-related inquiries.",id:2,name:"Assistant 3"}},{account_id:3,answer:"To reset your password, go to the login page and click on 'Forgot Password', then follow the instructions sent to your email.",created_at:1736283350,id:89,question:"How can I reset my password in Chatwoot?",assistant:{account_id:3,config:{product_name:"Chatwoot"},created_at:1736033282,description:"Handles account management and recovery support.",id:3,name:"Assistant 4"}},{account_id:4,answer:"You can enable the dark mode in settings by navigating to 'Appearance' and selecting 'Dark Mode'.",created_at:1736283360,id:90,question:"How do I enable dark mode in Chatwoot?",assistant:{account_id:4,config:{product_name:"Chatwoot"},created_at:1736033283,description:"Helps with UI and theme-related inquiries.",id:4,name:"Assistant 5"}},{account_id:5,answer:"To add a new team member, navigate to 'Settings', then 'Team', and click on 'Add Team Member'.",created_at:1736283370,id:91,question:"How do I add a new team member in Chatwoot?",assistant:{account_id:5,config:{product_name:"Chatwoot"},created_at:1736033284,description:"Supports team management and user access-related queries.",id:5,name:"Assistant 6"}},{account_id:6,answer:"Campaigns in Chatwoot allow you to send targeted messages to specific user segments. You can create them in the 'Campaigns' section.",created_at:1736283380,id:92,question:"What are campaigns in Chatwoot?",assistant:{account_id:6,config:{product_name:"Chatwoot"},created_at:1736033285,description:"Specialized in marketing, campaign management, and messaging strategies.",id:6,name:"Assistant 7"}}],Vje=[{id:7,name:"Email Support",channel_type:Dt.EMAIL,email:"support@company.com"},{id:1,name:"Website Chat",channel_type:Dt.WEB},{id:2,name:"Facebook Support",channel_type:Dt.FB},{id:5,name:"SMS Service",channel_type:Dt.TWILIO,messaging_service_sid:"MGxxxxxx"},{id:6,name:"WhatsApp Support",channel_type:Dt.WHATSAPP,phone_number:"+1987654321"},{id:8,name:"Telegram Support",channel_type:Dt.TELEGRAM},{id:9,name:"LINE Support",channel_type:Dt.LINE},{id:10,name:"API Channel",channel_type:Dt.API},{id:11,name:"SMS Basic",channel_type:Dt.SMS,phone_number:"+1555555555"}],Hje={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},Kje={__name:"AssistantPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(m(),f(pe,null,[b(P_,{title:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-dark.svg","learn-more-url":"https://chwt.app/captain-assistant",class:"mb-8"},null,8,["title","note"]),b(Mi,{title:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":j(()=>[c("div",Hje,[(m(!0),f(pe,null,ye(I(Fje).slice(0,5),(i,l)=>(m(),P(U2,{id:i.id,key:`assistant-${l}`,name:i.name,description:i.description,"updated-at":i.created_at},null,8,["id","name","description","updated-at"]))),128))])]),actions:j(()=>[b(he,{label:o.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},zje={class:"relative"},Wje={key:0},jje={class:"absolute top-full mt-6 ltr:left-0 rtl:right-0 outline outline-1 outline-n-weak bg-n-alpha-3 backdrop-blur-[100px] rounded-xl p-4 w-80"},Yje={class:"relative flex flex-col items-start gap-4 z-20"},Xje={class:"flex-shrink-0 bg-gray-800 w-full h-[7.5rem] rounded-lg"},qje=["src","alt"],Zje=["src","alt"],Qje=["src","alt"],Jje={key:0,class:"text-n-slate-12 text-start text-sm mb-0"},eYe={class:"flex gap-3 justify-between w-full"},B_={__name:"FeatureSpotlightPopover",props:{buttonLabel:{type:String,default:""},title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""}},setup(e){const t=U(!1),[n,s]=la(),o=()=>{t.value=!0},a=i=>{i&&window.open(i,"_blank")};return(i,l)=>(m(),f("div",zje,[b(he,{id:"togglePopup",label:e.buttonLabel,slate:"",ghost:"",sm:"",class:re({"bg-n-alpha-2":I(n)}),onClick:l[0]||(l[0]=r=>I(s)(!I(n)))},null,8,["label","class"]),I(n)?ie((m(),f("div",Wje,[c("section",jje,[l[3]||(l[3]=c("div",{class:"absolute -top-[0.77rem] ltr:left-12 rtl:right-12 w-6 h-6 ltr:rotate-45 rtl:-rotate-45 rtl:rounded-tr ltr:rounded-tl rtl:border-r ltr:border-l border-t border-n-weak bg-n-alpha-3 z-10"},null,-1)),c("div",Yje,[c("div",Xje,[!t.value&&e.thumbnail?(m(),f("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover rounded-lg",onError:o},null,40,qje)):(m(),f(pe,{key:1},[e.fallbackThumbnailDark?(m(),f("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover hidden dark:block"},null,8,Zje)):x("",!0),e.fallbackThumbnail?(m(),f("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover block dark:hidden"},null,8,Qje)):x("",!0)],64))]),e.note?(m(),f("p",Jje,v(e.note),1)):x("",!0),c("div",eYe,[et(i.$slots,"actions",{},()=>[e.videoUrl?(m(),P(he,{key:0,label:i.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",class:"w-full",onClick:l[1]||(l[1]=r=>a(e.videoUrl))},null,8,["label"])):x("",!0),e.learnMoreUrl?(m(),P(he,{key:1,label:i.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",class:"w-full",icon:"i-lucide-arrow-up-right",onClick:l[2]||(l[2]=r=>a(e.learnMoreUrl))},null,8,["label"])):x("",!0)])])])])])),[[I(qo),[()=>I(n)&&(n.value=!1),{ignore:["#togglePopup"]}]]]):x("",!0)]))}},G2={__name:"LimitBanner",setup(e){const t=wn(),{accountId:n}=Ls(),{responseLimits:s,fetchLimits:o}=Bg(),a=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},i=w(()=>{if(!s.value)return!1;const{consumed:l,totalCount:r}=s.value;return!l||!r?!1:l/r>.8});return ut(o),(l,r)=>ie((m(),P(sm,{color:"amber","action-label":l.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:a},{default:j(()=>[be(v(l.$t("CAPTAIN.BANNER.RESPONSES")),1)]),_:1},8,["action-label"])),[[ln,i.value]])}},tYe={class:"flex flex-col gap-4"},nYe={__name:"Index",setup(e){const t=wn(),n=Ot(),s=U(""),o=Ve("captainAssistants/getUIFlags"),a=Ve("captainAssistants/getRecords"),i=w(()=>o.value.fetchingList),l=U(null),r=U(null),d=()=>{r.value.dialogRef.open()},u=U(null),p=()=>{s.value="create",Zt(()=>u.value.dialogRef.open())},h=()=>{s.value="edit",Zt(()=>u.value.dialogRef.open())},g=()=>{t.push({name:"captain_assistants_inboxes_index",params:{assistantId:l.value.id}})},_=({action:S,id:E})=>{l.value=a.value.find(y=>E===y.id),Zt(()=>{S==="delete"&&d(),S==="edit"&&h(),S==="viewConnectedInboxes"&&g()})},T=()=>{s.value="",l.value=null};return ut(()=>n.dispatch("captainAssistants/get")),(S,E)=>(m(),P($m,{"header-title":S.$t("CAPTAIN.ASSISTANTS.HEADER"),"button-label":S.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),"button-policy":["administrator"],"show-pagination-footer":!1,"is-fetching":i.value,"is-empty":!I(a).length,"feature-flag":I(xt).CAPTAIN,onClick:p},{knowMore:j(()=>[b(B_,{"button-label":S.$t("CAPTAIN.HEADER_KNOW_MORE"),title:S.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:S.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-popover-dark.svg","learn-more-url":"https://chwt.app/captain-assistant"},null,8,["button-label","title","note"])]),emptyState:j(()=>[b(Kje,{onClick:p})]),paywall:j(()=>[b(D_)]),body:j(()=>[b(G2,{class:"mb-5"}),c("div",tYe,[(m(!0),f(pe,null,ye(I(a),y=>(m(),P(U2,{id:y.id,key:y.id,name:y.name,description:y.description,"updated-at":y.updated_at||y.created_at,"created-at":y.created_at,onAction:_},null,8,["id","name","description","updated-at","created-at"]))),128))])]),default:j(()=>[l.value?(m(),P(Rm,{key:0,ref_key:"deleteAssistantDialog",ref:r,entity:l.value,type:"Assistants"},null,8,["entity"])):x("",!0),s.value?(m(),P(xje,{key:1,ref_key:"createAssistantDialog",ref:u,type:s.value,"selected-assistant":l.value,onClose:T},null,8,["type","selected-assistant"])):x("",!0)]),_:1},8,["header-title","button-label","is-fetching","is-empty","feature-flag"]))}},sYe={class:"flex flex-col gap-1"},aYe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},oYe={class:"flex items-center justify-between w-full gap-3"},iYe={__name:"ConnectInboxForm",props:{assistantId:{type:Number,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a={uiFlags:Ve("captainInboxes/getUIFlags"),inboxes:Ve("inboxes/getInboxes"),captainInboxes:Ve("captainInboxes/getRecords")},l=ks({...{inboxId:null}}),r={inboxId:{required:it}},d=w(()=>{const E=a.captainInboxes.value.map(y=>y.id);return a.inboxes.value.filter(y=>!E.includes(y.id)).map(y=>({value:y.id,label:y.name}))}),u=Lt(r,l),p=w(()=>a.uiFlags.value.creatingItem),h=(E,y)=>u.value[E].$error?o(`CAPTAIN.INBOXES.FORM.${y}.ERROR`):"",g=w(()=>({inboxId:h("inboxId","INBOX")})),_=()=>s("cancel"),T=()=>({inboxId:l.inboxId,assistantId:n.assistantId}),S=async()=>{await u.value.$validate()&&s("submit",T())};return(E,y)=>(m(),f("form",{class:"flex flex-col gap-4",onSubmit:Ke(S,["prevent"])},[c("div",sYe,[c("label",aYe,v(I(o)("CAPTAIN.INBOXES.FORM.INBOX.LABEL")),1),b(Oi,{id:"inbox",modelValue:l.inboxId,"onUpdate:modelValue":y[0]||(y[0]=A=>l.inboxId=A),options:d.value,"has-error":!!g.value.inboxId,placeholder:I(o)("CAPTAIN.INBOXES.FORM.INBOX.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:g.value.inboxId},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",oYe,[b(he,{type:"button",variant:"faded",color:"slate",label:I(o)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:_},null,8,["label"]),b(he,{type:"submit",label:I(o)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":p.value,disabled:p.value},null,8,["label","is-loading","disabled"])])],32))}},Bh="CAPTAIN.INBOXES.CREATE",lYe={__name:"ConnectInboxDialog",props:{assistantId:{type:Number,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=Ot(),i=U(null),l=U(null),r=async p=>{try{await a.dispatch("captainInboxes/create",p),Te(o(`${Bh}.SUCCESS_MESSAGE`)),i.value.close()}catch(h){const g=(h==null?void 0:h.message)||o(`${Bh}.ERROR_MESSAGE`);Te(g)}},d=()=>{s("close")},u=()=>{i.value.close()};return t({dialogRef:i}),(p,h)=>(m(),P(Ss,{ref_key:"dialogRef",ref:i,type:"create",title:p.$t(`${Bh}.TITLE`),description:p.$t("CAPTAIN.INBOXES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:d},{footer:j(()=>h[0]||(h[0]=[])),default:j(()=>[b(iYe,{ref_key:"connectForm",ref:l,"assistant-id":e.assistantId,onSubmit:r,onCancel:u},null,8,["assistant-id"])]),_:1},8,["title","description"]))}},rYe={class:"flex justify-between w-full gap-1"},cYe={class:"text-base text-n-slate-12 line-clamp-1 flex items-center gap-2"},dYe={class:"flex items-center gap-2"},V2={__name:"InboxCard",props:{id:{type:Number,required:!0},inbox:{type:Object,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),[a,i]=la(),l=w(()=>{const p=n.inbox;if(!(p!=null&&p.name))return"";const h=p.channel_type===Dt.TWILIO,g=p.channel_type===Dt.WHATSAPP,_=p.channel_type===Dt.EMAIL;if(h||g){const T=p.messaging_service_sid||p.phone_number;return T?`${p.name} (${T})`:p.name}return _&&p.email?`${p.name} (${p.email})`:p.name}),r=w(()=>[{label:o("CAPTAIN.INBOXES.OPTIONS.DISCONNECT"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),d=w(()=>Rc(n.inbox.channel_type,"","outline")),u=({action:p,value:h})=>{i(!1),s("action",{action:p,value:h,id:n.id})};return(p,h)=>{const g=ct("on-clickaway");return m(),P(yl,null,{default:j(()=>[c("div",rYe,[c("span",cYe,[c("span",{class:re(d.value)},null,2),be(" "+v(l.value),1)]),c("div",dYe,[ie((m(),P(Ao,{permissions:["administrator"],class:"relative flex items-center group"},{default:j(()=>[b(he,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=_=>I(i)())}),I(a)?(m(),P(ma,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h[1]||(h[1]=_=>u(_))},null,8,["menu-items"])):x("",!0)]),_:1})),[[g,()=>I(i)(!1)]])])])]),_:1})}}},uYe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},mYe={__name:"InboxPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(m(),P(Mi,{title:o.$t("CAPTAIN.INBOXES.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.INBOXES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":j(()=>[c("div",uYe,[(m(!0),f(pe,null,ye(I(Vje).slice(0,5),(i,l)=>(m(),P(V2,{id:i.id,key:`inbox-${l}`,inbox:i},null,8,["id","inbox"]))),128))])]),actions:j(()=>[b(he,{label:o.$t("CAPTAIN.INBOXES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"]))}},pYe={class:"flex flex-row items-center gap-4"},hYe={class:"flex items-center gap-1 text-lg font-medium text-n-slate-12"},fYe={class:"flex flex-col gap-4"},gYe={__name:"Index",setup(e){const t=Ot(),n=U(""),s=xn(),o=Ve("captainAssistants/getUIFlags"),a=Ve("captainInboxes/getUIFlags"),i=w(()=>o.value.fetchingItem),l=w(()=>a.value.fetchingList),r=Ve("captainInboxes/getRecords"),d=U(null),u=U(null),p=()=>{u.value.dialogRef.open()},h=U(null),g=()=>{n.value="create",Zt(()=>h.value.dialogRef.open())},_=({action:A,id:C})=>{d.value=r.value.find(O=>C===O.id),Zt(()=>{A==="delete"&&p()})},T=()=>{n.value="",d.value=null},S=vn(),E=Number(s.params.assistantId),y=w(()=>S["captainAssistants/getRecord"].value(E));return Df(()=>t.dispatch("captainAssistants/show",E)),ut(()=>t.dispatch("captainInboxes/get",{assistantId:E})),(A,C)=>(m(),P($m,{"button-label":A.$t("CAPTAIN.INBOXES.ADD_NEW"),"button-policy":["administrator"],"is-fetching":i.value||l.value,"is-empty":!I(r).length,"show-pagination-footer":!1,"feature-flag":I(xt).CAPTAIN,onClick:g},Vo({emptyState:j(()=>[b(mYe,{onClick:g})]),body:j(()=>[c("div",fYe,[(m(!0),f(pe,null,ye(I(r),O=>(m(),P(V2,{id:O.id,key:O.id,inbox:O,onAction:_},null,8,["id","inbox"]))),128))])]),default:j(()=>[d.value?(m(),P(Rm,{key:0,ref_key:"disconnectInboxDialog",ref:u,entity:d.value,"delete-payload":{assistantId:I(E),inboxId:d.value.id},type:"Inboxes"},null,8,["entity","delete-payload"])):x("",!0),n.value?(m(),P(lYe,{key:1,ref_key:"connectInboxDialog",ref:h,"assistant-id":I(E),type:n.value,onClose:T},null,8,["assistant-id","type"])):x("",!0)]),_:2},[i.value?void 0:{name:"headerTitle",fn:j(()=>[c("div",pYe,[b(ir,{compact:""}),c("span",hYe,[be(v(y.value.name)+" ",1),C[0]||(C[0]=c("span",{class:"i-lucide-chevron-right text-xl text-n-slate-10"},null,-1)),be(" "+v(A.$t("CAPTAIN.INBOXES.HEADER")),1)])])]),key:"0"}]),1032,["button-label","is-fetching","is-empty","feature-flag"]))}},_Ye={class:"flex justify-between w-full gap-1"},vYe={class:"text-base text-n-slate-12 line-clamp-1"},bYe={class:"flex items-center gap-2"},EYe={class:"relative flex items-center group"},TYe={class:"flex items-center justify-between w-full gap-4"},yYe={class:"text-sm shrink-0 truncate text-n-slate-11 flex items-center gap-1"},AYe={class:"text-n-slate-11 text-sm truncate flex justify-start flex-1 items-center gap-1"},SYe={class:"truncate"},IYe={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1"},H2={__name:"DocumentCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},assistant:{type:Object,default:()=>({})},externalLink:{type:String,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:o}=Hc(),{t:a}=He(),[i,l]=la(),r=w(()=>{const p=[{label:a("CAPTAIN.DOCUMENTS.OPTIONS.VIEW_RELATED_RESPONSES"),value:"viewRelatedQuestions",action:"viewRelatedQuestions",icon:"i-ph-tree-view-duotone"}];return o(["administrator"])&&p.push({label:a("CAPTAIN.DOCUMENTS.OPTIONS.DELETE_DOCUMENT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),p}),d=w(()=>ms(n.createdAt)),u=({action:p,value:h})=>{l(!1),s("action",{action:p,value:h,id:n.id})};return(p,h)=>{const g=ct("on-clickaway");return m(),P(yl,null,{default:j(()=>{var _;return[c("div",_Ye,[c("span",vYe,v(e.name),1),c("div",bYe,[ie((m(),f("div",EYe,[b(he,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=T=>I(l)())}),I(i)?(m(),P(ma,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:h[1]||(h[1]=T=>u(T))},null,8,["menu-items"])):x("",!0)])),[[g,()=>I(l)(!1)]])])]),c("div",TYe,[c("span",yYe,[h[2]||(h[2]=c("i",{class:"i-woot-captain"},null,-1)),be(" "+v(((_=e.assistant)==null?void 0:_.name)||""),1)]),c("span",AYe,[h[3]||(h[3]=c("i",{class:"i-ph-link-simple shrink-0"},null,-1)),c("span",SYe,v(e.externalLink),1)]),c("div",IYe,v(d.value),1)])]}),_:1})}}},CYe={class:"relative w-4 h-4"},NYe=["checked","indeterminate","disabled"],K2={__name:"Checkbox",props:On({indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:On(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=Wn(e,"modelValue"),o=a=>{s.value=a.target.checked,n("change",a)};return(a,i)=>(m(),f("div",CYe,[c("input",{checked:s.value,indeterminate:e.indeterminate,type:"checkbox",disabled:e.disabled,class:"peer absolute inset-0 z-10 h-4 w-4 disabled:opacity-50 appearance-none rounded border border-n-slate-6 ring-transparent transition-all duration-200 checked:border-n-brand checked:bg-n-brand dark:border-gray-600 dark:checked:border-n-brand indeterminate:border-n-brand indeterminate:bg-n-brand hover:enabled:bg-n-blue-border cursor-pointer",onChange:o},null,40,NYe),i[0]||(i[0]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),i[1]||(i[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-indeterminate:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[c("path",{d:"M3 7L11 7","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]))}},OYe={class:"absolute top-7 ltr:left-4 rtl:right-4"},xYe={class:"flex relative justify-between w-full gap-1"},wYe={class:"text-base text-n-slate-12 line-clamp-1"},RYe={key:0,class:"flex items-center gap-2"},$Ye={class:"text-n-slate-11 text-sm line-clamp-5"},MYe={key:0,class:"items-center justify-between hidden lg:flex"},kYe={class:"inline-flex items-center"},LYe={class:"text-sm shrink-0 truncate text-n-slate-11 inline-flex items-center gap-1"},DYe={key:0,class:"shrink-0 text-sm text-n-slate-11 inline-flex line-clamp-1 gap-1 ml-3"},PYe={key:0,class:"inline-flex items-center gap-1 truncate over"},BYe=["title"],FYe={key:1,class:"inline-flex items-center gap-1"},UYe=["title"],GYe={class:"group-hover:underline"},VYe={key:3},HYe={key:1,class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1 ml-3"},KYe=["title"],zYe={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1 ml-3"},F_={__name:"ResponseCard",props:{id:{type:Number,required:!0},question:{type:String,required:!0},answer:{type:String,required:!0},compact:{type:Boolean,default:!1},status:{type:String,default:"approved"},documentable:{type:Object,default:null},assistant:{type:Object,default:()=>({})},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0},isSelected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1}},emits:["action","navigate","select","hover"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),[a,i]=la(),l=w({get:()=>n.isSelected,set:()=>s("select",n.id)}),r=w(()=>n.status==="pending"?[{label:o("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),value:"approve",action:"approve",icon:"i-lucide-circle-check-big"}]:[]),d=w(()=>[...r.value,{label:o("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:o("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),u=w(()=>ms(n.updatedAt||n.createdAt)),p=({action:g,value:_})=>{i(!1),s("action",{action:g,value:_,id:n.id})},h=()=>{s("navigate",{id:n.documentable.id,type:n.documentable.type})};return(g,_)=>{const T=ct("on-clickaway");return m(),P(yl,{selectable:"",class:re(["relative",{"rounded-md":e.compact}]),onMouseenter:_[3]||(_[3]=S=>s("hover",!0)),onMouseleave:_[4]||(_[4]=S=>s("hover",!1))},{default:j(()=>{var S;return[ie(c("div",OYe,[b(K2,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=E=>l.value=E)},null,8,["modelValue"])],512),[[ln,e.selectable]]),c("div",xYe,[c("span",wYe,v(e.question),1),e.compact?x("",!0):(m(),f("div",RYe,[ie((m(),P(Ao,{permissions:["administrator"],class:"relative flex items-center group"},{default:j(()=>[b(he,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:_[1]||(_[1]=E=>I(i)())}),I(a)?(m(),P(ma,{key:0,"menu-items":d.value,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:_[2]||(_[2]=E=>p(E))},null,8,["menu-items"])):x("",!0)]),_:1})),[[T,()=>I(i)(!1)]])]))]),c("span",$Ye,v(e.answer),1),e.compact?x("",!0):(m(),f("div",MYe,[c("div",kYe,[c("span",LYe,[_[5]||(_[5]=c("i",{class:"i-woot-captain"},null,-1)),be(" "+v(((S=e.assistant)==null?void 0:S.name)||""),1)]),e.documentable?(m(),f("div",DYe,[e.documentable.type==="Captain::Document"?(m(),f("span",PYe,[_[6]||(_[6]=c("i",{class:"i-ph-files-light text-base"},null,-1)),c("span",{class:"max-w-96 truncate",title:e.documentable.name},v(e.documentable.name),9,BYe)])):x("",!0),e.documentable.type==="User"?(m(),f("span",FYe,[_[7]||(_[7]=c("i",{class:"i-ph-user-circle-plus text-base"},null,-1)),c("span",{class:"max-w-96 truncate",title:e.documentable.available_name},v(e.documentable.available_name),9,UYe)])):e.documentable.type==="Conversation"?(m(),f("span",{key:2,class:"inline-flex items-center gap-1 group cursor-pointer",role:"button",onClick:h},[_[8]||(_[8]=c("i",{class:"i-ph-chat-circle-dots text-base"},null,-1)),c("span",GYe,v(I(o)("CAPTAIN.RESPONSES.DOCUMENTABLE.CONVERSATION",{id:e.documentable.display_id})),1)])):(m(),f("span",VYe))])):x("",!0),e.status!=="approved"?(m(),f("div",HYe,[c("i",{class:"i-ph-stack text-base",title:I(o)("CAPTAIN.RESPONSES.STATUS.TITLE")},null,8,KYe),be(" "+v(I(o)(`CAPTAIN.RESPONSES.STATUS.${e.status.toUpperCase()}`)),1)])):x("",!0)]),c("div",zYe,[_[9]||(_[9]=c("i",{class:"i-ph-calendar-dot"},null,-1)),be(" "+v(u.value),1)])]))]}),_:1},8,["class"])}}},WYe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},jYe={key:1,class:"flex flex-col gap-3 min-h-48"},YYe={__name:"RelatedResponses",props:{captainDocument:{type:Object,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=U(null),r=Ve("captainResponses/getUIFlags"),d=Ve("captainResponses/getRecords"),u=w(()=>r.value.fetchingList),p=()=>{o("close")};return ut(()=>{i.dispatch("captainResponses/get",{assistantId:s.captainDocument.assistant.id,documentId:s.captainDocument.id})}),t({dialogRef:l}),(h,g)=>(m(),P(Ss,{ref_key:"dialogRef",ref:l,type:"edit",title:I(a)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.TITLE"),description:I(a)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",width:"3xl",onClose:p},{default:j(()=>[u.value?(m(),f("div",WYe,[b(Gs)])):(m(),f("div",jYe,[(m(!0),f(pe,null,ye(I(d),_=>(m(),P(F_,{id:_.id,key:_.id,question:_.question,status:_.status,answer:_.answer,assistant:_.assistant,"created-at":_.created_at,"updated-at":_.updated_at,compact:""},null,8,["id","question","status","answer","assistant","created-at","updated-at"]))),128))]))]),_:1},8,["title","description"]))}},XYe={class:"flex flex-col gap-1"},qYe={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},ZYe={class:"flex items-center justify-between w-full gap-3"},QYe={__name:"DocumentForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=He(),o={uiFlags:Ve("captainDocuments/getUIFlags"),assistants:Ve("captainAssistants/getRecords")},i=ks({...{name:"",assistantId:null}}),l={url:{required:it,url:Oc,minLength:Nn(1)},assistantId:{required:it}},r=w(()=>o.assistants.value.map(S=>({value:S.id,label:S.name}))),d=Lt(l,i),u=w(()=>o.uiFlags.value.creatingItem),p=(S,E)=>d.value[S].$error?s(`CAPTAIN.DOCUMENTS.FORM.${E}.ERROR`):"",h=w(()=>({url:p("url","URL"),assistantId:p("assistantId","ASSISTANT")})),g=()=>n("cancel"),_=()=>({external_link:i.url,assistant_id:i.assistantId}),T=async()=>{await d.value.$validate()&&n("submit",_())};return(S,E)=>(m(),f("form",{class:"flex flex-col gap-4",onSubmit:Ke(T,["prevent"])},[b(ps,{modelValue:i.url,"onUpdate:modelValue":E[0]||(E[0]=y=>i.url=y),label:I(s)("CAPTAIN.DOCUMENTS.FORM.URL.LABEL"),placeholder:I(s)("CAPTAIN.DOCUMENTS.FORM.URL.PLACEHOLDER"),message:h.value.url,"message-type":h.value.url?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",XYe,[c("label",qYe,v(I(s)("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.LABEL")),1),b(Oi,{id:"assistant",modelValue:i.assistantId,"onUpdate:modelValue":E[1]||(E[1]=y=>i.assistantId=y),options:r.value,"has-error":!!h.value.assistantId,placeholder:I(s)("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:h.value.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",ZYe,[b(he,{type:"button",variant:"faded",color:"slate",label:I(s)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),b(he,{type:"submit",label:I(s)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},Fh="CAPTAIN.DOCUMENTS.CREATE",JYe={__name:"CreateDocumentDialog",emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=He(),a=Ot(),i=U(null),l=U(null),r=async p=>{var h;try{await a.dispatch("captainDocuments/create",p),Te(o(`${Fh}.SUCCESS_MESSAGE`)),i.value.close()}catch(g){const _=((h=g==null?void 0:g.response)==null?void 0:h.message)||o(`${Fh}.ERROR_MESSAGE`);Te(_)}},d=()=>{s("close")},u=()=>{i.value.close()};return t({dialogRef:i}),(p,h)=>(m(),P(Ss,{ref_key:"dialogRef",ref:i,title:p.$t(`${Fh}.TITLE`),description:p.$t("CAPTAIN.DOCUMENTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:d},{footer:j(()=>h[0]||(h[0]=[])),default:j(()=>[b(QYe,{ref_key:"documentForm",ref:l,onSubmit:r,onCancel:u},null,512)]),_:1},8,["title","description"]))}},z2={__name:"AssistantSelector",props:{assistantId:{type:[String,Number],required:!0}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(!1),i=Ve("captainAssistants/getRecords"),l=w(()=>[{label:o("CAPTAIN.RESPONSES.FILTER.ALL_ASSISTANTS"),value:"all",action:"filter"},...i.value.map(u=>({value:u.id,label:u.name,action:"filter"}))]),r=w(()=>{const u=l.value.find(p=>p.value===n.assistantId);return o("CAPTAIN.RESPONSES.FILTER.ASSISTANT",{selected:u?u.label:""})}),d=({value:u})=>{a.value=!1,s("update",u)};return(u,p)=>(m(),P(I(gl),{onTrigger:p[1]||(p[1]=h=>a.value=!1)},{default:j(()=>[b(he,{label:r.value,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:p[0]||(p[0]=h=>a.value=!a.value)},null,8,["label"]),a.value?(m(),P(ma,{key:0,"menu-items":l.value,class:"mt-2",onAction:d},null,8,["menu-items"])):x("",!0)]),_:1}))}},eXe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},tXe={__name:"DocumentPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(m(),f(pe,null,[b(P_,{title:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-dark.svg","learn-more-url":"https://chwt.app/captain-document",class:"mb-8"},null,8,["title","note"]),b(Mi,{title:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":j(()=>[c("div",eXe,[(m(!0),f(pe,null,ye(I(Uje).slice(0,5),(i,l)=>(m(),P(H2,{id:i.id,key:`document-${l}`,name:i.name,assistant:i.assistant,"external-link":i.external_link,"created-at":i.created_at},null,8,["id","name","assistant","external-link","created-at"]))),128))])]),actions:j(()=>[b(he,{label:o.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},nXe={__name:"LimitBanner",setup(e){const t=wn(),{accountId:n}=Ls(),{documentLimits:s,fetchLimits:o}=Bg(),a=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},i=w(()=>{if(!s.value)return!1;const{currentAvailable:l}=s.value;return l===0});return ut(o),(l,r)=>ie((m(),P(sm,{color:"amber","action-label":l.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:a},{default:j(()=>[be(v(l.$t("CAPTAIN.BANNER.DOCUMENTS")),1)]),_:1},8,["action-label"])),[[ln,i.value]])}},sXe={key:0,class:"mb-4 -mt-3 flex gap-3"},aXe={class:"flex flex-col gap-4"},oXe={__name:"Index",setup(e){const t=Ot(),n=Ve("captainDocuments/getUIFlags"),s=Ve("captainDocuments/getRecords"),o=Ve("captainAssistants/getRecords"),a=w(()=>n.value.fetchingList),i=Ve("captainDocuments/getMeta"),l=U("all"),r=U(null),d=U(null),u=()=>{d.value.dialogRef.open()},p=U(!1),h=U(!1),g=U(null),_=U(null),T=w(()=>o.value.length===0?!1:!a.value),S=()=>{p.value=!0,Zt(()=>_.value.dialogRef.open())},E=()=>{h.value=!0,Zt(()=>g.value.dialogRef.open())},y=()=>{p.value=!1},A=()=>{h.value=!1},C=({action:L,id:D})=>{r.value=s.value.find($=>D===$.id),Zt(()=>{L==="delete"?u():L==="viewRelatedQuestions"&&S()})},O=(L=1)=>{const D={page:L};l.value!=="all"&&(D.assistantId=l.value),t.dispatch("captainDocuments/get",D)},N=L=>{l.value=L,O()},R=L=>O(L),k=()=>{var L,D;((L=s.value)==null?void 0:L.length)===0&&((D=i.value)==null?void 0:D.page)>1&&R(i.value.page-1)};return ut(()=>{o.value.length||t.dispatch("captainAssistants/get"),O()}),(L,D)=>(m(),P($m,{"header-title":L.$t("CAPTAIN.DOCUMENTS.HEADER"),"button-label":L.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),"button-policy":["administrator"],"total-count":I(i).totalCount,"current-page":I(i).page,"show-pagination-footer":!a.value&&!!I(s).length,"is-fetching":a.value,"is-empty":!I(s).length,"feature-flag":I(xt).CAPTAIN,"onUpdate:currentPage":R,onClick:E},{knowMore:j(()=>[b(B_,{"button-label":L.$t("CAPTAIN.HEADER_KNOW_MORE"),title:L.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:L.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-popover-dark.svg","learn-more-url":"https://chwt.app/captain-document"},null,8,["button-label","title","note"])]),emptyState:j(()=>[b(tXe,{onClick:E})]),paywall:j(()=>[b(D_)]),controls:j(()=>[T.value?(m(),f("div",sXe,[b(z2,{"assistant-id":l.value,onUpdate:N},null,8,["assistant-id"])])):x("",!0)]),body:j(()=>[b(nXe,{class:"mb-5"}),c("div",aXe,[(m(!0),f(pe,null,ye(I(s),$=>(m(),P(H2,{id:$.id,key:$.id,name:$.name||$.external_link,"external-link":$.external_link,assistant:$.assistant,"created-at":$.created_at,onAction:C},null,8,["id","name","external-link","assistant","created-at"]))),128))])]),default:j(()=>[p.value?(m(),P(YYe,{key:0,ref_key:"relationQuestionDialog",ref:_,"captain-document":r.value,onClose:y},null,8,["captain-document"])):x("",!0),h.value?(m(),P(JYe,{key:1,ref_key:"createDocumentDialog",ref:g,onClose:A},null,512)):x("",!0),r.value?(m(),P(Rm,{key:2,ref_key:"deleteDocumentDialog",ref:d,entity:r.value,type:"Documents",onDeleteSuccess:k},null,8,["entity"])):x("",!0)]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"]))}},iXe={__name:"BulkDeleteDialog",props:{type:{type:String,required:!0},bulkIds:{type:Object,required:!0}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=U(null),r=w(()=>s.type.toUpperCase()),d=async p=>{if(p)try{await i.dispatch("captainBulkActions/handleBulkDelete",Array.from(s.bulkIds)),o("deleteSuccess"),Te(a(`CAPTAIN.${r.value}.BULK_DELETE.SUCCESS_MESSAGE`))}catch{Te(a(`CAPTAIN.${r.value}.BULK_DELETE.ERROR_MESSAGE`))}},u=async()=>{var p;await d(Array.from(s.bulkIds)),(p=l.value)==null||p.close()};return t({dialogRef:l}),(p,h)=>(m(),P(Ss,{ref_key:"bulkDeleteDialogRef",ref:l,type:"alert",title:I(a)(`CAPTAIN.${r.value}.BULK_DELETE.TITLE`),description:I(a)(`CAPTAIN.${r.value}.BULK_DELETE.DESCRIPTION`),"confirm-button-label":I(a)(`CAPTAIN.${r.value}.BULK_DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},lXe={class:"flex flex-col gap-1"},rXe={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},cXe={class:"flex items-center justify-between w-full gap-3"},dXe={__name:"ResponseForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},response:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a={uiFlags:Ve("captainResponses/getUIFlags"),assistants:Ve("captainAssistants/getRecords")},l=ks({...{question:"",answer:"",assistantId:null}}),r={question:{required:it,minLength:Nn(1)},answer:{required:it,minLength:Nn(1)},assistantId:{required:it}},d=w(()=>a.assistants.value.map(y=>({value:y.id,label:y.name}))),u=Lt(r,l),p=w(()=>a.uiFlags.value.creatingItem),h=(y,A)=>u.value[y].$error?o(`CAPTAIN.RESPONSES.FORM.${A}.ERROR`):"",g=w(()=>({question:h("question","QUESTION"),answer:h("answer","ANSWER"),assistantId:h("assistantId","ASSISTANT")})),_=()=>s("cancel"),T=()=>({question:l.question,answer:l.answer,assistant_id:l.assistantId}),S=async()=>{await u.value.$validate()&&s("submit",T())},E=y=>{if(!y)return;const{question:A,answer:C,assistant:O}=y;Object.assign(l,{question:A,answer:C,assistantId:O.id})};return lt(()=>n.response,y=>{n.mode==="edit"&&y&&E(y)},{immediate:!0}),(y,A)=>(m(),f("form",{class:"flex flex-col gap-4",onSubmit:Ke(S,["prevent"])},[b(ps,{modelValue:l.question,"onUpdate:modelValue":A[0]||(A[0]=C=>l.question=C),label:I(o)("CAPTAIN.RESPONSES.FORM.QUESTION.LABEL"),placeholder:I(o)("CAPTAIN.RESPONSES.FORM.QUESTION.PLACEHOLDER"),message:g.value.question,"message-type":g.value.question?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),b(Yc,{modelValue:l.answer,"onUpdate:modelValue":A[1]||(A[1]=C=>l.answer=C),label:I(o)("CAPTAIN.RESPONSES.FORM.ANSWER.LABEL"),placeholder:I(o)("CAPTAIN.RESPONSES.FORM.ANSWER.PLACEHOLDER"),message:g.value.answer,"max-length":1e4,"message-type":g.value.answer?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",lXe,[c("label",rXe,v(I(o)("CAPTAIN.RESPONSES.FORM.ASSISTANT.LABEL")),1),b(Oi,{id:"assistant",modelValue:l.assistantId,"onUpdate:modelValue":A[2]||(A[2]=C=>l.assistantId=C),options:d.value,"has-error":!!g.value.assistantId,placeholder:I(o)("CAPTAIN.RESPONSES.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:g.value.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",cXe,[b(he,{type:"button",variant:"faded",color:"slate",label:I(o)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:_},null,8,["label"]),b(he,{type:"submit",label:I(o)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":p.value,disabled:p.value},null,8,["label","is-loading","disabled"])])],32))}},uXe={__name:"CreateResponseDialog",props:{selectedResponse:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=He(),i=Ot(),l=U(null),r=U(null),d=T=>i.dispatch("captainResponses/update",{id:s.selectedResponse.id,...T}),u=w(()=>`CAPTAIN.RESPONSES.${s.type.toUpperCase()}`),p=T=>i.dispatch("captainResponses/create",T),h=async T=>{var S;try{s.type==="edit"?await d(T):await p(T),Te(a(`${u.value}.SUCCESS_MESSAGE`)),l.value.close()}catch(E){const y=((S=E==null?void 0:E.response)==null?void 0:S.message)||a(`${u.value}.ERROR_MESSAGE`);Te(y)}},g=()=>{o("close")},_=()=>{l.value.close()};return t({dialogRef:l}),(T,S)=>(m(),P(Ss,{ref_key:"dialogRef",ref:l,title:T.$t(`${u.value}.TITLE`),description:T.$t("CAPTAIN.RESPONSES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:g},{footer:j(()=>S[0]||(S[0]=[])),default:j(()=>[b(dXe,{ref_key:"responseForm",ref:r,mode:e.type,response:e.selectedResponse,onSubmit:h,onCancel:_},null,8,["mode","response"])]),_:1},8,["title","description"]))}},mXe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},pXe={__name:"ResponsePageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(m(),f(pe,null,[b(P_,{title:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-dark.svg","learn-more-url":"https://chwt.app/captain-faq",class:"mb-8"},null,8,["title","note"]),b(Mi,{title:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":j(()=>[c("div",mXe,[(m(!0),f(pe,null,ye(I(Gje).slice(0,5),(i,l)=>(m(),P(F_,{id:i.id,key:`response-${l}`,question:i.question,answer:i.answer,status:i.status,assistant:i.assistant,"created-at":i.created_at,"updated-at":i.created_at},null,8,["id","question","answer","status","assistant","created-at","updated-at"]))),128))])]),actions:j(()=>[b(he,{label:o.$t("CAPTAIN.RESPONSES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},hXe={key:0,class:"mb-4 -mt-3 flex justify-between items-center"},fXe={key:0,class:"flex gap-3"},gXe={key:0,class:"flex items-center gap-3 ltr:pl-4 rtl:pr-4"},_Xe={class:"flex items-center gap-1.5"},vXe={class:"text-sm text-n-slate-10 tabular-nums"},bXe={class:"flex gap-2"},EXe={class:"flex flex-col gap-4"},TXe={__name:"Index",setup(e){const t=wn(),n=Ot(),s=Ve("captainResponses/getUIFlags"),o=Ve("captainAssistants/getRecords"),a=Ve("captainResponses/getMeta"),i=Ve("captainResponses/getRecords"),l=w(()=>s.value.fetchingList),r=U(null),d=U(null),u=U(null),p=U("all"),h=U("all"),g=U(""),{t:_}=He(),T=U(null),S=U(!1),E=w(()=>o.value.length===0?!1:!l.value),y=w(()=>["all","pending","approved"].map(Z=>({label:_(`CAPTAIN.RESPONSES.STATUS.${Z.toUpperCase()}`),value:Z,action:"filter"}))),A=w(()=>{const Z=y.value.find(ne=>ne.value===p.value);return _("CAPTAIN.RESPONSES.FILTER.STATUS",{selected:Z?Z.label:""})}),C=()=>{d.value.dialogRef.open()},O=async()=>{try{await n.dispatch("captainResponses/update",{id:r.value.id,status:"approved"}),Te(_("CAPTAIN.RESPONSES.EDIT.APPROVE_SUCCESS_MESSAGE"))}catch(Z){const ne=(Z==null?void 0:Z.message)||_("CAPTAIN.RESPONSES.EDIT.ERROR_MESSAGE");Te(ne)}finally{r.value=null}},N=()=>{g.value="create",Zt(()=>T.value.dialogRef.open())},R=()=>{g.value="edit",Zt(()=>T.value.dialogRef.open())},k=({action:Z,id:ne})=>{r.value=i.value.find(ae=>ne===ae.id),Zt(()=>{Z==="delete"&&C(),Z==="edit"&&R(),Z==="approve"&&O()})},L=({id:Z,type:ne})=>{ne==="Conversation"&&t.push({name:"inbox_conversation",params:{conversation_id:Z}})},D=()=>{g.value="",r.value=null},$=(Z=1)=>{const ne={page:Z};p.value!=="all"&&(ne.status=p.value),h.value!=="all"&&(ne.assistantId=h.value),n.dispatch("captainResponses/get",ne)},M=U(new Set),K=U(null),B=w(()=>{var ae;const Z=M.value.size,ne=((ae=i.value)==null?void 0:ae.length)||0;return{hasSelected:Z>0,isIndeterminate:Z>0&&Z<ne,allSelected:ne>0&&Z===ne}}),H=w({get:()=>B.value.allSelected,set:Z=>{M.value=Z?new Set(i.value.map(ne=>ne.id)):new Set}}),G=(Z,ne)=>{K.value=Z?ne:null},V=Z=>{const ne=new Set(M.value);ne[ne.has(Z)?"delete":"add"](Z),M.value=ne},Y=async()=>{try{await n.dispatch("captainBulkActions/handleBulkApprove",Array.from(M.value)),M.value=new Set,Te(_("CAPTAIN.RESPONSES.BULK_APPROVE.SUCCESS_MESSAGE"))}catch(Z){Te((Z==null?void 0:Z.message)||_("CAPTAIN.RESPONSES.BULK_APPROVE.ERROR_MESSAGE"))}},ee=Z=>{const ne=B.value.allSelected,ae=M.value.size>0;$(Z),(ne||ae)&&(M.value=new Set)},X=()=>{var Z,ne;((Z=i.value)==null?void 0:Z.length)===0&&((ne=a.value)==null?void 0:ne.page)>1&&ee(a.value.page-1)},z=()=>{var Z,ne;if(((Z=i.value)==null?void 0:Z.length)===0){const ae=((ne=a.value)==null?void 0:ne.page)>1?a.value.page-1:a.value.page;$(ae)}M.value=new Set},W=({value:Z})=>{p.value=Z,S.value=!1,$()},q=Z=>{h.value=Z,$()};return ut(()=>{n.dispatch("captainAssistants/get"),$()}),(Z,ne)=>(m(),P($m,{"total-count":I(a).totalCount,"current-page":I(a).page,"button-policy":["administrator"],"header-title":Z.$t("CAPTAIN.RESPONSES.HEADER"),"button-label":Z.$t("CAPTAIN.RESPONSES.ADD_NEW"),"is-fetching":l.value,"is-empty":!I(i).length,"show-pagination-footer":!l.value&&!!I(i).length,"feature-flag":I(xt).CAPTAIN,"onUpdate:currentPage":ee,onClick:N},{knowMore:j(()=>[b(B_,{"button-label":Z.$t("CAPTAIN.HEADER_KNOW_MORE"),title:Z.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:Z.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note"])]),emptyState:j(()=>[b(pXe,{onClick:N})]),paywall:j(()=>[b(D_)]),controls:j(()=>[E.value?(m(),f("div",hXe,[B.value.hasSelected?x("",!0):(m(),f("div",fXe,[b(I(gl),{onTrigger:ne[1]||(ne[1]=ae=>S.value=!1)},{default:j(()=>[b(he,{label:A.value,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:ne[0]||(ne[0]=ae=>S.value=!S.value)},null,8,["label"]),S.value?(m(),P(ma,{key:0,"menu-items":y.value,class:"mt-2",onAction:W},null,8,["menu-items"])):x("",!0)]),_:1}),b(z2,{"assistant-id":h.value,onUpdate:q},null,8,["assistant-id"])])),b(Ms,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:j(()=>[B.value.hasSelected?(m(),f("div",gXe,[c("div",_Xe,[b(K2,{modelValue:H.value,"onUpdate:modelValue":ne[2]||(ne[2]=ae=>H.value=ae),indeterminate:B.value.isIndeterminate},null,8,["modelValue","indeterminate"]),c("span",vXe,v(Z.$t("CAPTAIN.RESPONSES.SELECTED",{count:M.value.size})),1)]),ne[4]||(ne[4]=c("div",{class:"h-4 w-px bg-n-strong"},null,-1)),c("div",bXe,[b(he,{label:Z.$t("CAPTAIN.RESPONSES.BULK_APPROVE_BUTTON"),sm:"",slate:"",onClick:Y},null,8,["label"]),b(he,{label:Z.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),sm:"",slate:"",onClick:ne[3]||(ne[3]=ae=>u.value.dialogRef.open())},null,8,["label"])])])):x("",!0)]),_:1})])):x("",!0)]),body:j(()=>[b(G2,{class:"mb-5"}),c("div",EXe,[(m(!0),f(pe,null,ye(I(i),ae=>(m(),P(F_,{id:ae.id,key:ae.id,question:ae.question,answer:ae.answer,assistant:ae.assistant,documentable:ae.documentable,status:ae.status,"created-at":ae.created_at,"updated-at":ae.updated_at,"is-selected":M.value.has(ae.id),selectable:K.value===ae.id||M.value.size>0,onAction:k,onNavigate:L,onSelect:V,onHover:ue=>G(ue,ae.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","onHover"]))),128))])]),default:j(()=>[r.value?(m(),P(Rm,{key:0,ref_key:"deleteDialog",ref:d,entity:r.value,type:"Responses",onDeleteSuccess:X},null,8,["entity"])):x("",!0),M.value?(m(),P(iXe,{key:1,ref_key:"bulkDeleteDialog",ref:u,"bulk-ids":M.value,type:"Responses",onDeleteSuccess:z},null,8,["bulk-ids"])):x("",!0),g.value?(m(),P(uXe,{key:2,ref_key:"createDialog",ref:T,type:g.value,"selected-response":r.value,onClose:D},null,8,["type","selected-response"])):x("",!0)]),_:1},8,["total-count","current-page","header-title","button-label","is-fetching","is-empty","show-pagination-footer","feature-flag"]))}},yXe=[{path:Pt("accounts/:accountId/captain/assistants"),component:nYe,name:"captain_assistants_index",meta:{permissions:["administrator","agent"],featureFlag:xt.CAPTAIN,installationTypes:[Ns.CLOUD,Ns.ENTERPRISE]}},{path:Pt("accounts/:accountId/captain/assistants/:assistantId/inboxes"),component:gYe,name:"captain_assistants_inboxes_index",meta:{permissions:["administrator","agent"],featureFlag:xt.CAPTAIN,installationTypes:[Ns.CLOUD,Ns.ENTERPRISE]}},{path:Pt("accounts/:accountId/captain/documents"),component:oXe,name:"captain_documents_index",meta:{permissions:["administrator","agent"],featureFlag:xt.CAPTAIN,installationTypes:[Ns.CLOUD,Ns.ENTERPRISE]}},{path:Pt("accounts/:accountId/captain/responses"),component:TXe,name:"captain_responses_index",meta:{permissions:["administrator","agent"],featureFlag:xt.CAPTAIN,installationTypes:[Ns.CLOUD,Ns.ENTERPRISE]}}],W2=Symbol("SidebarControl");function U_(){const e=to(W2,null);if(e===null)throw new Error("Component is missing a parent <Sidebar /> component.");const t=wn(),{shouldShow:n}=Hc(),s=r=>{var d;return r&&((d=t.resolve(r))==null?void 0:d.path)||"/"},o=r=>{var d,u;return r?((u=(d=t.resolve(r))==null?void 0:d.meta)==null?void 0:u.permissions)??[]:[]},a=r=>{var d,u;return r&&((u=(d=t.resolve(r))==null?void 0:d.meta)==null?void 0:u.featureFlag)||""},i=r=>{var d,u;return r?((u=(d=t.resolve(r))==null?void 0:d.meta)==null?void 0:u.installationTypes)||[]:[]};return{...e,resolvePath:s,resolvePermissions:o,resolveFeatureFlag:a,isAllowed:r=>{const d=o(r),u=a(r),p=i(r);return n(u,d,p)}}}function AXe(e){qn(W2,e)}function SXe(e){const t={$mod:navigator.platform.includes("Mac")?"":"Ctrl",shift:"",alt:"",ctrl:"Ctrl",cmd:"",option:"",enter:"",tab:"",esc:""};return w(()=>e.map(n=>t[n.toLowerCase()]||n).join("").toUpperCase())}function IXe(e){const t=xn(),n=wn(),s=i=>t.name===i,o=i=>{s(i)||n.push({name:i})};return Vs({"$mod+Slash":{action:()=>e(!0)},"$mod+Escape":{action:()=>e(!1)},"Alt+KeyC":{action:()=>o("home")},"Alt+KeyV":{action:()=>o("contacts_dashboard")},"Alt+KeyR":{action:()=>o("account_overview_reports")},"Alt+KeyS":{action:()=>o("agent_list")}})}const CXe={key:0,class:"relative flex items-center gap-2"},NXe={key:1,class:"size-2 -top-px ltr:-right-px rtl:-left-px bg-n-brand absolute rounded-full border border-n-solid-2"},OXe={class:"text-sm font-medium leading-5 flex-grow"},xXe={__name:"SidebarGroupHeader",props:{to:{type:[Object,String],default:""},label:{type:String,default:""},icon:{type:[String,Object],default:""},expandable:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},hasActiveChild:{type:Boolean,default:!1},getterKeys:{type:Object,default:()=>({})}},emits:["toggle"],setup(e,{emit:t}){const n=e,s=t,o=Ve(n.getterKeys.badge);return(a,i)=>(m(),P(hs(e.to?"router-link":"div"),{class:re(["flex items-center gap-2 px-2 py-1.5 rounded-lg h-8",{"n-blue-text bg-n-alpha-2 font-medium":e.isActive&&!e.hasActiveChild,"text-n-slate-12 font-medium":e.hasActiveChild,"text-n-slate-11 hover:bg-n-alpha-2":!e.isActive&&!e.hasActiveChild}]),role:"button",to:e.to,title:e.label,onClick:i[1]||(i[1]=Ke(l=>s("toggle"),["stop"]))},{default:j(()=>[e.icon?(m(),f("div",CXe,[e.icon?(m(),P(Ht,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):x("",!0),I(o)?(m(),f("span",NXe)):x("",!0)])):x("",!0),c("span",OXe,v(e.label),1),e.expandable?ie((m(),f("span",{key:1,class:"i-lucide-chevron-up size-3",onClick:i[0]||(i[0]=Ke(l=>s("toggle"),["stop"]))},null,512)),[[ln,e.isExpanded]]):x("",!0)]),_:1},8,["to","title","class"]))}},wXe={class:"flex-1 truncate min-w-0"},j2={__name:"SidebarGroupLeaf",props:{label:{type:String,required:!0},to:{type:[String,Object],required:!0},icon:{type:[String,Object],default:null},active:{type:Boolean,default:!1},component:{type:Function,default:null}},setup(e){const t=e,{resolvePermissions:n,resolveFeatureFlag:s}=U_(),o=w(()=>typeof t.component=="function"||xE(t.component));return(a,i)=>(m(),P(Ao,{permissions:I(n)(e.to),"feature-flag":I(s)(e.to),as:"li",class:"py-0.5 ltr:pl-3 rtl:pr-3 rtl:mr-3 ltr:ml-3 relative text-n-slate-11 child-item before:bg-n-slate-4 after:bg-transparent after:border-n-slate-4 before:left-0 rtl:before:right-0"},{default:j(()=>[(m(),P(hs(e.to?"router-link":"div"),{to:e.to,title:e.label,class:re(["flex h-8 items-center gap-2 px-2 py-1 rounded-lg max-w-[9.438rem] hover:bg-gradient-to-r from-transparent via-n-slate-3/70 to-n-slate-3/70 group",{"n-blue-text bg-n-alpha-2 active":e.active}])},{default:j(()=>[o.value?(m(),P(hs(e.component),{key:0,label:e.label,icon:e.icon,active:e.active},null,8,["label","icon","active"])):(m(),f(pe,{key:1},[e.icon?(m(),P(Ht,{key:0,icon:e.icon,class:"size-4 inline-block"},null,8,["icon"])):x("",!0),c("div",wXe,v(e.label),1)],64))]),_:1},8,["to","title","class"]))]),_:1},8,["permissions","feature-flag"]))}},RXe={class:"flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 text-n-slate-10 select-none pointer-events-none"},$Xe={class:"text-sm font-medium leading-5 flex-grow"},MXe={__name:"SidebarGroupSeparator",props:{label:{type:String,default:""},icon:{type:String,default:""}},setup(e){return(t,n)=>(m(),f("div",RXe,[e.icon?(m(),P(Ht,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):x("",!0),c("span",$Xe,v(e.label),1)]))}},kXe={key:1,class:"m-0 list-none reset-base relative group"},LXe={key:0,class:"absolute bg-gradient-to-t from-n-solid-2 w-full h-12 to-transparent -bottom-1 pointer-events-none flex items-end justify-end px-2 animate-fade-in-up"},DXe={__name:"SidebarSubGroup",props:{isExpanded:{type:Boolean,default:!1},label:{type:String,required:!0},icon:{type:[Object,String],required:!0},children:{type:Array,default:void 0},activeChild:{type:Object,default:void 0}},setup(e){const t=e,{isAllowed:n}=U_(),s=U(null),o=w(()=>t.children.filter(r=>r.to&&n(r.to))),a=w(()=>o.value.length>0),i=w(()=>o.value.length>7),l=U(!1);return Ea(s,"scroll",()=>{const{scrollHeight:r,scrollTop:d,clientHeight:u}=s.value;l.value=r-d===u}),(r,d)=>(m(),f(pe,null,[a.value?ie((m(),P(MXe,{key:0,label:e.label,icon:e.icon,class:"my-1"},null,8,["label","icon"])),[[ln,e.isExpanded]]):x("",!0),e.children.length?(m(),f("ul",kXe,[c("div",{ref_key:"scrollableContainer",ref:s,class:re({"max-h-[calc(14rem+16px)] overflow-y-scroll no-scrollbar":i.value})},[(m(!0),f(pe,null,ye(e.children,u=>{var p,h;return ie((m(),P(j2,As({ref_for:!0},u,{key:u.name,active:((p=e.activeChild)==null?void 0:p.name)===u.name}),null,16,["active"])),[[ln,e.isExpanded||((h=e.activeChild)==null?void 0:h.name)===u.name]])}),128))],2),i.value&&e.isExpanded?ie((m(),f("div",LXe,d[0]||(d[0]=[c("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",class:"text-n-slate-9 opacity-50 group-hover:opacity-100",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M4 4L8 8L12 4",stroke:"currentColor",opacity:"0.5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",opacity:"0.75","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M4 16L8 20L12 16",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),512)),[[ln,!l.value]]):x("",!0)])):x("",!0)],64))}},PXe={class:"py-1 pl-3 text-n-slate-10 border rounded-lg border-dashed text-center border-n-alpha-2 text-xs h-8 grid place-content-center select-none pointer-events-none"},BXe={__name:"SidebarGroupEmptyLeaf",setup(e){const{t}=He();return(n,s)=>(m(),f("li",PXe,[et(n.$slots,"default",{},()=>[be(v(I(t)("SIDEBAR.NO_ITEMS")),1)])]))}},FXe={key:0,class:"grid m-0 list-none sidebar-group-children"},UXe={key:1},GXe={__name:"SidebarGroup",props:{name:{type:String,required:!0},label:{type:String,required:!0},icon:{type:[String,Object,Function],default:null},to:{type:Object,default:null},activeOn:{type:Array,default:()=>[]},children:{type:Array,default:void 0},getterKeys:{type:Object,default:()=>({})}},setup(e){const t=e,{expandedItem:n,setExpandedItem:s,resolvePath:o,resolvePermissions:a,resolveFeatureFlag:i,isAllowed:l}=U_(),r=w(()=>{var C;return((C=t.children)==null?void 0:C.flatMap(O=>O.children||O))||[]}),d=xn(),u=wn(),p=w(()=>n.value===t.name),h=w(()=>t.children),g=w(()=>Array.isArray(t.children)&&t.children.length>0),_=w(()=>g.value?t.children.filter(C=>C.to&&l(C.to)):[]),T=w(()=>_.value.length>0),S=w(()=>t.to?d.path===o(t.to)?!0:t.activeOn.includes(d.name):!1),E=w(()=>{const C=r.value.find(N=>N.to&&d.path===o(N.to));if(C)return C;const O=r.value.filter(N=>{var R;return(R=N.activeOn)==null?void 0:R.includes(d.name)});return O.length>0?O.find(R=>Object.keys(R.to.params).map(k=>String(R.to.params[k])===String(d.params[k])).every(k=>k))??O[0]:r.value.find(N=>N.to&&d.path.startsWith(o(N.to)))}),y=w(()=>E.value!==void 0),A=()=>{if(T.value&&!p.value&&!y.value){const C=_.value[0];u.push(C.to)}s(t.name)};return ut(async()=>{await Zt(),y.value&&s(t.name)}),(C,O)=>!g.value||T.value?(m(),P(Ao,{key:0,permissions:I(a)(e.to),"feature-flag":I(i)(e.to),as:"li",class:"grid gap-1 text-sm cursor-pointer select-none"},{default:j(()=>[b(xXe,{icon:e.icon,name:e.name,label:e.label,to:e.to,"getter-keys":e.getterKeys,"is-active":S.value,"has-active-child":y.value,expandable:g.value,"is-expanded":p.value,onToggle:A},null,8,["icon","name","label","to","getter-keys","is-active","has-active-child","expandable","is-expanded"]),g.value?ie((m(),f("ul",FXe,[(m(!0),f(pe,null,ye(e.children,N=>{var R,k;return m(),f(pe,{key:N.name},[N.children?(m(),P(DXe,{key:0,label:N.label,icon:N.icon,children:N.children,"is-expanded":p.value,"active-child":E.value},null,8,["label","icon","children","is-expanded","active-child"])):I(l)(N.to)?ie((m(),P(j2,As({key:1,ref_for:!0},N,{active:((R=E.value)==null?void 0:R.name)===N.name}),null,16,["active"])),[[ln,p.value||((k=E.value)==null?void 0:k.name)===N.name]]):x("",!0)],64)}),128))],512)),[[ln,p.value||y.value]]):h.value&&p.value?(m(),f("ul",UXe,[b(BXe)])):x("",!0)]),_:1},8,["permissions","feature-flag"])):x("",!0)}},VXe={},HXe={class:"h-0 border-b border-n-strong -mx-2"};function KXe(e,t){return m(),f("div",HXe)}const zXe=Re(VXe,[["render",KXe]]),WXe={class:"grid gap-0"},jXe={class:"flex-grow flex items-center gap-1"},YXe={class:"flex gap-1 items-center flex-grow text-sm"},XXe={class:"p-1 flex-shrink-0"},qXe={class:"flex-grow flex items-center gap-1"},ZXe={__name:"SidebarProfileMenuStatus",setup(e){const{t}=He(),n=Ot(),s=Ve("getCurrentUserAvailability"),o=Ve("getCurrentAccountId"),a=Ve("getCurrentUserAutoOffline"),{AVAILABILITY_STATUS_KEYS:i}=$t,l=w(()=>[t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),r=["bg-n-teal-9","bg-n-amber-9","bg-n-slate-9"],d=w(()=>l.value.map((g,_)=>({label:g,value:i[_],color:r[_],icon:kn("span",{class:[r[_],"size-[12px] rounded"]}),active:s.value===i[_]}))),u=w(()=>d.value.find(g=>g.active));function p(g){try{n.dispatch("updateAvailability",{availability:g,account_id:o.value})}catch{Te(t("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}}function h(g){n.dispatch("updateAutoOffline",{accountId:o.value,autoOffline:g})}return(g,_)=>{const T=F("woot-switch"),S=ct("tooltip");return m(),P(I(cr),null,{default:j(()=>[c("div",WXe,[b(I(Fa),{"preserve-open":""},{default:j(()=>[c("div",jXe,v(g.$t("SIDEBAR.SET_YOUR_AVAILABILITY")),1),b(I(El),null,{trigger:j(({toggle:E})=>[b(he,{size:"sm",color:"slate",variant:"faded",class:"min-w-[96px]",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:E},{default:j(()=>[c("div",YXe,[c("div",XXe,[c("div",{class:re(["size-2 rounded-sm",u.value.color])},null,2)]),c("span",null,v(u.value.label),1)])]),_:2},1032,["onClick"])]),default:j(()=>[b(I(Tl),{class:"min-w-32 z-20"},{default:j(()=>[(m(!0),f(pe,null,ye(d.value,E=>(m(),P(I(Fa),{key:E.value,label:E.label,icon:E.icon,class:"cursor-pointer",onClick:y=>p(E.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1})]),_:1}),b(I(Fa),null,{default:j(()=>[c("div",qXe,[be(v(g.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT"))+" ",1),ie(b(Ht,{icon:"i-lucide-info",class:"size-4 text-n-slate-10"},null,512),[[S,g.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_SHORT"),void 0,{top:!0}]])]),b(T,{class:"flex-shrink-0","model-value":I(a),onInput:h},null,8,["model-value"])]),_:1})])]),_:1})}}},QXe=["onClick"],JXe={class:"min-w-0"},eqe={class:"text-n-slate-12 text-sm leading-4 font-medium truncate"},tqe={class:"text-n-slate-11 text-xs truncate"},nqe=Object.assign({inheritAttrs:!1},{__name:"SidebarProfileMenu",emits:["close","openKeyShortcutModal"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=Ve("getCurrentUser"),a=Ve("getCurrentUserAvailability"),i=Ve("getCurrentAccountId"),l=Ve("globalConfig/get"),r=Ve("accounts/isFeatureEnabledonAccount"),d=w(()=>r.value(i.value,xt.CONTACT_CHATWOOT_SUPPORT_TEAM)&&l.value.chatwootInboxToken),u=w(()=>[{show:d.value,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CONTACT_SUPPORT"),icon:"i-lucide-life-buoy",click:()=>{window.$chatwoot.toggle()}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS"),icon:"i-lucide-keyboard",click:()=>{n("openKeyShortcutModal")}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.PROFILE_SETTINGS"),icon:"i-lucide-user-pen",link:{name:"profile_settings_index"}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.APPEARANCE"),icon:"i-lucide-palette",click:()=>{document.querySelector("ninja-keys").open({parent:"appearance_settings"})}},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.DOCS"),icon:"i-lucide-book",link:"https://www.chatwoot.com/hc/user-guide/en",nativeLink:!0,target:"_blank"},{show:o.value.type==="SuperAdmin",showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE"),icon:"i-lucide-castle",link:"/super_admin",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.LOGOUT"),icon:"i-lucide-power",click:ql.logout}]),p=w(()=>u.value.filter(h=>h.show));return(h,g)=>(m(),P(I(El),{class:re(["relative w-full min-w-0",{"z-20":h.isOpen}]),onClose:g[0]||(g[0]=_=>n("close"))},{trigger:j(({toggle:_,isOpen:T})=>[c("button",{class:re(["flex gap-2 items-center rounded-lg cursor-pointer text-left w-full hover:bg-n-alpha-1 p-1",{"bg-n-alpha-1":T}]),onClick:_},[b(yn,{size:32,name:I(o).available_name,src:I(o).avatar_url,status:I(a),class:"flex-shrink-0","rounded-full":""},null,8,["name","src","status"]),c("div",JXe,[c("div",eqe,v(I(o).available_name),1),c("div",tqe,v(I(o).email),1)])],10,QXe)]),default:j(()=>[b(I(Tl),{class:"ltr:left-0 rtl:right-0 bottom-12 z-50 w-80 mb-2"},{default:j(()=>[b(ZXe),b(I(zXe)),(m(!0),f(pe,null,ye(p.value,_=>(m(),P(df,{key:_.label,"show-on-custom-branded-instance":_.showOnCustomBrandedInstance},{default:j(()=>[_.show?(m(),P(I(Fa),As({key:0,ref_for:!0},_),null,16)):x("",!0)]),_:2},1032,["show-on-custom-branded-instance"]))),128))]),_:1})]),_:1},8,["class"]))}}),sqe={class:"flex-1 truncate min-w-0"},aqe={key:0,class:"grid place-content-center size-5 bg-n-ruby-5/60 rounded-full"},oqe={__name:"ChannelLeaf",props:{label:{type:String,required:!0},active:{type:Boolean,default:!1},inbox:{type:Object,required:!0}},setup(e){const t=e,n=w(()=>t.inbox.reauthorization_required);return(s,o)=>{const a=ct("tooltip");return m(),f(pe,null,[c("span",{class:re(["size-4 grid place-content-center rounded-full bg-n-alpha-2",{"bg-n-solid-blue":e.active}])},[b(Xy,{inbox:e.inbox,class:"size-3"},null,8,["inbox"])],2),c("div",sqe,v(e.label),1),n.value?ie((m(),f("div",aqe,[b(Ht,{icon:"i-woot-alert",class:"size-3 text-n-ruby-9"})])),[[a,s.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]]):x("",!0)],64)}}},iqe=["data-account-id","onClick"],lqe={class:"text-sm font-medium leading-5 text-n-slate-12 truncate","aria-live":"polite"},rqe={key:0,"aria-hidden":"true",class:"i-lucide-chevron-down size-4 text-n-slate-10 flex-shrink-0"},cqe=["for"],dqe=["title"],uqe=["title"],mqe={__name:"SidebarAccountSwitcher",emits:["showCreateAccountModal"],setup(e,{emit:t}){const n=t,{t:s}=He(),{accountId:o,currentAccount:a}=Ls(),i=Ve("getCurrentUser"),l=Ve("globalConfig/get"),r=Ve("getUserAccounts"),d=w(()=>r.value.length>1&&a.value.name),u=w(()=>[...i.value.accounts||[]].sort((g,_)=>g.name.localeCompare(_.name))),p=g=>{const _=`/app/accounts/${g}/dashboard`;window.location.href=_},h=()=>{n("showCreateAccountModal")};return(g,_)=>(m(),P(I(El),null,{trigger:j(({toggle:T,isOpen:S})=>[c("button",{id:"sidebar-account-switcher","data-account-id":I(o),"aria-haspopup":"listbox","aria-controls":"account-options",class:re(["flex items-center gap-2 justify-between w-full rounded-lg px-2",[S&&"bg-n-alpha-1",d.value?"hover:bg-n-alpha-1 cursor-pointer":"cursor-default"]]),onClick:()=>d.value&&T()},[c("span",lqe,v(I(a).name),1),d.value?(m(),f("span",rqe)):x("",!0)],10,iqe)]),default:j(()=>[d.value?(m(),P(I(Tl),{key:0,class:"min-w-80 z-50"},{default:j(()=>[b(I(cr),{title:I(s)("SIDEBAR_ITEMS.SWITCH_ACCOUNT")},{default:j(()=>[(m(!0),f(pe,null,ye(u.value,T=>(m(),P(I(Fa),{id:`account-${T.id}`,key:T.id,class:"cursor-pointer",onClick:S=>p(T.id)},{label:j(()=>[c("div",{for:T.name,class:"text-left rtl:text-right flex gap-2 items-center"},[c("span",{class:"text-n-slate-12 max-w-36 truncate min-w-0",title:T.name},v(T.name),9,dqe),_[0]||(_[0]=c("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),c("span",{class:"text-n-slate-11 max-w-24 truncate capitalize",title:T.name},v(T.custom_role_id?T.custom_role.name:T.role),9,uqe)],8,cqe),ie(b(Ht,{icon:"i-lucide-check",class:"text-n-teal-11 size-5"},null,512),[[ln,T.id===I(o)]])]),_:2},1032,["id","onClick"]))),128))]),_:1},8,["title"]),I(l).createNewAccountFromDashboard?(m(),P(I(Fa),{key:0},{default:j(()=>[b(he,{color:"slate",variant:"faded",class:"w-full",size:"sm",onClick:h},{default:j(()=>[be(v(I(s)("CREATE_ACCOUNT.NEW_ACCOUNT")),1)]),_:1})]),_:1})):x("",!0)]),_:1})):x("",!0)]),_:1}))}},pqe=["src"],hqe={__name:"Logo",setup(e){const t=Bf(),n=Ve("globalConfig/get");return(s,o)=>I(n).logoThumbnail?(m(),f("img",As({key:0},I(t),{src:I(n).logoThumbnail}),null,16,pqe)):(m(),f("svg",As({key:1},I(t),{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o[0]||(o[0]=[Bo('<g clip-path="url(#woot-logo-clip-2342424e23u32098)"><path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#2781F6"></path><path d="M11.4172 11.4172H7.70831C5.66383 11.4172 4 9.75328 4 7.70828C4 5.66394 5.66383 4 7.70835 4C9.75339 4 11.4172 5.66394 11.4172 7.70828V11.4172Z" fill="white" stroke="white" stroke-width="0.1875"></path></g><defs><clipPath id="woot-logo-clip-2342424e23u32098"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2)]),16))}},fqe={class:"w-[12.5rem] bg-n-solid-2 rtl:border-l ltr:border-r border-n-weak h-screen flex flex-col text-sm pb-1"},gqe={class:"grid gap-2 mt-2 mb-4"},_qe={class:"flex items-center min-w-0 gap-2 px-2"},vqe={class:"grid flex-shrink-0 size-6 place-content-center"},bqe={class:"flex gap-2 px-2"},Eqe={class:"flex-grow text-left"},Tqe={class:"hidden tracking-wide pointer-events-none select-none text-n-slate-10"},yqe={class:"grid flex-grow gap-2 px-2 pb-5 overflow-y-scroll no-scrollbar"},Aqe={class:"flex flex-col gap-2 m-0 list-none"},Sqe={class:"p-1 border-t border-n-weak shadow-[0px_-2px_4px_0px_rgba(27,28,29,0.02)] flex-shrink-0 flex justify-between gap-2 items-center"},Iqe={__name:"Sidebar",emits:["closeKeyShortcutModal","openKeyShortcutModal","showCreateAccountModal"],setup(e,{emit:t}){const n=t,{accountScopedRoute:s}=Ls(),o=hn(),a=SXe(["$mod","k"]),{t:i}=He();IXe(A=>{n(A?"openKeyShortcutModal":"closeKeyShortcutModal")});const r=g$("next-sidebar-expanded-item",null,sessionStorage);AXe({expandedItem:r,setExpandedItem:A=>{r.value=r.value===A?null:A}});const u=Ve("inboxes/getInboxes"),p=Ve("labels/getLabelsOnSidebar"),h=Ve("teams/getMyTeams"),g=Ve("customViews/getContactCustomViews"),_=Ve("customViews/getConversationCustomViews");Ve("dashboardApps/getNavigationApps"),ut(()=>{o.dispatch("labels/get"),o.dispatch("inboxes/get"),o.dispatch("notifications/unReadCount"),o.dispatch("teams/get"),o.dispatch("attributes/get"),o.dispatch("customViews/get","conversation"),o.dispatch("customViews/get","contact"),o.dispatch("dashboardApps/get")});const T=w(()=>u.value.slice().sort((A,C)=>A.name.localeCompare(C.name))),S=()=>[{name:"Reports Agent",label:i("SIDEBAR.REPORTS_AGENT"),to:s("agent_reports_index"),activeOn:["agent_reports_show"]},{name:"Reports Label",label:i("SIDEBAR.REPORTS_LABEL"),to:s("label_reports")},{name:"Reports Inbox",label:i("SIDEBAR.REPORTS_INBOX"),to:s("inbox_reports_index"),activeOn:["inbox_reports_show"]},{name:"Reports Team",label:i("SIDEBAR.REPORTS_TEAM"),to:s("team_reports_index"),activeOn:["team_reports_show"]}],E=w(()=>S()),y=w(()=>[{name:"Inbox",label:i("SIDEBAR.INBOX"),icon:"i-lucide-inbox",to:s("inbox_view"),activeOn:["inbox_view","inbox_view_conversation"],getterKeys:{badge:"notifications/getHasUnreadNotifications"}},{name:"Conversation",label:i("SIDEBAR.CONVERSATIONS"),icon:"i-lucide-message-circle",children:[{name:"All",label:i("SIDEBAR.ALL_CONVERSATIONS"),activeOn:["inbox_conversation"],to:s("home")},{name:"Mentions",label:i("SIDEBAR.MENTIONED_CONVERSATIONS"),activeOn:["conversation_through_mentions"],to:s("conversation_mentions")},{name:"Unattended",activeOn:["conversation_through_unattended"],label:i("SIDEBAR.UNATTENDED_CONVERSATIONS"),to:s("conversation_unattended")},{name:"Folders",label:i("SIDEBAR.CUSTOM_VIEWS_FOLDER"),icon:"i-lucide-folder",activeOn:["conversations_through_folders"],children:_.value.map(A=>({name:`${A.name}-${A.id}`,label:A.name,to:s("folder_conversations",{id:A.id})}))},{name:"Teams",label:i("SIDEBAR.TEAMS"),icon:"i-lucide-users",activeOn:["conversations_through_team"],children:h.value.map(A=>({name:`${A.name}-${A.id}`,label:A.name,to:s("team_conversations",{teamId:A.id})}))},{name:"Channels",label:i("SIDEBAR.CHANNELS"),icon:"i-lucide-mailbox",activeOn:["conversation_through_inbox"],children:T.value.map(A=>({name:`${A.name}-${A.id}`,label:A.name,to:s("inbox_dashboard",{inbox_id:A.id}),component:C=>kn(oqe,{label:C.label,active:C.active,inbox:A})}))},{name:"Labels",label:i("SIDEBAR.LABELS"),icon:"i-lucide-tag",activeOn:["conversations_through_label"],children:p.value.map(A=>({name:`${A.title}-${A.id}`,label:A.title,icon:kn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:A.color}}),to:s("label_conversations",{label:A.title})}))}]},{name:"Kanban",label:i("SIDEBAR.KANBAN_BOARD"),icon:"i-lucide-layout-grid",to:s("kanban_board"),featureFlag:"kanban_board"},{name:"Captain",icon:"i-woot-captain",label:i("SIDEBAR.CAPTAIN"),children:[{name:"Assistants",label:i("SIDEBAR.CAPTAIN_ASSISTANTS"),to:s("captain_assistants_index")},{name:"Documents",label:i("SIDEBAR.CAPTAIN_DOCUMENTS"),to:s("captain_documents_index")},{name:"Responses",label:i("SIDEBAR.CAPTAIN_RESPONSES"),to:s("captain_responses_index")}]},{name:"Contacts",label:i("SIDEBAR.CONTACTS"),icon:"i-lucide-contact",children:[{name:"All Contacts",label:i("SIDEBAR.ALL_CONTACTS"),to:s("contacts_dashboard_index",{},{page:1,search:void 0}),activeOn:["contacts_dashboard_index","contacts_edit"]},{name:"Segments",icon:"i-lucide-group",label:i("SIDEBAR.CUSTOM_VIEWS_SEGMENTS"),children:g.value.map(A=>({name:`${A.name}-${A.id}`,label:A.name,to:s("contacts_dashboard_segments_index",{segmentId:A.id},{page:1}),activeOn:["contacts_dashboard_segments_index","contacts_edit_segment"]}))},{name:"Tagged With",icon:"i-lucide-tag",label:i("SIDEBAR.TAGGED_WITH"),children:p.value.map(A=>({name:`${A.title}-${A.id}`,label:A.title,icon:kn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:A.color}}),to:s("contacts_dashboard_labels_index",{label:A.title},{page:1,search:void 0}),activeOn:["contacts_dashboard_labels_index","contacts_edit_label"]}))}]},{name:"Reports",label:i("SIDEBAR.REPORTS"),icon:"i-lucide-chart-spline",children:[{name:"Report Overview",label:i("SIDEBAR.REPORTS_OVERVIEW"),to:s("account_overview_reports")},{name:"Report Conversation",label:i("SIDEBAR.REPORTS_CONVERSATION"),to:s("conversation_reports")},...E.value,{name:"Reports CSAT",label:i("SIDEBAR.CSAT"),to:s("csat_reports")},{name:"Reports SLA",label:i("SIDEBAR.REPORTS_SLA"),to:s("sla_reports")},{name:"Reports Bot",label:i("SIDEBAR.REPORTS_BOT"),to:s("bot_reports")}]},{name:"Campaigns",label:i("SIDEBAR.CAMPAIGNS"),icon:"i-lucide-megaphone",children:[{name:"Live chat",label:i("SIDEBAR.LIVE_CHAT"),to:s("campaigns_livechat_index")},{name:"SMS",label:i("SIDEBAR.SMS"),to:s("campaigns_sms_index")}]},{name:"Portals",label:i("SIDEBAR.HELP_CENTER.TITLE"),icon:"i-lucide-library-big",children:[{name:"Articles",label:i("SIDEBAR.HELP_CENTER.ARTICLES"),activeOn:["portals_articles_index","portals_articles_new","portals_articles_edit"],to:s("portals_index",{navigationPath:"portals_articles_index"})},{name:"Categories",label:i("SIDEBAR.HELP_CENTER.CATEGORIES"),activeOn:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"],to:s("portals_index",{navigationPath:"portals_categories_index"})},{name:"Locales",label:i("SIDEBAR.HELP_CENTER.LOCALES"),activeOn:["portals_locales_index"],to:s("portals_index",{navigationPath:"portals_locales_index"})},{name:"Settings",label:i("SIDEBAR.HELP_CENTER.SETTINGS"),activeOn:["portals_settings_index"],to:s("portals_index",{navigationPath:"portals_settings_index"})}]},{name:"Settings",label:i("SIDEBAR.SETTINGS"),icon:"i-lucide-bolt",children:[{name:"Settings Account Settings",label:i("SIDEBAR.ACCOUNT_SETTINGS"),icon:"i-lucide-briefcase",to:s("general_settings_index")},{name:"Settings Agents",label:i("SIDEBAR.AGENTS"),icon:"i-lucide-square-user",to:s("agent_list")},{name:"Settings Teams",label:i("SIDEBAR.TEAMS"),icon:"i-lucide-users",to:s("settings_teams_list")},{name:"Settings Inboxes",label:i("SIDEBAR.INBOXES"),icon:"i-lucide-inbox",to:s("settings_inbox_list")},{name:"Settings Labels",label:i("SIDEBAR.LABELS"),icon:"i-lucide-tags",to:s("labels_list")},{name:"Settings Custom Attributes",label:i("SIDEBAR.CUSTOM_ATTRIBUTES"),icon:"i-lucide-code",to:s("attributes_list")},{name:"Settings Automation",label:i("SIDEBAR.AUTOMATION"),icon:"i-lucide-workflow",to:s("automation_list")},{name:"Settings Agent Bots",label:i("SIDEBAR.AGENT_BOTS"),icon:"i-lucide-bot",to:s("agent_bots")},{name:"Settings Macros",label:i("SIDEBAR.MACROS"),icon:"i-lucide-toy-brick",to:s("macros_wrapper")},{name:"Settings Canned Responses",label:i("SIDEBAR.CANNED_RESPONSES"),icon:"i-lucide-message-square-quote",to:s("canned_list")},{name:"Settings Integrations",label:i("SIDEBAR.INTEGRATIONS"),icon:"i-lucide-blocks",to:s("settings_applications")},{name:"Settings Audit Logs",label:i("SIDEBAR.AUDIT_LOGS"),icon:"i-lucide-briefcase",to:s("auditlogs_list")},{name:"Settings Custom Roles",label:i("SIDEBAR.CUSTOM_ROLES"),icon:"i-lucide-shield-plus",to:s("custom_roles_list")},{name:"Settings Sla",label:i("SIDEBAR.SLA"),icon:"i-lucide-clock-alert",to:s("sla_list")},{name:"Settings Billing",label:i("SIDEBAR.BILLING"),icon:"i-lucide-credit-card",to:s("billing_settings_index")}]}]);return(A,C)=>{const O=F("RouterLink");return m(),f("aside",fqe,[c("section",gqe,[c("div",_qe,[c("div",vqe,[b(hqe,{class:"size-4"})]),C[2]||(C[2]=c("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),b(mqe,{class:"flex-grow min-w-0 -mx-1",onShowCreateAccountModal:C[0]||(C[0]=N=>n("showCreateAccountModal"))})]),c("div",bqe,[b(O,{to:{name:"search"},class:"flex items-center w-full gap-2 px-2 py-1 rounded-lg h-7 outline outline-1 outline-n-weak bg-n-solid-3 dark:bg-n-black/30"},{default:j(()=>[C[3]||(C[3]=c("span",{class:"flex-shrink-0 i-lucide-search size-4 text-n-slate-11"},null,-1)),c("span",Eqe,v(I(i)("COMBOBOX.SEARCH_PLACEHOLDER")),1),c("span",Tqe,v(I(a)),1)]),_:1}),b(Om,{"align-position":"right"},{trigger:j(({toggle:N})=>[b(he,{icon:"i-lucide-pen-line",color:"slate",size:"sm",class:"!h-7 !bg-n-solid-3 dark:!bg-n-black/30 !outline-n-weak !text-n-slate-11",onClick:N},null,8,["onClick"])]),_:1})])]),c("nav",yqe,[c("ul",Aqe,[(m(!0),f(pe,null,ye(y.value,N=>(m(),P(GXe,As({key:N.name,ref_for:!0},N),null,16))),128))])]),c("section",Sqe,[b(nqe,{onOpenKeyShortcutModal:C[1]||(C[1]=N=>n("openKeyShortcutModal"))})])])}}},Yn={ALT:"Alt / ",WIN:"Win / ",SHIFT:"Shift",SLASH:"/",UP:"Up",DOWN:"Down"},Cqe=[{id:1,label:"OPEN_CONVERSATION",displayKeys:[Yn.ALT,"J",Yn.SLASH,Yn.ALT,"K"],keySet:["Alt+KeyJ","Alt+KeyK"]},{id:2,label:"RESOLVE_AND_NEXT",displayKeys:[Yn.WIN,Yn.ALT,"E"],keySet:["$mod+Alt+KeyE"]},{id:3,label:"NAVIGATE_DROPDOWN",displayKeys:[Yn.UP,Yn.DOWN],keySet:["ArrowUp","ArrowDown"]},{id:4,label:"RESOLVE_CONVERSATION",displayKeys:[Yn.ALT,"E"],keySet:["Alt+KeyE"]},{id:5,label:"GO_TO_CONVERSATION_DASHBOARD",displayKeys:[Yn.ALT,"C"],keySet:["Alt+KeyC"]},{id:6,label:"ADD_ATTACHMENT",displayKeys:[Yn.WIN,Yn.ALT,"A"],keySet:["$mod+Alt+KeyA"]},{id:7,label:"GO_TO_CONTACTS_DASHBOARD",displayKeys:[Yn.ALT,"V"],keySet:["Alt+KeyV"]},{id:8,label:"TOGGLE_SIDEBAR",displayKeys:[Yn.ALT,"O"],keySet:["Alt+KeyO"]},{id:9,label:"GO_TO_REPORTS_SIDEBAR",displayKeys:[Yn.ALT,"R"],keySet:["Alt+KeyR"]},{id:10,label:"MOVE_TO_NEXT_TAB",displayKeys:[Yn.ALT,"N"],keySet:["Alt+KeyN"]},{id:11,label:"GO_TO_SETTINGS",displayKeys:[Yn.ALT,"S"],keySet:["Alt+KeyS"]},{id:12,label:"SWITCH_TO_PRIVATE_NOTE",displayKeys:[Yn.ALT,"P"],keySet:["Alt+KeyP"]},{id:13,label:"SWITCH_TO_REPLY",displayKeys:[Yn.ALT,"L"],keySet:["Alt+KeyL"]},{id:14,label:"TOGGLE_SNOOZE_DROPDOWN",displayKeys:[Yn.ALT,"M"],keySet:["Alt+KeyM"]}],Nqe={class:"flex flex-col h-auto overflow-auto"},Oqe={class:"grid grid-cols-2 px-8 pt-0 pb-4 mt-6 gap-x-5 gap-y-3"},xqe={class:"flex justify-between items-center min-w-[25rem]"},wqe={class:"text-sm text-slate-800 dark:text-slate-100"},Rqe={class:"flex items-center gap-2 mb-1 ml-2"},$qe={class:"grid grid-cols-2 px-8 pt-0 pb-8 gap-x-5 gap-y-3"},Mqe={class:"text-sm text-slate-800 min-w-[36px] dark:text-slate-100"},kqe={class:"flex items-center gap-2 mb-1 ml-2"},Lqe={key:1,class:"flex items-center text-sm font-semibold text-slate-800 dark:text-slate-100"},Dqe={__name:"WootKeyShortcutModal",props:{show:Boolean},emits:["close"],setup(e){const{t}=He(),n=U(null),s=w(()=>a=>t(`KEYBOARD_SHORTCUTS.TITLE.${a.label}`)),o=w(()=>a=>n.value===hN&&a.some(i=>fN.has(i)));return ut(async()=>{n.value=await gN()}),(a,i)=>{const l=F("woot-modal-header"),r=F("woot-modal");return m(),P(r,{show:e.show,size:"medium","on-close":()=>a.$emit("close")},{default:j(()=>[c("div",Nqe,[b(l,{"header-title":a.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")},null,8,["header-title"]),c("div",Oqe,[c("div",xqe,[c("h5",wqe,v(a.$t("KEYBOARD_SHORTCUTS.TOGGLE_MODAL")),1),c("div",Rqe,[b(Hl,{"custom-class":"min-h-[28px] min-w-[60px] normal-case key"},{default:j(()=>[be(v(I(Yn).WIN),1)]),_:1}),b(Hl,{"custom-class":"min-h-[28px] min-w-[36px] key"},{default:j(()=>[be(v(I(Yn).SLASH),1)]),_:1})])])]),c("div",$qe,[(m(!0),f(pe,null,ye(I(Cqe),d=>(m(),f("div",{key:d.id,class:"flex justify-between items-center min-w-[25rem]"},[c("h5",Mqe,v(s.value(d)),1),c("div",kqe,[o.value(d.keySet)?(m(),P(Hl,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key"},{default:j(()=>[be(v(I(Yn).SHIFT),1)]),_:1})):x("",!0),(m(!0),f(pe,null,ye(d.displayKeys,(u,p)=>(m(),f(pe,{key:p},[u!==I(Yn).SLASH?(m(),P(Hl,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key normal-case"},{default:j(()=>[be(v(u),1)]),_:2},1024)):(m(),f("span",Lqe,v(u),1))],64))),128))])]))),128))])])]),_:1},8,["show","on-close"])}}},Pqe=Re(Dqe,[["__scopeId","data-v-a164acda"]]),Bqe={props:{showAccountModal:{type:Boolean,default:!0}},emits:["closeAccountModal","showCreateAccountModal"],computed:{...gt({accountId:"getCurrentAccountId",currentUser:"getCurrentUser",globalConfig:"globalConfig/get"})},methods:{onChangeAccount(e){const t=`/app/accounts/${e}/dashboard`;window.location.href=t}}},Fqe={class:"px-8 py-4"},Uqe=["id"],Gqe=["onClick"],Vqe={class:"w-full"},Hqe=["for"],Kqe={class:"text-lg font-medium leading-5 text-slate-700 dark:text-slate-100 hover:underline-offset-4"},zqe={class:"text-xs font-medium lowercase text-slate-500 dark:text-slate-500 hover:underline-offset-4"},Wqe={key:0,class:"flex items-center justify-end gap-2 px-8 pt-4 pb-8"};function jqe(e,t,n,s,o,a){const i=F("woot-modal-header"),l=F("fluent-icon"),r=F("woot-modal");return m(),P(r,{show:n.showAccountModal,"on-close":()=>e.$emit("closeAccountModal")},{default:j(()=>[b(i,{"header-title":e.$t("SIDEBAR_ITEMS.CHANGE_ACCOUNTS"),"header-content":e.$t("SIDEBAR_ITEMS.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),c("div",Fqe,[(m(!0),f(pe,null,ye(e.currentUser.accounts,d=>(m(),f("div",{id:`account-${d.id}`,key:d.id,class:"pt-0 pb-0"},[c("button",{class:"flex items-center justify-between w-full px-4 py-3 rounded-lg cursor-pointer expanded clear link hover:underline hover:bg-slate-25 dark:hover:bg-slate-900",onClick:u=>a.onChangeAccount(d.id)},[c("span",Vqe,[c("label",{for:d.name,class:"text-left rtl:text-right"},[c("div",Kqe,v(d.name),1),c("div",zqe,v(d.custom_role_id?d.custom_role.name:d.role),1)],8,Hqe)]),ie(b(l,{class:"text-slate-800 dark:text-slate-100",icon:"checkmark-circle",type:"solid",size:"24"},null,512),[[ln,d.id===e.accountId]])],8,Gqe)],8,Uqe))),128))]),e.globalConfig.createNewAccountFromDashboard?(m(),f("div",Wqe,[c("button",{class:"w-full button success large expanded nice",onClick:t[0]||(t[0]=d=>e.$emit("showCreateAccountModal"))},v(e.$t("CREATE_ACCOUNT.NEW_ACCOUNT")),1)])):x("",!0)]),_:1},8,["show","on-close"])}const Yqe=Re(Bqe,[["render",jqe]]),Xqe={components:{Thumbnail:Qn,NextButton:he},props:{notificationItem:{type:Object,default:()=>{}}},emits:["openNotification"],computed:{notificationAssignee(){var t;const{primary_actor:e}=this.notificationItem;return(t=e==null?void 0:e.meta)==null?void 0:t.assignee},hasNotificationAssignee(){return!!this.notificationAssignee},notificationAssigneeName(){var e;return((e=this.notificationAssignee)==null?void 0:e.name)||""},notificationAssigneeThumbnail(){var e;return((e=this.notificationAssignee)==null?void 0:e.thumbnail)||""}},methods:{dynamicTime:ms,onClickOpenNotification(){this.$emit("openNotification",this.notificationItem)}}},qqe={class:"w-full"},Zqe={class:"flex-row items-center p-2.5 leading-[1.4] border-b border-solid border-slate-50 dark:border-slate-700 flex w-full hover:bg-slate-75 dark:hover:bg-slate-900 hover:rounded-md"},Qqe={key:0,class:"w-2 h-2 rounded-full bg-woot-500"},Jqe={key:1,class:"flex w-2"},eZe={class:"flex-col ml-2.5 overflow-hidden w-full flex justify-between"},tZe={class:"flex justify-between"},nZe={class:"flex items-center"},sZe={class:"font-bold text-slate-800 dark:text-slate-100"},aZe={class:"text-xxs p-0.5 px-1 my-0 mx-2 bg-slate-50 dark:bg-slate-700 rounded-md"},oZe={key:0},iZe={class:"flex w-full"},lZe={class:"overflow-hidden font-normal text-slate-700 dark:text-slate-200 whitespace-nowrap text-ellipsis"},rZe={class:"flex mt-1 font-semibold text-slate-500 dark:text-slate-400 text-xxs"};function cZe(e,t,n,s,o,a){const i=F("Thumbnail"),l=F("NextButton");return m(),f("div",qqe,[b(l,{link:"",slate:"",class:"!w-full !h-auto",onClick:t[0]||(t[0]=r=>a.onClickOpenNotification())},{default:j(()=>[c("div",Zqe,[n.notificationItem.read_at?(m(),f("div",Jqe)):(m(),f("div",Qqe)),c("div",eZe,[c("div",tZe,[c("div",nZe,[c("span",sZe,v(`#${n.notificationItem.primary_actor?n.notificationItem.primary_actor.id:e.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),c("span",aZe,v(e.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${n.notificationItem.notification_type}`)),1)]),a.hasNotificationAssignee?(m(),f("div",oZe,[b(i,{src:a.notificationAssigneeThumbnail,size:"16px",username:a.notificationAssigneeName},null,8,["src","username"])])):x("",!0)]),c("div",iZe,[c("span",lZe,v(n.notificationItem.push_message_title),1)]),c("span",rZe,v(a.dynamicTime(n.notificationItem.last_activity_at)),1)])])]),_:1})])}const dZe=Re(Xqe,[["render",cZe]]),uZe={components:{NotificationPanelItem:dZe,Spinner:Os,EmptyState:vl,NextButton:he},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!0},onClickNotification:{type:Function,default:()=>{}},inLastPage:{type:Boolean,default:!1}},emits:["close"],computed:{showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{openNotificationPage(){this.$route.name!=="notifications_index"&&this.$router.push({name:"notifications_index"}),this.$emit("close")}}},mZe={class:"flex-col py-2 px-2.5 overflow-auto h-full flex"},pZe={key:2,class:"flex items-center justify-center mx-2 my-12 text-sm font-medium"};function hZe(e,t,n,s,o,a){const i=F("NotificationPanelItem"),l=F("EmptyState"),r=F("NextButton"),d=F("Spinner");return m(),f("div",mZe,[(m(!0),f(pe,null,ye(n.notifications,u=>ie((m(),P(i,{key:u.id,"notification-item":u,onOpenNotification:n.onClickNotification},null,8,["notification-item","onOpenNotification"])),[[ln,!n.isLoading]])),128)),a.showEmptyResult?(m(),P(l,{key:0,title:e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.EMPTY_MESSAGE")},null,8,["title"])):x("",!0),!n.isLoading&&n.inLastPage?(m(),P(r,{key:1,ghost:"",class:"!w-full mt-3",label:e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.ALL_NOTIFICATIONS"),onClick:a.openNotificationPage},null,8,["label","onClick"])):x("",!0),n.isLoading?(m(),f("div",pZe,[b(d),c("span",null,v(e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.LOADING_UNREAD_MESSAGE")),1)])):x("",!0)])}const fZe=Re(uZe,[["render",hZe]]),gZe={components:{NotificationPanelList:fZe,NextButton:he},emits:["close"],data(){return{pageSize:15}},computed:{...gt({meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"}),totalUnreadNotifications(){return this.meta.unreadCount},noUnreadNotificationAvailable(){return this.meta.unreadCount===0},getUnreadNotifications(){return this.records.filter(e=>e.read_at===null)},currentPage(){return Number(this.meta.currentPage)},lastPage(){return this.totalUnreadNotifications>15?Math.ceil(this.totalUnreadNotifications/this.pageSize):1},inFirstPage(){return Number(this.meta.currentPage)===1},inLastPage(){return this.currentPage===this.lastPage}},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(e){this.$store.dispatch("notifications/get",{page:e})},openConversation(e){const{primary_actor_id:t,primary_actor_type:n,primary_actor:{id:s},notification_type:o}=e;jt(rl.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:o}),this.$store.dispatch("notifications/read",{id:e.id,primaryActorId:t,primaryActorType:n,unreadCount:this.meta.unreadCount}),this.$router.push({name:"inbox_conversation",params:{conversation_id:s}}),this.$emit("close")},onClickNextPage(){if(!this.inLastPage){const e=this.currentPage+1;this.onPageChange(e)}},onClickPreviousPage(){if(!this.inFirstPage){const e=this.currentPage-1;this.onPageChange(e)}},onClickFirstPage(){this.inFirstPage||this.onPageChange(1)},onClickLastPage(){if(!this.inLastPage){const e=this.lastPage;this.onPageChange(e)}},onMarkAllDoneClick(){jt(rl.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")},openAudioNotificationSettings(){this.$router.push({name:"profile_settings_index"}),this.closeNotificationPanel(),this.$nextTick(()=>{const e=document.getElementById("profile-settings-notifications");e&&e.scrollIntoView({behavior:"smooth",block:"start"},150)})},closeNotificationPanel(){this.$emit("close")}}},_Ze={class:"modal-mask"},vZe={class:"flex-col h-[90vh] w-[32.5rem] flex justify-between z-10 rounded-md shadow-md absolute bg-white dark:bg-slate-800 left-14 rtl:left-auto rtl:right-14 m-4"},bZe={class:"flex flex-row items-center justify-between w-full px-6 pt-5 pb-3 border-b border-solid border-slate-50 dark:border-slate-700"},EZe={class:"flex items-center"},TZe={class:"text-xl font-bold text-slate-800 dark:text-slate-100"},yZe={key:0,class:"px-2 py-1 ml-2 mr-2 font-semibold rounded-md text-slate-700 dark:text-slate-200 text-xxs bg-slate-50 dark:bg-slate-700"},AZe={class:"flex gap-2"},SZe={key:0,class:"flex items-center justify-between px-5 py-1"},IZe={class:"flex"},CZe={class:"font-semibold text-xxs text-slate-500 dark:text-slate-400"},NZe={class:"flex"},OZe={key:1};function xZe(e,t,n,s,o,a){const i=F("NextButton"),l=F("NotificationPanelList"),r=ct("on-clickaway");return m(),f("div",_Ze,[ie((m(),f("div",vZe,[c("div",bZe,[c("div",EZe,[c("span",TZe,v(e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.TITLE")),1),a.totalUnreadNotifications?(m(),f("span",yZe,v(a.totalUnreadNotifications),1)):x("",!0)]),c("div",AZe,[a.noUnreadNotificationAvailable?x("",!0):(m(),P(i,{key:0,faded:"",xs:"",icon:"i-lucide-list-check","is-loading":e.uiFlags.isUpdating,label:e.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),onClick:a.onMarkAllDoneClick},null,8,["is-loading","label","onClick"])),b(i,{faded:"",xs:"",slate:"",icon:"i-lucide-settings",onClick:a.openAudioNotificationSettings},null,8,["onClick"]),b(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.closeNotificationPanel},null,8,["onClick"])])]),b(l,{notifications:a.getUnreadNotifications,"is-loading":e.uiFlags.isFetching,"on-click-notification":a.openConversation,"in-last-page":a.inLastPage,onClose:a.closeNotificationPanel},null,8,["notifications","is-loading","on-click-notification","in-last-page","onClose"]),e.records.length!==0?(m(),f("div",SZe,[c("div",IZe,[b(i,{ghost:"",slate:"",icon:"i-lucide-chevrons-left",disabled:a.inFirstPage,onClick:a.onClickFirstPage},null,8,["disabled","onClick"]),b(i,{ghost:"",slate:"",icon:"i-lucide-chevron-left",class:"ltr:-ml-3 rtl:-mr-3",disabled:a.inFirstPage,onClick:a.onClickPreviousPage},null,8,["disabled","onClick"])]),c("span",CZe,v(a.currentPage)+" - "+v(a.lastPage),1),c("div",NZe,[b(i,{ghost:"",slate:"",icon:"i-lucide-chevron-right",class:"ltr:-mr-3 rtl:-ml-3",disabled:a.inLastPage,onClick:a.onClickNextPage},null,8,["disabled","onClick"]),b(i,{ghost:"",slate:"",icon:"i-lucide-chevrons-right",disabled:a.inLastPage,onClick:a.onClickLastPage},null,8,["disabled","onClick"])])])):(m(),f("div",OZe))])),[[r,a.closeNotificationPanel]])])}const wZe=Re(gZe,[["render",xZe]]),RZe={key:0,class:"mx-auto h-full pt-[clamp(3rem,15vh,12rem)]"},$Ze={class:"flex flex-col gap-4 max-w-md px-8 py-6 shadow-lg bg-n-solid-1 rounded-xl outline outline-1 outline-n-container"},MZe={class:"flex flex-col gap-4"},kZe={class:"flex items-center w-full gap-2"},LZe={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},DZe={class:"text-base font-medium text-n-slate-12"},PZe={class:"text-sm font-normal text-n-slate-11 mb-3"},BZe={key:0},FZe={__name:"UpgradePage",props:{bypassUpgradePage:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,s=wn(),o=Ot(),{t:a}=He(),{accountId:i,currentAccount:l}=Ls(),{isAdmin:r}=xo(),d=Ve("globalConfig/isOnChatwootCloud"),u=({allowed:E,consumed:y})=>y>E,p=w(()=>{const E=l.value;if(!E)return!1;const y=new Date(E.created_at);return FE(new Date,y)<=15}),h=w(()=>{const E=l.value;if(!(E!=null&&E.limits))return"";const{conversation:y,non_web_inboxes:A,agents:C}=E.limits;let O="";return u(y)?O=a("GENERAL_SETTINGS.LIMIT_MESSAGES.CONVERSATION"):u(A)?O=a("GENERAL_SETTINGS.LIMIT_MESSAGES.INBOXES"):u(C)&&(O=a("GENERAL_SETTINGS.LIMIT_MESSAGES.AGENTS")),O}),g=w(()=>{const E=l.value;if(!(E!=null&&E.limits))return!1;const{conversation:y,non_web_inboxes:A,agents:C}=E.limits;return u(y)||u(A)||u(C)}),_=w(()=>n.bypassUpgradePage||!d.value||p.value?!1:g.value),T=()=>{o.dispatch("accounts/limits")},S=()=>{s.push({name:"billing_settings_index",params:{accountId:i.value}})};return ut(()=>T()),t({shouldShowUpgradePage:_}),(E,y)=>_.value?(m(),f("div",RZe,[c("div",$Ze,[c("div",MZe,[c("div",kZe,[c("span",LZe,[b(Ht,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),c("span",DZe,v(E.$t("GENERAL_SETTINGS.UPGRADE")),1)]),c("div",null,[c("p",PZe,v(h.value),1),I(r)?x("",!0):(m(),f("p",BZe,v(I(a)("GENERAL_SETTINGS.LIMIT_MESSAGES.NON_ADMIN")),1))])]),I(r)?(m(),P(he,{key:0,label:E.$t("GENERAL_SETTINGS.OPEN_BILLING"),icon:"i-lucide-credit-card",onClick:y[0]||(y[0]=A=>S())},null,8,["label"])):x("",!0)])])):(m(),f(pe,{key:1},[],64))}},UZe=Du(()=>Oo(()=>import("./commandbar-DkXh_iTU.js"),__vite__mapDeps([39,2,17,14,15,6,5,3,4,18,9,19,8,20,11,1,7,23,24,25,26,10,27,28,29,30,40]))),GZe=Du(()=>Oo(()=>import("./Sidebar-BRH2z1k4.js"),__vite__mapDeps([41,14,2,15,18,9,19,17,6,3,4,8,20,11,23,1,5,7,25,26,24,10,27,28,29,30,42]))),VZe={components:{NextSidebar:Iqe,Sidebar:GZe,CommandBar:UZe,WootKeyShortcutModal:Pqe,AddAccountModal:cy,AccountSelector:Yqe,AddLabelModal:Wg,NotificationPanel:wZe,UpgradePage:FZe},setup(){const e=U(null),{uiSettings:t,updateUISettings:n}=Mn(),{accountId:s}=Ls();return{uiSettings:t,updateUISettings:n,accountId:s,upgradePageRef:e}},data(){return{showAccountModal:!1,showCreateAccountModal:!1,showAddLabelModal:!1,showShortcutModal:!1,isNotificationPanel:!1,displayLayoutType:"",hasBanner:""}},computed:{...gt({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),currentRoute(){return" "},showUpgradePage(){var e;return(e=this.upgradePageRef)==null?void 0:e.shouldShowUpgradePage},bypassUpgradePage(){return["billing_settings_index","settings_inbox_list","agent_list"].includes(this.$route.name)},isSidebarOpen(){const{show_secondary_sidebar:e}=this.uiSettings;return e},previouslyUsedDisplayType(){const{previously_used_conversation_display_type:e}=this.uiSettings;return e},previouslyUsedSidebarView(){const{previously_used_sidebar_view:e}=this.uiSettings;return e},showNextSidebar(){return this.isFeatureEnabledonAccount(this.accountId,xt.CHATWOOT_V4)}},watch:{displayLayoutType(){const{LAYOUT_TYPES:e}=$t;this.updateUISettings({conversation_display_type:this.displayLayoutType===e.EXPANDED?e.EXPANDED:this.previouslyUsedDisplayType,show_secondary_sidebar:this.displayLayoutType===e.EXPANDED?!1:this.previouslyUsedSidebarView})}},mounted(){this.handleResize(),this.$nextTick(this.checkBanner),window.addEventListener("resize",this.handleResize),window.addEventListener("resize",this.checkBanner),yt.on(sn.TOGGLE_SIDEMENU,this.toggleSidebar)},unmounted(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("resize",this.checkBanner),yt.off(sn.TOGGLE_SIDEMENU,this.toggleSidebar)},methods:{checkBanner(){this.hasBanner=document.getElementsByClassName("woot-banner").length>0},handleResize(){const{SMALL_SCREEN_BREAKPOINT:e,LAYOUT_TYPES:t}=$t;let n=!1;const s=150;n||(n=!0,setTimeout(()=>{n=!1,window.innerWidth<=e?this.displayLayoutType=t.EXPANDED:this.displayLayoutType=t.CONDENSED},s))},toggleSidebar(){this.updateUISettings({show_secondary_sidebar:!this.isSidebarOpen,previously_used_sidebar_view:!this.isSidebarOpen})},openCreateAccountModal(){this.showAccountModal=!1,this.showCreateAccountModal=!0},closeCreateAccountModal(){this.showCreateAccountModal=!1},toggleAccountModal(){this.showAccountModal=!this.showAccountModal},toggleKeyShortcutModal(){this.showShortcutModal=!0},closeKeyShortcutModal(){this.showShortcutModal=!1},showAddLabelPopup(){this.showAddLabelModal=!0},hideAddLabelPopup(){this.showAddLabelModal=!1},openNotificationPanel(){this.isNotificationPanel=!0},closeNotificationPanel(){this.isNotificationPanel=!1}}},HZe={class:"flex flex-wrap app-wrapper dark:text-slate-300"},KZe={class:"flex flex-1 h-full min-h-0 px-0 overflow-hidden"};function zZe(e,t,n,s,o,a){const i=F("NextSidebar"),l=F("Sidebar"),r=F("UpgradePage"),d=F("router-view"),u=F("CommandBar"),p=F("NotificationPanel"),h=F("AddLabelModal"),g=F("woot-modal"),_=F("AccountSelector"),T=F("AddAccountModal"),S=F("WootKeyShortcutModal");return m(),f("div",HZe,[a.showNextSidebar?(m(),P(i,{key:0,onToggleAccountModal:a.toggleAccountModal,onOpenKeyShortcutModal:a.toggleKeyShortcutModal,onCloseKeyShortcutModal:a.closeKeyShortcutModal,onShowCreateAccountModal:a.openCreateAccountModal},null,8,["onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowCreateAccountModal"])):(m(),P(l,{key:1,route:a.currentRoute,"has-banner":o.hasBanner,"show-secondary-sidebar":a.isSidebarOpen,onOpenNotificationPanel:a.openNotificationPanel,onToggleAccountModal:a.toggleAccountModal,onOpenKeyShortcutModal:a.toggleKeyShortcutModal,onCloseKeyShortcutModal:a.closeKeyShortcutModal,onShowAddLabelPopup:a.showAddLabelPopup},null,8,["route","has-banner","show-secondary-sidebar","onOpenNotificationPanel","onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowAddLabelPopup"])),c("main",KZe,[ie(b(r,{ref:"upgradePageRef","bypass-upgrade-page":a.bypassUpgradePage},null,8,["bypass-upgrade-page"]),[[ln,a.showUpgradePage]]),a.showUpgradePage?x("",!0):(m(),f(pe,{key:0},[b(d),b(u),o.isNotificationPanel?(m(),P(p,{key:0,onClose:a.closeNotificationPanel},null,8,["onClose"])):x("",!0),b(g,{show:o.showAddLabelModal,"onUpdate:show":t[0]||(t[0]=E=>o.showAddLabelModal=E),"on-close":a.hideAddLabelPopup},{default:j(()=>[b(h,{onClose:a.hideAddLabelPopup},null,8,["onClose"])]),_:1},8,["show","on-close"])],64)),b(_,{"show-account-modal":o.showAccountModal,onCloseAccountModal:a.toggleAccountModal,onShowCreateAccountModal:a.openCreateAccountModal},null,8,["show-account-modal","onCloseAccountModal","onShowCreateAccountModal"]),b(T,{show:o.showCreateAccountModal,onCloseAccountCreateModal:a.closeCreateAccountModal},null,8,["show","onCloseAccountCreateModal"]),b(S,{show:o.showShortcutModal,"onUpdate:show":t[1]||(t[1]=E=>o.showShortcutModal=E),onClose:a.closeKeyShortcutModal,onClickaway:a.closeKeyShortcutModal},null,8,["show","onClose","onClickaway"])])])}const WZe=Re(VZe,[["render",zZe]]),jZe={class:"items-center bg-slate-50 flex justify-center h-full w-full"},YZe={__name:"Index",setup(e){const t=()=>{window.$chatwoot&&window.$chatwoot.toggleBubbleVisibility("show")},n=()=>{window.addEventListener("chatwoot:on-message",()=>{t()})};return ut(()=>{t(),n()}),(s,o)=>(m(),f("div",jZe,[b(vl,{title:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.TITLE"),message:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.MESSAGE")},null,8,["title","message"])]))}},XZe={__name:"CustomContextMenu",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},show:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,s=U(null),o=i=>{s.value&&!s.value.contains(i.target)&&n("close")},a=i=>{i.key==="Escape"&&n("close")};return ut(()=>{document.addEventListener("mousedown",o),document.addEventListener("keydown",a)}),ia(()=>{document.removeEventListener("mousedown",o),document.removeEventListener("keydown",a)}),(i,l)=>(m(),P(Si,{to:"body"},[e.show?(m(),f("div",{key:0,ref_key:"menuRef",ref:s,class:"fixed z-[9999]",style:At({top:`${e.y}px`,left:`${e.x}px`})},[et(i.$slots,"default",{},void 0,!0)],4)):x("",!0)]))}},qZe=Re(XZe,[["__scopeId","data-v-1df9184c"]]),ZZe=["draggable"],QZe={class:"flex items-center justify-between mb-3"},JZe={class:"flex items-center gap-2"},eQe={class:"flex items-center gap-2"},tQe={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},nQe={class:"flex items-center gap-2"},sQe={class:"flex items-center gap-2"},aQe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-3 h-3"},oQe={class:"relative"},iQe={class:"flex items-center gap-2"},lQe={class:"flex items-center gap-2"},rQe={class:"flex items-center gap-2"},cQe={class:"flex items-center gap-2"},dQe={key:0,class:"text-xs text-slate-600 dark:text-slate-400 mb-3"},uQe={key:1,class:"flex flex-wrap gap-1 mb-3"},mQe={key:2,class:"flex items-center justify-between mb-3"},pQe={class:"flex items-center gap-2"},hQe={key:1,class:"text-xs font-medium text-slate-700 dark:text-slate-300"},fQe={key:0,class:"flex items-center gap-1"},gQe={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},_Qe={class:"flex items-center gap-2 flex-1"},vQe={key:0,class:"flex items-center justify-between w-full"},bQe={class:"text-xs text-slate-700 dark:text-slate-300 truncate my-0"},EQe={key:0,class:"flex items-center justify-center h-4 min-w-[1rem] px-1 text-[0.625rem] font-medium bg-ruby-500 text-white rounded-full flex-shrink-0"},TQe={key:1,class:"text-xs text-slate-500 flex items-center"},yQe={key:2,class:"text-xs text-slate-500 flex items-center"},AQe={key:4,class:"flex items-center gap-2 mb-3"},SQe={class:"flex-1"},IQe={class:"h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},CQe={class:"text-xs text-slate-500"},NQe={class:"flex items-center justify-between"},OQe={key:0,class:"flex items-center gap-2"},xQe={class:"flex items-center gap-2"},wQe={key:1,class:"text-xs text-slate-600 dark:text-slate-400"},RQe={key:2,class:"text-xs text-slate-400 dark:text-slate-600"},$Qe={key:1,class:"flex items-center gap-2 text-xs text-slate-500"},MQe={key:0,class:"flex items-center gap-1"},kQe={key:1,class:"flex items-center gap-1"},LQe={key:2,class:"flex items-center gap-1"},DQe={key:3,class:"flex items-center gap-1"},PQe={class:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 w-[180px]"},BQe={class:"flex items-center gap-2"},FQe={class:"flex items-center gap-2"},UQe={class:"settings-modal"},GQe={class:"settings-header"},VQe={class:"text-lg font-medium"},HQe={class:"settings-content"},KQe={class:"p-6"},zQe={class:"text-sm text-slate-600 dark:text-slate-400 mb-6"},WQe={class:"flex justify-end space-x-2"},jQe={class:"p-6"},YQe={class:"space-y-4"},XQe={class:"flex gap-2"},qQe={key:0,class:"space-y-2"},ZQe={class:"flex justify-end gap-2"},QQe={class:"settings-modal"},JQe={class:"settings-header"},eJe={class:"text-lg font-medium"},tJe={class:"settings-content"},nJe={class:"text-sm text-slate-600 dark:text-slate-400 mb-4"},sJe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},aJe={class:"space-y-4"},oJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},iJe={class:"ml-2 text-sm"},lJe={class:"font-medium"},rJe={class:"inline-block ml-2 px-2.5 py-1 text-[10px] font-semibold bg-indigo-100 text-indigo-700 dark:bg-indigo-800 dark:text-indigo-100 rounded-md border border-indigo-200 dark:border-indigo-700 shadow-sm"},cJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},dJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},uJe={class:"ml-2 text-sm"},mJe={class:"font-medium"},pJe={class:"block text-xs text-slate-500"},hJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},fJe={class:"ml-2 text-sm"},gJe={class:"font-medium"},_Je={class:"block text-xs text-slate-500"},vJe={class:"space-y-4"},bJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},EJe={class:"ml-2 text-sm"},TJe={class:"font-medium"},yJe={class:"block text-xs text-slate-500"},AJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},SJe={class:"ml-2 text-sm"},IJe={class:"font-medium"},CJe={class:"block text-xs text-slate-500"},NJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},OJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},xJe={class:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700"},wJe={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},RJe={class:"flex justify-between mt-6"},$Je={__name:"KanbanItem",props:{item:{type:Object,required:!0},isDragging:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},kanbanItems:{type:Array,default:()=>[]}},emits:["click","edit","delete","dragstart","conversationUpdated"],setup(e,{emit:t}){const n=e,s=to("labelsMap",{}),o=t,a=wn(),{t:i}=He(),{isStacklab:l}=Ra(),r=w(()=>{var ge;return((ge=n.item.item_details)==null?void 0:ge.conversation)||null}),d=w(()=>{var Ee,$e;const ge=(($e=(Ee=n.item.item_details)==null?void 0:Ee.priority)==null?void 0:$e.toLowerCase())||"none";return ge==="none"?null:{high:{label:i("KANBAN.PRIORITY_LABELS.HIGH"),class:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50"},medium:{label:i("KANBAN.PRIORITY_LABELS.MEDIUM"),class:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50"},low:{label:i("KANBAN.PRIORITY_LABELS.LOW"),class:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50"},urgent:{label:i("KANBAN.PRIORITY_LABELS.URGENT"),class:"bg-red-50 dark:bg-red-800 text-red-800 dark:text-red-50"}}[ge]||null});w(()=>{const ge=n.item.created_at||n.item.createdAt;if(!ge)return"";try{const J=new Date(ge);return i("KANBAN.CREATED_AT_FORMAT",{date:new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(J)})}catch(J){return console.error("Erro ao formatar data:",J),""}});const u=w(()=>{var Ee,$e;const ge=(Ee=n.item.item_details)==null?void 0:Ee.value,J=($e=n.item.item_details)==null?void 0:$e.currency;if(!ge&&ge!==0)return null;try{return new Intl.NumberFormat((J==null?void 0:J.locale)||"pt-BR",{style:"currency",currency:(J==null?void 0:J.code)||"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(ge)}catch{return ge.toString()}}),p=w(()=>{var $e,se,le;const ge=($e=n.item.item_details)==null?void 0:$e.deadline_at,J=(se=n.item.item_details)==null?void 0:se.scheduled_at,Ee=(le=n.item.item_details)==null?void 0:le.scheduling_type;if(!ge&&!J)return null;try{const _e=J||ge;let Ie=_e;_e&&_e.length===10&&(Ie=`${_e}T12:00:00`);const Pe=new Date(Ie);return Number.isFinite(Pe.getTime())?new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",...Ee==="schedule"&&J?{timeStyle:"short"}:{}}).format(Pe):null}catch{return null}}),h=w(()=>{var J;return((J=n.item.item_details)==null?void 0:J.scheduling_type)==="schedule"?"calendar":"alarm"}),g=w(()=>{var J;const ge=((J=n.item.item_details)==null?void 0:J.title)||"";return ge.length>15?`${ge.substring(0,15)}...`:ge}),_=w(()=>{var se,le,_e,Ie;const ge=(le=(se=r.value)==null?void 0:se.contact)==null?void 0:le.name,J=(Ie=(_e=r.value)==null?void 0:_e.contact)==null?void 0:Ie.email,Ee=i("ITEM_CONVERSATION.NO_CONTACT"),$e=ge||J||Ee;return $e.length>25?`${$e.substring(0,25)}...`:$e}),T=()=>{console.log("[DEBUG KanbanItem] handleClick - Iniciando..."),console.log("[DEBUG KanbanItem] handleClick - Item clicado:",n.item),o("click",n.item)},S=ge=>{var J;ge.stopPropagation(),console.log("[DEBUG KanbanItem] Emitindo evento edit com item:",n.item),console.log("[DEBUG KanbanItem] Item priority:",(J=n.item.item_details)==null?void 0:J.priority),console.log("[DEBUG KanbanItem] Item details:",n.item.item_details),o("edit",n.item)},E=U(!1),y=U(null),A=ge=>{ge.stopPropagation(),y.value=n.item,E.value=!0},C=()=>{o("delete",y.value),E.value=!1,y.value=null},O=(ge,J)=>{ge.stopPropagation(),!(!J||!r.value)&&a.push({name:"inbox_conversation",params:{accountId:r.value.account_id,inboxId:r.value.inbox_id,conversation_id:J}})},N=U(!1),R=U({x:0,y:0}),k=(ge,J)=>{!J||!r.value||(ge.preventDefault(),N.value=!0,R.value={x:ge.clientX,y:ge.clientY})},L=U(!1),D=()=>{try{Zt(()=>{N.value=!1,L.value=!0})}catch(ge){console.error("Erro ao processar clique:",ge)}},$=()=>{var ge,J;if(N.value=!1,!!((J=(ge=r.value)==null?void 0:ge.contact)!=null&&J.id))try{a.push({name:"contact_profile",params:{accountId:r.value.account_id,contactId:r.value.contact.id},query:{page:1}})}catch{window.location.href=`/app/accounts/${r.value.account_id}/contacts/${r.value.contact.id}?page=1`}},M=ge=>{o("dragstart",ge)};lt(L,ge=>{console.log("Modal status alterado:",ge),ge||Zt(()=>{N.value=!1})});const K=U(!1),B=w(()=>{var J;const ge=((J=n.item.item_details)==null?void 0:J.description)||i("KANBAN.NO_DESCRIPTION");return ge.length<=75||K.value?ge:ge.substring(0,75)+"..."}),H=ge=>{ge.stopPropagation(),K.value=!K.value},G=w(()=>{var ge;return(ge=n.item.item_details)!=null&&ge.agent?{id:n.item.item_details.agent.id,name:n.item.item_details.agent.name,avatar_url:n.item.item_details.agent.avatar_url||""}:null}),V=U(!1);ut(()=>{document.addEventListener("click",()=>{V.value=!1});const J=JSON.parse(localStorage.getItem("kanban_items_visibility")||"{}")[n.item.id];if(J)try{Fe.value=J.showDescriptionField??!0,je.value=J.showLabelsField??!0,Qe.value=J.showPriorityField??!0,Ze.value=J.showValueField??!0,ft.value=J.showDeadlineField??!0,kt.value=J.showConversationField??!0,Q.value=J.showChecklistField??!0,oe.value=J.showAgentField??!0,de.value=J.showMetadataField??!0}catch(Ee){console.error("Erro ao carregar configuraes de visibilidade:",Ee)}Y(),yt.on("kanbanItemsCollapsedStateChanged",Y)}),ia(()=>{document.removeEventListener("click",()=>{V.value=!1}),yt.off("kanbanItemsCollapsedStateChanged",Y)});const Y=()=>{const ge=JSON.parse(localStorage.getItem("kanban_collapsed_items")||"{}");n.item.id in ge&&(Ce.value=ge[n.item.id])},ee=U(!1),X=U({status:"",reason:""}),z=()=>{var ge,J;X.value={status:((ge=n.item.item_details)==null?void 0:ge.status)||"",reason:((J=n.item.item_details)==null?void 0:J.reason)||""},ee.value=!0},W=async()=>{try{const ge={...n.item,item_details:{...n.item.item_details,status:X.value.status,reason:X.value.status==="lost"?X.value.reason:null}},{data:J}=await In.update(n.item.id,ge);J&&Object.assign(n.item,J),ee.value=!1,o("conversationUpdated")}catch(ge){console.error("Erro ao atualizar status:",ge)}},q=w(()=>{var J,Ee,$e;const ge=(J=n.item.item_details)==null?void 0:J.status;return ge?ge==="won"?(new Date((Ee=n.item.item_details)==null?void 0:Ee.updated_at).toLocaleDateString(),i("KANBAN.BULK_ACTIONS.ITEM_STATUS.WON")):ge==="lost"?(new Date(($e=n.item.item_details)==null?void 0:$e.updated_at).toLocaleDateString(),i("KANBAN.BULK_ACTIONS.ITEM_STATUS.LOST")):"Status":i("KANBAN.BULK_ACTIONS.ITEM_STATUS.OPEN")}),Z=w(()=>{var $e,se,le,_e,Ie;const ge=(($e=n.item.attachments)==null?void 0:$e.length)||0,J=((le=(se=n.item.item_details)==null?void 0:se.attachments)==null?void 0:le.length)||0,Ee=((Ie=(_e=n.item.item_details)==null?void 0:_e.notes)==null?void 0:Ie.reduce((Pe,Ne)=>{var ve;return Pe+(((ve=Ne.attachments)==null?void 0:ve.length)||0)},0))||0;return ge+J+Ee}),ne=w(()=>{var ge,J;return((J=(ge=n.item.item_details)==null?void 0:ge.notes)==null?void 0:J.length)||0}),ae=w(()=>{var ge,J;return((J=(ge=n.item.item_details)==null?void 0:ge.checklist)==null?void 0:J.length)||0}),ue=w(()=>{var ge,J,Ee;return((Ee=(J=(ge=n.item.item_details)==null?void 0:ge.checklist)==null?void 0:J.filter($e=>$e.completed))==null?void 0:Ee.length)||0}),te=w(()=>ae.value===0?0:ue.value/ae.value*100),ce=w(()=>{if(!n.item.stage_entered_at)return"";try{return Nc(new Date(n.item.stage_entered_at),{locale:Ai,addSuffix:!1}).replace(/^h cerca de /i,"").replace(/^h /i,"").replace(/cerca de /i,"").replace(/cerca/i,"")}catch{return""}}),fe=w(()=>{var ge,J;return((J=(ge=n.item.item_details)==null?void 0:ge.conversation)==null?void 0:J.label_list)||[]}),ke=(ge,J=.2)=>{try{if(!ge)return"#64748B";const Ee=ge.replace("#",""),$e=parseInt(Ee.substring(0,2),16),se=parseInt(Ee.substring(2,4),16),le=parseInt(Ee.substring(4,6),16),_e=Math.floor($e*(1-J)),Ie=Math.floor(se*(1-J)),Pe=Math.floor(le*(1-J));return`#${_e.toString(16).padStart(2,"0")}${Ie.toString(16).padStart(2,"0")}${Pe.toString(16).padStart(2,"0")}`}catch{return"#64748B"}},De=w(()=>{var ge,J,Ee;return((Ee=(J=(ge=n.item.item_details)==null?void 0:ge.conversation)==null?void 0:J.contact)==null?void 0:Ee.thumbnail)||""}),Fe=U(!0),je=U(!0),Qe=U(!0),Ze=U(!0),ft=U(!0),kt=U(!0),Q=U(!0),oe=U(!0),de=U(!0),Ce=U(!1),Ae=U(!1),Le=()=>{V.value=!1,Ae.value=!0},Me=()=>{Ce.value=!Ce.value,Ue(),V.value=!1},Ue=()=>{const ge=JSON.parse(localStorage.getItem("kanban_collapsed_items")||"{}");ge[n.item.id]=Ce.value,localStorage.setItem("kanban_collapsed_items",JSON.stringify(ge))},we=()=>{const ge={showDescriptionField:Fe.value,showLabelsField:je.value,showPriorityField:Qe.value,showValueField:Ze.value,showDeadlineField:ft.value,showConversationField:kt.value,showChecklistField:Q.value,showAgentField:oe.value,showMetadataField:de.value},J=JSON.parse(localStorage.getItem("kanban_items_visibility")||"{}");J[n.item.id]=ge,localStorage.setItem("kanban_items_visibility",JSON.stringify(J))};return lt([Fe,je,Qe,Ze,ft,kt,Q,oe,de],()=>{we()}),(ge,J)=>{var se,le,_e,Ie,Pe,Ne,ve;const Ee=F("fluent-icon"),$e=F("woot-button");return m(),f(pe,null,[c("div",{class:re(["flex flex-col p-4 bg-white dark:bg-slate-900 rounded-lg border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow cursor-pointer mt-3",{"opacity-50":e.isDragging}]),draggable:e.draggable,onDragstart:M,onClick:T},[c("div",QZe,[c("div",JZe,[De.value?(m(),P(yn,{key:0,src:De.value,name:g.value,size:24},null,8,["src","name"])):x("",!0),c("div",eQe,[c("h3",tQe,v(g.value),1)])]),c("div",nQe,[c("div",sQe,[c("button",{class:re(["px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 transition-colors",{"bg-slate-50 text-slate-700 dark:bg-slate-800 dark:text-slate-300":!((se=n.item.item_details)!=null&&se.status),"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300":((le=n.item.item_details)==null?void 0:le.status)==="won","bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-300":((_e=n.item.item_details)==null?void 0:_e.status)==="lost"}]),onClick:Ke(z,["stop"])},[(Ie=n.item.item_details)!=null&&Ie.status?(m(),f("svg",aQe,J[31]||(J[31]=[c("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):x("",!0),c("span",null,v(q.value),1)],2),c("div",oQe,[c("button",{class:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition-colors",onClick:J[0]||(J[0]=Ke(me=>V.value=!V.value,["stop"]))},[b(Ee,{icon:"more-vertical",size:"16"})]),V.value?(m(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 w-[180px] z-10",onClick:J[3]||(J[3]=Ke(()=>{},["stop"]))},[c("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200",onClick:J[1]||(J[1]=Ke(me=>S(me),["stop"]))},[c("span",iQe,[b(Ee,{icon:"edit",size:"16"}),be(" "+v(I(i)("KANBAN.ACTIONS.EDIT")),1)])]),I(l)===!0?(m(),f("button",{key:0,class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200",onClick:Ke(Le,["stop"])},[c("span",lQe,[b(Ee,{icon:"eye-show",size:"16"}),be(" "+v(I(i)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.TITLE")),1)])])):x("",!0),c("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200",onClick:Ke(Me,["stop"])},[c("span",rQe,[b(Ee,{icon:Ce.value?"arrow-expand":"arrow-outwards",size:"16"},null,8,["icon"]),be(" "+v(Ce.value?I(i)("KANBAN.CONTEXT_MENU.EXPAND"):I(i)("KANBAN.CONTEXT_MENU.COLLAPSE")),1)])]),c("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200",onClick:J[2]||(J[2]=Ke(me=>A(me),["stop"]))},[c("span",cQe,[b(Ee,{icon:"delete",size:"16"}),be(" "+v(I(i)("KANBAN.ACTIONS.DELETE")),1)])])])):x("",!0)])])])]),Fe.value?(m(),f("p",dQe,[be(v(B.value)+" ",1),(((Pe=n.item.item_details)==null?void 0:Pe.description)||"").length>75?(m(),f("span",{key:0,class:"text-xs font-medium text-woot-500 dark:text-woot-400 hover:underline cursor-pointer inline-block mt-1",onClick:H},v(K.value?I(i)("KANBAN.READ_LESS"):I(i)("KANBAN.READ_MORE")),1)):x("",!0)])):x("",!0),je.value&&!Ce.value&&fe.value.length>0?(m(),f("div",uQe,[(m(!0),f(pe,null,ye(fe.value,me=>(m(),f("span",{key:me,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:At({backgroundColor:I(s)[me]?`${I(s)[me]}20`:"#E2E8F0",color:ke(I(s)[me])})},v(me),5))),128))])):x("",!0),(Qe.value||Ze.value||ft.value)&&!Ce.value?(m(),f("div",mQe,[c("div",pQe,[Qe.value&&((Ne=n.item.item_details)!=null&&Ne.priority)&&n.item.item_details.priority!=="none"?(m(),f("span",{key:0,class:re(["px-2 py-1 text-xs font-medium rounded-full",d.value.class])},v(d.value.label),3)):x("",!0),Ze.value&&u.value?(m(),f("span",hQe,v(u.value),1)):x("",!0)]),ft.value&&p.value?(m(),f("div",fQe,[b(Ee,{icon:h.value,class:"text-slate-500 dark:text-slate-400",size:"14"},null,8,["icon"]),c("span",gQe,v(p.value),1)])):x("",!0)])):x("",!0),kt.value&&!Ce.value&&((ve=e.item.item_details)!=null&&ve.conversation_id)&&r.value?(m(),f("div",{key:3,class:"flex items-center gap-2 mb-3 p-2 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700 min-h-[1.5rem] cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick:J[4]||(J[4]=me=>{var Oe,Ge;return O(me,(Ge=(Oe=e.item.item_details)==null?void 0:Oe.conversation)==null?void 0:Ge.display_id)}),onContextmenu:J[5]||(J[5]=me=>k(me,e.item.item_details.conversation_id))},[c("div",_Qe,[b(Ee,{icon:"chat",class:"text-slate-500 dark:text-slate-400 flex-shrink-0",size:"16"}),r.value?(m(),f("div",vQe,[c("p",bQe,[be(" #"+v(r.value.display_id)+" - "+v(_.value)+" ",1),c("span",{class:re(["ml-2 text-xs px-2 py-0.5 rounded-full",{"bg-green-100 text-green-700":r.value.status===I(i)("KANBAN.ITEM_STATUS.OPEN"),"bg-yellow-100 text-yellow-700":r.value.status===I(i)("KANBAN.ITEM_STATUS.PENDING"),"bg-slate-100 text-slate-700":r.value.status===I(i)("KANBAN.ITEM_STATUS.RESOLVED")}])},v(r.value.status),3)]),r.value.unread_count>0?(m(),f("span",EQe,v(r.value.unread_count>9?"9+":r.value.unread_count),1)):x("",!0)])):ge.loadingConversation?(m(),f("div",TQe,v(I(i)("KANBAN.LOADING_CONVERSATION")),1)):(m(),f("div",yQe,v(I(i)("KANBAN.CONVERSATION_NOT_FOUND")),1))])],32)):x("",!0),Q.value&&!Ce.value&&ae.value>0?(m(),f("div",AQe,[c("div",SQe,[c("div",IQe,[c("div",{class:"h-full bg-woot-500 transition-all duration-300 ease-out",style:At({width:`${te.value}%`})},null,4)])]),c("span",CQe,v(ue.value)+"/"+v(ae.value),1)])):x("",!0),c("div",NQe,[oe.value&&!Ce.value?(m(),f("div",OQe,[c("div",xQe,[G.value?(m(),P(yn,{key:0,name:G.value.name,src:G.value.avatar_url,size:24},null,8,["name","src"])):x("",!0),G.value?(m(),f("span",wQe,v(G.value.name),1)):(m(),f("span",RQe,v(I(i)("KANBAN.NO_AGENT_ASSIGNED")),1))])])):x("",!0),de.value?(m(),f("div",$Qe,[Ce.value?(m(),f("div",MQe,[b(Ee,{icon:"arrow-outwards",size:"12"})])):x("",!0),ce.value?(m(),f("div",kQe,[b(Ee,{icon:"calendar-clock",size:"12"}),be(" "+v(ce.value),1)])):x("",!0),Z.value>0?(m(),f("div",LQe,[b(Ee,{icon:"attach",size:"12"}),be(" "+v(Z.value),1)])):x("",!0),ne.value>0?(m(),f("div",DQe,[b(Ee,{icon:"comment-add",size:"12"}),be(" "+v(ne.value),1)])):x("",!0)])):x("",!0)])],42,ZZe),N.value?(m(),P(qZe,{key:0,x:R.value.x,y:R.value.y,show:N.value,onClose:J[8]||(J[8]=me=>N.value=!1)},{default:j(()=>[c("div",PQe,[I(l)===!0?(m(),f("button",{key:0,class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200",onClick:Ke(D,["stop"]),onMousedown:J[6]||(J[6]=Ke(()=>{},["stop"])),onMouseup:J[7]||(J[7]=Ke(()=>{},["stop"]))},[c("span",BQe,[b(Ee,{icon:"chat",size:"16"}),be(" "+v(I(i)("KANBAN.CONTEXT_MENU.QUICK_MESSAGE")),1)])],32)):x("",!0),c("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200",onClick:$},[c("span",FQe,[b(Ee,{icon:"person",size:"16"}),be(" "+v(I(i)("KANBAN.CONTEXT_MENU.VIEW_CONTACT")),1)])])])]),_:1},8,["x","y","show"])):x("",!0),b(Wt,{show:L.value,"onUpdate:show":J[11]||(J[11]=me=>L.value=me),"on-close":()=>L.value=!1,"show-close-button":!0,size:"medium","close-on-backdrop-click":!1,class:re({"z-50":L.value})},{default:j(()=>{var me,Oe,Ge;return[c("div",UQe,[c("header",GQe,[c("h3",VQe,v(I(i)("KANBAN.SEND_MESSAGE.TITLE")),1)]),c("div",HQe,[b(A2,{"conversation-id":(Oe=(me=e.item.item_details)==null?void 0:me.conversation)==null?void 0:Oe.display_id,"current-stage":e.item.funnel_stage||"",contact:(Ge=r.value)==null?void 0:Ge.contact,conversation:r.value,item:e.item,onClose:J[9]||(J[9]=()=>{L.value=!1,N.value.value=!1}),onSend:J[10]||(J[10]=Se=>L.value=!1)},null,8,["conversation-id","current-stage","contact","conversation","item"])])])]}),_:1},8,["show","on-close","class"]),b(Wt,{show:E.value,"onUpdate:show":J[13]||(J[13]=me=>E.value=me),"on-close":()=>{E.value=!1,y.value=null}},{default:j(()=>{var me;return[c("div",KQe,[J[34]||(J[34]=c("h3",{class:"text-lg font-medium mb-4"},"Confirmar excluso",-1)),c("p",zQe,' Tem certeza que deseja excluir o item "'+v((me=y.value)==null?void 0:me.title)+'"? ',1),c("div",WQe,[b($e,{variant:"clear","color-scheme":"secondary",onClick:J[12]||(J[12]=Oe=>E.value=!1)},{default:j(()=>J[32]||(J[32]=[be(" Cancelar ")])),_:1}),b($e,{variant:"solid","color-scheme":"alert",onClick:C},{default:j(()=>J[33]||(J[33]=[be(" Excluir ")])),_:1})])])]}),_:1},8,["show","on-close"]),b(Wt,{show:ee.value,"onUpdate:show":J[18]||(J[18]=me=>ee.value=me),"on-close":()=>ee.value=!1},{default:j(()=>[c("div",jQe,[J[40]||(J[40]=c("h3",{class:"text-lg font-medium mb-4"},"Atualizar Status",-1)),c("div",YQe,[c("div",XQe,[c("button",{class:re(["flex-1 p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800",{"border-green-500 bg-green-50":X.value.status==="won"}]),onClick:J[14]||(J[14]=me=>X.value.status="won")},J[35]||(J[35]=[c("span",{class:"text-sm font-medium"},"Ganho",-1)]),2),c("button",{class:re(["flex-1 p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800",{"border-red-500 bg-red-50":X.value.status==="lost"}]),onClick:J[15]||(J[15]=me=>X.value.status="lost")},J[36]||(J[36]=[c("span",{class:"text-sm font-medium"},"Perdido",-1)]),2)]),X.value.status==="lost"?(m(),f("div",qQe,[J[37]||(J[37]=c("label",{class:"text-sm font-medium"},"Motivo",-1)),ie(c("textarea",{"onUpdate:modelValue":J[16]||(J[16]=me=>X.value.reason=me),class:"w-full p-2 border rounded-lg",rows:"3"},null,512),[[at,X.value.reason]])])):x("",!0),c("div",ZQe,[b($e,{variant:"clear",onClick:J[17]||(J[17]=me=>ee.value=!1)},{default:j(()=>J[38]||(J[38]=[be(" Cancelar ")])),_:1}),b($e,{variant:"primary",onClick:W},{default:j(()=>J[39]||(J[39]=[be(" Salvar ")])),_:1})])])])]),_:1},8,["show","on-close"]),b(Wt,{show:Ae.value,"onUpdate:show":J[30]||(J[30]=me=>Ae.value=me),"on-close":()=>Ae.value=!1,"show-close-button":!0,size:"medium"},{default:j(()=>[c("div",QQe,[c("header",JQe,[c("h3",eJe,v(I(i)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.TITLE")),1)]),c("div",tJe,[c("p",nJe,v(I(i)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.DESCRIPTION")),1),c("div",sJe,[c("div",aJe,[c("label",oJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[19]||(J[19]=me=>Fe.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,Fe.value]]),c("span",iJe,[c("span",lJe,v(I(i)("KANBAN.FORM.DESCRIPTION.LABEL")),1),c("span",rJe,v(I(i)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.VISIBLE_WHEN_COLLAPSED")),1),J[41]||(J[41]=c("span",{class:"block text-xs text-slate-500"},"Detalhes do card",-1))])]),c("label",cJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[20]||(J[20]=me=>je.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,je.value]]),J[42]||(J[42]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Etiquetas"),c("span",{class:"block text-xs text-slate-500"},"Tags da conversa")],-1))]),c("label",dJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[21]||(J[21]=me=>Qe.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,Qe.value]]),c("span",uJe,[c("span",mJe,v(I(i)("KANBAN.FORM.PRIORITY.LABEL")),1),c("span",pJe,v(I(i)("KANBAN.PRIORITY_LABELS.HIGH"))+", "+v(I(i)("KANBAN.PRIORITY_LABELS.MEDIUM"))+", "+v(I(i)("KANBAN.PRIORITY_LABELS.LOW")),1)])]),c("label",hJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[22]||(J[22]=me=>Ze.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,Ze.value]]),c("span",fJe,[c("span",gJe,v(I(i)("KANBAN.FORM.VALUE.LABEL")),1),c("span",_Je,v(I(i)("KANBAN.FORM.VALUE.LABEL")),1)])])]),c("div",vJe,[c("label",bJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[23]||(J[23]=me=>ft.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,ft.value]]),c("span",EJe,[c("span",TJe,v(I(i)("KANBAN.DEADLINE")),1),c("span",yJe,v(I(i)("KANBAN.DEADLINE_DESCRIPTION")),1)])]),c("label",AJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[24]||(J[24]=me=>kt.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,kt.value]]),c("span",SJe,[c("span",IJe,v(I(i)("KANBAN.ITEM_CONVERSATION.TITLE")),1),c("span",CJe,v(I(i)("KANBAN.ITEM_CONVERSATION.DESCRIPTION")),1)])]),c("label",NJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[25]||(J[25]=me=>Q.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,Q.value]]),J[43]||(J[43]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Checklist"),c("span",{class:"block text-xs text-slate-500"},"Progresso das tarefas")],-1))]),c("label",OJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[26]||(J[26]=me=>oe.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,oe.value]]),J[44]||(J[44]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Agente"),c("span",{class:"block text-xs text-slate-500"},"Responsvel atribudo")],-1))])])]),c("div",xJe,[c("label",wJe,[ie(c("input",{type:"checkbox","onUpdate:modelValue":J[27]||(J[27]=me=>de.value=me),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Kt,de.value]]),J[45]||(J[45]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Metadados"),c("span",{class:"block text-xs text-slate-500"},"Tempo na etapa, anexos e notas")],-1))])]),c("div",RJe,[b($e,{variant:"clear",onClick:J[28]||(J[28]=()=>{Fe.value=!0,je.value=!0,Qe.value=!0,Ze.value=!0,ft.value=!0,kt.value=!0,Q.value=!0,oe.value=!0,de.value=!0})},{default:j(()=>J[46]||(J[46]=[be(" Restaurar padro ")])),_:1}),b($e,{variant:"primary",onClick:J[29]||(J[29]=me=>Ae.value=!1)},{default:j(()=>J[47]||(J[47]=[be(" Fechar ")])),_:1})])])])]),_:1},8,["show","on-close"])],64)}}},MJe=Re($Je,[["__scopeId","data-v-804f65c3"]]),kJe={class:"p-4"},LJe={class:"mb-3 flex justify-between items-center"},DJe={class:"flex items-center gap-2"},PJe={class:"text-lg font-medium"},BJe={key:0,class:"flex gap-1"},FJe={class:"results-tag"},UJe={class:"stage-name"},GJe={class:"count-badge"},VJe={class:"filter-sections grid grid-cols-1 md:grid-cols-2 gap-4"},HJe={class:"space-y-2 border-r md:border-r-slate-200 md:dark:border-r-slate-700 md:pr-4"},KJe={class:"filter-group"},zJe={class:"text-sm font-medium mb-1 block"},WJe={class:"flex flex-wrap gap-1"},jJe=["onClick"],YJe={class:"filter-group"},XJe={class:"text-sm font-medium mb-1 block"},qJe={class:"flex gap-2"},ZJe={class:"filter-group"},QJe={class:"text-sm font-medium mb-1 block"},JJe={class:"relative"},eet={value:null},tet={value:-1},net=["value"],set={class:"filter-group"},aet={class:"text-sm font-medium mb-1 block"},oet={class:"flex gap-2"},iet={class:"space-y-3"},ret={class:"space-y-1"},cet={class:"flex gap-1"},det={class:"space-y-1"},uet={key:0,class:"text-xs text-slate-500 dark:text-slate-400 p-2 text-center"},met={key:1,class:"max-h-48 overflow-y-auto space-y-1 pr-1"},pet={class:"flex-1 min-w-0 mr-2"},het=["title"],fet=["title"],get={class:"flex items-center gap-1 flex-shrink-0"},_et={class:"flex justify-end space-x-2 pt-3 mt-3 border-t border-slate-200 dark:border-slate-700"},Uh="kanban_filter_presets",vet={__name:"KanbanFilter",props:{show:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},filteredResults:{type:Object,default:()=>({total:0,stages:{}})},currentFunnel:{type:Object,default:null},agents:{type:Array,default:()=>[]},size:{type:String,default:"medium"},initialFilters:{type:Object,default:null}},emits:["apply","close"],setup(e,{emit:t}){const n=e,{t:s}=He(),o=hn(),a=t,i=U({priority:[],value:{min:null,max:null},agent_id:null,date:{start:null,end:null}}),l=U({}),r=U(""),d=U(""),u=R=>{if(!R)return"";for(const k in l.value){const L=l.value[k],D=JSON.parse(JSON.stringify(R));if(L.priority=L.priority||[],L.value=L.value||{},L.date=L.date||{},D.priority=D.priority||[],D.value=D.value||{},D.date=D.date||{},JSON.stringify(L)===JSON.stringify(D))return k}return""},p=()=>{const R=localStorage.getItem(Uh);if(R)try{l.value=JSON.parse(R)}catch(k){console.error("Error loading filter presets:",k),l.value={}}};lt(()=>[n.show,n.initialFilters],([R,k])=>{R&&(k?(i.value=JSON.parse(JSON.stringify(k)),i.value.agent_id!==null&&i.value.agent_id!==void 0&&(i.value.agent_id=Number(i.value.agent_id))):i.value={priority:[],value:{min:null,max:null},agent_id:null,date:{start:null,end:null}},d.value=u(i.value))},{immediate:!0,deep:!0}),lt(()=>i.value.agent_id,R=>{console.log("[DEBUG] agent_id alterado para:",R,"tipo:",typeof R),R!=null&&(i.value.agent_id=Number(R),console.log("[DEBUG] agent_id convertido para nmero:",i.value.agent_id,"tipo:",typeof i.value.agent_id))}),ut(()=>{p(),o.getters["agents/getAgents"].length===0&&o.dispatch("agents/get")});const h=w(()=>[{label:"Alta",value:"high",colors:{border:i.value.priority.includes("high")?"border-ruby-500 dark:border-ruby-400":"border-slate-300 dark:border-slate-600",text:i.value.priority.includes("high")?"text-ruby-700 dark:text-ruby-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-ruby-50 dark:bg-ruby-800 border-ruby-500 dark:border-ruby-400"}},{label:"Mdia",value:"medium",colors:{border:i.value.priority.includes("medium")?"border-yellow-500 dark:border-yellow-400":"border-slate-300 dark:border-slate-600",text:i.value.priority.includes("medium")?"text-yellow-700 dark:text-yellow-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-yellow-50 dark:bg-yellow-800 border-yellow-500 dark:border-yellow-400"}},{label:"Baixa",value:"low",colors:{border:i.value.priority.includes("low")?"border-green-500 dark:border-green-400":"border-slate-300 dark:border-slate-600",text:i.value.priority.includes("low")?"text-green-700 dark:text-green-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-green-50 dark:bg-green-800 border-green-500 dark:border-green-400"}},{label:"Urgente",value:"urgent",colors:{border:i.value.priority.includes("urgent")?"border-ruby-500 dark:border-ruby-400":"border-slate-300 dark:border-slate-600",text:i.value.priority.includes("urgent")?"text-ruby-700 dark:text-ruby-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-ruby-50 dark:bg-ruby-800 border-ruby-500 dark:border-ruby-400"}}]);U(!1);const g=w(()=>o.getters["agents/getAgents"]||[]),_=R=>{if(!R)return"";const k=g.value.find(L=>L.id===R);return k?k.name:`ID: ${R}`},T=R=>{var K;if(!R)return"";const k=[];(K=R.priority)!=null&&K.length&&k.push(`Prioridade: ${R.priority.join(", ")}`);const{min:L,max:D}=R.value||{};L!=null&&D!==void 0&&D!==null?k.push(`Valor: ${L}-${D}`):L!=null?k.push(`Valor: >= ${L}`):D!=null&&k.push(`Valor: <= ${D}`),R.agent_id&&k.push(`Agente: ${_(R.agent_id)}`);const{start:$,end:M}=R.date||{};if($&&M)try{k.push(`Data: ${Ln(new Date($),"dd/MM")} - ${Ln(new Date(M),"dd/MM")}`)}catch{}else if($)try{k.push(`Data: >= ${Ln(new Date($),"dd/MM/yy")}`)}catch{}else if(M)try{k.push(`Data: <= ${Ln(new Date(M),"dd/MM/yy")}`)}catch{}return k.join(". ")||"Nenhum filtro ativo"},S=R=>{var L;if(!((L=n.currentFunnel)!=null&&L.stages))return"#64748B";const k=Object.values(n.currentFunnel.stages).find(D=>D.name===R);if(!k){const D=Object.values(n.currentFunnel.stages).find($=>$.id===R);return(D==null?void 0:D.color)||"#64748B"}return k.color||"#64748B"},E=w(()=>!!(i.value.priority.length>0||i.value.value.min||i.value.value.max||i.value.agent_id||i.value.date.start||i.value.date.end)&&n.filteredResults.total>0),y=()=>{console.log("[DEBUG] Aplicando filtro, agent_id original:",i.value.agent_id,"tipo:",typeof i.value.agent_id);const R=JSON.parse(JSON.stringify(i.value));R.agent_id!==null&&R.agent_id!==void 0&&(R.agent_id=Number(R.agent_id),console.log("[DEBUG] agent_id convertido antes de emitir:",R.agent_id,"tipo:",typeof R.agent_id)),a("apply",R),a("close")},A=()=>{const R={priority:[],value:{min:null,max:null},agent_id:null,date:{start:null,end:null}};i.value=JSON.parse(JSON.stringify(R)),d.value="",a("apply",JSON.parse(JSON.stringify(R)))},C=()=>{const R=r.value.trim();if(!R){alert("Por favor, insira um nome para a predefinio.");return}if(l.value[R]&&!confirm(`J existe uma predefinio com o nome "${R}". Deseja sobrescrev-la?`))return;const k=JSON.parse(JSON.stringify(i.value));k.agent_id!==null&&k.agent_id!==void 0&&(k.agent_id=Number(k.agent_id)),l.value[R]=k,localStorage.setItem(Uh,JSON.stringify(l.value)),r.value="",d.value=R},O=R=>{l.value[R]?(i.value=JSON.parse(JSON.stringify(l.value[R])),d.value=R):console.warn(`Preset "${R}" not found.`)},N=R=>{if(l.value[R]){if(confirm(`Tem certeza que deseja deletar a predefinio "${R}"?`)){const k=d.value===R;delete l.value[R],localStorage.setItem(Uh,JSON.stringify(l.value)),k&&(d.value="")}}else console.warn(`Preset "${R}" not found for deletion.`)};return(R,k)=>{const L=F("fluent-icon"),D=F("woot-button"),$=F("woot-input");return m(),P(Si,{to:"body"},[e.show?(m(),P(Wt,{key:0,show:e.show,size:n.size,"show-close-button":!1,onClose:k[7]||(k[7]=M=>R.$emit("close"))},{default:j(()=>[c("div",kJe,[c("header",LJe,[c("div",DJe,[c("h3",PJe,v(I(s)("KANBAN.FILTER_ITEMS")),1),E.value&&e.filteredResults.total>0?(m(),f("div",BJe,[c("div",FJe,v(e.filteredResults.total)+" "+v(I(s)("KANBAN.FILTER.RESULTS")),1),(m(!0),f(pe,null,ye(e.filteredResults.stages,(M,K)=>(m(),f("div",{key:K,class:"results-tag",style:At({backgroundColor:S(K)})},[c("span",UJe,v(K),1),c("span",GJe,v(M),1)],4))),128))])):x("",!0)]),b(D,{variant:"clear",size:"small","color-scheme":"secondary",onClick:k[0]||(k[0]=M=>R.$emit("close"))},{default:j(()=>[b(L,{icon:"dismiss",size:"16"})]),_:1})]),c("div",VJe,[c("div",HJe,[c("div",KJe,[c("label",zJe,v(I(s)("KANBAN.FORM.PRIORITY.LABEL")),1),c("div",WJe,[(m(!0),f(pe,null,ye(h.value,M=>(m(),f("button",{key:M.value,class:re(["border px-3 py-1 text-sm font-medium rounded-lg transition-colors",i.value.priority.includes(M.value)?M.colors.selected:[M.colors.border,M.colors.hover],M.colors.text]),onClick:K=>i.value.priority=i.value.priority.includes(M.value)?i.value.priority.filter(B=>B!==M.value):[...i.value.priority,M.value]},v(M.label),11,jJe))),128))])]),c("div",YJe,[c("label",XJe,v(I(s)("KANBAN.VALUE.LABEL")),1),c("div",qJe,[b($,{modelValue:i.value.value.min,"onUpdate:modelValue":k[1]||(k[1]=M=>i.value.value.min=M),type:"number",placeholder:I(s)("KANBAN.VALUE.MIN"),class:"flex-1"},null,8,["modelValue","placeholder"]),b($,{modelValue:i.value.value.max,"onUpdate:modelValue":k[2]||(k[2]=M=>i.value.value.max=M),type:"number",placeholder:I(s)("KANBAN.VALUE.MAX"),class:"flex-1"},null,8,["modelValue","placeholder"])])]),c("div",ZJe,[c("label",QJe,v(I(s)("KANBAN.AGENT.LABEL")),1),c("div",JJe,[ie(c("select",{"onUpdate:modelValue":k[3]||(k[3]=M=>i.value.agent_id=M),class:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-2"},[c("option",eet,v(I(s)("KANBAN.FILTER.AGENT.ALL")),1),c("option",tet,v(I(s)("KANBAN.FILTER.AGENT.NONE")||"No atribudo"),1),(m(!0),f(pe,null,ye(g.value,M=>(m(),f("option",{key:M.id,value:M.id},v(M.name),9,net))),128))],512),[[Mt,i.value.agent_id]])])]),c("div",set,[c("label",aet,v(I(s)("KANBAN.FILTER.DATE.LABEL")),1),c("div",oet,[b($,{modelValue:i.value.date.start,"onUpdate:modelValue":k[4]||(k[4]=M=>i.value.date.start=M),type:"date",placeholder:I(s)("KANBAN.FILTER.DATE.START"),class:"flex-1"},null,8,["modelValue","placeholder"]),b($,{modelValue:i.value.date.end,"onUpdate:modelValue":k[5]||(k[5]=M=>i.value.date.end=M),type:"date",placeholder:I(s)("KANBAN.FILTER.DATE.END"),class:"flex-1"},null,8,["modelValue","placeholder"])])])]),c("div",iet,[k[10]||(k[10]=c("h4",{class:"text-md font-medium border-b border-slate-200 dark:border-slate-700 pb-1 mb-2"},"Predefinies",-1)),c("div",ret,[k[8]||(k[8]=c("label",{class:"text-sm font-medium block"},"Salvar filtro atual",-1)),c("div",cet,[b($,{modelValue:r.value,"onUpdate:modelValue":k[6]||(k[6]=M=>r.value=M),type:"text",placeholder:"Nome da predefinio",class:"flex-1",onKeyup:Fn(C,["enter"])},null,8,["modelValue"]),b(D,{variant:"smooth",size:"small",icon:"save","color-scheme":"secondary",disabled:!r.value.trim(),onClick:C},null,8,["disabled"])])]),c("div",det,[k[9]||(k[9]=c("label",{class:"text-sm font-medium block"},"Predefinies salvas",-1)),Object.keys(l.value).length===0?(m(),f("div",uet," Nenhuma predefinio salva. ")):(m(),f("ul",met,[(m(!0),f(pe,null,ye(l.value,(M,K)=>(m(),f("li",{key:K,class:re(["flex justify-between items-center p-1.5 rounded-md flex-wrap",{"bg-woot-50 dark:bg-woot-800/50":d.value===K,"hover:bg-slate-100 dark:hover:bg-slate-700/50":d.value!==K}])},[c("div",pet,[c("span",{class:"text-sm font-medium block truncate",title:K},v(K),9,het),c("span",{class:"text-xs text-slate-500 dark:text-slate-400 block truncate",title:T(M)},v(T(M)),9,fet)]),c("div",get,[b(D,{variant:"clear",size:"small","color-scheme":"secondary",title:"Aplicar",onClick:B=>O(K)},{default:j(()=>[b(L,{icon:"play-circle",size:"14"})]),_:2},1032,["onClick"]),b(D,{variant:"clear",size:"small","color-scheme":"alert",title:"Deletar",onClick:B=>N(K)},{default:j(()=>[b(L,{icon:"delete",size:"14"})]),_:2},1032,["onClick"])])],2))),128))]))])])]),c("footer",_et,[b(D,{variant:"clear","color-scheme":"secondary",onClick:A},{default:j(()=>[be(v(I(s)("KANBAN.FORM.CLEAR")),1)]),_:1}),b(D,{variant:"solid","color-scheme":"primary",onClick:y},{default:j(()=>[be(v(I(s)("KANBAN.FORM.APPLY")),1)]),_:1})])])]),_:1},8,["show","size"])):x("",!0)])}}},G_=Re(vet,[["__scopeId","data-v-a7634d27"]]),bet={class:"flex items-center flex-grow gap-2"},Eet={class:"min-w-0 truncate"},Tet={__name:"ColorPicker",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t,s=U(!1),o=()=>{s.value=!s.value},a=()=>{s.value&&o()},i=r=>{n("update:modelValue",r.hex)},l=U(null);return(r,d)=>(m(),f("div",{ref_key:"pickerRef",ref:l,class:"relative w-fit"},[b(I(gl),{onTrigger:a},{default:j(()=>[b(he,{color:"slate",icon:"i-lucide-pipette","trailing-icon":"",class:"!px-3 !py-3 [&>svg]:w-4 [&>svg]:h-4",onClick:o},{default:j(()=>[c("div",bet,[c("span",{class:"rounded-md size-4",style:At({backgroundColor:e.modelValue})},null,4),c("span",Eet,v(e.modelValue),1)])]),_:1}),s.value?(m(),P(I(RT.Chrome),{key:0,"disable-alpha":"","model-value":e.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":i},null,8,["model-value"])):x("",!0)]),_:1})],512))}},yet=Re(Tet,[["__scopeId","data-v-92666597"]]),Aet={__name:"StageColorPicker",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t;return(s,o)=>(m(),f("div",{class:"stage-color-picker",onClick:o[1]||(o[1]=Ke(()=>{},["stop","prevent"]))},[b(yet,{"model-value":e.modelValue,"onUpdate:modelValue":o[0]||(o[0]=a=>n("update:modelValue",a)),class:"!w-full"},null,8,["model-value"])]))}},Y2=Re(Aet,[["__scopeId","data-v-1d84882c"]]),Iet={class:"flex items-center justify-between"},Cet={class:"flex items-center gap-2"},Net={class:"flex items-center gap-2"},Oet={class:"relative"},xet={class:"px-4 py-2"},wet={class:"px-4 py-2"},Ret={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},$et={class:"px-4 py-2"},Met={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},ket={class:"px-4 py-2"},Let={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},Det={class:"px-4 py-2"},Pet={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},Bet={class:"px-4 py-2"},Fet={class:"px-4 py-2"},Uet={class:"px-4"},Get={class:"py-3 space-y-3"},Vet={key:1,class:"flex items-center justify-center h-24 text-sm text-slate-500 dark:text-slate-400"},Het={class:"p-6"},Ket={class:"text-lg font-medium mb-4"},zet={class:"space-y-4"},Wet={class:"block text-sm font-medium mb-1"},jet=["placeholder"],Yet={class:"block text-sm font-medium mb-1"},Xet={class:"block text-sm font-medium mb-1"},qet=["placeholder"],Zet={class:"flex justify-end gap-2"},Qet={class:"p-6"},Jet={class:"text-lg font-medium mb-4"},ett={class:"space-y-4"},ttt={class:"block text-sm font-medium mb-2"},ntt=["value"],stt={class:"block text-sm font-medium mb-2"},att={class:"flex gap-4"},ott={class:"flex items-center gap-2"},itt={class:"text-sm"},ltt={class:"flex items-center gap-2"},rtt={class:"text-sm"},ctt={class:"flex justify-end gap-2"},dtt=10,utt={__name:"KanbanColumn",props:{id:{type:String,required:!0},title:{type:String,required:!0},color:{type:String,default:"orange"},items:{type:Array,required:!0},totalColumns:{type:Number,default:0},description:{type:String,default:""}},emits:["add","edit","delete","drop","itemClick","itemsUpdated"],setup(e,{emit:t}){const n=te=>{const ce=`kanban_column_${te}_applied_filters`,fe=localStorage.getItem(ce);if(console.log("[DEBUG] getInitialColumnFilters - columnId:",te,"tem filtros armazenados?",!!fe),fe)try{const ke=JSON.parse(fe);return console.log("[DEBUG] Filtros carregados do localStorage:",ke),ke&&ke.agent_id!==null&&ke.agent_id!==void 0&&(ke.agent_id=Number(ke.agent_id),console.log("[DEBUG] agent_id convertido para nmero:",ke.agent_id,"tipo:",typeof ke.agent_id)),typeof ke=="object"&&ke!==null?ke:(console.warn(`Invalid stored filter format for column ${te}. Clearing.`),localStorage.removeItem(ce),null)}catch(ke){return console.error(`Error parsing stored filters for column ${te}:`,ke),localStorage.removeItem(ce),null}return null},s=e,o=t,{t:a}=He(),i=hn(),{isStacklab:l}=Ra(),r=U(!1),d=U(n(s.id)),u=U(!1),p=U({showWon:!0,showLost:!0,showAll:!0,hideColumn:!1}),h=U(!1),g=U({name:"",color:"",description:""}),_=U(!1),T=U({type:"created_at",direction:"desc"}),S=U(!1),E=U(6),y=U(null),A=[{id:"created_at",label:"Data de Criao"},{id:"title",label:"Ttulo"},{id:"priority",label:"Prioridade"},{id:"value",label:"Valor"}],C=w(()=>`kanban_column_${s.id}_applied_filters`);ut(()=>{const te=localStorage.getItem(`kanban_column_${s.id}_settings`);te&&(p.value=JSON.parse(te));const ce=localStorage.getItem(`kanban_column_${s.id}_sort`);ce&&(T.value=JSON.parse(ce)),y.value&&(y.value.addEventListener("scroll",q),Zt(()=>{y.value&&y.value.scrollHeight<=y.value.clientHeight&&W()})),document.addEventListener("click",Z)});const O=()=>{localStorage.setItem(`kanban_column_${s.id}_settings`,JSON.stringify(p.value))},N=()=>{localStorage.setItem(`kanban_column_${s.id}_sort`,JSON.stringify(T.value))},R=w(()=>{if(p.value.hideColumn)return[];d.value&&(console.log("[DEBUG] filteredItems - usando filtros:",JSON.stringify(d.value)),d.value.agent_id&&console.log("[DEBUG] filteredItems - agent_id:",d.value.agent_id,"tipo:",typeof d.value.agent_id));let te=[...s.items];return d.value&&(te=te.filter(ce=>{var fe,ke;if(d.value.priority&&d.value.priority.length>0){const De=((fe=ce.item_details)==null?void 0:fe.priority)||"none";if(!d.value.priority.includes(De))return!1}if(d.value.value&&(d.value.value.min!==void 0||d.value.value.max!==void 0)){const De=parseFloat((ke=ce.item_details)==null?void 0:ke.value)||0,Fe=d.value.value.min,je=d.value.value.max;if(Fe!=null&&De<Fe||je!=null&&De>je)return!1}if(d.value.agent_id){console.log("[DEBUG] Filtrando por agente - columnFilter agent_id:",d.value.agent_id,"tipo:",typeof d.value.agent_id);const De=ce.assigned_agent_id||ce.assignee_id||ce.item_details&&ce.item_details.agent_id||ce.meta&&ce.meta.agent_id||null;if(console.log("[DEBUG] Item completo:",ce),console.log("[DEBUG] Item agent_id encontrado:",De,"tipo:",typeof De),d.value.agent_id===-1)return De!==null?(console.log('[DEBUG] Item rejeitado - tem agente atribudo, mas filtro  para "No atribudo"'),!1):(console.log("[DEBUG] Item aceito - sem agente atribudo"),!0);if(De!=d.value.agent_id)return console.log("[DEBUG] Item rejeitado - no corresponde ao agente filtrado"),!1;console.log("[DEBUG] Item aceito - corresponde ao agente filtrado")}if(d.value.date&&(d.value.date.start||d.value.date.end)){const De=new Date(ce.created_at);if(isNaN(De.getTime()))return!1;if(d.value.date.start){const Fe=new Date(d.value.date.start);if(Fe.setHours(0,0,0,0),De<Fe)return!1}if(d.value.date.end){const Fe=new Date(d.value.date.end);if(Fe.setHours(23,59,59,999),De>Fe)return!1}}return!0})),te=te.filter(ce=>{var ke;const fe=(ke=ce.item_details)==null?void 0:ke.status;return fe!=="won"&&fe!=="lost"?!0:!(fe==="won"&&!p.value.showWon||fe==="lost"&&!p.value.showLost)}),te.sort((ce,fe)=>{var Qe,Ze,ft,kt,Q,oe;const ke=T.value.direction==="asc"?1:-1,De=T.value.type;let Fe,je;switch(De){case"title":return Fe=((Qe=ce.item_details)==null?void 0:Qe.title)||"",je=((Ze=fe.item_details)==null?void 0:Ze.title)||"",ke*Fe.localeCompare(je);case"priority":{const de={urgent:4,high:3,medium:2,low:1,none:0};return Fe=de[((ft=ce.item_details)==null?void 0:ft.priority)||"none"],je=de[((kt=fe.item_details)==null?void 0:kt.priority)||"none"],ke*(Fe-je)}case"value":return Fe=parseFloat((Q=ce.item_details)==null?void 0:Q.value)||0,je=parseFloat((oe=fe.item_details)==null?void 0:oe.value)||0,ke*(Fe-je);case"created_at":default:return Fe=new Date(ce.created_at),je=new Date(fe.created_at),isNaN(Fe.getTime())?ke:isNaN(je.getTime())?-ke:ke*(Fe-je)}})}),k=w(()=>R.value.slice(0,E.value)),L=w(()=>{if(!d.value)return{total:0,stages:{}};const te={};return te[s.title]=R.value.length,{total:R.value.length,stages:te}}),D=w(()=>R.value.reduce((te,ce)=>{var ke;const fe=parseFloat((ke=ce.item_details)==null?void 0:ke.value)||0;return te+fe},0)),$=w(()=>D.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(D.value):""),M=te=>{const ce=te.replace("#",""),fe=parseInt(ce.substring(0,2),16),ke=parseInt(ce.substring(2,4),16),De=parseInt(ce.substring(4,6),16),Fe=.85,je=Math.floor(fe*Fe),Qe=Math.floor(ke*Fe),Ze=Math.floor(De*Fe);return`#${je.toString(16).padStart(2,"0")}${Qe.toString(16).padStart(2,"0")}${Ze.toString(16).padStart(2,"0")}`},K=w(()=>s.color?M(s.color):"#CC6E00"),B=w(()=>({backgroundColor:s.color?`${s.color}40`:"#f8fafc"})),H=w(()=>({backgroundColor:s.color?`${s.color}15`:"#FFF4E5",color:K.value})),G=te=>{const ce=te.dataTransfer.getData("text/plain");if(console.log("[COLUMN-DROP-DEBUG] Item arrastado ID:",ce,"para coluna:",s.id),ce){const fe=parseInt(ce,10);console.log("[COLUMN-DROP-DEBUG] ID convertido para nmero:",fe,typeof fe),o("drop",{itemId:fe,columnId:s.id}),console.log("[COLUMN-DROP-DEBUG] Evento drop emitido para o componente pai")}},V=te=>{te.preventDefault()},Y=w(()=>s.totalColumns<=5?{minWidth:"320px",maxWidth:`calc((100% - ${(s.totalColumns-1)*1}rem) / ${s.totalColumns})`,width:"100%"}:{minWidth:"350px",maxWidth:"350px",width:"350px"}),ee=()=>{r.value=!0},X=te=>{var fe,ke;console.log("[DEBUG] handleFilterApply recebeu filtros:",JSON.stringify(te)),te&&te.agent_id&&console.log("[DEBUG] agent_id recebido:",te.agent_id,"tipo:",typeof te.agent_id),!te||(!te.priority||te.priority.length===0)&&(!te.value||te.value.min===null&&te.value.max===null)&&!te.agent_id&&(!te.date||!te.date.start&&!te.date.end)?(console.log("[DEBUG] Filtros limpos"),d.value=null,localStorage.removeItem(C.value)):(console.log("[DEBUG] Aplicando filtros, agent_id:",te.agent_id,"tipo:",typeof te.agent_id),d.value=te,localStorage.setItem(C.value,JSON.stringify(te)),console.log("[DEBUG] Filtros aplicados, agora columnFilters.agent_id:",(fe=d.value)==null?void 0:fe.agent_id,"tipo:",typeof((ke=d.value)==null?void 0:ke.agent_id))),r.value=!1,E.value=6,Zt(()=>{q()})},z=w(()=>d.value?d.value.priority.length>0||d.value.value.min||d.value.value.max||d.value.agent_id||d.value.date.start||d.value.date.end:!1),W=()=>{E.value<R.value.length&&(E.value=Math.min(E.value+dtt,R.value.length))},q=()=>{if(!y.value)return;const{scrollTop:te,scrollHeight:ce,clientHeight:fe}=y.value;te+fe>=ce-150&&E.value<R.value.length&&W()};lt(R,()=>{E.value=6,Zt(()=>{y.value&&y.value.scrollHeight<=y.value.clientHeight&&W()})},{deep:!0});const Z=te=>{u.value&&(u.value=!1)};ut(()=>{document.addEventListener("click",Z)}),ia(()=>{document.removeEventListener("click",Z),y.value&&y.value.removeEventListener("scroll",q)}),lt(()=>p.value.showAll,te=>{te&&(p.value.showWon=!0,p.value.showLost=!0),O()}),lt([()=>p.value.showWon,()=>p.value.showLost],([te,ce])=>{p.value.showAll=te&&ce});const ne=()=>{g.value={name:s.title,color:s.color,description:s.description||""},h.value=!0,u.value=!1},ae=async()=>{try{const te=i.getters["funnel/getSelectedFunnel"],ce={...te.stages};ce[s.id]={...ce[s.id],name:g.value.name,color:g.value.color,description:g.value.description},await Js.update(te.id,{...te,stages:ce}),h.value=!1,await i.dispatch("funnel/fetch"),o("itemsUpdated"),yt.emit("newToastMessage",{message:"Etapa atualizada com sucesso",action:{type:"success"}})}catch(te){console.error("Erro ao atualizar etapa:",te),yt.emit("newToastMessage",{message:"Erro ao atualizar etapa",action:{type:"error"}})}},ue=()=>{S.value=!S.value;const te=JSON.parse(localStorage.getItem("kanban_collapsed_items")||"{}");R.value.forEach(ce=>{te[ce.id]=S.value}),localStorage.setItem("kanban_collapsed_items",JSON.stringify(te)),u.value=!1,o("itemsUpdated"),yt.emit("kanbanItemsCollapsedStateChanged")};return(te,ce)=>{const fe=F("fluent-icon"),ke=F("woot-button");return ie((m(),f("div",{class:"flex flex-col rounded-lg overflow-hidden",style:At({...Y.value,...B.value})},[c("div",{class:"pl-4 pr-4 pt-2 pb-2",style:At({borderBottom:`1px solid ${s.color}59`})},[c("div",Iet,[c("div",Cet,[c("h3",{class:"text-sm font-medium",style:At({color:K.value})},v(e.title),5),c("span",{class:"inline-flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full",style:At(H.value)},v(R.value.length),5),z.value?(m(),f("span",{key:0,class:"filter-active-indicator",style:At({backgroundColor:K.value})},null,4)):x("",!0)]),c("div",Net,[$.value&&I(l)?(m(),f("span",{key:0,class:"text-xs font-medium",style:At({color:K.value})},v($.value),5)):x("",!0),c("button",{class:"p-1 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100",onClick:ee},[b(fe,{icon:"filter",size:"16"})]),c("button",{class:"p-1 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100",onClick:ce[0]||(ce[0]=De=>te.$emit("add",e.id))},[b(fe,{icon:"add",size:"16"})]),c("div",Oet,[c("button",{class:"p-1 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 options-menu-button",onClick:ce[1]||(ce[1]=Ke(De=>u.value=!u.value,["stop"]))},[b(fe,{icon:"more-vertical",size:"16"})]),u.value?(m(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-2 w-48 z-10 options-menu-content",onClick:ce[7]||(ce[7]=Ke(()=>{},["stop"]))},[c("div",xet,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ne},[b(fe,{icon:"edit",size:"16"}),c("span",null,v(I(a)("KANBAN.COLUMN_OPTIONS.EDIT_STAGE")),1)])]),ce[22]||(ce[22]=c("div",{class:"border-t border-slate-100 dark:border-slate-700 my-1"},null,-1)),c("div",wet,[c("label",Ret,[ie(c("input",{"onUpdate:modelValue":ce[2]||(ce[2]=De=>p.value.showAll=De),type:"checkbox",class:"form-checkbox",onChange:O},null,544),[[Kt,p.value.showAll]]),c("span",null,v(I(a)("KANBAN.COLUMN_OPTIONS.SHOW_ALL")),1)])]),c("div",$et,[c("label",Met,[ie(c("input",{"onUpdate:modelValue":ce[3]||(ce[3]=De=>p.value.showWon=De),type:"checkbox",class:"form-checkbox",onChange:O},null,544),[[Kt,p.value.showWon]]),c("span",null,v(I(a)("KANBAN.COLUMN_OPTIONS.SHOW_WON")),1)])]),c("div",ket,[c("label",Let,[ie(c("input",{"onUpdate:modelValue":ce[4]||(ce[4]=De=>p.value.showLost=De),type:"checkbox",class:"form-checkbox",onChange:O},null,544),[[Kt,p.value.showLost]]),c("span",null,v(I(a)("KANBAN.COLUMN_OPTIONS.SHOW_LOST")),1)])]),c("div",Det,[c("label",Pet,[ie(c("input",{"onUpdate:modelValue":ce[5]||(ce[5]=De=>p.value.hideColumn=De),type:"checkbox",class:"form-checkbox",onChange:O},null,544),[[Kt,p.value.hideColumn]]),c("span",null,v(I(a)("KANBAN.COLUMN_OPTIONS.HIDE_STAGE")),1)])]),c("div",Bet,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ce[6]||(ce[6]=De=>_.value=!0)},[b(fe,{icon:"arrow-sort",size:"16"}),c("span",null,v(I(a)("KANBAN.COLUMN_OPTIONS.SORT")),1)])]),ce[23]||(ce[23]=c("div",{class:"border-t border-slate-100 dark:border-slate-700 my-1"},null,-1)),c("div",Fet,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ue},[b(fe,{icon:S.value?"arrow-expand":"arrow-outwards",size:"16"},null,8,["icon"]),c("span",null,v(S.value?I(a)("KANBAN.COLUMN_OPTIONS.EXPAND_ALL"):I(a)("KANBAN.COLUMN_OPTIONS.COLLAPSE_ALL")),1)])])])):x("",!0)])])])],4),c("div",{ref_key:"scrollContainer",ref:y,class:"flex-1 overflow-y-auto",onDrop:G,onDragover:V},[c("div",Uet,[c("div",Get,[k.value.length?(m(!0),f(pe,{key:0},ye(k.value,De=>(m(),P(MJe,{key:De.id,item:De,"kanban-items":s.items,draggable:"",onDragstart:Fe=>{Fe.dataTransfer.setData("text/plain",De.id.toString())},onClick:ce[8]||(ce[8]=Fe=>{var je;console.log("[DEBUG] KanbanColumn - Item clicado:",Fe),console.log("[DEBUG] KanbanColumn - Description no clique:",(je=Fe==null?void 0:Fe.item_details)==null?void 0:je.description),te.$emit("itemClick",Fe)}),onEdit:ce[9]||(ce[9]=Fe=>{var je;console.log("[DEBUG] KanbanColumn - Item editado:",Fe),console.log("[DEBUG] KanbanColumn - Description na edio:",(je=Fe==null?void 0:Fe.item_details)==null?void 0:je.description),te.$emit("edit",Fe)}),onDelete:Fe=>te.$emit("delete",De)},null,8,["item","kanban-items","onDragstart","onDelete"]))),128)):(m(),f("div",Vet,v(z.value?I(a)("KANBAN.NO_FILTERED_ITEMS"):I(a)("KANBAN.NO_ITEMS")),1))])])],544),b(G_,{show:r.value,"filtered-results":L.value,"current-funnel":I(i).getters["funnel/getSelectedFunnel"],"initial-filters":d.value,size:"large",onClose:ce[10]||(ce[10]=De=>r.value=!1),onApply:X},null,8,["show","filtered-results","current-funnel","initial-filters"]),b(Wt,{show:h.value,"onUpdate:show":ce[15]||(ce[15]=De=>h.value=De),"on-close":()=>h.value=!1},{default:j(()=>[c("div",Het,[c("h3",Ket,v(I(a)("KANBAN.EDIT_STAGE_MODAL.TITLE")),1),c("div",zet,[c("div",null,[c("label",Wet,v(I(a)("KANBAN.EDIT_STAGE_MODAL.NAME")),1),ie(c("input",{"onUpdate:modelValue":ce[11]||(ce[11]=De=>g.value.name=De),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(a)("KANBAN.EDIT_STAGE_MODAL.NAME_PLACEHOLDER")},null,8,jet),[[at,g.value.name]])]),c("div",null,[c("label",Yet,v(I(a)("KANBAN.EDIT_STAGE_MODAL.COLOR")),1),b(Y2,{modelValue:g.value.color,"onUpdate:modelValue":ce[12]||(ce[12]=De=>g.value.color=De)},null,8,["modelValue"])]),c("div",null,[c("label",Xet,v(I(a)("KANBAN.EDIT_STAGE_MODAL.DESCRIPTION")),1),ie(c("textarea",{"onUpdate:modelValue":ce[13]||(ce[13]=De=>g.value.description=De),class:"w-full px-3 py-2 border rounded-lg",rows:"3",placeholder:I(a)("KANBAN.EDIT_STAGE_MODAL.DESCRIPTION_PLACEHOLDER")},null,8,qet),[[at,g.value.description]])]),c("div",Zet,[b(ke,{variant:"clear",onClick:ce[14]||(ce[14]=De=>h.value=!1)},{default:j(()=>[be(v(I(a)("KANBAN.ACTIONS.CANCEL")),1)]),_:1}),b(ke,{variant:"primary",onClick:ae},{default:j(()=>[be(v(I(a)("KANBAN.ACTIONS.SAVE")),1)]),_:1})])])])]),_:1},8,["show","on-close"]),b(Wt,{show:_.value,"onUpdate:show":ce[21]||(ce[21]=De=>_.value=De),"on-close":()=>_.value=!1},{default:j(()=>[c("div",Qet,[c("h3",Jet,v(I(a)("KANBAN.SORT_MODAL.TITLE")),1),c("div",ett,[c("div",null,[c("label",ttt,v(I(a)("KANBAN.SORT_MODAL.SORT_BY")),1),ie(c("select",{"onUpdate:modelValue":ce[16]||(ce[16]=De=>T.value.type=De),class:"w-full px-3 py-2 border rounded-lg",onChange:N},[(m(),f(pe,null,ye(A,De=>c("option",{key:De.id,value:De.id},v(I(a)(`KANBAN.SORT_OPTIONS.${De.id.toUpperCase()}`,De.label)),9,ntt)),64))],544),[[Mt,T.value.type]])]),c("div",null,[c("label",stt,v(I(a)("KANBAN.SORT_MODAL.DIRECTION")),1),c("div",att,[c("label",ott,[ie(c("input",{type:"radio","onUpdate:modelValue":ce[17]||(ce[17]=De=>T.value.direction=De),value:"asc",onChange:N},null,544),[[bi,T.value.direction]]),c("span",itt,v(I(a)("KANBAN.SORT_MODAL.ASCENDING")),1)]),c("label",ltt,[ie(c("input",{type:"radio","onUpdate:modelValue":ce[18]||(ce[18]=De=>T.value.direction=De),value:"desc",onChange:N},null,544),[[bi,T.value.direction]]),c("span",rtt,v(I(a)("KANBAN.SORT_MODAL.DESCENDING")),1)])])]),c("div",ctt,[b(ke,{variant:"clear",onClick:ce[19]||(ce[19]=De=>_.value=!1)},{default:j(()=>[be(v(I(a)("KANBAN.FORM.CANCEL")),1)]),_:1}),b(ke,{variant:"primary",onClick:ce[20]||(ce[20]=De=>_.value=!1)},{default:j(()=>[be(v(I(a)("KANBAN.FORM.APPLY")),1)]),_:1})])])])]),_:1},8,["show","on-close"])],4)),[[ln,!p.value.hideColumn]])}}},mtt=Re(utt,[["__scopeId","data-v-5702bbba"]]),ptt={class:"settings-modal"},htt={class:"settings-header"},ftt={class:"text-lg font-medium"},gtt={class:"settings-content"},_tt={class:"setting-item"},vtt={class:"flex items-center space-x-2 cursor-pointer"},btt={key:0,class:"setting-item mt-4"},Ett={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Ttt=["placeholder"],ytt={class:"settings-footer"},Att={__name:"KanbanSettings",props:{show:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:t}){const{t:n}=He(),s=t,o=U(!1),a=U("");ut(()=>{o.value=localStorage.getItem("kanban_webhook_enabled")==="true",a.value=localStorage.getItem("kanban_webhook_url")||""});const i=()=>{s("close")},l=()=>{vO.setWebhookConfig({url:a.value,enabled:o.value}),i()};return(r,d)=>{const u=F("woot-button");return m(),P(Wt,{show:e.show,"on-close":i,size:"medium"},{default:j(()=>[c("div",ptt,[c("header",htt,[c("h3",ftt,v(I(n)("KANBAN.SETTINGS.TITLE")),1)]),c("div",gtt,[c("div",_tt,[c("label",vtt,[ie(c("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>o.value=p),type:"checkbox",class:"form-checkbox"},null,512),[[Kt,o.value]]),c("span",null,v(I(n)("KANBAN.SETTINGS.ENABLE_GLOBAL_WEBHOOK")),1)])]),o.value?(m(),f("div",btt,[c("label",Ett,v(I(n)("KANBAN.SETTINGS.WEBHOOK_URL")),1),ie(c("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>a.value=p),type:"url",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600",placeholder:I(n)("KANBAN.SETTINGS.WEBHOOK_URL_PLACEHOLDER"),required:""},null,8,Ttt),[[at,a.value]])])):x("",!0)]),c("footer",ytt,[b(u,{variant:"clear",size:"small",onClick:i},{default:j(()=>[be(v(I(n)("KANBAN.CANCEL")),1)]),_:1}),b(u,{variant:"primary",size:"small",onClick:l},{default:j(()=>[be(v(I(n)("KANBAN.SAVE")),1)]),_:1})])])]),_:1},8,["show"])}}},Stt=Re(Att,[["__scopeId","data-v-ea9bc728"]]),Itt={class:"bulk-delete-modal"},Ctt={class:"p-6"},Ntt={class:"text-lg font-medium mb-4"},Ott={class:"text-sm text-slate-600 dark:text-slate-400 mb-4"},xtt={class:"items-list max-h-96 overflow-y-auto mb-4"},wtt=["checked"],Rtt={class:"flex-1"},$tt={class:"text-sm font-medium"},Mtt=["onClick"],ktt=["checked"],Ltt={class:"flex-1"},Dtt={class:"text-sm font-medium"},Ptt={class:"flex items-center gap-2 mt-1"},Btt={class:"flex justify-end gap-2"},Ftt={__name:"BulkDeleteModal",props:{items:{type:Array,required:!0}},emits:["close","confirm"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U([]),i=()=>{a.value.length===n.items.length?a.value=[]:a.value=n.items.map(u=>u.id)},l=w(()=>a.value.length===n.items.length),r=u=>{const p=a.value.indexOf(u);p===-1?a.value.push(u):a.value.splice(p,1)},d=()=>{s("confirm",a.value)};return(u,p)=>(m(),f("div",Itt,[c("div",Ctt,[c("h3",Ntt,v(I(o)("KANBAN.BULK_ACTIONS.DELETE.TITLE")),1),c("p",Ott,v(I(o)("KANBAN.BULK_ACTIONS.DELETE.DESCRIPTION")),1),c("div",xtt,[c("div",{class:"item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",onClick:i},[c("input",{type:"checkbox",checked:l.value,class:"mr-3",onClick:p[0]||(p[0]=Ke(()=>{},["stop"]))},null,8,wtt),c("div",Rtt,[c("h4",$tt,v(I(o)("KANBAN.BULK_ACTIONS.SELECT_ALL")),1)])]),(m(!0),f(pe,null,ye(e.items,h=>{var g,_,T,S,E,y;return m(),f("div",{key:h.id,class:re(["item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",{"bg-slate-50 dark:bg-slate-800":a.value.includes(h.id)}]),onClick:A=>r(h.id)},[c("input",{type:"checkbox",checked:a.value.includes(h.id),class:"mr-3",onClick:p[1]||(p[1]=Ke(()=>{},["stop"]))},null,8,ktt),c("div",Ltt,[c("h4",Dtt,v(((g=h.item_details)==null?void 0:g.title)||h.title||I(o)("KANBAN.ITEM_DETAILS.UNTITLED_ITEM")),1),c("div",Ptt,[c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",`bg-${((_=h.item_details)==null?void 0:_.priority)||h.priority||"none"}-50 dark:bg-${((T=h.item_details)==null?void 0:T.priority)||h.priority||"none"}-800 text-${((S=h.item_details)==null?void 0:S.priority)||h.priority||"none"}-800 dark:text-${((E=h.item_details)==null?void 0:E.priority)||h.priority||"none"}-50`])},v(I(o)(`KANBAN.PRIORITY_LABELS.${(((y=h.item_details)==null?void 0:y.priority)||h.priority||"NONE").toUpperCase()}`)),3)])])],10,Mtt)}),128))]),c("div",Btt,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:p[2]||(p[2]=h=>u.$emit("close"))},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.CANCEL")),1)]),_:1}),b(he,{variant:"solid",color:"ruby",size:"sm",disabled:!a.value.length,onClick:d},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.CONFIRM",{count:a.value.length})),1)]),_:1},8,["disabled"])])])]))}},Utt=Re(Ftt,[["__scopeId","data-v-ff21cf1e"]]),Gtt={class:"bulk-move-modal"},Vtt={class:"p-6"},Htt={class:"text-lg font-medium mb-4"},Ktt={class:"text-sm text-slate-600 dark:text-slate-400 mb-4"},ztt={class:"stage-selector mb-4"},Wtt={class:"block text-sm font-medium mb-2"},jtt={value:"",disabled:""},Ytt=["value"],Xtt={class:"items-list max-h-96 overflow-y-auto mb-4"},qtt=["checked"],Ztt={class:"flex-1"},Qtt={class:"text-sm font-medium"},Jtt=["onClick"],ent=["checked"],tnt={class:"flex-1"},nnt={class:"text-sm font-medium"},snt={class:"flex items-center gap-2 mt-1"},ant={class:"flex justify-end gap-2"},ont={__name:"BulkMoveModal",props:{items:{type:Array,required:!0}},emits:["close","confirm"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=hn(),i=U([]),l=U(""),r=w(()=>{const g=a.getters["funnel/getSelectedFunnel"];return g!=null&&g.stages?Object.entries(g.stages).map(([_,T])=>({id:_,name:T.name,position:T.position})).sort((_,T)=>_.position-T.position):[]}),d=g=>{const _=i.value.indexOf(g);_===-1?i.value.push(g):i.value.splice(_,1)},u=()=>{i.value.length===n.items.length?i.value=[]:i.value=n.items.map(g=>g.id)},p=w(()=>i.value.length===n.items.length),h=()=>{l.value&&i.value.length>0&&s("confirm",{itemIds:i.value,stageId:l.value})};return(g,_)=>(m(),f("div",Gtt,[c("div",Vtt,[c("h3",Htt,v(I(o)("KANBAN.BULK_ACTIONS.MOVE.TITLE")),1),c("p",Ktt,v(I(o)("KANBAN.BULK_ACTIONS.MOVE.DESCRIPTION")),1),c("div",ztt,[c("label",Wtt,v(I(o)("KANBAN.BULK_ACTIONS.SELECT_STAGE")),1),ie(c("select",{"onUpdate:modelValue":_[0]||(_[0]=T=>l.value=T),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800"},[c("option",jtt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.STAGE.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(r.value,T=>(m(),f("option",{key:T.id,value:T.id},v(T.name),9,Ytt))),128))],512),[[Mt,l.value]])]),c("div",Xtt,[c("div",{class:"item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",onClick:u},[c("input",{type:"checkbox",checked:p.value,class:"mr-3",onClick:_[1]||(_[1]=Ke(()=>{},["stop"]))},null,8,qtt),c("div",Ztt,[c("h4",Qtt,v(I(o)("KANBAN.BULK_ACTIONS.SELECT_ALL")),1)])]),(m(!0),f(pe,null,ye(e.items,T=>{var S,E,y,A,C,O;return m(),f("div",{key:T.id,class:re(["item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",{"bg-slate-50 dark:bg-slate-800":i.value.includes(T.id)}]),onClick:N=>d(T.id)},[c("input",{type:"checkbox",checked:i.value.includes(T.id),class:"mr-3",onClick:_[2]||(_[2]=Ke(()=>{},["stop"]))},null,8,ent),c("div",tnt,[c("h4",nnt,v(((S=T.item_details)==null?void 0:S.title)||T.title||I(o)("KANBAN.ITEM_DETAILS.UNTITLED_ITEM")),1),c("div",snt,[c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",`bg-${((E=T.item_details)==null?void 0:E.priority)||T.priority||"none"}-50 dark:bg-${((y=T.item_details)==null?void 0:y.priority)||T.priority||"none"}-800 text-${((A=T.item_details)==null?void 0:A.priority)||T.priority||"none"}-800 dark:text-${((C=T.item_details)==null?void 0:C.priority)||T.priority||"none"}-50`])},v(I(o)(`KANBAN.PRIORITY_LABELS.${(((O=T.item_details)==null?void 0:O.priority)||T.priority||"NONE").toUpperCase()}`)),3)])])],10,Jtt)}),128))]),c("div",ant,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:_[3]||(_[3]=T=>g.$emit("close"))},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.CANCEL")),1)]),_:1}),b(he,{variant:"solid",color:"blue",size:"sm",disabled:!l.value||!i.value.length,onClick:h},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.CONFIRM",{count:i.value.length})),1)]),_:1},8,["disabled"])])])]))}},lnt=Re(ont,[["__scopeId","data-v-72e830a6"]]),rnt={class:"bulk-add-modal"},cnt={class:"p-6"},dnt={class:"text-lg font-medium mb-4"},unt={class:"stage-selector mb-4"},mnt={class:"block text-sm font-medium mb-2"},pnt={value:"",disabled:""},hnt=["value"],fnt={class:"new-item-form grid grid-cols-3 gap-4 mb-4"},gnt={class:"col-span-3"},_nt={class:"block text-sm font-medium mb-2"},vnt=["placeholder"],bnt={class:"block text-sm font-medium mb-2"},Ent=["value"],Tnt={class:"col-span-2"},ynt={class:"block text-sm font-medium mb-2"},Ant=["disabled"],Snt={value:""},Int=["value"],Cnt={class:"col-span-3"},Nnt={key:0,class:"items-list mb-4 border rounded-lg overflow-hidden"},Ont={class:"flex items-center gap-4"},xnt={class:"font-medium"},wnt={key:0,class:"text-sm text-slate-600"},Rnt={class:"flex justify-end gap-2"},$nt={__name:"BulkAddModal",props:{currentStage:{type:String,default:""}},emits:["close","items-created"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=hn(),i=U(!1),l=w(()=>a.getters["funnel/getSelectedFunnel"]),r=U([]),d=U([]),u=U(!1),p=U({title:"",priority:"none",agent_id:""}),h=[{id:"none",name:o("KANBAN.PRIORITY_LABELS.NONE")},{id:"low",name:o("KANBAN.PRIORITY_LABELS.LOW")},{id:"medium",name:o("KANBAN.PRIORITY_LABELS.MEDIUM")},{id:"high",name:o("KANBAN.PRIORITY_LABELS.HIGH")},{id:"urgent",name:o("KANBAN.PRIORITY_LABELS.URGENT")}],g=w(()=>{var A;return(A=l.value)!=null&&A.stages?Object.entries(l.value.stages).map(([C,O])=>({id:C,name:O.name,position:O.position})).sort((C,O)=>C.position-O.position):[]}),_=U(n.currentStage||""),T=async()=>{try{u.value=!0;const{data:A}=await Bu.get();d.value=A}catch(A){console.error("Erro ao carregar agentes:",A)}finally{u.value=!1}},S=()=>{p.value.title.trim()&&(r.value.push({...p.value,id:Date.now()}),p.value={title:"",priority:"none",agent_id:""})},E=A=>{r.value=r.value.filter(C=>C.id!==A)},y=async()=>{if(!(!r.value.length||!_.value))try{i.value=!0;const A=r.value.map((O,N)=>({funnel_id:Number(l.value.id),funnel_stage:_.value,position:N+1,item_details:{title:O.title,priority:O.priority,agent_id:O.agent_id||null}}));console.log("[BULK-DEBUG] Items a serem criados:",A),console.log("[BULK-DEBUG] Verificando store antes da criao:"),console.log("[BULK-DEBUG] Itens no store:",a.state.kanban.items.map(O=>({id:O.id,stage:O.funnel_stage})));const C=await Promise.all(A.map(O=>In.createItem(O)));console.log("[BULK-DEBUG] Items criados com sucesso:",C.map(O=>O.data));try{console.log("[BULK-DEBUG] Tentando atualizar store via kanban/itemUpdated"),await a.dispatch("kanban/itemUpdated"),console.log("[BULK-DEBUG] Store aps itemUpdated:"),console.log("[BULK-DEBUG] Itens no store aps:",a.state.kanban.items.map(N=>({id:N.id,stage:N.funnel_stage})));const O=C.every(N=>a.state.kanban.items.some(R=>R.id===N.data.id));if(console.log("[BULK-DEBUG] Todos os itens criados esto no store?",O),!O){console.log("[BULK-DEBUG] itemUpdated no adicionou todos os itens, tentando fetchKanbanItems"),await a.dispatch("kanban/fetchKanbanItems");const N=C.every(R=>a.state.kanban.items.some(k=>k.id===R.data.id));console.log("[BULK-DEBUG] Todos os itens esto no store aps fetchKanbanItems?",N)}}catch(O){console.error("[BULK-DEBUG] Erro ao atualizar store:",O),console.log("[BULK-DEBUG] Tentando fetchKanbanItems como alternativa"),await a.dispatch("kanban/fetchKanbanItems")}s("items-created",C.map(O=>O.data)),s("close")}catch(A){console.error("[BULK-DEBUG] Erro ao criar itens:",A)}finally{i.value=!1}};return ut(()=>{T()}),(A,C)=>{const O=F("fluent-icon");return m(),f("div",rnt,[c("div",cnt,[c("h3",dnt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.ADD_ITEM")),1),c("div",unt,[c("label",mnt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.STAGE.LABEL")),1),ie(c("select",{"onUpdate:modelValue":C[0]||(C[0]=N=>_.value=N),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800"},[c("option",pnt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.STAGE.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(g.value,N=>(m(),f("option",{key:N.id,value:N.id},v(N.name),9,hnt))),128))],512),[[Mt,_.value]])]),c("div",fnt,[c("div",gnt,[c("label",_nt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.TITLE.LABEL")),1),ie(c("input",{"onUpdate:modelValue":C[1]||(C[1]=N=>p.value.title=N),type:"text",class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800",placeholder:I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.TITLE.PLACEHOLDER")},null,8,vnt),[[at,p.value.title]])]),c("div",null,[c("label",bnt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.PRIORITY.LABEL")),1),ie(c("select",{"onUpdate:modelValue":C[2]||(C[2]=N=>p.value.priority=N),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800"},[(m(),f(pe,null,ye(h,N=>c("option",{key:N.id,value:N.id},v(N.name),9,Ent)),64))],512),[[Mt,p.value.priority]])]),c("div",Tnt,[c("label",ynt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.AGENT.LABEL")),1),ie(c("select",{"onUpdate:modelValue":C[3]||(C[3]=N=>p.value.agent_id=N),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800",disabled:u.value},[c("option",Snt,v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.AGENT.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(d.value,N=>(m(),f("option",{key:N.id,value:N.id},v(N.name),9,Int))),128))],8,Ant),[[Mt,p.value.agent_id]])]),c("div",Cnt,[b(he,{variant:"solid",color:"blue",size:"sm",disabled:!p.value.title.trim(),onClick:S},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.ADD_TO_LIST")),1)]),_:1},8,["disabled"])])]),r.value.length?(m(),f("div",Nnt,[(m(!0),f(pe,null,ye(r.value,N=>{var R;return m(),f("div",{key:N.id,class:"item-row flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-slate-50 dark:hover:bg-slate-800"},[c("div",Ont,[c("span",xnt,v(N.title),1),c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",`bg-${N.priority}-50 dark:bg-${N.priority}-800 text-${N.priority}-800 dark:text-${N.priority}-50`])},v(I(o)(`KANBAN.PRIORITY_LABELS.${N.priority.toUpperCase()}`)),3),N.agent_id?(m(),f("span",wnt,v((R=d.value.find(k=>k.id===N.agent_id))==null?void 0:R.name),1)):x("",!0)]),b(he,{variant:"ghost",color:"ruby",size:"sm",onClick:k=>E(N.id)},{icon:j(()=>[b(O,{icon:"delete",size:"16"})]),_:2},1032,["onClick"])])}),128))])):x("",!0),c("div",Rnt,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:C[4]||(C[4]=N=>A.$emit("close"))},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.CANCEL")),1)]),_:1}),b(he,{variant:"solid",color:"blue",size:"sm",isLoading:i.value,disabled:!r.value.length||!_.value,onClick:y},{default:j(()=>[be(v(I(o)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.CONFIRM")),1)]),_:1},8,["isLoading","disabled"])])])])}}},Mnt=Re($nt,[["__scopeId","data-v-9d473fc0"]]),knt={class:"modal-backdrop"},Lnt={class:"modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},Dnt={class:"modal-header",id:"modalTitle"},Pnt={class:"flex items-center gap-3"},Bnt={class:"modal-body",id:"modalDescription"},Fnt={class:"space-y-4"},Unt={key:0,class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},Gnt={key:1,class:"form-group"},Vnt={class:"form-group"},Hnt={__name:"AIConfigModal",emits:["close"],setup(e,{emit:t}){const n=wn(),s=t,o=U(""),a=U("gpt-4-mini"),i=U(!1),l=n.currentRoute.value.params.accountId,r=`/app/accounts/${l}/settings/integrations/openai`;ut(async()=>{var u,p,h,g,_;try{const S=(p=(u=(await window.axios.get(`/api/v1/accounts/${l}/integrations/apps`)).data)==null?void 0:u.payload)==null?void 0:p.find(E=>E.id==="openai");i.value=(S==null?void 0:S.enabled)||!1,i.value&&((_=(g=(h=S==null?void 0:S.hooks)==null?void 0:h[0])==null?void 0:g.settings)!=null&&_.api_key)&&(o.value=S.hooks[0].settings.api_key)}catch(T){console.error("Erro ao verificar integrao:",T),i.value=!1}});const d=()=>{console.log("Salvando configuraes:",{apiKey:o.value,model:a.value}),s("close")};return(u,p)=>(m(),P(Ms,{name:"modal-fade"},{default:j(()=>[c("div",knt,[c("div",Lnt,[c("header",Dnt,[c("div",Pnt,[p[3]||(p[3]=c("h3",null,"Configurao do Modelo AI",-1)),c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",i.value?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"])},v(i.value?u.t("KANBAN.AI_CONFIG.STATUS.CONNECTED"):u.t("KANBAN.AI_CONFIG.STATUS.DISCONNECTED")),3)]),c("button",{type:"button",class:"btn-close",onClick:p[0]||(p[0]=h=>u.$emit("close")),"aria-label":"Fechar modal"},"  ")]),c("section",Bnt,[c("div",Fnt,[i.value?(m(),f("div",Unt,[c("p",{class:"text-sm text-slate-600 dark:text-slate-400"},[p[4]||(p[4]=be(" Usando as credenciais configuradas no Chatwoot. Para alterar, acesse as ")),c("a",{href:r,target:"_blank",class:"text-woot-500 hover:underline"}," configuraes de integraes "),p[5]||(p[5]=be(". "))])])):(m(),f("div",Gnt,[p[6]||(p[6]=c("label",{class:"block text-sm font-medium mb-1"},"API Key",-1)),ie(c("input",{type:"password",class:"w-full rounded-lg border p-2",placeholder:"sk-...","onUpdate:modelValue":p[1]||(p[1]=h=>o.value=h)},null,512),[[at,o.value]]),p[7]||(p[7]=c("div",{class:"mt-2 text-xs text-slate-500 dark:text-slate-400 space-y-2"},[c("p",null,"Para obter sua API Key da OpenAI, siga os passos:"),c("ol",{class:"list-decimal ml-4 space-y-1"},[c("li",null,[be(" Acesse "),c("a",{href:"https://platform.openai.com/api-keys",target:"_blank",class:"text-woot-500 hover:underline"},"platform.openai.com/api-keys")]),c("li",null,"Faa login ou crie uma conta OpenAI"),c("li",null,'Clique em "Create new secret key"'),c("li",null,"D um nome para sua chave e copie o valor gerado"),c("li",null,"Cole a chave no campo acima")]),c("p",{class:"text-amber-500 dark:text-amber-400"},[c("strong",null,"Importante:"),be(" Guarde sua chave em local seguro. Ela s ser mostrada uma vez. ")])],-1))])),c("div",Vnt,[p[9]||(p[9]=c("label",{class:"block text-sm font-medium mb-1"},"Modelo",-1)),ie(c("select",{class:"w-full rounded-lg border p-2","onUpdate:modelValue":p[2]||(p[2]=h=>a.value=h),disabled:""},p[8]||(p[8]=[c("option",{value:"gpt-4-mini"},"GPT-4 Mini",-1)]),512),[[Mt,a.value]])])])]),c("footer",{class:"modal-footer"},[c("button",{type:"button",class:"btn-save",onClick:d}," Salvar ")])])])]),_:1}))}},Knt=Re(Hnt,[["__scopeId","data-v-6d886e05"]]),znt={class:"kanban-ai-container"},Wnt={class:"ai-content"},jnt={class:"quick-actions"},Ynt={class:"actions-grid -mt-1"},Xnt=["onClick","disabled"],qnt={class:"action-icon"},Znt={class:"action-content"},Qnt={class:"flex items-center justify-between gap-2 mb-1"},Jnt={class:"action-title"},est={key:0,class:"coming-soon-badge"},tst={class:"action-description"},nst={class:"ai-chat"},sst={class:"chat-container"},ast={key:0,class:"avatar"},ost={class:"message-content"},ist={key:0,class:"suggestion-card"},lst={class:"suggestion-header"},rst={class:"suggestion-title"},cst={class:"suggestion-badges"},dst={class:"suggestion-states"},ust={class:"current-state"},mst={class:"state-description"},pst={class:"expected-state"},hst={class:"state-description"},fst={class:"suggestion-solution"},gst={class:"solution-description"},_st={class:"suggestion-actions"},vst={key:1,class:"loading-analysis"},bst={class:"loading-title"},Est={class:"loading-steps"},Tst={class:"step-indicator"},yst={key:0,class:"check-icon"},Ast={key:1,class:"pulse-icon"},Sst={key:2,class:"waiting-icon"},Ist={class:"step-text"},Cst={class:"progress-bar"},Nst={key:2},Ost={key:3,class:"source-selector"},xst=["onClick"],wst={key:4,class:"source-selector"},Rst={class:"chat-input-container"},$st={key:0,class:"typing-indicator"},Mst={class:"chat-input"},kst=["disabled"],Lst={class:"p-6"},Dst={class:"changes-preview mb-6"},Pst={class:"change-category mb-4"},Bst={class:"change-field-header"},Fst={class:"field-name"},Ust={class:"change-details"},Gst={class:"detail-label"},Vst={class:"detail-value"},Hst={key:0,class:"detail-affected"},Kst={class:"flex justify-end gap-2"},zst={__name:"KanbanAI",setup(e){const t=wn(),{t:n}=He(),s=t.currentRoute.value.params.accountId,o=U([{type:"ai",content:n("KANBAN.AI.WELCOME_MESSAGE")}]),a=U(""),i=U(!1),l=U(!1),r=U(null),d=U(null),u=U(!1),p=U(null),h=U(!1),g=U(!1),_=U(null),T=U([]);U(null);const S=U(!1),E=U(null),y=U(null),A=async()=>{var ae,ue,te,ce;try{const ke=(ue=(ae=(await window.axios.get(`/api/v1/accounts/${s}/integrations/apps`)).data)==null?void 0:ae.payload)==null?void 0:ue.find(De=>De.id==="openai");return ke!=null&&ke.enabled&&((ce=(te=ke==null?void 0:ke.hooks)==null?void 0:te[0])!=null&&ce.settings)?(d.value=ke.hooks[0].settings,!0):!1}catch(fe){return console.error("Erro ao carregar configurao OpenAI:",fe),!1}},C=async()=>{try{const{data:ae}=await Js.get();T.value=ae}catch(ae){console.error("Erro ao carregar funis:",ae),o.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao carregar os funis."})}},O=ae=>Object.entries(ae.stages).sort((ce,fe)=>ce[1].position-fe[1].position)[0][0],N=async ae=>{try{return(await window.axios.get(`/api/v1/accounts/${s}/conversations/${ae}/messages?before=100`)).data}catch(ue){return console.error("Erro ao buscar mensagens:",ue),null}},R=async ae=>{const ue=O(_.value);try{const te=await Promise.all(ae.slice(0,10).map(async(ce,fe)=>{const ke=ce.name||"Novo Contato",je=(await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:"Voc  um assistente que gera descries concisas para leads em um funil de vendas. Gere apenas uma descrio curta sem formatao."},{role:"user",content:`Gere uma descrio curta para um lead com os seguintes dados:
                  Nome: ${ce.name}
                  Email: ${ce.email||"No informado"}
                  Telefone: ${ce.phone_number||"No informado"}`}],temperature:.7})})).json()).choices[0].message.content.trim();return{funnel_id:_.value.id,funnel_stage:ue,position:fe,item_details:{title:ke,description:je||`Contato via ${ce.email?"email":"telefone"}`,value:null,priority:"medium",email:ce.email,phone:ce.phone_number,contact_id:ce.id,custom_attributes:{}}}}));for(const ce of te)await In.createItem(ce);return te.length}catch(te){throw console.error("Erro ao criar itens:",te),te}},k=async ae=>{if(!ae||ae.length===0)return console.log("Nenhuma conversa encontrada"),0;const ue=O(_.value);try{const ce=(await Promise.all(ae.slice(0,10).map(async(fe,ke)=>{var ft,kt,Q;if(!((ft=fe==null?void 0:fe.meta)!=null&&ft.sender))return console.log("Conversa sem dados necessrios:",fe),null;const De=await N(fe.id);if(!De)return null;const Fe={contact:fe.meta.sender,messages:De.payload.filter(oe=>oe.content_type==="text").map(oe=>{var de;return{content:oe.content,sender_type:((de=oe.sender)==null?void 0:de.type)||"system",created_at:new Date(oe.created_at*1e3).toLocaleDateString()}}),status:fe.status,priority:fe.priority,assignee:fe.meta.assignee,channel:fe.meta.channel,created_at:new Date(fe.created_at*1e3).toLocaleDateString(),last_activity:new Date(fe.last_activity_at*1e3).toLocaleDateString()},Qe=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:"Voc  um assistente que analisa conversas de vendas e suporte. Retorne APENAS um objeto JSON vlido (sem formatao markdown ou cdigo) com os campos: title (string), description (string), value (number ou null - extraia qualquer valor monetrio mencionado em reais), priority (string: low, medium, high, urgent), scheduling_type (string: deadline ou scheduled), scheduled_at (data ISO ou null), deadline_at (data ISO ou null), offers (array de objetos com value e description). Se houver meno a valores em reais, crie uma oferta com esse valor. Se houver mltiplos valores mencionados, crie mltiplas ofertas."},{role:"user",content:`Analise esta conversa e extraia as informaes relevantes, prestando especial ateno a valores monetrios e prazos mencionados:
                  Cliente: ${Fe.contact.name}
                  Email: ${Fe.contact.email}
                  Telefone: ${Fe.contact.phone_number}
                  Canal: ${Fe.channel}
                  Status: ${Fe.status}
                  Mensagens:
                  ${Fe.messages.map(oe=>`[${oe.sender_type}] ${oe.created_at}: ${oe.content}`).join(`
`)}
                  Prioridade: ${Fe.priority||"normal"}
                  Atendente: ${(kt=Fe.assignee)==null?void 0:kt.name}`}],temperature:.7})})).json();let Ze;try{const oe=Qe.choices[0].message.content.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();Ze=JSON.parse(oe)}catch(oe){console.error("Erro ao parsear JSON da IA:",oe),Ze={title:`Conversa com ${fe.meta.sender.name}`,description:Fe.messages[Fe.messages.length-1].content||"Nova conversa",value:null,priority:fe.priority||"medium",scheduling_type:"deadline",scheduled_at:null,deadline_at:null,offers:[]}}return{funnel_id:_.value.id,funnel_stage:ue,position:ke,item_details:{title:Ze.title,description:Ze.description,value:Ze.value,priority:Ze.priority||fe.priority||"medium",conversation_id:fe.id,agent_id:(Q=fe.meta.assignee)==null?void 0:Q.id,contact_id:fe.meta.sender.id,channel:fe.meta.channel,status:fe.status,scheduling_type:Ze.scheduling_type||"deadline",scheduled_at:Ze.scheduled_at,deadline_at:Ze.deadline_at,offers:Ze.offers||[],currency:Ze.value||Ze.offers&&Ze.offers.length>0?{code:"BRL",locale:"pt-BR",symbol:"R$"}:null,custom_attributes:{}}}}))).filter(fe=>fe!==null);for(const fe of ce)await In.createItem(fe);return ce.length}catch(te){throw console.error("Erro ao criar itens:",te),te}},L=async()=>{var ue;if(!a.value.trim()||i.value)return;if(await ne("message_sent",{message:a.value}),!d.value&&!await A()){l.value=!0;return}const ae=a.value;a.value="",i.value=!0,o.value.push({type:"user",content:ae});try{if(ae.toLowerCase().includes("gerar")||ae.toLowerCase().includes("criar")){if(await C(),T.value.length===0){o.value.push({type:"ai",content:"Nenhum funil encontrado. Por favor, crie um funil primeiro."});return}g.value=!0,o.value.push({type:"ai",content:"Primeiro, selecione o funil onde deseja criar os itens:"}),i.value=!1;return}const te=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`Voc  um assistente especializado em metodologia Kanban e gesto gil de projetos. 
                     Para criar itens no quadro, o usurio deve usar as palavras "gerar" ou "criar".
                     Exemplo: "Gerar itens para o quadro" ou "Criar itens no kanban"`},{role:"user",content:ae}],temperature:.7})}),ce=await te.json();if(!te.ok)throw new Error(((ue=ce.error)==null?void 0:ue.message)||"Erro ao processar mensagem");o.value.push({type:"ai",content:ce.choices[0].message.content})}catch(te){console.error("Erro ao processar mensagem:",te),o.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao processar sua mensagem."})}finally{i.value=!1,M()}},D=async ae=>{var ue,te;await ne("source_selected",{source:ae}),h.value=!1,p.value=ae,u.value=!0;try{if(ae==="contacts"){o.value.push({type:"ai",content:"Ok, vou criar itens a partir dos contatos. Processando..."});const{data:ce}=await pl.get(1),fe=await R(ce.payload);o.value.push({type:"ai",content:` Criei ${fe} itens Kanban a partir dos contatos! Posso ajudar com mais alguma coisa?`})}else if(ae==="conversations"){o.value.push({type:"ai",content:"Ok, vou criar itens a partir das conversas. Processando..."});const fe=((te=(ue=(await bO.get()).data)==null?void 0:ue.data)==null?void 0:te.payload)||[],ke=await k(fe);o.value.push({type:"ai",content:` Criei ${ke} itens Kanban a partir das conversas! Posso ajudar com mais alguma coisa?`})}}catch(ce){console.error("Erro ao processar itens:",ce),o.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao criar os itens."})}finally{u.value=!1,p.value=null}},$=async ae=>{await ne("funnel_selected",{funnel_id:ae.id,funnel_name:ae.name}),_.value=ae,g.value=!1,p.value?(h.value=!0,o.value.push({type:"ai",content:"Agora, selecione a fonte dos dados para criar os itens:"})):await Y(ae),M()},M=()=>{r.value&&setTimeout(()=>{r.value.scrollTop=r.value.scrollHeight},100)};ut(async()=>{await A()});const K=[{id:"generate",title:"Gerar Itens",icon:"add",description:"Crie novos itens Kanban baseados em seus requisitos",action:"generate_items"},{id:"optimize",title:"Otimizar Fluxo",icon:"arrow-clockwise",description:"Receba sugestes para melhorar seu fluxo de trabalho",action:"analyze_flow"},{id:"schedule",title:"Agenda Inteligente",icon:"calendar",description:"Agendamento e priorizao de tarefas com IA",prompt:"Ajude-me a agendar e priorizar meus itens Kanban",disabled:!0,comingSoon:!0},{id:"analyze",title:"Analisar Quadro",icon:"arrow-trending-lines",description:"Obtenha insights sobre o desempenho do seu quadro",prompt:"Analise as mtricas do meu quadro Kanban e fornea insights",disabled:!0,comingSoon:!0}],B=async ae=>{if(await ne("quick_action_used",{action_id:ae.id}),ae.action==="generate_items"){if(await C(),T.value.length===0){o.value.push({type:"ai",content:"Nenhum funil encontrado. Por favor, crie um funil primeiro."});return}p.value="generate",g.value=!0,o.value.push({type:"ai",content:"Primeiro, selecione o funil onde deseja criar os itens:"}),M()}else ae.id==="optimize"?(o.value.push({type:"ai",content:"Vou ajudar voc a otimizar seu fluxo de trabalho."}),await V(),M()):(a.value=ae.prompt,L())},H=()=>{console.log("Abrindo modal de configurao"),l.value=!0},G=async(ae,ue=null)=>{try{const te=T.value.find(ke=>String(ke.id)===String(ae));if(!te)throw new Error("Funil no encontrado");let ce={...te.stages};if(ue.category==="ESTRUTURA"){const ke=ue.stage_data.name.toLowerCase().replace(/[^a-z0-9]+/g,"_");if(ue.title.toLowerCase().includes("adicionar"))ce={...ce,[ke]:{name:ue.stage_data.name,color:ue.stage_data.color,position:ue.stage_data.position,description:ue.stage_data.description}};else if(ue.title.toLowerCase().includes("remover")){const{[ke]:De,...Fe}=ce;ce=Fe}else ue.title.toLowerCase().includes("atualizar")&&(ce[ke]={...ce[ke],...ue.stage_data})}else if(ue.category==="TEMPLATE"){const ke=Object.entries(te.stages).find(([je,Qe])=>{const Ze=Qe.name.toLowerCase(),ft=ue.target_stage.toLowerCase();return Ze.includes(ft)||ft.includes(Ze)});if(!ke)throw new Error(`Etapa "${ue.target_stage}" no encontrada`);const[De,Fe]=ke;ce[De]={...Fe,message_templates:[...Fe.message_templates||[],{id:Date.now(),title:ue.title,content:ue.description,webhook:ue.webhook||{url:"",method:"POST",enabled:!1},stage_id:De,funnel_id:String(ae),conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]}}const fe={...te,stages:ce};await Js.update(te.id,fe),await Ia.dispatch("funnel/fetch"),o.value.push({type:"ai",content:` ${ue.category==="ESTRUTURA"?"Funil atualizado":"Template adicionado"} com sucesso!`})}catch(te){console.error("Erro ao aplicar sugesto:",te),o.value.push({type:"ai",content:te.message||"Desculpe, ocorreu um erro ao aplicar a sugesto."})}},V=async()=>{try{if(await C(),!T.value||T.value.length===0){o.value.push({type:"ai",content:"Nenhum funil encontrado para anlise."});return}o.value.push({type:"ai",content:"Primeiro, selecione o funil que voc deseja analisar:"}),g.value=!0,_.value=null,p.value=null}catch(ae){console.error("Erro ao carregar funis:",ae),o.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao carregar os funis."})}},Y=async ae=>{try{const ue=["Analisando estrutura do funil...","Verificando fluxo de trabalho...","Identificando oportunidades de melhoria...","Gerando sugestes personalizadas...","Finalizando anlise..."];o.value.push({type:"ai",isLoading:!0,content:{title:`Analisando o funil "${ae.name}"`,steps:ue,currentStep:0,progress:0}});for(let De=0;De<ue.length;De++)await new Promise(Fe=>setTimeout(Fe,1e3)),o.value[o.value.length-1].content.currentStep=De,o.value[o.value.length-1].content.progress=(De+1)/ue.length*100;const fe=(await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`Voc  um especialista em otimizao de funis Kanban.
                     Analise o funil e sugira melhorias em duas categorias:

                     1. ESTRUTURA (como no FunnelForm):
                     - Adicionar/Remover etapas
                     - Reordenar etapas
                     - Atualizar nomes e descries
                     - Campos disponveis: name, color, position, description
                     
                     2. TEMPLATE (como no MessageTemplateForm):
                     - Templates de mensagem para cada etapa
                     - Campos: title, content, webhook (opcional)
                     - Variveis disponveis:
                       {contact.name}, {contact.email}, {contact.phone}
                       {agent.name}, {stage.name}

                     IMPORTANTE: Retorne um JSON com o seguinte formato:
                     {
                       "suggestions": [
                         {
                           "title": "Ttulo da sugesto",
                           "description": "Detalhes da implementao",
                           "category": "ESTRUTURA|TEMPLATE",
                           "target_stage": "nome_da_etapa", // Para TEMPLATE
                           "stage_data": {  // Para ESTRUTURA
                             "name": "Nome da Etapa",
                             "color": "#HEX",
                             "position": 1,
                             "description": "Descrio"
                           },
                           "current_state": "Estado atual",
                           "expected_state": "Estado aps implementao",
                           "impact": "HIGH|MEDIUM|LOW",
                           "implementation": "EASY|MEDIUM|HARD"
                         }
                       ]
                     }`},{role:"user",content:`Analise este funil e sugira melhorias:
                     ${JSON.stringify(ae,null,2)}
                     
                     Considere:
                     - Tipo do funil: ${ae.name}
                     - Etapas atuais: ${Object.values(ae.stages).map(De=>De.name).join(", ")}
                     - Etapas sem descrio: ${Object.values(ae.stages).filter(De=>!De.description).length}
                     - Etapas com templates: ${Object.values(ae.stages).filter(De=>{var Fe;return((Fe=De.message_templates)==null?void 0:Fe.length)>0}).length}
                     
                     Sugira tanto melhorias na estrutura do funil quanto templates de mensagem apropriados.`}],temperature:.3})})).json()).choices[0].message.content.replace(/```json\s*/g,"").replace(/```\s*/g,"").replace(/^\s*{\s*/,"{").replace(/\s*}\s*$/,"}").trim();let ke;try{ke=JSON.parse(fe)}catch(De){throw console.error("Erro ao parsear JSON:",De),console.log("Contedo que falhou:",fe),new Error("Falha ao processar resposta da IA")}o.value.push({type:"ai",content:"Aqui esto os problemas identificados e suas solues:"}),ke.suggestions.forEach((De,Fe)=>{o.value.push({type:"ai",isCard:!0,content:{title:De.title,description:De.description,category:De.category,impact:De.impact,implementation:De.implementation,currentState:De.current_state,expectedState:De.expected_state},actions:[{label:"Aplicar esta soluo",value:`apply_${Fe}`,style:"primary",suggestion:De},{label:"Ignorar",value:`ignore_${Fe}`,style:"secondary"}]})})}catch(ue){console.error("Erro ao analisar funil:",ue),o.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao analisar o funil. Por favor, tente novamente."})}},ee=async(ae,ue)=>{ae.value==="apply_all"?await G(_.value.id):ae.value.startsWith("apply_")&&(E.value=ae.suggestion,y.value=X(ae.suggestion),S.value=!0)},X=ae=>{var te,ce,fe,ke,De,Fe,je;if(!ae)throw new Error("Sugesto invlida");const ue={type:ae.category,fields:[]};try{switch(ae.category){case"ESTRUTURA":{const Qe=((te=ae.action)==null?void 0:te.toLowerCase())||n("AI.ADD");ue.fields.push({type:Qe,field:"Etapa",details:[{label:"Nome",value:((ce=ae.stage_data)==null?void 0:ce.name)||"No definido"},{label:"Descrio",value:((fe=ae.stage_data)==null?void 0:fe.description)||"No definida"},{label:"Posio",value:((De=(ke=ae.stage_data)==null?void 0:ke.position)==null?void 0:De.toString())||"No definida"},{label:"Cor",value:((Fe=ae.stage_data)==null?void 0:Fe.color)||"#000000"}]});break}case"TEMPLATE":{ue.fields.push({type:"add",field:"Template de Mensagem",details:[{label:"Ttulo",value:ae.title||"No definido"},{label:"Contedo",value:ae.content||"No definido"},{label:"Etapa",value:ae.target_stage||"No definida"},{label:"Webhook",value:(je=ae.webhook)!=null&&je.enabled?"Ativado":"Desativado"}]});break}default:throw new Error(`Tipo de sugesto desconhecido: ${ae.category}`)}return ue}catch(Qe){throw console.error("Erro ao preparar preview das mudanas:",Qe),new Error("No foi possvel preparar o preview das mudanas")}},z=ae=>(ae==null?void 0:ae.toLowerCase().replace("_","-"))||"",W=ae=>(ae==null?void 0:ae.toLowerCase())||"",q=ae=>(ae==null?void 0:ae.toLowerCase())||"",Z=async()=>{try{await G(_.value.id,E.value),S.value=!1,E.value=null,y.value=null}catch(ae){console.error("Erro ao aplicar mudanas:",ae)}},ne=async(ae,ue={})=>{var te,ce,fe,ke,De;try{const je="https://api.os.stacklab.digital/api/events",Qe={installation_identifier:((te=window.installationConfig)==null?void 0:te.installationIdentifier)||Ia.state.globalConfig.installationIdentifier,installation_version:((ce=window.installationConfig)==null?void 0:ce.version)||Ia.state.globalConfig.version,installation_host:window.location.hostname,installation_env:"production",edition:((fe=window.installationConfig)==null?void 0:fe.edition)||Ia.state.globalConfig.edition,account_id:s,user_id:(ke=Ia.state.auth.currentUser)==null?void 0:ke.id,user_role:(De=Ia.state.auth.currentUser)==null?void 0:De.role},Ze={event_name:`kanban_ai_${ae}`,event_data:{...ue,...Qe,component:"KanbanAI",timestamp:new Date().toISOString()}};await fetch(je,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Ze)})}catch(Fe){console.error("Telemetry error:",Fe)}};return(ae,ue)=>{const te=F("fluent-icon"),ce=F("woot-button");return m(),f("div",znt,[ue[18]||(ue[18]=Bo('<header class="ai-header" data-v-92ad9d83><div class="flex items-center gap-3" data-v-92ad9d83><div class="header-avatar" data-v-92ad9d83><img src="https://img.freepik.com/free-psd/cute-3d-robot-waving-hand-cartoon-vector-icon-illustration-people-technology-isolated-flat-vector_138676-10649.jpg" alt="AI Avatar" class="header-avatar-image" data-v-92ad9d83></div><div class="header-text" data-v-92ad9d83><h2 class="text-lg relative z-10 font-semibold tracking-wide text-white" data-v-92ad9d83> Assistente Kanban AI </h2><p class="text-sm text-white/80 font-normal" data-v-92ad9d83> Otimize seu fluxo de trabalho com ajuda da IA </p></div></div></header>',1)),c("div",Wnt,[c("div",jnt,[c("div",{class:"flex justify-between items-center mb-4"},[ue[5]||(ue[5]=c("h3",{class:"section-title"},"Aes Rpidas",-1)),c("button",{onClick:H,class:"text-xs text-slate-500/50 dark:text-slate-400/50 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"}," Credenciais ")]),c("div",Ynt,[(m(),f(pe,null,ye(K,fe=>c("button",{key:fe.id,class:re(["action-card group",{disabled:fe.disabled}]),onClick:ke=>B(fe),disabled:fe.disabled},[c("div",qnt,[b(te,{icon:fe.icon,size:"18"},null,8,["icon"])]),c("div",Znt,[c("div",Qnt,[c("span",Jnt,v(fe.title),1),fe.comingSoon?(m(),f("span",est," Em breve ")):x("",!0)]),c("p",tst,v(fe.description),1)])],10,Xnt)),64))])]),c("div",nst,[ue[14]||(ue[14]=c("h3",{class:"section-title"},"Assistente IA",-1)),c("div",sst,[c("div",{class:"chat-messages",ref_key:"messagesContainer",ref:r},[(m(!0),f(pe,null,ye(o.value,(fe,ke)=>(m(),f("div",{key:ke,class:re(["message",fe.type])},[fe.type==="ai"?(m(),f("div",ast,ue[6]||(ue[6]=[c("img",{src:"https://img.freepik.com/free-psd/cute-3d-robot-waving-hand-cartoon-vector-icon-illustration-people-technology-isolated-flat-vector_138676-10649.jpg",alt:"AI Avatar",class:"avatar-image"},null,-1)]))):x("",!0),c("div",ost,[fe.isCard?(m(),f("div",ist,[c("div",lst,[c("h4",rst,v(fe.content.title),1),c("div",cst,[c("span",{class:re(["badge category-badge",z(fe.content.category)])},v(fe.content.category),3),c("span",{class:re(["badge impact-badge",W(fe.content.impact)])},v(fe.content.impact),3),c("span",{class:re(["badge implementation-badge",q(fe.content.implementation)])},v(fe.content.implementation),3)])]),c("div",dst,[c("div",ust,[ue[7]||(ue[7]=c("span",{class:"state-label"},"Estado Atual:",-1)),c("p",mst,v(fe.content.currentState),1)]),c("div",pst,[ue[8]||(ue[8]=c("span",{class:"state-label"},"Estado Esperado:",-1)),c("p",hst,v(fe.content.expectedState),1)])]),c("div",fst,[ue[9]||(ue[9]=c("span",{class:"solution-label"},"Soluo Proposta:",-1)),c("p",gst,v(fe.content.description),1)]),c("div",_st,[(m(!0),f(pe,null,ye(fe.actions,De=>(m(),P(ce,{key:De.value,variant:De.style,size:"small",class:"action-button",onClick:Fe=>ee(De)},{default:j(()=>[be(v(De.label),1)]),_:2},1032,["variant","onClick"]))),128))])])):fe.isLoading?(m(),f("div",vst,[c("h4",bst,v(fe.content.title),1),c("div",Est,[(m(!0),f(pe,null,ye(fe.content.steps,(De,Fe)=>(m(),f("div",{key:Fe,class:re(["loading-step",{completed:Fe<fe.content.currentStep,current:Fe===fe.content.currentStep}])},[c("div",Tst,[Fe<fe.content.currentStep?(m(),f("span",yst,"  ")):Fe===fe.content.currentStep?(m(),f("span",Ast)):(m(),f("span",Sst))]),c("span",Ist,v(De),1)],2))),128))]),c("div",Cst,[c("div",{class:"progress-fill",style:At({width:`${fe.content.progress}%`})},null,4)])])):(m(),f("p",Nst,v(fe.content),1)),g.value&&fe===o.value[o.value.length-1]?(m(),f("div",Ost,[(m(!0),f(pe,null,ye(T.value,De=>(m(),f("button",{key:De.id,class:"source-button",onClick:Fe=>$(De)},[ue[10]||(ue[10]=c("span",{class:"icon"},"",-1)),be(" "+v(De.name),1)],8,xst))),128))])):x("",!0),h.value&&fe===o.value[o.value.length-1]?(m(),f("div",wst,[c("button",{class:"source-button",onClick:ue[0]||(ue[0]=De=>D("contacts"))},ue[11]||(ue[11]=[c("span",{class:"icon"},"",-1),be(" Contatos ")])),c("button",{class:"source-button",onClick:ue[1]||(ue[1]=De=>D("conversations"))},ue[12]||(ue[12]=[c("span",{class:"icon"},"",-1),be(" Conversas ")]))])):x("",!0)])],2))),128))],512),c("div",Rst,[i.value?(m(),f("div",$st," IA est pensando... ")):x("",!0),c("div",Mst,[ie(c("input",{"onUpdate:modelValue":ue[2]||(ue[2]=fe=>a.value=fe),type:"text",placeholder:"Pergunte qualquer coisa sobre seu quadro Kanban...",class:"ai-input",onKeyup:Fn(L,["enter"])},null,544),[[at,a.value]]),c("button",{class:"send-button",disabled:i.value||!a.value.trim(),onClick:L},ue[13]||(ue[13]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"send-icon"},[c("path",{d:"M22 2L11 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,kst)])])])])]),l.value?(m(),P(Knt,{key:0,onClose:ue[3]||(ue[3]=fe=>l.value=!1)})):x("",!0),S.value?(m(),P(Wt,{key:1,show:S.value,"on-close":()=>S.value=!1},{default:j(()=>{var fe,ke,De;return[c("div",Lst,[ue[17]||(ue[17]=c("div",{class:"mb-6"},[c("h3",{class:"text-lg font-medium mb-2"},"Confirmar Alteraes"),c("p",{class:"text-sm text-slate-600 dark:text-slate-400"}," As seguintes alteraes sero aplicadas ao funil: ")],-1)),c("div",Dst,[c("div",Pst,[c("span",{class:re(["badge category-badge",z((fe=y.value)==null?void 0:fe.type)])},v((ke=y.value)==null?void 0:ke.type),3)]),(m(!0),f(pe,null,ye((De=y.value)==null?void 0:De.fields,(Fe,je)=>(m(),f("div",{key:je,class:"change-field"},[c("div",Bst,[c("span",{class:re(["change-type-badge",Fe.type])},v(Fe.type==="add"?"Adicionar":"Atualizar"),3),c("span",Fst,v(Fe.field),1)]),c("div",Ust,[(m(!0),f(pe,null,ye(Fe.details,(Qe,Ze)=>(m(),f("div",{key:Ze,class:"detail-item"},[c("span",Gst,v(Qe.label)+":",1),c("span",Vst,v(Qe.value),1),Qe.affected?(m(),f("span",Hst," Afeta: "+v(Qe.affected),1)):x("",!0)]))),128))])]))),128))]),c("div",Kst,[b(ce,{variant:"clear",onClick:ue[4]||(ue[4]=Fe=>S.value=!1)},{default:j(()=>ue[15]||(ue[15]=[be(" Cancelar ")])),_:1}),b(ce,{variant:"primary",onClick:Z},{default:j(()=>ue[16]||(ue[16]=[be(" Confirmar e Aplicar ")])),_:1})])])]}),_:1},8,["show","on-close"])):x("",!0)])}}},Wst=Re(zst,[["__scopeId","data-v-92ad9d83"]]),jst={key:0,class:"mb-4 p-4 bg-ruby-50 dark:bg-ruby-900/20 border border-ruby-200 dark:border-ruby-800 rounded-lg"},Yst={class:"flex items-center gap-2"},Xst={class:"text-ruby-700 dark:text-ruby-200"},qst={class:"grid grid-cols-[1fr_400px] gap-6"},Zst={class:"space-y-6"},Qst={class:"block text-sm font-medium mb-2"},Jst=["placeholder"],eat={class:"block text-sm font-medium mb-2"},tat=["placeholder"],nat={class:"text-lg font-medium mb-4"},sat={class:"flex items-center justify-between"},aat={class:"block text-sm font-medium mb-2"},oat=["placeholder"],iat={class:"flex items-start gap-2"},lat={class:"w-[180px] shrink-0"},rat={class:"block text-sm font-medium mb-2"},cat={class:"flex-1 min-w-0"},dat={class:"block text-sm font-medium mb-2"},uat=["placeholder"],mat={class:"flex justify-end"},pat={class:"border rounded-lg p-4 space-y-4"},hat={class:"space-y-4"},fat={class:"grid grid-cols-2 gap-3"},gat=["onClick"],_at={class:"relative"},vat={key:0,class:"absolute -top-1 -right-1 w-4 h-4 bg-woot-500 rounded-full flex items-center justify-center"},bat={class:"flex-1 min-w-0"},Eat={class:"font-medium text-sm truncate"},Tat={class:"text-xs text-slate-500 dark:text-slate-400 truncate"},yat={key:0,class:"flex items-center justify-center py-8"},Aat={key:1,class:"flex flex-col items-center justify-center py-8 text-slate-400"},Sat={key:2,class:"flex items-center justify-between px-4 py-2 bg-slate-50 dark:bg-slate-800 rounded-lg"},Iat={class:"text-sm text-slate-600 dark:text-slate-300"},Cat={class:"flex justify-end gap-2"},Nat={class:"border-woot border border-dashed rounded-lg p-6"},Oat={class:"sticky top-0"},xat={class:"text-lg font-medium mb-4"},wat={class:"space-y-3"},Rat={class:"flex items-center gap-4 p-3 border rounded-lg cursor-move hover:bg-slate-50"},$at={class:"flex-1"},Mat={class:"flex items-center gap-2"},kat={class:"font-medium"},Lat=["onClick"],Dat={class:"text-sm text-slate-600"},Pat={class:"text-slate-400"},Bat={key:0,class:"flex flex-col items-center justify-center py-8 text-slate-400"},Fat={class:"text-sm"},Uat={__name:"FunnelForm",props:{isEditing:{type:Boolean,default:!1},initialData:{type:Object,default:()=>({})}},emits:["saved","close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),{isStacklab:a}=Ra(),i=U(!1),l=U(""),r=U({name:n.initialData.name||"",description:n.initialData.description||"",stages:{},agents:n.initialData.agents||[]}),d=U([]),u=U({name:"",color:"#FF6B6B",description:""}),p=U(null),h={animation:150,ghostClass:"ghost-card"},g=U([]),_=U(!1),T=U(new Set),S=L=>L.toLowerCase().trim().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"");lt(()=>u.value.name,L=>{L&&!p.value&&(u.value.id=S(L))});const E=()=>{const L={};return d.value.forEach((D,$)=>{var B,H,G;const M=$+1,K=((G=(H=(B=n.initialData)==null?void 0:B.stages)==null?void 0:H[D.id])==null?void 0:G.message_templates)||[];L[D.id]={name:D.name,color:D.color,position:M,description:D.description,message_templates:K},console.log(`Formatando para API: ${D.name} -> posio ${M}`)}),L},y=async()=>{if(n.isEditing)try{d.value.forEach((D,$)=>{D.position=$+1,console.log(`Atualizando posio: ${D.name} -> posio ${D.position}`)});const L={name:r.value.name,description:r.value.description,stages:E()};console.log("Payload de ordenao:",L),n.initialData.stages=L.stages}catch(L){console.error("Erro ao atualizar ordem:",L)}},A=L=>{var D;if(!((D=L==null?void 0:L.target)!=null&&D.closest(".colorpicker--chrome"))&&u.value.name){if(p.value){const $=d.value.findIndex(M=>M.id===p.value.id);$!==-1&&(d.value[$]={...p.value,name:u.value.name,color:u.value.color,description:u.value.description,id:p.value.id},n.isEditing&&y()),p.value=null}else{let $=S(u.value.name),M=1;for(;T.value.has($);)$=`${S(u.value.name)}_${M}`,M++;d.value.push({...u.value,id:$}),T.value.add($)}u.value={name:"",color:"#FF6B6B",description:""}}},C=L=>{d.value.splice(L,1)};ut(()=>{console.log("FunnelForm mounted, initialData:",n.initialData),(n.isEditing||n.initialData)&&(console.log("Inicializando form com dados:",n.initialData),r.value={name:n.initialData.name||"",description:n.initialData.description||"",stages:n.initialData.stages||{},agents:n.initialData.agents||[]},console.log("formData atualizado:",r.value),n.initialData.stages&&(console.log("Inicializando etapas:",n.initialData.stages),d.value=Object.entries(n.initialData.stages).map(([L,D])=>{const $={id:L,name:D.name,color:D.color,description:D.description,position:parseInt(D.position,10)||0};return console.log("Etapa mapeada:",$),$}).sort((L,D)=>L.position-D.position),console.log("Etapas inicializadas e ordenadas por posio:",d.value))),O()});const O=async()=>{var L,D;try{_.value=!0;const{data:$}=await Bu.get();(D=(L=n.initialData)==null?void 0:L.agents)!=null&&D.length&&n.initialData.agents.forEach(M=>{$.find(K=>K.id===M.id)||$.push(M)}),g.value=$}catch($){console.error("Erro ao carregar agentes:",$)}finally{_.value=!1}},N=async()=>{var L,D;try{if(i.value=!0,l.value="",!a&&!n.isEditing){const{data:B}=await Js.get();if(B.length>=2){l.value=o("KANBAN.FUNNELS.FORM.ERROR_LIMIT_REACHED");return}}const $=E();console.log("Estgios formatados para submit:",$);const M={name:r.value.name,description:r.value.description,stages:$,agents:r.value.agents};let K;n.isEditing?K={data:{...n.initialData,...M,stages:M.stages}}:K=await Js.create(M),K.data&&s("saved",K.data)}catch($){console.error("Erro ao salvar funil:",$),((D=(L=$.response)==null?void 0:L.data)==null?void 0:D.code)==="FUNNEL_LIMIT_REACHED"?l.value=$.response.data.error:l.value=o("KANBAN.FUNNELS.FORM.ERROR_GENERIC")}finally{i.value=!1}},R=L=>{u.value={id:L.id,name:L.name,color:L.color,description:L.description},p.value=L};lt(()=>r.value.agents,L=>{console.log("Agentes atualizados:",L)});const k=L=>{const D=r.value.agents.findIndex($=>$.id===L.id);D===-1?r.value.agents.push(L):r.value.agents.splice(D,1)};return lt(()=>d.value,L=>{console.log("Etapas atualizadas:",L)},{deep:!0}),lt(()=>r.value,L=>{console.log("FormData atualizado:",L)},{deep:!0}),(L,D)=>{const $=F("fluent-icon");return m(),f("form",{class:"funnel-form",onSubmit:Ke(N,["prevent"])},[l.value?(m(),f("div",jst,[c("div",Yst,[b($,{icon:"error-circle",size:"20",class:"text-ruby-500 dark:text-ruby-300"}),c("span",Xst,v(l.value),1)])])):x("",!0),c("div",qst,[c("div",Zst,[c("div",null,[c("label",Qst,v(I(o)("KANBAN.FUNNELS.FORM.NAME.LABEL")),1),ie(c("input",{"onUpdate:modelValue":D[0]||(D[0]=M=>r.value.name=M),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(o)("KANBAN.FUNNELS.FORM.NAME.PLACEHOLDER"),required:""},null,8,Jst),[[at,r.value.name]])]),c("div",null,[c("label",eat,v(I(o)("KANBAN.FUNNELS.FORM.DESCRIPTION.LABEL")),1),ie(c("textarea",{"onUpdate:modelValue":D[1]||(D[1]=M=>r.value.description=M),rows:"3",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(o)("KANBAN.FUNNELS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,tat),[[at,r.value.description]])]),c("div",{class:re(["border rounded-lg p-4 space-y-4",{"border-2":p.value,"border-slate-200":!p.value}]),style:At(p.value?{borderColor:u.value.color}:{})},[c("h4",nat,[c("div",sat,[c("span",null,v(I(o)("KANBAN.FUNNELS.FORM.STAGES.TITLE")),1),p.value?(m(),f("span",{key:0,class:"text-sm px-2 py-1 rounded",style:At({backgroundColor:`${u.value.color}20`,color:u.value.color})},v(I(o)("KANBAN.FUNNELS.FORM.STAGES.EDITING")),5)):x("",!0)])]),c("div",null,[c("label",aat,v(I(o)("KANBAN.FUNNELS.FORM.STAGES.NAME")),1),ie(c("input",{"onUpdate:modelValue":D[2]||(D[2]=M=>u.value.name=M),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(o)("KANBAN.FUNNELS.FORM.STAGES.NAME_PLACEHOLDER")},null,8,oat),[[at,u.value.name]])]),c("div",iat,[c("div",lat,[c("label",rat,v(I(o)("KANBAN.FUNNELS.FORM.STAGES.COLOR")),1),b(Y2,{modelValue:u.value.color,"onUpdate:modelValue":D[3]||(D[3]=M=>u.value.color=M)},null,8,["modelValue"])]),c("div",cat,[c("label",dat,v(I(o)("KANBAN.FUNNELS.FORM.STAGES.DESCRIPTION")),1),ie(c("input",{"onUpdate:modelValue":D[4]||(D[4]=M=>u.value.description=M),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(o)("KANBAN.FUNNELS.FORM.STAGES.DESCRIPTION_PLACEHOLDER")},null,8,uat),[[at,u.value.description]])])]),c("div",mat,[b(he,{variant:"ghost",color:"slate",size:"sm",disabled:!u.value.name,onClick:Ke(A,["stop"])},{icon:j(()=>[b($,{icon:p.value?"checkmark":"add",size:"16"},null,8,["icon"])]),default:j(()=>[be(" "+v(I(o)(p.value?"SAVE":"KANBAN.FUNNELS.FORM.STAGES.ADD")),1)]),_:1},8,["disabled"])])],6),c("div",pat,[D[10]||(D[10]=c("h4",{class:"text-lg font-medium mb-4"},"Agentes do Funil",-1)),c("div",hat,[c("div",fat,[(m(!0),f(pe,null,ye(g.value,M=>(m(),f("div",{key:M.id,class:re(["flex items-center gap-3 p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors",{"border-woot-500 bg-woot-50 dark:bg-woot-900/20":r.value.agents.some(K=>K.id===M.id),"border-slate-200 dark:border-slate-700":!r.value.agents.some(K=>K.id===M.id)}]),onClick:K=>k(M)},[c("div",_at,[b(yn,{name:M.name,src:M.avatar_url,size:32,status:M.availability_status},null,8,["name","src","status"]),r.value.agents.some(K=>K.id===M.id)?(m(),f("div",vat,[b($,{icon:"checkmark",size:"12",class:"text-white"})])):x("",!0)]),c("div",bat,[c("div",Eat,v(M.name),1),c("div",Tat,v(M.email),1)])],10,gat))),128))]),_.value?(m(),f("div",yat,D[8]||(D[8]=[c("span",{class:"loading-spinner"},null,-1)]))):g.value.length?x("",!0):(m(),f("div",Aat,[b($,{icon:"people",size:"32",class:"mb-2"}),D[9]||(D[9]=c("p",{class:"text-sm"},"Nenhum agente disponvel",-1))])),r.value.agents.length?(m(),f("div",Sat,[c("span",Iat,v(r.value.agents.length)+" agente"+v(r.value.agents.length!==1?"s":"")+" selecionado"+v(r.value.agents.length!==1?"s":""),1),c("button",{type:"button",class:"text-xs text-ruby-500 hover:text-ruby-600 dark:text-ruby-400 dark:hover:text-ruby-300",onClick:D[5]||(D[5]=M=>r.value.agents=[])}," Limpar seleo ")])):x("",!0)])]),c("div",Cat,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:D[6]||(D[6]=M=>s("close"))},{default:j(()=>[be(v(I(o)("KANBAN.CANCEL")),1)]),_:1}),b(he,{variant:"solid",color:"blue",size:"sm",type:"submit",isLoading:i.value,disabled:!r.value.name||!d.value.length},{default:j(()=>[be(v(I(o)(e.isEditing?"KANBAN.SAVE":"KANBAN.FUNNELS.FORM.CREATE.TITLE")),1)]),_:1},8,["isLoading","disabled"])])]),c("div",Nat,[c("div",Oat,[c("h4",xat,v(I(o)("KANBAN.FUNNELS.FORM.STAGES.PREVIEW")),1),c("div",wat,[b(I(lr),{modelValue:d.value,"onUpdate:modelValue":D[7]||(D[7]=M=>d.value=M),options:h,"item-key":"id",class:"space-y-3",onChange:y},{item:j(({element:M,index:K})=>[c("div",Rat,[c("div",{class:"w-4 h-4 rounded-full",style:At({backgroundColor:M.color})},null,4),c("div",$at,[c("div",Mat,[c("div",kat,v(M.name),1),c("button",{type:"button",class:"text-xs hover:underline",style:At({color:`${M.color}99`}),onClick:Ke(B=>R(M),["stop"])},v(I(o)("KANBAN.FUNNELS.FORM.STAGES.EDIT_STAGE")),13,Lat)]),c("div",Dat,[be(v(M.description)+" ",1),c("span",Pat,"("+v(M.id)+")",1)])]),b(he,{variant:"ghost",color:"ruby",size:"sm",onClick:B=>C(K)},{icon:j(()=>[b($,{icon:"delete",size:"16"})]),_:2},1032,["onClick"])])]),_:1},8,["modelValue"]),d.value.length?x("",!0):(m(),f("div",Bat,[b($,{icon:"list",size:"32",class:"mb-2"}),c("p",Fat,v(I(o)("KANBAN.FUNNELS.FORM.STAGES.EMPTY")),1)]))])])])])],32)}}},Mm=Re(Uat,[["__scopeId","data-v-3035eb2f"]]),Gat={class:"space-y-6"},Vat={key:0,class:"space-y-6"},Hat={class:"text-center space-y-2"},Kat={class:"text-lg font-medium"},zat={class:"text-sm text-slate-500"},Wat={class:"relative pt-1"},jat={class:"flex mb-2 items-center justify-between"},Yat={class:"text-right"},Xat={class:"text-xs font-semibold inline-block"},qat={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-slate-200"},Zat={class:"border rounded-lg divide-y max-h-[400px] overflow-y-auto"},Qat={class:"flex items-center gap-3"},Jat={class:"flex-shrink-0"},eot={class:"flex-1"},tot={class:"text-sm font-medium"},not={class:"text-xs text-slate-500"},sot={key:0,class:"text-xs text-ruby-500 mt-1"},aot={class:"flex justify-end"},oot={key:1,class:"space-y-6"},iot={class:"space-y-4"},lot={class:"flex items-center justify-between"},rot={class:"text-sm font-medium"},cot={class:"flex items-center gap-4"},dot={class:"flex items-center gap-2 text-sm"},uot={key:0,class:"space-y-4"},mot={class:"bg-woot-50 p-4 rounded-lg space-y-2"},pot={class:"flex items-center justify-between"},hot={class:"text-sm font-medium"},fot={class:"flex flex-wrap gap-2"},got={key:0,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-woot-100"},_ot=["onClick"],vot={key:1,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-woot-100"},bot=["onClick"],Eot={class:"space-y-4"},Tot={class:"flex items-center justify-between"},yot={class:"text-sm font-medium"},Aot={class:"text-xs text-slate-500"},Sot={class:"grid grid-cols-2 gap-4"},Iot={class:"block text-sm mb-2"},Cot={value:""},Not={value:"open"},Oot={value:"won"},xot={value:"lost"},wot={class:"block text-sm mb-2"},Rot={value:""},$ot={value:"urgent"},Mot={value:"high"},kot={value:"medium"},Lot={value:"low"},Dot={class:"block text-sm mb-2"},Pot={value:""},Bot=["value"],Fot={class:"block text-sm mb-2"},Uot={value:""},Got={value:"today"},Vot={value:"week"},Hot={value:"month"},Kot={class:"flex items-center gap-4"},zot={class:"flex items-center gap-2"},Wot={class:"text-sm"},jot={key:1,class:"max-h-60 overflow-y-auto border rounded-lg divide-y"},Yot=["onClick"],Xot=["checked"],qot={key:2,class:"text-center text-sm text-slate-500 py-4"},Zot={class:"space-y-4"},Qot={class:"text-sm font-medium"},Jot={key:0,class:"flex justify-center"},eit={key:1,class:"space-y-4"},tit={value:""},nit=["value"],sit={key:0,class:"p-4 bg-slate-50 rounded-lg"},ait={class:"text-sm"},oit={class:"p-4 bg-woot-50 rounded-lg"},iit={class:"text-sm"},lit={class:"flex justify-end gap-2"},rit={__name:"BulkSendMessageModal",props:{items:{type:Array,required:!0}},emits:["close","send"],setup(e,{emit:t}){const n=hn();w(()=>{var $;return($=n.getters.getCurrentAccount)==null?void 0:$.id});const s=w(()=>n.getters["funnel/getSelectedFunnel"]),o=e,a=t,{t:i}=He(),l=U(!1),r=U(!1),d=U([]),u=U(null),p=U({status:"",priority:"",hasAttachments:!1,stage:"",assignee:"",lastActivity:"",tags:[],customFields:[]}),h=U([]),g=U(new Set),_=U(!1),T=U([]),S=U(0),E=U(0),y=U(0),A=U(!1),C=async()=>{try{l.value=!0;const $=await Js.get(),M=[];$.data.forEach(K=>{Object.values(K.stages).forEach(B=>{B.message_templates&&M.push(...B.message_templates)})}),d.value=M}catch($){console.error("Erro ao carregar templates:",$)}finally{l.value=!1}},O=async()=>{var $;try{if(!(($=s.value)!=null&&$.id))return;const M=await In.getItems(s.value.id);console.log("[DEBUG] Todos os itens:",M.data.length),h.value=M.data.filter(K=>o.items.some(B=>B.id===K.id)),console.log("[DEBUG] Items filtrados:",h.value.length),console.log("[DEBUG] IDs das conversas:",h.value.map(K=>{var B,H;return{itemId:K.id,conversationId:(B=K.item_details)==null?void 0:B.conversation_id,hasConversation:!!((H=K.item_details)!=null&&H.conversation)}}))}catch(M){console.error("Erro ao carregar itens:",M)}},N=w(()=>h.value.filter($=>{var M,K,B;if(!((M=$.item_details)!=null&&M.conversation_id)||p.value.status&&$.item_details.status!==p.value.status||p.value.priority&&$.item_details.priority!==p.value.priority||p.value.hasAttachments&&!((K=$.attachments)!=null&&K.length)||p.value.stage&&$.funnel_stage!==p.value.stage||p.value.assignee&&$.item_details.agent_id!==p.value.assignee)return!1;if(p.value.lastActivity){const H=new Date((B=$.item_details.conversation)==null?void 0:B.last_activity_at),V=Math.floor((new Date-H)/(1e3*60*60*24));switch(p.value.lastActivity){case"today":if(V>0)return!1;break;case"week":if(V>7)return!1;break;case"month":if(V>30)return!1;break}}return!0})),R=$=>{const M=$.item_details.conversation_id;g.value.has(M)?g.value.delete(M):g.value.add(M)},k=()=>{g.value.size===N.value.length?g.value.clear():g.value=new Set(N.value.map($=>$.item_details.conversation_id))},L=async()=>{var $;if(!(!u.value||g.value.size===0))try{_.value=!0,r.value=!0,T.value=[],S.value=0,E.value=0,y.value=0;const M=N.value.filter(K=>g.value.has(K.item_details.conversation_id));for(const K of M){try{const B=K.item_details.conversation_id,H=(($=K.item_details.conversation)==null?void 0:$.inbox_id)||1;await lu.create({conversationId:B,message:u.value.content,private:!1,message_type:"outgoing",inbox_id:H}),T.value.push({id:K.id,title:K.item_details.title,conversationId:B,status:"success"}),S.value++}catch(B){T.value.push({id:K.id,title:K.item_details.title,conversationId:K.item_details.conversation_id,status:"error",error:B.message}),E.value++}y.value=T.value.length/M.length*100}yt.emit("newToastMessage",{message:`Processo concludo: ${S.value} mensagens enviadas, ${E.value} falhas`,action:{type:S.value>0?"success":"error"}})}catch{yt.emit("newToastMessage",{message:"Erro ao processar envios",action:{type:"error"}})}finally{r.value=!1}},D=()=>{_.value&&(_.value=!1,T.value=[],S.value=0,E.value=0,y.value=0),a("close")};return ut(()=>{C(),O()}),($,M)=>{var B;const K=F("fluent-icon");return m(),f("div",Gat,[_.value?(m(),f("div",Vat,[c("div",Hat,[c("h3",Kat,v(I(i)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.PROCESSING_TITLE")),1),c("p",zat,v(I(i)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.PROCESSING_DESCRIPTION",{count:T.value.length,total:g.value.size})),1)]),c("div",Wat,[c("div",jat,[c("div",null,[c("span",{class:re(["text-xs font-semibold inline-block py-1 px-2 rounded-full",{"text-emerald-600 bg-emerald-200":y.value===100,"text-woot-500 bg-woot-100":y.value<100}])},v(Math.round(y.value))+"% ",3)]),c("div",Yat,[c("span",Xat,v(S.value)+" "+v(I(i)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.SUCCESS"))+"  "+v(E.value)+" "+v(I(i)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.ERROR")),1)])]),c("div",qat,[c("div",{style:At({width:`${y.value}%`}),class:re(["transition-all duration-500 shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center",{"bg-emerald-500":y.value===100,"bg-woot-500":y.value<100}])},null,6)])]),c("div",Zat,[(m(!0),f(pe,null,ye(T.value,H=>(m(),f("div",{key:H.id,class:"p-3 flex items-center justify-between hover:bg-slate-50"},[c("div",Qat,[c("span",Jat,[b(K,{icon:H.status==="success"?"checkmark-circle":"error-circle",size:"20",class:re(H.status==="success"?"text-emerald-500":"text-ruby-500")},null,8,["icon","class"])]),c("div",eot,[c("p",tot,v(H.title),1),c("p",not,v(I(i)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.CONVERSATION_ID",{id:H.conversationId})),1),H.error?(m(),f("p",sot,v(H.error),1)):x("",!0)])]),c("span",{class:re(["text-xs px-2 py-1 rounded-full",H.status==="success"?"bg-emerald-100 text-emerald-700":"bg-ruby-100 text-ruby-700"])},v(H.status==="success"?"Enviado":"Falha"),3)]))),128))]),c("div",aot,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:D},{default:j(()=>[be(v(I(i)("KANBAN.BULK_ACTIONS.CANCEL")),1)]),_:1})])])):(m(),f("div",oot,[c("div",iot,[c("div",lot,[c("h4",rot,v(I(i)("KANBAN.BULK_ACTIONS.SELECTED_CONVERSATIONS",{count:g.value.size,total:N.value.length})),1),c("div",cot,[c("label",dot,[ie(c("input",{type:"checkbox","onUpdate:modelValue":M[0]||(M[0]=H=>A.value=H),class:"toggle"},null,512),[[Kt,A.value]]),c("span",null,v(I(i)("KANBAN.BULK_ACTIONS.FILTER_ITEMS")),1)]),b(he,{variant:"ghost",color:"slate",size:"sm",onClick:k},{default:j(()=>[be(v(g.value.size===N.value.length?I(i)("KANBAN.BULK_ACTIONS.DESELECT_ALL"):I(i)("KANBAN.BULK_ACTIONS.SELECT_ALL")),1)]),_:1})])]),A.value?(m(),f("div",uot,[c("div",mot,[c("div",pot,[c("h4",hot,v(I(i)("KANBAN.BULK_ACTIONS.FILTERS_ACTIVE")),1),b(he,{variant:"ghost",color:"slate",size:"sm",onClick:M[1]||(M[1]=H=>p.value={status:"",priority:"",hasAttachments:!1,stage:"",assignee:"",lastActivity:"",tags:[],customFields:[]})},{default:j(()=>[be(v(I(i)("KANBAN.BULK_ACTIONS.CLEAR_FILTERS")),1)]),_:1})]),c("div",fot,[(m(!0),f(pe,null,ye(p.value,(H,G)=>(m(),f(pe,{key:G},[H&&typeof H!="boolean"?(m(),f("span",got,[be(v(G)+": "+v(H)+" ",1),c("button",{class:"text-slate-500 hover:text-slate-700",onClick:V=>p.value[G]=""},"  ",8,_ot)])):H===!0?(m(),f("span",vot,[be(v(G)+" ",1),c("button",{class:"text-slate-500 hover:text-slate-700",onClick:V=>p.value[G]=!1},"  ",8,bot)])):x("",!0)],64))),128))])]),c("div",Eot,[c("div",Tot,[c("h4",yot,v(I(i)("KANBAN.BULK_ACTIONS.FILTER_CONVERSATIONS")),1),c("span",Aot,v(I(i)("KANBAN.BULK_ACTIONS.FILTER_CONVERSATIONS_COUNT",{count:N.value.length})),1)]),c("div",Sot,[c("div",null,[c("label",Iot,v(I(i)("KANBAN.BULK_ACTIONS.ITEM_STATUS.TITLE")),1),ie(c("select",{"onUpdate:modelValue":M[2]||(M[2]=H=>p.value.status=H),class:"w-full rounded-lg"},[c("option",Cot,v(I(i)("KANBAN.BULK_ACTIONS.ITEM_STATUS.ALL")),1),c("option",Not,v(I(i)("KANBAN.BULK_ACTIONS.ITEM_STATUS.OPEN")),1),c("option",Oot,v(I(i)("KANBAN.BULK_ACTIONS.ITEM_STATUS.WON")),1),c("option",xot,v(I(i)("KANBAN.BULK_ACTIONS.ITEM_STATUS.LOST")),1)],512),[[Mt,p.value.status]])]),c("div",null,[c("label",wot,v(I(i)("KANBAN.BULK_ACTIONS.PRIORITY.TITLE")),1),ie(c("select",{"onUpdate:modelValue":M[3]||(M[3]=H=>p.value.priority=H),class:"w-full rounded-lg"},[c("option",Rot,v(I(i)("KANBAN.BULK_ACTIONS.PRIORITY.ALL")),1),c("option",$ot,v(I(i)("KANBAN.BULK_ACTIONS.PRIORITY.URGENT")),1),c("option",Mot,v(I(i)("KANBAN.BULK_ACTIONS.PRIORITY.HIGH")),1),c("option",kot,v(I(i)("KANBAN.BULK_ACTIONS.PRIORITY.MEDIUM")),1),c("option",Lot,v(I(i)("KANBAN.BULK_ACTIONS.PRIORITY.LOW")),1)],512),[[Mt,p.value.priority]])]),c("div",null,[c("label",Dot,v(I(i)("KANBAN.BULK_ACTIONS.STAGE.TITLE")),1),ie(c("select",{"onUpdate:modelValue":M[4]||(M[4]=H=>p.value.stage=H),class:"w-full rounded-lg"},[c("option",Pot,v(I(i)("KANBAN.BULK_ACTIONS.STAGE.ALL")),1),(m(!0),f(pe,null,ye(Object.keys(((B=s.value.value)==null?void 0:B.stages)||{}),H=>{var G,V;return m(),f("option",{key:H,value:H},v((V=(G=s.value.value)==null?void 0:G.stages[H])==null?void 0:V.name),9,Bot)}),128))],512),[[Mt,p.value.stage]])]),c("div",null,[c("label",Fot,v(I(i)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.TITLE")),1),ie(c("select",{"onUpdate:modelValue":M[5]||(M[5]=H=>p.value.lastActivity=H),class:"w-full rounded-lg"},[c("option",Uot,v(I(i)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.ANY")),1),c("option",Got,v(I(i)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.TODAY")),1),c("option",Vot,v(I(i)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.WEEK")),1),c("option",Hot,v(I(i)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.MONTH")),1)],512),[[Mt,p.value.lastActivity]])])]),c("div",Kot,[c("label",zot,[ie(c("input",{type:"checkbox","onUpdate:modelValue":M[6]||(M[6]=H=>p.value.hasAttachments=H),class:"rounded"},null,512),[[Kt,p.value.hasAttachments]]),c("span",Wot,v(I(i)("KANBAN.BULK_ACTIONS.HAS_ATTACHMENTS")),1)])])])])):x("",!0),N.value.length>0?(m(),f("div",jot,[(m(!0),f(pe,null,ye(N.value,H=>(m(),f("div",{key:H.id,class:"p-2 text-sm hover:bg-slate-50 flex items-center gap-2 cursor-pointer",onClick:G=>R(H)},[c("input",{type:"checkbox",checked:g.value.has(H.item_details.conversation_id),class:"rounded",onClick:M[7]||(M[7]=Ke(()=>{},["stop"]))},null,8,Xot),c("span",null,v(H.item_details.title)+" - "+v(I(i)("KANBAN.BULK_ACTIONS.CONVERSATION_ID",{id:H.item_details.conversation_id})),1)],8,Yot))),128))])):(m(),f("div",qot,v(I(i)("KANBAN.BULK_ACTIONS.NO_CONVERSATIONS_AVAILABLE")),1))]),c("div",Zot,[c("h4",Qot,v(I(i)("KANBAN.BULK_ACTIONS.SELECT_MESSAGE_TEMPLATE")),1),l.value?(m(),f("div",Jot,M[9]||(M[9]=[c("span",{class:"loading-spinner"},null,-1)]))):(m(),f("div",eit,[ie(c("select",{"onUpdate:modelValue":M[8]||(M[8]=H=>u.value=H),class:re(["w-full rounded-lg",{"border-ruby-500":!u.value}])},[c("option",tit,v(I(i)("KANBAN.BULK_ACTIONS.MESSAGE_TEMPLATE_SELECT")),1),(m(!0),f(pe,null,ye(d.value,H=>(m(),f("option",{key:H.id,value:H},v(H.title),9,nit))),128))],2),[[Mt,u.value]]),u.value?(m(),f("div",sit,[c("p",ait,v(u.value.content),1)])):x("",!0)]))]),c("div",oit,[c("p",iit,v(I(i)("KANBAN.BULK_ACTIONS.MESSAGE_SUMMARY",{count:g.value.size,total:e.items.length})),1)]),c("div",lit,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:D},{default:j(()=>M[10]||(M[10]=[be(" Cancelar ")])),_:1}),b(he,{variant:"solid",color:"blue",size:"sm",isLoading:r.value,disabled:!u.value||g.value.size===0,onClick:L},{default:j(()=>[be(v(I(i)("KANBAN.BULK_ACTIONS.SEND_MESSAGES")),1)]),_:1},8,["isLoading","disabled"])])]))])}}},cit=Re(rit,[["__scopeId","data-v-ffe5cd2a"]]),dit={class:"kanban-header"},uit={class:"header-left"},mit={style:{display:"none"}},pit={class:"view-toggle-buttons hidden md:flex"},hit={class:"search-input-wrapper"},fit=["placeholder"],git={key:0,class:"search-results-tags"},_it={class:"search-results-tag"},vit={class:"stage-name"},bit={class:"count-badge"},Eit={class:"header-right"},Tit={class:"bulk-actions-selector md:block hidden"},yit={class:"lg:inline hidden"},Ait={key:0,class:"dropdown-menu"},Sit=["onClick"],Iit={key:0,class:"filter-badge"},Cit={class:"share-button-container md:flex hidden"},Nit={key:0,class:"agents-stack"},Oit={key:0,class:"more-agents"},xit={class:"share-button-text lg:inline hidden"},wit={class:"relative md:block hidden"},Rit={class:"flex items-center gap-2"},$it={class:"flex items-center gap-2"},Mit={class:"settings-selector"},kit=["onClick"],Lit={class:"p-4"},Dit={class:"flex flex-col gap-3"},Pit={class:"text-xs text-slate-500 dark:text-slate-400"},Bit={class:"text-xs text-slate-500 dark:text-slate-400"},Fit={class:"w-full p-6"},Uit={class:"text-lg font-medium mb-6"},Git={key:1,class:"text-center text-red-500"},Vit={class:"p-4 space-y-4"},Hit={class:"flex items-center justify-between"},Kit={class:"text-lg font-medium"},zit={class:"relative"},Wit={class:"max-h-[300px] overflow-y-auto space-y-2"},jit=["onClick"],Yit={class:"flex-1 min-w-0"},Xit={class:"font-medium text-sm truncate"},qit={class:"text-xs text-slate-500 dark:text-slate-400 truncate"},Zit={class:"p-6"},Qit={class:"text-lg font-medium mb-4"},Jit={class:"p-6"},elt={__name:"KanbanHeader",props:{currentStage:{type:String,default:""},searchResults:{type:Object,default:()=>({total:0,stages:{}})},columns:{type:Array,default:()=>[]},activeFilters:{type:Object,default:null},currentView:{type:String,default:"kanban"},kanbanItems:{type:Array,required:!0}},emits:["filter","itemCreated","search","itemsUpdated","switchView","newToastMessage"],setup(e,{emit:t}){const n=(Q,oe)=>{let de;return(...Ce)=>{clearTimeout(de),de=setTimeout(()=>Q(...Ce),oe)}},{t:s}=He(),o=hn(),{isStacklab:a}=Ra();console.log("KanbanHeader - isStacklab value:",a),lt(()=>a,Q=>{console.log("KanbanHeader - isStacklab changed to:",Q)});const i=t,l=U(!1),r=w(()=>o.getters["funnel/getSelectedFunnel"]),d=e,u=U(!1),p=U(!1),h=U("");U(!1);const g=U(!1),_=U(!1),T=[{id:"add",label:s("KANBAN.BULK_ACTIONS.ADD.TITLE"),icon:"add"},{id:"move",label:s("KANBAN.BULK_ACTIONS.MOVE.TITLE"),icon:"arrow-right"},{id:"delete",label:s("KANBAN.BULK_ACTIONS.DELETE.TITLE"),icon:"delete"},{id:"show_hidden",label:s("KANBAN.BULK_ACTIONS.SHOW_HIDDEN"),icon:"eye-show"},{id:"send_message",label:s("KANBAN.BULK_ACTIONS.SEND_MESSAGE.TITLE"),icon:"chat"}],S=w(()=>T.filter(Q=>Q.id!=="send_message"||a===!0)),E=U(!1),y=U(!1),A=U(!1),C=U(!1),O=U(!1),N=w(()=>{const Q=o.getters.getCurrentUser;return(Q==null?void 0:Q.role)==="administrator"}),R=w(()=>{const Q=[{id:"kanban_settings",label:s("KANBAN.MORE_OPTIONS.KANBAN_SETTINGS"),icon:"settings"}];return a===!0&&Q.push({id:"message_templates",label:s("KANBAN.MORE_OPTIONS.MESSAGE_TEMPLATES"),icon:"document"}),N.value&&Q.unshift({id:"manage_funnels",label:s("KANBAN.MORE_OPTIONS.MANAGE_FUNNELS"),icon:"task"}),Q}),k=Q=>{Q.id==="kanban_settings"?u.value=!0:Q.id==="manage_funnels"?i("switchView","funnels"):Q.id==="automations"?i("switchView","automation-editor"):Q.id==="message_templates"&&ue(),C.value=!1},L=()=>{C.value=!C.value},D=()=>{g.value=!g.value},$=Q=>{if(Q.id==="show_hidden")_.value=!_.value,(d.columns.some(de=>JSON.parse(localStorage.getItem(`kanban_column_${de.id}_settings`)||"{}").hideColumn===!0)||!_.value)&&(d.columns.forEach(de=>{const Ce=JSON.parse(localStorage.getItem(`kanban_column_${de.id}_settings`)||"{}");Ce.hideColumn===!0&&(Ce.hideColumn=!_.value,localStorage.setItem(`kanban_column_${de.id}_settings`,JSON.stringify(Ce)))}),i("itemsUpdated"));else if(Q.id==="delete")E.value=!0;else if(Q.id==="move")y.value=!0;else if(Q.id==="add")A.value=!0;else if(Q.id==="send_message"){if(Qe.value.length===0){i("newToastMessage",{message:"Nenhum item com conversa vinculada",action:{type:"warning"}});return}Fe.value=!0}g.value=!1},M=U(!1),K=Q=>{i("filter",Q),M.value=!1},B=()=>{u.value=!1},H=U(!1),G=()=>{O.value=!O.value},V=()=>{var Q;if(!((Q=r.value)!=null&&Q.id)){i("newToastMessage",{message:s("KANBAN.ERRORS.NO_FUNNEL_SELECTED"),action:{type:"error"}});return}l.value=!0,O.value=!1},Y=()=>{H.value=!0,O.value=!1},ee=Q=>{H.value=!1,i("itemsUpdated")},X=async Q=>{i("itemCreated",Q),l.value=!1},z=()=>{p.value=!p.value,p.value?Zt(()=>{document.getElementById("kanban-search").focus()}):(h.value="",i("search",""))};lt(h,Q=>{Q&&(p.value=!0)});const W=n(Q=>{const oe=Q.target.value;h.value=oe,i("search",oe)},300),q=async Q=>{try{await Promise.all(Q.map(oe=>In.deleteItem(oe))),E.value=!1,i("itemsUpdated")}catch(oe){console.error("Erro ao excluir itens:",oe)}},Z=async({itemIds:Q,stageId:oe})=>{try{await Promise.all(Q.map(de=>In.moveToStage(de,oe))),y.value=!1,i("itemsUpdated")}catch(de){console.error("Erro ao mover itens:",de)}},ne=async()=>{A.value=!1,i("itemsUpdated")},ae=Q=>{const oe=d.columns.find(de=>de.title===Q);return oe!=null&&oe.color?`${oe.color}`:"#64748B"},ue=()=>{i("switchView","templates")},te=w(()=>{var oe,de,Ce,Ae,Le;if(!d.activeFilters)return 0;let Q=0;return(oe=d.activeFilters.priority)!=null&&oe.length&&Q++,((de=d.activeFilters.value)!=null&&de.min||(Ce=d.activeFilters.value)!=null&&Ce.max)&&Q++,d.activeFilters.agent_id&&Q++,((Ae=d.activeFilters.date)!=null&&Ae.start||(Le=d.activeFilters.date)!=null&&Le.end)&&Q++,Q}),ce=U(!1),fe=w(()=>{var de,Ce;const Q=((Ce=(de=r.value)==null?void 0:de.settings)==null?void 0:Ce.agents)||[];if(!h.value)return Q;const oe=h.value.toLowerCase();return Q.filter(Ae=>Ae.name.toLowerCase().includes(oe)||Ae.email.toLowerCase().includes(oe))}),ke=()=>{ce.value=!0},De=async Q=>{var oe,de;try{const Ce=((oe=r.value.settings)==null?void 0:oe.agents)||[],Ae=Ce.findIndex(Ue=>Ue.id===Q.id);let Le;Ae===-1?Le=[...Ce,Q]:Le=Ce.filter(Ue=>Ue.id!==Q.id);const Me={...r.value,settings:{...r.value.settings,agents:Le,optimization_history:((de=r.value.settings)==null?void 0:de.optimization_history)||[]},stages:Object.entries(r.value.stages||{}).reduce((Ue,[we,ge])=>({...Ue,[we]:{...ge,message_templates:ge.message_templates||[]}}),{})};await Js.update(r.value.id,Me),await o.dispatch("funnel/fetch")}catch(Ce){console.error("Erro ao atualizar agentes:",Ce)}};ut(()=>{document.addEventListener("click",Q=>{Q.target.closest(".settings-selector, .bulk-actions-selector, .kanban-add-item-trigger")||kt()})}),ia(()=>{document.removeEventListener("click",kt)});const Fe=U(!1),je=U(!1),Qe=w(()=>d.kanbanItems.filter(Q=>{var oe;return(oe=Q.item_details)==null?void 0:oe.conversation_id})),Ze=async()=>{Fe.value=!1,i("newToastMessage",{message:"Mensagens enviadas com sucesso",action:{type:"success"}})},ft=U(!1),kt=()=>{C.value=!1,O.value=!1,g.value=!1};return(Q,oe)=>{var Ce,Ae,Le;const de=F("fluent-icon");return m(),f("header",dit,[c("div",uit,[I(a)===!0?(m(),f("button",{key:0,class:"kanban-ai-button md:flex hidden",onClick:ke},[c("span",mit,v(console.log("Template rendering - isStacklab:",I(a))),1),oe[32]||(oe[32]=c("svg",{class:"lightning-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M13 3L4 14H12L11 21L20 10H12L13 3Z",fill:"currentColor"})],-1)),oe[33]||(oe[33]=c("span",{class:"lg:inline hidden"},"Kanban AI",-1))])):x("",!0),c("button",{class:"view-select-btn md:hidden flex items-center gap-1 px-2 py-1.5 rounded-lg bg-slate-100 dark:bg-slate-700",onClick:oe[0]||(oe[0]=Me=>ft.value=!0)},[b(de,{icon:e.currentView==="kanban"?"task":e.currentView==="list"?"list":"calendar",size:"16"},null,8,["icon"]),b(de,{icon:"chevron-down",size:"12"})]),c("div",pit,[b(he,{size:"sm",variant:e.currentView==="kanban"?"faded":"ghost",color:e.currentView==="kanban"?"blue":"slate",onClick:oe[1]||(oe[1]=Me=>i("switchView","kanban"))},{icon:j(()=>[b(de,{icon:"task",size:"16"})]),_:1},8,["variant","color"]),I(a)===!0?(m(),P(he,{key:0,size:"sm",variant:e.currentView==="list"?"faded":"ghost",color:e.currentView==="list"?"blue":"slate",onClick:oe[2]||(oe[2]=Me=>i("switchView","list"))},{icon:j(()=>[b(de,{icon:"list",size:"16"})]),_:1},8,["variant","color"])):x("",!0),I(a)===!0?(m(),P(he,{key:1,size:"sm",variant:e.currentView==="agenda"?"faded":"ghost",color:e.currentView==="agenda"?"blue":"slate",onClick:oe[3]||(oe[3]=Me=>i("switchView","agenda"))},{icon:j(()=>[b(de,{icon:"calendar",size:"16"})]),_:1},8,["variant","color"])):x("",!0)]),b($_,{class:"md:block hidden"}),c("div",{class:re(["search-container md:flex hidden",{"is-active":p.value}])},[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:z},{icon:j(()=>[b(de,{icon:"search",size:"16"})]),_:1}),ie(c("div",hit,[ie(c("input",{id:"kanban-search","onUpdate:modelValue":oe[4]||(oe[4]=Me=>h.value=Me),type:"search",class:"search-input",placeholder:I(s)("KANBAN.SEARCH.INPUT_PLACEHOLDER"),onInput:oe[5]||(oe[5]=(...Me)=>I(W)&&I(W)(...Me)),onBlur:oe[6]||(oe[6]=Me=>!h.value&&(p.value=!1))},null,40,fit),[[at,h.value]])],512),[[ln,p.value]]),p.value&&h.value&&e.searchResults.total>0?(m(),f("div",git,[c("div",_it,v(e.searchResults.total)+" resultado(s) ",1),(m(!0),f(pe,null,ye(e.searchResults.stages,(Me,Ue)=>(m(),f("div",{key:Ue,class:"search-results-tag",style:At({backgroundColor:ae(Ue)})},[c("span",vit,v(Ue),1),c("span",bit,v(Me),1)],4))),128))])):x("",!0)],2)]),c("div",Eit,[c("div",Tit,[b(he,{variant:"link",color:"slate",size:"sm",onClick:D},{icon:j(()=>[b(de,{icon:"list",size:"16"})]),default:j(()=>[c("span",yit,v(I(s)("KANBAN.BULK_ACTIONS.TITLE")),1),b(de,{icon:"chevron-down",size:"16",class:"ml-1"})]),_:1}),g.value?(m(),f("div",Ait,[(m(!0),f(pe,null,ye(S.value,Me=>(m(),f("div",{key:Me.id,class:"dropdown-item",onClick:Ue=>$(Me)},[b(de,{icon:Me.icon,size:"16",class:"mr-2"},null,8,["icon"]),c("span",null,v(Me.label),1),Me.id==="show_hidden"?(m(),f("span",{key:0,class:re(["ml-2 text-xs px-1.5 rounded-full",{"bg-woot-500 text-white":_.value,"bg-slate-100 text-slate-600":!_.value}])},v(_.value?"Ativo":"Inativo"),3)):x("",!0)],8,Sit))),128))])):x("",!0)]),b(he,{variant:"ghost",color:"slate",class:"relative",onClick:oe[7]||(oe[7]=Me=>Q.$emit("filter"))},{icon:j(()=>[b(de,{icon:"filter",size:"16"})]),default:j(()=>[te.value>0?(m(),f("span",Iit,v(te.value),1)):x("",!0)]),_:1}),c("div",Cit,[(Le=(Ae=(Ce=r.value)==null?void 0:Ce.settings)==null?void 0:Ae.agents)!=null&&Le.length?(m(),f("div",Nit,[(m(!0),f(pe,null,ye(r.value.settings.agents.slice(0,3),(Me,Ue)=>(m(),P(yn,{key:Me.id,name:Me.name,src:Me.avatar_url,size:24,class:"agent-avatar",style:At({zIndex:3-Ue})},null,8,["name","src","style"]))),128)),r.value.settings.agents.length>3?(m(),f("div",Oit," +"+v(r.value.settings.agents.length-3),1)):x("",!0)])):x("",!0),b(he,{variant:"solid",color:"blue",size:"sm",onClick:oe[8]||(oe[8]=Me=>je.value=!0)},{icon:j(()=>[b(de,{icon:"share",size:"16"})]),default:j(()=>[c("span",xit,v(I(s)("KANBAN.SHARE.TITLE")),1)]),_:1})]),c("div",wit,[b(he,{variant:"solid",color:"blue",size:"sm",class:"kanban-add-item-trigger",onClick:G},{icon:j(()=>[b(de,{icon:"add",size:"16"})]),_:1}),O.value?(m(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-2 w-48 z-10",onClick:oe[9]||(oe[9]=Ke(()=>{},["stop"]))},[c("div",{class:"px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",onClick:V},[c("span",Rit,[b(de,{icon:"add",size:"16"}),be(" "+v(I(s)("KANBAN.ADD_ITEM")),1)])]),c("div",{class:"px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",onClick:Y},[c("span",$it,[b(de,{icon:"task",size:"16"}),be(" "+v(I(s)("KANBAN.FUNNELS.ACTIONS.NEW")),1)])])])):x("",!0)]),c("div",Mit,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:L,title:N.value?"":"Apenas administradores podem gerenciar funis"},{icon:j(()=>[b(de,{icon:"more-vertical",size:"16"})]),_:1},8,["title"]),C.value?(m(),f("div",{key:0,class:"dropdown-menu",onMouseleave:oe[10]||(oe[10]=Me=>C.value=!1)},[(m(!0),f(pe,null,ye(R.value,Me=>(m(),f("div",{key:Me.id,class:"dropdown-item",onClick:Ue=>k(Me)},[b(de,{icon:Me.icon,size:"16",class:"mr-2"},null,8,["icon"]),be(" "+v(Me.label),1)],8,kit))),128))],32)):x("",!0)])]),b(Wt,{show:ft.value,"onUpdate:show":oe[14]||(oe[14]=Me=>ft.value=Me),"on-close":()=>ft.value=!1,size:"tiny"},{default:j(()=>[c("div",Lit,[oe[37]||(oe[37]=c("h3",{class:"text-lg font-medium mb-4"},"Selecionar visualizao",-1)),c("div",Dit,[c("button",{class:re(["flex items-center gap-3 p-3 rounded-lg text-left",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-300":e.currentView==="kanban","hover:bg-slate-50 dark:hover:bg-slate-700":e.currentView!=="kanban"}]),onClick:oe[11]||(oe[11]=Me=>{i("switchView","kanban"),ft.value=!1})},[b(de,{icon:"task",size:"20"}),oe[34]||(oe[34]=c("div",null,[c("div",{class:"font-medium"},"Kanban"),c("div",{class:"text-xs text-slate-500 dark:text-slate-400"}," Visualizao em quadro ")],-1))],2),c("button",{class:re(["flex items-center gap-3 p-3 rounded-lg text-left",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-300":e.currentView==="list","hover:bg-slate-50 dark:hover:bg-slate-700":e.currentView!=="list"}]),onClick:oe[12]||(oe[12]=Me=>{i("switchView","list"),ft.value=!1})},[b(de,{icon:"list",size:"20"}),c("div",null,[oe[35]||(oe[35]=c("div",{class:"font-medium"},"Lista",-1)),c("div",Pit,v(I(s)("VIEW_MODES.LIST")),1)])],2),c("button",{class:re(["flex items-center gap-3 p-3 rounded-lg text-left",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-300":e.currentView==="agenda","hover:bg-slate-50 dark:hover:bg-slate-700":e.currentView!=="agenda"}]),onClick:oe[13]||(oe[13]=Me=>{i("switchView","agenda"),ft.value=!1})},[b(de,{icon:"calendar",size:"20"}),c("div",null,[oe[36]||(oe[36]=c("div",{class:"font-medium"},"Agenda",-1)),c("div",Bit,v(I(s)("KANBAN.VIEW_MODES.AGENDA")),1)])],2)])])]),_:1},8,["show","on-close"]),b(Wt,{show:l.value,"onUpdate:show":oe[16]||(oe[16]=Me=>l.value=Me),"on-close":()=>l.value=!1,size:"large"},{default:j(()=>[c("div",Fit,[c("h3",Uit,v(I(s)("KANBAN.ADD_ITEM")),1),r.value?(m(),P(ul,{key:0,"funnel-id":r.value.id,stage:e.currentStage,onSaved:X,onClose:oe[15]||(oe[15]=Me=>l.value=!1)},null,8,["funnel-id","stage"])):(m(),f("div",Git,v(I(s)("KANBAN.ERRORS.NO_FUNNEL_SELECTED")),1))])]),_:1},8,["show","on-close"]),b(Stt,{show:u.value,onClose:B},null,8,["show"]),b(Wt,{show:E.value,"onUpdate:show":oe[18]||(oe[18]=Me=>E.value=Me),"on-close":()=>E.value=!1},{default:j(()=>[b(Utt,{items:e.kanbanItems,onClose:oe[17]||(oe[17]=Me=>E.value=!1),onConfirm:q},null,8,["items"])]),_:1},8,["show","on-close"]),b(Wt,{show:y.value,"onUpdate:show":oe[20]||(oe[20]=Me=>y.value=Me),"on-close":()=>y.value=!1},{default:j(()=>[b(lnt,{items:e.kanbanItems,onClose:oe[19]||(oe[19]=Me=>y.value=!1),onConfirm:Z},null,8,["items"])]),_:1},8,["show","on-close"]),b(Wt,{show:A.value,"onUpdate:show":oe[22]||(oe[22]=Me=>A.value=Me),"on-close":()=>A.value=!1},{default:j(()=>[b(Mnt,{"current-stage":e.currentStage,onClose:oe[21]||(oe[21]=Me=>A.value=!1),onItemsCreated:ne},null,8,["current-stage"])]),_:1},8,["show","on-close"]),b(G_,{show:M.value,"current-funnel":r.value,size:"large",onClose:oe[23]||(oe[23]=Me=>M.value=!1),onApply:K},null,8,["show","current-funnel"]),b(Wt,{show:ce.value,"onUpdate:show":oe[25]||(oe[25]=Me=>ce.value=Me),"on-close":()=>ce.value=!1,size:"large",class:"ai-modal","hide-close-button":""},{default:j(()=>[b(Wst,{onClose:oe[24]||(oe[24]=Me=>ce.value=!1)})]),_:1},8,["show","on-close"]),b(Wt,{show:je.value,"onUpdate:show":oe[27]||(oe[27]=Me=>je.value=Me),"on-close":()=>je.value=!1,size:"tiny"},{default:j(()=>[c("div",Vit,[c("div",Hit,[c("h3",Kit,v(I(s)("KANBAN.SHARE.TITLE")),1)]),c("div",zit,[ie(c("input",{"onUpdate:modelValue":oe[26]||(oe[26]=Me=>h.value=Me),type:"text",class:"w-full px-3 py-2 border rounded-lg pr-8",placeholder:"Buscar agentes..."},null,512),[[at,h.value]]),b(de,{icon:"search",size:"16",class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400"})]),c("div",Wit,[(m(!0),f(pe,null,ye(fe.value,Me=>{var Ue,we,ge,J;return m(),f("div",{key:Me.id,class:re(["flex items-center gap-3 p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",{"bg-woot-50 dark:bg-woot-900/20":(we=(Ue=r.value.settings)==null?void 0:Ue.agents)==null?void 0:we.some(Ee=>Ee.id===Me.id)}]),onClick:Ee=>De(Me)},[b(yn,{name:Me.name,src:Me.avatar_url,size:32,status:Me.availability_status},null,8,["name","src","status"]),c("div",Yit,[c("div",Xit,v(Me.name),1),c("div",qit,v(Me.email),1)]),(J=(ge=r.value.settings)==null?void 0:ge.agents)!=null&&J.some(Ee=>Ee.id===Me.id)?(m(),P(de,{key:0,icon:"checkmark",size:"16",class:"text-woot-500"})):x("",!0)],10,jit)}),128))])])]),_:1},8,["show","on-close"]),b(Wt,{show:H.value,"onUpdate:show":oe[29]||(oe[29]=Me=>H.value=Me),"on-close":()=>H.value=!1,size:"large"},{default:j(()=>[c("div",Zit,[c("h3",Qit,v(I(s)("KANBAN.FUNNELS.ACTIONS.NEW")),1),b(Mm,{onSaved:ee,onClose:oe[28]||(oe[28]=Me=>H.value=!1)})])]),_:1},8,["show","on-close"]),b(Wt,{show:Fe.value,"onUpdate:show":oe[31]||(oe[31]=Me=>Fe.value=Me),"on-close":()=>Fe.value=!1,size:"medium"},{default:j(()=>[c("div",Jit,[oe[38]||(oe[38]=c("h3",{class:"text-lg font-medium mb-4"},"Enviar Mensagens em Massa",-1)),b(cit,{items:Qe.value,onClose:oe[30]||(oe[30]=Me=>Fe.value=!1),onSend:Ze},null,8,["items"])])]),_:1},8,["show","on-close"])])}}},V_=Re(elt,[["__scopeId","data-v-4c7555c1"]]),tlt={class:"flex flex-col h-full bg-white dark:bg-slate-900"},nlt={key:0,class:"flex justify-center items-center flex-1"},slt={key:1,class:"flex justify-center items-center flex-1 text-ruby-500"},alt={key:2,class:"flex flex-col items-center justify-center flex-1 p-8 text-center"},olt={class:"text-xl font-medium text-slate-700 dark:text-slate-300 mb-2"},ilt={class:"text-sm text-slate-600 dark:text-slate-400 max-w-md mb-6"},llt={key:3,class:"flex flex-col items-center justify-center flex-1 p-8 text-center"},rlt={class:"w-16 h-16 mb-4 text-slate-400"},clt={class:"text-xl font-medium text-slate-700 dark:text-slate-300 mb-2"},dlt={class:"text-sm text-slate-600 dark:text-slate-400 max-w-md"},ult={key:4,class:"flex-1 overflow-x-auto kanban-columns"},mlt={key:0,class:"absolute top-2 right-2 flex items-center text-sm text-slate-500"},plt={class:"flex h-full p-4 space-x-4"},hlt={key:0,class:"hidden"},flt={class:"p-6"},glt={class:"text-lg font-medium"},_lt={key:1,class:"text-center text-red-500"},vlt={class:"p-6"},blt={class:"text-lg font-medium mb-4"},Elt={class:"text-sm text-slate-600 dark:text-slate-400 mb-6"},Tlt={class:"flex justify-end space-x-2"},ylt={class:"p-6"},Alt={class:"text-lg font-medium mb-4"},Slt={class:"p-6"},Ilt={class:"text-lg font-medium mb-6"},Clt={__name:"KanbanTab",props:{currentView:{type:String,default:"kanban"},kanbanItems:{type:Array,required:!0},isLoading:{type:Boolean,required:!0}},emits:["switchView","itemsUpdated","search","forceUpdate","itemClick"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=hn(),i=w(()=>a.state.kanban.error),l=U([]),r=U(!1),d=U(null),u=w(()=>a.getters["funnel/getSelectedFunnel"]),p=U(!1),h=U(null),g=U(!1),_=U(null),T=U(!1),S=U(null),E=U(null),y=U(!1),A=U({total:0,stages:{}});U(0);const C=U(!1),O=U(""),N=U(!1),R=()=>{const ae=a.getters["funnel/getSelectedFunnel"];if(!(ae!=null&&ae.stages))return;console.log("[ORDENAO] Estgios do funil:",ae.stages);const ue=Object.entries(ae.stages).map(([te,ce])=>({id:te,title:ce.name,color:ce.color,description:ce.description,position:parseInt(ce.position,10)||0,items:n.kanbanItems.filter(fe=>fe.funnel_stage===te&&(ae==null?void 0:ae.id)&&fe.funnel_id&&Number(fe.funnel_id)===Number(ae.id))}));console.log("[ORDENAO] Array de estgios (antes de ordenar):",ue.map(te=>`${te.title} (${te.position})`)),ue.sort((te,ce)=>te.position-ce.position),console.log("[ORDENAO] Array de estgios (aps ordenao):",ue.map(te=>`${te.title} (${te.position})`)),l.value=ue};lt(()=>n.kanbanItems,()=>{R()},{deep:!0}),lt(u,ae=>{ae&&(console.log("[ORDENAO-FUNIL] Novo funil selecionado:",ae.name),ae.stages&&Object.values(ae.stages).forEach(ue=>{ue.position=parseInt(ue.position,10)||0}),R())},{immediate:!0});const k=ae=>{d.value=l.value.find(ue=>ue.id===ae),r.value=!0},L=async ae=>{var ue,te;try{C.value=!0,await a.dispatch("kanban/deleteKanbanItem",ae.id),p.value=!1,h.value=null}catch(ce){yt.emit("newToastMessage",{message:((te=(ue=ce.response)==null?void 0:ue.data)==null?void 0:te.message)||o("KANBAN.ERROR_DELETING_ITEM"),action:{type:"error"}})}finally{C.value=!1}},D=async({itemId:ae,columnId:ue})=>{var te,ce;if(!(!ae||!ue))try{C.value=!0,await a.dispatch("kanban/moveItemToStage",{itemId:parseInt(ae,10),columnId:ue}),Zt(()=>{R()})}catch(fe){yt.emit("newToastMessage",{message:((ce=(te=fe.response)==null?void 0:te.data)==null?void 0:ce.message)||o("KANBAN.ERROR_MOVING_ITEM"),action:{type:"error"}})}finally{C.value=!1}},$=()=>{yt.emit("newToastMessage",{message:o("KANBAN.SETTINGS_NOT_IMPLEMENTED"),action:{type:"info"}})},M=async ae=>{ae&&(r.value=!1,d.value=null)},K=ae=>{O.value=ae},B=()=>{y.value=!1,E.value||a.dispatch("kanban/fetchKanbanItems")},H=ae=>{E.value=ae||{}},G=ae=>{_.value=ae,g.value=!0},V=ae=>{s("itemClick",ae)},Y=ae=>{T.value=!1,G(ae)},ee=()=>{},X=async ae=>{ae&&(g.value=!1,_.value=null,Zt(()=>{R()}))},z=ae=>{ae&&a.dispatch("funnel/fetchFunnels").then(()=>{a.dispatch("funnel/setSelectedFunnel",ae.id)}),N.value=!1},W=w(()=>{var te,ce;const ae=a.getters.getCurrentUser,ue=a.getters["funnel/getSelectedFunnel"];return!ue||!ae?!1:ae.role==="administrator"?!0:(ce=(te=ue.settings)==null?void 0:te.agents)==null?void 0:ce.some(fe=>fe.id===ae.id)}),q=w(()=>{let ae=[...l.value];console.log("[ORDENAO-FILTER] Colunas originais:",ae.map(ce=>`${ce.title} (posio: ${ce.position})`)),O.value&&(ae=ae.map(ce=>({...ce,items:ce.items.filter(fe=>{var je,Qe;const ke=O.value.toLowerCase(),De=(((je=fe.item_details)==null?void 0:je.title)||"").toLowerCase(),Fe=(((Qe=fe.item_details)==null?void 0:Qe.description)||"").toLowerCase();return De.includes(ke)||Fe.includes(ke)})})));const ue=a.getters.getCurrentUser,te=(ue==null?void 0:ue.role)==="administrator";return ae=ae.map(ce=>({...ce,items:ce.items.filter(fe=>{var De;return te?!0:(((De=fe.item_details)==null?void 0:De.agent_id)||fe.assigned_agent_id)===ue.id})})),E.value&&(ae=ae.map(ce=>({...ce,items:ce.items.filter(fe=>{var ke,De,Fe;if(E.value.priority&&E.value.priority.length>0){const je=((ke=fe.item_details)==null?void 0:ke.priority)||"none";if(!E.value.priority.includes(je))return!1}if(E.value.value_min||E.value.value_max){const je=parseFloat((De=fe.item_details)==null?void 0:De.value)||0;if(E.value.value_min&&je<parseFloat(E.value.value_min)||E.value.value_max&&je>parseFloat(E.value.value_max))return!1}if(E.value.agent_id){const je=parseInt(E.value.agent_id,10);if(((Fe=fe.item_details)==null?void 0:Fe.agent_id)!==je)return!1}if(E.value.date_start||E.value.date_end){const je=new Date(fe.created_at);if(E.value.date_start){const Qe=new Date(E.value.date_start);if(je<Qe)return!1}if(E.value.date_end){const Qe=new Date(E.value.date_end);if(Qe.setHours(23,59,59),je>Qe)return!1}}return!0})}))),ae.sort((ce,fe)=>{const ke=parseInt(ce.position,10)||0,De=parseInt(fe.position,10)||0;return ke-De}),console.log("[ORDENAO-FILTER] Colunas aps ordenao final:",ae.map(ce=>`${ce.title} (posio: ${ce.position})`)),ae}),Z=w(()=>{if(!O.value)return{total:0,stages:{}};const ae={total:0,stages:{}};return q.value.forEach(ue=>{ue.items.length>0&&(ae.stages[ue.title]=ue.items.length,ae.total+=ue.items.length)}),ae}),ne=w(()=>(console.log("[ORDENAO-RENDER] Colunas filtradas na renderizao:",q.value.map(ae=>`${ae.title} (posio: ${ae.position})`)),!0));return(ae,ue)=>{var fe;const te=F("woot-button"),ce=F("fluent-icon");return m(),f("div",tlt,[b(V_,{"current-view":e.currentView,"current-stage":(fe=d.value)==null?void 0:fe.id,"search-results":Z.value,columns:q.value,"active-filters":E.value,"kanban-items":e.kanbanItems,onFilter:ue[0]||(ue[0]=ke=>y.value=!0),onSettings:$,onItemCreated:M,onItemsUpdated:ue[1]||(ue[1]=()=>I(a).dispatch("kanban/fetchKanbanItems")),onSearch:K,onSwitchView:ue[2]||(ue[2]=ke=>s("switchView",ke))},null,8,["current-view","current-stage","search-results","columns","active-filters","kanban-items"]),e.isLoading?(m(),f("div",nlt,ue[15]||(ue[15]=[c("span",{class:"loading-spinner"},null,-1)]))):i.value?(m(),f("div",slt,v(i.value),1)):!u.value&&!e.isLoading&&!i.value?(m(),f("div",alt,[c("h3",olt,v(I(o)("KANBAN.FUNNELS.FORM.CREATE_FIRST")),1),c("p",ilt,v(I(o)("KANBAN.FUNNELS.FORM.CREATE_FIRST_MESSAGE")),1),b(te,{variant:"primary","color-scheme":"woot",icon:"add",onClick:ue[3]||(ue[3]=ke=>N.value=!0)},{default:j(()=>[be(v(I(o)("KANBAN.FUNNELS.FORM.CREATE_BUTTON")),1)]),_:1})])):W.value?(m(),f("div",ult,[C.value?(m(),f("div",mlt,[ue[16]||(ue[16]=c("span",{class:"loading-spinner-small mr-2"},null,-1)),be(" "+v(I(o)("KANBAN.UPDATING")),1)])):x("",!0),c("div",plt,[ne.value?(m(),f("div",hlt)):x("",!0),(m(!0),f(pe,null,ye(q.value.slice().sort((ke,De)=>ke.position-De.position),ke=>(m(),P(mtt,{key:ke.id,id:ke.id,title:ke.title,color:ke.color,items:ke.items,count:ke.items.length,"total-columns":q.value.length,onAdd:k,onEdit:G,onDelete:L,onDrop:D,onItemClick:V},null,8,["id","title","color","items","count","total-columns"]))),128))])])):(m(),f("div",llt,[c("div",rlt,[b(ce,{icon:"lock-closed",size:"64"})]),c("h3",clt,v(I(o)("KANBAN.ACCESS_RESTRICTED")),1),c("p",dlt,v(I(o)("KANBAN.ACCESS_RESTRICTED_MESSAGE")),1)])),b(Wt,{show:r.value,"onUpdate:show":ue[5]||(ue[5]=ke=>r.value=ke),size:"full-width","on-close":()=>r.value=!1},{default:j(()=>[c("div",flt,[c("h3",glt,v(I(o)("KANBAN.ADD_ITEM")),1),d.value&&u.value?(m(),P(ul,{key:0,"funnel-id":u.value.id,stage:d.value.id,position:d.value.position,onSaved:M,onClose:ue[4]||(ue[4]=ke=>r.value=!1)},null,8,["funnel-id","stage","position"])):(m(),f("div",_lt,v(I(o)("KANBAN.ERRORS.NO_FUNNEL_SELECTED")),1))])]),_:1},8,["show","on-close"]),b(Wt,{show:p.value,"onUpdate:show":ue[8]||(ue[8]=ke=>p.value=ke),"on-close":()=>{p.value=!1,h.value=null}},{default:j(()=>{var ke;return[c("div",vlt,[c("h3",blt,v(I(o)("KANBAN.DELETE_CONFIRMATION.TITLE")),1),c("p",Elt,v(I(o)("KANBAN.DELETE_CONFIRMATION.MESSAGE",{item:(ke=h.value)==null?void 0:ke.title})),1),c("div",Tlt,[b(te,{variant:"clear","color-scheme":"secondary",onClick:ue[6]||(ue[6]=De=>p.value=!1)},{default:j(()=>[be(v(I(o)("KANBAN.CANCEL")),1)]),_:1}),b(te,{variant:"solid","color-scheme":"alert",onClick:ue[7]||(ue[7]=De=>L(h.value))},{default:j(()=>[be(v(I(o)("KANBAN.DELETE")),1)]),_:1})])])]}),_:1},8,["show","on-close"]),b(Wt,{show:g.value,"onUpdate:show":ue[10]||(ue[10]=ke=>g.value=ke),size:"full-width","on-close":()=>{g.value=!1,_.value=null}},{default:j(()=>[c("div",ylt,[c("h3",Alt,v(I(o)("KANBAN.FORM.EDIT_ITEM")),1),_.value&&u.value?(m(),P(ul,{key:0,"funnel-id":u.value.id,stage:_.value.funnel_stage,position:_.value.position,"initial-data":_.value,"is-editing":"",onSaved:X,onClose:ue[9]||(ue[9]=ke=>g.value=!1)},null,8,["funnel-id","stage","position","initial-data"])):x("",!0)])]),_:1},8,["show","on-close"]),b(Wt,{show:T.value,"onUpdate:show":ue[12]||(ue[12]=ke=>T.value=ke),size:"full-width","on-close":()=>{T.value=!1,S.value=null}},{default:j(()=>[S.value?(m(),P(xm,{key:0,item:S.value,onClose:ue[11]||(ue[11]=()=>{T.value=!1,S.value=null,ee()}),onEdit:Y,onItemUpdated:ee},null,8,["item"])):x("",!0)]),_:1},8,["show","on-close"]),b(Wt,{show:N.value,"onUpdate:show":ue[14]||(ue[14]=ke=>N.value=ke),size:"large","on-close":()=>N.value=!1},{default:j(()=>[c("div",Slt,[c("h3",Ilt,v(I(o)("KANBAN.FUNNELS.FORM.CREATE.TITLE")),1),b(Mm,{onSaved:z,onClose:ue[13]||(ue[13]=ke=>N.value=!1)})])]),_:1},8,["show","on-close"]),b(G_,{show:y.value,columns:l.value,"filtered-results":A.value,"current-funnel":I(a).getters["funnel/getSelectedFunnel"],onClose:B,onApply:H},null,8,["show","columns","filtered-results","current-funnel"])])}}},vE=Re(Clt,[["__scopeId","data-v-94e3f12c"]]),Nlt={class:"flex flex-col h-full w-full bg-white dark:bg-slate-900"},Olt={class:"deals-list p-4 flex-1 overflow-auto w-full"},xlt={key:0,class:"flex justify-center items-center py-12"},wlt={key:1,class:"flex justify-center items-center py-12 text-ruby-500"},Rlt={key:2,class:"flex flex-col items-center justify-center py-12"},$lt={class:"text-lg text-slate-600"},Mlt={key:3,class:"space-y-2 w-full max-w-full"},klt=["onClick"],Llt={class:"flex items-center gap-2"},Dlt={class:"font-medium text-slate-800 dark:text-slate-200"},Plt={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-200 dark:bg-slate-700"},Blt={class:"flex items-center gap-2"},Flt={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Ult={class:"divide-y divide-slate-100 dark:divide-slate-800"},Glt=["onClick"],Vlt={class:"flex-1"},Hlt={class:"flex items-center gap-2"},Klt={class:"font-medium text-slate-900 dark:text-slate-100"},zlt={key:0,class:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md"},Wlt={class:"text-right text-sm font-medium text-slate-800 dark:text-slate-200"},jlt={key:0,class:"flex items-center gap-2"},Ylt={key:0,class:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-sm font-medium text-slate-600"},Xlt=["src","alt"],qlt={class:"p-6"},Zlt={class:"text-lg font-medium mb-4"},Qlt={class:"text-sm text-slate-600 mb-6"},Jlt={class:"flex justify-end gap-2"},ert={__name:"ListTab",props:{currentView:{type:String,default:"list"},kanbanItems:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},labelsMap:{type:Object,default:()=>({})}},emits:["switch-view","itemClick","force-update","itemsUpdated"],setup(e,{emit:t}){const{t:n}=He(),s=hn();wn();const o=U(!1),a=U([]),i=U(null),l=U(""),r=U(null),d=t,u=w(()=>s.getters["funnel/getSelectedFunnel"]),p=U(!1);U(!1),U(!1),U({x:0,y:0});const h=U(null);U(null);const g=U(!1),_=U(new Set);U(!1),U(null);const T=e;w(()=>{const $=s.getters["funnel/getFunnels"]||[],M={};return $.forEach(K=>{M[K.id]=K}),M});const S=()=>{try{const $=u.value;if(!($!=null&&$.id)){i.value="Nenhum funil selecionado";return}const M=T.kanbanItems.filter(K=>String(K.funnel_id)===String($.id));console.log("Items encontrados para o funil atual:",M.length),a.value=M.map(K=>{var G,V,Y,ee,X,z,W;const B=((G=$.stages[K.funnel_stage])==null?void 0:G.name)||"",H=((V=$.stages[K.funnel_stage])==null?void 0:V.color)||"#64748B";return{id:K.id,title:((Y=K.item_details)==null?void 0:Y.title)||"",description:((ee=K.item_details)==null?void 0:ee.description)||"",priority:((X=K.item_details)==null?void 0:X.priority)||"none",assignee:((z=K.item_details)==null?void 0:z.agent)||null,value:((W=K.item_details)==null?void 0:W.value)||0,stage:K.funnel_stage,stageName:B,stageColor:H,createdAt:new Date(K.created_at).toLocaleDateString(),item_details:K.item_details,funnel_id:String(K.funnel_id)}}),console.log("Deals processados:",a.value.length)}catch($){console.error("Erro ao processar deals:",$),i.value=$.message}};lt(()=>T.kanbanItems,()=>S(),{immediate:!0,deep:!0}),lt(()=>u.value,()=>S()),lt(()=>s.getters["funnel/getFunnels"],()=>S()),ut(()=>{u.value&&S()});const E=w(()=>{let $=a.value;if(l.value){const M=l.value.toLowerCase();$=$.filter(K=>{var B;return K.title.toLowerCase().includes(M)||K.description.toLowerCase().includes(M)||((B=K.assignee)==null?void 0:B.name.toLowerCase().includes(M))})}if(r.value){const M=r.value;$=$.filter(K=>{var H,G,V,Y,ee,X;let B=!0;if((H=M.priority)!=null&&H.length&&(B=B&&M.priority.includes(K.priority)),(G=M.value)!=null&&G.min||(V=M.value)!=null&&V.max){const z=parseFloat(K.value)||0;M.value.min&&(B=B&&z>=parseFloat(M.value.min)),M.value.max&&(B=B&&z<=parseFloat(M.value.max))}if(M.agent_id&&(B=B&&((Y=K.assignee)==null?void 0:Y.id)===M.agent_id),(ee=M.date)!=null&&ee.start||(X=M.date)!=null&&X.end){const z=new Date(K.createdAt);M.date.start&&(B=B&&z>=new Date(M.date.start)),M.date.end&&(B=B&&z<=new Date(M.date.end))}return B})}return $}),y=$=>{l.value=$},A=$=>{r.value=$},C=w(()=>{if(!l.value)return{total:0,stages:{}};const $={total:E.value.length,stages:{}};return E.value.forEach(M=>{$.stages[M.stageName]||($.stages[M.stageName]=0),$.stages[M.stageName]++}),$}),O=w(()=>{const $=u.value;if(!($!=null&&$.stages))return console.log("Sem funil selecionado ou sem etapas"),[];const M={};Object.entries($.stages).forEach(([B,H])=>{M[B]={id:B,name:H.name||"",color:H.color||"#64748B",deals:[],totalValue:0,position:H.position||0}}),console.log("Grupos inicializados:",Object.keys(M).length),E.value.forEach(B=>{M[B.stage]&&(M[B.stage].deals.push(B),M[B.stage].totalValue+=Number(B.value)||0)});const K=Object.values(M).sort((B,H)=>B.position-H.position);return console.log("Total de grupos com items:",K.filter(B=>B.deals.length>0).length),K}),N=async $=>{var M;if((M=$.item_details)!=null&&M.conversation_id)try{const B=(await conversationAPI.get({})).data.data.payload;conversationData.value[$.id]=B.find(H=>H.id===$.item_details.conversation_id)}catch(K){console.error("Erro ao carregar dados da conversa:",K)}},R=async()=>{if(h.value)try{g.value=!0,await In.deleteItem(h.value.id),d("force-update"),p.value=!1,h.value=null}catch($){console.error("Erro ao excluir item:",$)}finally{g.value=!1}},k=$=>{d("itemClick",$)};lt(O,async $=>{const M=$.flatMap(K=>K.deals.filter(B=>{var H;return(H=B.item_details)==null?void 0:H.conversation_id}).map(N));await Promise.all(M)});const L=$=>{_.value.has($)?_.value.delete($):_.value.add($)},D=$=>_.value.has($);return($,M)=>{const K=F("fluent-icon"),B=F("woot-button");return m(),f(pe,null,[c("div",Nlt,[b(V_,{"current-view":e.currentView,"search-results":C.value,"active-filters":r.value,onFilter:A,onSearch:y,onSwitchView:M[0]||(M[0]=H=>d("switch-view",H))},null,8,["current-view","search-results","active-filters"]),c("div",Olt,[o.value?(m(),f("div",xlt,M[3]||(M[3]=[c("span",{class:"loading-spinner"},null,-1)]))):i.value?(m(),f("div",wlt,v(i.value),1)):E.value.length?(m(),f("div",Mlt,[(m(!0),f(pe,null,ye(O.value,H=>(m(),f("div",{key:H.id,class:"deal-group w-full bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700"},[c("div",{class:"stage-header p-3 flex items-center justify-between bg-slate-50 dark:bg-slate-800 rounded-t-lg cursor-pointer",onClick:G=>L(H.id)},[c("div",Llt,[c("span",{class:"w-3 h-3 rounded-full",style:At({backgroundColor:H.color})},null,4),c("h3",Dlt,v(H.name),1),c("span",Plt,v(H.deals.length),1)]),c("div",Blt,[c("div",Flt,v(new Intl.NumberFormat("pt-BR",{style:"currency",currency:I(n)("KANBAN.CURRENCY")}).format(H.totalValue)),1),b(K,{icon:D(H.id)?"chevron-up":"chevron-down",size:"16",class:"text-slate-500"},null,8,["icon"])])],8,klt),ie(c("div",Ult,[(m(!0),f(pe,null,ye(H.deals,G=>(m(),f("div",{key:G.id,class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer flex items-center gap-3",onClick:V=>k(G)},[c("div",Vlt,[c("div",Hlt,[c("div",Klt,v(G.title),1)]),G.description?(m(),f("div",zlt,v(G.description),1)):x("",!0)]),c("div",Wlt,v(new Intl.NumberFormat("pt-BR",{style:"currency",currency:I(n)("KANBAN.CURRENCY")}).format(G.value)),1),G.assignee?(m(),f("div",jlt,[G.assignee.avatar?(m(),f("img",{key:1,src:G.assignee.avatar,alt:G.assignee.name,class:"w-8 h-8 rounded-full"},null,8,Xlt)):(m(),f("span",Ylt,v(G.assignee.name.charAt(0)),1))])):x("",!0)],8,Glt))),128))],512),[[ln,D(H.id)]])]))),128))])):(m(),f("div",Rlt,[b(K,{icon:"task",size:"48",class:"mb-4 text-slate-400"}),c("p",$lt,v(I(n)("KANBAN.NO_ITEMS")),1)]))])]),b(Wt,{show:p.value,"onUpdate:show":M[2]||(M[2]=H=>p.value=H),"on-close":()=>{p.value=!1,h.value=null}},{default:j(()=>{var H;return[c("div",qlt,[c("h3",Zlt,v(I(n)("KANBAN.DELETE.TITLE")),1),c("p",Qlt,v(I(n)("KANBAN.DELETE.DESCRIPTION",{item:(H=h.value)==null?void 0:H.title})),1),c("div",Jlt,[b(B,{variant:"clear",size:"small",onClick:M[1]||(M[1]=G=>p.value=!1)},{default:j(()=>[be(v(I(n)("KANBAN.CANCEL")),1)]),_:1}),b(B,{variant:"danger",size:"small",loading:g.value,onClick:R},{default:j(()=>[be(v(I(n)("KANBAN.DELETE")),1)]),_:1},8,["loading"])])])]}),_:1},8,["show","on-close"])],64)}}},trt=Re(ert,[["__scopeId","data-v-167cb471"]]),nrt={class:"flex flex-col h-full bg-white dark:bg-slate-900"},srt={class:"flex flex-1 min-h-0 flex-col"},art={class:"flex flex-1 min-h-0"},ort={class:"w-[280px] border-r border-slate-200 dark:border-slate-700 flex flex-col mini-calendar-section overflow-hidden"},irt={class:"p-4 flex-shrink-0 flex flex-col h-full"},lrt={key:0,class:"flex items-center justify-between mb-4"},rrt={class:"flex gap-1"},crt={key:3,class:"mini-calendar mb-6 flex-shrink-0"},drt={class:"grid grid-cols-7 gap-2"},urt=["onClick"],mrt={key:0,class:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-woot-500"},prt={class:"flex-1 flex flex-col min-h-0"},hrt={class:"flex-shrink-0 bg-white dark:bg-slate-900 z-10"},frt={class:"flex items-center justify-between px-6 py-4"},grt={class:"text-xl font-semibold text-slate-800 dark:text-slate-200"},_rt={class:"flex items-center gap-2"},vrt={class:"flex border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden"},brt={class:"grid grid-cols-7 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50"},Ert=["data-view-mode"],Trt=["onClick","onDragover","onDrop"],yrt={class:"h-full flex flex-col"},Art={key:0,class:"day-events-container"},Srt=["onClick"],Irt={class:"flex items-center gap-1"},Crt={class:"truncate"},Nrt={key:1,class:"day-events-container"},Ort=["onClick"],xrt={class:"flex items-center gap-1"},wrt={class:"truncate"},Rrt={key:0,class:"text-xs text-slate-500 dark:text-slate-400 pl-1"},$rt={class:"flex-shrink-0 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 month-summary"},Mrt={class:"flex items-center gap-6 px-6 py-3"},krt={class:"flex items-center gap-2"},Lrt={class:"text-sm text-slate-600 dark:text-slate-400"},Drt={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Prt={class:"flex items-center gap-2"},Brt={class:"text-sm text-woot-600 dark:text-woot-400"},Frt={class:"text-sm font-medium text-woot-600 dark:text-woot-400"},Urt={class:"flex items-center gap-2"},Grt={class:"text-sm text-yellow-600 dark:text-yellow-400"},Vrt={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},Hrt={class:"flex items-center gap-2"},Krt={class:"text-sm text-ruby-600 dark:text-ruby-400"},zrt={class:"text-sm font-medium text-ruby-600 dark:text-ruby-400"},Wrt={class:"border-t border-slate-200 dark:border-slate-700 mt-auto recent-items-section"},jrt={class:"flex items-center gap-2"},Yrt={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Xrt={class:"text-xs text-slate-500"},qrt={class:"text-xs text-slate-500"},Zrt={class:"overflow-hidden"},Qrt={class:"overflow-x-auto p-4 pt-0"},Jrt={class:"flex gap-4"},ect=["onDragstart"],tct={class:"flex items-center gap-2"},nct={class:"flex-1 min-w-0"},sct={class:"flex items-center justify-between"},act={class:"flex items-center gap-2 flex-1 min-w-0"},oct={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate"},ict={class:"flex items-center gap-2 text-xs text-slate-500"},lct={class:"text-slate-400"},rct={class:"flex items-center gap-1"},cct={class:"p-6"},dct={class:"text-lg font-medium mb-4"},uct={class:"p-6"},mct={class:"text-lg font-medium mb-4"},pct={__name:"AgendaTab",props:{currentView:{type:String,default:"agenda"},columns:{type:Array,default:()=>[]}},emits:["switch-view"],setup(e,{emit:t}){const{t:n}=He(),s=hn(),o=U(!1),a=U(null),i=U([]),l=U({}),r=U(""),d=U(null),u=U({total:0,stages:{}}),p=U(new Date),h=U(new Date),g=U(!1);U(!1),U(null);const _=U("month"),T=U("days"),{MONTH:S,YEAR:E}=kc,y=U(!1),A=U(null),C=U(null),O=U(!0),N=U(new Date),R=U(!1),k=U(null),L=e,D=t,$=w(()=>{const we=p.value.getFullYear(),ge=p.value.getMonth(),J=new Date(we,ge,1),Ee=new Date(we,ge+1,0),$e=[],se=J.getDay();for(let _e=se-1;_e>=0;_e--){const Ie=new Date(we,ge,-_e);$e.push({date:Ie,isCurrentMonth:!1,events:G(Ie)})}for(let _e=1;_e<=Ee.getDate();_e++){const Ie=new Date(we,ge,_e);$e.push({date:Ie,isCurrentMonth:!0,events:G(Ie)})}const le=42-$e.length;for(let _e=1;_e<=le;_e++){const Ie=new Date(we,ge+1,_e);$e.push({date:Ie,isCurrentMonth:!1,events:G(Ie)})}return $e}),M=w(()=>_.value==="week"?K():$.value),K=()=>{const we=h.value||new Date,ge=new Date(we);ge.setDate(ge.getDate()-ge.getDay());const J=[];for(let Ee=0;Ee<7;Ee++){const $e=new Date(ge);$e.setDate(ge.getDate()+Ee),J.push({date:$e,isCurrentMonth:$e.getMonth()===p.value.getMonth(),events:G($e)})}return J},B=w(()=>{const we=_.value==="week"?M.value:$.value,ge=[];for(let J=0;J<we.length;J+=7)ge.push(we.slice(J,J+7));return ge}),H=w(()=>["Dom","Seg","Ter","Qua","Qui","Sex","Sb"]),G=we=>i.value.filter(ge=>{var se,le;const J=((se=ge.item_details)==null?void 0:se.scheduled_at)||((le=ge.item_details)==null?void 0:le.deadline_at);if(!J)return!1;const[Ee]=J.split("T"),$e=we.toISOString().split("T")[0];return Ee===$e}),V=we=>{const ge=new Date(h.value);ge.setDate(ge.getDate()+we*7),h.value=ge,p.value=new Date(ge)},Y=we=>{if(_.value==="week"){V(we*4);return}const ge=new Date(p.value);ge.setMonth(ge.getMonth()+we),p.value=ge,h.value=ge},ee=(we,ge={month:"long",year:"numeric"})=>new Intl.DateTimeFormat("pt-BR",{...ge}).format(we),X=we=>{const ge=new Date;return we.getDate()===ge.getDate()&&we.getMonth()===ge.getMonth()&&we.getFullYear()===ge.getFullYear()};w(()=>{const we=new Date;return i.value.filter(ge=>{var $e,se,le;const J=(($e=ge.item_details)==null?void 0:$e.scheduling_type)==="deadline"?(se=ge.item_details)==null?void 0:se.deadline_at:(le=ge.item_details)==null?void 0:le.scheduled_at;if(!J)return!1;const Ee=new Date(J);return Ee.getUTCFullYear()===we.getFullYear()&&Ee.getUTCMonth()===we.getMonth()&&Ee.getUTCDate()===we.getDate()}).sort((ge,J)=>{var se,le,_e,Ie,Pe,Ne;const Ee=new Date(((se=ge.item_details)==null?void 0:se.scheduling_type)==="deadline"?(le=ge.item_details)==null?void 0:le.deadline_at:(_e=ge.item_details)==null?void 0:_e.scheduled_at),$e=new Date(((Ie=J.item_details)==null?void 0:Ie.scheduling_type)==="deadline"?(Pe=J.item_details)==null?void 0:Pe.deadline_at:(Ne=J.item_details)==null?void 0:Ne.scheduled_at);return Ee-$e})});const z=w(()=>i.value.filter(we=>{var J,Ee;return!(((J=we.item_details)==null?void 0:J.scheduled_at)||((Ee=we.item_details)==null?void 0:Ee.deadline_at))}).sort((we,ge)=>new Date(ge.created_at)-new Date(we.created_at)).slice(0,10)),W=async({showLoading:we=!0}={})=>{try{if(we&&(o.value=!0),Object.keys(l.value).length===0){const{data:Ee}=await Bu.get();Ee.forEach($e=>{l.value[$e.id]=$e})}const ge=await In.getItems(),J=await Promise.all(ge.data.map(async Ee=>{var le,_e,Ie,Pe,Ne,ve;const $e=(le=Ee.item_details)==null?void 0:le.agent_id,se=$e?l.value[$e]:null;return{id:Ee.id,title:((_e=Ee.item_details)==null?void 0:_e.title)||"",description:((Ie=Ee.item_details)==null?void 0:Ie.description)||"",priority:((Pe=Ee.item_details)==null?void 0:Pe.priority)||"none",funnel_id:Ee.funnel_id,funnel_stage:Ee.funnel_stage,position:Ee.position,item_details:{...Ee.item_details,_agent:se},stageName:((Ne=L.columns.find(me=>me.id===Ee.funnel_stage))==null?void 0:Ne.title)||"",stageColor:((ve=L.columns.find(me=>me.id===Ee.funnel_stage))==null?void 0:ve.color)||"#64748B",created_at:Ee.created_at,custom_attributes:Ee.custom_attributes||{}}}));i.value=J}catch(ge){console.error("Erro ao carregar itens:",ge),a.value=n("KANBAN.ERRORS.FETCH_ITEMS")}finally{o.value=!1}},q=we=>{D("switch-view",we)},Z=(we,ge)=>{h.value=we,g.value=!0},ne=we=>{d.value=we},ae=we=>{r.value=we},ue=async we=>{we&&(g.value=!1,await W({showLoading:!1}))},te=we=>{A.value=we,y.value=!0},ce=()=>{y.value=!1,A.value=null},fe=async(we,ge,J=!1)=>{var Ee,$e,se;try{const le=i.value.find(Ne=>Ne.id===we);if(!le)return;const _e=((Ee=le.item_details)==null?void 0:Ee.scheduling_type)==="deadline"?($e=le.item_details)==null?void 0:$e.deadline_at:(se=le.item_details)==null?void 0:se.scheduled_at,Ie={...le.item_details,scheduling_type:"deadline",deadline_at:new Date(ge).toISOString().split("T")[0],rescheduled:J,rescheduling_history:J?[...le.item_details.rescheduling_history||[],{from_date:_e,to_date:new Date(ge).toISOString().split("T")[0],changed_at:new Date().toISOString()}]:[]},Pe={funnel_id:le.funnel_id,funnel_stage:le.funnel_stage,position:le.position,item_details:Ie,custom_attributes:le.custom_attributes||{}};await In.updateItem(we,Pe),await W()}catch(le){console.error("Erro ao definir prazo:",le)}},ke=(we,ge)=>{we.preventDefault(),C.value=ge},De=()=>{C.value=null},Fe=async(we,ge)=>{we.preventDefault();const J=parseInt(we.dataTransfer.getData("itemId"),10),Ee=we.dataTransfer.getData("isReschedule")==="true";J&&(C.value=null,await fe(J,ge,Ee))},je=()=>{O.value=!O.value},Qe=we=>{var ge;k.value={...we,funnel_stage:we.funnel_stage||((ge=s.getters["funnel/getSelectedFunnel"])==null?void 0:ge.default_stage)},R.value=!0},Ze=async we=>{R.value=!1,k.value=null,y.value=!1,await W({showLoading:!1})};ut(async()=>{await W()}),lt(()=>s.getters["funnel/getSelectedFunnel"],async()=>{await W()}),lt(_,we=>{we==="week"&&(h.value=new Date)});const ft=w(()=>i.value.filter(we=>{var Ee,$e;const ge=((Ee=we.item_details)==null?void 0:Ee.scheduled_at)||(($e=we.item_details)==null?void 0:$e.deadline_at);if(!ge)return!1;const J=new Date(ge);return J.getMonth()===p.value.getMonth()&&J.getFullYear()===p.value.getFullYear()})),kt=w(()=>i.value.filter(we=>{var ge;return(ge=we.item_details)==null?void 0:ge.rescheduled})),Q=w(()=>i.value.filter(we=>{var ge,J;return!((ge=we.item_details)!=null&&ge.scheduled_at)&&!((J=we.item_details)!=null&&J.deadline_at)}));w(()=>i.value.filter(we=>{var Ee,$e,se;const ge=((Ee=we.item_details)==null?void 0:Ee.scheduling_type)==="deadline"?($e=we.item_details)==null?void 0:$e.deadline_at:(se=we.item_details)==null?void 0:se.scheduled_at;if(!ge)return!1;const J=new Date(ge);return J.getUTCFullYear()===N.value.getFullYear()&&J.getUTCMonth()===N.value.getMonth()&&J.getUTCDate()===N.value.getDate()}).sort((we,ge)=>{var $e,se,le,_e;const J=new Date((($e=we.item_details)==null?void 0:$e.scheduled_at)||((se=we.item_details)==null?void 0:se.deadline_at)),Ee=new Date(((le=ge.item_details)==null?void 0:le.scheduled_at)||((_e=ge.item_details)==null?void 0:_e.deadline_at));return J-Ee}));const oe=(we,ge)=>we.getFullYear()===ge.getFullYear()&&we.getMonth()===ge.getMonth()&&we.getDate()===ge.getDate();w(()=>{if(_.value!=="week")return{};const we={};return M.value.forEach(ge=>{const J=ge.date.toISOString().split("T")[0];we[J]={},ge.events.forEach(Ee=>{var Pe,Ne;const $e=((Pe=Ee.item_details)==null?void 0:Pe.scheduled_at)||((Ne=Ee.item_details)==null?void 0:Ne.deadline_at);if(!$e)return;const se=new Date($e),le=se.getHours(),_e=se.getMinutes(),Ie=`${le.toString().padStart(2,"0")}:${_e.toString().padStart(2,"0")}`;we[J][Ie]||(we[J][Ie]=[]),we[J][Ie].push(Ee)})}),we});const de=()=>{T.value="months"},Ce=(we,ge)=>{ge===E?T.value="years":ge===S?T.value="months":T.value="days"},Ae=we=>{const ge=new Date(p.value);ge.setMonth(we),p.value=ge,N.value=new Date(ge),T.value="days"},Le=we=>{const ge=new Date(p.value);ge.setFullYear(we),p.value=ge,N.value=new Date(ge),T.value="months"},Me=()=>{const we=new Date(p.value);we.setFullYear(we.getFullYear()-1),p.value=we,N.value=new Date(we)},Ue=()=>{const we=new Date(p.value);we.setFullYear(we.getFullYear()+1),p.value=we,N.value=new Date(we)};return(we,ge)=>{const J=F("fluent-icon"),Ee=F("woot-button");return m(),f("div",nrt,[b(V_,{"current-view":e.currentView,"search-results":u.value,"active-filters":d.value,columns:e.columns,onSwitchView:q,onFilter:ne,onSearch:ae},null,8,["current-view","search-results","active-filters","columns"]),c("div",srt,[c("div",art,[c("div",ort,[c("div",irt,[T.value==="days"?(m(),f("div",lrt,[c("span",{class:"text-sm font-medium text-slate-600 dark:text-slate-300 cursor-pointer hover:text-woot-500 dark:hover:text-woot-400",onClick:de},v(ee(p.value)),1),c("div",rrt,[b(Ee,{variant:"clear",size:"small",onClick:ge[0]||(ge[0]=$e=>Y(-1))},{default:j(()=>[b(J,{icon:"chevron-left",size:"12"})]),_:1}),b(Ee,{variant:"clear",size:"small",onClick:ge[1]||(ge[1]=$e=>Y(1))},{default:j(()=>[b(J,{icon:"chevron-right",size:"12"})]),_:1})])])):x("",!0),T.value==="months"?(m(),P(iy,{key:1,"calendar-type":"start","start-current-date":p.value,"end-current-date":p.value,class:"mb-4",onSelectMonth:Ae,onSetView:Ce,onPrev:Me,onNext:Ue},null,8,["start-current-date","end-current-date"])):x("",!0),T.value==="years"?(m(),P(oy,{key:2,"calendar-type":"start","start-current-date":p.value,"end-current-date":p.value,class:"mb-4",onSelectYear:Le,onPrev:()=>{},onNext:()=>{}},null,8,["start-current-date","end-current-date"])):x("",!0),T.value==="days"?(m(),f("div",crt,[b(ly,{class:"mb-2"}),c("div",drt,[(m(!0),f(pe,null,ye($.value,$e=>(m(),f("div",{key:$e.date,class:re(["aspect-square flex items-center justify-center text-sm rounded-full cursor-pointer",{"bg-slate-100 dark:bg-slate-800":!$e.isCurrentMonth,"bg-white dark:bg-slate-900":$e.isCurrentMonth,"text-slate-400":!$e.isCurrentMonth,"text-slate-900 dark:text-slate-100":$e.isCurrentMonth,"bg-woot-500 text-white":X($e.date)&&!$e.events.length,"ring-2 ring-woot-500":oe($e.date,N.value),relative:$e.events.length>0}]),onClick:se=>N.value=$e.date},[be(v($e.date.getDate())+" ",1),$e.events.length>0?(m(),f("div",mrt)):x("",!0)],10,urt))),128))])])):x("",!0)])]),c("div",prt,[c("div",hrt,[c("div",frt,[c("h2",grt,v(ee(_.value==="week"?h.value:p.value)),1),c("div",_rt,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:ge[2]||(ge[2]=$e=>{h.value=new Date,p.value=new Date})},{default:j(()=>[be(v(I(n)("KANBAN.AGENDA.VIEW_MODES.TODAY")),1)]),_:1}),c("div",vrt,[b(he,{variant:"clear",size:"sm",class:re(["px-3 py-1.5 border-r border-slate-200 dark:border-slate-700 rounded-none",{"bg-slate-100 dark:bg-slate-800 text-woot-600 dark:text-woot-400":_.value==="month","text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50":_.value!=="month"}]),color:_.value==="month"?"blue":"slate",onClick:ge[3]||(ge[3]=$e=>_.value="month")},{default:j(()=>[be(v(I(n)("KANBAN.AGENDA.VIEW_MODES.MONTH")),1)]),_:1},8,["color","class"]),b(he,{variant:"clear",size:"sm",class:re(["px-3 py-1.5 rounded-none",{"bg-slate-100 dark:bg-slate-800 text-woot-600 dark:text-woot-400":_.value==="week","text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50":_.value!=="week"}]),color:_.value==="week"?"blue":"slate",onClick:ge[4]||(ge[4]=$e=>_.value="week")},{default:j(()=>[be(v(I(n)("KANBAN.AGENDA.VIEW_MODES.WEEK")),1)]),_:1},8,["color","class"])])])]),c("div",brt,[(m(!0),f(pe,null,ye(H.value,$e=>(m(),f("div",{key:$e,class:"py-2.5 text-xs font-medium text-slate-600 dark:text-slate-400 text-center border-r last:border-r-0 border-slate-200 dark:border-slate-700"},v($e),1))),128))])]),c("div",{class:"calendar-grid flex-1 overflow-y-auto","data-view-mode":_.value},[(m(!0),f(pe,null,ye(B.value,$e=>(m(),f("div",{key:$e[0].date,class:"grid grid-cols-7"},[(m(!0),f(pe,null,ye($e,se=>(m(),f("div",{key:se.date,class:re(["calendar-day relative p-2 last:border-r-0",{"bg-slate-50 dark:bg-slate-800/50":!se.isCurrentMonth,"bg-white dark:bg-slate-800":se.isCurrentMonth,today:X(se.date),"h-full":_.value==="week","flex flex-col h-full":_.value==="week"}]),onClick:le=>Z(se.date,se.events),onDragover:le=>ke(le,se.date),onDragleave:De,onDrop:le=>Fe(le,se.date)},[c("div",yrt,[c("span",{class:re(["text-sm mb-1",{"text-slate-400 dark:text-slate-600":!se.isCurrentMonth,"text-slate-900 dark:text-slate-100":se.isCurrentMonth,"bg-woot-500 text-white rounded-full w-6 h-6 flex items-center justify-center":X(se.date)}])},v(se.date.getDate()),3),_.value==="week"?(m(),f("div",Art,[(m(!0),f(pe,null,ye(se.events,le=>{var _e;return m(),f("div",{key:le.id,class:"event-item text-xs p-1 rounded truncate cursor-pointer hover:opacity-90 mb-1",style:At({backgroundColor:le.stageColor+"20",color:le.stageColor,borderLeft:`2px solid ${le.stageColor}`}),onClick:Ke(Ie=>te(le),["stop"])},[c("div",Irt,[b(J,{icon:((_e=le.item_details)==null?void 0:_e.scheduling_type)==="deadline"?"alarm":"book",size:"12"},null,8,["icon"]),c("span",Crt,v(le.title),1)])],12,Srt)}),128))])):(m(),f("div",Nrt,[(m(!0),f(pe,null,ye(se.events.slice(0,3),le=>(m(),f("div",{key:le.id,class:re(["event-item text-xs p-1 rounded truncate cursor-pointer hover:opacity-90",{"border-l-2":le.scheduling_type==="deadline"}]),style:At({backgroundColor:le.stageColor+"20",color:le.stageColor,borderColor:le.scheduling_type==="deadline"?le.stageColor:"transparent"}),onClick:Ke(_e=>te(le),["stop"])},[c("div",xrt,[b(J,{icon:le.scheduling_type==="deadline"?"alarm":"book",size:"12",class:"flex-shrink-0"},null,8,["icon"]),c("span",wrt,v(le.title),1)])],14,Ort))),128)),se.events.length>3?(m(),f("div",Rrt," +"+v(se.events.length-3)+" mais ",1)):x("",!0)]))])],42,Trt))),128))]))),128))],8,Ert),c("div",$rt,[c("div",Mrt,[c("div",krt,[c("span",Lrt,v(I(n)("KANBAN.AGENDA.TOTAL_EVENTS"))+": ",1),c("span",Drt,v(i.value.length),1)]),c("div",Prt,[c("span",Brt,v(I(n)("KANBAN.AGENDA.MONTH_EVENTS"))+": ",1),c("span",Frt,v(ft.value.length),1)]),c("div",Urt,[c("span",Grt,v(I(n)("KANBAN.AGENDA.RESCHEDULED_EVENTS"))+": ",1),c("span",Vrt,v(kt.value.length),1)]),c("div",Hrt,[c("span",Krt,v(I(n)("KANBAN.AGENDA.NO_DATE_ITEMS"))+": ",1),c("span",zrt,v(Q.value.length),1)])])])])]),c("div",Wrt,[c("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50",onClick:je},[c("div",jrt,[b(J,{icon:O.value?"chevron-down":"chevron-right",size:"16",class:"text-slate-400"},null,8,["icon"]),c("h3",Yrt,v(I(n)("KANBAN.AGENDA.RECENT_ITEMS")),1),c("span",Xrt," ("+v(z.value.length)+") ",1)]),c("span",qrt,v(I(n)("KANBAN.AGENDA.DRAG_TO_SCHEDULE")),1)]),b(Ms,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[400px]","leave-from-class":"opacity-100 max-h-[400px]","leave-to-class":"opacity-0 max-h-0"},{default:j(()=>[ie(c("div",Zrt,[c("div",Qrt,[c("div",Jrt,[(m(!0),f(pe,null,ye(z.value,$e=>(m(),f("div",{key:$e.id,class:"flex-shrink-0 w-[400px] p-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow cursor-move",draggable:"true",onDragstart:se=>{se.dataTransfer.setData("itemId",$e.id)}},[c("div",tct,[c("div",{class:re(["w-1 h-8 rounded-full flex-shrink-0",{"bg-ruby-500":$e.priority==="high","bg-yellow-500":$e.priority==="medium","bg-green-500":$e.priority==="low","bg-slate-300":$e.priority==="none"}])},null,2),c("div",nct,[c("div",sct,[c("div",act,[c("h4",oct,v($e.title),1),c("span",{class:"flex-shrink-0 px-2 py-0.5 text-xs rounded-full",style:At({backgroundColor:$e.stageColor+"20",color:$e.stageColor})},v($e.stageName),5)]),c("div",ict,[c("span",lct,v(new Date($e.created_at).toLocaleDateString()),1),c("div",rct,[b(J,{icon:"automation",size:"12"})])])])])])],40,ect))),128))])])],512),[[ln,O.value]])]),_:1})])]),A.value&&y.value?(m(),P(Wt,{key:0,show:y.value,"onUpdate:show":ge[5]||(ge[5]=$e=>y.value=$e),"on-close":ce,size:"full-width"},{default:j(()=>[A.value?(m(),P(xm,{key:0,item:A.value,onClose:ce,onEdit:Qe,onItemUpdated:W},null,8,["item"])):x("",!0)]),_:1},8,["show"])):x("",!0),b(Wt,{show:g.value,"onUpdate:show":ge[7]||(ge[7]=$e=>g.value=$e),size:"full-width","on-close":()=>g.value=!1},{default:j(()=>[c("div",cct,[c("h3",dct,v(I(n)("KANBAN.ADD_ITEM")),1),I(s).getters["funnel/getSelectedFunnel"]?(m(),P(ul,{key:0,"funnel-id":I(s).getters["funnel/getSelectedFunnel"].id,"initial-date":h.value,onSaved:ue,onClose:ge[6]||(ge[6]=$e=>g.value=!1)},null,8,["funnel-id","initial-date"])):x("",!0)])]),_:1},8,["show","on-close"]),b(Wt,{show:R.value,"onUpdate:show":ge[9]||(ge[9]=$e=>R.value=$e),size:"full-width","on-close":()=>R.value=!1},{default:j(()=>[c("div",uct,[c("h3",mct,v(I(n)("KANBAN.EDIT_ITEM")),1),k.value?(m(),P(ul,{key:0,"funnel-id":I(s).getters["funnel/getSelectedFunnel"].id,stage:k.value.funnel_stage,"initial-data":k.value,"is-editing":!0,onSaved:Ze,onClose:ge[8]||(ge[8]=$e=>R.value=!1)},null,8,["funnel-id","stage","initial-data"])):x("",!0)])]),_:1},8,["show","on-close"])])}}},hct=Re(pct,[["__scopeId","data-v-c9d621d7"]]),fct={class:"funnels-header"},gct={class:"flex items-center justify-between"},_ct={class:"flex items-center gap-4"},vct={class:"text-2xl font-medium"},bct={class:"flex items-center gap-2"},Ect={class:"p-6"},Tct={class:"text-lg font-medium mb-4"},yct={class:"grid grid-cols-2 gap-4"},Act=["onClick"],Sct={class:"flex items-center gap-2 mb-2"},Ict={class:"font-medium"},Cct={class:"text-sm text-slate-600 dark:text-slate-400 mb-3"},Nct={class:"flex flex-wrap gap-2"},Oct={class:"p-6"},xct={class:"text-lg font-medium mb-4"},wct={__name:"FunnelsHeader",emits:["switch-view","funnel-created"],setup(e,{emit:t}){const{t:n}=He(),s=t,o=U(!1),a=U(!1),i=U(null),{isStacklab:l}=Ra(),r={name:"",description:"",stages:{},settings:{agents:[]}},d=[{id:"sales",name:"Funil de Vendas",icon:"briefcase",description:"Processo de vendas desde o primeiro contato at o fechamento",stages:{prospeccao:{name:"Prospeco",color:"#6366f1",position:1,description:"Leads e primeiros contatos",message_templates:[{id:`template_${Date.now()}_1`,title:"Boas vindas",content:"Ol! Obrigado por entrar em contato. Como posso ajudar?",webhook:{url:"",method:"POST",enabled:!1},stage_id:"prospeccao",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},qualificacao:{name:"Qualificao",color:"#8b5cf6",position:2,description:"Anlise de fit",message_templates:[{id:`template_${Date.now()}_2`,title:"Agendamento de Reunio",content:"Podemos agendar uma reunio para entender melhor suas necessidades?",webhook:{url:"",method:"POST",enabled:!1},stage_id:"qualificacao",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},proposta:{name:"Proposta",color:"#ec4899",position:3,description:"Envio e negociao"},fechamento:{name:"Fechamento",color:"#10b981",position:4,description:"Contratos e pagamentos"}}},{id:"support",name:"Funil de Suporte",icon:"chat",description:"Atendimento e resoluo de tickets de suporte",stages:{novo:{name:"Novo",color:"#6366f1",position:1,description:"Tickets recm abertos",message_templates:[{id:`template_${Date.now()}_3`,title:"Confirmao de Recebimento",content:"Recebemos seu ticket. Nossa equipe j est analisando.",webhook:{url:"",method:"POST",enabled:!1},stage_id:"novo",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},analise:{name:"Em Anlise",color:"#8b5cf6",position:2,description:"Avaliao tcnica",message_templates:[{id:`template_${Date.now()}_4`,title:"Atualizao de Status",content:"Seu ticket est em anlise pela nossa equipe tcnica.",webhook:{url:"",method:"POST",enabled:!1},stage_id:"analise",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},desenvolvimento:{name:"Em Desenvolvimento",color:"#ec4899",position:3,description:"Correo em andamento"},teste:{name:"Em Teste",color:"#f59e0b",position:4,description:"Validao da soluo"},resolvido:{name:"Resolvido",color:"#10b981",position:5,description:"Ticket finalizado"}}},{id:"recruitment",name:"Funil de Recrutamento",icon:"people",description:"Processo seletivo e contratao",stages:{triagem:{name:"Triagem",color:"#6366f1",position:1,description:"Anlise de currculos"},entrevista:{name:"Entrevista",color:"#8b5cf6",position:2,description:"Conversa inicial"},teste:{name:"Teste Tcnico",color:"#ec4899",position:3,description:"Avaliao prtica"},proposta:{name:"Proposta",color:"#10b981",position:4,description:"Negociao final"}}}],u=g=>{console.log("Template selecionado:",g);const _={name:g.name,description:g.description,stages:Object.entries(g.stages).reduce((S,[E,y])=>({...S,[E]:{...y,id:E,message_templates:y.message_templates||[],position:y.position}}),{}),settings:{agents:[]}},T={};Object.entries(_.stages).sort(([,S],[,E])=>S.position-E.position).forEach(([S,E])=>{T[S]=E}),_.stages=T,console.log("Template formatado:",_),i.value=_,a.value=!1,o.value=!0},p=()=>{s("switch-view","kanban")},h=g=>{console.log("Funil criado:",g),o.value=!1,s("funnel-created",g)};return(g,_)=>(m(),f("header",fct,[c("div",gct,[c("div",_ct,[c("button",{class:"back-button",onClick:p},[b(Ul,{icon:"arrow-chevron-left",size:"16",icons:I(Fl)},null,8,["icons"])]),c("h1",vct,v(I(n)("KANBAN.FUNNELS.TITLE")),1)]),c("div",bct,[I(l)===!0?(m(),P(he,{key:0,variant:"ghost",color:"slate",size:"sm",onClick:_[0]||(_[0]=T=>a.value=!0)},{icon:j(()=>[b(Ul,{icon:"copy",size:"20",icons:I(Fl)},null,8,["icons"])]),default:j(()=>[_[5]||(_[5]=c("span",null,"Modelos",-1))]),_:1})):x("",!0),b(he,{variant:"solid",color:"blue",size:"sm",onClick:_[1]||(_[1]=T=>o.value=!0)},{icon:j(()=>[b(Ul,{icon:"add",size:"20",icons:I(Fl)},null,8,["icons"])]),default:j(()=>[c("span",null,v(I(n)("KANBAN.FUNNELS.ACTIONS.NEW")),1)]),_:1})])]),b(Wt,{show:a.value,"onUpdate:show":_[2]||(_[2]=T=>a.value=T),"on-close":()=>a.value=!1,size:"medium"},{default:j(()=>[c("div",Ect,[c("h3",Tct,v(I(n)("KANBAN.FUNNELS.TEMPLATES.TITLE")),1),c("div",yct,[(m(),f(pe,null,ye(d,T=>c("div",{key:T.id,class:"p-4 border rounded-lg hover:border-woot-500 cursor-pointer transition-colors",onClick:S=>u(T)},[c("div",Sct,[b(Ul,{icon:T.icon,size:"20",icons:I(Fl),class:"text-woot-500"},null,8,["icon","icons"]),c("h4",Ict,v(T.name),1)]),c("p",Cct,v(T.description),1),c("div",Nct,[(m(!0),f(pe,null,ye(Object.values(T.stages),S=>(m(),f("span",{key:S.name,class:"px-2 py-1 text-xs rounded-full",style:At({backgroundColor:`${S.color}20`,color:S.color})},v(S.name),5))),128))])],8,Act)),64))])])]),_:1},8,["show","on-close"]),b(Wt,{show:o.value,"onUpdate:show":_[4]||(_[4]=T=>o.value=T),"on-close":()=>o.value=!1,class:"funnel-modal"},{default:j(()=>[c("div",Oct,[c("h3",xct,v(I(n)("KANBAN.FUNNELS.ACTIONS.NEW")),1),b(Mm,{"initial-data":i.value||r,onSaved:h,onClose:_[3]||(_[3]=T=>o.value=!1)},null,8,["initial-data"])])]),_:1},8,["show","on-close"])]))}},Rct=Re(wct,[["__scopeId","data-v-b2c2bd77"]]),$ct={class:"flex flex-col h-full bg-white dark:bg-slate-900"},Mct={class:"funnels-content p-6 flex-1 overflow-y-auto"},kct={key:0,class:"mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},Lct={class:"flex items-center gap-3"},Dct={class:"shrink-0"},Pct={key:1,class:"flex justify-center items-center py-12"},Bct={key:2,class:"flex flex-col items-center justify-center py-12 text-slate-600"},Fct={key:3,class:"grid gap-4"},Uct={class:"absolute top-4 right-4 flex items-center gap-1"},Gct={class:"flex flex-col gap-4"},Vct={class:"flex items-center gap-2"},Hct={class:"text-lg font-medium"},Kct={class:"text-xs text-slate-500"},zct={class:"flex flex-wrap gap-2"},Wct={key:0,class:"ml-1 px-1.5 text-[10px] rounded-full bg-white/50"},jct={key:1,class:"absolute hidden group-hover:block bg-white dark:bg-slate-800 shadow-lg rounded-lg p-3 z-10 min-w-[250px] top-full left-0 mt-1"},Yct={class:"flex items-center gap-2 mb-2"},Xct={class:"space-y-2"},qct={class:"flex items-center justify-between mb-1"},Zct={class:"text-xs font-medium"},Qct={key:0,class:"text-[10px] px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"},Jct={class:"text-[11px] text-slate-600 dark:text-slate-400 line-clamp-2"},edt={key:0,class:"flex flex-wrap gap-2"},tdt={class:"text-xs text-slate-700 dark:text-slate-300"},ndt={class:"p-6"},sdt={class:"text-lg font-medium mb-4"},adt={class:"p-6"},odt={class:"text-lg font-medium mb-4"},idt={class:"text-sm text-slate-600 mb-6"},ldt={class:"flex justify-end gap-2"},rdt={__name:"FunnelsManager",emits:["switch-view"],setup(e,{emit:t}){const{t:n}=He(),s=hn(),{isStacklab:o}=Ra(),a=U(!1),i=U([]),l=U(!1),r=U(!1),d=U(!1),u=U(null),p=U(null),h=async()=>{a.value=!0;try{const{data:C}=await Js.get();i.value=C.map(O=>{const N=Object.entries(O.stages||{}).reduce((R,[k,L])=>({...R,[k]:{...L,id:k,position:parseInt(L.position,10)||0,message_templates:L.message_templates||[]}}),{});return console.log("Estgios carregados para funil:",O.name,N),{...O,stages:N}}),l.value=!o&&i.value.length>=2,console.log("Funis carregados:",i.value)}catch(C){console.error("Erro ao carregar funis:",C)}finally{a.value=!1}},g=C=>{u.value=C,r.value=!0},_=async()=>{try{a.value=!0,await Js.delete(u.value.id),await h(),yt.emit("newToastMessage",{message:"Funil excludo com sucesso",action:{type:"success"}}),r.value=!1,u.value=null}catch{yt.emit("newToastMessage",{message:n("KANBAN.ERRORS.DELETE_FUNNEL_WITH_ITEMS"),action:{type:"error"}})}finally{a.value=!1}},T=C=>{var O;p.value={...C,id:String(C.id),stages:Object.entries(C.stages||{}).reduce((N,[R,k])=>({...N,[String(R)]:{...k,id:String(k.id||R)}}),{}),settings:C.settings||{},agents:((O=C.settings)==null?void 0:O.agents)||[]},console.log("Dados para edio:",p.value),d.value=!0},S=async C=>{var O,N;try{a.value=!0,console.log("Dados recebidos do formulrio:",C);const R={...C,settings:{...p.value.settings||{},agents:C.agents||[],last_optimized_at:(O=p.value.settings)==null?void 0:O.last_optimized_at,optimization_history:((N=p.value.settings)==null?void 0:N.optimization_history)||[]}};delete R.agents,console.log("Payload final:",R),await Js.update(p.value.id,R),await s.dispatch("funnel/fetch"),await h(),yt.emit("newToastMessage",{message:"Funil atualizado com sucesso",action:{type:"success"}}),d.value=!1}catch(R){console.error("Erro ao atualizar funil:",R),yt.emit("newToastMessage",{message:"Erro ao atualizar o funil",action:{type:"error"}})}finally{a.value=!1}},E=async C=>{var O;try{a.value=!0;const N=Date.now(),R=Object.entries(C.stages).reduce((L,[D,$])=>{var K;const M=`stage_${N}_${$.position}`;return{...L,[M]:{...$,id:M,message_templates:(K=$.message_templates)==null?void 0:K.map(B=>({...B,id:`template_${N}_${B.id}`,stage_id:M}))}}},{}),k={name:`${C.name} (cpia)`,description:C.description,active:C.active,stages:R,settings:{...C.settings,agents:((O=C.settings)==null?void 0:O.agents)||[]}};await Js.create(k),await h()}catch(N){console.error("Erro ao duplicar funil:",N)}finally{a.value=!1}},y=C=>{if(!C)return[];console.log("Ordenando estgios:",C);const O=Object.entries(C).map(([N,R])=>({id:N,...R,position:parseInt(R.position,10)||0})).sort((N,R)=>N.position-R.position);return console.log("Estgios ordenados:",O.map(N=>`${N.name} (${N.position})`)),O},A=t;return ut(()=>{h()}),(C,O)=>{const N=F("fluent-icon");return m(),f("div",$ct,[b(Rct,{onSwitchView:O[0]||(O[0]=R=>A("switch-view",R)),onFunnelCreated:h}),c("div",Mct,[l.value?(m(),f("div",kct,[c("div",Lct,[c("div",Dct,[b(N,{icon:"warning",size:"20",class:"text-amber-500 dark:text-amber-300"})]),O[5]||(O[5]=c("div",{class:"flex-1"},[c("p",{class:"text-amber-800 dark:text-amber-100 font-medium"}," Limite de Funis Atingido "),c("p",{class:"text-amber-700 dark:text-amber-200 text-sm mt-1"}," Voc atingiu o limite de 2 funis. Atualize para a verso PRO para criar mais funis. ")],-1))])])):x("",!0),a.value?(m(),f("div",Pct,O[6]||(O[6]=[c("span",{class:"loading-spinner"},null,-1)]))):i.value.length?(m(),f("div",Fct,[(m(!0),f(pe,null,ye(i.value,R=>{var k,L;return m(),f("div",{key:R.id,class:"funnel-card p-4 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 relative"},[c("div",Uct,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:D=>T(R)},{icon:j(()=>[b(N,{icon:"edit",size:"16"})]),_:2},1032,["onClick"]),b(he,{variant:"ghost",color:"slate",size:"sm",onClick:D=>E(R)},{icon:j(()=>[b(N,{icon:"copy",size:"16"})]),_:2},1032,["onClick"]),b(he,{variant:"ghost",color:"ruby",size:"sm",onClick:D=>g(R)},{icon:j(()=>[b(N,{icon:"delete",size:"16"})]),_:2},1032,["onClick"])]),c("div",Gct,[c("div",Vct,[c("h3",Hct,v(R.name),1),c("span",{class:re(["text-xs px-2 py-0.5 rounded-full",R.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},v(R.active?"Ativo":"Inativo"),3)]),c("p",Kct," Criado em: "+v(new Date(R.created_at).toLocaleDateString()),1),c("div",zct,[(m(!0),f(pe,null,ye(y(R.stages),D=>{var $,M;return m(),f("span",{key:D.id,class:"px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 group relative",style:At({backgroundColor:`${D.color}20`,color:D.color})},[be(v(D.name)+" ",1),($=D.message_templates)!=null&&$.length?(m(),f("span",Wct,v(D.message_templates.length),1)):x("",!0),(M=D.message_templates)!=null&&M.length?(m(),f("div",jct,[c("div",Yct,[b(N,{icon:"chat",size:"16",class:"text-woot-500"}),O[9]||(O[9]=c("p",{class:"text-xs font-medium"},"Templates de Mensagem",-1))]),c("div",Xct,[(m(!0),f(pe,null,ye(D.message_templates,K=>{var B;return m(),f("div",{key:K.id,class:"p-2 bg-slate-50 dark:bg-slate-700 rounded"},[c("div",qct,[c("p",Zct,v(K.title),1),(B=K.webhook)!=null&&B.enabled?(m(),f("span",Qct," Webhook ")):x("",!0)]),c("p",Jct,v(K.content),1)])}),128))])])):x("",!0)],4)}),128))]),(L=(k=R.settings)==null?void 0:k.agents)!=null&&L.length?(m(),f("div",edt,[(m(!0),f(pe,null,ye(R.settings.agents,D=>(m(),f("div",{key:D.id,class:"flex items-center gap-2 px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded-lg"},[b(yn,{name:D.name,src:D.thumbnail,size:20},null,8,["name","src"]),c("span",tdt,v(D.name),1)]))),128))])):x("",!0)])])}),128))])):(m(),f("div",Bct,[b(N,{icon:"task",size:"48",class:"mb-4"}),O[7]||(O[7]=c("p",{class:"text-lg"},"Nenhum funil encontrado",-1)),O[8]||(O[8]=c("p",{class:"text-sm"}," Crie um novo funil para comear a organizar seus itens ",-1))]))]),b(Wt,{show:d.value,"onUpdate:show":O[2]||(O[2]=R=>d.value=R),"on-close":()=>d.value=!1,class:"funnel-modal"},{default:j(()=>[c("div",ndt,[c("h3",sdt,v(I(n)("KANBAN.FUNNELS.EDIT.TITLE")),1),p.value?(m(),P(Mm,{key:0,"is-editing":!0,"initial-data":p.value,onSaved:S,onClose:O[1]||(O[1]=R=>d.value=!1)},null,8,["initial-data"])):x("",!0)])]),_:1},8,["show","on-close"]),b(Wt,{show:r.value,"onUpdate:show":O[4]||(O[4]=R=>r.value=R),"on-close":()=>r.value=!1},{default:j(()=>{var R;return[c("div",adt,[c("h3",odt,v(I(n)("KANBAN.FUNNELS.DELETE.TITLE")),1),c("p",idt,v(I(n)("KANBAN.FUNNELS.DELETE.DESCRIPTION",{name:(R=u.value)==null?void 0:R.name})),1),c("div",ldt,[b(he,{variant:"ghost",color:"slate",size:"sm",onClick:O[3]||(O[3]=k=>r.value=!1)},{default:j(()=>[be(v(I(n)("KANBAN.CANCEL")),1)]),_:1}),b(he,{variant:"solid",color:"ruby",size:"sm",isLoading:a.value,onClick:_},{default:j(()=>[be(v(I(n)("KANBAN.DELETE")),1)]),_:1},8,["isLoading"])])])]}),_:1},8,["show","on-close"])])}}},cdt=Re(rdt,[["__scopeId","data-v-0c5a2c96"]]),ddt=["disabled"],udt={__name:"Toggle",props:{modelValue:{type:Boolean,required:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>["small","default","large"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=w(()=>({"toggle-wrapper":!0,[`toggle-${n.size}`]:!0,"toggle-checked":n.modelValue,"toggle-disabled":n.disabled})),a=()=>{n.disabled||s("update:modelValue",!n.modelValue)};return(i,l)=>(m(),f("button",{type:"button",class:re(o.value),disabled:e.disabled,onClick:a},l[0]||(l[0]=[c("div",{class:"toggle-track"},[c("div",{class:"toggle-thumb"})],-1)]),10,ddt))}},bE=Re(udt,[["__scopeId","data-v-f6598a43"]]),mdt={name:"WootButton",components:{EmojiOrIcon:R_,Spinner:Os},props:{type:{type:String,default:"submit"},variant:{type:String,default:""},size:{type:String,default:""},icon:{type:String,default:""},emoji:{type:String,default:""},colorScheme:{type:String,default:"primary"},classNames:{type:[String,Object],default:""},isDisabled:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1}},computed:{variantClasses(){return this.variant.includes("link")?`clear ${this.variant}`:this.variant},hasOnlyIcon(){const e=this.emoji||this.icon;return!this.$slots.default&&e},hasOnlyIconClasses(){return this.hasOnlyIcon?"button--only-icon":""},buttonClasses(){return[this.variantClasses,this.hasOnlyIconClasses,this.size,this.colorScheme,this.classNames,this.isDisabled?"disabled":"",this.isExpanded?"expanded":""]},iconSize(){switch(this.size){case"tiny":return 12;case"small":return 14;case"medium":return 16;case"large":return 18;default:return 16}},showDarkSpinner(){return this.colorScheme==="secondary"||this.variant==="clear"||this.variant==="link"||this.variant==="hollow"}}},pdt=["type","disabled"];function hdt(e,t,n,s,o,a){const i=F("Spinner"),l=F("EmojiOrIcon");return m(),f("button",{class:re(["button",a.buttonClasses]),type:n.type,disabled:n.isDisabled||n.isLoading},[n.isLoading?(m(),P(i,{key:0,size:"small","color-scheme":a.showDarkSpinner?"dark":""},null,8,["color-scheme"])):n.icon||n.emoji?(m(),P(l,{key:1,class:"icon",emoji:n.emoji,icon:n.icon,"icon-size":a.iconSize},null,8,["emoji","icon","icon-size"])):x("",!0),e.$slots.default?(m(),f("span",{key:2,class:re(["button__content",{"text-left rtl:text-right":n.size!=="expanded"}])},[et(e.$slots,"default")],2)):x("",!0)],10,pdt)}const Bd=Re(mdt,[["render",hdt]]),fdt={class:"text-lg font-medium mb-4"},gdt={class:"form-grid"},_dt={class:"left-column"},vdt={class:"form-section"},bdt={class:"section-title"},Edt={key:0,class:"loading-state mb-4"},Tdt={key:1,class:"mb-2"},ydt={class:"form-section"},Adt={class:"section-title"},Sdt={class:"form-section"},Idt={class:"flex items-center justify-between mb-4"},Cdt={class:"section-title mb-0"},Ndt={key:0,class:"webhook-config"},Odt={class:"form-section"},xdt={class:"flex items-center justify-between mb-4"},wdt={class:"section-title mb-0"},Rdt={key:0,class:"conditions-config space-y-4"},$dt={class:"flex-1"},Mdt={class:"space-y-2"},kdt={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Ldt=["onUpdate:modelValue"],Ddt={value:"",disabled:""},Pdt=["value"],Bdt={class:"w-32"},Fdt={class:"space-y-2"},Udt={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Gdt=["onUpdate:modelValue"],Vdt={class:"flex-1"},Hdt={class:"space-y-2"},Kdt={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},zdt=["onUpdate:modelValue","placeholder"],Wdt={class:"right-column"},jdt={class:"editor-section"},Ydt={class:"form-actions"},Xdt={__name:"MessageTemplateForm",props:{initialData:{type:Object,default:()=>({})},isEditing:{type:Boolean,default:!1}},emits:["saved","close"],setup(e,{emit:t}){var $,M,K,B,H;const n=e,{t:s}=He(),o=hn(),a=t,i=U(!1);U(null);const l=U({}),r=U([]),d=U(!1);ut(async()=>{try{i.value=!0,await o.dispatch("funnel/fetch")}catch(G){console.error("Erro ao carregar funis:",G)}finally{i.value=!1}});const u=w(()=>o.getters["funnel/getFunnels"]),p=w(()=>o.getters["funnel/getSelectedFunnel"]),h=G=>G?String(G):"",g=w(()=>{const G=u.value.find(Y=>String(Y.id)===T.value.funnel_id);if(console.log("Calculando funnelStages:",{currentFunnel:G,formDataFunnelId:T.value.funnel_id,stages:G==null?void 0:G.stages,currentStageId:T.value.stage_id,availableStageIds:G!=null&&G.stages?Object.keys(G.stages):[]}),!(G!=null&&G.stages))return[];const V=Object.entries(G.stages).map(([Y,ee])=>({value:String(Y),label:ee.name,position:ee.position})).sort((Y,ee)=>Y.position-ee.position);return console.log("Stages calculadas:",V),V}),_=w(()=>u.value.map(G=>({value:String(G.id),label:G.name}))),T=U({funnel_id:h(n.initialData.funnel_id),stage_id:h(n.initialData.stage_id),title:n.initialData.title||"",content:n.initialData.content||"",webhook:{enabled:(($=n.initialData.webhook)==null?void 0:$.enabled)||!1,url:((M=n.initialData.webhook)==null?void 0:M.url)||"",method:((K=n.initialData.webhook)==null?void 0:K.method)||"POST"},conditions:{enabled:((B=n.initialData.conditions)==null?void 0:B.enabled)||!1,rules:((H=n.initialData.conditions)==null?void 0:H.rules)||[]}}),S=()=>{var G;return l.value={},(G=p.value)!=null&&G.id||(l.value.funnel=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.FUNNEL_REQUIRED")),T.value.stage_id||(l.value.stage=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.STAGE_REQUIRED")),T.value.title.trim()||(l.value.title=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.TITLE_REQUIRED")),T.value.content.trim()||(l.value.content=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.CONTENT_REQUIRED")),T.value.webhook.enabled&&!T.value.webhook.url.trim()&&(l.value.webhookUrl=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.WEBHOOK_URL_REQUIRED")),Object.keys(l.value).length===0},E=async()=>{try{if(!S())return;i.value=!0;const G=u.value.find(X=>String(X.id)===T.value.funnel_id);if(!G)throw new Error("Funil no encontrado");const V={...G,stages:{...G.stages}},Y=T.value.stage_id,ee=V.stages[Y];if(V.stages[Y]={...ee,message_templates:[...(ee==null?void 0:ee.message_templates)||[]]},n.isEditing){const X=V.stages[Y].message_templates.findIndex(z=>z.id===n.initialData.id);X>-1&&(V.stages[Y].message_templates[X]={...n.initialData,...T.value,updated_at:new Date().toISOString()})}else V.stages[Y].message_templates.push({id:Date.now(),...T.value,created_at:new Date().toISOString()});await Js.update(G.id,V),await o.dispatch("funnel/fetch"),a("saved",T.value)}catch{l.value={submit:s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.SAVE_ERROR")}}finally{i.value=!1}},y=async()=>{try{i.value=!0;const G=o.getters["funnel/getSelectedFunnel"];if(!(G!=null&&G.id)){console.error("Nenhum funil selecionado");return}const V=await In.getItems(G.id);r.value=V.data.map(Y=>({id:Y.id,title:Y.item_details.title||"",description:Y.item_details.description||"",priority:Y.item_details.priority||"none",assignee:Y.item_details.assignee||null,position:Y.position,funnel_stage:Y.funnel_stage,item_details:Y.item_details,custom_attributes:Y.custom_attributes||{},createdAt:new Date(Y.created_at).toLocaleDateString()}))}catch(G){console.error("Erro ao carregar itens do Kanban:",G)}finally{i.value=!1}},A=w(()=>[{value:"item_details.title",label:"Ttulo"},{value:"item_details.description",label:"Descrio"},{value:"item_details.priority",label:"Prioridade"},{value:"item_details.agent_id",label:"Agente"},{value:"item_details.conversation_id",label:"Conversa"},{value:"item_details.value",label:"Valor"},{value:"funnel_stage",label:"Etapa do Funil"}].sort((G,V)=>G.label.localeCompare(V.label))),C=w({get:()=>(console.log("selectedFunnelId.get chamado:",T.value.funnel_id),T.value.funnel_id),set:async G=>{console.log("selectedFunnelId.set chamado com:",G),T.value.funnel_id=h(G),await D(G)}}),O=w({get:()=>(console.log("selectedStageId.get chamado:",T.value.stage_id),T.value.stage_id),set:G=>{console.log("selectedStageId.set chamado com:",G),T.value.stage_id=h(G)}}),N=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],R=w(()=>T.value.conditions.enabled),k=()=>{T.value.conditions.rules.push({field:"",operator:"equals",value:""})},L=G=>{T.value.conditions.rules.splice(G,1)},D=async G=>{try{console.log("handleFunnelChange chamado com valor:",G),T.value.funnel_id=h(G),console.log("FormData aps atualizar funnel_id:",T.value);const V=u.value.find(Y=>String(Y.id)===T.value.funnel_id);if(console.log("Funil encontrado no handleFunnelChange:",V),V)if(await o.dispatch("funnel/setSelectedFunnel",V),console.log("Funil atualizado no store"),await Zt(),!n.isEditing||T.value.funnel_id!==h(n.initialData.funnel_id)){const Y=Object.keys(V.stages||{});console.log("Limpando stage_id"),T.value.stage_id=Y[0]||""}else console.log("Mantendo stage_id:",T.value.stage_id)}catch(V){console.error("Erro ao mudar funil:",V)}};return ut(async()=>{try{if(i.value=!0,console.log("Dados iniciais:",{initialData:n.initialData,isEditing:n.isEditing,initialStageId:n.initialData.stage_id}),await o.dispatch("funnel/fetch"),console.log("Funis carregados:",u.value),await Zt(),console.log("FormData antes da inicializao:",T.value),T.value={...T.value,funnel_id:h(n.initialData.funnel_id),stage_id:h(n.initialData.stage_id)},console.log("FormData aps inicializao:",T.value),n.initialData.funnel_id){console.log("Tentando selecionar funil:",n.initialData.funnel_id);const G=u.value.find(V=>String(V.id)===h(n.initialData.funnel_id));if(console.log("Funil encontrado:",G),G){await o.dispatch("funnel/setSelectedFunnel",G),console.log("Funil selecionado no store");const V=Object.keys(G.stages||{});console.log("Stages disponveis:",V);const Y=h(n.initialData.stage_id);console.log("Stage ID inicial:",Y);const ee=V.some(X=>String(X)===Y);console.log("Stage existe?",ee),await Zt(),console.log("Estado dos selects antes da atualizao:",{funnel_id:T.value.funnel_id,stage_id:T.value.stage_id,funnelOptions:_.value,stageOptions:g.value}),ee||(T.value.stage_id=V[0]||""),console.log("Estado dos selects aps atualizao:",{funnel_id:T.value.funnel_id,stage_id:T.value.stage_id,funnelOptions:_.value,stageOptions:g.value}),console.log("FormData atualizado:",T.value)}}await y(),await Zt(),console.log("Estado final antes de isDataReady:",{formData:T.value,funnelOptions:_.value,stageOptions:g.value}),d.value=!0}catch(G){console.error("Erro ao inicializar formulrio:",G)}finally{i.value=!1}}),(G,V)=>(m(),f("form",{class:"message-template-form",onSubmit:Ke(E,["prevent"])},[c("h3",fdt,v(I(s)(e.isEditing?"KANBAN.MESSAGE_TEMPLATES.EDIT.TITLE":"KANBAN.MESSAGE_TEMPLATES.NEW")),1),c("div",gdt,[c("div",_dt,[c("div",vdt,[c("h3",bdt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.FUNNEL_INFO")),1),i.value?(m(),f("div",Edt,v(I(s)("KANBAN.LOADING_FUNNELS")),1)):x("",!0),d.value?(m(),f("div",Tdt,[b(ac,{modelValue:C.value,"onUpdate:modelValue":V[0]||(V[0]=Y=>C.value=Y),name:"funnel_id",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.FUNNEL.LABEL"),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.FUNNEL.PLACEHOLDER"),options:_.value,error:l.value.funnel,value:T.value.funnel_id},null,8,["modelValue","label","placeholder","options","error","value"]),b(ac,{modelValue:O.value,"onUpdate:modelValue":V[1]||(V[1]=Y=>O.value=Y),name:"stage_id",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.STAGE.LABEL"),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.STAGE.PLACEHOLDER"),options:g.value,error:l.value.stage,class:"mb-2",value:T.value.stage_id},null,8,["modelValue","label","placeholder","options","error","value"])])):x("",!0)]),c("div",ydt,[c("h3",Adt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.BASIC_INFO")),1),b(Hh,{modelValue:T.value.title,"onUpdate:modelValue":V[2]||(V[2]=Y=>T.value.title=Y),name:"title",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.TITLE.LABEL"),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.TITLE.PLACEHOLDER"),error:l.value.title,class:"mb-4"},null,8,["modelValue","label","placeholder","error"])]),c("div",Sdt,[c("div",Idt,[c("h3",Cdt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.TITLE")),1),b(bE,{modelValue:T.value.webhook.enabled,"onUpdate:modelValue":V[3]||(V[3]=Y=>T.value.webhook.enabled=Y)},null,8,["modelValue"])]),T.value.webhook.enabled?(m(),f("div",Ndt,[b(Hh,{modelValue:T.value.webhook.url,"onUpdate:modelValue":V[4]||(V[4]=Y=>T.value.webhook.url=Y),name:"webhook_url",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.URL.LABEL"),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.URL.PLACEHOLDER"),error:l.value.webhookUrl},null,8,["modelValue","label","placeholder","error"]),b(ac,{modelValue:T.value.webhook.method,"onUpdate:modelValue":V[5]||(V[5]=Y=>T.value.webhook.method=Y),name:"webhook_method",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.METHOD.LABEL"),options:N},null,8,["modelValue","label"])])):x("",!0)]),c("div",Odt,[c("div",xdt,[c("h3",wdt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.TITLE")),1),b(bE,{modelValue:T.value.conditions.enabled,"onUpdate:modelValue":V[6]||(V[6]=Y=>T.value.conditions.enabled=Y)},null,8,["modelValue"])]),R.value?(m(),f("div",Rdt,[(m(!0),f(pe,null,ye(T.value.conditions.rules,(Y,ee)=>(m(),f("div",{key:ee,class:"condition-rule flex items-start gap-2"},[c("div",$dt,[c("div",Mdt,[c("label",kdt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.FIELD.LABEL")),1),ie(c("select",{"onUpdate:modelValue":X=>Y.field=X,class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600"},[c("option",Ddt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.FIELD.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(A.value,X=>(m(),f("option",{key:X.value,value:X.value},v(X.label),9,Pdt))),128))],8,Ldt),[[Mt,Y.field]])])]),c("div",Bdt,[c("div",Fdt,[c("label",Udt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.OPERATOR.LABEL")),1),ie(c("select",{"onUpdate:modelValue":X=>Y.operator=X,class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600"},V[9]||(V[9]=[c("option",{value:"equals"},"Igual a",-1),c("option",{value:"contains"},"Contm",-1),c("option",{value:"starts_with"},"Comea com",-1),c("option",{value:"ends_with"},"Termina com",-1)]),8,Gdt),[[Mt,Y.operator]])])]),c("div",Vdt,[c("div",Hdt,[c("label",Kdt,v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.VALUE.LABEL")),1),ie(c("input",{"onUpdate:modelValue":X=>Y.value=X,type:"text",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600",placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.VALUE.PLACEHOLDER")},null,8,zdt),[[at,Y.value]])])]),b(Bd,{variant:"clear","color-scheme":"secondary",size:"small",onClick:X=>L(ee)},{default:j(()=>[b(Ul,{icon:"delete",size:"16",icons:I(Fl)},null,8,["icons"])]),_:2},1032,["onClick"])]))),128)),b(Bd,{variant:"clear",size:"small",class:"w-full",onClick:k},{default:j(()=>[b(Ul,{icon:"add",size:"16",class:"mr-2",icons:I(Fl)},null,8,["icons"]),be(" "+v(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.ADD_RULE")),1)]),_:1})])):x("",!0)])]),c("div",Wdt,[c("div",jdt,[b(wo,{modelValue:T.value.content,"onUpdate:modelValue":V[7]||(V[7]=Y=>T.value.content=Y),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONTENT.PLACEHOLDER"),error:l.value.content,class:"content-editor"},null,8,["modelValue","placeholder","error"])])])]),c("div",Ydt,[b(Bd,{variant:"clear","color-scheme":"secondary",onClick:V[8]||(V[8]=Y=>a("close"))},{default:j(()=>[be(v(I(s)("KANBAN.ACTIONS.CANCEL")),1)]),_:1}),b(Bd,{variant:"primary",type:"submit"},{default:j(()=>[be(v(I(s)("KANBAN.ACTIONS.SAVE")),1)]),_:1})])],32))}},$f=Re(Xdt,[["__scopeId","data-v-1180422c"]]),qdt={class:"message-templates-header"},Zdt={class:"flex items-center justify-between"},Qdt={class:"flex items-center gap-4"},Jdt={class:"text-2xl font-medium"},eut={class:"p-6"},tut={class:"text-lg font-medium mb-4"},nut={__name:"MessageTemplatesHeader",emits:["switch-view","template-created"],setup(e,{emit:t}){const{t:n}=He(),s=t,o=U(!1),a=()=>{s("switch-view","kanban")},i=l=>{o.value=!1,s("template-created",l)};return(l,r)=>{const d=F("fluent-icon"),u=F("woot-button");return m(),f("header",qdt,[c("div",Zdt,[c("div",Qdt,[b(u,{variant:"clear",size:"small",onClick:a},{default:j(()=>[b(d,{icon:"chevron-left",size:"16"})]),_:1}),c("h1",Jdt,v(I(n)("KANBAN.MESSAGE_TEMPLATES.TITLE")),1)]),b(u,{variant:"primary",size:"small",onClick:r[0]||(r[0]=p=>o.value=!0)},{default:j(()=>[b(d,{icon:"add",size:"16",class:"mr-2"}),be(" "+v(I(n)("KANBAN.MESSAGE_TEMPLATES.ADD")),1)]),_:1})]),b(Wt,{show:o.value,"onUpdate:show":r[2]||(r[2]=p=>o.value=p),"on-close":()=>o.value=!1,class:"template-modal"},{default:j(()=>[c("div",eut,[c("h3",tut,v(I(n)("KANBAN.MESSAGE_TEMPLATES.NEW")),1),b($f,{onSaved:i,onClose:r[1]||(r[1]=p=>o.value=!1)})])]),_:1},8,["show","on-close"])])}}},sut=Re(nut,[["__scopeId","data-v-21288d3e"]]),aut={class:"message-templates"},out={class:"message-templates-content"},iut={key:0,class:"flex items-center justify-center h-full"},lut={key:1,class:"flex flex-col items-center justify-center h-full text-center p-4"},rut={class:"text-slate-600 dark:text-slate-400"},cut={key:2,class:"flex flex-col items-center justify-center h-full text-center p-4"},dut={class:"text-lg font-medium mb-1"},uut={class:"text-sm text-slate-600 dark:text-slate-400"},mut={key:3,class:"templates-container"},put={class:"funnel-tabs"},hut=["onClick"],fut={key:0,class:"funnel-content"},gut={class:"stages-grid"},_ut={class:"stage-header"},vut={class:"stage-title"},but={class:"templates-list"},Eut={class:"template-info"},Tut={class:"template-row"},yut=["title"],Aut=["title"],Sut={class:"template-date"},Iut={class:"template-badges"},Cut=["onClick"],Nut={key:0,class:"badge",title:"Webhook Ativo"},Out={key:1,class:"badge",title:"Condies Ativas"},xut=["onClick"],wut={key:0,class:"empty-templates"},Rut={class:"delete-modal"},$ut={class:"modal-title"},Mut={class:"modal-description"},kut={class:"modal-actions"},Lut={class:"p-6"},Dut={class:"p-6"},Put={__name:"MessageTemplates",emits:["switch-view"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=U(!1),a=U([]),i=U(null),l=U(null),r=U(!0),d=U(!1),u=U(null),p=U(null),h=U(!1),g=U(null),_=U(!1),T=U(null),S=async()=>{try{if(o.value=!0,!r.value)return;const D=await Js.get();a.value=D.data,a.value.length&&!l.value&&(l.value=a.value[0].id)}catch(D){if(!r.value)return;i.value=D.message}finally{if(!r.value)return;o.value=!1}},E=w(()=>{const D=a.value.find($=>$.id===l.value);return D?{...D,stages:Object.entries(D.stages||{}).map(([$,M])=>({id:$,...M,message_templates:M.message_templates||[]})).sort(($,M)=>$.position-M.position)}:null}),y=async()=>{try{if(o.value=!0,!r.value)return;await S()}catch(D){if(!r.value)return;i.value=D.message}finally{if(!r.value)return;o.value=!1}},A=(D,$)=>D?D.length>$?`${D.slice(0,$)}...`:D:"",C=(D,$)=>{u.value=D,p.value=$,d.value=!0},O=async()=>{try{o.value=!0;const D=a.value.find(K=>K.id===l.value);if(!D)throw new Error("Funil no encontrado");const $={...D},M=$.stages[p.value].message_templates.findIndex(K=>K.id===u.value.id);M>-1&&($.stages[p.value].message_templates.splice(M,1),await Js.update(D.id,$),await S()),d.value=!1}catch(D){i.value=D.message}finally{o.value=!1}},N=(D,$)=>{g.value={...D,funnel_id:l.value,stage_id:$,isEditing:!0},h.value=!0},R=D=>{h.value=!1,y()},k=(D,$)=>{T.value={funnel_id:D,stage_id:$},_.value=!0},L=D=>{_.value=!1,y()};return ut(()=>{r.value=!0,S()}),ml(()=>{r.value=!1,l.value=null,a.value=[],i.value=null,o.value=!1}),(D,$)=>{const M=F("fluent-icon"),K=F("woot-button");return m(),f("div",aut,[b(sut,{onSwitchView:$[0]||($[0]=B=>n("switch-view",B)),onTemplateCreated:y}),c("div",out,[o.value?(m(),f("div",iut,$[7]||($[7]=[c("span",{class:"loading-spinner"},null,-1)]))):i.value?(m(),f("div",lut,[b(M,{icon:"error",size:"24",class:"text-ruby-500 mb-2"}),c("p",rut,v(I(s)("KANBAN.MESSAGE_TEMPLATES.ERROR")),1),b(K,{variant:"clear",size:"small",class:"mt-2",onClick:S},{default:j(()=>[be(v(I(s)("RETRY")),1)]),_:1})])):a.value.length?(m(),f("div",mut,[c("div",put,[(m(!0),f(pe,null,ye(a.value,B=>(m(),f("button",{key:B.id,class:re(["funnel-tab",{active:B.id===l.value}]),onClick:H=>l.value=B.id},v(B.name),11,hut))),128))]),E.value?(m(),f("div",fut,[c("div",gut,[(m(!0),f(pe,null,ye(E.value.stages,B=>{var H;return m(),f("div",{key:B.id,class:"stage-card"},[c("div",_ut,[c("div",{class:"stage-color",style:At({backgroundColor:B.color})},null,4),c("h4",vut,v(B.name),1),b(K,{variant:"clear",size:"small",class:"add-template-button",onClick:G=>k(E.value.id,B.id)},{default:j(()=>[b(M,{icon:"add",size:"16"})]),_:2},1032,["onClick"])]),c("div",but,[(m(!0),f(pe,null,ye(B.message_templates,G=>(m(),f("div",{key:G.id,class:"template-item"},[c("div",Eut,[c("div",Tut,[c("span",{class:"template-title",title:G.title},v(A(G.title,25)),9,yut),$[8]||($[8]=c("span",{class:"template-separator"},"",-1)),c("span",{class:"template-content",title:G.content},v(A(G.content,25)),9,Aut),$[9]||($[9]=c("span",{class:"template-separator"},"",-1)),c("span",Sut,v(new Date(G.created_at).toLocaleDateString()),1),c("div",Iut,[c("span",{class:"badge edit-badge",title:"Editar Template",onClick:Ke(V=>N(G,B.id),["stop"])},[b(M,{icon:"edit",size:"12"})],8,Cut),G.webhook.enabled?(m(),f("span",Nut,[b(M,{icon:"globe",size:"12"})])):x("",!0),G.conditions.enabled?(m(),f("span",Out,[b(M,{icon:"filter",size:"12"})])):x("",!0),c("span",{class:"badge delete-badge",title:"Excluir Template",onClick:Ke(V=>C(G,B.id),["stop"])},[b(M,{icon:"delete",size:"12"})],8,xut)])])])]))),128)),(H=B.message_templates)!=null&&H.length?x("",!0):(m(),f("div",wut,v(I(s)("KANBAN.MESSAGE_TEMPLATES.NO_TEMPLATES")),1))])])}),128))])])):x("",!0)])):(m(),f("div",cut,[b(M,{icon:"document",size:"24",class:"text-slate-400 mb-2"}),c("h3",dut,v(I(s)("KANBAN.MESSAGE_TEMPLATES.EMPTY")),1),c("p",uut,v(I(s)("KANBAN.MESSAGE_TEMPLATES.EMPTY_DESCRIPTION")),1)]))]),b(Wt,{show:d.value,"onUpdate:show":$[2]||($[2]=B=>d.value=B),"on-close":()=>d.value=!1},{default:j(()=>{var B;return[c("div",Rut,[c("h3",$ut,v(I(s)("KANBAN.DELETE.TITLE")),1),c("p",Mut,v(I(s)("KANBAN.DELETE.DESCRIPTION",{name:(B=u.value)==null?void 0:B.title})),1),c("div",kut,[b(K,{variant:"clear","color-scheme":"secondary",onClick:$[1]||($[1]=H=>d.value=!1)},{default:j(()=>[be(v(I(s)("KANBAN.ACTIONS.CANCEL")),1)]),_:1}),b(K,{variant:"primary","color-scheme":"danger",loading:o.value,onClick:O},{default:j(()=>[be(v(I(s)("KANBAN.DELETE.TITLE")),1)]),_:1},8,["loading"])])])]}),_:1},8,["show","on-close"]),b(Wt,{show:h.value,"onUpdate:show":$[4]||($[4]=B=>h.value=B),"on-close":()=>h.value=!1,class:"template-modal"},{default:j(()=>[c("div",Lut,[b($f,{"initial-data":g.value,"is-editing":!0,onSaved:R,onClose:$[3]||($[3]=B=>h.value=!1)},null,8,["initial-data"])])]),_:1},8,["show","on-close"]),b(Wt,{show:_.value,"onUpdate:show":$[6]||($[6]=B=>_.value=B),"on-close":()=>_.value=!1,class:"template-modal"},{default:j(()=>[c("div",Dut,[b($f,{"initial-data":T.value,"is-editing":!1,onSaved:L,onClose:$[5]||($[5]=B=>_.value=!1)},null,8,["initial-data"])])]),_:1},8,["show","on-close"])])}}},But=Re(Put,[["__scopeId","data-v-4ac18248"]]),Fut={class:"form-section"},Uut={class:"form-group"},Gut={class:"form-label"},Vut=["placeholder"],Hut={class:"form-group"},Kut={class:"form-label"},zut=["placeholder"],Wut={class:"form-group"},jut={class:"form-label flex items-center gap-2"},Yut={class:"form-section"},Xut={class:"section-title"},qut={class:"form-group"},Zut={class:"form-label"},Qut=["value"],Jut={class:"form-group"},emt={class:"form-label"},tmt={value:""},nmt=["value"],smt={class:"form-group"},amt={class:"form-label"},omt={value:"all"},imt=["label"],lmt=["value"],rmt=["value"],cmt={key:0,class:"form-group"},dmt={class:"form-label"},umt={class:"flex items-center gap-2"},mmt={class:"form-section"},pmt={class:"section-header"},hmt={class:"section-title"},fmt={key:0,class:"empty-message"},gmt={class:"condition-fields"},_mt=["onUpdate:modelValue"],vmt=["value"],bmt=["onUpdate:modelValue"],Emt=["value"],Tmt=["onUpdate:modelValue","placeholder"],ymt=["onClick"],Amt={class:"form-section"},Smt={class:"section-header"},Imt={class:"section-title"},Cmt={key:0,class:"empty-message"},Nmt={class:"action-type"},Omt=["onUpdate:modelValue","onChange"],xmt=["value"],wmt={class:"action-details"},Rmt={key:0,class:"form-group"},$mt={class:"form-label"},Mmt=["onUpdate:modelValue"],kmt=["label"],Lmt=["value"],Dmt=["value"],Pmt={key:1,class:"form-group"},Bmt={class:"form-label"},Fmt=["onUpdate:modelValue"],Umt=["value"],Gmt={key:2,class:"form-group"},Vmt={class:"form-label"},Hmt=["onUpdate:modelValue"],Kmt={value:""},zmt=["value"],Wmt={key:3,class:"form-group"},jmt={class:"form-label"},Ymt=["onUpdate:modelValue","placeholder"],Xmt=["onClick"],qmt={class:"form-footer"},Zmt={__name:"AutomationForm",props:{automation:{type:Object,default:null},columns:{type:Array,required:!0},funnels:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(e,{emit:t}){var L,D,$,M,K,B,H,G,V,Y,ee,X,z,W,q;const n=e,s=t,{t:o}=He(),a=hn(),i=w(()=>a.getters["agents/getAgents"]||[]),l=U({id:((L=n.automation)==null?void 0:L.id)||null,name:((D=n.automation)==null?void 0:D.name)||"",description:(($=n.automation)==null?void 0:$.description)||"",active:((M=n.automation)==null?void 0:M.active)!==void 0?(K=n.automation)==null?void 0:K.active:!0,trigger:{type:((H=(B=n.automation)==null?void 0:B.trigger)==null?void 0:H.type)||"item_created",column:((V=(G=n.automation)==null?void 0:G.trigger)==null?void 0:V.column)||"all",inactivity_period:((ee=(Y=n.automation)==null?void 0:Y.trigger)==null?void 0:ee.inactivity_period)||7},conditions:((X=n.automation)==null?void 0:X.conditions)||[],actions:((z=n.automation)==null?void 0:z.actions)||[]}),r=[{value:"item_created",label:o("KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.ITEM_CREATED")},{value:"item_updated",label:o("KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.ITEM_UPDATED")},{value:"item_moved",label:o("KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.ITEM_MOVED")},{value:"inactivity",label:o("KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.INACTIVITY")}],d=[{value:"title",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.FIELD.TITLE")},{value:"description",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.FIELD.DESCRIPTION")},{value:"priority",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.FIELD.PRIORITY")},{value:"value",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.FIELD.VALUE")},{value:"agent",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.FIELD.AGENT")}],u=[{value:"equals",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.EQUALS")},{value:"not_equals",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.NOT_EQUALS")},{value:"contains",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.CONTAINS")},{value:"not_contains",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.NOT_CONTAINS")},{value:"greater_than",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.GREATER_THAN")},{value:"less_than",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.LESS_THAN")},{value:"is_empty",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.IS_EMPTY")},{value:"is_not_empty",label:o("KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.IS_NOT_EMPTY")}],p=[{value:"move_to_column",label:o("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.MOVE_TO_COLUMN")},{value:"change_priority",label:o("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.CHANGE_PRIORITY")},{value:"assign_agent",label:o("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.ASSIGN_AGENT")},{value:"send_notification",label:o("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.SEND_NOTIFICATION")}],h=[{value:"urgent",label:o("PRIORITY_LABELS.URGENT")},{value:"high",label:o("PRIORITY_LABELS.HIGH")},{value:"medium",label:o("PRIORITY_LABELS.MEDIUM")},{value:"low",label:o("PRIORITY_LABELS.LOW")},{value:"none",label:o("PRIORITY_LABELS.NONE")}],g=Z=>{if(!Z||Z==="all")return null;const ne=n.funnels.find(ae=>ae.stages&&Object.keys(ae.stages).includes(Z));return ne?ne.id:null},_=(q=(W=n.automation)==null?void 0:W.trigger)!=null&&q.column?g(n.automation.trigger.column):null,T=U(_),S=w(()=>T.value&&n.funnels.find(Z=>Z.id===T.value)||null),E=w(()=>!S.value||!S.value.stages?[]:Object.entries(S.value.stages).map(([Z,ne])=>({id:Z,title:ne.name,color:ne.color}))),y=()=>{l.value.conditions.push({field:"title",operator:"contains",value:""})},A=Z=>{l.value.conditions.splice(Z,1)},C=()=>{l.value.actions.push({type:"move_to_column",column:n.columns.length>0?n.columns[0].id:""})},O=Z=>{l.value.actions.splice(Z,1)},N=(Z,ne)=>{Z.type=ne,ne==="move_to_column"?Z.column=n.columns.length>0?n.columns[0].id:"":ne==="change_priority"?Z.priority="medium":ne==="assign_agent"?Z.agent_id="":ne==="send_notification"&&(Z.message="")},R=()=>{s("save",{...l.value})},k=w(()=>l.value.trigger.type==="inactivity");return lt(T,Z=>{if(Z&&S.value&&S.value.stages){const ne=Object.keys(S.value.stages);ne.length>0&&(l.value.trigger.column=ne[0],l.value.actions.forEach(ae=>{ae.type==="move_to_column"&&(ae.column=ne[0])}))}else Z||(l.value.trigger.column="all")}),(Z,ne)=>{const ae=F("fluent-icon"),ue=F("woot-button");return m(),f("form",{onSubmit:Ke(R,["prevent"]),class:"automation-form"},[c("div",Fut,[c("div",Uut,[c("label",Gut,v(I(o)("KANBAN.AUTOMATIONS.FORM.NAME.LABEL")),1),ie(c("input",{"onUpdate:modelValue":ne[0]||(ne[0]=te=>l.value.name=te),type:"text",class:"form-input",placeholder:I(o)("KANBAN.AUTOMATIONS.FORM.NAME.PLACEHOLDER"),required:""},null,8,Vut),[[at,l.value.name]])]),c("div",Hut,[c("label",Kut,v(I(o)("KANBAN.AUTOMATIONS.FORM.DESCRIPTION.LABEL")),1),ie(c("textarea",{"onUpdate:modelValue":ne[1]||(ne[1]=te=>l.value.description=te),class:"form-textarea",placeholder:I(o)("KANBAN.AUTOMATIONS.FORM.DESCRIPTION.PLACEHOLDER"),rows:"2"},null,8,zut),[[at,l.value.description]])]),c("div",Wut,[c("label",jut,[ie(c("input",{type:"checkbox","onUpdate:modelValue":ne[2]||(ne[2]=te=>l.value.active=te),class:"form-checkbox"},null,512),[[Kt,l.value.active]]),be(" "+v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIVE.LABEL")),1)])])]),c("div",Yut,[c("h3",Xut,v(I(o)("KANBAN.AUTOMATIONS.FORM.TRIGGER.TITLE")),1),c("div",qut,[c("label",Zut,v(I(o)("KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.LABEL")),1),ie(c("select",{"onUpdate:modelValue":ne[3]||(ne[3]=te=>l.value.trigger.type=te),class:"form-select"},[(m(),f(pe,null,ye(r,te=>c("option",{key:te.value,value:te.value},v(te.label),9,Qut)),64))],512),[[Mt,l.value.trigger.type]])]),c("div",Jut,[c("label",emt,v(I(o)("KANBAN.FORM.FUNNEL.LABEL")),1),ie(c("select",{"onUpdate:modelValue":ne[4]||(ne[4]=te=>T.value=te),class:"form-select"},[c("option",tmt,v(I(o)("KANBAN.SELECT_FUNNEL")),1),(m(!0),f(pe,null,ye(e.funnels,te=>(m(),f("option",{key:te.id,value:te.id},v(te.name),9,nmt))),128))],512),[[Mt,T.value]])]),c("div",smt,[c("label",amt,v(I(o)("KANBAN.AUTOMATIONS.FORM.TRIGGER.COLUMN.LABEL")),1),ie(c("select",{"onUpdate:modelValue":ne[5]||(ne[5]=te=>l.value.trigger.column=te),class:"form-select"},[c("option",omt,v(I(o)("KANBAN.AUTOMATIONS.FORM.TRIGGER.COLUMN.ALL")),1),S.value?(m(),f("optgroup",{key:0,label:S.value.name},[(m(!0),f(pe,null,ye(E.value,te=>(m(),f("option",{key:te.id,value:te.id},v(te.title),9,lmt))),128))],8,imt)):x("",!0),S.value?x("",!0):(m(!0),f(pe,{key:1},ye(e.columns,te=>(m(),f("option",{key:te.id,value:te.id},v(te.title),9,rmt))),128))],512),[[Mt,l.value.trigger.column]])]),k.value?(m(),f("div",cmt,[c("label",dmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.TRIGGER.INACTIVITY_PERIOD.LABEL")),1),c("div",umt,[ie(c("input",{"onUpdate:modelValue":ne[6]||(ne[6]=te=>l.value.trigger.inactivity_period=te),type:"number",min:"1",class:"form-input",required:""},null,512),[[at,l.value.trigger.inactivity_period,void 0,{number:!0}]]),c("span",null,v(I(o)("KANBAN.AUTOMATIONS.FORM.TRIGGER.INACTIVITY_PERIOD.DAYS")),1)])])):x("",!0)]),c("div",mmt,[c("div",pmt,[c("h3",hmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.CONDITIONS.TITLE")),1),c("button",{type:"button",class:"add-button",onClick:y},[b(ae,{icon:"add",size:"16"}),be(" "+v(I(o)("KANBAN.AUTOMATIONS.FORM.CONDITIONS.ADD_CONDITION")),1)])]),l.value.conditions.length===0?(m(),f("div",fmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.CONDITIONS.ADD_CONDITION")),1)):x("",!0),(m(!0),f(pe,null,ye(l.value.conditions,(te,ce)=>(m(),f("div",{key:ce,class:"condition-row"},[c("div",gmt,[ie(c("select",{"onUpdate:modelValue":fe=>te.field=fe,class:"form-select"},[(m(),f(pe,null,ye(d,fe=>c("option",{key:fe.value,value:fe.value},v(fe.label),9,vmt)),64))],8,_mt),[[Mt,te.field]]),ie(c("select",{"onUpdate:modelValue":fe=>te.operator=fe,class:"form-select"},[(m(),f(pe,null,ye(u,fe=>c("option",{key:fe.value,value:fe.value},v(fe.label),9,Emt)),64))],8,bmt),[[Mt,te.operator]]),["is_empty","is_not_empty"].includes(te.operator)?x("",!0):ie((m(),f("input",{key:0,"onUpdate:modelValue":fe=>te.value=fe,type:"text",class:"form-input",placeholder:I(o)("KANBAN.AUTOMATIONS.FORM.CONDITIONS.VALUE.PLACEHOLDER")},null,8,Tmt)),[[at,te.value]])]),c("button",{type:"button",class:"remove-button",onClick:fe=>A(ce)},[b(ae,{icon:"dismiss",size:"16"})],8,ymt)]))),128))]),c("div",Amt,[c("div",Smt,[c("h3",Imt,v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.TITLE")),1),c("button",{type:"button",class:"add-button",onClick:C},[b(ae,{icon:"add",size:"16"}),be(" "+v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.ADD_ACTION")),1)])]),l.value.actions.length===0?(m(),f("div",Cmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.ADD_ACTION")),1)):x("",!0),(m(!0),f(pe,null,ye(l.value.actions,(te,ce)=>(m(),f("div",{key:ce,class:"action-row"},[c("div",Nmt,[ie(c("select",{"onUpdate:modelValue":fe=>te.type=fe,class:"form-select",onChange:fe=>N(te,fe.target.value)},[(m(),f(pe,null,ye(p,fe=>c("option",{key:fe.value,value:fe.value},v(fe.label),9,xmt)),64))],40,Omt),[[Mt,te.type]])]),c("div",wmt,[te.type==="move_to_column"?(m(),f("div",Rmt,[c("label",$mt,v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.COLUMN.LABEL")),1),ie(c("select",{"onUpdate:modelValue":fe=>te.column=fe,class:"form-select"},[S.value?(m(),f("optgroup",{key:0,label:S.value.name},[(m(!0),f(pe,null,ye(E.value,fe=>(m(),f("option",{key:fe.id,value:fe.id},v(fe.title),9,Lmt))),128))],8,kmt)):x("",!0),S.value?x("",!0):(m(!0),f(pe,{key:1},ye(e.columns,fe=>(m(),f("option",{key:fe.id,value:fe.id},v(fe.title),9,Dmt))),128))],8,Mmt),[[Mt,te.column]])])):x("",!0),te.type==="change_priority"?(m(),f("div",Pmt,[c("label",Bmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.PRIORITY.LABEL")),1),ie(c("select",{"onUpdate:modelValue":fe=>te.priority=fe,class:"form-select"},[(m(),f(pe,null,ye(h,fe=>c("option",{key:fe.value,value:fe.value},v(fe.label),9,Umt)),64))],8,Fmt),[[Mt,te.priority]])])):x("",!0),te.type==="assign_agent"?(m(),f("div",Gmt,[c("label",Vmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.AGENT.LABEL")),1),ie(c("select",{"onUpdate:modelValue":fe=>te.agent_id=fe,class:"form-select"},[c("option",Kmt,v(I(o)("KANBAN.NO_AGENT")),1),(m(!0),f(pe,null,ye(i.value,fe=>(m(),f("option",{key:fe.id,value:fe.id},v(fe.name),9,zmt))),128))],8,Hmt),[[Mt,te.agent_id]])])):x("",!0),te.type==="send_notification"?(m(),f("div",Wmt,[c("label",jmt,v(I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.NOTIFICATION.LABEL")),1),ie(c("textarea",{"onUpdate:modelValue":fe=>te.message=fe,class:"form-textarea",placeholder:I(o)("KANBAN.AUTOMATIONS.FORM.ACTIONS.NOTIFICATION.PLACEHOLDER"),rows:"2"},null,8,Ymt),[[at,te.message]])])):x("",!0)]),c("button",{type:"button",class:"remove-button",onClick:fe=>O(ce)},[b(ae,{icon:"dismiss",size:"16"})],8,Xmt)]))),128))]),c("div",qmt,[b(ue,{variant:"clear","color-scheme":"secondary",onClick:ne[7]||(ne[7]=te=>Z.$emit("cancel"))},{default:j(()=>[be(v(I(o)("CANCEL")),1)]),_:1}),b(ue,{variant:"solid","color-scheme":"primary",type:"submit"},{default:j(()=>[be(v(I(o)("SAVE")),1)]),_:1})])],32)}}},EE=Re(Zmt,[["__scopeId","data-v-d6fe5e3d"]]),Qmt={class:"automations-container flex flex-col h-full w-full bg-white dark:bg-slate-900"},Jmt={class:"automations-header"},ept={class:"header-left"},tpt={class:"title"},npt={class:"header-right"},spt={class:"automations-content"},apt={class:"description"},opt={key:0,class:"loading-container"},ipt={key:1,class:"empty-state"},lpt={key:2,class:"automations-list"},rpt={class:"card-header"},cpt={class:"card-title"},dpt={key:0,class:"status active"},upt={key:1,class:"status inactive"},mpt={class:"card-actions"},ppt=["onClick"],hpt=["onClick"],fpt={class:"card-description"},gpt={class:"card-details"},_pt={class:"detail-section"},vpt={class:"detail-item"},bpt={class:"detail-label"},Ept={class:"detail-value"},Tpt={class:"detail-item"},ypt={class:"detail-label"},Apt={class:"detail-value"},Spt={key:0,class:"detail-item"},Ipt={class:"detail-label"},Cpt={class:"detail-value"},Npt={key:0,class:"detail-section"},Opt={key:0,class:"detail-value"},xpt={class:"detail-section"},wpt={key:0,class:"detail-value"},Rpt={class:"p-6"},$pt={class:"text-lg font-medium mb-6"},Mpt={class:"p-6"},kpt={class:"text-lg font-medium mb-6"},Lpt={class:"p-6"},Dpt={class:"text-lg font-medium mb-4"},Ppt={class:"mb-6"},Bpt={class:"flex justify-end space-x-2"},Fpt={__name:"KanbanAutomations",emits:["switchView"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=hn(),a=U([]),i=U(!0),l=U(!1),r=U(!1),d=U(!1),u=U(null),p=U(!1),h=U([]),g=U(!1),_=w(()=>{const $=o.getters.getCurrentUser;return($==null?void 0:$.role)==="administrator"}),T=w(()=>{const $=[];return h.value.forEach(M=>{M.stages&&Object.entries(M.stages).forEach(([K,B])=>{$.push({id:K,title:`${M.name} - ${B.name}`,funnelId:M.id,color:B.color})})}),$}),S=async()=>{g.value=!0;try{const $=o.getters["funnel/getFunnels"];$&&$.length>0?h.value=$:(await o.dispatch("funnel/fetchFunnels"),h.value=o.getters["funnel/getFunnels"]||[])}catch{yt.emit("newToastMessage",{message:s("KANBAN.FUNNELS.FETCH_ERROR"),action:{type:"error"}})}finally{g.value=!1}},E=async()=>{i.value=!0;try{const{data:$}=await In.getAutomations();a.value=$!=null&&$.length?$.map(M=>({...M,trigger:M.trigger||{type:"item_created",column:"all"},conditions:M.conditions||[],actions:M.actions||[]})):[]}catch{a.value=[],yt.emit("newToastMessage",{message:s("KANBAN.AUTOMATIONS.FETCH_ERROR"),action:{type:"error"}})}finally{i.value=!1}};ut(async()=>{await Promise.all([S(),E()])});const y=()=>{n("switchView","automation-editor")},A=$=>{o.dispatch("automationEditor/setCurrentAutomation",$),n("switchView","automation-editor")},C=$=>{u.value=$,d.value=!0},O=async()=>{try{p.value=!0,await In.deleteAutomation(u.value.id),a.value=a.value.filter($=>$.id!==u.value.id),yt.emit("newToastMessage",{message:s("KANBAN.AUTOMATIONS.DELETE_SUCCESS"),action:{type:"success"}}),d.value=!1,u.value=null}catch{yt.emit("newToastMessage",{message:s("KANBAN.AUTOMATIONS.DELETE_ERROR"),action:{type:"error"}})}finally{p.value=!1}},N=async $=>{p.value=!0;try{const M={...$,trigger:$.trigger||{type:"item_created",column:"all"},conditions:$.conditions||[],actions:$.actions||[]};if($.id){await In.updateAutomation($.id,M);const K=a.value.findIndex(B=>B.id===$.id);K!==-1&&(a.value[K]=M),yt.emit("newToastMessage",{message:s("KANBAN.AUTOMATIONS.UPDATE_SUCCESS"),action:{type:"success"}}),r.value=!1}else{const{data:K}=await In.createAutomation(M);a.value.push(K),yt.emit("newToastMessage",{message:s("KANBAN.AUTOMATIONS.CREATE_SUCCESS"),action:{type:"success"}}),l.value=!1}}catch{yt.emit("newToastMessage",{message:$.id?s("KANBAN.AUTOMATIONS.UPDATE_ERROR"):s("KANBAN.AUTOMATIONS.CREATE_ERROR"),action:{type:"error"}})}finally{p.value=!1}},R=$=>{if(!$)return"";if($==="all")return s("KANBAN.AUTOMATIONS.FORM.TRIGGER.COLUMN.ALL");const M=T.value.find(K=>K.id===$);return M?M.title:$},k=$=>$?s(`KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.${$.toUpperCase()}`):"",L=$=>$?s(`KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.${$.toUpperCase()}`):"",D=()=>{n("switchView","kanban")};return($,M)=>{const K=F("woot-button");return m(),f("div",Qmt,[c("header",Jmt,[c("div",ept,[c("button",{class:"back-button",onClick:D},M[3]||(M[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])),c("h1",tpt,v(I(s)("KANBAN.AUTOMATIONS.TITLE")),1)]),c("div",npt,[_.value?(m(),P(K,{key:0,variant:"smooth","color-scheme":"primary",size:"small",onClick:y},{default:j(()=>[M[4]||(M[4]=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M12 5v14M5 12h14"})],-1)),be(" "+v(I(s)("KANBAN.AUTOMATIONS.ADD")),1)]),_:1})):x("",!0)])]),c("div",spt,[c("p",apt,v(I(s)("KANBAN.AUTOMATIONS.DESCRIPTION")),1),i.value||g.value?(m(),f("div",opt,[M[5]||(M[5]=c("div",{class:"loading-spinner"},null,-1)),c("p",null,v(I(s)("KANBAN.AUTOMATIONS.LOADING")),1)])):a.value.length?(m(),f("div",lpt,[(m(!0),f(pe,null,ye(a.value,B=>{var H,G,V,Y;return m(),f("div",{key:B.id,class:re(["automation-card",{inactive:!B.active}])},[c("div",rpt,[c("div",cpt,[c("h3",null,v(B.name),1),B.active?(m(),f("span",dpt,v(I(s)("ACTIVE")),1)):(m(),f("span",upt,v(I(s)("INACTIVE")),1))]),c("div",mpt,[c("button",{class:"action-button",onClick:ee=>A(B)},M[8]||(M[8]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})],-1)]),8,ppt),c("button",{class:"action-button",onClick:ee=>C(B)},M[9]||(M[9]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M3 6h18"}),c("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),c("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,hpt)])]),c("p",fpt,v(B.description),1),c("div",gpt,[c("div",_pt,[c("h4",null,v(I(s)("KANBAN.AUTOMATIONS.FORM.TRIGGER.TITLE")),1),c("div",vpt,[c("span",bpt,v(I(s)("KANBAN.AUTOMATIONS.FORM.TRIGGER.TYPE.LABEL"))+":",1),c("span",Ept,v(k((H=B.trigger)==null?void 0:H.type)),1)]),c("div",Tpt,[c("span",ypt,v(I(s)("KANBAN.AUTOMATIONS.FORM.TRIGGER.COLUMN.LABEL"))+":",1),c("span",Apt,v(R((G=B.trigger)==null?void 0:G.column)),1)]),(V=B.trigger)!=null&&V.inactivity_period?(m(),f("div",Spt,[c("span",Ipt,v(I(s)("KANBAN.AUTOMATIONS.FORM.TRIGGER.INACTIVITY_PERIOD.LABEL"))+":",1),c("span",Cpt,v(B.trigger.inactivity_period)+" "+v(I(s)("KANBAN.AUTOMATIONS.FORM.TRIGGER.INACTIVITY_PERIOD.DAYS")),1)])):x("",!0)]),((Y=B.conditions)==null?void 0:Y.length)>0?(m(),f("div",Npt,[c("h4",null,v(I(s)("KANBAN.AUTOMATIONS.FORM.CONDITIONS.TITLE")),1),(m(!0),f(pe,null,ye(B.conditions,(ee,X)=>(m(),f("div",{key:X,class:"detail-item"},[ee!=null&&ee.field?(m(),f("span",Opt,v(I(s)(`KANBAN.AUTOMATIONS.FORM.CONDITIONS.FIELD.${ee.field.toUpperCase()}`))+" "+v(ee.operator?I(s)(`KANBAN.AUTOMATIONS.FORM.CONDITIONS.OPERATOR.${ee.operator.toUpperCase()}`):"")+" "+v(ee.value||""),1)):x("",!0)]))),128))])):x("",!0),c("div",xpt,[c("h4",null,v(I(s)("KANBAN.AUTOMATIONS.FORM.ACTIONS.TITLE")),1),(m(!0),f(pe,null,ye(B.actions||[],(ee,X)=>(m(),f("div",{key:X,class:"detail-item"},[ee!=null&&ee.type?(m(),f("span",wpt,[be(v(L(ee.type))+" ",1),ee.type==="move_to_column"&&ee.column?(m(),f(pe,{key:0},[be(v(I(s)("KANBAN.AUTOMATIONS.TRIGGER_SYMBOLS.MOVE_TO"))+" "+v(R(ee.column)),1)],64)):ee.type==="send_notification"&&ee.message?(m(),f(pe,{key:1},[be(v(I(s)("KANBAN.AUTOMATIONS.TRIGGER_SYMBOLS.NOTIFICATION"))+" "+v(ee.message),1)],64)):x("",!0)])):x("",!0)]))),128))])])],2)}),128))])):(m(),f("div",ipt,[M[7]||(M[7]=Bo('<div class="empty-icon" data-v-1dd03b5b><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-1dd03b5b><rect x="3" y="11" width="18" height="10" rx="2" data-v-1dd03b5b></rect><circle cx="12" cy="5" r="2" data-v-1dd03b5b></circle><path d="M12 7v4" data-v-1dd03b5b></path><line x1="8" y1="16" x2="8" y2="16" data-v-1dd03b5b></line><line x1="16" y1="16" x2="16" y2="16" data-v-1dd03b5b></line></svg></div>',1)),c("h3",null,v(I(s)("KANBAN.AUTOMATIONS.EMPTY_TITLE")),1),c("p",null,v(I(s)("KANBAN.AUTOMATIONS.CREATE_FIRST")),1),_.value?(m(),P(K,{key:0,variant:"smooth","color-scheme":"primary",class:"mt-4",onClick:y},{default:j(()=>[M[6]||(M[6]=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[c("path",{d:"M12 5v14M5 12h14"})],-1)),be(" "+v(I(s)("KANBAN.AUTOMATIONS.ADD")),1)]),_:1})):x("",!0)]))]),l.value?(m(),P(Wt,{key:0,show:l.value,"on-close":()=>l.value=!1,size:"large"},{default:j(()=>[c("div",Rpt,[c("h3",$pt,v(I(s)("KANBAN.AUTOMATIONS.ADD")),1),b(EE,{columns:T.value,funnels:h.value,onSave:N,onCancel:M[0]||(M[0]=B=>l.value=!1)},null,8,["columns","funnels"])])]),_:1},8,["show","on-close"])):x("",!0),r.value?(m(),P(Wt,{key:1,show:r.value,"on-close":()=>r.value=!1,size:"large"},{default:j(()=>[c("div",Mpt,[c("h3",kpt,v(I(s)("KANBAN.AUTOMATIONS.EDIT.TITLE")),1),u.value?(m(),P(EE,{key:0,automation:u.value,columns:T.value,funnels:h.value,onSave:N,onCancel:M[1]||(M[1]=B=>r.value=!1)},null,8,["automation","columns","funnels"])):x("",!0)])]),_:1},8,["show","on-close"])):x("",!0),d.value?(m(),P(Wt,{key:2,show:d.value,"on-close":()=>d.value=!1},{default:j(()=>{var B;return[c("div",Lpt,[c("h3",Dpt,v(I(s)("KANBAN.AUTOMATIONS.DELETE.TITLE")),1),c("p",Ppt,v(I(s)("KANBAN.AUTOMATIONS.DELETE.DESCRIPTION",{name:(B=u.value)==null?void 0:B.name})),1),c("div",Bpt,[b(K,{variant:"clear","color-scheme":"secondary",onClick:M[2]||(M[2]=H=>d.value=!1)},{default:j(()=>[be(v(I(s)("KANBAN.AUTOMATIONS.DELETE.CANCEL")),1)]),_:1}),b(K,{variant:"solid","color-scheme":"alert",onClick:O,loading:p.value},{default:j(()=>[be(v(I(s)("KANBAN.AUTOMATIONS.DELETE.CONFIRM")),1)]),_:1},8,["loading"])])])]}),_:1},8,["show","on-close"])):x("",!0)])}}},Upt=Re(Fpt,[["__scopeId","data-v-1dd03b5b"]]),Gpt={class:"automation-header"},Vpt={class:"header-left"},Hpt={class:"title-container"},Kpt=["placeholder"],zpt={class:"header-actions"},Wpt={class:"status-toggle"},jpt={class:"toggle-label"},Ypt=["disabled"],Xpt={__name:"AutomationHeader",props:{name:{type:String,default:""},active:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1}},emits:["update:name","update:active","save","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=U(n.name),i=U(n.active);lt(()=>n.name,d=>{a.value=d}),lt(()=>n.active,d=>{i.value=d});const l=()=>{s("update:name",a.value)},r=()=>{s("update:active",i.value)};return(d,u)=>(m(),f("div",Gpt,[c("div",Vpt,[c("button",{class:"back-button",onClick:u[0]||(u[0]=p=>d.$emit("cancel"))},u[5]||(u[5]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])),c("div",Hpt,[ie(c("input",{"onUpdate:modelValue":u[1]||(u[1]=p=>a.value=p),class:"automation-name",placeholder:I(o)("KANBAN.AUTOMATIONS.FLOW_EDITOR.NAME_PLACEHOLDER"),onInput:l},null,40,Kpt),[[at,a.value]])])]),c("div",zpt,[c("div",Wpt,[c("label",jpt,[be(v(I(o)("KANBAN.AUTOMATIONS.FLOW_EDITOR.ACTIVE"))+" ",1),ie(c("input",{type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=p=>i.value=p),onChange:r},null,544),[[Kt,i.value]]),u[6]||(u[6]=c("span",{class:"toggle-switch"},null,-1))])]),c("button",{class:"save-button",disabled:e.isSaving,onClick:u[3]||(u[3]=p=>d.$emit("save"))},[u[7]||(u[7]=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),c("polyline",{points:"17 21 17 13 7 13 7 21"}),c("polyline",{points:"7 3 7 8 15 8"})],-1)),be(" "+v(I(o)("KANBAN.AUTOMATIONS.FLOW_EDITOR.SAVE")),1)],8,Ypt),c("button",{class:"cancel-button",onClick:u[4]||(u[4]=p=>d.$emit("cancel"))},[u[8]||(u[8]=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),be(" "+v(I(o)("KANBAN.AUTOMATIONS.FLOW_EDITOR.CANCEL")),1)])])]))}},qpt=Re(Xpt,[["__scopeId","data-v-a70aef3e"]]),Zpt={class:"node-header"},Qpt={class:"node-icon"},Jpt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},eht={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},tht={key:2,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},nht={class:"node-title"},sht={class:"node-content"},aht={key:0,class:"node-description"},oht={class:"handle-container"},iht={key:0,class:"node-dropdown"},lht={__name:"BaseNode",props:{node:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnecting:{type:Boolean,default:!1}},emits:["click","dragStart","dragEnd","connectStart","connectEnd","mousedown","edit","duplicate","delete"],setup(e,{emit:t}){const n=e,s=t,o=hn(),a=U(!1),i=w(()=>n.node.type!=="trigger"),l=w(()=>!0),r=_=>{_.stopPropagation(),a.value=!a.value,a.value&&setTimeout(()=>{window.addEventListener("click",d)},0)},d=()=>{a.value=!1,window.removeEventListener("click",d)},u=_=>{const T={nodeId:n.node.id,handleType:_};o.commit("automationFlow/startConnectionDrag",T),document.addEventListener("mousemove",p),document.addEventListener("mouseup",h)},p=_=>{const T=_.clientX,S=_.clientY;o.commit("automationFlow/updateDragPosition",{x:T,y:S})},h=_=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h);try{const S=_.target.closest(".handle");if(S){const E=S.closest(".node-container");if(E){const y=E.getAttribute("data-node-id");if(!y){console.warn("Node ID no encontrado no elemento DOM"),o.commit("automationFlow/endConnectionDrag");return}const A=S.classList.contains("handle-left")?"target":"source",C=o.state.automationFlow.dragConnection;if(!C||!C.active){console.warn("Dados de arrasto invlidos ou j finalizados"),o.commit("automationFlow/endConnectionDrag");return}C.handleType!==A&&y!==C.nodeId&&(C.handleType==="source"?o.dispatch("automationFlow/connectNodes",{sourceId:C.nodeId,targetId:y,sourceHandle:"right",targetHandle:"left"}):o.dispatch("automationFlow/connectNodes",{sourceId:y,targetId:C.nodeId,sourceHandle:"right",targetHandle:"left"}))}}}catch(T){console.error("Erro ao finalizar conexo:",T)}finally{o.commit("automationFlow/endConnectionDrag")}},g=_=>{_.stopPropagation(),d(),s("edit")};return(_,T)=>(m(),f("div",{class:re(["node-container",{selected:e.selected}]),style:At({left:`${e.node.position.x}px`,top:`${e.node.position.y}px`}),onClick:T[4]||(T[4]=S=>_.$emit("click",S)),onDblclick:T[5]||(T[5]=S=>_.$emit("edit")),onMousedown:T[6]||(T[6]=S=>_.$emit("mousedown",S))},[c("div",{class:re(["node-card",e.node.type])},[c("div",Zpt,[c("div",Qpt,[e.node.type==="trigger"?(m(),f("svg",Jpt,T[7]||(T[7]=[c("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"},null,-1)]))):e.node.type==="condition"?(m(),f("svg",eht,T[8]||(T[8]=[c("path",{d:"M6 9l6 6 6-6"},null,-1)]))):e.node.type==="action"?(m(),f("svg",tht,T[9]||(T[9]=[c("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},null,-1)]))):x("",!0)]),c("div",nht,v(e.node.data.label),1),c("div",{class:"node-menu",onClick:Ke(r,["stop"])},T[10]||(T[10]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("circle",{cx:"12",cy:"12",r:"1"}),c("circle",{cx:"12",cy:"5",r:"1"}),c("circle",{cx:"12",cy:"19",r:"1"})],-1)]))]),c("div",sht,[et(_.$slots,"content",{},()=>[e.node.data.description?(m(),f("div",aht,v(e.node.data.description),1)):x("",!0)],!0)]),c("div",oht,[i.value?(m(),f("div",{key:0,class:"handle handle-left",onMousedown:T[0]||(T[0]=Ke(S=>u("target"),["stop"]))},null,32)):x("",!0),l.value?(m(),f("div",{key:1,class:"handle handle-right",onMousedown:T[1]||(T[1]=Ke(S=>u("source"),["stop"]))},null,32)):x("",!0)]),a.value?(m(),f("div",iht,[c("div",{class:"dropdown-item",onClick:g},T[11]||(T[11]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M12 20h9"}),c("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})],-1),c("span",null,"Editar",-1)])),c("div",{class:"dropdown-item",onClick:T[2]||(T[2]=S=>_.$emit("duplicate"))},T[12]||(T[12]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),c("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),c("span",null,"Duplicar",-1)])),c("div",{class:"dropdown-item delete",onClick:T[3]||(T[3]=S=>_.$emit("delete"))},T[13]||(T[13]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M3 6h18"}),c("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),c("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),c("span",null,"Excluir",-1)]))])):x("",!0)],2)],38))}},km=Re(lht,[["__scopeId","data-v-4111a2fa"]]),rht={class:"trigger-content"},cht={class:"trigger-type"},dht={key:0,class:"trigger-details"},uht={key:0,class:"trigger-pattern"},mht={key:1,class:"trigger-details"},pht={key:0,class:"trigger-status-change"},hht={key:0},fht={key:1},ght={key:2},_ht={key:2,class:"trigger-details"},vht={key:0,class:"trigger-column-move"},bht={key:0},Eht={key:1},Tht={key:2},yht={key:3,class:"trigger-details"},Aht={key:0,class:"trigger-schedule"},Sht={key:0},Iht={key:1},Cht={key:4,class:"trigger-details"},Nht={key:0,class:"trigger-funnel"},Oht={key:1,class:"trigger-stage"},xht={key:2,class:"trigger-priority"},wht={key:5,class:"trigger-description"},Rht={__name:"TriggerNode",props:{node:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnecting:{type:Boolean,default:!1}},emits:["click","dragStart","dragEnd","connectStart","connectEnd","mousedown","edit","duplicate","delete"],setup(e,{emit:t}){const n=o=>({message_received:"Mensagem recebida",item_created:"Item criado",status_changed:"Status alterado",item_moved:"Item movido",scheduled:"Agendado"})[o]||o,s=o=>({daily:"Diariamente",weekly:"Semanalmente",monthly:"Mensalmente"})[o]||o;return(o,a)=>(m(),P(km,{node:e.node,selected:e.selected,isConnecting:e.isConnecting,onClick:a[0]||(a[0]=i=>o.$emit("click",i)),onDragStart:a[1]||(a[1]=i=>o.$emit("dragStart",i,e.node)),onDragEnd:a[2]||(a[2]=i=>o.$emit("dragEnd",i,e.node)),onConnectStart:a[3]||(a[3]=i=>o.$emit("connectStart",i,e.node,i[1])),onConnectEnd:a[4]||(a[4]=i=>o.$emit("connectEnd",i,e.node,i[1])),onMousedown:a[5]||(a[5]=i=>o.$emit("mousedown",i)),onEdit:a[6]||(a[6]=i=>o.$emit("edit")),onDuplicate:a[7]||(a[7]=i=>o.$emit("duplicate")),onDelete:a[8]||(a[8]=i=>o.$emit("delete"))},{content:j(()=>[c("div",rht,[c("div",cht,v(n(e.node.data.type)),1),e.node.data.type==="message_received"?(m(),f("div",dht,[e.node.data.pattern?(m(),f("div",uht,[a[9]||(a[9]=c("span",{class:"label"},"Padro:",-1)),be(" "+v(e.node.data.pattern),1)])):x("",!0)])):x("",!0),e.node.data.type==="status_changed"?(m(),f("div",mht,[e.node.data.fromStatus||e.node.data.toStatus?(m(),f("div",pht,[e.node.data.fromStatus?(m(),f("span",hht,"De: "+v(e.node.data.fromStatus),1)):x("",!0),e.node.data.fromStatus&&e.node.data.toStatus?(m(),f("span",fht,"  ")):x("",!0),e.node.data.toStatus?(m(),f("span",ght,"Para: "+v(e.node.data.toStatus),1)):x("",!0)])):x("",!0)])):x("",!0),e.node.data.type==="item_moved"?(m(),f("div",_ht,[e.node.data.fromColumn||e.node.data.toColumn?(m(),f("div",vht,[e.node.data.fromColumn?(m(),f("span",bht,"De: "+v(e.node.data.fromColumn),1)):x("",!0),e.node.data.fromColumn&&e.node.data.toColumn?(m(),f("span",Eht,"  ")):x("",!0),e.node.data.toColumn?(m(),f("span",Tht,"Para: "+v(e.node.data.toColumn),1)):x("",!0)])):x("",!0)])):x("",!0),e.node.data.type==="scheduled"?(m(),f("div",yht,[e.node.data.schedule||e.node.data.time?(m(),f("div",Aht,[e.node.data.schedule?(m(),f("span",Sht,v(s(e.node.data.schedule)),1)):x("",!0),e.node.data.time?(m(),f("span",Iht," s "+v(e.node.data.time),1)):x("",!0)])):x("",!0)])):x("",!0),e.node.data.type==="item_created"?(m(),f("div",Cht,[e.node.data.funnel?(m(),f("div",Nht,[a[10]||(a[10]=c("span",{class:"label"},"Funil:",-1)),be(" "+v(e.node.data.funnel),1)])):x("",!0),e.node.data.initialStage?(m(),f("div",Oht,[a[11]||(a[11]=c("span",{class:"label"},"Etapa:",-1)),be(" "+v(e.node.data.initialStage),1)])):x("",!0),e.node.data.priority?(m(),f("div",xht,[a[12]||(a[12]=c("span",{class:"label"},"Prioridade:",-1)),be(" "+v(e.node.data.priority),1)])):x("",!0)])):x("",!0),e.node.data.description?(m(),f("div",wht,v(e.node.data.description),1)):x("",!0)])]),_:1},8,["node","selected","isConnecting"]))}},$ht=Re(Rht,[["__scopeId","data-v-ec7559cf"]]),Mht={class:"action-content"},kht={class:"action-type"},Lht={key:0,class:"action-labels mb-2 flex flex-wrap gap-1"},Dht={class:"action-details"},Pht={key:0,class:"action-description"},Bht={key:1,class:"action-message"},Fht={key:2,class:"action-target"},Uht={__name:"ActionNode",props:{node:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnecting:{type:Boolean,default:!1}},emits:["click","dragStart","dragEnd","connectStart","connectEnd","mousedown","edit","duplicate","delete"],setup(e,{emit:t}){const n=s=>({send_message:"Enviar mensagem",change_status:"Alterar status",move_to_column:"Mover para coluna",assign_agent:"Atribuir a agente",add_label:"Adicionar etiqueta",change_priority:"Alterar prioridade",send_notification:"Enviar notificao"})[s]||s;return(s,o)=>(m(),P(km,{node:e.node,selected:e.selected,isConnecting:e.isConnecting,onClick:o[0]||(o[0]=a=>s.$emit("click",a)),onDragStart:o[1]||(o[1]=a=>s.$emit("dragStart",a,e.node)),onDragEnd:o[2]||(o[2]=a=>s.$emit("dragEnd",a,e.node)),onConnectStart:o[3]||(o[3]=a=>s.$emit("connectStart",a,e.node,a[1])),onConnectEnd:o[4]||(o[4]=a=>s.$emit("connectEnd",a,e.node,a[1])),onMousedown:o[5]||(o[5]=a=>s.$emit("mousedown",a)),onEdit:o[6]||(o[6]=a=>s.$emit("edit")),onDuplicate:o[7]||(o[7]=a=>s.$emit("duplicate")),onDelete:o[8]||(o[8]=a=>s.$emit("delete"))},{content:j(()=>[c("div",Mht,[c("div",kht,v(n(e.node.data.type)),1),e.node.data.type==="add_label"&&e.node.data.labels&&e.node.data.labels.length?(m(),f("div",Lht,[(m(!0),f(pe,null,ye(e.node.data.labels,a=>(m(),f("span",{key:a,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},v(a),1))),128))])):x("",!0),c("div",Dht,[e.node.data.description?(m(),f("div",Pht,v(e.node.data.description),1)):x("",!0),e.node.data.message?(m(),f("div",Bht,' "'+v(e.node.data.message)+'" ',1)):x("",!0),e.node.data.target?(m(),f("div",Fht,"  "+v(e.node.data.target),1)):x("",!0)])])]),_:1},8,["node","selected","isConnecting"]))}},Ght=Re(Uht,[["__scopeId","data-v-b6875c3f"]]),Vht={class:"condition-content"},Hht={class:"condition-type"},Kht={class:"condition-expression"},zht={class:"condition-field"},Wht={class:"condition-operator"},jht={class:"condition-value"},Yht={key:0,class:"condition-description"},Xht={__name:"ConditionNode",props:{node:{type:Object,required:!0},selected:{type:Boolean,default:!1},isConnecting:{type:Boolean,default:!1}},emits:["click","dragStart","dragEnd","connectStart","connectEnd","mousedown","edit","duplicate","delete"],setup(e,{emit:t}){const n=a=>({status_equals:"Status igual a",text_contains:"Texto contm",assigned_to:"Atribudo a",priority_is:"Prioridade ",has_label:"Tem etiqueta"})[a]||a,s=a=>({equals:"igual a",not_equals:"diferente de",contains:"contm",greater_than:"maior que",less_than:"menor que",includes:"inclui"})[a]||a||"igual a",o=a=>a==null?"-":typeof a=="boolean"?a?"Sim":"No":typeof a=="string"&&a.length>20?`${a.substring(0,20)}...`:a;return(a,i)=>(m(),P(km,{node:e.node,selected:e.selected,isConnecting:e.isConnecting,onClick:i[0]||(i[0]=l=>a.$emit("click",l)),onDragStart:i[1]||(i[1]=l=>a.$emit("dragStart",l,e.node)),onDragEnd:i[2]||(i[2]=l=>a.$emit("dragEnd",l,e.node)),onConnectStart:i[3]||(i[3]=l=>a.$emit("connectStart",l,e.node,l[1])),onConnectEnd:i[4]||(i[4]=l=>a.$emit("connectEnd",l,e.node,l[1])),onMousedown:i[5]||(i[5]=l=>a.$emit("mousedown",l)),onEdit:i[6]||(i[6]=l=>a.$emit("edit")),onDuplicate:i[7]||(i[7]=l=>a.$emit("duplicate")),onDelete:i[8]||(i[8]=l=>a.$emit("delete"))},{content:j(()=>[c("div",Vht,[c("div",Hht,v(n(e.node.data.type)),1),c("div",Kht,[c("span",zht,v(e.node.data.field||"campo"),1),c("span",Wht,v(s(e.node.data.operator)),1),c("span",jht,v(o(e.node.data.value)),1)]),e.node.data.description?(m(),f("div",Yht,v(e.node.data.description),1)):x("",!0)])]),_:1},8,["node","selected","isConnecting"]))}},qht=Re(Xht,[["__scopeId","data-v-5e0bc83a"]]),Zht=(e,t,n="right",s="left")=>{let l=e.position.x+240+6,r=e.position.y+100/2,d=t.position.x-6,u=t.position.y+100/2;const p=Math.abs(d-l),h=Math.min(p*.5,150),g=`M${l},${r} C${l+h},${r} ${d-h},${u} ${d},${u}`,_={x:(l+d)/2,y:(r+u)/2-10};return{path:g,labelPosition:_}},Qht=(e,t=null)=>{if(!e.length)return{x:250,y:100};if(t){const s=e.find(o=>o.id===t);if(s)return{x:s.position.x,y:s.position.y+150}}const n=e[e.length-1];return{x:n.position.x,y:n.position.y+150}},Jht={class:"p-6"},eft={class:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-4"},tft={key:0,class:"trigger-editor"},nft={class:"form-group mb-4"},sft={key:0,class:"trigger-fields"},aft={class:"form-group mb-4"},oft={key:1,class:"trigger-fields"},ift={class:"form-group mb-4"},lft={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},rft={value:""},cft=["value"],dft={class:"form-group mb-4"},uft={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},mft={value:""},pft=["value"],hft={class:"form-group mb-4"},fft={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},gft=["placeholder"],_ft={class:"form-group mb-4"},vft={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},bft={value:""},Eft={value:"urgent"},Tft={value:"high"},yft={value:"medium"},Aft={value:"low"},Sft={key:2,class:"trigger-fields"},Ift={class:"form-group mb-4"},Cft={class:"form-group mb-4"},Nft={class:"form-group mb-4"},Oft={key:3,class:"trigger-fields"},xft={class:"form-group mb-4"},wft={class:"form-group mb-4"},Rft={key:4,class:"trigger-fields"},$ft={class:"form-group mb-4"},Mft={class:"form-group mb-4"},kft={key:1,class:"condition-editor"},Lft={class:"form-group mb-4"},Dft={class:"form-group mb-4"},Pft={class:"form-group mb-4"},Bft={class:"form-group mb-4"},Fft={key:2,class:"action-editor"},Uft={key:0,class:"form-group mb-4"},Gft={key:1,class:"form-group mb-4"},Vft={class:"form-group mb-4"},Hft={key:2,class:"form-group mb-4"},Kft={key:3,class:"form-group mb-4"},zft={class:"flex justify-end gap-2"},Wft={__name:"NodeEditor",props:{show:{type:Boolean,default:!1},nodeId:{type:String,default:null}},emits:["close","save"],setup(e,{emit:t}){var R;const n=e,s=t,o=hn(),a=U({type:"",field:"",operator:"equals",value:"",description:"",message:"",target:"",pattern:"",fromStatus:"",toStatus:"",fromColumn:"",toColumn:"",schedule:"daily",time:"",initialStage:"",agent:"",priority:"",weekday:"",labels:[]}),i=w(()=>n.nodeId?o.state.automationFlow.flow.nodes.find(L=>L.id===n.nodeId):null),l=w(()=>{var k;return((k=i.value)==null?void 0:k.type)||""}),r=w(()=>{var k,L;return((L=(k=i.value)==null?void 0:k.data)==null?void 0:L.type)||""}),d=w(()=>{var k,L;return((L=(k=i.value)==null?void 0:k.data)==null?void 0:L.type)||""}),u=w(()=>l.value==="trigger"?"Editar Disparador":l.value==="condition"?"Editar Condio":l.value==="action"?"Editar Ao":"Editar N");ut(()=>{p(),y.value.length||o.dispatch("labels/get"),C.value.length||o.dispatch("agents/get")});const p=()=>{if(!i.value)return;const k=i.value.data||{};a.value={type:k.type||"",field:k.field||"",operator:k.operator||"equals",value:k.value||"",description:k.description||"",message:k.message||"",target:k.target||"",label:k.label||"",pattern:k.pattern||"",fromStatus:k.fromStatus||"",toStatus:k.toStatus||"",fromColumn:k.fromColumn||"",toColumn:k.toColumn||"",schedule:k.schedule||"daily",time:k.time||"",initialStage:k.initialStage||"",agent:k.agent||"",priority:k.priority||"",weekday:k.weekday||"",labels:k.labels||[]}},h=()=>{s("close")},g=()=>{if(!i.value)return;let k="";if(l.value==="trigger"){const L=i.value.data.type;a.value.type=L,L==="message_received"?k="Mensagem recebida":L==="item_created"?k="Item criado":L==="status_changed"?k="Status alterado":L==="item_moved"?k="Item movido":L==="scheduled"?k="Agendado":k=L}else if(l.value==="condition"){k="Se";const L=i.value.data.type;a.value.type=L}else if(l.value==="action"){const L=i.value.data.type;a.value.type=L,L==="send_message"?k="Enviar mensagem":L==="change_status"?k="Alterar status":L==="move_to_column"?k="Mover para coluna":L==="assign_agent"?k="Atribuir a agente":L==="add_label"?k="Adicionar etiqueta":L==="change_priority"?k="Alterar prioridade":k=L}o.dispatch("automationFlow/updateNodeData",{nodeId:n.nodeId,data:{...a.value,label:k}}),s("save"),h()},_=w(()=>o.getters["funnel/getFunnels"]),T=U(((R=o.getters["funnel/getSelectedFunnel"])==null?void 0:R.id)||""),S=()=>{const k=_.value.find(L=>L.id===T.value);k&&(o.dispatch("funnel/setSelectedFunnel",k),a.value.initialStage="")},E=w(()=>{const k=o.getters["funnel/getSelectedFunnel"];return!k||!k.stages?[]:Object.values(k.stages).sort((L,D)=>L.position-D.position)}),y=w(()=>o.getters["labels/getLabels"]||[]),A=w(()=>y.value.map(k=>({value:k.title,label:k.title}))),C=w(()=>o.getters["agents/getAgents"]||[]),O=w(()=>C.value.map(k=>({value:k.id,label:k.name}))),N=w({get(){return a.value.agent?[a.value.agent]:[]},set(k){a.value.agent=Array.isArray(k)&&k.length>0?k[0]:""}});return(k,L)=>{const D=F("woot-button");return m(),P(Wt,{show:e.show,"on-close":h,size:"small"},{default:j(()=>[c("div",Jht,[c("h2",eft,v(u.value),1),l.value==="trigger"?(m(),f("div",tft,[c("div",nft,[L[22]||(L[22]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Descrio (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[0]||(L[0]=$=>a.value.description=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"descrio"},null,512),[[at,a.value.description]])]),d.value==="message_received"?(m(),f("div",sft,[c("div",aft,[L[23]||(L[23]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Padro de Texto (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[1]||(L[1]=$=>a.value.pattern=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"ex: *ajuda*, #suporte"},null,512),[[at,a.value.pattern]]),L[24]||(L[24]=c("p",{class:"text-xs text-slate-500 mt-1"}," Deixe em branco para qualquer mensagem ",-1))])])):x("",!0),d.value==="item_created"?(m(),f("div",oft,[c("div",ift,[c("label",lft,v(k.$t("KANBAN.FORM.FUNNEL.LABEL")),1),ie(c("select",{"onUpdate:modelValue":L[2]||(L[2]=$=>T.value=$),onChange:S,class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800"},[c("option",rft,v(k.$t("KANBAN.SELECT_FUNNEL")),1),(m(!0),f(pe,null,ye(_.value,$=>(m(),f("option",{key:$.id,value:$.id},v($.name),9,cft))),128))],544),[[Mt,T.value]])]),c("div",dft,[c("label",uft,v(k.$t("KANBAN.FORM.STAGE.LABEL")),1),ie(c("select",{"onUpdate:modelValue":L[3]||(L[3]=$=>a.value.initialStage=$),class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800"},[c("option",mft,v(k.$t("KANBAN.FORM.STAGE.PLACEHOLDER")),1),(m(!0),f(pe,null,ye(E.value,$=>(m(),f("option",{key:$.id,value:$.name},v($.name),9,pft))),128))],512),[[Mt,a.value.initialStage]])]),c("div",hft,[c("label",fft,v(k.$t("KANBAN.FORM.AGENT.LABEL")),1),ie(c("input",{"onUpdate:modelValue":L[4]||(L[4]=$=>a.value.agent=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:k.$t("KANBAN.FORM.AGENT.PLACEHOLDER")},null,8,gft),[[at,a.value.agent]])]),c("div",_ft,[c("label",vft,v(k.$t("KANBAN.FORM.PRIORITY.LABEL")),1),ie(c("select",{"onUpdate:modelValue":L[5]||(L[5]=$=>a.value.priority=$),class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800"},[c("option",bft,v(k.$t("KANBAN.BULK_ACTIONS.PRIORITY.ALL")),1),c("option",Eft,v(k.$t("KANBAN.BULK_ACTIONS.PRIORITY.URGENT")),1),c("option",Tft,v(k.$t("KANBAN.BULK_ACTIONS.PRIORITY.HIGH")),1),c("option",yft,v(k.$t("KANBAN.BULK_ACTIONS.PRIORITY.MEDIUM")),1),c("option",Aft,v(k.$t("KANBAN.BULK_ACTIONS.PRIORITY.LOW")),1),L[25]||(L[25]=c("option",{value:"none"},"Nenhuma",-1))],512),[[Mt,a.value.priority]])])])):x("",!0),d.value==="status_changed"?(m(),f("div",Sft,[c("div",Ift,[L[26]||(L[26]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Status Anterior (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[6]||(L[6]=$=>a.value.fromStatus=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"ex: pendente"},null,512),[[at,a.value.fromStatus]])]),c("div",Cft,[L[27]||(L[27]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Novo Status ",-1)),ie(c("input",{"onUpdate:modelValue":L[7]||(L[7]=$=>a.value.toStatus=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"ex: resolvido"},null,512),[[at,a.value.toStatus]])]),c("div",Nft,[L[28]||(L[28]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Agente (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[8]||(L[8]=$=>a.value.agent=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Nome do agente"},null,512),[[at,a.value.agent]])])])):x("",!0),d.value==="item_moved"?(m(),f("div",Oft,[c("div",xft,[L[29]||(L[29]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Coluna de Origem (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[9]||(L[9]=$=>a.value.fromColumn=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"ex: Em Progresso"},null,512),[[at,a.value.fromColumn]])]),c("div",wft,[L[30]||(L[30]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Coluna de Destino (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[10]||(L[10]=$=>a.value.toColumn=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"ex: Concludo"},null,512),[[at,a.value.toColumn]])])])):x("",!0),d.value==="scheduled"?(m(),f("div",Rft,[c("div",$ft,[L[31]||(L[31]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Dia da Semana (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[11]||(L[11]=$=>a.value.weekday=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"ex: Segunda-feira"},null,512),[[at,a.value.weekday]])]),c("div",Mft,[L[32]||(L[32]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Horrio ",-1)),ie(c("input",{"onUpdate:modelValue":L[12]||(L[12]=$=>a.value.time=$),type:"time",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800"},null,512),[[at,a.value.time]])])])):x("",!0)])):l.value==="condition"?(m(),f("div",kft,[c("div",Lft,[L[34]||(L[34]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Campo ",-1)),ie(c("select",{"onUpdate:modelValue":L[13]||(L[13]=$=>a.value.field=$),class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800"},L[33]||(L[33]=[c("optgroup",{label:"Mensagem"},[c("option",{value:"content"},"Contedo"),c("option",{value:"created_at"},"Criado em"),c("option",{value:"updated_at"},"Atualizado em"),c("option",{value:"status"},"Status"),c("option",{value:"sender_type"},"Tipo de Remetente"),c("option",{value:"sender_id"},"ID do Remetente"),c("option",{value:"message_type"},"Tipo de Mensagem"),c("option",{value:"inbox_id"},"Inbox ID"),c("option",{value:"conversation_id"},"ID da Conversa")],-1),c("optgroup",{label:"Contato"},[c("option",{value:"name"},"Nome"),c("option",{value:"email"},"Email"),c("option",{value:"phone_number"},"Telefone"),c("option",{value:"created_at_contact"},"Criado em"),c("option",{value:"updated_at_contact"},"Atualizado em"),c("option",{value:"custom_attributes"},"Atributos Personalizados")],-1),c("optgroup",{label:"Kanban Item"},[c("option",{value:"funnel_stage"},"Etapa do Funil"),c("option",{value:"position"},"Posio"),c("option",{value:"created_at_kanban"},"Criado em"),c("option",{value:"updated_at_kanban"},"Atualizado em"),c("option",{value:"custom_attributes_kanban"},"Atributos Personalizados"),c("option",{value:"item_details"},"Detalhes do Item")],-1)]),512),[[Mt,a.value.field]])]),c("div",Dft,[L[36]||(L[36]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Operador ",-1)),ie(c("select",{"onUpdate:modelValue":L[14]||(L[14]=$=>a.value.operator=$),class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800"},L[35]||(L[35]=[c("option",{value:"equals"},"igual a",-1),c("option",{value:"not_equals"},"diferente de",-1),c("option",{value:"contains"},"contm",-1),c("option",{value:"greater_than"},"maior que",-1),c("option",{value:"less_than"},"menor que",-1)]),512),[[Mt,a.value.operator]])]),c("div",Pft,[L[37]||(L[37]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Valor ",-1)),ie(c("input",{"onUpdate:modelValue":L[15]||(L[15]=$=>a.value.value=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"valor"},null,512),[[at,a.value.value]])]),c("div",Bft,[L[38]||(L[38]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Descrio (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[16]||(L[16]=$=>a.value.description=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"descrio"},null,512),[[at,a.value.description]])])])):l.value==="action"?(m(),f("div",Fft,[r.value==="send_message"?(m(),f("div",Uft,[L[39]||(L[39]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Mensagem ",-1)),ie(c("textarea",{"onUpdate:modelValue":L[17]||(L[17]=$=>a.value.message=$),class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",rows:"3",placeholder:"Digite a mensagem a ser enviada"},null,512),[[at,a.value.message]])])):x("",!0),r.value==="change_status"||r.value==="move_to_column"?(m(),f("div",Gft,[L[40]||(L[40]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Destino ",-1)),ie(c("input",{"onUpdate:modelValue":L[18]||(L[18]=$=>a.value.target=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Destino (status ou coluna)"},null,512),[[at,a.value.target]])])):x("",!0),c("div",Vft,[L[41]||(L[41]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Descrio (opcional) ",-1)),ie(c("input",{"onUpdate:modelValue":L[19]||(L[19]=$=>a.value.description=$),type:"text",class:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"descrio"},null,512),[[at,a.value.description]])]),r.value==="add_label"?(m(),f("div",Hft,[L[42]||(L[42]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Etiquetas ",-1)),b(Rf,{modelValue:a.value.labels,"onUpdate:modelValue":L[20]||(L[20]=$=>a.value.labels=$),options:A.value,placeholder:"Selecione as etiquetas","search-placeholder":"Buscar etiqueta..."},null,8,["modelValue","options"])])):x("",!0),r.value==="assign_agent"?(m(),f("div",Kft,[L[43]||(L[43]=c("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Agente ",-1)),b(Rf,{modelValue:N.value,"onUpdate:modelValue":L[21]||(L[21]=$=>N.value=$),options:O.value,placeholder:k.$t("KANBAN.FORM.AGENT.PLACEHOLDER"),"search-placeholder":k.$t("KANBAN.FORM.AGENT.PLACEHOLDER"),multiple:!1},null,8,["modelValue","options","placeholder","search-placeholder"])])):x("",!0)])):x("",!0),c("div",zft,[b(D,{variant:"smooth","color-scheme":"secondary",size:"small",onClick:h},{default:j(()=>L[44]||(L[44]=[be(" Cancelar ")])),_:1}),b(D,{variant:"smooth","color-scheme":"primary",size:"small",onClick:g},{default:j(()=>L[45]||(L[45]=[be(" Salvar ")])),_:1})])])]),_:1},8,["show"])}}},jft={class:"canvas-wrapper"},Yft={class:"connections-layer"},Xft=["d"],qft=["x","y"],Zft=["d"],Qft={__name:"FlowCanvas",props:{isLoading:Boolean},setup(e){const t=e,n=hn(),s=U(null),o=U({x:0,y:0}),a=U(1),i=U(!1),l=U({x:0,y:0}),r=U(null),d=U(null),u=U({x:0,y:0}),p=U({x:0,y:0}),h=U(!1),g=U(null),_=w(()=>{var X,z;return((z=(X=n.state.automationFlow)==null?void 0:X.flow)==null?void 0:z.nodes)||[]}),T=w(()=>{var X,z;return((z=(X=n.state.automationFlow)==null?void 0:X.flow)==null?void 0:z.connections)||[]}),S=w(()=>!T.value||!_.value?[]:T.value.map(X=>{const z=_.value.find(Z=>Z.id===X.source),W=_.value.find(Z=>Z.id===X.target);if(!z||!W)return null;const q=Zht(z,W,X.sourceHandle,X.targetHandle);return{id:X.id,path:q.path,labelPosition:q.labelPosition,label:X.label,animated:X.animated}}).filter(Boolean)),E=w(()=>n.state.automationFlow.dragConnection),y=w(()=>E.value.active),A=w(()=>{var De;if(!y.value)return"";const X=_.value.find(Fe=>Fe.id===E.value.nodeId);if(!X)return"";const z=E.value.handleType==="source",W=240,q=100,Z=6;let ne,ae;z?ne=X.position.x+W+Z:ne=X.position.x-Z,ae=X.position.y+q/2;const ue=((De=s.value)==null?void 0:De.getBoundingClientRect())||{left:0,top:0},te=(E.value.position.x-ue.left-o.value.x)/a.value,ce=(E.value.position.y-ue.top-o.value.y)/a.value,fe=Math.abs(te-ne),ke=Math.min(fe*.5,150);return z?`M${ne},${ae} C${ne+ke},${ae} ${te-ke},${ce} ${te},${ce}`:`M${te},${ce} C${te+ke},${ce} ${ne-ke},${ae} ${ne},${ae}`}),C=X=>{X.button!==0||X.target.closest(".node-container")||(i.value=!0,l.value={x:X.clientX-o.value.x,y:X.clientY-o.value.y},document.body.classList.add("dragging"),X.preventDefault())},O=X=>{i.value&&(o.value={x:X.clientX-l.value.x,y:X.clientY-l.value.y})},N=()=>{i.value&&(i.value=!1,document.body.classList.remove("dragging"))},R=X=>{if(!X.ctrlKey)return;const z=X.deltaY>0?-.1:.1,W=Math.min(Math.max(a.value+z,.5),2);if(W!==a.value){const q=s.value.getBoundingClientRect(),Z=X.clientX-q.left,ne=X.clientY-q.top,ae=(Z-o.value.x)/a.value,ue=(ne-o.value.y)/a.value,te=(Z-o.value.x)/W,ce=(ne-o.value.y)/W;o.value.x+=(te-ae)*W,o.value.y+=(ce-ue)*W,a.value=W}X.preventDefault()},k=X=>{X.target===s.value&&(r.value=null,n.commit("automationFlow/setSelectedNode",null))};ut(()=>{s.value&&(s.value.addEventListener("wheel",R,{passive:!1}),s.value.addEventListener("mousedown",C),document.addEventListener("mousemove",O),document.addEventListener("mouseup",N),document.addEventListener("mouseleave",N))}),ia(()=>{s.value&&(s.value.removeEventListener("wheel",R),s.value.removeEventListener("mousedown",C),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",N),document.removeEventListener("mouseleave",N))});const L=X=>{r.value=X,n.commit("automationFlow/setSelectedNode",X)},D=()=>{var te,ce;if(!_.value.length)return;let X=1/0,z=-1/0,W=1/0,q=-1/0;_.value.forEach(fe=>{X=Math.min(X,fe.position.x),z=Math.max(z,fe.position.x+200),W=Math.min(W,fe.position.y),q=Math.max(q,fe.position.y+100)});const Z=((te=s.value)==null?void 0:te.clientWidth)||800,ne=((ce=s.value)==null?void 0:ce.clientHeight)||600,ae=z-X,ue=q-W;o.value={x:(Z-ae*a.value)/2-X*a.value,y:(ne-ue*a.value)/2-W*a.value}};lt(()=>t.isLoading,X=>{X||setTimeout(D,100)});const $=(X,z)=>{X.stopPropagation(),console.log("startNodeDrag chamado para o node:",z);const W=_.value.find(q=>q.id===z);if(!W){console.error("Node no encontrado:",z);return}d.value=z,u.value={...W.position},p.value={x:X.clientX,y:X.clientY},console.log("Iniciando drag do node:",{nodeId:z,startPos:u.value,mouseStart:p.value}),document.body.classList.add("node-dragging"),document.addEventListener("mousemove",M),document.addEventListener("mouseup",K)},M=X=>{if(!d.value)return;const z=X.clientX-p.value.x,W=X.clientY-p.value.y;if(_.value.findIndex(ae=>ae.id===d.value)===-1)return;const Z=u.value.x+z/a.value,ne=u.value.y+W/a.value;n.commit("automationFlow/updateNode",{nodeId:d.value,updates:{position:{x:Z,y:ne}},addToHistory:!1})},K=()=>{d.value&&(n.commit("automationFlow/recordCurrentState"),d.value=null,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",K),document.body.classList.remove("node-dragging"))},B=X=>{switch(X){case"trigger":return $ht;case"condition":return qht;case"action":return Ght;default:return km}},H=X=>{g.value=X,h.value=!0},G=X=>{n.dispatch("automationFlow/duplicateNode",X)},V=X=>{n.commit("automationFlow/removeNode",X)},Y=()=>{h.value=!1,g.value=null},ee=()=>{Y()};return(X,z)=>(m(),f("div",jft,[c("div",{ref_key:"canvasRef",ref:s,class:"flow-canvas",onClick:k},[c("div",{class:"flow-container",style:At({transform:`translate(${o.value.x}px, ${o.value.y}px) scale(${a.value})`,transformOrigin:"0 0"})},[(m(),f("svg",Yft,[(m(!0),f(pe,null,ye(S.value,W=>{var q,Z;return m(),f("g",{key:W.id},[c("path",{d:W.path,class:re(["connection-path",{animated:W.animated}])},null,10,Xft),W.label?(m(),f("text",{key:0,x:(q=W.labelPosition)==null?void 0:q.x,y:(Z=W.labelPosition)==null?void 0:Z.y,class:"connection-label"},v(W.label),9,qft)):x("",!0)])}),128)),y.value?(m(),f("path",{key:0,d:A.value,class:"drag-connection-path"},null,8,Zft)):x("",!0)])),(m(!0),f(pe,null,ye(_.value,W=>(m(),P(hs(B(W.type)),{key:W.id,node:W,selected:W.id===r.value,"data-node-id":W.id,onClick:Ke(q=>L(W.id),["stop"]),onMousedown:Ke(q=>$(q,W.id),["stop"]),onEdit:q=>H(W.id),onDuplicate:q=>G(W.id),onDelete:q=>V(W.id)},null,40,["node","selected","data-node-id","onClick","onMousedown","onEdit","onDuplicate","onDelete"]))),128))],4)],512),b(Wft,{show:h.value,nodeId:g.value,onClose:Y,onSave:ee},null,8,["show","nodeId"])]))}},Jft=Re(Qft,[["__scopeId","data-v-0f660623"]]),TE=(e,t=null)=>{t&&t.nodes&&t.connections?e.dispatch("automationFlow/initFlow",t):e.dispatch("automationFlow/initFlow")},egt=e=>{const t=e.state.automationFlow.flow.nodes,n=e.state.automationFlow.flow.connections;return{nodes:t,connections:n}},tgt=(e,{type:t,parentNodeId:n=null,data:s={}})=>{const o=e.state.automationFlow.flow.nodes,a=Qht(o,n);let i={...s};switch(t){case"trigger":i={label:"Novo Trigger",type:"message_received",...s};break;case"condition":i={label:"Condio",field:"",operator:"==",value:"",...s};break;case"action":i={label:"Nova Ao",type:"send_message",...s};break}const l=e.dispatch("automationFlow/createNode",{type:t,position:a,data:i});return n&&e.dispatch("automationFlow/connectNodes",{sourceId:n,targetId:l}),l},ngt={class:"flow-toolbar-container"},sgt={class:"toolbar-header"},agt={class:"history-controls"},ogt=["disabled"],igt=["disabled"],lgt={class:"quick-actions"},rgt={class:"tools-section"},cgt=["onClick"],dgt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ugt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},mgt={key:2,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},pgt={class:"category-label"},hgt={key:0,class:"category-items"},fgt=["onClick"],ggt={class:"item-content"},_gt={__name:"FlowToolbar",setup(e){const t=hn(),n=U(null),s=[{id:"trigger",icon:"bolt",label:"Disparadores",items:[{id:"message_received",label:"Mensagem recebida"},{id:"item_created",label:"Item criado"},{id:"status_changed",label:"Status alterado"},{id:"item_moved",label:"Item movido"},{id:"scheduled",label:"Agendado"}]},{id:"condition",icon:"call_split",label:"Condies",items:[{id:"text_contains",label:"Texto contm"},{id:"status_equals",label:"Status igual a"},{id:"assigned_to",label:"Atribudo a"},{id:"priority_is",label:"Prioridade "},{id:"has_label",label:"Tem etiqueta"}]},{id:"action",icon:"flash_on",label:"Aes",items:[{id:"send_message",label:"Enviar mensagem"},{id:"change_status",label:"Mudar status"},{id:"assign_agent",label:"Atribuir agente"},{id:"add_label",label:"Adicionar etiqueta"},{id:"move_to_column",label:"Mover para coluna"},{id:"change_priority",label:"Alterar prioridade"},{id:"send_notification",label:"Enviar notificao"}]}],o=u=>{n.value===u?n.value=null:n.value=u},a=(u,p)=>{const h=u.id,g={type:p,label:u.items.find(_=>_.id===p).label};tgt(t,{type:h,data:g}),console.log(`Elemento ${p} adicionado`)},i=w(()=>t.getters["automationFlow/canUndo"]),l=w(()=>t.getters["automationFlow/canRedo"]),r=()=>{t.commit("automationFlow/undo")},d=()=>{t.commit("automationFlow/redo")};return(u,p)=>(m(),f("div",ngt,[c("div",sgt,[p[5]||(p[5]=c("h3",{class:"toolbar-title"},"Ferramentas",-1)),c("div",agt,[c("button",{class:"control-button",disabled:!i.value,onClick:r,title:"Desfazer"},p[3]||(p[3]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M3 10h10a6 6 0 0 1 0 12H8"}),c("path",{d:"M7 10L3 6l4-4"})],-1)]),8,ogt),c("button",{class:"control-button",disabled:!l.value,onClick:d,title:"Refazer"},p[4]||(p[4]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M21 10h-10a6 6 0 0 0 0 12h5"}),c("path",{d:"M17 10l4-4-4-4"})],-1)]),8,igt)])]),c("div",lgt,[c("button",{class:"quick-action-button trigger-button",onClick:p[0]||(p[0]=h=>a(s[0],"item_created")),title:"Adicionar Trigger: Item Criado"},p[6]||(p[6]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})],-1),c("span",null,"Item Criado",-1)])),c("button",{class:"quick-action-button action-button",onClick:p[1]||(p[1]=h=>a(s[2],"send_message")),title:"Adicionar Ao: Enviar Mensagem"},p[7]||(p[7]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M22 2L11 13"}),c("path",{d:"M22 2l-7 20-4-9-9-4 20-7z"})],-1),c("span",null,"Enviar Mensagem",-1)])),c("button",{class:"quick-action-button condition-button",onClick:p[2]||(p[2]=h=>a(s[1],"status_equals")),title:"Adicionar Condio: Status Igual"},p[8]||(p[8]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M6 9l6 6 6-6"})],-1),c("span",null,"Verificar Status",-1)]))]),c("div",rgt,[p[14]||(p[14]=c("h4",{class:"section-title"},"Elementos",-1)),(m(),f(pe,null,ye(s,h=>c("div",{key:h.id,class:"tool-category"},[c("div",{class:re(["category-header",{active:n.value===h.id}]),onClick:g=>o(h.id)},[c("div",{class:re(["category-icon-wrapper",h.id])},[h.id==="trigger"?(m(),f("svg",dgt,p[9]||(p[9]=[c("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"},null,-1)]))):h.id==="condition"?(m(),f("svg",ugt,p[10]||(p[10]=[c("path",{d:"M6 9l6 6 6-6"},null,-1)]))):h.id==="action"?(m(),f("svg",mgt,p[11]||(p[11]=[c("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},null,-1)]))):x("",!0)],2),c("span",pgt,v(h.label),1),(m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:re(["expand-icon",{expanded:n.value===h.id}])},p[12]||(p[12]=[c("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],10,cgt),n.value===h.id?(m(),f("div",hgt,[(m(!0),f(pe,null,ye(h.items,g=>(m(),f("div",{key:g.id,class:"item",onClick:_=>a(h,g.id)},[c("div",ggt,[c("div",{class:re(["item-icon",g.id])},null,2),c("span",null,v(g.label),1)]),p[13]||(p[13]=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"add-icon"},[c("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1))],8,fgt))),128))])):x("",!0)])),64))])]))}},vgt=Re(_gt,[["__scopeId","data-v-f2907a37"]]),bgt={class:"flow-builder-container"},Egt={class:"flow-builder-body"},Tgt={__name:"FlowBuilder",props:{automationId:{type:[String,Number],default:null}},emits:["close","save"],setup(e,{emit:t}){const n=e,s=t,o=hn(),a=U(!1),i=U(!1),l=U("Nova Automao"),r=U(""),d=U(!0);ut(async()=>{try{if(a.value=!0,n.automationId){await o.dispatch("automationFlow/fetchAutomation",n.automationId);const h=o.getters["automationFlow/getAutomationById"](n.automationId);h&&(l.value=h.name,r.value=h.description||"",d.value=!!h.active,TE(o,h.flow||{}))}else console.log("Inicializando nova automao"),TE(o)}catch(h){console.error("Erro ao inicializar FlowBuilder:",h)}finally{a.value=!1}});const u=async()=>{i.value=!0;try{const h=egt(o),g={id:n.automationId,name:l.value,description:r.value,active:d.value,flow:h};await o.dispatch("automationFlow/saveAutomation",g),s("save")}catch(h){console.error("Erro ao salvar automao:",h)}finally{i.value=!1}},p=()=>{s("close")};return(h,g)=>(m(),f("div",bgt,[b(qpt,{name:l.value,"onUpdate:name":g[0]||(g[0]=_=>l.value=_),active:d.value,"onUpdate:active":g[1]||(g[1]=_=>d.value=_),"is-saving":i.value,onSave:u,onCancel:p},null,8,["name","active","is-saving"]),c("div",Egt,[b(Jft,{"is-loading":a.value},null,8,["is-loading"]),b(vgt)])]))}},ygt=Re(Tgt,[["__scopeId","data-v-34b221d2"]]),Agt={class:"trigger-node"},Sgt={class:"node-header"},Igt={class:"node-title"},Cgt={__name:"TriggerNode",props:{data:{type:Object,required:!0},selected:{type:Boolean,default:!1}},setup(e){return(t,n)=>(m(),f("div",Agt,[c("div",Sgt,[n[0]||(n[0]=c("div",{class:"node-icon"},[c("i",{class:"material-icons"},"chat")],-1)),c("div",Igt,v(e.data.label),1)]),n[1]||(n[1]=c("div",{class:"node-content"},[c("div",{class:"node-description"},"Event Trigger Testeeeeee")],-1)),b(I(rc),{type:"source",position:I(jh).Bottom},null,8,["position"])]))}},Ngt=Re(Cgt,[["__scopeId","data-v-4512e515"]]),Ogt={class:"condition-node"},xgt={class:"node-header"},wgt={class:"node-title"},Rgt={class:"node-content"},$gt={class:"condition-details"},Mgt={class:"condition-field"},kgt={class:"condition-operator"},Lgt={class:"condition-value"},Dgt={__name:"ConditionNode",props:{data:{type:Object,required:!0},selected:{type:Boolean,default:!1}},setup(e){return(t,n)=>{var s;return m(),f("div",Ogt,[c("div",xgt,[n[0]||(n[0]=c("div",{class:"node-icon"},[c("i",{class:"material-icons"},"call_split")],-1)),c("div",wgt,v(e.data.label),1)]),c("div",Rgt,[c("div",$gt,[c("div",Mgt,v(e.data.field||"Field"),1),c("div",kgt,v(e.data.operator||"=="),1),c("div",Lgt,v(((s=e.data.value)==null?void 0:s.toString())||"Value"),1)])]),b(I(rc),{type:"target",position:I(jh).Top},null,8,["position"]),b(I(rc),{type:"source",position:I(jh).Bottom,id:"a"},null,8,["position"])])}}},Pgt=Re(Dgt,[["__scopeId","data-v-0ab6f483"]]),Bgt={class:"node-header noevents"},Fgt={class:"node-title"},Ugt={class:"node-content nodrag"},Ggt={class:"form-group"},Vgt={class:"form-label"},Hgt=["value"],Kgt=["value"],zgt={key:0,class:"form-group"},Wgt={class:"form-label"},jgt=["value"],Ygt=["value"],Xgt={key:1,class:"form-group"},qgt={class:"form-label"},Zgt=["value"],Qgt=["value"],Jgt={key:2,class:"form-group"},e_t={class:"form-label"},t_t=["value"],n_t={value:""},s_t=["value"],a_t={key:3,class:"form-group"},o_t={class:"form-label"},i_t=["value","placeholder"],l_t={key:4,class:"form-group"},r_t={class:"form-label"},c_t=["value","placeholder"],d_t={__name:"ActionNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0},selected:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=He(),s=hn(),o=w(()=>s.getters["funnel/getFunnels"]||[]),a=w(()=>s.getters["agents/getAgents"]||[]),i=w(()=>{const A=[];return o.value.forEach(C=>{C.stages&&Object.entries(C.stages).forEach(([O,N])=>{A.push({id:O,title:`${C.name} - ${N.name}`,funnelId:C.id,color:N.color})})}),A}),l=[{value:"urgent",label:n("PRIORITY_LABELS.URGENT")},{value:"high",label:n("PRIORITY_LABELS.HIGH")},{value:"medium",label:n("PRIORITY_LABELS.MEDIUM")},{value:"low",label:n("PRIORITY_LABELS.LOW")},{value:"none",label:n("PRIORITY_LABELS.NONE")}],r=[{value:"move_to_column",label:n("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.MOVE_TO_COLUMN")},{value:"change_priority",label:n("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.CHANGE_PRIORITY")},{value:"assign_agent",label:n("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.ASSIGN_AGENT")},{value:"send_notification",label:n("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.SEND_NOTIFICATION")},{value:"send_message",label:n("KANBAN.AUTOMATIONS.FLOW.ACTIONS.SEND_MESSAGE")},{value:"update_contact",label:n("KANBAN.AUTOMATIONS.FLOW.ACTIONS.UPDATE_CONTACT")},{value:"add_label",label:n("KANBAN.AUTOMATIONS.FLOW.ACTIONS.ADD_LABEL")}],d=A=>{const C=A.target.value;let O={...t.data,type:C};switch(C){case"move_to_column":O.column=i.value.length>0?i.value[0].id:"";break;case"change_priority":O.priority="medium";break;case"assign_agent":O.agent_id="";break;case"send_notification":case"send_message":O.message="",C==="send_message"&&(O.conversation_id="");break;case"update_contact":O.contact_id="",O.attributes={};break;case"add_label":O.label="";break}s.dispatch("automationEditor/updateNodeData",{nodeId:t.id,data:O})},u=A=>{s.dispatch("automationEditor/updateNodeData",{nodeId:t.id,data:{...t.data,column:A.target.value}})},p=A=>{s.dispatch("automationEditor/updateNodeData",{nodeId:t.id,data:{...t.data,priority:A.target.value}})},h=A=>{s.dispatch("automationEditor/updateNodeData",{nodeId:t.id,data:{...t.data,agent_id:A.target.value}})},g=A=>{s.dispatch("automationEditor/updateNodeData",{nodeId:t.id,data:{...t.data,message:A.target.value}})},_=A=>{s.dispatch("automationEditor/updateNodeData",{nodeId:t.id,data:{...t.data,label:A.target.value}})},T=U(!1),S=U(null),E=()=>{T.value=!0},y=A=>{S.value&&!S.value.contains(A.target)&&(T.value=!1)};return ut(()=>{document.addEventListener("click",y)}),ia(()=>{document.removeEventListener("click",y)}),(A,C)=>(m(),f("div",{ref_key:"nodeRef",ref:S,class:re(["action-node",{"is-editing":T.value}]),onClick:Ke(E,["stop"])},[b(I(rc),{type:"target",position:"top"}),b(I(rc),{type:"source",position:"bottom"}),c("div",Bgt,[C[0]||(C[0]=c("div",{class:"node-icon"},[c("i",{class:"material-icons"},"flash_on")],-1)),c("div",Fgt,v(e.data.label),1)]),c("div",Ugt,[c("div",Ggt,[c("label",Vgt,v(I(n)("KANBAN.AUTOMATIONS.FORM.ACTIONS.TYPE.LABEL")),1),c("select",{value:e.data.type,class:"form-select",onChange:d},[(m(),f(pe,null,ye(r,O=>c("option",{key:O.value,value:O.value},v(O.label),9,Kgt)),64))],40,Hgt)]),e.data.type==="move_to_column"?(m(),f("div",zgt,[c("label",Wgt,v(I(n)("KANBAN.AUTOMATIONS.FORM.ACTIONS.COLUMN.LABEL")),1),c("select",{value:e.data.column,class:"form-select",onChange:u},[(m(!0),f(pe,null,ye(i.value,O=>(m(),f("option",{key:O.id,value:O.id},v(O.title),9,Ygt))),128))],40,jgt)])):x("",!0),e.data.type==="change_priority"?(m(),f("div",Xgt,[c("label",qgt,v(I(n)("KANBAN.AUTOMATIONS.FORM.ACTIONS.PRIORITY.LABEL")),1),c("select",{value:e.data.priority,class:"form-select",onChange:p},[(m(),f(pe,null,ye(l,O=>c("option",{key:O.value,value:O.value},v(O.label),9,Qgt)),64))],40,Zgt)])):x("",!0),e.data.type==="assign_agent"?(m(),f("div",Jgt,[c("label",e_t,v(I(n)("KANBAN.AUTOMATIONS.FORM.ACTIONS.AGENT.LABEL")),1),c("select",{value:e.data.agent_id,class:"form-select",onChange:h},[c("option",n_t,v(I(n)("KANBAN.NO_AGENT")),1),(m(!0),f(pe,null,ye(a.value,O=>(m(),f("option",{key:O.id,value:O.id},v(O.name),9,s_t))),128))],40,t_t)])):x("",!0),e.data.type==="send_notification"||e.data.type==="send_message"?(m(),f("div",a_t,[c("label",o_t,v(I(n)("KANBAN.AUTOMATIONS.FORM.ACTIONS.NOTIFICATION.LABEL")),1),c("textarea",{value:e.data.message,class:"form-textarea",placeholder:I(n)("KANBAN.AUTOMATIONS.FORM.ACTIONS.NOTIFICATION.PLACEHOLDER"),rows:"2",onInput:g},null,40,i_t)])):x("",!0),e.data.type==="add_label"?(m(),f("div",l_t,[c("label",r_t,v(I(n)("KANBAN.AUTOMATIONS.FLOW.ACTIONS.ADD_LABEL")),1),c("input",{value:e.data.label,type:"text",class:"form-input",placeholder:I(n)("KANBAN.AUTOMATIONS.FLOW.ACTIONS.ADD_LABEL_PLACEHOLDER"),onInput:_},null,40,c_t)])):x("",!0)])],2))}},u_t=Re(d_t,[["__scopeId","data-v-c3043424"]]),m_t={class:"automation-editor-container"},p_t={key:0,class:"flow-builder-wrapper"},h_t={key:1,class:"automations-list"},f_t={class:"automations-header"},g_t={class:"header-left"},__t={class:"title"},v_t={class:"header-actions"},b_t={class:"automations-content"},E_t={key:0,class:"loading-state"},T_t={key:1,class:"empty-state"},y_t={key:2,class:"automations-list-items"},A_t=["onClick"],S_t={class:"automation-details"},I_t={class:"automation-name"},C_t={class:"automation-description"},N_t={__name:"AutomationEditor",props:{currentView:{type:String,default:"kanban-view"},kanbanItems:{type:Array,default:()=>[]},labelsMap:{type:Object,default:()=>({})}},emits:["switchView"],setup(e,{emit:t}){const n=t,{t:s}=He(),o=hn();wn();const a=U("Nova Automao"),i=U(""),l=U(!0);U(!1),U(!1),U({x:0,y:0});const r=U(null),d=U([]);U(null);const u=U(null),p=U(!1),h=U([]),g=U(!0),_=U([{id:"trigger",type:"triggerNode",position:{x:250,y:5},data:{label:"When chat message received",type:"message_received"},sourcePosition:"bottom"},{id:"agent",type:"actionNode",position:{x:250,y:100},data:{label:"AI Agent",type:"ai_agent",description:"Tool Agent"},targetPosition:"top",sourcePosition:"bottom"},{id:"condition",type:"conditionNode",position:{x:250,y:200},data:{label:"If",field:"success",operator:"equals",value:!0},targetPosition:"top",sourcePosition:"bottom"},{id:"success",type:"actionNode",position:{x:150,y:300},data:{label:"Success",type:"success",description:"Send message"},targetPosition:"top",className:"success-node"},{id:"failure",type:"actionNode",position:{x:350,y:300},data:{label:"Failure",type:"failure",description:"Send message"},targetPosition:"top",className:"failure-node"}]),T=U([{id:"e-trigger-agent",source:"trigger",target:"agent"},{id:"e-agent-condition",source:"agent",target:"condition"},{id:"e-condition-success",source:"condition",target:"success",data:{label:"true"},animated:!0,type:"straight",label:"true",labelBgStyle:{fill:"#FFCC00"}},{id:"e-condition-failure",source:"condition",target:"failure",data:{label:"false"},animated:!0,type:"straight",label:"false",labelBgStyle:{fill:"#FFCC00"}}]);w(()=>o.getters["automationEditor/isEditing"]);const S=w(()=>o.getters["automationEditor/getCurrentAutomation"]);w(()=>o.getters["automationEditor/getFlowNodes"]),w(()=>o.getters["automationEditor/getFlowEdges"]),lt(()=>o.getters["automationEditor/getFlowNodes"],N=>{_.value=N},{deep:!0}),lt(()=>o.getters["automationEditor/getFlowEdges"],N=>{T.value=N},{deep:!0}),Fd(Ngt),Fd(Pgt),Fd(u_t),ut(async()=>{g.value=!0;try{await o.dispatch("automationFlow/fetchAutomations"),h.value=o.getters["automationFlow/getAutomations"]||[]}catch(N){console.error("Erro ao carregar automaes:",N),h.value=[]}finally{g.value=!1}S.value&&(a.value=S.value.name||"",i.value=S.value.description||"",l.value=S.value.active!==void 0?S.value.active:!0)}),ia(()=>{o.dispatch("automationEditor/resetEditor")}),lt([_,T],([N,R])=>{d.value=[...N,...R]});const E=()=>{try{r.value=null,d.value=[],a.value="Nova Automao",i.value="",l.value=!0,o.dispatch("automationEditor/clearCurrentAutomation");const N={id:"trigger-1",type:"triggerNode",position:{x:250,y:50},data:{label:"Quando item criado",type:"item_created",column:"all"}};o.dispatch("automationEditor/setFlowNodes",[N]),p.value=!0}catch(N){console.error("Erro ao criar nova automao:",N)}},y=N=>{u.value=N,p.value=!1},A=()=>{u.value=null,p.value=!1},C=()=>{n("switchView","kanban-view")},O=()=>{A()};return(N,R)=>(m(),f("div",m_t,[p.value||u.value?(m(),f("div",p_t,[b(ygt,{"automation-id":u.value,onClose:A,onSave:O},null,8,["automation-id"])])):(m(),f("div",h_t,[c("div",f_t,[c("div",g_t,[c("button",{class:"back-button",onClick:C},R[0]||(R[0]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])),c("h1",__t,v(I(s)("KANBAN.AUTOMATIONS.TITLE")),1)]),c("div",v_t,[c("button",{class:"primary-button",onClick:E},[R[1]||(R[1]=c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M12 5v14M5 12h14"})],-1)),be(" "+v(I(s)("KANBAN.AUTOMATIONS.NEW")),1)])])]),c("div",b_t,[g.value?(m(),f("div",E_t,[R[2]||(R[2]=c("div",{class:"spinner"},null,-1)),c("p",null,v(I(s)("KANBAN.AUTOMATIONS.LOADING")),1)])):h.value&&h.value.length===0?(m(),f("div",T_t,[R[3]||(R[3]=Bo('<div class="empty-icon" data-v-8f98ceba><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-8f98ceba><rect x="3" y="11" width="18" height="10" rx="2" data-v-8f98ceba></rect><circle cx="12" cy="5" r="2" data-v-8f98ceba></circle><path d="M12 7v4" data-v-8f98ceba></path><line x1="8" y1="16" x2="8" y2="16" data-v-8f98ceba></line><line x1="16" y1="16" x2="16" y2="16" data-v-8f98ceba></line></svg></div>',1)),c("h3",null,v(I(s)("KANBAN.AUTOMATIONS.EMPTY_TITLE")),1),c("p",null,v(I(s)("KANBAN.AUTOMATIONS.CREATE_FIRST")),1),c("button",{class:"primary-button",onClick:E},v(I(s)("KANBAN.AUTOMATIONS.CREATE_FIRST")),1)])):(m(),f("div",y_t,[(m(!0),f(pe,null,ye(h.value,k=>(m(),f("div",{key:k.id,class:"automation-card",onClick:L=>y(k.id)},[R[4]||(R[4]=c("div",{class:"automation-icon"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})])],-1)),c("div",S_t,[c("h3",I_t,v(k.name),1),c("p",C_t,v(k.description||"-"),1)]),c("div",{class:re(["automation-status",{active:k.active}])},v(k.active?I(s)("KANBAN.AUTOMATIONS.ACTIVE"):I(s)("KANBAN.AUTOMATIONS.INACTIVE")),3),R[5]||(R[5]=Bo('<div class="automation-actions" data-v-8f98ceba><button class="icon-button" data-v-8f98ceba><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-8f98ceba><path d="M12 20h9" data-v-8f98ceba></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" data-v-8f98ceba></path></svg></button></div>',1))],8,A_t))),128))]))])]))]))}},O_t=Re(N_t,[["__scopeId","data-v-8f98ceba"]]),x_t={class:"flex flex-col h-full w-full bg-white dark:bg-slate-900 overflow-hidden"},w_t={class:"border-b border-slate-200 dark:border-slate-700 px-4 py-3 flex items-center justify-between"},R_t={class:"flex items-center gap-2"},$_t={class:"text-lg font-medium"},M_t={key:0,class:"flex items-center gap-2"},k_t={class:"flex items-center gap-1"},L_t={key:0,class:"flex-1 flex justify-center items-center py-12"},D_t={key:1,class:"flex-1 overflow-auto"},P_t={__name:"KanbanItemDetailView",props:{itemId:{type:[Number,String],required:!0},forceReload:{type:Number,default:0}},emits:["back","itemUpdated"],setup(e,{emit:t}){const n=e,s=t,{t:o}=He(),a=hn(),i=U(null),l=U(!0),r=U(!1),d=async()=>{try{console.log("[DEBUG KanbanItemDetailView] fetchItemDetails - Iniciando...",n.itemId),l.value=!0;const{data:S}=await In.getItem(n.itemId);console.log("[DEBUG KanbanItemDetailView] fetchItemDetails - Data recebida:",S),i.value=S,console.log("[DEBUG KanbanItemDetailView] Item atualizado")}catch(S){console.error("[DEBUG KanbanItemDetailView] fetchItemDetails - Erro:",S)}finally{l.value=!1}};lt([()=>n.itemId,()=>n.forceReload],()=>{i.value=null,r.value=!1,console.log("[DEBUG KanbanItemDetailView] Estados limpos antes de buscar novo item"),console.log("[DEBUG KanbanItemDetailView] Fetching new item details..."),d()},{immediate:!0});const u=()=>{console.log("[DEBUG KanbanItemDetailView] handleBack - Iniciando..."),console.log("[DEBUG KanbanItemDetailView] handleBack - Item atual:",i.value),console.log("[DEBUG KanbanItemDetailView] handleBack - Estado de edio:",r.value),i.value=null,r.value=!1,console.log("[DEBUG KanbanItemDetailView] handleBack - Estados limpos"),s("back")},p=()=>{r.value=!0},h=()=>{r.value=!1},g=()=>{s("itemUpdated"),r.value=!1},_=()=>{s("itemUpdated"),s("back")},T=a.getters["funnel/getSelectedFunnel"];return(S,E)=>{var A,C;const y=F("fluent-icon");return m(),f("div",x_t,[c("div",w_t,[c("div",R_t,[c("button",{class:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",onClick:u},[b(y,{icon:"arrow-chevron-left",size:"20"})]),c("h2",$_t,v(l.value?I(o)("LOADING"):((C=(A=i.value)==null?void 0:A.item_details)==null?void 0:C.title)||I(o)("ITEM_DETAILS")),1)]),!r.value&&!l.value?(m(),f("div",M_t,[c("button",{class:"p-2 rounded-md bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300",onClick:p},[c("span",k_t,[b(y,{icon:"edit",size:"16"}),be(" "+v(I(o)("KANBAN.FORM.EDIT_ITEM")),1)])])])):x("",!0)]),l.value?(m(),f("div",L_t,E[0]||(E[0]=[c("span",{class:"w-8 h-8 border-2 border-t-woot-500 border-r-woot-500 border-b-transparent border-l-transparent rounded-full animate-spin"},null,-1)]))):(m(),f("div",D_t,[!r.value&&i.value?(m(),P(xm,{key:0,item:i.value,onClose:u,onEdit:p,onItemUpdated:g,onDeleted:_},null,8,["item"])):x("",!0),r.value&&i.value&&I(T)?(m(),P(ul,{key:1,"funnel-id":I(T).id,stage:i.value.funnel_stage,position:i.value.position,"initial-data":i.value,"is-editing":"",onSaved:g,onClose:h},null,8,["funnel-id","stage","position","initial-data"])):x("",!0)]))])}}},B_t=Re(P_t,[["__scopeId","data-v-610a166e"]]),F_t={class:"flex h-full w-full overflow-hidden"},U_t={__name:"KanbanView",setup(e){const t=hn(),n=U("kanban"),s=U(null),o=U(0),a=w(()=>t.state.kanban.loading),i=w(()=>{const T=t.getters["kanban/getKanbanItems"];return console.log("[VIEW-DEBUG] Computed kanbanItems obtendo dados do store:",T.length),console.log("[VIEW-DEBUG] IDs dos itens no KanbanView:",T.map(S=>S.id)),T}),l=w(()=>t.getters["funnel/getSelectedFunnel"]),r=U({}),d=U(!0);qn("labelsMap",r),lt(l,async T=>{T!=null&&T.id&&(console.log("[VIEW-DEBUG] Funil selecionado mudou para:",T.id),console.log("[VIEW-DEBUG] Chamando fetchKanbanItems do store"),await t.dispatch("kanban/fetchKanbanItems"),console.log("[VIEW-DEBUG] fetchKanbanItems concludo, items:",i.value.length),d.value=!1)},{immediate:!0}),ut(async()=>{var T;(T=l.value)!=null&&T.id&&(await t.dispatch("kanban/fetchKanbanItems"),d.value=!1)});const u=T=>{n.value=T,s.value=null},p=T=>{s.value=T.id,o.value++,n.value="item-detail"},h=()=>{n.value="kanban",s.value=null},g=async()=>{console.log("[VIEW-DEBUG] handleItemsUpdated chamado"),await t.dispatch("kanban/fetchKanbanItems"),console.log("[VIEW-DEBUG] handleItemsUpdated concludo, itens:",i.value.length)},_=w(()=>{switch(n.value){case"kanban":return vE;case"list":return trt;case"agenda":return hct;case"funnels":return cdt;case"templates":return But;case"automations":return Upt;case"automation-editor":return O_t;case"item-detail":return B_t;default:return vE}});return(T,S)=>(m(),f("div",F_t,[(m(),P(Ic,null,[(m(),P(hs(_.value),{currentView:n.value,"kanban-items":i.value,"labels-map":r.value,"is-loading":a.value,itemId:s.value,"force-reload":o.value,onSwitchView:u,onItemsUpdated:g,onItemClick:p,onBack:h,onItemUpdated:g},null,40,["currentView","kanban-items","labels-map","is-loading","itemId","force-reload"]))],1024))]))}},G_t=Re(U_t,[["__scopeId","data-v-50f49745"]]),V_t={class:"h-full w-full flex-1 overflow-hidden"},H_t=["src","title"],K_t={key:1,class:"h-full w-full flex items-center justify-center text-slate-500"},z_t={__name:"DashboardAppWrapper",setup(e){const t=xn(),n=hn(),s=U(null),o=w(()=>{const d=t.params.id;return n.getters["dashboardApps/getRecords"].find(u=>u.id===Number(d))}),a=w(()=>{var d,u;return(u=(d=o.value)==null?void 0:d.content)==null?void 0:u.some(p=>p.model_app==="typebot")}),i=w(()=>{var d,u,p;return(p=(u=(d=o.value)==null?void 0:d.content)==null?void 0:u[0])!=null&&p.url?o.value.content[0].url:""}),l=()=>{!a.value||!s.value||setTimeout(()=>{var d;try{const u=s.value,p=((d=n.getters["auth/currentUser"])==null?void 0:d.email)||"";try{const g=(u.contentDocument||u.contentWindow.document).querySelector('input[name="email"]');g&&(g.value=p,g.dispatchEvent(new Event("input",{bubbles:!0})))}catch{u.contentWindow.postMessage({action:"fill_email",email:p},"*")}}catch(u){console.error("Erro ao preencher email no Typebot:",u)}},1500)};ut(()=>{n.getters["dashboardApps/getRecords"].length||n.dispatch("dashboardApps/get")});const r=()=>{a.value&&l()};return(d,u)=>{var p;return m(),f("div",V_t,[i.value?(m(),f("iframe",{key:0,src:i.value,class:"h-full w-full border-0",title:(p=o.value)==null?void 0:p.title,ref_key:"iframeRef",ref:s,onLoad:r},null,40,H_t)):(m(),f("div",K_t,v(d.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LOADING")),1))])}}},W_t={routes:[{path:Pt("accounts/:accountId"),component:WZe,children:[{path:Pt("accounts/:accountId/dashboard_apps/:id"),name:"dashboard_apps_show",component:z_t,meta:{permissions:["administrator","agent"],icon:"i-lucide-apps",label:"DASHBOARD_APPS"},props:!0},{path:Pt("accounts/:accountId/kanban"),name:"kanban_board",component:G_t,meta:{permissions:["administrator","agent","kanban_manage","kanban_view"],featureFlag:"kanban_board"}},...yXe,...XKe,...t9e.routes,...Dhe.routes,...ZVe,...t7e,...THe,...Bze.routes,...QWe.routes]},{path:Pt("accounts/:accountId/suspended"),name:"account_suspended",meta:{permissions:["administrator","agent","custom_role"]},component:YZe}]},X2=[...W_t.routes],Jn=DN({history:PN(),routes:X2}),Bvt=EO(X2),j_t=(e,t)=>{const{isLoggedIn:n,getCurrentUser:s}=Ia.getters;if(!n)return window.location.assign("/app/login"),"";if(!e.name)return t(Pt(`accounts/${s.account_id}/dashboard`));const o=g4(e,Ia.getters.getCurrentUser);return o?t(Pt(o)):t()},Y_t=()=>{const e=Ia.dispatch("setUser");Jn.beforeEach((t,n,s)=>{aN.page(t.name||"",{path:t.path,name:t.name}),e.then(()=>j_t(t,s))})},X_t=yC({legacy:!1,locale:"en",messages:OO});pP(Ia,Jn);const sa=AE(dP);sa.use(X_t);sa.use(Ia);sa.use(Jn);window.errorLoggingConfig&&TO({app:sa,dsn:window.errorLoggingConfig,denyUrls:[/^chrome:\/\//i,/chrome-extension:/i,/extensions\//i,/file:\/\//i,/safari-web-extension:/i,/safari-extension:/i],integrations:[yO({router:Jn})],ignoreErrors:["ResizeObserver loop completed with undelivered notifications"]});sa.use($O,xO);sa.use(ry);sa.use(DC,PC({rules:{JSON:({value:e})=>AO(e)}}));sa.use(eR,{instantMove:!0,arrowOverflow:!1,disposeTimeout:5e6});sa.use(Ix);sa.component("multiselect",aT);sa.component("woot-switch",zx);sa.component("woot-wizard",Jx);sa.component("fluent-icon",SO);sa.directive("resize",aB);sa.directive("on-clickaway",wO);IO();window.WootConstants=$t;window.axios=mP(AC);CO();NO();Y_t();window.onload=()=>{sa.mount("#app")};export{Rvt as $,kvt as A,Cze as B,Mvt as C,lr as D,w2 as E,h1 as F,Eg as G,Tb as H,xo as I,xt as J,gb as K,Lvt as L,fb as M,_b as N,gl as O,x_e as P,w_e as Q,O_e as R,Eb as S,vb as T,bb as U,kxe as V,Kc as W,h2 as X,R_e as Y,bg as Z,pE as _,$vt as a,fc as a0,ju as a1,Ao as a2,Ra as a3,Bvt as a4,Ls as a5,S2 as b,ma as c,hE as d,Mi as e,aTe as f,wvt as g,Dvt as h,oTe as i,ol as j,ube as k,$Ee as l,Rg as m,T2 as n,wf as o,yn as p,Ovt as q,la as r,yl as s,Ss as t,Mn as u,ps as v,IUe as w,Oi as x,$S as y,yet as z};
