import{c as u,r as d,N as h,a as I,o as P}from"./_plugin-vue_export-helper-BK9LWihk.js";import{u as k,a as L}from"./Validators-U_Z_leEu.js";import{u as w}from"./globalConfig-DNoPylIh.js";import{a as x,u as B}from"./index-CGswmpo8.js";import{am as b}from"./DashboardIcon-Pzi2HKUO.js";import{f as C}from"./dashboard-CG5kupEZ.js";import{c as D,b as G}from"./index-b3F7WOf6.js";import{A as M}from"./ArticleEditor-D83rZLZW.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./exports-C7nQ38Rb.js";import"./js.cookie-Cz0CWeBA.js";import"./utils.esm-B9vk9JJa.js";import"./index-BtuGy7By.js";import"./Icon-3PNIKml4.js";import"./typing-DLDGfuj7.js";import"./useMessageFormatter-BWcWDZNI.js";import"./useKeyboardNavigableList-Yx0rleq4.js";import"./helper-Dcp_UZ_y.js";import"./Thumbnail-CUjAwC9K.js";import"./module-DBoux_do.js";import"./BarChart-BoGmHJfn.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-BEPMhpqZ.js";import"./vue-dompurify-html-DajrD5x3.js";import"./HelpCenterLayout-DUXvrdEn.js";const ut={__name:"PortalsArticlesEditPage",setup(N){const r=k(),p=L(),m=D(),{t:g}=w(),{articleSlug:o,portalSlug:i}=r.params,v=G("articles/articleById"),s=u(()=>v.value(o)),c=d(!1),l=d(!1),A=u(()=>{const{slug:t,locale:e}=s.value.category,{slug:a}=s.value;return C(i,t,e,a)}),_=async({...t},e=!1)=>{const a=e?"articles/updateAsync":"articles/update";c.value=!0;try{await m.dispatch(a,{portalSlug:i,articleId:o,...t}),l.value=!0}catch(n){const T=(n==null?void 0:n.message)||g("HELP_CENTER.EDIT_ARTICLE_PAGE.API.ERROR");B(T)}finally{setTimeout(()=>{c.value=!1,l.value=!0},1500)}},f=async({...t})=>{_({...t},!0)},y=u(()=>r.name==="portals_categories_articles_index"||r.name==="portals_categories_articles_edit"||r.name==="portals_categories_index"),E=()=>{const{tab:t,categorySlug:e,locale:a}=r.params;y.value?p.push({name:"portals_categories_articles_index",params:{categorySlug:e,locale:a}}):p.push({name:"portals_articles_index",params:{tab:t,categorySlug:e,locale:a}})},R=()=>{m.dispatch("articles/show",{id:o,portalSlug:i})},S=()=>{var t;window.open(A.value,"_blank"),x(b.PREVIEW_ARTICLE,{status:(t=s.value)==null?void 0:t.status})};return h(R),(t,e)=>(P(),I(M,{article:s.value,"is-updating":c.value,"is-saved":l.value,onSaveArticle:_,onSaveArticleAsync:f,onPreviewArticle:S,onGoBack:E},null,8,["article","is-updating","is-saved"]))}};export{ut as default};
