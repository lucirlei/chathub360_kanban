const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiInput-CHOuDIMs.js","assets/typing-B_xc7lBt.js","assets/Validators-DkQimdV0.js","assets/index-DN3rM4CW.js","assets/_plugin-vue_export-helper-IoQslFd3.js","assets/index-DJvhFcF9.js","assets/_commonjsHelpers-BosuxZz1.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/utils.esm-dig4nDxm.js","assets/exports-Db5CWii1.js","assets/globals-DPjCpsAT.js","assets/module-CEpankYo.js","assets/Icon-Dg_4WYMY.js","assets/EmojiInput-Dm9q0cqD.css"])))=>i.map(i=>d[i]);
import{_ as K,c as n,r as I,a6 as Q,w as F,P as Z,p as b,o as g,s as u,t as Y,H as s,e as d,g as $,l as H,a as h,ag as ee}from"./_plugin-vue_export-helper-IoQslFd3.js";import{u as U,a as te}from"./Validators-DkQimdV0.js";import{u as V,a as J,c as ae,_ as le,b as oe}from"./useBranding-CD_QbCIP.js";import{O as w,t as j,m as se,c as ne,v as re}from"./dashboard-B8DxvGhj.js";import{u as ce,r as z,m as ie,_ as x}from"./exports-Db5CWii1.js";import{u as q,a as ue}from"./index-DyRF4TQi.js";import{am as de,an as W}from"./DashboardIcon-D9a-qnXf.js";const Ee={class:"flex flex-col gap-4"},me={class:"flex items-center justify-start gap-8 px-4 py-2 border rounded-lg border-n-strong"},Ce={class:"flex flex-col items-start w-full gap-2 py-2"},ve={class:"text-sm font-medium text-n-slate-11"},ge={class:"text-sm text-n-slate-12"},pe={class:"flex flex-col w-full gap-2 py-2"},Ae={class:"text-sm font-medium text-n-slate-11"},Re=["title"],fe={class:"flex flex-col gap-4"},Oe={class:"relative"},_e={key:0,class:"flex items-center justify-between w-full gap-3"},Ge={__name:"CategoryForm",props:{mode:{type:String,required:!0,validator:a=>["edit","create"].includes(a)},selectedCategory:{type:Object,default:()=>({})},activeLocaleCode:{type:String,default:""},showActionButtons:{type:Boolean,default:!0},portalName:{type:String,default:""},activeLocaleName:{type:String,default:""}},emits:["submit","cancel"],setup(a,{expose:S,emit:E}){const p=a,O=E,P=ee(()=>le(()=>import("./EmojiInput-CHOuDIMs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),{t:r}=V(),_=U(),f=J(),c=ae("categories/isCreating"),A=n(()=>{var o,i;const C=(o=p.selectedCategory)==null?void 0:o.id;return C?(i=f["categories/uiFlags"].value(C))==null?void 0:i.isUpdating:!1}),G=I(!1),l=Q({id:"",name:"",icon:"",slug:"",description:"",locale:""}),y=n(()=>p.mode==="edit"),N={name:{required:z,minLength:ie(1)},slug:{required:z}},v=ce(N,l),m=n(()=>v.value.$invalid),T=n(()=>v.value.name.$error?r("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.ERROR"):""),R=n(()=>v.value.slug.$error?r("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.ERROR"):""),D=n(()=>{const{portalSlug:C,locale:o}=_.params;return r("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.HELP_TEXT",{portalSlug:C,localeCode:o,categorySlug:l.slug})}),k=C=>{l.icon=C,G.value=!1},M=async()=>{await v.value.$validate()&&O("submit",{...l})},B=()=>{O("cancel")};return F(()=>l.name,()=>{y.value||(l.slug=de(l.name))}),F(()=>p.selectedCategory,C=>{if(p.mode==="edit"&&C){const{id:o,name:i,icon:e,slug:t,description:L}=C;Object.assign(l,{id:o,name:i,icon:e,slug:t,description:L})}},{immediate:!0}),Z(()=>{p.mode==="create"&&(l.locale=p.activeLocaleCode)}),S({state:l,isSubmitDisabled:m}),(C,o)=>(g(),b("div",Ee,[u("div",me,[u("div",Ce,[u("span",ve,Y(s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.PORTAL")),1),u("span",ge,Y(a.portalName),1)]),o[5]||(o[5]=u("div",{class:"justify-start w-px h-10 bg-n-strong"},null,-1)),u("div",pe,[u("span",Ae,Y(s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.LOCALE")),1),u("span",{title:`${a.activeLocaleName} (${a.activeLocaleCode})`,class:"text-sm line-clamp-1 text-n-slate-12"},Y(`${a.activeLocaleName} (${a.activeLocaleCode})`),9,Re)])]),u("div",fe,[u("div",Oe,[d(j,{modelValue:l.name,"onUpdate:modelValue":o[2]||(o[2]=i=>l.name=i),label:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.LABEL"),placeholder:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.PLACEHOLDER"),message:T.value,"message-type":T.value?"error":"info","custom-input-class":"!h-10 ltr:!pl-12 rtl:!pr-12"},{prefix:H(()=>[d(s(w),{onTrigger:o[1]||(o[1]=i=>G.value=!1)},{default:H(()=>[d(x,{label:l.icon,color:"slate",size:"sm",type:"button",icon:l.icon?"":"i-lucide-smile-plus",class:"!h-[2.4rem] !w-[2.375rem] absolute top-[1.94rem] !outline-none !rounded-[0.438rem] border-0 ltr:left-px rtl:right-px ltr:!rounded-r-none rtl:!rounded-l-none",onClick:o[0]||(o[0]=i=>G.value=!G.value)},null,8,["label","icon"]),G.value?(g(),h(s(P),{key:0,class:"left-0 top-16","show-remove-button":"","on-click":k})):$("",!0)]),_:1})]),_:1},8,["modelValue","label","placeholder","message","message-type"])]),d(j,{modelValue:l.slug,"onUpdate:modelValue":o[3]||(o[3]=i=>l.slug=i),label:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.LABEL"),placeholder:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.PLACEHOLDER"),disabled:y.value,message:R.value?R.value:D.value,"message-type":R.value?"error":"info","custom-input-class":"!h-10"},null,8,["modelValue","label","placeholder","disabled","message","message-type"]),d(se,{modelValue:l.description,"onUpdate:modelValue":o[4]||(o[4]=i=>l.description=i),label:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.DESCRIPTION.LABEL"),placeholder:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.DESCRIPTION.PLACEHOLDER"),"show-character-count":""},null,8,["modelValue","label","placeholder"]),a.showActionButtons?(g(),b("div",_e,[d(x,{variant:"faded",color:"slate",label:s(r)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:B},null,8,["label"]),d(x,{label:s(r)(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.BUTTONS.${a.mode.toUpperCase()}`),class:"w-full",disabled:m.value||s(c)||A.value,"is-loading":s(c)||A.value,onClick:M},null,8,["label","disabled","is-loading"])])):$("",!0)])]))}},Te=K(Ge,[["__scopeId","data-v-3c9eb53f"]]),Le={class:"w-[25rem] absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6"},ye={class:"text-base font-medium text-n-slate-12"},X={__name:"CategoryDialog",props:{mode:{type:String,default:"edit",validator:a=>["edit","create"].includes(a)},selectedCategory:{type:Object,default:()=>({})},portalName:{type:String,default:""},activeLocaleName:{type:String,default:""},activeLocaleCode:{type:String,default:""}},emits:["close"],setup(a,{emit:S}){const E=a,p=S,O=oe(),{t:P}=V(),r=U(),_=async f=>{const{id:c,name:A,slug:G,icon:l,description:y,locale:N}=f,v={name:A,icon:l,slug:G,description:y};E.mode==="create"?v.locale=N:v.id=c;try{const m=E.mode==="edit"?"update":"create",T={portalSlug:r.params.portalSlug,categoryObj:v};m==="update"&&(T.categoryId=c),await O.dispatch(`categories/${m}`,T);const R=P(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.${E.mode.toUpperCase()}.API.SUCCESS_MESSAGE`);q(R);const D=E.mode==="edit"?W.EDIT_CATEGORY:W.CREATE_CATEGORY;ue(D,E.mode==="create"?{hasDescription:!!y}:void 0),p("close")}catch(m){const T=(m==null?void 0:m.message)||P(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.${E.mode.toUpperCase()}.API.ERROR_MESSAGE`);q(T)}};return(f,c)=>(g(),b("div",Le,[u("h3",ye,Y(s(P)(`HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.${a.mode.toUpperCase()}`)),1),d(Te,{mode:a.mode,"selected-category":a.selectedCategory,"active-locale-code":a.activeLocaleCode,"portal-name":a.portalName,"active-locale-name":a.activeLocaleName,onSubmit:_,onCancel:c[0]||(c[0]=A=>p("close"))},null,8,["mode","selected-category","active-locale-code","portal-name","active-locale-name"])]))}},Pe={class:"flex items-center justify-between w-full"},be={key:0,class:"flex items-center gap-4"},Ne={class:"relative group"},Ye={class:"min-w-0 text-sm font-medium truncate text-n-slate-12"},xe={key:2,class:"relative"},Se={key:3,class:"relative"},Me={__name:"CategoryHeaderControls",props:{categories:{type:Array,default:()=>[]},allowedLocales:{type:Array,default:()=>[]},hasSelectedCategory:{type:Boolean,default:!1}},emits:["localeChange"],setup(a,{emit:S}){const E=a,p=S,O=U(),P=te(),r=J(),{t:_}=V(),f=I(!1),c=I(!1),A=I(!1),G=n(()=>O.params.portalSlug),l=n(()=>{const e=G.value;return e?r["portals/portalBySlug"].value(e):r["portals/allPortals"].value[0]}),y=n(()=>{var e;return(e=l.value)==null?void 0:e.name}),N=n(()=>E.allowedLocales.find(e=>e.code===O.params.locale)),v=n(()=>{var e;return((e=N.value)==null?void 0:e.name)??""}),m=n(()=>{var e;return((e=N.value)==null?void 0:e.code)??""}),T=n(()=>E.allowedLocales.map(e=>({label:e.name,value:e.code,action:"filter"}))),R=n(()=>E.categories.find(e=>e.slug===O.params.categorySlug)),D=n(()=>{var e;return(e=R.value)==null?void 0:e.name}),k=n(()=>{var e,t;return((t=(e=R.value)==null?void 0:e.meta)==null?void 0:t.articles_count)||0}),M=n(()=>{var e;return(e=R.value)==null?void 0:e.icon}),B=n(()=>{var e;return(e=E.categories)==null?void 0:e.length}),C=n(()=>{const e=[{label:_("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.BREADCRUMB.CATEGORY_LOCALE",{localeCode:m.value}),link:"#"}];return R.value&&e.push({label:_("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.BREADCRUMB.ACTIVE_CATEGORY",{categoryName:D.value,categoryCount:k.value}),emoji:M.value}),e}),o=({value:e})=>{p("localeChange",e),f.value=!1},i=()=>{const{categorySlug:e,...t}=O.params;P.push({name:"portals_categories_index",params:t})};return(e,t)=>(g(),b("div",Pe,[a.hasSelectedCategory?(g(),h(re,{key:1,items:C.value,onClick:i},null,8,["items"])):(g(),b("div",be,[u("div",Ne,[d(s(w),{onTrigger:t[1]||(t[1]=L=>f.value=!1)},{default:H(()=>[d(x,{label:v.value,size:"sm","trailing-icon":"",icon:"i-lucide-chevron-down",color:"slate",onClick:t[0]||(t[0]=L=>f.value=!f.value)},null,8,["label"]),f.value?(g(),h(ne,{key:0,"menu-items":T.value,"show-search":"",class:"left-0 w-40 mt-2 overflow-y-auto xl:right-0 top-full max-h-60",onAction:o},null,8,["menu-items"])):$("",!0)]),_:1})]),t[8]||(t[8]=u("div",{class:"w-px h-3.5 rounded my-auto bg-n-weak"},null,-1)),u("span",Ye,Y(s(_)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.CATEGORIES_COUNT",{n:B.value})),1)])),a.hasSelectedCategory?(g(),b("div",Se,[d(s(w),{onTrigger:t[7]||(t[7]=L=>A.value=!1)},{default:H(()=>[d(x,{label:s(_)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.EDIT_CATEGORY"),color:"slate",size:"sm",onClick:t[5]||(t[5]=L=>A.value=!A.value)},null,8,["label"]),A.value?(g(),h(X,{key:0,"selected-category":R.value,"portal-name":y.value,"active-locale-name":v.value,"active-locale-code":m.value,onClose:t[6]||(t[6]=L=>A.value=!1)},null,8,["selected-category","portal-name","active-locale-name","active-locale-code"])):$("",!0)]),_:1})])):(g(),b("div",xe,[d(s(w),{onTrigger:t[4]||(t[4]=L=>c.value=!1)},{default:H(()=>[d(x,{label:s(_)("HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.NEW_CATEGORY"),icon:"i-lucide-plus",size:"sm",onClick:t[2]||(t[2]=L=>c.value=!c.value)},null,8,["label"]),c.value?(g(),h(X,{key:0,mode:"create","portal-name":y.value,"active-locale-name":v.value,"active-locale-code":m.value,onClose:t[3]||(t[3]=L=>c.value=!1)},null,8,["portal-name","active-locale-name","active-locale-code"])):$("",!0)]),_:1})]))]))}};export{Te as C,Me as _};
//# sourceMappingURL=CategoryHeaderControls-RyLNzmNJ.js.map
