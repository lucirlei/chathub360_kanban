import{m as w,c as A,b as E,u as L}from"./useBranding-CD_QbCIP.js";import{g as R}from"./utils.esm-dig4nDxm.js";import{c as $,n as V,b as F,I as z,u as B,r as W}from"./widget-CCp9dnZb.js";import{j as H}from"./sharedFrameEvents-0qZ2yOho.js";import{c as h,p as c,o as n,F as T,j as M,q as G,e as b,_ as y,n as C,s as o,a as _,g as k,t as m,z as S,H as g,ab as P,P as U}from"./_plugin-vue_export-helper-IoQslFd3.js";import{_ as j}from"./Avatar-CS4GuSbz.js";import{a as D}from"./Validators-DkQimdV0.js";import"./vue-dompurify-html-CEAHYyWB.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BtuGy7By.js";import"./constants-lVAyZKq6.js";import"./index-DJvhFcF9.js";import"./index-DN3rM4CW.js";import"./Icon-Dg_4WYMY.js";import"./Branding-DdXbg_Zm.js";import"./module-CEpankYo.js";import"./globals-DPjCpsAT.js";const q={class:"flex"},Y={__name:"GroupedAvatars",props:{users:{type:Array,default:()=>[]},limit:{type:Number,default:4}},setup(e){const t=e,i=h(()=>t.users.slice(0,t.limit));return(u,r)=>(n(),c("div",q,[(n(!0),c(T,null,M(i.value,(a,s)=>(n(),c("span",{key:a.id,class:G([s?"ltr:-ml-4 rtl:-mr-4":"","inline-block rounded-full text-white shadow-solid"])},[b(j,{name:a.name,src:a.avatar_url,size:36,class:"[&>span]:outline [&>span]:outline-1 [&>span]:outline-n-background","rounded-full":""},null,8,["name","src"])],2))),128))]))}},J={name:"TeamAvailability",components:{GroupedAvatars:Y},mixins:[$,V,F],props:{availableAgents:{type:Array,default:()=>{}},hasConversation:{type:Boolean,default:!1}},emits:["startConversation"],computed:{...w({widgetColor:"appConfig/getWidgetColor",availableMessage:"appConfig/getAvailableMessage",unavailableMessage:"appConfig/getUnavailableMessage"}),textColor(){return R(this.widgetColor)},agentAvatars(){return this.availableAgents.map(e=>({name:e.name,avatar:e.avatar_url,id:e.id}))},headerMessage(){return this.isOnline?this.availableMessage||this.$t("TEAM_AVAILABILITY.ONLINE"):this.unavailableMessage||this.$t("TEAM_AVAILABILITY.OFFLINE")},isOnline(){const{workingHoursEnabled:e}=this.channelConfig,t=this.availableAgents.length>0;return e?this.isInBetweenTheWorkingHours:t}},methods:{startConversation(){this.$emit("startConversation"),this.hasConversation||z.sendMessage({event:"onEvent",eventIdentifier:H,data:{hasConversation:!1}})}}},K={class:"flex flex-col gap-3 w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-background dark:bg-n-solid-2 px-5 py-4"},Q={class:"flex items-center justify-between gap-2"},X={class:"flex flex-col gap-1"},Z={class:"font-medium text-n-slate-12 line-clamp-2"},ee={class:"text-n-slate-11"};function te(e,t,i,u,r,a){const s=C("GroupedAvatars");return n(),c("div",K,[o("div",Q,[o("div",X,[o("div",Z,m(a.headerMessage),1),o("div",ee,m(e.replyWaitMessage),1)]),a.isOnline?(n(),_(s,{key:0,users:i.availableAgents},null,8,["users"])):k("",!0)]),o("button",{class:"inline-flex items-center gap-1 font-medium text-n-slate-12",style:S({color:e.widgetColor}),onClick:t[0]||(t[0]=(...l)=>a.startConversation&&a.startConversation(...l))},[o("span",null,m(i.hasConversation?e.$t("CONTINUE_CONVERSATION"):e.$t("START_CONVERSATION")),1),t[1]||(t[1]=o("i",{class:"i-lucide-chevron-right size-5 mt-px"},null,-1))],4)])}const ae=y(J,[["render",te]]),se={class:"underline-offset-2 leading-6 ltr:text-left rtl:text-right text-base"},ne={__name:"ArticleListItem",props:{link:{type:String,default:""},title:{type:String,default:""}},emits:["selectArticle"],setup(e,{emit:t}){const i=e,u=t,r=()=>{u("selectArticle",i.link)};return(a,s)=>(n(),c("div",{class:"flex items-center justify-between rounded cursor-pointer text-n-slate-11 hover:text-n-slate-12 gap-2",role:"button",onClick:r},[o("button",se,m(e.title),1),s[0]||(s[0]=o("span",{class:"i-lucide-chevron-right text-base shrink-0"},null,-1))]))}},ie={class:"flex flex-col gap-3"},le={class:"font-medium text-n-slate-12"},oe={class:"flex flex-col gap-4"},re={__name:"ArticleBlock",props:{articles:{type:Array,default:()=>[]}},emits:["view","viewAll"],setup(e,{emit:t}){const i=e,u=t,r=A("appConfig/getWidgetColor"),a=h(()=>i.articles.slice(0,6)),s=l=>{u("view",l)};return(l,d)=>(n(),c("div",ie,[o("h3",le,m(l.$t("PORTAL.POPULAR_ARTICLES")),1),o("div",oe,[(n(!0),c(T,null,M(a.value,p=>(n(),_(ne,{key:p.slug,link:p.link,title:p.title,onSelectArticle:s},null,8,["link","title"]))),128))]),o("div",null,[o("button",{class:"font-medium tracking-wide inline-flex",style:S({color:g(r)}),onClick:d[0]||(d[0]=p=>l.$emit("viewAll"))},[o("span",null,m(l.$t("PORTAL.VIEW_ALL_ARTICLES")),1)],4)])]))}},ce={},ue={class:"py-4 space-y-4"};function de(e,t){return n(),c("div",ue,t[0]||(t[0]=[P('<div class="space-y-2 animate-pulse"><div class="h-6 bg-n-slate-5 dark:bg-n-alpha-black1 rounded w-2/5"></div></div><div class="space-y-2 animate-pulse"><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded"></div><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded"></div><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded"></div></div><div class="space-y-2 animate-pulse"><div class="h-4 bg-n-slate-5 dark:bg-n-alpha-black1 rounded w-1/5"></div></div>',3)]))}const pe=y(ce,[["render",de]]),ve=(e="",t=[])=>{if(!e||!Array.isArray(t)||!t.length)return null;const[i]=e.split("_");return[e,i,t.find(r=>r.startsWith(`${i}_`))].find(r=>r&&t.includes(r))??null},me={key:0,class:"w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-background dark:bg-n-solid-2 px-5 py-4"},ge={key:1,class:"hidden"},he={__name:"ArticleContainer",setup(e){const t=E(),i=D(),u=L(),{prefersDarkMode:r}=B(),a=h(()=>window.chatwootWebChannel.portal),s=A("article/popularArticles"),l=A("article/uiFlags"),d=h(()=>{const{locale:v}=u,{allowed_locales:f}=a.value.config;return ve(v.value,f)}),p=()=>{a.value&&!s.value.length&&t.dispatch("article/fetch",{slug:a.value.slug,locale:d.value})},x=v=>{const f=new URLSearchParams({show_plain_layout:"true",theme:r.value?"dark":"light",...d.value&&{locale:d.value}}),N=`${v}?${f.toString()}`;i.push({name:"article-viewer",query:{link:N}})},I=()=>{const{portal:{slug:v}}=window.chatwootWebChannel;x(`/hc/${v}/${d.value}`)},O=h(()=>!l.value.isFetching&&!l.value.isError&&!!s.value.length&&!!d.value);return U(()=>p()),(v,f)=>a.value&&(g(l).isFetching||g(s).length)?(n(),c("div",me,[O.value?(n(),_(re,{key:0,articles:g(s),onView:x,onViewAll:I},null,8,["articles"])):k("",!0),g(l).isFetching?(n(),_(pe,{key:1})):k("",!0)])):(n(),c("div",ge))}},fe={name:"Home",components:{ArticleContainer:he,TeamAvailability:ae},mixins:[$,W],computed:{...w({availableAgents:"agent/availableAgents",conversationSize:"conversation/getConversationSize",unreadMessageCount:"conversation/getUnreadMessageCount"})},methods:{startConversation(){return this.preChatFormEnabled&&!this.conversationSize?this.replaceRoute("prechat-form"):this.replaceRoute("messages")}}},_e={class:"z-50 flex flex-col justify-end flex-1 w-full p-4 gap-4"};function Ae(e,t,i,u,r,a){const s=C("TeamAvailability"),l=C("ArticleContainer");return n(),c("div",_e,[b(s,{"available-agents":e.availableAgents,"has-conversation":!!e.conversationSize,"unread-count":e.unreadMessageCount,onStartConversation:a.startConversation},null,8,["available-agents","has-conversation","unread-count","onStartConversation"]),b(l)])}const Fe=y(fe,[["render",Ae]]);export{Fe as default};
//# sourceMappingURL=Home-UbDOeT7l.js.map
