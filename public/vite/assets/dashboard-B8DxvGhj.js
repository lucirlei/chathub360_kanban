const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auto-CU7ORvl9.js","assets/BarChart-CqJKiiio.js","assets/_plugin-vue_export-helper-IoQslFd3.js","assets/EmojiInput-CHOuDIMs.js","assets/typing-B_xc7lBt.js","assets/Validators-DkQimdV0.js","assets/index-DN3rM4CW.js","assets/index-DJvhFcF9.js","assets/_commonjsHelpers-BosuxZz1.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/utils.esm-dig4nDxm.js","assets/exports-Db5CWii1.js","assets/globals-DPjCpsAT.js","assets/module-CEpankYo.js","assets/Icon-Dg_4WYMY.js","assets/EmojiInput-Dm9q0cqD.css","assets/PortalsArticlesIndexPage-Bi-6LSLC.js","assets/useBranding-CD_QbCIP.js","assets/useBranding-aTKfDg_G.css","assets/HelpCenterLayout-Cxv-mUuH.js","assets/Avatar-CS4GuSbz.js","assets/index-DyRF4TQi.js","assets/DashboardIcon-D9a-qnXf.js","assets/js.cookie-Cz0CWeBA.js","assets/index-BtuGy7By.js","assets/CategoryHeaderControls-RyLNzmNJ.js","assets/CategoryHeaderControls-nLd8rpU7.css","assets/useKeyboardNavigableList-DBoi-hid.js","assets/helper-q29O9VCT.js","assets/constants-lVAyZKq6.js","assets/IframeLoader-BKISZm2C.js","assets/PortalsArticlesIndexPage-Dz6Zpu1T.css","assets/PortalsArticlesNewPage-BsY-_ObZ.js","assets/ArticleEditor-Msxse8mA.js","assets/ArticleEditor-QP3vQWC_.css","assets/PortalsArticlesEditPage-BkUhURC4.js","assets/PortalsCategoriesIndexPage-DIep0Xcv.js","assets/PortalsLocalesIndexPage-CPEkx8hh.js","assets/PortalsSettingsIndexPage-D8527UoR.js","assets/commandbar-CXUc3Rz0.js","assets/commandbar-DaCNDihA.css"])))=>i.map(i=>d[i]);
var kC=Object.defineProperty;var LC=(e,t,n)=>t in e?kC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var hn=(e,t,n)=>LC(e,typeof t!="symbol"?t+"":t,n);import{d as el,h as Wn,r as F,w as ot,c as C,a as V,o as p,b as at,e as v,f as ze,g as O,i as pe,v as pn,F as fe,j as Ae,t as E,k as Hn,T as Ps,l as K,m as Ee,_ as Fe,n as z,p as f,q as re,s as c,u as GE,x as VE,y as Bs,z as Ct,A as jt,B as HE,C as WE,D as KE,E as zE,G as jE,H as I,I as _t,J as Xu,K as DC,L as PC,M as Jf,N as xc,O as BC,P as pt,Q as qu,R as Zu,S as va,U as yn,V as jn,W as mt,X as Ks,Y as cs,Z as Ao,$ as lo,a0 as zs,a1 as xs,a2 as zt,a3 as Yc,a4 as yr,a5 as Yo,a6 as os,a7 as Xt,a8 as eg,a9 as tg,aa as YE,ab as Fo,ac as FC,ad as UC,ae as GC,af as Vl,ag as ng,ah as XE,ai as VC,aj as qE}from"./_plugin-vue_export-helper-IoQslFd3.js";import{u as Pe,m as St,S as Zs,e as It,a as Nn,b as yt,c as ke,M as HC,d as Io,f as Pn,C as Ei,g as Hl,h as oa,_ as Va,i as WC,A as KC,j as fa,k as zC,l as jC,n as YC,o as fu,p as lf,q as Nc,r as Jp,s as XC}from"./useBranding-CD_QbCIP.js";import{a as qC}from"./index-BtuGy7By.js";import{g as sg,a as ZC,c as QC}from"./_commonjsHelpers-BosuxZz1.js";import{a as Oc,s as pl,e as Po,i as JC,p as ic,B as ex,b as tx,g as nx,t as sx,c as hv,d as fv,f as ax,F as ox,h as gu,j as _u,k as Go,l as lx,M as $o,m as ix,n as rx,o as cx}from"./index-DJvhFcF9.js";import{_ as ce,r as lt,u as Lt,a as qn,m as on,e as Zl,c as fc,b as Xc,s as ZE,d as qc,f as QE,g as dx,h as rf,n as ux}from"./exports-Db5CWii1.js";import{u as _e,a as nn,A as px}from"./index-DyRF4TQi.js";import{r as JE,d as eT,c as cf,a as mx,b as tT,e as hx,i as em,f as fx,g as Ti,h as kl,j as Vo,k as gx,P as _x,l as vx,D as bx,m as Ex,S as gv,E as Tx,n as Ax,M as _v,o as tm,p as yx,q as Sx,s as Ci,t as Ix,u as Cx,v as xx,w as Nx,x as Ox,y as vu,z as Qu,R as ag,A as Ds,B as vv,C as wc,F as wx,G as bu,H as og,I as Rx,J as $x,_ as Mx,K as lg}from"./typing-B_xc7lBt.js";import{u as Qs,a as ig,h as kx,b as Lx,i as Dx,c as Px,d as Bx,L as Fx,k as Ux,e as Gx}from"./useKeyboardNavigableList-DBoi-hid.js";import{c as to,g as nT,a as sT}from"./helper-q29O9VCT.js";import{g as Vx,c as Hx,f as rg,a as Wx,d as ml,b as aT,e as Kx,h as oT,i as zx,r as jx,j as Yx,t as Xx,k as qx,l as Zx,m as Qx,n as Jx,o as cg,p as eN,q as tN,s as nN}from"./utils.esm-dig4nDxm.js";import{i as Uo,f as ts,s as ga,u as cn,B as xn,L as Qa,a as En,g as dg,b as ug,c as bv,d as sN,e as aN,h as rc,j as oN,k as Ev,l as nm,m as Hr,n as Wr,o as lN,p as iN,q as rN,r as cN}from"./Validators-DkQimdV0.js";import{r as zn,t as Fn,a as es}from"./index-DN3rM4CW.js";import{d as lT,g as dN,a as pg,h as mg,R as fs,C as Xs,b as Ji,c as uN,P as er,L as vo,S as pN,e as mN,A as fr,D as hN,f as tl,i as fN,_ as Wl,j as Bt,k as gN,s as _N,l as _a,u as vN,m as Ho,n as Sr,o as bN,p as EN,q as Ju,I as Ut,w as TN,r as Ir,t as AN,v as yN,x as SN,y as vd,z as Ai,B as Cr,E as IN,F as CN,K as Dn,G as df,H as xN,M as Kr,J as NN,N as ON,O as wN,Q as Tv,T as RN,U as $N,V as MN,W as Pa,X as xi,Y as hg,Z as kN,$ as LN,a0 as DN,a1 as iT,a2 as PN,a3 as BN,a4 as $l,a5 as ra,a6 as Eu,a7 as Us,a8 as Av,a9 as FN,aa as UN,ab as ep,ac as Zc,ad as Tu,ae as GN,af as wi,ag as uf,ah as Au,ai as Qc,aj as lr,ak as fg,al as hi,am as VN,an as yv,ao as gg,ap as _g,aq as HN,ar as rT,as as WN,at as tr,au as KN,av as zN,aw as jN,ax as YN,ay as XN,az as qN,aA as ZN,aB as QN}from"./DashboardIcon-D9a-qnXf.js";import{g as JN,l as vg,a as eO,B as nr}from"./Icon-Dg_4WYMY.js";import{_ as Wt,w as Pt}from"./globals-DPjCpsAT.js";import{_ as Ft,a as bg,u as tO,h as nO}from"./Avatar-CS4GuSbz.js";import{u as $a,M as tp,k as sO}from"./vue-dompurify-html-CEAHYyWB.js";import{F as sm,d as aO,a as oO}from"./module-CEpankYo.js";import{_ as cT}from"./BarChart-CqJKiiio.js";import{M as Sv}from"./constants-lVAyZKq6.js";import{_ as lO}from"./IframeLoader-BKISZm2C.js";import"./js.cookie-Cz0CWeBA.js";function dT(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],s=typeof n;(s==="object"||s==="function")&&!Object.isFrozen(n)&&dT(n)}),e}class Iv{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function uT(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ll(e,...t){const n=Object.create(null);for(const s in e)n[s]=e[s];return t.forEach(function(s){for(const a in s)n[a]=s[a]}),n}const iO="</span>",Cv=e=>!!e.scope,rO=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((s,a)=>`${s}${"_".repeat(a+1)}`)].join(" ")}return`${t}${e}`};class cO{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=uT(t)}openNode(t){if(!Cv(t))return;const n=rO(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){Cv(t)&&(this.buffer+=iO)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const xv=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Eg{constructor(){this.rootNode=xv(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=xv({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(s=>this._walk(t,s)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{Eg._collapse(n)}))}}class dO extends Eg{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const s=t.root;n&&(s.scope=`language:${n}`),this.add(s)}toHTML(){return new cO(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Rc(e){return e?typeof e=="string"?e:e.source:null}function pT(e){return Ri("(?=",e,")")}function uO(e){return Ri("(?:",e,")*")}function pO(e){return Ri("(?:",e,")?")}function Ri(...e){return e.map(n=>Rc(n)).join("")}function mO(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Tg(...e){return"("+(mO(e).capture?"":"?:")+e.map(s=>Rc(s)).join("|")+")"}function mT(e){return new RegExp(e.toString()+"|").exec("").length-1}function hO(e,t){const n=e&&e.exec(t);return n&&n.index===0}const fO=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Ag(e,{joinWith:t}){let n=0;return e.map(s=>{n+=1;const a=n;let o=Rc(s),l="";for(;o.length>0;){const i=fO.exec(o);if(!i){l+=o;break}l+=o.substring(0,i.index),o=o.substring(i.index+i[0].length),i[0][0]==="\\"&&i[1]?l+="\\"+String(Number(i[1])+a):(l+=i[0],i[0]==="("&&n++)}return l}).map(s=>`(${s})`).join(t)}const gO=/\b\B/,hT="[a-zA-Z]\\w*",yg="[a-zA-Z_]\\w*",fT="\\b\\d+(\\.\\d+)?",gT="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",_T="\\b(0b[01]+)",_O="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",vO=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Ri(t,/.*\b/,e.binary,/\b.*/)),Ll({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,s)=>{n.index!==0&&s.ignoreMatch()}},e)},$c={begin:"\\\\[\\s\\S]",relevance:0},bO={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[$c]},EO={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[$c]},TO={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},np=function(e,t,n={}){const s=Ll({scope:"comment",begin:e,end:t,contains:[]},n);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const a=Tg("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:Ri(/[ ]+/,"(",a,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},AO=np("//","$"),yO=np("/\\*","\\*/"),SO=np("#","$"),IO={scope:"number",begin:fT,relevance:0},CO={scope:"number",begin:gT,relevance:0},xO={scope:"number",begin:_T,relevance:0},NO={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[$c,{begin:/\[/,end:/\]/,relevance:0,contains:[$c]}]},OO={scope:"title",begin:hT,relevance:0},wO={scope:"title",begin:yg,relevance:0},RO={begin:"\\.\\s*"+yg,relevance:0},$O=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var bd=Object.freeze({__proto__:null,APOS_STRING_MODE:bO,BACKSLASH_ESCAPE:$c,BINARY_NUMBER_MODE:xO,BINARY_NUMBER_RE:_T,COMMENT:np,C_BLOCK_COMMENT_MODE:yO,C_LINE_COMMENT_MODE:AO,C_NUMBER_MODE:CO,C_NUMBER_RE:gT,END_SAME_AS_BEGIN:$O,HASH_COMMENT_MODE:SO,IDENT_RE:hT,MATCH_NOTHING_RE:gO,METHOD_GUARD:RO,NUMBER_MODE:IO,NUMBER_RE:fT,PHRASAL_WORDS_MODE:TO,QUOTE_STRING_MODE:EO,REGEXP_MODE:NO,RE_STARTERS_RE:_O,SHEBANG:vO,TITLE_MODE:OO,UNDERSCORE_IDENT_RE:yg,UNDERSCORE_TITLE_MODE:wO});function MO(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function kO(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function LO(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=MO,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function DO(e,t){Array.isArray(e.illegal)&&(e.illegal=Tg(...e.illegal))}function PO(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function BO(e,t){e.relevance===void 0&&(e.relevance=1)}const FO=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(s=>{delete e[s]}),e.keywords=n.keywords,e.begin=Ri(n.beforeMatch,pT(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},UO=["of","and","for","in","not","or","if","then","parent","list","value"],GO="keyword";function vT(e,t,n=GO){const s=Object.create(null);return typeof e=="string"?a(n,e.split(" ")):Array.isArray(e)?a(n,e):Object.keys(e).forEach(function(o){Object.assign(s,vT(e[o],t,o))}),s;function a(o,l){t&&(l=l.map(i=>i.toLowerCase())),l.forEach(function(i){const r=i.split("|");s[r[0]]=[o,VO(r[0],r[1])]})}}function VO(e,t){return t?Number(t):HO(e)?0:1}function HO(e){return UO.includes(e.toLowerCase())}const Nv={},yi=e=>{console.error(e)},Ov=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Fi=(e,t)=>{Nv[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Nv[`${e}/${t}`]=!0)},yu=new Error;function bT(e,t,{key:n}){let s=0;const a=e[n],o={},l={};for(let i=1;i<=t.length;i++)l[i+s]=a[i],o[i+s]=!0,s+=mT(t[i-1]);e[n]=l,e[n]._emit=o,e[n]._multi=!0}function WO(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw yi("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),yu;if(typeof e.beginScope!="object"||e.beginScope===null)throw yi("beginScope must be object"),yu;bT(e,e.begin,{key:"beginScope"}),e.begin=Ag(e.begin,{joinWith:""})}}function KO(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw yi("skip, excludeEnd, returnEnd not compatible with endScope: {}"),yu;if(typeof e.endScope!="object"||e.endScope===null)throw yi("endScope must be object"),yu;bT(e,e.end,{key:"endScope"}),e.end=Ag(e.end,{joinWith:""})}}function zO(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function jO(e){zO(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),WO(e),KO(e)}function YO(e){function t(l,i){return new RegExp(Rc(l),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(i?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(i,r){r.position=this.position++,this.matchIndexes[this.matchAt]=r,this.regexes.push([r,i]),this.matchAt+=mT(i)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const i=this.regexes.map(r=>r[1]);this.matcherRe=t(Ag(i,{joinWith:"|"}),!0),this.lastIndex=0}exec(i){this.matcherRe.lastIndex=this.lastIndex;const r=this.matcherRe.exec(i);if(!r)return null;const d=r.findIndex((m,h)=>h>0&&m!==void 0),u=this.matchIndexes[d];return r.splice(0,d),Object.assign(r,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(i){if(this.multiRegexes[i])return this.multiRegexes[i];const r=new n;return this.rules.slice(i).forEach(([d,u])=>r.addRule(d,u)),r.compile(),this.multiRegexes[i]=r,r}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(i,r){this.rules.push([i,r]),r.type==="begin"&&this.count++}exec(i){const r=this.getMatcher(this.regexIndex);r.lastIndex=this.lastIndex;let d=r.exec(i);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,d=u.exec(i)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function a(l){const i=new s;return l.contains.forEach(r=>i.addRule(r.begin,{rule:r,type:"begin"})),l.terminatorEnd&&i.addRule(l.terminatorEnd,{type:"end"}),l.illegal&&i.addRule(l.illegal,{type:"illegal"}),i}function o(l,i){const r=l;if(l.isCompiled)return r;[kO,PO,jO,FO].forEach(u=>u(l,i)),e.compilerExtensions.forEach(u=>u(l,i)),l.__beforeBegin=null,[LO,DO,BO].forEach(u=>u(l,i)),l.isCompiled=!0;let d=null;return typeof l.keywords=="object"&&l.keywords.$pattern&&(l.keywords=Object.assign({},l.keywords),d=l.keywords.$pattern,delete l.keywords.$pattern),d=d||/\w+/,l.keywords&&(l.keywords=vT(l.keywords,e.case_insensitive)),r.keywordPatternRe=t(d,!0),i&&(l.begin||(l.begin=/\B|\b/),r.beginRe=t(r.begin),!l.end&&!l.endsWithParent&&(l.end=/\B|\b/),l.end&&(r.endRe=t(r.end)),r.terminatorEnd=Rc(r.end)||"",l.endsWithParent&&i.terminatorEnd&&(r.terminatorEnd+=(l.end?"|":"")+i.terminatorEnd)),l.illegal&&(r.illegalRe=t(l.illegal)),l.contains||(l.contains=[]),l.contains=[].concat(...l.contains.map(function(u){return XO(u==="self"?l:u)})),l.contains.forEach(function(u){o(u,r)}),l.starts&&o(l.starts,i),r.matcher=a(r),r}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Ll(e.classNameAliases||{}),o(e)}function ET(e){return e?e.endsWithParent||ET(e.starts):!1}function XO(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Ll(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:ET(e)?Ll(e,{starts:e.starts?Ll(e.starts):null}):Object.isFrozen(e)?Ll(e):e}var qO="11.10.0";class ZO extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const am=uT,wv=Ll,Rv=Symbol("nomatch"),QO=7,TT=function(e){const t=Object.create(null),n=Object.create(null),s=[];let a=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let i={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:dO};function r(P){return i.noHighlightRe.test(P)}function d(P){let W=P.className+" ";W+=P.parentNode?P.parentNode.className:"";const Q=i.languageDetectRe.exec(W);if(Q){const Z=H(Q[1]);return Z||(Ov(o.replace("{}",Q[1])),Ov("Falling back to no-highlight mode for this block.",P)),Z?Q[1]:"no-highlight"}return W.split(/\s+/).find(Z=>r(Z)||H(Z))}function u(P,W,Q){let Z="",j="";typeof W=="object"?(Z=P,Q=W.ignoreIllegals,j=W.language):(Fi("10.7.0","highlight(lang, code, ...args) has been deprecated."),Fi("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),j=P,Z=W),Q===void 0&&(Q=!0);const X={code:Z,language:j};M("before:highlight",X);const q=X.result?X.result:m(X.language,X.code,Q);return q.code=X.code,M("after:highlight",q),q}function m(P,W,Q,Z){const j=Object.create(null);function X(Be,Ue){return Be.keywords[Ue]}function q(){if(!ee.keywords){ie.addText(Ce);return}let Be=0;ee.keywordPatternRe.lastIndex=0;let Ue=ee.keywordPatternRe.exec(Ce),ge="";for(;Ue;){ge+=Ce.substring(Be,Ue.index);const ae=st.case_insensitive?Ue[0].toLowerCase():Ue[0],ve=X(ee,ae);if(ve){const[Y,oe]=ve;if(ie.addText(ge),ge="",j[ae]=(j[ae]||0)+1,j[ae]<=QO&&(Se+=oe),Y.startsWith("_"))ge+=Ue[0];else{const te=st.classNameAliases[Y]||Y;be(Ue[0],te)}}else ge+=Ue[0];Be=ee.keywordPatternRe.lastIndex,Ue=ee.keywordPatternRe.exec(Ce)}ge+=Ce.substring(Be),ie.addText(ge)}function se(){if(Ce==="")return;let Be=null;if(typeof ee.subLanguage=="string"){if(!t[ee.subLanguage]){ie.addText(Ce);return}Be=m(ee.subLanguage,Ce,!0,de[ee.subLanguage]),de[ee.subLanguage]=Be._top}else Be=_(Ce,ee.subLanguage.length?ee.subLanguage:null);ee.relevance>0&&(Se+=Be.relevance),ie.__addSublanguage(Be._emitter,Be.language)}function he(){ee.subLanguage!=null?se():q(),Ce=""}function be(Be,Ue){Be!==""&&(ie.startScope(Ue),ie.addText(Be),ie.endScope())}function ne(Be,Ue){let ge=1;const ae=Ue.length-1;for(;ge<=ae;){if(!Be._emit[ge]){ge++;continue}const ve=st.classNameAliases[Be[ge]]||Be[ge],Y=Ue[ge];ve?be(Y,ve):(Ce=Y,q(),Ce=""),ge++}}function J(Be,Ue){return Be.scope&&typeof Be.scope=="string"&&ie.openNode(st.classNameAliases[Be.scope]||Be.scope),Be.beginScope&&(Be.beginScope._wrap?(be(Ce,st.classNameAliases[Be.beginScope._wrap]||Be.beginScope._wrap),Ce=""):Be.beginScope._multi&&(ne(Be.beginScope,Ue),Ce="")),ee=Object.create(Be,{parent:{value:ee}}),ee}function ue(Be,Ue,ge){let ae=hO(Be.endRe,ge);if(ae){if(Be["on:end"]){const ve=new Iv(Be);Be["on:end"](Ue,ve),ve.isMatchIgnored&&(ae=!1)}if(ae){for(;Be.endsParent&&Be.parent;)Be=Be.parent;return Be}}if(Be.endsWithParent)return ue(Be.parent,Ue,ge)}function Ne(Be){return ee.matcher.regexIndex===0?(Ce+=Be[0],1):($e=!0,0)}function Re(Be){const Ue=Be[0],ge=Be.rule,ae=new Iv(ge),ve=[ge.__beforeBegin,ge["on:begin"]];for(const Y of ve)if(Y&&(Y(Be,ae),ae.isMatchIgnored))return Ne(Ue);return ge.skip?Ce+=Ue:(ge.excludeBegin&&(Ce+=Ue),he(),!ge.returnBegin&&!ge.excludeBegin&&(Ce=Ue)),J(ge,Be),ge.returnBegin?0:Ue.length}function Ze(Be){const Ue=Be[0],ge=W.substring(Be.index),ae=ue(ee,Be,ge);if(!ae)return Rv;const ve=ee;ee.endScope&&ee.endScope._wrap?(he(),be(Ue,ee.endScope._wrap)):ee.endScope&&ee.endScope._multi?(he(),ne(ee.endScope,Be)):ve.skip?Ce+=Ue:(ve.returnEnd||ve.excludeEnd||(Ce+=Ue),he(),ve.excludeEnd&&(Ce=Ue));do ee.scope&&ie.closeNode(),!ee.skip&&!ee.subLanguage&&(Se+=ee.relevance),ee=ee.parent;while(ee!==ae.parent);return ae.starts&&J(ae.starts,Be),ve.returnEnd?0:Ue.length}function Xe(){const Be=[];for(let Ue=ee;Ue!==st;Ue=Ue.parent)Ue.scope&&Be.unshift(Ue.scope);Be.forEach(Ue=>ie.openNode(Ue))}let Qe={};function Je(Be,Ue){const ge=Ue&&Ue[0];if(Ce+=Be,ge==null)return he(),0;if(Qe.type==="begin"&&Ue.type==="end"&&Qe.index===Ue.index&&ge===""){if(Ce+=W.slice(Ue.index,Ue.index+1),!a){const ae=new Error(`0 width match regex (${P})`);throw ae.languageName=P,ae.badRule=Qe.rule,ae}return 1}if(Qe=Ue,Ue.type==="begin")return Re(Ue);if(Ue.type==="illegal"&&!Q){const ae=new Error('Illegal lexeme "'+ge+'" for mode "'+(ee.scope||"<unnamed>")+'"');throw ae.mode=ee,ae}else if(Ue.type==="end"){const ae=Ze(Ue);if(ae!==Rv)return ae}if(Ue.type==="illegal"&&ge==="")return 1;if(Ke>1e5&&Ke>Ue.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ce+=ge,ge.length}const st=H(P);if(!st)throw yi(o.replace("{}",P)),new Error('Unknown language: "'+P+'"');const ht=YO(st);let wt="",ee=Z||ht;const de={},ie=new i.__emitter(i);Xe();let Ce="",Se=0,je=0,Ke=0,$e=!1;try{if(st.__emitTokens)st.__emitTokens(W,ie);else{for(ee.matcher.considerAll();;){Ke++,$e?$e=!1:ee.matcher.considerAll(),ee.matcher.lastIndex=je;const Be=ee.matcher.exec(W);if(!Be)break;const Ue=W.substring(je,Be.index),ge=Je(Ue,Be);je=Be.index+ge}Je(W.substring(je))}return ie.finalize(),wt=ie.toHTML(),{language:P,value:wt,relevance:Se,illegal:!1,_emitter:ie,_top:ee}}catch(Be){if(Be.message&&Be.message.includes("Illegal"))return{language:P,value:am(W),illegal:!0,relevance:0,_illegalBy:{message:Be.message,index:je,context:W.slice(je-100,je+100),mode:Be.mode,resultSoFar:wt},_emitter:ie};if(a)return{language:P,value:am(W),illegal:!1,relevance:0,errorRaised:Be,_emitter:ie,_top:ee};throw Be}}function h(P){const W={value:am(P),illegal:!1,relevance:0,_top:l,_emitter:new i.__emitter(i)};return W._emitter.addText(P),W}function _(P,W){W=W||i.languages||Object.keys(t);const Q=h(P),Z=W.filter(H).filter(k).map(he=>m(he,P,!1));Z.unshift(Q);const j=Z.sort((he,be)=>{if(he.relevance!==be.relevance)return be.relevance-he.relevance;if(he.language&&be.language){if(H(he.language).supersetOf===be.language)return 1;if(H(be.language).supersetOf===he.language)return-1}return 0}),[X,q]=j,se=X;return se.secondBest=q,se}function g(P,W,Q){const Z=W&&n[W]||Q;P.classList.add("hljs"),P.classList.add(`language-${Z}`)}function T(P){let W=null;const Q=d(P);if(r(Q))return;if(M("before:highlightElement",{el:P,language:Q}),P.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",P);return}if(P.children.length>0&&(i.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(P)),i.throwUnescapedHTML))throw new ZO("One of your code blocks includes unescaped HTML.",P.innerHTML);W=P;const Z=W.textContent,j=Q?u(Z,{language:Q,ignoreIllegals:!0}):_(Z);P.innerHTML=j.value,P.dataset.highlighted="yes",g(P,Q,j.language),P.result={language:j.language,re:j.relevance,relevance:j.relevance},j.secondBest&&(P.secondBest={language:j.secondBest.language,relevance:j.secondBest.relevance}),M("after:highlightElement",{el:P,result:j,text:Z})}function S(P){i=wv(i,P)}const b=()=>{x(),Fi("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function A(){x(),Fi("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let y=!1;function x(){if(document.readyState==="loading"){y=!0;return}document.querySelectorAll(i.cssSelector).forEach(T)}function $(){y&&x()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",$,!1);function N(P,W){let Q=null;try{Q=W(e)}catch(Z){if(yi("Language definition for '{}' could not be registered.".replace("{}",P)),a)yi(Z);else throw Z;Q=l}Q.name||(Q.name=P),t[P]=Q,Q.rawDefinition=W.bind(null,e),Q.aliases&&B(Q.aliases,{languageName:P})}function w(P){delete t[P];for(const W of Object.keys(n))n[W]===P&&delete n[W]}function D(){return Object.keys(t)}function H(P){return P=(P||"").toLowerCase(),t[P]||t[n[P]]}function B(P,{languageName:W}){typeof P=="string"&&(P=[P]),P.forEach(Q=>{n[Q.toLowerCase()]=W})}function k(P){const W=H(P);return W&&!W.disableAutodetect}function U(P){P["before:highlightBlock"]&&!P["before:highlightElement"]&&(P["before:highlightElement"]=W=>{P["before:highlightBlock"](Object.assign({block:W.el},W))}),P["after:highlightBlock"]&&!P["after:highlightElement"]&&(P["after:highlightElement"]=W=>{P["after:highlightBlock"](Object.assign({block:W.el},W))})}function G(P){U(P),s.push(P)}function L(P){const W=s.indexOf(P);W!==-1&&s.splice(W,1)}function M(P,W){const Q=P;s.forEach(function(Z){Z[Q]&&Z[Q](W)})}function R(P){return Fi("10.7.0","highlightBlock will be removed entirely in v12.0"),Fi("10.7.0","Please use highlightElement now."),T(P)}Object.assign(e,{highlight:u,highlightAuto:_,highlightAll:x,highlightElement:T,highlightBlock:R,configure:S,initHighlighting:b,initHighlightingOnLoad:A,registerLanguage:N,unregisterLanguage:w,listLanguages:D,getLanguage:H,registerAliases:B,autoDetection:k,inherit:wv,addPlugin:G,removePlugin:L}),e.debugMode=function(){a=!1},e.safeMode=function(){a=!0},e.versionString=qO,e.regex={concat:Ri,lookahead:pT,either:Tg,optional:pO,anyNumberOfTimes:uO};for(const P in bd)typeof bd[P]=="object"&&dT(bd[P]);return Object.assign(e,bd),e},gr=TT({});gr.newInstance=()=>TT({});var AT=gr;gr.HighlightJS=gr;gr.default=gr;const om=sg(AT);var $v=el({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=F(e.language);ot(function(){return e.language},function(a){t.value=a});var n=C(function(){return e.autodetect||!t.value}),s=C(function(){return!n.value&&!om.getLanguage(t.value)});return{className:C(function(){return s.value?"":"hljs "+t.value}),highlightedCode:C(function(){var a;if(s.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(n.value){var o=om.highlightAuto(e.code);return t.value=(a=o.language)!==null&&a!==void 0?a:"",o.value}return(o=om.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value})}},render:function(){return Wn("pre",{},[Wn("code",{class:this.className,innerHTML:this.highlightedCode})])}}),JO={install:function(e){e.component("highlightjs",$v)},component:$v};function lm(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function ew(e){return(...t)=>!e(...t)}function tw(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function yT(e,t,n,s){return t?e.filter(a=>tw(s(a,n),t)).sort((a,o)=>s(a,n).length-s(o,n).length):e}function nw(e){return e.filter(t=>!t.$isLabel)}function im(e,t){return n=>n.reduce((s,a)=>a[e]&&a[e].length?(s.push({$groupLabel:a[t],$isLabel:!0}),s.concat(a[e])):s,[])}function sw(e,t,n,s,a){return o=>o.map(l=>{if(!l[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const i=yT(l[n],e,t,a);return i.length?{[s]:l[s],[n]:i}:[]})}const Mv=(...e)=>t=>e.reduce((n,s)=>s(n),t);var aw={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return lm(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,t,this.label):yT(n,t,this.label,this.customLabel):n=this.groupValues?im(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(ew(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,n){return Mv(sw(t,n,this.groupValues,this.groupLabel,this.customLabel),im(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return Mv(im(this.groupValues,this.groupLabel),nw)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(lm(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return lm(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const n=this.trackBy?t[this.groupValues].map(a=>a[this.trackBy]):t[this.groupValues],s=this.internalValue.filter(a=>n.indexOf(this.trackBy?a[this.trackBy]:a)===-1);this.$emit("update:modelValue",s)}else{let n=t[this.groupValues].filter(s=>!(this.isOptionDisabled(s)||this.isSelected(s)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const s=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},ow={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const n=this.options.find(s=>s[this.groupLabel]===t.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},ST={name:"vue-multiselect",mixins:[aw,ow],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const lw={ref:"tags",class:"multiselect__tags"},iw={class:"multiselect__tags-wrap"},rw={class:"multiselect__spinner"},cw={key:0},dw={class:"multiselect__option"},uw={class:"multiselect__option"},pw=Ee("No elements found. Consider changing the search query."),mw={class:"multiselect__option"},hw=Ee("List is empty.");function fw(e,t,n,s,a,o){return p(),V("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":o.isAbove,"multiselect--has-options-group":o.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=l=>e.activate()),onBlur:t[15]||(t[15]=l=>e.searchable?!1:e.deactivate()),onKeydown:[t[16]||(t[16]=Hn(ze(l=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=Hn(ze(l=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=Hn(ze(l=>e.addPointerElement(l),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=Hn(l=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[at(e.$slots,"caret",{toggle:e.toggle},()=>[v("div",{onMousedown:t[1]||(t[1]=ze(l=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),at(e.$slots,"clear",{search:e.search}),v("div",lw,[at(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:o.visibleValues,isOpen:e.isOpen},()=>[pe(v("div",iw,[(p(!0),V(fe,null,Ae(o.visibleValues,(l,i)=>at(e.$slots,"tag",{option:l,search:e.search,remove:e.removeElement},()=>[(p(),V("span",{class:"multiselect__tag",key:i},[v("span",{textContent:E(e.getOptionLabel(l))},null,8,["textContent"]),v("i",{tabindex:"1",onKeypress:Hn(ze(r=>e.removeElement(l),["prevent"]),["enter"]),onMousedown:ze(r=>e.removeElement(l),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[pn,o.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?at(e.$slots,"limit",{key:0},()=>[v("strong",{class:"multiselect__strong",textContent:E(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):O("v-if",!0)]),v(Ps,{name:"multiselect__loading"},{default:K(()=>[at(e.$slots,"loading",{},()=>[pe(v("div",rw,null,512),[[pn,n.loading]])])]),_:3}),e.searchable?(p(),V("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:n.spellcheck,placeholder:e.placeholder,required:n.required,style:o.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:t[2]||(t[2]=l=>e.updateSearch(l.target.value)),onFocus:t[3]||(t[3]=ze(l=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=ze(l=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=Hn(l=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=Hn(ze(l=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=Hn(ze(l=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=Hn(ze(l=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=Hn(ze(l=>e.addPointerElement(l),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):O("v-if",!0),o.isSingleLabelVisible?(p(),V("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=ze((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[at(e.$slots,"singleLabel",{option:o.singleValue},()=>[Ee(E(e.currentOptionLabel),1)])],32)):O("v-if",!0),o.isPlaceholderVisible?(p(),V("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=ze((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[at(e.$slots,"placeholder",{},()=>[Ee(E(e.placeholder),1)])],32)):O("v-if",!0)],512),v(Ps,{name:"multiselect"},{default:K(()=>[pe(v("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...l)=>e.activate&&e.activate(...l)),tabindex:"-1",onMousedown:t[13]||(t[13]=ze(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[v("ul",{class:"multiselect__content",style:o.contentStyle,role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[at(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(p(),V("li",cw,[v("span",dw,[at(e.$slots,"maxElements",{},()=>[Ee("Maximum of "+E(e.max)+" options selected. First remove a selected option to select another.",1)])])])):O("v-if",!0),!e.max||e.internalValue.length<e.max?(p(!0),V(fe,{key:1},Ae(e.filteredOptions,(l,i)=>(p(),V("li",{class:"multiselect__element",key:i,"aria-selected":e.isSelected(l),id:e.id+"-"+i,role:l&&(l.$isLabel||l.$isDisabled)?null:"option"},[l&&(l.$isLabel||l.$isDisabled)?O("v-if",!0):(p(),V("span",{key:0,class:[e.optionHighlight(i,l),"multiselect__option"],onClick:ze(r=>e.select(l),["stop"]),onMouseenter:ze(r=>e.pointerSet(i),["self"]),"data-select":l&&l.isTag?e.tagPlaceholder:o.selectLabelText,"data-selected":o.selectedLabelText,"data-deselect":o.deselectLabelText},[at(e.$slots,"option",{option:l,search:e.search,index:i},()=>[v("span",null,E(e.getOptionLabel(l)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),l&&(l.$isLabel||l.$isDisabled)?(p(),V("span",{key:1,"data-select":e.groupSelect&&o.selectGroupLabelText,"data-deselect":e.groupSelect&&o.deselectGroupLabelText,class:[e.groupHighlight(i,l),"multiselect__option"],onMouseenter:ze(r=>e.groupSelect&&e.pointerSet(i),["self"]),onMousedown:ze(r=>e.selectGroup(l),["prevent"])},[at(e.$slots,"option",{option:l,search:e.search,index:i},()=>[v("span",null,E(e.getOptionLabel(l)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):O("v-if",!0)],8,["aria-selected","id","role"]))),128)):O("v-if",!0),pe(v("li",null,[v("span",uw,[at(e.$slots,"noResult",{search:e.search},()=>[pw])])],512),[[pn,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),pe(v("li",null,[v("span",mw,[at(e.$slots,"noOptions",{},()=>[hw])])],512),[[pn,n.showNoOptions&&(e.options.length===0||o.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!n.loading]]),at(e.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[pn,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}ST.render=fw;const gw={props:{items:{type:Array,default:()=>[]}},computed:{classObject(){return"w-full"},activeIndex(){return this.items.findIndex(e=>e.route===this.$route.name)}},methods:{isActive(e){return this.items.indexOf(e)===this.activeIndex},isOver(e){return this.items.indexOf(e)<this.activeIndex}}},_w={class:"flex items-center"},vw={class:"text-n-slate-12 text-base font-medium pl-6 overflow-hidden whitespace-nowrap mt-0.5 text-ellipsis leading-tight"},bw={key:0,class:"mx-1 mt-0.5 text-n-teal-9"},Ew={class:"step"},Tw={class:"pl-6 m-0 mt-1.5 text-sm text-n-slate-11"};function Aw(e,t,n,s,a,o){const l=z("fluent-icon");return p(),V(GE,{name:"wizard-items",tag:"div",class:re(["wizard-box",o.classObject])},{default:K(()=>[(p(!0),f(fe,null,Ae(n.items,i=>(p(),f("div",{key:i.route,class:re(["item",{active:o.isActive(i),over:o.isOver(i)}])},[c("div",_w,[c("h3",vw,E(i.title),1),o.isOver(i)?(p(),f("span",bw,[v(l,{icon:"checkmark"})])):O("",!0)]),c("span",Ew,E(n.items.indexOf(i)+1),1),c("p",Tw,E(i.body),1)],2))),128))]),_:1},8,["class"])}const yw=Fe(gw,[["render",Aw],["__scopeId","data-v-e5e838d5"]]),Sw=["top","right","bottom","left"],kv=["start","end"],Lv=Sw.reduce((e,t)=>e.concat(t,t+"-"+kv[0],t+"-"+kv[1]),[]),fi=Math.min,pi=Math.max,Iw={left:"right",right:"left",bottom:"top",top:"bottom"},Cw={start:"end",end:"start"};function pf(e,t,n){return pi(e,fi(t,n))}function $i(e,t){return typeof e=="function"?e(t):e}function Xo(e){return e.split("-")[0]}function bo(e){return e.split("-")[1]}function IT(e){return e==="x"?"y":"x"}function Sg(e){return e==="y"?"height":"width"}function Ni(e){return["top","bottom"].includes(Xo(e))?"y":"x"}function Ig(e){return IT(Ni(e))}function CT(e,t,n){n===void 0&&(n=!1);const s=bo(e),a=Ig(e),o=Sg(a);let l=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=Iu(l)),[l,Iu(l)]}function xw(e){const t=Iu(e);return[Su(e),t,Su(t)]}function Su(e){return e.replace(/start|end/g,t=>Cw[t])}function Nw(e,t,n){const s=["left","right"],a=["right","left"],o=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:s:t?s:a;case"left":case"right":return t?o:l;default:return[]}}function Ow(e,t,n,s){const a=bo(e);let o=Nw(Xo(e),n==="start",s);return a&&(o=o.map(l=>l+"-"+a),t&&(o=o.concat(o.map(Su)))),o}function Iu(e){return e.replace(/left|right|bottom|top/g,t=>Iw[t])}function ww(e){return{top:0,right:0,bottom:0,left:0,...e}}function xT(e){return typeof e!="number"?ww(e):{top:e,right:e,bottom:e,left:e}}function gc(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function Dv(e,t,n){let{reference:s,floating:a}=e;const o=Ni(t),l=Ig(t),i=Sg(l),r=Xo(t),d=o==="y",u=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,h=s[i]/2-a[i]/2;let _;switch(r){case"top":_={x:u,y:s.y-a.height};break;case"bottom":_={x:u,y:s.y+s.height};break;case"right":_={x:s.x+s.width,y:m};break;case"left":_={x:s.x-a.width,y:m};break;default:_={x:s.x,y:s.y}}switch(bo(t)){case"start":_[l]-=h*(n&&d?-1:1);break;case"end":_[l]+=h*(n&&d?-1:1);break}return _}const Rw=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:l}=n,i=o.filter(Boolean),r=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=Dv(d,s,r),h=s,_={},g=0;for(let T=0;T<i.length;T++){const{name:S,fn:b}=i[T],{x:A,y,data:x,reset:$}=await b({x:u,y:m,initialPlacement:s,placement:h,strategy:a,middlewareData:_,rects:d,platform:l,elements:{reference:e,floating:t}});u=A??u,m=y??m,_={..._,[S]:{..._[S],...x}},$&&g<=50&&(g++,typeof $=="object"&&($.placement&&(h=$.placement),$.rects&&(d=$.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:a}):$.rects),{x:u,y:m}=Dv(d,h,r)),T=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:_}};async function sp(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:l,elements:i,strategy:r}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:_=0}=$i(t,e),g=xT(_),S=i[h?m==="floating"?"reference":"floating":m],b=gc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(S)))==null||n?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(i.floating)),boundary:d,rootBoundary:u,strategy:r})),A=m==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),x=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},$=gc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:A,offsetParent:y,strategy:r}):A);return{top:(b.top-$.top+g.top)/x.y,bottom:($.bottom-b.bottom+g.bottom)/x.y,left:(b.left-$.left+g.left)/x.x,right:($.right-b.right+g.right)/x.x}}const $w=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:o,platform:l,elements:i,middlewareData:r}=t,{element:d,padding:u=0}=$i(e,t)||{};if(d==null)return{};const m=xT(u),h={x:n,y:s},_=Ig(a),g=Sg(_),T=await l.getDimensions(d),S=_==="y",b=S?"top":"left",A=S?"bottom":"right",y=S?"clientHeight":"clientWidth",x=o.reference[g]+o.reference[_]-h[_]-o.floating[g],$=h[_]-o.reference[_],N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let w=N?N[y]:0;(!w||!await(l.isElement==null?void 0:l.isElement(N)))&&(w=i.floating[y]||o.floating[g]);const D=x/2-$/2,H=w/2-T[g]/2-1,B=fi(m[b],H),k=fi(m[A],H),U=B,G=w-T[g]-k,L=w/2-T[g]/2+D,M=pf(U,L,G),R=!r.arrow&&bo(a)!=null&&L!==M&&o.reference[g]/2-(L<U?B:k)-T[g]/2<0,P=R?L<U?L-U:L-G:0;return{[_]:h[_]+P,data:{[_]:M,centerOffset:L-M-P,...R&&{alignmentOffset:P}},reset:R}}});function Mw(e,t,n){return(e?[...n.filter(a=>bo(a)===e),...n.filter(a=>bo(a)!==e)]:n.filter(a=>Xo(a)===a)).filter(a=>e?bo(a)===e||(t?Su(a)!==a:!1):!0)}const kw=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,s,a;const{rects:o,middlewareData:l,placement:i,platform:r,elements:d}=t,{crossAxis:u=!1,alignment:m,allowedPlacements:h=Lv,autoAlignment:_=!0,...g}=$i(e,t),T=m!==void 0||h===Lv?Mw(m||null,_,h):h,S=await sp(t,g),b=((n=l.autoPlacement)==null?void 0:n.index)||0,A=T[b];if(A==null)return{};const y=CT(A,o,await(r.isRTL==null?void 0:r.isRTL(d.floating)));if(i!==A)return{reset:{placement:T[0]}};const x=[S[Xo(A)],S[y[0]],S[y[1]]],$=[...((s=l.autoPlacement)==null?void 0:s.overflows)||[],{placement:A,overflows:x}],N=T[b+1];if(N)return{data:{index:b+1,overflows:$},reset:{placement:N}};const w=$.map(B=>{const k=bo(B.placement);return[B.placement,k&&u?B.overflows.slice(0,2).reduce((U,G)=>U+G,0):B.overflows[0],B.overflows]}).sort((B,k)=>B[1]-k[1]),H=((a=w.filter(B=>B[2].slice(0,bo(B[0])?2:3).every(k=>k<=0))[0])==null?void 0:a[0])||w[0][0];return H!==i?{data:{index:b+1,overflows:$},reset:{placement:H}}:{}}}},Lw=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:o,rects:l,initialPlacement:i,platform:r,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:T=!0,...S}=$i(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const b=Xo(a),A=Ni(i),y=Xo(i)===i,x=await(r.isRTL==null?void 0:r.isRTL(d.floating)),$=h||(y||!T?[Iu(i)]:xw(i)),N=g!=="none";!h&&N&&$.push(...Ow(i,T,g,x));const w=[i,...$],D=await sp(t,S),H=[];let B=((s=o.flip)==null?void 0:s.overflows)||[];if(u&&H.push(D[b]),m){const L=CT(a,l,x);H.push(D[L[0]],D[L[1]])}if(B=[...B,{placement:a,overflows:H}],!H.every(L=>L<=0)){var k,U;const L=(((k=o.flip)==null?void 0:k.index)||0)+1,M=w[L];if(M)return{data:{index:L,overflows:B},reset:{placement:M}};let R=(U=B.filter(P=>P.overflows[0]<=0).sort((P,W)=>P.overflows[1]-W.overflows[1])[0])==null?void 0:U.placement;if(!R)switch(_){case"bestFit":{var G;const P=(G=B.filter(W=>{if(N){const Q=Ni(W.placement);return Q===A||Q==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Q=>Q>0).reduce((Q,Z)=>Q+Z,0)]).sort((W,Q)=>W[1]-Q[1])[0])==null?void 0:G[0];P&&(R=P);break}case"initialPlacement":R=i;break}if(a!==R)return{reset:{placement:R}}}return{}}}};async function Dw(e,t){const{placement:n,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=Xo(n),i=bo(n),r=Ni(n)==="y",d=["left","top"].includes(l)?-1:1,u=o&&r?-1:1,m=$i(t,e);let{mainAxis:h,crossAxis:_,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return i&&typeof g=="number"&&(_=i==="end"?g*-1:g),r?{x:_*u,y:h*d}:{x:h*d,y:_*u}}const Pw=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:o,placement:l,middlewareData:i}=t,r=await Dw(t,e);return l===((n=i.offset)==null?void 0:n.placement)&&(s=i.arrow)!=null&&s.alignmentOffset?{}:{x:a+r.x,y:o+r.y,data:{...r,placement:l}}}}},Bw=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:i={fn:S=>{let{x:b,y:A}=S;return{x:b,y:A}}},...r}=$i(e,t),d={x:n,y:s},u=await sp(t,r),m=Ni(Xo(a)),h=IT(m);let _=d[h],g=d[m];if(o){const S=h==="y"?"top":"left",b=h==="y"?"bottom":"right",A=_+u[S],y=_-u[b];_=pf(A,_,y)}if(l){const S=m==="y"?"top":"left",b=m==="y"?"bottom":"right",A=g+u[S],y=g-u[b];g=pf(A,g,y)}const T=i.fn({...t,[h]:_,[m]:g});return{...T,data:{x:T.x-n,y:T.y-s}}}}},Fw=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...i}=$i(e,t),r=await sp(t,i),d=Xo(n),u=bo(n),m=Ni(n)==="y",{width:h,height:_}=s.floating;let g,T;d==="top"||d==="bottom"?(g=d,T=u===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(T=d,g=u==="end"?"top":"bottom");const S=_-r.top-r.bottom,b=h-r.left-r.right,A=fi(_-r[g],S),y=fi(h-r[T],b),x=!t.middlewareData.shift;let $=A,N=y;if(m?N=u||x?fi(y,b):b:$=u||x?fi(A,S):S,x&&!u){const D=pi(r.left,0),H=pi(r.right,0),B=pi(r.top,0),k=pi(r.bottom,0);m?N=h-2*(D!==0||H!==0?D+H:pi(r.left,r.right)):$=_-2*(B!==0||k!==0?B+k:pi(r.top,r.bottom))}await l({...t,availableWidth:N,availableHeight:$});const w=await a.getDimensions(o.floating);return h!==w.width||_!==w.height?{reset:{rects:!0}}:{}}}};function Za(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Wo(e){return Za(e).getComputedStyle(e)}const Pv=Math.min,_c=Math.max,Cu=Math.round;function NT(e){const t=Wo(e);let n=parseFloat(t.width),s=parseFloat(t.height);const a=e.offsetWidth,o=e.offsetHeight,l=Cu(n)!==a||Cu(s)!==o;return l&&(n=a,s=o),{width:n,height:s,fallback:l}}function Yl(e){return wT(e)?(e.nodeName||"").toLowerCase():""}let Ed;function OT(){if(Ed)return Ed;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Ed=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Ed):navigator.userAgent}function Ko(e){return e instanceof Za(e).HTMLElement}function Kl(e){return e instanceof Za(e).Element}function wT(e){return e instanceof Za(e).Node}function Bv(e){return typeof ShadowRoot>"u"?!1:e instanceof Za(e).ShadowRoot||e instanceof ShadowRoot}function ap(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Wo(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(a)}function Uw(e){return["table","td","th"].includes(Yl(e))}function mf(e){const t=/firefox/i.test(OT()),n=Wo(e),s=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!s&&s!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(a=>n.willChange.includes(a))||["paint","layout","strict","content"].some(a=>{const o=n.contain;return o!=null&&o.includes(a)})}function RT(){return!/^((?!chrome|android).)*safari/i.test(OT())}function Cg(e){return["html","body","#document"].includes(Yl(e))}function $T(e){return Kl(e)?e:e.contextElement}const MT={x:1,y:1};function ir(e){const t=$T(e);if(!Ko(t))return MT;const n=t.getBoundingClientRect(),{width:s,height:a,fallback:o}=NT(t);let l=(o?Cu(n.width):n.width)/s,i=(o?Cu(n.height):n.height)/a;return l&&Number.isFinite(l)||(l=1),i&&Number.isFinite(i)||(i=1),{x:l,y:i}}function Mc(e,t,n,s){var a,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),i=$T(e);let r=MT;t&&(s?Kl(s)&&(r=ir(s)):r=ir(e));const d=i?Za(i):window,u=!RT()&&n;let m=(l.left+(u&&((a=d.visualViewport)==null?void 0:a.offsetLeft)||0))/r.x,h=(l.top+(u&&((o=d.visualViewport)==null?void 0:o.offsetTop)||0))/r.y,_=l.width/r.x,g=l.height/r.y;if(i){const T=Za(i),S=s&&Kl(s)?Za(s):s;let b=T.frameElement;for(;b&&s&&S!==T;){const A=ir(b),y=b.getBoundingClientRect(),x=getComputedStyle(b);y.x+=(b.clientLeft+parseFloat(x.paddingLeft))*A.x,y.y+=(b.clientTop+parseFloat(x.paddingTop))*A.y,m*=A.x,h*=A.y,_*=A.x,g*=A.y,m+=y.x,h+=y.y,b=Za(b).frameElement}}return{width:_,height:g,top:h,right:m+_,bottom:h+g,left:m,x:m,y:h}}function zl(e){return((wT(e)?e.ownerDocument:e.document)||window.document).documentElement}function op(e){return Kl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function kT(e){return Mc(zl(e)).left+op(e).scrollLeft}function kc(e){if(Yl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Bv(e)&&e.host||zl(e);return Bv(t)?t.host:t}function LT(e){const t=kc(e);return Cg(t)?t.ownerDocument.body:Ko(t)&&ap(t)?t:LT(t)}function xu(e,t){var n;t===void 0&&(t=[]);const s=LT(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),o=Za(s);return a?t.concat(o,o.visualViewport||[],ap(s)?s:[]):t.concat(s,xu(s))}function Fv(e,t,n){return t==="viewport"?gc(function(s,a){const o=Za(s),l=zl(s),i=o.visualViewport;let r=l.clientWidth,d=l.clientHeight,u=0,m=0;if(i){r=i.width,d=i.height;const h=RT();(h||!h&&a==="fixed")&&(u=i.offsetLeft,m=i.offsetTop)}return{width:r,height:d,x:u,y:m}}(e,n)):Kl(t)?gc(function(s,a){const o=Mc(s,!0,a==="fixed"),l=o.top+s.clientTop,i=o.left+s.clientLeft,r=Ko(s)?ir(s):{x:1,y:1};return{width:s.clientWidth*r.x,height:s.clientHeight*r.y,x:i*r.x,y:l*r.y}}(t,n)):gc(function(s){const a=zl(s),o=op(s),l=s.ownerDocument.body,i=_c(a.scrollWidth,a.clientWidth,l.scrollWidth,l.clientWidth),r=_c(a.scrollHeight,a.clientHeight,l.scrollHeight,l.clientHeight);let d=-o.scrollLeft+kT(s);const u=-o.scrollTop;return Wo(l).direction==="rtl"&&(d+=_c(a.clientWidth,l.clientWidth)-i),{width:i,height:r,x:d,y:u}}(zl(e)))}function Uv(e){return Ko(e)&&Wo(e).position!=="fixed"?e.offsetParent:null}function Gv(e){const t=Za(e);let n=Uv(e);for(;n&&Uw(n)&&Wo(n).position==="static";)n=Uv(n);return n&&(Yl(n)==="html"||Yl(n)==="body"&&Wo(n).position==="static"&&!mf(n))?t:n||function(s){let a=kc(s);for(;Ko(a)&&!Cg(a);){if(mf(a))return a;a=kc(a)}return null}(e)||t}function Gw(e,t,n){const s=Ko(t),a=zl(t),o=Mc(e,!0,n==="fixed",t);let l={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if(s||!s&&n!=="fixed")if((Yl(t)!=="body"||ap(a))&&(l=op(t)),Ko(t)){const r=Mc(t,!0);i.x=r.x+t.clientLeft,i.y=r.y+t.clientTop}else a&&(i.x=kT(a));return{x:o.left+l.scrollLeft-i.x,y:o.top+l.scrollTop-i.y,width:o.width,height:o.height}}const Vw={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const o=n==="clippingAncestors"?function(d,u){const m=u.get(d);if(m)return m;let h=xu(d).filter(S=>Kl(S)&&Yl(S)!=="body"),_=null;const g=Wo(d).position==="fixed";let T=g?kc(d):d;for(;Kl(T)&&!Cg(T);){const S=Wo(T),b=mf(T);(g?b||_:b||S.position!=="static"||!_||!["absolute","fixed"].includes(_.position))?_=S:h=h.filter(A=>A!==T),T=kc(T)}return u.set(d,h),h}(t,this._c):[].concat(n),l=[...o,s],i=l[0],r=l.reduce((d,u)=>{const m=Fv(t,u,a);return d.top=_c(m.top,d.top),d.right=Pv(m.right,d.right),d.bottom=Pv(m.bottom,d.bottom),d.left=_c(m.left,d.left),d},Fv(t,i,a));return{width:r.right-r.left,height:r.bottom-r.top,x:r.left,y:r.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const a=Ko(n),o=zl(n);if(n===o)return t;let l={scrollLeft:0,scrollTop:0},i={x:1,y:1};const r={x:0,y:0};if((a||!a&&s!=="fixed")&&((Yl(n)!=="body"||ap(o))&&(l=op(n)),Ko(n))){const d=Mc(n);i=ir(n),r.x=d.x+n.clientLeft,r.y=d.y+n.clientTop}return{width:t.width*i.x,height:t.height*i.y,x:t.x*i.x-l.scrollLeft*i.x+r.x,y:t.y*i.y-l.scrollTop*i.y+r.y}},isElement:Kl,getDimensions:function(e){return Ko(e)?NT(e):e.getBoundingClientRect()},getOffsetParent:Gv,getDocumentElement:zl,getScale:ir,async getElementRects(e){let{reference:t,floating:n,strategy:s}=e;const a=this.getOffsetParent||Gv,o=this.getDimensions;return{reference:Gw(t,await a(n),s),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Wo(e).direction==="rtl"},Hw=(e,t,n)=>{const s=new Map,a={platform:Vw,...n},o={...a.platform,_c:s};return Rw(e,t,{...a,platform:o})};function DT(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]=="object"&&e[n]?DT(e[n],t[n]):e[n]=t[n])}const Eo={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:e=>[...e,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Lc(e,t){let n=Eo.themes[e]||{},s;do s=n[t],typeof s>"u"?n.$extend?n=Eo.themes[n.$extend]||{}:(n=null,s=Eo[t]):n=null;while(n);return s}function Ww(e){const t=[e];let n=Eo.themes[e]||{};do n.$extend&&!n.$resetCss?(t.push(n.$extend),n=Eo.themes[n.$extend]||{}):n=null;while(n);return t.map(s=>`v-popper--theme-${s}`)}function Vv(e){const t=[e];let n=Eo.themes[e]||{};do n.$extend?(t.push(n.$extend),n=Eo.themes[n.$extend]||{}):n=null;while(n);return t}let _r=!1;if(typeof window<"u"){_r=!1;try{const e=Object.defineProperty({},"passive",{get(){_r=!0}});window.addEventListener("test",null,e)}catch{}}let PT=!1;typeof window<"u"&&typeof navigator<"u"&&(PT=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const BT=["auto","top","bottom","left","right"].reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),Hv={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},Wv={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function Kv(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}function rm(){return new Promise(e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}))}const go=[];let si=null;const zv={};function jv(e){let t=zv[e];return t||(t=zv[e]=[]),t}let hf=function(){};typeof window<"u"&&(hf=window.Element);function Mn(e){return function(t){return Lc(t.theme,e)}}const cm="__floating-vue__popper",FT=()=>el({name:"VPopper",provide(){return{[cm]:{parentPopper:this}}},inject:{[cm]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:Mn("disabled")},positioningDisabled:{type:Boolean,default:Mn("positioningDisabled")},placement:{type:String,default:Mn("placement"),validator:e=>BT.includes(e)},delay:{type:[String,Number,Object],default:Mn("delay")},distance:{type:[Number,String],default:Mn("distance")},skidding:{type:[Number,String],default:Mn("skidding")},triggers:{type:Array,default:Mn("triggers")},showTriggers:{type:[Array,Function],default:Mn("showTriggers")},hideTriggers:{type:[Array,Function],default:Mn("hideTriggers")},popperTriggers:{type:Array,default:Mn("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:Mn("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:Mn("popperHideTriggers")},container:{type:[String,Object,hf,Boolean],default:Mn("container")},boundary:{type:[String,hf],default:Mn("boundary")},strategy:{type:String,validator:e=>["absolute","fixed"].includes(e),default:Mn("strategy")},autoHide:{type:[Boolean,Function],default:Mn("autoHide")},handleResize:{type:Boolean,default:Mn("handleResize")},instantMove:{type:Boolean,default:Mn("instantMove")},eagerMount:{type:Boolean,default:Mn("eagerMount")},popperClass:{type:[String,Array,Object],default:Mn("popperClass")},computeTransformOrigin:{type:Boolean,default:Mn("computeTransformOrigin")},autoMinSize:{type:Boolean,default:Mn("autoMinSize")},autoSize:{type:[Boolean,String],default:Mn("autoSize")},autoMaxSize:{type:Boolean,default:Mn("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:Mn("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:Mn("preventOverflow")},overflowPadding:{type:[Number,String],default:Mn("overflowPadding")},arrowPadding:{type:[Number,String],default:Mn("arrowPadding")},arrowOverflow:{type:Boolean,default:Mn("arrowOverflow")},flip:{type:Boolean,default:Mn("flip")},shift:{type:Boolean,default:Mn("shift")},shiftCrossAxis:{type:Boolean,default:Mn("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:Mn("noAutoFocus")},disposeTimeout:{type:Number,default:Mn("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(e=>e.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var e;return(e=this[cm])==null?void 0:e.parentPopper},hasPopperShowTriggerHover(){var e,t;return((e=this.popperTriggers)==null?void 0:e.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(e){e?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((e,t)=>(e[t]="$_computePosition",e),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:e=null,skipDelay:t=!1,force:n=!1}={}){var s,a;(s=this.parentPopper)!=null&&s.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(n||!this.disabled)&&(((a=this.parentPopper)==null?void 0:a.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(e,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:e=null,skipDelay:t=!1}={}){var n;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((n=this.parentPopper)==null?void 0:n.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(e,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var e;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((e=this.referenceNode)==null?void 0:e.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(Pw({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?e.middleware.push(kw({alignment:this.placement.split("-")[1]??""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push(Bw({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(Lw({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push($w({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:s,rects:a,middlewareData:o})=>{let l;const{centerOffset:i}=o.arrow;return s.startsWith("top")||s.startsWith("bottom")?l=Math.abs(i)>a.reference.width/2:l=Math.abs(i)>a.reference.height/2,{data:{overflow:l}}}}),this.autoMinSize||this.autoSize){const s=this.autoSize?this.autoSize:this.autoMinSize?"min":null;e.middleware.push({name:"autoSize",fn:({rects:a,placement:o,middlewareData:l})=>{var i;if((i=l.autoSize)!=null&&i.skip)return{};let r,d;return o.startsWith("top")||o.startsWith("bottom")?r=a.reference.width:d=a.reference.height,this.$_innerNode.style[s==="min"?"minWidth":s==="max"?"maxWidth":"width"]=r!=null?`${r}px`:null,this.$_innerNode.style[s==="min"?"minHeight":s==="max"?"maxHeight":"height"]=d!=null?`${d}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,e.middleware.push(Fw({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:s,availableHeight:a})=>{this.$_innerNode.style.maxWidth=s!=null?`${s}px`:null,this.$_innerNode.style.maxHeight=a!=null?`${a}px`:null}})));const n=await Hw(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:n.x,y:n.y,placement:n.placement,strategy:n.strategy,arrow:{...n.middlewareData.arrow,...n.middlewareData.arrowOverflow}})},$_scheduleShow(e,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),si&&this.instantMove&&si.instantMove&&si!==this.parentPopper){si.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(e,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(si=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(e){const t=this.delay;return parseInt(t&&t[e]||t||0)},async $_applyShow(e=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=e,!this.isShown&&(this.$_ensureTeleport(),await rm(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...xu(this.$_referenceNode),...xu(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),n=this.$_popperNode.querySelector(".v-popper__wrapper"),s=n.parentNode.getBoundingClientRect(),a=t.x+t.width/2-(s.left+n.offsetLeft),o=t.y+t.height/2-(s.top+n.offsetTop);this.result.transformOrigin=`${a}px ${o}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const e=this.showGroup;if(e){let t;for(let n=0;n<go.length;n++)t=go[n],t.showGroup!==e&&(t.hide(),t.$emit("close-group"))}go.push(this),document.body.classList.add("v-popper--some-open");for(const t of Vv(this.theme))jv(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await rm(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(e=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=e,Kv(go,this),go.length===0&&document.body.classList.remove("v-popper--some-open");for(const n of Vv(this.theme)){const s=jv(n);Kv(s,this),s.length===0&&document.body.classList.remove(`v-popper--some-open--${n}`)}si===this&&(si=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await rm(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let e=this.container;if(typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=this.$_targetNodes[0].parentNode),!e)throw new Error("No container for popover: "+this.container);e.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const e=n=>{this.isShown&&!this.$_hideInProgress||(n.usedByTooltip=!0,!this.$_preventShow&&this.show({event:n}))};this.$_registerTriggerListeners(this.$_targetNodes,Hv,this.triggers,this.showTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],Hv,this.popperTriggers,this.popperShowTriggers,e);const t=n=>{n.usedByTooltip||this.hide({event:n})};this.$_registerTriggerListeners(this.$_targetNodes,Wv,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],Wv,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(e,t,n){this.$_events.push({targetNodes:e,eventType:t,handler:n}),e.forEach(s=>s.addEventListener(t,n,_r?{passive:!0}:void 0))},$_registerTriggerListeners(e,t,n,s,a){let o=n;s!=null&&(o=typeof s=="function"?s(o):s),o.forEach(l=>{const i=t[l];i&&this.$_registerEventListeners(e,i,a)})},$_removeEventListeners(e){const t=[];this.$_events.forEach(n=>{const{targetNodes:s,eventType:a,handler:o}=n;!e||e===a?s.forEach(l=>l.removeEventListener(a,o)):t.push(n)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(e,t=!1){this.$_showFrameLocked||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(e,t){for(const n of this.$_targetNodes){const s=n.getAttribute(e);s&&(n.removeAttribute(e),n.setAttribute(t,s))}},$_applyAttrsToTarget(e){for(const t of this.$_targetNodes)for(const n in e){const s=e[n];s==null?t.removeAttribute(n):t.setAttribute(n,s)}},$_updateParentShownChildren(e){let t=this.parentPopper;for(;t;)e?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const e=this.$_referenceNode.getBoundingClientRect();if(vc>=e.left&&vc<=e.right&&bc>=e.top&&bc<=e.bottom){const t=this.$_popperNode.getBoundingClientRect(),n=vc-Nl,s=bc-Ol,a=t.left+t.width/2-Nl+(t.top+t.height/2)-Ol+t.width+t.height,o=Nl+n*a,l=Ol+s*a;return Td(Nl,Ol,o,l,t.left,t.top,t.left,t.bottom)||Td(Nl,Ol,o,l,t.left,t.top,t.right,t.top)||Td(Nl,Ol,o,l,t.right,t.top,t.right,t.bottom)||Td(Nl,Ol,o,l,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(PT){const e=_r?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>Yv(t,!0),e),document.addEventListener("touchend",t=>Xv(t,!0),e)}else window.addEventListener("mousedown",e=>Yv(e,!1),!0),window.addEventListener("click",e=>Xv(e,!1),!0);window.addEventListener("resize",zw)}function Yv(e,t){if(Eo.autoHideOnMousedown)UT(e,t);else for(let n=0;n<go.length;n++){const s=go[n];try{s.mouseDownContains=s.popperNode().contains(e.target)}catch{}}}function Xv(e,t){Eo.autoHideOnMousedown||UT(e,t)}function UT(e,t){const n={};for(let s=go.length-1;s>=0;s--){const a=go[s];try{const o=a.containsGlobalTarget=a.mouseDownContains||a.popperNode().contains(e.target);a.pendingHide=!1,requestAnimationFrame(()=>{if(a.pendingHide=!1,!n[a.randomId]&&qv(a,o,e)){if(a.$_handleGlobalClose(e,t),!e.closeAllPopover&&e.closePopover&&o){let i=a.parentPopper;for(;i;)n[i.randomId]=!0,i=i.parentPopper;return}let l=a.parentPopper;for(;l&&qv(l,l.containsGlobalTarget,e);)l.$_handleGlobalClose(e,t),l=l.parentPopper}})}catch{}}}function qv(e,t,n){return n.closeAllPopover||n.closePopover&&t||Kw(e,n)&&!t}function Kw(e,t){if(typeof e.autoHide=="function"){const n=e.autoHide(t);return e.lastAutoHide=n,n}return e.autoHide}function zw(){for(let e=0;e<go.length;e++)go[e].$_computePosition()}let Nl=0,Ol=0,vc=0,bc=0;typeof window<"u"&&window.addEventListener("mousemove",e=>{Nl=vc,Ol=bc,vc=e.clientX,bc=e.clientY},_r?{passive:!0}:void 0);function Td(e,t,n,s,a,o,l,i){const r=((l-a)*(t-o)-(i-o)*(e-a))/((i-o)*(n-e)-(l-a)*(s-t)),d=((n-e)*(t-o)-(s-t)*(e-a))/((i-o)*(n-e)-(l-a)*(s-t));return r>=0&&r<=1&&d>=0&&d<=1}const jw={extends:FT()},lp=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n};function Yw(e,t,n,s,a,o){return p(),f("div",{ref:"reference",class:re(["v-popper",{"v-popper--shown":e.slotData.isShown}])},[at(e.$slots,"default",zE(jE(e.slotData)))],2)}const Xw=lp(jw,[["render",Yw]]);function qw(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}let su;function ff(){ff.init||(ff.init=!0,su=qw()!==-1)}var ip={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){ff(),jt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",su&&this.$el.appendChild(e),e.data="about:blank",su||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!su&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Zw=KE();HE("data-v-b329ee4c");const Qw={class:"resize-observer",tabindex:"-1"};WE();const Jw=Zw((e,t,n,s,a,o)=>(p(),V("div",Qw)));ip.render=Jw;ip.__scopeId="data-v-b329ee4c";ip.__file="src/components/ResizeObserver.vue";const GT=(e="theme")=>({computed:{themeClass(){return Ww(this[e])}}}),eR=el({name:"VPopperContent",components:{ResizeObserver:ip},mixins:[GT()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(e){return e!=null&&!isNaN(e)?`${e}px`:null}}}),tR=["id","aria-hidden","tabindex","data-popper-placement"],nR={ref:"inner",class:"v-popper__inner"},sR=c("div",{class:"v-popper__arrow-outer"},null,-1),aR=c("div",{class:"v-popper__arrow-inner"},null,-1),oR=[sR,aR];function lR(e,t,n,s,a,o){const l=z("ResizeObserver");return p(),f("div",{id:e.popperId,ref:"popover",class:re(["v-popper__popper",[e.themeClass,e.classes.popperClass,{"v-popper__popper--shown":e.shown,"v-popper__popper--hidden":!e.shown,"v-popper__popper--show-from":e.classes.showFrom,"v-popper__popper--show-to":e.classes.showTo,"v-popper__popper--hide-from":e.classes.hideFrom,"v-popper__popper--hide-to":e.classes.hideTo,"v-popper__popper--skip-transition":e.skipTransition,"v-popper__popper--arrow-overflow":e.result&&e.result.arrow.overflow,"v-popper__popper--no-positioning":!e.result}]]),style:Ct(e.result?{position:e.result.strategy,transform:`translate3d(${Math.round(e.result.x)}px,${Math.round(e.result.y)}px,0)`}:void 0),"aria-hidden":e.shown?"false":"true",tabindex:e.autoHide?0:void 0,"data-popper-placement":e.result?e.result.placement:void 0,onKeyup:t[2]||(t[2]=Hn(i=>e.autoHide&&e.$emit("hide"),["esc"]))},[c("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=i=>e.autoHide&&e.$emit("hide"))}),c("div",{class:"v-popper__wrapper",style:Ct(e.result?{transformOrigin:e.result.transformOrigin}:void 0)},[c("div",nR,[e.mounted?(p(),f(fe,{key:0},[c("div",null,[at(e.$slots,"default")]),e.handleResize?(p(),V(l,{key:0,onNotify:t[1]||(t[1]=i=>e.$emit("resize",i))})):O("",!0)],64)):O("",!0)],512),c("div",{ref:"arrow",class:"v-popper__arrow-container",style:Ct(e.result?{left:e.toPx(e.result.arrow.x),top:e.toPx(e.result.arrow.y)}:void 0)},oR,4)],4)],46,tR)}const VT=lp(eR,[["render",lR]]),HT={methods:{show(...e){return this.$refs.popper.show(...e)},hide(...e){return this.$refs.popper.hide(...e)},dispose(...e){return this.$refs.popper.dispose(...e)},onResize(...e){return this.$refs.popper.onResize(...e)}}};let gf=function(){};typeof window<"u"&&(gf=window.Element);const iR=el({name:"VPopperWrapper",components:{Popper:Xw,PopperContent:VT},mixins:[HT,GT("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,gf,Boolean],default:void 0},boundary:{type:[String,gf],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(e=>e!==this.$refs.popperContent.$el)}}});function rR(e,t,n,s,a,o){const l=z("PopperContent"),i=z("Popper");return p(),V(i,Bs({ref:"popper"},e.$props,{theme:e.finalTheme,"target-nodes":e.getTargetNodes,"popper-node":()=>e.$refs.popperContent.$el,class:[e.themeClass],onShow:t[0]||(t[0]=()=>e.$emit("show")),onHide:t[1]||(t[1]=()=>e.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=r=>e.$emit("update:shown",r)),onApplyShow:t[3]||(t[3]=()=>e.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>e.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>e.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>e.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>e.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>e.$emit("resize"))}),{default:K(({popperId:r,isShown:d,shouldMountContent:u,skipTransition:m,autoHide:h,show:_,hide:g,handleResize:T,onResize:S,classes:b,result:A})=>[at(e.$slots,"default",{shown:d,show:_,hide:g}),v(l,{ref:"popperContent","popper-id":r,theme:e.finalTheme,shown:d,mounted:u,"skip-transition":m,"auto-hide":h,"handle-resize":T,classes:b,result:A,onHide:g,onResize:S},{default:K(()=>[at(e.$slots,"popper",{shown:d,hide:g})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const xg=lp(iR,[["render",rR]]),cR={...xg,name:"VDropdown",vPopperTheme:"dropdown"},dR={...xg,name:"VMenu",vPopperTheme:"menu"},uR={...xg,name:"VTooltip",vPopperTheme:"tooltip"},pR=el({name:"VTooltipDirective",components:{Popper:FT(),PopperContent:VT},mixins:[HT],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:e=>Lc(e.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:e=>Lc(e.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(e){if(typeof this.content=="function"&&this.$_isShown&&(e||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,n=this.content(this);n.then?n.then(s=>this.onResult(t,s)):this.onResult(t,n)}},onResult(e,t){e===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),mR=["innerHTML"],hR=["textContent"];function fR(e,t,n,s,a,o){const l=z("PopperContent"),i=z("Popper");return p(),V(i,Bs({ref:"popper"},e.$attrs,{theme:e.theme,"target-nodes":e.targetNodes,"popper-node":()=>e.$refs.popperContent.$el,onApplyShow:e.onShow,onApplyHide:e.onHide}),{default:K(({popperId:r,isShown:d,shouldMountContent:u,skipTransition:m,autoHide:h,hide:_,handleResize:g,onResize:T,classes:S,result:b})=>[v(l,{ref:"popperContent",class:re({"v-popper--tooltip-loading":e.loading}),"popper-id":r,theme:e.theme,shown:d,mounted:u,"skip-transition":m,"auto-hide":h,"handle-resize":g,classes:S,result:b,onHide:_,onResize:T},{default:K(()=>[e.html?(p(),f("div",{key:0,innerHTML:e.finalContent},null,8,mR)):(p(),f("div",{key:1,textContent:E(e.finalContent)},null,8,hR))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const gR=lp(pR,[["render",fR]]),WT="v-popper--has-tooltip";function _R(e,t){let n=e.placement;if(!n&&t)for(const s of BT)t[s]&&(n=s);return n||(n=Lc(e.theme||"tooltip","placement")),n}function KT(e,t,n){let s;const a=typeof t;return a==="string"?s={content:t}:t&&a==="object"?s=t:s={content:!1},s.placement=_R(s,n),s.targetNodes=()=>[e],s.referenceNode=()=>e,s}let dm,Dc,vR=0;function bR(){if(dm)return;Dc=F([]),dm=VE({name:"VTooltipDirectiveApp",setup(){return{directives:Dc}},render(){return this.directives.map(t=>Wn(gR,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const e=document.createElement("div");document.body.appendChild(e),dm.mount(e)}function ER(e,t,n){bR();const s=F(KT(e,t,n)),a=F(!1),o={id:vR++,options:s,shown:a};return Dc.value.push(o),e.classList&&e.classList.add(WT),e.$_popper={options:s,item:o,show(){a.value=!0},hide(){a.value=!1}}}function zT(e){if(e.$_popper){const t=Dc.value.indexOf(e.$_popper.item);t!==-1&&Dc.value.splice(t,1),delete e.$_popper,delete e.$_popperOldShown,delete e.$_popperMountTarget}e.classList&&e.classList.remove(WT)}function Zv(e,{value:t,modifiers:n}){const s=KT(e,t,n);if(!s.content||Lc(s.theme||"tooltip","disabled"))zT(e);else{let a;e.$_popper?(a=e.$_popper,a.options.value=s):a=ER(e,t,n),typeof t.shown<"u"&&t.shown!==e.$_popperOldShown&&(e.$_popperOldShown=t.shown,t.shown?a.show():a.hide())}}const TR={beforeMount:Zv,updated:Zv,beforeUnmount(e){zT(e)}};function Qv(e){e.addEventListener("mousedown",Nu),e.addEventListener("click",Nu),e.addEventListener("touchstart",jT,_r?{passive:!0}:!1)}function Jv(e){e.removeEventListener("mousedown",Nu),e.removeEventListener("click",Nu),e.removeEventListener("touchstart",jT),e.removeEventListener("touchend",YT),e.removeEventListener("touchcancel",XT)}function Nu(e){const t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function jT(e){if(e.changedTouches.length===1){const t=e.currentTarget;t.$_vclosepopover_touch=!0;const n=e.changedTouches[0];t.$_vclosepopover_touchPoint=n,t.addEventListener("touchend",YT),t.addEventListener("touchcancel",XT)}}function YT(e){const t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){const n=e.changedTouches[0],s=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-s.screenY)<20&&Math.abs(n.screenX-s.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function XT(e){const t=e.currentTarget;t.$_vclosepopover_touch=!1}const AR={beforeMount(e,{value:t,modifiers:n}){e.$_closePopoverModifiers=n,(typeof t>"u"||t)&&Qv(e)},updated(e,{value:t,oldValue:n,modifiers:s}){e.$_closePopoverModifiers=s,t!==n&&(typeof t>"u"||t?Qv(e):Jv(e))},beforeUnmount(e){Jv(e)}};function yR(e,t={}){e.$_vTooltipInstalled||(e.$_vTooltipInstalled=!0,DT(Eo,t),e.directive("tooltip",TR),e.directive("close-popper",AR),e.component("VTooltip",uR),e.component("VDropdown",cR),e.component("VMenu",dR))}const SR={version:"5.2.2",install:yR,options:Eo};var um,eb;function IR(){if(eb)return um;eb=1;function e(t){const n=t.regex,s=n.concat(/[\p{L}_]/u,n.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),a=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},l={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=t.inherit(l,{begin:/\(/,end:/\)/}),r=t.inherit(t.APOS_STRING_MODE,{className:"string"}),d=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:a,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[l,d,r,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[l,i,d,r]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:n.concat(/</,n.lookahead(n.concat(s,n.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:s,relevance:0,starts:u}]},{className:"tag",begin:n.concat(/<\//,n.lookahead(n.concat(s,/>/))),contains:[{className:"name",begin:s,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return um=e,um}var pm,tb;function CR(){if(tb)return pm;tb=1;function e(t){const n=t.regex,s={},a={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[s]}]};Object.assign(s,{className:"variable",variants:[{begin:n.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},a]});const o={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},l=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},r={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,s,o]};o.contains.push(r);const d={match:/\\"/},u={className:"string",begin:/'/,end:/'/},m={match:/\\'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,s]},_=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=t.SHEBANG({binary:`(${_.join("|")})`,relevance:10}),T={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},S=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],b=["true","false"],A={match:/(\/[a-z._-]+)+/},y=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],x=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],$=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],N=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:S,literal:b,built_in:[...y,...x,"set","shopt",...$,...N]},contains:[g,t.SHEBANG(),T,h,l,i,A,r,d,u,m,s]}}return pm=e,pm}var mm,nb;function xR(){if(nb)return mm;nb=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),a="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",i="("+a+"|"+n.optional(o)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",r={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},m={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},_={className:"title",begin:n.optional(o)+t.IDENT_RE,relevance:0},g=n.optional(o)+t.IDENT_RE+"\\s*\\(",b={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},A=[h,r,s,t.C_BLOCK_COMMENT_MODE,m,u],y={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:b,contains:A.concat([{begin:/\(/,end:/\)/,keywords:b,contains:A.concat(["self"]),relevance:0}]),relevance:0},x={begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:b,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:a,keywords:b,relevance:0},{begin:g,returnBegin:!0,contains:[t.inherit(_,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:b,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,m,r,{begin:/\(/,end:/\)/,keywords:b,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,m,r]}]},r,s,t.C_BLOCK_COMMENT_MODE,h]};return{name:"C",aliases:["h"],keywords:b,disableAutodetect:!0,illegal:"</",contains:[].concat(y,x,A,[h,{begin:t.IDENT_RE+"::",keywords:b},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:h,strings:u,keywords:b}}}return mm=e,mm}var hm,sb;function NR(){if(sb)return hm;sb=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),a="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",i="(?!struct)("+a+"|"+n.optional(o)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",r={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},m={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},_={className:"title",begin:n.optional(o)+t.IDENT_RE,relevance:0},g=n.optional(o)+t.IDENT_RE+"\\s*\\(",T=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],S=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],b=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],A=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],$={type:S,keyword:T,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:b},N={className:"function.dispatch",relevance:0,keywords:{_hint:A},begin:n.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,n.lookahead(/(<[^<>]+>|)\s*\(/))},w=[N,h,r,s,t.C_BLOCK_COMMENT_MODE,m,u],D={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:$,contains:w.concat([{begin:/\(/,end:/\)/,keywords:$,contains:w.concat(["self"]),relevance:0}]),relevance:0},H={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:$,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:a,keywords:$,relevance:0},{begin:g,returnBegin:!0,contains:[_],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,m]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:$,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,m,r,{begin:/\(/,end:/\)/,keywords:$,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,m,r]}]},r,s,t.C_BLOCK_COMMENT_MODE,h]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:$,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(D,H,N,w,[h,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:$,contains:["self",r]},{begin:t.IDENT_RE+"::",keywords:$},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}return hm=e,hm}var fm,ab;function OR(){if(ab)return fm;ab=1;function e(t){const n=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],s=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],a=["default","false","null","true"],o=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],l=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],i={keyword:o.concat(l),built_in:n,literal:a},r=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},m={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},h=t.inherit(m,{illegal:/\n/}),_={className:"subst",begin:/\{/,end:/\}/,keywords:i},g=t.inherit(_,{illegal:/\n/}),T={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,g]},S={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},_]},b=t.inherit(S,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});_.contains=[S,T,m,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,t.C_BLOCK_COMMENT_MODE],g.contains=[b,T,h,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,d,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const A={variants:[u,S,T,m,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},y={begin:"<",end:">",contains:[{beginKeywords:"in out"},r]},x=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",$={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:i,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},A,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},r,y,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,y,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+x+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:i,contains:[{beginKeywords:s.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,y],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,relevance:0,contains:[A,d,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},$]}}return fm=e,fm}var gm,ob;function wR(){if(ob)return gm;ob=1;const e=d=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:d.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:d.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),l=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),i=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function r(d){const u=d.regex,m=e(d),h={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},_="and or not only",g=/@-?\w[\w]*(-\w+)*/,T="[a-zA-Z-][a-zA-Z0-9_-]*",S=[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[m.BLOCK_COMMENT,h,m.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+T,relevance:0},m.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+o.join("|")+")"},{begin:":(:)?("+l.join("|")+")"}]},m.CSS_VARIABLE,{className:"attribute",begin:"\\b("+i.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[m.BLOCK_COMMENT,m.HEXCOLOR,m.IMPORTANT,m.CSS_NUMBER_MODE,...S,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...S,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},m.FUNCTION_DISPATCH]},{begin:u.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:g},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:_,attribute:a.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...S,m.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b"}]}}return gm=r,gm}var _m,lb;function RR(){if(lb)return _m;lb=1;function e(t){const n=t.regex,s={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},a={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},l={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},r=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:n.concat(/\[.+?\]\(/,r,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},m={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},h=t.inherit(u,{contains:[]}),_=t.inherit(m,{contains:[]});u.contains.push(_),m.contains.push(h);let g=[s,d];return[u,m,h,_].forEach(A=>{A.contains=A.contains.concat(g)}),g=g.concat(u,m),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},s,l,u,m,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},o,a,d,i,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}return _m=e,_m}var vm,ib;function $R(){if(ib)return vm;ib=1;function e(t){const n=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:n.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:n.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}return vm=e,vm}var bm,rb;function MR(){if(rb)return bm;rb=1;function e(t){const n=t.regex,s="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",a=n.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),o=n.concat(a,/(::\w+)*/),i={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},r={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[r]}),t.COMMENT("^=begin","^=end",{contains:[r],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],m={className:"subst",begin:/#\{/,end:/\}/,keywords:i},h={className:"string",contains:[t.BACKSLASH_ESCAPE,m],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:n.concat(/<<[-~]?'?/,n.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,m]})]}]},_="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",T={className:"number",relevance:0,variants:[{begin:`\\b(${_})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},S={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:i}]},w=[h,{variants:[{match:[/class\s+/,o,/\s+<\s+/,o]},{match:[/\b(class|module)\s+/,o]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:i},{match:[/(include|extend)\s+/,o],scope:{2:"title.class"},keywords:i},{relevance:0,match:[o,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:a,scope:"title.class"},{match:[/def/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[S]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[h,{begin:s}],relevance:0},T,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:i},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,m],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,u),relevance:0}].concat(d,u);m.contains=w,S.contains=w;const k=[{begin:/^\s*=>/,starts:{end:"$",contains:w}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:i,contains:w}}];return u.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(k).concat(u).concat(w)}}return bm=e,bm}var Em,cb;function kR(){if(cb)return Em;cb=1;function e(t){const l={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:l,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:l,illegal:/["']/}]}]}}return Em=e,Em}var Tm,db;function LR(){if(db)return Tm;db=1;function e(t){const n=t.regex,s=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:n.concat(s,n.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}return Tm=e,Tm}var Am,ub;function DR(){if(ub)return Am;ub=1;function e(t){const n=t.regex,s={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},a=t.COMMENT();a.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const o={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},l={className:"literal",begin:/\bon|off|true|false|yes|no\b/},i={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},r={begin:/\[/,end:/\]/,contains:[a,l,o,i,s,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,m=/'[^']*'/,h=n.either(d,u,m),_=n.concat(h,"(\\s*\\.\\s*",h,")*",n.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[a,{className:"section",begin:/\[+/,end:/\]+/},{begin:_,className:"attr",starts:{end:/$/,contains:[a,r,l,o,i,s]}}]}}return Am=e,Am}var ym,pb;function PR(){if(pb)return ym;pb=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function a(l,i,r){return r===-1?"":l.replace(i,d=>a(l,i,r-1))}function o(l){const i=l.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",d=r+a("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),g={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},T={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},S={className:"params",begin:/\(/,end:/\)/,keywords:g,relevance:0,contains:[l.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:g,illegal:/<\/|#/,contains:[l.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},l.C_LINE_COMMENT_MODE,l.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[l.BACKSLASH_ESCAPE]},l.APOS_STRING_MODE,l.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[i.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[S,l.C_LINE_COMMENT_MODE,l.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+d+"\\s+)",l.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:g,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:g,relevance:0,contains:[T,l.APOS_STRING_MODE,l.QUOTE_STRING_MODE,s,l.C_BLOCK_COMMENT_MODE]},l.C_LINE_COMMENT_MODE,l.C_BLOCK_COMMENT_MODE]},s,T]}}return ym=o,ym}var Sm,mb;function BR(){if(mb)return Sm;mb=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],a=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],l=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],i=[].concat(o,s,a);function r(d){const u=d.regex,m=(ne,{after:J})=>{const ue="</"+ne[0].slice(1);return ne.input.indexOf(ue,J)!==-1},h=e,_={begin:"<>",end:"</>"},g=/<[A-Za-z0-9\\._:-]+\s*\/>/,T={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ne,J)=>{const ue=ne[0].length+ne.index,Ne=ne.input[ue];if(Ne==="<"||Ne===","){J.ignoreMatch();return}Ne===">"&&(m(ne,{after:ue})||J.ignoreMatch());let Re;const Ze=ne.input.substring(ue);if(Re=Ze.match(/^\s*=/)){J.ignoreMatch();return}if((Re=Ze.match(/^\s+extends\s+/))&&Re.index===0){J.ignoreMatch();return}}},S={$pattern:e,keyword:t,literal:n,built_in:i,"variable.language":l},b="[0-9](_?[0-9])*",A=`\\.(${b})`,y="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",x={className:"number",variants:[{begin:`(\\b(${y})((${A})|\\.)?|(${A}))[eE][+-]?(${b})\\b`},{begin:`\\b(${y})\\b((${A})\\b|\\.)?|(${A})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},$={className:"subst",begin:"\\$\\{",end:"\\}",keywords:S,contains:[]},N={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,$],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,$],subLanguage:"css"}},D={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[d.BACKSLASH_ESCAPE,$],subLanguage:"graphql"}},H={className:"string",begin:"`",end:"`",contains:[d.BACKSLASH_ESCAPE,$]},k={className:"comment",variants:[d.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:h+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),d.C_BLOCK_COMMENT_MODE,d.C_LINE_COMMENT_MODE]},U=[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE,N,w,D,H,{match:/\$\d+/},x];$.contains=U.concat({begin:/\{/,end:/\}/,keywords:S,contains:["self"].concat(U)});const G=[].concat(k,$.contains),L=G.concat([{begin:/(\s*)\(/,end:/\)/,keywords:S,contains:["self"].concat(G)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:S,contains:L},R={variants:[{match:[/class/,/\s+/,h,/\s+/,/extends/,/\s+/,u.concat(h,"(",u.concat(/\./,h),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,h],scope:{1:"keyword",3:"title.class"}}]},P={relevance:0,match:u.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...a]}},W={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Q={variants:[{match:[/function/,/\s+/,h,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},Z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function j(ne){return u.concat("(?!",ne.join("|"),")")}const X={match:u.concat(/\b/,j([...o,"super","import"].map(ne=>`${ne}\\s*\\(`)),h,u.lookahead(/\s*\(/)),className:"title.function",relevance:0},q={begin:u.concat(/\./,u.lookahead(u.concat(h,/(?![0-9A-Za-z$_(])/))),end:h,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},se={match:[/get|set/,/\s+/,h,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},he="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+d.UNDERSCORE_IDENT_RE+")\\s*=>",be={match:[/const|var|let/,/\s+/,h,/\s*/,/=\s*/,/(async\s*)?/,u.lookahead(he)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:S,exports:{PARAMS_CONTAINS:L,CLASS_REFERENCE:P},illegal:/#(?![$_A-z])/,contains:[d.SHEBANG({label:"shebang",binary:"node",relevance:5}),W,d.APOS_STRING_MODE,d.QUOTE_STRING_MODE,N,w,D,H,k,{match:/\$\d+/},x,P,{className:"attr",begin:h+u.lookahead(":"),relevance:0},be,{begin:"("+d.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[k,d.REGEXP_MODE,{className:"function",begin:he,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:d.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:S,contains:L}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:_.begin,end:_.end},{match:g},{begin:T.begin,"on:begin":T.isTrulyOpeningTag,end:T.end}],subLanguage:"xml",contains:[{begin:T.begin,end:T.end,skip:!0,contains:["self"]}]}]},Q,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+d.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,d.inherit(d.TITLE_MODE,{begin:h,className:"title.function"})]},{match:/\.\.\./,relevance:0},q,{match:"\\$"+h,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},X,Z,R,se,{match:/\$[(.]/}]}}return Sm=r,Sm}var Im,hb;function FR(){if(hb)return Im;hb=1;function e(t){const n={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},s={match:/[{}[\],:]/,className:"punctuation",relevance:0},a=["true","false","null"],o={scope:"literal",beginKeywords:a.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:a},contains:[n,s,t.QUOTE_STRING_MODE,o,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}return Im=e,Im}var Cm,fb;function UR(){if(fb)return Cm;fb=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function a(o){const l={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},i={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:o.UNDERSCORE_IDENT_RE+"@"},d={className:"subst",begin:/\$\{/,end:/\}/,contains:[o.C_NUMBER_MODE]},u={className:"variable",begin:"\\$"+o.UNDERSCORE_IDENT_RE},m={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[u,d]},{begin:"'",end:"'",illegal:/\n/,contains:[o.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[o.BACKSLASH_ESCAPE,u,d]}]};d.contains.push(m);const h={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+o.UNDERSCORE_IDENT_RE+")?"},_={className:"meta",begin:"@"+o.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[o.inherit(m,{className:"string"}),"self"]}]},g=s,T=o.COMMENT("/\\*","\\*/",{contains:[o.C_BLOCK_COMMENT_MODE]}),S={variants:[{className:"type",begin:o.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},b=S;return b.variants[1].contains=[S],S.variants[1].contains=[b],{name:"Kotlin",aliases:["kt","kts"],keywords:l,contains:[o.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),o.C_LINE_COMMENT_MODE,T,i,r,h,_,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:l,relevance:5,contains:[{begin:o.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[o.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:l,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[S,o.C_LINE_COMMENT_MODE,T],relevance:0},o.C_LINE_COMMENT_MODE,T,h,_,m,o.C_NUMBER_MODE]},T]},{begin:[/class|interface|trait/,/\s+/,o.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},o.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},h,_]},m,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},g]}}return Cm=a,Cm}var xm,gb;function GR(){if(gb)return xm;gb=1;const e=u=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:u.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:u.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),l=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),i=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse(),r=o.concat(l).sort().reverse();function d(u){const m=e(u),h=r,_="and or not only",g="[\\w-]+",T="("+g+"|@\\{"+g+"\\})",S=[],b=[],A=function(G){return{className:"string",begin:"~?"+G+".*?"+G}},y=function(G,L,M){return{className:G,begin:L,relevance:M}},x={$pattern:/[a-z-]+/,keyword:_,attribute:a.join(" ")},$={begin:"\\(",end:"\\)",contains:b,keywords:x,relevance:0};b.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,A("'"),A('"'),m.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},m.HEXCOLOR,$,y("variable","@@?"+g,10),y("variable","@\\{"+g+"\\}"),y("built_in","~?`[^`]*?`"),{className:"attribute",begin:g+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},m.IMPORTANT,{beginKeywords:"and not"},m.FUNCTION_DISPATCH);const N=b.concat({begin:/\{/,end:/\}/,contains:S}),w={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(b)},D={begin:T+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},m.CSS_VARIABLE,{className:"attribute",begin:"\\b("+i.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:b}}]},H={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:x,returnEnd:!0,contains:b,relevance:0}},B={className:"variable",variants:[{begin:"@"+g+"\\s*:",relevance:15},{begin:"@"+g}],starts:{end:"[;}]",returnEnd:!0,contains:N}},k={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:T,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,w,y("keyword","all\\b"),y("variable","@\\{"+g+"\\}"),{begin:"\\b("+s.join("|")+")\\b",className:"selector-tag"},m.CSS_NUMBER_MODE,y("selector-tag",T,0),y("selector-id","#"+T),y("selector-class","\\."+T,0),y("selector-tag","&",0),m.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+o.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+l.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:N},{begin:"!important"},m.FUNCTION_DISPATCH]},U={begin:g+`:(:)?(${h.join("|")})`,returnBegin:!0,contains:[k]};return S.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,H,B,U,D,k,w,m.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:S}}return xm=d,xm}var Nm,_b;function VR(){if(_b)return Nm;_b=1;function e(t){const n="\\[=*\\[",s="\\]=*\\]",a={begin:n,end:s,contains:["self"]},o=[t.COMMENT("--(?!"+n+")","$"),t.COMMENT("--"+n,s,{contains:[a],relevance:10})];return{name:"Lua",keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:o}].concat(o)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:n,end:s,contains:[a],relevance:5}])}}return Nm=e,Nm}var Om,vb;function HR(){if(vb)return Om;vb=1;function e(t){const n={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},s={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n]},a={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[n]},o={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},l={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},i={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[n]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,n,s,a,o,l,i]}}return Om=e,Om}var wm,bb;function WR(){if(bb)return wm;bb=1;function e(t){const n=t.regex,s=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],a=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:s.join(" ")},l={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},i={begin:/->\{/,end:/\}/},r={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:n.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[r]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},m=[t.BACKSLASH_ESCAPE,l,d],h=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],_=(S,b,A="\\1")=>{const y=A==="\\1"?A:n.concat(A,b);return n.concat(n.concat("(?:",S,")"),b,/(?:\\.|[^\\\/])*?/,y,/(?:\\.|[^\\\/])*?/,A,a)},g=(S,b,A)=>n.concat(n.concat("(?:",S,")"),b,/(?:\\.|[^\\\/])*?/,A,a),T=[d,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:m,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:_("s|tr|y",n.either(...h,{capture:!0}))},{begin:_("s|tr|y","\\(","\\)")},{begin:_("s|tr|y","\\[","\\]")},{begin:_("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",n.either(...h,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,r]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,r,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return l.contains=T,i.contains=T,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:T}}return wm=e,wm}var Rm,Eb;function KR(){if(Eb)return Rm;Eb=1;function e(t){const n={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},s=/[a-zA-Z@][a-zA-Z0-9_]*/,r={"variable.language":["this","super"],$pattern:s,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:s,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:r,illegal:"</",contains:[n,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}return Rm=e,Rm}var $m,Tb;function zR(){if(Tb)return $m;Tb=1;function e(t){const n=t.regex,s=/(?![A-Za-z0-9])(?![$])/,a=n.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,s),o=n.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,s),l={scope:"variable",match:"\\$+"+a},i={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},r={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},d=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(r)}),m={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(r),"on:begin":(L,M)=>{M.data._beginMatch=L[1]||L[2]},"on:end":(L,M)=>{M.data._beginMatch!==L[1]&&M.ignoreMatch()}},h=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),_=`[ 	
]`,g={scope:"string",variants:[u,d,m,h]},T={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},S=["false","null","true"],b=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],A=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],x={keyword:b,literal:(L=>{const M=[];return L.forEach(R=>{M.push(R),R.toLowerCase()===R?M.push(R.toUpperCase()):M.push(R.toLowerCase())}),M})(S),built_in:A},$=L=>L.map(M=>M.replace(/\|\d+$/,"")),N={variants:[{match:[/new/,n.concat(_,"+"),n.concat("(?!",$(A).join("\\b|"),"\\b)"),o],scope:{1:"keyword",4:"title.class"}}]},w=n.concat(a,"\\b(?!\\()"),D={variants:[{match:[n.concat(/::/,n.lookahead(/(?!class\b)/)),w],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[o,n.concat(/::/,n.lookahead(/(?!class\b)/)),w],scope:{1:"title.class",3:"variable.constant"}},{match:[o,n.concat("::",n.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[o,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},H={scope:"attr",match:n.concat(a,n.lookahead(":"),n.lookahead(/(?!::)/))},B={relevance:0,begin:/\(/,end:/\)/,keywords:x,contains:[H,l,D,t.C_BLOCK_COMMENT_MODE,g,T,N]},k={relevance:0,match:[/\b/,n.concat("(?!fn\\b|function\\b|",$(b).join("\\b|"),"|",$(A).join("\\b|"),"\\b)"),a,n.concat(_,"*"),n.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[B]};B.contains.push(k);const U=[H,D,t.C_BLOCK_COMMENT_MODE,g,T,N],G={begin:n.concat(/#\[\s*/,o),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:S,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:S,keyword:["new","array"]},contains:["self",...U]},...U,{scope:"meta",match:o}]};return{case_insensitive:!1,keywords:x,contains:[G,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},i,{scope:"variable.language",match:/\$this\b/},l,k,D,{match:[/const/,/\s/,a],scope:{1:"keyword",3:"variable.constant"}},N,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:x,contains:["self",l,D,t.C_BLOCK_COMMENT_MODE,g,T]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},g,T]}}return $m=e,$m}var Mm,Ab;function jR(){if(Ab)return Mm;Ab=1;function e(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}return Mm=e,Mm}var km,yb;function YR(){if(yb)return km;yb=1;function e(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return km=e,km}var Lm,Sb;function XR(){if(Sb)return Lm;Sb=1;function e(t){const n=t.regex,s=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),a=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:a,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},m={begin:/\{\{/,relevance:0},h={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,d,m,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,d,m,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,m,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,m,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},_="[0-9](_?[0-9])*",g=`(\\b(${_}))?\\.(${_})|\\b(${_})\\.`,T=`\\b|${a.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${_})|(${g}))[eE][+-]?(${_})[jJ]?(?=${T})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${T})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${T})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${T})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${T})`},{begin:`\\b(${_})[jJ](?=${T})`}]},b={className:"comment",begin:n.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},A={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",d,S,h,t.HASH_COMMENT_MODE]}]};return u.contains=[h,S,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|\?)|=>/,contains:[d,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},h,b,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[A]},{variants:[{match:[/\bclass/,/\s+/,s,/\s*/,/\(\s*/,s,/\s*\)/]},{match:[/\bclass/,/\s+/,s]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,A,h]}]}}return Lm=e,Lm}var Dm,Ib;function qR(){if(Ib)return Dm;Ib=1;function e(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}return Dm=e,Dm}var Pm,Cb;function ZR(){if(Cb)return Pm;Cb=1;function e(t){const n=t.regex,s=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,a=n.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),o=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,l=n.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:s,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:n.lookahead(n.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:s},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[o,a]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,a]},{scope:{1:"punctuation",2:"number"},match:[l,a]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,a]}]},{scope:{3:"operator"},match:[s,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:o},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:l},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}return Pm=e,Pm}var Bm,xb;function QR(){if(xb)return Bm;xb=1;function e(t){const n=t.regex,s=/(r#)?/,a=n.concat(s,t.UNDERSCORE_IDENT_RE),o=n.concat(s,t.IDENT_RE),l={className:"title.function.invoke",relevance:0,begin:n.concat(/\b/,/(?!let|for|while|if|else|match\b)/,o,n.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",r=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],m=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:m,keyword:r,literal:d,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,a],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,a],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,a,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,a],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,a],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:m}},{className:"punctuation",begin:"->"},l]}}return Bm=e,Bm}var Fm,Nb;function JR(){if(Nb)return Fm;Nb=1;const e=d=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:d.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[d.APOS_STRING_MODE,d.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:d.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),l=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),i=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function r(d){const u=e(d),m=l,h=o,_="@[a-z-]+",g="and or not only",S={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[d.C_LINE_COMMENT_MODE,d.C_BLOCK_COMMENT_MODE,u.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+h.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+m.join("|")+")"},S,{begin:/\(/,end:/\)/,contains:[u.CSS_NUMBER_MODE]},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+i.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[u.BLOCK_COMMENT,S,u.HEXCOLOR,u.CSS_NUMBER_MODE,d.QUOTE_STRING_MODE,d.APOS_STRING_MODE,u.IMPORTANT,u.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:_,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:g,attribute:a.join(" ")},contains:[{begin:_,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},S,d.QUOTE_STRING_MODE,d.APOS_STRING_MODE,u.HEXCOLOR,u.CSS_NUMBER_MODE]},u.FUNCTION_DISPATCH]}}return Fm=r,Fm}var Um,Ob;function e$(){if(Ob)return Um;Ob=1;function e(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}return Um=e,Um}var Gm,wb;function t$(){if(wb)return Gm;wb=1;function e(t){const n=t.regex,s=t.COMMENT("--","$"),a={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},o={begin:/"/,end:/"/,contains:[{begin:/""/}]},l=["true","false","unknown"],i=["double precision","large object","with timezone","without timezone"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],m=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],h=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],_=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=m,T=[...u,...d].filter(x=>!m.includes(x)),S={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},b={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},A={begin:n.concat(/\b/,n.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function y(x,{exceptions:$,when:N}={}){const w=N;return $=$||[],x.map(D=>D.match(/\|\d+$/)||$.includes(D)?D:w(D)?`${D}|0`:D)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:y(T,{when:x=>x.length<3}),literal:l,type:r,built_in:h},contains:[{begin:n.either(..._),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:T.concat(_),literal:l,type:r}},{className:"type",begin:n.either(...i)},A,S,a,o,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,s,b]}}return Gm=e,Gm}var Vm,Rb;function n$(){if(Rb)return Vm;Rb=1;function e(D){return D?typeof D=="string"?D:D.source:null}function t(D){return n("(?=",D,")")}function n(...D){return D.map(B=>e(B)).join("")}function s(D){const H=D[D.length-1];return typeof H=="object"&&H.constructor===Object?(D.splice(D.length-1,1),H):{}}function a(...D){return"("+(s(D).capture?"":"?:")+D.map(k=>e(k)).join("|")+")"}const o=D=>n(/\b/,D,/\w$/.test(D)?/\b/:/\B/),l=["Protocol","Type"].map(o),i=["init","self"].map(o),r=["Any","Self"],d=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],u=["false","nil","true"],m=["assignment","associativity","higherThan","left","lowerThan","none","right"],h=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],_=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],g=a(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),T=a(g,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),S=n(g,T,"*"),b=a(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),A=a(b,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),y=n(b,A,"*"),x=n(/[A-Z]/,A,"*"),$=["attached","autoclosure",n(/convention\(/,a("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",n(/objc\(/,y,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],N=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function w(D){const H={match:/\s+/,relevance:0},B=D.COMMENT("/\\*","\\*/",{contains:["self"]}),k=[D.C_LINE_COMMENT_MODE,B],U={match:[/\./,a(...l,...i)],className:{2:"keyword"}},G={match:n(/\./,a(...d)),relevance:0},L=d.filter(Ie=>typeof Ie=="string").concat(["_|0"]),M=d.filter(Ie=>typeof Ie!="string").concat(r).map(o),R={variants:[{className:"keyword",match:a(...M,...i)}]},P={$pattern:a(/\b\w+/,/#\w+/),keyword:L.concat(h),literal:u},W=[U,G,R],Q={match:n(/\./,a(..._)),relevance:0},Z={className:"built_in",match:n(/\b/,a(..._),/(?=\()/)},j=[Q,Z],X={match:/->/,relevance:0},q={className:"operator",relevance:0,variants:[{match:S},{match:`\\.(\\.|${T})+`}]},se=[X,q],he="([0-9]_*)+",be="([0-9a-fA-F]_*)+",ne={className:"number",relevance:0,variants:[{match:`\\b(${he})(\\.(${he}))?([eE][+-]?(${he}))?\\b`},{match:`\\b0x(${be})(\\.(${be}))?([pP][+-]?(${he}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},J=(Ie="")=>({className:"subst",variants:[{match:n(/\\/,Ie,/[0\\tnr"']/)},{match:n(/\\/,Ie,/u\{[0-9a-fA-F]{1,8}\}/)}]}),ue=(Ie="")=>({className:"subst",match:n(/\\/,Ie,/[\t ]*(?:[\r\n]|\r\n)/)}),Ne=(Ie="")=>({className:"subst",label:"interpol",begin:n(/\\/,Ie,/\(/),end:/\)/}),Re=(Ie="")=>({begin:n(Ie,/"""/),end:n(/"""/,Ie),contains:[J(Ie),ue(Ie),Ne(Ie)]}),Ze=(Ie="")=>({begin:n(Ie,/"/),end:n(/"/,Ie),contains:[J(Ie),Ne(Ie)]}),Xe={className:"string",variants:[Re(),Re("#"),Re("##"),Re("###"),Ze(),Ze("#"),Ze("##"),Ze("###")]},Qe=[D.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[D.BACKSLASH_ESCAPE]}],Je={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:Qe},st=Ie=>{const Oe=n(Ie,/\//),we=n(/\//,Ie);return{begin:Oe,end:we,contains:[...Qe,{scope:"comment",begin:`#(?!.*${we})`,end:/$/}]}},ht={scope:"regexp",variants:[st("###"),st("##"),st("#"),Je]},wt={match:n(/`/,y,/`/)},ee={className:"variable",match:/\$\d+/},de={className:"variable",match:`\\$${A}+`},ie=[wt,ee,de],Ce={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:N,contains:[...se,ne,Xe]}]}},Se={scope:"keyword",match:n(/@/,a(...$),t(a(/\(/,/\s+/)))},je={scope:"meta",match:n(/@/,y)},Ke=[Ce,Se,je],$e={match:t(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:n(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,A,"+")},{className:"type",match:x,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:n(/\s+&\s+/,t(x)),relevance:0}]},Be={begin:/</,end:/>/,keywords:P,contains:[...k,...W,...Ke,X,$e]};$e.contains.push(Be);const Ue={match:n(y,/\s*:/),keywords:"_|0",relevance:0},ge={begin:/\(/,end:/\)/,relevance:0,keywords:P,contains:["self",Ue,...k,ht,...W,...j,...se,ne,Xe,...ie,...Ke,$e]},ae={begin:/</,end:/>/,keywords:"repeat each",contains:[...k,$e]},ve={begin:a(t(n(y,/\s*:/)),t(n(y,/\s+/,y,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:y}]},Y={begin:/\(/,end:/\)/,keywords:P,contains:[ve,...k,...W,...se,ne,Xe,...Ke,$e,ge],endsParent:!0,illegal:/["']/},oe={match:[/(func|macro)/,/\s+/,a(wt.match,y,S)],className:{1:"keyword",3:"title.function"},contains:[ae,Y,H],illegal:[/\[/,/%/]},te={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ae,Y,H],illegal:/\[|%/},le={match:[/operator/,/\s+/,S],className:{1:"keyword",3:"title"}},ye={begin:[/precedencegroup/,/\s+/,x],className:{1:"keyword",3:"title"},contains:[$e],keywords:[...m,...u],end:/}/},me={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,y,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:P,contains:[ae,...W,{begin:/:/,end:/\{/,keywords:P,contains:[{scope:"title.class.inherited",match:x},...W],relevance:0}]};for(const Ie of Xe.variants){const Oe=Ie.contains.find(Ye=>Ye.label==="interpol");Oe.keywords=P;const we=[...W,...j,...se,ne,Xe,...ie];Oe.contains=[...we,{begin:/\(/,end:/\)/,contains:["self",...we]}]}return{name:"Swift",keywords:P,contains:[...k,oe,te,me,le,ye,{beginKeywords:"import",end:/$/,contains:[...k],relevance:0},ht,...W,...j,...se,ne,Xe,...ie,...Ke,$e,ge]}}return Vm=w,Vm}var Hm,$b;function s$(){if($b)return Hm;$b=1;function e(t){const n="true false yes no null",s="[\\w#;/?:@&=+$,.~*'()[\\]]+",a={className:"attr",variants:[{begin:/\w[\w :()\./-]*:(?=[ \t]|$)/},{begin:/"\w[\w :()\./-]*":(?=[ \t]|$)/},{begin:/'\w[\w :()\./-]*':(?=[ \t]|$)/}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},l={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},i=t.inherit(l,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},_={end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},g={begin:/\{/,end:/\}/,contains:[_],illegal:"\\n",relevance:0},T={begin:"\\[",end:"\\]",contains:[_],illegal:"\\n",relevance:0},S=[a,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+s},{className:"type",begin:"!<"+s+">"},{className:"type",begin:"!"+s},{className:"type",begin:"!!"+s},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},h,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},g,T,l],b=[...S];return b.pop(),b.push(i),_.contains=b,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:S}}return Hm=e,Hm}var Wm,Mb;function a$(){if(Mb)return Wm;Mb=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],a=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],l=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],i=[].concat(o,s,a);function r(u){const m=u.regex,h=(J,{after:ue})=>{const Ne="</"+J[0].slice(1);return J.input.indexOf(Ne,ue)!==-1},_=e,g={begin:"<>",end:"</>"},T=/<[A-Za-z0-9\\._:-]+\s*\/>/,S={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(J,ue)=>{const Ne=J[0].length+J.index,Re=J.input[Ne];if(Re==="<"||Re===","){ue.ignoreMatch();return}Re===">"&&(h(J,{after:Ne})||ue.ignoreMatch());let Ze;const Xe=J.input.substring(Ne);if(Ze=Xe.match(/^\s*=/)){ue.ignoreMatch();return}if((Ze=Xe.match(/^\s+extends\s+/))&&Ze.index===0){ue.ignoreMatch();return}}},b={$pattern:e,keyword:t,literal:n,built_in:i,"variable.language":l},A="[0-9](_?[0-9])*",y=`\\.(${A})`,x="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",$={className:"number",variants:[{begin:`(\\b(${x})((${y})|\\.)?|(${y}))[eE][+-]?(${A})\\b`},{begin:`\\b(${x})\\b((${y})\\b|\\.)?|(${y})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},N={className:"subst",begin:"\\$\\{",end:"\\}",keywords:b,contains:[]},w={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,N],subLanguage:"xml"}},D={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,N],subLanguage:"css"}},H={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,N],subLanguage:"graphql"}},B={className:"string",begin:"`",end:"`",contains:[u.BACKSLASH_ESCAPE,N]},U={className:"comment",variants:[u.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:_+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),u.C_BLOCK_COMMENT_MODE,u.C_LINE_COMMENT_MODE]},G=[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,w,D,H,B,{match:/\$\d+/},$];N.contains=G.concat({begin:/\{/,end:/\}/,keywords:b,contains:["self"].concat(G)});const L=[].concat(U,N.contains),M=L.concat([{begin:/(\s*)\(/,end:/\)/,keywords:b,contains:["self"].concat(L)}]),R={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:b,contains:M},P={variants:[{match:[/class/,/\s+/,_,/\s+/,/extends/,/\s+/,m.concat(_,"(",m.concat(/\./,_),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,_],scope:{1:"keyword",3:"title.class"}}]},W={relevance:0,match:m.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...a]}},Q={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Z={variants:[{match:[/function/,/\s+/,_,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[R],illegal:/%/},j={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function X(J){return m.concat("(?!",J.join("|"),")")}const q={match:m.concat(/\b/,X([...o,"super","import"].map(J=>`${J}\\s*\\(`)),_,m.lookahead(/\s*\(/)),className:"title.function",relevance:0},se={begin:m.concat(/\./,m.lookahead(m.concat(_,/(?![0-9A-Za-z$_(])/))),end:_,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},he={match:[/get|set/,/\s+/,_,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},R]},be="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+u.UNDERSCORE_IDENT_RE+")\\s*=>",ne={match:[/const|var|let/,/\s+/,_,/\s*/,/=\s*/,/(async\s*)?/,m.lookahead(be)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[R]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:b,exports:{PARAMS_CONTAINS:M,CLASS_REFERENCE:W},illegal:/#(?![$_A-z])/,contains:[u.SHEBANG({label:"shebang",binary:"node",relevance:5}),Q,u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,w,D,H,B,U,{match:/\$\d+/},$,W,{className:"attr",begin:_+m.lookahead(":"),relevance:0},ne,{begin:"("+u.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[U,u.REGEXP_MODE,{className:"function",begin:be,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:u.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:b,contains:M}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:g.begin,end:g.end},{match:T},{begin:S.begin,"on:begin":S.isTrulyOpeningTag,end:S.end}],subLanguage:"xml",contains:[{begin:S.begin,end:S.end,skip:!0,contains:["self"]}]}]},Z,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+u.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[R,u.inherit(u.TITLE_MODE,{begin:_,className:"title.function"})]},{match:/\.\.\./,relevance:0},se,{match:"\\$"+_,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[R]},q,j,P,he,{match:/\$[(.]/}]}}function d(u){const m=r(u),h=e,_=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],g={begin:[/namespace/,/\s+/,u.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},T={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:_},contains:[m.exports.CLASS_REFERENCE]},S={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},b=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],A={$pattern:e,keyword:t.concat(b),literal:n,built_in:i.concat(_),"variable.language":l},y={className:"meta",begin:"@"+h},x=(w,D,H)=>{const B=w.contains.findIndex(k=>k.label===D);if(B===-1)throw new Error("can not find mode to replace");w.contains.splice(B,1,H)};Object.assign(m.keywords,A),m.exports.PARAMS_CONTAINS.push(y);const $=m.contains.find(w=>w.className==="attr");m.exports.PARAMS_CONTAINS.push([m.exports.CLASS_REFERENCE,$]),m.contains=m.contains.concat([y,g,T]),x(m,"shebang",u.SHEBANG()),x(m,"use_strict",S);const N=m.contains.find(w=>w.label==="func.def");return N.relevance=0,Object.assign(m,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),m}return Wm=d,Wm}var Km,kb;function o$(){if(kb)return Km;kb=1;function e(t){const n=t.regex,s={className:"string",begin:/"(""|[^/n])"C\b/},a={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o=/\d{1,2}\/\d{1,2}\/\d{4}/,l=/\d{4}-\d{1,2}-\d{1,2}/,i=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,r=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:n.concat(/# */,n.either(l,o),/ *#/)},{begin:n.concat(/# */,r,/ *#/)},{begin:n.concat(/# */,i,/ *#/)},{begin:n.concat(/# */,n.either(l,o),/ +/,n.either(i,r),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},m={className:"label",begin:/^\w+:/},h=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),_=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[s,a,d,u,m,h,_,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[_]}]}}return Km=e,Km}var zm,Lb;function l$(){if(Lb)return zm;Lb=1;function e(t){t.regex;const n=t.COMMENT(/\(;/,/;\)/);n.contains.push("self");const s=t.COMMENT(/;;/,/$/),a=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],o={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},l={className:"variable",begin:/\$[\w_]+/},i={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},r={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:a},contains:[s,n,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},l,i,o,t.QUOTE_STRING_MODE,d,u,r]}}return zm=e,zm}var bn=AT;bn.registerLanguage("xml",IR());bn.registerLanguage("bash",CR());bn.registerLanguage("c",xR());bn.registerLanguage("cpp",NR());bn.registerLanguage("csharp",OR());bn.registerLanguage("css",wR());bn.registerLanguage("markdown",RR());bn.registerLanguage("diff",$R());bn.registerLanguage("ruby",MR());bn.registerLanguage("go",kR());bn.registerLanguage("graphql",LR());bn.registerLanguage("ini",DR());bn.registerLanguage("java",PR());bn.registerLanguage("javascript",BR());bn.registerLanguage("json",FR());bn.registerLanguage("kotlin",UR());bn.registerLanguage("less",GR());bn.registerLanguage("lua",VR());bn.registerLanguage("makefile",HR());bn.registerLanguage("perl",WR());bn.registerLanguage("objectivec",KR());bn.registerLanguage("php",zR());bn.registerLanguage("php-template",jR());bn.registerLanguage("plaintext",YR());bn.registerLanguage("python",XR());bn.registerLanguage("python-repl",qR());bn.registerLanguage("r",ZR());bn.registerLanguage("rust",QR());bn.registerLanguage("scss",JR());bn.registerLanguage("shell",e$());bn.registerLanguage("sql",t$());bn.registerLanguage("swift",n$());bn.registerLanguage("yaml",s$());bn.registerLanguage("typescript",a$());bn.registerLanguage("vbnet",o$());bn.registerLanguage("wasm",l$());bn.HighlightJS=bn;bn.default=bn;const qo=async e=>{try{await navigator.clipboard.writeText(e)}catch(t){throw new Error(`Unable to copy text to clipboard: ${t.message}`)}},i$={class:"relative text-left"},r$={class:"top-1.5 absolute ltr:right-1.5 rtl:left-1.5 flex backdrop-blur-sm rounded-lg items-center gap-1"},c$={key:0,class:"flex items-center",action:"https://codepen.io/pen/define",method:"POST",target:"_blank"},d$=["value"],u$={__name:"Code",props:{script:{type:String,default:""},lang:{type:String,default:"javascript"},enableCodePen:{type:Boolean,default:!1},codepenTitle:{type:String,default:"Chatwoot Codepen"}},setup(e){const t=e,{t:n}=Pe(),s=C(()=>{const i=t.script.replace(/^\s*[\r\n]/gm,"").split(`
`),r=i.reduce((d,u)=>{if(u.trim().length===0)return d;const m=u.match(/^\s*/)[0].length;return Math.min(d,m)},1/0);return i.map(d=>d.slice(r)).join(`
`)}),a=C(()=>{const l=t.lang==="javascript"?"js":t.lang;return JSON.stringify({title:t.codepenTitle,private:!0,[l]:s.value})}),o=async l=>{l.preventDefault(),await qo(s.value),_e(n("COMPONENTS.CODE.COPY_SUCCESSFUL"))};return(l,i)=>{const r=z("highlightjs");return p(),f("div",i$,[c("div",r$,[e.enableCodePen?(p(),f("form",c$,[c("input",{type:"hidden",name:"data",value:a.value},null,8,d$),v(ce,{slate:"",xs:"",type:"submit",faded:"",label:I(n)("COMPONENTS.CODE.CODEPEN")},null,8,["label"])])):O("",!0),v(ce,{slate:"",xs:"",faded:"",label:I(n)("COMPONENTS.CODE.BUTTON_TEXT"),onClick:o},null,8,["label"])]),e.script?(p(),V(r,{key:0,language:e.lang,code:s.value,class:"[&_code]:text-start"},null,8,["language","code"])):O("",!0)])}}};var qT={exports:{}};(function(e){(function(){var t={9662:function(o,l,i){var r=i(7854),d=i(614),u=i(6330),m=r.TypeError;o.exports=function(h){if(d(h))return h;throw m(u(h)+" is not a function")}},6077:function(o,l,i){var r=i(7854),d=i(614),u=r.String,m=r.TypeError;o.exports=function(h){if(typeof h=="object"||d(h))return h;throw m("Can't set "+u(h)+" as a prototype")}},9670:function(o,l,i){var r=i(7854),d=i(111),u=r.String,m=r.TypeError;o.exports=function(h){if(d(h))return h;throw m(u(h)+" is not an object")}},1318:function(o,l,i){var r=i(5656),d=i(1400),u=i(6244),m=function(h){return function(_,g,T){var S=r(_),b=u(S),A=d(T,b),y;if(h&&g!=g){for(;b>A;)if(y=S[A++],y!=y)return!0}else for(;b>A;A++)if((h||A in S)&&S[A]===g)return h||A||0;return!h&&-1}};o.exports={includes:m(!0),indexOf:m(!1)}},4326:function(o,l,i){var r=i(1702),d=r({}.toString),u=r("".slice);o.exports=function(m){return u(d(m),8,-1)}},648:function(o,l,i){var r=i(7854),d=i(1694),u=i(614),m=i(4326),h=i(5112),_=h("toStringTag"),g=r.Object,T=m(function(){return arguments}())=="Arguments",S=function(b,A){try{return b[A]}catch{}};o.exports=d?m:function(b){var A,y,x;return b===void 0?"Undefined":b===null?"Null":typeof(y=S(A=g(b),_))=="string"?y:T?m(A):(x=m(A))=="Object"&&u(A.callee)?"Arguments":x}},7741:function(o,l,i){var r=i(1702),d=r("".replace),u=function(_){return String(Error(_).stack)}("zxcasd"),m=/\n\s*at [^:]*:[^\n]*/,h=m.test(u);o.exports=function(_,g){if(h&&typeof _=="string")for(;g--;)_=d(_,m,"");return _}},9920:function(o,l,i){var r=i(2597),d=i(3887),u=i(1236),m=i(3070);o.exports=function(h,_,g){for(var T=d(_),S=m.f,b=u.f,A=0;A<T.length;A++){var y=T[A];!r(h,y)&&!(g&&r(g,y))&&S(h,y,b(_,y))}}},8880:function(o,l,i){var r=i(9781),d=i(3070),u=i(9114);o.exports=r?function(m,h,_){return d.f(m,h,u(1,_))}:function(m,h,_){return m[h]=_,m}},9114:function(o){o.exports=function(l,i){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:i}}},9781:function(o,l,i){var r=i(7293);o.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:function(o,l,i){var r=i(7854),d=i(111),u=r.document,m=d(u)&&d(u.createElement);o.exports=function(h){return m?u.createElement(h):{}}},8113:function(o,l,i){var r=i(5005);o.exports=r("navigator","userAgent")||""},7392:function(o,l,i){var r=i(7854),d=i(8113),u=r.process,m=r.Deno,h=u&&u.versions||m&&m.version,_=h&&h.v8,g,T;_&&(g=_.split("."),T=g[0]>0&&g[0]<4?1:+(g[0]+g[1])),!T&&d&&(g=d.match(/Edge\/(\d+)/),(!g||g[1]>=74)&&(g=d.match(/Chrome\/(\d+)/),g&&(T=+g[1]))),o.exports=T},748:function(o){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(o,l,i){var r=i(7293),d=i(9114);o.exports=!r(function(){var u=Error("a");return"stack"in u?(Object.defineProperty(u,"stack",d(1,7)),u.stack!==7):!0})},2109:function(o,l,i){var r=i(7854),d=i(1236).f,u=i(8880),m=i(1320),h=i(3505),_=i(9920),g=i(4705);o.exports=function(T,S){var b=T.target,A=T.global,y=T.stat,x,$,N,w,D,H;if(A?$=r:y?$=r[b]||h(b,{}):$=(r[b]||{}).prototype,$)for(N in S){if(D=S[N],T.noTargetGet?(H=d($,N),w=H&&H.value):w=$[N],x=g(A?N:b+(y?".":"#")+N,T.forced),!x&&w!==void 0){if(typeof D==typeof w)continue;_(D,w)}(T.sham||w&&w.sham)&&u(D,"sham",!0),m($,N,D,T)}}},7293:function(o){o.exports=function(l){try{return!!l()}catch{return!0}}},2104:function(o,l,i){var r=i(4374),d=Function.prototype,u=d.apply,m=d.call;o.exports=typeof Reflect=="object"&&Reflect.apply||(r?m.bind(u):function(){return m.apply(u,arguments)})},4374:function(o,l,i){var r=i(7293);o.exports=!r(function(){var d=(function(){}).bind();return typeof d!="function"||d.hasOwnProperty("prototype")})},6916:function(o,l,i){var r=i(4374),d=Function.prototype.call;o.exports=r?d.bind(d):function(){return d.apply(d,arguments)}},6530:function(o,l,i){var r=i(9781),d=i(2597),u=Function.prototype,m=r&&Object.getOwnPropertyDescriptor,h=d(u,"name"),_=h&&(function(){}).name==="something",g=h&&(!r||r&&m(u,"name").configurable);o.exports={EXISTS:h,PROPER:_,CONFIGURABLE:g}},1702:function(o,l,i){var r=i(4374),d=Function.prototype,u=d.bind,m=d.call,h=r&&u.bind(m,m);o.exports=r?function(_){return _&&h(_)}:function(_){return _&&function(){return m.apply(_,arguments)}}},5005:function(o,l,i){var r=i(7854),d=i(614),u=function(m){return d(m)?m:void 0};o.exports=function(m,h){return arguments.length<2?u(r[m]):r[m]&&r[m][h]}},8173:function(o,l,i){var r=i(9662);o.exports=function(d,u){var m=d[u];return m==null?void 0:r(m)}},7854:function(o,l,i){var r=function(d){return d&&d.Math==Math&&d};o.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof i.g=="object"&&i.g)||function(){return this}()||Function("return this")()},2597:function(o,l,i){var r=i(1702),d=i(7908),u=r({}.hasOwnProperty);o.exports=Object.hasOwn||function(h,_){return u(d(h),_)}},3501:function(o){o.exports={}},4664:function(o,l,i){var r=i(9781),d=i(7293),u=i(317);o.exports=!r&&!d(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},8361:function(o,l,i){var r=i(7854),d=i(1702),u=i(7293),m=i(4326),h=r.Object,_=d("".split);o.exports=u(function(){return!h("z").propertyIsEnumerable(0)})?function(g){return m(g)=="String"?_(g,""):h(g)}:h},9587:function(o,l,i){var r=i(614),d=i(111),u=i(7674);o.exports=function(m,h,_){var g,T;return u&&r(g=h.constructor)&&g!==_&&d(T=g.prototype)&&T!==_.prototype&&u(m,T),m}},2788:function(o,l,i){var r=i(1702),d=i(614),u=i(5465),m=r(Function.toString);d(u.inspectSource)||(u.inspectSource=function(h){return m(h)}),o.exports=u.inspectSource},8340:function(o,l,i){var r=i(111),d=i(8880);o.exports=function(u,m){r(m)&&"cause"in m&&d(u,"cause",m.cause)}},9909:function(o,l,i){var r=i(8536),d=i(7854),u=i(1702),m=i(111),h=i(8880),_=i(2597),g=i(5465),T=i(6200),S=i(3501),b="Object already initialized",A=d.TypeError,y=d.WeakMap,x,$,N,w=function(L){return N(L)?$(L):x(L,{})},D=function(L){return function(M){var R;if(!m(M)||(R=$(M)).type!==L)throw A("Incompatible receiver, "+L+" required");return R}};if(r||g.state){var H=g.state||(g.state=new y),B=u(H.get),k=u(H.has),U=u(H.set);x=function(L,M){if(k(H,L))throw new A(b);return M.facade=L,U(H,L,M),M},$=function(L){return B(H,L)||{}},N=function(L){return k(H,L)}}else{var G=T("state");S[G]=!0,x=function(L,M){if(_(L,G))throw new A(b);return M.facade=L,h(L,G,M),M},$=function(L){return _(L,G)?L[G]:{}},N=function(L){return _(L,G)}}o.exports={set:x,get:$,has:N,enforce:w,getterFor:D}},614:function(o){o.exports=function(l){return typeof l=="function"}},4705:function(o,l,i){var r=i(7293),d=i(614),u=/#|\.prototype\./,m=function(S,b){var A=_[h(S)];return A==T?!0:A==g?!1:d(b)?r(b):!!b},h=m.normalize=function(S){return String(S).replace(u,".").toLowerCase()},_=m.data={},g=m.NATIVE="N",T=m.POLYFILL="P";o.exports=m},111:function(o,l,i){var r=i(614);o.exports=function(d){return typeof d=="object"?d!==null:r(d)}},1913:function(o){o.exports=!1},2190:function(o,l,i){var r=i(7854),d=i(5005),u=i(614),m=i(7976),h=i(3307),_=r.Object;o.exports=h?function(g){return typeof g=="symbol"}:function(g){var T=d("Symbol");return u(T)&&m(T.prototype,_(g))}},6244:function(o,l,i){var r=i(7466);o.exports=function(d){return r(d.length)}},133:function(o,l,i){var r=i(7392),d=i(7293);o.exports=!!Object.getOwnPropertySymbols&&!d(function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&r&&r<41})},8536:function(o,l,i){var r=i(7854),d=i(614),u=i(2788),m=r.WeakMap;o.exports=d(m)&&/native code/.test(u(m))},6277:function(o,l,i){var r=i(1340);o.exports=function(d,u){return d===void 0?arguments.length<2?"":u:r(d)}},3070:function(o,l,i){var r=i(7854),d=i(9781),u=i(4664),m=i(3353),h=i(9670),_=i(4948),g=r.TypeError,T=Object.defineProperty,S=Object.getOwnPropertyDescriptor,b="enumerable",A="configurable",y="writable";l.f=d?m?function($,N,w){if(h($),N=_(N),h(w),typeof $=="function"&&N==="prototype"&&"value"in w&&y in w&&!w[y]){var D=S($,N);D&&D[y]&&($[N]=w.value,w={configurable:A in w?w[A]:D[A],enumerable:b in w?w[b]:D[b],writable:!1})}return T($,N,w)}:T:function($,N,w){if(h($),N=_(N),h(w),u)try{return T($,N,w)}catch{}if("get"in w||"set"in w)throw g("Accessors not supported");return"value"in w&&($[N]=w.value),$}},1236:function(o,l,i){var r=i(9781),d=i(6916),u=i(5296),m=i(9114),h=i(5656),_=i(4948),g=i(2597),T=i(4664),S=Object.getOwnPropertyDescriptor;l.f=r?S:function(A,y){if(A=h(A),y=_(y),T)try{return S(A,y)}catch{}if(g(A,y))return m(!d(u.f,A,y),A[y])}},8006:function(o,l,i){var r=i(6324),d=i(748),u=d.concat("length","prototype");l.f=Object.getOwnPropertyNames||function(h){return r(h,u)}},5181:function(o,l){l.f=Object.getOwnPropertySymbols},7976:function(o,l,i){var r=i(1702);o.exports=r({}.isPrototypeOf)},6324:function(o,l,i){var r=i(1702),d=i(2597),u=i(5656),m=i(1318).indexOf,h=i(3501),_=r([].push);o.exports=function(g,T){var S=u(g),b=0,A=[],y;for(y in S)!d(h,y)&&d(S,y)&&_(A,y);for(;T.length>b;)d(S,y=T[b++])&&(~m(A,y)||_(A,y));return A}},5296:function(o,l){var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,d=r&&!i.call({1:2},1);l.f=d?function(m){var h=r(this,m);return!!h&&h.enumerable}:i},7674:function(o,l,i){var r=i(1702),d=i(9670),u=i(6077);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m=!1,h={},_;try{_=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),_(h,[]),m=h instanceof Array}catch{}return function(T,S){return d(T),u(S),m?_(T,S):T.__proto__=S,T}}():void 0)},2140:function(o,l,i){var r=i(7854),d=i(6916),u=i(614),m=i(111),h=r.TypeError;o.exports=function(_,g){var T,S;if(g==="string"&&u(T=_.toString)&&!m(S=d(T,_))||u(T=_.valueOf)&&!m(S=d(T,_))||g!=="string"&&u(T=_.toString)&&!m(S=d(T,_)))return S;throw h("Can't convert object to primitive value")}},3887:function(o,l,i){var r=i(5005),d=i(1702),u=i(8006),m=i(5181),h=i(9670),_=d([].concat);o.exports=r("Reflect","ownKeys")||function(T){var S=u.f(h(T)),b=m.f;return b?_(S,b(T)):S}},1320:function(o,l,i){var r=i(7854),d=i(614),u=i(2597),m=i(8880),h=i(3505),_=i(2788),g=i(9909),T=i(6530).CONFIGURABLE,S=g.get,b=g.enforce,A=String(String).split("String");(o.exports=function(y,x,$,N){var w=N?!!N.unsafe:!1,D=N?!!N.enumerable:!1,H=N?!!N.noTargetGet:!1,B=N&&N.name!==void 0?N.name:x,k;if(d($)&&(String(B).slice(0,7)==="Symbol("&&(B="["+String(B).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u($,"name")||T&&$.name!==B)&&m($,"name",B),k=b($),k.source||(k.source=A.join(typeof B=="string"?B:""))),y===r){D?y[x]=$:h(x,$);return}else w?!H&&y[x]&&(D=!0):delete y[x];D?y[x]=$:m(y,x,$)})(Function.prototype,"toString",function(){return d(this)&&S(this).source||_(this)})},4488:function(o,l,i){var r=i(7854),d=r.TypeError;o.exports=function(u){if(u==null)throw d("Can't call method on "+u);return u}},3505:function(o,l,i){var r=i(7854),d=Object.defineProperty;o.exports=function(u,m){try{d(r,u,{value:m,configurable:!0,writable:!0})}catch{r[u]=m}return m}},6200:function(o,l,i){var r=i(2309),d=i(9711),u=r("keys");o.exports=function(m){return u[m]||(u[m]=d(m))}},5465:function(o,l,i){var r=i(7854),d=i(3505),u="__core-js_shared__",m=r[u]||d(u,{});o.exports=m},2309:function(o,l,i){var r=i(1913),d=i(5465);(o.exports=function(u,m){return d[u]||(d[u]=m!==void 0?m:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(o,l,i){var r=i(9303),d=Math.max,u=Math.min;o.exports=function(m,h){var _=r(m);return _<0?d(_+h,0):u(_,h)}},5656:function(o,l,i){var r=i(8361),d=i(4488);o.exports=function(u){return r(d(u))}},9303:function(o){var l=Math.ceil,i=Math.floor;o.exports=function(r){var d=+r;return d!==d||d===0?0:(d>0?i:l)(d)}},7466:function(o,l,i){var r=i(9303),d=Math.min;o.exports=function(u){return u>0?d(r(u),9007199254740991):0}},7908:function(o,l,i){var r=i(7854),d=i(4488),u=r.Object;o.exports=function(m){return u(d(m))}},7593:function(o,l,i){var r=i(7854),d=i(6916),u=i(111),m=i(2190),h=i(8173),_=i(2140),g=i(5112),T=r.TypeError,S=g("toPrimitive");o.exports=function(b,A){if(!u(b)||m(b))return b;var y=h(b,S),x;if(y){if(A===void 0&&(A="default"),x=d(y,b,A),!u(x)||m(x))return x;throw T("Can't convert object to primitive value")}return A===void 0&&(A="number"),_(b,A)}},4948:function(o,l,i){var r=i(7593),d=i(2190);o.exports=function(u){var m=r(u,"string");return d(m)?m:m+""}},1694:function(o,l,i){var r=i(5112),d=r("toStringTag"),u={};u[d]="z",o.exports=String(u)==="[object z]"},1340:function(o,l,i){var r=i(7854),d=i(648),u=r.String;o.exports=function(m){if(d(m)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return u(m)}},6330:function(o,l,i){var r=i(7854),d=r.String;o.exports=function(u){try{return d(u)}catch{return"Object"}}},9711:function(o,l,i){var r=i(1702),d=0,u=Math.random(),m=r(1 .toString);o.exports=function(h){return"Symbol("+(h===void 0?"":h)+")_"+m(++d+u,36)}},3307:function(o,l,i){var r=i(133);o.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:function(o,l,i){var r=i(9781),d=i(7293);o.exports=r&&d(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},5112:function(o,l,i){var r=i(7854),d=i(2309),u=i(2597),m=i(9711),h=i(133),_=i(3307),g=d("wks"),T=r.Symbol,S=T&&T.for,b=_?T:T&&T.withoutSetter||m;o.exports=function(A){if(!u(g,A)||!(h||typeof g[A]=="string")){var y="Symbol."+A;h&&u(T,A)?g[A]=T[A]:_&&S?g[A]=S(y):g[A]=b(y)}return g[A]}},9191:function(o,l,i){var r=i(5005),d=i(2597),u=i(8880),m=i(7976),h=i(7674),_=i(9920),g=i(9587),T=i(6277),S=i(8340),b=i(7741),A=i(2914),y=i(1913);o.exports=function(x,$,N,w){var D=w?2:1,H=x.split("."),B=H[H.length-1],k=r.apply(null,H);if(k){var U=k.prototype;if(!y&&d(U,"cause")&&delete U.cause,!N)return k;var G=r("Error"),L=$(function(M,R){var P=T(w?R:M,void 0),W=w?new k(M):new k;return P!==void 0&&u(W,"message",P),A&&u(W,"stack",b(W.stack,2)),this&&m(U,this)&&g(W,this,L),arguments.length>D&&S(W,arguments[D]),W});if(L.prototype=U,B!=="Error"&&(h?h(L,G):_(L,G,{name:!0})),_(L,k),!y)try{U.name!==B&&u(U,"name",B),U.constructor=L}catch{}return L}}},1703:function(o,l,i){var r=i(2109),d=i(7854),u=i(2104),m=i(9191),h="WebAssembly",_=d[h],g=Error("e",{cause:7}).cause!==7,T=function(b,A){var y={};y[b]=m(b,A,g),r({global:!0,forced:g},y)},S=function(b,A){if(_&&_[b]){var y={};y[b]=m(h+"."+b,A,g),r({target:h,stat:!0,forced:g},y)}};T("Error",function(b){return function(y){return u(b,this,arguments)}}),T("EvalError",function(b){return function(y){return u(b,this,arguments)}}),T("RangeError",function(b){return function(y){return u(b,this,arguments)}}),T("ReferenceError",function(b){return function(y){return u(b,this,arguments)}}),T("SyntaxError",function(b){return function(y){return u(b,this,arguments)}}),T("TypeError",function(b){return function(y){return u(b,this,arguments)}}),T("URIError",function(b){return function(y){return u(b,this,arguments)}}),S("CompileError",function(b){return function(y){return u(b,this,arguments)}}),S("LinkError",function(b){return function(y){return u(b,this,arguments)}}),S("RuntimeError",function(b){return function(y){return u(b,this,arguments)}})},6095:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-chrome{background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);box-sizing:initial;width:225px;font-family:Menlo;background-color:#fff}.vc-chrome-controls{display:flex}.vc-chrome-color-wrap{position:relative;width:36px}.vc-chrome-active-color{position:relative;width:30px;height:30px;border-radius:15px;overflow:hidden;z-index:1}.vc-chrome-color-wrap .vc-checkerboard{width:30px;height:30px;border-radius:15px;background-size:auto}.vc-chrome-sliders{flex:1}.vc-chrome-fields-wrap{display:flex;padding-top:16px}.vc-chrome-fields{display:flex;margin-left:-6px;flex:1}.vc-chrome-field{padding-left:6px;width:100%}.vc-chrome-toggle-btn{width:32px;text-align:right;position:relative}.vc-chrome-toggle-icon{margin-right:-4px;margin-top:12px;cursor:pointer;position:relative;z-index:2}.vc-chrome-toggle-icon-highlight{position:absolute;width:24px;height:28px;background:#eee;border-radius:4px;top:10px;left:12px}.vc-chrome-hue-wrap{margin-bottom:8px}.vc-chrome-alpha-wrap,.vc-chrome-hue-wrap{position:relative;height:10px}.vc-chrome-alpha-wrap .vc-alpha-gradient,.vc-chrome-hue-wrap .vc-hue{border-radius:2px}.vc-chrome-alpha-wrap .vc-alpha-picker,.vc-chrome-hue-wrap .vc-hue-picker{width:12px;height:12px;border-radius:6px;transform:translate(-6px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-chrome-body{padding:16px 16px 12px;background-color:#fff}.vc-chrome-saturation-wrap{width:100%;padding-bottom:55%;position:relative;border-radius:2px 2px 0 0;overflow:hidden}.vc-chrome-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-chrome-fields .vc-input__input{font-size:11px;color:#333;width:100%;border-radius:2px;border:none;box-shadow:inset 0 0 0 1px #dadada;height:21px;text-align:center}.vc-chrome-fields .vc-input__label{text-transform:uppercase;font-size:11px;line-height:11px;color:#969696;text-align:center;display:block;margin-top:12px}.vc-chrome__disable-alpha .vc-chrome-active-color{width:18px;height:18px}.vc-chrome__disable-alpha .vc-chrome-color-wrap{width:30px}.vc-chrome__disable-alpha .vc-chrome-hue-wrap{margin-top:4px;margin-bottom:4px}",""]),l.default=h},6047:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-compact{padding-top:5px;padding-left:5px;width:245px;border-radius:2px;box-sizing:border-box;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-compact-colors{overflow:hidden;padding:0;margin:0}.vc-compact-color-item{list-style:none;width:15px;height:15px;float:left;margin-right:5px;margin-bottom:5px;position:relative;cursor:pointer}.vc-compact-color-item--white{box-shadow:inset 0 0 0 1px #ddd}.vc-compact-color-item--white .vc-compact-dot{background:#000}.vc-compact-dot{position:absolute;top:5px;right:5px;bottom:5px;left:5px;border-radius:50%;opacity:1;background:#fff}",""]),l.default=h},9481:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-grayscale{width:125px;border-radius:2px;box-shadow:0 2px 15px rgba(0,0,0,.12),0 2px 10px rgba(0,0,0,.16);background-color:#fff}.vc-grayscale-colors{border-radius:2px;overflow:hidden;padding:0;margin:0}.vc-grayscale-color-item{list-style:none;width:25px;height:25px;float:left;position:relative;cursor:pointer}.vc-grayscale-color-item--white .vc-grayscale-dot{background:#000}.vc-grayscale-dot{position:absolute;top:50%;left:50%;width:6px;height:6px;margin:-3px 0 0 -2px;border-radius:50%;opacity:1;background:#fff}",""]),l.default=h},5186:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-material{width:98px;height:98px;padding:16px;font-family:Roboto;position:relative;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-material .vc-input__input{width:100%;margin-top:12px;font-size:15px;color:#333;height:30px}.vc-material .vc-input__label{position:absolute;top:0;left:0;font-size:11px;color:#999;text-transform:capitalize}.vc-material-hex{border-bottom-width:2px;border-bottom-style:solid}.vc-material-split{display:flex;margin-right:-10px;padding-top:11px}.vc-material-third{flex:1;padding-right:10px}",""]),l.default=h},3695:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,'.vc-photoshop{background:#dcdcdc;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.25),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;width:513px;font-family:Roboto}.vc-photoshop__disable-fields{width:390px}.vc-ps-head{background-image:linear-gradient(-180deg,#f0f0f0,#d4d4d4);border-bottom:1px solid #b1b1b1;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.2),inset 0 -1px 0 0 rgba(0,0,0,.02);height:23px;line-height:24px;border-radius:4px 4px 0 0;font-size:13px;color:#4d4d4d;text-align:center}.vc-ps-body{padding:15px;display:flex}.vc-ps-saturation-wrap{width:256px;height:256px;position:relative;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0;overflow:hidden}.vc-ps-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-ps-hue-wrap{height:256px;width:19px;margin-left:10px;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0}.vc-ps-hue-pointer,.vc-ps-hue-wrap{position:relative}.vc-ps-hue-pointer--left,.vc-ps-hue-pointer--right{position:absolute;width:0;height:0;border-style:solid;border-width:5px 0 5px 8px;border-color:transparent transparent transparent #555}.vc-ps-hue-pointer--left:after,.vc-ps-hue-pointer--right:after{content:"";width:0;height:0;border-style:solid;border-width:4px 0 4px 6px;border-color:transparent transparent transparent #fff;position:absolute;top:1px;left:1px;transform:translate(-8px,-5px)}.vc-ps-hue-pointer--left{transform:translate(-13px,-4px)}.vc-ps-hue-pointer--right{transform:translate(20px,-4px) rotate(180deg)}.vc-ps-controls{width:180px;margin-left:10px;display:flex}.vc-ps-controls__disable-fields{width:auto}.vc-ps-actions{margin-left:20px;flex:1}.vc-ps-ac-btn{cursor:pointer;background-image:linear-gradient(-180deg,#fff,#e6e6e6);border:1px solid #878787;border-radius:2px;height:20px;box-shadow:0 1px 0 0 #eaeaea;font-size:14px;color:#000;line-height:20px;text-align:center;margin-bottom:10px}.vc-ps-previews{width:60px}.vc-ps-previews__swatches{border:1px solid #b3b3b3;border-bottom:1px solid #f0f0f0;margin-bottom:2px;margin-top:1px}.vc-ps-previews__pr-color{height:34px;box-shadow:inset 1px 0 0 #000,inset -1px 0 0 #000,inset 0 1px 0 #000}.vc-ps-previews__label{font-size:14px;color:#000;text-align:center}.vc-ps-fields{padding-top:5px;padding-bottom:9px;width:80px;position:relative}.vc-ps-fields .vc-input__input{margin-left:40%;width:40%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:5px;font-size:13px;padding-left:3px;margin-right:10px}.vc-ps-fields .vc-input__desc,.vc-ps-fields .vc-input__label{top:0;text-transform:uppercase;font-size:13px;height:18px;line-height:22px;position:absolute}.vc-ps-fields .vc-input__label{left:0;width:34px}.vc-ps-fields .vc-input__desc{right:0;width:0}.vc-ps-fields__divider{height:5px}.vc-ps-fields__hex .vc-input__input{margin-left:20%;width:80%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:6px;font-size:13px;padding-left:3px}.vc-ps-fields__hex .vc-input__label{position:absolute;top:0;left:0;width:14px;text-transform:uppercase;font-size:13px;height:18px;line-height:22px}',""]),l.default=h},7279:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-sketch{position:relative;width:200px;padding:10px 10px 0;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15)}.vc-sketch-saturation-wrap{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.vc-sketch-controls{display:flex}.vc-sketch-sliders{padding:4px 0;flex:1}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{position:relative;height:10px}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.vc-sketch-active-color{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{width:90%;padding:4px 0 3px 10%;border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px}.vc-sketch-field .vc-input__label{display:block;text-align:center;font-size:11px;color:#222;padding-top:3px;padding-bottom:4px;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{margin-right:-10px;margin-left:-10px;padding-left:10px;padding-top:10px;border-top:1px solid #eee}.vc-sketch-presets-color{overflow:hidden;position:relative;display:inline-block;margin:0 10px 10px 0;vertical-align:top;cursor:pointer;width:16px;height:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}",""]),l.default=h},6278:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-slider{position:relative;width:410px}.vc-slider-hue-warp{height:12px;position:relative}.vc-slider-hue-warp .vc-hue-picker{width:14px;height:14px;border-radius:6px;transform:translate(-7px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-slider-swatches{display:flex;margin-top:20px}.vc-slider-swatch{margin-right:1px;flex:1;width:20%}.vc-slider-swatch:first-child{margin-right:1px}.vc-slider-swatch:first-child .vc-slider-swatch-picker{border-radius:2px 0 0 2px}.vc-slider-swatch:last-child{margin-right:0}.vc-slider-swatch:last-child .vc-slider-swatch-picker{border-radius:0 2px 2px 0}.vc-slider-swatch-picker{cursor:pointer;height:12px}.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active{transform:scaleY(1.8);border-radius:3.6px/2px}.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 1px #ddd}.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 .6px #ddd}",""]),l.default=h},3468:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-swatches{width:320px;height:240px;overflow-y:scroll;background-color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16)}.vc-swatches-box{padding:16px 0 6px 16px;overflow:hidden}.vc-swatches-color-group{padding-bottom:10px;width:40px;float:left;margin-right:10px}.vc-swatches-color-it{box-sizing:border-box;width:40px;height:24px;cursor:pointer;background:#880e4f;margin-bottom:1px;overflow:hidden;border-radius:2px 2px 0 0}.vc-swatches-color--white{border:1px solid #ddd}.vc-swatches-pick{fill:#fff;margin-left:8px;display:block}.vc-swatches-color--white .vc-swatches-pick{fill:#333}",""]),l.default=h},5689:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-twitter{background:#fff;border:0 solid rgba(0,0,0,.25);box-shadow:0 1px 4px rgba(0,0,0,.25);border-radius:4px;position:relative}.vc-twitter-triangle{border-color:transparent transparent #fff transparent}.vc-twitter-triangle,.vc-twitter-triangle-shadow{width:0;height:0;border-style:solid;border-width:0 9px 10px 9px;position:absolute}.vc-twitter-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1) transparent}.vc-twitter-body{padding:15px 9px 9px 15px}.vc-twitter .vc-editable-input{position:relative}.vc-twitter .vc-editable-input input{width:100px;font-size:14px;color:#666;border:0;outline:none;height:28px;box-shadow:inset 0 0 0 1px #f0f0f0;box-sizing:content-box;border-radius:0 4px 4px 0;float:left;padding:1px;padding-left:8px}.vc-twitter .vc-editable-input span{display:none}.vc-twitter-hash{background:#f0f0f0;height:30px;width:30px;border-radius:4px 0 0 4px;float:left;color:#98a1a4;display:flex;align-items:center;justify-content:center}.vc-twitter-swatch{width:30px;height:30px;float:left;border-radius:4px;margin:0 6px 6px 0;cursor:pointer;position:relative;outline:none}.vc-twitter-clear{clear:both}.vc-twitter-hide-triangle .vc-twitter-triangle,.vc-twitter-hide-triangle .vc-twitter-triangle-shadow{display:none}.vc-twitter-top-left-triangle .vc-twitter-triangle{top:-10px;left:12px}.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{top:-11px;left:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle{top:-10px;right:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{top:-11px;right:12px}",""]),l.default=h},2410:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-alpha,.vc-alpha-checkboard-wrap{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-container{cursor:pointer;position:relative;z-index:2;height:100%;margin:0 3px}.vc-alpha-pointer{z-index:2;position:absolute}.vc-alpha-picker{cursor:pointer;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;margin-top:1px;transform:translateX(-2px)}",""]),l.default=h},3142:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-checkerboard{position:absolute;top:0;right:0;bottom:0;left:0;background-size:contain}",""]),l.default=h},7953:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-editable-input{position:relative}.vc-input__input{padding:0;border:0;outline:none}.vc-input__label{text-transform:capitalize}",""]),l.default=h},3097:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-hue{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:2px}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;margin:0 2px;position:relative;height:100%}.vc-hue-pointer{z-index:2;position:absolute}.vc-hue-picker{cursor:pointer;margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;transform:translateX(-2px)}",""]),l.default=h},4339:function(o,l,i){i.r(l);var r=i(8081),d=i.n(r),u=i(3645),m=i.n(u),h=m()(d());h.push([o.id,".vc-saturation,.vc-saturation--black,.vc-saturation--white{cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{cursor:head;width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;transform:translate(-2px,-2px)}",""]),l.default=h},3645:function(o){o.exports=function(l){var i=[];return i.toString=function(){return this.map(function(d){var u="",m=typeof d[5]<"u";return d[4]&&(u+="@supports (".concat(d[4],") {")),d[2]&&(u+="@media ".concat(d[2]," {")),m&&(u+="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {")),u+=l(d),m&&(u+="}"),d[2]&&(u+="}"),d[4]&&(u+="}"),u}).join("")},i.i=function(d,u,m,h,_){typeof d=="string"&&(d=[[null,d,void 0]]);var g={};if(m)for(var T=0;T<this.length;T++){var S=this[T][0];S!=null&&(g[S]=!0)}for(var b=0;b<d.length;b++){var A=[].concat(d[b]);m&&g[A[0]]||(typeof _<"u"&&(typeof A[5]>"u"||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=_),u&&(A[2]&&(A[1]="@media ".concat(A[2]," {").concat(A[1],"}")),A[2]=u),h&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=h):A[4]="".concat(h)),i.push(A))}},i}},8081:function(o){o.exports=function(l){return l[1]}},9428:function(o){o.exports=l;function l(i,r,d){return r<d?i<r?r:i>d?d:i:i<d?d:i>r?r:i}},9016:function(o,l,i){var r=i(9159),d=r.Symbol;o.exports=d},6423:function(o,l,i){var r=i(9016),d=i(2366),u=i(2886),m="[object Null]",h="[object Undefined]",_=r?r.toStringTag:void 0;function g(T){return T==null?T===void 0?h:m:_&&_ in Object(T)?d(T):u(T)}o.exports=g},6009:function(o,l,i){var r=i(1626),d=/^\s+/;function u(m){return m&&m.slice(0,r(m)+1).replace(d,"")}o.exports=u},791:function(o,l,i){var r=typeof i.g=="object"&&i.g&&i.g.Object===Object&&i.g;o.exports=r},2366:function(o,l,i){var r=i(9016),d=Object.prototype,u=d.hasOwnProperty,m=d.toString,h=r?r.toStringTag:void 0;function _(g){var T=u.call(g,h),S=g[h];try{g[h]=void 0;var b=!0}catch{}var A=m.call(g);return b&&(T?g[h]=S:delete g[h]),A}o.exports=_},2886:function(o){var l=Object.prototype,i=l.toString;function r(d){return i.call(d)}o.exports=r},9159:function(o,l,i){var r=i(791),d=typeof self=="object"&&self&&self.Object===Object&&self,u=r||d||Function("return this")();o.exports=u},1626:function(o){var l=/\s/;function i(r){for(var d=r.length;d--&&l.test(r.charAt(d)););return d}o.exports=i},3738:function(o,l,i){i(1703);var r=i(150),d=i(657),u=i(2012),m="Expected a function",h=Math.max,_=Math.min;function g(T,S,b){var A,y,x,$,N,w,D=0,H=!1,B=!1,k=!0;if(typeof T!="function")throw new TypeError(m);S=u(S)||0,r(b)&&(H=!!b.leading,B="maxWait"in b,x=B?h(u(b.maxWait)||0,S):x,k="trailing"in b?!!b.trailing:k);function U(j){var X=A,q=y;return A=y=void 0,D=j,$=T.apply(q,X),$}function G(j){return D=j,N=setTimeout(R,S),H?U(j):$}function L(j){var X=j-w,q=j-D,se=S-X;return B?_(se,x-q):se}function M(j){var X=j-w,q=j-D;return w===void 0||X>=S||X<0||B&&q>=x}function R(){var j=d();if(M(j))return P(j);N=setTimeout(R,L(j))}function P(j){return N=void 0,k&&A?U(j):(A=y=void 0,$)}function W(){N!==void 0&&clearTimeout(N),D=0,A=w=y=N=void 0}function Q(){return N===void 0?$:P(d())}function Z(){var j=d(),X=M(j);if(A=arguments,y=this,w=j,X){if(N===void 0)return G(w);if(B)return clearTimeout(N),N=setTimeout(R,S),U(w)}return N===void 0&&(N=setTimeout(R,S)),$}return Z.cancel=W,Z.flush=Q,Z}o.exports=g},150:function(o){function l(i){var r=typeof i;return i!=null&&(r=="object"||r=="function")}o.exports=l},4430:function(o){function l(i){return i!=null&&typeof i=="object"}o.exports=l},7691:function(o,l,i){var r=i(6423),d=i(4430),u="[object Symbol]";function m(h){return typeof h=="symbol"||d(h)&&r(h)==u}o.exports=m},657:function(o,l,i){var r=i(9159),d=function(){return r.Date.now()};o.exports=d},9289:function(o,l,i){i(1703);var r=i(3738),d=i(150),u="Expected a function";function m(h,_,g){var T=!0,S=!0;if(typeof h!="function")throw new TypeError(u);return d(g)&&(T="leading"in g?!!g.leading:T,S="trailing"in g?!!g.trailing:S),r(h,_,{leading:T,maxWait:_,trailing:S})}o.exports=m},2012:function(o,l,i){var r=i(6009),d=i(150),u=i(7691),m=NaN,h=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,g=/^0o[0-7]+$/i,T=parseInt;function S(b){if(typeof b=="number")return b;if(u(b))return m;if(d(b)){var A=typeof b.valueOf=="function"?b.valueOf():b;b=d(A)?A+"":A}if(typeof b!="string")return b===0?b:+b;b=r(b);var y=_.test(b);return y||g.test(b)?T(b.slice(2),y?2:8):h.test(b)?m:+b}o.exports=S},7013:function(o,l,i){var r;(function(d){var u=/^\s+/,m=/\s+$/,h=0,_=d.round,g=d.min,T=d.max,S=d.random;function b(ie,Ce){if(ie=ie||"",Ce=Ce||{},ie instanceof b)return ie;if(!(this instanceof b))return new b(ie,Ce);var Se=A(ie);this._originalInput=ie,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=_(100*this._a)/100,this._format=Ce.format||Se.format,this._gradientType=Ce.gradientType,this._r<1&&(this._r=_(this._r)),this._g<1&&(this._g=_(this._g)),this._b<1&&(this._b=_(this._b)),this._ok=Se.ok,this._tc_id=h++}b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(ie.r*299+ie.g*587+ie.b*114)/1e3},getLuminance:function(){var ie=this.toRgb(),Ce,Se,je,Ke,$e,Be;return Ce=ie.r/255,Se=ie.g/255,je=ie.b/255,Ce<=.03928?Ke=Ce/12.92:Ke=d.pow((Ce+.055)/1.055,2.4),Se<=.03928?$e=Se/12.92:$e=d.pow((Se+.055)/1.055,2.4),je<=.03928?Be=je/12.92:Be=d.pow((je+.055)/1.055,2.4),.2126*Ke+.7152*$e+.0722*Be},setAlpha:function(ie){return this._a=ne(ie),this._roundA=_(100*this._a)/100,this},toHsv:function(){var ie=N(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=N(this._r,this._g,this._b),Ce=_(ie.h*360),Se=_(ie.s*100),je=_(ie.v*100);return this._a==1?"hsv("+Ce+", "+Se+"%, "+je+"%)":"hsva("+Ce+", "+Se+"%, "+je+"%, "+this._roundA+")"},toHsl:function(){var ie=x(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=x(this._r,this._g,this._b),Ce=_(ie.h*360),Se=_(ie.s*100),je=_(ie.l*100);return this._a==1?"hsl("+Ce+", "+Se+"%, "+je+"%)":"hsla("+Ce+", "+Se+"%, "+je+"%, "+this._roundA+")"},toHex:function(ie){return D(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(ie){return H(this._r,this._g,this._b,this._a,ie)},toHex8String:function(ie){return"#"+this.toHex8(ie)},toRgb:function(){return{r:_(this._r),g:_(this._g),b:_(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+_(this._r)+", "+_(this._g)+", "+_(this._b)+")":"rgba("+_(this._r)+", "+_(this._g)+", "+_(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:_(J(this._r,255)*100)+"%",g:_(J(this._g,255)*100)+"%",b:_(J(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+_(J(this._r,255)*100)+"%, "+_(J(this._g,255)*100)+"%, "+_(J(this._b,255)*100)+"%)":"rgba("+_(J(this._r,255)*100)+"%, "+_(J(this._g,255)*100)+"%, "+_(J(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:he[D(this._r,this._g,this._b,!0)]||!1},toFilter:function(ie){var Ce="#"+B(this._r,this._g,this._b,this._a),Se=Ce,je=this._gradientType?"GradientType = 1, ":"";if(ie){var Ke=b(ie);Se="#"+B(Ke._r,Ke._g,Ke._b,Ke._a)}return"progid:DXImageTransform.Microsoft.gradient("+je+"startColorstr="+Ce+",endColorstr="+Se+")"},toString:function(ie){var Ce=!!ie;ie=ie||this._format;var Se=!1,je=this._a<1&&this._a>=0,Ke=!Ce&&je&&(ie==="hex"||ie==="hex6"||ie==="hex3"||ie==="hex4"||ie==="hex8"||ie==="name");return Ke?ie==="name"&&this._a===0?this.toName():this.toRgbString():(ie==="rgb"&&(Se=this.toRgbString()),ie==="prgb"&&(Se=this.toPercentageRgbString()),(ie==="hex"||ie==="hex6")&&(Se=this.toHexString()),ie==="hex3"&&(Se=this.toHexString(!0)),ie==="hex4"&&(Se=this.toHex8String(!0)),ie==="hex8"&&(Se=this.toHex8String()),ie==="name"&&(Se=this.toName()),ie==="hsl"&&(Se=this.toHslString()),ie==="hsv"&&(Se=this.toHsvString()),Se||this.toHexString())},clone:function(){return b(this.toString())},_applyModification:function(ie,Ce){var Se=ie.apply(null,[this].concat([].slice.call(Ce)));return this._r=Se._r,this._g=Se._g,this._b=Se._b,this.setAlpha(Se._a),this},lighten:function(){return this._applyModification(L,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(R,arguments)},desaturate:function(){return this._applyModification(k,arguments)},saturate:function(){return this._applyModification(U,arguments)},greyscale:function(){return this._applyModification(G,arguments)},spin:function(){return this._applyModification(P,arguments)},_applyCombination:function(ie,Ce){return ie.apply(null,[this].concat([].slice.call(Ce)))},analogous:function(){return this._applyCombination(X,arguments)},complement:function(){return this._applyCombination(W,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(j,arguments)},triad:function(){return this._applyCombination(Q,arguments)},tetrad:function(){return this._applyCombination(Z,arguments)}},b.fromRatio=function(ie,Ce){if(typeof ie=="object"){var Se={};for(var je in ie)ie.hasOwnProperty(je)&&(je==="a"?Se[je]=ie[je]:Se[je]=Qe(ie[je]));ie=Se}return b(ie,Ce)};function A(ie){var Ce={r:0,g:0,b:0},Se=1,je=null,Ke=null,$e=null,Be=!1,Ue=!1;return typeof ie=="string"&&(ie=ee(ie)),typeof ie=="object"&&(wt(ie.r)&&wt(ie.g)&&wt(ie.b)?(Ce=y(ie.r,ie.g,ie.b),Be=!0,Ue=String(ie.r).substr(-1)==="%"?"prgb":"rgb"):wt(ie.h)&&wt(ie.s)&&wt(ie.v)?(je=Qe(ie.s),Ke=Qe(ie.v),Ce=w(ie.h,je,Ke),Be=!0,Ue="hsv"):wt(ie.h)&&wt(ie.s)&&wt(ie.l)&&(je=Qe(ie.s),$e=Qe(ie.l),Ce=$(ie.h,je,$e),Be=!0,Ue="hsl"),ie.hasOwnProperty("a")&&(Se=ie.a)),Se=ne(Se),{ok:Be,format:ie.format||Ue,r:g(255,T(Ce.r,0)),g:g(255,T(Ce.g,0)),b:g(255,T(Ce.b,0)),a:Se}}function y(ie,Ce,Se){return{r:J(ie,255)*255,g:J(Ce,255)*255,b:J(Se,255)*255}}function x(ie,Ce,Se){ie=J(ie,255),Ce=J(Ce,255),Se=J(Se,255);var je=T(ie,Ce,Se),Ke=g(ie,Ce,Se),$e,Be,Ue=(je+Ke)/2;if(je==Ke)$e=Be=0;else{var ge=je-Ke;switch(Be=Ue>.5?ge/(2-je-Ke):ge/(je+Ke),je){case ie:$e=(Ce-Se)/ge+(Ce<Se?6:0);break;case Ce:$e=(Se-ie)/ge+2;break;case Se:$e=(ie-Ce)/ge+4;break}$e/=6}return{h:$e,s:Be,l:Ue}}function $(ie,Ce,Se){var je,Ke,$e;ie=J(ie,360),Ce=J(Ce,100),Se=J(Se,100);function Be(ae,ve,Y){return Y<0&&(Y+=1),Y>1&&(Y-=1),Y<.16666666666666666?ae+(ve-ae)*6*Y:Y<.5?ve:Y<.6666666666666666?ae+(ve-ae)*(.6666666666666666-Y)*6:ae}if(Ce===0)je=Ke=$e=Se;else{var Ue=Se<.5?Se*(1+Ce):Se+Ce-Se*Ce,ge=2*Se-Ue;je=Be(ge,Ue,ie+.3333333333333333),Ke=Be(ge,Ue,ie),$e=Be(ge,Ue,ie-.3333333333333333)}return{r:je*255,g:Ke*255,b:$e*255}}function N(ie,Ce,Se){ie=J(ie,255),Ce=J(Ce,255),Se=J(Se,255);var je=T(ie,Ce,Se),Ke=g(ie,Ce,Se),$e,Be,Ue=je,ge=je-Ke;if(Be=je===0?0:ge/je,je==Ke)$e=0;else{switch(je){case ie:$e=(Ce-Se)/ge+(Ce<Se?6:0);break;case Ce:$e=(Se-ie)/ge+2;break;case Se:$e=(ie-Ce)/ge+4;break}$e/=6}return{h:$e,s:Be,v:Ue}}function w(ie,Ce,Se){ie=J(ie,360)*6,Ce=J(Ce,100),Se=J(Se,100);var je=d.floor(ie),Ke=ie-je,$e=Se*(1-Ce),Be=Se*(1-Ke*Ce),Ue=Se*(1-(1-Ke)*Ce),ge=je%6,ae=[Se,Be,$e,$e,Ue,Se][ge],ve=[Ue,Se,Se,Be,$e,$e][ge],Y=[$e,$e,Ue,Se,Se,Be][ge];return{r:ae*255,g:ve*255,b:Y*255}}function D(ie,Ce,Se,je){var Ke=[Xe(_(ie).toString(16)),Xe(_(Ce).toString(16)),Xe(_(Se).toString(16))];return je&&Ke[0].charAt(0)==Ke[0].charAt(1)&&Ke[1].charAt(0)==Ke[1].charAt(1)&&Ke[2].charAt(0)==Ke[2].charAt(1)?Ke[0].charAt(0)+Ke[1].charAt(0)+Ke[2].charAt(0):Ke.join("")}function H(ie,Ce,Se,je,Ke){var $e=[Xe(_(ie).toString(16)),Xe(_(Ce).toString(16)),Xe(_(Se).toString(16)),Xe(Je(je))];return Ke&&$e[0].charAt(0)==$e[0].charAt(1)&&$e[1].charAt(0)==$e[1].charAt(1)&&$e[2].charAt(0)==$e[2].charAt(1)&&$e[3].charAt(0)==$e[3].charAt(1)?$e[0].charAt(0)+$e[1].charAt(0)+$e[2].charAt(0)+$e[3].charAt(0):$e.join("")}function B(ie,Ce,Se,je){var Ke=[Xe(Je(je)),Xe(_(ie).toString(16)),Xe(_(Ce).toString(16)),Xe(_(Se).toString(16))];return Ke.join("")}b.equals=function(ie,Ce){return!ie||!Ce?!1:b(ie).toRgbString()==b(Ce).toRgbString()},b.random=function(){return b.fromRatio({r:S(),g:S(),b:S()})};function k(ie,Ce){Ce=Ce===0?0:Ce||10;var Se=b(ie).toHsl();return Se.s-=Ce/100,Se.s=ue(Se.s),b(Se)}function U(ie,Ce){Ce=Ce===0?0:Ce||10;var Se=b(ie).toHsl();return Se.s+=Ce/100,Se.s=ue(Se.s),b(Se)}function G(ie){return b(ie).desaturate(100)}function L(ie,Ce){Ce=Ce===0?0:Ce||10;var Se=b(ie).toHsl();return Se.l+=Ce/100,Se.l=ue(Se.l),b(Se)}function M(ie,Ce){Ce=Ce===0?0:Ce||10;var Se=b(ie).toRgb();return Se.r=T(0,g(255,Se.r-_(255*-(Ce/100)))),Se.g=T(0,g(255,Se.g-_(255*-(Ce/100)))),Se.b=T(0,g(255,Se.b-_(255*-(Ce/100)))),b(Se)}function R(ie,Ce){Ce=Ce===0?0:Ce||10;var Se=b(ie).toHsl();return Se.l-=Ce/100,Se.l=ue(Se.l),b(Se)}function P(ie,Ce){var Se=b(ie).toHsl(),je=(Se.h+Ce)%360;return Se.h=je<0?360+je:je,b(Se)}function W(ie){var Ce=b(ie).toHsl();return Ce.h=(Ce.h+180)%360,b(Ce)}function Q(ie){var Ce=b(ie).toHsl(),Se=Ce.h;return[b(ie),b({h:(Se+120)%360,s:Ce.s,l:Ce.l}),b({h:(Se+240)%360,s:Ce.s,l:Ce.l})]}function Z(ie){var Ce=b(ie).toHsl(),Se=Ce.h;return[b(ie),b({h:(Se+90)%360,s:Ce.s,l:Ce.l}),b({h:(Se+180)%360,s:Ce.s,l:Ce.l}),b({h:(Se+270)%360,s:Ce.s,l:Ce.l})]}function j(ie){var Ce=b(ie).toHsl(),Se=Ce.h;return[b(ie),b({h:(Se+72)%360,s:Ce.s,l:Ce.l}),b({h:(Se+216)%360,s:Ce.s,l:Ce.l})]}function X(ie,Ce,Se){Ce=Ce||6,Se=Se||30;var je=b(ie).toHsl(),Ke=360/Se,$e=[b(ie)];for(je.h=(je.h-(Ke*Ce>>1)+720)%360;--Ce;)je.h=(je.h+Ke)%360,$e.push(b(je));return $e}function q(ie,Ce){Ce=Ce||6;for(var Se=b(ie).toHsv(),je=Se.h,Ke=Se.s,$e=Se.v,Be=[],Ue=1/Ce;Ce--;)Be.push(b({h:je,s:Ke,v:$e})),$e=($e+Ue)%1;return Be}b.mix=function(ie,Ce,Se){Se=Se===0?0:Se||50;var je=b(ie).toRgb(),Ke=b(Ce).toRgb(),$e=Se/100,Be={r:(Ke.r-je.r)*$e+je.r,g:(Ke.g-je.g)*$e+je.g,b:(Ke.b-je.b)*$e+je.b,a:(Ke.a-je.a)*$e+je.a};return b(Be)},b.readability=function(ie,Ce){var Se=b(ie),je=b(Ce);return(d.max(Se.getLuminance(),je.getLuminance())+.05)/(d.min(Se.getLuminance(),je.getLuminance())+.05)},b.isReadable=function(ie,Ce,Se){var je=b.readability(ie,Ce),Ke,$e;switch($e=!1,Ke=de(Se),Ke.level+Ke.size){case"AAsmall":case"AAAlarge":$e=je>=4.5;break;case"AAlarge":$e=je>=3;break;case"AAAsmall":$e=je>=7;break}return $e},b.mostReadable=function(ie,Ce,Se){var je=null,Ke=0,$e,Be,Ue,ge;Se=Se||{},Be=Se.includeFallbackColors,Ue=Se.level,ge=Se.size;for(var ae=0;ae<Ce.length;ae++)$e=b.readability(ie,Ce[ae]),$e>Ke&&(Ke=$e,je=b(Ce[ae]));return b.isReadable(ie,je,{level:Ue,size:ge})||!Be?je:(Se.includeFallbackColors=!1,b.mostReadable(ie,["#fff","#000"],Se))};var se=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},he=b.hexNames=be(se);function be(ie){var Ce={};for(var Se in ie)ie.hasOwnProperty(Se)&&(Ce[ie[Se]]=Se);return Ce}function ne(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function J(ie,Ce){Re(ie)&&(ie="100%");var Se=Ze(ie);return ie=g(Ce,T(0,parseFloat(ie))),Se&&(ie=parseInt(ie*Ce,10)/100),d.abs(ie-Ce)<1e-6?1:ie%Ce/parseFloat(Ce)}function ue(ie){return g(1,T(0,ie))}function Ne(ie){return parseInt(ie,16)}function Re(ie){return typeof ie=="string"&&ie.indexOf(".")!=-1&&parseFloat(ie)===1}function Ze(ie){return typeof ie=="string"&&ie.indexOf("%")!=-1}function Xe(ie){return ie.length==1?"0"+ie:""+ie}function Qe(ie){return ie<=1&&(ie=ie*100+"%"),ie}function Je(ie){return d.round(parseFloat(ie)*255).toString(16)}function st(ie){return Ne(ie)/255}var ht=function(){var ie="[-\\+]?\\d+%?",Ce="[-\\+]?\\d*\\.\\d+%?",Se="(?:"+Ce+")|(?:"+ie+")",je="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",Ke="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?";return{CSS_UNIT:new RegExp(Se),rgb:new RegExp("rgb"+je),rgba:new RegExp("rgba"+Ke),hsl:new RegExp("hsl"+je),hsla:new RegExp("hsla"+Ke),hsv:new RegExp("hsv"+je),hsva:new RegExp("hsva"+Ke),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function wt(ie){return!!ht.CSS_UNIT.exec(ie)}function ee(ie){ie=ie.replace(u,"").replace(m,"").toLowerCase();var Ce=!1;if(se[ie])ie=se[ie],Ce=!0;else if(ie=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Se;return(Se=ht.rgb.exec(ie))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=ht.rgba.exec(ie))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=ht.hsl.exec(ie))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=ht.hsla.exec(ie))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=ht.hsv.exec(ie))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=ht.hsva.exec(ie))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=ht.hex8.exec(ie))?{r:Ne(Se[1]),g:Ne(Se[2]),b:Ne(Se[3]),a:st(Se[4]),format:Ce?"name":"hex8"}:(Se=ht.hex6.exec(ie))?{r:Ne(Se[1]),g:Ne(Se[2]),b:Ne(Se[3]),format:Ce?"name":"hex"}:(Se=ht.hex4.exec(ie))?{r:Ne(Se[1]+""+Se[1]),g:Ne(Se[2]+""+Se[2]),b:Ne(Se[3]+""+Se[3]),a:st(Se[4]+""+Se[4]),format:Ce?"name":"hex8"}:(Se=ht.hex3.exec(ie))?{r:Ne(Se[1]+""+Se[1]),g:Ne(Se[2]+""+Se[2]),b:Ne(Se[3]+""+Se[3]),format:Ce?"name":"hex"}:!1}function de(ie){var Ce,Se;return ie=ie||{level:"AA",size:"small"},Ce=(ie.level||"AA").toUpperCase(),Se=(ie.size||"small").toLowerCase(),Ce!=="AA"&&Ce!=="AAA"&&(Ce="AA"),Se!=="small"&&Se!=="large"&&(Se="small"),{level:Ce,size:Se}}o.exports?o.exports=b:(r=(function(){return b}).call(l,i,l,o),r!==void 0&&(o.exports=r))})(Math)},89:function(o,l){l.Z=(i,r)=>{const d=i.__vccOpts||i;for(const[u,m]of r)d[u]=m;return d}},3647:function(o,l,i){var r=i(6095);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("29397b9c",r,!0,{sourceMap:!1,shadowMode:!1})},325:function(o,l,i){var r=i(6047);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("479d8be0",r,!0,{sourceMap:!1,shadowMode:!1})},5208:function(o,l,i){var r=i(9481);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("1e383f72",r,!0,{sourceMap:!1,shadowMode:!1})},1425:function(o,l,i){var r=i(5186);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("3855edf0",r,!0,{sourceMap:!1,shadowMode:!1})},1902:function(o,l,i){var r=i(3695);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("2f73e1a8",r,!0,{sourceMap:!1,shadowMode:!1})},5815:function(o,l,i){var r=i(7279);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("36c086c2",r,!0,{sourceMap:!1,shadowMode:!1})},8016:function(o,l,i){var r=i(6278);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("8bcdd408",r,!0,{sourceMap:!1,shadowMode:!1})},193:function(o,l,i){var r=i(3468);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("17a63672",r,!0,{sourceMap:!1,shadowMode:!1})},1113:function(o,l,i){var r=i(5689);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("39c50172",r,!0,{sourceMap:!1,shadowMode:!1})},6320:function(o,l,i){var r=i(2410);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("5c6f2742",r,!0,{sourceMap:!1,shadowMode:!1})},3205:function(o,l,i){var r=i(3142);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("90803b82",r,!0,{sourceMap:!1,shadowMode:!1})},1979:function(o,l,i){var r=i(7953);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("418ed5a2",r,!0,{sourceMap:!1,shadowMode:!1})},6547:function(o,l,i){var r=i(3097);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("1f7c089b",r,!0,{sourceMap:!1,shadowMode:!1})},5233:function(o,l,i){var r=i(4339);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var d=i(7037).Z;d("491ed8fe",r,!0,{sourceMap:!1,shadowMode:!1})},7037:function(o,l,i){i.d(l,{Z:function(){return y}});function r(B,k){for(var U=[],G={},L=0;L<k.length;L++){var M=k[L],R=M[0],P=M[1],W=M[2],Q=M[3],Z={id:B+":"+L,css:P,media:W,sourceMap:Q};G[R]?G[R].parts.push(Z):U.push(G[R]={id:R,parts:[Z]})}return U}var d=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u={},m=d&&(document.head||document.getElementsByTagName("head")[0]),h=null,_=0,g=!1,T=function(){},S=null,b="data-vue-ssr-id",A=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function y(B,k,U,G){g=U,S=G||{};var L=r(B,k);return x(L),function(R){for(var P=[],W=0;W<L.length;W++){var Q=L[W],Z=u[Q.id];Z.refs--,P.push(Z)}R?(L=r(B,R),x(L)):L=[];for(var W=0;W<P.length;W++){var Z=P[W];if(Z.refs===0){for(var j=0;j<Z.parts.length;j++)Z.parts[j]();delete u[Z.id]}}}}function x(B){for(var k=0;k<B.length;k++){var U=B[k],G=u[U.id];if(G){G.refs++;for(var L=0;L<G.parts.length;L++)G.parts[L](U.parts[L]);for(;L<U.parts.length;L++)G.parts.push(N(U.parts[L]));G.parts.length>U.parts.length&&(G.parts.length=U.parts.length)}else{for(var M=[],L=0;L<U.parts.length;L++)M.push(N(U.parts[L]));u[U.id]={id:U.id,refs:1,parts:M}}}}function $(){var B=document.createElement("style");return B.type="text/css",m.appendChild(B),B}function N(B){var k,U,G=document.querySelector("style["+b+'~="'+B.id+'"]');if(G){if(g)return T;G.parentNode.removeChild(G)}if(A){var L=_++;G=h||(h=$()),k=D.bind(null,G,L,!1),U=D.bind(null,G,L,!0)}else G=$(),k=H.bind(null,G),U=function(){G.parentNode.removeChild(G)};return k(B),function(R){if(R){if(R.css===B.css&&R.media===B.media&&R.sourceMap===B.sourceMap)return;k(B=R)}else U()}}var w=function(){var B=[];return function(k,U){return B[k]=U,B.filter(Boolean).join(`
`)}}();function D(B,k,U,G){var L=U?"":G.css;if(B.styleSheet)B.styleSheet.cssText=w(k,L);else{var M=document.createTextNode(L),R=B.childNodes;R[k]&&B.removeChild(R[k]),R.length?B.insertBefore(M,R[k]):B.appendChild(M)}}function H(B,k){var U=k.css,G=k.media,L=k.sourceMap;if(G&&B.setAttribute("media",G),S.ssrId&&B.setAttribute(b,k.id),L&&(U+=`
/*# sourceURL=`+L.sources[0]+" */",U+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(L))))+" */"),B.styleSheet)B.styleSheet.cssText=U;else{for(;B.firstChild;)B.removeChild(B.firstChild);B.appendChild(document.createTextNode(U))}}}},n={};function s(o){var l=n[o];if(l!==void 0)return l.exports;var i=n[o]={id:o,exports:{}};return t[o](i,i.exports,s),i.exports}(function(){s.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(l,{a:l}),l}})(),function(){s.d=function(o,l){for(var i in l)s.o(l,i)&&!s.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:l[i]})}}(),function(){s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){s.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)}}(),function(){s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){s.p=""}();var a={};(function(){if(s.r(a),s.d(a,{Alpha:function(){return _d},Checkboard:function(){return Vr},Chrome:function(){return dv},ColorMixin:function(){return b},Compact:function(){return N},EditableInput:function(){return ue},Grayscale:function(){return M},Hue:function(){return je},Material:function(){return Ze},Photoshop:function(){return rv},Saturation:function(){return Yn},Sketch:function(){return cv},Slider:function(){return Ue},Swatches:function(){return gt},Twitter:function(){return uv},default:function(){return MC},version:function(){return pv}}),typeof window<"u"){var o=window.document.currentScript,l=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);l&&(s.p=l[1])}var i={i8:"3.0.6"},r=JE;const d={role:"application","aria-label":"Compact color picker",class:"vc-compact"},u={class:"vc-compact-colors",role:"listbox"},m=["aria-label","aria-selected","onClick"],h={class:"vc-compact-dot"};function _(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("ul",u,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(xe.paletteUpperCase(At.palette),Ht=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{role:"option","aria-label":"color:"+Ht,"aria-selected":Ht===it.pick,class:(0,r.normalizeClass)(["vc-compact-color-item",{"vc-compact-color-item--white":Ht==="#FFFFFF"}]),key:Ht,style:(0,r.normalizeStyle)({background:Ht}),onClick:an=>it.handlerClick(Ht)},[(0,r.withDirectives)((0,r.createElementVNode)("div",h,null,512),[[r.vShow,Ht===it.pick]])],14,m))),128))])])}var g=s(7013),T=s.n(g);function S(xe={},ut=0){const At=xe&&xe.a;let Yt;xe&&xe.hsl?Yt=T()(xe.hsl):xe&&xe.hex&&xe.hex.length>0?Yt=T()(xe.hex):xe&&xe.hsv?Yt=T()(xe.hsv):xe&&xe.rgba?Yt=T()(xe.rgba):xe&&xe.rgb?Yt=T()(xe.rgb):Yt=T()(xe),Yt&&(Yt._a===void 0||Yt._a===null)&&Yt.setAlpha(At||1);const Qt=Yt.toHsl(),it=Yt.toHsv();return Qt.s===0&&(it.h=Qt.h=xe.h||xe.hsl&&xe.hsl.h||ut||0),{hsl:Qt,hex:Yt.toHexString().toUpperCase(),hex8:Yt.toHex8String().toUpperCase(),rgba:Yt.toRgb(),hsv:it,oldHue:xe.h||ut||Qt.h,source:xe.source,a:xe.a||Yt.getAlpha()}}var b={props:["modelValue"],data(){return{val:S(this.modelValue)}},computed:{colors:{get(){return this.val},set(xe){this.val=xe,this.$emit("update:modelValue",xe)}}},watch:{modelValue(xe){this.val=S(xe)}},methods:{colorChange(xe,ut){this.oldHue=this.colors.hsl.h,this.colors=S(xe,ut||this.oldHue)},isValidHex(xe){return T()(xe).isValid()},simpleCheckForValidColor(xe){const ut=["r","g","b","a","h","s","l","v"];let At=0,Yt=0;for(let Qt=0;Qt<ut.length;Qt++){const it=ut[Qt];xe[it]&&(At++,isNaN(xe[it])||Yt++)}if(At===Yt)return xe},paletteUpperCase(xe){return xe.map(ut=>ut.toUpperCase())},isTransparent(xe){return T()(xe).getAlpha()===0}}};const A=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];var y={name:"Compact",mixins:[b],props:{palette:{type:Array,default(){return A}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(xe){this.colorChange({hex:xe,source:"hex"})}}};s(325);var x=s(89),N=(0,x.Z)(y,[["render",_]]);const w={role:"application","aria-label":"Grayscale color picker",class:"vc-grayscale"},D={class:"vc-grayscale-colors",role:"listbox"},H=["aria-label","aria-selected","onClick"],B={class:"vc-grayscale-dot"};function k(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",w,[(0,r.createElementVNode)("ul",D,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(xe.paletteUpperCase(At.palette),Ht=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{role:"option","aria-label":"Color:"+Ht,"aria-selected":Ht===it.pick,key:Ht,class:(0,r.normalizeClass)(["vc-grayscale-color-item",{"vc-grayscale-color-item--white":Ht=="#FFFFFF"}]),style:(0,r.normalizeStyle)({background:Ht}),onClick:an=>it.handlerClick(Ht)},[(0,r.withDirectives)((0,r.createElementVNode)("div",B,null,512),[[r.vShow,Ht===it.pick]])],14,H))),128))])])}const U=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];var G={name:"Grayscale",mixins:[b],props:{palette:{type:Array,default(){return U}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(xe){this.colorChange({hex:xe,source:"hex"})}}};s(5208);var M=(0,x.Z)(G,[["render",k]]);const R={role:"application","aria-label":"Material color picker",class:"vc-material"},P={class:"vc-material-split"},W={class:"vc-material-third"},Q={class:"vc-material-third"},Z={class:"vc-material-third"};function j(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",R,[(0,r.createVNode)(Ht,{class:"vc-material-hex",label:"hex",modelValue:xe.colors.hex,"onUpdate:modelValue":ut[0]||(ut[0]=an=>xe.colors.hex=an),style:(0,r.normalizeStyle)({borderColor:xe.colors.hex}),onChange:it.onChange},null,8,["modelValue","style","onChange"]),(0,r.createElementVNode)("div",P,[(0,r.createElementVNode)("div",W,[(0,r.createVNode)(Ht,{label:"r",modelValue:xe.colors.rgba.r,"onUpdate:modelValue":ut[1]||(ut[1]=an=>xe.colors.rgba.r=an),onChange:it.onChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Q,[(0,r.createVNode)(Ht,{label:"g",modelValue:xe.colors.rgba.g,"onUpdate:modelValue":ut[2]||(ut[2]=an=>xe.colors.rgba.g=an),onChange:it.onChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Z,[(0,r.createVNode)(Ht,{label:"b",modelValue:xe.colors.rgba.b,"onUpdate:modelValue":ut[3]||(ut[3]=an=>xe.colors.rgba.b=an),onChange:it.onChange},null,8,["modelValue","onChange"])])])])}const X={class:"vc-editable-input"},q=["aria-labelledby"],se=["for","id"],he={class:"vc-input__desc"};function be(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",X,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"aria-labelledby":it.labelId,class:"vc-input__input","onUpdate:modelValue":ut[0]||(ut[0]=Ht=>it.val=Ht),onKeydown:ut[1]||(ut[1]=(...Ht)=>it.handleKeyDown&&it.handleKeyDown(...Ht)),onInput:ut[2]||(ut[2]=(...Ht)=>it.update&&it.update(...Ht)),ref:"input"},null,40,q),[[r.vModelText,it.val]]),(0,r.createElementVNode)("span",{for:At.label,class:"vc-input__label",id:it.labelId},(0,r.toDisplayString)(it.labelSpanText),9,se),(0,r.createElementVNode)("span",he,(0,r.toDisplayString)(At.desc),1)])}var ne={name:"editableInput",props:{label:String,labelText:String,desc:String,modelValue:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.modelValue},set(xe){if(this.max!==void 0&&+xe>this.max)this.$refs.input.value=this.max;else return xe}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(xe){this.handleChange(xe.target.value)},handleChange(xe){const ut={};ut[this.label]=xe,ut.hex===void 0&&ut["#"]===void 0?this.$emit("change",ut):xe.length>5&&this.$emit("change",ut)},handleKeyDown(xe){let ut=this.val;const At=Number(ut);if(At){const Yt=this.arrowOffset||1;xe.keyCode===38&&(ut=At+Yt,this.handleChange(ut),xe.preventDefault()),xe.keyCode===40&&(ut=At-Yt,this.handleChange(ut),xe.preventDefault())}}}};s(1979);var ue=(0,x.Z)(ne,[["render",be]]),Ne={name:"Material",mixins:[b],components:{"ed-in":ue},methods:{onChange(xe){xe&&(xe.hex?this.isValidHex(xe.hex)&&this.colorChange({hex:xe.hex,source:"hex"}):(xe.r||xe.g||xe.b)&&this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}))}}};s(1425);var Ze=(0,x.Z)(Ne,[["render",j]]);const Xe={role:"application","aria-label":"Slider color picker",class:"vc-slider"},Qe={class:"vc-slider-hue-warp"},Je={class:"vc-slider-swatches",role:"group"},st=["data-index","aria-label","onClick"];function ht(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("hue");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Xe,[(0,r.createElementVNode)("div",Qe,[(0,r.createVNode)(Ht,{modelValue:xe.colors,"onUpdate:modelValue":ut[0]||(ut[0]=an=>xe.colors=an),onChange:it.hueChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Je,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(it.normalizedSwatches,(an,Gn)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-slider-swatch",key:Gn,"data-index":Gn,"aria-label":"color:"+xe.colors.hex,role:"button",onClick:rs=>it.handleSwClick(Gn,an)},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["vc-slider-swatch-picker",{"vc-slider-swatch-picker--active":it.isActive(an,Gn),"vc-slider-swatch-picker--white":an.l===1}]),style:(0,r.normalizeStyle)({background:"hsl("+xe.colors.hsl.h+", "+an.s*100+"%, "+an.l*100+"%)"})},null,6)],8,st))),128))])])}const wt=["aria-valuenow"],de=[(0,r.createElementVNode)("div",{class:"vc-hue-picker"},null,-1)];function ie(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-hue",it.directionClass])},[(0,r.createElementVNode)("div",{class:"vc-hue-container",role:"slider","aria-valuenow":it.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:ut[0]||(ut[0]=(...Ht)=>it.handleMouseDown&&it.handleMouseDown(...Ht)),onTouchmove:ut[1]||(ut[1]=(...Ht)=>it.handleChange&&it.handleChange(...Ht)),onTouchstart:ut[2]||(ut[2]=(...Ht)=>it.handleChange&&it.handleChange(...Ht))},[(0,r.createElementVNode)("div",{class:"vc-hue-pointer",style:(0,r.normalizeStyle)({top:it.pointerTop,left:it.pointerLeft}),role:"presentation"},de,4)],40,wt)],2)}var Ce={name:"Hue",props:{modelValue:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const xe=this.modelValue.hsl.h;return xe!==0&&xe-this.oldHue>0&&(this.pullDirection="right"),xe!==0&&xe-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=xe,this.modelValue},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:-(this.colors.hsl.h*100/360)+100+"%":0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":this.colors.hsl.h*100/360+"%"}},methods:{handleChange(xe,ut){!ut&&xe.preventDefault();const At=this.$refs.container;if(!At)return;const Yt=At.clientWidth,Qt=At.clientHeight,it=At.getBoundingClientRect().left+window.pageXOffset,Ht=At.getBoundingClientRect().top+window.pageYOffset,an=xe.pageX||(xe.touches?xe.touches[0].pageX:0),Gn=xe.pageY||(xe.touches?xe.touches[0].pageY:0),rs=an-it,bs=Gn-Ht;let _n,Sl;this.direction==="vertical"?(bs<0?_n=360:bs>Qt?_n=0:(Sl=-(bs*100/Qt)+100,_n=360*Sl/100),this.colors.hsl.h!==_n&&this.$emit("change",{h:_n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(rs<0?_n=0:rs>Yt?_n=360:(Sl=rs*100/Yt,_n=360*Sl/100),this.colors.hsl.h!==_n&&this.$emit("change",{h:_n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(xe){this.handleChange(xe,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(xe){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6547);var je=(0,x.Z)(Ce,[["render",ie]]);const Ke=.5;var $e={name:"Slider",mixins:[b],props:{swatches:{type:Array,default(){return[{s:Ke,l:.8},{s:Ke,l:.65},{s:Ke,l:.5},{s:Ke,l:.35},{s:Ke,l:.2}]}}},components:{hue:je},computed:{normalizedSwatches(){return this.swatches.map(ut=>typeof ut!="object"?{s:Ke,l:ut}:ut)}},methods:{isActive(xe,ut){const At=this.colors.hsl;return At.l===1&&xe.l===1||At.l===0&&xe.l===0?!0:Math.abs(At.l-xe.l)<.01&&Math.abs(At.s-xe.s)<.01},hueChange(xe){this.colorChange(xe)},handleSwClick(xe,ut){this.colorChange({h:this.colors.hsl.h,s:ut.s,l:ut.l,source:"hsl"})}}};s(8016);var Ue=(0,x.Z)($e,[["render",ht]]);const ge=["data-pick"],ae={class:"vc-swatches-box",role:"listbox"},ve=["aria-label","aria-selected","data-color","onClick"],Y={class:"vc-swatches-pick"},te=[(0,r.createElementVNode)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},[(0,r.createElementVNode)("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})],-1)];function le(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Swatches color picker",class:"vc-swatches","data-pick":it.pick},[(0,r.createElementVNode)("div",ae,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(At.palette,(Ht,an)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-swatches-color-group",key:an},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Ht,Gn=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-swatches-color-it",{"vc-swatches-color--white":Gn==="#FFFFFF"}]),role:"option","aria-label":"Color:"+Gn,"aria-selected":it.equal(Gn),key:Gn,"data-color":Gn,style:(0,r.normalizeStyle)({background:Gn}),onClick:rs=>it.handlerClick(Gn)},[(0,r.withDirectives)((0,r.createElementVNode)("div",Y,te,512),[[r.vShow,it.equal(Gn)]])],14,ve))),128))]))),128))])],8,ge)}var ye={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},me={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Ie={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Oe={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},we={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Ye={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},He={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},et={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},bt={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Nt={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},ct={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Ot={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Le={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},qe={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},De={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},Te={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Ge={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},nt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},Tt={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},Kt={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},dt={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},$t={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},Gt={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},mn="#ffffff",On="#000000",Rn={red:ye,pink:me,purple:Ie,deepPurple:Oe,indigo:we,blue:Ye,lightBlue:He,cyan:et,teal:bt,green:Nt,lightGreen:ct,lime:Ot,yellow:Le,amber:qe,orange:De,deepOrange:Te,brown:Ge,grey:nt,blueGrey:Tt,darkText:Kt,lightText:dt,darkIcons:$t,lightIcons:Gt,white:mn,black:On};const gn=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],wn=["900","700","500","300","100"],ls=(()=>{const xe=[];return gn.forEach(ut=>{let At=[];ut.toLowerCase()==="black"||ut.toLowerCase()==="white"?At=At.concat(["#000000","#FFFFFF"]):wn.forEach(Yt=>{const Qt=Rn[ut][Yt];At.push(Qt.toUpperCase())}),xe.push(At)}),xe})();var ns={name:"Swatches",mixins:[b],props:{palette:{type:Array,default(){return ls}}},computed:{pick(){return this.colors.hex}},methods:{equal(xe){return xe.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(xe){this.colorChange({hex:xe,source:"hex"})}}};s(193);var gt=(0,x.Z)(ns,[["render",le]]);const vn={role:"heading",class:"vc-ps-head"},vs={class:"vc-ps-body"},ma={class:"vc-ps-saturation-wrap"},Ha={class:"vc-ps-hue-wrap"},wo=(0,r.createElementVNode)("div",{class:"vc-ps-hue-pointer"},[(0,r.createElementVNode)("i",{class:"vc-ps-hue-pointer--left"}),(0,r.createElementVNode)("i",{class:"vc-ps-hue-pointer--right"})],-1),Wa={class:"vc-ps-previews"},yl={class:"vc-ps-previews__label"},$n={class:"vc-ps-previews__swatches"},Ma=["aria-label"],Ka=["aria-label"],za={class:"vc-ps-previews__label"},ja={key:0,class:"vc-ps-actions"},ft=["aria-label"],kt=["aria-label"],dn={class:"vc-ps-fields"},In=(0,r.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1),Me=(0,r.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1);function Ve(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("saturation"),an=(0,r.resolveComponent)("hue"),Gn=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"PhotoShop color picker",class:(0,r.normalizeClass)(["vc-photoshop",At.disableFields?"vc-photoshop__disable-fields":""])},[(0,r.createElementVNode)("div",vn,(0,r.toDisplayString)(At.head),1),(0,r.createElementVNode)("div",vs,[(0,r.createElementVNode)("div",ma,[(0,r.createVNode)(Ht,{modelValue:xe.colors,"onUpdate:modelValue":ut[0]||(ut[0]=rs=>xe.colors=rs),onChange:it.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Ha,[(0,r.createVNode)(an,{modelValue:xe.colors,"onUpdate:modelValue":ut[1]||(ut[1]=rs=>xe.colors=rs),onChange:it.childChange,direction:"vertical"},{default:(0,r.withCtx)(()=>[wo]),_:1},8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["vc-ps-controls",At.disableFields?"vc-ps-controls__disable-fields":""])},[(0,r.createElementVNode)("div",Wa,[(0,r.createElementVNode)("div",yl,(0,r.toDisplayString)(At.newLabel),1),(0,r.createElementVNode)("div",$n,[(0,r.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`New color is ${xe.colors.hex}`,style:(0,r.normalizeStyle)({background:xe.colors.hex})},null,12,Ma),(0,r.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`Current color is ${Qt.currentColor}`,style:(0,r.normalizeStyle)({background:Qt.currentColor}),onClick:ut[2]||(ut[2]=(...rs)=>it.clickCurrentColor&&it.clickCurrentColor(...rs))},null,12,Ka)]),(0,r.createElementVNode)("div",za,(0,r.toDisplayString)(At.currentLabel),1)]),At.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",ja,[(0,r.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":At.acceptLabel,onClick:ut[3]||(ut[3]=(...rs)=>it.handleAccept&&it.handleAccept(...rs))},(0,r.toDisplayString)(At.acceptLabel),9,ft),(0,r.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":At.cancelLabel,onClick:ut[4]||(ut[4]=(...rs)=>it.handleCancel&&it.handleCancel(...rs))},(0,r.toDisplayString)(At.cancelLabel),9,kt),(0,r.createElementVNode)("div",dn,[(0,r.createVNode)(Gn,{label:"h",desc:"",modelValue:it.hsv.h,onChange:it.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Gn,{label:"s",desc:"%",modelValue:it.hsv.s,max:100,onChange:it.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Gn,{label:"v",desc:"%",modelValue:it.hsv.v,max:100,onChange:it.inputChange},null,8,["modelValue","onChange"]),In,(0,r.createVNode)(Gn,{label:"r",modelValue:xe.colors.rgba.r,onChange:it.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Gn,{label:"g",modelValue:xe.colors.rgba.g,onChange:it.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Gn,{label:"b",modelValue:xe.colors.rgba.b,onChange:it.inputChange},null,8,["modelValue","onChange"]),Me,(0,r.createVNode)(Gn,{label:"#",class:"vc-ps-fields__hex",modelValue:it.hex,onChange:it.inputChange},null,8,["modelValue","onChange"])]),At.hasResetButton?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"vc-ps-ac-btn","aria-label":"reset",onClick:ut[5]||(ut[5]=(...rs)=>it.handleReset&&it.handleReset(...rs))},(0,r.toDisplayString)(At.resetLabel),1)):(0,r.createCommentVNode)("",!0)]))],2)])],2)}const tt=(0,r.createElementVNode)("div",{class:"vc-saturation--white"},null,-1),vt=(0,r.createElementVNode)("div",{class:"vc-saturation--black"},null,-1),Dt=[(0,r.createElementVNode)("div",{class:"vc-saturation-circle"},null,-1)];function sn(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-saturation",style:(0,r.normalizeStyle)({background:it.bgColor}),ref:"container",onMousedown:ut[0]||(ut[0]=(...Ht)=>it.handleMouseDown&&it.handleMouseDown(...Ht)),onTouchmove:ut[1]||(ut[1]=(...Ht)=>it.handleChange&&it.handleChange(...Ht)),onTouchstart:ut[2]||(ut[2]=(...Ht)=>it.handleChange&&it.handleChange(...Ht))},[tt,vt,(0,r.createElementVNode)("div",{class:"vc-saturation-pointer",style:(0,r.normalizeStyle)({top:it.pointerTop,left:it.pointerLeft})},Dt,4)],36)}var We=s(9428),Zt=s.n(We),Tn=s(9289),is={name:"Saturation",props:{modelValue:Object},computed:{colors(){return this.modelValue},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-(this.colors.hsv.v*100)+1+100+"%"},pointerLeft(){return this.colors.hsv.s*100+"%"}},methods:{throttle:Tn((xe,ut)=>{xe(ut)},20,{leading:!0,trailing:!1}),handleChange(xe,ut){!ut&&xe.preventDefault();const At=this.$refs.container;if(!At)return;const Yt=At.clientWidth,Qt=At.clientHeight,it=At.getBoundingClientRect().left+window.pageXOffset,Ht=At.getBoundingClientRect().top+window.pageYOffset,an=xe.pageX||(xe.touches?xe.touches[0].pageX:0),Gn=xe.pageY||(xe.touches?xe.touches[0].pageY:0),rs=Zt()(an-it,0,Yt),bs=Zt()(Gn-Ht,0,Qt),_n=rs/Yt,Sl=Zt()(-(bs/Qt)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:_n,v:Sl,a:this.colors.hsv.a,source:"hsva"})},onChange(xe){this.$emit("change",xe)},handleMouseDown(xe){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(xe){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(5233);var Yn=(0,x.Z)(is,[["render",sn]]),ni={name:"Photoshop",mixins:[b],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:Yn,hue:je,"ed-in":ue},data(){return{currentColor:"#FFF"}},computed:{hsv(){const xe=this.colors.hsv;return{h:xe.h.toFixed(),s:(xe.s*100).toFixed(),v:(xe.v*100).toFixed()}},hex(){const xe=this.colors.hex;return xe&&xe.replace("#","")}},created(){this.currentColor=this.colors.hex},methods:{childChange(xe){this.colorChange(xe)},inputChange(xe){xe&&(xe["#"]?this.isValidHex(xe["#"])&&this.colorChange({hex:xe["#"],source:"hex"}):xe.r||xe.g||xe.b||xe.a?this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}):(xe.h||xe.s||xe.v)&&this.colorChange({h:xe.h||this.colors.hsv.h,s:xe.s/100||this.colors.hsv.s,v:xe.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept(){this.$emit("ok")},handleCancel(){this.$emit("cancel")},handleReset(){this.$emit("reset")}}};s(1902);var rv=(0,x.Z)(ni,[["render",Ve]]);const y2={class:"vc-sketch-saturation-wrap"},S2={class:"vc-sketch-controls"},I2={class:"vc-sketch-sliders"},C2={class:"vc-sketch-hue-wrap"},x2={key:0,class:"vc-sketch-alpha-wrap"},N2={class:"vc-sketch-color-wrap"},O2=["aria-label"],w2={key:0,class:"vc-sketch-field"},R2={class:"vc-sketch-field--double"},$2={class:"vc-sketch-field--single"},M2={class:"vc-sketch-field--single"},k2={class:"vc-sketch-field--single"},L2={key:0,class:"vc-sketch-field--single"},D2={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},P2=["aria-label","onClick"],B2=["aria-label","onClick"];function F2(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("saturation"),an=(0,r.resolveComponent)("hue"),Gn=(0,r.resolveComponent)("alpha"),rs=(0,r.resolveComponent)("checkboard"),bs=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Sketch color picker",class:(0,r.normalizeClass)(["vc-sketch",At.disableAlpha?"vc-sketch__disable-alpha":""])},[(0,r.createElementVNode)("div",y2,[(0,r.createVNode)(Ht,{modelValue:xe.colors,"onUpdate:modelValue":ut[0]||(ut[0]=_n=>xe.colors=_n),onChange:it.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",S2,[(0,r.createElementVNode)("div",I2,[(0,r.createElementVNode)("div",C2,[(0,r.createVNode)(an,{modelValue:xe.colors,"onUpdate:modelValue":ut[1]||(ut[1]=_n=>xe.colors=_n),onChange:it.childChange},null,8,["modelValue","onChange"])]),At.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",x2,[(0,r.createVNode)(Gn,{modelValue:xe.colors,"onUpdate:modelValue":ut[2]||(ut[2]=_n=>xe.colors=_n),onChange:it.childChange},null,8,["modelValue","onChange"])]))]),(0,r.createElementVNode)("div",N2,[(0,r.createElementVNode)("div",{"aria-label":`Current color is ${it.activeColor}`,class:"vc-sketch-active-color",style:(0,r.normalizeStyle)({background:it.activeColor})},null,12,O2),(0,r.createVNode)(rs)])]),At.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",w2,[(0,r.createElementVNode)("div",R2,[(0,r.createVNode)(bs,{label:"hex",modelValue:it.hex,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",$2,[(0,r.createVNode)(bs,{label:"r",modelValue:xe.colors.rgba.r,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",M2,[(0,r.createVNode)(bs,{label:"g",modelValue:xe.colors.rgba.g,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",k2,[(0,r.createVNode)(bs,{label:"b",modelValue:xe.colors.rgba.b,onChange:it.inputChange},null,8,["modelValue","onChange"])]),At.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",L2,[(0,r.createVNode)(bs,{label:"a",modelValue:xe.colors.a,"arrow-offset":.01,max:1,onChange:it.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))])),(0,r.createElementVNode)("div",D2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(At.presetColors,_n=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[xe.isTransparent(_n)?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:"else-"+_n,"aria-label":"Color:"+_n,class:"vc-sketch-presets-color",onClick:Sl=>it.handlePreset(_n)},[(0,r.createVNode)(rs)],8,B2)):((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-sketch-presets-color","aria-label":"Color:"+_n,key:"if-"+_n,style:(0,r.normalizeStyle)({background:_n}),onClick:Sl=>it.handlePreset(_n)},null,12,P2))],64))),256))])],2)}const U2={class:"vc-alpha"},G2={class:"vc-alpha-checkboard-wrap"},V2=[(0,r.createElementVNode)("div",{class:"vc-alpha-picker"},null,-1)];function H2(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("checkboard");return(0,r.openBlock)(),(0,r.createElementBlock)("div",U2,[(0,r.createElementVNode)("div",G2,[(0,r.createVNode)(Ht)]),(0,r.createElementVNode)("div",{class:"vc-alpha-gradient",style:(0,r.normalizeStyle)({background:it.gradientColor})},null,4),(0,r.createElementVNode)("div",{class:"vc-alpha-container",ref:"container",onMousedown:ut[0]||(ut[0]=(...an)=>it.handleMouseDown&&it.handleMouseDown(...an)),onTouchmove:ut[1]||(ut[1]=(...an)=>it.handleChange&&it.handleChange(...an)),onTouchstart:ut[2]||(ut[2]=(...an)=>it.handleChange&&it.handleChange(...an))},[(0,r.createElementVNode)("div",{class:"vc-alpha-pointer",style:(0,r.normalizeStyle)({left:it.colors.a*100+"%"})},V2,4)],544)])}function W2(xe,ut,At,Yt,Qt,it){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-checkerboard",style:(0,r.normalizeStyle)(it.bgStyle)},null,4)}const Qp={};var K2={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+j2(this.white,this.grey,this.size)+")"}}}};function z2(xe,ut,At){if(typeof document>"u")return null;const Yt=document.createElement("canvas");Yt.width=Yt.height=At*2;const Qt=Yt.getContext("2d");return Qt?(Qt.fillStyle=xe,Qt.fillRect(0,0,Yt.width,Yt.height),Qt.fillStyle=ut,Qt.fillRect(0,0,At,At),Qt.translate(At,At),Qt.fillRect(0,0,At,At),Yt.toDataURL()):null}function j2(xe,ut,At){const Yt=xe+","+ut+","+At;if(Qp[Yt])return Qp[Yt];{const Qt=z2(xe,ut,At);return Qp[Yt]=Qt,Qt}}s(3205);var Vr=(0,x.Z)(K2,[["render",W2]]),Y2={name:"Alpha",props:{modelValue:Object,onChange:Function},components:{checkboard:Vr},computed:{colors(){return this.modelValue},gradientColor(){const xe=this.colors.rgba,ut=[xe.r,xe.g,xe.b].join(",");return"linear-gradient(to right, rgba("+ut+", 0) 0%, rgba("+ut+", 1) 100%)"}},methods:{handleChange(xe,ut){!ut&&xe.preventDefault();const At=this.$refs.container;if(!At)return;const Yt=At.clientWidth,Qt=At.getBoundingClientRect().left+window.pageXOffset,Ht=(xe.pageX||(xe.touches?xe.touches[0].pageX:0))-Qt;let an;Ht<0?an=0:Ht>Yt?an=1:an=Math.round(Ht*100/Yt)/100,this.colors.a!==an&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:an,source:"rgba"})},handleMouseDown(xe){this.handleChange(xe,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6320);var _d=(0,x.Z)(Y2,[["render",H2]]);const X2=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var q2={name:"Sketch",mixins:[b],components:{saturation:Yn,hue:je,alpha:_d,"ed-in":ue,checkboard:Vr},props:{presetColors:{type:Array,default(){return X2}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let xe;return this.colors.a<1?xe=this.colors.hex8:xe=this.colors.hex,xe.replace("#","")},activeColor(){const xe=this.colors.rgba;return"rgba("+[xe.r,xe.g,xe.b,xe.a].join(",")+")"}},methods:{handlePreset(xe){this.colorChange({hex:xe,source:"hex"})},childChange(xe){this.colorChange(xe)},inputChange(xe){xe&&(xe.hex?this.isValidHex(xe.hex)&&this.colorChange({hex:xe.hex,source:"hex"}):(xe.r||xe.g||xe.b||xe.a)&&this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}))}}};s(5815);var cv=(0,x.Z)(q2,[["render",F2]]);const Z2={class:"vc-chrome-saturation-wrap"},Q2={class:"vc-chrome-body"},J2={class:"vc-chrome-controls"},eC={class:"vc-chrome-color-wrap"},tC=["aria-label"],nC={class:"vc-chrome-sliders"},sC={class:"vc-chrome-hue-wrap"},aC={key:0,class:"vc-chrome-alpha-wrap"},oC={key:0,class:"vc-chrome-fields-wrap"},lC={class:"vc-chrome-fields"},iC={class:"vc-chrome-field"},rC={class:"vc-chrome-fields"},cC={class:"vc-chrome-field"},dC={class:"vc-chrome-field"},uC={class:"vc-chrome-field"},pC={key:0,class:"vc-chrome-field"},mC={class:"vc-chrome-fields"},hC={class:"vc-chrome-field"},fC={class:"vc-chrome-field"},gC={class:"vc-chrome-field"},_C={key:0,class:"vc-chrome-field"},vC={class:"vc-chrome-toggle-icon"},bC=[(0,r.createElementVNode)("path",{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},null,-1)],EC={class:"vc-chrome-toggle-icon-highlight"};function TC(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("saturation"),an=(0,r.resolveComponent)("checkboard"),Gn=(0,r.resolveComponent)("hue"),rs=(0,r.resolveComponent)("alpha"),bs=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Chrome color picker",class:(0,r.normalizeClass)(["vc-chrome",At.disableAlpha?"vc-chrome__disable-alpha":""])},[(0,r.createElementVNode)("div",Z2,[(0,r.createVNode)(Ht,{modelValue:xe.colors,"onUpdate:modelValue":ut[0]||(ut[0]=_n=>xe.colors=_n),onChange:it.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Q2,[(0,r.createElementVNode)("div",J2,[(0,r.createElementVNode)("div",eC,[(0,r.createElementVNode)("div",{"aria-label":`current color is ${xe.colors.hex}`,class:"vc-chrome-active-color",style:(0,r.normalizeStyle)({background:it.activeColor})},null,12,tC),At.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(an,{key:0}))]),(0,r.createElementVNode)("div",nC,[(0,r.createElementVNode)("div",sC,[(0,r.createVNode)(Gn,{modelValue:xe.colors,"onUpdate:modelValue":ut[1]||(ut[1]=_n=>xe.colors=_n),onChange:it.childChange},null,8,["modelValue","onChange"])]),At.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",aC,[(0,r.createVNode)(rs,{modelValue:xe.colors,"onUpdate:modelValue":ut[2]||(ut[2]=_n=>xe.colors=_n),onChange:it.childChange},null,8,["modelValue","onChange"])]))])]),At.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",oC,[(0,r.withDirectives)((0,r.createElementVNode)("div",lC,[(0,r.createElementVNode)("div",iC,[it.hasAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(bs,{key:0,label:"hex",modelValue:xe.colors.hex,onChange:it.inputChange},null,8,["modelValue","onChange"])),it.hasAlpha?((0,r.openBlock)(),(0,r.createBlock)(bs,{key:1,label:"hex",modelValue:xe.colors.hex8,onChange:it.inputChange},null,8,["modelValue","onChange"])):(0,r.createCommentVNode)("",!0)])],512),[[r.vShow,Qt.fieldsIndex===0]]),(0,r.withDirectives)((0,r.createElementVNode)("div",rC,[(0,r.createElementVNode)("div",cC,[(0,r.createVNode)(bs,{label:"r",modelValue:xe.colors.rgba.r,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",dC,[(0,r.createVNode)(bs,{label:"g",modelValue:xe.colors.rgba.g,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",uC,[(0,r.createVNode)(bs,{label:"b",modelValue:xe.colors.rgba.b,onChange:it.inputChange},null,8,["modelValue","onChange"])]),At.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",pC,[(0,r.createVNode)(bs,{label:"a",modelValue:xe.colors.a,"arrow-offset":.01,max:1,onChange:it.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[r.vShow,Qt.fieldsIndex===1]]),(0,r.withDirectives)((0,r.createElementVNode)("div",mC,[(0,r.createElementVNode)("div",hC,[(0,r.createVNode)(bs,{label:"h",modelValue:it.hsl.h,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",fC,[(0,r.createVNode)(bs,{label:"s",modelValue:it.hsl.s,onChange:it.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",gC,[(0,r.createVNode)(bs,{label:"l",modelValue:it.hsl.l,onChange:it.inputChange},null,8,["modelValue","onChange"])]),At.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",_C,[(0,r.createVNode)(bs,{label:"a",modelValue:xe.colors.a,"arrow-offset":.01,max:1,onChange:it.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[r.vShow,Qt.fieldsIndex===2]]),(0,r.createElementVNode)("div",{class:"vc-chrome-toggle-btn",role:"button","aria-label":"Change another color definition",onClick:ut[6]||(ut[6]=(..._n)=>it.toggleViews&&it.toggleViews(..._n))},[(0,r.createElementVNode)("div",vC,[((0,r.openBlock)(),(0,r.createElementBlock)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",onMouseover:ut[3]||(ut[3]=(..._n)=>it.showHighlight&&it.showHighlight(..._n)),onMouseenter:ut[4]||(ut[4]=(..._n)=>it.showHighlight&&it.showHighlight(..._n)),onMouseout:ut[5]||(ut[5]=(..._n)=>it.hideHighlight&&it.hideHighlight(..._n))},bC,32))]),(0,r.withDirectives)((0,r.createElementVNode)("div",EC,null,512),[[r.vShow,Qt.highlight]])])]))])],2)}var AC={name:"Chrome",mixins:[b],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:Yn,hue:je,alpha:_d,"ed-in":ue,checkboard:Vr},data(){return{fieldsIndex:0,highlight:!1}},computed:{hsl(){const{h:xe,s:ut,l:At}=this.colors.hsl;return{h:xe.toFixed(),s:`${(ut*100).toFixed()}%`,l:`${(At*100).toFixed()}%`}},activeColor(){const xe=this.colors.rgba;return"rgba("+[xe.r,xe.g,xe.b,xe.a].join(",")+")"},hasAlpha(){return this.colors.a<1}},methods:{childChange(xe){this.colorChange(xe)},inputChange(xe){if(xe){if(xe.hex)this.isValidHex(xe.hex)&&this.colorChange({hex:xe.hex,source:"hex"});else if(xe.r||xe.g||xe.b||xe.a)this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"});else if(xe.h||xe.s||xe.l){const ut=xe.s?xe.s.replace("%","")/100:this.colors.hsl.s,At=xe.l?xe.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:xe.h||this.colors.hsl.h,s:ut,l:At,source:"hsl"})}}},toggleViews(){if(this.fieldsIndex>=2){this.fieldsIndex=0;return}this.fieldsIndex++},showHighlight(){this.highlight=!0},hideHighlight(){this.highlight=!1}}};s(3647);var dv=(0,x.Z)(AC,[["render",TC]]);const yC=(0,r.createElementVNode)("div",{class:"vc-twitter-triangle-shadow"},null,-1),SC=(0,r.createElementVNode)("div",{class:"vc-twitter-triangle"},null,-1),IC={class:"vc-twitter-body"},CC=["onClick"],xC=(0,r.createElementVNode)("div",{class:"vc-twitter-hash"},"#",-1),NC=(0,r.createElementVNode)("div",{class:"vc-twitter-clear"},null,-1);function OC(xe,ut,At,Yt,Qt,it){const Ht=(0,r.resolveComponent)("editable-input");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-twitter",{"vc-twitter-hide-triangle ":At.triangle==="hide","vc-twitter-top-left-triangle ":At.triangle==="top-left","vc-twitter-top-right-triangle ":At.triangle==="top-right"}]),style:(0,r.normalizeStyle)({width:typeof At.width=="number"?`${At.width}px`:At.width})},[yC,SC,(0,r.createElementVNode)("div",IC,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(At.defaultColors,(an,Gn)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{class:"vc-twitter-swatch",style:(0,r.normalizeStyle)({background:an,boxShadow:`0 0 4px ${it.equal(an)?an:"transparent"}`}),key:Gn,onClick:rs=>it.handlerClick(an)},null,12,CC))),128)),xC,(0,r.createVNode)(Ht,{label:"#",modelValue:it.hex,onChange:it.inputChange},null,8,["modelValue","onChange"]),NC])],6)}const wC=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];var RC={name:"Twitter",mixins:[b],components:{editableInput:ue},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default(){return wC}},triangle:{default:"top-left",validator(xe){return["hide","top-left","top-right"].includes(xe)}}},computed:{hsv(){const xe=this.colors.hsv;return{h:xe.h.toFixed(),s:(xe.s*100).toFixed(),v:(xe.v*100).toFixed()}},hex(){const xe=this.colors.hex;return xe&&xe.replace("#","")}},methods:{equal(xe){return xe.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(xe){this.colorChange({hex:xe,source:"hex"})},inputChange(xe){xe&&(xe["#"]?this.isValidHex(xe["#"])&&this.colorChange({hex:xe["#"],source:"hex"}):xe.r||xe.g||xe.b||xe.a?this.colorChange({r:xe.r||this.colors.rgba.r,g:xe.g||this.colors.rgba.g,b:xe.b||this.colors.rgba.b,a:xe.a||this.colors.rgba.a,source:"rgba"}):(xe.h||xe.s||xe.v)&&this.colorChange({h:xe.h||this.colors.hsv.h,s:xe.s/100||this.colors.hsv.s,v:xe.v/100||this.colors.hsv.v,source:"hsv"}))}}};s(1113);var uv=(0,x.Z)(RC,[["render",OC]]);const pv=i.i8,mv={version:pv,Compact:N,Grayscale:M,Twitter:uv,Material:Ze,Slider:Ue,Swatches:gt,Photoshop:rv,Sketch:cv,Chrome:dv,Alpha:_d,Checkboard:Vr,EditableInput:ue,Hue:je,Saturation:Yn,ColorMixin:b};typeof process=="object"&&String(process)==="[object process]"||(window.VueColor=mv);var $C=mv,MC=$C})(),e.exports=a})()})(qT);var ZT=qT.exports;const p$={components:{Chrome:ZT.Chrome},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{isPickerOpen:!1}},methods:{closeTogglePicker(){this.isPickerOpen&&this.toggleColorPicker()},toggleColorPicker(){this.isPickerOpen=!this.isPickerOpen},updateColor(e){this.$emit("update:modelValue",e.hex)}}},m$={class:"colorpicker"};function h$(e,t,n,s,a,o){const l=z("Chrome"),i=_t("on-clickaway");return p(),f("div",m$,[c("div",{class:"colorpicker--selected",style:Ct(`background-color: ${n.modelValue}`),onClick:t[0]||(t[0]=ze((...r)=>o.toggleColorPicker&&o.toggleColorPicker(...r),["prevent"]))},null,4),a.isPickerOpen?pe((p(),V(l,{key:0,"disable-alpha":"","model-value":n.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":o.updateColor},null,8,["model-value","onUpdate:modelValue"])),[[i,o.closeTogglePicker]]):O("",!0)])}const f$=Fe(p$,[["render",h$],["__scopeId","data-v-71674f87"]]);function no(e){return DC()?(PC(e),!0):!1}function as(e){return typeof e=="function"?e():I(e)}const vr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const QT=e=>e!=null,g$=Object.prototype.toString,JT=e=>g$.call(e)==="[object Object]",Ja=()=>{},br=_$();function _$(){var e,t;return vr&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function v$(e,t){function n(...s){return new Promise((a,o)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(a).catch(o)})}return n}const eA=e=>e();function b$(e=eA){const t=F(!0);function n(){t.value=!1}function s(){t.value=!0}const a=(...o)=>{t.value&&e(...o)};return{isActive:Jf(t),pause:n,resume:s,eventFilter:a}}function E$(e){return qu()}function tA(...e){if(e.length!==1)return xc(...e);const t=e[0];return typeof t=="function"?Jf(BC(()=>({get:t,set:Ja}))):F(t)}function T$(e,t,n={}){const{eventFilter:s=eA,...a}=n;return ot(e,v$(s,t),a)}function A$(e,t,n={}){const{eventFilter:s,...a}=n,{eventFilter:o,pause:l,resume:i,isActive:r}=b$(s);return{stop:T$(e,t,{...a,eventFilter:o}),pause:l,resume:i,isActive:r}}function rp(e,t=!0,n){E$()?pt(e,n):t?e():jt(e)}function y$(e,t=1e3,n={}){const{immediate:s=!0,immediateCallback:a=!1}=n;let o=null;const l=F(!1);function i(){o&&(clearInterval(o),o=null)}function r(){l.value=!1,i()}function d(){const u=as(t);u<=0||(l.value=!0,a&&e(),i(),l.value&&(o=setInterval(e,u)))}if(s&&vr&&d(),Xu(t)||typeof t=="function"){const u=ot(t,()=>{l.value&&vr&&d()});no(u)}return no(r),{isActive:l,pause:r,resume:d}}function S$(e,t,n={}){const{immediate:s=!0}=n,a=F(!1);let o=null;function l(){o&&(clearTimeout(o),o=null)}function i(){a.value=!1,l()}function r(...d){l(),a.value=!0,o=setTimeout(()=>{a.value=!1,o=null,e(...d)},as(t))}return s&&(a.value=!0,vr&&r()),no(i),{isPending:Jf(a),start:r,stop:i}}function Xn(e=!1,t={}){const{truthyValue:n=!0,falsyValue:s=!1}=t,a=Xu(e),o=F(e);function l(i){if(arguments.length)return o.value=i,o.value;{const r=as(n);return o.value=o.value===r?as(s):r,o.value}}return a?l:[o,l]}const Zo=vr?window:void 0;function qs(e){var t;const n=as(e);return(t=n==null?void 0:n.$el)!=null?t:n}function ba(...e){let t,n,s,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,a]=e,t=Zo):[t,n,s,a]=e,!t)return Ja;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],l=()=>{o.forEach(u=>u()),o.length=0},i=(u,m,h,_)=>(u.addEventListener(m,h,_),()=>u.removeEventListener(m,h,_)),r=ot(()=>[qs(t),as(a)],([u,m])=>{if(l(),!u)return;const h=JT(m)?{...m}:m;o.push(...n.flatMap(_=>s.map(g=>i(u,_,g,h))))},{immediate:!0,flush:"post"}),d=()=>{r(),l()};return no(d),d}let Db=!1;function I$(e,t,n={}){const{window:s=Zo,ignore:a=[],capture:o=!0,detectIframe:l=!1}=n;if(!s)return Ja;br&&!Db&&(Db=!0,Array.from(s.document.body.children).forEach(T=>T.addEventListener("click",Ja)),s.document.documentElement.addEventListener("click",Ja));let i=!0;const r=T=>as(a).some(S=>{if(typeof S=="string")return Array.from(s.document.querySelectorAll(S)).some(b=>b===T.target||T.composedPath().includes(b));{const b=qs(S);return b&&(T.target===b||T.composedPath().includes(b))}});function d(T){const S=as(T);return S&&S.$.subTree.shapeFlag===16}function u(T,S){const b=as(T),A=b.$.subTree&&b.$.subTree.children;return A==null||!Array.isArray(A)?!1:A.some(y=>y.el===S.target||S.composedPath().includes(y.el))}const m=T=>{const S=qs(e);if(T.target!=null&&!(!(S instanceof Element)&&d(e)&&u(e,T))&&!(!S||S===T.target||T.composedPath().includes(S))){if(T.detail===0&&(i=!r(T)),!i){i=!0;return}t(T)}};let h=!1;const _=[ba(s,"click",T=>{h||(h=!0,setTimeout(()=>{h=!1},0),m(T))},{passive:!0,capture:o}),ba(s,"pointerdown",T=>{const S=qs(e);i=!r(T)&&!!(S&&!T.composedPath().includes(S))},{passive:!0}),l&&ba(s,"blur",T=>{setTimeout(()=>{var S;const b=qs(e);((S=s.document.activeElement)==null?void 0:S.tagName)==="IFRAME"&&!(b!=null&&b.contains(s.document.activeElement))&&t(T)},0)})].filter(Boolean);return()=>_.forEach(T=>T())}function C$(){const e=F(!1),t=qu();return t&&pt(()=>{e.value=!0},t),e}function cp(e){const t=C$();return C(()=>(t.value,!!e()))}function x$(e,t,n={}){const{window:s=Zo,...a}=n;let o;const l=cp(()=>s&&"MutationObserver"in s),i=()=>{o&&(o.disconnect(),o=void 0)},r=C(()=>{const h=as(e),_=(Array.isArray(h)?h:[h]).map(qs).filter(QT);return new Set(_)}),d=ot(()=>r.value,h=>{i(),l.value&&h.size&&(o=new MutationObserver(t),h.forEach(_=>o.observe(_,a)))},{immediate:!0,flush:"post"}),u=()=>o==null?void 0:o.takeRecords(),m=()=>{d(),i()};return no(m),{isSupported:l,stop:m,takeRecords:u}}function N$(e,t={}){const{window:n=Zo}=t,s=cp(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let a;const o=F(!1),l=d=>{o.value=d.matches},i=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",l):a.removeListener(l))},r=va(()=>{s.value&&(i(),a=n.matchMedia(as(e)),"addEventListener"in a?a.addEventListener("change",l):a.addListener(l),o.value=a.matches)});return no(()=>{r(),i(),a=void 0}),o}const Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yd="__vueuse_ssr_handlers__",O$=w$();function w$(){return yd in Ad||(Ad[yd]=Ad[yd]||{}),Ad[yd]}function R$(e,t){return O$[e]||t}function $$(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const M$={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Pb="vueuse-storage";function k$(e,t,n,s={}){var a;const{flush:o="pre",deep:l=!0,listenToStorageChanges:i=!0,writeDefaults:r=!0,mergeDefaults:d=!1,shallow:u,window:m=Zo,eventFilter:h,onError:_=B=>{console.error(B)},initOnMounted:g}=s,T=(u?Zu:F)(t);if(!n)try{n=R$("getDefaultStorage",()=>{var B;return(B=Zo)==null?void 0:B.localStorage})()}catch(B){_(B)}if(!n)return T;const S=as(t),b=$$(S),A=(a=s.serializer)!=null?a:M$[b],{pause:y,resume:x}=A$(T,()=>N(T.value),{flush:o,deep:l,eventFilter:h});m&&i&&rp(()=>{n instanceof Storage?ba(m,"storage",D):ba(m,Pb,H),g&&D()}),g||D();function $(B,k){if(m){const U={key:e,oldValue:B,newValue:k,storageArea:n};m.dispatchEvent(n instanceof Storage?new StorageEvent("storage",U):new CustomEvent(Pb,{detail:U}))}}function N(B){try{const k=n.getItem(e);if(B==null)$(k,null),n.removeItem(e);else{const U=A.write(B);k!==U&&(n.setItem(e,U),$(k,U))}}catch(k){_(k)}}function w(B){const k=B?B.newValue:n.getItem(e);if(k==null)return r&&S!=null&&n.setItem(e,A.write(S)),S;if(!B&&d){const U=A.read(k);return typeof d=="function"?d(U,S):b==="object"&&!Array.isArray(U)?{...S,...U}:U}else return typeof k!="string"?k:A.read(k)}function D(B){if(!(B&&B.storageArea!==n)){if(B&&B.key==null){T.value=S;return}if(!(B&&B.key!==e)){y();try{(B==null?void 0:B.newValue)!==A.write(T.value)&&(T.value=w(B))}catch(k){_(k)}finally{B?jt(x):x()}}}}function H(B){D(B.detail)}return T}function nA(e,t,n={}){const{window:s=Zo,...a}=n;let o;const l=cp(()=>s&&"ResizeObserver"in s),i=()=>{o&&(o.disconnect(),o=void 0)},r=C(()=>{const m=as(e);return Array.isArray(m)?m.map(h=>qs(h)):[qs(m)]}),d=ot(r,m=>{if(i(),l.value&&s){o=new ResizeObserver(t);for(const h of m)h&&o.observe(h,a)}},{immediate:!0,flush:"post"}),u=()=>{i(),d()};return no(u),{isSupported:l,stop:u}}function Ou(e,t={}){const{reset:n=!0,windowResize:s=!0,windowScroll:a=!0,immediate:o=!0,updateTiming:l="sync"}=t,i=F(0),r=F(0),d=F(0),u=F(0),m=F(0),h=F(0),_=F(0),g=F(0);function T(){const b=qs(e);if(!b){n&&(i.value=0,r.value=0,d.value=0,u.value=0,m.value=0,h.value=0,_.value=0,g.value=0);return}const A=b.getBoundingClientRect();i.value=A.height,r.value=A.bottom,d.value=A.left,u.value=A.right,m.value=A.top,h.value=A.width,_.value=A.x,g.value=A.y}function S(){l==="sync"?T():l==="next-frame"&&requestAnimationFrame(()=>T())}return nA(e,S),ot(()=>qs(e),b=>!b&&S()),x$(e,S,{attributeFilter:["style","class"]}),a&&ba("scroll",S,{capture:!0,passive:!0}),s&&ba("resize",S,{passive:!0}),rp(()=>{o&&S()}),{height:i,bottom:r,left:d,right:u,top:m,width:h,x:_,y:g,update:S}}function Er(e,t={width:0,height:0},n={}){const{window:s=Zo,box:a="content-box"}=n,o=C(()=>{var m,h;return(h=(m=qs(e))==null?void 0:m.namespaceURI)==null?void 0:h.includes("svg")}),l=F(t.width),i=F(t.height),{stop:r}=nA(e,([m])=>{const h=a==="border-box"?m.borderBoxSize:a==="content-box"?m.contentBoxSize:m.devicePixelContentBoxSize;if(s&&o.value){const _=qs(e);if(_){const g=_.getBoundingClientRect();l.value=g.width,i.value=g.height}}else if(h){const _=Array.isArray(h)?h:[h];l.value=_.reduce((g,{inlineSize:T})=>g+T,0),i.value=_.reduce((g,{blockSize:T})=>g+T,0)}else l.value=m.contentRect.width,i.value=m.contentRect.height},n);rp(()=>{const m=qs(e);m&&(l.value="offsetWidth"in m?m.offsetWidth:t.width,i.value="offsetHeight"in m?m.offsetHeight:t.height)});const d=ot(()=>qs(e),m=>{l.value=m?t.width:0,i.value=m?t.height:0});function u(){r(),d()}return{width:l,height:i,stop:u}}function L$(e,t,n={}){const{root:s,rootMargin:a="0px",threshold:o=0,window:l=Zo,immediate:i=!0}=n,r=cp(()=>l&&"IntersectionObserver"in l),d=C(()=>{const g=as(e);return(Array.isArray(g)?g:[g]).map(qs).filter(QT)});let u=Ja;const m=F(i),h=r.value?ot(()=>[d.value,qs(s),m.value],([g,T])=>{if(u(),!m.value||!g.length)return;const S=new IntersectionObserver(t,{root:qs(T),rootMargin:a,threshold:o});g.forEach(b=>b&&S.observe(b)),u=()=>{S.disconnect(),u=Ja}},{immediate:i,flush:"post"}):Ja,_=()=>{u(),h(),m.value=!1};return no(_),{isSupported:r,isActive:m,pause(){u(),m.value=!1},resume(){m.value=!0},stop:_}}function jm(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function sA(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:sA(n)}}function D$(e){const t=e||window.event,n=t.target;return sA(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const Ym=new WeakMap;function P$(e,t=!1){const n=F(t);let s=null,a="";ot(tA(e),i=>{const r=jm(as(i));if(r){const d=r;if(Ym.get(d)||Ym.set(d,d.style.overflow),d.style.overflow!=="hidden"&&(a=d.style.overflow),d.style.overflow==="hidden")return n.value=!0;if(n.value)return d.style.overflow="hidden"}},{immediate:!0});const o=()=>{const i=jm(as(e));!i||n.value||(br&&(s=ba(i,"touchmove",r=>{D$(r)},{passive:!1})),i.style.overflow="hidden",n.value=!0)},l=()=>{const i=jm(as(e));!i||!n.value||(br&&(s==null||s()),i.style.overflow=a,Ym.delete(i),n.value=!1)};return no(l),C({get(){return n.value},set(i){i?o():l()}})}function Mi(e={}){const{window:t=Zo,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:a=!0,includeScrollbar:o=!0,type:l="inner"}=e,i=F(n),r=F(s),d=()=>{t&&(l==="outer"?(i.value=t.outerWidth,r.value=t.outerHeight):o?(i.value=t.innerWidth,r.value=t.innerHeight):(i.value=t.document.documentElement.clientWidth,r.value=t.document.documentElement.clientHeight))};if(d(),rp(d),ba("resize",d,{passive:!0}),a){const u=N$("(orientation: portrait)");ot(u,()=>d())}return{width:i,height:r}}const qt={__name:"Modal",props:yn({closeOnBackdropClick:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},onClose:{type:Function,required:!0},fullWidth:{type:Boolean,default:!1},modalType:{type:String,default:"centered"},size:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:yn(["close"],["update:show"]),setup(e,{emit:t}){const n=t,s=jn(e,"show"),a=C(()=>`modal-mask skip-context-menu ${{centered:"","right-aligned":"right-aligned"}[e.modalType]||""}`),o=F(!1),l=()=>{o.value=!0},i=()=>{s.value=!1,n("close"),e.onClose()},r=()=>{o.value&&(o.value=!1,e.closeOnBackdropClick&&i())},d=u=>{s.value&&u.code==="Escape"&&(i(),u.stopPropagation())};return ba(document.body,"mouseup",r),ba(document,"keydown",d),pt(()=>{}),(u,m)=>(p(),V(Ps,{name:"modal-fade"},{default:K(()=>[s.value?(p(),f("div",{key:0,class:re(a.value),transition:"modal",onMousedown:l},[c("div",{class:re(["relative max-h-full overflow-auto bg-n-alpha-3 shadow-md modal-container rtl:text-right skip-context-menu",{"rounded-xl w-[37.5rem]":!e.fullWidth,"items-center rounded-none flex h-full justify-center w-full":e.fullWidth,[e.size]:!0}]),onMouse:m[0]||(m[0]=ze(()=>{},["stop"])),onMousedown:m[1]||(m[1]=h=>h.stopPropagation())},[e.showCloseButton?(p(),V(ce,{key:0,ghost:"",slate:"",icon:"i-lucide-x",class:"absolute z-10 ltr:right-2 rtl:left-2 top-2",onClick:i})):O("",!0),at(u.$slots,"default")],34)],34)):O("",!0)]),_:3}))}},B$={components:{Modal:qt,NextButton:ce},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""},confirmValue:{type:String,default:""},confirmPlaceHolderText:{type:String,default:""}},emits:["onClose","onConfirm","update:show"],setup(){return{v$:Lt()}},data(){return{value:""}},validations:{value:{required:lt,isEqual(e){return e===this.confirmValue}}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{closeModal(){this.value="",this.$emit("onClose")},onConfirm(){this.$emit("onConfirm")}}},F$={class:"flex items-center justify-end gap-2"};function U$(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("NextButton"),d=z("Modal");return p(),V(d,{show:o.localShow,"onUpdate:show":t[2]||(t[2]=u=>o.localShow=u),"on-close":o.closeModal},{default:K(()=>[v(l,{"header-title":n.title,"header-content":n.message},null,8,["header-title","header-content"]),c("form",{onSubmit:t[1]||(t[1]=ze((...u)=>o.onConfirm&&o.onConfirm(...u),["prevent"]))},[v(i,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),type:"text",class:re({error:s.v$.value.$error}),placeholder:n.confirmPlaceHolderText,onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"]),c("div",F$,[v(r,{faded:"",slate:"",type:"reset",label:n.rejectText,onClick:ze(o.closeModal,["prevent"])},null,8,["label","onClick"]),v(r,{ruby:"",type:"submit",label:n.confirmText,disabled:s.v$.value.$invalid},null,8,["label","disabled"])])],32)]),_:1},8,["show","on-close"])}const aA=Fe(B$,[["render",U$]]),G$={components:{Modal:qt,NextButton:ce},props:{title:{type:String,default:"This is a title"},description:{type:String,default:"This is your description"},confirmLabel:{type:String,default:"Yes"},cancelLabel:{type:String,default:"No"}},data:()=>({show:!1,resolvePromise:void 0,rejectPromise:void 0}),methods:{showConfirmation(){return this.show=!0,new Promise((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})},confirm(){this.resolvePromise(!0),this.show=!1},cancel(){this.resolvePromise(!1),this.show=!1}}},V$={class:"h-auto overflow-auto flex flex-col"},H$={class:"flex flex-row justify-end gap-2 py-4 px-6 w-full"};function W$(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("NextButton"),r=z("Modal");return p(),V(r,{show:e.show,"onUpdate:show":t[0]||(t[0]=d=>e.show=d),"on-close":o.cancel},{default:K(()=>[c("div",V$,[v(l,{"header-title":n.title,"header-content":n.description},null,8,["header-title","header-content"]),c("div",H$,[v(i,{faded:"",type:"reset",label:n.cancelLabel,onClick:o.cancel},null,8,["label","onClick"]),v(i,{type:"submit",label:n.confirmLabel,onClick:o.confirm},null,8,["label","onClick"])])])]),_:1},8,["show","on-close"])}const K$=Fe(G$,[["render",W$]]),z$={class:"flex items-center justify-end gap-2 p-8"},j$={__name:"DeleteModal",props:yn({onClose:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},title:{type:String,default:""},message:{type:String,default:""},messageValue:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(e){const t=jn(e,"show");return(n,s)=>{const a=z("woot-modal-header");return p(),V(qt,{show:t.value,"onUpdate:show":s[0]||(s[0]=o=>t.value=o),"on-close":e.onClose},{default:K(()=>[v(a,{"header-title":e.title,"header-content":e.message,"header-content-value":e.messageValue},null,8,["header-title","header-content","header-content-value"]),c("div",z$,[v(ce,{faded:"",slate:"",type:"reset",label:e.rejectText,onClick:e.onClose},null,8,["label","onClick"]),v(ce,{ruby:"",type:"submit",label:e.confirmText,onClick:e.onConfirm},null,8,["label","onClick"])])]),_:1},8,["show","on-close"])}}},Y$={name:"WootDropdownItem",componentName:"WootDropdownMenu",props:{disabled:{type:Boolean,default:!1}}},X$=["tabindex","aria-disabled"];function q$(e,t,n,s,a,o){return p(),f("li",{class:re(["mb-1 list-none dropdown-menu__item",{"is-disabled":n.disabled}]),tabindex:n.disabled?null:-1,"aria-disabled":n.disabled},[at(e.$slots,"default",{},void 0,!0)],10,X$)}const Pc=Fe(Y$,[["render",q$],["__scopeId","data-v-4607918a"]]),dp={__name:"DropdownMenu",props:{placement:{type:String,default:"top"}},setup(e){const t=F(null),n=()=>t.value.querySelectorAll("ul.dropdown li.dropdown-menu__item .button"),s=r=>{const d=t.value.querySelector("ul.dropdown li.dropdown-menu__item .button:focus");return Array.from(r).indexOf(d)},a=(r,d)=>{r.length!==0&&r[d].focus()},o=r=>{const d=s(r),u=d>=1?d-1:r.length-1;a(r,u)},l=r=>{const d=s(r),u=d===r.length-1?0:d+1;a(r,u)};return Qs({ArrowUp:{action:()=>o(n()),allowOnFocusedInput:!0},ArrowDown:{action:()=>l(n()),allowOnFocusedInput:!0}}),(r,d)=>(p(),f("ul",{ref_key:"dropdownMenuRef",ref:t,class:re(["dropdown menu vertical",[e.placement&&`dropdown--${e.placement}`]])},[at(r.$slots,"default")],2))}},Z$={props:{featureKey:{type:String,required:!0}},computed:{...St({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",accountId:"getCurrentAccountId"}),isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,this.featureKey)}}},Q$={key:0};function J$(e,t,n,s,a,o){return o.isFeatureEnabled?(p(),f("div",Q$,[at(e.$slots,"default")])):O("",!0)}const eM=Fe(Z$,[["render",J$]]),tM={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}}},emits:["update:modelValue","input","blur"],mounted(){},methods:{onChange(e){this.$emit("input",e.target.value),this.$emit("update:modelValue",e.target.value)},onBlur(e){this.$emit("blur",e.target.value)}}},nM={class:"input-container"},sM={key:0},aM=["value","type","placeholder","readonly"],oM={key:1,class:"help-text"},lM={key:2,class:"message"};function iM(e,t,n,s,a,o){return p(),f("label",nM,[n.label?(p(),f("span",sM,E(n.label),1)):O("",!0),c("input",{value:n.modelValue,type:n.type,placeholder:n.placeholder,readonly:n.readonly,style:Ct(n.styles),onInput:t[0]||(t[0]=(...l)=>o.onChange&&o.onChange(...l)),onBlur:t[1]||(t[1]=(...l)=>o.onBlur&&o.onBlur(...l))},null,44,aM),n.helpText?(p(),f("p",oM,E(n.helpText),1)):O("",!0),n.error?(p(),f("span",lM,E(n.error),1)):O("",!0),at(e.$slots,"masked",{},void 0,!0)])}const rM=Fe(tM,[["render",iM],["__scopeId","data-v-7b577ba6"]]),cM={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","60\\d{8}|(?:1\\d|[39])\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[49]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:305[3-9]|472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function Ng(e,t){var n=Array.prototype.slice.call(t);return n.push(cM),e.apply(this,n)}function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function dM(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function uM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bc(e,t)}function mM(e){var t=lA();return function(){var s=Fc(e),a;if(t){var o=Fc(this).constructor;a=Reflect.construct(s,arguments,o)}else a=s.apply(this,arguments);return hM(this,a)}}function hM(e,t){if(t&&(_f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oA(e)}function oA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vf(e){var t=typeof Map=="function"?new Map:void 0;return vf=function(s){if(s===null||!fM(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(s))return t.get(s);t.set(s,a)}function a(){return au(s,arguments,Fc(this).constructor)}return a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Bc(a,s)},vf(e)}function au(e,t,n){return lA()?au=Reflect.construct:au=function(a,o,l){var i=[null];i.push.apply(i,o);var r=Function.bind.apply(a,i),d=new r;return l&&Bc(d,l.prototype),d},au.apply(null,arguments)}function lA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fM(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Bc(e,t){return Bc=Object.setPrototypeOf||function(s,a){return s.__proto__=a,s},Bc(e,t)}function Fc(e){return Fc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Fc(e)}var ll=function(e){pM(n,e);var t=mM(n);function n(s){var a;return uM(this,n),a=t.call(this,s),Object.setPrototypeOf(oA(a),n.prototype),a.name=a.constructor.name,a}return dM(n)}(vf(Error)),Og=2,gM=17,_M=3,yo="0-9---",vM="--",bM="/",EM=".",TM=" ",AM="()\\[\\]",yM="~",wu="".concat(vM).concat(bM).concat(EM).concat(TM).concat(AM).concat(yM),wg="+";function Bb(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),s=t[0].split("."),a=0;a<3;a++){var o=Number(n[a]),l=Number(s[a]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}var SM={}.constructor;function ou(e){return e!=null&&e.constructor===SM}function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function up(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function pp(e,t,n){return t&&IM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var CM="1.2.0",xM="1.7.35",Fb=" ext. ",NM=/^\d+$/,Ea=function(){function e(t){up(this,e),$M(t),this.metadata=t,iA.call(this,t)}return pp(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(n){return n!=="001"})}},{key:"getCountryMetadata",value:function(n){return this.metadata.countries[n]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(n){return this.getCountryMetadata(n)!==void 0}},{key:"hasCallingCode",value:function(n){if(this.getCountryCodesForCallingCode(n))return!0;if(this.nonGeographic()){if(this.nonGeographic()[n])return!0}else{var s=this.countryCallingCodes()[n];if(s&&s.length===1&&s[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(n){return this.nonGeographic()?!!this.nonGeographic()[n]:!this.getCountryCodesForCallingCode(n)}},{key:"country",value:function(n){return this.selectNumberingPlan(n)}},{key:"selectNumberingPlan",value:function(n,s){if(n&&NM.test(n)&&(s=n,n=null),n&&n!=="001"){if(!this.hasCountry(n))throw new Error("Unknown country: ".concat(n));this.numberingPlan=new Ub(this.getCountryMetadata(n),this)}else if(s){if(!this.hasCallingCode(s))throw new Error("Unknown calling code: ".concat(s));this.numberingPlan=new Ub(this.getNumberingPlanMetadata(s),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(n){var s=this.countryCallingCodes()[n];if(s)return s.length===1&&s[0].length===3?void 0:s}},{key:"getCountryCodeForCallingCode",value:function(n){var s=this.getCountryCodesForCallingCode(n);if(s)return s[0]}},{key:"getNumberingPlanMetadata",value:function(n){var s=this.getCountryCodeForCallingCode(n);if(s)return this.getCountryMetadata(s);if(this.nonGeographic()){var a=this.nonGeographic()[n];if(a)return a}else{var o=this.countryCallingCodes()[n];if(o&&o.length===1&&o[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(n){return this.numberingPlan.type(n)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(n){return this.selectNumberingPlan(n)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),e}(),Ub=function(){function e(t,n){up(this,e),this.globalMetadataObject=n,this.metadata=t,iA.call(this,n.metadata)}return pp(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(n){return n[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var n=this,s=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return s.map(function(a){return new OM(a,n)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(n){return n[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(n){if(this.hasTypes()&&Gb(this.types(),n))return new RM(Gb(this.types(),n),this)}},{key:"ext",value:function(){return this.v1||this.v2?Fb:this.metadata[13]||Fb}}]),e}(),OM=function(){function e(t,n){up(this,e),this._format=t,this.metadata=n}return pp(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!wM.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),wM=/^\(?\$1\)?$/,RM=function(){function e(t,n){up(this,e),this.type=t,this.metadata=n}return pp(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function Gb(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function $M(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!ou(e)||!ou(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(ou(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+MM(e)+": "+e,"."))}var MM=function(t){return bf(t)};function Rg(e,t){if(t=new Ea(t),t.hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function kM(e,t){return t.countries.hasOwnProperty(e)}function iA(e){var t=e.version;typeof t=="number"?(this.v1=t===1,this.v2=t===2,this.v3=t===3,this.v4=t===4):t?Bb(t,CM)===-1?this.v2=!0:Bb(t,xM)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var LM=";ext=",Ui=function(t){return"([".concat(yo,"]{1,").concat(t,"})")};function rA(e){var t="20",n="15",s="9",a="6",o="[ \\t,]*",l="[:\\.]?[ \\t,-]*",i="#?",r="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",d="(?:[x#~]|int|)",u="[- ]+",m="[ \\t]*",h="(?:,{2}|;)",_=LM+Ui(t),g=o+r+l+Ui(t)+i,T=o+d+l+Ui(s)+i,S=u+Ui(a)+"#",b=m+h+l+Ui(n)+i,A=m+"(?:,)+"+l+Ui(s)+i;return _+"|"+g+"|"+T+"|"+S+"|"+b+"|"+A}var DM="["+yo+"]{"+Og+"}",PM="["+wg+"]{0,1}(?:["+wu+"]*["+yo+"]){3,}["+wu+yo+"]*",BM=new RegExp("^["+wg+"]{0,1}(?:["+wu+"]*["+yo+"]){1,2}$","i"),FM=PM+"(?:"+rA()+")?",UM=new RegExp("^"+DM+"$|^"+FM+"$","i");function GM(e){return e.length>=Og&&UM.test(e)}function VM(e){return BM.test(e)}var Vb=new RegExp("(?:"+rA()+")$","i");function HM(e){var t=e.search(Vb);if(t<0)return{};for(var n=e.slice(0,t),s=e.match(Vb),a=1;a<s.length;){if(s[a])return{number:n,ext:s[a]};a++}}var WM={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function KM(e){return WM[e]}function zM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=jM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jM(e,t){if(e){if(typeof e=="string")return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hb(e,t)}}function Hb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Wb(e){for(var t="",n=zM(e.split("")),s;!(s=n()).done;){var a=s.value;t+=YM(a,t)||""}return t}function YM(e,t,n){return e==="+"?t?void 0:"+":KM(e)}function $g(e,t){return XM(e,void 0,t)}function XM(e,t,n){var s=n.type(t),a=s&&s.possibleLengths()||n.possibleLengths();if(!a)return"IS_POSSIBLE";var o=e.length,l=a[0];return l===o?"IS_POSSIBLE":l>o?"TOO_SHORT":a[a.length-1]<o?"TOO_LONG":a.indexOf(o,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function qM(e,t,n){if(t===void 0&&(t={}),n=new Ea(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return cA(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function cA(e,t){switch($g(e,t)){case"IS_POSSIBLE":return!0;default:return!1}}function hl(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function ZM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=QM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QM(e,t){if(e){if(typeof e=="string")return Kb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kb(e,t)}}function Kb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var JM=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function Mg(e,t,n){if(t=t||{},!(!e.country&&!e.countryCallingCode)){n=new Ea(n),n.selectNumberingPlan(e.country,e.countryCallingCode);var s=t.v2?e.nationalNumber:e.phone;if(hl(s,n.nationalNumberPattern())){if(Xm(s,"FIXED_LINE",n))return n.type("MOBILE")&&n.type("MOBILE").pattern()===""||!n.type("MOBILE")||Xm(s,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var a=ZM(JM),o;!(o=a()).done;){var l=o.value;if(Xm(s,l,n))return l}}}}function Xm(e,t,n){return t=n.type(t),!t||!t.pattern()||t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0?!1:hl(e,t.pattern())}function ek(e,t,n){if(t=t||{},n=new Ea(n),n.selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes())return Mg(e,t,n.metadata)!==void 0;var s=t.v2?e.nationalNumber:e.phone;return hl(s,n.nationalNumberPattern())}function tk(e,t,n){var s=new Ea(n),a=s.getCountryCodesForCallingCode(e);return a?a.filter(function(o){return nk(t,o,n)}):[]}function nk(e,t,n){var s=new Ea(n);return s.selectNumberingPlan(t),s.numberingPlan.possibleLengths().indexOf(e.length)>=0}function sk(e){return e.replace(new RegExp("[".concat(wu,"]+"),"g")," ").trim()}var ak=/(\$\d)/;function ok(e,t,n){var s=n.useInternationalFormat,a=n.withNationalPrefix,o=e.replace(new RegExp(t.pattern()),s?t.internationalFormat():a&&t.nationalPrefixFormattingRule()?t.format().replace(ak,t.nationalPrefixFormattingRule()):t.format());return s?sk(o):o}var lk=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function ik(e,t,n){var s=new Ea(n);if(s.selectNumberingPlan(e,t),s.defaultIDDPrefix())return s.defaultIDDPrefix();if(lk.test(s.IDDPrefix()))return s.IDDPrefix()}function rk(e){var t=e.number,n=e.ext;if(!t)return"";if(t[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}function ck(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=dk(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dk(e,t){if(e){if(typeof e=="string")return zb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zb(e,t)}}function zb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function jb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jb(Object(n),!0).forEach(function(s){uk(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xb={formatExtension:function(t,n,s){return"".concat(t).concat(s.ext()).concat(n)}};function pk(e,t,n,s){if(n?n=Yb(Yb({},Xb),n):n=Xb,s=new Ea(s),e.country&&e.country!=="001"){if(!s.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));s.country(e.country)}else if(e.countryCallingCode)s.selectNumberingPlan(e.countryCallingCode);else return e.phone||"";var a=s.countryCallingCode(),o=n.v2?e.nationalNumber:e.phone,l;switch(t){case"NATIONAL":return o?(l=Ru(o,e.carrierCode,"NATIONAL",s,n),qm(l,e.ext,s,n.formatExtension)):"";case"INTERNATIONAL":return o?(l=Ru(o,null,"INTERNATIONAL",s,n),l="+".concat(a," ").concat(l),qm(l,e.ext,s,n.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(o);case"RFC3966":return rk({number:"+".concat(a).concat(o),ext:e.ext});case"IDD":if(!n.fromCountry)return;var i=hk(o,e.carrierCode,a,n.fromCountry,s);return qm(i,e.ext,s,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function Ru(e,t,n,s,a){var o=mk(s.formats(),e);return o?ok(e,o,{useInternationalFormat:n==="INTERNATIONAL",withNationalPrefix:!(o.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&a&&a.nationalPrefix===!1)}):e}function mk(e,t){for(var n=ck(e),s;!(s=n()).done;){var a=s.value;if(a.leadingDigitsPatterns().length>0){var o=a.leadingDigitsPatterns()[a.leadingDigitsPatterns().length-1];if(t.search(o)!==0)continue}if(hl(t,a.pattern()))return a}}function qm(e,t,n,s){return t?s(e,t,n):e}function hk(e,t,n,s,a){var o=Rg(s,a.metadata);if(o===n){var l=Ru(e,t,"NATIONAL",a);return n==="1"?n+" "+l:l}var i=ik(s,void 0,a.metadata);if(i)return"".concat(i," ").concat(n," ").concat(Ru(e,null,"INTERNATIONAL",a))}function qb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Zb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qb(Object(n),!0).forEach(function(s){fk(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function fk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _k(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function vk(e,t,n){return t&&_k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var bk=function(){function e(t,n,s){if(gk(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!s)throw new TypeError("`metadata` not passed");var a=Tk(t,s),o=a.country,l=a.countryCallingCode;this.country=o,this.countryCallingCode=l,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return s}}return vk(e,[{key:"setExt",value:function(n){this.ext=n}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:tk(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return qM(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return ek(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var n=new Ea(this.getMetadata());return n.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(n){return this.number===n.number&&this.ext===n.ext}},{key:"getType",value:function(){return Mg(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(n,s){return pk(this,n,s?Zb(Zb({},s),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(n){return this.format("NATIONAL",n)}},{key:"formatInternational",value:function(n){return this.format("INTERNATIONAL",n)}},{key:"getURI",value:function(n){return this.format("RFC3966",n)}}]),e}(),Ek=function(t){return/^[A-Z]{2}$/.test(t)};function Tk(e,t){var n,s,a=new Ea(t);return Ek(e)?(n=e,a.selectNumberingPlan(n),s=a.countryCallingCode()):s=e,{country:n,countryCallingCode:s}}var Ak=new RegExp("(["+yo+"])");function yk(e,t,n,s){if(t){var a=new Ea(s);a.selectNumberingPlan(t,n);var o=new RegExp(a.IDDPrefix());if(e.search(o)===0){e=e.slice(e.match(o)[0].length);var l=e.match(Ak);if(!(l&&l[1]!=null&&l[1].length>0&&l[1]==="0"))return e}}}function Sk(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),s=n.exec(e);if(s){var a,o,l=s.length-1,i=l>0&&s[l];if(t.nationalPrefixTransformRule()&&i)a=e.replace(n,t.nationalPrefixTransformRule()),l>1&&(o=s[1]);else{var r=s[0];a=e.slice(r.length),i&&(o=s[1])}var d;if(i){var u=e.indexOf(s[1]),m=e.slice(0,u);m===t.numberingPlan.nationalPrefix()&&(d=t.numberingPlan.nationalPrefix())}else d=s[0];return{nationalNumber:a,nationalPrefix:d,carrierCode:o}}}return{nationalNumber:e}}function Ef(e,t){var n=Sk(e,t),s=n.carrierCode,a=n.nationalNumber;if(a!==e){if(!Ik(e,a,t))return{nationalNumber:e};if(t.possibleLengths()&&!Ck(a,t))return{nationalNumber:e}}return{nationalNumber:a,carrierCode:s}}function Ik(e,t,n){return!(hl(e,n.nationalNumberPattern())&&!hl(t,n.nationalNumberPattern()))}function Ck(e,t){switch($g(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function xk(e,t,n,s){var a=t?Rg(t,s):n;if(e.indexOf(a)===0){s=new Ea(s),s.selectNumberingPlan(t,n);var o=e.slice(a.length),l=Ef(o,s),i=l.nationalNumber,r=Ef(e,s),d=r.nationalNumber;if(!hl(d,s.nationalNumberPattern())&&hl(i,s.nationalNumberPattern())||$g(d,s)==="TOO_LONG")return{countryCallingCode:a,number:o}}return{number:e}}function Nk(e,t,n,s){if(!e)return{};var a;if(e[0]!=="+"){var o=yk(e,t,n,s);if(o&&o!==e)a=!0,e="+"+o;else{if(t||n){var l=xk(e,t,n,s),i=l.countryCallingCode,r=l.number;if(i)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:i,number:r}}return{number:e}}}if(e[1]==="0")return{};s=new Ea(s);for(var d=2;d-1<=_M&&d<=e.length;){var u=e.slice(1,d);if(s.hasCallingCode(u))return s.selectNumberingPlan(u),{countryCallingCodeSource:a?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:u,number:e.slice(d)};d++}return{}}function Ok(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=wk(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wk(e,t){if(e){if(typeof e=="string")return Qb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qb(e,t)}}function Qb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Rk(e,t){var n=t.countries,s=t.defaultCountry,a=t.metadata;a=new Ea(a);for(var o=[],l=Ok(n),i;!(i=l()).done;){var r=i.value;if(a.country(r),a.leadingDigits()){if(e&&e.search(a.leadingDigits())===0)return r}else if(Mg({phone:e,country:r},void 0,a.metadata))if(s){if(r===s)return r;o.push(r)}else return r}if(o.length>0)return o[0]}function $k(e,t){var n=t.nationalNumber,s=t.defaultCountry,a=t.metadata,o=a.getCountryCodesForCallingCode(e);if(o)return o.length===1?o[0]:Rk(n,{countries:o,defaultCountry:s,metadata:a.metadata})}var dA="+",Mk="[\\-\\.\\(\\)]?",Jb="(["+yo+"]|"+Mk+")",kk="^\\"+dA+Jb+"*["+yo+"]"+Jb+"*$",Lk=new RegExp(kk,"g"),Tf=yo,Dk="["+Tf+"]+((\\-)*["+Tf+"])*",Pk="a-zA-Z",Bk="["+Pk+"]+((\\-)*["+Tf+"])*",Fk="^("+Dk+"\\.)*"+Bk+"\\.?$",Uk=new RegExp(Fk,"g"),e1="tel:",Af=";phone-context=",Gk=";isub=";function Vk(e){var t=e.indexOf(Af);if(t<0)return null;var n=t+Af.length;if(n>=e.length)return"";var s=e.indexOf(";",n);return s>=0?e.substring(n,s):e.substring(n)}function Hk(e){return e===null?!0:e.length===0?!1:Lk.test(e)||Uk.test(e)}function Wk(e,t){var n=t.extractFormattedPhoneNumber,s=Vk(e);if(!Hk(s))throw new ll("NOT_A_NUMBER");var a;if(s===null)a=n(e)||"";else{a="",s.charAt(0)===dA&&(a+=s);var o=e.indexOf(e1),l;o>=0?l=o+e1.length:l=0;var i=e.indexOf(Af);a+=e.substring(l,i)}var r=a.indexOf(Gk);if(r>0&&(a=a.substring(0,r)),a!=="")return a}var Kk=250,zk=new RegExp("["+wg+yo+"]"),jk=new RegExp("[^"+yo+"#]+$");function Yk(e,t,n){if(t=t||{},n=new Ea(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry))throw t.v2?new ll("INVALID_COUNTRY"):new Error("Unknown country: ".concat(t.defaultCountry));var s=qk(e,t.v2,t.extract),a=s.number,o=s.ext,l=s.error;if(!a){if(t.v2)throw l==="TOO_SHORT"?new ll("TOO_SHORT"):new ll("NOT_A_NUMBER");return{}}var i=Qk(a,t.defaultCountry,t.defaultCallingCode,n),r=i.country,d=i.nationalNumber,u=i.countryCallingCode,m=i.countryCallingCodeSource,h=i.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new ll("INVALID_COUNTRY");return{}}if(!d||d.length<Og){if(t.v2)throw new ll("TOO_SHORT");return{}}if(d.length>gM){if(t.v2)throw new ll("TOO_LONG");return{}}if(t.v2){var _=new bk(u,d,n.metadata);return r&&(_.country=r),h&&(_.carrierCode=h),o&&(_.ext=o),_.__countryCallingCodeSource=m,_}var g=(t.extended?n.hasSelectedNumberingPlan():r)?hl(d,n.nationalNumberPattern()):!1;return t.extended?{country:r,countryCallingCode:u,carrierCode:h,valid:g,possible:g?!0:!!(t.extended===!0&&n.possibleLengths()&&cA(d,n)),phone:d,ext:o}:g?Zk(r,d,o):{}}function Xk(e,t,n){if(e){if(e.length>Kk){if(n)throw new ll("TOO_LONG");return}if(t===!1)return e;var s=e.search(zk);if(!(s<0))return e.slice(s).replace(jk,"")}}function qk(e,t,n){var s=Wk(e,{extractFormattedPhoneNumber:function(l){return Xk(l,n,t)}});if(!s)return{};if(!GM(s))return VM(s)?{error:"TOO_SHORT"}:{};var a=HM(s);return a.ext?a:{number:s}}function Zk(e,t,n){var s={country:e,phone:t};return n&&(s.ext=n),s}function Qk(e,t,n,s){var a=Nk(Wb(e),t,n,s.metadata),o=a.countryCallingCodeSource,l=a.countryCallingCode,i=a.number,r;if(l)s.selectNumberingPlan(l);else if(i&&(t||n))s.selectNumberingPlan(t,n),t&&(r=t),l=n||Rg(t,s.metadata);else return{};if(!i)return{countryCallingCodeSource:o,countryCallingCode:l};var d=Ef(Wb(i),s),u=d.nationalNumber,m=d.carrierCode,h=$k(l,{nationalNumber:u,defaultCountry:t,metadata:s});return h&&(r=h,h==="001"||s.country(r)),{country:r,countryCallingCode:l,countryCallingCodeSource:o,nationalNumber:u,carrierCode:m}}function t1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function n1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(n),!0).forEach(function(s){Jk(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Jk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uA(e,t,n){return Yk(e,n1(n1({},t),{},{v2:!0}),n)}function s1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function e3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(n),!0).forEach(function(s){t3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function t3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n3(e,t){return l3(e)||o3(e,t)||a3(e,t)||s3()}function s3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a3(e,t){if(e){if(typeof e=="string")return a1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(e,t)}}function a1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function o3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],a=!0,o=!1,l,i;try{for(n=n.call(e);!(a=(l=n.next()).done)&&(s.push(l.value),!(t&&s.length===t));a=!0);}catch(r){o=!0,i=r}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw i}}return s}}function l3(e){if(Array.isArray(e))return e}function kg(e){var t=Array.prototype.slice.call(e),n=n3(t,4),s=n[0],a=n[1],o=n[2],l=n[3],i,r,d;if(typeof s=="string")i=s;else throw new TypeError("A text for parsing must be a string.");if(!a||typeof a=="string")l?(r=o,d=l):(r=void 0,d=o),a&&(r=e3({defaultCountry:a},r));else if(ou(a))o?(r=a,d=o):d=a;else throw new Error("Invalid second argument: ".concat(a));return{text:i,options:r,metadata:d}}function i3(){var e=kg(arguments),t=e.text,n=e.options,s=e.metadata;return uA(t,n,s)}function o1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function l1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(n),!0).forEach(function(s){r3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function r3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pA(e,t,n){t&&t.defaultCountry&&!kM(t.defaultCountry,n)&&(t=l1(l1({},t),{},{defaultCountry:void 0}));try{return uA(e,t,n)}catch(s){if(!(s instanceof ll))throw s}}function c3(){var e=kg(arguments),t=e.text,n=e.options,s=e.metadata;return pA(t,n,s)}function i1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function r1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(n),!0).forEach(function(s){d3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function d3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u3(){var e=kg(arguments),t=e.text,n=e.options,s=e.metadata;n=r1(r1({},n),{},{extract:!1});var a=pA(t,n,s);return a&&a.isValid()||!1}function p3(){return Ng(i3,arguments)}function $u(){return Ng(c3,arguments)}function m3(){return Ng(u3,arguments)}const h3={props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}},error:{type:Boolean,default:!1}},emits:["blur","setCode","update:modelValue"],data(){return{selectedIndex:-1,showDropdown:!1,searchCountry:"",activeCountryCode:sT(),activeDialCode:nT(),phoneNumber:this.modelValue}},computed:{countries(){return[{name:this.dropdownFirstItemName,dial_code:"",emoji:"",id:""},...to]},dropdownFirstItemName(){return this.activeCountryCode?"Clear selection":"Select Country"},filteredCountriesBySearch(){return this.countries.filter(e=>{const{name:t,dial_code:n,id:s}=e,a=this.searchCountry.toLowerCase();return t.toLowerCase().includes(a)||n.toLowerCase().includes(a)||s.toLowerCase().includes(a)})},activeCountry(){return this.activeCountryCode?this.countries.find(e=>e.id===this.activeCountryCode):""}},watch:{modelValue(){const e=$u(this.modelValue);e&&(this.activeCountryCode=e.country,this.activeDialCode=`+${e.countryCallingCode}`,this.phoneNumber=this.modelValue.replace(`+${e.countryCallingCode}`,""))}},mounted(){this.setActiveCountry()},methods:{onOutsideClick(e){this.showDropdown&&e.target!==this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&this.closeDropdown()},onChange(e){this.phoneNumber=e.target.value,this.$emit("update:modelValue",e.target.value),this.$emit("setCode",this.activeDialCode)},onBlur(e){this.$emit("blur",e.target.value)},onSearchCountry(){this.selectedIndex=0},moveUp(){this.showDropdown&&(this.selectedIndex=Math.max(this.selectedIndex-1,0),this.scrollToSelected())},moveDown(){this.showDropdown&&(this.selectedIndex=Math.min(this.selectedIndex+1,this.filteredCountriesBySearch.length-1),this.scrollToSelected())},scrollToSelected(){this.$nextTick(()=>{const e=this.$refs.dropdown,t=this.$refs.dropdownItem[this.selectedIndex],n=40;if(t){const s=t.offsetTop;e.scrollTop=s-n}})},onSelectCountry(e){!e||!this.showDropdown||(this.activeCountryCode=e.id,this.searchCountry="",this.activeDialCode=e.dial_code,this.$emit("setCode",e.dial_code),this.closeDropdown(),this.$refs.phoneNumberInput.focus())},setActiveCountry(){const{phoneNumber:e}=this;if(!e)return;const t=$u(e);t&&(this.activeCountryCode=t.country,this.activeDialCode=t.countryCallingCode)},toggleCountryDropdown(){this.showDropdown=!this.showDropdown,this.selectedIndex=-1,this.showDropdown&&this.$nextTick(()=>{this.$refs.searchbar.focus()})},closeDropdown(){this.selectedIndex=-1,this.showDropdown=!1}}},f3={class:"relative phone-input--wrap"},g3={key:0,class:"mb-0"},_3={key:0,class:"flex py-2 ltr:pl-2 rtl:pr-2 text-base font-normal leading-normal text-n-slate-12"},v3=["value","placeholder","readonly"],b3={class:"sticky top-0 p-1 bg-white dark:bg-transparent backdrop-blur-[100px]"},E3=["placeholder"],T3=["onClick"],A3={class:"mr-1 text-base"},y3={class:"max-w-[7.5rem] overflow-hidden text-ellipsis whitespace-nowrap"},S3={class:"ml-1 text-xs text-n-slate-11"},I3={key:0},C3={class:"flex items-center justify-center mt-4 text-sm text-n-slate-10"};function x3(e,t,n,s,a,o){const l=z("fluent-icon"),i=_t("on-clickaway");return p(),f("div",f3,[c("div",{class:re(["flex items-center justify-start border-none outline outline-1 rounded-lg bg-n-alpha-black2",n.error?"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 mb-1":"mb-4 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6"])},[c("div",{class:"cursor-pointer py-2 pr-1.5 pl-2 rounded-tl-lg rounded-bl-lg flex items-center justify-center gap-1.5 bg-n-solid-3 h-10 w-14",onClick:t[0]||(t[0]=ze((...r)=>o.toggleCountryDropdown&&o.toggleCountryDropdown(...r),["prevent"]))},[o.activeCountry?(p(),f("h5",g3,E(o.activeCountry.emoji),1)):(p(),V(l,{key:1,icon:"globe",class:"fluent-icon",size:"16"})),v(l,{icon:"chevron-down",class:"fluent-icon",size:"12"})]),a.activeDialCode?(p(),f("span",_3,E(a.activeDialCode),1)):O("",!0),c("input",{ref:"phoneNumberInput",value:a.phoneNumber,type:"tel",class:"no-margin !rounded-tl-none !rounded-bl-none !outline-none !border-0 font-normal !w-full !bg-transparent text-base !px-1.5 placeholder:font-normal",placeholder:n.placeholder,readonly:n.readonly,style:Ct(n.styles),onInput:t[1]||(t[1]=(...r)=>o.onChange&&o.onChange(...r)),onBlur:t[2]||(t[2]=(...r)=>o.onBlur&&o.onBlur(...r))},null,44,v3)],2),a.showDropdown?pe((p(),f("div",{key:0,ref:"dropdown",tabindex:"0",class:"z-10 absolute h-60 w-[12.5rem] shadow-md overflow-y-auto top-10 rounded-lg px-0 pt-0 pb-1 bg-n-alpha-3 backdrop-blur-[100px]",onKeydown:[t[5]||(t[5]=Hn(ze((...r)=>o.moveUp&&o.moveUp(...r),["prevent"]),["up"])),t[6]||(t[6]=Hn(ze((...r)=>o.moveDown&&o.moveDown(...r),["prevent"]),["down"])),t[7]||(t[7]=Hn(ze(r=>o.onSelectCountry(o.filteredCountriesBySearch[a.selectedIndex]),["prevent"]),["enter"]))]},[c("div",b3,[pe(c("input",{ref:"searchbar","onUpdate:modelValue":t[3]||(t[3]=r=>a.searchCountry=r),type:"text",placeholder:e.$t("GENERAL.PHONE_INPUT.PLACEHOLDER"),class:"!h-8 !mb-0 !text-sm !outline-n-brand dark:!outline-n-brand",onInput:t[4]||(t[4]=(...r)=>o.onSearchCountry&&o.onSearchCountry(...r))},null,40,E3),[[mt,a.searchCountry]])]),(p(!0),f(fe,null,Ae(o.filteredCountriesBySearch,(r,d)=>(p(),f("div",{ref_for:!0,ref:"dropdownItem",key:d,class:re(["flex items-center px-1 py-0 cursor-pointer h-7 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2",{"bg-n-alpha-1 dark:bg-n-alpha-2":r.id===a.activeCountryCode,"bg-n-alpha-1 dark:bg-n-alpha-2":d===a.selectedIndex}]),onClick:u=>o.onSelectCountry(r)},[c("span",A3,E(r.emoji),1),c("span",y3,E(r.name),1),c("span",S3,E(r.dial_code),1)],10,T3))),128)),o.filteredCountriesBySearch.length===0?(p(),f("div",I3,[c("span",C3,E(e.$t("GENERAL.PHONE_INPUT.EMPTY_STATE")),1)])):O("",!0)],32)),[[i,o.onOutsideClick]]):O("",!0)])}const N3=Fe(h3,[["render",x3]]),O3={props:{title:{type:String,required:!0},description:{type:String,default:""},href:{type:String,default:""},bgColor:{type:String,default:""},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},icon:{type:String,default:""},color:{type:String,default:""},colorScheme:{type:String,default:""},variant:{type:String,default:""}},emits:["remove"],computed:{textColor(){return this.variant==="smooth"||this.variant==="dashed"?"":this.color||Vx(this.bgColor)},labelClass(){return`label ${this.colorScheme} ${this.variant} ${this.small?"small":""}`},labelStyle(){return this.bgColor?{background:this.bgColor,color:this.textColor,border:`1px solid ${this.bgColor}`}:{}},anchorStyle(){return this.bgColor?{color:this.textColor}:{}}},methods:{onClick(){this.$emit("remove",this.title)}}},w3=["title"],R3={key:0,class:"label-action--button"},$3={key:2,class:"whitespace-nowrap text-ellipsis overflow-hidden"},M3=["href"];function k3(e,t,n,s,a,o){const l=z("fluent-icon");return p(),f("div",{class:re(["inline-flex ltr:mr-1 rtl:ml-1 mb-1",o.labelClass]),style:Ct(o.labelStyle),title:n.description},[n.icon?(p(),f("span",R3,[v(l,{icon:n.icon,size:"12",class:"label--icon cursor-pointer"},null,8,["icon"])])):O("",!0),["smooth","dashed"].includes(n.variant)&&n.title&&!n.icon?(p(),f("span",{key:1,style:Ct({background:n.color}),class:"label-color-dot flex-shrink-0"},null,4)):O("",!0),n.href?(p(),f("a",{key:3,href:n.href,style:Ct(o.anchorStyle)},E(n.title),13,M3)):(p(),f("span",$3,E(n.title),1)),n.showClose?(p(),f("button",{key:4,class:"label-close--button p-0",style:Ct({color:o.textColor}),onClick:t[0]||(t[0]=(...i)=>o.onClick&&o.onClick(...i))},[v(l,{icon:"dismiss",size:"12",class:"close--icon"})],4)):O("",!0)],14,w3)}const L3=Fe(O3,[["render",k3],["__scopeId","data-v-4071204f"]]),D3={class:"flex items-center justify-center p-8"},P3={class:"flex items-center gap-3 text-base text-center w-100 text-n-slate-11"},B3={class:"text-base font-medium text-n-slate-12"},xr={__name:"LoadingState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",D3,[c("h6",P3,[c("span",B3,E(e.message),1),v(qn,{class:"text-n-brand"})])]))}},F3={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""},headerContentValue:{type:String,default:""},headerImage:{type:String,default:""}}},U3={class:"flex flex-col items-start px-8 pt-8 pb-0"},G3=["src"],V3={"data-test-id":"modal-header-title",class:"text-base font-semibold leading-6 text-n-slate-12"},H3={key:1,"data-test-id":"modal-header-content",class:"w-full mt-2 text-sm leading-5 break-words text-n-slate-11"},W3={key:0,class:"text-sm font-semibold text-n-slate-11"};function K3(e,t,n,s,a,o){return p(),f("div",U3,[n.headerImage?(p(),f("img",{key:0,src:n.headerImage,alt:"No image"},null,8,G3)):O("",!0),c("h2",V3,E(n.headerTitle),1),n.headerContent?(p(),f("p",H3,[Ee(E(n.headerContent)+" ",1),n.headerContentValue?(p(),f("span",W3,E(n.headerContentValue),1)):O("",!0)])):O("",!0),at(e.$slots,"default")])}const z3=Fe(F3,[["render",K3]]),j3={__name:"Tabs",props:{index:{type:Number,default:0},border:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,a=Ks("tabsContainer"),o=Ks("tabsList"),{width:l}=Er(a),{width:i}=Er(o),r=F(!1),d=C({get:()=>n.index,set:h=>{s("change",h)}});cs("activeIndex",d),cs("updateActiveIndex",h=>{d.value=h});const u=()=>{a.value&&o.value&&(r.value=o.value.scrollWidth>o.value.clientWidth)},m=h=>{if(a.value&&o.value){let _=o.value.scrollLeft;_+=h==="left"?-100:100,o.value.scrollTo({top:0,left:_,behavior:"smooth"})}};return ot([l,i],()=>{u()},{immediate:!0}),(h,_)=>{const g=z("fluent-icon");return p(),f("div",{ref_key:"tabsContainer",ref:a,class:re(["flex",[e.border&&"border-b border-b-n-weak"]])},[r.value?(p(),f("button",{key:0,class:"items-center rounded-none cursor-pointer flex h-auto justify-center min-w-8",onClick:_[0]||(_[0]=T=>m("left"))},[v(g,{icon:"chevron-left",size:16})])):O("",!0),c("ul",{ref_key:"tabsList",ref:o,class:re(["border-r-0 border-l-0 border-t-0 flex min-w-[6.25rem] py-0 px-4 list-none mb-0",r.value?"overflow-hidden py-0 px-1 max-w-[calc(100%-64px)]":""])},[at(h.$slots,"default")],2),r.value?(p(),f("button",{key:1,class:"items-center rounded-none cursor-pointer flex h-auto justify-center min-w-8",onClick:_[1]||(_[1]=T=>m("right"))},[v(g,{icon:"chevron-right",size:16})])):O("",!0)],2)}}},Y3={class:"flex-shrink-0 my-0 mx-2 ltr:first:ml-0 rtl:first:mr-0 ltr:last:mr-0 rtl:last:ml-0 hover:text-n-slate-12"},X3={__name:"TabsItem",props:{index:{type:Number,default:0},name:{type:String,required:!0},disabled:{type:Boolean,default:!1},count:{type:Number,default:0},showBadge:{type:Boolean,default:!0},isCompact:{type:Boolean,default:!1}},setup(e){const t=e,n=Ao("activeIndex"),s=Ao("updateActiveIndex"),a=C(()=>t.index===n.value),o=C(()=>t.count),l=i=>{i.preventDefault(),t.disabled||s(t.index)};return(i,r)=>(p(),f("li",Y3,[c("a",{class:re(["flex items-center flex-row border-b select-none cursor-pointer text-sm relative top-[1px] transition-[border-color] duration-[150ms] ease-[cubic-bezier(0.37,0,0.63,1)]",[a.value?"border-b border-n-brand text-n-blue-text":"border-transparent text-n-slate-11",e.isCompact?"py-2 text-sm":"text-base py-3"]]),onClick:l},[Ee(E(e.name)+" ",1),e.showBadge?(p(),f("div",{key:0,class:re(["rounded-md h-5 flex items-center justify-center text-xxs font-semibold my-0 mx-1 px-1 py-0 min-w-[20px]",[a.value?"bg-n-brand/10 dark:bg-n-brand/20 text-n-blue-text":"bg-n-alpha-black2 dark:bg-n-solid-3 text-n-slate-11"]])},[c("span",null,E(o.value),1)],2)):O("",!0)],2)]))}};function Dl(e,t){zn(2,arguments);var n=Fn(e),s=es(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var a=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+s+1,0);var l=o.getDate();return a>=l?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}function Uc(e,t){if(zn(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?es(t.years):0,s="months"in t?es(t.months):0,a="weeks"in t?es(t.weeks):0,o="days"in t?es(t.days):0,l="hours"in t?es(t.hours):0,i="minutes"in t?es(t.minutes):0,r="seconds"in t?es(t.seconds):0,d=Fn(e),u=s||n?Dl(d,s+n*12):d,m=o||a?Oc(u,o+a*7):u,h=i+l*60,_=r+h*60,g=_*1e3,T=new Date(m.getTime()+g);return T}function mA(e,t){zn(1,arguments);var n=t||{},s=n.locale,a=s&&s.options&&s.options.weekStartsOn,o=a==null?0:es(a),l=n.weekStartsOn==null?o:es(n.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var i=Fn(e),r=i.getDay(),d=(r<l?7:0)+r-l;return i.setDate(i.getDate()-d),i.setHours(0,0,0,0),i}function q3(e,t){zn(2,arguments);var n=es(t),s=n*7;return Oc(e,s)}function Lg(e,t){zn(2,arguments);var n=es(t);return Dl(e,n*12)}function Z3(e,t){zn(2,arguments);var n=Fn(e),s=Fn(t);return n.getFullYear()-s.getFullYear()}var Q3=36e5;function J3(e,t){zn(2,arguments);var n=eT(e,t)/Q3;return n>0?Math.floor(n):Math.ceil(n)}var eL=6e4;function lu(e,t){zn(2,arguments);var n=eT(e,t)/eL;return n>0?Math.floor(n):Math.ceil(n)}function tL(e,t){zn(2,arguments);var n=Fn(e),s=Fn(t),a=cf(n,s),o=Math.abs(Z3(n,s));n.setFullYear("1584"),s.setFullYear("1584");var l=cf(n,s)===-a,i=a*(o-l);return i===0?0:i}function nL(e,t){zn(1,arguments);var n=e||{},s=Fn(n.start),a=Fn(n.end),o=a.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var l=[],i=s;i.setHours(0,0,0,0);var r=1;if(isNaN(r))throw new RangeError("`options.step` must be a number greater than 1");for(;i.getTime()<=o;)l.push(Fn(i)),i.setDate(i.getDate()+r),i.setHours(0,0,0,0);return l}function gi(e){zn(1,arguments);var t=Fn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function sL(e){zn(1,arguments);var t=Fn(e),n=t.getDay();return n}function aL(e){zn(1,arguments);var t=Fn(e),n=t.getFullYear(),s=t.getMonth(),a=new Date(0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function oL(e){zn(1,arguments);var t=Fn(e),n=t.getMonth();return n}function c1(e){zn(1,arguments);var t=Fn(e),n=t.getFullYear();return n}function rr(e,t){zn(2,arguments);var n=es(t);return Dl(e,-n)}function zr(e,t){if(zn(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?es(t.years):0,s="months"in t?es(t.months):0,a="weeks"in t?es(t.weeks):0,o="days"in t?es(t.days):0,l="hours"in t?es(t.hours):0,i="minutes"in t?es(t.minutes):0,r="seconds"in t?es(t.seconds):0,d=rr(Fn(e),s+n*12),u=pl(d,o+a*7),m=i+l*60,h=r+m*60,_=h*1e3,g=new Date(u.getTime()-_);return g}function lL(e){var t=e.start,n=e.end;zn(1,arguments);var s=Fn(t),a=Fn(n);if(!Uo(s))throw new RangeError("Start Date is invalid");if(!Uo(a))throw new RangeError("End Date is invalid");var o={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},l=cf(s,a);o.years=Math.abs(tL(s,a));var i=zr(s,{years:l*o.years});o.months=Math.abs(mx(i,a));var r=zr(i,{months:l*o.months});o.days=Math.abs(lT(r,a));var d=zr(r,{days:l*o.days});o.hours=Math.abs(J3(d,a));var u=zr(d,{hours:l*o.hours});o.minutes=Math.abs(lu(u,a));var m=zr(u,{minutes:l*o.minutes});return o.seconds=Math.abs(tT(m,a)),o}function hA(e,t){zn(2,arguments);var n=Fn(e),s=Fn(t);return n.getTime()>s.getTime()}function fA(e,t){zn(2,arguments);var n=Fn(e),s=Fn(t);return n.getTime()<s.getTime()}function gA(e){return zn(1,arguments),Fn(e).getDay()===1}function yf(e,t){zn(2,arguments);var n=Fn(e),s=Fn(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Mu(e,t){zn(2,arguments);var n=Fn(e).getTime(),s=Fn(t.start).getTime(),a=Fn(t.end).getTime();if(!(s<=a))throw new RangeError("Invalid interval");return n>=s&&n<=a}var _A=36e5,vA=6e4,iL=2,Sd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},rL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,cL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function bA(e,t){zn(1,arguments);var n={},s=n.additionalDigits==null?iL:es(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=uL(e),o;if(a.date){var l=pL(a.date,s);o=mL(l.restDateString,l.year)}if(isNaN(o)||!o)return new Date(NaN);var i=o.getTime(),r=0,d;if(a.time&&(r=hL(a.time),isNaN(r)||r===null))return new Date(NaN);if(a.timezone){if(d=fL(a.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(i+r),m=new Date(0);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return new Date(i+r+d)}function uL(e){var t={},n=e.split(Sd.dateTimeDelimiter),s;if(n.length>2)return t;if(/:/.test(n[0])?(t.date=null,s=n[0]):(t.date=n[0],s=n[1],Sd.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Sd.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){var a=Sd.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function pL(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:null};var a=s[1]&&parseInt(s[1]),o=s[2]&&parseInt(s[2]);return{year:o==null?a:o*100,restDateString:e.slice((s[1]||s[2]).length)}}function mL(e,t){if(t===null)return null;var n=e.match(rL);if(!n)return null;var s=!!n[4],a=jr(n[1]),o=jr(n[2])-1,l=jr(n[3]),i=jr(n[4]),r=jr(n[5])-1;if(s)return EL(t,i,r)?gL(t,i,r):new Date(NaN);var d=new Date(0);return!vL(t,o,l)||!bL(t,a)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(a,l)),d)}function jr(e){return e?parseInt(e):1}function hL(e){var t=e.match(cL);if(!t)return null;var n=Zm(t[1]),s=Zm(t[2]),a=Zm(t[3]);return TL(n,s,a)?n*_A+s*vA+a*1e3:NaN}function Zm(e){return e&&parseFloat(e.replace(",","."))||0}function fL(e){if(e==="Z")return 0;var t=e.match(dL);if(!t)return 0;var n=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return AL(s,a)?n*(s*_A+a*vA):NaN}function gL(e,t,n){var s=new Date(0);s.setUTCFullYear(e,0,4);var a=s.getUTCDay()||7,o=(t-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+o),s}var _L=[31,null,31,30,31,30,31,31,30,31,30,31];function EA(e){return e%400===0||e%4===0&&e%100}function vL(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(_L[t]||(EA(e)?29:28))}function bL(e,t){return t>=1&&t<=(EA(e)?366:365)}function EL(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function TL(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function AL(e,t){return t>=0&&t<=59}function TA(e,t){zn(2,arguments);var n=Fn(e),s=es(t),a=n.getFullYear(),o=n.getDate(),l=new Date(0);l.setFullYear(a,s,15),l.setHours(0,0,0,0);var i=aL(l);return n.setMonth(s,Math.min(o,i)),n}function yL(e,t){zn(2,arguments);var n=Fn(e),s=es(t);return n.setHours(s),n}function SL(e,t){zn(2,arguments);var n=Fn(e),s=es(t);return n.setMinutes(s),n}function IL(e,t){zn(2,arguments);var n=Fn(e),s=es(t);return n.setSeconds(s),n}function CL(e,t){zn(2,arguments);var n=Fn(e),s=es(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}function AA(e,t){zn(2,arguments);var n=es(t);return Lg(e,-n)}const xL=[{id:1,label:"M"},{id:2,label:"T"},{id:3,label:"W"},{id:4,label:"T"},{id:5,label:"F"},{id:6,label:"S"},{id:7,label:"S"}],yA=[{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_7_DAYS",value:"last7days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_30_DAYS",value:"last30days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_3_MONTHS",value:"last3months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_6_MONTHS",value:"last6months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_YEAR",value:"lastYear"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.CUSTOM_RANGE",value:"custom"}],NL={LAST_7_DAYS:"last7days",LAST_30_DAYS:"last30days",CUSTOM_RANGE:"custom"},Jc={START_CALENDAR:"start",END_CALENDAR:"end"},ed={WEEK:"week",MONTH:"month",YEAR:"year"},OL=e=>ts(e,"MMMM"),SA=e=>ts(e,"yyyy"),d1=()=>{const s=new Date(2222,11,15);return new Intl.DateTimeFormat(navigator.language).format(s).replace("2222","yyyy").replace("12","MM").replace("15","dd")},wL=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t)),RL=(e,t=1)=>{const n=gi(e),s=mA(n,{weekStartsOn:t}),a=Oc(s,41);return wL(nL({start:s,end:a}),7)},$L=(e,t,n,s,a)=>{const l={month:{prev:rr,next:Dl},year:{prev:AA,next:Lg}}[a][s];if(e==="start")return{start:l(t,1),end:n};const i=l(n,1);return{start:t,end:i}},ML=(e,t)=>t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear(),kL=(e,t)=>yf(e,t),LL=e=>{const t=hx(e);return e.getDate()===t.getDate()},Qm=(e,t,n)=>{if(!t||!n)return!1;let s=ga(t),a=ga(n);return s>a&&([s,a]=[a,s]),JC(e,s)||Mu(e,{start:s,end:a})},DL=(e,t,n,s)=>n&&s&&t<=s?Mu(e,{start:t,end:s}):!1,PL=(e,t,n,s)=>{if(t&&!n&&s){const a=Oc(e,1);return Mu(a,{start:t,end:s})}if(t&&n){const a=Oc(e,1);return Mu(a,{start:t,end:n})}return!1},BL=(e,t)=>({last7days:()=>({start:ga(pl(t,6)),end:Po(t)}),last30days:()=>({start:ga(pl(t,29)),end:Po(t)}),last3months:()=>({start:ga(rr(t,3)),end:Po(t)}),last6months:()=>({start:ga(rr(t,6)),end:Po(t)}),lastYear:()=>({start:ga(rr(t,12)),end:Po(t)}),custom:()=>({start:t,end:t})}[e]||(()=>({start:t,end:t})))(),FL={class:"text-sm font-medium text-n-slate-12"},UL={class:"text-sm font-medium text-n-slate-11"},GL={__name:"DatePickerButton",props:{selectedStartDate:Date,selectedEndDate:Date,selectedRange:{type:String,default:""}},emits:["open"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>{const i=n.selectedStartDate,r=n.selectedEndDate;if(!Uo(i)||!Uo(r))return"Select a date range";const d=em(i,r)?"MMM d":"MMM d yyyy";return em(i,new Date)&&em(r,new Date)?`${ts(i,"MMM d")} - ${ts(r,"MMM d")}`:`${ts(i,d)} - ${ts(r,d)}`}),o=C(()=>yA.find(i=>i.value===n.selectedRange).label),l=()=>{s("open")};return(i,r)=>{const d=z("fluent-icon");return p(),f("button",{class:"inline-flex relative items-center rounded-lg gap-2 py-1.5 px-3 h-8 bg-n-alpha-2 hover:bg-n-alpha-1 active:bg-n-alpha-1",onClick:l},[v(d,{class:"text-n-slate-12",icon:"calendar",size:"16"}),c("span",FL,E(i.$t(o.value)),1),c("span",UL,E(a.value),1),v(d,{class:"text-n-slate-12",icon:"chevron-down",size:"14"})])}}},VL={class:"h-[82px] flex flex-col items-start px-5 gap-1.5 pt-4 w-full"},HL={class:"text-sm font-medium text-n-slate-12"},WL=["placeholder","disabled"],KL={__name:"CalendarDateInput",props:{calendarType:{type:String,default:""},dateValue:Date,compareDate:Date,isDisabled:Boolean},emits:["update","validate","error"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a,END_CALENDAR:o}=Jc,l=C(()=>{var d;return(d=d1())==null?void 0:d.toUpperCase()}),i=C({get:()=>{var d;return((d=n.dateValue)==null?void 0:d.toLocaleDateString(navigator.language))||""},set:d=>{const u=d1(),m=ic(d,u,new Date);Uo(m)&&s("update",m)}}),r=()=>{if(!Uo(n.dateValue)){s("error",`Please enter the date in valid format: ${l.value}`);return}const{calendarType:d,compareDate:u,dateValue:m}=n,h=d===a,_=d===o;u&&h&&hA(m,u)?s("error","Start date must be before the end date."):u&&_&&fA(m,u)?s("error","End date must be after the start date."):s("validate",m)};return(d,u)=>(p(),f("div",VL,[c("span",HL,E(e.calendarType===I(a)?d.$t("DATE_PICKER.DATE_RANGE_INPUT.START"):d.$t("DATE_PICKER.DATE_RANGE_INPUT.END")),1),pe(c("input",{"onUpdate:modelValue":u[0]||(u[0]=m=>i.value=m),type:"text",class:"!text-sm !mb-0 disabled:!outline-n-strong",placeholder:l.value,disabled:e.isDisabled,onKeypress:Hn(r,["enter"])},null,40,WL),[[mt,i.value]])]))}},zL={class:"w-[200px] flex flex-col items-start"},jL={class:"w-full px-5 py-4 text-sm font-medium capitalize text-start text-n-slate-12"},YL={class:"flex flex-col items-start w-full"},XL=["onClick"],qL={__name:"CalendarDateRange",props:{selectedRange:{type:String,default:""}},emits:["setRange"],setup(e,{emit:t}){const n=t,s=a=>{n("setRange",a)};return(a,o)=>(p(),f("div",zL,[c("h4",jL,E(a.$t("DATE_PICKER.DATE_RANGE_OPTIONS.TITLE")),1),c("div",YL,[(p(!0),f(fe,null,Ae(I(yA),l=>(p(),f("button",{key:l.label,class:re(["w-full px-5 py-3 text-sm font-medium truncate border-none rounded-none text-start hover:bg-n-alpha-2 dark:hover:bg-n-solid-3",l.value===e.selectedRange?"text-n-slate-12 bg-n-alpha-1 dark:bg-n-solid-active":"text-n-slate-12"]),onClick:i=>s(l)},E(a.$t(l.label)),11,XL))),128))])]))}},ZL={class:"flex items-start justify-between w-full h-9"},QL={class:"flex items-center gap-1"},Dg={__name:"CalendarAction",props:{calendarType:{type:String,default:"start"},firstButtonLabel:{type:String,default:""},buttonLabel:{type:String,default:""},viewMode:{type:String,default:""}},emits:["prev","next","setView"],setup(e,{emit:t}){const n=t,{YEAR:s}=ed,a=i=>{n("prev",i)},o=i=>{n("next",i)},l=(i,r)=>{n("setView",i,r)};return(i,r)=>(p(),f("div",ZL,[v(ce,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-left",class:"rtl:rotate-180",onClick:r[0]||(r[0]=d=>a(e.calendarType))}),c("div",QL,[e.firstButtonLabel?(p(),f("button",{key:0,class:"p-0 text-sm font-medium text-center text-n-slate-12 hover:text-n-brand",onClick:r[1]||(r[1]=d=>l(e.calendarType,e.viewMode))},E(e.firstButtonLabel),1)):O("",!0),e.buttonLabel?(p(),f("button",{key:1,class:re(["p-0 text-sm font-medium text-center text-n-slate-12",{"hover:text-n-brand":e.viewMode}]),onClick:r[2]||(r[2]=d=>l(e.calendarType,I(s)))},E(e.buttonLabel),3)):O("",!0)]),v(ce,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-right",class:"rtl:rotate-180",onClick:r[3]||(r[3]=d=>o(e.calendarType))})]))}},JL={class:"flex flex-col w-full gap-2 max-h-[312px]"},eD={class:"grid grid-cols-2 gap-x-3 gap-y-2 w-full auto-rows-[47px]"},tD=["onClick"],IA={__name:"CalendarYear",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectYear"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a}=Jc,l=F((g=>{const T=c1(g);return T-T%10})(n.calendarType===a?n.startCurrentDate:n.endCurrentDate)),i=C(()=>Array.from({length:10},(g,T)=>l.value+T)),r=C(()=>i.value[0]),d=C(()=>i.value[i.value.length-1]),u=C(()=>{const g=n.calendarType===a?n.startCurrentDate:n.endCurrentDate;return c1(g)}),m=()=>{l.value=AA(new Date(l.value,0,1),10).getFullYear()},h=()=>{l.value=Lg(new Date(l.value,0,1),10).getFullYear()},_=g=>{s("selectYear",g)};return(g,T)=>(p(),f("div",JL,[v(Dg,{"calendar-type":e.calendarType,"button-label":`${r.value} - ${d.value}`,onPrev:m,onNext:h},null,8,["calendar-type","button-label"]),c("div",eD,[(p(!0),f(fe,null,Ae(i.value,S=>(p(),f("button",{key:S,class:re(["p-2 text-sm font-medium text-center text-n-slate-12 w-[144px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":S===u.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":S!==u.value}]),onClick:b=>_(S)},E(S),11,tD))),128))])]))}},nD={class:"flex flex-col w-full gap-2 max-h-[312px]"},sD={class:"grid w-full grid-cols-3 gap-x-3 gap-y-2 auto-rows-[61px]"},aD=["onClick"],CA={__name:"CalendarMonth",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectMonth","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a}=Jc,{MONTH:o,YEAR:l}=ed,i=Array.from({length:12},(_,g)=>ts(TA(gi(new Date),g),"MMM")),r=C(()=>{const _=n.calendarType===a?n.startCurrentDate:n.endCurrentDate;return oL(_)}),d=(_,g)=>{s("setView",_,g)},u=()=>{s("prev")},m=()=>{s("next")},h=_=>{s("selectMonth",_)};return(_,g)=>(p(),f("div",nD,[v(Dg,{"view-mode":I(l),"calendar-type":e.calendarType,"button-label":I(SA)(e.calendarType===I(a)?e.startCurrentDate:e.endCurrentDate,I(o)),onSetView:d,onPrev:u,onNext:m},null,8,["view-mode","calendar-type","button-label"]),c("div",sD,[(p(!0),f(fe,null,Ae(I(i),(T,S)=>(p(),f("button",{key:S,class:re(["p-2 text-sm font-medium text-center text-n-slate-12 w-[92px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":S===r.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":S!==r.value}]),onClick:b=>h(S)},E(T),11,aD))),128))])]))}},oD={class:"max-w-md mx-auto grid grid-cols-7 gap-2"},xA={__name:"CalendarWeekLabel",setup(e){return(t,n)=>(p(),f("div",oD,[(p(!0),f(fe,null,Ae(I(xL),s=>(p(),f("div",{key:s.id,class:"flex items-center justify-center font-medium text-sm w-9 h-7 py-1.5 px-2"},E(s.label),1))),128))]))}},lD={class:"flex flex-col w-full gap-2 max-h-[312px]"},iD=["onMouseenter","onClick"],rD={key:0,class:"absolute bottom-0 w-6 h-8 ltr:-right-4 rtl:-left-4 bg-n-blue-4 dark:bg-n-blue-5 -z-10"},cD={__name:"CalendarWeek",props:{calendarType:{type:String,default:"start"},currentDate:Date,startCurrentDate:Date,endCurrentDate:Date,selectedStartDate:Date,selectingEndDate:Boolean,selectedEndDate:Date,hoveredEndDate:Date},emits:["updateHoveredEndDate","selectDate","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a}=Jc,{MONTH:o}=ed,l=A=>{s("updateHoveredEndDate",A)},i=A=>{s("selectDate",A)},r=()=>{s("prev")},d=()=>{s("next")},u=(A,y)=>{s("setView",A,y)},m=A=>RL(A===a?n.startCurrentDate:n.endCurrentDate),h=A=>Qm(A,n.selectedStartDate,n.selectedStartDate)||Qm(A,n.selectedEndDate,n.selectedEndDate),_=A=>Qm(A,n.selectedStartDate,n.selectedEndDate),g=A=>kL(A,n.calendarType===a?n.startCurrentDate:n.endCurrentDate),T=A=>DL(A,n.selectedStartDate,n.selectingEndDate,n.hoveredEndDate),S=A=>PL(A,n.selectedStartDate,n.selectedEndDate,n.hoveredEndDate),b=A=>({"text-n-slate-10 pointer-events-none":!g(A),"text-n-slate-12 hover:text-n-slate-12 hover:bg-n-blue-6 dark:hover:bg-n-blue-7":g(A),"bg-n-brand text-white":h(A)&&g(A),"bg-n-blue-4 dark:bg-n-blue-5":(_(A)||T(A))&&!h(A)&&g(A),"outline outline-1 outline-n-blue-8 -outline-offset-1 !text-n-blue-text":ML(n.currentDate,A)&&!h(A)});return(A,y)=>(p(),f("div",lD,[v(Dg,{"view-mode":I(o),"calendar-type":e.calendarType,"first-button-label":I(OL)(e.calendarType===I(a)?e.startCurrentDate:e.endCurrentDate),"button-label":I(SA)(e.calendarType===I(a)?e.startCurrentDate:e.endCurrentDate),onPrev:r,onNext:d,onSetView:u},null,8,["view-mode","calendar-type","first-button-label","button-label"]),v(xA),(p(!0),f(fe,null,Ae(m(e.calendarType),x=>(p(),f("div",{key:x[0].getTime(),class:"grid max-w-md grid-cols-7 gap-2 mx-auto overflow-hidden rounded-lg"},[(p(!0),f(fe,null,Ae(x,$=>(p(),f("div",{key:$.getTime(),class:re(["flex relative items-center justify-center w-9 h-8 py-1.5 px-2 font-medium text-sm rounded-lg cursor-pointer",b($)]),onMouseenter:N=>l($),onMouseleave:y[0]||(y[0]=N=>l(null)),onClick:N=>i($)},[Ee(E($.getDate())+" ",1),(_($)||T($))&&S($)&&!I(LL)($)&&g($)?(p(),f("span",rD)):O("",!0)],42,iD))),128))]))),128))]))}},dD={class:"h-[56px] flex justify-between gap-2 px-2 py-3 items-center"},uD={__name:"CalendarFooter",emits:["clear","change"],setup(e,{emit:t}){const n=t,s=()=>{n("clear")},a=()=>{n("change")};return(o,l)=>(p(),f("div",dD,[v(ce,{slate:"",ghost:"",sm:"",label:o.$t("DATE_PICKER.CLEAR_BUTTON"),onClick:s},null,8,["label"]),v(ce,{sm:"",ghost:"",label:o.$t("DATE_PICKER.APPLY_BUTTON"),onClick:a},null,8,["label"])]))}},pD={class:"relative font-inter"},mD={key:0,class:"flex absolute top-9 ltr:left-0 rtl:right-0 z-30 shadow-md select-none w-[880px] h-[490px] rounded-2xl bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container"},hD={class:"flex flex-col w-[680px] ltr:border-l rtl:border-r border-n-strong"},fD={class:"flex justify-around h-fit"},gD={class:"py-5 border-b border-n-strong"},_D={__name:"DatePicker",emits:["dateRangeChanged"],setup(e,{emit:t}){const n=t,{LAST_7_DAYS:s,LAST_30_DAYS:a,CUSTOM_RANGE:o}=NL,{START_CALENDAR:l,END_CALENDAR:i}=Jc,{WEEK:r,MONTH:d,YEAR:u}=ed,m=F(!1),h=F({start:r,end:r}),_=F(new Date),g=F(ga(pl(_.value,6))),T=F(Po(_.value)),S=F(ga(g.value)),b=F(yf(g.value,T.value)?gi(Dl(T.value,1)):gi(T.value)),A=F(!1),y=F(s),x=F(null),$=F(g.value),N=F(T.value);ot(y,R=>{if(R!==o){const P=R===s||R===a;S.value=g.value,b.value=P&&yf(g.value,T.value)?gi(Dl(g.value,1)):T.value,A.value=!1}else A.value||(S.value=ga(_.value))}),ot([g,T],([R,P])=>{Uo(R)?$.value=R:$.value=g.value,Uo(P)?N.value=P:N.value=T.value},{immediate:!0}),ot([S,b],([R,P],[W,Q])=>{const Z=fx(P,R);R!==W&&(hA(R,P)||Z===0)&&(b.value=Dl(R,1)),P!==Q&&(fA(P,R)||Z===0)&&(S.value=rr(P,1))},{immediate:!0,deep:!0});const w=R=>{y.value=R.value;const{start:P,end:W}=BL(R.value,_.value);g.value=P,T.value=W},D=(R,P,W=d)=>{const{start:Q,end:Z}=$L(R,S.value,b.value,P,W);S.value=Q,b.value=Z},H=R=>{y.value=o,!A.value||R<g.value?(g.value=R,T.value=null,A.value=!0):(T.value=R,A.value=!1)},B=(R,P)=>{y.value=o,h.value[R]=P},k=(R,P,W=d)=>{const Q=P===l?S.value:b.value,Z=W===d?TA(gi(Q),R):CL(Q,R);P===l?S.value=Z:b.value=Z,B(P,W===d?r:d)},U=(R,P)=>{P===l?(g.value=R,S.value=R):(T.value=R,b.value=R),A.value=!1},G=R=>{_e(R)},L=()=>{S.value=ga(_.value),b.value=Dl(ga(_.value),1),g.value=ga(pl(_.value,6)),T.value=Po(_.value),A.value=!1,y.value=s,h.value={start:r,end:r}},M=()=>{!Uo(g.value)||!Uo(T.value)?_e("Please select a valid time range"):(m.value=!1,n("dateRangeChanged",[g.value,T.value]))};return(R,P)=>(p(),f("div",pD,[v(GL,{"selected-start-date":g.value,"selected-end-date":T.value,"selected-range":y.value,onOpen:P[0]||(P[0]=W=>m.value=!m.value)},null,8,["selected-start-date","selected-end-date","selected-range"]),m.value?(p(),f("div",mD,[v(qL,{"selected-range":y.value,onSetRange:w},null,8,["selected-range"]),c("div",hD,[c("div",fD,[(p(!0),f(fe,null,Ae([I(l),I(i)],W=>(p(),f("div",{key:`${W}-calendar`,class:"flex flex-col items-center"},[v(KL,{"calendar-type":W,"date-value":W===I(l)?$.value:N.value,"compare-date":W===I(l)?N.value:$.value,"is-disabled":y.value!==I(o),onUpdate:Q=>W===I(l)?$.value=Q:N.value=Q,onValidate:Q=>U(Q,W),onError:P[1]||(P[1]=Q=>G(Q))},null,8,["calendar-type","date-value","compare-date","is-disabled","onUpdate","onValidate"]),c("div",gD,[c("div",{class:re(["flex flex-col items-center gap-2 px-5 min-w-[340px] max-h-[352px]",W===I(l)&&"ltr:border-r rtl:border-l border-n-strong"])},[h.value[W]===I(u)?(p(),V(IA,{key:0,"calendar-type":W,"start-current-date":S.value,"end-current-date":b.value,onSelectYear:Q=>k(Q,W,I(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectYear"])):h.value[W]===I(d)?(p(),V(CA,{key:1,"calendar-type":W,"start-current-date":S.value,"end-current-date":b.value,onSelectMonth:Q=>k(Q,W),onSetView:B,onPrev:Q=>D(W,"prev",I(u)),onNext:Q=>D(W,"next",I(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectMonth","onPrev","onNext"])):h.value[W]===I(r)?(p(),V(cD,{key:2,"calendar-type":W,"current-date":_.value,"start-current-date":S.value,"end-current-date":b.value,"selected-start-date":g.value,"selected-end-date":T.value,"selecting-end-date":A.value,"hovered-end-date":x.value,onUpdateHoveredEndDate:P[2]||(P[2]=Q=>x.value=Q),onSelectDate:H,onSetView:B,onPrev:Q=>D(W,"prev"),onNext:Q=>D(W,"next")},null,8,["calendar-type","current-date","start-current-date","end-current-date","selected-start-date","selected-end-date","selecting-end-date","hovered-end-date","onPrev","onNext"])):O("",!0)],2)])]))),128))]),v(uD,{onChange:M,onClear:L})])])):O("",!0)]))}},NA={Code:u$,ColorPicker:f$,ConfirmDeleteModal:aA,ConfirmModal:K$,DeleteModal:j$,DropdownItem:Pc,DropdownMenu:dp,FeatureToggle:eM,Input:rM,PhoneInput:N3,Label:L3,LoadingState:xr,Modal:qt,ModalHeader:z3,Spinner:Zs,Tabs:j3,TabsItem:X3,DatePicker:_D,install(e){const t=Object.keys(this);t.pop();let n=t.length;for(;n--;)e.component(`woot${t[n]}`,this[t[n]])}};typeof window<"u"&&window.Vue&&window.Vue.use(NA);const vD={components:{NextButton:ce},props:{show:{type:Boolean,default:!1},hasAccounts:{type:Boolean,default:!0}},emits:["closeAccountCreateModal"],setup(){return{v$:Lt()}},data(){return{accountName:""}},validations(){return{accountName:{required:lt,minLength:on(1)}}},computed:{...St({uiFlags:"agents/getUIFlags"})},methods:{async addAccount(){try{const e=await this.$store.dispatch("accounts/create",{account_name:this.accountName});this.$emit("closeAccountCreateModal"),_e(this.$t("CREATE_ACCOUNT.API.SUCCESS_MESSAGE")),window.location=`/app/accounts/${e}/dashboard`}catch(e){e.response.status===422?_e(this.$t("CREATE_ACCOUNT.API.EXIST_MESSAGE")):_e(this.$t("CREATE_ACCOUNT.API.ERROR_MESSAGE"))}}}},bD={class:"flex flex-col h-auto overflow-auto"},ED={key:0,class:"mx-8 mt-6 mb-0 text-sm"},TD={class:"flex items-center rounded-md alert"},AD={class:"ml-1 mr-3"},yD={class:"w-full"},SD=["placeholder"],ID={class:"w-full flex justify-end gap-2 items-center"};function CD(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("fluent-icon"),r=z("NextButton"),d=z("woot-modal");return p(),V(d,{show:n.show,"on-close":()=>e.$emit("closeAccountCreateModal")},{default:K(()=>[c("div",bD,[v(l,{"header-title":e.$t("CREATE_ACCOUNT.NEW_ACCOUNT"),"header-content":e.$t("CREATE_ACCOUNT.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),n.hasAccounts?O("",!0):(p(),f("div",ED,[c("div",TD,[c("div",AD,[v(i,{icon:"warning"})]),Ee(" "+E(e.$t("CREATE_ACCOUNT.NO_ACCOUNT_WARNING")),1)])])),c("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=ze((...u)=>o.addAccount&&o.addAccount(...u),["prevent"]))},[c("div",yD,[c("label",{class:re({error:s.v$.accountName.$error})},[Ee(E(e.$t("CREATE_ACCOUNT.FORM.NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.accountName=u),type:"text",placeholder:e.$t("CREATE_ACCOUNT.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.accountName.$touch&&s.v$.accountName.$touch(...u))},null,40,SD),[[mt,a.accountName]])],2)]),c("div",ID,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("CREATE_ACCOUNT.FORM.CANCEL"),onClick:t[2]||(t[2]=ze(()=>e.$emit("closeAccountCreateModal"),["prevent"]))},null,8,["label"]),v(r,{type:"submit",label:e.$t("CREATE_ACCOUNT.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreating,disabled:s.v$.accountName.$invalid||s.v$.accountName.$invalid||e.uiFlags.isCreating},null,8,["label","is-loading","disabled"])])],32)])]),_:1},8,["show","on-close"])}const OA=Fe(vD,[["render",CD]]),jl=(e,t)=>{const n=()=>{It.off(e,t)};return pt(()=>{It.on(e,t)}),lo(n),n},xD=(e,t=[])=>{const{meta:{permissions:n=[]}={}}=e;return mg(n,t)},ND=(e,t)=>{const{accountId:n}=e.params,a=[{permissions:[...fs,...Xs],path:"dashboard"},{permissions:[Ji],path:"contacts"},{permissions:[uN],path:"reports/overview"},{permissions:[er],path:"portals"}].find(({permissions:o})=>mg(o,t));return`accounts/${n}/${a?a.path:"dashboard"}`},OD=(e,t)=>{const n=`accounts/${e.params.accountId}/dashboard`;if(e.name==="account_suspended")return n;const s=pg(t,e.params.accountId);return xD(e,s)?null:ND(e,s)},wD=(e,t)=>{const n=dN(t,Number(e.params.accountId));return n?n.status==="active"?OD(e,t):e.name!=="account_suspended"?`accounts/${e.params.accountId}/suspended`:null:"app/login"},Pg=(e,t=!1,n=!0)=>{const s=["home","conversation_mentions","conversation_unattended","inbox_dashboard","label_conversations","team_conversations","folder_conversations","conversation_participating"],a=["inbox_conversation","conversation_through_mentions","conversation_through_unattended","conversation_through_inbox","conversations_through_label","conversations_through_team","conversations_through_folders","conversation_through_participating"];return[...t?s:[],...n?a:[]].includes(e)},RD=e=>{switch(e){case"inbox_conversation":return"home";case"conversation_through_mentions":return"conversation_mentions";case"conversation_through_unattended":return"conversation_unattended";case"conversations_through_label":return"label_conversations";case"conversations_through_team":return"team_conversations";case"conversations_through_folders":return"folder_conversations";case"conversation_through_participating":return"conversation_participating";case"conversation_through_inbox":return"inbox_dashboard";default:return null}},Bg=(e,t=!1)=>{const n=["inbox_view"],s=["inbox_view_conversation"];return(t?[...n,...s]:s).includes(e)},wA=e=>e==="notifications_index",$D={class:"fixed z-50 top-2 left-2 group"},MD={class:"relative flex items-center justify-between w-full px-2 py-1 bg-n-amber-4 dark:bg-n-amber-8 rounded-lg shadow-lg"},kD={class:"px-2 text-xs font-medium tracking-wide text-n-amber-12"},LD=2e3,DD={__name:"NetworkNotification",setup(e){const{t}=Pe(),n=cn(),s=F(!navigator.onLine),a=F(!1),o=F(!1),l=F(!1);let i=null;const r=C(()=>o.value?t("NETWORK.NOTIFICATION.RECONNECTING"):l.value?t("NETWORK.NOTIFICATION.RECONNECT_SUCCESS"):t("NETWORK.NOTIFICATION.OFFLINE")),d=C(()=>l.value?"wifi":"wifi-off"),u=C(()=>!o.value&&!l.value),m=()=>{window.location.reload()},h=()=>{s.value=!1,l.value=!1,clearTimeout(i)},_=A=>Pg(A,!0)||Bg(A,!0)||wA(A),g=()=>{a.value=!0,s.value=!0},T=()=>{a.value=!1,o.value=!1,l.value=!0,s.value=!0,i=setTimeout(h,LD)},S=()=>{_(n.name)?(o.value=!0,l.value=!1,s.value=!0):T()},b=A=>{A.type==="offline"?s.value=!0:A.type==="online"&&!a.value&&T()};return ba("online",b),ba("offline",b),jl(xn.WEBSOCKET_DISCONNECT,g),jl(xn.WEBSOCKET_RECONNECT_COMPLETED,T),jl(xn.WEBSOCKET_RECONNECT,S),lo(()=>{clearTimeout(i)}),(A,y)=>{const x=z("fluent-icon");return p(),V(Ps,{name:"network-notification-fade",tag:"div"},{default:K(()=>[pe(c("div",$D,[c("div",MD,[v(x,{icon:d.value,class:"text-n-amber-12",size:"18"},null,8,["icon"]),c("span",kD,E(r.value),1),u.value?(p(),V(ce,{key:0,ghost:"",sm:"",amber:"",icon:"i-lucide-refresh-ccw",title:A.$t("NETWORK.BUTTON.REFRESH"),class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:m},null,8,["title"])):O("",!0),v(ce,{ghost:"",sm:"",amber:"",icon:"i-lucide-x",class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:h})])],512),[[pn,s.value]])]),_:1})}}},PD={components:{NextButton:ce},props:{bannerMessage:{type:String,default:""},hrefLink:{type:String,default:""},hrefLinkText:{type:String,default:""},hasActionButton:{type:Boolean,default:!1},actionButtonVariant:{type:String,default:"faded"},actionButtonLabel:{type:String,default:""},actionButtonIcon:{type:String,default:"i-lucide-arrow-right"},colorScheme:{type:String,default:""},hasCloseButton:{type:Boolean,default:!1}},emits:["primaryAction","close"],computed:{bannerClasses(){const e=[this.colorScheme];return(this.hasActionButton||this.hasCloseButton)&&e.push("has-button"),e},getButtonColor(){return{primary:"blue",secondary:"blue",alert:"ruby",warning:"amber"}[this.colorScheme]||"blue"}},methods:{onClick(e){this.$emit("primaryAction",e)},onClickClose(e){this.$emit("close",e)}}},BD={class:"banner-message"},FD=["href"],UD={class:"actions"};function GD(e,t,n,s,a,o){const l=z("NextButton");return p(),f("div",{class:re(["flex items-center justify-center h-12 gap-4 px-4 py-3 text-xs text-white banner dark:text-white woot-banner",o.bannerClasses])},[c("span",BD,[Ee(E(n.bannerMessage)+" ",1),n.hrefLink?(p(),f("a",{key:0,href:n.hrefLink,rel:"noopener noreferrer nofollow",target:"_blank"},E(n.hrefLinkText),9,FD)):O("",!0)]),c("div",UD,[n.hasActionButton?(p(),V(l,{key:0,xs:"",icon:n.actionButtonIcon,variant:n.actionButtonVariant,color:o.getButtonColor,label:n.actionButtonLabel,onClick:o.onClick},null,8,["icon","variant","color","label","onClick"])):O("",!0),n.hasCloseButton?(p(),V(l,{key:1,xs:"",icon:"i-lucide-circle-x",color:o.getButtonColor,label:e.$t("GENERAL_SETTINGS.DISMISS"),onClick:o.onClickClose},null,8,["color","label","onClick"])):O("",!0)])],2)}const td=Fe(PD,[["render",GD],["__scopeId","data-v-227ca4d0"]]);function io(){const e=Nn(),t=C(()=>e.getCurrentRole.value);return{isAdmin:C(()=>t.value==="administrator")}}var Sf={exports:{}};const VD="2.0.0",RA=256,HD=Number.MAX_SAFE_INTEGER||9007199254740991,WD=16,KD=RA-6,zD=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var mp={MAX_LENGTH:RA,MAX_SAFE_COMPONENT_LENGTH:WD,MAX_SAFE_BUILD_LENGTH:KD,MAX_SAFE_INTEGER:HD,RELEASE_TYPES:zD,SEMVER_SPEC_VERSION:VD,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Jm={};const jD=typeof process=="object"&&Jm&&Jm.NODE_DEBUG&&/\bsemver\b/i.test(Jm.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var hp=jD;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=mp,o=hp;t=e.exports={};const l=t.re=[],i=t.safeRe=[],r=t.src=[],d=t.t={};let u=0;const m="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",a],[m,s]],_=T=>{for(const[S,b]of h)T=T.split(`${S}*`).join(`${S}{0,${b}}`).split(`${S}+`).join(`${S}{1,${b}}`);return T},g=(T,S,b)=>{const A=_(S),y=u++;o(T,y,S),d[T]=y,r[y]=S,l[y]=new RegExp(S,b?"g":void 0),i[y]=new RegExp(A,b?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),g("MAINVERSION",`(${r[d.NUMERICIDENTIFIER]})\\.(${r[d.NUMERICIDENTIFIER]})\\.(${r[d.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${r[d.NUMERICIDENTIFIERLOOSE]})\\.(${r[d.NUMERICIDENTIFIERLOOSE]})\\.(${r[d.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${r[d.NUMERICIDENTIFIER]}|${r[d.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${r[d.NUMERICIDENTIFIERLOOSE]}|${r[d.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${r[d.PRERELEASEIDENTIFIER]}(?:\\.${r[d.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${r[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[d.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${m}+`),g("BUILD",`(?:\\+(${r[d.BUILDIDENTIFIER]}(?:\\.${r[d.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${r[d.MAINVERSION]}${r[d.PRERELEASE]}?${r[d.BUILD]}?`),g("FULL",`^${r[d.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${r[d.MAINVERSIONLOOSE]}${r[d.PRERELEASELOOSE]}?${r[d.BUILD]}?`),g("LOOSE",`^${r[d.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${r[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${r[d.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${r[d.XRANGEIDENTIFIER]})(?:\\.(${r[d.XRANGEIDENTIFIER]})(?:\\.(${r[d.XRANGEIDENTIFIER]})(?:${r[d.PRERELEASE]})?${r[d.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${r[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[d.XRANGEIDENTIFIERLOOSE]})(?:${r[d.PRERELEASELOOSE]})?${r[d.BUILD]}?)?)?`),g("XRANGE",`^${r[d.GTLT]}\\s*${r[d.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${r[d.GTLT]}\\s*${r[d.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${r[d.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",r[d.COERCEPLAIN]+`(?:${r[d.PRERELEASE]})?(?:${r[d.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",r[d.COERCE],!0),g("COERCERTLFULL",r[d.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${r[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${r[d.LONETILDE]}${r[d.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${r[d.LONETILDE]}${r[d.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${r[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${r[d.LONECARET]}${r[d.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${r[d.LONECARET]}${r[d.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${r[d.GTLT]}\\s*(${r[d.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${r[d.GTLT]}\\s*(${r[d.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${r[d.GTLT]}\\s*(${r[d.LOOSEPLAIN]}|${r[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${r[d.XRANGEPLAIN]})\\s+-\\s+(${r[d.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${r[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[d.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Sf,Sf.exports);var nd=Sf.exports;const YD=Object.freeze({loose:!0}),XD=Object.freeze({}),qD=e=>e?typeof e!="object"?YD:e:XD;var Fg=qD;const u1=/^[0-9]+$/,$A=(e,t)=>{const n=u1.test(e),s=u1.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},ZD=(e,t)=>$A(t,e);var MA={compareIdentifiers:$A,rcompareIdentifiers:ZD};const Id=hp,{MAX_LENGTH:p1,MAX_SAFE_INTEGER:Cd}=mp,{safeRe:m1,t:h1}=nd,QD=Fg,{compareIdentifiers:Gi}=MA;let JD=class Lo{constructor(t,n){if(n=QD(n),t instanceof Lo){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>p1)throw new TypeError(`version is longer than ${p1} characters`);Id("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const s=t.trim().match(n.loose?m1[h1.LOOSE]:m1[h1.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Cd||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Cd||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Cd||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const o=+a;if(o>=0&&o<Cd)return o}return a}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Id("SemVer.compare",this.version,this.options,t),!(t instanceof Lo)){if(typeof t=="string"&&t===this.version)return 0;t=new Lo(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Lo||(t=new Lo(t,this.options)),Gi(this.major,t.major)||Gi(this.minor,t.minor)||Gi(this.patch,t.patch)}comparePre(t){if(t instanceof Lo||(t=new Lo(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const s=this.prerelease[n],a=t.prerelease[n];if(Id("prerelease compare",n,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return Gi(s,a)}while(++n)}compareBuild(t){t instanceof Lo||(t=new Lo(t,this.options));let n=0;do{const s=this.build[n],a=t.build[n];if(Id("build compare",n,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return Gi(s,a)}while(++n)}inc(t,n,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,s),this.inc("pre",n,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,s),this.inc("pre",n,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(s)?1:0;if(!n&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(n){let o=[n,a];s===!1&&(o=[n]),Gi(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ta=JD;const f1=Ta,e4=(e,t,n=!1)=>{if(e instanceof f1)return e;try{return new f1(e,t)}catch(s){if(!n)return null;throw s}};var Nr=e4;const t4=Nr,n4=(e,t)=>{const n=t4(e,t);return n?n.version:null};var s4=n4;const a4=Nr,o4=(e,t)=>{const n=a4(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var l4=o4;const g1=Ta,i4=(e,t,n,s,a)=>{typeof n=="string"&&(a=s,s=n,n=void 0);try{return new g1(e instanceof g1?e.version:e,n).inc(t,s,a).version}catch{return null}};var r4=i4;const _1=Nr,c4=(e,t)=>{const n=_1(e,null,!0),s=_1(t,null,!0),a=n.compare(s);if(a===0)return null;const o=a>0,l=o?n:s,i=o?s:n,r=!!l.prerelease.length;if(!!i.prerelease.length&&!r)return!i.patch&&!i.minor?"major":l.patch?"patch":l.minor?"minor":"major";const u=r?"pre":"";return n.major!==s.major?u+"major":n.minor!==s.minor?u+"minor":n.patch!==s.patch?u+"patch":"prerelease"};var d4=c4;const u4=Ta,p4=(e,t)=>new u4(e,t).major;var m4=p4;const h4=Ta,f4=(e,t)=>new h4(e,t).minor;var g4=f4;const _4=Ta,v4=(e,t)=>new _4(e,t).patch;var b4=v4;const E4=Nr,T4=(e,t)=>{const n=E4(e,t);return n&&n.prerelease.length?n.prerelease:null};var A4=T4;const v1=Ta,y4=(e,t,n)=>new v1(e,n).compare(new v1(t,n));var Co=y4;const S4=Co,I4=(e,t,n)=>S4(t,e,n);var C4=I4;const x4=Co,N4=(e,t)=>x4(e,t,!0);var O4=N4;const b1=Ta,w4=(e,t,n)=>{const s=new b1(e,n),a=new b1(t,n);return s.compare(a)||s.compareBuild(a)};var Ug=w4;const R4=Ug,$4=(e,t)=>e.sort((n,s)=>R4(n,s,t));var M4=$4;const k4=Ug,L4=(e,t)=>e.sort((n,s)=>k4(s,n,t));var D4=L4;const P4=Co,B4=(e,t,n)=>P4(e,t,n)>0;var fp=B4;const F4=Co,U4=(e,t,n)=>F4(e,t,n)<0;var Gg=U4;const G4=Co,V4=(e,t,n)=>G4(e,t,n)===0;var kA=V4;const H4=Co,W4=(e,t,n)=>H4(e,t,n)!==0;var LA=W4;const K4=Co,z4=(e,t,n)=>K4(e,t,n)>=0;var Vg=z4;const j4=Co,Y4=(e,t,n)=>j4(e,t,n)<=0;var Hg=Y4;const X4=kA,q4=LA,Z4=fp,Q4=Vg,J4=Gg,e8=Hg,t8=(e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return X4(e,n,s);case"!=":return q4(e,n,s);case">":return Z4(e,n,s);case">=":return Q4(e,n,s);case"<":return J4(e,n,s);case"<=":return e8(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}};var DA=t8;const n8=Ta,s8=Nr,{safeRe:xd,t:Nd}=nd,a8=(e,t)=>{if(e instanceof n8)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?xd[Nd.COERCEFULL]:xd[Nd.COERCE]);else{const r=t.includePrerelease?xd[Nd.COERCERTLFULL]:xd[Nd.COERCERTL];let d;for(;(d=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||d.index+d[0].length!==n.index+n[0].length)&&(n=d),r.lastIndex=d.index+d[1].length+d[2].length;r.lastIndex=-1}if(n===null)return null;const s=n[2],a=n[3]||"0",o=n[4]||"0",l=t.includePrerelease&&n[5]?`-${n[5]}`:"",i=t.includePrerelease&&n[6]?`+${n[6]}`:"";return s8(`${s}.${a}.${o}${l}${i}`,t)};var o8=a8;class l8{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(t,n)}return this}}var i8=l8,eh,E1;function xo(){if(E1)return eh;E1=1;const e=/\s+/g;class t{constructor(M,R){if(R=a(R),M instanceof t)return M.loose===!!R.loose&&M.includePrerelease===!!R.includePrerelease?M:new t(M.raw,R);if(M instanceof o)return this.raw=M.value,this.set=[[M]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=M.trim().replace(e," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(W=>!T(W[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const W of this.set)if(W.length===1&&S(W[0])){this.set=[W];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let M=0;M<this.set.length;M++){M>0&&(this.formatted+="||");const R=this.set[M];for(let P=0;P<R.length;P++)P>0&&(this.formatted+=" "),this.formatted+=R[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(M){const P=((this.options.includePrerelease&&_)|(this.options.loose&&g))+":"+M,W=s.get(P);if(W)return W;const Q=this.options.loose,Z=Q?r[d.HYPHENRANGELOOSE]:r[d.HYPHENRANGE];M=M.replace(Z,U(this.options.includePrerelease)),l("hyphen replace",M),M=M.replace(r[d.COMPARATORTRIM],u),l("comparator trim",M),M=M.replace(r[d.TILDETRIM],m),l("tilde trim",M),M=M.replace(r[d.CARETTRIM],h),l("caret trim",M);let j=M.split(" ").map(he=>A(he,this.options)).join(" ").split(/\s+/).map(he=>k(he,this.options));Q&&(j=j.filter(he=>(l("loose invalid filter",he,this.options),!!he.match(r[d.COMPARATORLOOSE])))),l("range list",j);const X=new Map,q=j.map(he=>new o(he,this.options));for(const he of q){if(T(he))return[he];X.set(he.value,he)}X.size>1&&X.has("")&&X.delete("");const se=[...X.values()];return s.set(P,se),se}intersects(M,R){if(!(M instanceof t))throw new TypeError("a Range is required");return this.set.some(P=>b(P,R)&&M.set.some(W=>b(W,R)&&P.every(Q=>W.every(Z=>Q.intersects(Z,R)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new i(M,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(G(this.set[R],M,this.options))return!0;return!1}}eh=t;const n=i8,s=new n,a=Fg,o=gp(),l=hp,i=Ta,{safeRe:r,t:d,comparatorTrimReplace:u,tildeTrimReplace:m,caretTrimReplace:h}=nd,{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:g}=mp,T=L=>L.value==="<0.0.0-0",S=L=>L.value==="",b=(L,M)=>{let R=!0;const P=L.slice();let W=P.pop();for(;R&&P.length;)R=P.every(Q=>W.intersects(Q,M)),W=P.pop();return R},A=(L,M)=>(l("comp",L,M),L=N(L,M),l("caret",L),L=x(L,M),l("tildes",L),L=D(L,M),l("xrange",L),L=B(L,M),l("stars",L),L),y=L=>!L||L.toLowerCase()==="x"||L==="*",x=(L,M)=>L.trim().split(/\s+/).map(R=>$(R,M)).join(" "),$=(L,M)=>{const R=M.loose?r[d.TILDELOOSE]:r[d.TILDE];return L.replace(R,(P,W,Q,Z,j)=>{l("tilde",L,P,W,Q,Z,j);let X;return y(W)?X="":y(Q)?X=`>=${W}.0.0 <${+W+1}.0.0-0`:y(Z)?X=`>=${W}.${Q}.0 <${W}.${+Q+1}.0-0`:j?(l("replaceTilde pr",j),X=`>=${W}.${Q}.${Z}-${j} <${W}.${+Q+1}.0-0`):X=`>=${W}.${Q}.${Z} <${W}.${+Q+1}.0-0`,l("tilde return",X),X})},N=(L,M)=>L.trim().split(/\s+/).map(R=>w(R,M)).join(" "),w=(L,M)=>{l("caret",L,M);const R=M.loose?r[d.CARETLOOSE]:r[d.CARET],P=M.includePrerelease?"-0":"";return L.replace(R,(W,Q,Z,j,X)=>{l("caret",L,W,Q,Z,j,X);let q;return y(Q)?q="":y(Z)?q=`>=${Q}.0.0${P} <${+Q+1}.0.0-0`:y(j)?Q==="0"?q=`>=${Q}.${Z}.0${P} <${Q}.${+Z+1}.0-0`:q=`>=${Q}.${Z}.0${P} <${+Q+1}.0.0-0`:X?(l("replaceCaret pr",X),Q==="0"?Z==="0"?q=`>=${Q}.${Z}.${j}-${X} <${Q}.${Z}.${+j+1}-0`:q=`>=${Q}.${Z}.${j}-${X} <${Q}.${+Z+1}.0-0`:q=`>=${Q}.${Z}.${j}-${X} <${+Q+1}.0.0-0`):(l("no pr"),Q==="0"?Z==="0"?q=`>=${Q}.${Z}.${j}${P} <${Q}.${Z}.${+j+1}-0`:q=`>=${Q}.${Z}.${j}${P} <${Q}.${+Z+1}.0-0`:q=`>=${Q}.${Z}.${j} <${+Q+1}.0.0-0`),l("caret return",q),q})},D=(L,M)=>(l("replaceXRanges",L,M),L.split(/\s+/).map(R=>H(R,M)).join(" ")),H=(L,M)=>{L=L.trim();const R=M.loose?r[d.XRANGELOOSE]:r[d.XRANGE];return L.replace(R,(P,W,Q,Z,j,X)=>{l("xRange",L,P,W,Q,Z,j,X);const q=y(Q),se=q||y(Z),he=se||y(j),be=he;return W==="="&&be&&(W=""),X=M.includePrerelease?"-0":"",q?W===">"||W==="<"?P="<0.0.0-0":P="*":W&&be?(se&&(Z=0),j=0,W===">"?(W=">=",se?(Q=+Q+1,Z=0,j=0):(Z=+Z+1,j=0)):W==="<="&&(W="<",se?Q=+Q+1:Z=+Z+1),W==="<"&&(X="-0"),P=`${W+Q}.${Z}.${j}${X}`):se?P=`>=${Q}.0.0${X} <${+Q+1}.0.0-0`:he&&(P=`>=${Q}.${Z}.0${X} <${Q}.${+Z+1}.0-0`),l("xRange return",P),P})},B=(L,M)=>(l("replaceStars",L,M),L.trim().replace(r[d.STAR],"")),k=(L,M)=>(l("replaceGTE0",L,M),L.trim().replace(r[M.includePrerelease?d.GTE0PRE:d.GTE0],"")),U=L=>(M,R,P,W,Q,Z,j,X,q,se,he,be)=>(y(P)?R="":y(W)?R=`>=${P}.0.0${L?"-0":""}`:y(Q)?R=`>=${P}.${W}.0${L?"-0":""}`:Z?R=`>=${R}`:R=`>=${R}${L?"-0":""}`,y(q)?X="":y(se)?X=`<${+q+1}.0.0-0`:y(he)?X=`<${q}.${+se+1}.0-0`:be?X=`<=${q}.${se}.${he}-${be}`:L?X=`<${q}.${se}.${+he+1}-0`:X=`<=${X}`,`${R} ${X}`.trim()),G=(L,M,R)=>{for(let P=0;P<L.length;P++)if(!L[P].test(M))return!1;if(M.prerelease.length&&!R.includePrerelease){for(let P=0;P<L.length;P++)if(l(L[P].semver),L[P].semver!==o.ANY&&L[P].semver.prerelease.length>0){const W=L[P].semver;if(W.major===M.major&&W.minor===M.minor&&W.patch===M.patch)return!0}return!1}return!0};return eh}var th,T1;function gp(){if(T1)return th;T1=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,m){if(m=n(m),u instanceof t){if(u.loose===!!m.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),l("comparator",u,m),this.options=m,this.loose=!!m.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(u){const m=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],h=u.match(m);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new i(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(l("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new i(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,m){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new r(u.value,m).test(this.value):u.operator===""?u.value===""?!0:new r(this.value,m).test(u.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,m)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,m)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}th=t;const n=Fg,{safeRe:s,t:a}=nd,o=DA,l=hp,i=Ta,r=xo();return th}const r8=xo(),c8=(e,t,n)=>{try{t=new r8(t,n)}catch{return!1}return t.test(e)};var _p=c8;const d8=xo(),u8=(e,t)=>new d8(e,t).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" "));var p8=u8;const m8=Ta,h8=xo(),f8=(e,t,n)=>{let s=null,a=null,o=null;try{o=new h8(t,n)}catch{return null}return e.forEach(l=>{o.test(l)&&(!s||a.compare(l)===-1)&&(s=l,a=new m8(s,n))}),s};var g8=f8;const _8=Ta,v8=xo(),b8=(e,t,n)=>{let s=null,a=null,o=null;try{o=new v8(t,n)}catch{return null}return e.forEach(l=>{o.test(l)&&(!s||a.compare(l)===1)&&(s=l,a=new _8(s,n))}),s};var E8=b8;const nh=Ta,T8=xo(),A1=fp,A8=(e,t)=>{e=new T8(e,t);let n=new nh("0.0.0");if(e.test(n)||(n=new nh("0.0.0-0"),e.test(n)))return n;n=null;for(let s=0;s<e.set.length;++s){const a=e.set[s];let o=null;a.forEach(l=>{const i=new nh(l.semver.version);switch(l.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!o||A1(i,o))&&(o=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),o&&(!n||A1(n,o))&&(n=o)}return n&&e.test(n)?n:null};var y8=A8;const S8=xo(),I8=(e,t)=>{try{return new S8(e,t).range||"*"}catch{return null}};var C8=I8;const x8=Ta,PA=gp(),{ANY:N8}=PA,O8=xo(),w8=_p,y1=fp,S1=Gg,R8=Hg,$8=Vg,M8=(e,t,n,s)=>{e=new x8(e,s),t=new O8(t,s);let a,o,l,i,r;switch(n){case">":a=y1,o=R8,l=S1,i=">",r=">=";break;case"<":a=S1,o=$8,l=y1,i="<",r="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(w8(e,t,s))return!1;for(let d=0;d<t.set.length;++d){const u=t.set[d];let m=null,h=null;if(u.forEach(_=>{_.semver===N8&&(_=new PA(">=0.0.0")),m=m||_,h=h||_,a(_.semver,m.semver,s)?m=_:l(_.semver,h.semver,s)&&(h=_)}),m.operator===i||m.operator===r||(!h.operator||h.operator===i)&&o(e,h.semver))return!1;if(h.operator===r&&l(e,h.semver))return!1}return!0};var Wg=M8;const k8=Wg,L8=(e,t,n)=>k8(e,t,">",n);var D8=L8;const P8=Wg,B8=(e,t,n)=>P8(e,t,"<",n);var F8=B8;const I1=xo(),U8=(e,t,n)=>(e=new I1(e,n),t=new I1(t,n),e.intersects(t,n));var G8=U8;const V8=_p,H8=Co;var W8=(e,t,n)=>{const s=[];let a=null,o=null;const l=e.sort((u,m)=>H8(u,m,n));for(const u of l)V8(u,t,n)?(o=u,a||(a=u)):(o&&s.push([a,o]),o=null,a=null);a&&s.push([a,null]);const i=[];for(const[u,m]of s)u===m?i.push(u):!m&&u===l[0]?i.push("*"):m?u===l[0]?i.push(`<=${m}`):i.push(`${u} - ${m}`):i.push(`>=${u}`);const r=i.join(" || "),d=typeof t.raw=="string"?t.raw:String(t);return r.length<d.length?r:t};const C1=xo(),Kg=gp(),{ANY:sh}=Kg,Yr=_p,zg=Co,K8=(e,t,n={})=>{if(e===t)return!0;e=new C1(e,n),t=new C1(t,n);let s=!1;e:for(const a of e.set){for(const o of t.set){const l=j8(a,o,n);if(s=s||l!==null,l)continue e}if(s)return!1}return!0},z8=[new Kg(">=0.0.0-0")],x1=[new Kg(">=0.0.0")],j8=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===sh){if(t.length===1&&t[0].semver===sh)return!0;n.includePrerelease?e=z8:e=x1}if(t.length===1&&t[0].semver===sh){if(n.includePrerelease)return!0;t=x1}const s=new Set;let a,o;for(const _ of e)_.operator===">"||_.operator===">="?a=N1(a,_,n):_.operator==="<"||_.operator==="<="?o=O1(o,_,n):s.add(_.semver);if(s.size>1)return null;let l;if(a&&o){if(l=zg(a.semver,o.semver,n),l>0)return null;if(l===0&&(a.operator!==">="||o.operator!=="<="))return null}for(const _ of s){if(a&&!Yr(_,String(a),n)||o&&!Yr(_,String(o),n))return null;for(const g of t)if(!Yr(_,String(g),n))return!1;return!0}let i,r,d,u,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1;m&&m.prerelease.length===1&&o.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(const _ of t){if(u=u||_.operator===">"||_.operator===">=",d=d||_.operator==="<"||_.operator==="<=",a){if(h&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===h.major&&_.semver.minor===h.minor&&_.semver.patch===h.patch&&(h=!1),_.operator===">"||_.operator===">="){if(i=N1(a,_,n),i===_&&i!==a)return!1}else if(a.operator===">="&&!Yr(a.semver,String(_),n))return!1}if(o){if(m&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===m.major&&_.semver.minor===m.minor&&_.semver.patch===m.patch&&(m=!1),_.operator==="<"||_.operator==="<="){if(r=O1(o,_,n),r===_&&r!==o)return!1}else if(o.operator==="<="&&!Yr(o.semver,String(_),n))return!1}if(!_.operator&&(o||a)&&l!==0)return!1}return!(a&&d&&!o&&l!==0||o&&u&&!a&&l!==0||h||m)},N1=(e,t,n)=>{if(!e)return t;const s=zg(e.semver,t.semver,n);return s>0?e:s<0||t.operator===">"&&e.operator===">="?t:e},O1=(e,t,n)=>{if(!e)return t;const s=zg(e.semver,t.semver,n);return s<0?e:s>0||t.operator==="<"&&e.operator==="<="?t:e};var Y8=K8;const ah=nd,w1=mp,X8=Ta,R1=MA,q8=Nr,Z8=s4,Q8=l4,J8=r4,e5=d4,t5=m4,n5=g4,s5=b4,a5=A4,o5=Co,l5=C4,i5=O4,r5=Ug,c5=M4,d5=D4,u5=fp,p5=Gg,m5=kA,h5=LA,f5=Vg,g5=Hg,_5=DA,v5=o8,b5=gp(),E5=xo(),T5=_p,A5=p8,y5=g8,S5=E8,I5=y8,C5=C8,x5=Wg,N5=D8,O5=F8,w5=G8,R5=W8,$5=Y8;var M5={parse:q8,valid:Z8,clean:Q8,inc:J8,diff:e5,major:t5,minor:n5,patch:s5,prerelease:a5,compare:o5,rcompare:l5,compareLoose:i5,compareBuild:r5,sort:c5,rsort:d5,gt:u5,lt:p5,eq:m5,neq:h5,gte:f5,lte:g5,cmp:_5,coerce:v5,Comparator:b5,Range:E5,satisfies:T5,toComparators:A5,maxSatisfying:y5,minSatisfying:S5,minVersion:I5,validRange:C5,outside:x5,gtr:N5,ltr:O5,intersects:w5,simplifyRange:R5,subset:$5,SemVer:X8,re:ah.re,src:ah.src,tokens:ah.t,SEMVER_SPEC_VERSION:w1.SEMVER_SPEC_VERSION,RELEASE_TYPES:w1.RELEASE_TYPES,compareIdentifiers:R1.compareIdentifiers,rcompareIdentifiers:R1.rcompareIdentifiers};const ku=sg(M5),k5=(e,t)=>ku.valid(e)?ku.lt(t,e):!1,L5={components:{Banner:td},props:{latestChatwootVersion:{type:String,default:""}},setup(){const{isAdmin:e}=io();return{isAdmin:e}},data(){return{userDismissedBanner:!1}},computed:{...St({globalConfig:"globalConfig/get"}),updateAvailable(){return k5(this.latestChatwootVersion,this.globalConfig.appVersion)},bannerMessage(){return this.$t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:this.latestChatwootVersion})},shouldShowBanner(){return!this.userDismissedBanner&&this.globalConfig.displayManifest&&this.updateAvailable&&!this.isVersionNotificationDismissed(this.latestChatwootVersion)&&this.isAdmin}},methods:{isVersionNotificationDismissed(e){return(Qa.get(vo.DISMISSED_UPDATES)||[]).includes(e)},dismissUpdateBanner(){let e=Qa.get(vo.DISMISSED_UPDATES)||[];e instanceof Array?e.push(this.latestChatwootVersion):e=[this.latestChatwootVersion],Qa.set(vo.DISMISSED_UPDATES,e),this.userDismissedBanner=!0}}};function D5(e,t,n,s,a,o){const l=z("Banner");return o.shouldShowBanner?(p(),V(l,{key:0,"color-scheme":"primary","banner-message":o.bannerMessage,"href-link":"https://github.com/chatwoot/chatwoot/releases","href-link-text":e.$t("GENERAL_SETTINGS.LEARN_MORE"),"has-close-button":"",onClose:o.dismissUpdateBanner},null,8,["banner-message","href-link-text","onClose"])):O("",!0)}const P5=Fe(L5,[["render",D5]]);function _s(){const e=cn(),t=yt(),n=ke("accounts/getAccount"),s=ke("globalConfig/isOnChatwootCloud"),a=ke("accounts/isFeatureEnabledonAccount"),o=C(()=>Number(e.params.accountId)),l=C(()=>n.value(o.value));return{accountId:o,route:e,currentAccount:l,accountScopedUrl:m=>`/app/accounts/${o.value}/${m}`,accountScopedRoute:(m,h,_)=>({name:m,params:{accountId:o.value,...h},query:{..._}}),isCloudFeatureEnabled:m=>a.value(l.value.id,m),isOnChatwootCloud:s,updateAccount:async(m,h)=>{await t.dispatch("accounts/update",{...m,options:h})}}}const $1={status:null,endsOn:null},B5={components:{Banner:td},setup(){const{isAdmin:e}=io(),{accountId:t}=_s();return{accountId:t,isAdmin:e}},computed:{...St({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",getAccount:"accounts/getAccount"}),bannerMessage(){return this.$t("GENERAL_SETTINGS.PAYMENT_PENDING")},actionButtonMessage(){return this.$t("GENERAL_SETTINGS.OPEN_BILLING")},shouldShowBanner(){return!this.isOnChatwootCloud||!this.isAdmin?!1:this.isPaymentPending()}},methods:{routeToBilling(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},isPaymentPending(){const{status:e,endsOn:t}=this.getSubscriptionInfo();return!!(e&&t&&e==="past_due"&&t<new Date)},getSubscriptionInfo(){const e=this.getAccount(this.accountId);if(!e)return $1;const{custom_attributes:t}=e;if(!t)return $1;const{subscription_status:n,subscription_ends_on:s}=t;return{status:n,endsOn:new Date(s)}}}};function F5(e,t,n,s,a,o){const l=z("Banner");return o.shouldShowBanner?(p(),V(l,{key:0,"color-scheme":"alert","banner-message":o.bannerMessage,"action-button-label":o.actionButtonMessage,"has-action-button":"",onPrimaryAction:o.routeToBilling},null,8,["banner-message","action-button-label","onPrimaryAction"])):O("",!0)}const U5=Fe(B5,[["render",F5]]),G5={components:{Banner:td},computed:{...St({currentUser:"getCurrentUser"}),bannerMessage(){return this.$t("APP_GLOBAL.EMAIL_VERIFICATION_PENDING")},actionButtonMessage(){return this.$t("APP_GLOBAL.RESEND_VERIFICATION_MAIL")},shouldShowBanner(){return!this.currentUser.confirmed}},methods:{resendVerificationEmail(){this.$store.dispatch("resendConfirmation"),_e(this.$t("APP_GLOBAL.EMAIL_VERIFICATION_SENT"))}}};function V5(e,t,n,s,a,o){const l=z("Banner");return o.shouldShowBanner?(p(),V(l,{key:0,"color-scheme":"alert","banner-message":o.bannerMessage,"action-button-label":o.actionButtonMessage,"action-button-icon":"i-lucide-mail","has-action-button":"",onPrimaryAction:o.resendVerificationEmail},null,8,["banner-message","action-button-label","onPrimaryAction"])):O("",!0)}const H5=Fe(G5,[["render",V5]]);function BA(){return{isImpersonating:C(()=>pN.get(mN.IMPERSONATION_USER))}}const{isImpersonating:W5}=BA();class K5 extends ex{constructor(n,s){const{websocketURL:a=""}=window.chatwootConfig||{};super(n,s,a);hn(this,"onReconnect",()=>{It.emit(xn.WEBSOCKET_RECONNECT)});hn(this,"onDisconnected",()=>{It.emit(xn.WEBSOCKET_DISCONNECT)});hn(this,"isAValidEvent",n=>this.app.$store.getters.getCurrentAccountId===n.account_id);hn(this,"onMessageUpdated",n=>{this.app.$store.dispatch("updateMessage",n)});hn(this,"onPresenceUpdate",n=>{W5.value||(this.app.$store.dispatch("contacts/updatePresence",n.contacts),this.app.$store.dispatch("agents/updatePresence",n.users),this.app.$store.dispatch("setCurrentUserAvailability",n.users))});hn(this,"onConversationContactChange",n=>{const{meta:s={},id:a}=n,{sender:o}=s||{};a&&this.app.$store.dispatch("updateConversationContact",{conversationId:a,...o})});hn(this,"onAssigneeChanged",n=>{const{id:s}=n;s&&this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});hn(this,"onConversationCreated",n=>{this.app.$store.dispatch("addConversation",n),this.fetchConversationStats()});hn(this,"onConversationRead",n=>{this.app.$store.dispatch("updateConversation",n)});hn(this,"onLogout",()=>fr.logout());hn(this,"onMessageCreated",n=>{const{conversation:{last_activity_at:s},conversation_id:a}=n;hN.onNewMessage(n),this.app.$store.dispatch("addMessage",n),this.app.$store.dispatch("updateConversationLastActivity",{lastActivityAt:s,conversationId:a})});hn(this,"onReload",()=>window.location.reload());hn(this,"onStatusChange",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});hn(this,"onConversationUpdated",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});hn(this,"onTypingOn",({conversation:n,user:s})=>{const a=n.id;this.clearTimer(a),this.app.$store.dispatch("conversationTypingStatus/create",{conversationId:a,user:s}),this.initTimer({conversation:n,user:s})});hn(this,"onTypingOff",({conversation:n,user:s})=>{const a=n.id;this.clearTimer(a),this.app.$store.dispatch("conversationTypingStatus/destroy",{conversationId:a,user:s})});hn(this,"onConversationMentioned",n=>{this.app.$store.dispatch("addMentions",n)});hn(this,"clearTimer",n=>{const s=this.CancelTyping[n];s&&(clearTimeout(s),this.CancelTyping[n]=null)});hn(this,"initTimer",({conversation:n,user:s})=>{const a=n.id;this.CancelTyping[a]=setTimeout(()=>{this.onTypingOff({conversation:n,user:s})},3e4)});hn(this,"fetchConversationStats",()=>{It.emit("fetch_conversation_stats")});hn(this,"onContactDelete",n=>{this.app.$store.dispatch("contacts/deleteContactThroughConversations",n.id),this.fetchConversationStats()});hn(this,"onContactUpdate",n=>{this.app.$store.dispatch("contacts/updateContact",n)});hn(this,"onNotificationCreated",n=>{this.app.$store.dispatch("notifications/addNotification",n)});hn(this,"onNotificationDeleted",n=>{this.app.$store.dispatch("notifications/deleteNotification",n)});hn(this,"onNotificationUpdated",n=>{this.app.$store.dispatch("notifications/updateNotification",n)});hn(this,"onCopilotMessageCreated",n=>{this.app.$store.dispatch("copilotMessages/upsert",n)});hn(this,"onCacheInvalidate",n=>{const s=n.cache_keys;this.app.$store.dispatch("labels/revalidate",{newKey:s.label}),this.app.$store.dispatch("inboxes/revalidate",{newKey:s.inbox}),this.app.$store.dispatch("teams/revalidate",{newKey:s.team})});this.CancelTyping=[],this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.created":this.onConversationCreated,"conversation.status_changed":this.onStatusChange,"user:logout":this.onLogout,"page:reload":this.onReload,"assignee.changed":this.onAssigneeChanged,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.contact_changed":this.onConversationContactChange,"presence.update":this.onPresenceUpdate,"contact.deleted":this.onContactDelete,"contact.updated":this.onContactUpdate,"conversation.mentioned":this.onConversationMentioned,"notification.created":this.onNotificationCreated,"notification.deleted":this.onNotificationDeleted,"notification.updated":this.onNotificationUpdated,"conversation.read":this.onConversationRead,"conversation.updated":this.onConversationUpdated,"account.cache_invalidated":this.onCacheInvalidate,"copilot.message.created":this.onCopilotMessageCreated}}}const z5={init(e,t){return new K5({$store:e},t)}},j5={props:{message:{type:String,default:""},action:{type:Object,default:()=>{}}},data(){return{toggleAfterTimeout:!1}},mounted(){},methods:{}},Y5={class:"shadow-sm bg-n-slate-12 dark:bg-n-slate-7 rounded-lg items-center gap-3 inline-flex mb-2 max-w-[25rem] min-h-[1.875rem] min-w-[15rem] px-6 py-3 text-left"},X5={class:"text-sm font-medium text-white dark:text-white"},q5={key:0};function Z5(e,t,n,s,a,o){const l=z("router-link");return p(),f("div",null,[c("div",Y5,[c("div",X5,E(n.message),1),n.action?(p(),f("div",q5,[n.action.type=="link"?(p(),V(l,{key:0,to:n.action.to,class:"font-medium cursor-pointer select-none text-n-blue-10 hover:text-n-brand"},{default:K(()=>[Ee(E(n.action.message),1)]),_:1},8,["to"])):O("",!0)])):O("",!0)])])}const Q5=Fe(j5,[["render",Z5]]),J5={__name:"SnackbarContainer",props:{duration:{type:Number,default:2500}},setup(e){const t=e,{t:n}=Pe(),s=F([]),a=F(null),o=()=>{try{const i=a.value;i!=null&&i.matches(":popover-open")&&i.hidePopover(),i==null||i.showPopover()}catch{}},l=({message:i,action:r})=>{const d=r!=null&&r.usei18n?n(i):i,u=(r==null?void 0:r.duration)||t.duration;s.value.push({key:Date.now(),message:d,action:r}),jt(o),setTimeout(()=>{s.value.shift()},u)};return pt(()=>{It.on("newToastMessage",l)}),zs(()=>{It.off("newToastMessage",l)}),(i,r)=>(p(),f("div",{ref_key:"snackbarContainer",ref:a,popover:"manual",class:"fixed top-4 left-1/2 -translate-x-1/2 max-w-[25rem] w-[calc(100%-2rem)] text-center bg-transparent border-0 p-0 m-0 outline-none overflow-visible"},[v(GE,{name:"toast-fade",tag:"div"},{default:K(()=>[(p(!0),f(fe,null,Ae(s.value,d=>(p(),V(Q5,{key:d.key,message:d.message,action:d.action},null,8,["message","action"]))),128))]),_:1})],512))}},M1=e=>{const t=Qa.get(vo.COLOR_SCHEME)||"auto";t==="auto"&&e||t==="dark"?(document.body.classList.add("dark"),document.documentElement.style.setProperty("color-scheme","dark")):(document.body.classList.remove("dark"),document.documentElement.style.setProperty("color-scheme","light"))},k1=Object.freeze([{name:"conversation_actions"},{name:"macros"},{name:"conversation_info"},{name:"contact_attributes"},{name:"contact_notes"},{name:"previous_conversation"},{name:"conversation_participants"},{name:"linear_issues"},{name:"shopify_orders"}]),eP=Object.freeze([{name:"contact_attributes"},{name:"contact_labels"},{name:"previous_conversation"}]),FA=e=>e==null?void 0:e.toLowerCase().replace(" ","_").replace("-","_").replace("::","_"),tP=e=>C(()=>{const{conversation_sidebar_items_order:t}=e.value;if(!t)return[...k1];const n=[...t];return k1.forEach(s=>{n.find(a=>a.name===s.name)||n.push(s)}),n}),nP=e=>C(()=>{const{contact_sidebar_items_order:t}=e.value;return t||eP}),sP=(e,t,n)=>{n({[e]:!t.value[e]})},aP=(e,t,n)=>{if(!e)return;const s=FA(e);n({[`${s}_signature_enabled`]:t})},oP=(e,t)=>{if(!e)return!1;const n=FA(e);return t.value[`${n}_signature_enabled`]},lP=(e,t)=>{const{editor_message_key:n,enter_to_send_enabled:s}=t.value||{};return n?n===e:e===(s?"enter":"cmd_enter")};function Sn(){const e=Nn(),t=yt(),n=C(()=>e.getUISettings.value),s=(a={})=>{t.dispatch("updateUISettings",{uiSettings:{...n.value,...a}})};return{uiSettings:n,updateUISettings:s,conversationSidebarItemsOrder:tP(n),contactSidebarItemsOrder:nP(n),isContactSidebarItemOpen:a=>!!n.value[a],toggleSidebarUIState:a=>sP(a,n,s),setSignatureFlagForInbox:(a,o)=>aP(a,o,s),fetchSignatureFlagFromUISettings:a=>oP(a,n),isEditorHotKeyEnabled:a=>lP(a,n)}}const vp={SMALLER:"14px",SMALL:"15px",DEFAULT:"16px",LARGE:"18px",LARGER:"20px"},iP=Object.keys(vp),rP=e=>`PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.OPTIONS.${e}`,cP=(e,t)=>({value:vp[t],label:e(rP(t))}),dP=e=>{document.documentElement.style.setProperty("font-size",e??vp.DEFAULT)},jg=()=>{const{uiSettings:e,updateUISettings:t}=Sn(),{t:n}=Pe(),s=iP.map(i=>cP(n,i)),a=C(()=>e.value.font_size||vp.DEFAULT),o=i=>{requestAnimationFrame(()=>dP(i))},l=async i=>{try{await t({font_size:i}),o(i),_e(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_SUCCESS"))}catch{_e(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_ERROR"))}};return ot(()=>e.value.font_size,i=>{o(i)},{immediate:!0}),{fontSizeOptions:s,currentFontSize:a,applyFontSize:o,updateFontSize:l}};class uP extends tl{constructor(){super("notification_subscriptions")}}const pP=new uP,If=(e=()=>{})=>{"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/sw.js").then(t=>e(t)).catch(t=>{console.log("SW registration failed: ",t)})},mP=()=>"Notification"in window?Notification.permission==="granted":!1,L1=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_"),hP=e=>({subscription_type:"browser_push",subscription_attributes:{endpoint:e.endpoint,p256dh:L1(e.getKey("p256dh")),auth:L1(e.getKey("auth"))}}),fP=e=>fr.hasAuthCookie()?pP.create(hP(e)):null,Cf=(e=()=>{})=>{window.chatwootConfig.vapidPublicKey&&navigator.serviceWorker.ready.then(t=>t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:window.chatwootConfig.vapidPublicKey})).then(fP).then(()=>{e()}).catch(()=>{_e("This browser does not support desktop notification")})},gP=({onSuccess:e})=>{"Notification"in window?Notification.permission==="granted"?Cf(e):Notification.permission!=="denied"&&Notification.requestPermission(t=>{t==="granted"&&Cf(e)}):_e("This browser does not support desktop notification")},_P=10800,vP=15;class bP{constructor(t,n){hn(this,"disconnect",()=>this.removeEventListeners());hn(this,"setupEventListeners",()=>{window.addEventListener("online",this.handleOnlineEvent),It.on(xn.WEBSOCKET_RECONNECT,this.onReconnect),It.on(xn.WEBSOCKET_DISCONNECT,this.onDisconnect)});hn(this,"removeEventListeners",()=>{window.removeEventListener("online",this.handleOnlineEvent),It.off(xn.WEBSOCKET_RECONNECT,this.onReconnect),It.off(xn.WEBSOCKET_DISCONNECT,this.onDisconnect)});hn(this,"getSecondsSinceDisconnect",()=>this.disconnectTime?Math.max(tT(new Date,this.disconnectTime),0):0);hn(this,"handleOnlineEvent",()=>{this.getSecondsSinceDisconnect()>=_P&&window.location.reload()});hn(this,"fetchConversations",async()=>{await this.store.dispatch("updateChatListFilters",{page:null,updatedWithin:this.getSecondsSinceDisconnect()+vP}),await this.store.dispatch("fetchAllConversations"),await this.store.dispatch("updateChatListFilters",{updatedWithin:null})});hn(this,"fetchFilteredOrSavedConversations",async t=>{await this.store.dispatch("fetchFilteredConversations",{queryData:t,page:1})});hn(this,"fetchConversationsOnReconnect",async()=>{var a;const{getAppliedConversationFiltersQuery:t,"customViews/getActiveConversationFolder":n}=this.store.getters,s=(a=t==null?void 0:t.payload)!=null&&a.length?t:n==null?void 0:n.query;s?await this.fetchFilteredOrSavedConversations(s):await this.fetchConversations()});hn(this,"fetchConversationMessagesOnReconnect",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("syncActiveConversationMessages",{conversationId:Number(t)})});hn(this,"fetchNotificationsOnReconnect",async t=>{await this.store.dispatch("notifications/index",{...t,page:1})});hn(this,"revalidateCaches",async()=>{const{label:t,inbox:n,team:s}=await this.store.dispatch("accounts/getCacheKeys");await Promise.all([this.store.dispatch("labels/revalidate",{newKey:t}),this.store.dispatch("inboxes/revalidate",{newKey:n}),this.store.dispatch("teams/revalidate",{newKey:s})])});hn(this,"handleRouteSpecificFetch",async()=>{const t=this.router.currentRoute.value.name;Pg(t,!0)?(await this.fetchConversationsOnReconnect(),await this.fetchConversationMessagesOnReconnect()):Bg(t,!0)?await this.fetchNotificationsOnReconnect(this.store.getters["notifications/getNotificationFilters"]):wA(t)&&await this.fetchNotificationsOnReconnect()});hn(this,"setConversationLastMessageId",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("setConversationLastMessageId",{conversationId:Number(t)})});hn(this,"onDisconnect",()=>{this.disconnectTime=new Date,this.setConversationLastMessageId()});hn(this,"onReconnect",async()=>{await this.handleRouteSpecificFetch(),await this.revalidateCaches(),It.emit(xn.WEBSOCKET_RECONNECT_COMPLETED)});this.store=t,this.router=n,this.disconnectTime=null,this.setupEventListeners()}}const EP={name:"App",components:{AddAccountModal:OA,LoadingState:xr,NetworkNotification:DD,UpdateBanner:P5,PaymentPendingBanner:U5,WootSnackbarBox:J5,PendingEmailVerificationBanner:H5},setup(){const e=En(),t=yt(),{accountId:n}=_s(),{currentFontSize:s}=jg();return{router:e,store:t,currentAccountId:n,currentFontSize:s}},data(){return{showAddAccountModal:!1,latestChatwootVersion:null,reconnectService:null}},computed:{...St({getAccount:"accounts/getAccount",isRTL:"accounts/isRTL",currentUser:"getCurrentUser",authUIFlags:"getAuthUIFlags",accountUIFlags:"accounts/getUIFlags"}),hasAccounts(){const{accounts:e=[]}=this.currentUser||{};return e.length>0},hideOnOnboardingView(){return!fN(this.$route)}},watch:{currentUser(){this.hasAccounts||(this.showAddAccountModal=!0)},currentAccountId:{immediate:!0,handler(){this.currentAccountId&&this.initializeAccount()}}},mounted(){this.initializeColorTheme(),this.listenToThemeChanges(),this.setLocale(window.chatwootConfig.selectedLocale)},unmounted(){this.reconnectService&&this.reconnectService.disconnect()},methods:{initializeColorTheme(){M1(window.matchMedia("(prefers-color-scheme: dark)").matches)},listenToThemeChanges(){const e=window.matchMedia("(prefers-color-scheme: dark)");e.onchange=t=>M1(t.matches)},setLocale(e){this.$root.$i18n.locale=e},async initializeAccount(){await this.$store.dispatch("accounts/get"),this.$store.dispatch("setActiveAccount",{accountId:this.currentAccountId});const{locale:e,latest_chatwoot_version:t}=this.getAccount(this.currentAccountId),{pubsub_token:n}=this.currentUser||{};this.setLocale(e),this.latestChatwootVersion=t,z5.init(this.store,n),this.reconnectService=new bP(this.store,this.router),window.reconnectService=this.reconnectService,If(s=>s.pushManager.getSubscription().then(a=>{a&&Cf()}))}}},TP=["dir"];function AP(e,t,n,s,a,o){const l=z("UpdateBanner"),i=z("PendingEmailVerificationBanner"),r=z("PaymentPendingBanner"),d=z("router-view"),u=z("AddAccountModal"),m=z("WootSnackbarBox"),h=z("NetworkNotification"),_=z("LoadingState");return!e.authUIFlags.isFetching&&!e.accountUIFlags.isFetchingItem?(p(),f("div",{key:0,id:"app",class:"flex flex-col w-full h-screen min-h-0",dir:e.isRTL?"rtl":"ltr"},[v(l,{"latest-chatwoot-version":a.latestChatwootVersion},null,8,["latest-chatwoot-version"]),s.currentAccountId?(p(),f(fe,{key:0},[o.hideOnOnboardingView?(p(),V(i,{key:0})):O("",!0),o.hideOnOnboardingView?(p(),V(r,{key:1})):O("",!0)],64)):O("",!0),v(d,null,{default:K(({Component:g})=>[v(Ps,{name:"fade",mode:"out-in"},{default:K(()=>[(p(),V(xs(g)))]),_:2},1024)]),_:1}),v(u,{show:a.showAddAccountModal,"has-accounts":o.hasAccounts},null,8,["show","has-accounts"]),v(m),v(h)],8,TP)):(p(),V(_,{key:1}))}const yP=Fe(EP,[["render",AP]]),SP=e=>Promise.reject(e),IP=e=>{const{apiHost:t=""}=window.chatwootConfig||{},n=e.create({baseURL:`${t}/`});if(fr.hasAuthCookie()){const{"access-token":s,"token-type":a,client:o,expiry:l,uid:i}=fr.getAuthData();Object.assign(n.defaults.headers.common,{"access-token":s,"token-type":a,client:o,expiry:l,uid:i})}return n.interceptors.response.use(s=>s,s=>SP(s)),n};/*!
 /**
  * vuex-router-sync v6.0.0-rc.1
  * (c) 2021 Evan You
  * @license MIT
  */function CP(e,t,n){const s={}.moduleName||"route";e.registerModule(s,{namespaced:!0,state:xf(t.currentRoute.value),mutations:{ROUTE_CHANGED(r,d){e.state[s]=xf(d.to,d.from)}}});let a=!1,o;const l=e.watch(r=>r[s],r=>{const{fullPath:d}=r;d!==o&&(o!=null&&(a=!0,t.push(r)),o=d)},{flush:"sync"}),i=t.afterEach((r,d)=>{if(a){a=!1;return}o=r.fullPath,e.commit(s+"/ROUTE_CHANGED",{to:r,from:d})});return function(){i(),l(),e.unregisterModule(s)}}function xf(e,t){const n={name:e.name,path:e.path,hash:e.hash,query:e.query,params:e.params,fullPath:e.fullPath,meta:e.meta};return t&&(n.from=xf(t)),Object.freeze(n)}function Js(){const e=window.chatwootConfig||{},t=e.hostURL,n=e.vapidPublicKey,s=e.enabledLanguages,a=e.isEnterprise==="true",o=e.isStacklab===!0||e.isStacklab==="true",l=e.enterprisePlanName;return{hostURL:t,vapidPublicKey:n,enabledLanguages:s,isEnterprise:a,isStacklab:o,enterprisePlanName:l}}const Mt={AGENT_BOTS:"agent_bots",AGENT_MANAGEMENT:"agent_management",AUTO_RESOLVE_CONVERSATIONS:"auto_resolve_conversations",AUTOMATIONS:"automations",CAMPAIGNS:"campaigns",WHATSAPP_CAMPAIGNS:"whatsapp_campaign",CANNED_RESPONSES:"canned_responses",CRM:"crm",CUSTOM_ATTRIBUTES:"custom_attributes",INBOX_MANAGEMENT:"inbox_management",INTEGRATIONS:"integrations",LABELS:"labels",MACROS:"macros",HELP_CENTER:"help_center",REPORTS:"reports",TEAM_MANAGEMENT:"team_management",VOICE_RECORDER:"voice_recorder",AUDIT_LOGS:"audit_logs",INBOX_VIEW:"inbox_view",SLA:"sla",RESPONSE_BOT:"response_bot",CHANNEL_EMAIL:"channel_email",CHANNEL_FACEBOOK:"channel_facebook",CHANNEL_TWITTER:"channel_twitter",CHANNEL_WEBSITE:"channel_website",CUSTOM_REPLY_DOMAIN:"custom_reply_domain",CUSTOM_REPLY_EMAIL:"custom_reply_email",DISABLE_BRANDING:"disable_branding",EMAIL_CONTINUITY_ON_API_CHANNEL:"email_continuity_on_api_channel",INBOUND_EMAILS:"inbound_emails",IP_LOOKUP:"ip_lookup",LINEAR:"linear_integration",CAPTAIN:"captain_integration",CUSTOM_ROLES:"custom_roles",CHATWOOT_V4:"chatwoot_v4",KANBAN_BOARD:"kanban",SCHEDULE_MESSAGES:"schedule_messages",REPORT_V4:"report_v4",CHANNEL_INSTAGRAM:"channel_instagram",CONTACT_CHATWOOT_SUPPORT_TEAM:"contact_chatwoot_support_team",WHATSAPP_EMBEDDED_SIGNUP:"whatsapp_embedded_signup",CAPTAIN_V2:"captain_integration_v2"},xP=[Mt.SLA,Mt.CAPTAIN,Mt.CUSTOM_ROLES,Mt.AUDIT_LOGS,Mt.HELP_CENTER,Mt.CAPTAIN_V2],NP={class:"relative flex flex-col min-w-0 gap-1"},OP=["for"],wP=["id","value","type","placeholder","disabled","min"],ln={__name:"Input",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},message:{type:String,default:""},disabled:{type:Boolean,default:!1},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},min:{type:String,default:""},autofocus:{type:Boolean,default:!1}},emits:["update:modelValue","blur","input","focus","enter"],setup(e,{emit:t}){const n=e,s=t,{uid:a}=qu(),o=C(()=>n.id||`input-${a}`),l=F(!1),i=F(null),r=C(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),d=C(()=>{switch(n.messageType){case"error":return"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8";default:return"outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak focus:outline-n-brand dark:focus:outline-n-brand"}}),u=g=>{s("update:modelValue",g.target.value),s("input",g)},m=g=>{s("focus",g),l.value=!0},h=g=>{s("blur",g),l.value=!1},_=g=>{s("enter",g)};return pt(()=>{n.autofocus&&jt(()=>{var g;(g=i.value)==null||g.focus()})}),(g,T)=>(p(),f("div",NP,[e.label?(p(),f("label",{key:0,for:o.value,class:"mb-0.5 text-sm font-medium text-n-slate-12"},E(e.label),9,OP)):O("",!0),at(g.$slots,"prefix"),c("input",{id:o.value,ref_key:"inputRef",ref:i,value:e.modelValue,class:re([[e.customInputClass,d.value,{error:e.messageType==="error",focus:l.value}],"block w-full reset-base text-sm h-10 !px-3 !py-2.5 !mb-0 outline outline-1 border-none border-0 outline-offset-[-1px] rounded-lg bg-n-alpha-black2 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 transition-all duration-500 ease-in-out"]),type:e.type,placeholder:e.placeholder,disabled:e.disabled,min:["date","datetime-local","time"].includes(e.type)?e.min:void 0,onInput:u,onFocus:m,onBlur:h,onKeyup:Hn(_,["enter"])},null,42,wP),e.message?(p(),f("p",{key:1,class:re(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",r.value])},E(e.message),3)):O("",!0)]))}},RP={key:0},Nf={__name:"CustomBrandPolicyWrapper",props:{showOnCustomBrandedInstance:{type:Boolean,default:!0}},setup(e){const t=e,s=Nn()["globalConfig/isACustomBrandedInstance"],a=C(()=>t.showOnCustomBrandedInstance||!s.value);return(o,l)=>a.value?(p(),f("div",RP,[at(o.$slots,"default")])):O("",!0)}},$P={agent_bots:"https://chwt.app/hc/agent-bots",agents:"https://chwt.app/hc/agents",audit_logs:"https://chwt.app/hc/audit-logs",campaigns:"https://chwt.app/hc/campaigns",canned_responses:"https://chwt.app/hc/canned",channel_email:"https://chwt.app/hc/email",channel_facebook:"https://chwt.app/hc/fb",custom_attributes:"https://chwt.app/hc/custom-attributes",dashboard_apps:"https://chwt.app/hc/dashboard-apps",help_center:"https://chwt.app/hc/help-center",inboxes:"https://chwt.app/hc/inboxes",integrations:"https://chwt.app/hc/integrations",labels:"https://chwt.app/hc/labels",macros:"https://chwt.app/hc/macros",message_reply_to:"https://chwt.app/hc/reply-to",reports:"https://chwt.app/hc/reports",sla:"https://chwt.app/hc/sla",team_management:"https://chwt.app/hc/teams",webhook:"https://chwt.app/hc/webhooks",billing:"https://chwt.app/pricing"};function MP(e){return $P[e]}const ki={__name:"BackButton",props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""},compact:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{t.backUrl!==""?Ns.push(t.backUrl):Ns.go(-1)},s=t.compact?"text-sm":"text-base";return(a,o)=>(p(),f("button",{class:re(["flex items-center p-0 font-normal cursor-pointer text-n-slate-11",I(s)]),onClickCapture:n},[o[0]||(o[0]=c("i",{class:"i-lucide-chevron-left -ml-1 text-lg"},null,-1)),Ee(" "+E(e.buttonLabel||a.$t("GENERAL_SETTINGS.BACK")),1)],34))}},kP={class:"flex flex-col items-start w-full gap-2"},LP={class:"flex items-center justify-between w-full gap-4"},DP={class:"flex items-center gap-3"},PP={key:0,class:"flex items-center w-10 h-10 p-1 rounded-full bg-n-blue-2"},BP={class:"flex items-center justify-center w-full h-full rounded-full bg-n-blue-3"},FP={class:"text-xl font-medium tracking-tight text-n-slate-12"},UP={class:"hidden gap-2 sm:flex"},GP={class:"flex flex-col w-full gap-3 text-n-slate-11"},VP={class:"mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl"},HP=["href"],WP={class:"flex flex-wrap items-start justify-start w-full gap-3 sm:hidden"},js={__name:"BaseSettingsHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},iconName:{type:String,default:""},linkText:{type:String,default:""},featureName:{type:String,default:""},backButtonLabel:{type:String,default:""}},setup(e){const n=MP(e.featureName),s=a=>{a&&window.open(a,"_blank","noopener noreferrer")};return(a,o)=>{const l=z("fluent-icon");return p(),f("div",kP,[e.backButtonLabel?(p(),V(ki,{key:0,compact:"","button-label":e.backButtonLabel},null,8,["button-label"])):O("",!0),c("div",LP,[c("div",DP,[e.iconName?(p(),f("div",PP,[c("div",BP,[v(l,{size:"14",icon:e.iconName,type:"outline",class:"flex-shrink-0 text-n-brand"},null,8,["icon"])])])):O("",!0),c("h1",FP,E(e.title),1)]),c("div",UP,[at(a.$slots,"actions")])]),c("div",GP,[c("p",VP,[at(a.$slots,"description",{},()=>[Ee(E(e.description),1)])]),v(Nf,{"show-on-custom-branded-instance":!1},{default:K(()=>[I(n)&&e.linkText?(p(),f("a",{key:0,href:I(n),target:"_blank",rel:"noopener noreferrer",class:"items-center hidden gap-1 text-sm font-medium sm:inline-flex w-fit text-n-blue-text hover:underline"},[Ee(E(e.linkText)+" ",1),v(Wt,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 text-n-blue-text size-4"})],8,HP)):O("",!0)]),_:1})]),c("div",WP,[at(a.$slots,"actions"),v(Nf,{"show-on-custom-branded-instance":!1},{default:K(()=>[I(n)&&e.linkText?(p(),V(ce,{key:0,blue:"",link:"",icon:"i-lucide-chevron-right","trailing-icon":"",label:e.linkText,onClick:o[0]||(o[0]=i=>s(I(n)))},null,8,["label"])):O("",!0)]),_:1})])])}}},KP={class:"grid grid-cols-4"},zP={class:"col-span-3"},jP={class:"text-lg font-medium text-n-slate-12"},YP={class:"text-n-slate-11 text-sm mt-2"},XP={class:"col-span-1"},Or={__name:"SectionLayout",props:{title:{type:String,required:!0},description:{type:String,required:!0},withBorder:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),f("section",{class:re(["grid grid-cols-1 pt-8 gap-5 [interpolate-size:allow-keywords]",{"border-t border-n-weak":e.withBorder,"pb-8":!e.hideContent}])},[c("header",KP,[c("div",zP,[c("h4",jP,[at(t.$slots,"title",{},()=>[Ee(E(e.title),1)])]),c("p",YP,[at(t.$slots,"description",{},()=>[Ee(E(e.description),1)])])]),c("div",XP,[at(t.$slots,"headerActions")])]),c("div",{class:re(["transition-[height] duration-300 ease-in-out text-n-slate-12",{"overflow-hidden h-0":e.hideContent,"h-auto":!e.hideContent}])},[at(t.$slots,"default")],2)],2))}},qP={__name:"AccountId",setup(e){const{t}=Pe(),{currentAccount:n}=_s(),s=C(()=>n.value.id.toString());return(a,o)=>{const l=z("woot-code");return p(),V(Or,{title:I(t)("GENERAL_SETTINGS.FORM.ACCOUNT_ID.TITLE"),description:I(t)("GENERAL_SETTINGS.FORM.ACCOUNT_ID.NOTE"),"with-border":""},{default:K(()=>[v(l,{script:s.value},null,8,["script"])]),_:1},8,["title","description"])}}},ZP={class:"p-4 text-sm text-center"},QP={key:0},JP={class:"divide-x divide-n-slate-9"},e6={class:"px-2"},t6={__name:"BuildInfo",setup(e){const{t}=Pe(),{currentAccount:n}=_s(),s=C(()=>n.value.latest_chatwoot_version),a=ke("globalConfig/get"),o=C(()=>ku.valid(s.value)?ku.lt(a.value.appVersion,s.value):!1),l=C(()=>a.value.gitSha.substring(0,7)),i=()=>{qo(a.value.gitSha)};return(r,d)=>{const u=_t("tooltip");return p(),f("div",ZP,[o.value&&I(a).displayManifest?(p(),f("div",QP,E(I(t)("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:s.value})),1)):O("",!0),c("div",JP,[c("span",e6,E(`v${I(a).appVersion}`),1),pe((p(),f("span",{class:"px-2 build-id cursor-pointer",onClick:i},[Ee(E(`Build ${l.value}`),1)])),[[u,I(t)("COMPONENTS.CODE.BUTTON_TEXT")]])])])}}},n6={key:0},s6={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%] bg-n-ruby-4 rounded"},a6={class:"mb-4"},o6={key:1},l6={__name:"AccountDelete",setup(e){const{t}=Pe(),n=yt(),s=ke("accounts/getUIFlags"),{currentAccount:a}=_s(),[o,l]=Xn(),i=C(()=>`${t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.PLACE_HOLDER",{accountName:a.value.name})}`),r=C(()=>{const{custom_attributes:S={}}=a.value;return!!S.marked_for_deletion_at}),d=C(()=>{const{custom_attributes:S={}}=a.value;return S.marked_for_deletion_at?new Date(S.marked_for_deletion_at):null}),u=C(()=>{const{custom_attributes:S={}}=a.value;return S.marked_for_deletion_reason||"manual_deletion"}),m=C(()=>d.value?d.value.toLocaleString():""),h=C(()=>{const S={deletionDate:m.value};return u.value==="manual_deletion"?t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_MANUAL",S):t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_INACTIVITY",S)});function _(S){var A,y;const b=(y=(A=S.response)==null?void 0:A.data)==null?void 0:y.message;if(b){_e(b);return}_e(t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.FAILURE"))}async function g(){l(!1);try{await n.dispatch("accounts/toggleDeletion",{action_type:"delete"}),await n.dispatch("accounts/get"),_e(t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SUCCESS"))}catch(S){_(S)}}async function T(){try{await n.dispatch("accounts/toggleDeletion",{action_type:"undelete"}),await n.dispatch("accounts/get"),_e(t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{_e(t("GENERAL_SETTINGS.UPDATE.ERROR"))}}return(S,b)=>(p(),f(fe,null,[v(Or,{title:I(t)("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.TITLE"),description:I(t)("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.NOTE"),"with-border":""},{default:K(()=>[r.value?(p(),f("div",n6,[c("div",s6,[c("p",a6,E(h.value),1),v(ce,{label:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.CLEAR_BUTTON"),color:"ruby","is-loading":I(s).isUpdating,onClick:T},null,8,["label","is-loading"])])])):O("",!0),r.value?O("",!0):(p(),f("div",o6,[v(ce,{label:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.BUTTON_TEXT"),color:"ruby",onClick:b[0]||(b[0]=A=>I(l)(!0))},null,8,["label"])]))]),_:1},8,["title","description"]),I(o)?(p(),V(aA,{key:0,show:I(o),"onUpdate:show":b[1]||(b[1]=A=>Xu(o)?o.value=A:null),title:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.TITLE"),message:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.MESSAGE"),"confirm-text":S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.BUTTON_TEXT"),"reject-text":S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.DISMISS"),"confirm-value":I(a).name,"confirm-place-holder-text":i.value,onOnConfirm:g,onOnClose:b[2]||(b[2]=A=>I(l)(!1))},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("",!0)],64))}},i6={class:"relative flex flex-col gap-1"},r6=["for"],c6=["id","value","placeholder","maxlength","disabled"],d6={key:0,class:"flex items-center justify-end h-4 mt-1 bottom-3 ltr:right-3 rtl:left-3"},u6={class:"text-xs tabular-nums text-n-slate-10"},wr={__name:"TextArea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},maxLength:{type:Number,default:200},id:{type:String,default:""},disabled:{type:Boolean,default:!1},customTextAreaClass:{type:String,default:""},customTextAreaWrapperClass:{type:String,default:""},showCharacterCount:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},minHeight:{type:String,default:"4rem"},maxHeight:{type:String,default:"12rem"},autofocus:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},signature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=F(null),o=F(!1),l=C(()=>n.modelValue.length),i=C(()=>Ti(n.signature)),r=C(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),d=()=>{!n.autoHeight||!a.value||(a.value.style.height="auto",a.value.style.height=`${a.value.scrollHeight}px`)},u=()=>{if(!a.value)return;const S=Vo(n.modelValue,i.value).trimEnd().length;a.value.focus(),a.value.setSelectionRange(S,S)},m=T=>{if(!n.allowSignature)return;const S=T?kl(n.modelValue,i.value):Vo(n.modelValue,i.value);s("update:modelValue",S),jt(()=>{d(),u()})},h=T=>{s("update:modelValue",T.target.value),n.autoHeight&&jt(d)},_=()=>{n.disabled||(o.value=!0)},g=()=>{n.disabled||(o.value=!1)};return ot(()=>n.modelValue,()=>{n.autoHeight&&jt(d)}),ot(()=>n.sendWithSignature,T=>{n.allowSignature&&m(T)}),pt(()=>{var T;n.autoHeight&&jt(d),n.autofocus&&((T=a.value)==null||T.focus())}),(T,S)=>(p(),f("div",i6,[e.label?(p(),f("label",{key:0,for:e.id,class:"mb-0.5 text-sm font-medium text-n-slate-12"},E(e.label),9,r6)):O("",!0),c("div",{class:re(["flex flex-col gap-2 px-3 pt-3 pb-3 transition-all duration-500 ease-in-out border rounded-lg bg-n-alpha-black2",[e.customTextAreaWrapperClass,{"cursor-not-allowed opacity-50 !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":o.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!o.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!o.value}]])},[at(T.$slots,"default"),c("textarea",{id:e.id,ref_key:"textareaRef",ref:a,value:e.modelValue,placeholder:e.placeholder,maxlength:e.showCharacterCount?e.maxLength:void 0,class:re([[e.customTextAreaClass,{"resize-none":!e.resize}],"flex w-full reset-base text-sm p-0 !rounded-none !bg-transparent dark:!bg-transparent !border-0 !outline-0 !mb-0 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 text-n-slate-12 dark:text-n-slate-12 disabled:cursor-not-allowed disabled:opacity-50"]),style:Ct({minHeight:e.autoHeight?e.minHeight:void 0,maxHeight:e.autoHeight?e.maxHeight:void 0}),disabled:e.disabled,rows:"1",onInput:h,onFocus:_,onBlur:g},null,46,c6),e.showCharacterCount?(p(),f("div",d6,[c("span",u6,E(l.value)+" / "+E(e.maxLength),1)])):O("",!0)],2),e.message?(p(),f("p",{key:1,class:re(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",r.value])},E(e.message),3)):O("",!0)]))}},p6=["aria-checked"],m6={class:"sr-only"},so={__name:"Switch",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:yn(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=jn(e,"modelValue"),o=()=>{a.value=!a.value,n("change",!a.value)};return(l,i)=>(p(),f("button",{type:"button",class:re(["relative h-4 transition-colors duration-200 ease-in-out rounded-full w-7 focus:outline-none focus:ring-1 focus:ring-n-brand focus:ring-offset-n-slate-2 focus:ring-offset-2 flex-shrink-0",a.value?"bg-n-brand":"bg-n-slate-6 disabled:bg-n-slate-6/60"]),role:"switch","aria-checked":a.value,onClick:o},[c("span",m6,E(I(s)("SWITCH.TOGGLE")),1),c("span",{class:re(["absolute top-0.5 left-0.5 h-3 w-3 transform rounded-full shadow-sm transition-transform duration-200 ease-in-out",a.value?"translate-x-3 bg-n-background":"translate-x-0 bg-n-background"])},null,2)],10,p6))}},Ra={MINUTES:"minutes",HOURS:"hours",DAYS:"days"},h6=["disabled"],f6=["value"],g6=["value"],_6=["value"],v6={__name:"DurationInput",props:yn({min:{type:Number,default:0},max:{type:Number,default:1/0},disabled:{type:Boolean,default:!1}},{modelValue:{type:Number,default:null},modelModifiers:{},unit:{type:String,default:Ra.MINUTES,validate(e){return Object.values(Ra).includes(e)}},unitModifiers:{}}),emits:["update:modelValue","update:unit"],setup(e){const t=e,{t:n}=Pe(),s=jn(e,"modelValue"),a=jn(e,"unit"),o=i=>a.value===Ra.MINUTES?Math.floor(i):a.value===Ra.HOURS?Math.floor(i)*60:Math.floor(i)*24*60,l=C({get(){return a.value===Ra.MINUTES?s.value:a.value===Ra.HOURS?Math.floor(s.value/60):a.value===Ra.DAYS?Math.floor(s.value/24/60):0},set(i){let r=o(i);s.value=Math.min(Math.max(r,t.min),t.max)}});return ot(a,()=>{let i=o(l.value);s.value=Math.min(Math.max(i,t.min),t.max)}),(i,r)=>(p(),f(fe,null,[v(ln,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=d=>l.value=d),type:"number",autocomplete:"off",disabled:e.disabled,placeholder:I(n)("DURATION_INPUT.PLACEHOLDER"),class:"flex-grow w-full disabled:"},null,8,["modelValue","disabled","placeholder"]),pe(c("select",{"onUpdate:modelValue":r[1]||(r[1]=d=>a.value=d),disabled:e.disabled,class:"mb-0 text-sm disabled:outline-n-weak disabled:opacity-40"},[c("option",{value:I(Ra).MINUTES},E(I(n)("DURATION_INPUT.MINUTES")),9,f6),c("option",{value:I(Ra).HOURS},E(I(n)("DURATION_INPUT.HOURS")),9,g6),c("option",{value:I(Ra).DAYS},E(I(n)("DURATION_INPUT.DAYS")),9,_6)],8,h6),[[zt,a.value]])],64))}};function b6(e,t){e.length<t.length&&([e,t]=[t,e]);let n=e.length,s=t.length;if(n===0||s===0)return 0;let a=Math.floor(n/2)-1,o=Array(s).fill(!1),l=Array(n).fill(""),i=0;for(let _=0;_<n;_++){let g=e[_];for(let T=0;T<s;T++){let S=t[T];if(T<=_+a&&T+a>=1&&g===S&&!o[T]){o[T]=!0,l[i++]=g;break}}}if(!i)return 0;let r=0;for(let _=0,g=0;g<s;g++)o[g]&&(t[g]!==l[_]&&r++,_++);let d=i,u=(d/n+d/s+(d-r/2)/d)/3,m=0,h=Math.min(4,s);for(let _=0;_<h;_++)e[_]===t[_]&&m++;return u+m*.1*(1-u)}function UA(e,t){let n=0,s=0;if(t&&e.length!==t.length)throw new Error("The number of values must be equal to the number of weights");for(let a=0;a<e.length;a++){let o=t?t[a]:1;n+=e[a]*o,s+=o}return n/s}function E6(e){return Math.max(0,Math.min(1,e))}function GA(e){return e.split(/\s+/).filter((t,n,s)=>t&&s.indexOf(t)===n)}var VA={CONTAINS_MATCH:1.2,FIRST_SIMILARITY:1.1};function Rr(e,t,n,s){if(!t||typeof t!="string")return e;let a=[],o=(s==null?void 0:s.threshold)??.8,l=t.trim().toLowerCase(),i=GA(l);return e.forEach(r=>{let d=[],u=[];n.forEach(h=>{var S;let _,g=1;typeof h=="string"?_=h:(_=h.name,g=h.weight),u.push(g);let T=(S=r[_])==null?void 0:S.trim().toLowerCase();if(T){let b=T6(T,i);d.push(b)}else d.push(0)});let m=UA(d,u);m>=o&&a.push({object:r,similarity:m})}),a.sort((r,d)=>d.similarity-r.similarity),a.map(r=>r.object)}function T6(e,t){let n=GA(e),s=t.map(a=>{let o=n.map(i=>A6(i,a)),l=Math.max(...o);return l===o[0]?l*VA.FIRST_SIMILARITY:E6(l)});return UA(s)}function A6(e,t){let n=b6(e,t);return e.includes(t)?n*VA.CONTAINS_MATCH:n}const Li=el({name:"OnClickOutside",props:["as","options"],emits:["trigger"],setup(e,{slots:t,emit:n}){const s=F();return I$(s,a=>{n("trigger",a)},e.options),()=>{if(t.default)return Wn(e.as||"div",{ref:s},t.default())}}}),Yg=vr?window:void 0;function _i(e){var t;const n=as(e);return(t=n==null?void 0:n.$el)!=null?t:n}function iu(...e){let t,n,s,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,a]=e,t=Yg):[t,n,s,a]=e,!t)return Ja;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],l=()=>{o.forEach(u=>u()),o.length=0},i=(u,m,h,_)=>(u.addEventListener(m,h,_),()=>u.removeEventListener(m,h,_)),r=ot(()=>[_i(t),as(a)],([u,m])=>{if(l(),!u)return;const h=JT(m)?{...m}:m;o.push(...n.flatMap(_=>s.map(g=>i(u,_,g,h))))},{immediate:!0,flush:"post"}),d=()=>{r(),l()};return no(d),d}let D1=!1;function P1(e,t,n={}){const{window:s=Yg,ignore:a=[],capture:o=!0,detectIframe:l=!1}=n;if(!s)return Ja;br&&!D1&&(D1=!0,Array.from(s.document.body.children).forEach(T=>T.addEventListener("click",Ja)),s.document.documentElement.addEventListener("click",Ja));let i=!0;const r=T=>as(a).some(S=>{if(typeof S=="string")return Array.from(s.document.querySelectorAll(S)).some(b=>b===T.target||T.composedPath().includes(b));{const b=_i(S);return b&&(T.target===b||T.composedPath().includes(b))}});function d(T){const S=as(T);return S&&S.$.subTree.shapeFlag===16}function u(T,S){const b=as(T),A=b.$.subTree&&b.$.subTree.children;return A==null||!Array.isArray(A)?!1:A.some(y=>y.el===S.target||S.composedPath().includes(y.el))}const m=T=>{const S=_i(e);if(T.target!=null&&!(!(S instanceof Element)&&d(e)&&u(e,T))&&!(!S||S===T.target||T.composedPath().includes(S))){if(T.detail===0&&(i=!r(T)),!i){i=!0;return}t(T)}};let h=!1;const _=[iu(s,"click",T=>{h||(h=!0,setTimeout(()=>{h=!1},0),m(T))},{passive:!0,capture:o}),iu(s,"pointerdown",T=>{const S=_i(e);i=!r(T)&&!!(S&&!T.composedPath().includes(S))},{passive:!0}),l&&iu(s,"blur",T=>{setTimeout(()=>{var S;const b=_i(e);((S=s.document.activeElement)==null?void 0:S.tagName)==="IFRAME"&&!(b!=null&&b.contains(s.document.activeElement))&&t(T)},0)})].filter(Boolean);return()=>_.forEach(T=>T())}const ca={mounted(e,t){const n=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=P1(e,t.value,{capture:n});else{const[s,a]=t.value;e.__onClickOutside_stop=P1(e,s,Object.assign({capture:n},a))}},unmounted(e){e.__onClickOutside_stop()}};function y6(){const e=F(!1),t=qu();return t&&pt(()=>{e.value=!0},t),e}function S6(e){const t=y6();return C(()=>(t.value,!!e()))}function B1(e,t,n={}){const{window:s=Yg,...a}=n;let o;const l=S6(()=>s&&"ResizeObserver"in s),i=()=>{o&&(o.disconnect(),o=void 0)},r=C(()=>{const m=as(e);return Array.isArray(m)?m.map(h=>_i(h)):[_i(m)]}),d=ot(r,m=>{if(i(),l.value&&s){o=new ResizeObserver(t);for(const h of m)h&&o.observe(h,a)}},{immediate:!0,flush:"post"}),u=()=>{i(),d()};return no(u),{isSupported:l,stop:u}}function oh(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const I6={mounted(e,t){typeof t.value=="function"?B1(e,t.value):B1(e,...t.value)}};function HA(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:HA(n)}}function C6(e){const t=e||window.event,n=t.target;return HA(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const lh=new WeakMap;function x6(e,t=!1){const n=F(t);let s=null,a="";ot(tA(e),i=>{const r=oh(as(i));if(r){const d=r;if(lh.get(d)||lh.set(d,d.style.overflow),d.style.overflow!=="hidden"&&(a=d.style.overflow),d.style.overflow==="hidden")return n.value=!0;if(n.value)return d.style.overflow="hidden"}},{immediate:!0});const o=()=>{const i=oh(as(e));!i||n.value||(br&&(s=iu(i,"touchmove",r=>{C6(r)},{passive:!1})),i.style.overflow="hidden",n.value=!0)},l=()=>{const i=oh(as(e));!i||!n.value||(br&&(s==null||s()),i.style.overflow=a,lh.delete(i),n.value=!1)};return no(l),C({get(){return n.value},set(i){i?o():l()}})}function N6(){let e=!1;const t=F(!1);return(n,s)=>{if(t.value=s.value,e)return;e=!0;const a=x6(n,s.value);ot(t,o=>a.value=o)}}N6();const WA=Symbol("DropdownControl");function O6(){const e=Ao(WA,null);if(e===null)throw new Error("Component is missing a parent <DropdownContainer /> component.");return e}function w6(e){cs(WA,e)}const R6={class:"relative space-y-2"},$6={key:0,class:"absolute"},Di={__name:"DropdownContainer",emits:["close"],setup(e,{emit:t}){const n=t,[s,a]=Xn(!1),o=()=>{s.value&&(n("close"),a(!1))};return w6({isOpen:s,toggle:a,closeMenu:o}),(l,i)=>pe((p(),f("div",R6,[at(l.$slots,"trigger",{isOpen:I(s),toggle:()=>I(a)()}),I(s)?(p(),f("div",$6,[at(l.$slots,"default")])):O("",!0)])),[[I(ca),o]])}},M6={class:"-mx-2 n-dropdown-section"},k6={key:0,class:"px-4 mb-3 mt-1 leading-4 font-medium tracking-[0.2px] text-n-slate-10 text-xs"},L6={class:"gap-2 grid reset-base list-none px-2"},$r={__name:"DropdownSection",props:{title:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",M6,[e.title?(p(),f("div",k6,E(e.title),1)):O("",!0),c("ul",L6,[at(t.$slots,"default")])]))}},D6={class:"absolute"},Pi={__name:"DropdownBody",props:{strong:{type:Boolean,default:!1}},setup(e){const t=C(()=>e.strong?"border-n-strong":"border-n-weak"),n=C(()=>e.strong?"before:content-['\0A0'] before:absolute before:bottom-0 before:left-0 before:w-full before:h-full before:rounded-xl before:backdrop-contrast-70 before:backdrop-blur-sm before:z-0 [&>*]:relative":"");return(s,a)=>(p(),f("div",D6,[c("ul",{class:re(["text-sm bg-n-alpha-3 backdrop-blur-[100px] border rounded-xl shadow-sm py-2 n-dropdown-body gap-2 grid list-none px-2 reset-base relative",[t.value,n.value]])},[at(s.$slots,"default")],2)]))}},P6={class:"n-dropdown-item"},eo=Object.assign({inheritAttrs:!1},{__name:"DropdownItem",props:{label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},link:{type:[String,Object],default:""},nativeLink:{type:Boolean,default:!1},click:{type:Function,default:null},preserveOpen:{type:Boolean,default:!1}},setup(e){const t=e,{closeMenu:n}=O6(),s=C(()=>t.link?t.nativeLink&&typeof t.link=="string"?"a":"router-link":t.click?"button":"div"),a=()=>{t.click&&t.click(),t.preserveOpen||n()};return(o,l)=>(p(),f("li",P6,[(p(),V(xs(s.value),Bs(o.$attrs,{class:["flex text-left rtl:text-right items-center p-2 reset-base text-sm text-n-slate-12 w-full border-0",{"hover:bg-n-alpha-2 rounded-lg w-full gap-3":!o.$slots.default}],href:s.value==="a"?t.link:null,to:s.value==="router-link"?t.link:null,onClick:a}),{default:K(()=>[at(o.$slots,"default",{},()=>[at(o.$slots,"icon",{},()=>[e.icon?(p(),V(Wt,{key:0,class:"size-4 text-n-slate-11",icon:e.icon},null,8,["icon"])):O("",!0)]),at(o.$slots,"label",{},()=>[Ee(E(e.label),1)])])]),_:3},16,["class","href","to"]))]))}}),B6={class:"text-n-slate-11"},F6={key:0,class:"relative"},U6=["placeholder"],Of={__name:"SingleSelect",props:yn({options:{type:Array,required:!0},disableSearch:{type:Boolean,default:!1},placeholderIcon:{type:String,default:"i-lucide-plus"},placeholder:{type:String,default:""},placeholderTrailingIcon:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=Pe(),n=jn(e,"modelValue"),s=F(""),a=C(()=>e.options?Rr(e.options,s.value,["name"]):[]),o=C(()=>{if(!e.options||!n.value)return null;const i=Array.isArray(n.value)?n.value[0]:n.value;return e.options.find(r=>r.id===i.id)}),l=i=>{const r={id:i.id,name:i.name};n.value&&n.value.id===r.id?n.value=null:n.value=r};return(i,r)=>(p(),V(Di,null,{trigger:K(({toggle:d})=>[o.value?(p(),V(ce,{key:0,sm:"",slate:"",faded:"",type:"button",icon:o.value.icon,label:o.value.name,onClick:d},null,8,["icon","label","onClick"])):(p(),V(ce,{key:1,sm:"",slate:"",faded:"",type:"button","trailing-icon":e.placeholderTrailingIcon,onClick:d},{icon:K(()=>[v(Wt,{icon:e.placeholderIcon,class:"text-n-slate-11"},null,8,["icon"])]),default:K(()=>[c("span",B6,E(e.placeholder||I(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["trailing-icon","onClick"]))]),default:K(()=>[v(Pi,{class:"top-0 min-w-56 z-50",strong:""},{default:K(()=>[e.disableSearch?O("",!0):(p(),f("div",F6,[v(Wt,{class:"absolute size-4 left-2 top-2",icon:"i-lucide-search"}),pe(c("input",{"onUpdate:modelValue":r[0]||(r[0]=d=>s.value=d),autofocus:"",class:"p-1.5 pl-8 text-n-slate-11 bg-n-alpha-1 rounded-lg w-full",placeholder:e.searchPlaceholder||I(t)("COMBOBOX.SEARCH_PLACEHOLDER")},null,8,U6),[[mt,s.value]])])),v($r,{class:"max-h-80 overflow-scroll"},{default:K(()=>[a.value.length?(p(!0),f(fe,{key:0},Ae(a.value,d=>(p(),V(eo,{key:d.id,icon:d.icon,onClick:u=>l(d)},{label:K(()=>[Ee(E(d.name)+" ",1),o.value&&o.value.id===d.id?(p(),V(Wt,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):O("",!0)]),_:2},1032,["icon","onClick"]))),128)):s.value?(p(),V(eo,{key:1,disabled:""},{default:K(()=>[Ee(E(I(t)("COMBOBOX.EMPTY_SEARCH_RESULTS",{searchTerm:s.value})),1)]),_:1})):(p(),V(eo,{key:2,disabled:""},{default:K(()=>[Ee(E(I(t)("COMBOBOX.EMPTY_STATE")),1)]),_:1}))]),_:1})]),_:1})]),_:1}))}},G6={class:"flex justify-end"},V6={class:"gap-2 w-full grid grid-cols-[3fr_1fr]"},H6={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 divide-y divide-n-weak"},W6={class:"p-3 h-12 flex items-center justify-between"},K6={class:"p-3 h-12 flex items-center justify-between"},z6={class:"flex gap-2"},j6={__name:"AutoResolve",setup(e){const{t}=Pe(),n=F(0),s=F(Ra.MINUTES),a=F(""),o=F({}),l=F(!1),i=F(!1),r=F(!1),{currentAccount:d,updateAccount:u}=_s(),m=ke("labels/getLabels"),h=C(()=>{var A;return(A=m.value)!=null&&A.length?m.value.map(y=>({id:y.title,name:y.title,icon:Wn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:y.color}})})):[]}),_=C(()=>{var A;return((A=o.value)==null?void 0:A.name)??null});ot([d,h],()=>{var N;const{auto_resolve_after:A,auto_resolve_message:y,auto_resolve_ignore_waiting:x,auto_resolve_label:$}=((N=d.value)==null?void 0:N.settings)||{};n.value=A,a.value=y,l.value=x,o.value=h.value.find(w=>w.name===$),n.value&&(n.value%(24*60)===0?s.value=Ra.DAYS:n.value%60===0?s.value=Ra.HOURS:s.value=Ra.MINUTES),n.value&&(i.value=!0)},{deep:!0,immediate:!0});const g=async A=>{try{r.value=!0,await u(A,{silent:!0}),_e(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.SUCCESS"))}catch{_e(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.ERROR"))}finally{r.value=!1}},T=async()=>n.value<10?(_e(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.ERROR")),Promise.resolve()):g({auto_resolve_after:n.value,auto_resolve_message:a.value,auto_resolve_ignore_waiting:l.value,auto_resolve_label:_.value}),S=async()=>(n.value=null,a.value="",g({auto_resolve_after:null,auto_resolve_message:"",auto_resolve_ignore_waiting:!1,auto_resolve_label:null})),b=async()=>{i.value||S()};return(A,y)=>(p(),V(Or,{title:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.TITLE"),description:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.NOTE"),"hide-content":!i.value,"with-border":""},{headerActions:K(()=>[c("div",G6,[v(so,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=x=>i.value=x),onChange:b},null,8,["modelValue"])])]),default:K(()=>[c("form",{class:"grid gap-5",onSubmit:ze(T,["prevent"])},[v(Wl,{label:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.LABEL"),"help-message":I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.HELP")},{default:K(()=>[c("div",V6,[v(v6,{modelValue:n.value,"onUpdate:modelValue":y[1]||(y[1]=x=>n.value=x),unit:s.value,"onUpdate:unit":y[2]||(y[2]=x=>s.value=x),min:"0",max:"1438560",class:"w-full"},null,8,["modelValue","unit"])])]),_:1},8,["label","help-message"]),v(Wl,{label:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.LABEL"),"help-message":I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.HELP")},{default:K(()=>[v(wr,{modelValue:a.value,"onUpdate:modelValue":y[3]||(y[3]=x=>a.value=x),class:"w-full",placeholder:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message"]),v(Wl,{label:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.PREFERENCES")},{default:K(()=>[c("div",H6,[c("div",W6,[c("span",null,E(I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.IGNORE_WAITING.LABEL")),1),v(so,{modelValue:l.value,"onUpdate:modelValue":y[4]||(y[4]=x=>l.value=x)},null,8,["modelValue"])]),c("div",K6,[c("span",null,E(I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.LABEL")),1),v(Of,{modelValue:o.value,"onUpdate:modelValue":y[5]||(y[5]=x=>o.value=x),options:h.value,placeholder:A.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.PLACEHOLDER"),"placeholder-icon":"i-lucide-chevron-down","placeholder-trailing-icon":"",variant:"faded"},null,8,["modelValue","options","placeholder"])])])]),_:1},8,["label"]),c("div",z6,[v(ce,{blue:"",type:"submit","is-loading":r.value,label:I(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.UPDATE_BUTTON")},null,8,["is-loading","label"])])],32)]),_:1},8,["title","description","hide-content"]))}},Y6={class:"flex justify-end"},X6={__name:"AudioTranscription",setup(e){const{t}=Pe(),n=F(!1),{currentAccount:s,updateAccount:a}=_s();ot(s,()=>{var r;const{audio_transcriptions:i}=((r=s.value)==null?void 0:r.settings)||{};n.value=!!i},{deep:!0,immediate:!0});const o=async i=>{try{await a(i),_e(t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.SUCCESS"))}catch{_e(t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.ERROR"))}},l=async()=>o({audio_transcriptions:n.value});return(i,r)=>(p(),V(Or,{title:I(t)("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.TITLE"),description:I(t)("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.NOTE"),"with-border":""},{headerActions:K(()=>[c("div",Y6,[v(so,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),onChange:l},null,8,["modelValue"])])]),_:1},8,["title","description"]))}},q6={components:{BaseSettingsHeader:js,NextButton:ce,AccountId:qP,BuildInfo:t6,AccountDelete:l6,AutoResolve:j6,AudioTranscription:X6,SectionLayout:Or,WithLabel:Wl,NextInput:ln},setup(){const{updateUISettings:e}=Sn(),{enabledLanguages:t}=Js(),{accountId:n}=_s(),s=Lt();return{updateUISettings:e,v$:s,enabledLanguages:t,accountId:n}},data(){return{id:"",name:"",locale:"en",domain:"",supportEmail:"",features:{}}},validations:{name:{required:lt},locale:{required:lt}},computed:{...St({getAccount:"accounts/getAccount",uiFlags:"accounts/getUIFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"}),showAutoResolutionConfig(){return this.isFeatureEnabledonAccount(this.accountId,Mt.AUTO_RESOLVE_CONVERSATIONS)},showAudioTranscriptionConfig(){return this.isFeatureEnabledonAccount(this.accountId,Mt.CAPTAIN)},languagesSortedByCode(){return[...this.enabledLanguages].sort((t,n)=>t.iso_639_1_code.localeCompare(n.iso_639_1_code))},isUpdating(){return this.uiFlags.isUpdating},featureInboundEmailEnabled(){var e;return!!((e=this.features)!=null&&e.inbound_emails)},featureCustomReplyDomainEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_domain},featureCustomReplyEmailEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_email},currentAccount(){return this.getAccount(this.accountId)||{}}},mounted(){this.initializeAccount()},methods:{async initializeAccount(){try{const{name:e,locale:t,id:n,domain:s,support_email:a,features:o}=this.getAccount(this.accountId);this.$root.$i18n.locale=t,this.name=e,this.locale=t,this.id=n,this.domain=s,this.supportEmail=a,this.features=o}catch{}},async updateAccount(){if(this.v$.$touch(),this.v$.$invalid){_e(this.$t("GENERAL_SETTINGS.FORM.ERROR"));return}try{await this.$store.dispatch("accounts/update",{locale:this.locale,name:this.name,domain:this.domain,support_email:this.supportEmail}),this.$root.$i18n.locale=this.locale,this.getAccount(this.id).locale=this.locale,this.updateDirectionView(this.locale),_e(this.$t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{_e(this.$t("GENERAL_SETTINGS.UPDATE.ERROR"))}},updateDirectionView(e){const t=JN(e);this.updateUISettings({rtl_view:t})}}},Z6={class:"flex flex-col max-w-2xl mx-auto w-full"},Q6={class:"flex-grow flex-shrink min-w-0 mt-3"},J6=["value"],eB={key:2};function tB(e,t,n,s,a,o){const l=z("BaseSettingsHeader"),i=z("NextInput"),r=z("WithLabel"),d=z("NextButton"),u=z("SectionLayout"),m=z("woot-loading-state"),h=z("AutoResolve"),_=z("AudioTranscription"),g=z("AccountId"),T=z("AccountDelete"),S=z("BuildInfo");return p(),f("div",Z6,[v(l,{title:e.$t("GENERAL_SETTINGS.TITLE")},null,8,["title"]),c("div",Q6,[v(u,{title:e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.TITLE"),description:e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.NOTE")},{default:K(()=>[e.uiFlags.isFetchingItem?O("",!0):(p(),f("form",{key:0,class:"grid gap-4",onSubmit:t[4]||(t[4]=ze((...b)=>o.updateAccount&&o.updateAccount(...b),["prevent"]))},[v(r,{"has-error":s.v$.name.$error,label:e.$t("GENERAL_SETTINGS.FORM.NAME.LABEL"),"error-message":e.$t("GENERAL_SETTINGS.FORM.NAME.ERROR")},{default:K(()=>[v(i,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=b=>a.name=b),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.name.$touch},null,8,["modelValue","placeholder","onBlur"])]),_:1},8,["has-error","label","error-message"]),v(r,{"has-error":s.v$.locale.$error,label:e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.LABEL"),"error-message":e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.ERROR")},{default:K(()=>[pe(c("select",{"onUpdate:modelValue":t[1]||(t[1]=b=>a.locale=b),class:"!mb-0 text-sm"},[(p(!0),f(fe,null,Ae(o.languagesSortedByCode,b=>(p(),f("option",{key:b.iso_639_1_code,value:b.iso_639_1_code},E(b.name),9,J6))),128))],512),[[zt,a.locale]])]),_:1},8,["has-error","label","error-message"]),o.featureCustomReplyDomainEnabled?(p(),V(r,{key:0,label:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.LABEL")},{help:K(()=>[Ee(E(o.featureInboundEmailEnabled&&e.$t("GENERAL_SETTINGS.FORM.FEATURES.INBOUND_EMAIL_ENABLED"))+" "+E(o.featureCustomReplyDomainEnabled&&e.$t("GENERAL_SETTINGS.FORM.FEATURES.CUSTOM_EMAIL_DOMAIN_ENABLED")),1)]),default:K(()=>[v(i,{modelValue:a.domain,"onUpdate:modelValue":t[2]||(t[2]=b=>a.domain=b),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):O("",!0),o.featureCustomReplyEmailEnabled?(p(),V(r,{key:1,label:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.LABEL")},{default:K(()=>[v(i,{modelValue:a.supportEmail,"onUpdate:modelValue":t[3]||(t[3]=b=>a.supportEmail=b),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):O("",!0),c("div",null,[v(d,{blue:"","is-loading":o.isUpdating,type:"submit"},{default:K(()=>[Ee(E(e.$t("GENERAL_SETTINGS.SUBMIT")),1)]),_:1},8,["is-loading"])])],32))]),_:1},8,["title","description"]),e.uiFlags.isFetchingItem?(p(),V(m,{key:0})):O("",!0)]),o.showAutoResolutionConfig?(p(),V(h,{key:0})):O("",!0),o.showAudioTranscriptionConfig?(p(),V(_,{key:1})):O("",!0),v(g),!e.uiFlags.isFetchingItem&&e.isOnChatwootCloud?(p(),f("div",eB,[v(T)])):O("",!0),v(S)])}const nB=Fe(q6,[["render",tB]]),sB={class:"flex flex-col w-full h-full m-0 p-6 sm:py-8 lg:px-16 overflow-auto bg-n-background font-inter"},aB={class:"flex items-start w-full max-w-6xl mx-auto"},Aa={__name:"SettingsWrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=z("router-view");return p(),f("div",sB,[c("div",aB,[v(s,null,{default:K(({Component:a})=>[e.keepAlive?(p(),V(Yc,{key:0},[(p(),V(xs(a)))],1024)):(p(),V(xs(a),{key:1}))]),_:1})])])}}},oB={routes:[{path:Bt("accounts/:accountId/settings/general"),meta:{permissions:["administrator"]},component:Aa,children:[{path:"",name:"general_settings_index",component:nB,meta:{permissions:["administrator"]}}]}]},lB={class:"flex flex-col h-auto overflow-auto"},iB={class:"w-full"},rB=["placeholder"],cB={class:"w-full"},dB=["value"],uB={key:0,class:"message"},pB={class:"w-full"},mB=["placeholder"],hB={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},fB={__name:"AddAgent",emits:["close"],setup(e,{emit:t}){const n=t,s=yt(),{t:a}=Pe(),o=F(""),l=F(""),i=F("agent"),d=Lt({agentName:{required:lt},agentEmail:{required:lt,email:Zl},selectedRoleId:{required:lt}},{agentName:o,agentEmail:l,selectedRoleId:i}),u=ke("agents/getUIFlags"),m=ke("customRole/getCustomRoles"),h=C(()=>{const T=[{id:"administrator",name:"administrator",label:a("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:a("AGENT_MGMT.AGENT_TYPES.AGENT")}],S=m.value.map(b=>({id:b.id,name:`custom_${b.id}`,label:b.name}));return[...T,...S]}),_=C(()=>h.value.find(T=>T.id===i.value||T.name===i.value)),g=async()=>{var T;if(d.value.$touch(),!d.value.$invalid)try{const S={name:o.value,email:l.value};_.value.name.startsWith("custom_")?S.custom_role_id=_.value.id:S.role=_.value.name,await s.dispatch("agents/create",S),_e(a("AGENT_MGMT.ADD.API.SUCCESS_MESSAGE")),n("close")}catch(S){const{response:{data:{error:b="",attributes:A=[],message:y=""}={}}={}}=S;let x="";((T=S==null?void 0:S.response)==null?void 0:T.status)===422&&!A.includes("base")?x=a("AGENT_MGMT.ADD.API.EXIST_MESSAGE"):x=a("AGENT_MGMT.ADD.API.ERROR_MESSAGE"),_e(b||y||x)}};return(T,S)=>{const b=z("woot-modal-header");return p(),f("div",lB,[v(b,{"header-title":T.$t("AGENT_MGMT.ADD.TITLE"),"header-content":T.$t("AGENT_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col items-start w-full",onSubmit:ze(g,["prevent"])},[c("div",iB,[c("label",{class:re({error:I(d).agentName.$error})},[Ee(E(T.$t("AGENT_MGMT.ADD.FORM.NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":S[0]||(S[0]=A=>o.value=A),type:"text",placeholder:T.$t("AGENT_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onInput:S[1]||(S[1]=(...A)=>I(d).agentName.$touch&&I(d).agentName.$touch(...A))},null,40,rB),[[mt,o.value]])],2)]),c("div",cB,[c("label",{class:re({error:I(d).selectedRoleId.$error})},[Ee(E(T.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":S[2]||(S[2]=A=>i.value=A),onChange:S[3]||(S[3]=(...A)=>I(d).selectedRoleId.$touch&&I(d).selectedRoleId.$touch(...A))},[(p(!0),f(fe,null,Ae(h.value,A=>(p(),f("option",{key:A.id,value:A.id},E(A.label),9,dB))),128))],544),[[zt,i.value]]),I(d).selectedRoleId.$error?(p(),f("span",uB,E(T.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.ERROR")),1)):O("",!0)],2)]),c("div",pB,[c("label",{class:re({error:I(d).agentEmail.$error})},[Ee(E(T.$t("AGENT_MGMT.ADD.FORM.EMAIL.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":S[4]||(S[4]=A=>l.value=A),type:"email",placeholder:T.$t("AGENT_MGMT.ADD.FORM.EMAIL.PLACEHOLDER"),onInput:S[5]||(S[5]=(...A)=>I(d).agentEmail.$touch&&I(d).agentEmail.$touch(...A))},null,40,mB),[[mt,l.value]])],2)]),c("div",hB,[v(ce,{faded:"",slate:"",type:"reset",label:T.$t("AGENT_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:S[6]||(S[6]=ze(A=>n("close"),["prevent"]))},null,8,["label"]),v(ce,{type:"submit",label:T.$t("AGENT_MGMT.ADD.FORM.SUBMIT"),disabled:I(d).$invalid||I(u).isCreating,"is-loading":I(u).isCreating},null,8,["label","disabled","is-loading"])])],32)])}}},gB={class:"flex flex-col h-auto overflow-auto"},_B={class:"w-full"},vB=["placeholder"],bB={class:"w-full"},EB=["value"],TB={key:0,class:"message"},AB={class:"w-full"},yB=["value"],SB={key:0,class:"message"},IB={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"},CB={class:"w-[50%] ltr:text-left rtl:text-right"},xB={class:"w-[50%] flex justify-end items-center gap-2"},NB={__name:"EditAgent",props:{id:{type:Number,required:!0},name:{type:String,required:!0},email:{type:String,default:""},type:{type:String,default:""},availability:{type:String,default:""},customRoleId:{type:Number,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{AVAILABILITY_STATUS_KEYS:a}=Pt,o=yt(),{t:l}=Pe(),i=F(n.name),r=F(n.availability),d=F(n.customRoleId||n.type),u=F({email:n.email}),m={agentName:{required:lt,minLength:on(1)},selectedRoleId:{required:lt},agentAvailability:{required:lt}},h=Lt(m,{agentName:i,selectedRoleId:d,agentAvailability:r}),_=C(()=>`${l("AGENT_MGMT.EDIT.TITLE")} - ${n.name}`),g=ke("agents/getUIFlags"),T=ke("customRole/getCustomRoles"),S=C(()=>{const N=[{id:"administrator",name:"administrator",label:l("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:l("AGENT_MGMT.AGENT_TYPES.AGENT")}],w=T.value.map(D=>({id:D.id,name:`custom_${D.id}`,label:D.name}));return[...N,...w]}),b=C(()=>S.value.find(N=>N.id===d.value||N.name===d.value)),A=C(()=>[l("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),l("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),l("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),y=C(()=>A.value.map((N,w)=>({label:N,value:a[w],disabled:n.availability===a[w]}))),x=async()=>{if(h.value.$touch(),!h.value.$invalid)try{const N={id:n.id,name:i.value,availability:r.value};b.value.name.startsWith("custom_")?N.custom_role_id=b.value.id:(N.role=b.value.name,N.custom_role_id=null),await o.dispatch("agents/update",N),_e(l("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE")),s("close")}catch{_e(l("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}},$=async()=>{try{await fr.resetPassword(u.value),_e(l("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_SUCCESS_MESSAGE"))}catch{_e(l("AGENT_MGMT.EDIT.PASSWORD_RESET.ERROR_MESSAGE"))}};return(N,w)=>{const D=z("woot-modal-header");return p(),f("div",gB,[v(D,{"header-title":_.value},null,8,["header-title"]),c("form",{class:"w-full",onSubmit:ze(x,["prevent"])},[c("div",_B,[c("label",{class:re({error:I(h).agentName.$error})},[Ee(E(N.$t("AGENT_MGMT.EDIT.FORM.NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":w[0]||(w[0]=H=>i.value=H),type:"text",placeholder:N.$t("AGENT_MGMT.EDIT.FORM.NAME.PLACEHOLDER"),onInput:w[1]||(w[1]=(...H)=>I(h).agentName.$touch&&I(h).agentName.$touch(...H))},null,40,vB),[[mt,i.value]])],2)]),c("div",bB,[c("label",{class:re({error:I(h).selectedRoleId.$error})},[Ee(E(N.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":w[2]||(w[2]=H=>d.value=H),onChange:w[3]||(w[3]=(...H)=>I(h).selectedRoleId.$touch&&I(h).selectedRoleId.$touch(...H))},[(p(!0),f(fe,null,Ae(S.value,H=>(p(),f("option",{key:H.id,value:H.id},E(H.label),9,EB))),128))],544),[[zt,d.value]]),I(h).selectedRoleId.$error?(p(),f("span",TB,E(N.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.ERROR")),1)):O("",!0)],2)]),c("div",AB,[c("label",{class:re({error:I(h).agentAvailability.$error})},[Ee(E(N.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":w[4]||(w[4]=H=>r.value=H),onChange:w[5]||(w[5]=(...H)=>I(h).agentAvailability.$touch&&I(h).agentAvailability.$touch(...H))},[(p(!0),f(fe,null,Ae(y.value,H=>(p(),f("option",{key:H.value,value:H.value},E(H.label),9,yB))),128))],544),[[zt,r.value]]),I(h).agentAvailability.$error?(p(),f("span",SB,E(N.$t("AGENT_MGMT.EDIT.FORM.AGENT_AVAILABILITY.ERROR")),1)):O("",!0)],2)]),c("div",IB,[c("div",CB,[v(ce,{ghost:"",type:"button",icon:"i-lucide-lock-keyhole",class:"!px-2",label:N.$t("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_RESET_BUTTON"),onClick:ze($,["prevent"])},null,8,["label"])]),c("div",xB,[v(ce,{faded:"",slate:"",type:"reset",label:N.$t("AGENT_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:w[6]||(w[6]=ze(H=>s("close"),["prevent"]))},null,8,["label"]),v(ce,{type:"submit",label:N.$t("AGENT_MGMT.EDIT.FORM.SUBMIT"),disabled:I(h).$invalid||I(g).isUpdating,"is-loading":I(g).isUpdating},null,8,["label","disabled","is-loading"])])])],32)])}}},OB={class:"flex flex-col w-full h-full gap-8 font-inter"},wB={key:1,class:"flex-1 py-20 text-n-slate-12 flex items-center justify-center text-base"},ro={__name:"SettingsLayout",props:{isLoading:{type:Boolean,default:!1},noRecordsFound:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},noRecordsMessage:{type:String,default:""}},setup(e){return(t,n)=>{const s=z("woot-loading-state");return p(),f("div",OB,[at(t.$slots,"header"),c("div",null,[at(t.$slots,"preBody"),e.isLoading?at(t.$slots,"loading",{key:0},()=>[v(s,{message:e.loadingMessage},null,8,["message"])]):e.noRecordsFound?(p(),f("p",wB,E(e.noRecordsMessage),1)):at(t.$slots,"body",{key:2}),at(t.$slots,"default")])])}}},RB={class:"divide-y divide-n-weak"},$B={class:"divide-y divide-n-weak text-n-slate-11"},MB={class:"py-4 ltr:pr-4 rtl:pl-4"},kB={class:"flex flex-row items-center gap-4"},LB={class:"block font-medium capitalize"},DB={class:"relative py-4 ltr:pr-4 rtl:pl-4"},PB={class:"flex flex-col gap-1 p-4"},BB={class:"font-semibold"},UB={class:"pl-4 mb-0 list-disc"},GB={class:"py-4 ltr:pr-4 rtl:pl-4"},VB={key:0},HB={key:1},WB={class:"py-4"},KB={class:"flex justify-end gap-1"},zB={__name:"Index",setup(e){const t=Nn(),n=yt(),{t:s}=Pe(),a=F({}),o=F(!1),l=F(!1),i=F(!1),r=F({message:""}),d=F({}),u=C(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.YES")} ${d.value.name}`),m=C(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.NO")} ${d.value.name}`),h=C(()=>` ${d.value.name}?`),_=C(()=>t["agents/getAgents"].value),g=C(()=>t["agents/getUIFlags"].value),T=C(()=>t.getCurrentUserID.value),S=ke("customRole/getCustomRoles");pt(()=>{n.dispatch("agents/get"),n.dispatch("customRole/getCustomRole")});const b=R=>S.value.find(P=>P.id===R.custom_role_id),A=R=>{if(!R.custom_role_id)return s(`AGENT_MGMT.AGENT_TYPES.${R.role.toUpperCase()}`);const P=b(R);return P?P.name:""},y=R=>{if(!R.custom_role_id)return[];const P=b(R);return(P==null?void 0:P.permissions)||[]},x=C(()=>_.value.filter(R=>R.role==="administrator"&&R.confirmed)),$=R=>T.value!==R.id,N=R=>T.value===R.id?!1:R.confirmed&&R.role==="administrator"?x.value.length!==1:!0,w=R=>{a.value[d.value.id]=!1,d.value={},r.value.message=R,_e(R)},D=()=>{o.value=!0},H=()=>{o.value=!1},B=R=>{i.value=!0,d.value=R},k=()=>{i.value=!1},U=R=>{l.value=!0,d.value=R},G=()=>{l.value=!1},L=async R=>{try{await n.dispatch("agents/delete",R),w(s("AGENT_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{w(s("AGENT_MGMT.DELETE.API.ERROR_MESSAGE"))}},M=()=>{a.value[d.value.id]=!0,G(),L(d.value.id)};return(R,P)=>{const W=z("woot-modal"),Q=z("woot-delete-modal"),Z=_t("tooltip");return p(),V(ro,{"is-loading":g.value.isFetching,"loading-message":R.$t("AGENT_MGMT.LOADING"),"no-records-found":!_.value.length,"no-records-message":R.$t("AGENT_MGMT.LIST.404")},{header:K(()=>[v(js,{title:R.$t("AGENT_MGMT.HEADER"),description:R.$t("AGENT_MGMT.DESCRIPTION"),"link-text":R.$t("AGENT_MGMT.LEARN_MORE"),"feature-name":"agents"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:R.$t("AGENT_MGMT.HEADER_BTN_TXT"),onClick:D},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[c("table",RB,[c("tbody",$B,[(p(!0),f(fe,null,Ae(_.value,(j,X)=>(p(),f("tr",{key:j.email},[c("td",MB,[c("div",kB,[v(Ft,{src:j.thumbnail,name:j.name,status:j.availability_status,size:40,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),c("div",null,[c("span",LB,E(j.name),1),c("span",null,E(j.email),1)])])]),c("td",DB,[c("span",{class:re(["block font-medium w-fit",{"hover:text-gray-900 group cursor-pointer":j.custom_role_id}])},[Ee(E(A(j))+" ",1),c("div",{class:re(["absolute left-0 z-10 hidden max-w-[300px] w-auto bg-white rounded-xl border border-n-weak shadow-lg top-14 md:top-12 dark:bg-n-solid-2",{"group-hover:block":j.custom_role_id}])},[c("div",PB,[c("span",BB,E(R.$t("AGENT_MGMT.LIST.AVAILABLE_CUSTOM_ROLE")),1),c("ul",UB,[(p(!0),f(fe,null,Ae(y(j),q=>(p(),f("li",{key:q,class:"font-normal"},E(R.$t(`CUSTOM_ROLE.PERMISSIONS.${q.toUpperCase()}`)),1))),128))])])],2)],2)]),c("td",GB,[j.confirmed?(p(),f("span",VB,E(R.$t("AGENT_MGMT.LIST.VERIFIED")),1)):O("",!0),j.confirmed?O("",!0):(p(),f("span",HB,E(R.$t("AGENT_MGMT.LIST.VERIFICATION_PENDING")),1))]),c("td",WB,[c("div",KB,[$(j)?pe((p(),V(ce,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:q=>B(j)},null,8,["onClick"])),[[Z,R.$t("AGENT_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]):O("",!0),N(j)?pe((p(),V(ce,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.value[j.id],onClick:q=>U(j,X)},null,8,["is-loading","onClick"])),[[Z,R.$t("AGENT_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):O("",!0)])])]))),128))])])]),default:K(()=>[v(W,{show:o.value,"onUpdate:show":P[0]||(P[0]=j=>o.value=j),"on-close":H},{default:K(()=>[v(fB,{onClose:H})]),_:1},8,["show"]),v(W,{show:i.value,"onUpdate:show":P[1]||(P[1]=j=>i.value=j),"on-close":k},{default:K(()=>[i.value?(p(),V(NB,{key:0,id:d.value.id,name:d.value.name,type:d.value.role,email:d.value.email,availability:d.value.availability_status,"custom-role-id":d.value.custom_role_id,onClose:k},null,8,["id","name","type","email","availability","custom-role-id"])):O("",!0)]),_:1},8,["show"]),v(Q,{show:l.value,"onUpdate:show":P[2]||(P[2]=j=>l.value=j),"on-close":G,"on-confirm":M,title:R.$t("AGENT_MGMT.DELETE.CONFIRM.TITLE"),message:R.$t("AGENT_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":h.value,"confirm-text":u.value,"reject-text":m.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},jB={routes:[{path:Bt("accounts/:accountId/settings/agents"),component:Aa,children:[{path:"",redirect:e=>({name:"agent_list",params:e.params})},{path:"list",name:"agent_list",component:zB,meta:{featureFlag:Mt.AGENT_MANAGEMENT,permissions:["administrator"]}}]}]},YB=["dir"],Gc={__name:"TeleportWithDirection",props:{to:{type:String,default:"body"}},setup(e){const t=ke("accounts/isRTL"),n=C(()=>t.value?"rtl":"ltr");return(s,a)=>(p(),V(yr,{to:e.to},[c("div",{dir:n.value},[at(s.$slots,"default")],8,YB)],8,["to"]))}},XB={key:0,class:"flex flex-col gap-2"},qB={class:"text-base font-medium leading-6 text-n-slate-12"},ZB={key:0,class:"mb-0 text-sm text-n-slate-11"},QB={key:0,class:"flex items-center justify-between w-full gap-3"},JB={__name:"Dialog",props:{type:{type:String,default:"edit",validator:e=>["alert","edit"].includes(e)},title:{type:String,default:""},description:{type:String,default:""},cancelButtonLabel:{type:String,default:""},confirmButtonLabel:{type:String,default:""},disableConfirmButton:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},overflowYAuto:{type:Boolean,default:!1},width:{type:String,default:"lg",validator:e=>["3xl","2xl","xl","lg","md","sm"].includes(e)}},emits:["confirm","close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=F(null),i=F(null),r=C(()=>({"3xl":"max-w-3xl","2xl":"max-w-2xl",xl:"max-w-xl",lg:"max-w-lg",md:"max-w-md",sm:"max-w-sm"})[s.width]??"max-w-md"),d=()=>{var h;(h=l.value)==null||h.showModal()},u=()=>{var h;a("close"),(h=l.value)==null||h.close()},m=()=>{a("confirm")};return t({open:d,close:u}),(h,_)=>(p(),V(Gc,{to:"body"},{default:K(()=>[c("dialog",{ref_key:"dialogRef",ref:l,class:re(["w-full transition-all duration-300 ease-in-out shadow-xl rounded-xl",[r.value,e.overflowYAuto?"overflow-y-auto":"overflow-visible"]]),onClose:u},[v(I(Li),{onTrigger:u},{default:K(()=>[c("form",{ref_key:"dialogContentRef",ref:i,class:"flex flex-col w-full h-auto gap-6 p-6 overflow-visible text-left align-middle transition-all duration-300 ease-in-out transform bg-n-alpha-3 backdrop-blur-[100px] shadow-xl rounded-xl",onSubmit:ze(m,["prevent"]),onClick:_[0]||(_[0]=ze(()=>{},["stop"]))},[e.title||e.description?(p(),f("div",XB,[c("h3",qB,E(e.title),1),at(h.$slots,"description",{},()=>[e.description?(p(),f("p",ZB,E(e.description),1)):O("",!0)],!0)])):O("",!0),at(h.$slots,"default",{},void 0,!0),at(h.$slots,"footer",{},()=>[e.showCancelButton||e.showConfirmButton?(p(),f("div",QB,[e.showCancelButton?(p(),V(ce,{key:0,variant:"faded",color:"slate",label:e.cancelButtonLabel||I(o)("DIALOG.BUTTONS.CANCEL"),class:"w-full",type:"button",onClick:u},null,8,["label"])):O("",!0),e.showConfirmButton?(p(),V(ce,{key:1,color:e.type==="edit"?"blue":"ruby",label:e.confirmButtonLabel||I(o)("DIALOG.BUTTONS.CONFIRM"),class:"w-full","is-loading":e.isLoading,disabled:e.disableConfirmButton||e.isLoading,type:"submit"},null,8,["color","label","is-loading","disabled"])):O("",!0)])):O("",!0)],!0)],544)]),_:3})],34)]),_:3}))}},Ms=Fe(JB,[["__scopeId","data-v-61ff5913"]]),e9={key:0,class:"absolute mt-1 w-full text-[10px] text-center text-n-slate-10"},t9={__name:"ConfirmButton",props:{label:{type:[String,Number],default:""},confirmLabel:{type:[String,Number],default:""},color:{type:String,default:"blue"},confirmColor:{type:String,default:"ruby"},confirmHint:{type:String,default:""},variant:{type:String,default:null},size:{type:String,default:null},justify:{type:String,default:null},icon:{type:[String,Object,Function],default:""},trailingIcon:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=e,s=t,a=F(!1),o=F(!1),l=C(()=>a.value?n.confirmLabel:n.label),i=C(()=>a.value?n.confirmColor:n.color),r=()=>{a.value=!1,o.value=!1},d=()=>{a.value?(o.value=!0,s("click"),setTimeout(r,400)):a.value=!0};return(u,m)=>(p(),f("div",{class:re(["relative",{"animate-bounce-complete":o.value}])},[v(ce,{type:"button",label:l.value,color:i.value,variant:e.variant,size:e.size,justify:e.justify,icon:e.icon,"trailing-icon":e.trailingIcon,"is-loading":e.isLoading,onClick:d,onBlur:r},Yo({_:2},[u.$slots.default?{name:"default",fn:K(()=>[at(u.$slots,"default",{},void 0,!0)]),key:"0"}:void 0,u.$slots.icon?{name:"icon",fn:K(()=>[at(u.$slots,"icon",{},void 0,!0)]),key:"1"}:void 0]),1032,["label","color","variant","size","justify","icon","trailing-icon","is-loading"]),a.value&&e.confirmHint?(p(),f("div",e9,E(e.confirmHint),1)):O("",!0)],2))}},n9=Fe(t9,[["__scopeId","data-v-6c27f942"]]),s9={class:"flex flex-row justify-between gap-4"},a9={class:"flex flex-row gap-2"},wf={__name:"AccessToken",props:{value:{type:String,default:""},showResetButton:{type:Boolean,default:!0}},emits:["onCopy","onReset"],setup(e,{emit:t}){const n=e,s=t,a=F("password"),o=()=>{a.value=a.value==="password"?"text":"password"},l=C(()=>a.value==="password"?"eye-hide":"eye-show"),i=()=>{s("onCopy",n.value)},r=()=>{s("onReset")};return(d,u)=>{const m=z("fluent-icon"),h=z("woot-input");return p(),f("div",s9,[v(h,{name:"access_token",class:"flex-1 [&>input]:!py-1.5 ltr:[&>input]:!pr-9 ltr:[&>input]:!pl-3 rtl:[&>input]:!pl-9 rtl:[&>input]:!pr-3 focus:[&>input]:!border-n-weak [&>input]:cursor-not-allowed relative",styles:{borderRadius:"12px",fontSize:"14px",marginBottom:"2px"},type:a.value,"model-value":e.value,readonly:""},{masked:K(()=>[c("button",{class:"absolute top-0 bottom-0 ltr:right-0.5 rtl:left-0.5",type:"button",onClick:o},[v(m,{icon:l.value,size:16},null,8,["icon"])])]),_:1},8,["type","model-value"]),c("div",a9,[v(ce,{label:d.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.COPY"),slate:"",outline:"",type:"button",icon:"i-lucide-copy",class:"rounded-xl",onClick:i},null,8,["label"]),e.showResetButton?(p(),V(n9,{key:0,label:d.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET"),"confirm-label":d.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_RESET"),"confirm-hint":d.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_HINT"),color:"slate","confirm-color":"ruby",variant:"outline",icon:"i-lucide-key-round",class:"rounded-xl",onClick:r},null,8,["label","confirm-label","confirm-hint"])):O("",!0)])])}}},o9={key:0,class:"flex flex-col gap-4"},l9={class:"mb-2 flex flex-col items-start"},i9={class:"mb-2 text-sm font-medium text-n-slate-12"},r9={key:1,class:"flex flex-col gap-1"},c9={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},d9={class:"flex items-center justify-end w-full gap-2 px-0 py-2"},u9={__name:"AgentBotModal",props:{type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)},selectedBot:{type:Object,default:()=>({})}},setup(e,{expose:t}){const n=e,s={CREATE:"create",EDIT:"edit"},a=yt(),{t:o}=Pe(),l=F(null),i=ke("agentBots/getUIFlags"),r=os({botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),[d,u]=Xn(),m=F(""),h=Lt({botName:{required:fc.withMessage(()=>o("AGENT_BOTS.FORM.ERRORS.NAME"),lt)},botUrl:{required:fc.withMessage(()=>o("AGENT_BOTS.FORM.ERRORS.URL"),lt),url:fc.withMessage(()=>o("AGENT_BOTS.FORM.ERRORS.VALID_URL"),Xc)}},r),_=C(()=>n.type===s.CREATE?i.value.isCreating:i.value.isUpdating),g=C(()=>d.value?o("AGENT_BOTS.ACCESS_TOKEN.TITLE"):n.type===s.CREATE?o("AGENT_BOTS.ADD.TITLE"):o("AGENT_BOTS.EDIT.TITLE")),T=C(()=>d.value?o("AGENT_BOTS.ACCESS_TOKEN.DESCRIPTION"):""),S=C(()=>n.type===s.CREATE?o("AGENT_BOTS.FORM.CREATE"):o("AGENT_BOTS.FORM.UPDATE")),b=C(()=>{var G;return h.value.botName.$error?(G=h.value.botName.$errors[0])==null?void 0:G.$message:""}),A=C(()=>{var G;return h.value.botUrl.$error?(G=h.value.botUrl.$errors[0])==null?void 0:G.$message:""}),y=C(()=>d.value||n.type===s.EDIT||m.value),x=()=>{Object.assign(r,{botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),h.value.$reset()},$=({file:G,url:L})=>{r.botAvatar=G,r.botAvatarUrl=L},N=async()=>{var G;if((G=n.selectedBot)!=null&&G.id)try{await a.dispatch("agentBots/deleteAgentBotAvatar",n.selectedBot.id),r.botAvatar=null,r.botAvatarUrl="",_e(o("AGENT_BOTS.AVATAR.SUCCESS_DELETE"))}catch{_e(o("AGENT_BOTS.AVATAR.ERROR_DELETE"))}else r.botAvatar=null,r.botAvatarUrl=""},w=async()=>{if(h.value.$touch(),h.value.$invalid||d.value)return;const G={name:r.botName,description:r.botDescription,outgoing_url:r.botUrl,bot_type:"webhook",avatar:r.botAvatar},L=n.type===s.CREATE;try{const M=L?G:{id:n.selectedBot.id,data:G},R=await a.dispatch(`agentBots/${L?"create":"update"}`,M),P=o(L?"AGENT_BOTS.ADD.API.SUCCESS_MESSAGE":"AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE");if(_e(P),L){const{access_token:W,id:Q}=R||{};Q&&W?(m.value=W,u(!0)):(m.value="",l.value.close())}else l.value.close();x()}catch{const R=o(L?"AGENT_BOTS.ADD.API.ERROR_MESSAGE":"AGENT_BOTS.EDIT.API.ERROR_MESSAGE");_e(R)}},D=()=>{if(n.selectedBot&&Object.keys(n.selectedBot).length){const{name:G,description:L,outgoing_url:M,thumbnail:R,bot_config:P,access_token:W}=n.selectedBot;r.botName=G||"",r.botDescription=L||"",r.botUrl=M||(P==null?void 0:P.webhook_url)||"",r.botAvatarUrl=R||"",W&&n.type===s.EDIT&&(m.value=W)}else x()},H=async G=>{await qo(G),_e(o("AGENT_BOTS.ACCESS_TOKEN.COPY_SUCCESSFUL"))},B=async()=>{const G=await a.dispatch("agentBots/resetAccessToken",n.selectedBot.id);G?(m.value=G.access_token,_e(o("AGENT_BOTS.ACCESS_TOKEN.RESET_SUCCESS"))):_e(o("AGENT_BOTS.ACCESS_TOKEN.RESET_ERROR"))},k=()=>{var G;d.value||(G=h.value)==null||G.$reset(),m.value="",u(!1)},U=()=>{k(),l.value.close()};return ot(()=>n.selectedBot,D,{immediate:!0,deep:!0}),t({dialogRef:l}),(G,L)=>(p(),V(Ms,{ref_key:"dialogRef",ref:l,type:"edit",title:g.value,description:T.value,"show-cancel-button":!1,"show-confirm-button":!1,onClose:k},{default:K(()=>[c("form",{class:"flex flex-col gap-4",onSubmit:ze(w,["prevent"])},[!I(d)||e.type===s.EDIT?(p(),f("div",o9,[c("div",l9,[c("span",i9,E(G.$t("AGENT_BOTS.FORM.AVATAR.LABEL")),1),v(Ft,{src:r.botAvatarUrl,name:r.botName,size:68,"allow-upload":"","icon-name":"i-lucide-bot-message-square",onUpload:$,onDelete:N},null,8,["src","name"])]),v(ln,{id:"bot-name",modelValue:r.botName,"onUpdate:modelValue":L[0]||(L[0]=M=>r.botName=M),label:G.$t("AGENT_BOTS.FORM.NAME.LABEL"),placeholder:G.$t("AGENT_BOTS.FORM.NAME.PLACEHOLDER"),message:b.value,"message-type":b.value?"error":"info",onBlur:L[1]||(L[1]=M=>I(h).botName.$touch())},null,8,["modelValue","label","placeholder","message","message-type"]),v(wr,{id:"bot-description",modelValue:r.botDescription,"onUpdate:modelValue":L[2]||(L[2]=M=>r.botDescription=M),label:G.$t("AGENT_BOTS.FORM.DESCRIPTION.LABEL"),placeholder:G.$t("AGENT_BOTS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),v(ln,{id:"bot-url",modelValue:r.botUrl,"onUpdate:modelValue":L[3]||(L[3]=M=>r.botUrl=M),label:G.$t("AGENT_BOTS.FORM.WEBHOOK_URL.LABEL"),placeholder:G.$t("AGENT_BOTS.FORM.WEBHOOK_URL.PLACEHOLDER"),message:A.value,"message-type":A.value?"error":"info",onBlur:L[4]||(L[4]=M=>I(h).botUrl.$touch())},null,8,["modelValue","label","placeholder","message","message-type"])])):O("",!0),y.value?(p(),f("div",r9,[e.type===s.EDIT?(p(),f("label",c9,E(G.$t("AGENT_BOTS.ACCESS_TOKEN.TITLE")),1)):O("",!0),e.type===s.EDIT?(p(),V(wf,{key:1,value:m.value,onOnCopy:H,onOnReset:B},null,8,["value"])):(p(),V(wf,{key:2,value:m.value,"show-reset-button":!1,onOnCopy:H},null,8,["value"]))])):O("",!0),c("div",d9,[v(ce,{faded:"",slate:"",type:"reset",label:G.$t("AGENT_BOTS.FORM.CANCEL"),onClick:L[5]||(L[5]=M=>U())},null,8,["label"]),I(d)?O("",!0):(p(),V(ce,{key:0,type:"submit","data-testid":"label-submit",label:S.value,"is-loading":_.value,disabled:I(h).$invalid},null,8,["label","is-loading","disabled"]))])],32)]),_:1},8,["title","description"]))}},p9={class:"min-w-full overflow-x-auto divide-y divide-n-strong"},m9={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},h9={class:"py-4 ltr:pr-4 rtl:pl-4"},f9={class:"flex flex-row items-center gap-4"},g9={class:"block font-medium break-words"},_9={key:0,class:"text-xs text-n-slate-12 bg-n-blue-5 inline-block rounded-md py-0.5 px-1 ltr:ml-1 rtl:mr-1"},v9={class:"text-sm text-n-slate-11"},b9={class:"py-4 ltr:pr-4 rtl:pl-4 text-sm"},E9={class:"py-4 min-w-xs"},T9={class:"flex gap-1 justify-end"},A9={__name:"Index",setup(e){const t={CREATE:"create",EDIT:"edit"},n=yt(),{t:s}=Pe(),a=ke("agentBots/getBots"),o=ke("agentBots/getUIFlags"),l=F({}),i=F({}),r=F(t.CREATE),d=F(null),u=F(null),m=C(()=>[s("AGENT_BOTS.LIST.TABLE_HEADER.DETAILS"),s("AGENT_BOTS.LIST.TABLE_HEADER.URL")]),h=C(()=>{var A;return((A=l.value)==null?void 0:A.name)||""}),_=()=>{r.value=t.CREATE,l.value={},d.value.dialogRef.open()},g=A=>{r.value=t.EDIT,l.value=A,d.value.dialogRef.open()},T=A=>{l.value=A,u.value.open()},S=async A=>{try{await n.dispatch("agentBots/delete",A),_e(s("AGENT_BOTS.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(s("AGENT_BOTS.DELETE.API.ERROR_MESSAGE"))}finally{i.value[A]=!1,l.value={}}},b=()=>{i.value[l.value.id]=!0,S(l.value.id),u.value.close()};return pt(()=>{n.dispatch("agentBots/get")}),(A,y)=>{const x=_t("tooltip");return p(),V(ro,{"is-loading":I(o).isFetching,"loading-message":I(s)("AGENT_BOTS.LIST.LOADING"),"no-records-found":!I(a).length,"no-records-message":I(s)("AGENT_BOTS.LIST.404")},{header:K(()=>[v(js,{title:I(s)("AGENT_BOTS.HEADER"),description:I(s)("AGENT_BOTS.DESCRIPTION"),"link-text":I(s)("AGENT_BOTS.LEARN_MORE"),"feature-name":"agent_bots"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:A.$t("AGENT_BOTS.ADD.TITLE"),onClick:_},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[c("table",p9,[c("thead",null,[(p(!0),f(fe,null,Ae(m.value,$=>(p(),f("th",{key:$,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},E($),1))),128))]),c("tbody",m9,[(p(!0),f(fe,null,Ae(I(a),$=>{var N;return p(),f("tr",{key:$.id},[c("td",h9,[c("div",f9,[v(Ft,{name:$.name,src:$.thumbnail,size:40,"rounded-full":""},null,8,["name","src"]),c("div",null,[c("span",g9,[Ee(E($.name)+" ",1),$.system_bot?(p(),f("span",_9,E(A.$t("AGENT_BOTS.GLOBAL_BOT_BADGE")),1)):O("",!0)]),c("span",v9,E($.description),1)])])]),c("td",b9,E($.outgoing_url||((N=$.bot_config)==null?void 0:N.webhook_url)),1),c("td",E9,[c("div",T9,[$.system_bot?O("",!0):pe((p(),V(ce,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":i.value[$.id],onClick:w=>g($)},null,8,["is-loading","onClick"])),[[x,I(s)("AGENT_BOTS.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),$.system_bot?O("",!0):pe((p(),V(ce,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":i.value[$.id],onClick:w=>T($)},null,8,["is-loading","onClick"])),[[x,I(s)("AGENT_BOTS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}),128))])])]),default:K(()=>[v(u9,{ref_key:"agentBotModalRef",ref:d,type:r.value,"selected-bot":l.value},null,8,["type","selected-bot"]),v(Ms,{ref_key:"agentBotDeleteDialogRef",ref:u,type:"alert",title:I(s)("AGENT_BOTS.DELETE.CONFIRM.TITLE"),description:I(s)("AGENT_BOTS.DELETE.CONFIRM.MESSAGE",{name:h.value}),"is-loading":I(o).isDeleting,"confirm-button-label":I(s)("AGENT_BOTS.DELETE.CONFIRM.YES"),"cancel-button-label":I(s)("AGENT_BOTS.DELETE.CONFIRM.NO"),onConfirm:b},null,8,["title","description","is-loading","confirm-button-label","cancel-button-label"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},y9={routes:[{path:Bt("accounts/:accountId/settings/agent-bots"),meta:{permissions:["administrator"]},component:Aa,children:[{path:"",name:"agent_bots",component:A9,meta:{featureFlag:Mt.AGENT_BOTS,permissions:["administrator"]}}]}]},S9=[{id:0,key:"CONVERSATION"},{id:1,key:"CONTACT"}],KA=[{id:0,key:"TEXT"},{id:1,key:"NUMBER"},{id:4,key:"LINK"},{id:5,key:"DATE"},{id:6,key:"LIST"},{id:7,key:"CHECKBOX"}],I9={components:{NextButton:ce},props:{onClose:{type:Function,default:()=>{}},selectedAttributeModelTab:{type:Number,default:0}},setup(){return{v$:Lt()}},data(){return{displayName:"",description:"",attributeModel:this.selectedAttributeModelTab||0,attributeType:0,attributeKey:"",regexPattern:null,regexCue:null,regexEnabled:!1,values:[],options:[],show:!0,isTouched:!1}},computed:{...St({uiFlags:"getUIFlags"}),models(){return S9.map(e=>({...e,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_MODELS.${e.key}`)}))},types(){return KA.map(e=>({...e,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${e.key}`)}))},isMultiselectInvalid(){return this.isTouched&&this.values.length===0},isTagInputInvalid(){return this.isAttributeTypeList&&this.values.length===0},attributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.displayName.$invalid||this.v$.description.$invalid||this.uiFlags.isCreating||this.isTagInputInvalid},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},validations:{displayName:{required:lt,minLength:on(1)},description:{required:lt},attributeModel:{required:lt},attributeType:{required:lt},attributeKey:{required:lt,isKey(e){return!(e.indexOf(" ")>=0)}}},methods:{addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},onTouch(){this.isTouched=!0},onDisplayNameChange(){this.attributeKey=gN(this.displayName)},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled},async addAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/create",{attribute_display_name:this.displayName,attribute_description:this.description,attribute_model:this.attributeModel,attribute_display_type:this.attributeType,attribute_key:this.attributeKey,attribute_values:this.attributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.ADD.API.ERROR_MESSAGE")}finally{_e(this.alertMessage)}}}}},C9={class:"flex flex-col h-auto overflow-auto"},x9={class:"w-full"},N9=["value"],O9={key:0,class:"message"},w9=["placeholder"],R9={key:0,class:"message"},$9=["value"],M9={key:0,class:"message"},k9={key:0,class:"multiselect--wrap"},L9={key:1},D9={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function P9(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("multiselect"),d=z("NextButton"),u=z("woot-modal");return p(),V(u,{show:a.show,"onUpdate:show":t[12]||(t[12]=m=>a.show=m),"on-close":n.onClose},{default:K(()=>[c("div",C9,[v(l,{"header-title":e.$t("ATTRIBUTES_MGMT.ADD.TITLE")},null,8,["header-title"]),c("form",{class:"flex w-full",onSubmit:t[11]||(t[11]=ze((...m)=>o.addAttributes&&o.addAttributes(...m),["prevent"]))},[c("div",x9,[c("label",{class:re({error:s.v$.attributeModel.$error})},[Ee(E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.attributeModel=m)},[(p(!0),f(fe,null,Ae(o.models,m=>(p(),f("option",{key:m.id,value:m.id},E(m.option),9,N9))),128))],512),[[zt,a.attributeModel]]),s.v$.attributeModel.$error?(p(),f("span",O9,E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.ERROR")),1)):O("",!0)],2),v(i,{modelValue:a.displayName,"onUpdate:modelValue":[t[1]||(t[1]=m=>a.displayName=m),o.onDisplayNameChange],label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onUpdate:modelValue","onBlur"]),v(i,{modelValue:a.attributeKey,"onUpdate:modelValue":t[2]||(t[2]=m=>a.attributeKey=m),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:re({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?o.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),c("label",{class:re({error:s.v$.description.$error})},[Ee(E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),pe(c("textarea",{"onUpdate:modelValue":t[3]||(t[3]=m=>a.description=m),rows:"3",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[4]||(t[4]=(...m)=>s.v$.description.$touch&&s.v$.description.$touch(...m))},null,40,w9),[[mt,a.description]]),s.v$.description.$error?(p(),f("span",R9,E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):O("",!0)],2),c("label",{class:re({error:s.v$.attributeType.$error})},[Ee(E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[5]||(t[5]=m=>a.attributeType=m)},[(p(!0),f(fe,null,Ae(o.types,m=>(p(),f("option",{key:m.id,value:m.id},E(m.option),9,$9))),128))],512),[[zt,a.attributeType]]),s.v$.attributeType.$error?(p(),f("span",M9,E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):O("",!0)],2),o.isAttributeTypeList?(p(),f("div",k9,[c("label",null,E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.LABEL")),1),v(r,{ref:"tagInput",modelValue:a.values,"onUpdate:modelValue":t[6]||(t[6]=m=>a.values=m),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:re({invalid:o.isMultiselectInvalid}),options:a.options,multiple:"",taggable:"",onClose:o.onTouch,onTag:o.addTagValue},null,8,["modelValue","placeholder","class","options","onClose","onTag"]),pe(c("label",{class:"text-n-ruby-9 dark:text-n-ruby-9 text-sm font-normal mt-1"},E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[pn,o.isMultiselectInvalid]])])):O("",!0),o.isAttributeTypeText?(p(),f("div",L9,[pe(c("input",{"onUpdate:modelValue":t[7]||(t[7]=m=>a.regexEnabled=m),type:"checkbox",onInput:t[8]||(t[8]=(...m)=>o.toggleRegexEnabled&&o.toggleRegexEnabled(...m))},null,544),[[Xt,a.regexEnabled]]),Ee(" "+E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):O("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),V(i,{key:2,modelValue:a.regexPattern,"onUpdate:modelValue":t[9]||(t[9]=m=>a.regexPattern=m),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),V(i,{key:3,modelValue:a.regexCue,"onUpdate:modelValue":t[10]||(t[10]=m=>a.regexCue=m),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("",!0),c("div",D9,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:ze(n.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.ADD.SUBMIT"),disabled:o.isButtonDisabled},null,8,["label","disabled"])])])],32)])]),_:1},8,["show","on-close"])}const B9=Fe(I9,[["render",P9],["__scopeId","data-v-0bbba9ef"]]),F9={components:{NextButton:ce},props:{selectedAttribute:{type:Object,default:()=>{}},isUpdating:{type:Boolean,default:!1}},emits:["onClose"],setup(){return{v$:Lt()}},data(){return{displayName:"",description:"",attributeType:0,regexPattern:null,regexCue:null,regexEnabled:!1,show:!0,attributeKey:"",values:[],options:[],isTouched:!0}},validations:{displayName:{required:lt},attributeType:{required:lt},description:{required:lt,minLength:on(1)},attributeKey:{required:lt,isKey(e){return!(e.indexOf(" ")>=0)}}},computed:{types(){return KA.map(e=>({...e,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${e.key}`)}))},setAttributeListValue(){return this.selectedAttribute.attribute_values.map(e=>({name:e}))},updatedAttributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.description.$invalid||this.isMultiselectInvalid},isMultiselectInvalid(){return this.isAttributeTypeList&&this.isTouched&&this.values.length===0},pageTitle(){return`${this.$t("ATTRIBUTES_MGMT.EDIT.TITLE")} - ${this.selectedAttribute.attribute_display_name}`},selectedAttributeType(){var e;return(e=this.types.find(t=>t.key.toLowerCase()===this.selectedAttribute.attribute_display_type))==null?void 0:e.id},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},setFormValues(){const e=this.selectedAttribute.regex_pattern?dg(this.selectedAttribute.regex_pattern).source:null;this.displayName=this.selectedAttribute.attribute_display_name,this.description=this.selectedAttribute.attribute_description,this.attributeType=this.selectedAttributeType,this.attributeKey=this.selectedAttribute.attribute_key,this.regexPattern=e,this.regexCue=this.selectedAttribute.regex_cue,this.regexEnabled=e!=null,this.values=this.setAttributeListValue},async editAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/update",{id:this.selectedAttribute.id,attribute_description:this.description,attribute_display_name:this.displayName,attribute_values:this.updatedAttributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.EDIT.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.EDIT.API.ERROR_MESSAGE")}finally{_e(this.alertMessage)}}},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled}}},U9={class:"flex flex-col h-auto overflow-auto"},G9={class:"w-full"},V9=["placeholder"],H9={key:0,class:"message"},W9=["value"],K9={key:0,class:"message"},z9={key:0,class:"multiselect--wrap"},j9={key:1},Y9={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function X9(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("multiselect"),d=z("NextButton");return p(),f("div",U9,[v(l,{"header-title":o.pageTitle},null,8,["header-title"]),c("form",{class:"flex flex-col w-full",onSubmit:t[10]||(t[10]=ze((...u)=>o.editAttributes&&o.editAttributes(...u),["prevent"]))},[c("div",G9,[v(i,{modelValue:a.displayName,"onUpdate:modelValue":t[0]||(t[0]=u=>a.displayName=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),v(i,{modelValue:a.attributeKey,"onUpdate:modelValue":t[1]||(t[1]=u=>a.attributeKey=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:re({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?o.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),readonly:"",onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),c("label",{class:re({error:s.v$.description.$error})},[Ee(E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),pe(c("textarea",{"onUpdate:modelValue":t[2]||(t[2]=u=>a.description=u),rows:"5",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...u)=>s.v$.description.$touch&&s.v$.description.$touch(...u))},null,40,V9),[[mt,a.description]]),s.v$.description.$error?(p(),f("span",H9,E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):O("",!0)],2),c("label",{class:re({error:s.v$.attributeType.$error})},[Ee(E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>a.attributeType=u),disabled:""},[(p(!0),f(fe,null,Ae(o.types,u=>(p(),f("option",{key:u.id,value:u.id},E(u.option),9,W9))),128))],512),[[zt,a.attributeType]]),s.v$.attributeType.$error?(p(),f("span",K9,E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):O("",!0)],2),o.isAttributeTypeList?(p(),f("div",z9,[c("label",null,E(e.$t("ATTRIBUTES_MGMT.EDIT.TYPE.LIST.LABEL")),1),v(r,{ref:"tagInput",modelValue:a.values,"onUpdate:modelValue":t[5]||(t[5]=u=>a.values=u),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:re({invalid:o.isMultiselectInvalid}),options:a.options,multiple:"",taggable:"",onTag:o.addTagValue},null,8,["modelValue","placeholder","class","options","onTag"]),pe(c("label",{class:"text-n-ruby-9 dark:text-n-ruby-9 text-sm font-normal mt-1"},E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[pn,o.isMultiselectInvalid]])])):O("",!0),o.isAttributeTypeText?(p(),f("div",j9,[pe(c("input",{"onUpdate:modelValue":t[6]||(t[6]=u=>a.regexEnabled=u),type:"checkbox",onInput:t[7]||(t[7]=(...u)=>o.toggleRegexEnabled&&o.toggleRegexEnabled(...u))},null,544),[[Xt,a.regexEnabled]]),Ee(" "+E(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):O("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),V(i,{key:2,modelValue:a.regexPattern,"onUpdate:modelValue":t[8]||(t[8]=u=>a.regexPattern=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),V(i,{key:3,modelValue:a.regexCue,"onUpdate:modelValue":t[9]||(t[9]=u=>a.regexCue=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("",!0)]),c("div",Y9,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.EDIT.UPDATE_BUTTON_TEXT"),"is-loading":n.isUpdating,disabled:o.isButtonDisabled},null,8,["label","is-loading","disabled"])])],32)])}const q9=Fe(F9,[["render",X9],["__scopeId","data-v-f668f4ef"]]),Z9={class:"flex flex-col"},Q9={class:"min-w-full overflow-x-auto"},J9={class:"divide-y divide-n-weak flex-1 text-n-slate-12"},e7={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},t7={class:"py-4 ltr:pr-4 rtl:pl-4"},n7={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},s7={class:"py-4 ltr:pr-4 rtl:pl-4 attribute-key overflow-hidden whitespace-nowrap text-ellipsis"},a7={class:"py-4 min-w-xs"},o7={class:"flex gap-1 justify-end"},l7={__name:"CustomAttribute",props:{attributeModel:{type:String,default:"conversation_attribute"}},setup(e){const t=e,{t:n}=Pe(),s=F(!1),a=F(!1),o=F({}),l=Nn(),i=yt(),r=C(()=>l["attributes/getAttributesByModel"].value(t.attributeModel)),d=C(()=>l["attributes/getUIFlags"].value),u=C(()=>o.value.attribute_display_name),m=C(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.YES")} ${u.value}`),h=C(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.NO")),_=C(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.TITLE",{attributeName:u.value})),g=C(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{attributeName:u.value})}`),T=async({id:N})=>{var w;try{await i.dispatch("attributes/delete",N),_e(n("ATTRIBUTES_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(D){const H=((w=D==null?void 0:D.response)==null?void 0:w.message)||n("ATTRIBUTES_MGMT.DELETE.API.ERROR_MESSAGE");_e(H)}},S=N=>{s.value=!0,o.value=N},b=()=>{s.value=!1},A=()=>{a.value=!1,o.value={}},y=()=>{T(o.value),A()},x=N=>{a.value=!0,o.value=N},$=C(()=>[n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.NAME"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.TYPE"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.KEY")]);return(N,w)=>{const D=z("woot-modal"),H=z("woot-confirm-delete-modal"),B=_t("tooltip");return p(),f("div",Z9,[c("table",Q9,[c("thead",null,[(p(!0),f(fe,null,Ae($.value,k=>(p(),f("th",{key:k,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},E(k),1))),128))]),c("tbody",J9,[(p(!0),f(fe,null,Ae(r.value,k=>{var U;return p(),f("tr",{key:k.attribute_key},[c("td",e7,E(k.attribute_display_name),1),c("td",t7,E(k.attribute_description),1),c("td",n7,E(N.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${(U=k.attribute_display_type)==null?void 0:U.toUpperCase()}`)),1),c("td",s7,E(k.attribute_key),1),c("td",a7,[c("div",o7,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:G=>S(k)},null,8,["onClick"]),[[B,N.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.EDIT"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:G=>x(k)},null,8,["onClick"]),[[B,N.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.DELETE"),void 0,{top:!0}]])])])])}),128))])]),v(D,{show:s.value,"onUpdate:show":w[0]||(w[0]=k=>s.value=k),"on-close":b},{default:K(()=>[v(q9,{"selected-attribute":o.value,"is-updating":d.value.isUpdating,onOnClose:b},null,8,["selected-attribute","is-updating"])]),_:1},8,["show"]),a.value?(p(),V(H,{key:0,show:a.value,"onUpdate:show":w[1]||(w[1]=k=>a.value=k),title:_.value,message:N.$t("ATTRIBUTES_MGMT.DELETE.CONFIRM.MESSAGE"),"confirm-text":m.value,"reject-text":h.value,"confirm-value":o.value.attribute_display_name,"confirm-place-holder-text":g.value,onOnConfirm:y,onOnClose:A},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("",!0)])}}},i7=Fe(l7,[["__scopeId","data-v-06e395c5"]]),r7={__name:"Index",setup(e){const{t}=Pe(),n=Nn(),s=yt(),a=F(!1),o=F(0),l=C(()=>n["attributes/getUIFlags"].value),i=()=>{a.value=!0},r=()=>{a.value=!1},d=C(()=>[{key:0,name:t("ATTRIBUTES_MGMT.TABS.CONVERSATION")},{key:1,name:t("ATTRIBUTES_MGMT.TABS.CONTACT")}]);pt(()=>{s.dispatch("attributes/get")});const u=C(()=>o.value?"contact_attribute":"conversation_attribute"),m=C(()=>n["attributes/getAttributesByModel"].value(u.value)),h=_=>{o.value=_};return(_,g)=>{const T=z("woot-tabs-item"),S=z("woot-tabs");return p(),V(ro,{"is-loading":l.value.isFetching,"loading-message":_.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!m.value.length,"no-records-message":_.$t("ATTRIBUTES_MGMT.LIST.EMPTY_RESULT.404")},{header:K(()=>[v(js,{title:_.$t("ATTRIBUTES_MGMT.HEADER"),description:_.$t("ATTRIBUTES_MGMT.DESCRIPTION"),"link-text":_.$t("ATTRIBUTES_MGMT.LEARN_MORE"),"feature-name":"custom_attributes"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:_.$t("ATTRIBUTES_MGMT.HEADER_BTN_TXT"),onClick:i},null,8,["label"])]),_:1},8,["title","description","link-text"])]),preBody:K(()=>[v(S,{class:"font-medium [&_ul]:p-0 mb-4",index:o.value,onChange:h},{default:K(()=>[(p(!0),f(fe,null,Ae(d.value,(b,A)=>(p(),V(T,{key:b.key,index:A,name:b.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index"])]),body:K(()=>[(p(),V(i7,{key:u.value,"attribute-model":u.value},null,8,["attribute-model"]))]),default:K(()=>[a.value?(p(),V(B9,{key:0,show:a.value,"onUpdate:show":g[0]||(g[0]=b=>a.value=b),"on-close":r,"selected-attribute-model-tab":o.value},null,8,["show","selected-attribute-model-tab"])):O("",!0)]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},c7={routes:[{path:Bt("accounts/:accountId/settings/custom-attributes"),component:Aa,children:[{path:"",redirect:e=>({name:"attributes_list",params:e.params})},{path:"list",name:"attributes_list",component:r7,meta:{featureFlag:Mt.CUSTOM_ATTRIBUTES,permissions:["administrator"]}}]}]},d7={name:"FilterInput",components:{NextButton:ce},props:{modelValue:{type:Object,default:()=>{}},filterAttributes:{type:Array,default:()=>[]},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:()=>[]},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},emits:["update:modelValue","removeFilter","resetFilter"],computed:{attributeKey:{get(){return this.modelValue?this.modelValue.attribute_key:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,attribute_key:e})}},filterOperator:{get(){return this.modelValue?this.modelValue.filter_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,filter_operator:e})}},values:{get(){return this.modelValue?this.modelValue.values:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,values:e})}},query_operator:{get(){return this.modelValue?this.modelValue.query_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,query_operator:e})}},custom_attribute_type:{get(){return this.customAttributeType?this.customAttributeType:""},set(){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,custom_attribute_type:this.customAttributeType})}}},watch:{customAttributeType:{handler(e){e==="conversation_attribute"||e==="contact_attribute"?this.modelValue.custom_attribute_type=this.customAttributeType:this.modelValue.custom_attribute_type=""},immediate:!0}},methods:{removeFilter(){this.$emit("removeFilter")},resetFilter(){this.$emit("resetFilter")},getInputErrorClass(e){return e?"bg-n-ruby-8/20 border-n-ruby-5 dark:border-n-ruby-5":"bg-n-background border-n-weak dark:border-n-weak"}}},u7={class:"flex gap-1"},p7=["label"],m7=["value"],h7=["value","disabled"],f7=["value"],g7={key:2,class:"flex-grow mr-1 filter__answer--wrap"},_7={key:0,class:"multiselect-wrap--small"},v7={key:1,class:"multiselect-wrap--small"},b7={key:2,class:"multiselect-wrap--small"},E7=["placeholder"],T7={key:0,class:"filter-error"},A7={key:0,class:"flex items-center justify-center relative my-2.5 mx-0"},y7={value:"and"},S7={value:"or"};function I7(e,t,n,s,a,o){const l=z("multiselect"),i=z("NextButton");return p(),f("div",null,[c("div",{class:re(["p-2 border border-solid rounded-lg",o.getInputErrorClass(n.errorMessage)])},[c("div",u7,[n.groupedFilters?pe((p(),f("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=r=>o.attributeKey=r),class:"max-w-[30%] mb-0 mr-1",onChange:t[1]||(t[1]=r=>o.resetFilter())},[(p(!0),f(fe,null,Ae(n.filterGroups,(r,d)=>(p(),f("optgroup",{key:d,label:r.name},[(p(!0),f(fe,null,Ae(r.attributes,u=>(p(),f("option",{key:u.key,value:u.key,selected:!0},E(u.name),9,m7))),128))],8,p7))),128))],544)),[[zt,o.attributeKey]]):pe((p(),f("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=r=>o.attributeKey=r),class:"max-w-[30%] mb-0 mr-1",onChange:t[3]||(t[3]=r=>o.resetFilter())},[(p(!0),f(fe,null,Ae(n.filterAttributes,r=>(p(),f("option",{key:r.key,value:r.key,disabled:r.disabled},E(r.name),9,h7))),128))],544)),[[zt,o.attributeKey]]),pe(c("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.filterOperator=r),class:"max-w-[20%] mb-0 mr-1"},[(p(!0),f(fe,null,Ae(n.operators,(r,d)=>(p(),f("option",{key:d,value:r.value},E(e.$t(`FILTER.OPERATOR_LABELS.${r.value}`)),9,f7))),128))],512),[[zt,o.filterOperator]]),n.showUserInput?(p(),f("div",g7,[n.inputType==="multi_select"?(p(),f("div",_7,[v(l,{modelValue:o.values,"onUpdate:modelValue":t[5]||(t[5]=r=>o.values=r),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1},{noOptions:K(()=>[Ee(E(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):n.inputType==="search_select"?(p(),f("div",v7,[v(l,{modelValue:o.values,"onUpdate:modelValue":t[6]||(t[6]=r=>o.values=r),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:K(()=>[Ee(E(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):n.inputType==="date"?(p(),f("div",b7,[pe(c("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.values=r),type:"date",editable:!1,class:"!mb-0 datepicker"},null,512),[[mt,o.values]])])):pe((p(),f("input",{key:3,"onUpdate:modelValue":t[8]||(t[8]=r=>o.values=r),type:"text",class:"!mb-0",placeholder:e.$t("FILTER.INPUT_PLACEHOLDER")},null,8,E7)),[[mt,o.values]])])):O("",!0),v(i,{icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:o.removeFilter},null,8,["onClick"])]),n.errorMessage?(p(),f("p",T7,E(n.errorMessage),1)):O("",!0)],2),n.showQueryOperator?(p(),f("div",A7,[t[10]||(t[10]=c("hr",{class:"absolute w-full border-b border-solid border-n-weak"},null,-1)),pe(c("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>o.query_operator=r),class:"relative w-auto mb-0 bg-n-background text-n-slate-12 border-n-weak"},[c("option",y7,E(e.$t("FILTER.QUERY_DROPDOWN_LABELS.AND")),1),c("option",S7,E(e.$t("FILTER.QUERY_DROPDOWN_LABELS.OR")),1)],512),[[zt,o.query_operator]])])):O("",!0)])}const zA=Fe(d7,[["render",I7],["__scopeId","data-v-283da707"]]),C7={props:{teams:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],data(){return{selectedTeams:[],message:""}},mounted(){const{team_ids:e}=this.modelValue;this.selectedTeams=e,this.message=this.modelValue.message},methods:{updateValue(){this.$emit("update:modelValue",{team_ids:this.selectedTeams.map(e=>e.id),message:this.message})}}},x7={class:"multiselect-wrap--small flex flex-col gap-1 mt-1"},N7=["placeholder"];function O7(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",null,[c("div",x7,[v(l,{modelValue:a.selectedTeams,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.selectedTeams=i),o.updateValue],"track-by":"id",label:"name",placeholder:e.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.teams,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"]),pe(c("textarea",{"onUpdate:modelValue":t[1]||(t[1]=i=>a.message=i),rows:"4",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),onInput:t[2]||(t[2]=(...i)=>o.updateValue&&o.updateValue(...i))},null,40,N7),[[mt,a.message]])])])}const w7=Fe(C7,[["render",O7],["__scopeId","data-v-8b53467a"]]),R7={components:{Spinner:Zs},props:{initialFileName:{type:String,default:""}},emits:["update:modelValue"],data(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{async onChangeFile(e){this.uploadState="processing",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING");try{const t=e.target.files[0],n=await this.$store.dispatch("automations/uploadAttachment",t);this.$emit("update:modelValue",[n]),this.uploadState="uploaded",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED")}catch{this.uploadState="failed",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),_e(this.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"))}}}},$7={class:"file-button"};function M7(e,t,n,s,a,o){const l=z("Spinner"),i=z("fluent-icon");return p(),f("label",{class:re(["input-wrapper",a.uploadState])},[a.uploadState!=="processing"?(p(),f("input",{key:0,type:"file",name:"attachment",class:re(a.uploadState==="processing"?"disabled":""),onChange:t[0]||(t[0]=(...r)=>o.onChangeFile&&o.onChangeFile(...r))},null,34)):O("",!0),a.uploadState==="processing"?(p(),V(l,{key:1})):O("",!0),a.uploadState==="idle"?(p(),V(i,{key:2,icon:"file-upload"})):O("",!0),a.uploadState==="uploaded"?(p(),V(i,{key:3,icon:"checkmark-circle",type:"outline",class:"success-icon"})):O("",!0),a.uploadState==="failed"?(p(),V(i,{key:4,icon:"dismiss-circle",type:"outline",class:"error-icon"})):O("",!0),c("p",$7,E(a.label),1)],2)}const k7=Fe(R7,[["render",M7],["__scopeId","data-v-f86be9e7"]]),L7={class:"mb-0 vertical dropdown menu"},D7=["onClick"],P7={__name:"MentionBox",props:{items:{type:Array,default:()=>[]},type:{type:String,default:"canned"}},emits:["mentionSelect"],setup(e,{emit:t}){const n=e,s=t,a=F(null),o=F(0),l=()=>{jt(()=>{const m=a.value;if(!m)return;const h=m.querySelector(`#mention-item-${o.value}`);h&&h.scrollIntoView({block:"nearest",behavior:"auto"})})},i=()=>{s("mentionSelect",n.items[o.value])};ig({items:C(()=>n.items),onSelect:i,adjustScroll:l,selectedIndex:o}),ot(()=>n.items,m=>{m.length<o.value+1&&(o.value=0)}),ot(o,l);const r=m=>{o.value=m},d=m=>{o.value=m,i()},u=(m={})=>n.type==="variable"?`{{${m.label}}}`:`/${m.label}`;return(m,h)=>{const _=z("woot-dropdown-item");return p(),f("div",{ref_key:"mentionsListContainerRef",ref:a,class:"bg-n-solid-1 p-1 rounded-xl overflow-auto absolute w-full z-20 shadow-md left-0 bottom-full max-h-[9.75rem] border border-solid border-n-strong mention--box"},[c("ul",L7,[(p(!0),f(fe,null,Ae(e.items,(g,T)=>(p(),V(_,{id:`mention-item-${T}`,key:g.key,class:"!mb-1",onMouseover:S=>r(T)},{default:K(()=>[c("button",{class:re(["flex rounded-lg group flex-col gap-0.5 overflow-hidden cursor-pointer items-start px-3 py-2 justify-center w-full h-full text-left hover:bg-n-alpha-black2",{"bg-n-alpha-black2":T===o.value}]),onClick:S=>d(T)},[at(m.$slots,"default",{item:g,index:T,selected:T===o.value},()=>[c("p",{class:re(["max-w-full min-w-0 mb-0 overflow-hidden text-sm font-medium text-n-slate-11 group-hover:text-n-slate-12 text-ellipsis whitespace-nowrap",{"text-n-slate-12":T===o.value}])},E(g.description),3),c("p",{class:re(["max-w-full min-w-0 mb-0 overflow-hidden text-xs text-n-slate-11 group-hover:text-n-slate-12 text-ellipsis whitespace-nowrap",{"text-n-slate-12":T===o.value}])},E(u(g)),3)],!0)],10,D7)]),_:2},1032,["id","onMouseover"]))),128))])],512)}}},Xg=Fe(P7,[["__scopeId","data-v-8e98f7ba"]]),B7={components:{MentionBox:Xg},props:{searchKey:{type:String,default:""}},emits:["replace"],computed:{...St({cannedMessages:"getCannedResponses"}),items(){return this.cannedMessages.map(e=>({label:e.short_code,key:e.short_code,description:e.content}))}},watch:{searchKey(){this.fetchCannedResponses()}},mounted(){this.fetchCannedResponses()},methods:{fetchCannedResponses(){this.$store.dispatch("getCannedResponse",{searchKey:this.searchKey})},handleMentionClick(e={}){this.$emit("replace",e.description)}}};function F7(e,t,n,s,a,o){const l=z("MentionBox");return o.items.length?(p(),V(l,{key:0,items:o.items,onMentionSelect:o.handleMentionClick},null,8,["items","onMentionSelect"])):O("",!0)}const qg=Fe(B7,[["render",F7]]),U7={class:"max-w-full inline-flex items-center gap-0.5 min-w-0 mb-0 text-sm font-medium text-n-slate-12 group-hover:text-n-brand truncate"},G7={__name:"keyboardEmojiSelector",props:{searchKey:{type:String,default:""}},emits:["selectEmoji"],setup(e,{emit:t}){const n=e,s=t,a=Zu([]),o=C(()=>{if(!n.searchKey)return[];const r=n.searchKey.toLowerCase();return a.value.filter(d=>d.searchString.includes(r))});function l(){a.value=gx.flatMap(({emojis:r})=>r.map(({name:d,slug:u,...m})=>({...m,name:d,slug:u,searchString:`${d.replace(/\s+/g,"")} ${u}`.toLowerCase()})))}function i(r={}){s("selectEmoji",r.emoji)}return pt(()=>{l()}),(r,d)=>o.value.length?(p(),V(Xg,{key:0,type:"emoji",items:o.value,onMentionSelect:i},{default:K(({item:u,selected:m})=>[c("span",U7,[Ee(E(u.emoji)+" ",1),c("p",{class:re(["relative mb-0 truncate bottom-px",{"text-n-brand":m,"font-normal":!m}])}," :"+E(u.name),3)])]),_:1},8,["items"])):O("",!0)}},V7=["id"],H7={key:0,class:"px-2 py-2 text-xs font-medium tracking-wide capitalize text-n-slate-11"},W7=["onClick","onMouseover"],K7={class:"ltr:mr-2 rtl:ml-2"},z7={class:"overflow-hidden flex-1 max-w-full whitespace-nowrap text-ellipsis"},j7={__name:"TagAgents",props:{searchKey:{type:String,default:""}},emits:["selectAgent"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=Nn(),l=C(()=>o["agents/getVerifiedAgents"].value),i=ke("teams/getTeams"),r=F(null),d=F(0),u=C(()=>{var x;const b=((x=n.searchKey)==null?void 0:x.trim().toLowerCase())||"",A=($,N,w)=>$.map(D=>({...D,type:N,displayName:D.name,displayInfo:D[w]})).filter(D=>b?D.displayName.toLowerCase().includes(b):!0);return[{title:a("CONVERSATION.MENTION.AGENTS"),data:A(l.value,"user","email")},{title:a("CONVERSATION.MENTION.TEAMS"),data:A(i.value,"team","description")}].flatMap(({title:$,data:N})=>N.length?[{type:"header",title:$,id:`${$.toLowerCase()}-header`},...N]:[])}),m=C(()=>u.value.filter(b=>b.type!=="header")),h=b=>m.value.findIndex(A=>A.type===b.type&&A.id===b.id),_=()=>{jt(()=>{if(r.value){const b=r.value.querySelector(`#mention-item-${d.value}`);b&&b.scrollIntoView({block:"nearest",behavior:"auto"})}})},g=()=>{s("selectAgent",m.value[d.value])};ig({items:m,onSelect:g,adjustScroll:_,selectedIndex:d}),ot(m,b=>{b.length<d.value+1&&(d.value=0)});const T=b=>{d.value=b},S=b=>{d.value=b,g()};return(b,A)=>(p(),f("div",null,[u.value.length?(p(),f("ul",{key:0,ref_key:"tagAgentsRef",ref:r,class:"vertical dropdown menu mention--box bg-n-solid-1 p-1 rounded-xl text-sm overflow-auto absolute w-full z-20 shadow-md left-0 leading-[1.2] bottom-full max-h-[12.5rem] border border-solid border-n-strong",role:"listbox"},[(p(!0),f(fe,null,Ae(u.value,y=>(p(),f("li",{id:y.type==="header"?void 0:`mention-item-${h(y)}`,key:`${y.type}-${y.id}`},[y.type==="header"?(p(),f("div",H7,E(y.title),1)):(p(),f("div",{key:1,class:re([{"bg-n-alpha-black2":h(y)===d.value},"flex items-center px-2 py-1 rounded-md cursor-pointer"]),role:"option",onClick:x=>S(h(y)),onMouseover:x=>T(h(y))},[c("div",K7,[v(Ft,{src:y.thumbnail,name:y.displayName,"rounded-full":""},null,8,["src","name"])]),c("div",z7,[c("h5",{class:re(["overflow-hidden mb-0 text-sm capitalize whitespace-nowrap text-n-slate-11 text-ellipsis",{"text-n-slate-12":h(y)===d.value}])},E(y.displayName),3),c("div",{class:re(["overflow-hidden text-xs whitespace-nowrap text-ellipsis text-n-slate-10",{"text-n-slate-11":h(y)===d.value}])},E(y.displayInfo),3)])],42,W7))],8,V7))),128))],512)):O("",!0)]))}},Y7={components:{MentionBox:Xg},props:{searchKey:{type:String,default:""}},emits:["selectVariable"],computed:{...St({customAttributes:"attributes/getAttributes"}),sanitizedSearchKey(){return _N(this.searchKey)},items(){return[...this.standardAttributeVariables,...this.customAttributeVariables]},standardAttributeVariables(){return HC.filter(e=>e.label.includes(this.sanitizedSearchKey)||e.key.includes(this.sanitizedSearchKey)).map(e=>({label:e.key,key:e.key,description:e.label}))},customAttributeVariables(){return this.customAttributes.map(e=>{const t=e.attribute_model==="conversation_attribute"?"conversation":"contact";return{label:`${t}.custom_attribute.${e.attribute_key}`,key:`${t}.custom_attribute.${e.attribute_key}`,description:e.attribute_description}})}},methods:{handleVariableClick(e={}){this.$emit("selectVariable",e.key)}}};function X7(e,t,n,s,a,o){const l=z("MentionBox");return o.items.length?(p(),V(l,{key:0,type:"variable",items:o.items,onMentionSelect:o.handleVariableClick},null,8,["items","onMentionSelect"])):O("",!0)}const q7=Fe(Y7,[["render",X7],["__scopeId","data-v-96735aa5"]]),Z7=["id","onClick"],Q7={class:"text-n-slate-12 font-medium text-sm"},J7={class:"text-n-slate-11 text-sm"},eF={__name:"ToolsDropdown",props:{items:{type:Array,required:!0},selectedIndex:{type:Number,default:0}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,a=F(null),o=l=>s("select",l);return ot(()=>n.selectedIndex,()=>{jt(()=>{var i;const l=(i=a.value)==null?void 0:i.querySelector(`#tool-item-${n.selectedIndex}`);l&&l.scrollIntoView({block:"nearest",behavior:"auto"})})},{immediate:!0}),(l,i)=>(p(),f("div",{ref_key:"toolsDropdownRef",ref:a,class:"w-[22.5rem] p-2 flex flex-col gap-1 z-50 absolute rounded-xl bg-n-alpha-3 shadow outline outline-1 outline-n-weak backdrop-blur-[50px] max-h-[20rem] overflow-y-auto"},[(p(!0),f(fe,null,Ae(e.items,(r,d)=>(p(),f("div",{id:`tool-item-${d}`,key:r.id||d,class:re([{"bg-n-alpha-black2":d===e.selectedIndex},"flex flex-col gap-1 rounded-md py-2 px-2 cursor-pointer hover:bg-n-alpha-black2"]),onClick:u=>o(d)},[c("span",Q7,E(r.title),1),c("span",J7,E(r.description),1)],10,Z7))),128))],512))}},tF={__name:"TagTools",props:{searchKey:{type:String,default:""}},emits:["selectTool"],setup(e,{emit:t}){const n=e,s=t,a=ke("captainTools/getRecords"),o=F(0),l=C(()=>{var u;const d=((u=n.searchKey)==null?void 0:u.trim().toLowerCase())||"";return a.value.filter(m=>m.title.toLowerCase().includes(d))}),i=()=>{},r=d=>{d&&(o.value=d),s("selectTool",l.value[o.value])};return ig({items:l,onSelect:r,adjustScroll:i,selectedIndex:o}),ot(l,d=>{d.length<o.value+1&&(o.value=0)}),(d,u)=>l.value.length?(p(),V(eF,{key:0,items:l.value,"selected-index":o.value,class:"bottom-20",onSelect:r},null,8,["items","selected-index"])):(p(),f(fe,{key:1},[],64))}},nF=["strong","em","link","undo","redo","bulletList","orderedList","code"],sF=["strong","em","link","undo","redo","imageUpload"],OEt=["strong","em","link","undo","redo","bulletList","orderedList","h1","h2","h3","imageUpload","code"],Zg=["strong","em","link","undo","redo"],aF=[{name:"Small",height:"24px"},{name:"Medium",height:"48px"},{name:"Large",height:"72px"},{name:"Original Size",height:"auto"}],oF=(e,t=0)=>n=>{const s=new RegExp(`(?:^)?${e}[^\\s${e}]{${t},}`,"g"),a=n.before(),o=n.end(),l=n.doc.textBetween(a,o,"\0","\0");let i;for(;i=s.exec(l);){const r=i.input.slice(Math.max(0,i.index-1),i.index);if(!/^[\s\0]?$/.test(r))continue;const d=i.index+n.start(),u=d+i[0].length;if(d<n.pos&&u>=n.pos){const m=i[0],h=m?m.slice(e.length):"";return{range:{from:d,to:u},text:h}}}return null},lF=({matcher:e,suggestionClass:t="prosemirror-mention-node",onEnter:n=()=>!1,onChange:s=()=>!1,onExit:a=()=>!1,onKeyDown:o=()=>!1})=>new _x({key:new vx("mentions"),view(){return{update:(l,i)=>{const r=this.key.getState(i),d=this.key.getState(l.state),u=r.active&&d.active&&r.range.from!==d.range.from,m=!r.active&&d.active,h=r.active&&!d.active,_=!m&&!h&&r.text!==d.text;(h||u)&&a({view:l,range:r.range,text:r.text}),_&&!u&&s({view:l,range:d.range,text:d.text}),(m||u)&&n({view:l,range:d.range,text:d.text})}}},state:{init(){return{active:!1,range:{},text:null}},apply(l,i){const{selection:r}=l,d={...i};if(r.from===r.to){(r.from<i.range.from||r.from>i.range.to)&&(d.active=!1);const u=r.$from,m=e(u);m?(d.active=!0,d.range=m.range,d.text=m.text):d.active=!1}else d.active=!1;return d.active||(d.range={},d.text=null),d}},props:{handleKeyDown(l,i){const{active:r}=this.getState(l.state);return r?o({view:l,event:i}):!1},decorations(l){const{active:i,range:r}=this.getState(l);return i?bx.create(l.doc,[Ex.inline(r.from,r.to,{nodeName:"span",class:t})]):null}}}),iF=["onClick"],rF=4e3,F1=4,nl={__name:"Editor",props:{modelValue:{type:String,default:""},editorId:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},enableSuggestions:{type:Boolean,default:!0},overrideLineBreaks:{type:Boolean,default:!1},updateSelectionWith:{type:String,default:""},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enableCaptainTools:{type:Boolean,default:!1},variables:{type:Object,default:()=>({})},enabledMenuOptions:{type:Array,default:()=>[]},signature:{type:String,default:""},allowSignature:{type:Boolean,default:!1},channelType:{type:String,default:""},showImageResizeToolbar:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!0}},emits:["typingOn","typingOff","toggleUserMention","toggleCannedMenu","toggleVariablesMenu","toggleToolsMenu","clearSelection","blur","focus","input","update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=($e,Be,Ue=[],ge={},ae=[])=>Tx.create({doc:new _v(tm).parse($e),plugins:Ax({schema:tm,placeholder:Be,methods:ge,plugins:Ue,enabledMenuOptions:ae})}),{isEditorHotKeyEnabled:l,fetchSignatureFlagFromUISettings:i}=Sn(),r=Hx(()=>s("typingOn"),()=>s("typingOff"),rF);let d=null,u=null;const m=F(!1),h=F(!1),_=F(!1),g=F(!1),T=F(!1),S=F(""),b=F(""),A=F(""),y=F(""),x=F(""),$=F(null),N=F(!1),w=F({top:0,left:0}),D=F(null),H=aF,B=Ks("editorRoot"),k=Ks("imageUpload"),U=Ks("editor"),G=()=>Nx.serialize(d.state.doc),L=C(()=>n.enableVariables&&_.value&&!n.isPrivate),M=C(()=>n.enableCannedResponses&&h.value&&!n.isPrivate),R=C(()=>n.enabledMenuOptions.length?n.enabledMenuOptions:nF);function P({trigger:$e,minChars:Be=0,showMenu:Ue,searchTerm:ge,isAllowed:ae=()=>!0}){return lF({matcher:oF($e,Be),suggestionClass:"",onEnter:ve=>(ae()&&(Ue.value=!0,$.value=ve.range,d=ve.view,ge&&(ge.value=ve.text||"")),!1),onChange:ve=>(d=ve.view,$.value=ve.range,ge&&(ge.value=ve.text),!1),onExit:()=>(ge&&(ge.value=""),Ue.value=!1,!1),onKeyDown:({event:ve})=>ve.keyCode===13&&Ue.value})}const W=C(()=>n.enableSuggestions?[P({trigger:"@",showMenu:T,searchTerm:b,isAllowed:()=>n.enableCaptainTools}),P({trigger:"@",showMenu:m,searchTerm:S,isAllowed:()=>n.isPrivate||!n.enableCaptainTools}),P({trigger:"/",showMenu:h,searchTerm:A,isAllowed:()=>!n.isPrivate}),P({trigger:"{{",showMenu:_,searchTerm:y,isAllowed:()=>!n.isPrivate}),P({trigger:":",minChars:2,showMenu:g,searchTerm:x})]:[]),Q=C(()=>n.allowSignature&&!n.isPrivate&&n.channelType?i(n.channelType):!1);ot(m,$e=>{s("toggleUserMention",n.isPrivate&&$e)}),ot(h,$e=>{s("toggleCannedMenu",!n.isPrivate&&$e)}),ot(_,$e=>{s("toggleVariablesMenu",!n.isPrivate&&$e)}),ot(T,$e=>{s("toggleToolsMenu",n.enableCaptainTools&&$e)});function Z($e="end"){const{tr:Be}=d.state,Ue=$e==="end"?gv.atEnd(Be.doc):gv.atStart(Be.doc);d.dispatch(Be.setSelection(Ue)),d.focus()}function j($e){return $e?(n.signature?Vo($e,n.signature):$e).trim().length===0:!0}function X(){const{schema:$e,tr:Be}=u,Ue=$e.nodes.paragraph.create(),ge=Be.insert(0,Ue);d.dispatch(ge),Z("start")}function q($e){if(n.disabled)return;const Be=I($e);j(Be)&&Q.value?X():n.focusOnMount&&Z("end")}function se(){k.value.click()}function he($e=n.modelValue){const Be=I($e);u=o(Be,n.placeholder,W.value,{onImageUpload:se},R.value),d.updateState(u),q(Be)}function be(){let $e=n.modelValue;const Be=j($e);$e=kl($e,n.signature),he($e),Be&&X()}function ne(){if(!n.signature)return;let $e=n.modelValue;$e=Vo($e,n.signature),he($e)}function J($e){$e?be():ne()}function ue(){const $e=B.value.getBoundingClientRect(),Be=D.value.getBoundingClientRect();w.value={top:`${Be.top-$e.top-30}px`,left:`${Be.left-$e.left-4}px`}}function Ne($e){n.showImageResizeToolbar&&(Ix(D.value,$e,d),N.value=!1)}function Re(){n.showImageResizeToolbar&&(D.value=document.querySelector("img.ProseMirror-selectednode"),D.value?(N.value=!!D.value,ue()):N.value=!1)}function Ze(){s("input",G()),s("update:modelValue",G())}function Xe(){D.value&&(document.querySelector("img.ProseMirror-selectednode")||(N.value=!1))}function Qe(){return l("enter")}function Je(){return l("cmd_enter")}Qs({"Alt+KeyP":{action:Z,allowOnFocusedInput:!0},"Alt+KeyL":{action:Z,allowOnFocusedInput:!0}});function st($e){const{tr:Be}=d.state,Ue=Ox(d.state,$e);Ue&&(d.dispatch(Be.insert(Ue.pos,Ue.node).scrollIntoView()),Z())}async function ht($e){try{const{fileUrl:Be}=await vN($e);Be&&st(Be),_e(a("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SUCCESS"))}catch{_e(a("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_ERROR"))}}function wt(){const $e=k.value.files[0];Ci($e,F1)?ht($e):_e(a("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR",{size:F1})),k.value=""}function ee($e){kx($e)&&Qe()&&!n.overrideLineBreaks&&$e.preventDefault()}async function de($e,Be=0,Ue=0){u=Cx(d,$e,Be,Ue),Ze(),await jt(),xx(d)}function ie($e,Be=0){const Ue=Be||d.state.selection.from||0;let ge=new _v(tm).parse($e);de(ge,Ue,void 0)}function Ce($e,Be){if(!d)return;let{node:Ue,from:ge,to:ae}=Sx(d,$e,Be,$.value,n.variables);if(!Ue)return;de(Ue,ge,ae);const ve={mention:_a.USED_MENTIONS,cannedResponse:_a.INSERTED_A_CANNED_RESPONSE,variable:_a.INSERTED_A_VARIABLE,emoji:_a.INSERTED_AN_EMOJI,tool:_a.INSERTED_A_TOOL};nn(ve[$e])}function Se($e){Lx($e)&&Je()&&!n.overrideLineBreaks&&$e.preventDefault()}function je($e){Qe()&&ee($e),Je()&&Se($e)}function Ke(){d=new yx(U.value,{state:u,editable:()=>!n.disabled,dispatchTransaction:$e=>{u=u.apply($e),d.updateState(u),$e.docChanged&&Ze()},handleDOMEvents:{keyup:()=>{n.disabled||(r.start(),Xe())},keydown:($e,Be)=>!n.disabled&&je(Be),focus:()=>!n.disabled&&s("focus"),click:()=>!n.disabled&&Re(),blur:()=>{n.disabled||(r.stop(),s("blur"))},paste:($e,Be)=>{if(n.disabled)return;Be.clipboardData.files.length>0&&Be.preventDefault()}}})}return ot(C(()=>n.modelValue),($e="")=>{$e!==G()&&he($e)}),ot(C(()=>n.editorId),()=>{h.value=!1,g.value=!1,_.value=!1,A.value="",he(n.modelValue)}),ot(C(()=>n.isPrivate),()=>{he(n.modelValue)}),ot(C(()=>n.updateSelectionWith),($e,Be)=>{if(d&&$e!==Be&&n.updateSelectionWith!==""){const Ue=d.state.schema.text(n.updateSelectionWith),ge=d.state.tr.replaceSelectionWith(Ue);d.focus(),u=d.state.apply(ge),d.updateState(u),Ze(),s("clearSelection")}}),ot(Q,$e=>{n.allowSignature&&J($e)}),pt(()=>{u=o(n.modelValue,n.placeholder,W.value,{onImageUpload:se},R.value),Ke(),d.updateState(u),n.focusOnMount&&Z()}),jl(xn.INSERT_INTO_RICH_EDITOR,ie),($e,Be)=>(p(),f("div",{ref_key:"editorRoot",ref:B,class:"relative w-full"},[m.value&&e.isPrivate?(p(),V(j7,{key:0,"search-key":S.value,onSelectAgent:Be[0]||(Be[0]=Ue=>Ce("mention",Ue))},null,8,["search-key"])):O("",!0),M.value?(p(),V(qg,{key:1,"search-key":A.value,onReplace:Be[1]||(Be[1]=Ue=>Ce("cannedResponse",Ue))},null,8,["search-key"])):O("",!0),L.value?(p(),V(q7,{key:2,"search-key":y.value,onSelectVariable:Be[2]||(Be[2]=Ue=>Ce("variable",Ue))},null,8,["search-key"])):O("",!0),g.value?(p(),V(G7,{key:3,"search-key":x.value,onSelectEmoji:Be[3]||(Be[3]=Ue=>Ce("emoji",Ue))},null,8,["search-key"])):O("",!0),T.value?(p(),V(tF,{key:4,"search-key":b.value,onSelectTool:Be[4]||(Be[4]=Ue=>Ce("tool",Ue))},null,8,["search-key"])):O("",!0),c("input",{ref_key:"imageUpload",ref:k,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:"",onChange:wt},null,544),c("div",{ref_key:"editor",ref:U},null,512),pe(c("div",{class:"absolute shadow-md rounded-[6px] flex gap-1 py-1 px-1 bg-n-solid-3 outline outline-1 outline-n-weak text-n-slate-12",style:Ct({top:w.value.top,left:w.value.left})},[(p(!0),f(fe,null,Ae(I(H),Ue=>(p(),f("button",{key:Ue.name,class:"text-xs font-medium rounded-[4px] outline outline-1 outline-n-strong px-1.5 py-0.5 hover:bg-n-slate-5",onClick:ge=>Ne(Ue)},E(Ue.name),9,iF))),128))],4),[[pn,N.value&&e.showImageResizeToolbar]]),at($e.$slots,"footer")],512))}},cF={components:{AutomationActionTeamMessageInput:w7,AutomationActionFileInput:k7,WootMessageEditor:nl,NextButton:ce},props:{modelValue:{type:Object,default:()=>null},actionTypes:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},emits:["update:modelValue","input","removeAction","resetAction"],computed:{action_name:{get(){return this.modelValue?this.modelValue.action_name:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_name:e}),this.$emit("input",{...t,action_name:e})}},action_params:{get(){return this.modelValue?this.modelValue.action_params:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_params:e}),this.$emit("input",{...t,action_params:e})}},inputType(){return this.actionTypes.find(e=>e.key===this.action_name).inputType},actionInputStyles(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set(e){this.action_params=e}}},methods:{removeAction(){this.$emit("removeAction")},resetAction(){this.$emit("resetAction")}}},dF={class:"filter-inputs"},uF=["value"],pF={key:0,class:"filter__answer--wrap"},mF={key:0,class:"w-full"},hF={key:0,class:"multiselect-wrap--small"},fF={key:1,class:"multiselect-wrap--small"},gF=["placeholder"],_F=["placeholder"],vF={key:2,class:"filter-error"};function bF(e,t,n,s,a,o){const l=z("multiselect"),i=z("AutomationActionFileInput"),r=z("NextButton"),d=z("AutomationActionTeamMessageInput"),u=z("WootMessageEditor");return p(),f("div",{class:re(["filter",o.actionInputStyles])},[c("div",dF,[pe(c("select",{"onUpdate:modelValue":t[0]||(t[0]=m=>o.action_name=m),class:re(["action__question",{"full-width":!n.showActionInput}]),onChange:t[1]||(t[1]=m=>o.resetAction())},[(p(!0),f(fe,null,Ae(n.actionTypes,m=>(p(),f("option",{key:m.key,value:m.key},E(m.label),9,uF))),128))],34),[[zt,o.action_name]]),n.showActionInput?(p(),f("div",pF,[o.inputType?(p(),f("div",mF,[o.inputType==="search_select"?(p(),f("div",hF,[v(l,{modelValue:o.action_params,"onUpdate:modelValue":t[2]||(t[2]=m=>o.action_params=m),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:K(()=>[Ee(E(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):o.inputType==="multi_select"?(p(),f("div",fF,[v(l,{modelValue:o.action_params,"onUpdate:modelValue":t[3]||(t[3]=m=>o.action_params=m),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:K(()=>[Ee(E(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):o.inputType==="email"?pe((p(),f("input",{key:2,"onUpdate:modelValue":t[4]||(t[4]=m=>o.action_params=m),type:"email",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},null,8,gF)),[[mt,o.action_params]]):o.inputType==="url"?pe((p(),f("input",{key:3,"onUpdate:modelValue":t[5]||(t[5]=m=>o.action_params=m),type:"url",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},null,8,_F)),[[mt,o.action_params]]):O("",!0),o.inputType==="attachment"?(p(),V(i,{key:4,modelValue:o.action_params,"onUpdate:modelValue":t[6]||(t[6]=m=>o.action_params=m),"initial-file-name":n.initialFileName},null,8,["modelValue","initial-file-name"])):O("",!0)])):O("",!0)])):O("",!0),n.isMacro?O("",!0):(p(),V(r,{key:1,icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:o.removeAction},null,8,["onClick"]))]),o.inputType==="team_message"?(p(),V(d,{key:0,modelValue:o.action_params,"onUpdate:modelValue":t[7]||(t[7]=m=>o.action_params=m),teams:n.dropdownValues},null,8,["modelValue","teams"])):O("",!0),o.inputType==="textarea"?(p(),V(u,{key:1,modelValue:o.castMessageVmodel,"onUpdate:modelValue":t[8]||(t[8]=m=>o.castMessageVmodel=m),rows:"4","enable-variables":"",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),class:"action-message"},null,8,["modelValue","placeholder"])):O("",!0),n.errorMessage?(p(),f("p",vF,E(n.errorMessage),1)):O("",!0)],2)}const Qg=Fe(cF,[["render",bF],["__scopeId","data-v-70584f07"]]),Un=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],Ia=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],al=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],EF=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],Xr=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"},{value:"starts_with",label:"Starts With"}],TF=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],AF=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],yF=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],SF=[{action_name:"assign_agent",action_params:[]}],IF=[{id:"incoming",name:"Incoming",i18nKey:"INCOMING"},{id:"outgoing",name:"Outgoing",i18nKey:"OUTGOING"}],jA=[{id:"nil",name:"None",i18nKey:"NONE"},{id:"low",name:"Low",i18nKey:"LOW"},{id:"medium",name:"Medium",i18nKey:"MEDIUM"},{id:"high",name:"High",i18nKey:"HIGH"},{id:"urgent",name:"Urgent",i18nKey:"URGENT"}],CF=e=>e.every(t=>typeof t=="string"),xF=e=>e.every(t=>typeof t=="number"),NF=e=>(e.length<=0?e=[]:CF(e)||xF(e)?e=[...e]:e=e.map(t=>t.id),e),OF=e=>(e.action_params.id?e.action_params=[e.action_params.id]:e.action_params=[e.action_params],e.action_params),YA=e=>JSON.parse(JSON.stringify(e)).map(s=>(Array.isArray(s.action_params)?s.action_params=NF(s.action_params):typeof s.action_params=="object"?s.action_params=OF(s):s.action_params?s.action_params=[s.action_params]:s.action_params=[],s)),Jg=e=>({date:"date",text:"plain_text",list:"search_select",checkbox:"search_select"})[e]||"plain_text",XA=(e,t)=>e.find(n=>n.attribute_key===t),wF=(e,t)=>e.find(n=>n.attribute_key===t).attribute_values.map(n=>({id:n,name:n})),RF=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="checkbox"),$F=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="list"),qA=e=>({list:Un,text:al,number:Un,link:Un,date:EF,checkbox:Un})[e]||Un,U1=(e,t)=>e.map(n=>({key:n.attribute_key,name:n.attribute_display_name,inputType:Jg(n.attribute_display_type),filterOperators:qA(n.attribute_display_type),customAttributeType:t})),Rf=(e,t="id")=>!e||!Array.isArray(e)?[]:e.map(n=>({id:n[t],name:n.title})),MF=({agents:e,teams:t,labels:n,slaPolicies:s,type:a,addNoneToListFn:o,priorityOptions:l})=>({assign_agent:o?o(e):e,assign_team:o?o(t):t,send_email_to_team:t,add_label:Rf(n,"title"),remove_label:Rf(n,"title"),change_priority:l,add_sla:s})[a],kF=({agents:e,booleanFilterOptions:t,campaigns:n,contacts:s,countries:a,customAttributes:o,inboxes:l,languages:i,statusFilterOptions:r,teams:d,type:u,priorityOptions:m,messageTypeOptions:h})=>RF(o,u)?t:$F(o,u)?wF(o,u):{status:r,assignee_id:e,contact:s,inbox_id:l,team_id:d,campaigns:Rf(n),browser_language:i,conversation_language:i,country_code:a,message_type:h,priority:m}[u],LF=(e,t=[])=>{const n=e.action_params[0];if(!n)return"";if(e.action_name==="send_attachment"){const s=t.find(a=>a.blob_id===n);if(s)return s.filename.toString()}return""},G1=e=>e==="message_created"?TF:e==="conversation_opened"||e==="conversation_resolved"?AF:yF,V1=()=>SF,DF=e=>e.map(t=>({key:t.attribute_key,name:t.attribute_display_name,type:t.attribute_display_type})),PF=(e,t,n)=>e[t].conditions.find(s=>s.key===n).inputType,ZA=e=>{const t=JSON.parse(JSON.stringify(e));return t.conditions[t.conditions.length-1].query_operator=null,t.conditions=Ho(t.conditions).payload,t.actions=YA(t.actions),t},BF=(e,t)=>e.find(n=>n.key===t),FF=(e=[],t=[],n,s)=>{const a=[];return e.length&&a.push({key:"conversation_custom_attribute",name:n,disabled:!0},...e),t.length&&a.push({key:"contact_custom_attribute",name:s,disabled:!0},...t),a},Lu=(e,t)=>e[t].conditions,QA=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n),JA=(e,t,n,s)=>{const a=XA(e,s);return a?Jg(a.attribute_display_type):QA(t,n,s).inputType},ey=(e,t,n,s,a)=>{if(s==="edit"){const l=XA(e,a);if(l)return qA(l.attribute_display_type)}return QA(t,n,a).filterOperators},ty=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n).customAttributeType,ny=(e,t)=>t==="send_email_to_team"||t==="send_message"?!1:!!e.find(s=>s.key===t).inputType;function sy(){const e=Nn(),{t}=Pe(),n=ke("agents/getAgents"),s=ke("campaigns/getAllCampaigns"),a=ke("contacts/getContacts"),o=ke("inboxes/getInboxes"),l=ke("labels/getLabels"),i=ke("teams/getTeams"),r=ke("sla/getSLA"),d=C(()=>[{id:!0,name:t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:t("FILTER.ATTRIBUTE_LABELS.FALSE")}]),u=C(()=>({open:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT")},resolved:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT")},pending:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT")},snoozed:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT")},all:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT")}})),m=C(()=>{const b=u.value;return[...Object.keys(b).map(A=>({id:A,name:b[A].TEXT})),{id:"all",name:t("CHAT_LIST.FILTER_ALL")}]}),h=C(()=>IF.map(b=>({id:b.id,name:t(`AUTOMATION.MESSAGE_TYPES.${b.i18nKey}`)}))),_=C(()=>jA.map(b=>({id:b.id,name:t(`AUTOMATION.PRIORITY_TYPES.${b.i18nKey}`)}))),g=b=>[{id:"nil",name:t("AUTOMATION.NONE_OPTION")||"None"},...b||[]];return{booleanFilterOptions:d,statusFilterItems:u,statusFilterOptions:m,priorityOptions:_,messageTypeOptions:h,getConditionDropdownValues:b=>kF({agents:n.value,booleanFilterOptions:d.value,campaigns:s.value,contacts:a.value,customAttributes:e["attributes/getAttributes"].value,inboxes:o.value,statusFilterOptions:m.value,priorityOptions:_.value,messageTypeOptions:h.value,teams:i.value,languages:vg,countries:to,type:b}),getActionDropdownValues:b=>MF({agents:n.value,labels:l.value,teams:i.value,slaPolicies:r.value,type:b,addNoneToListFn:g,priorityOptions:_.value}),agents:n,campaigns:s,contacts:a,inboxes:o,labels:l,teams:i,slaPolicies:r}}const UF={message_created:{conditions:[{key:"message_type",name:"MESSAGE_TYPE",inputType:"search_select",filterOperators:Un},{key:"content",name:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:Ia},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ia},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Un},{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Un},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:al},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:al},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Un},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Un},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Xr}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"add_label",name:"ADD_LABEL"},{key:"remove_label",name:"REMOVE_LABEL"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"open_conversation",name:"OPEN_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Un},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Un},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ia},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Un},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Xr},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ia},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ia},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Un},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Un},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Un}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Un},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Un},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ia},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Un},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ia},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Xr},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:al},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:al},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ia},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Un},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Un},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Un}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Un},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ia},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ia},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Un},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ia},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:al},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Xr},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:al},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Un},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Un},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Un}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_resolved:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Un},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ia},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ia},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Un},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ia},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:al},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Xr},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:al},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Un},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Un},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Un}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]}},Du=[{key:"conversation_created",value:"CONVERSATION_CREATED"},{key:"conversation_updated",value:"CONVERSATION_UPDATED"},{key:"conversation_resolved",value:"CONVERSATION_RESOLVED"},{key:"message_created",value:"MESSAGE_CREATED"},{key:"conversation_opened",value:"CONVERSATION_OPENED"}],Pu=[{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"send_email_to_team",label:"SEND_EMAIL_TO_TEAM",inputType:"team_message"},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"open_conversation",label:"OPEN_CONVERSATION",inputType:null},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"add_sla",label:"ADD_SLA",inputType:"search_select"}];function ay(e=null){const t=Nn(),{t:n}=Pe(),{booleanFilterOptions:s,statusFilterOptions:a,getConditionDropdownValues:o,getActionDropdownValues:l,agents:i,campaigns:r,contacts:d,inboxes:u,labels:m,teams:h,slaPolicies:_}=sy(),g=F(e),T=structuredClone(UF),S=C(()=>{var H;return(H=g.value)==null?void 0:H.event_name});return{automation:g,automationTypes:T,agents:i,campaigns:r,contacts:d,inboxes:u,labels:m,teams:h,slaPolicies:_,booleanFilterOptions:s,statusFilterOptions:a,onEventChange:()=>{g.value.conditions=G1(S.value),g.value.actions=V1()},getConditionDropdownValues:o,appendNewCondition:()=>{const H=G1(S.value);g.value.conditions=[...g.value.conditions,...H]},appendNewAction:()=>{const H=V1();g.value.actions=[...g.value.actions,...H]},removeFilter:H=>{g.value.conditions.length<=1?_e(n("AUTOMATION.CONDITION.DELETE_MESSAGE")):g.value.conditions=g.value.conditions.filter((B,k)=>k!==H)},removeAction:H=>{g.value.actions.length<=1?_e(n("AUTOMATION.ACTION.DELETE_MESSAGE")):g.value.actions=g.value.actions.filter((B,k)=>k!==H)},resetFilter:(H,B)=>{const k=[...g.value.conditions];k[H]={...k[H],filter_operator:T[S.value].conditions.find(U=>U.key===B.attribute_key).filterOperators[0].value,values:""},g.value.conditions=k},resetAction:H=>{const B=[...g.value.actions];B[H]={...B[H],action_params:[]},g.value.actions=B},getActionDropdownValues:l,manifestCustomAttributes:()=>{const H=t["attributes/getAttributesByModel"].value("conversation_attribute"),B=t["attributes/getAttributesByModel"].value("contact_attribute"),k=U1(H,"conversation_attribute"),U=U1(B,"contact_attribute"),G=FF(k,U,n("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),n("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));["message_created","conversation_created","conversation_updated","conversation_opened"].forEach(L=>{T[L].conditions=[...T[L].conditions,...G]})}}}const GF="ATTRIBUTE_KEY_REQUIRED",VF="FILTER_OPERATOR_REQUIRED",HF="VALUE_REQUIRED",WF="VALUE_MUST_BE_BETWEEN_1_AND_998",KF="ACTION_PARAMETERS_REQUIRED",zF="ATLEAST_ONE_CONDITION_REQUIRED",jF="ATLEAST_ONE_ACTION_REQUIRED",YF=e=>e?Array.isArray(e)?!e.length:typeof e=="object"?!Object.keys(e).length:!1:!0,oy=e=>e.attribute_key?e.filter_operator?!["is_present","is_not_present"].includes(e.filter_operator)&&YF(e.values)?HF:e.filter_operator==="days_before"&&(parseInt(e.values,10)<=0||parseInt(e.values,10)>=999)?WF:null:VF:GF,XF=e=>{const t={};return["name","description","event_name"].forEach(s=>{e[s]||(t[s]=`${s.charAt(0).toUpperCase()+s.slice(1)} is required`)}),t},qF=e=>{const t={};return!e||e.length===0?(t.conditions=zF,t):(e.forEach((n,s)=>{const a=oy(n);a&&(t[`condition_${s}`]=a)}),t)},ZF=e=>!["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team","open_conversation"].includes(e.action_name)&&(!e.action_params||e.action_params.length===0)?KF:null,ly=e=>!e||e.length===0?{actions:jF}:e.reduce((t,n,s)=>{const a=ZF(n);return a&&(t[`action_${s}`]=a),t},{}),iy=e=>{const t=XF(e),n=qF(e.conditions),s=ly(e.actions);return{...t,...n,...s}},QF={name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},JF={components:{FilterInputBox:zA,AutomationActionInput:Qg,NextButton:ce},props:{onClose:{type:Function,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:l,removeAction:i,resetFilter:r,resetAction:d,getActionDropdownValues:u,manifestCustomAttributes:m}=ay(QF);return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:l,removeAction:i,resetFilter:r,resetAction:d,getActionDropdownValues:u,manifestCustomAttributes:m}},data(){return{automationRuleEvent:Du[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create",errors:{}}},computed:{...St({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return Du.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?Pu:Pu.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes()},methods:{getAttributes:Lu,getInputType:JA,getOperators:ey,getCustomAttributeType:ty,showActionInput:ny,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=iy(this.automation),Object.keys(this.errors).length===0){const e=ZA(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return Lu(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},eU={class:"flex flex-col modal-content"},tU={class:"w-full"},nU={class:"mb-6"},sU=["value"],aU={key:0,class:"message"},oU={key:0,class:"text-xs text-right text-n-teal-10 pt-1"},lU={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},iU={class:"mt-4"},rU={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},cU={class:"mt-4"},dU={class:"w-full"},uU={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function pU(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("FilterInputBox"),d=z("NextButton"),u=z("AutomationActionInput");return p(),f("div",null,[v(l,{"header-title":e.$t("AUTOMATION.ADD.TITLE")},null,8,["header-title"]),c("div",eU,[c("div",tU,[v(i,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=m=>s.automation.name=m),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:a.errors.name}),error:a.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),v(i,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=m=>s.automation.description=m),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:re({error:a.errors.description}),error:a.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),c("div",nU,[c("label",{class:re({error:a.errors.event_name})},[Ee(E(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>s.automation.event_name=m),class:"m-0",onChange:t[3]||(t[3]=m=>s.onEventChange(s.automation))},[(p(!0),f(fe,null,Ae(o.automationRuleEvents,m=>(p(),f("option",{key:m.key,value:m.key},E(m.value),9,sU))),128))],544),[[zt,s.automation.event_name]]),a.errors.event_name?(p(),f("span",aU,E(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):O("",!0)],2),o.hasAutomationMutated?(p(),f("p",oU,E(e.$t("AUTOMATION.FORM.RESET_MESSAGE")),1)):O("",!0)]),c("section",null,[c("label",null,E(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),c("div",lU,[(p(!0),f(fe,null,Ae(s.automation.conditions,(m,h)=>(p(),V(r,{key:h,modelValue:s.automation.conditions[h],"onUpdate:modelValue":_=>s.automation.conditions[h]=_,"filter-attributes":o.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":o.getInputType(a.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),operators:o.getOperators(a.allCustomAttributes,s.automationTypes,s.automation,a.mode,s.automation.conditions[h].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[h].attribute_key),"show-query-operator":h!==s.automation.conditions.length-1,"custom-attribute-type":o.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),"error-message":a.errors[`condition_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`condition_${h}`]}`):"",onResetFilter:_=>s.resetFilter(h,s.automation.conditions[h]),onRemoveFilter:_=>s.removeFilter(h)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","show-query-operator","custom-attribute-type","error-message","onResetFilter","onRemoveFilter"]))),128)),c("div",iU,[v(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),c("section",null,[c("label",null,E(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),c("div",rU,[(p(!0),f(fe,null,Ae(s.automation.actions,(m,h)=>(p(),V(u,{key:h,modelValue:s.automation.actions[h],"onUpdate:modelValue":_=>s.automation.actions[h]=_,"action-types":o.automationActionTypes,"dropdown-values":s.getActionDropdownValues(s.automation.actions[h].action_name),"show-action-input":o.showActionInput(o.automationActionTypes,s.automation.actions[h].action_name),"error-message":a.errors[`action_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`action_${h}`]}`):"",onResetAction:_=>s.resetAction(h),onRemoveAction:_=>s.removeAction(h)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","onResetAction","onRemoveAction"]))),128)),c("div",cU,[v(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),c("div",dU,[c("div",uU,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"),onClick:ze(n.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.ADD.SUBMIT"),onClick:o.emitSaveAutomation},null,8,["label","onClick"])])])])])])}const mU=Fe(JF,[["render",pU]]);function hU(){const{getConditionDropdownValues:e,getActionDropdownValues:t}=sy(),n=(l,i,r)=>{const d=DF(i);return l.conditions.map(u=>{const m=BF(d,u.attribute_key);let h="plain_text";return m?h=Jg(m.type):h=PF(r,l.event_name,u.attribute_key),h==="plain_text"||h==="date"?{...u,values:u.values[0]}:h==="comma_separated_plain_text"?{...u,values:u.values.join(",")}:{...u,query_operator:u.query_operator||"and",values:[...e(u.attribute_key)].filter(_=>[...u.values].includes(_.id))}})},s=(l,i)=>{const r=l.action_params,d=i.find(u=>u.key===l.action_name).inputType;return d==="multi_select"||d==="search_select"?[...t(l.action_name)].filter(u=>[...r].includes(u.id)):d==="team_message"?{team_ids:[...t(l.action_name)].filter(u=>[...r[0].team_ids].includes(u.id)),message:r[0].message}:[...r]},a=(l,i)=>l.actions.map(r=>({...r,action_params:r.action_params.length?s(r,i):[]}));return{formatAutomation:(l,i,r,d)=>({...l,conditions:n(l,i,r),actions:a(l,d)})}}const fU={components:{FilterInputBox:zA,NextButton:ce,AutomationActionInput:Qg},props:{onClose:{type:Function,default:()=>{}},selectedResponse:{type:Object,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:l,removeAction:i,resetFilter:r,resetAction:d,getActionDropdownValues:u,manifestCustomAttributes:m}=ay(),{formatAutomation:h}=hU();return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:l,removeAction:i,resetFilter:r,resetAction:d,getActionDropdownValues:u,formatAutomation:h,manifestCustomAttributes:m}},data(){return{automationRuleEvent:Du[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit",errors:{}}},computed:{...St({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return Du.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?Pu:Pu.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.manifestCustomAttributes(),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.automation=this.formatAutomation(this.selectedResponse,this.allCustomAttributes,this.automationTypes,this.automationActionTypes)},methods:{getFileName:LF,getAttributes:Lu,getInputType:JA,getOperators:ey,getCustomAttributeType:ty,showActionInput:ny,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=iy(this.automation),Object.keys(this.errors).length===0){const e=ZA(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return Lu(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},gU={class:"flex flex-col modal-content"},_U={key:0,class:"w-full"},vU={class:"event_wrapper"},bU=["value"],EU={key:0,class:"message"},TU={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},AU={class:"mt-4"},yU={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},SU={class:"mt-4"},IU={class:"w-full"},CU={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function xU(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("FilterInputBox"),d=z("NextButton"),u=z("AutomationActionInput");return p(),f("div",null,[v(l,{"header-title":e.$t("AUTOMATION.EDIT.TITLE")},null,8,["header-title"]),c("div",gU,[s.automation?(p(),f("div",_U,[v(i,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=m=>s.automation.name=m),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:re({error:a.errors.name}),error:a.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),v(i,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=m=>s.automation.description=m),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:re({error:a.errors.description}),error:a.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),c("div",vU,[c("label",{class:re({error:a.errors.event_name})},[Ee(E(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>s.automation.event_name=m),onChange:t[3]||(t[3]=m=>s.onEventChange(s.automation))},[(p(!0),f(fe,null,Ae(o.automationRuleEvents,m=>(p(),f("option",{key:m.key,value:m.key},E(m.value),9,bU))),128))],544),[[zt,s.automation.event_name]]),a.errors.event_name?(p(),f("span",EU,E(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):O("",!0)],2)]),c("section",null,[c("label",null,E(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),c("div",TU,[(p(!0),f(fe,null,Ae(s.automation.conditions,(m,h)=>(p(),V(r,{key:h,modelValue:s.automation.conditions[h],"onUpdate:modelValue":_=>s.automation.conditions[h]=_,"filter-attributes":o.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":o.getInputType(a.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),operators:o.getOperators(a.allCustomAttributes,s.automationTypes,s.automation,a.mode,s.automation.conditions[h].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[h].attribute_key),"custom-attribute-type":o.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),"show-query-operator":h!==s.automation.conditions.length-1,"error-message":a.errors[`condition_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`condition_${h}`]}`):"",onResetFilter:_=>s.resetFilter(h,s.automation.conditions[h]),onRemoveFilter:_=>s.removeFilter(h)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","custom-attribute-type","show-query-operator","error-message","onResetFilter","onRemoveFilter"]))),128)),c("div",AU,[v(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),c("section",null,[c("label",null,E(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),c("div",yU,[(p(!0),f(fe,null,Ae(s.automation.actions,(m,h)=>(p(),V(u,{key:h,modelValue:s.automation.actions[h],"onUpdate:modelValue":_=>s.automation.actions[h]=_,"action-types":o.automationActionTypes,"dropdown-values":s.getActionDropdownValues(m.action_name),"show-action-input":o.showActionInput(o.automationActionTypes,m.action_name),"error-message":a.errors[`action_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`action_${h}`]}`):"","initial-file-name":o.getFileName(m,s.automation.files),onResetAction:_=>s.resetAction(h),onRemoveAction:_=>s.removeAction(h)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name","onResetAction","onRemoveAction"]))),128)),c("div",SU,[v(d,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),c("div",IU,[c("div",CU,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"),onClick:ze(n.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.EDIT.SUBMIT"),onClick:o.emitSaveAutomation},null,8,["label","onClick"])])])])):O("",!0)])])}const NU=Fe(fU,[["render",xU],["__scopeId","data-v-b62fb6ef"]]),OU={class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[200px]"},wU={class:"py-4 ltr:pr-4 rtl:pl-4"},RU={class:"py-4 ltr:pr-4 rtl:pl-4"},$U=["title"],MU={class:"py-4 min-w-xs"},kU={class:"flex gap-1 justify-end flex-shrink-0"},LU={__name:"AutomationRuleRow",props:{automation:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["toggle","edit","delete","clone"],setup(e,{emit:t}){const n=e,s=t,a=i=>vu(new Date(i),"LLL d, yyyy"),o=i=>vu(new Date(i),"LLL d, yyyy hh:mm a"),l=C({get:()=>n.automation.active,set:i=>{const{id:r,name:d}=n.automation;s("toggle",{id:r,name:d,status:!i})}});return(i,r)=>{const d=_t("tooltip");return p(),f("tr",null,[c("td",OU,E(e.automation.name),1),c("td",wU,E(e.automation.description),1),c("td",RU,[v(so,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=u=>l.value=u)},null,8,["modelValue"])]),c("td",{class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[12px]",title:o(e.automation.created_on)},E(a(e.automation.created_on)),9,$U),c("td",MU,[c("div",kU,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":e.loading,onClick:r[1]||(r[1]=u=>i.$emit("edit",e.automation))},null,8,["is-loading"]),[[d,i.$t("AUTOMATION.FORM.EDIT"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-copy-plus",xs:"",faded:"","is-loading":e.loading,onClick:r[2]||(r[2]=u=>i.$emit("clone",e.automation))},null,8,["is-loading"]),[[d,i.$t("AUTOMATION.CLONE.TOOLTIP"),void 0,{top:!0}]]),pe(v(ce,{"is-loading":e.loading,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:r[3]||(r[3]=u=>i.$emit("delete",e.automation))},null,8,["is-loading"]),[[d,i.$t("AUTOMATION.FORM.DELETE"),void 0,{top:!0}]])])])])}}},DU={class:"min-w-full divide-y divide-n-weak"},PU={class:"divide-y divide-n-weak text-n-slate-11"},BU={__name:"Index",setup(e){const t=Nn(),n=yt(),{t:s}=Pe(),a=F(null),o=F({}),l=F(!1),i=F(!1),r=F(!1),d=F({}),u=F(s("AUTOMATION.TOGGLE.ACTIVATION_TITLE")),m=F(s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")),h=C(()=>t["automations/getAutomations"].value),_=C(()=>t["automations/getUIFlags"].value),g=C(()=>t.getCurrentAccountId.value),T=C(()=>`${s("AUTOMATION.DELETE.CONFIRM.YES")} ${d.value.name}`),S=C(()=>`${s("AUTOMATION.DELETE.CONFIRM.NO")} ${d.value.name}`),b=C(()=>` ${d.value.name}?`),A=C(()=>t["accounts/isFeatureEnabledonAccount"].value(g.value,"sla"));pt(()=>{n.dispatch("inboxes/get"),n.dispatch("agents/get"),n.dispatch("contacts/get"),n.dispatch("teams/get"),n.dispatch("labels/get"),n.dispatch("campaigns/get"),n.dispatch("automations/get"),A.value&&n.dispatch("sla/get")});const y=()=>{l.value=!0},x=()=>{l.value=!1},$=M=>{d.value=M,i.value=!0},N=()=>{i.value=!1},w=M=>{r.value=!0,d.value=M},D=()=>{r.value=!1},H=async M=>{try{await n.dispatch("automations/delete",M),_e(s("AUTOMATION.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(s("AUTOMATION.DELETE.API.ERROR_MESSAGE"))}finally{o.value[d.value.id]=!1}},B=()=>{o.value[d.value.id]=!0,D(),H(d.value.id)},k=async({id:M})=>{try{await n.dispatch("automations/clone",M),_e(s("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),n.dispatch("automations/get")}catch{_e(s("AUTOMATION.CLONE.API.ERROR_MESSAGE"))}finally{o.value[d.value.id]=!1}},U=async(M,R)=>{try{const P=R==="edit"?"automations/update":"automations/create",W=s(R==="edit"?"AUTOMATION.EDIT.API.SUCCESS_MESSAGE":"AUTOMATION.ADD.API.SUCCESS_MESSAGE");await n.dispatch(P,M),_e(W),x(),N()}catch{const W=s(R==="edit"?"AUTOMATION.EDIT.API.ERROR_MESSAGE":"AUTOMATION.ADD.API.ERROR_MESSAGE");_e(W)}},G=async({id:M,name:R,status:P})=>{try{if(P?(u.value=s("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"),m.value=s("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:R})):(u.value=s("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),m.value=s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:R})),await a.value.showConfirmation()){await n.dispatch("automations/update",{id:M,active:!P});const Q=s(P?"AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL":"AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL");_e(Q)}}catch{_e(s("AUTOMATION.EDIT.API.ERROR_MESSAGE"))}},L=C(()=>[s("AUTOMATION.LIST.TABLE_HEADER.NAME"),s("AUTOMATION.LIST.TABLE_HEADER.DESCRIPTION"),s("AUTOMATION.LIST.TABLE_HEADER.ACTIVE"),s("AUTOMATION.LIST.TABLE_HEADER.CREATED_ON")]);return(M,R)=>{const P=z("woot-modal"),W=z("woot-delete-modal"),Q=z("woot-confirm-modal");return p(),V(ro,{"is-loading":_.value.isFetching,"loading-message":M.$t("AUTOMATION.LOADING"),"no-records-found":!h.value.length,"no-records-message":M.$t("AUTOMATION.LIST.404")},{header:K(()=>[v(js,{title:M.$t("AUTOMATION.HEADER"),description:M.$t("AUTOMATION.DESCRIPTION"),"link-text":M.$t("AUTOMATION.LEARN_MORE"),"feature-name":"automation"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:M.$t("AUTOMATION.HEADER_BTN_TXT"),onClick:y},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[c("table",DU,[c("thead",null,[(p(!0),f(fe,null,Ae(L.value,Z=>(p(),f("th",{key:Z,class:"py-4 ltr:pr-4 rtl:pl-4 rtl:text-right ltr:text-left font-semibold text-n-slate-11"},E(Z),1))),128))]),c("tbody",PU,[(p(!0),f(fe,null,Ae(h.value,Z=>(p(),V(LU,{key:Z.id,automation:Z,loading:o.value[Z.id],onClone:k,onToggle:G,onEdit:$,onDelete:w},null,8,["automation","loading"]))),128))])])]),default:K(()=>[v(P,{show:l.value,"onUpdate:show":R[0]||(R[0]=Z=>l.value=Z),size:"medium","on-close":x},{default:K(()=>[l.value?(p(),V(mU,{key:0,"on-close":x,onSaveAutomation:U})):O("",!0)]),_:1},8,["show"]),v(W,{show:r.value,"onUpdate:show":R[1]||(R[1]=Z=>r.value=Z),"on-close":D,"on-confirm":B,title:M.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:M.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":b.value,"confirm-text":T.value,"reject-text":S.value},null,8,["show","title","message","message-value","confirm-text","reject-text"]),v(P,{show:i.value,"onUpdate:show":R[2]||(R[2]=Z=>i.value=Z),size:"medium","on-close":N},{default:K(()=>[i.value?(p(),V(NU,{key:0,"on-close":N,"selected-response":d.value,onSaveAutomation:U},null,8,["selected-response"])):O("",!0)]),_:1},8,["show"]),v(Q,{ref_key:"confirmDialog",ref:a,title:u.value,description:m.value},null,8,["title","description"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},FU={routes:[{path:Bt("accounts/:accountId/settings/automation"),component:Aa,children:[{path:"",redirect:e=>({name:"automation_list",params:e.params})},{path:"list",name:"automation_list",component:BU,meta:{featureFlag:Mt.AUTOMATIONS,permissions:["administrator"]}}]}]},Jn={CLOUD:"cloud",ENTERPRISE:"enterprise",COMMUNITY:"community"},UU={class:"text-sm text-n-slate-11 font-medium"},GU={__name:"TableFooterResults",props:{firstIndex:{type:Number,default:0},lastIndex:{type:Number,default:0},totalCount:{type:Number,default:0}},setup(e){return(t,n)=>(p(),f("span",UU,E(t.$t("GENERAL.SHOWING_RESULTS",{firstIndex:e.firstIndex,lastIndex:e.lastIndex,totalCount:e.totalCount})),1))}},VU={class:"flex items-center h-8 outline outline-1 outline-n-weak rounded-lg"},HU={class:"flex items-center gap-3 px-3 tabular-nums bg-n-slate-9/10 h-full"},WU={class:"text-sm text-n-slate-12"},KU={class:"text-sm text-n-slate-11"},zU={__name:"TableFooterPagination",props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>n.currentPage===n.totalPages||n.totalPages===1),o=C(()=>n.currentPage===1),l=C(()=>n.currentPage===n.totalPages),i=C(()=>n.currentPage===1);function r(_){s("pageChange",_)}const d=()=>{d.value||r(n.currentPage+1)},u=()=>{i.value||r(n.currentPage-1)},m=()=>{o.value||r(1)},h=()=>{a.value||r(n.totalPages)};return(_,g)=>(p(),f("div",VU,[v(ce,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-left",class:"ltr:rounded-l-lg ltr:rounded-r-none rtl:rounded-r-lg rtl:rounded-l-none",disabled:o.value,onClick:m},null,8,["disabled"]),g[1]||(g[1]=c("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[c("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),v(ce,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-left",class:"rounded-none",disabled:i.value,onClick:u},null,8,["disabled"]),c("div",HU,[c("span",WU,E(e.currentPage),1),g[0]||(g[0]=c("span",{class:"text-n-slate-11"},"/",-1)),c("span",KU,E(e.totalPages),1)]),v(ce,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-right",class:"rounded-none",disabled:l.value,onClick:d},null,8,["disabled"]),g[2]||(g[2]=c("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[c("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),v(ce,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-right",class:"ltr:rounded-r-lg ltr:rounded-l-none rtl:rounded-l-lg rtl:rounded-r-none",disabled:a.value,onClick:h},null,8,["disabled"])]))}},jU={key:0,class:"flex items-center justify-between h-12 px-6"},e_={__name:"TableFooter",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>Math.ceil(n.totalCount/n.pageSize)),o=C(()=>n.pageSize*(n.currentPage-1)+1),l=C(()=>Math.min(n.totalCount,n.pageSize*n.currentPage)),i=C(()=>n.totalCount&&!(o.value>n.totalCount));return(r,d)=>i.value?(p(),f("footer",jU,[v(GU,{"first-index":o.value,"last-index":l.value,"total-count":e.totalCount},null,8,["first-index","last-index","total-count"]),e.totalCount?(p(),V(zU,{key:0,"current-page":e.currentPage,"total-pages":a.value,"total-count":e.totalCount,"page-size":e.pageSize,onPageChange:d[0]||(d[0]=u=>s("pageChange",u))},null,8,["current-page","total-pages","total-count","page-size"])):O("",!0)])):O("",!0)}},ry={0:"agent",1:"administrator"},YU={0:"online",1:"offline",2:"busy"},XU={"automationrule:create":"AUDIT_LOGS.AUTOMATION_RULE.ADD","automationrule:update":"AUDIT_LOGS.AUTOMATION_RULE.EDIT","automationrule:destroy":"AUDIT_LOGS.AUTOMATION_RULE.DELETE","webhook:create":"AUDIT_LOGS.WEBHOOK.ADD","webhook:update":"AUDIT_LOGS.WEBHOOK.EDIT","webhook:destroy":"AUDIT_LOGS.WEBHOOK.DELETE","inbox:create":"AUDIT_LOGS.INBOX.ADD","inbox:update":"AUDIT_LOGS.INBOX.EDIT","inbox:destroy":"AUDIT_LOGS.INBOX.DELETE","user:sign_in":"AUDIT_LOGS.USER_ACTION.SIGN_IN","user:sign_out":"AUDIT_LOGS.USER_ACTION.SIGN_OUT","team:create":"AUDIT_LOGS.TEAM.ADD","team:update":"AUDIT_LOGS.TEAM.EDIT","team:destroy":"AUDIT_LOGS.TEAM.DELETE","macro:create":"AUDIT_LOGS.MACRO.ADD","macro:update":"AUDIT_LOGS.MACRO.EDIT","macro:destroy":"AUDIT_LOGS.MACRO.DELETE","accountuser:create":"AUDIT_LOGS.ACCOUNT_USER.ADD","accountuser:update:self":"AUDIT_LOGS.ACCOUNT_USER.EDIT.SELF","accountuser:update:other":"AUDIT_LOGS.ACCOUNT_USER.EDIT.OTHER","accountuser:update:deleted":"AUDIT_LOGS.ACCOUNT_USER.EDIT.DELETED","inboxmember:create":"AUDIT_LOGS.INBOX_MEMBER.ADD","inboxmember:destroy":"AUDIT_LOGS.INBOX_MEMBER.REMOVE","teammember:create":"AUDIT_LOGS.TEAM_MEMBER.ADD","teammember:destroy":"AUDIT_LOGS.TEAM_MEMBER.REMOVE","account:update":"AUDIT_LOGS.ACCOUNT.EDIT","conversation:destroy":"AUDIT_LOGS.CONVERSATION.DELETE"};function H1(e){return Array.isArray(e)?e[e.length-1]:e}function qU(e){let t=[],n=[];return e.role&&e.role.length&&(t.push("role"),n.push(ry[H1(e.role)])),e.availability&&e.availability.length&&(t.push("availability"),n.push(YU[H1(e.availability)])),{changes:t,values:n}}function bp(e,t){var s;return e===null?"System":((s=t.find(a=>a.id===e))==null?void 0:s.name)||e}function ZU(e,t,n){t.invitee=bp(e.audited_changes.user_id,n);const s=e.audited_changes.role;return t.role=ry[s]||"unknown",t}function QU(e,t,n){var a,o;e.user_id!==((a=e.auditable)==null?void 0:a.user_id)&&(t.user=bp((o=e.auditable)==null?void 0:o.user_id,n));const s=qU(e.audited_changes);return s&&(t.attributes=s.changes,t.values=s.values),t}function JU(e,t,n){const s=e.audited_changes.user_id;return s&&s!==void 0&&(t.user=bp(s,n)),t}function eG(e,t){return e.audited_changes.team_id&&(t.team_id=e.audited_changes.team_id),t}function tG(e,t){return e.audited_changes.inbox_id&&(t.inbox_id=e.audited_changes.inbox_id),t}function nG(e,t,n){return e.audited_changes&&(t=JU(e,t,n),t=eG(e,t),t=tG(e,t)),t}function sG(e,t,n,s){return s==="create"?ZU(e,t,n):s==="update"?QU(e,t,n):t}function aG(e,t){var o;let n={agentName:bp(e.user_id,t),id:e.auditable_id};const s=e.auditable_type.toLowerCase(),a=e.action.toLowerCase();return s==="conversation"&&a==="destroy"&&(n.id=((o=e.audited_changes)==null?void 0:o.display_id)||e.auditable_id),s==="accountuser"&&(n=sG(e,n,t,a)),(s==="inboxmember"||s==="teammember")&&(n=nG(e,n,t)),n}function oG(e){return e.auditable===null?":deleted":e.user_id===e.auditable.user_id?":self":":other"}const lG=e=>{const t=e.auditable_type.toLowerCase(),n=e.action.toLowerCase();let s=`${t}:${n}`;return t==="accountuser"&&n==="update"&&(s+=oG(e)),XU[s]||""},iG={class:"flex-1 overflow-auto"},rG={class:"mt-6 flex-1 text-n-slate-11"},cG={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},dG={key:2,class:"min-w-full overflow-x-auto"},uG={class:"divide-y divide-n-weak"},pG={class:"divide-y divide-n-weak text-n-slate-11"},mG={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},hG={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},fG={class:"py-4 w-[8.75rem]"},gG={__name:"Index",setup(e){const t=Nn(),n=yt(),s=En(),a=C(()=>t["auditlogs/getAuditLogs"].value),o=C(()=>t["auditlogs/getUIFlags"].value),l=C(()=>t["auditlogs/getMeta"].value),i=C(()=>t["agents/getAgents"].value),{t:r}=Pe(),d=cn(),u=C(()=>Number(d.query.page??1)),m=T=>{try{n.dispatch("auditlogs/fetch",{page:T})}catch(S){const b=(S==null?void 0:S.message)||r("AUDIT_LOGS.API.ERROR_MESSAGE");_e(b)}},h=T=>{const S=aG(T,i.value),b=lG(T),A=x=>Array.isArray(x)?x.join(", "):x,y={...S,attributes:A(S.attributes),values:A(S.values)};return r(b,y)},_=T=>{s.push({name:"auditlogs_list",query:{page:T}})};pt(()=>{n.dispatch("agents/get"),m(u.value)}),ot(u,(T,S)=>{T!==S&&m(T)});const g=C(()=>[r("AUDIT_LOGS.LIST.TABLE_HEADER.ACTIVITY"),r("AUDIT_LOGS.LIST.TABLE_HEADER.TIME"),r("AUDIT_LOGS.LIST.TABLE_HEADER.IP_ADDRESS")]);return(T,S)=>{const b=z("woot-loading-state");return p(),f("div",iG,[v(js,{title:T.$t("AUDIT_LOGS.HEADER"),description:T.$t("AUDIT_LOGS.DESCRIPTION"),"link-text":T.$t("AUDIT_LOGS.LEARN_MORE"),"feature-name":"audit_logs"},null,8,["title","description","link-text"]),c("div",rG,[o.value.fetchingList?(p(),V(b,{key:0,message:T.$t("AUDIT_LOGS.LOADING")},null,8,["message"])):a.value.length?(p(),f("div",dG,[c("table",uG,[c("thead",null,[(p(!0),f(fe,null,Ae(g.value,A=>(p(),f("th",{key:A,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},E(A),1))),128))]),c("tbody",pG,[(p(!0),f(fe,null,Ae(a.value,A=>(p(),f("tr",{key:A.id},[c("td",mG,E(h(A)),1),c("td",hG,E(I(Qu)(A.created_at,"MMM dd, yyyy hh:mm a")),1),c("td",fG,E(A.remote_address),1)]))),128))])]),v(e_,{"current-page":Number(l.value.currentPage),"total-count":l.value.totalEntries,"page-size":l.value.perPage,class:"border-n-weak border-t !px-0 py-4",onPageChange:_},null,8,["current-page","total-count","page-size"])])):(p(),f("p",cG,E(T.$t("AUDIT_LOGS.LIST.404")),1))])])}}},_G={routes:[{path:Bt("accounts/:accountId/settings/audit-logs"),component:Aa,children:[{path:"",redirect:e=>({name:"auditlogs_list",params:e.params})},{path:"list",name:"auditlogs_list",meta:{featureFlag:Mt.AUDIT_LOGS,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE],permissions:["administrator"]},component:gG}]}]};function zo(e,t){try{const n=I(e);return Sr(n,t)}catch(n){return ZE("transform-keys-error",{payload:e,options:t,op:"camelCase"}),qc(n),e}}function Hs(e,t){try{const n=I(e);return bN(n,t)}catch(n){return ZE("transform-keys-error",{payload:e,options:t,op:"snakeCase"}),qc(n),e}}function t_(){const e=yt(),{isCloudFeatureEnabled:t,currentAccount:n}=_s(),{isEnterprise:s}=Js(),a=C(()=>t(Mt.CAPTAIN)),o=C(()=>{var d,u;return(u=(d=n.value)==null?void 0:d.limits)==null?void 0:u.captain}),l=C(()=>{var d;return(d=o.value)!=null&&d.documents?zo(o.value.documents):null}),i=C(()=>{var d;return(d=o.value)!=null&&d.responses?zo(o.value.responses):null});return{captainEnabled:a,captainLimits:o,documentLimits:l,responseLimits:i,fetchLimits:()=>{s&&e.dispatch("accounts/limits")}}}const vG={class:"flex gap-5 items-center justify-between text-xs uppercase text-n-slate-10"},bG={class:"font-medium tracking-wider"},EG={class:"tabular-nums"},TG={class:"rounded-full overflow-hidden h-2 w-full bg-n-slate-4 mt-2"},W1={__name:"BillingMeter",props:{title:{type:String,required:!0},consumed:{type:Number,required:!0},totalCount:{type:Number,required:!0}},setup(e){const t=e,n=C(()=>Math.round(t.consumed/t.totalCount*100)),s=C(()=>n.value<50?"bg-n-teal-10":n.value<80?"bg-n-amber-10":"bg-n-ruby-10");return(a,o)=>(p(),f(fe,null,[c("div",vG,[c("div",bG,E(e.title),1),c("div",EG,E(e.consumed)+" / "+E(e.totalCount),1)]),c("div",TG,[c("div",{class:re(["h-2",s.value]),style:Ct({width:`${n.value}%`})},null,6)])],64))}},AG={class:"grid grid-cols-[1fr_auto] gap-5"},yG={class:"text-base font-medium text-n-slate-12"},SG={class:"text-sm mt-1 text-n-slate-11"},cy={__name:"BillingHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(p(),f("div",AG,[c("div",null,[c("span",yG,E(e.title),1),c("p",SG,E(e.description),1)]),at(t.$slots,"default")]))}},IG={class:"rounded-xl shadow-sm border border-n-weak bg-n-solid-2 py-5 space-y-5"},ih={__name:"BillingCard",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(p(),f("div",IG,[v(cy,{title:e.title,description:e.description,class:"px-5"},{default:K(()=>[at(t.$slots,"action")]),_:3},8,["title","description"]),at(t.$slots,"default")]))}},CG={class:"px-5"},xG={class:"text-n-slate-11 text-xs"},NG={class:"mt-2 text-xl font-medium text-n-slate-12"},rh={__name:"DetailItem",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(e){return(t,n)=>(p(),f("div",CG,[c("span",xG,E(e.label),1),c("div",NG,E(e.value),1)]))}},OG={class:"grid gap-4"},wG={key:0,class:"grid lg:grid-cols-4 sm:grid-cols-3 grid-cols-1 gap-2 divide-x divide-n-weak"},RG={key:0,class:"px-5"},$G={key:1,class:"px-5"},MG={__name:"Index",setup(e){const{currentAccount:t}=_s(),{captainEnabled:n,captainLimits:s,documentLimits:a,responseLimits:o,fetchLimits:l}=t_(),i=ke("accounts/getUIFlags"),r=yt(),d=C(()=>t.value.custom_attributes||{}),u=C(()=>d.value.plan_name),m=C(()=>d.value.subscribed_quantity),h=C(()=>{if(!d.value.subscription_ends_on)return"";const b=new Date(d.value.subscription_ends_on);return ts(b,"dd MMM, yyyy")}),_=C(()=>!!u.value),g=async()=>{_.value||(r.dispatch("accounts/subscription"),l())},T=()=>{r.dispatch("accounts/checkout")},S=()=>{window.$chatwoot&&window.$chatwoot.toggle()};return pt(g),(b,A)=>(p(),V(ro,{"is-loading":I(i).isFetchingItem,"loading-message":b.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!_.value,"no-records-message":b.$t("BILLING_SETTINGS.NO_BILLING_USER")},{header:K(()=>[v(js,{title:b.$t("BILLING_SETTINGS.TITLE"),description:b.$t("BILLING_SETTINGS.DESCRIPTION"),"link-text":b.$t("BILLING_SETTINGS.VIEW_PRICING"),"feature-name":"billing"},null,8,["title","description","link-text"])]),body:K(()=>[c("section",OG,[v(ih,{title:b.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE"),description:b.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION")},{action:K(()=>[v(ce,{sm:"",solid:"",blue:"",onClick:T},{default:K(()=>[Ee(E(b.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT")),1)]),_:1})]),default:K(()=>[u.value||m.value||h.value?(p(),f("div",wG,[v(rh,{label:b.$t("BILLING_SETTINGS.CURRENT_PLAN.TITLE"),value:u.value},null,8,["label","value"]),m.value?(p(),V(rh,{key:0,label:b.$t("BILLING_SETTINGS.CURRENT_PLAN.SEAT_COUNT"),value:m.value},null,8,["label","value"])):O("",!0),h.value?(p(),V(rh,{key:1,label:b.$t("BILLING_SETTINGS.CURRENT_PLAN.RENEWS_ON"),value:h.value},null,8,["label","value"])):O("",!0)])):O("",!0)]),_:1},8,["title","description"]),I(n)?(p(),V(ih,{key:0,title:b.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:b.$t("BILLING_SETTINGS.CAPTAIN.DESCRIPTION")},{action:K(()=>[v(ce,{sm:"",faded:"",slate:"",disabled:""},{default:K(()=>[Ee(E(b.$t("BILLING_SETTINGS.CAPTAIN.BUTTON_TXT")),1)]),_:1})]),default:K(()=>[I(s)&&I(o)?(p(),f("div",RG,[v(W1,Bs({title:b.$t("BILLING_SETTINGS.CAPTAIN.RESPONSES")},I(o)),null,16,["title"])])):O("",!0),I(s)&&I(a)?(p(),f("div",$G,[v(W1,Bs({title:b.$t("BILLING_SETTINGS.CAPTAIN.DOCUMENTS")},I(a)),null,16,["title"])])):O("",!0)]),_:1},8,["title","description"])):(p(),V(ih,{key:1,title:b.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:b.$t("BILLING_SETTINGS.CAPTAIN.UPGRADE")},{action:K(()=>[v(ce,{sm:"",solid:"",slate:"",onClick:T},{default:K(()=>[Ee(E(b.$t("CAPTAIN.PAYWALL.UPGRADE_NOW")),1)]),_:1})]),_:1},8,["title","description"])),v(cy,{class:"px-1 mt-5",title:b.$t("BILLING_SETTINGS.CHAT_WITH_US.TITLE"),description:b.$t("BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION")},{default:K(()=>[v(ce,{sm:"",solid:"",slate:"",icon:"i-lucide-life-buoy",onOpen:S},{default:K(()=>[Ee(E(b.$t("BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT")),1)]),_:1})]),_:1},8,["title","description"])])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"]))}},kG={routes:[{path:Bt("accounts/:accountId/settings/billing"),meta:{permissions:["administrator"],installationTypes:[Jn.CLOUD]},component:Aa,props:{headerTitle:"BILLING_SETTINGS.TITLE",icon:"credit-card-person",showNewButton:!1},children:[{path:"",name:"billing_settings_index",component:MG,meta:{installationTypes:[Jn.CLOUD],permissions:["administrator"]}}]}]},LG={name:"AddCanned",components:{NextButton:ce,Modal:qt,WootMessageEditor:nl},props:{responseContent:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:Lt()}},data(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:lt,minLength:on(2)},content:{required:lt}},methods:{resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},addCannedResponse(){this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then(()=>{this.addCanned.showLoading=!1,_e(this.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),this.resetForm(),this.onClose()}).catch(e=>{this.addCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");_e(t)})}}},DG={class:"flex flex-col h-auto overflow-auto"},PG={class:"w-full"},BG=["placeholder"],FG={class:"w-full"},UG={class:"editor-wrap"},GG={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function VG(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("WootMessageEditor"),r=z("NextButton"),d=z("Modal");return p(),V(d,{show:a.show,"onUpdate:show":t[4]||(t[4]=u=>a.show=u),"on-close":n.onClose},{default:K(()=>[c("div",DG,[v(l,{"header-title":e.$t("CANNED_MGMT.ADD.TITLE"),"header-content":e.$t("CANNED_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=ze(u=>o.addCannedResponse(),["prevent"]))},[c("div",PG,[c("label",{class:re({error:s.v$.shortCode.$error})},[Ee(E(e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,BG),[[mt,a.shortCode]])],2)]),c("div",FG,[c("label",{class:re({error:s.v$.content.$error})},E(e.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL")),3),c("div",UG,[v(i,{modelValue:a.content,"onUpdate:modelValue":t[2]||(t[2]=u=>a.content=u),class:re(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),c("div",GG,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:ze(n.onClose,["prevent"])},null,8,["label","onClick"]),v(r,{type:"submit",label:e.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||a.addCanned.showLoading,"is-loading":a.addCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const dy=Fe(LG,[["render",VG],["__scopeId","data-v-feb62288"]]),HG={components:{NextButton:ce,Modal:qt,WootMessageEditor:nl},props:{id:{type:Number,default:null},edcontent:{type:String,default:""},edshortCode:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:Lt()}},data(){return{editCanned:{showAlert:!1,showLoading:!1},shortCode:this.edshortCode,content:this.edcontent,show:!0}},validations:{shortCode:{required:lt,minLength:on(2)},content:{required:lt}},computed:{pageTitle(){return`${this.$t("CANNED_MGMT.EDIT.TITLE")} - ${this.edshortCode}`}},methods:{setPageName({name:e}){this.v$.content.$touch(),this.content=e},resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},editCannedResponse(){this.editCanned.showLoading=!0,this.$store.dispatch("updateCannedResponse",{id:this.id,short_code:this.shortCode,content:this.content}).then(()=>{this.editCanned.showLoading=!1,_e(this.$t("CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE")),this.resetForm(),setTimeout(()=>{this.onClose()},10)}).catch(e=>{this.editCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.EDIT.API.ERROR_MESSAGE");_e(t)})}}},WG={class:"flex flex-col h-auto overflow-auto"},KG={class:"w-full"},zG=["placeholder"],jG={class:"w-full"},YG={class:"editor-wrap"},XG={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function qG(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("WootMessageEditor"),r=z("NextButton"),d=z("Modal");return p(),V(d,{show:a.show,"onUpdate:show":t[4]||(t[4]=u=>a.show=u),"on-close":n.onClose},{default:K(()=>[c("div",WG,[v(l,{"header-title":o.pageTitle},null,8,["header-title"]),c("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=ze(u=>o.editCannedResponse(),["prevent"]))},[c("div",KG,[c("label",{class:re({error:s.v$.shortCode.$error})},[Ee(E(e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,zG),[[mt,a.shortCode]])],2)]),c("div",jG,[c("label",{class:re({error:s.v$.content.$error})},E(e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.LABEL")),3),c("div",YG,[v(i,{modelValue:a.content,"onUpdate:modelValue":t[2]||(t[2]=u=>a.content=u),class:re(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),c("div",XG,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:ze(n.onClose,["prevent"])},null,8,["label","onClick"]),v(r,{type:"submit",label:e.$t("CANNED_MGMT.EDIT.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||a.editCanned.showLoading,"is-loading":a.editCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const ZG=Fe(HG,[["render",qG],["__scopeId","data-v-88d4d23b"]]),QG={class:"flex-1 overflow-auto"},JG={class:"mt-6 flex-1"},eV={key:1,class:"flex flex-col items-center justify-center h-full text-base text-n-slate-11 py-8"},tV={key:2,class:"min-w-full overflow-x-auto divide-y divide-n-weak"},nV={key:0},sV={class:"mb-0"},aV={class:"divide-y divide-n-weak text-n-slate-11"},oV=["title"],lV={class:"py-4 ltr:pr-4 rtl:pl-4 md:break-all whitespace-normal"},iV={class:"py-4 flex justify-end gap-1"},rV=Object.assign({name:"CannedResponseSettings"},{__name:"Index",setup(e){const t=Nn(),n=yt(),{t:s}=Pe(),a=F(!1),o=F({}),l=F(!1),i=F(!1),r=F({}),d=F({message:""}),u=F("asc"),m=C(()=>t.getSortedCannedResponses.value(u.value)),h=C(()=>t.getUIFlags.value),_=C(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.YES")} ${r.value.short_code}`),g=C(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.NO")} ${r.value.short_code}`),T=C(()=>` ${r.value.short_code} ? `),S=()=>{u.value=u.value==="asc"?"desc":"asc"},b=async()=>{try{await n.dispatch("getCannedResponse")}catch{}};pt(()=>{b()});const A=U=>{o[r.value.id]=!1,r.value={},d.value.message=U,_e(U)},y=()=>{a.value=!0},x=()=>{a.value=!1},$=U=>{l.value=!0,r.value=U},N=()=>{l.value=!1},w=U=>{i.value=!0,r.value=U},D=()=>{i.value=!1},H=async U=>{try{await n.dispatch("deleteCannedResponse",U),A(s("CANNED_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(G){const L=(G==null?void 0:G.message)||s("CANNED_MGMT.DELETE.API.ERROR_MESSAGE");A(L)}},B=()=>{o[r.value.id]=!0,D(),H(r.value.id)},k=C(()=>[s("CANNED_MGMT.LIST.TABLE_HEADER.SHORT_CODE"),s("CANNED_MGMT.LIST.TABLE_HEADER.CONTENT"),s("CANNED_MGMT.LIST.TABLE_HEADER.ACTIONS")]);return(U,G)=>{const L=z("woot-loading-state"),M=z("fluent-icon"),R=z("woot-modal"),P=z("woot-delete-modal"),W=_t("tooltip");return p(),f("div",QG,[v(js,{title:U.$t("CANNED_MGMT.HEADER"),description:U.$t("CANNED_MGMT.DESCRIPTION"),"link-text":U.$t("CANNED_MGMT.LEARN_MORE"),"feature-name":"canned_responses"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:U.$t("CANNED_MGMT.HEADER_BTN_TXT"),onClick:y},null,8,["label"])]),_:1},8,["title","description","link-text"]),c("div",JG,[h.value.fetchingList?(p(),V(L,{key:0,message:U.$t("CANNED_MGMT.LOADING")},null,8,["message"])):m.value.length?(p(),f("table",tV,[c("thead",null,[(p(!0),f(fe,null,Ae(k.value,Q=>(p(),f("th",{key:Q,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right"},[Q!==k.value[0]?(p(),f("span",nV,E(Q),1)):(p(),f("button",{key:1,class:"flex items-center p-0 cursor-pointer",onClick:S},[c("span",sV,E(Q),1),v(M,{class:"ml-2 size-4",icon:u.value==="desc"?"chevron-up":"chevron-down"},null,8,["icon"])]))]))),128))]),c("tbody",aV,[(p(!0),f(fe,null,Ae(m.value,(Q,Z)=>(p(),f("tr",{key:Q.short_code},[c("td",{class:"py-4 ltr:pr-4 rtl:pl-4 truncate max-w-xs font-medium",title:Q.short_code},E(Q.short_code),9,oV),c("td",lV,E(Q.content),1),c("td",iV,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:j=>$(Q)},null,8,["onClick"]),[[W,U.$t("CANNED_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":o.value[Q.id],onClick:j=>w(Q)},null,8,["is-loading","onClick"]),[[W,U.$t("CANNED_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),f("p",eV,E(U.$t("CANNED_MGMT.LIST.404")),1))]),v(R,{show:a.value,"onUpdate:show":G[0]||(G[0]=Q=>a.value=Q),"on-close":x},{default:K(()=>[v(dy,{"on-close":x})]),_:1},8,["show"]),v(R,{show:l.value,"onUpdate:show":G[1]||(G[1]=Q=>l.value=Q),"on-close":N},{default:K(()=>[l.value?(p(),V(ZG,{key:0,id:r.value.id,"edshort-code":r.value.short_code,edcontent:r.value.content,"on-close":N},null,8,["id","edshort-code","edcontent"])):O("",!0)]),_:1},8,["show"]),v(P,{show:i.value,"onUpdate:show":G[2]||(G[2]=Q=>i.value=Q),"on-close":D,"on-confirm":B,title:U.$t("CANNED_MGMT.DELETE.CONFIRM.TITLE"),message:U.$t("CANNED_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":T.value,"confirm-text":_.value,"reject-text":g.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])])}}}),cV={routes:[{path:Bt("accounts/:accountId/settings/canned-response"),component:Aa,children:[{path:"",redirect:e=>({name:"canned_list",params:e.params})},{path:"list",name:"canned_list",meta:{featureFlag:Mt.CANNED_RESPONSES,permissions:[...fs,...Xs]},component:rV}]}]},dV={fetchFacebookPages(e,t){const n=EN("fetchFacebookPages");return n.params.omniauth_token=e,axios.post(n.url(t),n.params)}},uV={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},pV={class:"flex flex-col w-full items-start mb-4"},mV={class:"text-xl font-medium mb-1 text-n-slate-12 break-words"},hV={class:"text-sm w-full text-n-slate-11"};function fV(e,t,n,s,a,o){const l=_t("dompurify-html");return p(),f("div",pV,[c("h2",mV,E(n.headerTitle),1),pe(c("p",hV,null,512),[[l,n.headerContent]])])}const da=Fe(uV,[["render",fV]]),gV="text/javascript",K1="data-loaded",_V=["defer","crossOrigin","noModule","referrerPolicy","id"];class vV extends Error{constructor(t,n="Failed to load script"){super(n),this.name="ScriptLoaderError",this.src=t}getErrorDetails(){return`Failed to load script from source: ${this.src}`}}const bV=(e,t)=>{const n=document.createElement("script");return n.type=t.type||gV,n.async=t.async!==!1,n.src=e,_V.forEach(s=>{s in t&&(n[s]=t[s])}),Object.entries(t.attrs||{}).forEach(([s,a])=>n.setAttribute(s,a)),n},EV=e=>document.querySelector(`script[src="${e}"]`);async function n_(e,t){return typeof window>"u"||!window.document?Promise.resolve(!1):new Promise((n,s)=>{if(e.trim()===""){s(new Error("Invalid source URL provided"));return}let a=EV(e);if(!a)a=bV(e,t),document.head.appendChild(a);else if(a.hasAttribute(K1)){n(a);return}const o=()=>s(new vV(e));a.addEventListener("error",o),a.addEventListener("abort",o),a.addEventListener("load",()=>{a.setAttribute(K1,"true"),n(a)})})}const TV="/vite/assets/facebook_login-_skaVloV.png",AV={components:{LoadingState:xr,PageHeader:da,NextButton:ce},setup(){const{accountId:e}=_s(),{replaceInstallationName:t}=Io();return{accountId:e,replaceInstallationName:t,v$:Lt()}},data(){return{isCreating:!1,hasError:!1,omniauth_token:"",user_access_token:"",channel:"facebook",selectedPage:{name:null,id:null},pageName:"",pageList:[],emptyStateMessage:this.$t("INBOX_MGMT.DETAILS.LOADING_FB"),errorStateMessage:"",errorStateDescription:"",hasLoginStarted:!1}},validations:{pageName:{required:lt},selectedPage:{isEmpty(){return this.selectedPage!==null&&!!this.selectedPage.name}}},computed:{showLoader(){return!this.user_access_token||this.isCreating},getSelectablePages(){return this.pageList.filter(e=>!e.exists)}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?_e(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(qc(e),_e(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},setPageName({name:e}){this.v$.selectedPage.$touch(),this.pageName=e},initChannelAuth(e){e==="facebook"&&this.loadFBsdk()},runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return n_("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},tryFBlogin(){FB.login(e=>{this.hasError=!1,e.status==="connected"?this.fetchPages(e.authResponse.accessToken):e.status==="not_authorized"?(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED"),this.errorStateDescription=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED_HELP")):(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"),this.errorStateDescription="")},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages"})},async fetchPages(e){try{const t=await dV.fetchFacebookPages(e,this.accountId),{data:{data:n}}=t;this.pageList=n.page_details,this.user_access_token=n.user_access_token}catch{}},channelParams(){return{user_access_token:this.user_access_token,page_access_token:this.selectedPage.access_token,page_id:this.selectedPage.id,inbox_name:this.selectedPage.name}},createChannel(){this.v$.$touch(),this.v$.$error||(this.emptyStateMessage=this.$t("INBOX_MGMT.DETAILS.CREATING_CHANNEL"),this.isCreating=!0,this.$store.dispatch("inboxes/createFBChannel",this.channelParams()).then(e=>{Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}).catch(()=>{this.isCreating=!1}))}}},yV={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},SV={key:0,class:"flex flex-col items-center justify-center h-full text-center"},IV={class:"py-6"},CV={key:1},xV={key:0,class:"max-w-lg mx-auto text-center"},NV={key:0},OV={class:"w-full"},wV={class:"w-3/5"},RV={class:"w-full"},$V={key:0,class:"message"},MV={class:"w-full"},kV=["placeholder"],LV={key:0,class:"message"},DV={class:"w-full text-right"};function PV(e,t,n,s,a,o){const l=z("LoadingState"),i=z("PageHeader"),r=z("multiselect"),d=z("NextButton"),u=_t("dompurify-html");return p(),f("div",yV,[a.hasLoginStarted?(p(),f("div",CV,[a.hasError?(p(),f("div",xV,[c("h5",null,E(a.errorStateMessage),1),a.errorStateDescription?pe((p(),f("p",NV,null,512)),[[u,a.errorStateDescription]]):O("",!0)])):o.showLoader?(p(),V(l,{key:1,message:a.emptyStateMessage},null,8,["message"])):(p(),f("form",{key:2,class:"flex flex-col flex-wrap mx-0",onSubmit:t[4]||(t[4]=ze(m=>o.createChannel(),["prevent"]))},[c("div",OV,[v(i,{"header-title":e.$t("INBOX_MGMT.ADD.DETAILS.TITLE"),"header-content":s.replaceInstallationName(e.$t("INBOX_MGMT.ADD.DETAILS.DESC"))},null,8,["header-title","header-content"])]),c("div",wV,[c("div",RV,[c("div",{class:re(["input-wrap",{error:s.v$.selectedPage.$error}])},[Ee(E(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PAGE"))+" ",1),v(r,{modelValue:a.selectedPage,"onUpdate:modelValue":t[1]||(t[1]=m=>a.selectedPage=m),"close-on-select":"","allow-empty":"",options:o.getSelectablePages,"track-by":"id",label:"name","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_A_VALUE"),"selected-label":"",onSelect:o.setPageName},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedPage.$error?(p(),f("span",$V,E(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PLACEHOLDER")),1)):O("",!0)],2)]),c("div",MV,[c("label",{class:re({error:s.v$.pageName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.FB.INBOX_NAME"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=m=>a.pageName=m),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_NAME"),onInput:t[3]||(t[3]=(...m)=>s.v$.pageName.$touch&&s.v$.pageName.$touch(...m))},null,40,kV),[[mt,a.pageName]]),s.v$.pageName.$error?(p(),f("span",LV,E(e.$t("INBOX_MGMT.ADD.FB.ADD_NAME")),1)):O("",!0)],2)]),c("div",DV,[v(d,{label:e.$t("INBOX_MGMT.ADD.FB.CREATE_INBOX")},null,8,["label"])])])],32))])):(p(),f("div",SV,[c("a",{href:"#",onClick:t[0]||(t[0]=m=>o.startLogin())},t[5]||(t[5]=[c("img",{class:"w-auto h-10",src:TV,alt:"Facebook-logo"},null,-1)])),c("p",IV,E(s.replaceInstallationName(e.$t("INBOX_MGMT.ADD.FB.HELP"))),1)]))])}const BV=Fe(AV,[["render",PV]]),FV={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},uy={__name:"GreetingsEditor",props:{modelValue:{type:String,default:""},richtext:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=C({get:()=>n.modelValue,set:o=>s("update:modelValue",o)});return(o,l)=>(p(),f("section",null,[e.richtext?(p(),f("div",FV,[v(nl,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value=i),"is-format-mode":"","enable-variables":"",placeholder:e.placeholder,"min-height":4},null,8,["modelValue","placeholder"])])):(p(),V(ag,{key:1,modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=i=>a.value=i),rows:4,type:"text",class:"greetings--textarea",label:e.label,placeholder:e.placeholder,onInput:o.handleInput},null,8,["modelValue","label","placeholder","onInput"]))]))}},UV={class:"flex flex-col min-w-0 gap-1"},GV={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},VV={key:0,class:"flex items-center justify-end h-4 ltr:right-3 rtl:left-3"},HV={key:0,class:"text-xs tabular-nums text-n-slate-10"},WV={__name:"Editor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},focusOnMount:{type:Boolean,default:!1},maxLength:{type:Number,default:200},showCharacterCount:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enabledMenuOptions:{type:Array,default:()=>[]},enableCaptainTools:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=eg(),o=F(!1),l=C(()=>n.modelValue.length),i=C(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),r=m=>{n.disabled||s("update:modelValue",m)},d=()=>{n.disabled||(o.value=!0)},u=()=>{n.disabled||(o.value=!1)};return ot(()=>n.modelValue,m=>{n.maxLength&&n.showCharacterCount&&!a.actions&&l.value>=n.maxLength&&s("update:modelValue",m.slice(0,n.maxLength))}),(m,h)=>(p(),f("div",UV,[e.label?(p(),f("label",GV,E(e.label),1)):O("",!0),c("div",{class:re(["flex flex-col w-full gap-2 px-3 py-3 transition-all duration-500 ease-in-out border rounded-lg editor-wrapper bg-n-alpha-black2",[{"cursor-not-allowed opacity-50 pointer-events-none !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":o.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!o.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!o.value}]])},[v(nl,{"model-value":e.modelValue,placeholder:e.placeholder,"focus-on-mount":e.focusOnMount,disabled:e.disabled,"enable-variables":e.enableVariables,"enable-canned-responses":e.enableCannedResponses,"enabled-menu-options":e.enabledMenuOptions,"enable-captain-tools":e.enableCaptainTools,onInput:r,onFocus:d,onBlur:u},null,8,["model-value","placeholder","focus-on-mount","disabled","enable-variables","enable-canned-responses","enabled-menu-options","enable-captain-tools"]),e.showCharacterCount||I(a).actions?(p(),f("div",VV,[e.showCharacterCount&&!I(a).actions?(p(),f("span",HV,E(l.value)+" / "+E(e.maxLength),1)):at(m.$slots,"actions",{key:1},void 0,!0)])):O("",!0)],2),e.message?(p(),f("p",{key:1,class:re(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",i.value])},E(e.message),3)):O("",!0)]))}},Ws=Fe(WV,[["__scopeId","data-v-e87dfa7d"]]),KV={components:{PageHeader:da,GreetingsEditor:uy,NextButton:ce,Editor:Ws},data(){return{inboxName:"",channelWebsiteUrl:"",channelWidgetColor:"#009CE0",channelWelcomeTitle:"",channelWelcomeTagline:"",greetingEnabled:!1,greetingMessage:"",welcomeTaglineEditorMenuOptions:Zg}},computed:{...St({uiFlags:"inboxes/getUIFlags"}),textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},methods:{async createChannel(){try{const e=await this.$store.dispatch("inboxes/createWebsiteChannel",{name:this.inboxName,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage,channel:{type:"web_widget",website_url:this.channelWebsiteUrl,widget_color:this.channelWidgetColor,welcome_title:this.channelWelcomeTitle,welcome_tagline:this.channelWelcomeTagline}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){_e(e.message||this.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.API.ERROR_MESSAGE"))}}}},zV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},jV={class:"w-full"},YV=["placeholder"],XV={class:"w-full"},qV=["placeholder"],ZV={class:"w-full"},QV={class:"w-full"},JV=["placeholder"],eH={class:"w-full"},tH={value:!0},nH={value:!1},sH={class:"help-text"},aH={class:"flex flex-row justify-end w-full gap-2 px-0 py-2 mt-4"},oH={class:"w-full"};function lH(e,t,n,s,a,o){const l=z("PageHeader"),i=z("woot-loading-state"),r=z("woot-color-picker"),d=z("Editor"),u=z("GreetingsEditor"),m=z("NextButton");return p(),f("div",zV,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.DESC")},null,8,["header-title","header-content"]),e.uiFlags.isCreating?(p(),V(i,{key:0,message:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.LOADING_MESSAGE")},null,8,["message"])):O("",!0),e.uiFlags.isCreating?O("",!0):(p(),f("form",{key:1,class:"flex flex-wrap flex-col mx-0",onSubmit:t[7]||(t[7]=ze((...h)=>o.createChannel&&o.createChannel(...h),["prevent"]))},[c("div",jV,[c("label",null,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>a.inboxName=h),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER")},null,8,YV),[[mt,a.inboxName]])])]),c("div",XV,[c("label",null,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[1]||(t[1]=h=>a.channelWebsiteUrl=h),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,qV),[[mt,a.channelWebsiteUrl]])])]),c("div",ZV,[c("label",null,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),v(r,{modelValue:a.channelWidgetColor,"onUpdate:modelValue":t[2]||(t[2]=h=>a.channelWidgetColor=h)},null,8,["modelValue"])])]),c("div",QV,[c("label",null,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[3]||(t[3]=h=>a.channelWelcomeTitle=h),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,JV),[[mt,a.channelWelcomeTitle]])])]),v(d,{modelValue:a.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=h=>a.channelWelcomeTagline=h),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":a.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),c("label",eH,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[5]||(t[5]=h=>a.greetingEnabled=h)},[c("option",tH,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),c("option",nH,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[zt,a.greetingEnabled]]),c("p",sH,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),a.greetingEnabled?(p(),V(u,{key:0,modelValue:a.greetingMessage,"onUpdate:modelValue":t[6]||(t[6]=h=>a.greetingMessage=h),class:"w-full",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!o.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])):O("",!0),c("div",aH,[c("div",oH,[v(m,{type:"submit","is-loading":e.uiFlags.isCreating,disabled:!a.channelWebsiteUrl||!a.inboxName,solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","disabled","label"])])])],32))])}const iH=Fe(KV,[["render",lH]]);class rH extends tl{constructor(){super("twitter",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const cH=new rH,dH={components:{NextButton:ce},data(){return{isRequestingAuthorization:!1}},methods:{async requestAuthorization(){try{this.isRequestingAuthorization=!0;const e=await cH.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}catch{_e(this.$t("INBOX_MGMT.ADD.TWITTER.ERROR_MESSAGE"))}finally{this.isRequestingAuthorization=!1}}}},uH={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},pH={class:"login-init h-full text-center"};function mH(e,t,n,s,a,o){const l=z("NextButton");return p(),f("div",uH,[c("div",pH,[c("form",{onSubmit:t[0]||(t[0]=ze((...i)=>o.requestAuthorization&&o.requestAuthorization(...i),["prevent"]))},[v(l,{type:"submit",icon:"i-ri-twitter-x-fill",label:"Sign in with Twitter","is-loading":a.isRequestingAuthorization},null,8,["is-loading"])],32),c("p",null,E(e.$t("INBOX_MGMT.ADD.TWITTER.HELP")),1)])])}const hH=Fe(dH,[["render",mH],["__scopeId","data-v-6ed7a9bc"]]),fH=(e="")=>e?e.startsWith("http"):!0,gH={components:{PageHeader:da,NextButton:ce},setup(){return{v$:Lt()}},data(){return{channelName:"",webhookUrl:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:lt},webhookUrl:{shouldBeWebhookUrl:fH}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"api",webhook_url:this.webhookUrl}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{_e(this.$t("INBOX_MGMT.ADD.API_CHANNEL.API.ERROR_MESSAGE"))}}}},_H={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},vH={class:"flex-shrink-0 flex-grow-0"},bH=["placeholder"],EH={key:0,class:"message"},TH={class:"flex-shrink-0 flex-grow-0"},AH=["placeholder"],yH={class:"help-text"},SH={class:"w-full mt-4"};function IH(e,t,n,s,a,o){const l=z("PageHeader"),i=z("NextButton");return p(),f("div",_H,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.API_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.API_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=ze(r=>o.createChannel(),["prevent"]))},[c("div",vH,[c("label",{class:re({error:s.v$.channelName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,bH),[[mt,a.channelName]]),s.v$.channelName.$error?(p(),f("span",EH,E(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.ERROR")),1)):O("",!0)],2)]),c("div",TH,[c("label",{class:re({error:s.v$.webhookUrl.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.webhookUrl=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.webhookUrl.$touch&&s.v$.webhookUrl.$touch(...r))},null,40,AH),[[mt,a.webhookUrl]])],2),c("p",yH,E(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.SUBTITLE")),1)]),c("div",SH,[v(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.API_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const CH=Fe(gH,[["render",IH]]),xH={components:{PageHeader:da,NextButton:ce},setup(){return{v$:Lt()}},data(){return{channelName:"",email:"",alertMessage:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:lt},email:{required:lt,email:Zl}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"email",email:this.email}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.API.ERROR_MESSAGE"),_e(this.alertMessage)}}}},NH={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},OH={class:"flex-shrink-0 flex-grow-0"},wH=["placeholder"],RH={key:0,class:"message"},$H={class:"flex-shrink-0 flex-grow-0 mb-4"},MH=["placeholder"],kH={class:"help-text"},LH={class:"w-full mt-4"};function DH(e,t,n,s,a,o){const l=z("PageHeader"),i=z("NextButton");return p(),f("div",NH,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=ze(r=>o.createChannel(),["prevent"]))},[c("div",OH,[c("label",{class:re({error:s.v$.channelName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,wH),[[mt,a.channelName]]),s.v$.channelName.$error?(p(),f("span",RH,E(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.ERROR")),1)):O("",!0)],2)]),c("div",$H,[c("label",{class:re({error:s.v$.email.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.email=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.email.$touch&&s.v$.email.$touch(...r))},null,40,MH),[[mt,a.email]]),c("p",kH,E(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.SUBTITLE")),1)],2)]),c("div",LH,[v(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const PH=Fe(xH,[["render",DH]]);let BH=class extends tl{constructor(){super("microsoft",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}};const py=new BH;class FH extends tl{constructor(){super("google",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const my=new FH,UH={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},hy={__name:"OAuthChannel",props:{provider:{type:String,required:!0,validate:e=>["microsoft","google"].includes(e)},title:{type:String,required:!0},description:{type:String,required:!0},submitButtonText:{type:String,required:!0},errorMessage:{type:String,required:!0}},setup(e){const t=e,n=F(!1),s=C(()=>t.provider==="microsoft"?py:my);async function a(){try{n.value=!0;const o=await s.value.generateAuthorization(),{data:{url:l}}=o;window.location.href=l}catch{_e(t.errorMessage)}finally{n.value=!1}}return(o,l)=>(p(),f("div",UH,[v(da,{"header-title":e.title,"header-content":e.description},null,8,["header-title","header-content"]),c("form",{class:"mt-6",onSubmit:ze(a,["prevent"])},[v(ce,{"is-loading":n.value,type:"submit",solid:"",blue:"",label:e.submitButtonText},null,8,["is-loading","label"])],32)]))}},GH=Object.assign({name:"MicrosoftOAuthChannel"},{__name:"Microsoft",setup(e){return(t,n)=>(p(),V(hy,{provider:"microsoft",title:t.$t("INBOX_MGMT.ADD.MICROSOFT.TITLE"),description:t.$t("INBOX_MGMT.ADD.MICROSOFT.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.MICROSOFT.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"]))}}),VH=Object.assign({name:"GoogleOAuthChannel"},{__name:"Google",setup(e){return(t,n)=>(p(),V(hy,{provider:"google",title:t.$t("INBOX_MGMT.ADD.GOOGLE.TITLE"),description:t.$t("INBOX_MGMT.ADD.GOOGLE.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.GOOGLE.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"]))}}),HH={props:{title:{type:String,required:!0},src:{type:String,required:!0},isComingSoon:{type:Boolean,default:!1}}},WH={class:"relative bg-n-background cursor-pointer flex flex-col justify-end transition-all duration-200 ease-in -m-px py-4 px-0 items-center border border-solid border-n-weak hover:border-n-brand hover:shadow-md hover:z-50 disabled:opacity-60"},KH=["src","alt"],zH={class:"text-n-slate-12 text-base text-center capitalize"},jH={key:0,class:"absolute inset-0 flex items-center justify-center backdrop-blur-[2px] rounded-md bg-gradient-to-br from-n-background/90 via-n-background/70 to-n-background/95"},YH={class:"text-n-slate-12 font-medium text-base"};function XH(e,t,n,s,a,o){return p(),f("button",WH,[c("img",{src:n.src,alt:n.title,draggable:"false",class:"w-1/2 my-4 mx-auto"},null,8,KH),c("h3",zH,E(n.title),1),n.isComingSoon?(p(),f("div",jH,[c("span",YH,E(e.$t("CHANNEL_SELECTOR.COMING_SOON"))+"  ",1)])):O("",!0)])}const fy=Fe(HH,[["render",XH],["__scopeId","data-v-ca82f849"]]),qH={key:0,class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},ZH={class:"grid max-w-3xl grid-cols-4 mx-0 mt-6"},QH={__name:"Email",setup(e){const t=F(""),n=Nn(),{t:s}=Pe(),a=n["globalConfig/get"],o=n["globalConfig/isAChatwootInstance"],l=C(()=>[{title:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT"),isEnabled:!!a.value.azureAppId,key:"microsoft",src:"/assets/images/dashboard/channels/microsoft.png"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE"),isEnabled:!!window.chatwootConfig.googleOAuthClientId,key:"google",src:"/assets/images/dashboard/channels/google.png"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS"),isEnabled:!0,key:"other_provider",src:"/assets/images/dashboard/channels/email.png"}].filter(r=>o.value?!0:r.isEnabled));function i(r){r.isEnabled&&(t.value=r.key)}return(r,d)=>t.value?t.value==="microsoft"?(p(),V(GH,{key:1})):t.value==="google"?(p(),V(VH,{key:2})):t.value==="other_provider"?(p(),V(PH,{key:3})):O("",!0):(p(),f("div",qH,[v(da,{class:"max-w-4xl","header-title":r.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.TITLE"),"header-content":r.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.DESCRIPTION")},null,8,["header-title","header-content"]),c("div",ZH,[(p(!0),f(fe,null,Ae(l.value,u=>(p(),V(fy,{key:u.key,class:re({inactive:!u.isEnabled}),title:u.title,src:u.src,onClick:()=>i(u)},null,8,["class","title","src","onClick"]))),128))])]))}},JH=(e="")=>e.startsWith("+"),eW={components:{NextButton:ce},setup(){return{v$:Lt()}},data(){return{accountId:"",apiKey:"",apiSecret:"",applicationId:"",inboxName:"",phoneNumber:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:lt},phoneNumber:{required:lt,shouldStartWithPlusSign:JH},apiKey:{required:lt},apiSecret:{required:lt},applicationId:{required:lt},accountId:{required:lt}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"sms",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey,api_secret:this.apiSecret,application_id:this.applicationId,account_id:this.accountId}}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{_e(this.$t("INBOX_MGMT.ADD.SMS.API.ERROR_MESSAGE"))}}}},tW={class:"flex-shrink-0 flex-grow-0"},nW=["placeholder"],sW={key:0,class:"message"},aW={class:"flex-shrink-0 flex-grow-0"},oW=["placeholder"],lW={key:0,class:"message"},iW={class:"flex-shrink-0 flex-grow-0"},rW=["placeholder"],cW={key:0,class:"message"},dW={class:"flex-shrink-0 flex-grow-0"},uW=["placeholder"],pW={key:0,class:"message"},mW={class:"flex-shrink-0 flex-grow-0"},hW=["placeholder"],fW={key:0,class:"message"},gW={class:"flex-shrink-0 flex-grow-0"},_W=["placeholder"],vW={key:0,class:"message"},bW={class:"w-full mt-4"};function EW(e,t,n,s,a,o){const l=z("NextButton");return p(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[12]||(t[12]=ze(i=>o.createChannel(),["prevent"]))},[c("div",tW,[c("label",{class:re({error:s.v$.inboxName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.inboxName=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...i)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...i))},null,40,nW),[[mt,a.inboxName]]),s.v$.inboxName.$error?(p(),f("span",sW,E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.ERROR")),1)):O("",!0)],2)]),c("div",aW,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>a.phoneNumber=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...i)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...i))},null,40,oW),[[mt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),f("span",lW,E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.ERROR")),1)):O("",!0)],2)]),c("div",iW,[c("label",{class:re({error:s.v$.accountId.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>a.accountId=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...i)=>s.v$.accountId.$touch&&s.v$.accountId.$touch(...i))},null,40,rW),[[mt,a.accountId]]),s.v$.accountId.$error?(p(),f("span",cW,E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.ERROR")),1)):O("",!0)],2)]),c("div",dW,[c("label",{class:re({error:s.v$.applicationId.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>a.applicationId=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...i)=>s.v$.applicationId.$touch&&s.v$.applicationId.$touch(...i))},null,40,uW),[[mt,a.applicationId]]),s.v$.applicationId.$error?(p(),f("span",pW,E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.ERROR")),1)):O("",!0)],2)]),c("div",mW,[c("label",{class:re({error:s.v$.apiKey.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>a.apiKey=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...i)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...i))},null,40,hW),[[mt,a.apiKey]]),s.v$.apiKey.$error?(p(),f("span",fW,E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.ERROR")),1)):O("",!0)],2)]),c("div",gW,[c("label",{class:re({error:s.v$.apiSecret.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>a.apiSecret=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...i)=>s.v$.apiSecret.$touch&&s.v$.apiSecret.$touch(...i))},null,40,_W),[[mt,a.apiSecret]]),s.v$.apiSecret.$error?(p(),f("span",vW,E(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.ERROR")),1)):O("",!0)],2)]),c("div",bW,[v(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const TW=Fe(eW,[["render",EW]]),AW={components:{NextButton:ce},props:{type:{type:String,required:!0}},setup(){return{v$:Lt()}},data(){return{accountSID:"",apiKeySID:"",authToken:"",medium:this.type,channelName:"",messagingServiceSID:"",useMessagingService:!1,useAPIKey:!1,phoneNumber:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"}),authTokeni18nKey(){return this.useAPIKey?"API_KEY_SECRET":"AUTH_TOKEN"}},validations(){let e={channelName:{required:lt},authToken:{required:lt},accountSID:{required:lt},medium:{required:lt}};return this.phoneNumber?e={...e,phoneNumber:{required:lt,isPhoneE164OrEmpty:ug},messagingServiceSID:{}}:e={...e,messagingServiceSID:{required:lt},phoneNumber:{}},this.useAPIKey&&(e={...e,apiKeySID:{required:lt}}),e},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createTwilioChannel",{twilio_channel:{name:this.channelName,medium:this.medium,account_sid:this.accountSID,api_key_sid:this.apiKeySID,auth_token:this.authToken,messaging_service_sid:this.messagingServiceSID,phone_number:this.messagingServiceSID?null:`+${this.phoneNumber.replace(/\D/g,"")}`}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){const t=Ju(e)||this.$t("INBOX_MGMT.ADD.TWILIO.API.ERROR_MESSAGE");_e(t)}}}},yW={class:"flex-shrink-0 flex-grow-0"},SW=["placeholder"],IW={key:0,class:"message"},CW={class:"flex-shrink-0 flex-grow-0"},xW=["placeholder"],NW={key:0,class:"message"},OW={key:0,class:"flex-shrink-0 flex-grow-0"},wW=["placeholder"],RW={key:0,class:"message"},$W={class:"max-w-[65%] w-full messagingServiceHelptext"},MW={for:"useMessagingService"},kW={class:"flex-shrink-0 flex-grow-0"},LW=["placeholder"],DW={key:0,class:"message"},PW={class:"max-w-[65%] w-full messagingServiceHelptext"},BW={for:"useAPIKey"},FW={key:1,class:"flex-shrink-0 flex-grow-0"},UW=["placeholder"],GW={key:0,class:"message"},VW={class:"flex-shrink-0 flex-grow-0"},HW=["placeholder"],WW={key:0,class:"message"},KW={class:"w-full mt-4"};function zW(e,t,n,s,a,o){const l=z("NextButton");return p(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[14]||(t[14]=ze(i=>o.createChannel(),["prevent"]))},[c("div",yW,[c("label",{class:re({error:s.v$.channelName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.channelName=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...i)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...i))},null,40,SW),[[mt,a.channelName]]),s.v$.channelName.$error?(p(),f("span",IW,E(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.ERROR")),1)):O("",!0)],2)]),c("div",CW,[a.useMessagingService?(p(),f("label",{key:0,class:re({error:s.v$.messagingServiceSID.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>a.messagingServiceSID=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...i)=>s.v$.messagingServiceSID.$touch&&s.v$.messagingServiceSID.$touch(...i))},null,40,xW),[[mt,a.messagingServiceSID]]),s.v$.messagingServiceSID.$error?(p(),f("span",NW,E(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.ERROR")),1)):O("",!0)],2)):O("",!0)]),a.useMessagingService?O("",!0):(p(),f("div",OW,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>a.phoneNumber=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...i)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...i))},null,40,wW),[[mt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),f("span",RW,E(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.ERROR")),1)):O("",!0)],2)])),c("div",$W,[c("label",MW,[pe(c("input",{id:"useMessagingService","onUpdate:modelValue":t[6]||(t[6]=i=>a.useMessagingService=i),type:"checkbox",class:"checkbox"},null,512),[[Xt,a.useMessagingService]]),Ee(" "+E(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.USE_MESSAGING_SERVICE")),1)])]),c("div",kW,[c("label",{class:re({error:s.v$.accountSID.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>a.accountSID=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.PLACEHOLDER"),onBlur:t[8]||(t[8]=(...i)=>s.v$.accountSID.$touch&&s.v$.accountSID.$touch(...i))},null,40,LW),[[mt,a.accountSID]]),s.v$.accountSID.$error?(p(),f("span",DW,E(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.ERROR")),1)):O("",!0)],2)]),c("div",PW,[c("label",BW,[pe(c("input",{id:"useAPIKey","onUpdate:modelValue":t[9]||(t[9]=i=>a.useAPIKey=i),type:"checkbox",class:"checkbox"},null,512),[[Xt,a.useAPIKey]]),Ee(" "+E(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.USE_API_KEY")),1)])]),a.useAPIKey?(p(),f("div",FW,[c("label",{class:re({error:s.v$.apiKeySID.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>a.apiKeySID=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...i)=>s.v$.apiKeySID.$touch&&s.v$.apiKeySID.$touch(...i))},null,40,UW),[[mt,a.apiKeySID]]),s.v$.apiKeySID.$error?(p(),f("span",GW,E(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.ERROR")),1)):O("",!0)],2)])):O("",!0),c("div",VW,[c("label",{class:re({error:s.v$.authToken.$error})},[Ee(E(e.$t(`INBOX_MGMT.ADD.TWILIO.${o.authTokeni18nKey}.LABEL`))+" ",1),pe(c("input",{"onUpdate:modelValue":t[12]||(t[12]=i=>a.authToken=i),type:"text",placeholder:e.$t(`INBOX_MGMT.ADD.TWILIO.${o.authTokeni18nKey}.PLACEHOLDER`),onBlur:t[13]||(t[13]=(...i)=>s.v$.authToken.$touch&&s.v$.authToken.$touch(...i))},null,40,HW),[[mt,a.authToken]]),s.v$.authToken.$error?(p(),f("span",WW,E(e.$t(`INBOX_MGMT.ADD.TWILIO.${o.authTokeni18nKey}.ERROR`)),1)):O("",!0)],2)]),c("div",KW,[v(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TWILIO.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const gy=Fe(AW,[["render",zW],["__scopeId","data-v-42946ab0"]]),jW={components:{PageHeader:da,Twilio:gy,BandwidthSms:TW},data(){return{provider:"twilio"}}},YW={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},XW={class:"flex-shrink-0 flex-grow-0"},qW={value:"twilio"},ZW={value:"360dialog"};function QW(e,t,n,s,a,o){const l=z("PageHeader"),i=z("Twilio"),r=z("BandwidthSms");return p(),f("div",YW,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.SMS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.SMS.DESC")},null,8,["header-title","header-content"]),c("div",XW,[c("label",null,[Ee(E(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.provider=d)},[c("option",qW,E(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.TWILIO")),1),c("option",ZW,E(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.BANDWIDTH")),1)],512),[[zt,a.provider]])])]),a.provider==="twilio"?(p(),V(i,{key:0,type:"sms"})):(p(),V(r,{key:1}))])}const JW=Fe(jW,[["render",QW]]),eK={components:{NextButton:ce},setup(){return{v$:Lt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:lt},phoneNumber:{required:lt,isPhoneE164OrEmpty:ug},apiKey:{required:lt}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"whatsapp",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey}}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){_e(e.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},tK={class:"flex-shrink-0 flex-grow-0"},nK=["placeholder"],sK={key:0,class:"message"},aK={class:"flex-shrink-0 flex-grow-0"},oK=["placeholder"],lK={key:0,class:"message"},iK={class:"flex-shrink-0 flex-grow-0"},rK=["placeholder"],cK={key:0,class:"message"},dK={class:"w-full"};function uK(e,t,n,s,a,o){const l=z("NextButton");return p(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[6]||(t[6]=ze(i=>o.createChannel(),["prevent"]))},[c("div",tK,[c("label",{class:re({error:s.v$.inboxName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.inboxName=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...i)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...i))},null,40,nK),[[mt,a.inboxName]]),s.v$.inboxName.$error?(p(),f("span",sK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):O("",!0)],2)]),c("div",aK,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>a.phoneNumber=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...i)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...i))},null,40,oK),[[mt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),f("span",lK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):O("",!0)],2)]),c("div",iK,[c("label",{class:re({error:s.v$.apiKey.$error})},[c("span",null,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),pe(c("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>a.apiKey=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...i)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...i))},null,40,rK),[[mt,a.apiKey]]),s.v$.apiKey.$error?(p(),f("span",cK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):O("",!0)],2)]),c("div",dK,[v(l,{type:"submit",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON"),"is-loading":e.uiFlags.isCreating},null,8,["label","is-loading"])])],32)}const pK=Fe(eK,[["render",uK]]),mK={components:{NextButton:ce},setup(){return{v$:Lt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:"",phoneNumberId:"",businessAccountId:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:lt},phoneNumber:{required:lt,isPhoneE164OrEmpty:ug},apiKey:{required:lt},phoneNumberId:{required:lt,isNumber:bv},businessAccountId:{required:lt,isNumber:bv}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"whatsapp",phone_number:this.phoneNumber,provider:"whatsapp_cloud",provider_config:{api_key:this.apiKey,phone_number_id:this.phoneNumberId,business_account_id:this.businessAccountId}}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){_e(e.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},hK={class:"flex-shrink-0 flex-grow-0"},fK=["placeholder"],gK={key:0,class:"message"},_K={class:"flex-shrink-0 flex-grow-0"},vK=["placeholder"],bK={key:0,class:"message"},EK={class:"flex-shrink-0 flex-grow-0"},TK=["placeholder"],AK={key:0,class:"message"},yK={class:"flex-shrink-0 flex-grow-0"},SK=["placeholder"],IK={key:0,class:"message"},CK={class:"flex-shrink-0 flex-grow-0"},xK=["placeholder"],NK={key:0,class:"message"},OK={class:"w-full mt-4"};function wK(e,t,n,s,a,o){const l=z("NextButton");return p(),f("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[10]||(t[10]=ze(i=>o.createChannel(),["prevent"]))},[c("div",hK,[c("label",{class:re({error:s.v$.inboxName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.inboxName=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...i)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...i))},null,40,fK),[[mt,a.inboxName]]),s.v$.inboxName.$error?(p(),f("span",gK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):O("",!0)],2)]),c("div",_K,[c("label",{class:re({error:s.v$.phoneNumber.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>a.phoneNumber=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...i)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...i))},null,40,vK),[[mt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),f("span",bK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):O("",!0)],2)]),c("div",EK,[c("label",{class:re({error:s.v$.phoneNumberId.$error})},[c("span",null,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.LABEL")),1),pe(c("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>a.phoneNumberId=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...i)=>s.v$.phoneNumberId.$touch&&s.v$.phoneNumberId.$touch(...i))},null,40,TK),[[mt,a.phoneNumberId]]),s.v$.phoneNumberId.$error?(p(),f("span",AK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.ERROR")),1)):O("",!0)],2)]),c("div",yK,[c("label",{class:re({error:s.v$.businessAccountId.$error})},[c("span",null,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.LABEL")),1),pe(c("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>a.businessAccountId=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...i)=>s.v$.businessAccountId.$touch&&s.v$.businessAccountId.$touch(...i))},null,40,SK),[[mt,a.businessAccountId]]),s.v$.businessAccountId.$error?(p(),f("span",IK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.ERROR")),1)):O("",!0)],2)]),c("div",CK,[c("label",{class:re({error:s.v$.apiKey.$error})},[c("span",null,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),pe(c("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>a.apiKey=i),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...i)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...i))},null,40,xK),[[mt,a.apiKey]]),s.v$.apiKey.$error?(p(),f("span",NK,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):O("",!0)],2)]),c("div",OK,[v(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const z1=Fe(mK,[["render",wK]]),RK=async()=>n_("https://connect.facebook.net/en_US/sdk.js",{async:!0,defer:!0,crossOrigin:"anonymous"}),$K=(e,t)=>{const n=t||"v22.0";return new Promise(s=>{const a=()=>{window.FB.init({appId:e,autoLogAppEvents:!0,xfbml:!0,version:n}),s()};window.FB?a():window.fbAsyncInit=a})},_y=e=>e&&e.business_id&&e.waba_id,vy=e=>t=>{if(t.origin.endsWith("facebook.com"))try{let n;if(typeof t.data=="string")n=JSON.parse(t.data);else if(typeof t.data=="object"&&t.data!==null)n=t.data;else return;n.type==="WA_EMBEDDED_SIGNUP"&&e(n)}catch{}},by=e=>new Promise((t,n)=>{window.FB.login(s=>{s.authResponse&&s.authResponse.code?t(s.authResponse.code):s.error?n(new Error(s.error)):n(new Error("Login cancelled"))},{config_id:e,response_type:"code",override_default_response_type:!0,extras:{setup:{},featureType:"whatsapp_business_app_onboarding",sessionInfoVersion:"3"}})}),Ey=async(e,t)=>{const n=t||"v22.0";await RK(),await $K(e,n)},MK={class:"h-full"},kK={key:1},LK={class:"flex flex-col items-start mb-6 text-start"},DK={class:"flex justify-start mb-6"},PK={class:"flex justify-center items-center w-12 h-12 rounded-full bg-n-alpha-2"},BK=["alt"],FK={class:"mb-2 text-base font-medium text-n-slate-12"},UK={class:"text-sm leading-[24px] text-n-slate-12"},GK={class:"flex flex-col gap-2 mb-6"},VK={class:"flex flex-col gap-2 mb-6"},HK={class:"text-sm text-n-slate-11"},WK=["href"],KK={class:"flex mt-4"},zK="/assets/images/dashboard/channels/whatsapp.png",jK={__name:"WhatsappEmbeddedSignup",setup(e){const t=Pn(),n=En(),{t:s}=Pe(),a=F(!1),o=F(!1),l=F(""),i=F(!1),r=F(null),d=F(null),u=F(!1),m=C(()=>[{key:"EASY_SETUP",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.EASY_SETUP")},{key:"SECURE_AUTH",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.SECURE_AUTH")},{key:"AUTO_CONFIG",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.AUTO_CONFIG")}]),h=C(()=>u.value||o.value),_=w=>{o.value=!1,i.value=!1,u.value=!1;const D=w.error||w.message||s("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE");_e(D)},g=()=>{o.value=!1,i.value=!1,u.value=!1},T=w=>{o.value=!1,u.value=!1,w&&w.id?(_e(s("INBOX_MGMT.FINISH.MESSAGE")),n.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:w.id}})):(_e(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SUCCESS_FALLBACK")),n.replace({name:"settings_inbox_list"}))},S=async w=>{if(!i.value||!r.value){_({error:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_NOT_COMPLETED")});return}o.value=!0,l.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.PROCESSING");try{const D={code:r.value,business_id:w.business_id,waba_id:w.waba_id,phone_number_id:(w==null?void 0:w.phone_number_id)||""},H=await t.dispatch("inboxes/createWhatsAppEmbeddedSignup",D);r.value=null,T(H)}catch(D){const H=Ju(D)||s("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE");_({error:H})}},A=vy(async w=>{if(w.event==="FINISH"||w.event==="FINISH_WHATSAPP_BUSINESS_APP_ONBOARDING"){const D=w.data;_y(D)?(d.value=D,i.value&&r.value?await S(D):l.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.WAITING_FOR_AUTH")):_({error:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.INVALID_BUSINESS_DATA")})}else w.event==="CANCEL"?g():w.event==="error"&&_({error:w.error_message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SIGNUP_ERROR"),error_id:w.error_id,session_id:w.session_id})}),y=async()=>{var w,D,H;try{u.value=!0,l.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_PROCESSING"),await Ey((w=window.chatwootConfig)==null?void 0:w.whatsappAppId,(D=window.chatwootConfig)==null?void 0:D.whatsappApiVersion),a.value=!0;const B=await by((H=window.chatwootConfig)==null?void 0:H.whatsappConfigurationId);r.value=B,i.value=!0,l.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.WAITING_FOR_BUSINESS_INFO"),d.value&&S(d.value)}catch(B){B.message==="Login cancelled"?(o.value=!1,u.value=!1,_e(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED"))):_({error:B.message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SDK_LOAD_ERROR")})}},x=()=>{window.addEventListener("message",A)},$=()=>{window.removeEventListener("message",A)},N=()=>{x()};return pt(()=>{N()}),lo(()=>{$()}),(w,D)=>(p(),f("div",MK,[h.value?(p(),V(xr,{key:0,message:l.value},null,8,["message"])):(p(),f("div",kK,[c("div",LK,[c("div",DK,[c("div",PK,[c("img",{src:zK,alt:w.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"),class:"object-contain w-8 h-8",draggable:"false"},null,8,BK)])]),c("h3",FK,E(w.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.TITLE")),1),c("p",UK,E(w.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.DESC")),1)]),c("div",GK,[(p(!0),f(fe,null,Ae(m.value,H=>(p(),f("div",{key:H.key,class:"flex gap-2 items-center text-sm text-n-slate-11"},[v(Wt,{icon:"i-lucide-check",class:"text-n-slate-11 size-4"}),Ee(" "+E(H.text),1)]))),128))]),c("div",VK,[c("span",HK,[Ee(E(w.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.TEXT"))+" "+E(" ")+" ",1),c("a",{href:w.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.LINK_URL"),target:"_blank",rel:"noopener noreferrer",class:"underline text-primary"},E(w.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.LINK_TEXT")),9,WK)])]),c("div",KK,[v(ce,{disabled:u.value,"is-loading":u.value,faded:"",slate:"",class:"w-full",onClick:y},{default:K(()=>[Ee(E(w.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SUBMIT_BUTTON")),1)]),_:1},8,["disabled","is-loading"])])]))]))}},YK={class:"overflow-auto col-span-6 p-6 w-full h-full rounded-t-lg border border-b-0 border-n-weak bg-n-solid-1"},XK={key:0},qK={class:"mb-10 text-left"},ZK={class:"mb-2 text-lg font-medium text-slate-12"},QK={class:"text-sm leading-relaxed text-slate-11"},JK={class:"flex gap-6 justify-start"},ez=["onClick"],tz={class:"flex justify-start mb-5"},nz={class:"flex justify-center items-center rounded-full size-10 bg-n-alpha-2"},sz=["src","alt"],az={class:"text-start"},oz={class:"mb-1.5 text-sm font-medium text-slate-12"},lz={class:"text-sm text-slate-11"},iz={key:1},rz={class:"px-6 py-5 rounded-2xl border bg-n-solid-2 border-n-weak"},cz={__name:"Whatsapp",setup(e){const t=cn(),n=En(),{t:s}=Pe(),a=Pn(),o={WHATSAPP:"whatsapp",TWILIO:"twilio",WHATSAPP_EMBEDDED:"whatsapp_embedded",THREE_SIXTY_DIALOG:"360dialog"},l=C(()=>{var T;return((T=window.chatwootConfig)==null?void 0:T.whatsappAppId)&&window.chatwootConfig.whatsappAppId!=="none"}),i=C(()=>{const T=t.params.accountId;return a.getters["accounts/isFeatureEnabledonAccount"](T,Mt.WHATSAPP_EMBEDDED_SIGNUP)}),r=C(()=>t.query.provider),d=C(()=>!r.value),u=C(()=>!!r.value),m=C(()=>[{value:o.WHATSAPP,label:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"),description:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD_DESC"),icon:"/assets/images/dashboard/channels/whatsapp.png"},{value:o.TWILIO,label:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"),description:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO_DESC"),icon:"/assets/images/dashboard/channels/twilio.png"}]),h=T=>{n.push({name:t.name,params:t.params,query:{provider:T}})},_=T=>i.value?T===o.WHATSAPP&&l.value||T===o.WHATSAPP_EMBEDDED:!1,g=T=>i.value&&l.value?!1:T===o.WHATSAPP;return(T,S)=>(p(),f("div",YK,[d.value?(p(),f("div",XK,[c("div",qK,[c("h1",ZK,E(T.$t("INBOX_MGMT.ADD.WHATSAPP.SELECT_PROVIDER.TITLE")),1),c("p",QK,E(T.$t("INBOX_MGMT.ADD.WHATSAPP.SELECT_PROVIDER.DESCRIPTION")),1)]),c("div",JK,[(p(!0),f(fe,null,Ae(m.value,b=>(p(),f("div",{key:b.value,class:"gap-6 px-5 py-6 w-96 rounded-2xl border transition-all duration-200 cursor-pointer border-n-weak hover:bg-n-slate-3",onClick:A=>h(b.value)},[c("div",tz,[c("div",nz,[c("img",{src:b.icon,alt:b.label,class:"object-contain size-[26px]"},null,8,sz)])]),c("div",az,[c("h3",oz,E(b.label),1),c("p",lz,E(b.description),1)])],8,ez))),128))])])):u.value?(p(),f("div",iz,[c("div",rz,[_(r.value)?(p(),V(jK,{key:0})):g(r.value)?(p(),V(z1,{key:1})):r.value===o.TWILIO?(p(),V(gy,{key:2,type:"whatsapp"})):r.value===o.THREE_SIXTY_DIALOG?(p(),V(pK,{key:3})):(p(),V(z1,{key:4}))])])):O("",!0)]))}},dz={components:{PageHeader:da,NextButton:ce},setup(){return{v$:Lt()}},data(){return{channelName:"",lineChannelId:"",lineChannelSecret:"",lineChannelToken:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:lt},lineChannelId:{required:lt},lineChannelSecret:{required:lt},lineChannelToken:{required:lt}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"line",line_channel_id:this.lineChannelId,line_channel_secret:this.lineChannelSecret,line_channel_token:this.lineChannelToken}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{_e(this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API.ERROR_MESSAGE"))}}}},uz={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},pz={class:"flex-shrink-0 flex-grow-0"},mz=["placeholder"],hz={key:0,class:"message"},fz={class:"flex-shrink-0 flex-grow-0"},gz=["placeholder"],_z={class:"flex-shrink-0 flex-grow-0"},vz=["placeholder"],bz={class:"flex-shrink-0 flex-grow-0"},Ez=["placeholder"],Tz={class:"w-full mt-4"};function Az(e,t,n,s,a,o){const l=z("PageHeader"),i=z("NextButton");return p(),f("div",uz,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[8]||(t[8]=ze(r=>o.createChannel(),["prevent"]))},[c("div",pz,[c("label",{class:re({error:s.v$.channelName.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,mz),[[mt,a.channelName]]),s.v$.channelName.$error?(p(),f("span",hz,E(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.ERROR")),1)):O("",!0)],2)]),c("div",fz,[c("label",{class:re({error:s.v$.lineChannelId.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.lineChannelId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.lineChannelId.$touch&&s.v$.lineChannelId.$touch(...r))},null,40,gz),[[mt,a.lineChannelId]])],2)]),c("div",_z,[c("label",{class:re({error:s.v$.lineChannelSecret.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.lineChannelSecret=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.lineChannelSecret.$touch&&s.v$.lineChannelSecret.$touch(...r))},null,40,vz),[[mt,a.lineChannelSecret]])],2)]),c("div",bz,[c("label",{class:re({error:s.v$.lineChannelToken.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>a.lineChannelToken=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...r)=>s.v$.lineChannelToken.$touch&&s.v$.lineChannelToken.$touch(...r))},null,40,Ez),[[mt,a.lineChannelToken]])],2)]),c("div",Tz,[v(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const yz=Fe(dz,[["render",Az]]),Sz={components:{PageHeader:da,NextButton:ce},setup(){return{v$:Lt()}},data(){return{botToken:""}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},validations:{botToken:{required:lt}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{channel:{type:"telegram",bot_token:this.botToken}});Ns.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){_e(e.message||this.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.API.ERROR_MESSAGE"))}}}},Iz={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Cz={class:"flex-shrink-0 flex-grow-0"},xz=["placeholder"],Nz={class:"help-text"},Oz={class:"w-full mt-4"};function wz(e,t,n,s,a,o){const l=z("PageHeader"),i=z("NextButton");return p(),f("div",Iz,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[2]||(t[2]=ze(r=>o.createChannel(),["prevent"]))},[c("div",Cz,[c("label",{class:re({error:s.v$.botToken.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.botToken=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.botToken.$touch&&s.v$.botToken.$touch(...r))},null,40,xz),[[mt,a.botToken]])],2),c("p",Nz,E(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.SUBTITLE")),1)]),c("div",Oz,[v(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const Rz=Fe(Sz,[["render",wz]]);class $z extends tl{constructor(){super("instagram",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const Ty=new $z,Mz={setup(){const{accountId:e}=_s();return{accountId:e,v$:Lt()}},data(){return{isCreating:!1,hasError:!1,errorStateMessage:"",errorStateDescription:"",isRequestingAuthorization:!1}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("error_message");n&&(this.hasError=!0,t==="400"?(this.errorStateMessage=n,this.errorStateDescription=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH")):(this.errorStateMessage=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_MESSAGE"),this.errorStateDescription=n));const s=window.location.pathname;window.history.replaceState({},document.title,s)},methods:{async requestAuthorization(){this.isRequestingAuthorization=!0;const e=await Ty.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}}},kz={class:"border border-n-weak bg-n-background h-full p-6 w-full max-w-full md:w-3/4 md:max-w-[75%] flex-shrink-0 flex-grow-0"},Lz={class:"flex flex-col items-center justify-start h-full text-center"},Dz={key:0,class:"max-w-lg mx-auto text-center"},Pz={key:0},Bz={key:1,class:"flex flex-col items-center justify-center px-8 py-10 text-center shadow rounded-3xl outline outline-1 outline-n-weak"},Fz={class:"text-2xl font-medium"},Uz={class:"py-6 text-sm text-n-slate-11"},Gz=["disabled"],Vz={class:"text-base font-medium"},Hz={key:0,class:"ml-2"};function Wz(e,t,n,s,a,o){const l=_t("dompurify-html");return p(),f("div",kz,[c("div",Lz,[a.hasError?(p(),f("div",Dz,[c("h5",null,E(a.errorStateMessage),1),a.errorStateDescription?pe((p(),f("p",Pz,null,512)),[[l,a.errorStateDescription]]):O("",!0)])):(p(),f("div",Bz,[c("h6",Fz,E(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONNECT_YOUR_INSTAGRAM_PROFILE")),1),c("p",Uz,E(e.$t("INBOX_MGMT.ADD.INSTAGRAM.HELP")),1),c("button",{class:"flex items-center justify-center px-8 py-3.5 gap-2 text-white rounded-full bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] hover:shadow-lg transition-all duration-300 min-w-[240px] overflow-hidden",disabled:a.isRequestingAuthorization,onClick:t[0]||(t[0]=i=>o.requestAuthorization())},[t[2]||(t[2]=c("span",{class:"i-ri-instagram-line size-5"},null,-1)),c("span",Vz,E(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONTINUE_WITH_INSTAGRAM")),1),a.isRequestingAuthorization?(p(),f("span",Hz,t[1]||(t[1]=[c("svg",{class:"w-5 h-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):O("",!0)],8,Gz)]))])])}const Kz=Fe(Mz,[["render",Wz]]),zz={class:"overflow-auto col-span-6 p-6 w-full h-full rounded-t-lg border border-b-0 border-n-weak bg-n-solid-1"},jz={__name:"Voice",setup(e){const{t}=Pe(),n=yt(),s=En(),a=os({phoneNumber:"",accountSid:"",authToken:"",apiKeySid:"",apiKeySecret:"",twimlAppSid:""}),o=ke("inboxes/getUIFlags"),i=Lt({phoneNumber:{required:lt,isPhoneE164:sN},accountSid:{required:lt},authToken:{required:lt},apiKeySid:{required:lt},apiKeySecret:{required:lt},twimlAppSid:{required:lt}},a),r=C(()=>i.value.$invalid),d=C(()=>{var h,_,g,T,S,b;return{phoneNumber:(h=i.value.phoneNumber)!=null&&h.$error?t("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.ERROR"):"",accountSid:(_=i.value.accountSid)!=null&&_.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.REQUIRED"):"",authToken:(g=i.value.authToken)!=null&&g.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.REQUIRED"):"",apiKeySid:(T=i.value.apiKeySid)!=null&&T.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.REQUIRED"):"",apiKeySecret:(S=i.value.apiKeySecret)!=null&&S.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.REQUIRED"):"",twimlAppSid:(b=i.value.twimlAppSid)!=null&&b.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.TWIML_APP_SID.REQUIRED"):""}});function u(){const h={account_sid:a.accountSid,auth_token:a.authToken,api_key_sid:a.apiKeySid,api_key_secret:a.apiKeySecret};return a.twimlAppSid&&(h.outgoing_application_sid=a.twimlAppSid),h}async function m(){var _,g;if(await i.value.$validate())try{const T=await n.dispatch("inboxes/createVoiceChannel",{name:`Voice (${a.phoneNumber})`,voice:{phone_number:a.phoneNumber,provider:"twilio",provider_config:u()}});s.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:T.id}})}catch(T){_e(((g=(_=T.response)==null?void 0:_.data)==null?void 0:g.message)||t("INBOX_MGMT.ADD.VOICE.API.ERROR_MESSAGE"))}}return(h,_)=>{var g,T,S,b,A,y;return p(),f("div",zz,[v(da,{"header-title":I(t)("INBOX_MGMT.ADD.VOICE.TITLE"),"header-content":I(t)("INBOX_MGMT.ADD.VOICE.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col gap-4 flex-wrap mx-0",onSubmit:ze(m,["prevent"])},[v(ln,{modelValue:a.phoneNumber,"onUpdate:modelValue":_[0]||(_[0]=x=>a.phoneNumber=x),label:I(t)("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.LABEL"),placeholder:I(t)("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.PLACEHOLDER"),message:d.value.phoneNumber,"message-type":d.value.phoneNumber?"error":"info",onBlur:(g=I(i).phoneNumber)==null?void 0:g.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(ln,{modelValue:a.accountSid,"onUpdate:modelValue":_[1]||(_[1]=x=>a.accountSid=x),label:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.LABEL"),placeholder:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.PLACEHOLDER"),message:d.value.accountSid,"message-type":d.value.accountSid?"error":"info",onBlur:(T=I(i).accountSid)==null?void 0:T.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(ln,{modelValue:a.authToken,"onUpdate:modelValue":_[2]||(_[2]=x=>a.authToken=x),type:"password",label:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.LABEL"),placeholder:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.PLACEHOLDER"),message:d.value.authToken,"message-type":d.value.authToken?"error":"info",onBlur:(S=I(i).authToken)==null?void 0:S.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(ln,{modelValue:a.apiKeySid,"onUpdate:modelValue":_[3]||(_[3]=x=>a.apiKeySid=x),label:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.LABEL"),placeholder:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.PLACEHOLDER"),message:d.value.apiKeySid,"message-type":d.value.apiKeySid?"error":"info",onBlur:(b=I(i).apiKeySid)==null?void 0:b.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(ln,{modelValue:a.apiKeySecret,"onUpdate:modelValue":_[4]||(_[4]=x=>a.apiKeySecret=x),type:"password",label:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.LABEL"),placeholder:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.PLACEHOLDER"),message:d.value.apiKeySecret,"message-type":d.value.apiKeySecret?"error":"info",onBlur:(A=I(i).apiKeySecret)==null?void 0:A.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),v(ln,{modelValue:a.twimlAppSid,"onUpdate:modelValue":_[5]||(_[5]=x=>a.twimlAppSid=x),label:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.TWIML_APP_SID.LABEL"),placeholder:I(t)("INBOX_MGMT.ADD.VOICE.TWILIO.TWIML_APP_SID.PLACEHOLDER"),message:d.value.twimlAppSid,"message-type":d.value.twimlAppSid?"error":"info",onBlur:(y=I(i).twimlAppSid)==null?void 0:y.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),c("div",null,[v(ce,{"is-loading":I(o).isCreating,disabled:r.value,label:I(t)("INBOX_MGMT.ADD.VOICE.SUBMIT_BUTTON"),type:"submit"},null,8,["is-loading","disabled","label"])])],32)])}}},Yz={facebook:BV,website:iH,twitter:hH,api:CH,email:QH,sms:JW,whatsapp:cz,line:yz,telegram:Rz,instagram:Kz,voice:jz},Xz=el({name:"NewChannelView",props:{channelName:{type:String,required:!0}},render(){const e=Yz[this.channelName];return e?Wn(e):null}}),qz={components:{BackButton:ki},props:{headerTitle:{default:"",type:String},icon:{default:"",type:String},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},backButtonLabel:{type:String,default:""}},setup(){const{isAdmin:e}=io();return{isAdmin:e}},computed:{iconClass(){return`icon ${this.icon} header--icon`}}},Zz={class:"flex justify-between items-center h-20 min-h-[3.5rem] px-4 py-2 bg-n-background"},Qz={class:"flex items-center mb-0 text-2xl text-n-slate-12"},Jz={class:"text-xl font-medium text-n-slate-12"};function ej(e,t,n,s,a,o){const l=z("BackButton");return p(),f("div",Zz,[c("h1",Qz,[n.showBackButton?(p(),V(l,{key:0,"button-label":n.backButtonLabel,"back-url":n.backUrl,class:"ml-2 mr-4"},null,8,["button-label","back-url"])):O("",!0),at(e.$slots,"default"),c("span",Jz,E(n.headerTitle),1)])])}const tj=Fe(qz,[["render",ej]]),nj={class:"flex flex-1 flex-col m-0 bg-n-background overflow-auto"},sd={__name:"Wrapper",props:{headerTitle:{type:String,default:""},icon:{type:String,default:""},keepAlive:{type:Boolean,default:!0},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},fullWidth:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Pe(),s=C(()=>t.headerTitle||t.icon||t.showBackButton);return(a,o)=>{const l=z("router-view");return p(),f("div",nj,[c("div",{class:re(["mx-auto w-full flex flex-col flex-1",{"max-w-6xl":!e.fullWidth}])},[s.value?(p(),V(tj,{key:0,icon:e.icon,"header-title":I(n)(e.headerTitle),"show-back-button":e.showBackButton,"back-url":e.backUrl,class:re(["sticky top-0 z-20",{"max-w-6xl w-full mx-auto":e.fullWidth}])},null,8,["icon","header-title","show-back-button","back-url","class"])):O("",!0),v(l,{class:"px-5 flex-1 overflow-hidden"},{default:K(({Component:i})=>[e.keepAlive?(p(),V(Yc,{key:1},[(p(),V(xs(i),{key:a.$route.fullPath}))],1024)):(p(),V(xs(i),{key:a.$route.fullPath}))]),_:1})],2)])}}},sj={__name:"ChannelName",props:{channelType:{type:String,required:!0},medium:{type:String,default:""}},setup(e){const t=e,n=Nn(),{t:s}=Pe(),a=C(()=>n["globalConfig/get"].value),o={"Channel::FacebookPage":"MESSENGER","Channel::WebWidget":"WEB_WIDGET","Channel::TwitterProfile":"TWITTER_PROFILE","Channel::TwilioSms":"TWILIO_SMS","Channel::Whatsapp":"WHATSAPP","Channel::Sms":"SMS","Channel::Email":"EMAIL","Channel::Telegram":"TELEGRAM","Channel::Line":"LINE","Channel::Api":"API","Channel::Instagram":"INSTAGRAM","Channel::Voice":"VOICE"},l=()=>t.medium==="whatsapp"?s("INBOX_MGMT.CHANNELS.WHATSAPP"):s("INBOX_MGMT.CHANNELS.TWILIO_SMS"),i=C(()=>t.channelType==="Channel::Api"?a.value.apiChannelName||s("INBOX_MGMT.CHANNELS.API"):t.channelType==="Channel::TwilioSms"?l():s(`INBOX_MGMT.CHANNELS.${o[t.channelType]}`));return(r,d)=>(p(),f("span",null,E(i.value),1))}},aj={class:"min-w-full overflow-x-auto"},oj={class:"divide-y divide-n-weak flex-1 text-n-slate-12"},lj={class:"py-4 ltr:pr-4 rtl:pl-4"},ij={class:"flex items-center flex-row gap-4"},rj={key:0,class:"bg-n-alpha-3 rounded-full size-12 p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},cj={key:1,class:"size-12 flex justify-center items-center bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},dj={class:"block font-medium capitalize"},uj={class:"py-4"},pj={class:"flex gap-1 justify-end"},mj={__name:"Index",setup(e){const t=Nn(),n=yt(),{t:s}=Pe(),{isAdmin:a}=io(),o=F(!1),l=F({}),i=ke("inboxes/getInboxes"),r=C(()=>{var A;return(A=i.value)==null?void 0:A.slice().sort((y,x)=>y.name.localeCompare(x.name))}),d=C(()=>t["inboxes/getUIFlags"].value),u=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.YES")} ${l.value.name}`),m=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.NO")} ${l.value.name}`),h=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.MESSAGE")} ${l.value.name}?`),_=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{inboxName:l.value.name})}`),g=async({id:A})=>{try{await n.dispatch("inboxes/delete",A),_e(s("INBOX_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(s("INBOX_MGMT.DELETE.API.ERROR_MESSAGE"))}},T=()=>{o.value=!1,l.value={}},S=()=>{g(l.value),T()},b=A=>{o.value=!0,l.value=A};return(A,y)=>{const x=z("router-link"),$=z("woot-confirm-delete-modal"),N=_t("tooltip");return p(),V(ro,{"no-records-found":!r.value.length,"no-records-message":A.$t("INBOX_MGMT.LIST.404"),"is-loading":d.value.isFetching},{header:K(()=>[v(js,{title:A.$t("INBOX_MGMT.HEADER"),description:A.$t("INBOX_MGMT.DESCRIPTION"),"link-text":A.$t("INBOX_MGMT.LEARN_MORE"),"feature-name":"inboxes"},{actions:K(()=>[I(a)?(p(),V(x,{key:0,to:{name:"settings_inbox_new"}},{default:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:A.$t("SETTINGS.INBOXES.NEW_INBOX")},null,8,["label"])]),_:1})):O("",!0)]),_:1},8,["title","description","link-text"])]),body:K(()=>[c("table",aj,[c("tbody",oj,[(p(!0),f(fe,null,Ae(r.value,w=>(p(),f("tr",{key:w.id},[c("td",lj,[c("div",ij,[w.avatar_url?(p(),f("div",rj,[v(Ft,{src:w.avatar_url,name:w.name,size:30,"rounded-full":""},null,8,["src","name"])])):(p(),f("div",cj,[v(bg,{class:"size-5",inbox:w},null,8,["inbox"])])),c("div",null,[c("span",dj,E(w.name),1),v(sj,{"channel-type":w.channel_type,medium:w.medium},null,8,["channel-type","medium"])])])]),c("td",uj,[c("div",pj,[v(x,{to:{name:"settings_inbox_show",params:{inboxId:w.id}}},{default:K(()=>[I(a)?pe((p(),V(ce,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[N,A.$t("INBOX_MGMT.SETTINGS"),void 0,{top:!0}]]):O("",!0)]),_:2},1032,["to"]),I(a)?pe((p(),V(ce,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:D=>b(w)},null,8,["onClick"])),[[N,A.$t("INBOX_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):O("",!0)])])]))),128))])])]),default:K(()=>[o.value?(p(),V($,{key:0,show:o.value,"onUpdate:show":y[0]||(y[0]=w=>o.value=w),title:A.$t("INBOX_MGMT.DELETE.CONFIRM.TITLE"),message:h.value,"confirm-text":u.value,"reject-text":m.value,"confirm-value":l.value.name,"confirm-place-holder-text":_.value,onOnConfirm:S,onOnClose:T},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("",!0)]),_:1},8,["no-records-found","no-records-message","is-loading"])}}},hj={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},fj={class:"border-b border-solid border-n-weak/60"},gj={class:"max-w-6xl w-full mx-auto pt-4 pb-0 px-8"},_j={class:"text-2xl text-n-slate-12 mb-1 font-medium"},vj={key:0,class:"w-full text-n-slate-11 text-sm mb-2"};function bj(e,t,n,s,a,o){return p(),f("div",fj,[c("div",gj,[c("h2",_j,E(n.headerTitle),1),n.headerContent?(p(),f("p",vj,E(n.headerContent),1)):O("",!0),at(e.$slots,"default")])])}const Ej=Fe(hj,[["render",bj]]),Tj={props:{title:{type:String,default:""},subTitle:{type:String,default:""},showBorder:{type:Boolean,default:!0},note:{type:String,default:""}}},Aj={class:"grid grid-cols-1 lg:grid-cols-8 gap-6"},yj={class:"col-span-2"},Sj={key:0,class:"text-base text-n-brand mb-0 font-medium"},Ij={class:"text-sm mb-2 text-n-slate-11 leading-5 tracking-normal mt-2"},Cj={key:1},xj={class:"font-semibold"},Nj={class:"col-span-6 xl:col-span-5"};function Oj(e,t,n,s,a,o){return p(),f("div",{class:re(["ml-0 mr-0 py-8 w-full",{"border-b border-solid border-n-weak/60 dark:border-n-weak":n.showBorder}])},[c("div",Aj,[c("div",yj,[n.title?(p(),f("p",Sj,E(n.title),1)):O("",!0),c("p",Ij,[n.subTitle?at(e.$slots,"subTitle",{key:0},()=>[Ee(E(n.subTitle),1)]):O("",!0)]),n.note?(p(),f("p",Cj,[c("span",xj,E(e.$t("INBOX_MGMT.NOTE")),1),Ee(" "+E(n.note),1)])):O("",!0)]),c("div",Nj,[at(e.$slots,"default")])])],2)}const Bi=Fe(Tj,[["render",Oj]]),Vc={REPLY_TO:"replyTo",REPLY_TO_OUTGOING:"replyToOutgoing"},wj={[Vc.REPLY_TO]:[Ut.FB,Ut.WEB,Ut.TWITTER,Ut.WHATSAPP,Ut.TELEGRAM,Ut.API],[Vc.REPLY_TO_OUTGOING]:[Ut.WEB,Ut.TWITTER,Ut.WHATSAPP,Ut.TELEGRAM,Ut.API]},Mr={computed:{channelType(){return this.inbox.channel_type},whatsAppAPIProvider(){return this.inbox.provider||""},isAMicrosoftInbox(){return this.isAnEmailChannel&&this.inbox.provider==="microsoft"},isAGoogleInbox(){return this.isAnEmailChannel&&this.inbox.provider==="google"},isAPIInbox(){return this.channelType===Ut.API},isATwitterInbox(){return this.channelType===Ut.TWITTER},isAFacebookInbox(){return this.channelType===Ut.FB},isAWebWidgetInbox(){return this.channelType===Ut.WEB},isATwilioChannel(){return this.channelType===Ut.TWILIO},isALineChannel(){return this.channelType===Ut.LINE},isAnEmailChannel(){return this.channelType===Ut.EMAIL},isATelegramChannel(){return this.channelType===Ut.TELEGRAM},isAVoiceChannel(){return this.channelType===Ut.VOICE},isATwilioSMSChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="sms"},isASmsInbox(){return this.channelType===Ut.SMS||this.isATwilioSMSChannel},isATwilioWhatsAppChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="whatsapp"},isAWhatsAppCloudChannel(){return this.channelType===Ut.WHATSAPP&&this.whatsAppAPIProvider==="whatsapp_cloud"},is360DialogWhatsAppChannel(){return this.channelType===Ut.WHATSAPP&&this.whatsAppAPIProvider==="default"},chatAdditionalAttributes(){const{additional_attributes:e}=this.chat||{};return e||{}},isTwitterInboxTweet(){return this.chatAdditionalAttributes.type==="tweet"},twilioBadge(){return`${this.isATwilioSMSChannel?"sms":"whatsapp"}`},twitterBadge(){return`${this.isTwitterInboxTweet?"twitter-tweet":"twitter-dm"}`},facebookBadge(){return this.chatAdditionalAttributes.type||"facebook"},inboxBadge(){let e="";return this.isATwitterInbox?e=this.twitterBadge:this.isAFacebookInbox?e=this.facebookBadge:this.isATwilioChannel?e=this.twilioBadge:this.isAWhatsAppChannel&&(e="whatsapp"),e||this.channelType},isAWhatsAppChannel(){return this.channelType===Ut.WHATSAPP||this.isATwilioWhatsAppChannel},isAnInstagramChannel(){return this.channelType===Ut.INSTAGRAM}},methods:{inboxHasFeature(e){var t;return((t=wj[e])==null?void 0:t.includes(this.channelType))??!1}}},Ep={__name:"Banner",props:{color:{type:String,default:"slate",validator:e=>["blue","ruby","amber","slate","teal"].includes(e)},actionLabel:{type:String,default:null}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>({slate:"bg-n-slate-3 border-n-slate-4 text-n-slate-11",amber:"bg-n-amber-3 border-n-amber-4 text-n-amber-11",teal:"bg-n-teal-3 border-n-teal-4 text-n-teal-11",ruby:"bg-n-ruby-3 border-n-ruby-4 text-n-ruby-11",blue:"bg-n-blue-3 border-n-blue-4 text-n-blue-11"})[n.color]),o=C(()=>({slate:"bg-n-slate-4 hover:bg-n-slate-5 text-n-slate-11",amber:"bg-n-amber-4 hover:bg-n-amber-5 text-n-amber-11",teal:"bg-n-teal-4 hover:bg-n-teal-5 text-n-teal-11",ruby:"bg-n-ruby-4 hover:bg-n-ruby-5 text-n-ruby-11",blue:"bg-n-blue-4 hover:bg-n-blue-5 text-n-blue-11"})[n.color]),l=()=>{s("action")};return(i,r)=>(p(),f("div",{class:re(["text-sm rounded-xl flex items-center justify-between gap-2 border",[a.value,{"py-2 px-3":!e.actionLabel,"pl-3 p-2":e.actionLabel}]])},[c("div",null,[at(i.$slots,"default")]),c("div",null,[e.actionLabel?(p(),f("button",{key:0,class:re(["px-3 py-1 w-auto grid place-content-center rounded-lg",o.value]),onClick:l},E(e.actionLabel),3)):O("",!0)])],2))}},ad={__name:"InboxReconnectionRequired",emits:["reauthorize"],setup(e,{emit:t}){const n=t;return(s,a)=>(p(),V(Ep,{color:"ruby","action-label":s.$t("INBOX_MGMT.CLICK_TO_RECONNECT"),onAction:a[0]||(a[0]=o=>n("reauthorize"))},{default:K(()=>[Ee(E(s.$t("INBOX_MGMT.RECONNECTION_REQUIRED")),1)]),_:1},8,["action-label"]))}},Rj={components:{InboxReconnectionRequired:ad},props:{inbox:{type:Object,required:!0}},computed:{inboxId(){return this.inbox.id}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return n_("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?_e(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(qc(e),_e(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},tryFBlogin(){FB.login(e=>{e.status==="connected"?this.reauthorizeFBPage(e.authResponse.accessToken):e.status==="not_authorized"?_e(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")):_e(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"))},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages",auth_type:"reauthorize"})},async reauthorizeFBPage(e){try{await this.$store.dispatch("inboxes/reauthorizeFacebookPage",{omniauthToken:e,inboxId:this.inboxId}),_e(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_SUCCESS"))}catch{_e(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_ERROR"))}}}};function $j(e,t,n,s,a,o){const l=z("InboxReconnectionRequired");return p(),V(l,{class:"mx-8 mt-5",onReauthorize:o.startLogin},null,8,["onReauthorize"])}const Mj=Fe(Rj,[["render",$j],["__scopeId","data-v-f74239b8"]]),kj={__name:"Reauthorize",setup(e){const{t}=Pe(),n=F(!1);async function s(){try{n.value=!0;const a=await Ty.generateAuthorization(),{data:{url:o}}=a;window.location.href=o}catch{_e(t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH"))}finally{n.value=!1}}return(a,o)=>(p(),V(ad,{class:"mx-8 mt-5",onReauthorize:s}))}},Lj={class:"flex items-center gap-2"},Ay={__name:"DuplicateInboxBanner",props:{content:{type:String,default:""}},setup(e){return(t,n)=>(p(),V(Ep,{color:"amber"},{default:K(()=>[c("div",Lj,[v(Wt,{icon:"i-lucide-info",class:"flex-shrink-0 size-4"}),c("span",null,E(e.content),1)])]),_:1}))}},Dj={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Pe(),s=F(!1);async function a(){try{s.value=!0;const o=await py.generateAuthorization({email:t.inbox.email}),{data:{url:l}}=o;window.location.href=l}catch{_e(n("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE"))}finally{s.value=!1}}return(o,l)=>(p(),V(ad,{class:"mx-8 mt-5",onReauthorize:a}))}},Pj={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Pe(),s=F(!1),a=C(()=>t.inbox.imap_login&&t.inbox.imap_enabled?t.inbox.imap_login:t.inbox.email);async function o(){try{s.value=!0;const l=await my.generateAuthorization({email:a.value}),{data:{url:i}}=l;window.location.href=i}catch{_e(n("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE"))}finally{s.value=!1}}return(l,i)=>(p(),V(ad,{class:"mx-8 mt-5",onReauthorize:o}))}},yy={__name:"Reauthorize",props:{inbox:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,{t:s}=Pe(),a=F(!1),o=F(!0),l=C(()=>window.chatwootConfig.whatsappAppId),i=C(()=>window.chatwootConfig.whatsappConfigurationId),r=async _=>{a.value=!0;try{const g=await TN.reauthorizeWhatsApp({inboxId:n.inbox.id,..._});g.data.success?_e(s("INBOX.REAUTHORIZE.SUCCESS")):_e(g.data.message||s("INBOX.REAUTHORIZE.ERROR"))}catch(g){_e(g.message||s("INBOX.REAUTHORIZE.ERROR"))}finally{a.value=!1}},d=async(_,g)=>{if(!(!_||typeof _!="object"))if(_.event==="FINISH"){const T=_.data;_y(T)&&T.phone_number_id?await r({code:g,business_id:T.business_id,waba_id:T.waba_id,phone_number_id:T.phone_number_id}):_e(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.INVALID_BUSINESS_DATA"))}else _.event==="CANCEL"?(a.value=!1,_e(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED"))):_.event==="error"&&(a.value=!1,_e(_.error_message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SIGNUP_ERROR")))},u=_=>{const g=vy(T=>d(T,_));window.addEventListener("message",g)},m=async()=>{if(!l.value)throw new Error("WhatsApp App ID is required");if(!i.value)throw new Error("WhatsApp Configuration ID is required");try{const _=await by(i.value),g=n.inbox.provider_config;g&&g.business_account_id&&g.phone_number_id?await r({code:_,business_id:g.business_account_id,waba_id:g.business_account_id,phone_number_id:g.phone_number_id}):u(_)}catch(_){throw _.message==="Login cancelled"?_e(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED")):_e(_.message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_NOT_COMPLETED")),_}},h=async()=>{if(o.value){_e(s("INBOX.REAUTHORIZE.LOADING_FACEBOOK"));return}a.value=!0;try{await m()}catch(_){_e(_.message||s("INBOX.REAUTHORIZE.CONFIGURATION_ERROR"))}finally{(!window.FB||!window.FB.getLoginStatus)&&(a.value=!1)}};return pt(async()=>{var _;try{if(!l.value){_e(s("INBOX.REAUTHORIZE.WHATSAPP_APP_ID_MISSING"));return}if(!i.value){_e(s("INBOX.REAUTHORIZE.WHATSAPP_CONFIG_ID_MISSING"));return}await Ey(l.value,(_=window.chatwootConfig)==null?void 0:_.whatsappApiVersion)}catch{_e(s("INBOX.REAUTHORIZE.FACEBOOK_LOAD_ERROR"))}finally{o.value=!1}}),t({requestAuthorization:h}),(_,g)=>(p(),V(ad,{class:"mx-8 mt-5","is-loading":a.value,onReauthorize:h},null,8,["is-loading"]))}};var Sy={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function j1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j1(Object(n),!0).forEach(function(s){Bj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ru(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ru=function(t){return typeof t}:ru=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function Bj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(){return ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ao.apply(this,arguments)}function Fj(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Uj(e,t){if(e==null)return{};var n=Fj(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Gj(e){return Vj(e)||Hj(e)||Wj(e)||Kj()}function Vj(e){if(Array.isArray(e))return $f(e)}function Hj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wj(e,t){if(e){if(typeof e=="string")return $f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $f(e,t)}}function $f(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Kj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zj="1.14.0";function cl(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var _l=cl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),od=cl(/Edge/i),Y1=cl(/firefox/i),Ec=cl(/safari/i)&&!cl(/chrome/i)&&!cl(/android/i),Iy=cl(/iP(ad|od|hone)/i),jj=cl(/chrome/i)&&cl(/android/i),Cy={capture:!1,passive:!1};function Cn(e,t,n){e.addEventListener(t,n,!_l&&Cy)}function An(e,t,n){e.removeEventListener(t,n,!_l&&Cy)}function Bu(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Yj(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ho(e,t,n,s){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Bu(e,t):Bu(e,t))||s&&e===n)return e;if(e===n)break}while(e=Yj(e))}return null}var X1=/\s+/g;function gs(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var s=(" "+e.className+" ").replace(X1," ").replace(" "+t+" "," ");e.className=(s+(n?" "+t:"")).replace(X1," ")}}function Vt(e,t,n){var s=e&&e.style;if(s){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in s)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),s[t]=n+(typeof n=="string"?"":"px")}}function Si(e,t){var n="";if(typeof e=="string")n=e;else do{var s=Vt(e,"transform");s&&s!=="none"&&(n=s+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function xy(e,t,n){if(e){var s=e.getElementsByTagName(t),a=0,o=s.length;if(n)for(;a<o;a++)n(s[a],a);return s}return[]}function jo(){var e=document.scrollingElement;return e||document.documentElement}function ps(e,t,n,s,a){if(!(!e.getBoundingClientRect&&e!==window)){var o,l,i,r,d,u,m;if(e!==window&&e.parentNode&&e!==jo()?(o=e.getBoundingClientRect(),l=o.top,i=o.left,r=o.bottom,d=o.right,u=o.height,m=o.width):(l=0,i=0,r=window.innerHeight,d=window.innerWidth,u=window.innerHeight,m=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!_l))do if(a&&a.getBoundingClientRect&&(Vt(a,"transform")!=="none"||n&&Vt(a,"position")!=="static")){var h=a.getBoundingClientRect();l-=h.top+parseInt(Vt(a,"border-top-width")),i-=h.left+parseInt(Vt(a,"border-left-width")),r=l+o.height,d=i+o.width;break}while(a=a.parentNode);if(s&&e!==window){var _=Si(a||e),g=_&&_.a,T=_&&_.d;_&&(l/=T,i/=g,m/=g,u/=T,r=l+u,d=i+m)}return{top:l,left:i,bottom:r,right:d,width:m,height:u}}}function q1(e,t,n){for(var s=Pl(e,!0),a=ps(e)[t];s;){var o=ps(s)[n],l=void 0;if(l=a>=o,!l)return s;if(s===jo())break;s=Pl(s,!1)}return!1}function Tr(e,t,n,s){for(var a=0,o=0,l=e.children;o<l.length;){if(l[o].style.display!=="none"&&l[o]!==Jt.ghost&&(s||l[o]!==Jt.dragged)&&ho(l[o],n.draggable,e,!1)){if(a===t)return l[o];a++}o++}return null}function s_(e,t){for(var n=e.lastElementChild;n&&(n===Jt.ghost||Vt(n,"display")==="none"||t&&!Bu(n,t));)n=n.previousElementSibling;return n||null}function Ss(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Jt.clone&&(!t||Bu(e,t))&&n++;return n}function Z1(e){var t=0,n=0,s=jo();if(e)do{var a=Si(e),o=a.a,l=a.d;t+=e.scrollLeft*o,n+=e.scrollTop*l}while(e!==s&&(e=e.parentNode));return[t,n]}function Xj(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var s in t)if(t.hasOwnProperty(s)&&t[s]===e[n][s])return Number(n)}return-1}function Pl(e,t){if(!e||!e.getBoundingClientRect)return jo();var n=e,s=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=Vt(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return jo();if(s||t)return n;s=!0}}while(n=n.parentNode);return jo()}function qj(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function ch(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Tc;function Ny(e,t){return function(){if(!Tc){var n=arguments,s=this;n.length===1?e.call(s,n[0]):e.apply(s,n),Tc=setTimeout(function(){Tc=void 0},t)}}}function Zj(){clearTimeout(Tc),Tc=void 0}function Oy(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function a_(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Q1(e,t){Vt(e,"position","absolute"),Vt(e,"top",t.top),Vt(e,"left",t.left),Vt(e,"width",t.width),Vt(e,"height",t.height)}function dh(e){Vt(e,"position",""),Vt(e,"top",""),Vt(e,"left",""),Vt(e,"width",""),Vt(e,"height","")}var la="Sortable"+new Date().getTime();function Qj(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(a){if(!(Vt(a,"display")==="none"||a===Jt.ghost)){e.push({target:a,rect:ps(a)});var o=Qo({},e[e.length-1].rect);if(a.thisAnimationDuration){var l=Si(a,!0);l&&(o.top-=l.f,o.left-=l.e)}a.fromRect=o}})}},addAnimationState:function(s){e.push(s)},removeAnimationState:function(s){e.splice(Xj(e,{target:s}),1)},animateAll:function(s){var a=this;if(!this.options.animation){clearTimeout(t),typeof s=="function"&&s();return}var o=!1,l=0;e.forEach(function(i){var r=0,d=i.target,u=d.fromRect,m=ps(d),h=d.prevFromRect,_=d.prevToRect,g=i.rect,T=Si(d,!0);T&&(m.top-=T.f,m.left-=T.e),d.toRect=m,d.thisAnimationDuration&&ch(h,m)&&!ch(u,m)&&(g.top-m.top)/(g.left-m.left)===(u.top-m.top)/(u.left-m.left)&&(r=eY(g,h,_,a.options)),ch(m,u)||(d.prevFromRect=u,d.prevToRect=m,r||(r=a.options.animation),a.animate(d,g,m,r)),r&&(o=!0,l=Math.max(l,r),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},r),d.thisAnimationDuration=r)}),clearTimeout(t),o?t=setTimeout(function(){typeof s=="function"&&s()},l):typeof s=="function"&&s(),e=[]},animate:function(s,a,o,l){if(l){Vt(s,"transition",""),Vt(s,"transform","");var i=Si(this.el),r=i&&i.a,d=i&&i.d,u=(a.left-o.left)/(r||1),m=(a.top-o.top)/(d||1);s.animatingX=!!u,s.animatingY=!!m,Vt(s,"transform","translate3d("+u+"px,"+m+"px,0)"),this.forRepaintDummy=Jj(s),Vt(s,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),Vt(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Vt(s,"transition",""),Vt(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},l)}}}}function Jj(e){return e.offsetWidth}function eY(e,t,n,s){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*s.animation}var Vi=[],uh={initializeByDefault:!0},ld={mount:function(t){for(var n in uh)uh.hasOwnProperty(n)&&!(n in t)&&(t[n]=uh[n]);Vi.forEach(function(s){if(s.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Vi.push(t)},pluginEvent:function(t,n,s){var a=this;this.eventCanceled=!1,s.cancel=function(){a.eventCanceled=!0};var o=t+"Global";Vi.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][o]&&n[l.pluginName][o](Qo({sortable:n},s)),n.options[l.pluginName]&&n[l.pluginName][t]&&n[l.pluginName][t](Qo({sortable:n},s)))})},initializePlugins:function(t,n,s,a){Vi.forEach(function(i){var r=i.pluginName;if(!(!t.options[r]&&!i.initializeByDefault)){var d=new i(t,n,t.options);d.sortable=t,d.options=t.options,t[r]=d,ao(s,d.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var l=this.modifyOption(t,o,t.options[o]);typeof l<"u"&&(t.options[o]=l)}},getEventProperties:function(t,n){var s={};return Vi.forEach(function(a){typeof a.eventProperties=="function"&&ao(s,a.eventProperties.call(n[a.pluginName],t))}),s},modifyOption:function(t,n,s){var a;return Vi.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(a=o.optionListeners[n].call(t[o.pluginName],s))}),a}};function cc(e){var t=e.sortable,n=e.rootEl,s=e.name,a=e.targetEl,o=e.cloneEl,l=e.toEl,i=e.fromEl,r=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,m=e.newDraggableIndex,h=e.originalEvent,_=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[la],!!t){var T,S=t.options,b="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!_l&&!od?T=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(s,!0,!0)),T.to=l||n,T.from=i||n,T.item=a||n,T.clone=o,T.oldIndex=r,T.newIndex=d,T.oldDraggableIndex=u,T.newDraggableIndex=m,T.originalEvent=h,T.pullMode=_?_.lastPutMode:void 0;var A=Qo(Qo({},g),ld.getEventProperties(s,t));for(var y in A)T[y]=A[y];n&&n.dispatchEvent(T),S[b]&&S[b].call(t,T)}}var tY=["evt"],Ca=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.evt,o=Uj(s,tY);ld.pluginEvent.bind(Jt)(t,n,Qo({dragEl:Rt,parentEl:Es,ghostEl:fn,rootEl:ds,nextEl:mi,lastDownEl:cu,cloneEl:Ts,cloneHidden:Ml,dragStarted:dc,putSortable:Ys,activeSortable:Jt.active,originalEvent:a,oldIndex:sr,oldDraggableIndex:Ac,newIndex:La,newDraggableIndex:wl,hideGhostForTarget:My,unhideGhostForTarget:ky,cloneNowHidden:function(){Ml=!0},cloneNowShown:function(){Ml=!1},dispatchSortableEvent:function(i){ha({sortable:n,name:i,originalEvent:a})}},o))};function ha(e){cc(Qo({putSortable:Ys,cloneEl:Ts,targetEl:Rt,rootEl:ds,oldIndex:sr,oldDraggableIndex:Ac,newIndex:La,newDraggableIndex:wl},e))}var Rt,Es,fn,ds,mi,cu,Ts,Ml,sr,La,Ac,wl,Od,Ys,Zi=!1,Fu=!1,Uu=[],ai,co,ph,mh,J1,e0,dc,Hi,yc,Sc=!1,wd=!1,du,ea,hh=[],Mf=!1,Gu=[],Tp=typeof document<"u",Rd=Iy,t0=od||_l?"cssFloat":"float",nY=Tp&&!jj&&!Iy&&"draggable"in document.createElement("div"),wy=function(){if(Tp){if(_l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ry=function(t,n){var s=Vt(t),a=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),o=Tr(t,0,n),l=Tr(t,1,n),i=o&&Vt(o),r=l&&Vt(l),d=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ps(o).width,u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ps(l).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&i.float!=="none"){var m=i.float==="left"?"left":"right";return l&&(r.clear==="both"||r.clear===m)?"vertical":"horizontal"}return o&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||d>=a&&s[t0]==="none"||l&&s[t0]==="none"&&d+u>a)?"vertical":"horizontal"},sY=function(t,n,s){var a=s?t.left:t.top,o=s?t.right:t.bottom,l=s?t.width:t.height,i=s?n.left:n.top,r=s?n.right:n.bottom,d=s?n.width:n.height;return a===i||o===r||a+l/2===i+d/2},aY=function(t,n){var s;return Uu.some(function(a){var o=a[la].options.emptyInsertThreshold;if(!(!o||s_(a))){var l=ps(a),i=t>=l.left-o&&t<=l.right+o,r=n>=l.top-o&&n<=l.bottom+o;if(i&&r)return s=a}}),s},$y=function(t){function n(o,l){return function(i,r,d,u){var m=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(o==null&&(l||m))return!0;if(o==null||o===!1)return!1;if(l&&o==="clone")return o;if(typeof o=="function")return n(o(i,r,d,u),l)(i,r,d,u);var h=(l?i:r).options.group.name;return o===!0||typeof o=="string"&&o===h||o.join&&o.indexOf(h)>-1}}var s={},a=t.group;(!a||ru(a)!="object")&&(a={name:a}),s.name=a.name,s.checkPull=n(a.pull,!0),s.checkPut=n(a.put),s.revertClone=a.revertClone,t.group=s},My=function(){!wy&&fn&&Vt(fn,"display","none")},ky=function(){!wy&&fn&&Vt(fn,"display","")};Tp&&document.addEventListener("click",function(e){if(Fu)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Fu=!1,!1},!0);var oi=function(t){if(Rt){t=t.touches?t.touches[0]:t;var n=aY(t.clientX,t.clientY);if(n){var s={};for(var a in t)t.hasOwnProperty(a)&&(s[a]=t[a]);s.target=s.rootEl=n,s.preventDefault=void 0,s.stopPropagation=void 0,n[la]._onDragOver(s)}}},oY=function(t){Rt&&Rt.parentNode[la]._isOutsideThisEl(t.target)};function Jt(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ao({},t),e[la]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ry(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,i){l.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Jt.supportPointer!==!1&&"PointerEvent"in window&&!Ec,emptyInsertThreshold:5};ld.initializePlugins(this,e,n);for(var s in n)!(s in t)&&(t[s]=n[s]);$y(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:nY,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Cn(e,"pointerdown",this._onTapStart):(Cn(e,"mousedown",this._onTapStart),Cn(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Cn(e,"dragover",this),Cn(e,"dragenter",this)),Uu.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ao(this,Qj())}Jt.prototype={constructor:Jt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Hi=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Rt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,s=this.el,a=this.options,o=a.preventOnFilter,l=t.type,i=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,r=(i||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||r,u=a.filter;if(mY(s),!Rt&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||a.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ec&&r&&r.tagName.toUpperCase()==="SELECT")&&(r=ho(r,a.draggable,s,!1),!(r&&r.animated)&&cu!==r)){if(sr=Ss(r),Ac=Ss(r,a.draggable),typeof u=="function"){if(u.call(this,t,r,this)){ha({sortable:n,rootEl:d,name:"filter",targetEl:r,toEl:s,fromEl:s}),Ca("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(m){if(m=ho(d,m.trim(),s,!1),m)return ha({sortable:n,rootEl:m,name:"filter",targetEl:r,fromEl:s,toEl:s}),Ca("filter",n,{evt:t}),!0}),u)){o&&t.cancelable&&t.preventDefault();return}a.handle&&!ho(d,a.handle,s,!1)||this._prepareDragStart(t,i,r)}}},_prepareDragStart:function(t,n,s){var a=this,o=a.el,l=a.options,i=o.ownerDocument,r;if(s&&!Rt&&s.parentNode===o){var d=ps(s);if(ds=o,Rt=s,Es=Rt.parentNode,mi=Rt.nextSibling,cu=s,Od=l.group,Jt.dragged=Rt,ai={target:Rt,clientX:(n||t).clientX,clientY:(n||t).clientY},J1=ai.clientX-d.left,e0=ai.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Rt.style["will-change"]="all",r=function(){if(Ca("delayEnded",a,{evt:t}),Jt.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Y1&&a.nativeDraggable&&(Rt.draggable=!0),a._triggerDragStart(t,n),ha({sortable:a,name:"choose",originalEvent:t}),gs(Rt,l.chosenClass,!0)},l.ignore.split(",").forEach(function(u){xy(Rt,u.trim(),fh)}),Cn(i,"dragover",oi),Cn(i,"mousemove",oi),Cn(i,"touchmove",oi),Cn(i,"mouseup",a._onDrop),Cn(i,"touchend",a._onDrop),Cn(i,"touchcancel",a._onDrop),Y1&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Rt.draggable=!0),Ca("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(od||_l))){if(Jt.eventCanceled){this._onDrop();return}Cn(i,"mouseup",a._disableDelayedDrag),Cn(i,"touchend",a._disableDelayedDrag),Cn(i,"touchcancel",a._disableDelayedDrag),Cn(i,"mousemove",a._delayedDragTouchMoveHandler),Cn(i,"touchmove",a._delayedDragTouchMoveHandler),l.supportPointer&&Cn(i,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,l.delay)}else r()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Rt&&fh(Rt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;An(t,"mouseup",this._disableDelayedDrag),An(t,"touchend",this._disableDelayedDrag),An(t,"touchcancel",this._disableDelayedDrag),An(t,"mousemove",this._delayedDragTouchMoveHandler),An(t,"touchmove",this._delayedDragTouchMoveHandler),An(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Cn(document,"pointermove",this._onTouchMove):n?Cn(document,"touchmove",this._onTouchMove):Cn(document,"mousemove",this._onTouchMove):(Cn(Rt,"dragend",this),Cn(ds,"dragstart",this._onDragStart));try{document.selection?uu(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Zi=!1,ds&&Rt){Ca("dragStarted",this,{evt:n}),this.nativeDraggable&&Cn(document,"dragover",oY);var s=this.options;!t&&gs(Rt,s.dragClass,!1),gs(Rt,s.ghostClass,!0),Jt.active=this,t&&this._appendGhost(),ha({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(co){this._lastX=co.clientX,this._lastY=co.clientY,My();for(var t=document.elementFromPoint(co.clientX,co.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(co.clientX,co.clientY),t!==n);)n=t;if(Rt.parentNode[la]._isOutsideThisEl(t),n)do{if(n[la]){var s=void 0;if(s=n[la]._onDragOver({clientX:co.clientX,clientY:co.clientY,target:t,rootEl:n}),s&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);ky()}},_onTouchMove:function(t){if(ai){var n=this.options,s=n.fallbackTolerance,a=n.fallbackOffset,o=t.touches?t.touches[0]:t,l=fn&&Si(fn,!0),i=fn&&l&&l.a,r=fn&&l&&l.d,d=Rd&&ea&&Z1(ea),u=(o.clientX-ai.clientX+a.x)/(i||1)+(d?d[0]-hh[0]:0)/(i||1),m=(o.clientY-ai.clientY+a.y)/(r||1)+(d?d[1]-hh[1]:0)/(r||1);if(!Jt.active&&!Zi){if(s&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<s)return;this._onDragStart(t,!0)}if(fn){l?(l.e+=u-(ph||0),l.f+=m-(mh||0)):l={a:1,b:0,c:0,d:1,e:u,f:m};var h="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");Vt(fn,"webkitTransform",h),Vt(fn,"mozTransform",h),Vt(fn,"msTransform",h),Vt(fn,"transform",h),ph=u,mh=m,co=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!fn){var t=this.options.fallbackOnBody?document.body:ds,n=ps(Rt,!0,Rd,!0,t),s=this.options;if(Rd){for(ea=t;Vt(ea,"position")==="static"&&Vt(ea,"transform")==="none"&&ea!==document;)ea=ea.parentNode;ea!==document.body&&ea!==document.documentElement?(ea===document&&(ea=jo()),n.top+=ea.scrollTop,n.left+=ea.scrollLeft):ea=jo(),hh=Z1(ea)}fn=Rt.cloneNode(!0),gs(fn,s.ghostClass,!1),gs(fn,s.fallbackClass,!0),gs(fn,s.dragClass,!0),Vt(fn,"transition",""),Vt(fn,"transform",""),Vt(fn,"box-sizing","border-box"),Vt(fn,"margin",0),Vt(fn,"top",n.top),Vt(fn,"left",n.left),Vt(fn,"width",n.width),Vt(fn,"height",n.height),Vt(fn,"opacity","0.8"),Vt(fn,"position",Rd?"absolute":"fixed"),Vt(fn,"zIndex","100000"),Vt(fn,"pointerEvents","none"),Jt.ghost=fn,t.appendChild(fn),Vt(fn,"transform-origin",J1/parseInt(fn.style.width)*100+"% "+e0/parseInt(fn.style.height)*100+"%")}},_onDragStart:function(t,n){var s=this,a=t.dataTransfer,o=s.options;if(Ca("dragStart",this,{evt:t}),Jt.eventCanceled){this._onDrop();return}Ca("setupClone",this),Jt.eventCanceled||(Ts=a_(Rt),Ts.draggable=!1,Ts.style["will-change"]="",this._hideClone(),gs(Ts,this.options.chosenClass,!1),Jt.clone=Ts),s.cloneId=uu(function(){Ca("clone",s),!Jt.eventCanceled&&(s.options.removeCloneOnHide||ds.insertBefore(Ts,Rt),s._hideClone(),ha({sortable:s,name:"clone"}))}),!n&&gs(Rt,o.dragClass,!0),n?(Fu=!0,s._loopId=setInterval(s._emulateDragOver,50)):(An(document,"mouseup",s._onDrop),An(document,"touchend",s._onDrop),An(document,"touchcancel",s._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(s,a,Rt)),Cn(document,"drop",s),Vt(Rt,"transform","translateZ(0)")),Zi=!0,s._dragStartId=uu(s._dragStarted.bind(s,n,t)),Cn(document,"selectstart",s),dc=!0,Ec&&Vt(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,s=t.target,a,o,l,i=this.options,r=i.group,d=Jt.active,u=Od===r,m=i.sort,h=Ys||d,_,g=this,T=!1;if(Mf)return;function S(W,Q){Ca(W,g,Qo({evt:t,isOwner:u,axis:_?"vertical":"horizontal",revert:l,dragRect:a,targetRect:o,canSort:m,fromSortable:h,target:s,completed:A,onMove:function(j,X){return $d(ds,n,Rt,a,j,ps(j),t,X)},changed:y},Q))}function b(){S("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function A(W){return S("dragOverCompleted",{insertion:W}),W&&(u?d._hideClone():d._showClone(g),g!==h&&(gs(Rt,Ys?Ys.options.ghostClass:d.options.ghostClass,!1),gs(Rt,i.ghostClass,!0)),Ys!==g&&g!==Jt.active?Ys=g:g===Jt.active&&Ys&&(Ys=null),h===g&&(g._ignoreWhileAnimating=s),g.animateAll(function(){S("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===Rt&&!Rt.animated||s===n&&!s.animated)&&(Hi=null),!i.dragoverBubble&&!t.rootEl&&s!==document&&(Rt.parentNode[la]._isOutsideThisEl(t.target),!W&&oi(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),T=!0}function y(){La=Ss(Rt),wl=Ss(Rt,i.draggable),ha({sortable:g,name:"change",toEl:n,newIndex:La,newDraggableIndex:wl,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),s=ho(s,i.draggable,n,!0),S("dragOver"),Jt.eventCanceled)return T;if(Rt.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||g._ignoreWhileAnimating===s)return A(!1);if(Fu=!1,d&&!i.disabled&&(u?m||(l=Es!==ds):Ys===this||(this.lastPutMode=Od.checkPull(this,d,Rt,t))&&r.checkPut(this,d,Rt,t))){if(_=this._getDirection(t,s)==="vertical",a=ps(Rt),S("dragOverValid"),Jt.eventCanceled)return T;if(l)return Es=ds,b(),this._hideClone(),S("revert"),Jt.eventCanceled||(mi?ds.insertBefore(Rt,mi):ds.appendChild(Rt)),A(!0);var x=s_(n,i.draggable);if(!x||cY(t,_,this)&&!x.animated){if(x===Rt)return A(!1);if(x&&n===t.target&&(s=x),s&&(o=ps(s)),$d(ds,n,Rt,a,s,o,t,!!s)!==!1)return b(),n.appendChild(Rt),Es=n,y(),A(!0)}else if(x&&rY(t,_,this)){var $=Tr(n,0,i,!0);if($===Rt)return A(!1);if(s=$,o=ps(s),$d(ds,n,Rt,a,s,o,t,!1)!==!1)return b(),n.insertBefore(Rt,$),Es=n,y(),A(!0)}else if(s.parentNode===n){o=ps(s);var N=0,w,D=Rt.parentNode!==n,H=!sY(Rt.animated&&Rt.toRect||a,s.animated&&s.toRect||o,_),B=_?"top":"left",k=q1(s,"top","top")||q1(Rt,"top","top"),U=k?k.scrollTop:void 0;Hi!==s&&(w=o[B],Sc=!1,wd=!H&&i.invertSwap||D),N=dY(t,s,o,_,H?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,wd,Hi===s);var G;if(N!==0){var L=Ss(Rt);do L-=N,G=Es.children[L];while(G&&(Vt(G,"display")==="none"||G===fn))}if(N===0||G===s)return A(!1);Hi=s,yc=N;var M=s.nextElementSibling,R=!1;R=N===1;var P=$d(ds,n,Rt,a,s,o,t,R);if(P!==!1)return(P===1||P===-1)&&(R=P===1),Mf=!0,setTimeout(iY,30),b(),R&&!M?n.appendChild(Rt):s.parentNode.insertBefore(Rt,R?M:s),k&&Oy(k,0,U-k.scrollTop),Es=Rt.parentNode,w!==void 0&&!wd&&(du=Math.abs(w-ps(s)[B])),y(),A(!0)}if(n.contains(Rt))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){An(document,"mousemove",this._onTouchMove),An(document,"touchmove",this._onTouchMove),An(document,"pointermove",this._onTouchMove),An(document,"dragover",oi),An(document,"mousemove",oi),An(document,"touchmove",oi)},_offUpEvents:function(){var t=this.el.ownerDocument;An(t,"mouseup",this._onDrop),An(t,"touchend",this._onDrop),An(t,"pointerup",this._onDrop),An(t,"touchcancel",this._onDrop),An(document,"selectstart",this)},_onDrop:function(t){var n=this.el,s=this.options;if(La=Ss(Rt),wl=Ss(Rt,s.draggable),Ca("drop",this,{evt:t}),Es=Rt&&Rt.parentNode,La=Ss(Rt),wl=Ss(Rt,s.draggable),Jt.eventCanceled){this._nulling();return}Zi=!1,wd=!1,Sc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kf(this.cloneId),kf(this._dragStartId),this.nativeDraggable&&(An(document,"drop",this),An(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ec&&Vt(document.body,"user-select",""),Vt(Rt,"transform",""),t&&(dc&&(t.cancelable&&t.preventDefault(),!s.dropBubble&&t.stopPropagation()),fn&&fn.parentNode&&fn.parentNode.removeChild(fn),(ds===Es||Ys&&Ys.lastPutMode!=="clone")&&Ts&&Ts.parentNode&&Ts.parentNode.removeChild(Ts),Rt&&(this.nativeDraggable&&An(Rt,"dragend",this),fh(Rt),Rt.style["will-change"]="",dc&&!Zi&&gs(Rt,Ys?Ys.options.ghostClass:this.options.ghostClass,!1),gs(Rt,this.options.chosenClass,!1),ha({sortable:this,name:"unchoose",toEl:Es,newIndex:null,newDraggableIndex:null,originalEvent:t}),ds!==Es?(La>=0&&(ha({rootEl:Es,name:"add",toEl:Es,fromEl:ds,originalEvent:t}),ha({sortable:this,name:"remove",toEl:Es,originalEvent:t}),ha({rootEl:Es,name:"sort",toEl:Es,fromEl:ds,originalEvent:t}),ha({sortable:this,name:"sort",toEl:Es,originalEvent:t})),Ys&&Ys.save()):La!==sr&&La>=0&&(ha({sortable:this,name:"update",toEl:Es,originalEvent:t}),ha({sortable:this,name:"sort",toEl:Es,originalEvent:t})),Jt.active&&((La==null||La===-1)&&(La=sr,wl=Ac),ha({sortable:this,name:"end",toEl:Es,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ca("nulling",this),ds=Rt=Es=fn=mi=Ts=cu=Ml=ai=co=dc=La=wl=sr=Ac=Hi=yc=Ys=Od=Jt.dragged=Jt.ghost=Jt.clone=Jt.active=null,Gu.forEach(function(t){t.checked=!0}),Gu.length=ph=mh=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Rt&&(this._onDragOver(t),lY(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,s=this.el.children,a=0,o=s.length,l=this.options;a<o;a++)n=s[a],ho(n,l.draggable,this.el,!1)&&t.push(n.getAttribute(l.dataIdAttr)||pY(n));return t},sort:function(t,n){var s={},a=this.el;this.toArray().forEach(function(o,l){var i=a.children[l];ho(i,this.options.draggable,a,!1)&&(s[o]=i)},this),n&&this.captureAnimationState(),t.forEach(function(o){s[o]&&(a.removeChild(s[o]),a.appendChild(s[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return ho(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var s=this.options;if(n===void 0)return s[t];var a=ld.modifyOption(this,t,n);typeof a<"u"?s[t]=a:s[t]=n,t==="group"&&$y(s)},destroy:function(){Ca("destroy",this);var t=this.el;t[la]=null,An(t,"mousedown",this._onTapStart),An(t,"touchstart",this._onTapStart),An(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(An(t,"dragover",this),An(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Uu.splice(Uu.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Ml){if(Ca("hideClone",this),Jt.eventCanceled)return;Vt(Ts,"display","none"),this.options.removeCloneOnHide&&Ts.parentNode&&Ts.parentNode.removeChild(Ts),Ml=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Ml){if(Ca("showClone",this),Jt.eventCanceled)return;Rt.parentNode==ds&&!this.options.group.revertClone?ds.insertBefore(Ts,Rt):mi?ds.insertBefore(Ts,mi):ds.appendChild(Ts),this.options.group.revertClone&&this.animate(Rt,Ts),Vt(Ts,"display",""),Ml=!1}}};function lY(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function $d(e,t,n,s,a,o,l,i){var r,d=e[la],u=d.options.onMove,m;return window.CustomEvent&&!_l&&!od?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=t,r.from=e,r.dragged=n,r.draggedRect=s,r.related=a||t,r.relatedRect=o||ps(t),r.willInsertAfter=i,r.originalEvent=l,e.dispatchEvent(r),u&&(m=u.call(d,r,l)),m}function fh(e){e.draggable=!1}function iY(){Mf=!1}function rY(e,t,n){var s=ps(Tr(n.el,0,n.options,!0)),a=10;return t?e.clientX<s.left-a||e.clientY<s.top&&e.clientX<s.right:e.clientY<s.top-a||e.clientY<s.bottom&&e.clientX<s.left}function cY(e,t,n){var s=ps(s_(n.el,n.options.draggable)),a=10;return t?e.clientX>s.right+a||e.clientX<=s.right&&e.clientY>s.bottom&&e.clientX>=s.left:e.clientX>s.right&&e.clientY>s.top||e.clientX<=s.right&&e.clientY>s.bottom+a}function dY(e,t,n,s,a,o,l,i){var r=s?e.clientY:e.clientX,d=s?n.height:n.width,u=s?n.top:n.left,m=s?n.bottom:n.right,h=!1;if(!l){if(i&&du<d*a){if(!Sc&&(yc===1?r>u+d*o/2:r<m-d*o/2)&&(Sc=!0),Sc)h=!0;else if(yc===1?r<u+du:r>m-du)return-yc}else if(r>u+d*(1-a)/2&&r<m-d*(1-a)/2)return uY(t)}return h=h||l,h&&(r<u+d*o/2||r>m-d*o/2)?r>u+d/2?1:-1:0}function uY(e){return Ss(Rt)<Ss(e)?1:-1}function pY(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,s=0;n--;)s+=t.charCodeAt(n);return s.toString(36)}function mY(e){Gu.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var s=t[n];s.checked&&Gu.push(s)}}function uu(e){return setTimeout(e,0)}function kf(e){return clearTimeout(e)}Tp&&Cn(document,"touchmove",function(e){(Jt.active||Zi)&&e.cancelable&&e.preventDefault()});Jt.utils={on:Cn,off:An,css:Vt,find:xy,is:function(t,n){return!!ho(t,n,t,!1)},extend:qj,throttle:Ny,closest:ho,toggleClass:gs,clone:a_,index:Ss,nextTick:uu,cancelNextTick:kf,detectDirection:Ry,getChild:Tr};Jt.get=function(e){return e[la]};Jt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Jt.utils=Qo(Qo({},Jt.utils),s.utils)),ld.mount(s)})};Jt.create=function(e,t){return new Jt(e,t)};Jt.version=zj;var Ls=[],uc,Lf,Df=!1,gh,_h,Vu,pc;function hY(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var s=n.originalEvent;this.sortable.nativeDraggable?Cn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Cn(document,"pointermove",this._handleFallbackAutoScroll):s.touches?Cn(document,"touchmove",this._handleFallbackAutoScroll):Cn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var s=n.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?An(document,"dragover",this._handleAutoScroll):(An(document,"pointermove",this._handleFallbackAutoScroll),An(document,"touchmove",this._handleFallbackAutoScroll),An(document,"mousemove",this._handleFallbackAutoScroll)),n0(),pu(),Zj()},nulling:function(){Vu=Lf=uc=Df=pc=gh=_h=null,Ls.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,s){var a=this,o=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,i=document.elementFromPoint(o,l);if(Vu=n,s||this.options.forceAutoScrollFallback||od||_l||Ec){vh(n,this.options,i,s);var r=Pl(i,!0);Df&&(!pc||o!==gh||l!==_h)&&(pc&&n0(),pc=setInterval(function(){var d=Pl(document.elementFromPoint(o,l),!0);d!==r&&(r=d,pu()),vh(n,a.options,d,s)},10),gh=o,_h=l)}else{if(!this.options.bubbleScroll||Pl(i,!0)===jo()){pu();return}vh(n,this.options,Pl(i,!1),!1)}}},ao(e,{pluginName:"scroll",initializeByDefault:!0})}function pu(){Ls.forEach(function(e){clearInterval(e.pid)}),Ls=[]}function n0(){clearInterval(pc)}var vh=Ny(function(e,t,n,s){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,i=t.scrollSpeed,r=jo(),d=!1,u;Lf!==n&&(Lf=n,pu(),uc=t.scroll,u=t.scrollFn,uc===!0&&(uc=Pl(n,!0)));var m=0,h=uc;do{var _=h,g=ps(_),T=g.top,S=g.bottom,b=g.left,A=g.right,y=g.width,x=g.height,$=void 0,N=void 0,w=_.scrollWidth,D=_.scrollHeight,H=Vt(_),B=_.scrollLeft,k=_.scrollTop;_===r?($=y<w&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),N=x<D&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):($=y<w&&(H.overflowX==="auto"||H.overflowX==="scroll"),N=x<D&&(H.overflowY==="auto"||H.overflowY==="scroll"));var U=$&&(Math.abs(A-a)<=l&&B+y<w)-(Math.abs(b-a)<=l&&!!B),G=N&&(Math.abs(S-o)<=l&&k+x<D)-(Math.abs(T-o)<=l&&!!k);if(!Ls[m])for(var L=0;L<=m;L++)Ls[L]||(Ls[L]={});(Ls[m].vx!=U||Ls[m].vy!=G||Ls[m].el!==_)&&(Ls[m].el=_,Ls[m].vx=U,Ls[m].vy=G,clearInterval(Ls[m].pid),(U!=0||G!=0)&&(d=!0,Ls[m].pid=setInterval((function(){s&&this.layer===0&&Jt.active._onTouchMove(Vu);var M=Ls[this.layer].vy?Ls[this.layer].vy*i:0,R=Ls[this.layer].vx?Ls[this.layer].vx*i:0;typeof u=="function"&&u.call(Jt.dragged.parentNode[la],R,M,e,Vu,Ls[this.layer].el)!=="continue"||Oy(Ls[this.layer].el,R,M)}).bind({layer:m}),24))),m++}while(t.bubbleScroll&&h!==r&&(h=Pl(h,!1)));Df=d}},30),Ly=function(t){var n=t.originalEvent,s=t.putSortable,a=t.dragEl,o=t.activeSortable,l=t.dispatchSortableEvent,i=t.hideGhostForTarget,r=t.unhideGhostForTarget;if(n){var d=s||o;i();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,m=document.elementFromPoint(u.clientX,u.clientY);r(),d&&!d.el.contains(m)&&(l("spill"),this.onSpill({dragEl:a,putSortable:s}))}};function o_(){}o_.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,s=t.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var a=Tr(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),s&&s.animateAll()},drop:Ly};ao(o_,{pluginName:"revertOnSpill"});function l_(){}l_.prototype={onSpill:function(t){var n=t.dragEl,s=t.putSortable,a=s||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:Ly};ao(l_,{pluginName:"removeOnSpill"});var Ya;function fY(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var s=n.dragEl;Ya=s},dragOverValid:function(n){var s=n.completed,a=n.target,o=n.onMove,l=n.activeSortable,i=n.changed,r=n.cancel;if(l.options.swap){var d=this.sortable.el,u=this.options;if(a&&a!==d){var m=Ya;o(a)!==!1?(gs(a,u.swapClass,!0),Ya=a):Ya=null,m&&m!==Ya&&gs(m,u.swapClass,!1)}i(),s(!0),r()}},drop:function(n){var s=n.activeSortable,a=n.putSortable,o=n.dragEl,l=a||this.sortable,i=this.options;Ya&&gs(Ya,i.swapClass,!1),Ya&&(i.swap||a&&a.options.swap)&&o!==Ya&&(l.captureAnimationState(),l!==s&&s.captureAnimationState(),gY(o,Ya),l.animateAll(),l!==s&&s.animateAll())},nulling:function(){Ya=null}},ao(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Ya}}})}function gY(e,t){var n=e.parentNode,s=t.parentNode,a,o;!n||!s||n.isEqualNode(t)||s.isEqualNode(e)||(a=Ss(e),o=Ss(t),n.isEqualNode(s)&&a<o&&o++,n.insertBefore(t,n.children[a]),s.insertBefore(e,s.children[o]))}var un=[],ka=[],qr,uo,Zr=!1,xa=!1,Wi=!1,ss,Qr,Md;function _Y(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?Cn(document,"pointerup",this._deselectMultiDrag):(Cn(document,"mouseup",this._deselectMultiDrag),Cn(document,"touchend",this._deselectMultiDrag)),Cn(document,"keydown",this._checkKeyDown),Cn(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(a,o){var l="";un.length&&uo===t?un.forEach(function(i,r){l+=(r?", ":"")+i.textContent}):l=o.textContent,a.setData("Text",l)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var s=n.dragEl;ss=s},delayEnded:function(){this.isMultiDrag=~un.indexOf(ss)},setupClone:function(n){var s=n.sortable,a=n.cancel;if(this.isMultiDrag){for(var o=0;o<un.length;o++)ka.push(a_(un[o])),ka[o].sortableIndex=un[o].sortableIndex,ka[o].draggable=!1,ka[o].style["will-change"]="",gs(ka[o],this.options.selectedClass,!1),un[o]===ss&&gs(ka[o],this.options.chosenClass,!1);s._hideClone(),a()}},clone:function(n){var s=n.sortable,a=n.rootEl,o=n.dispatchSortableEvent,l=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||un.length&&uo===s&&(s0(!0,a),o("clone"),l()))},showClone:function(n){var s=n.cloneNowShown,a=n.rootEl,o=n.cancel;this.isMultiDrag&&(s0(!1,a),ka.forEach(function(l){Vt(l,"display","")}),s(),Md=!1,o())},hideClone:function(n){var s=this;n.sortable;var a=n.cloneNowHidden,o=n.cancel;this.isMultiDrag&&(ka.forEach(function(l){Vt(l,"display","none"),s.options.removeCloneOnHide&&l.parentNode&&l.parentNode.removeChild(l)}),a(),Md=!0,o())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&uo&&uo.multiDrag._deselectMultiDrag(),un.forEach(function(s){s.sortableIndex=Ss(s)}),un=un.sort(function(s,a){return s.sortableIndex-a.sortableIndex}),Wi=!0},dragStarted:function(n){var s=this,a=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){un.forEach(function(l){l!==ss&&Vt(l,"position","absolute")});var o=ps(ss,!1,!0,!0);un.forEach(function(l){l!==ss&&Q1(l,o)}),xa=!0,Zr=!0}a.animateAll(function(){xa=!1,Zr=!1,s.options.animation&&un.forEach(function(l){dh(l)}),s.options.sort&&kd()})}},dragOver:function(n){var s=n.target,a=n.completed,o=n.cancel;xa&&~un.indexOf(s)&&(a(!1),o())},revert:function(n){var s=n.fromSortable,a=n.rootEl,o=n.sortable,l=n.dragRect;un.length>1&&(un.forEach(function(i){o.addAnimationState({target:i,rect:xa?ps(i):l}),dh(i),i.fromRect=l,s.removeAnimationState(i)}),xa=!1,vY(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(n){var s=n.sortable,a=n.isOwner,o=n.insertion,l=n.activeSortable,i=n.parentEl,r=n.putSortable,d=this.options;if(o){if(a&&l._hideClone(),Zr=!1,d.animation&&un.length>1&&(xa||!a&&!l.options.sort&&!r)){var u=ps(ss,!1,!0,!0);un.forEach(function(h){h!==ss&&(Q1(h,u),i.appendChild(h))}),xa=!0}if(!a)if(xa||kd(),un.length>1){var m=Md;l._showClone(s),l.options.animation&&!Md&&m&&ka.forEach(function(h){l.addAnimationState({target:h,rect:Qr}),h.fromRect=Qr,h.thisAnimationDuration=null})}else l._showClone(s)}},dragOverAnimationCapture:function(n){var s=n.dragRect,a=n.isOwner,o=n.activeSortable;if(un.forEach(function(i){i.thisAnimationDuration=null}),o.options.animation&&!a&&o.multiDrag.isMultiDrag){Qr=ao({},s);var l=Si(ss,!0);Qr.top-=l.f,Qr.left-=l.e}},dragOverAnimationComplete:function(){xa&&(xa=!1,kd())},drop:function(n){var s=n.originalEvent,a=n.rootEl,o=n.parentEl,l=n.sortable,i=n.dispatchSortableEvent,r=n.oldIndex,d=n.putSortable,u=d||this.sortable;if(s){var m=this.options,h=o.children;if(!Wi)if(m.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),gs(ss,m.selectedClass,!~un.indexOf(ss)),~un.indexOf(ss))un.splice(un.indexOf(ss),1),qr=null,cc({sortable:l,rootEl:a,name:"deselect",targetEl:ss});else{if(un.push(ss),cc({sortable:l,rootEl:a,name:"select",targetEl:ss}),s.shiftKey&&qr&&l.el.contains(qr)){var _=Ss(qr),g=Ss(ss);if(~_&&~g&&_!==g){var T,S;for(g>_?(S=_,T=g):(S=g,T=_+1);S<T;S++)~un.indexOf(h[S])||(gs(h[S],m.selectedClass,!0),un.push(h[S]),cc({sortable:l,rootEl:a,name:"select",targetEl:h[S]}))}}else qr=ss;uo=u}if(Wi&&this.isMultiDrag){if(xa=!1,(o[la].options.sort||o!==a)&&un.length>1){var b=ps(ss),A=Ss(ss,":not(."+this.options.selectedClass+")");if(!Zr&&m.animation&&(ss.thisAnimationDuration=null),u.captureAnimationState(),!Zr&&(m.animation&&(ss.fromRect=b,un.forEach(function(x){if(x.thisAnimationDuration=null,x!==ss){var $=xa?ps(x):b;x.fromRect=$,u.addAnimationState({target:x,rect:$})}})),kd(),un.forEach(function(x){h[A]?o.insertBefore(x,h[A]):o.appendChild(x),A++}),r===Ss(ss))){var y=!1;un.forEach(function(x){if(x.sortableIndex!==Ss(x)){y=!0;return}}),y&&i("update")}un.forEach(function(x){dh(x)}),u.animateAll()}uo=u}(a===o||d&&d.lastPutMode!=="clone")&&ka.forEach(function(x){x.parentNode&&x.parentNode.removeChild(x)})}},nullingGlobal:function(){this.isMultiDrag=Wi=!1,ka.length=0},destroyGlobal:function(){this._deselectMultiDrag(),An(document,"pointerup",this._deselectMultiDrag),An(document,"mouseup",this._deselectMultiDrag),An(document,"touchend",this._deselectMultiDrag),An(document,"keydown",this._checkKeyDown),An(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Wi<"u"&&Wi)&&uo===this.sortable&&!(n&&ho(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;un.length;){var s=un[0];gs(s,this.options.selectedClass,!1),un.shift(),cc({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:s})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ao(e,{pluginName:"multiDrag",utils:{select:function(n){var s=n.parentNode[la];!s||!s.options.multiDrag||~un.indexOf(n)||(uo&&uo!==s&&(uo.multiDrag._deselectMultiDrag(),uo=s),gs(n,s.options.selectedClass,!0),un.push(n))},deselect:function(n){var s=n.parentNode[la],a=un.indexOf(n);!s||!s.options.multiDrag||!~a||(gs(n,s.options.selectedClass,!1),un.splice(a,1))}},eventProperties:function(){var n=this,s=[],a=[];return un.forEach(function(o){s.push({multiDragElement:o,index:o.sortableIndex});var l;xa&&o!==ss?l=-1:xa?l=Ss(o,":not(."+n.options.selectedClass+")"):l=Ss(o),a.push({multiDragElement:o,index:l})}),{items:Gj(un),clones:[].concat(ka),oldIndicies:s,newIndicies:a}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function vY(e,t){un.forEach(function(n,s){var a=t.children[n.sortableIndex+(e?Number(s):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function s0(e,t){ka.forEach(function(n,s){var a=t.children[n.sortableIndex+(e?Number(s):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function kd(){un.forEach(function(e){e!==ss&&e.parentNode&&e.parentNode.removeChild(e)})}Jt.mount(new hY);Jt.mount(l_,o_);const bY=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:_Y,Sortable:Jt,Swap:fY,default:Jt},Symbol.toStringTag,{value:"Module"})),EY=ZC(bY);(function(e,t){(function(s,a){e.exports=a(JE,EY)})(typeof self<"u"?self:QC,function(n,s){return function(a){var o={};function l(i){if(o[i])return o[i].exports;var r=o[i]={i,l:!1,exports:{}};return a[i].call(r.exports,r,r.exports,l),r.l=!0,r.exports}return l.m=a,l.c=o,l.d=function(i,r,d){l.o(i,r)||Object.defineProperty(i,r,{enumerable:!0,get:d})},l.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},l.t=function(i,r){if(r&1&&(i=l(i)),r&8||r&4&&typeof i=="object"&&i&&i.__esModule)return i;var d=Object.create(null);if(l.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:i}),r&2&&typeof i!="string")for(var u in i)l.d(d,u,(function(m){return i[m]}).bind(null,u));return d},l.n=function(i){var r=i&&i.__esModule?function(){return i.default}:function(){return i};return l.d(r,"a",r),r},l.o=function(i,r){return Object.prototype.hasOwnProperty.call(i,r)},l.p="",l(l.s="fb15")}({"00ee":function(a,o,l){var i=l("b622"),r=i("toStringTag"),d={};d[r]="z",a.exports=String(d)==="[object z]"},"0366":function(a,o,l){var i=l("1c0b");a.exports=function(r,d,u){if(i(r),d===void 0)return r;switch(u){case 0:return function(){return r.call(d)};case 1:return function(m){return r.call(d,m)};case 2:return function(m,h){return r.call(d,m,h)};case 3:return function(m,h,_){return r.call(d,m,h,_)}}return function(){return r.apply(d,arguments)}}},"057f":function(a,o,l){var i=l("fc6a"),r=l("241c").f,d={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],m=function(h){try{return r(h)}catch{return u.slice()}};a.exports.f=function(_){return u&&d.call(_)=="[object Window]"?m(_):r(i(_))}},"06cf":function(a,o,l){var i=l("83ab"),r=l("d1e7"),d=l("5c6c"),u=l("fc6a"),m=l("c04e"),h=l("5135"),_=l("0cfb"),g=Object.getOwnPropertyDescriptor;o.f=i?g:function(S,b){if(S=u(S),b=m(b,!0),_)try{return g(S,b)}catch{}if(h(S,b))return d(!r.f.call(S,b),S[b])}},"0cfb":function(a,o,l){var i=l("83ab"),r=l("d039"),d=l("cc12");a.exports=!i&&!r(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(a,o,l){var i=l("23e7"),r=l("d58f").left,d=l("a640"),u=l("ae40"),m=d("reduce"),h=u("reduce",{1:0});i({target:"Array",proto:!0,forced:!m||!h},{reduce:function(g){return r(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(a,o,l){var i=l("c6b6"),r=l("9263");a.exports=function(d,u){var m=d.exec;if(typeof m=="function"){var h=m.call(d,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(i(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return r.call(d,u)}},"159b":function(a,o,l){var i=l("da84"),r=l("fdbc"),d=l("17c2"),u=l("9112");for(var m in r){var h=i[m],_=h&&h.prototype;if(_&&_.forEach!==d)try{u(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(a,o,l){var i=l("b727").forEach,r=l("a640"),d=l("ae40"),u=r("forEach"),m=d("forEach");a.exports=!u||!m?function(_){return i(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(a,o,l){var i=l("d066");a.exports=i("document","documentElement")},"1c0b":function(a,o){a.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},"1c7e":function(a,o,l){var i=l("b622"),r=i("iterator"),d=!1;try{var u=0,m={next:function(){return{done:!!u++}},return:function(){d=!0}};m[r]=function(){return this},Array.from(m,function(){throw 2})}catch{}a.exports=function(h,_){if(!_&&!d)return!1;var g=!1;try{var T={};T[r]=function(){return{next:function(){return{done:g=!0}}}},h(T)}catch{}return g}},"1d80":function(a,o){a.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},"1dde":function(a,o,l){var i=l("d039"),r=l("b622"),d=l("2d00"),u=r("species");a.exports=function(m){return d>=51||!i(function(){var h=[],_=h.constructor={};return _[u]=function(){return{foo:1}},h[m](Boolean).foo!==1})}},"23cb":function(a,o,l){var i=l("a691"),r=Math.max,d=Math.min;a.exports=function(u,m){var h=i(u);return h<0?r(h+m,0):d(h,m)}},"23e7":function(a,o,l){var i=l("da84"),r=l("06cf").f,d=l("9112"),u=l("6eeb"),m=l("ce4e"),h=l("e893"),_=l("94ca");a.exports=function(g,T){var S=g.target,b=g.global,A=g.stat,y,x,$,N,w,D;if(b?x=i:A?x=i[S]||m(S,{}):x=(i[S]||{}).prototype,x)for($ in T){if(w=T[$],g.noTargetGet?(D=r(x,$),N=D&&D.value):N=x[$],y=_(b?$:S+(A?".":"#")+$,g.forced),!y&&N!==void 0){if(typeof w==typeof N)continue;h(w,N)}(g.sham||N&&N.sham)&&d(w,"sham",!0),u(x,$,w,g)}}},"241c":function(a,o,l){var i=l("ca84"),r=l("7839"),d=r.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(m){return i(m,d)}},"25f0":function(a,o,l){var i=l("6eeb"),r=l("825a"),d=l("d039"),u=l("ad6d"),m="toString",h=RegExp.prototype,_=h[m],g=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),T=_.name!=m;(g||T)&&i(RegExp.prototype,m,function(){var b=r(this),A=String(b.source),y=b.flags,x=String(y===void 0&&b instanceof RegExp&&!("flags"in h)?u.call(b):y);return"/"+A+"/"+x},{unsafe:!0})},"2ca0":function(a,o,l){var i=l("23e7"),r=l("06cf").f,d=l("50c4"),u=l("5a34"),m=l("1d80"),h=l("ab13"),_=l("c430"),g="".startsWith,T=Math.min,S=h("startsWith"),b=!_&&!S&&!!function(){var A=r(String.prototype,"startsWith");return A&&!A.writable}();i({target:"String",proto:!0,forced:!b&&!S},{startsWith:function(y){var x=String(m(this));u(y);var $=d(T(arguments.length>1?arguments[1]:void 0,x.length)),N=String(y);return g?g.call(x,N,$):x.slice($,$+N.length)===N}})},"2d00":function(a,o,l){var i=l("da84"),r=l("342f"),d=i.process,u=d&&d.versions,m=u&&u.v8,h,_;m?(h=m.split("."),_=h[0]+h[1]):r&&(h=r.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=r.match(/Chrome\/(\d+)/),h&&(_=h[1]))),a.exports=_&&+_},"342f":function(a,o,l){var i=l("d066");a.exports=i("navigator","userAgent")||""},"35a1":function(a,o,l){var i=l("f5df"),r=l("3f8c"),d=l("b622"),u=d("iterator");a.exports=function(m){if(m!=null)return m[u]||m["@@iterator"]||r[i(m)]}},"37e8":function(a,o,l){var i=l("83ab"),r=l("9bf2"),d=l("825a"),u=l("df75");a.exports=i?Object.defineProperties:function(h,_){d(h);for(var g=u(_),T=g.length,S=0,b;T>S;)r.f(h,b=g[S++],_[b]);return h}},"3bbe":function(a,o,l){var i=l("861d");a.exports=function(r){if(!i(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},"3ca3":function(a,o,l){var i=l("6547").charAt,r=l("69f3"),d=l("7dd0"),u="String Iterator",m=r.set,h=r.getterFor(u);d(String,"String",function(_){m(this,{type:u,string:String(_),index:0})},function(){var g=h(this),T=g.string,S=g.index,b;return S>=T.length?{value:void 0,done:!0}:(b=i(T,S),g.index+=b.length,{value:b,done:!1})})},"3f8c":function(a,o){a.exports={}},4160:function(a,o,l){var i=l("23e7"),r=l("17c2");i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"428f":function(a,o,l){var i=l("da84");a.exports=i},"44ad":function(a,o,l){var i=l("d039"),r=l("c6b6"),d="".split;a.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return r(u)=="String"?d.call(u,""):Object(u)}:Object},"44d2":function(a,o,l){var i=l("b622"),r=l("7c73"),d=l("9bf2"),u=i("unscopables"),m=Array.prototype;m[u]==null&&d.f(m,u,{configurable:!0,value:r(null)}),a.exports=function(h){m[u][h]=!0}},"44e7":function(a,o,l){var i=l("861d"),r=l("c6b6"),d=l("b622"),u=d("match");a.exports=function(m){var h;return i(m)&&((h=m[u])!==void 0?!!h:r(m)=="RegExp")}},4930:function(a,o,l){var i=l("d039");a.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},"4d64":function(a,o,l){var i=l("fc6a"),r=l("50c4"),d=l("23cb"),u=function(m){return function(h,_,g){var T=i(h),S=r(T.length),b=d(g,S),A;if(m&&_!=_){for(;S>b;)if(A=T[b++],A!=A)return!0}else for(;S>b;b++)if((m||b in T)&&T[b]===_)return m||b||0;return!m&&-1}};a.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(a,o,l){var i=l("23e7"),r=l("b727").filter,d=l("1dde"),u=l("ae40"),m=d("filter"),h=u("filter");i({target:"Array",proto:!0,forced:!m||!h},{filter:function(g){return r(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(a,o,l){var i=l("0366"),r=l("7b0b"),d=l("9bdd"),u=l("e95a"),m=l("50c4"),h=l("8418"),_=l("35a1");a.exports=function(T){var S=r(T),b=typeof this=="function"?this:Array,A=arguments.length,y=A>1?arguments[1]:void 0,x=y!==void 0,$=_(S),N=0,w,D,H,B,k,U;if(x&&(y=i(y,A>2?arguments[2]:void 0,2)),$!=null&&!(b==Array&&u($)))for(B=$.call(S),k=B.next,D=new b;!(H=k.call(B)).done;N++)U=x?d(B,y,[H.value,N],!0):H.value,h(D,N,U);else for(w=m(S.length),D=new b(w);w>N;N++)U=x?y(S[N],N):S[N],h(D,N,U);return D.length=N,D}},"4fad":function(a,o,l){var i=l("23e7"),r=l("6f53").entries;i({target:"Object",stat:!0},{entries:function(u){return r(u)}})},"50c4":function(a,o,l){var i=l("a691"),r=Math.min;a.exports=function(d){return d>0?r(i(d),9007199254740991):0}},5135:function(a,o){var l={}.hasOwnProperty;a.exports=function(i,r){return l.call(i,r)}},5319:function(a,o,l){var i=l("d784"),r=l("825a"),d=l("7b0b"),u=l("50c4"),m=l("a691"),h=l("1d80"),_=l("8aa5"),g=l("14c3"),T=Math.max,S=Math.min,b=Math.floor,A=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g,x=function($){return $===void 0?$:String($)};i("replace",2,function($,N,w,D){var H=D.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,B=D.REPLACE_KEEPS_$0,k=H?"$":"$0";return[function(L,M){var R=h(this),P=L==null?void 0:L[$];return P!==void 0?P.call(L,R,M):N.call(String(R),L,M)},function(G,L){if(!H&&B||typeof L=="string"&&L.indexOf(k)===-1){var M=w(N,G,this,L);if(M.done)return M.value}var R=r(G),P=String(this),W=typeof L=="function";W||(L=String(L));var Q=R.global;if(Q){var Z=R.unicode;R.lastIndex=0}for(var j=[];;){var X=g(R,P);if(X===null||(j.push(X),!Q))break;var q=String(X[0]);q===""&&(R.lastIndex=_(P,u(R.lastIndex),Z))}for(var se="",he=0,be=0;be<j.length;be++){X=j[be];for(var ne=String(X[0]),J=T(S(m(X.index),P.length),0),ue=[],Ne=1;Ne<X.length;Ne++)ue.push(x(X[Ne]));var Re=X.groups;if(W){var Ze=[ne].concat(ue,J,P);Re!==void 0&&Ze.push(Re);var Xe=String(L.apply(void 0,Ze))}else Xe=U(ne,P,J,ue,Re,L);J>=he&&(se+=P.slice(he,J)+Xe,he=J+ne.length)}return se+P.slice(he)}];function U(G,L,M,R,P,W){var Q=M+G.length,Z=R.length,j=y;return P!==void 0&&(P=d(P),j=A),N.call(W,j,function(X,q){var se;switch(q.charAt(0)){case"$":return"$";case"&":return G;case"`":return L.slice(0,M);case"'":return L.slice(Q);case"<":se=P[q.slice(1,-1)];break;default:var he=+q;if(he===0)return X;if(he>Z){var be=b(he/10);return be===0?X:be<=Z?R[be-1]===void 0?q.charAt(1):R[be-1]+q.charAt(1):X}se=R[he-1]}return se===void 0?"":se})}})},5692:function(a,o,l){var i=l("c430"),r=l("c6cd");(a.exports=function(d,u){return r[d]||(r[d]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(a,o,l){var i=l("d066"),r=l("241c"),d=l("7418"),u=l("825a");a.exports=i("Reflect","ownKeys")||function(h){var _=r.f(u(h)),g=d.f;return g?_.concat(g(h)):_}},"5a34":function(a,o,l){var i=l("44e7");a.exports=function(r){if(i(r))throw TypeError("The method doesn't accept regular expressions");return r}},"5c6c":function(a,o){a.exports=function(l,i){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:i}}},"5db7":function(a,o,l){var i=l("23e7"),r=l("a2bf"),d=l("7b0b"),u=l("50c4"),m=l("1c0b"),h=l("65f0");i({target:"Array",proto:!0},{flatMap:function(g){var T=d(this),S=u(T.length),b;return m(g),b=h(T,0),b.length=r(b,T,T,S,0,1,g,arguments.length>1?arguments[1]:void 0),b}})},6547:function(a,o,l){var i=l("a691"),r=l("1d80"),d=function(u){return function(m,h){var _=String(r(m)),g=i(h),T=_.length,S,b;return g<0||g>=T?u?"":void 0:(S=_.charCodeAt(g),S<55296||S>56319||g+1===T||(b=_.charCodeAt(g+1))<56320||b>57343?u?_.charAt(g):S:u?_.slice(g,g+2):(S-55296<<10)+(b-56320)+65536)}};a.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(a,o,l){var i=l("861d"),r=l("e8b5"),d=l("b622"),u=d("species");a.exports=function(m,h){var _;return r(m)&&(_=m.constructor,typeof _=="function"&&(_===Array||r(_.prototype))?_=void 0:i(_)&&(_=_[u],_===null&&(_=void 0))),new(_===void 0?Array:_)(h===0?0:h)}},"69f3":function(a,o,l){var i=l("7f9a"),r=l("da84"),d=l("861d"),u=l("9112"),m=l("5135"),h=l("f772"),_=l("d012"),g=r.WeakMap,T,S,b,A=function(H){return b(H)?S(H):T(H,{})},y=function(H){return function(B){var k;if(!d(B)||(k=S(B)).type!==H)throw TypeError("Incompatible receiver, "+H+" required");return k}};if(i){var x=new g,$=x.get,N=x.has,w=x.set;T=function(H,B){return w.call(x,H,B),B},S=function(H){return $.call(x,H)||{}},b=function(H){return N.call(x,H)}}else{var D=h("state");_[D]=!0,T=function(H,B){return u(H,D,B),B},S=function(H){return m(H,D)?H[D]:{}},b=function(H){return m(H,D)}}a.exports={set:T,get:S,has:b,enforce:A,getterFor:y}},"6eeb":function(a,o,l){var i=l("da84"),r=l("9112"),d=l("5135"),u=l("ce4e"),m=l("8925"),h=l("69f3"),_=h.get,g=h.enforce,T=String(String).split("String");(a.exports=function(S,b,A,y){var x=y?!!y.unsafe:!1,$=y?!!y.enumerable:!1,N=y?!!y.noTargetGet:!1;if(typeof A=="function"&&(typeof b=="string"&&!d(A,"name")&&r(A,"name",b),g(A).source=T.join(typeof b=="string"?b:"")),S===i){$?S[b]=A:u(b,A);return}else x?!N&&S[b]&&($=!0):delete S[b];$?S[b]=A:r(S,b,A)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||m(this)})},"6f53":function(a,o,l){var i=l("83ab"),r=l("df75"),d=l("fc6a"),u=l("d1e7").f,m=function(h){return function(_){for(var g=d(_),T=r(g),S=T.length,b=0,A=[],y;S>b;)y=T[b++],(!i||u.call(g,y))&&A.push(h?[y,g[y]]:g[y]);return A}};a.exports={entries:m(!0),values:m(!1)}},"73d9":function(a,o,l){var i=l("44d2");i("flatMap")},7418:function(a,o){o.f=Object.getOwnPropertySymbols},"746f":function(a,o,l){var i=l("428f"),r=l("5135"),d=l("e538"),u=l("9bf2").f;a.exports=function(m){var h=i.Symbol||(i.Symbol={});r(h,m)||u(h,m,{value:d.f(m)})}},7839:function(a,o){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(a,o,l){var i=l("1d80");a.exports=function(r){return Object(i(r))}},"7c73":function(a,o,l){var i=l("825a"),r=l("37e8"),d=l("7839"),u=l("d012"),m=l("1be4"),h=l("cc12"),_=l("f772"),g=">",T="<",S="prototype",b="script",A=_("IE_PROTO"),y=function(){},x=function(H){return T+b+g+H+T+"/"+b+g},$=function(H){H.write(x("")),H.close();var B=H.parentWindow.Object;return H=null,B},N=function(){var H=h("iframe"),B="java"+b+":",k;return H.style.display="none",m.appendChild(H),H.src=String(B),k=H.contentWindow.document,k.open(),k.write(x("document.F=Object")),k.close(),k.F},w,D=function(){try{w=document.domain&&new ActiveXObject("htmlfile")}catch{}D=w?$(w):N();for(var H=d.length;H--;)delete D[S][d[H]];return D()};u[A]=!0,a.exports=Object.create||function(B,k){var U;return B!==null?(y[S]=i(B),U=new y,y[S]=null,U[A]=B):U=D(),k===void 0?U:r(U,k)}},"7dd0":function(a,o,l){var i=l("23e7"),r=l("9ed3"),d=l("e163"),u=l("d2bb"),m=l("d44e"),h=l("9112"),_=l("6eeb"),g=l("b622"),T=l("c430"),S=l("3f8c"),b=l("ae93"),A=b.IteratorPrototype,y=b.BUGGY_SAFARI_ITERATORS,x=g("iterator"),$="keys",N="values",w="entries",D=function(){return this};a.exports=function(H,B,k,U,G,L,M){r(k,B,U);var R=function(be){if(be===G&&j)return j;if(!y&&be in Q)return Q[be];switch(be){case $:return function(){return new k(this,be)};case N:return function(){return new k(this,be)};case w:return function(){return new k(this,be)}}return function(){return new k(this)}},P=B+" Iterator",W=!1,Q=H.prototype,Z=Q[x]||Q["@@iterator"]||G&&Q[G],j=!y&&Z||R(G),X=B=="Array"&&Q.entries||Z,q,se,he;if(X&&(q=d(X.call(new H)),A!==Object.prototype&&q.next&&(!T&&d(q)!==A&&(u?u(q,A):typeof q[x]!="function"&&h(q,x,D)),m(q,P,!0,!0),T&&(S[P]=D))),G==N&&Z&&Z.name!==N&&(W=!0,j=function(){return Z.call(this)}),(!T||M)&&Q[x]!==j&&h(Q,x,j),S[B]=j,G)if(se={values:R(N),keys:L?j:R($),entries:R(w)},M)for(he in se)(y||W||!(he in Q))&&_(Q,he,se[he]);else i({target:B,proto:!0,forced:y||W},se);return se}},"7f9a":function(a,o,l){var i=l("da84"),r=l("8925"),d=i.WeakMap;a.exports=typeof d=="function"&&/native code/.test(r(d))},"825a":function(a,o,l){var i=l("861d");a.exports=function(r){if(!i(r))throw TypeError(String(r)+" is not an object");return r}},"83ab":function(a,o,l){var i=l("d039");a.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(a,o,l){var i=l("c04e"),r=l("9bf2"),d=l("5c6c");a.exports=function(u,m,h){var _=i(m);_ in u?r.f(u,_,d(0,h)):u[_]=h}},"861d":function(a,o){a.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},8875:function(a,o,l){var i,r,d;(function(u,m){r=[],i=m,d=typeof i=="function"?i.apply(o,r):i,d!==void 0&&(a.exports=d)})(typeof self<"u"?self:this,function(){function u(){var m=Object.getOwnPropertyDescriptor(document,"currentScript");if(!m&&"currentScript"in document&&document.currentScript||m&&m.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(w){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,g=h.exec(w.stack)||_.exec(w.stack),T=g&&g[1]||!1,S=g&&g[2]||!1,b=document.location.href.replace(document.location.hash,""),A,y,x,$=document.getElementsByTagName("script");T===b&&(A=document.documentElement.outerHTML,y=new RegExp("(?:[^\\n]+?\\n){0,"+(S-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),x=A.replace(y,"$1").trim());for(var N=0;N<$.length;N++)if($[N].readyState==="interactive"||$[N].src===T||T===b&&$[N].innerHTML&&$[N].innerHTML.trim()===x)return $[N];return null}}return u})},8925:function(a,o,l){var i=l("c6cd"),r=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(d){return r.call(d)}),a.exports=i.inspectSource},"8aa5":function(a,o,l){var i=l("6547").charAt;a.exports=function(r,d,u){return d+(u?i(r,d).length:1)}},"8bbf":function(a,o){a.exports=n},"90e3":function(a,o){var l=0,i=Math.random();a.exports=function(r){return"Symbol("+String(r===void 0?"":r)+")_"+(++l+i).toString(36)}},9112:function(a,o,l){var i=l("83ab"),r=l("9bf2"),d=l("5c6c");a.exports=i?function(u,m,h){return r.f(u,m,d(1,h))}:function(u,m,h){return u[m]=h,u}},9263:function(a,o,l){var i=l("ad6d"),r=l("9f7f"),d=RegExp.prototype.exec,u=String.prototype.replace,m=d,h=function(){var S=/a/,b=/b*/g;return d.call(S,"a"),d.call(b,"a"),S.lastIndex!==0||b.lastIndex!==0}(),_=r.UNSUPPORTED_Y||r.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,T=h||g||_;T&&(m=function(b){var A=this,y,x,$,N,w=_&&A.sticky,D=i.call(A),H=A.source,B=0,k=b;return w&&(D=D.replace("y",""),D.indexOf("g")===-1&&(D+="g"),k=String(b).slice(A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&b[A.lastIndex-1]!==`
`)&&(H="(?: "+H+")",k=" "+k,B++),x=new RegExp("^(?:"+H+")",D)),g&&(x=new RegExp("^"+H+"$(?!\\s)",D)),h&&(y=A.lastIndex),$=d.call(w?x:A,k),w?$?($.input=$.input.slice(B),$[0]=$[0].slice(B),$.index=A.lastIndex,A.lastIndex+=$[0].length):A.lastIndex=0:h&&$&&(A.lastIndex=A.global?$.index+$[0].length:y),g&&$&&$.length>1&&u.call($[0],x,function(){for(N=1;N<arguments.length-2;N++)arguments[N]===void 0&&($[N]=void 0)}),$}),a.exports=m},"94ca":function(a,o,l){var i=l("d039"),r=/#|\.prototype\./,d=function(g,T){var S=m[u(g)];return S==_?!0:S==h?!1:typeof T=="function"?i(T):!!T},u=d.normalize=function(g){return String(g).replace(r,".").toLowerCase()},m=d.data={},h=d.NATIVE="N",_=d.POLYFILL="P";a.exports=d},"99af":function(a,o,l){var i=l("23e7"),r=l("d039"),d=l("e8b5"),u=l("861d"),m=l("7b0b"),h=l("50c4"),_=l("8418"),g=l("65f0"),T=l("1dde"),S=l("b622"),b=l("2d00"),A=S("isConcatSpreadable"),y=9007199254740991,x="Maximum allowed index exceeded",$=b>=51||!r(function(){var H=[];return H[A]=!1,H.concat()[0]!==H}),N=T("concat"),w=function(H){if(!u(H))return!1;var B=H[A];return B!==void 0?!!B:d(H)},D=!$||!N;i({target:"Array",proto:!0,forced:D},{concat:function(B){var k=m(this),U=g(k,0),G=0,L,M,R,P,W;for(L=-1,R=arguments.length;L<R;L++)if(W=L===-1?k:arguments[L],w(W)){if(P=h(W.length),G+P>y)throw TypeError(x);for(M=0;M<P;M++,G++)M in W&&_(U,G,W[M])}else{if(G>=y)throw TypeError(x);_(U,G++,W)}return U.length=G,U}})},"9bdd":function(a,o,l){var i=l("825a");a.exports=function(r,d,u,m){try{return m?d(i(u)[0],u[1]):d(u)}catch(_){var h=r.return;throw h!==void 0&&i(h.call(r)),_}}},"9bf2":function(a,o,l){var i=l("83ab"),r=l("0cfb"),d=l("825a"),u=l("c04e"),m=Object.defineProperty;o.f=i?m:function(_,g,T){if(d(_),g=u(g,!0),d(T),r)try{return m(_,g,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported");return"value"in T&&(_[g]=T.value),_}},"9ed3":function(a,o,l){var i=l("ae93").IteratorPrototype,r=l("7c73"),d=l("5c6c"),u=l("d44e"),m=l("3f8c"),h=function(){return this};a.exports=function(_,g,T){var S=g+" Iterator";return _.prototype=r(i,{next:d(1,T)}),u(_,S,!1,!0),m[S]=h,_}},"9f7f":function(a,o,l){var i=l("d039");function r(d,u){return RegExp(d,u)}o.UNSUPPORTED_Y=i(function(){var d=r("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),o.BROKEN_CARET=i(function(){var d=r("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(a,o,l){var i=l("e8b5"),r=l("50c4"),d=l("0366"),u=function(m,h,_,g,T,S,b,A){for(var y=T,x=0,$=b?d(b,A,3):!1,N;x<g;){if(x in _){if(N=$?$(_[x],x,h):_[x],S>0&&i(N))y=u(m,h,N,r(N.length),y,S-1)-1;else{if(y>=9007199254740991)throw TypeError("Exceed the acceptable array length");m[y]=N}y++}x++}return y};a.exports=u},a352:function(a,o){a.exports=s},a434:function(a,o,l){var i=l("23e7"),r=l("23cb"),d=l("a691"),u=l("50c4"),m=l("7b0b"),h=l("65f0"),_=l("8418"),g=l("1dde"),T=l("ae40"),S=g("splice"),b=T("splice",{ACCESSORS:!0,0:0,1:2}),A=Math.max,y=Math.min,x=9007199254740991,$="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!S||!b},{splice:function(w,D){var H=m(this),B=u(H.length),k=r(w,B),U=arguments.length,G,L,M,R,P,W;if(U===0?G=L=0:U===1?(G=0,L=B-k):(G=U-2,L=y(A(d(D),0),B-k)),B+G-L>x)throw TypeError($);for(M=h(H,L),R=0;R<L;R++)P=k+R,P in H&&_(M,R,H[P]);if(M.length=L,G<L){for(R=k;R<B-L;R++)P=R+L,W=R+G,P in H?H[W]=H[P]:delete H[W];for(R=B;R>B-L+G;R--)delete H[R-1]}else if(G>L)for(R=B-L;R>k;R--)P=R+L-1,W=R+G-1,P in H?H[W]=H[P]:delete H[W];for(R=0;R<G;R++)H[R+k]=arguments[R+2];return H.length=B-L+G,M}})},a4d3:function(a,o,l){var i=l("23e7"),r=l("da84"),d=l("d066"),u=l("c430"),m=l("83ab"),h=l("4930"),_=l("fdbf"),g=l("d039"),T=l("5135"),S=l("e8b5"),b=l("861d"),A=l("825a"),y=l("7b0b"),x=l("fc6a"),$=l("c04e"),N=l("5c6c"),w=l("7c73"),D=l("df75"),H=l("241c"),B=l("057f"),k=l("7418"),U=l("06cf"),G=l("9bf2"),L=l("d1e7"),M=l("9112"),R=l("6eeb"),P=l("5692"),W=l("f772"),Q=l("d012"),Z=l("90e3"),j=l("b622"),X=l("e538"),q=l("746f"),se=l("d44e"),he=l("69f3"),be=l("b727").forEach,ne=W("hidden"),J="Symbol",ue="prototype",Ne=j("toPrimitive"),Re=he.set,Ze=he.getterFor(J),Xe=Object[ue],Qe=r.Symbol,Je=d("JSON","stringify"),st=U.f,ht=G.f,wt=B.f,ee=L.f,de=P("symbols"),ie=P("op-symbols"),Ce=P("string-to-symbol-registry"),Se=P("symbol-to-string-registry"),je=P("wks"),Ke=r.QObject,$e=!Ke||!Ke[ue]||!Ke[ue].findChild,Be=m&&g(function(){return w(ht({},"a",{get:function(){return ht(this,"a",{value:7}).a}})).a!=7})?function(Ie,Oe,we){var Ye=st(Xe,Oe);Ye&&delete Xe[Oe],ht(Ie,Oe,we),Ye&&Ie!==Xe&&ht(Xe,Oe,Ye)}:ht,Ue=function(Ie,Oe){var we=de[Ie]=w(Qe[ue]);return Re(we,{type:J,tag:Ie,description:Oe}),m||(we.description=Oe),we},ge=_?function(Ie){return typeof Ie=="symbol"}:function(Ie){return Object(Ie)instanceof Qe},ae=function(Oe,we,Ye){Oe===Xe&&ae(ie,we,Ye),A(Oe);var He=$(we,!0);return A(Ye),T(de,He)?(Ye.enumerable?(T(Oe,ne)&&Oe[ne][He]&&(Oe[ne][He]=!1),Ye=w(Ye,{enumerable:N(0,!1)})):(T(Oe,ne)||ht(Oe,ne,N(1,{})),Oe[ne][He]=!0),Be(Oe,He,Ye)):ht(Oe,He,Ye)},ve=function(Oe,we){A(Oe);var Ye=x(we),He=D(Ye).concat(ye(Ye));return be(He,function(et){(!m||oe.call(Ye,et))&&ae(Oe,et,Ye[et])}),Oe},Y=function(Oe,we){return we===void 0?w(Oe):ve(w(Oe),we)},oe=function(Oe){var we=$(Oe,!0),Ye=ee.call(this,we);return this===Xe&&T(de,we)&&!T(ie,we)?!1:Ye||!T(this,we)||!T(de,we)||T(this,ne)&&this[ne][we]?Ye:!0},te=function(Oe,we){var Ye=x(Oe),He=$(we,!0);if(!(Ye===Xe&&T(de,He)&&!T(ie,He))){var et=st(Ye,He);return et&&T(de,He)&&!(T(Ye,ne)&&Ye[ne][He])&&(et.enumerable=!0),et}},le=function(Oe){var we=wt(x(Oe)),Ye=[];return be(we,function(He){!T(de,He)&&!T(Q,He)&&Ye.push(He)}),Ye},ye=function(Oe){var we=Oe===Xe,Ye=wt(we?ie:x(Oe)),He=[];return be(Ye,function(et){T(de,et)&&(!we||T(Xe,et))&&He.push(de[et])}),He};if(h||(Qe=function(){if(this instanceof Qe)throw TypeError("Symbol is not a constructor");var Oe=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),we=Z(Oe),Ye=function(He){this===Xe&&Ye.call(ie,He),T(this,ne)&&T(this[ne],we)&&(this[ne][we]=!1),Be(this,we,N(1,He))};return m&&$e&&Be(Xe,we,{configurable:!0,set:Ye}),Ue(we,Oe)},R(Qe[ue],"toString",function(){return Ze(this).tag}),R(Qe,"withoutSetter",function(Ie){return Ue(Z(Ie),Ie)}),L.f=oe,G.f=ae,U.f=te,H.f=B.f=le,k.f=ye,X.f=function(Ie){return Ue(j(Ie),Ie)},m&&(ht(Qe[ue],"description",{configurable:!0,get:function(){return Ze(this).description}}),u||R(Xe,"propertyIsEnumerable",oe,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Qe}),be(D(je),function(Ie){q(Ie)}),i({target:J,stat:!0,forced:!h},{for:function(Ie){var Oe=String(Ie);if(T(Ce,Oe))return Ce[Oe];var we=Qe(Oe);return Ce[Oe]=we,Se[we]=Oe,we},keyFor:function(Oe){if(!ge(Oe))throw TypeError(Oe+" is not a symbol");if(T(Se,Oe))return Se[Oe]},useSetter:function(){$e=!0},useSimple:function(){$e=!1}}),i({target:"Object",stat:!0,forced:!h,sham:!m},{create:Y,defineProperty:ae,defineProperties:ve,getOwnPropertyDescriptor:te}),i({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:le,getOwnPropertySymbols:ye}),i({target:"Object",stat:!0,forced:g(function(){k.f(1)})},{getOwnPropertySymbols:function(Oe){return k.f(y(Oe))}}),Je){var me=!h||g(function(){var Ie=Qe();return Je([Ie])!="[null]"||Je({a:Ie})!="{}"||Je(Object(Ie))!="{}"});i({target:"JSON",stat:!0,forced:me},{stringify:function(Oe,we,Ye){for(var He=[Oe],et=1,bt;arguments.length>et;)He.push(arguments[et++]);if(bt=we,!(!b(we)&&Oe===void 0||ge(Oe)))return S(we)||(we=function(Nt,ct){if(typeof bt=="function"&&(ct=bt.call(this,Nt,ct)),!ge(ct))return ct}),He[1]=we,Je.apply(null,He)}})}Qe[ue][Ne]||M(Qe[ue],Ne,Qe[ue].valueOf),se(Qe,J),Q[ne]=!0},a630:function(a,o,l){var i=l("23e7"),r=l("4df4"),d=l("1c7e"),u=!d(function(m){Array.from(m)});i({target:"Array",stat:!0,forced:u},{from:r})},a640:function(a,o,l){var i=l("d039");a.exports=function(r,d){var u=[][r];return!!u&&i(function(){u.call(null,d||function(){throw 1},1)})}},a691:function(a,o){var l=Math.ceil,i=Math.floor;a.exports=function(r){return isNaN(r=+r)?0:(r>0?i:l)(r)}},ab13:function(a,o,l){var i=l("b622"),r=i("match");a.exports=function(d){var u=/./;try{"/./"[d](u)}catch{try{return u[r]=!1,"/./"[d](u)}catch{}}return!1}},ac1f:function(a,o,l){var i=l("23e7"),r=l("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(a,o,l){var i=l("825a");a.exports=function(){var r=i(this),d="";return r.global&&(d+="g"),r.ignoreCase&&(d+="i"),r.multiline&&(d+="m"),r.dotAll&&(d+="s"),r.unicode&&(d+="u"),r.sticky&&(d+="y"),d}},ae40:function(a,o,l){var i=l("83ab"),r=l("d039"),d=l("5135"),u=Object.defineProperty,m={},h=function(_){throw _};a.exports=function(_,g){if(d(m,_))return m[_];g||(g={});var T=[][_],S=d(g,"ACCESSORS")?g.ACCESSORS:!1,b=d(g,0)?g[0]:h,A=d(g,1)?g[1]:void 0;return m[_]=!!T&&!r(function(){if(S&&!i)return!0;var y={length:-1};S?u(y,1,{enumerable:!0,get:h}):y[1]=1,T.call(y,b,A)})}},ae93:function(a,o,l){var i=l("e163"),r=l("9112"),d=l("5135"),u=l("b622"),m=l("c430"),h=u("iterator"),_=!1,g=function(){return this},T,S,b;[].keys&&(b=[].keys(),"next"in b?(S=i(i(b)),S!==Object.prototype&&(T=S)):_=!0),T==null&&(T={}),!m&&!d(T,h)&&r(T,h,g),a.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:_}},b041:function(a,o,l){var i=l("00ee"),r=l("f5df");a.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(a,o,l){var i=l("83ab"),r=l("9bf2").f,d=Function.prototype,u=d.toString,m=/^\s*function ([^ (]*)/,h="name";i&&!(h in d)&&r(d,h,{configurable:!0,get:function(){try{return u.call(this).match(m)[1]}catch{return""}}})},b622:function(a,o,l){var i=l("da84"),r=l("5692"),d=l("5135"),u=l("90e3"),m=l("4930"),h=l("fdbf"),_=r("wks"),g=i.Symbol,T=h?g:g&&g.withoutSetter||u;a.exports=function(S){return d(_,S)||(m&&d(g,S)?_[S]=g[S]:_[S]=T("Symbol."+S)),_[S]}},b64b:function(a,o,l){var i=l("23e7"),r=l("7b0b"),d=l("df75"),u=l("d039"),m=u(function(){d(1)});i({target:"Object",stat:!0,forced:m},{keys:function(_){return d(r(_))}})},b727:function(a,o,l){var i=l("0366"),r=l("44ad"),d=l("7b0b"),u=l("50c4"),m=l("65f0"),h=[].push,_=function(g){var T=g==1,S=g==2,b=g==3,A=g==4,y=g==6,x=g==5||y;return function($,N,w,D){for(var H=d($),B=r(H),k=i(N,w,3),U=u(B.length),G=0,L=D||m,M=T?L($,U):S?L($,0):void 0,R,P;U>G;G++)if((x||G in B)&&(R=B[G],P=k(R,G,H),g)){if(T)M[G]=P;else if(P)switch(g){case 3:return!0;case 5:return R;case 6:return G;case 2:h.call(M,R)}else if(A)return!1}return y?-1:b||A?A:M}};a.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(a,o,l){var i=l("861d");a.exports=function(r,d){if(!i(r))return r;var u,m;if(d&&typeof(u=r.toString)=="function"&&!i(m=u.call(r))||typeof(u=r.valueOf)=="function"&&!i(m=u.call(r))||!d&&typeof(u=r.toString)=="function"&&!i(m=u.call(r)))return m;throw TypeError("Can't convert object to primitive value")}},c430:function(a,o){a.exports=!1},c6b6:function(a,o){var l={}.toString;a.exports=function(i){return l.call(i).slice(8,-1)}},c6cd:function(a,o,l){var i=l("da84"),r=l("ce4e"),d="__core-js_shared__",u=i[d]||r(d,{});a.exports=u},c740:function(a,o,l){var i=l("23e7"),r=l("b727").findIndex,d=l("44d2"),u=l("ae40"),m="findIndex",h=!0,_=u(m);m in[]&&Array(1)[m](function(){h=!1}),i({target:"Array",proto:!0,forced:h||!_},{findIndex:function(T){return r(this,T,arguments.length>1?arguments[1]:void 0)}}),d(m)},c8ba:function(a,o){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}a.exports=l},c975:function(a,o,l){var i=l("23e7"),r=l("4d64").indexOf,d=l("a640"),u=l("ae40"),m=[].indexOf,h=!!m&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),g=u("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:h||!_||!g},{indexOf:function(S){return h?m.apply(this,arguments)||0:r(this,S,arguments.length>1?arguments[1]:void 0)}})},ca84:function(a,o,l){var i=l("5135"),r=l("fc6a"),d=l("4d64").indexOf,u=l("d012");a.exports=function(m,h){var _=r(m),g=0,T=[],S;for(S in _)!i(u,S)&&i(_,S)&&T.push(S);for(;h.length>g;)i(_,S=h[g++])&&(~d(T,S)||T.push(S));return T}},caad:function(a,o,l){var i=l("23e7"),r=l("4d64").includes,d=l("44d2"),u=l("ae40"),m=u("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!m},{includes:function(_){return r(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(a,o,l){var i=l("da84"),r=l("861d"),d=i.document,u=r(d)&&r(d.createElement);a.exports=function(m){return u?d.createElement(m):{}}},ce4e:function(a,o,l){var i=l("da84"),r=l("9112");a.exports=function(d,u){try{r(i,d,u)}catch{i[d]=u}return u}},d012:function(a,o){a.exports={}},d039:function(a,o){a.exports=function(l){try{return!!l()}catch{return!0}}},d066:function(a,o,l){var i=l("428f"),r=l("da84"),d=function(u){return typeof u=="function"?u:void 0};a.exports=function(u,m){return arguments.length<2?d(i[u])||d(r[u]):i[u]&&i[u][m]||r[u]&&r[u][m]}},d1e7:function(a,o,l){var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,d=r&&!i.call({1:2},1);o.f=d?function(m){var h=r(this,m);return!!h&&h.enumerable}:i},d28b:function(a,o,l){var i=l("746f");i("iterator")},d2bb:function(a,o,l){var i=l("825a"),r=l("3bbe");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,u={},m;try{m=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,m.call(u,[]),d=u instanceof Array}catch{}return function(_,g){return i(_),r(g),d?m.call(_,g):_.__proto__=g,_}}():void 0)},d3b7:function(a,o,l){var i=l("00ee"),r=l("6eeb"),d=l("b041");i||r(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(a,o,l){var i=l("9bf2").f,r=l("5135"),d=l("b622"),u=d("toStringTag");a.exports=function(m,h,_){m&&!r(m=_?m:m.prototype,u)&&i(m,u,{configurable:!0,value:h})}},d58f:function(a,o,l){var i=l("1c0b"),r=l("7b0b"),d=l("44ad"),u=l("50c4"),m=function(h){return function(_,g,T,S){i(g);var b=r(_),A=d(b),y=u(b.length),x=h?y-1:0,$=h?-1:1;if(T<2)for(;;){if(x in A){S=A[x],x+=$;break}if(x+=$,h?x<0:y<=x)throw TypeError("Reduce of empty array with no initial value")}for(;h?x>=0:y>x;x+=$)x in A&&(S=g(S,A[x],x,b));return S}};a.exports={left:m(!1),right:m(!0)}},d784:function(a,o,l){l("ac1f");var i=l("6eeb"),r=l("d039"),d=l("b622"),u=l("9263"),m=l("9112"),h=d("species"),_=!r(function(){var A=/./;return A.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(A,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),T=d("replace"),S=function(){return/./[T]?/./[T]("a","$0")==="":!1}(),b=!r(function(){var A=/(?:)/,y=A.exec;A.exec=function(){return y.apply(this,arguments)};var x="ab".split(A);return x.length!==2||x[0]!=="a"||x[1]!=="b"});a.exports=function(A,y,x,$){var N=d(A),w=!r(function(){var G={};return G[N]=function(){return 7},""[A](G)!=7}),D=w&&!r(function(){var G=!1,L=/a/;return A==="split"&&(L={},L.constructor={},L.constructor[h]=function(){return L},L.flags="",L[N]=/./[N]),L.exec=function(){return G=!0,null},L[N](""),!G});if(!w||!D||A==="replace"&&!(_&&g&&!S)||A==="split"&&!b){var H=/./[N],B=x(N,""[A],function(G,L,M,R,P){return L.exec===u?w&&!P?{done:!0,value:H.call(L,M,R)}:{done:!0,value:G.call(M,L,R)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:S}),k=B[0],U=B[1];i(String.prototype,A,k),i(RegExp.prototype,N,y==2?function(G,L){return U.call(G,this,L)}:function(G){return U.call(G,this)})}$&&m(RegExp.prototype[N],"sham",!0)}},d81d:function(a,o,l){var i=l("23e7"),r=l("b727").map,d=l("1dde"),u=l("ae40"),m=d("map"),h=u("map");i({target:"Array",proto:!0,forced:!m||!h},{map:function(g){return r(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(a,o,l){(function(i){var r=function(d){return d&&d.Math==Math&&d};a.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof i=="object"&&i)||Function("return this")()}).call(this,l("c8ba"))},dbb4:function(a,o,l){var i=l("23e7"),r=l("83ab"),d=l("56ef"),u=l("fc6a"),m=l("06cf"),h=l("8418");i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(g){for(var T=u(g),S=m.f,b=d(T),A={},y=0,x,$;b.length>y;)$=S(T,x=b[y++]),$!==void 0&&h(A,x,$);return A}})},dbf1:function(a,o,l){(function(i){l.d(o,"a",function(){return d});function r(){return typeof window<"u"?window.console:i.console}var d=r()}).call(this,l("c8ba"))},ddb0:function(a,o,l){var i=l("da84"),r=l("fdbc"),d=l("e260"),u=l("9112"),m=l("b622"),h=m("iterator"),_=m("toStringTag"),g=d.values;for(var T in r){var S=i[T],b=S&&S.prototype;if(b){if(b[h]!==g)try{u(b,h,g)}catch{b[h]=g}if(b[_]||u(b,_,T),r[T]){for(var A in d)if(b[A]!==d[A])try{u(b,A,d[A])}catch{b[A]=d[A]}}}}},df75:function(a,o,l){var i=l("ca84"),r=l("7839");a.exports=Object.keys||function(u){return i(u,r)}},e01a:function(a,o,l){var i=l("23e7"),r=l("83ab"),d=l("da84"),u=l("5135"),m=l("861d"),h=l("9bf2").f,_=l("e893"),g=d.Symbol;if(r&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var T={},S=function(){var N=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof S?new g(N):N===void 0?g():g(N);return N===""&&(T[w]=!0),w};_(S,g);var b=S.prototype=g.prototype;b.constructor=S;var A=b.toString,y=String(g("test"))=="Symbol(test)",x=/^Symbol\((.*)\)[^)]+$/;h(b,"description",{configurable:!0,get:function(){var N=m(this)?this.valueOf():this,w=A.call(N);if(u(T,N))return"";var D=y?w.slice(7,-1):w.replace(x,"$1");return D===""?void 0:D}}),i({global:!0,forced:!0},{Symbol:S})}},e163:function(a,o,l){var i=l("5135"),r=l("7b0b"),d=l("f772"),u=l("e177"),m=d("IE_PROTO"),h=Object.prototype;a.exports=u?Object.getPrototypeOf:function(_){return _=r(_),i(_,m)?_[m]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?h:null}},e177:function(a,o,l){var i=l("d039");a.exports=!i(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},e260:function(a,o,l){var i=l("fc6a"),r=l("44d2"),d=l("3f8c"),u=l("69f3"),m=l("7dd0"),h="Array Iterator",_=u.set,g=u.getterFor(h);a.exports=m(Array,"Array",function(T,S){_(this,{type:h,target:i(T),index:0,kind:S})},function(){var T=g(this),S=T.target,b=T.kind,A=T.index++;return!S||A>=S.length?(T.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:A,done:!1}:b=="values"?{value:S[A],done:!1}:{value:[A,S[A]],done:!1}},"values"),d.Arguments=d.Array,r("keys"),r("values"),r("entries")},e439:function(a,o,l){var i=l("23e7"),r=l("d039"),d=l("fc6a"),u=l("06cf").f,m=l("83ab"),h=r(function(){u(1)}),_=!m||h;i({target:"Object",stat:!0,forced:_,sham:!m},{getOwnPropertyDescriptor:function(T,S){return u(d(T),S)}})},e538:function(a,o,l){var i=l("b622");o.f=i},e893:function(a,o,l){var i=l("5135"),r=l("56ef"),d=l("06cf"),u=l("9bf2");a.exports=function(m,h){for(var _=r(h),g=u.f,T=d.f,S=0;S<_.length;S++){var b=_[S];i(m,b)||g(m,b,T(h,b))}}},e8b5:function(a,o,l){var i=l("c6b6");a.exports=Array.isArray||function(d){return i(d)=="Array"}},e95a:function(a,o,l){var i=l("b622"),r=l("3f8c"),d=i("iterator"),u=Array.prototype;a.exports=function(m){return m!==void 0&&(r.Array===m||u[d]===m)}},f5df:function(a,o,l){var i=l("00ee"),r=l("c6b6"),d=l("b622"),u=d("toStringTag"),m=r(function(){return arguments}())=="Arguments",h=function(_,g){try{return _[g]}catch{}};a.exports=i?r:function(_){var g,T,S;return _===void 0?"Undefined":_===null?"Null":typeof(T=h(g=Object(_),u))=="string"?T:m?r(g):(S=r(g))=="Object"&&typeof g.callee=="function"?"Arguments":S}},f772:function(a,o,l){var i=l("5692"),r=l("90e3"),d=i("keys");a.exports=function(u){return d[u]||(d[u]=r(u))}},fb15:function(a,o,l){if(l.r(o),typeof window<"u"){var i=window.document.currentScript;{var r=l("8875");i=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r})}var d=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(l.p=d[1])}l("99af"),l("4de4"),l("4160"),l("c975"),l("d81d"),l("a434"),l("159b"),l("a4d3"),l("e439"),l("dbb4"),l("b64b");function u(ge,ae,ve){return ae in ge?Object.defineProperty(ge,ae,{value:ve,enumerable:!0,configurable:!0,writable:!0}):ge[ae]=ve,ge}function m(ge,ae){var ve=Object.keys(ge);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(ge);ae&&(Y=Y.filter(function(oe){return Object.getOwnPropertyDescriptor(ge,oe).enumerable})),ve.push.apply(ve,Y)}return ve}function h(ge){for(var ae=1;ae<arguments.length;ae++){var ve=arguments[ae]!=null?arguments[ae]:{};ae%2?m(Object(ve),!0).forEach(function(Y){u(ge,Y,ve[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(ve)):m(Object(ve)).forEach(function(Y){Object.defineProperty(ge,Y,Object.getOwnPropertyDescriptor(ve,Y))})}return ge}function _(ge){if(Array.isArray(ge))return ge}l("e01a"),l("d28b"),l("e260"),l("d3b7"),l("3ca3"),l("ddb0");function g(ge,ae){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ge)))){var ve=[],Y=!0,oe=!1,te=void 0;try{for(var le=ge[Symbol.iterator](),ye;!(Y=(ye=le.next()).done)&&(ve.push(ye.value),!(ae&&ve.length===ae));Y=!0);}catch(me){oe=!0,te=me}finally{try{!Y&&le.return!=null&&le.return()}finally{if(oe)throw te}}return ve}}l("a630"),l("fb6a"),l("b0c0"),l("25f0");function T(ge,ae){(ae==null||ae>ge.length)&&(ae=ge.length);for(var ve=0,Y=new Array(ae);ve<ae;ve++)Y[ve]=ge[ve];return Y}function S(ge,ae){if(ge){if(typeof ge=="string")return T(ge,ae);var ve=Object.prototype.toString.call(ge).slice(8,-1);if(ve==="Object"&&ge.constructor&&(ve=ge.constructor.name),ve==="Map"||ve==="Set")return Array.from(ge);if(ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve))return T(ge,ae)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(ge,ae){return _(ge)||g(ge,ae)||S(ge,ae)||b()}function y(ge){if(Array.isArray(ge))return T(ge)}function x(ge){if(typeof Symbol<"u"&&Symbol.iterator in Object(ge))return Array.from(ge)}function $(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(ge){return y(ge)||x(ge)||S(ge)||$()}var w=l("a352"),D=l.n(w);function H(ge){ge.parentElement!==null&&ge.parentElement.removeChild(ge)}function B(ge,ae,ve){var Y=ve===0?ge.children[0]:ge.children[ve-1].nextSibling;ge.insertBefore(ae,Y)}var k=l("dbf1");l("13d5"),l("4fad"),l("ac1f"),l("5319");function U(ge){var ae=Object.create(null);return function(Y){var oe=ae[Y];return oe||(ae[Y]=ge(Y))}}var G=/-(\w)/g,L=U(function(ge){return ge.replace(G,function(ae,ve){return ve.toUpperCase()})});l("5db7"),l("73d9");var M=["Start","Add","Remove","Update","End"],R=["Choose","Unchoose","Sort","Filter","Clone"],P=["Move"],W=[P,M,R].flatMap(function(ge){return ge}).map(function(ge){return"on".concat(ge)}),Q={manage:P,manageAndEmit:M,emit:R};function Z(ge){return W.indexOf(ge)!==-1}l("caad"),l("2ca0");var j=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function X(ge){return j.includes(ge)}function q(ge){return["transition-group","TransitionGroup"].includes(ge)}function se(ge){return["id","class","role","style"].includes(ge)||ge.startsWith("data-")||ge.startsWith("aria-")||ge.startsWith("on")}function he(ge){return ge.reduce(function(ae,ve){var Y=A(ve,2),oe=Y[0],te=Y[1];return ae[oe]=te,ae},{})}function be(ge){var ae=ge.$attrs,ve=ge.componentData,Y=ve===void 0?{}:ve,oe=he(Object.entries(ae).filter(function(te){var le=A(te,2),ye=le[0];return le[1],se(ye)}));return h(h({},oe),Y)}function ne(ge){var ae=ge.$attrs,ve=ge.callBackBuilder,Y=he(J(ae));Object.entries(ve).forEach(function(te){var le=A(te,2),ye=le[0],me=le[1];Q[ye].forEach(function(Ie){Y["on".concat(Ie)]=me(Ie)})});var oe="[data-draggable]".concat(Y.draggable||"");return h(h({},Y),{},{draggable:oe})}function J(ge){return Object.entries(ge).filter(function(ae){var ve=A(ae,2),Y=ve[0];return ve[1],!se(Y)}).map(function(ae){var ve=A(ae,2),Y=ve[0],oe=ve[1];return[L(Y),oe]}).filter(function(ae){var ve=A(ae,2),Y=ve[0];return ve[1],!Z(Y)})}l("c740");function ue(ge,ae){if(!(ge instanceof ae))throw new TypeError("Cannot call a class as a function")}function Ne(ge,ae){for(var ve=0;ve<ae.length;ve++){var Y=ae[ve];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(ge,Y.key,Y)}}function Re(ge,ae,ve){return ae&&Ne(ge.prototype,ae),ge}var Ze=function(ae){var ve=ae.el;return ve},Xe=function(ae,ve){return ae.__draggable_context=ve},Qe=function(ae){return ae.__draggable_context},Je=function(){function ge(ae){var ve=ae.nodes,Y=ve.header,oe=ve.default,te=ve.footer,le=ae.root,ye=ae.realList;ue(this,ge),this.defaultNodes=oe,this.children=[].concat(N(Y),N(oe),N(te)),this.externalComponent=le.externalComponent,this.rootTransition=le.transition,this.tag=le.tag,this.realList=ye}return Re(ge,[{key:"render",value:function(ve,Y){var oe=this.tag,te=this.children,le=this._isRootComponent,ye=le?{default:function(){return te}}:te;return ve(oe,Y,ye)}},{key:"updated",value:function(){var ve=this.defaultNodes,Y=this.realList;ve.forEach(function(oe,te){Xe(Ze(oe),{element:Y[te],index:te})})}},{key:"getUnderlyingVm",value:function(ve){return Qe(ve)}},{key:"getVmIndexFromDomIndex",value:function(ve,Y){var oe=this.defaultNodes,te=oe.length,le=Y.children,ye=le.item(ve);if(ye===null)return te;var me=Qe(ye);if(me)return me.index;if(te===0)return 0;var Ie=Ze(oe[0]),Oe=N(le).findIndex(function(we){return we===Ie});return ve<Oe?0:te}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),ge}(),st=l("8bbf");function ht(ge,ae){var ve=ge[ae];return ve?ve():[]}function wt(ge){var ae=ge.$slots,ve=ge.realList,Y=ge.getKey,oe=ve||[],te=["header","footer"].map(function(we){return ht(ae,we)}),le=A(te,2),ye=le[0],me=le[1],Ie=ae.item;if(!Ie)throw new Error("draggable element must have an item slot");var Oe=oe.flatMap(function(we,Ye){return Ie({element:we,index:Ye}).map(function(He){return He.key=Y(we),He.props=h(h({},He.props||{}),{},{"data-draggable":!0}),He})});if(Oe.length!==oe.length)throw new Error("Item slot must have only one child");return{header:ye,footer:me,default:Oe}}function ee(ge){var ae=q(ge),ve=!X(ge)&&!ae;return{transition:ae,externalComponent:ve,tag:ve?Object(st.resolveComponent)(ge):ae?st.TransitionGroup:ge}}function de(ge){var ae=ge.$slots,ve=ge.tag,Y=ge.realList,oe=ge.getKey,te=wt({$slots:ae,realList:Y,getKey:oe}),le=ee(ve);return new Je({nodes:te,root:le,realList:Y})}function ie(ge,ae){var ve=this;Object(st.nextTick)(function(){return ve.$emit(ge.toLowerCase(),ae)})}function Ce(ge){var ae=this;return function(ve,Y){if(ae.realList!==null)return ae["onDrag".concat(ge)](ve,Y)}}function Se(ge){var ae=this,ve=Ce.call(this,ge);return function(Y,oe){ve.call(ae,Y,oe),ie.call(ae,ge,Y)}}var je=null,Ke={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ae){return ae}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},$e=["update:modelValue","change"].concat(N([].concat(N(Q.manageAndEmit),N(Q.emit)).map(function(ge){return ge.toLowerCase()}))),Be=Object(st.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ke,emits:$e,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ae=this.$slots,ve=this.$attrs,Y=this.tag,oe=this.componentData,te=this.realList,le=this.getKey,ye=de({$slots:ae,tag:Y,realList:te,getKey:le});this.componentStructure=ye;var me=be({$attrs:ve,componentData:oe});return ye.render(st.h,me)}catch(Ie){return this.error=!0,Object(st.h)("pre",{style:{color:"red"}},Ie.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&k.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ae=this;if(!this.error){var ve=this.$attrs,Y=this.$el,oe=this.componentStructure;oe.updated();var te=ne({$attrs:ve,callBackBuilder:{manageAndEmit:function(me){return Se.call(ae,me)},emit:function(me){return ie.bind(ae,me)},manage:function(me){return Ce.call(ae,me)}}}),le=Y.nodeType===1?Y:Y.parentElement;this._sortable=new D.a(le,te),this.targetDomElement=le,le.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ae=this.list;return ae||this.modelValue},getKey:function(){var ae=this.itemKey;return typeof ae=="function"?ae:function(ve){return ve[ae]}}},watch:{$attrs:{handler:function(ae){var ve=this._sortable;ve&&J(ae).forEach(function(Y){var oe=A(Y,2),te=oe[0],le=oe[1];ve.option(te,le)})},deep:!0}},methods:{getUnderlyingVm:function(ae){return this.componentStructure.getUnderlyingVm(ae)||null},getUnderlyingPotencialDraggableComponent:function(ae){return ae.__draggable_component__},emitChanges:function(ae){var ve=this;Object(st.nextTick)(function(){return ve.$emit("change",ae)})},alterList:function(ae){if(this.list){ae(this.list);return}var ve=N(this.modelValue);ae(ve),this.$emit("update:modelValue",ve)},spliceList:function(){var ae=arguments,ve=function(oe){return oe.splice.apply(oe,N(ae))};this.alterList(ve)},updatePosition:function(ae,ve){var Y=function(te){return te.splice(ve,0,te.splice(ae,1)[0])};this.alterList(Y)},getRelatedContextFromMoveEvent:function(ae){var ve=ae.to,Y=ae.related,oe=this.getUnderlyingPotencialDraggableComponent(ve);if(!oe)return{component:oe};var te=oe.realList,le={list:te,component:oe};if(ve!==Y&&te){var ye=oe.getUnderlyingVm(Y)||{};return h(h({},ye),le)}return le},getVmIndexFromDomIndex:function(ae){return this.componentStructure.getVmIndexFromDomIndex(ae,this.targetDomElement)},onDragStart:function(ae){this.context=this.getUnderlyingVm(ae.item),ae.item._underlying_vm_=this.clone(this.context.element),je=ae.item},onDragAdd:function(ae){var ve=ae.item._underlying_vm_;if(ve!==void 0){H(ae.item);var Y=this.getVmIndexFromDomIndex(ae.newIndex);this.spliceList(Y,0,ve);var oe={element:ve,newIndex:Y};this.emitChanges({added:oe})}},onDragRemove:function(ae){if(B(this.$el,ae.item,ae.oldIndex),ae.pullMode==="clone"){H(ae.clone);return}var ve=this.context,Y=ve.index,oe=ve.element;this.spliceList(Y,1);var te={element:oe,oldIndex:Y};this.emitChanges({removed:te})},onDragUpdate:function(ae){H(ae.item),B(ae.from,ae.item,ae.oldIndex);var ve=this.context.index,Y=this.getVmIndexFromDomIndex(ae.newIndex);this.updatePosition(ve,Y);var oe={element:this.context.element,oldIndex:ve,newIndex:Y};this.emitChanges({moved:oe})},computeFutureIndex:function(ae,ve){if(!ae.element)return 0;var Y=N(ve.to.children).filter(function(ye){return ye.style.display!=="none"}),oe=Y.indexOf(ve.related),te=ae.component.getVmIndexFromDomIndex(oe),le=Y.indexOf(je)!==-1;return le||!ve.willInsertAfter?te:te+1},onDragMove:function(ae,ve){var Y=this.move,oe=this.realList;if(!Y||!oe)return!0;var te=this.getRelatedContextFromMoveEvent(ae),le=this.computeFutureIndex(te,ae),ye=h(h({},this.context),{},{futureIndex:le}),me=h(h({},ae),{},{relatedContext:te,draggedContext:ye});return Y(me,ve)},onDragEnd:function(){je=null}}}),Ue=Be;o.default=Ue},fb6a:function(a,o,l){var i=l("23e7"),r=l("861d"),d=l("e8b5"),u=l("23cb"),m=l("50c4"),h=l("fc6a"),_=l("8418"),g=l("b622"),T=l("1dde"),S=l("ae40"),b=T("slice"),A=S("slice",{ACCESSORS:!0,0:0,1:2}),y=g("species"),x=[].slice,$=Math.max;i({target:"Array",proto:!0,forced:!b||!A},{slice:function(w,D){var H=h(this),B=m(H.length),k=u(w,B),U=u(D===void 0?B:D,B),G,L,M;if(d(H)&&(G=H.constructor,typeof G=="function"&&(G===Array||d(G.prototype))?G=void 0:r(G)&&(G=G[y],G===null&&(G=void 0)),G===Array||G===void 0))return x.call(H,k,U);for(L=new(G===void 0?Array:G)($(U-k,0)),M=0;k<U;k++,M++)k in H&&_(L,M,H[k]);return L.length=M,L}})},fc6a:function(a,o,l){var i=l("44ad"),r=l("1d80");a.exports=function(d){return i(r(d))}},fdbc:function(a,o){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(a,o,l){var i=l("4930");a.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Sy);var TY=Sy.exports;const kr=sg(TY),AY={components:{Draggable:kr,ToggleSwitch:so},props:{preChatFields:{type:Array,default:()=>[]}},emits:["update","dragEnd"],data(){return{preChatFieldOptions:this.preChatFields}},watch:{preChatFields(){this.preChatFieldOptions=this.preChatFields}},methods:{isFieldEditable(e){return!e.enabled},handlePreChatFieldOptions(e,t,n){this.$emit("update",e,t,n)},onDragEnd(){this.$emit("dragEnd",this.preChatFieldOptions)}}},yY={class:"border-b border-n-weak"},SY={class:"pre-chat-field"},IY={class:"pre-chat-field"},CY={class:"pre-chat-field"},xY=["onUpdate:modelValue","value","disabled","onClick"],NY=["onUpdate:modelValue","disabled"],OY=["onUpdate:modelValue","disabled"];function wY(e,t,n,s,a,o){const l=z("fluent-icon"),i=z("ToggleSwitch"),r=z("Draggable");return p(),V(r,{modelValue:a.preChatFieldOptions,"onUpdate:modelValue":t[0]||(t[0]=d=>a.preChatFieldOptions=d),tag:"tbody","item-key":"name",onEnd:o.onDragEnd},{item:K(({element:d})=>[c("tr",yY,[c("td",SY,[v(l,{icon:"drag"})]),c("td",IY,[v(i,{"model-value":d.enabled,onChange:u=>o.handlePreChatFieldOptions(u,"enabled",d)},null,8,["model-value","onChange"])]),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},E(d.name),3),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},E(d.type),3),c("td",CY,[pe(c("input",{"onUpdate:modelValue":u=>d.required=u,type:"checkbox",value:`${d.name}-required`,disabled:!d.enabled,onClick:u=>o.handlePreChatFieldOptions(u,"required",d)},null,8,xY),[[Xt,d.required]])]),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},[pe(c("input",{"onUpdate:modelValue":u=>d.label=u,type:"text",disabled:o.isFieldEditable(d)},null,8,NY),[[mt,d.label]])],2),c("td",{class:re(["pre-chat-field",{"disabled-text":!d.enabled}])},[pe(c("input",{"onUpdate:modelValue":u=>d.placeholder=u,type:"text",disabled:o.isFieldEditable(d)},null,8,OY),[[mt,d.placeholder]])],2)])]),_:1},8,["modelValue","onEnd"])}const RY=Fe(AY,[["render",wY],["__scopeId","data-v-8bd42b45"]]),Hu=Object.fromEntries(Object.entries(tx).filter(([e])=>e.includes("en"))).en,$Y={emailAddress:{key:"EMAIL_ADDRESS",label:"Email Id",placeholder:"Please enter your email address"},fullName:{key:"FULL_NAME",label:"Full Name",placeholder:"Please enter your full name"},phoneNumber:{key:"PHONE_NUMBER",label:"Phone Number",placeholder:"Please enter your phone number"}},MY=({key:e,label:t})=>Hu.PRE_CHAT_FORM.FIELDS[e]?Hu.PRE_CHAT_FORM.FIELDS[e].LABEL:t,kY=({key:e,placeholder:t})=>Hu.PRE_CHAT_FORM.FIELDS[e]?Hu.PRE_CHAT_FORM.FIELDS[e].PLACEHOLDER:t,LY=({standardFields:e,customAttributes:t})=>{let n=[];const{pre_chat_fields:s}=e;return t.forEach(a=>{s.find(l=>l.name===a.attribute_key)||n.push({label:a.attribute_display_name,placeholder:a.attribute_display_name,name:a.attribute_key,type:a.attribute_display_type,values:a.attribute_values,field_type:a.attribute_model,regex_pattern:a.regex_pattern,regex_cue:a.regex_cue,required:!1,enabled:!1})}),n},DY=({preChatFields:e})=>e.map(t=>({...t,label:MY({key:t.name,label:t.label?t.label:t.name}),placeholder:kY({key:t.name,placeholder:t.placeholder?t.placeholder:t.name})})),PY=({preChatFormOptions:e={},customAttributes:t=[]})=>{const{pre_chat_message:n,pre_chat_fields:s}=e;let a={},o={};const l=DY({preChatFields:s});return a=LY({standardFields:{pre_chat_fields:l},customAttributes:t}),o=[...l,...a],{pre_chat_message:n,pre_chat_fields:o}},BY={components:{PreChatFields:RY,WootMessageEditor:nl,NextButton:ce},props:{inbox:{type:Object,default:()=>({})}},data(){return{preChatFormEnabled:!1,preChatMessage:"",preChatFields:[]}},computed:{...St({uiFlags:"inboxes/getUIFlags",customAttributes:"attributes/getAttributes"}),preChatFieldOptions(){const{pre_chat_form_options:e}=this.inbox;return PY({preChatFormOptions:e,customAttributes:this.customAttributes})}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{pre_chat_form_enabled:e}=this.inbox;this.preChatFormEnabled=e;const{pre_chat_message:t,pre_chat_fields:n}=this.preChatFieldOptions||{};this.preChatMessage=t,this.preChatFields=n},isFieldEditable(e){return!!$Y[e.name]||!e.enabled},handlePreChatFieldOptions(e,t,n){this.preChatFields.forEach((s,a)=>{s.name===n.name&&(this.preChatFields[a][t]=!n[t])})},changePreChatFieldFieldsOrder(e){this.preChatFields=e},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{pre_chat_form_enabled:this.preChatFormEnabled,pre_chat_form_options:{pre_chat_message:this.preChatMessage,pre_chat_fields:this.preChatFields}}};await this.$store.dispatch("inboxes/updateInbox",e),_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}}},FY={class:"mx-8 my-2 text-base"},UY={class:"mx-0 mt-6 mb-3"},GY={class:"w-1/4"},VY={value:!0},HY={value:!1},WY={key:0},KY={class:"mt-4"},zY={class:"table w-full table-striped mt-4"},jY={class:"thead-dark"},YY={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},XY={scope:"col"},qY={scope:"col"},ZY={scope:"col"},QY={scope:"col"},JY={scope:"col"},eX={class:"w-auto my-4"};function tX(e,t,n,s,a,o){const l=z("WootMessageEditor"),i=z("PreChatFields"),r=z("NextButton");return p(),f("div",FY,[c("div",UY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.DESCRIPTION")),1),c("form",{class:"flex flex-col",onSubmit:t[2]||(t[2]=ze((...d)=>o.updateInbox&&o.updateInbox(...d),["prevent"]))},[c("label",GY,[Ee(E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.preChatFormEnabled=d)},[c("option",VY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.ENABLED")),1),c("option",HY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.DISABLED")),1)],512),[[zt,a.preChatFormEnabled]])]),a.preChatFormEnabled?(p(),f("div",WY,[c("div",null,[c("label",null,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.LABEL")),1),v(l,{modelValue:a.preChatMessage,"onUpdate:modelValue":t[1]||(t[1]=d=>a.preChatMessage=d),class:"message-editor",placeholder:e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),c("div",KY,[c("label",null,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS")),1),c("table",zY,[c("thead",jY,[c("tr",YY,[t[3]||(t[3]=c("th",{scope:"col"},null,-1)),t[4]||(t[4]=c("th",{scope:"col"},null,-1)),c("th",XY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.KEY")),1),c("th",qY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.TYPE")),1),c("th",ZY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.REQUIRED")),1),c("th",QY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.LABEL")),1),c("th",JY,E(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.PLACE_HOLDER")),1)])]),v(i,{"pre-chat-fields":a.preChatFields,onUpdate:o.handlePreChatFieldOptions,onDragEnd:o.changePreChatFieldFieldsOrder},null,8,["pre-chat-fields","onUpdate","onDragEnd"])])])])):O("",!0),c("div",eX,[v(r,{type:"submit",label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE_PRE_CHAT_FORM_SETTINGS"),"is-loading":e.uiFlags.isUpdating},null,8,["label","is-loading"])])],32)])}const nX=Fe(BY,[["render",tX],["__scopeId","data-v-26636f87"]]),Ld=nx(30),sX={components:{},props:{dayName:{type:String,required:!0},timeSlot:{type:Object,default:()=>({from:"",to:""})}},emits:["update"],computed:{fromTimeSlots(){return Ld},toTimeSlots(){return Ld.filter(e=>e!=="12:00 AM")},isDayEnabled:{get(){return!!(this.timeSlot.from&&this.timeSlot.to)},set(e){const t=e?{...this.timeSlot,from:Ld[0],to:Ld[16],valid:!0,openAllDay:!1}:{...this.timeSlot,from:"",to:"",valid:!1,openAllDay:!1};this.$emit("update",t)}},fromTime:{get(){return this.timeSlot.from},set(e){const t=ic(e,"hh:mm a",new Date),n=lu(this.toDate,t)/60>0;this.$emit("update",{...this.timeSlot,from:e,valid:n})}},toTime:{get(){return this.timeSlot.to},set(e){const t=ic(e,"hh:mm a",new Date);if(e==="12:00 AM")this.$emit("update",{...this.timeSlot,to:e,valid:!0});else{const n=lu(t,this.fromDate)/60>0;this.$emit("update",{...this.timeSlot,to:e,valid:n})}}},fromDate(){return ic(this.fromTime,"hh:mm a",new Date)},toDate(){return ic(this.toTime,"hh:mm a",new Date)},totalHours(){return this.timeSlot.openAllDay?24:lu(this.toDate,this.fromDate)/60},hasError(){return!this.timeSlot.valid},isOpenAllDay:{get(){return this.timeSlot.openAllDay},set(e){e?this.$emit("update",{...this.timeSlot,from:"12:00 AM",to:"11:59 PM",valid:!0,openAllDay:e}):this.$emit("update",{...this.timeSlot,from:"09:00 AM",to:"05:00 PM",valid:!0,openAllDay:e})}}}},aX={class:"day-wrap flex py-2 gap-1 items-center px-0 min-h-[3rem] box-content border-b border-solid border-n-weak"},oX={class:"checkbox-wrap flex items-center"},lX=["title"],iX={class:"day flex items-center py-0 px-3 text-sm font-medium flex-shrink-0 min-w-28"},rX={key:0,class:"flex flex-col flex-shrink-0 flex-grow relative"},cX={class:"flex items-center flex-shrink-0 flex-grow"},dX={class:"checkbox-wrap flex items-center open-all-day mr-6"},uX=["title"],pX={class:"text-sm font-medium ml-1"},mX={class:"separator-icon flex items-center py-0 px-3"},hX={key:0,class:"date-error pt-1"},fX={class:"error text-xs text-n-ruby-9"},gX={key:1,class:"flex items-center flex-shrink-0 flex-grow text-sm text-n-slate-11"},_X={key:0,class:"label bg-n-brand/10 dark:bg-n-brand/30 text-n-blue-text text-xs inline-block px-2 py-1 rounded-lg cursor-default whitespace-nowrap"};function vX(e,t,n,s,a,o){const l=z("multiselect"),i=z("fluent-icon");return p(),f("div",aX,[c("div",oX,[pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.isDayEnabled=r),name:"enable-day",class:"m-0",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.ENABLE")},null,8,lX),[[Xt,o.isDayEnabled]])]),c("div",iX,[c("span",null,E(n.dayName),1)]),o.isDayEnabled?(p(),f("div",rX,[c("div",cX,[c("div",dX,[pe(c("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.isOpenAllDay=r),name:"enable-open-all-day",class:"enable-checkbox text-sm font-medium",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")},null,8,uX),[[Xt,o.isOpenAllDay]]),c("span",pX,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")),1)]),v(l,{modelValue:o.fromTime,"onUpdate:modelValue":t[2]||(t[2]=r=>o.fromTime=r),options:o.fromTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:o.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"]),c("div",mX,[v(i,{icon:"subtract",type:"solid",size:"16"})]),v(l,{modelValue:o.toTime,"onUpdate:modelValue":t[3]||(t[3]=r=>o.toTime=r),options:o.toTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:o.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"])]),o.hasError?(p(),f("div",hX,[c("span",fX,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.VALIDATION_ERROR")),1)])):O("",!0)])):(p(),f("div",gX,[c("span",null,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.UNAVAILABLE")),1)])),c("div",null,[o.isDayEnabled&&!o.hasError?(p(),f("span",_X,E(o.totalHours)+" "+E(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.HOURS")),1)):O("",!0)])])}const bX=Fe(sX,[["render",vX],["__scopeId","data-v-e852b159"]]),a0={label:"Pacific Time (US & Canada) (GMT-07:00)",value:"America/Los_Angeles"},EX={components:{SettingsSection:Bi,BusinessDay:bX,NextButton:ce,WootMessageEditor:nl},mixins:[Mr],props:{inbox:{type:Object,default:()=>({})}},data(){return{isBusinessHoursEnabled:!1,unavailableMessage:"",timeZone:a0,dayNames:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeSlots:[...fv]}},computed:{...St({uiFlags:"inboxes/getUIFlags"}),hasError(){return this.isBusinessHoursEnabled?this.timeSlots.filter(e=>e.from&&!e.valid).length>0:!1},timeZones(){return[...ax()]},isRichEditorEnabled(){return!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{working_hours_enabled:e=!1,out_of_office_message:t,working_hours:n=[],timezone:s}=this.inbox,a=hv(n).length?hv(n):fv;this.isBusinessHoursEnabled=e,this.unavailableMessage=t||"",this.timeSlots=a,this.timeZone=this.timeZones.find(o=>s===o.value)||a0},onSlotUpdate(e,t){this.timeSlots=this.timeSlots.map(n=>n.day===e?t:n)},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,working_hours_enabled:this.isBusinessHoursEnabled,out_of_office_message:this.unavailableMessage,working_hours:sx(this.timeSlots),timezone:this.timeZone.value,channel:{}};await this.$store.dispatch("inboxes/updateInbox",e),_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){_e(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},TX={class:"mx-8"},AX={for:"toggle-business-hours",class:"toggle-input-wrap"},yX={class:"mb-4 text-n-slate-11"},SX={key:0,class:"mb-6"},IX={class:"unavailable-input-wrap"},CX={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},xX={class:"timezone-input-wrap"};function NX(e,t,n,s,a,o){const l=z("WootMessageEditor"),i=z("multiselect"),r=z("BusinessDay"),d=z("NextButton"),u=z("SettingsSection");return p(),f("div",TX,[v(u,{title:e.$t("INBOX_MGMT.BUSINESS_HOURS.TITLE"),"sub-title":e.$t("INBOX_MGMT.BUSINESS_HOURS.SUBTITLE")},{default:K(()=>[c("form",{onSubmit:t[4]||(t[4]=ze((...m)=>o.updateInbox&&o.updateInbox(...m),["prevent"]))},[c("label",AX,[pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.isBusinessHoursEnabled=m),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-business-hours"},null,512),[[Xt,a.isBusinessHoursEnabled]]),Ee(" "+E(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_AVAILABILITY")),1)]),c("p",yX,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_HELP")),1),a.isBusinessHoursEnabled?(p(),f("div",SX,[c("div",null,[c("label",IX,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.UNAVAILABLE_MESSAGE_LABEL")),1),o.isRichEditorEnabled?(p(),f("div",CX,[v(l,{modelValue:a.unavailableMessage,"onUpdate:modelValue":t[1]||(t[1]=m=>a.unavailableMessage=m),"enable-variables":"","is-format-mode":"","min-height":4},null,8,["modelValue"])])):pe((p(),f("textarea",{key:1,"onUpdate:modelValue":t[2]||(t[2]=m=>a.unavailableMessage=m),type:"text"},null,512)),[[mt,a.unavailableMessage]])]),c("div",xX,[c("label",null,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.TIMEZONE_LABEL")),1),v(i,{modelValue:a.timeZone,"onUpdate:modelValue":t[3]||(t[3]=m=>a.timeZone=m),options:o.timeZones,"deselect-label":"","select-label":"","selected-label":"","track-by":"value",label:"label","close-on-select":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1},null,8,["modelValue","options","placeholder"])]),c("label",null,E(e.$t("INBOX_MGMT.BUSINESS_HOURS.WEEKLY_TITLE")),1),(p(!0),f(fe,null,Ae(a.timeSlots,m=>(p(),V(r,{key:m.day,"day-name":a.dayNames[m.day],"time-slot":m,onUpdate:h=>o.onSlotUpdate(m.day,h)},null,8,["day-name","time-slot","onUpdate"]))),128))])):O("",!0),v(d,{type:"submit",label:e.$t("INBOX_MGMT.BUSINESS_HOURS.UPDATE"),"is-loading":e.uiFlags.isUpdating,disabled:o.hasError},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const OX=Fe(EX,[["render",NX],["__scopeId","data-v-76b4d2fe"]]),wX={components:{SettingsSection:Bi,NextButton:ce},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:Lt()}},data(){return{isIMAPEnabled:!1,address:"",port:"",login:"",password:"",isSSLEnabled:!0}},validations:{address:{required:lt},port:{required:lt,minLength:on(2)},login:{required:lt},password:{required:lt}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{imap_enabled:e,imap_address:t,imap_port:n,imap_login:s,imap_password:a,imap_enable_ssl:o}=this.inbox;this.isIMAPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=a,this.isSSLEnabled=o},async updateInbox(){try{this.loading=!0;let e={id:this.inbox.id,formData:!1,channel:{imap_enabled:this.isIMAPEnabled,imap_address:this.address,imap_port:this.port,imap_login:this.login,imap_password:this.password,imap_enable_ssl:this.isSSLEnabled}};this.isIMAPEnabled||(e.channel.smtp_enabled=!1),await this.$store.dispatch("inboxes/updateInboxIMAP",e),_e(this.$t("INBOX_MGMT.IMAP.EDIT.SUCCESS_MESSAGE"))}catch(e){_e(e.message)}}}},RX={class:"mx-8"},$X={for:"toggle-imap-enable"},MX={key:0,class:"mb-6"},kX={for:"toggle-enable-ssl"};function LX(e,t,n,s,a,o){const l=z("woot-input"),i=z("NextButton"),r=z("SettingsSection");return p(),f("div",RX,[v(r,{title:e.$t("INBOX_MGMT.IMAP.TITLE"),"sub-title":e.$t("INBOX_MGMT.IMAP.SUBTITLE"),note:e.$t("INBOX_MGMT.IMAP.NOTE_TEXT")},{default:K(()=>[c("form",{onSubmit:t[6]||(t[6]=ze((...d)=>o.updateInbox&&o.updateInbox(...d),["prevent"]))},[c("label",$X,[pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.isIMAPEnabled=d),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-imap-enable"},null,512),[[Xt,a.isIMAPEnabled]]),Ee(" "+E(e.$t("INBOX_MGMT.IMAP.TOGGLE_AVAILABILITY")),1)]),c("p",null,E(e.$t("INBOX_MGMT.IMAP.TOGGLE_HELP")),1),a.isIMAPEnabled?(p(),f("div",MX,[v(l,{modelValue:a.address,"onUpdate:modelValue":t[1]||(t[1]=d=>a.address=d),class:re([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.port,"onUpdate:modelValue":t[2]||(t[2]=d=>a.port=d),type:"number",class:re([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.login,"onUpdate:modelValue":t[3]||(t[3]=d=>a.login=d),class:re([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=d=>a.password=d),class:re([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),c("label",kX,[pe(c("input",{"onUpdate:modelValue":t[5]||(t[5]=d=>a.isSSLEnabled=d),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-enable-ssl"},null,512),[[Xt,a.isSSLEnabled]]),Ee(" "+E(e.$t("INBOX_MGMT.IMAP.ENABLE_SSL")),1)])])):O("",!0),v(i,{type:"submit",label:e.$t("INBOX_MGMT.IMAP.UPDATE"),"is-loading":e.uiFlags.isUpdatingIMAP,disabled:s.v$.$invalid&&a.isIMAPEnabled||e.uiFlags.isUpdatingIMAP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title","note"])])}const DX=Fe(wX,[["render",LX]]),PX={props:{name:{type:String,default:"string"},label:{type:String,default:""},items:{type:Array,default:()=>[]},action:{type:Function,default:()=>{}}}},BX={class:"radio-group-label"},FX={class:"radio-group"},UX={class:"radio-group-item-label"},GX=["name","checked","onChange"];function VX(e,t,n,s,a,o){return p(),f("div",null,[c("label",BX,E(n.label),1),c("div",FX,[(p(!0),f(fe,null,Ae(n.items,l=>(p(),f("div",{key:l.id,class:"radio-group-item"},[c("label",UX,[c("input",{class:"radio-input",name:`${n.name} -radio-input`,type:"radio",checked:l.checked,onChange:i=>n.action({...l,checked:!0})},null,40,GX),c("span",null,E(l.title),1)])]))),128))])])}const i_=Fe(PX,[["render",VX],["__scopeId","data-v-531e88a8"]]),HX={props:{label:{type:String,default:""},options:{type:Array,default:()=>[]},selected:{type:String,default:""},action:{type:Function,default:()=>{}}},data(){return{value:this.selected}}},WX={for:"dropdown-select"};function KX(e,t,n,s,a,o){return p(),f("div",null,[c("label",WX,E(n.label),1),pe(c("select",{id:"dropdown-select","onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),name:"dropdown-select",onChange:t[1]||(t[1]=l=>n.action(a.value))},[(p(!0),f(fe,null,Ae(n.options,l=>(p(),f("option",{key:l.key},E(l.value),1))),128))],544),[[zt,a.value]])])}const zX=Fe(HX,[["render",KX]]),jX={components:{SettingsSection:Bi,InputRadioGroup:i_,SingleSelectDropdown:zX,NextButton:ce},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:Lt()}},data(){return{isSMTPEnabled:!1,address:"",port:"",login:"",password:"",domain:"",ssl:!1,starttls:!0,openSSLVerifyMode:"none",authMechanism:"login",encryptionProtocols:[{id:"ssl",title:"SSL/TLS",checked:!1},{id:"starttls",title:"STARTTLS",checked:!0}],openSSLVerifyModes:[{key:1,value:"none"},{key:2,value:"peer"},{key:3,value:"client_once"},{key:4,value:"fail_if_no_peer_cert"}],authMechanisms:[{key:1,value:"plain"},{key:2,value:"login"},{key:3,value:"cram-md5"},{key:4,value:"xoauth"},{key:5,value:"xoauth2"},{key:6,value:"ntlm"},{key:7,value:"gssapi"}]}},validations:{address:{required:lt},port:{required:lt,minLength:on(2)},login:{required:lt},password:{required:lt},domain:{required:lt}},computed:{...St({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{smtp_enabled:e,smtp_address:t,smtp_port:n,smtp_login:s,smtp_password:a,smtp_domain:o,smtp_enable_starttls_auto:l,smtp_enable_ssl_tls:i,smtp_openssl_verify_mode:r,smtp_authentication:d}=this.inbox;this.isSMTPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=a,this.domain=o,this.starttls=l,this.ssl=i,this.openSSLVerifyMode=r,this.authMechanism=d,this.encryptionProtocols=[{id:"ssl",title:"SSL/TLS",checked:i},{id:"starttls",title:"STARTTLS",checked:l}]},handleEncryptionChange(e){e.id==="ssl"?(this.ssl=!0,this.starttls=!1):(this.ssl=!1,this.starttls=!0)},handleSSLModeChange(e){this.openSSLVerifyMode=e},handleAuthMechanismChange(e){this.authMechanism=e},async updateInbox(){try{const e={id:this.inbox.id,channel:{smtp_enabled:this.isSMTPEnabled,smtp_address:this.address,smtp_port:this.port,smtp_login:this.login,smtp_password:this.password,smtp_domain:this.domain,smtp_enable_ssl_tls:this.ssl,smtp_enable_starttls_auto:this.starttls,smtp_openssl_verify_mode:this.openSSLVerifyMode,smtp_authentication:this.authMechanism}};await this.$store.dispatch("inboxes/updateInboxSMTP",e),_e(this.$t("INBOX_MGMT.SMTP.EDIT.SUCCESS_MESSAGE"))}catch{_e(this.$t("INBOX_MGMT.SMTP.EDIT.ERROR_MESSAGE"))}}}},YX={class:"mx-8"},XX={for:"toggle-enable-smtp"},qX={key:0,class:"mb-6"};function ZX(e,t,n,s,a,o){const l=z("woot-input"),i=z("InputRadioGroup"),r=z("SingleSelectDropdown"),d=z("NextButton"),u=z("SettingsSection");return p(),f("div",YX,[v(u,{title:e.$t("INBOX_MGMT.SMTP.TITLE"),"sub-title":e.$t("INBOX_MGMT.SMTP.SUBTITLE")},{default:K(()=>[c("form",{onSubmit:t[6]||(t[6]=ze((...m)=>o.updateInbox&&o.updateInbox(...m),["prevent"]))},[c("label",XX,[pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.isSMTPEnabled=m),type:"checkbox",name:"toggle-enable-smtp"},null,512),[[Xt,a.isSMTPEnabled]]),Ee(" "+E(e.$t("INBOX_MGMT.SMTP.TOGGLE_AVAILABILITY")),1)]),c("p",null,E(e.$t("INBOX_MGMT.SMTP.TOGGLE_HELP")),1),a.isSMTPEnabled?(p(),f("div",qX,[v(l,{modelValue:a.address,"onUpdate:modelValue":t[1]||(t[1]=m=>a.address=m),class:re([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.port,"onUpdate:modelValue":t[2]||(t[2]=m=>a.port=m),type:"number",class:re([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.login,"onUpdate:modelValue":t[3]||(t[3]=m=>a.login=m),class:re([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=m=>a.password=m),class:re([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(l,{modelValue:a.domain,"onUpdate:modelValue":t[5]||(t[5]=m=>a.domain=m),class:re([{error:s.v$.domain.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.DOMAIN.PLACE_HOLDER"),onBlur:s.v$.domain.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),v(i,{label:e.$t("INBOX_MGMT.SMTP.ENCRYPTION"),items:a.encryptionProtocols,action:o.handleEncryptionChange},null,8,["label","items","action"]),v(r,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.OPEN_SSL_VERIFY_MODE"),selected:a.openSSLVerifyMode,options:a.openSSLVerifyModes,action:o.handleSSLModeChange},null,8,["label","selected","options","action"]),v(r,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.AUTH_MECHANISM"),selected:a.authMechanism,options:a.authMechanisms,action:o.handleAuthMechanismChange},null,8,["label","selected","options","action"])])):O("",!0),v(d,{type:"submit",label:e.$t("INBOX_MGMT.SMTP.UPDATE"),"is-loading":e.uiFlags.isUpdatingSMTP,disabled:s.v$.$invalid&&a.isSMTPEnabled||e.uiFlags.isUpdatingSMTP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const QX=Fe(jX,[["render",ZX]]),JX={components:{SettingsSection:Bi,ImapSettings:DX,SmtpSettings:QX,NextButton:ce,WhatsappReauthorize:yy},mixins:[Mr],props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:Lt()}},data(){return{hmacMandatory:!1,whatsAppInboxAPIKey:"",isRequestingReauthorization:!1,isSyncingTemplates:!1}},validations:{whatsAppInboxAPIKey:{required:lt}},computed:{isEmbeddedSignupWhatsApp(){var e;return((e=this.inbox.provider_config)==null?void 0:e.source)==="embedded_signup"},whatsappAppId(){var e;return(e=window.chatwootConfig)==null?void 0:e.whatsappAppId}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){this.hmacMandatory=this.inbox.hmac_mandatory||!1},handleHmacFlag(){this.updateInbox()},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{hmac_mandatory:this.hmacMandatory}};await this.$store.dispatch("inboxes/updateInbox",e),_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{_e(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async updateWhatsAppInboxAPIKey(){try{const e={id:this.inbox.id,formData:!1,channel:{}};e.channel.provider_config={...this.inbox.provider_config,api_key:this.whatsAppInboxAPIKey},await this.$store.dispatch("inboxes/updateInbox",e),_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{_e(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async handleReconfigure(){this.$refs.whatsappReauth&&await this.$refs.whatsappReauth.requestAuthorization()},async syncTemplates(){this.isSyncingTemplates=!0;try{await this.$store.dispatch("inboxes/syncTemplates",this.inbox.id),_e(this.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUCCESS"))}catch{_e(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}finally{this.isSyncingTemplates=!1}}}},eq={key:0,class:"mx-8"},tq={key:1,class:"mx-8"},nq={key:2},sq={class:"mx-8"},aq={target:"_blank",rel:"noopener noreferrer",href:"https://www.chatwoot.com/docs/product/channels/live-chat/sdk/identity-validation/"},oq={class:"flex gap-2 items-center"},lq={for:"hmacMandatory"},iq={key:3,class:"mx-8"},rq={class:"flex gap-2 items-center"},cq={for:"hmacMandatory"},dq={key:4},uq={class:"mx-8"},pq={key:5},mq={key:0,class:"mx-8"},hq={class:"flex gap-4 items-center"},fq={class:"text-sm text-slate-600"},gq={class:"flex flex-1 justify-between items-center mt-2 whatsapp-settings--content"},_q={class:"flex justify-start items-center mt-2"};function vq(e,t,n,s,a,o){const l=z("woot-code"),i=z("SettingsSection"),r=z("ImapSettings"),d=z("SmtpSettings"),u=z("NextButton"),m=z("woot-input"),h=z("WhatsappReauthorize");return e.isATwilioChannel?(p(),f("div",eq,[v(i,{title:e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")},{default:K(()=>[v(l,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isALineChannel?(p(),f("div",tq,[v(i,{title:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")},{default:K(()=>[v(l,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isAWebWidgetInbox?(p(),f("div",nq,[c("div",sq,[v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_HEADING"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_SUB_HEAD")},{default:K(()=>[v(l,{script:n.inbox.web_widget_script,lang:"html","codepen-title":`${n.inbox.name} - Chatwoot Widget Test`,"enable-code-pen":""},null,8,["script","codepen-title"])]),_:1},8,["title","sub-title"]),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION")},{subTitle:K(()=>[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION"))+" ",1),c("a",aq,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_LINK_TO_DOCS")),1)]),default:K(()=>[v(l,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title"]),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:K(()=>[c("div",oq,[pe(c("input",{id:"hmacMandatory","onUpdate:modelValue":t[0]||(t[0]=_=>a.hmacMandatory=_),type:"checkbox",onChange:t[1]||(t[1]=(..._)=>o.handleHmacFlag&&o.handleHmacFlag(..._))},null,544),[[Xt,a.hmacMandatory]]),c("label",lq,E(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])])):e.isAPIInbox?(p(),f("div",iq,[v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER_SUB_TEXT")},{default:K(()=>[v(l,{script:n.inbox.inbox_identifier},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION")},{default:K(()=>[v(l,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:K(()=>[c("div",rq,[pe(c("input",{id:"hmacMandatory","onUpdate:modelValue":t[2]||(t[2]=_=>a.hmacMandatory=_),type:"checkbox",onChange:t[3]||(t[3]=(..._)=>o.handleHmacFlag&&o.handleHmacFlag(..._))},null,544),[[Xt,a.hmacMandatory]]),c("label",cq,E(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])):e.isAnEmailChannel?(p(),f("div",dq,[c("div",uq,[v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_SUB_TEXT")},{default:K(()=>[v(l,{script:n.inbox.forward_to_email},null,8,["script"])]),_:1},8,["title","sub-title"])]),v(r,{inbox:n.inbox},null,8,["inbox"]),n.inbox.imap_enabled?(p(),V(d,{key:0,inbox:n.inbox},null,8,["inbox"])):O("",!0)])):e.isAWhatsAppChannel&&!e.isATwilioChannel?(p(),f("div",pq,[n.inbox.provider_config?(p(),f("div",mq,[o.isEmbeddedSignupWhatsApp?(p(),f(fe,{key:0},[o.whatsappAppId?(p(),V(i,{key:0,title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_SUBHEADER")},{default:K(()=>[c("div",hq,[c("p",fq,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_DESCRIPTION")),1),v(u,{onClick:o.handleReconfigure},{default:K(()=>[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_RECONFIGURE_BUTTON")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","sub-title"])):O("",!0)],64)):(p(),f(fe,{key:1},[v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_SUBHEADER")},{default:K(()=>[v(l,{script:n.inbox.provider_config.webhook_verify_token},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_SUBHEADER")},{default:K(()=>[v(l,{script:n.inbox.provider_config.api_key},null,8,["script"])]),_:1},8,["title","sub-title"]),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_SUBHEADER")},{default:K(()=>[c("div",gq,[v(m,{modelValue:a.whatsAppInboxAPIKey,"onUpdate:modelValue":t[4]||(t[4]=_=>a.whatsAppInboxAPIKey=_),type:"text",class:"flex-1 mr-2 [&>input]:!mb-0",placeholder:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_PLACEHOLDER")},null,8,["modelValue","placeholder"]),v(u,{disabled:s.v$.whatsAppInboxAPIKey.$invalid,onClick:o.updateWhatsAppInboxAPIKey},{default:K(()=>[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])],64)),v(i,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUBHEADER")},{default:K(()=>[c("div",_q,[v(u,{disabled:a.isSyncingTemplates,onClick:o.syncTemplates},{default:K(()=>[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])])):O("",!0),o.isEmbeddedSignupWhatsApp?(p(),V(h,{key:1,ref:"whatsappReauth",inbox:n.inbox,class:"hidden"},null,8,["inbox"])):O("",!0)])):O("",!0)}const bq=Fe(JX,[["render",vq],["__scopeId","data-v-9c72f1d8"]]),Eq={__name:"CSATEmojiInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>n.selected?"outline-n-brand bg-n-brand/5":"outline-n-weak bg-n-alpha-black2"),o=Ei,l=F(5);return(i,r)=>(p(),f("button",{class:re(["flex items-center rounded-lg transition-all duration-500 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",a.value]),onClick:r[0]||(r[0]=d=>s("update",I(Hl).EMOJI))},[(p(!0),f(fe,null,Ae(I(o),d=>(p(),f("div",{key:d.key,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0"},[c("span",{class:re(["text-2xl",l.value===d.value?"":"grayscale opacity-60"])},E(d.emoji),3)]))),128))],2))}},Tq=["aria-label"],Aq={__name:"CSATStarInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>n.selected?"bg-n-brand/5 outline-n-brand":"bg-n-alpha-black2 outline-n-weak");return(o,l)=>(p(),f("button",{class:re(["flex items-center rounded-lg transition-all duration-300 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",a.value]),onClick:l[0]||(l[0]=i=>s("update",I(Hl).STAR))},[(p(),f(fe,null,Ae(5,i=>c("div",{key:"star-"+i,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0","aria-label":`Star ${i}`},l[1]||(l[1]=[c("i",{class:"i-ri-star-fill text-n-amber-9 text-2xl"},null,-1)]),8,Tq)),64))],2))}},yq={class:"flex flex-wrap gap-6 mt-2"},Sq={__name:"CSATDisplayTypeSelector",props:{selectedType:{type:String,default:Hl.EMOJI}},emits:["update"],setup(e,{emit:t}){const n=e,s=t;return(a,o)=>(p(),f("div",yq,[v(Eq,{selected:n.selectedType===I(Hl).EMOJI,onUpdate:o[0]||(o[0]=l=>s("update",l))},null,8,["selected"]),v(Aq,{selected:n.selectedType===I(Hl).STAR,onUpdate:o[1]||(o[1]=l=>s("update",l))},null,8,["selected"])]))}},cr={__name:"FilterSelect",props:yn({options:{type:Array,required:!0},hideLabel:{type:Boolean,default:!1},hideIcon:{type:Boolean,default:!1},variant:{type:String,default:"faded"},label:{type:String,default:null}},{modelValue:{type:[String,Number],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=jn(e,"modelValue"),s=F(null),a=F(null),{top:o}=Ou(s),{height:l}=Mi(),{height:i}=Ou(a),r=C(()=>t.options.find(h=>h.value===n.value)||{}),d=C(()=>t.hideIcon?null:r.value.icon||"i-lucide-chevron-down"),u=C(()=>{const _=i.value?i.value+20:340;return l.value-o.value<_?"bottom-0":"top-0"}),m=h=>{n.value=h};return(h,_)=>(p(),V(Di,null,{trigger:K(({toggle:g})=>[at(h.$slots,"trigger",{toggle:g},()=>[v(ce,{ref_key:"triggerRef",ref:s,type:"button",sm:"",slate:"",variant:e.variant,icon:d.value,"trailing-icon":!r.value.icon,label:e.label||(e.hideLabel?null:r.value.label),onClick:g},null,8,["variant","icon","trailing-icon","label","onClick"])])]),default:K(()=>[v(Pi,{ref_key:"dropdownRef",ref:a,class:re(["min-w-48 z-50",u.value]),strong:""},{default:K(()=>[v($r,{class:"max-h-80 overflow-scroll"},{default:K(()=>[(p(!0),f(fe,null,Ae(e.options,g=>(p(),V(eo,{key:g.value,label:g.label,icon:g.icon,onClick:T=>m(g.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1},8,["class"])]),_:3}))}},Iq={class:"mx-8"},Cq={class:"flex justify-end"},xq={class:"grid gap-5"},Nq={class:"mb-4"},Oq={class:"inline-flex flex-wrap items-center gap-1.5 text-sm text-n-slate-12"},wq={class:"text-sm italic text-n-slate-11"},Rq={__name:"CustomerSatisfactionPage",props:{inbox:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Pe(),s=yt(),a=ke("labels/getLabels"),o=F(!1),l=F([]),i=F(""),r=os({csatSurveyEnabled:!1,displayType:"emoji",message:"",surveyRuleOperator:"contains"}),d=[{label:n("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.CONTAINS"),value:"contains"},{label:n("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.DOES_NOT_CONTAINS"),value:"does_not_contain"}],u=C(()=>{var A;return(A=a.value)!=null&&A.length?a.value.map(y=>({label:y.title,value:y.title})).filter(y=>!l.value.includes(y.value)):[]}),m=()=>{if(!t.inbox)return;const{csat_survey_enabled:A,csat_config:y}=t.inbox;if(r.csatSurveyEnabled=A||!1,!y)return;const{display_type:x=Hl.EMOJI,message:$="",survey_rules:N={}}=y;r.displayType=x,r.message=$,r.surveyRuleOperator=N.operator||"contains",l.value=Array.isArray(N.values)?[...N.values]:[]};pt(()=>{var A;m(),(A=a.value)!=null&&A.length||s.dispatch("labels/get")}),ot(()=>t.inbox,m,{immediate:!0});const h=A=>{!A||l.value.includes(A)||l.value.push(A)},_=A=>{r.displayType=A},g=A=>{r.surveyRuleOperator=A},T=A=>{const y=l.value.indexOf(A);y!==-1&&l.value.splice(y,1)},S=async A=>{const y={id:t.inbox.id,formData:!1,...A};return s.dispatch("inboxes/updateInbox",y)},b=async()=>{try{o.value=!0;const A={display_type:r.displayType,message:r.message,survey_rules:{operator:r.surveyRuleOperator,values:l.value}};await S({csat_survey_enabled:r.csatSurveyEnabled,csat_config:A}),_e(n("INBOX_MGMT.CSAT.API.SUCCESS_MESSAGE"))}catch{_e(n("INBOX_MGMT.CSAT.API.ERROR_MESSAGE"))}finally{o.value=!1}};return(A,y)=>(p(),f("div",Iq,[v(Or,{title:A.$t("INBOX_MGMT.CSAT.TITLE"),description:A.$t("INBOX_MGMT.CSAT.SUBTITLE")},{headerActions:K(()=>[c("div",Cq,[v(so,{modelValue:r.csatSurveyEnabled,"onUpdate:modelValue":y[0]||(y[0]=x=>r.csatSurveyEnabled=x)},null,8,["modelValue"])])]),default:K(()=>[c("div",xq,[v(Wl,{label:A.$t("INBOX_MGMT.CSAT.DISPLAY_TYPE.LABEL"),name:"display_type"},{default:K(()=>[v(Sq,{"selected-type":r.displayType,onUpdate:_},null,8,["selected-type"])]),_:1},8,["label"]),v(Wl,{label:A.$t("INBOX_MGMT.CSAT.MESSAGE.LABEL"),name:"message"},{default:K(()=>[v(Ws,{modelValue:r.message,"onUpdate:modelValue":y[1]||(y[1]=x=>r.message=x),placeholder:A.$t("INBOX_MGMT.CSAT.MESSAGE.PLACEHOLDER"),"max-length":200,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v(Wl,{label:A.$t("INBOX_MGMT.CSAT.SURVEY_RULE.LABEL"),name:"survey_rule"},{default:K(()=>[c("div",Nq,[c("span",Oq,[Ee(E(A.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_PREFIX"))+" ",1),v(cr,{modelValue:r.surveyRuleOperator,"onUpdate:modelValue":[y[2]||(y[2]=x=>r.surveyRuleOperator=x),g],variant:"faded",options:d,class:"inline-flex shrink-0"},null,8,["modelValue"]),Ee(" "+E(A.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_SUFFIX"))+" ",1),(p(!0),f(fe,null,Ae(l.value,x=>(p(),V(ce,{key:x,sm:"",faded:"",slate:"","trailing-icon":"",label:x,icon:"i-lucide-x",class:"inline-flex shrink-0",onClick:$=>T(x)},null,8,["label","onClick"]))),128)),v(cr,{modelValue:i.value,"onUpdate:modelValue":[y[3]||(y[3]=x=>i.value=x),h],options:u.value,label:A.$t("INBOX_MGMT.CSAT.SURVEY_RULE.SELECT_PLACEHOLDER"),"hide-label":"",variant:"faded",class:"inline-flex shrink-0"},null,8,["modelValue","options","label"])])])]),_:1},8,["label"]),c("p",wq,E(A.$t("INBOX_MGMT.CSAT.NOTE")),1),c("div",null,[v(ce,{type:"submit",label:A.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":o.value,onClick:b},null,8,["label","is-loading"])])])]),_:1},8,["title","description"])]))}},$q={components:{SettingsSection:Bi,NextButton:ce},props:{inbox:{type:Object,default:()=>({})}},setup(){const{isEnterprise:e}=Js();return{v$:Lt(),isEnterprise:e}},data(){return{selectedAgents:[],isAgentListUpdating:!1,enableAutoAssignment:!1,maxAssignmentLimit:null}},computed:{...St({agentList:"agents/getAgents"}),maxAssignmentLimitErrors(){return this.v$.maxAssignmentLimit.$error?this.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_RANGE_ERROR"):""}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){var e,t;this.enableAutoAssignment=this.inbox.enable_auto_assignment,this.maxAssignmentLimit=((t=(e=this.inbox)==null?void 0:e.auto_assignment_config)==null?void 0:t.max_assignment_limit)||null,this.fetchAttachedAgents()},async fetchAttachedAgents(){try{const e=await this.$store.dispatch("inboxMembers/get",{inboxId:this.inbox.id}),{data:{payload:t}}=e;this.selectedAgents=t}catch{}},handleEnableAutoAssignment(){this.updateInbox()},async updateAgents(){const e=this.selectedAgents.map(t=>t.id);this.isAgentListUpdating=!0;try{await this.$store.dispatch("inboxMembers/create",{inboxId:this.inbox.id,agentList:e}),_e(this.$t("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{_e(this.$t("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}this.isAgentListUpdating=!1},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,enable_auto_assignment:this.enableAutoAssignment,auto_assignment_config:{max_assignment_limit:this.maxAssignmentLimit}};await this.$store.dispatch("inboxes/updateInbox",e),_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}},maxAssignmentLimit:{minValue:QE(1)}}},Mq={class:"w-3/4 settings-item"},kq={class:"flex items-center gap-2"},Lq={for:"enableAutoAssignment"},Dq={class:"pb-1 text-sm not-italic text-n-slate-11"},Pq={key:0,class:"py-3"},Bq={class:"pb-1 text-sm not-italic text-n-slate-11"};function Fq(e,t,n,s,a,o){const l=z("multiselect"),i=z("NextButton"),r=z("SettingsSection"),d=z("woot-input");return p(),f("div",null,[v(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS_SUB_TEXT")},{default:K(()=>[v(l,{modelValue:a.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=u=>a.selectedAgents=u),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:"Pick some","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","onSelect"]),v(i,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":a.isAgentListUpdating,onClick:o.updateAgents},null,8,["label","is-loading","onClick"])]),_:1},8,["title","sub-title"]),v(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT_SUB_TEXT")},{default:K(()=>[c("label",Mq,[c("div",kq,[pe(c("input",{id:"enableAutoAssignment","onUpdate:modelValue":t[1]||(t[1]=u=>a.enableAutoAssignment=u),type:"checkbox",onChange:t[2]||(t[2]=(...u)=>o.handleEnableAutoAssignment&&o.handleEnableAutoAssignment(...u))},null,544),[[Xt,a.enableAutoAssignment]]),c("label",Lq,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT")),1)]),c("p",Dq,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT_SUB_TEXT")),1)]),a.enableAutoAssignment&&s.isEnterprise?(p(),f("div",Pq,[v(d,{modelValue:a.maxAssignmentLimit,"onUpdate:modelValue":t[3]||(t[3]=u=>a.maxAssignmentLimit=u),type:"number",class:re({error:s.v$.maxAssignmentLimit.$error}),error:o.maxAssignmentLimitErrors,label:e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT"),onBlur:s.v$.maxAssignmentLimit.$touch},null,8,["modelValue","class","error","label","onBlur"]),c("p",Bq,E(e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_SUB_TEXT")),1),v(i,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),disabled:s.v$.maxAssignmentLimit.$invalid,onClick:o.updateInbox},null,8,["label","disabled","onClick"])])):O("",!0)]),_:1},8,["title","sub-title"])])}const Uq=Fe($q,[["render",Fq]]),Gq={class:"relative top-px"},Vq={class:"flex items-center justify-start"},Hq=["src"],Wq={key:1},Kq={class:"flex items-center justify-start gap-1"},zq={class:"text-base font-medium leading-3 text-n-slate-12"},jq={key:0,class:"w-2 h-2 bg-n-teal-10 rounded-full"},Yq={class:"mt-1 text-xs text-n-slate-11"},Xq={key:0,class:"overflow-auto max-h-60"},qq={class:"mb-2 text-2xl break-words text-n-slate-12"},Zq={class:"text-sm break-words text-n-slate-11 [&_a]:!text-n-slate-11 [&_a]:underline"},Qq={__name:"WidgetHead",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{formatMessage:n}=$a(),s=C(()=>t.config.isDefaultScreen&&(t.config.welcomeHeading&&t.config.welcomeHeading.length!==0||t.config.welcomeTagLine&&t.config.welcomeTagline.length!==0));return(a,o)=>{const l=_t("dompurify-html");return p(),f("div",{class:re(["rounded-t-lg flex-shrink-0 transition-[max-height] duration-300",s.value?"bg-n-slate-2 dark:bg-n-solid-1 px-4 py-5":"bg-n-slate-2 dark:bg-n-solid-1 p-4"])},[c("div",Gq,[c("div",Vq,[e.config.logo?(p(),f("img",{key:0,src:e.config.logo,class:re(["mr-2 rounded-full logo",s.value?"h-12 w-12 mb-2":"h-8 w-8 mb-1"])},null,10,Hq)):O("",!0),s.value?O("",!0):(p(),f("div",Wq,[c("div",Kq,[c("span",zq,E(e.config.websiteName),1),e.config.isOnline?(p(),f("div",jq)):O("",!0)]),c("span",Yq,E(e.config.replyTime),1)]))]),s.value?(p(),f("div",Xq,[c("h2",qq,E(e.config.welcomeHeading),1),pe(c("p",Zq,null,512),[[l,I(n)(e.config.welcomeTagline)]])])):O("",!0)])],2)}}},Jq={class:"h-[calc(2rem*10)] px-4 overflow-y-auto"},eZ={class:"items-end flex justify-end ml-auto mb-1 mt-0 max-w-[85%] text-right"},tZ={class:"m-0"},nZ={class:"shadow rounded-[1.25rem] rounded-bl-[0.25rem] px-4 py-3 inline-block text-sm text-n-slate-12 bg-n-background dark:bg-n-solid-3"},sZ={class:"m-0"},aZ={__name:"WidgetBody",props:{config:{type:Object,default:()=>({})}},setup(e){return(t,n)=>(p(),f("div",Jq,[c("div",null,[c("div",null,[c("div",eZ,[c("div",{class:"rounded-[1.25rem] rounded-br-[0.25rem] text-white dark:text-white text-sm px-4 py-3",style:Ct({background:e.config.color})},[c("p",tZ,E(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.USER_MESSAGE")),1)],4)])]),c("div",nZ,[c("div",null,[c("p",sZ,E(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.AGENT_MESSAGE")),1)])])])]))}},oZ={class:"relative flex flex-col w-full px-4"},lZ={key:0,class:"p-4 rounded-md shadow-sm bg-n-background dark:bg-n-solid-2"},iZ={class:"flex items-center justify-between"},rZ={class:"text-sm font-medium leading-4 text-n-slate-12 dark:text-n-slate-50"},cZ={class:"mt-1 text-xs text-n-slate-11"},dZ={class:"pr-2 text-xs"},uZ={class:"flex items-center gap-2 px-2"},pZ={__name:"WidgetFooter",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Pe(),s=F(!1),a=C(()=>t.config.isOnline?n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.ONLINE"):n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.OFFLINE"));return(o,l)=>(p(),f("div",oZ,[e.config.isDefaultScreen?(p(),f("div",lZ,[c("div",iZ,[c("div",null,[c("div",rZ,E(a.value),1),c("div",cZ,E(e.config.replyTime),1)]),v(Ft,{name:"C",size:34,"rounded-full":""})]),e.config.isDefaultScreen?(p(),f("button",{key:0,class:"inline-flex items-center justify-between px-2 py-1 mt-1 -ml-2 font-medium leading-6 bg-transparent rounded-md text-n-slate-12 dark:bg-transparent",style:Ct({color:e.config.color})},[c("span",dZ,E(o.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.START_CONVERSATION_BUTTON_TEXT")),1),v(sm,{icon:"arrow-right",size:"14"})],4)):O("",!0)])):(p(),f("div",{key:1,class:re(["flex items-center h-10 bg-white rounded-md dark:!bg-n-slate-3",{"ring-2 ring-n-brand dark:ring-n-brand":s.value}])},[v(ag,{id:"chat-input",rows:1,placeholder:o.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.CHAT_INPUT_PLACEHOLDER"),class:"flex-grow !bg-white border-0 outline-none !outline-0 border-none h-8 text-sm dark:!bg-n-slate-3 pb-0 !pt-1.5 resize-none px-3 !mb-0 focus:outline-none rounded-md",onFocus:l[0]||(l[0]=i=>s.value=!0),onBlur:l[1]||(l[1]=i=>s.value=!1)},null,8,["placeholder"]),c("div",uZ,[v(sm,{icon:"emoji"}),v(sm,{class:"icon-send",icon:"send"})])],2))]))}},mZ="data:image/svg+xml,%3csvg%20width='66'%20height='66'%20viewBox='0%200%2066%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63%2063H32.9976C16.4591%2063%202.99996%2049.5399%202.99996%2032.9973C2.99996%2016.4601%2016.4591%203%2032.9979%203C49.5408%203%2063%2016.4601%2063%2032.9973V63Z'%20fill='white'%20stroke='white'%20stroke-width='6'/%3e%3c/svg%3e",hZ={name:"Widget",components:{WidgetHead:Qq,WidgetBody:aZ,WidgetFooter:pZ,InputRadioGroup:i_},props:{welcomeHeading:{type:String,default:""},welcomeTagline:{type:String,default:""},websiteName:{type:String,required:!0},logo:{type:String,default:""},isOnline:{type:Boolean,default:!0},replyTime:{type:String,default:""},color:{type:String,default:""},widgetBubblePosition:{type:String,default:""},widgetBubbleLauncherTitle:{type:String,default:""},widgetBubbleType:{type:String,default:""}},setup(){const{replaceInstallationName:e}=Io();return{replaceInstallationName:e}},data(){return{widgetScreens:[{id:"default",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.DEFAULT"),checked:!0},{id:"chat",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.CHAT"),checked:!1}],isDefaultScreen:!0,isWidgetVisible:!0}},computed:{...St({globalConfig:"globalConfig/get"}),getWidgetConfig(){return{welcomeHeading:this.welcomeHeading,welcomeTagline:this.welcomeTagline,websiteName:this.websiteName,logo:this.logo,isDefaultScreen:this.isDefaultScreen,isOnline:this.isOnline,replyTime:this.replyTimeText,color:this.color}},replyTimeText(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_day":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_DAY");default:return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_HOURS")}},getBubblePositionStyle(){return{justifyContent:this.widgetBubblePosition==="left"?"start":"end"}},isBubbleExpanded(){return!this.isWidgetVisible&&this.widgetBubbleType==="expanded_bubble"},getWidgetBubbleLauncherTitle(){return this.isWidgetVisible||this.widgetBubbleType==="standard"?" ":this.widgetBubbleLauncherTitle}},methods:{handleScreenChange(e){this.isDefaultScreen=e.id==="default"},toggleWidget(){this.isWidgetVisible=!this.isWidgetVisible,this.isDefaultScreen=!0}}},fZ={key:0,class:"flex flex-col items-center"},gZ={key:1,class:"widget-wrapper flex flex-col justify-between rounded-lg shadow-md bg-n-slate-2 dark:bg-n-solid-1 h-[31.25rem] w-80"},_Z={class:"py-2.5 flex justify-center"},vZ={class:"items-center gap-0.5 text-n-slate-11 cursor-pointer flex filter grayscale opacity-90 hover:grayscale-0 hover:opacity-100 text-xxs"},bZ=["src"],EZ={key:0,src:mZ,alt:"",draggable:"false",class:"w-6 h-6 mx-auto"},TZ={key:1,class:"ltr:pl-2.5 rtl:pr-2.5"},AZ={key:2,class:"relative"};function yZ(e,t,n,s,a,o){const l=z("InputRadioGroup"),i=z("WidgetHead"),r=z("WidgetBody"),d=z("WidgetFooter");return p(),f("div",null,[a.isWidgetVisible?(p(),f("div",fZ,[v(l,{name:"widget-screen",items:a.widgetScreens,action:o.handleScreenChange},null,8,["items","action"])])):O("",!0),a.isWidgetVisible?(p(),f("div",gZ,[v(i,{config:o.getWidgetConfig},null,8,["config"]),c("div",null,[o.getWidgetConfig.isDefaultScreen?O("",!0):(p(),V(r,{key:0,config:o.getWidgetConfig},null,8,["config"])),v(d,{config:o.getWidgetConfig},null,8,["config"]),c("div",_Z,[c("a",vZ,[c("img",{class:"max-w-2.5 max-h-2.5",src:e.globalConfig.logoThumbnail},null,8,bZ),c("span",null,E(s.replaceInstallationName(e.$t("INBOX_MGMT.WIDGET_BUILDER.BRANDING_TEXT"))),1)])])])])):O("",!0),c("div",{class:"flex mt-4 w-[320px]",style:Ct(o.getBubblePositionStyle)},[c("button",{class:re(["relative flex items-center justify-center rounded-full cursor-pointer",o.isBubbleExpanded?"w-auto font-medium text-base text-white dark:text-white h-12 px-4":"w-16 h-16"]),style:Ct({background:n.color}),onClick:t[0]||(t[0]=(...u)=>o.toggleWidget&&o.toggleWidget(...u))},[a.isWidgetVisible?O("",!0):(p(),f("img",EZ)),o.isBubbleExpanded?(p(),f("div",TZ,E(o.getWidgetBubbleLauncherTitle),1)):O("",!0),a.isWidgetVisible?(p(),f("div",AZ,t[1]||(t[1]=[c("div",{class:"absolute w-0.5 h-8 rotate-45 -translate-y-1/2 bg-white"},null,-1),c("div",{class:"absolute w-0.5 h-8 -rotate-45 -translate-y-1/2 bg-white"},null,-1)]))):O("",!0)],6)],4)])}const SZ=Fe(hZ,[["render",yZ]]),IZ={components:{Widget:SZ,InputRadioGroup:i_,NextButton:ce,Editor:Ws,Avatar:Ft},props:{inbox:{type:Object,default:()=>{}}},setup(){return{v$:Lt()}},data(){return{isWidgetPreview:!0,color:"#1f93ff",websiteName:"",welcomeHeading:"",welcomeTagline:"",replyTime:"in_a_few_minutes",avatarFile:null,avatarUrl:"",widgetBubblePosition:"right",widgetBubbleLauncherTitle:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.DEFAULT"),widgetBubbleType:"standard",widgetBubblePositions:[{id:"left",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.LEFT"),checked:!1},{id:"right",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.RIGHT"),checked:!0}],widgetBubbleTypes:[{id:"standard",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.STANDARD"),checked:!0},{id:"expanded_bubble",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.EXPANDED_BUBBLE"),checked:!1}],welcomeTaglineEditorMenuOptions:Zg}},computed:{...St({uiFlags:"inboxes/getUIFlags"}),storageKey(){return`${vo.WIDGET_BUILDER}${this.inbox.id}`},widgetScript(){let e={position:this.widgetBubblePosition,type:this.widgetBubbleType,launcherTitle:this.widgetBubbleLauncherTitle},t=this.inbox.web_widget_script;return t.substring(0,13)+this.$t("INBOX_MGMT.WIDGET_BUILDER.SCRIPT_SETTINGS",{options:JSON.stringify(e)})+t.substring(13)},getWidgetViewOptions(){return[{id:"preview",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.PREVIEW"),checked:!0},{id:"script",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.SCRIPT"),checked:!1}]},getReplyTimeOptions(){return[{key:"in_a_few_minutes",value:"in_a_few_minutes",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_MINUTES")},{key:"in_a_few_hours",value:"in_a_few_hours",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_HOURS")},{key:"in_a_day",value:"in_a_day",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_DAY")}]},websiteNameValidationErrorMsg(){return this.v$.websiteName.$error?this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.ERROR"):""}},mounted(){this.setDefaults()},validations:{websiteName:{required:lt}},methods:{setDefaults(){const{name:e,welcome_title:t,welcome_tagline:n,widget_color:s,reply_time:a,avatar_url:o}=this.inbox;this.websiteName=e,this.welcomeHeading=t,this.welcomeTagline=n,this.color=s,this.replyTime=a,this.avatarUrl=o;const l=this.getSavedInboxInformation();l&&(this.widgetBubblePositions=this.widgetBubblePositions.map(i=>(i.id===l.position&&(i.checked=!0,this.widgetBubblePosition=i.id),i)),this.widgetBubbleTypes=this.widgetBubbleTypes.map(i=>(i.id===l.type&&(i.checked=!0,this.widgetBubbleType=i.id),i)),this.widgetBubbleLauncherTitle=l.launcherTitle||"Chat with us")},handleWidgetBubblePositionChange(e){this.widgetBubblePosition=e.id},handleWidgetBubbleTypeChange(e){this.widgetBubbleType=e.id},handleWidgetViewChange(e){this.isWidgetPreview=e.id==="preview"},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.inbox.id),this.avatarFile=null,this.avatarUrl="",_e(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.SUCCESS_MESSAGE"))}catch(e){_e(e.message?e.message:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.ERROR_MESSAGE"))}},async updateWidget(){const e={position:this.widgetBubblePosition,launcherTitle:this.widgetBubbleLauncherTitle,type:this.widgetBubbleType};Qa.set(this.storageKey,e);try{const t={id:this.inbox.id,name:this.websiteName,channel:{widget_color:this.color,welcome_title:this.welcomeHeading,welcome_tagline:this.welcomeTagline,reply_time:this.replyTime}};this.avatarFile&&(t.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",t),_e(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.SUCCESS_MESSAGE"))}catch(t){_e(t.message||this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.ERROR_MESSAGE"))}},getSavedInboxInformation(){return Qa.get(this.storageKey)}}},CZ={class:"mx-8"},xZ={class:"flex p-2.5"},NZ={class:"w-100 lg:w-[40%]"},OZ={class:"min-h-full py-4 overflow-y-scroll px-px"},wZ={class:"flex flex-col mb-4 items-start gap-1 w-full"},RZ={class:"mb-0.5 text-sm font-medium text-n-slate-12"},$Z=["value"],MZ={class:"w-100 lg:w-3/5"},kZ={key:0,class:"flex flex-col items-center justify-end min-h-[40.625rem] mx-5 mb-5 p-2.5 bg-n-slate-3 rounded-lg"},LZ={key:1,class:"mx-5 p-2.5 bg-n-slate-3 rounded-lg dark:bg-n-solid-3"};function DZ(e,t,n,s,a,o){const l=z("Avatar"),i=z("woot-input"),r=z("Editor"),d=z("woot-color-picker"),u=z("InputRadioGroup"),m=z("NextButton"),h=z("Widget"),_=z("woot-code");return p(),f("div",CZ,[c("div",xZ,[c("div",NZ,[c("div",OZ,[c("form",{onSubmit:t[6]||(t[6]=ze((...g)=>o.updateWidget&&o.updateWidget(...g),["prevent"]))},[c("div",wZ,[c("label",RZ,E(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.LABEL")),1),v(l,{src:a.avatarUrl,size:72,"icon-name":"i-ri-global-fill",name:"","allow-upload":"","rounded-full":"",onUpload:o.handleImageUpload,onDelete:o.handleAvatarDelete},null,8,["src","onUpload","onDelete"])]),v(i,{modelValue:a.websiteName,"onUpdate:modelValue":t[0]||(t[0]=g=>a.websiteName=g),class:re({error:s.v$.websiteName.$error}),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.PLACE_HOLDER"),error:o.websiteNameValidationErrorMsg,onBlur:s.v$.websiteName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),v(i,{modelValue:a.welcomeHeading,"onUpdate:modelValue":t[1]||(t[1]=g=>a.welcomeHeading=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),v(r,{modelValue:a.welcomeTagline,"onUpdate:modelValue":t[2]||(t[2]=g=>a.welcomeTagline=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.PLACE_HOLDER"),"max-length":255,"enabled-menu-options":a.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),c("label",null,[Ee(E(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>a.replyTime=g)},[(p(!0),f(fe,null,Ae(o.getReplyTimeOptions,g=>(p(),f("option",{key:g.key,value:g.value},E(g.text),9,$Z))),128))],512),[[zt,a.replyTime]])]),c("label",null,[Ee(E(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_COLOR_LABEL"))+" ",1),v(d,{modelValue:a.color,"onUpdate:modelValue":t[4]||(t[4]=g=>a.color=g)},null,8,["modelValue"])]),v(u,{name:"widget-bubble-position",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION_LABEL"),items:a.widgetBubblePositions,action:o.handleWidgetBubblePositionChange},null,8,["label","items","action"]),v(u,{name:"widget-bubble-type",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE_LABEL"),items:a.widgetBubbleTypes,action:o.handleWidgetBubbleTypeChange},null,8,["label","items","action"]),v(i,{modelValue:a.widgetBubbleLauncherTitle,"onUpdate:modelValue":t[5]||(t[5]=g=>a.widgetBubbleLauncherTitle=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),v(m,{type:"submit",class:"mt-4",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.BUTTON_TEXT"),"is-loading":e.uiFlags.isUpdating,disabled:s.v$.$invalid||e.uiFlags.isUpdating},null,8,["label","is-loading","disabled"])],32)])]),c("div",MZ,[v(u,{name:"widget-view-options",class:"text-center",items:o.getWidgetViewOptions,action:o.handleWidgetViewChange},null,8,["items","action"]),a.isWidgetPreview?(p(),f("div",kZ,[v(h,{"welcome-heading":a.welcomeHeading,"welcome-tagline":a.welcomeTagline,"website-name":a.websiteName,logo:a.avatarUrl,"is-online":"","reply-time":a.replyTime,color:a.color,"widget-bubble-position":a.widgetBubblePosition,"widget-bubble-launcher-title":a.widgetBubbleLauncherTitle,"widget-bubble-type":a.widgetBubbleType},null,8,["welcome-heading","welcome-tagline","website-name","logo","reply-time","color","widget-bubble-position","widget-bubble-launcher-title","widget-bubble-type"])])):(p(),f("div",LZ,[v(_,{script:o.widgetScript},null,8,["script"])]))])])])}const PZ=Fe(IZ,[["render",DZ]]),BZ={components:{LoadingState:xr,SettingsSection:Bi,NextButton:ce},props:{inbox:{type:Object,default:()=>({})}},data(){return{selectedAgentBotId:null}},computed:{...St({agentBots:"agentBots/getBots",uiFlags:"agentBots/getUIFlags"}),activeAgentBot(){return this.$store.getters["agentBots/getActiveAgentBot"](this.inbox.id)}},watch:{activeAgentBot(){this.selectedAgentBotId=this.activeAgentBot.id}},mounted(){this.$store.dispatch("agentBots/get"),this.$store.dispatch("agentBots/fetchAgentBotInbox",this.inbox.id)},methods:{async updateActiveAgentBot(){try{await this.$store.dispatch("agentBots/setAgentBotInbox",{inboxId:this.inbox.id,botId:this.selectedAgentBotId?this.selectedAgentBotId:void 0}),_e(this.$t("AGENT_BOTS.BOT_CONFIGURATION.SUCCESS_MESSAGE"))}catch{_e(this.$t("AGENT_BOTS.BOT_CONFIGURATION.ERROR_MESSAGE"))}},async disconnectBot(){try{await this.$store.dispatch("agentBots/disconnectBot",{inboxId:this.inbox.id}),_e(this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_SUCCESS_MESSAGE"))}catch(e){_e((e==null?void 0:e.message)||this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_ERROR_MESSAGE"))}}}},FZ={class:"mx-8"},UZ={value:"",disabled:"",selected:""},GZ=["value"],VZ={class:"button-container space-x-2"};function HZ(e,t,n,s,a,o){const l=z("LoadingState"),i=z("NextButton"),r=z("SettingsSection");return p(),f("div",FZ,[e.uiFlags.isFetching||e.uiFlags.isFetchingAgentBot?(p(),V(l,{key:0})):(p(),f("form",{key:1,class:"flex flex-wrap mx-0",onSubmit:t[1]||(t[1]=ze((...d)=>o.updateActiveAgentBot&&o.updateActiveAgentBot(...d),["prevent"]))},[v(r,{title:e.$t("AGENT_BOTS.BOT_CONFIGURATION.TITLE"),"sub-title":e.$t("AGENT_BOTS.BOT_CONFIGURATION.DESC")},{default:K(()=>[c("div",null,[c("label",null,[pe(c("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.selectedAgentBotId=d)},[c("option",UZ,E(e.$t("AGENT_BOTS.BOT_CONFIGURATION.SELECT_PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(e.agentBots,d=>(p(),f("option",{key:d.id,value:d.id},E(d.name),9,GZ))),128))],512),[[zt,a.selectedAgentBotId]])]),c("div",VZ,[v(i,{type:"submit",label:e.$t("AGENT_BOTS.BOT_CONFIGURATION.SUBMIT"),"is-loading":e.uiFlags.isSettingAgentBot},null,8,["label","is-loading"]),v(i,{type:"button",disabled:!a.selectedAgentBotId,"is-loading":e.uiFlags.isDisconnecting,faded:"",ruby:"",onClick:o.disconnectBot},{default:K(()=>[Ee(E(e.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECT")),1)]),_:1},8,["disabled","is-loading","onClick"])])])]),_:1},8,["title","sub-title"])],32))])}const WZ=Fe(BZ,[["render",HZ]]),KZ={props:{heading:{type:String,default:""},content:{type:String,default:""},active:{type:Boolean,default:!1},src:{type:String,default:""}}},zZ={class:"flex items-center p-1 text-sm font-medium"},jZ={class:"text-n-slate-11 text-xs leading-[1.4] px-3 pt-3 pb-0 text-start"},YZ={key:0,class:"p-3"},XZ=["src"];function qZ(e,t,n,s,a,o){const l=z("fluent-icon");return p(),f("div",{class:re(["flex flex-col min-w-[15rem] max-h-[21.25rem] max-w-[23.75rem] rounded-md border border-solid",{"bg-n-blue-1 dark:bg-n-solid-2 border-n-blue-4":n.active,"border-n-weak":!n.active}])},[c("div",{class:re(["flex justify-between items-center rounded-t-md px-2 w-full h-10 border-b border-solid",{"bg-n-blue-2 border-n-blue-4":n.active,"bg-n-slate-2 border-n-weak":!n.active}])},[c("div",zZ,E(n.heading),1),n.active?(p(),V(l,{key:0,icon:"checkmark-circle",type:"solid",size:"24",class:"text-n-brand"})):O("",!0)],2),c("div",jZ,E(n.content),1),n.src?(p(),f("div",YZ,[c("img",{src:n.src,class:re(["border rounded-md",n.active?"border-n-blue-border":"border-n-weak"])},null,10,XZ)])):at(e.$slots,"default",{key:1})],2)}const ZZ=Fe(KZ,[["render",qZ]]),QZ={components:{PreviewCard:ZZ,Avatar:Ft},props:{senderNameType:{type:String,default:"friendly"},businessName:{type:String,default:""}},emits:["update"],data(){return{senderNameKeyOptions:[{key:"friendly",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.SUBTITLE"),preview:{senderName:"Smith",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}},{key:"professional",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.SUBTITLE"),preview:{senderName:"",businessName:"Chatwoot   ",email:"<support@yourbusiness.com>"}}]}},methods:{isKeyOptionFriendly(e){return e==="friendly"},userName(e){return this.isKeyOptionFriendly(e.key)?e.preview.senderName:e.preview.businessName},toggleSenderNameType(e){this.$emit("update",e)}}},JZ={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},eQ=["onClick"],tQ={class:"flex flex-col items-start p-3 gap-2"},nQ={class:"text-xs"},sQ={class:"flex flex-row items-center gap-2"},aQ={class:"flex flex-col items-start gap-1"},oQ={class:"items-center flex flex-row gap-0.5 max-w-[18rem]"},lQ={key:0,class:"text-xs font-semibold leading-tight"},iQ={key:1,class:"text-xs"},rQ={class:"text-xs font-semibold leading-tight overflow-hidden whitespace-nowrap text-ellipsis"},cQ={class:"text-xs"};function dQ(e,t,n,s,a,o){const l=z("Avatar"),i=z("PreviewCard");return p(),f("div",JZ,[(p(!0),f(fe,null,Ae(a.senderNameKeyOptions,r=>(p(),f("button",{key:r.key,class:"text-n-slate-12 cursor-pointer p-0",onClick:d=>o.toggleSenderNameType(r.key)},[v(i,{heading:r.heading,content:r.content,active:r.key===n.senderNameType},{default:K(()=>[c("div",tQ,[c("span",nQ,E(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FOR_EG")),1),c("div",sQ,[v(l,{name:o.userName(r),size:32,"rounded-full":""},null,8,["name"]),c("div",aQ,[c("div",oQ,[o.isKeyOptionFriendly(r.key)?(p(),f("span",lQ,E(r.preview.senderName),1)):O("",!0),o.isKeyOptionFriendly(r.key)?(p(),f("span",iQ,E(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.FROM")),1)):O("",!0),c("span",rQ,E(n.businessName||r.preview.businessName),1)]),c("span",cQ,E(r.preview.email),1)])])])]),_:2},1032,["heading","content","active"])],8,eQ))),128))])}const uQ=Fe(QZ,[["render",dQ]]),pQ={components:{BotConfiguration:WZ,CollaboratorsPage:Uq,ConfigurationPage:bq,CustomerSatisfactionPage:Rq,FacebookReauthorize:Mj,GreetingsEditor:uy,PreChatFormSettings:nX,SettingIntroBanner:Ej,SettingsSection:Bi,WeeklyAvailability:OX,WidgetBuilder:PZ,SenderNameExamplePreview:uQ,MicrosoftReauthorize:Dj,GoogleReauthorize:Pj,NextButton:ce,InstagramReauthorize:kj,WhatsappReauthorize:yy,DuplicateInboxBanner:Ay,Editor:Ws,Avatar:Ft},mixins:[Mr],setup(){return{v$:Lt()}},data(){return{avatarFile:null,avatarUrl:"",greetingEnabled:!0,greetingMessage:"",emailCollectEnabled:!1,senderNameType:"friendly",businessName:"",locktoSingleConversation:!1,allowMessagesAfterResolved:!0,continuityViaEmail:!0,selectedInboxName:"",channelWebsiteUrl:"",webhookUrl:"",channelWelcomeTitle:"",channelWelcomeTagline:"",selectedFeatureFlags:[],replyTime:"",selectedTabIndex:0,selectedPortalSlug:"",showBusinessNameInput:!1,welcomeTaglineEditorMenuOptions:Zg}},computed:{...St({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"inboxes/getUIFlags",portals:"portals/allPortals"}),selectedTabKey(){var e;return(e=this.tabs[this.selectedTabIndex])==null?void 0:e.key},shouldShowWhatsAppConfiguration(){return this.isAWhatsAppCloudChannel},whatsAppAPIProviderName(){return this.isAWhatsAppCloudChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"):this.is360DialogWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG"):this.isATwilioWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"):""},tabs(){let e=[{key:"inbox_settings",name:this.$t("INBOX_MGMT.TABS.SETTINGS")},{key:"collaborators",name:this.$t("INBOX_MGMT.TABS.COLLABORATORS")},{key:"businesshours",name:this.$t("INBOX_MGMT.TABS.BUSINESS_HOURS")},{key:"csat",name:this.$t("INBOX_MGMT.TABS.CSAT")}];return this.isAWebWidgetInbox&&(e=[...e,{key:"preChatForm",name:this.$t("INBOX_MGMT.TABS.PRE_CHAT_FORM")},{key:"widgetBuilder",name:this.$t("INBOX_MGMT.TABS.WIDGET_BUILDER")}]),(this.isATwilioChannel||this.isALineChannel||this.isAPIInbox||this.isAnEmailChannel&&!this.inbox.provider||this.shouldShowWhatsAppConfiguration||this.isAWebWidgetInbox)&&(e=[...e,{key:"configuration",name:this.$t("INBOX_MGMT.TABS.CONFIGURATION")}]),this.isFeatureEnabledonAccount(this.accountId,Mt.AGENT_BOTS)&&(e=[...e,{key:"botConfiguration",name:this.$t("INBOX_MGMT.TABS.BOT_CONFIGURATION")}]),e},currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxIcon(){const{medium:e,channel_type:t}=this.inbox;return Ir(t,e)},inboxName(){return this.isATwilioSMSChannel||this.isATwilioWhatsAppChannel?`${this.inbox.name} (${this.inbox.messaging_service_sid||this.inbox.phone_number})`:this.isAWhatsAppChannel?`${this.inbox.name} (${this.inbox.phone_number})`:this.isAnEmailChannel?`${this.inbox.name} (${this.inbox.email})`:this.inbox.name},canLocktoSingleConversation(){return this.isASmsInbox||this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAPIInbox},inboxNameLabel(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.LABEL")},inboxNamePlaceHolder(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER")},textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)},instagramUnauthorized(){return this.isAnInstagramChannel&&this.inbox.reauthorization_required},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,t=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===Ut.FB&&t},microsoftUnauthorized(){return this.isAMicrosoftInbox&&this.inbox.reauthorization_required},facebookUnauthorized(){return this.isAFacebookInbox&&this.inbox.reauthorization_required},googleUnauthorized(){const e=["imap.gmail.com","imap.google.com"].includes(this.inbox.imap_address);return(this.isAGoogleInbox||e)&&this.inbox.reauthorization_required},whatsappUnauthorized(){var e;return this.isAWhatsAppChannel&&this.inbox.provider==="whatsapp_cloud"&&((e=this.inbox.provider_config)==null?void 0:e.source)==="embedded_signup"&&this.inbox.reauthorization_required}},watch:{$route(e){e.name==="settings_inbox_show"&&this.fetchInboxSettings()}},mounted(){this.fetchInboxSettings(),this.fetchPortals()},methods:{fetchPortals(){this.$store.dispatch("portals/index")},handleFeatureFlag(e){this.selectedFeatureFlags=this.toggleInput(this.selectedFeatureFlags,e.target.value)},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]},refreshAvatarUrlOnTabChange(e){this.inbox&&["inbox_settings","widgetBuilder"].includes(this.tabs[e].key)&&(this.avatarUrl=this.inbox.avatar_url)},onTabChange(e){this.selectedTabIndex=e,this.refreshAvatarUrlOnTabChange(e)},fetchInboxSettings(){this.selectedTabIndex=0,this.selectedAgents=[],this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get").then(()=>{this.avatarUrl=this.inbox.avatar_url,this.selectedInboxName=this.inbox.name,this.webhookUrl=this.inbox.webhook_url,this.greetingEnabled=this.inbox.greeting_enabled||!1,this.greetingMessage=this.inbox.greeting_message||"",this.emailCollectEnabled=this.inbox.enable_email_collect,this.senderNameType=this.inbox.sender_name_type,this.businessName=this.inbox.business_name,this.allowMessagesAfterResolved=this.inbox.allow_messages_after_resolved,this.continuityViaEmail=this.inbox.continuity_via_email,this.channelWebsiteUrl=this.inbox.website_url,this.channelWelcomeTitle=this.inbox.welcome_title,this.channelWelcomeTagline=this.inbox.welcome_tagline,this.selectedFeatureFlags=this.inbox.selected_feature_flags||[],this.replyTime=this.inbox.reply_time,this.locktoSingleConversation=this.inbox.lock_to_single_conversation,this.selectedPortalSlug=this.inbox.help_center?this.inbox.help_center.slug:""})},async updateInbox(){try{const e={id:this.currentInboxId,name:this.selectedInboxName,enable_email_collect:this.emailCollectEnabled,allow_messages_after_resolved:this.allowMessagesAfterResolved,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage||"",portal_id:this.selectedPortalSlug?this.portals.find(t=>t.slug===this.selectedPortalSlug).id:null,lock_to_single_conversation:this.locktoSingleConversation,sender_name_type:this.senderNameType,business_name:this.businessName||null,channel:{widget_color:this.inbox.widget_color,website_url:this.channelWebsiteUrl,webhook_url:this.webhookUrl,welcome_title:this.channelWelcomeTitle||"",welcome_tagline:this.channelWelcomeTagline||"",selectedFeatureFlags:this.selectedFeatureFlags,reply_time:this.replyTime||"in_a_few_minutes",continuity_via_email:this.continuityViaEmail}};this.avatarFile&&(e.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",e),_e(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){_e(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.currentInboxId),this.avatarFile=null,this.avatarUrl="",_e(this.$t("INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE"))}catch(e){_e(e.message?e.message:this.$t("INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE"))}},toggleSenderNameType(e){this.senderNameType=e},onClickShowBusinessNameInput(){this.showBusinessNameInput=!this.showBusinessNameInput,this.showBusinessNameInput&&this.$nextTick(()=>{this.$refs.businessNameInput.focus()})}},validations:{webhookUrl:{shouldBeUrl:aN},selectedInboxName:{}}},mQ={class:"overflow-auto flex-grow flex-shrink pr-0 pl-0 w-full min-w-0 settings"},hQ={class:"mx-auto w-full max-w-6xl"},fQ={key:6,class:"mx-8"},gQ={class:"flex flex-col mb-4 items-start gap-1"},_Q={class:"mb-0.5 text-sm font-medium text-n-slate-12"},vQ={key:4,class:"pb-4"},bQ={key:5,class:"pb-4"},TQ={class:"pb-4"},AQ={value:!0},yQ={value:!1},SQ={class:"pb-1 text-sm not-italic text-n-slate-11"},IQ={key:6,class:"pb-4"},CQ={key:7,class:"pb-4"},xQ={key:"in_a_few_minutes",value:"in_a_few_minutes"},NQ={key:"in_a_few_hours",value:"in_a_few_hours"},OQ={key:"in_a_day",value:"in_a_day"},wQ={class:"pb-1 text-sm not-italic text-n-slate-11"},RQ={key:8,class:"pb-4"},$Q={value:!0},MQ={value:!1},kQ={class:"pb-1 text-sm not-italic text-n-slate-11"},LQ={key:9,class:"pb-4"},DQ={value:!0},PQ={value:!1},BQ={class:"pb-1 text-sm not-italic text-n-slate-11"},FQ={key:10,class:"pb-4"},UQ={value:!0},GQ={value:!1},VQ={class:"pb-1 text-sm not-italic text-n-slate-11"},HQ={class:"pb-4"},WQ={value:""},KQ=["value"],zQ={class:"pb-1 text-sm not-italic text-n-slate-11"},jQ={key:11,class:"pb-4"},YQ={value:!0},XQ={value:!1},qQ={class:"pb-1 text-sm not-italic text-n-slate-11"},ZQ={key:12},QQ={key:13,class:"flex gap-2 pt-2 pb-4"},JQ={for:"attachments"},eJ={key:14,class:"flex gap-2 pb-4"},tJ={for:"emoji_picker"},nJ={key:15,class:"flex gap-2 pb-4"},sJ={for:"end_conversation"},aJ={key:16,class:"flex gap-2 pb-4"},oJ={for:"use_inbox_avatar_for_bot"},lJ={class:"pb-4"},iJ={class:"flex flex-col gap-2 items-start mt-2"},rJ={key:0,class:"flex gap-2 w-[80%]"},cJ=["placeholder"],dJ={key:7,class:"mx-8"},uJ={key:8},pJ={key:9},mJ={key:10},hJ={key:11},fJ={key:12},gJ={key:13};function _J(e,t,n,s,a,o){const l=z("woot-tabs-item"),i=z("woot-tabs"),r=z("SettingIntroBanner"),d=z("MicrosoftReauthorize"),u=z("FacebookReauthorize"),m=z("GoogleReauthorize"),h=z("InstagramReauthorize"),_=z("WhatsappReauthorize"),g=z("DuplicateInboxBanner"),T=z("Avatar"),S=z("woot-input"),b=z("Editor"),A=z("woot-color-picker"),y=z("GreetingsEditor"),x=z("SettingsSection"),$=z("SenderNameExamplePreview"),N=z("NextButton"),w=z("CollaboratorsPage"),D=z("ConfigurationPage"),H=z("CustomerSatisfactionPage"),B=z("PreChatFormSettings"),k=z("WeeklyAvailability"),U=z("WidgetBuilder"),G=z("BotConfiguration");return p(),f("div",mQ,[v(r,{"header-image":o.inbox.avatarUrl,"header-title":o.inboxName},{default:K(()=>[v(i,{class:"[&_ul]:p-0",index:a.selectedTabIndex,border:!1,onChange:o.onTabChange},{default:K(()=>[(p(!0),f(fe,null,Ae(o.tabs,(L,M)=>(p(),V(l,{key:L.key,index:M,name:L.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])]),_:1},8,["header-image","header-title"]),c("section",hQ,[o.microsoftUnauthorized?(p(),V(d,{key:0,inbox:o.inbox},null,8,["inbox"])):O("",!0),o.facebookUnauthorized?(p(),V(u,{key:1,inbox:o.inbox},null,8,["inbox"])):O("",!0),o.googleUnauthorized?(p(),V(m,{key:2,inbox:o.inbox},null,8,["inbox"])):O("",!0),o.instagramUnauthorized?(p(),V(h,{key:3,inbox:o.inbox},null,8,["inbox"])):O("",!0),o.whatsappUnauthorized?(p(),V(_,{key:4,inbox:o.inbox},null,8,["inbox"])):O("",!0),o.hasDuplicateInstagramInbox?(p(),V(g,{key:5,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.DUPLICATE_INBOX_BANNER"),class:"mx-8 mt-5"},null,8,["content"])):O("",!0),o.selectedTabKey==="inbox_settings"?(p(),f("div",fQ,[v(x,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT"),"show-border":!1},{default:K(()=>[c("div",gQ,[c("label",_Q,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL")),1),v(T,{src:a.avatarUrl,size:72,"icon-name":o.inboxIcon,name:"","allow-upload":"","rounded-full":"",onUpload:o.handleImageUpload,onDelete:o.handleAvatarDelete},null,8,["src","icon-name","onUpload","onDelete"])]),v(S,{modelValue:a.selectedInboxName,"onUpdate:modelValue":t[0]||(t[0]=L=>a.selectedInboxName=L),class:re(["pb-4",{error:s.v$.selectedInboxName.$error}]),label:o.inboxNameLabel,placeholder:o.inboxNamePlaceHolder,error:s.v$.selectedInboxName.$error?e.$t("INBOX_MGMT.ADD.CHANNEL_NAME.ERROR"):"",onBlur:s.v$.selectedInboxName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),e.isAPIInbox?(p(),V(S,{key:0,modelValue:a.webhookUrl,"onUpdate:modelValue":t[1]||(t[1]=L=>a.webhookUrl=L),class:re(["pb-4",{error:s.v$.webhookUrl.$error}]),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER"),error:s.v$.webhookUrl.$error?e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR"):"",onBlur:s.v$.webhookUrl.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"])):O("",!0),e.isAWebWidgetInbox?(p(),V(S,{key:1,modelValue:a.channelWebsiteUrl,"onUpdate:modelValue":t[2]||(t[2]=L=>a.channelWebsiteUrl=L),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("",!0),e.isAWebWidgetInbox?(p(),V(S,{key:2,modelValue:a.channelWelcomeTitle,"onUpdate:modelValue":t[3]||(t[3]=L=>a.channelWelcomeTitle=L),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):O("",!0),e.isAWebWidgetInbox?(p(),V(b,{key:3,modelValue:a.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=L=>a.channelWelcomeTagline=L),class:"mb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":a.welcomeTaglineEditorMenuOptions},null,8,["modelValue","label","placeholder","enabled-menu-options"])):O("",!0),e.isAWebWidgetInbox?(p(),f("label",vQ,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),v(A,{modelValue:o.inbox.widget_color,"onUpdate:modelValue":t[5]||(t[5]=L=>o.inbox.widget_color=L)},null,8,["modelValue"])])):O("",!0),e.isAWhatsAppChannel?(p(),f("label",bQ,[Ee(E(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[6]||(t[6]=L=>o.whatsAppAPIProviderName=L),type:"text",disabled:""},null,512),[[mt,o.whatsAppAPIProviderName]])])):O("",!0),c("label",TQ,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[7]||(t[7]=L=>a.greetingEnabled=L)},[c("option",AQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),c("option",yQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[zt,a.greetingEnabled]]),c("p",SQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),a.greetingEnabled?(p(),f("div",IQ,[v(y,{modelValue:a.greetingMessage,"onUpdate:modelValue":t[8]||(t[8]=L=>a.greetingMessage=L),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!o.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])])):O("",!0),e.isAWebWidgetInbox?(p(),f("label",CQ,[Ee(E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[9]||(t[9]=L=>a.replyTime=L)},[c("option",xQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES")),1),c("option",NQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS")),1),c("option",OQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY")),1)],512),[[zt,a.replyTime]]),c("p",wQ,E(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("label",RQ,[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[10]||(t[10]=L=>a.emailCollectEnabled=L)},[c("option",$Q,E(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED")),1),c("option",MQ,E(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED")),1)],512),[[zt,a.emailCollectEnabled]]),c("p",kQ,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("label",LQ,[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[11]||(t[11]=L=>a.allowMessagesAfterResolved=L)},[c("option",DQ,E(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED")),1),c("option",PQ,E(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED")),1)],512),[[zt,a.allowMessagesAfterResolved]]),c("p",BQ,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("label",FQ,[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[12]||(t[12]=L=>a.continuityViaEmail=L)},[c("option",UQ,E(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED")),1),c("option",GQ,E(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED")),1)],512),[[zt,a.continuityViaEmail]]),c("p",VQ,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT")),1)])):O("",!0),c("div",HQ,[c("label",null,E(e.$t("INBOX_MGMT.HELP_CENTER.LABEL")),1),pe(c("select",{"onUpdate:modelValue":t[13]||(t[13]=L=>a.selectedPortalSlug=L),class:"filter__question"},[c("option",WQ,E(e.$t("INBOX_MGMT.HELP_CENTER.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(e.portals,L=>(p(),f("option",{key:L.slug,value:L.slug},E(L.name),9,KQ))),128))],512),[[zt,a.selectedPortalSlug]]),c("p",zQ,E(e.$t("INBOX_MGMT.HELP_CENTER.SUB_TEXT")),1)]),o.canLocktoSingleConversation?(p(),f("label",jQ,[Ee(E(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION"))+" ",1),pe(c("select",{"onUpdate:modelValue":t[14]||(t[14]=L=>a.locktoSingleConversation=L)},[c("option",YQ,E(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED")),1),c("option",XQ,E(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED")),1)],512),[[zt,a.locktoSingleConversation]]),c("p",qQ,E(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("label",ZQ,E(e.$t("INBOX_MGMT.FEATURES.LABEL")),1)):O("",!0),e.isAWebWidgetInbox?(p(),f("div",QQ,[pe(c("input",{"onUpdate:modelValue":t[15]||(t[15]=L=>a.selectedFeatureFlags=L),type:"checkbox",value:"attachments",onInput:t[16]||(t[16]=(...L)=>o.handleFeatureFlag&&o.handleFeatureFlag(...L))},null,544),[[Xt,a.selectedFeatureFlags]]),c("label",JQ,E(e.$t("INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("div",eJ,[pe(c("input",{"onUpdate:modelValue":t[17]||(t[17]=L=>a.selectedFeatureFlags=L),type:"checkbox",value:"emoji_picker",onInput:t[18]||(t[18]=(...L)=>o.handleFeatureFlag&&o.handleFeatureFlag(...L))},null,544),[[Xt,a.selectedFeatureFlags]]),c("label",tJ,E(e.$t("INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("div",nJ,[pe(c("input",{"onUpdate:modelValue":t[19]||(t[19]=L=>a.selectedFeatureFlags=L),type:"checkbox",value:"end_conversation",onInput:t[20]||(t[20]=(...L)=>o.handleFeatureFlag&&o.handleFeatureFlag(...L))},null,544),[[Xt,a.selectedFeatureFlags]]),c("label",sJ,E(e.$t("INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION")),1)])):O("",!0),e.isAWebWidgetInbox?(p(),f("div",aJ,[pe(c("input",{"onUpdate:modelValue":t[21]||(t[21]=L=>a.selectedFeatureFlags=L),type:"checkbox",value:"use_inbox_avatar_for_bot",onInput:t[22]||(t[22]=(...L)=>o.handleFeatureFlag&&o.handleFeatureFlag(...L))},null,544),[[Xt,a.selectedFeatureFlags]]),c("label",oJ,E(e.$t("INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT")),1)])):O("",!0)]),_:1},8,["title","sub-title"]),e.isAWebWidgetInbox||e.isAnEmailChannel?(p(),V(x,{key:0,title:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE"),"sub-title":e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT"),"show-border":!1},{default:K(()=>[c("div",lJ,[v($,{"sender-name-type":a.senderNameType,"business-name":a.businessName,onUpdate:o.toggleSenderNameType},null,8,["sender-name-type","business-name","onUpdate"]),c("div",iJ,[v(N,{ghost:"",blue:"",label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT"),onClick:o.onClickShowBusinessNameInput},null,8,["label","onClick"]),a.showBusinessNameInput?(p(),f("div",rJ,[pe(c("input",{ref:"businessNameInput","onUpdate:modelValue":t[23]||(t[23]=L=>a.businessName=L),placeholder:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER"),class:"mb-0",type:"text"},null,8,cJ),[[mt,a.businessName]]),v(N,{label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT"),class:"flex-shrink-0",onClick:o.updateInbox},null,8,["label","onClick"])])):O("",!0)])])]),_:1},8,["title","sub-title"])):O("",!0),v(x,{"show-border":!1},{default:K(()=>[e.isAPIInbox?(p(),V(N,{key:0,type:"submit",disabled:s.v$.webhookUrl.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:o.updateInbox},null,8,["disabled","label","is-loading","onClick"])):(p(),V(N,{key:1,type:"submit",disabled:s.v$.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:o.updateInbox},null,8,["disabled","label","is-loading","onClick"]))]),_:1})])):O("",!0),o.selectedTabKey==="collaborators"?(p(),f("div",dJ,[v(w,{inbox:o.inbox},null,8,["inbox"])])):O("",!0),o.selectedTabKey==="configuration"?(p(),f("div",uJ,[v(D,{inbox:o.inbox},null,8,["inbox"])])):O("",!0),o.selectedTabKey==="csat"?(p(),f("div",pJ,[v(H,{inbox:o.inbox},null,8,["inbox"])])):O("",!0),o.selectedTabKey==="preChatForm"?(p(),f("div",mJ,[v(B,{inbox:o.inbox},null,8,["inbox"])])):O("",!0),o.selectedTabKey==="businesshours"?(p(),f("div",hJ,[v(k,{inbox:o.inbox},null,8,["inbox"])])):O("",!0),o.selectedTabKey==="widgetBuilder"?(p(),f("div",fJ,[v(U,{inbox:o.inbox},null,8,["inbox"])])):O("",!0),o.selectedTabKey==="botConfiguration"?(p(),f("div",gJ,[v(G,{inbox:o.inbox},null,8,["inbox"])])):O("",!0)])])}const vJ=Fe(pQ,[["render",_J]]),bJ={setup(){const{replaceInstallationName:e}=Io();return{replaceInstallationName:e}},computed:{...St({globalConfig:"globalConfig/get"}),createFlowSteps(){const e=["CHANNEL","INBOX","AGENT","FINISH"],t={CHANNEL:"settings_inbox_new",INBOX:"settings_inboxes_page_channel",AGENT:"settings_inboxes_add_agents",FINISH:"settings_inbox_finish"};return e.map(n=>({title:this.$t(`INBOX_MGMT.CREATE_FLOW.${n}.TITLE`),body:this.$t(`INBOX_MGMT.CREATE_FLOW.${n}.BODY`),route:t[n]}))},items(){return this.createFlowSteps.map(e=>({...e,body:this.replaceInstallationName(e.body)}))}}},EJ={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full"},TJ={class:"col-span-6"};function AJ(e,t,n,s,a,o){const l=z("woot-wizard"),i=z("router-view");return p(),f("div",EJ,[v(l,{class:"hidden md:block col-span-2","global-config":e.globalConfig,items:o.items},null,8,["global-config","items"]),c("div",TJ,[v(i)])])}const yJ=Fe(bJ,[["render",AJ]]),SJ={components:{ChannelSelector:fy},props:{channel:{type:Object,required:!0},enabledFeatures:{type:Object,required:!0}},emits:["channelItemClick"],computed:{hasFbConfigured(){var e;return(e=window.chatwootConfig)==null?void 0:e.fbAppId},hasInstagramConfigured(){var e;return(e=window.chatwootConfig)==null?void 0:e.instagramAppId},isActive(){const{key:e}=this.channel;return Object.keys(this.enabledFeatures).length===0?!1:e==="website"?this.enabledFeatures.channel_website:e==="facebook"?this.enabledFeatures.channel_facebook&&this.hasFbConfigured:e==="email"?this.enabledFeatures.channel_email:e==="instagram"?this.enabledFeatures.channel_instagram&&this.hasInstagramConfigured:e==="voice"?this.enabledFeatures.channel_voice:["website","twilio","api","whatsapp","sms","telegram","line","instagram","voice"].includes(e)},isComingSoon(){const{key:e}=this.channel;return["voice"].includes(e)&&!this.isActive}},methods:{getChannelThumbnail(){return this.channel.key==="api"&&this.channel.thumbnail?this.channel.thumbnail:`/assets/images/dashboard/channels/${this.channel.key}.png`},onItemClick(){this.isActive&&this.$emit("channelItemClick",this.channel.key)}}};function IJ(e,t,n,s,a,o){const l=z("ChannelSelector");return p(),V(l,{class:re({inactive:!o.isActive}),title:n.channel.name,src:o.getChannelThumbnail(),"is-coming-soon":o.isComingSoon,onClick:o.onItemClick},null,8,["class","title","src","is-coming-soon","onClick"])}const CJ=Fe(SJ,[["render",IJ]]),xJ={components:{ChannelItem:CJ,PageHeader:da},setup(){const{replaceInstallationName:e}=Io();return{replaceInstallationName:e}},data(){return{enabledFeatures:{}}},computed:{account(){return this.$store.getters["accounts/getAccount"](this.accountId)},channelList(){const{apiChannelName:e,apiChannelThumbnail:t}=this.globalConfig;return[{key:"website",name:"Website"},{key:"facebook",name:"Messenger"},{key:"whatsapp",name:"WhatsApp"},{key:"sms",name:"SMS"},{key:"email",name:"Email"},{key:"api",name:e||"API",thumbnail:t},{key:"telegram",name:"Telegram"},{key:"line",name:"Line"},{key:"instagram",name:"Instagram"},{key:"voice",name:"Voice"}]},...St({accountId:"getCurrentAccountId",globalConfig:"globalConfig/get"})},mounted(){this.initializeEnabledFeatures()},methods:{async initializeEnabledFeatures(){this.enabledFeatures=this.account.features},initChannelAuth(e){const t={sub_page:e,accountId:this.accountId};Ns.push({name:"settings_inboxes_page_channel",params:t})}}},NJ={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},OJ={class:"grid max-w-3xl grid-cols-2 mx-0 mt-6 sm:grid-cols-3 lg:grid-cols-4"};function wJ(e,t,n,s,a,o){const l=z("PageHeader"),i=z("ChannelItem");return p(),f("div",NJ,[v(l,{class:"max-w-4xl","header-title":e.$t("INBOX_MGMT.ADD.AUTH.TITLE"),"header-content":s.replaceInstallationName(e.$t("INBOX_MGMT.ADD.AUTH.DESC"))},null,8,["header-title","header-content"]),c("div",OJ,[(p(!0),f(fe,null,Ae(o.channelList,r=>(p(),V(i,{key:r.key,channel:r,"enabled-features":a.enabledFeatures,onChannelItemClick:o.initChannelAuth},null,8,["channel","enabled-features","onChannelItemClick"]))),128))])])}const RJ=Fe(xJ,[["render",wJ]]),$J={components:{PageHeader:da,NextButton:ce},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:Lt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...St({agentList:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{async addAgents(){this.isCreating=!0;const e=this.$route.params.inbox_id,t=this.selectedAgents.map(n=>n.id);try{await AN.update({inboxId:e,agentList:t}),Ns.replace({name:"settings_inbox_finish",params:{page:"new",inbox_id:this.$route.params.inbox_id}})}catch(n){_e(n.message)}this.isCreating=!1}}},MJ={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},kJ={class:"w-full"},LJ={class:"w-full"},DJ={key:0,class:"message"},PJ={class:"w-full"};function BJ(e,t,n,s,a,o){const l=z("PageHeader"),i=z("multiselect"),r=z("NextButton");return p(),f("div",MJ,[c("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[1]||(t[1]=ze(d=>o.addAgents(),["prevent"]))},[c("div",kJ,[v(l,{"header-title":e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.AGENTS.DESC")},null,8,["header-title","header-content"])]),c("div",null,[c("div",LJ,[c("label",{class:re({error:s.v$.selectedAgents.$error})},[Ee(E(e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"))+" ",1),v(i,{modelValue:a.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=d=>a.selectedAgents=d),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.AGENTS.PICK_AGENTS"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedAgents.$error?(p(),f("span",DJ,E(e.$t("INBOX_MGMT.ADD.AGENTS.VALIDATION_ERROR")),1)):O("",!0)],2)]),c("div",PJ,[v(r,{type:"submit","is-loading":a.isCreating,solid:"",blue:"",label:e.$t("INBOX_MGMT.AGENTS.BUTTON_TEXT")},null,8,["is-loading","label"])])])],32)])}const FJ=Fe($J,[["render",BJ]]),UJ={props:{title:{type:String,default:""},message:{type:String,default:""}}},GJ={class:"empty-state py-16 px-1 ml-0 mr-0"},VJ={key:0,class:"text-n-slate-12 block text-center w-full text-xl font-medium"},HJ={key:1,class:"block text-center text-n-slate-11 my-4 mx-auto w-[90%]"};function WJ(e,t,n,s,a,o){return p(),f("div",GJ,[n.title?(p(),f("h3",VJ,E(n.title),1)):O("",!0),n.message?(p(),f("p",HJ,E(n.message),1)):O("",!0),at(e.$slots,"default")])}const Lr=Fe(UJ,[["render",WJ]]),KJ={components:{EmptyState:Lr,NextButton:ce,DuplicateInboxBanner:Ay},computed:{currentInbox(){return this.$store.getters["inboxes/getInbox"](this.$route.params.inbox_id)},isATwilioInbox(){return this.currentInbox.channel_type==="Channel::TwilioSms"},hasDuplicateInstagramInbox(){const e=this.currentInbox.instagram_id,t=this.$store.getters["inboxes/getFacebookInboxByInstagramId"](e);return this.currentInbox.channel_type===Ut.INSTAGRAM&&t},isAEmailInbox(){return this.currentInbox.channel_type==="Channel::Email"},isALineInbox(){return this.currentInbox.channel_type==="Channel::Line"},isASmsInbox(){return this.currentInbox.channel_type==="Channel::Sms"},isWhatsAppCloudInbox(){return this.currentInbox.channel_type==="Channel::Whatsapp"&&this.currentInbox.provider==="whatsapp_cloud"},shouldShowWhatsAppWebhookDetails(){var e;return this.isWhatsAppCloudInbox&&((e=this.currentInbox.provider_config)==null?void 0:e.source)!=="embedded_signup"},message(){return this.isATwilioInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")}`:this.isASmsInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_CALLBACK.SUBTITLE")}`:this.isALineInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")}`:this.isWhatsAppCloudInbox&&this.shouldShowWhatsAppWebhookDetails?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.SUBTITLE")}`:this.isAEmailInbox&&!this.currentInbox.provider?this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.FINISH_MESSAGE"):this.currentInbox.web_widget_script?this.$t("INBOX_MGMT.FINISH.WEBSITE_SUCCESS"):this.$t("INBOX_MGMT.FINISH.MESSAGE")}}},zJ={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},jJ={class:"w-full text-center"},YJ={class:"my-4 mx-auto max-w-[70%]"},XJ={class:"w-[50%] max-w-[50%] ml-[25%]"},qJ={key:0,class:"w-[50%] max-w-[50%] ml-[25%]"},ZJ={class:"mt-8 font-medium text-slate-700 dark:text-slate-200"},QJ={class:"mt-8 font-medium text-n-slate-11"},JJ={class:"w-[50%] max-w-[50%] ml-[25%]"},eee={class:"w-[50%] max-w-[50%] ml-[25%]"},tee={key:1,class:"w-[50%] max-w-[50%] ml-[25%]"},nee={class:"flex justify-center gap-2 mt-4"};function see(e,t,n,s,a,o){const l=z("DuplicateInboxBanner"),i=z("woot-code"),r=z("NextButton"),d=z("router-link"),u=z("EmptyState");return p(),f("div",zJ,[o.hasDuplicateInstagramInbox?(p(),V(l,{key:0,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.NEW_INBOX_SUGGESTION")},null,8,["content"])):O("",!0),v(u,{title:e.$t("INBOX_MGMT.FINISH.TITLE"),message:o.message,"button-text":e.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},{default:K(()=>[c("div",jJ,[c("div",YJ,[o.currentInbox.web_widget_script?(p(),V(i,{key:0,script:o.currentInbox.web_widget_script},null,8,["script"])):O("",!0)]),c("div",XJ,[o.isATwilioInbox?(p(),V(i,{key:0,lang:"html",script:o.currentInbox.callback_webhook_url},null,8,["script"])):O("",!0)]),o.shouldShowWhatsAppWebhookDetails?(p(),f("div",qJ,[c("p",ZJ,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_URL")),1),v(i,{lang:"html",script:o.currentInbox.callback_webhook_url},null,8,["script"]),c("p",QJ,E(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_VERIFICATION_TOKEN")),1),v(i,{lang:"html",script:o.currentInbox.provider_config.webhook_verify_token},null,8,["script"])])):O("",!0),c("div",JJ,[o.isALineInbox?(p(),V(i,{key:0,lang:"html",script:o.currentInbox.callback_webhook_url},null,8,["script"])):O("",!0)]),c("div",eee,[o.isASmsInbox?(p(),V(i,{key:0,lang:"html",script:o.currentInbox.callback_webhook_url},null,8,["script"])):O("",!0)]),o.isAEmailInbox&&!o.currentInbox.provider?(p(),f("div",tee,[v(i,{lang:"html",script:o.currentInbox.forward_to_email},null,8,["script"])])):O("",!0),c("div",nee,[v(d,{to:{name:"settings_inbox_show",params:{inboxId:e.$route.params.inbox_id}}},{default:K(()=>[v(r,{outline:"",slate:"",label:e.$t("INBOX_MGMT.FINISH.MORE_SETTINGS")},null,8,["label"])]),_:1},8,["to"]),v(d,{to:{name:"inbox_dashboard",params:{inboxId:e.$route.params.inbox_id}}},{default:K(()=>[v(r,{solid:"",teal:"",label:e.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1},8,["to"])])])]),_:1},8,["title","message","button-text"])])}const aee=Fe(KJ,[["render",see]]),oee={routes:[{path:Bt("accounts/:accountId/settings/inboxes"),component:Aa,children:[{path:"",redirect:e=>({name:"settings_inbox_list",params:e.params})},{path:"list",name:"settings_inbox_list",component:mj,meta:{featureFlag:Mt.INBOX_MANAGEMENT,permissions:["administrator"]}}]},{path:Bt("accounts/:accountId/settings/inboxes"),component:sd,props:e=>{const t=e.name!=="settings_inbox_list",n=e.name==="settings_inbox_show";return{headerTitle:"INBOX_MGMT.HEADER",icon:"mail-inbox-all",showBackButton:t,fullWidth:n}},children:[{path:"new",component:yJ,children:[{path:"",name:"settings_inbox_new",component:RJ,meta:{featureFlag:Mt.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":inbox_id/finish",name:"settings_inbox_finish",component:aee,meta:{featureFlag:Mt.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":sub_page",name:"settings_inboxes_page_channel",component:Xz,meta:{featureFlag:Mt.INBOX_MANAGEMENT,permissions:["administrator"]},props:e=>({channelName:e.params.sub_page})},{path:":inbox_id/agents",name:"settings_inboxes_add_agents",meta:{featureFlag:Mt.INBOX_MANAGEMENT,permissions:["administrator"]},component:FJ}]},{path:":inboxId",name:"settings_inbox_show",component:vJ,meta:{featureFlag:Mt.INBOX_MANAGEMENT,permissions:["administrator"]}}]}]},Ap=e=>{const t=ke("integrations/getIntegration"),n=C(()=>t.value(e)),s=C(()=>n.value.hook_type==="inbox"),a=C(()=>!!n.value.hooks.length),o=C(()=>n.value.allow_multiple_hooks?"multiple":"single"),l=C(()=>o.value==="multiple"),i=C(()=>o.value==="single");return{integration:n,integrationType:o,isIntegrationMultiple:l,isIntegrationSingle:i,isHookTypeInbox:s,hasConnectedHooks:a}},lee={components:{FormKit:ox,NextButton:ce},props:{integrationId:{type:String,required:!0}},emits:["close"],setup(e){const{integration:t,isHookTypeInbox:n}=Ap(e.integrationId);return{integration:t,isHookTypeInbox:n}},data(){return{endPoint:"",alertMessage:"",values:{}}},computed:{...St({uiFlags:"integrations/getUIFlags",dialogFlowEnabledInboxes:"inboxes/dialogFlowEnabledInboxes"}),inboxes(){return this.dialogFlowEnabledInboxes.filter(e=>this.isIntegrationDialogflow?!this.connectedDialogflowInboxIds.includes(e.id):!0).map(e=>({label:e.name,value:e.id}))},connectedDialogflowInboxIds(){return this.isIntegrationDialogflow?this.integration.hooks.map(e=>{var t;return(t=e.inbox)==null?void 0:t.id}):[]},formItems(){return this.integration.settings_form_schema},isIntegrationDialogflow(){return this.integration.id==="dialogflow"}},methods:{onClose(){this.$emit("close")},buildHookPayload(){const e={app_id:this.integration.id,settings:{}};return e.settings=Object.keys(this.values).reduce((t,n)=>(n!=="inbox"&&(t[n]=this.values[n]),t),{}),this.formItems.forEach(t=>{var n;(n=t.validation)!=null&&n.includes("JSON")&&(e.settings[t.name]=JSON.parse(e.settings[t.name]))}),this.isHookTypeInbox&&this.values.inbox&&(e.inbox_id=this.values.inbox),e},async submitForm(){var e,t;try{await this.$store.dispatch("integrations/createHook",this.buildHookPayload()),this.alertMessage=this.$t("INTEGRATION_APPS.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{_e(this.alertMessage)}}}},iee={class:"flex flex-col h-auto overflow-auto integration-hooks"},ree={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function cee(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("FormKit"),r=z("NextButton");return p(),f("div",iee,[v(l,{"header-title":s.integration.name,"header-content":s.integration.short_description},null,8,["header-title","header-content"]),v(i,{modelValue:a.values,"onUpdate:modelValue":t[0]||(t[0]=d=>a.values=d),type:"form","form-class":"w-full grid gap-4","submit-attrs":{inputClass:"hidden",wrapperClass:"hidden"},"incomplete-message":!1,onSubmit:o.submitForm},{default:K(()=>[(p(!0),f(fe,null,Ae(o.formItems,d=>(p(),V(i,Bs({key:d.name,ref_for:!0},d),null,16))),128)),s.isHookTypeInbox?(p(),V(i,{key:0,options:o.inboxes,type:"select",name:"inbox","input-class":"reset-base",placeholder:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.LABEL"),label:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.PLACEHOLDER"),validation:"required","validation-name":"Inbox"},null,8,["options","placeholder","label"])):O("",!0),c("div",ree,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_APPS.ADD.FORM.CANCEL"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(r,{type:"submit",label:e.$t("INTEGRATION_APPS.ADD.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreatingHook},null,8,["label","is-loading"])])]),_:1},8,["modelValue","onSubmit"])])}const dee=Fe(lee,[["render",cee]]),uee={class:"outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow flex-grow overflow-auto p-4"},pee={class:"flex items-center justify-center"},mee={class:"flex h-16 w-16 items-center justify-center"},hee=["src"],fee=["src"],gee={class:"flex flex-col justify-center m-0 mx-4 flex-1"},_ee={class:"mb-1 text-xl font-medium text-n-slate-12"},vee={class:"text-n-slate-11 text-sm leading-6"},bee={class:"flex justify-center items-center mb-0 w-[15%]"},Eee={key:0},Tee={key:1},Aee={__name:"SingleIntegrationHooks",props:{integrationId:{type:String,required:!0}},emits:["add","delete"],setup(e){const t=e,{integration:n,hasConnectedHooks:s}=Ap(t.integrationId);return(a,o)=>(p(),f("div",uee,[c("div",pee,[c("div",mee,[c("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,hee),c("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,fee)]),c("div",gee,[c("h3",_ee,E(I(n).name),1),c("p",vee,E(I(n).description),1)]),c("div",bee,[I(s)?(p(),f("div",Eee,[c("div",{onClick:o[0]||(o[0]=l=>a.$emit("delete",I(n).hooks[0]))},[v(ce,{ruby:"",faded:"",label:a.$t("INTEGRATION_APPS.DISCONNECT.BUTTON_TEXT")},null,8,["label"])])])):(p(),f("div",Tee,[v(ce,{blue:"",faded:"",label:a.$t("INTEGRATION_APPS.CONNECT.BUTTON_TEXT"),onClick:o[1]||(o[1]=l=>a.$emit("add"))},null,8,["label"])]))])])]))}},yee={components:{BaseSettingsHeader:js,NextButton:ce},props:{integrationId:{type:String,required:!0},showAddButton:{type:Boolean,default:!1}},emits:["delete","add"],setup(e){const{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}=Ap(e.integrationId);return{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}},computed:{...St({globalConfig:"globalConfig/get"}),hookHeaders(){return this.integration.visible_properties},hooks(){if(!this.hasConnectedHooks)return[];const{hooks:e}=this.integration;return e.map(t=>({...t,id:t.id,properties:this.hookHeaders.map(n=>t.settings[n]?t.settings[n]:"--")}))}},mounted(){},methods:{inboxName(e){return e.inbox?e.inbox.name:""}}},See={class:"flex flex-col flex-1 gap-8 overflow-auto"},Iee={class:"w-full"},Cee={key:0},xee={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},Nee={key:0},Oee={key:0,class:"break-words"},wee={class:"flex justify-end gap-1"},Ree={key:1,class:"flex flex-col items-center justify-center h-full"};function $ee(e,t,n,s,a,o){const l=z("NextButton"),i=z("BaseSettingsHeader"),r=_t("tooltip");return p(),f("div",See,[v(i,{title:s.integration.name,description:e.$t(`INTEGRATION_APPS.SIDEBAR_DESCRIPTION.${s.integration.name.toUpperCase()}`,{installationName:e.globalConfig.installationName}),"feature-name":n.integrationId,"back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:K(()=>[n.showAddButton?(p(),V(l,{key:0,icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_APPS.ADD_BUTTON"),onClick:t[0]||(t[0]=d=>e.$emit("add"))},null,8,["label"])):O("",!0)]),_:1},8,["title","description","feature-name","back-button-label"]),c("div",Iee,[s.hasConnectedHooks?(p(),f("table",Cee,[c("thead",xee,[(p(!0),f(fe,null,Ae(o.hookHeaders,d=>(p(),f("th",{key:d,class:"ltr:!pl-0 rtl:!pr-0"},E(d),1))),128)),s.isHookTypeInbox?(p(),f("th",Nee,E(e.$t("INTEGRATION_APPS.LIST.INBOX")),1)):O("",!0)]),c("tbody",null,[(p(!0),f(fe,null,Ae(o.hooks,d=>(p(),f("tr",{key:d.id,class:"border-b border-n-weak [&>td]:p-2.5 [&>td]:text-n-slate-12"},[(p(!0),f(fe,null,Ae(d.properties,u=>(p(),f("td",{key:u,class:"ltr:!pl-0 rtl:!pr-0"},E(u),1))),128)),s.isHookTypeInbox?(p(),f("td",Oee,E(o.inboxName(d)),1)):O("",!0),c("td",wee,[pe(v(l,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:u=>e.$emit("delete",d)},null,8,["onClick"]),[[r,e.$t("INTEGRATION_APPS.LIST.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),f("p",Ree,E(e.$t("INTEGRATION_APPS.NO_HOOK_CONFIGURED",{integrationId:s.integration.id})),1))])])}const Mee=Fe(yee,[["render",$ee]]),kee={components:{NewHook:dee,SingleIntegrationHooks:Aee,MultipleIntegrationHooks:Mee},props:{integrationId:{type:[String,Number],required:!0}},setup(e){const{integrationId:t}=e,{integration:n,isIntegrationMultiple:s,isIntegrationSingle:a,isHookTypeInbox:o}=Ap(t);return{integration:n,isIntegrationMultiple:s,isIntegrationSingle:a,isHookTypeInbox:o}},data(){return{loading:{},showAddHookModal:!1,showDeleteConfirmationPopup:!1,selectedHook:{},alertMessage:""}},computed:{...St({uiFlags:"integrations/getUIFlags"}),showIntegrationHooks(){return!this.uiFlags.isFetching&&!yN(this.integration)},showAddButton(){return this.showIntegrationHooks&&this.isIntegrationMultiple},deleteTitle(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.TITLE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.TITLE.ACCOUNT")},deleteMessage(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.MESSAGE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.MESSAGE.ACCOUNT")},confirmText(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.INBOX"):this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.ACCOUNT")},cancelText(){return this.$t("INTEGRATION_APPS.DELETE.CANCEL_BUTTON_TEXT")}},methods:{openAddHookModal(){this.showAddHookModal=!0},hideAddHookModal(){this.showAddHookModal=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},async confirmDeletion(){var e,t;try{await this.$store.dispatch("integrations/deleteHook",{hookId:this.selectedHook.id,appId:this.selectedHook.app_id}),this.alertMessage=this.$t("INTEGRATION_APPS.DELETE.API.SUCCESS_MESSAGE"),this.closeDeletePopup()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.DELETE.API.ERROR_MESSAGE")}finally{_e(this.alertMessage)}}}},Lee={class:"overflow-auto p-4 w-full my-auto flex flex-wrap h-full"},Dee={key:0,class:"w-full"},Pee={key:0},Bee={key:1};function Fee(e,t,n,s,a,o){const l=z("MultipleIntegrationHooks"),i=z("SingleIntegrationHooks"),r=z("NewHook"),d=z("woot-modal"),u=z("woot-delete-modal");return p(),f("div",Lee,[o.showIntegrationHooks?(p(),f("div",Dee,[s.isIntegrationMultiple?(p(),f("div",Pee,[v(l,{"integration-id":n.integrationId,"show-add-button":o.showAddButton,onAdd:o.openAddHookModal,onDelete:o.openDeletePopup},null,8,["integration-id","show-add-button","onAdd","onDelete"])])):O("",!0),s.isIntegrationSingle?(p(),f("div",Bee,[v(i,{"integration-id":n.integrationId,onAdd:o.openAddHookModal,onDelete:o.openDeletePopup},null,8,["integration-id","onAdd","onDelete"])])):O("",!0)])):O("",!0),v(d,{show:a.showAddHookModal,"onUpdate:show":t[0]||(t[0]=m=>a.showAddHookModal=m),"on-close":o.hideAddHookModal},{default:K(()=>[v(r,{"integration-id":n.integrationId,onClose:o.hideAddHookModal},null,8,["integration-id","onClose"])]),_:1},8,["show","on-close"]),v(u,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=m=>a.showDeleteConfirmationPopup=m),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:o.deleteTitle,message:o.deleteMessage,"confirm-text":o.confirmText,"reject-text":o.cancelText},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const Uee=Fe(kee,[["render",Fee]]),Gee={class:"flex flex-col flex-1 p-6 m-[1px] outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},Vee={class:"flex items-start justify-between"},Hee={class:"flex h-12 w-12 mb-4"},Wee=["src"],Kee=["src"],zee={class:"flex flex-col m-0 flex-1"},jee={class:"font-medium mb-2 text-n-slate-12 flex justify-between items-center"},Yee={class:"text-base font-semibold"},Xee={class:"text-n-slate-11"},qee={__name:"IntegrationItem",props:{id:{type:[String,Number],required:!0},name:{type:String,default:""},description:{type:String,default:""},enabled:{type:Boolean,default:!1}},setup(e){const t=e,s=Nn().getCurrentAccountId,{t:a}=Pe(),{replaceInstallationName:o}=Io(),l=C(()=>t.enabled?a("INTEGRATION_APPS.STATUS.ENABLED"):a("INTEGRATION_APPS.STATUS.DISABLED")),i=C(()=>t.enabled?"bg-n-teal-9":"bg-n-slate-8"),r=C(()=>Bt(`accounts/${s.value}/settings/integrations/${t.id}`));return(d,u)=>{const m=z("router-link"),h=_t("tooltip");return p(),f("div",Gee,[c("div",Vee,[c("div",Hee,[c("img",{src:`/dashboard/images/integrations/${e.id}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,Wee),c("img",{src:`/dashboard/images/integrations/${e.id}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,Kee)]),pe((p(),f("span",{class:re(["text-white p-0.5 rounded-full w-5 h-5 flex items-center justify-center",i.value])},u[0]||(u[0]=[c("i",{class:"i-ph-check-bold text-sm"},null,-1)]),2)),[[h,l.value]])]),c("div",zee,[c("div",jee,[c("span",Yee,E(e.name),1),v(m,{to:r.value},{default:K(()=>[v(ce,{label:d.$t("INTEGRATION_APPS.CONFIGURE"),link:""},null,8,["label"])]),_:1},8,["to"])]),c("p",Xee,E(I(o)(e.description)),1)])])}}},Zee={class:"flex-grow flex-shrink overflow-auto"},Qee={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},Jee={__name:"Index",setup(e){const t=yt(),n=Nn(),{replaceInstallationName:s}=Io(),a=n["integrations/getUIFlags"],o=C(()=>n["integrations/getAppIntegrations"].value);return pt(()=>{t.dispatch("integrations/get")}),(l,i)=>(p(),V(ro,{"is-loading":I(a).isFetching,"loading-message":l.$t("INTEGRATION_SETTINGS.LOADING")},{header:K(()=>[v(js,{title:l.$t("INTEGRATION_SETTINGS.HEADER"),description:I(s)(l.$t("INTEGRATION_SETTINGS.DESCRIPTION")),"link-text":l.$t("INTEGRATION_SETTINGS.LEARN_MORE"),"feature-name":"integrations"},null,8,["title","description","link-text"])]),body:K(()=>[c("div",Zee,[c("div",Qee,[(p(!0),f(fe,null,Ae(o.value,r=>(p(),V(qee,{id:r.id,key:r.id,logo:r.logo,name:r.name,description:r.description,enabled:r.enabled},null,8,["id","logo","name","description","enabled"]))),128))])])]),_:1},8,["is-loading","loading-message"]))}},r_=(e,t)=>{const n=t.toUpperCase();return`${e}.${n}`},{EXAMPLE_WEBHOOK_URL:ete}=Pt,tte=["conversation_created","conversation_status_changed","conversation_updated","message_created","message_updated","webwidget_triggered","contact_created","contact_updated","conversation_typing_on","conversation_typing_off"],nte={components:{NextButton:ce},props:{value:{type:Object,default:()=>({})},isSubmitting:{type:Boolean,default:!1},submitLabel:{type:String,required:!0}},emits:["submit","cancel"],setup(){return{v$:Lt()}},validations:{url:{required:lt,minLength:on(7),url:Xc},subscriptions:{required:lt}},data(){return{url:this.value.url||"",subscriptions:this.value.subscriptions||[],supportedWebhookEvents:tte}},computed:{webhookURLInputPlaceholder(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.PLACEHOLDER",{webhookExampleURL:ete})}},methods:{onSubmit(){this.$emit("submit",{url:this.url,subscriptions:this.subscriptions})},getI18nKey:r_}},ste={class:"w-full"},ate=["placeholder"],ote={key:0,class:"message"},lte={class:"flex flex-col gap-2.5 mb-4"},ite=["id","value"],rte=["for"],cte={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function dte(e,t,n,s,a,o){const l=z("NextButton");return p(),f("form",{class:"flex flex-col w-full",onSubmit:t[4]||(t[4]=ze((...i)=>o.onSubmit&&o.onSubmit(...i),["prevent"]))},[c("div",ste,[c("label",{class:re({error:s.v$.url.$error})},[Ee(E(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.url=i),type:"text",name:"url",placeholder:o.webhookURLInputPlaceholder,onInput:t[1]||(t[1]=(...i)=>s.v$.url.$touch&&s.v$.url.$touch(...i))},null,40,ate),[[mt,a.url]]),s.v$.url.$error?(p(),f("span",ote,E(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.ERROR")),1)):O("",!0)],2),c("label",{class:re([{error:s.v$.url.$error},"mb-2"])},E(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.LABEL")),3),c("div",lte,[(p(!0),f(fe,null,Ae(a.supportedWebhookEvents,i=>(p(),f("div",{key:i,class:"flex items-center"},[pe(c("input",{id:i,"onUpdate:modelValue":t[2]||(t[2]=r=>a.subscriptions=r),type:"checkbox",value:i,name:"subscriptions",class:"mr-2"},null,8,ite),[[Xt,a.subscriptions]]),c("label",{for:i,class:"text-sm"},E(`${e.$t(o.getI18nKey("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",i))} (${i})`),9,rte)]))),128))])]),c("div",cte,[v(l,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.CANCEL"),onClick:t[3]||(t[3]=ze(i=>e.$emit("cancel"),["prevent"]))},null,8,["label"]),v(l,{type:"submit",disabled:s.v$.$invalid||n.isSubmitting,"is-loading":n.isSubmitting,label:n.submitLabel},null,8,["disabled","is-loading","label"])])],32)}const Dy=Fe(nte,[["render",dte]]),ute={components:{WebhookForm:Dy},props:{onClose:{type:Function,required:!0}},setup(){const{replaceInstallationName:e}=Io();return{replaceInstallationName:e}},computed:{...St({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){try{await this.$store.dispatch("webhooks/create",{webhook:e}),_e(this.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.response.data.message||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");_e(n)}}}},pte={class:"h-auto overflow-auto flex flex-col"};function mte(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("WebhookForm");return p(),f("div",pte,[v(l,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.TITLE"),"header-content":s.replaceInstallationName(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.DESC"))},null,8,["header-title","header-content"]),v(i,{"is-submitting":e.uiFlags.creatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.ADD_SUBMIT"),onSubmit:o.onSubmit,onCancel:n.onClose},null,8,["is-submitting","submit-label","onSubmit","onCancel"])])}const hte=Fe(ute,[["render",mte]]),fte={components:{WebhookForm:Dy},props:{value:{type:Object,required:!0},id:{type:[Number,String],required:!0},onClose:{type:Function,required:!0}},computed:{...St({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){var t,n;try{await this.$store.dispatch("webhooks/update",{webhook:e,id:this.id}),_e(this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.SUCCESS_MESSAGE")),this.onClose()}catch(s){const a=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message)||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");_e(a)}}}},gte={class:"flex flex-col h-auto overflow-auto"};function _te(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("WebhookForm");return p(),f("div",gte,[v(l,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.TITLE")},null,8,["header-title"]),v(i,{value:n.value,"is-submitting":e.uiFlags.updatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.EDIT_SUBMIT"),onSubmit:o.onSubmit,onCancel:n.onClose},null,8,["value","is-submitting","submit-label","onSubmit","onCancel"])])}const vte=Fe(fte,[["render",_te]]),bte={__name:"ShowMore",props:{text:{type:String,default:""},limit:{type:Number,default:120}},setup(e){const t=e,{t:n}=Pe(),s=F(!1),a=C(()=>s.value||t.text.length<=t.limit?t.text:t.text.slice(0,t.limit)+"..."),o=C(()=>{const i=s.value?"SHOW_LESS":"SHOW_MORE";return n(`COMPONENTS.SHOW_MORE_BLOCK.${i}`)}),l=()=>{s.value=!s.value};return(i,r)=>(p(),f("span",null,[Ee(E(a.value)+" ",1),e.text.length>e.limit?(p(),f("button",{key:0,class:"text-n-brand !p-0 !border-0 align-top",onClick:l},E(o.value),1)):O("",!0)]))}},Ete={class:"py-4 ltr:pr-4 rtl:pl-4"},Tte={class:"font-medium break-words text-n-slate-12"},Ate={class:"block mt-1 text-sm text-n-slate-11"},yte={class:"font-medium"},Ste={class:"py-4 min-w-xs"},Ite={class:"flex justify-end gap-1"},Cte={__name:"WebhookRow",props:{webhook:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=C(()=>{const{subscriptions:l}=n.webhook;return l.map(i=>a(r_("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",i))).join(", ")});return(l,i)=>{const r=_t("tooltip");return p(),f("tr",null,[c("td",Ete,[c("div",Tte,E(e.webhook.url),1),c("div",Ate,[c("span",yte,E(l.$t("INTEGRATION_SETTINGS.WEBHOOK.SUBSCRIBED_EVENTS"))+": ",1),v(bte,{text:o.value,limit:60},null,8,["text"])])]),c("td",Ste,[c("div",Ite,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:i[0]||(i[0]=d=>s("edit",e.webhook))},null,512),[[r,l.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:i[1]||(i[1]=d=>s("delete",e.webhook,e.index))},null,512),[[r,l.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}}},xte={components:{SettingsLayout:ro,NextButton:ce,BaseSettingsHeader:js,NewWebhook:hte,EditWebhook:vte,WebhookRow:Cte},setup(){const{replaceInstallationName:e}=Io();return{replaceInstallationName:e}},data(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedWebHook:{}}},computed:{...St({records:"webhooks/getWebhooks",uiFlags:"webhooks/getUIFlags"}),integration(){return this.$store.getters["integrations/getIntegration"]("webhook")},tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.WEBHOOK_ENDPOINT"),this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.ACTIONS")]}},mounted(){this.$store.dispatch("webhooks/get")},methods:{openAddPopup(){this.showAddPopup=!0},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedWebHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},openEditPopup(e){this.showEditPopup=!0,this.selectedWebHook=e},hideEditPopup(){this.showEditPopup=!1},confirmDeletion(){this.loading[this.selectedWebHook.id]=!0,this.closeDeletePopup(),this.deleteWebhook(this.selectedWebHook.id)},async deleteWebhook(e){try{await this.$store.dispatch("webhooks/delete",e),_e(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}}}},Nte={class:"min-w-full divide-y divide-n-weak"},Ote={class:"divide-y divide-n-weak flex-1 text-n-slate-12"};function wte(e,t,n,s,a,o){const l=z("NextButton"),i=z("BaseSettingsHeader"),r=z("WebhookRow"),d=z("NewWebhook"),u=z("woot-modal"),m=z("EditWebhook"),h=z("woot-delete-modal"),_=z("SettingsLayout");return p(),V(_,{"is-loading":e.uiFlags.fetchingList,"loading-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LOADING"),"no-records-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.404"),"no-records-found":!e.records.length},{header:K(()=>[o.integration.name?(p(),V(i,{key:0,title:o.integration.name,description:s.replaceInstallationName(o.integration.description),"link-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LEARN_MORE"),"feature-name":"webhook","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:K(()=>[v(l,{blue:"",icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.HEADER_BTN_TXT"),onClick:o.openAddPopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"])):O("",!0)]),body:K(()=>[c("table",Nte,[c("thead",null,[(p(!0),f(fe,null,Ae(o.tableHeaders,g=>(p(),f("th",{key:g,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right last:pr-4"},E(g),1))),128))]),c("tbody",Ote,[(p(!0),f(fe,null,Ae(e.records,(g,T)=>(p(),V(r,{key:g.id,index:T,webhook:g,onEdit:o.openEditPopup,onDelete:o.openDeletePopup},null,8,["index","webhook","onEdit","onDelete"]))),128))])])]),default:K(()=>[v(u,{show:a.showAddPopup,"onUpdate:show":t[0]||(t[0]=g=>a.showAddPopup=g),"on-close":o.hideAddPopup},{default:K(()=>[a.showAddPopup?(p(),V(d,{key:0,"on-close":o.hideAddPopup},null,8,["on-close"])):O("",!0)]),_:1},8,["show","on-close"]),v(u,{show:a.showEditPopup,"onUpdate:show":t[1]||(t[1]=g=>a.showEditPopup=g),"on-close":o.hideEditPopup},{default:K(()=>[a.showEditPopup?(p(),V(m,{key:0,id:a.selectedWebHook.id,value:a.selectedWebHook,"on-close":o.hideEditPopup},null,8,["id","value","on-close"])):O("",!0)]),_:1},8,["show","on-close"]),v(h,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[2]||(t[2]=g=>a.showDeleteConfirmationPopup=g),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),message:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE",{webhookURL:a.selectedWebHook.url}),"confirm-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-message","no-records-found"])}const Rte=Fe(xte,[["render",wte]]),$te={class:"relative w-4 h-4"},Mte=["checked","indeterminate","disabled"],Dr={__name:"Checkbox",props:yn({indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:yn(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=jn(e,"modelValue"),a=o=>{s.value=o.target.checked,n("change",o)};return(o,l)=>(p(),f("div",$te,[c("input",{checked:s.value,indeterminate:e.indeterminate,type:"checkbox",disabled:e.disabled,class:"peer absolute inset-0 z-10 h-4 w-4 disabled:opacity-50 appearance-none rounded border border-n-slate-6 ring-transparent transition-all duration-200 checked:border-n-brand checked:bg-n-brand dark:border-gray-600 dark:checked:border-n-brand indeterminate:border-n-brand indeterminate:bg-n-brand hover:enabled:bg-n-blue-border cursor-pointer",onChange:a},null,40,Mte),l[0]||(l[0]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l[1]||(l[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-indeterminate:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[c("path",{d:"M3 7L11 7","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]))}},kte={components:{NextButton:ce,Checkbox:Dr},props:{show:{type:Boolean,default:!1},mode:{type:String,default:"create"},selectedAppData:{type:Object,default:()=>({})}},emits:["close"],setup(){return{v$:Lt()}},validations:{app:{title:{required:lt},content:{type:{required:lt},url:{required:lt,url:Xc}}}},data(){return{isLoading:!1,app:{title:"",content:{type:"frame",url:""},show_in_navigation:!1}}},computed:{header(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.HEADER`)},submitButtonLabel(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.FORM_SUBMIT`)}},mounted(){this.mode==="UPDATE"&&this.selectedAppData&&(this.app.title=this.selectedAppData.title,this.app.content=this.selectedAppData.content[0],this.app.show_in_navigation=!!this.selectedAppData.show_in_navigation)},methods:{closeModal(){this.app={title:"",content:{type:"frame",url:""},show_in_navigation:!1},this.$emit("close")},async submit(){try{if(this.v$.$touch(),this.v$.$invalid)return;const e=this.mode.toLowerCase(),t={title:this.app.title,content:[this.app.content],show_in_navigation:!!this.app.show_in_navigation};e==="update"&&(t.id=this.selectedAppData.id),this.isLoading=!0,await this.$store.dispatch(`dashboardApps/${e}`,t),_e(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_SUCCESS`)),this.closeModal()}catch{_e(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_ERROR`))}finally{this.isLoading=!1}}}},Lte={class:"flex flex-col h-auto overflow-auto"},Dte={class:"flex items-center mt-4 mb-2"},Pte={class:"ml-2 cursor-pointer select-none text-sm text-slate-700 dark:text-slate-200"},Bte={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Fte(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("Checkbox"),d=z("NextButton"),u=z("woot-modal");return p(),V(u,{show:n.show,"on-close":o.closeModal},{default:K(()=>[c("div",Lte,[v(l,{"header-title":o.header},null,8,["header-title"]),c("form",{class:"w-full",onSubmit:t[3]||(t[3]=ze((...m)=>o.submit&&o.submit(...m),["prevent"]))},[v(i,{modelValue:a.app.title,"onUpdate:modelValue":t[0]||(t[0]=m=>a.app.title=m),class:re([{error:s.v$.app.title.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_PLACEHOLDER"),error:s.v$.app.title.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_ERROR"):null,"data-testid":"app-title",onInput:s.v$.app.title.$touch,onBlur:s.v$.app.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(i,{modelValue:a.app.content.url,"onUpdate:modelValue":t[1]||(t[1]=m=>a.app.content.url=m),class:re([{error:s.v$.app.content.url.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_PLACEHOLDER"),error:s.v$.app.content.url.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_ERROR"):null,"data-testid":"app-url",onInput:s.v$.app.content.url.$touch,onBlur:s.v$.app.content.url.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),c("div",Dte,[v(r,{modelValue:a.app.show_in_navigation,"onUpdate:modelValue":t[2]||(t[2]=m=>a.app.show_in_navigation=m)},null,8,["modelValue"]),c("label",Pte,E(e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.SHOW_IN_NAVIGATION_LABEL","Adicionar ao menu lateral")),1)]),c("div",Bte,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.CREATE.FORM_CANCEL"),onClick:ze(o.closeModal,["prevent"])},null,8,["label","onClick"]),v(d,{type:"submit",label:o.submitButtonLabel,disabled:s.v$.$invalid,"is-loading":a.isLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const Ute=Fe(kte,[["render",Fte]]),Gte={class:"max-w-full py-1"},Vte=["title"],Hte=["title"],Wte={class:"flex gap-1 py-4 ltr:pr-4 rtl:pl-4 text-sm sm:pr-0 justify-end"},Kte={__name:"DashboardAppsRow",props:{app:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e){return(t,n)=>{const s=_t("tooltip");return p(),f("tr",Gte,[c("td",{class:"py-4 ltr:pr-4 rtl:pl-4 text-sm w-40 max-w-[10rem] truncate",title:e.app.title},E(e.app.title),9,Vte),c("td",{class:"max-w-lg py-4 ltr:pr-4 rtl:pl-4 text-sm truncate",title:e.app.content[0].url},E(e.app.content[0].url),9,Hte),c("td",Wte,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=a=>t.$emit("edit",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.EDIT_TOOLTIP"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[1]||(n[1]=a=>t.$emit("delete",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.DELETE_TOOLTIP"),void 0,{top:!0}]])])])}}},zte={components:{BaseSettingsHeader:js,DashboardAppModal:Ute,DashboardAppsRow:Kte,NextButton:ce},data(){return{loading:{},showDashboardAppPopup:!1,showDeleteConfirmationPopup:!1,selectedApp:{},mode:"CREATE"}},computed:{...St({records:"dashboardApps/getRecords",uiFlags:"dashboardApps/getUIFlags"}),tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.NAME"),this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.ENDPOINT")]}},mounted(){this.$store.dispatch("dashboardApps/get")},methods:{toggleDashboardAppPopup(){this.showDashboardAppPopup=!this.showDashboardAppPopup,this.selectedApp={}},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedApp=e},openCreatePopup(){this.mode="CREATE",this.selectedApp={},this.showDashboardAppPopup=!0},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},editApp(e){this.loading[e.id]=!0,this.mode="UPDATE",this.selectedApp=e,this.showDashboardAppPopup=!0},confirmDeletion(){this.loading[this.selectedApp.id]=!0,this.closeDeletePopup(),this.deleteApp(this.selectedApp.id)},async deleteApp(e){try{await this.$store.dispatch("dashboardApps/delete",e),_e(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_SUCCESS"))}catch{_e(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_ERROR"))}}}},jte={class:"flex flex-col flex-1 gap-8 overflow-auto"},Yte={class:"w-full overflow-x-auto text-n-slate-11"},Xte={key:0,class:"flex flex-col items-center justify-center h-full"},qte={key:2,class:"min-w-full divide-y divide-n-weak"},Zte={class:"divide-y divide-n-weak"};function Qte(e,t,n,s,a,o){const l=z("NextButton"),i=z("BaseSettingsHeader"),r=z("woot-loading-state"),d=z("DashboardAppsRow"),u=z("DashboardAppModal"),m=z("woot-delete-modal");return p(),f("div",jte,[v(i,{title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.TITLE"),description:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DESCRIPTION"),"link-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LEARN_MORE"),"feature-name":"dashboard_apps","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:K(()=>[v(l,{icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.HEADER_BTN_TXT"),onClick:o.openCreatePopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"]),c("div",Yte,[!e.uiFlags.isFetching&&!e.records.length?(p(),f("p",Xte,E(e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.404")),1)):O("",!0),e.uiFlags.isFetching?(p(),V(r,{key:1,message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.LOADING")},null,8,["message"])):O("",!0),!e.uiFlags.isFetching&&e.records.length?(p(),f("table",qte,[c("thead",null,[(p(!0),f(fe,null,Ae(o.tableHeaders,h=>(p(),f("th",{key:h,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},E(h),1))),128))]),c("tbody",Zte,[(p(!0),f(fe,null,Ae(e.records,(h,_)=>(p(),V(d,{key:h.id,index:_,app:h,onEdit:o.editApp,onDelete:o.openDeletePopup},null,8,["index","app","onEdit","onDelete"]))),128))])])):O("",!0)]),a.showDashboardAppPopup?(p(),V(u,{key:0,show:a.showDashboardAppPopup,mode:a.mode,"selected-app-data":a.selectedApp,onClose:o.toggleDashboardAppPopup},null,8,["show","mode","selected-app-data","onClose"])):O("",!0),v(m,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[0]||(t[0]=h=>a.showDeleteConfirmationPopup=h),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.TITLE"),message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.MESSAGE",{appName:a.selectedApp.title}),"confirm-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const Jte=Fe(zte,[["render",Qte]]),ene={class:"flex flex-col items-start justify-between lg:flex-row lg:items-center p-6 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow gap-6"},tne={class:"flex items-start lg:items-center justify-start flex-1 m-0 gap-6 flex-col lg:flex-row"},nne={class:"flex h-16 w-16 items-center justify-center flex-shrink-0"},sne=["src"],ane=["src"],one={class:"mb-1 text-xl font-medium text-n-slate-12"},lne={class:"text-n-slate-11 text-sm leading-6"},ine={class:"flex justify-center items-center mb-0"},rne={key:0},cne={key:0},dne={key:1},une={key:0},pne=["href"],yp={__name:"Integration",props:{integrationId:{type:[String,Number],required:!0},integrationName:{type:String,default:""},integrationDescription:{type:String,default:""},integrationEnabled:{type:Boolean,default:!1},integrationAction:{type:String,default:""},actionButtonText:{type:String,default:""},deleteConfirmationText:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Pe(),s=Pn(),a=En(),{replaceInstallationName:o}=Io(),l=F(null),i=C(()=>s.getters.getCurrentAccountId),r=()=>{l.value&&l.value.open()},d=()=>{l.value&&l.value.close()},u=async()=>{try{await s.dispatch("integrations/deleteIntegration",t.integrationId),_e(n("INTEGRATION_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(n("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}},m=()=>{d(),u(),a.push({name:"settings_applications"})};return(h,_)=>{const g=z("router-link");return p(),f("div",ene,[c("div",tne,[c("div",nne,[c("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,sne),c("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,ane)]),c("div",null,[c("h3",one,E(e.integrationName),1),c("p",lne,E(I(o)(e.integrationDescription)),1)])]),c("div",ine,[v(g,{to:I(Bt)(`accounts/${i.value}/settings/integrations/`+e.integrationId)},{default:K(()=>[e.integrationEnabled?(p(),f("div",rne,[e.integrationAction==="disconnect"?(p(),f("div",cne,[v(ce,{label:e.actionButtonText||h.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),faded:"",ruby:"",onClick:r},null,8,["label"])])):(p(),f("div",dne,[v(ce,{faded:"",blue:"",label:I(n)("INTEGRATION_SETTINGS.WEBHOOK.CONFIGURE")},null,8,["label"])]))])):O("",!0)]),_:1},8,["to"]),e.integrationEnabled?O("",!0):(p(),f("div",une,[at(h.$slots,"action",{},()=>[c("a",{href:e.integrationAction},[v(ce,{faded:"",blue:"",label:I(n)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT")},null,8,["label"])],8,pne)])]))]),v(Ms,{ref_key:"dialogRef",ref:l,type:"alert",title:e.deleteConfirmationText.title||I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),description:e.deleteConfirmationText.message||I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE"),"confirm-button-label":I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"cancel-button-label":I(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO"),onConfirm:m},null,8,["title","description","confirm-button-label","cancel-button-label"])])}}},mne={class:"px-6 py-4 mb-4 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},hne={class:"flex"},fne={class:"ml-3"},gne={class:"mb-1 text-base font-semibold text-n-slate-12"},_ne={class:"mt-2 text-sm text-n-slate-11 mb-3"},vne={key:0,class:"mb-2 mt-1 ml-8"},bne={key:1,class:"inline-flex"},Ene={value:""},Tne=["value"],Ane={__name:"SelectChannelWarning",props:{hasConnectedAChannel:{type:Boolean,default:!0}},setup(e){const t=e,n=Pn(),{t:s}=Pe(),{formatMessage:a}=$a(),{replaceInstallationName:o}=Io(),l=F(""),i=F([]),r=C(()=>n.getters["integrations/getUIFlags"]),d=C(()=>t.hasConnectedAChannel?s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.EXPIRED"):s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.DESCRIPTION")),u=C(()=>a(o(d.value),!1)),m=async()=>{try{i.value=await n.dispatch("integrations/listAllSlackChannels"),i.value.sort((_,g)=>_.name-g.name)}catch{s("INTEGRATION_SETTINGS.SLACK.FAILED_TO_FETCH_CHANNELS"),i.value=[]}},h=async()=>{try{await n.dispatch("integrations/updateSlack",{referenceId:l.value}),_e(s("INTEGRATION_SETTINGS.SLACK.UPDATE_SUCCESS"))}catch(_){_e(_.message||"INTEGRATION_SETTINGS.SLACK.UPDATE_ERROR")}};return(_,g)=>{const T=_t("dompurify-html");return p(),f("div",mne,[c("div",hne,[g[1]||(g[1]=c("div",{class:"flex-shrink-0"},[c("div",{class:"i-lucide-bell text-xl text-n-amber-11 mt-1"})],-1)),c("div",fne,[c("p",gne,E(_.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.ATTENTION_REQUIRED")),1),c("div",_ne,[pe(c("p",null,null,512),[[T,u.value]])])])]),e.hasConnectedAChannel?O("",!0):(p(),f("div",vne,[i.value.length?(p(),f("div",bne,[pe(c("select",{"onUpdate:modelValue":g[0]||(g[0]=S=>l.value=S),class:"h-8 py-1 mr-4 text-xs leading-4 border border-n-amber-10"},[c("option",Ene,E(_.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.OPTION_LABEL")),1),(p(!0),f(fe,null,Ae(i.value,S=>(p(),f("option",{key:S.id,value:S.id}," #"+E(S.name),9,Tne))),128))],512),[[zt,l.value]]),v(ce,{teal:"",sm:"","is-loading":r.value.isUpdatingSlack,onClick:h},{default:K(()=>[Ee(E(_.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.UPDATE")),1)]),_:1},8,["is-loading"])])):(p(),V(ce,{key:0,amber:"",sm:"","is-loading":r.value.isFetchingSlackChannels,onClick:m},{default:K(()=>[Ee(E(_.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.BUTTON_TEXT")),1)]),_:1},8,["is-loading"]))]))])}}},yne={class:"flex-1 w-full px-6 py-5 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},Sne={class:"prose-lg max-w-5xl"},Ine={class:"text-n-slate-12 tracking-tight"},Cne={class:"text-n-slate-11"},xne={__name:"SlackIntegrationHelpText",props:{selectedChannelName:{type:String,required:!0}},setup(e){const t=e,{t:n}=Pe(),{formatMessage:s}=$a(),a=C(()=>s(n("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.BODY",{selectedChannelName:t.selectedChannelName}),!1));return(o,l)=>{const i=_t("dompurify-html");return p(),f("div",yne,[c("div",Sne,[c("h5",Ine,E(I(n)("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.TITLE")),1),pe(c("div",Cne,null,512),[[i,a.value]])])])}}},Nne={key:0,class:"flex flex-col flex-1 overflow-auto gap-5 pt-1 pb-10"},One={key:0,class:"flex-1"},wne={key:1,class:"flex items-center justify-center flex-1"},Rne={__name:"Slack",props:{code:{type:String,default:""}},setup(e){const t=e,n=Pn(),s=En(),a=cn(),{t:o}=Pe(),l=F(!1),i=C(()=>n.getters["integrations/getIntegration"]("slack")),r=C(()=>{const{hooks:S=[]}=i.value||{};return!!S.length}),d=C(()=>{const{hooks:S=[]}=i.value||{},[b]=S;return b||{}}),u=C(()=>d.value.status||!1),m=C(()=>!!d.value.reference_id),h=C(()=>{if(d.value.status){const{settings:{channel_name:S=""}={}}=d.value;return S||"customer-conversations"}return o("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.SELECTED")}),_=C(()=>n.getters["integrations/getUIFlags"]),g=C(()=>i.value.enabled?"disconnect":i.value.action),T=async()=>{await n.dispatch("integrations/get","slack"),t.code&&(await n.dispatch("integrations/connectSlack",t.code),s.replace(a.path)),l.value=!0};return pt(()=>{T()}),(S,b)=>l.value&&!_.value.isCreatingSlack?(p(),f("div",Nne,[v(yp,{"integration-id":i.value.id,"integration-logo":i.value.logo,"integration-name":i.value.name,"integration-description":i.value.description,"integration-enabled":i.value.enabled,"integration-action":g.value,"action-button-text":S.$t("INTEGRATION_SETTINGS.SLACK.DELETE"),"delete-confirmation-text":{title:S.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.TITLE"),message:S.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","action-button-text","delete-confirmation-text"]),r.value?(p(),f("div",One,[u.value?O("",!0):(p(),V(Ane,{key:0,"has-connected-a-channel":m.value},null,8,["has-connected-a-channel"])),v(xne,{"selected-channel-name":h.value},null,8,["selected-channel-name"])])):O("",!0)])):(p(),f("div",wne,[v(Zs,{size:"","color-scheme":"primary"})]))}},$ne={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},Mne={key:0},kne={key:1,class:"flex items-center justify-center flex-1"},Lne={__name:"Linear",setup(e){const t=yt(),n=F(!1),s=oa("integrations/getIntegration","linear"),a=ke("integrations/getUIFlags"),o=C(()=>s.value.enabled?"disconnect":s.value.action),l=async()=>{await t.dispatch("integrations/get","linear"),n.value=!0};return pt(()=>{l()}),(i,r)=>(p(),f("div",$ne,[n.value&&!I(a).isCreatingLinear?(p(),f("div",Mne,[v(yp,{"integration-id":I(s).id,"integration-logo":I(s).logo,"integration-name":I(s).name,"integration-description":I(s).description,"integration-enabled":I(s).enabled,"integration-action":o.value,"delete-confirmation-text":{title:i.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.TITLE"),message:i.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),f("div",kne,[v(Zs,{size:"","color-scheme":"primary"})]))]))}};class Dne extends tl{constructor(){super("notion",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const Pne=new Dne,Bne={class:"flex-grow flex-shrink p-4 overflow-auto mx-auto"},Fne={key:0},Une={key:1,class:"flex items-center justify-center flex-1"},Gne={__name:"Notion",setup(e){const{t}=Pe(),n=yt(),s=F(!1),a=oa("integrations/getIntegration","notion"),o=ke("integrations/getUIFlags"),l=C(()=>a.value.enabled?"disconnect":""),i=async()=>{const d=await Pne.generateAuthorization(),{data:{url:u}}=d;window.location.href=u},r=async()=>{await n.dispatch("integrations/get","notion"),s.value=!0};return pt(()=>{r()}),(d,u)=>(p(),f("div",Bne,[s.value&&!I(o).isCreatingNotion?(p(),f("div",Fne,[v(yp,{"integration-id":I(a).id,"integration-logo":I(a).logo,"integration-name":I(a).name,"integration-description":I(a).description,"integration-enabled":I(a).enabled,"integration-action":l.value,"delete-confirmation-text":{title:I(t)("INTEGRATION_SETTINGS.NOTION.DELETE.TITLE"),message:I(t)("INTEGRATION_SETTINGS.NOTION.DELETE.MESSAGE")}},{action:K(()=>[v(ce,{faded:"",blue:"",label:I(t)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:i},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),f("div",Une,[v(Zs,{size:"","color-scheme":"primary"})]))]))}},Vne={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},Hne={key:0,class:"flex flex-col gap-6"},Wne={key:0,class:"flex items-center justify-center flex-1 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow p-6"},Kne={class:"text-n-ruby-9"},zne={key:1,class:"flex items-center justify-center flex-1"},jne={__name:"Shopify",props:{error:{type:String,default:""}},setup(e){const t=yt(),n=F(null),s=F(!1),a=F(""),o=F(!1),l=F(""),i=oa("integrations/getIntegration","shopify"),r=ke("integrations/getUIFlags"),d=C(()=>i.value.enabled?"disconnect":"connect"),u=()=>{a.value="",l.value="",o.value=!1},m=T=>/^[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com$/.test(T),h=()=>{n.value&&n.value.open()},_=async()=>{try{if(l.value="",!m(a.value)){l.value="Please enter a valid Shopify store URL (e.g., your-store.myshopify.com)";return}o.value=!0;const{data:T}=await SN.connectShopify({shopDomain:a.value});T.redirect_url&&(window.location.href=T.redirect_url)}catch(T){l.value=T.message}finally{o.value=!1}},g=async()=>{await t.dispatch("integrations/get","shopify"),s.value=!0};return pt(()=>{g()}),(T,S)=>(p(),f("div",Vne,[s.value&&!I(r).isCreatingShopify?(p(),f("div",Hne,[v(yp,{"integration-id":I(i).id,"integration-logo":I(i).logo,"integration-name":I(i).name,"integration-description":I(i).description,"integration-enabled":I(i).enabled,"integration-action":d.value,"delete-confirmation-text":{title:T.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.TITLE"),message:T.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.MESSAGE")}},{action:K(()=>[v(ce,{teal:"",label:T.$t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:h},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"]),e.error?(p(),f("div",Wne,[c("p",Kne,E(T.$t("INTEGRATION_SETTINGS.SHOPIFY.ERROR")),1)])):O("",!0),v(Ms,{ref_key:"dialogRef",ref:n,title:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.TITLE"),"is-loading":o.value,onConfirm:_,onClose:u},{default:K(()=>[v(ln,{modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=b=>a.value=b),label:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.LABEL"),placeholder:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.PLACEHOLDER"),message:l.value?l.value:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.HELP"),"message-type":l.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","is-loading"])])):(p(),f("div",zne,[v(Zs,{size:"","color-scheme":"primary"})]))]))}},Yne={routes:[{path:Bt("accounts/:accountId/settings/integrations"),component:Aa,props:{},children:[{path:"",name:"settings_applications",component:Jee,meta:{featureFlag:Mt.INTEGRATIONS,permissions:["administrator"]}},{path:"dashboard_apps",component:Jte,name:"settings_integrations_dashboard_apps",meta:{featureFlag:Mt.INTEGRATIONS,permissions:["administrator"]}},{path:"webhook",component:Rte,name:"settings_integrations_webhook",meta:{featureFlag:Mt.INTEGRATIONS,permissions:["administrator"]}}]},{path:Bt("accounts/:accountId/settings/integrations"),component:sd,props:e=>{var o;const t=(o=e.params)==null?void 0:o.integration_id;if(["dialogflow"].includes(t))return{};const s=e.name!=="settings_integrations",a=e.name==="settings_integrations_integration"?{name:"settings_integrations"}:"";return{headerTitle:"INTEGRATION_SETTINGS.HEADER",icon:"flash-on",showBackButton:s,backUrl:a}},children:[{path:"slack",name:"settings_integrations_slack",component:Rne,meta:{featureFlag:Mt.INTEGRATIONS,permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"linear",name:"settings_integrations_linear",component:Lne,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"notion",name:"settings_integrations_notion",component:Gne,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"shopify",name:"settings_integrations_shopify",component:jne,meta:{featureFlag:Mt.INTEGRATIONS,permissions:["administrator"]},props:e=>({error:e.query.error})},{path:":integration_id",name:"settings_applications_integration",component:Uee,meta:{featureFlag:Mt.INTEGRATIONS,permissions:["administrator"]},props:e=>({integrationId:e.params.integration_id})}]}]},Xne=(e="")=>!!e&&!e.includes(" "),Py=e=>{let t="";return e.title.$error?e.title.required?e.title.minLength?e.title.validLabelCharacters||(t="LABEL_MGMT.FORM.NAME.VALID_ERROR"):t="LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR":t="LABEL_MGMT.FORM.NAME.REQUIRED_ERROR":t="",t},By={title:{required:lt,minLength:on(2),validLabelCharacters:Xne},description:{},color:{required:lt},showOnSidebar:{}},qne=()=>{const e="0123456789ABCDEF";let t="#";for(let n=0;n<6;n+=1)t+=e[Math.floor(Math.random()*16)];return t},Zne={components:{NextButton:ce},props:{prefillTitle:{type:String,default:""}},emits:["close"],setup(){return{v$:Lt()}},data(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:By,computed:{...St({uiFlags:"labels/getUIFlags"}),labelTitleErrorMessage(){const e=Py(this.v$);return this.$t(e)}},mounted(){this.color=qne(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose(){this.$emit("close")},async addLabel(){try{await this.$store.dispatch("labels/create",{color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}),_e(this.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(e){const t=e.message||this.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE");_e(t)}}}},Qne={class:"flex flex-col h-auto overflow-auto"},Jne={class:"w-full"},ese={class:"flex items-center w-full gap-2"},tse={for:"conversation_creation"},nse={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function sse(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("woot-color-picker"),d=z("NextButton");return p(),f("div",Qne,[v(l,{"header-title":e.$t("LABEL_MGMT.ADD.TITLE"),"header-content":e.$t("LABEL_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=ze((...u)=>o.addLabel&&o.addLabel(...u),["prevent"]))},[v(i,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=u=>a.title=u),class:re([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:o.labelTitleErrorMessage,"data-testid":"label-title",onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(i,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=u=>a.description=u),class:re([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description",onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),c("div",Jne,[c("label",null,[Ee(E(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),v(r,{modelValue:a.color,"onUpdate:modelValue":t[2]||(t[2]=u=>a.color=u)},null,8,["modelValue"])])]),c("div",ese,[pe(c("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>a.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[Xt,a.showOnSidebar]]),c("label",tse,E(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),c("div",nse,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{type:"submit","data-testid":"label-submit",label:e.$t("LABEL_MGMT.FORM.CREATE"),disabled:s.v$.title.$invalid||e.uiFlags.isCreating,"is-loading":e.uiFlags.isCreating},null,8,["label","disabled","is-loading"])])],32)])}const Fy=Fe(Zne,[["render",sse],["__scopeId","data-v-5e6cb446"]]),ase={components:{NextButton:ce},props:{selectedResponse:{type:Object,default:()=>{}}},emits:["close"],setup(){return{v$:Lt()}},data(){return{title:"",description:"",showOnSidebar:!0,color:""}},validations:By,computed:{...St({uiFlags:"labels/getUIFlags"}),pageTitle(){return`${this.$t("LABEL_MGMT.EDIT.TITLE")} - ${this.selectedResponse.title}`},labelTitleErrorMessage(){const e=Py(this.v$);return this.$t(e)}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){this.title=this.selectedResponse.title,this.description=this.selectedResponse.description,this.showOnSidebar=this.selectedResponse.show_on_sidebar,this.color=this.selectedResponse.color},editLabel(){this.$store.dispatch("labels/update",{id:this.selectedResponse.id,color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}).then(()=>{_e(this.$t("LABEL_MGMT.EDIT.API.SUCCESS_MESSAGE")),setTimeout(()=>this.onClose(),10)}).catch(()=>{_e(this.$t("LABEL_MGMT.EDIT.API.ERROR_MESSAGE"))})}}},ose={class:"flex flex-col h-auto overflow-auto"},lse={class:"w-full"},ise={class:"flex items-center w-full gap-2"},rse={for:"conversation_creation"},cse={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function dse(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("woot-color-picker"),d=z("NextButton");return p(),f("div",ose,[v(l,{"header-title":o.pageTitle},null,8,["header-title"]),c("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=ze((...u)=>o.editLabel&&o.editLabel(...u),["prevent"]))},[v(i,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=u=>a.title=u),class:re([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:o.labelTitleErrorMessage,onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(i,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=u=>a.description=u),class:re([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),c("div",lse,[c("label",null,[Ee(E(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),v(r,{modelValue:a.color,"onUpdate:modelValue":t[2]||(t[2]=u=>a.color=u)},null,8,["modelValue"])])]),c("div",ise,[pe(c("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>a.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[Xt,a.showOnSidebar]]),c("label",rse,E(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),c("div",cse,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{type:"submit",label:e.$t("LABEL_MGMT.FORM.EDIT"),disabled:s.v$.title.$invalid||e.uiFlags.isUpdating,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const use=Fe(ase,[["render",dse],["__scopeId","data-v-c9b7cbf5"]]),pse={class:"min-w-full overflow-x-auto divide-y divide-n-weak"},mse={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},hse={class:"py-4 ltr:pr-4 rtl:pl-4"},fse={class:"mb-1 font-medium break-words text-n-slate-12"},gse={class:"py-4 ltr:pr-4 rtl:pl-4"},_se={class:"py-4 leading-6 ltr:pr-4 rtl:pl-4"},vse={class:"flex items-center"},bse={class:"py-4 min-w-xs"},Ese={class:"flex gap-1 justify-end"},Tse={__name:"Index",setup(e){const t=Nn(),n=yt(),{t:s}=Pe(),a=F({}),o=F(!1),l=F(!1),i=F(!1),r=F({}),d=C(()=>t["labels/getLabels"].value),u=C(()=>t["labels/getUIFlags"].value),m=C(()=>` ${r.value.title}?`),h=()=>{o.value=!0},_=()=>{o.value=!1},g=$=>{l.value=!0,r.value=$},T=()=>{l.value=!1},S=$=>{i.value=!0,r.value=$},b=()=>{i.value=!1},A=async $=>{try{await n.dispatch("labels/delete",$),_e(s("LABEL_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(N){const w=(N==null?void 0:N.message)||s("LABEL_MGMT.DELETE.API.ERROR_MESSAGE");_e(w)}finally{a.value[r.value.id]=!1}},y=()=>{a.value[r.value.id]=!0,b(),A(r.value.id)},x=C(()=>[s("LABEL_MGMT.LIST.TABLE_HEADER.NAME"),s("LABEL_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),s("LABEL_MGMT.LIST.TABLE_HEADER.COLOR")]);return tg(()=>{n.dispatch("labels/get")}),($,N)=>{const w=z("woot-modal"),D=z("woot-delete-modal"),H=_t("tooltip");return p(),V(ro,{"is-loading":u.value.isFetching,"loading-message":$.$t("LABEL_MGMT.LOADING"),"no-records-found":!d.value.length,"no-records-message":$.$t("LABEL_MGMT.LIST.404")},{header:K(()=>[v(js,{title:$.$t("LABEL_MGMT.HEADER"),description:$.$t("LABEL_MGMT.DESCRIPTION"),"link-text":$.$t("LABEL_MGMT.LEARN_MORE"),"feature-name":"labels"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:$.$t("LABEL_MGMT.HEADER_BTN_TXT"),onClick:h},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[c("table",pse,[c("thead",null,[(p(!0),f(fe,null,Ae(x.value,B=>(p(),f("th",{key:B,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},E(B),1))),128))]),c("tbody",mse,[(p(!0),f(fe,null,Ae(d.value,(B,k)=>(p(),f("tr",{key:B.title},[c("td",hse,[c("span",fse,E(B.title),1)]),c("td",gse,E(B.description),1),c("td",_se,[c("div",vse,[c("span",{class:"w-4 h-4 mr-1 border border-solid rounded rtl:mr-0 rtl:ml-1 border-n-weak",style:Ct({backgroundColor:B.color})},null,4),Ee(" "+E(B.color),1)])]),c("td",bse,[c("div",Ese,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":a.value[B.id],onClick:U=>g(B)},null,8,["is-loading","onClick"]),[[H,$.$t("LABEL_MGMT.FORM.EDIT"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.value[B.id],onClick:U=>S(B,k)},null,8,["is-loading","onClick"]),[[H,$.$t("LABEL_MGMT.FORM.DELETE"),void 0,{top:!0}]])])])]))),128))])])]),default:K(()=>[v(w,{show:o.value,"onUpdate:show":N[0]||(N[0]=B=>o.value=B),"on-close":_},{default:K(()=>[v(Fy,{onClose:_})]),_:1},8,["show"]),v(w,{show:l.value,"onUpdate:show":N[1]||(N[1]=B=>l.value=B),"on-close":T},{default:K(()=>[v(use,{"selected-response":r.value,onClose:T},null,8,["selected-response"])]),_:1},8,["show"]),v(D,{show:i.value,"onUpdate:show":N[2]||(N[2]=B=>i.value=B),"on-close":b,"on-confirm":y,title:$.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:$.$t("LABEL_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":m.value,"confirm-text":$.$t("LABEL_MGMT.DELETE.CONFIRM.YES"),"reject-text":$.$t("LABEL_MGMT.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},Ase={routes:[{path:Bt("accounts/:accountId/settings/labels"),component:Aa,children:[{path:"",name:"labels_wrapper",meta:{permissions:["administrator"]},redirect:e=>({name:"labels_list",params:e.params})},{path:"list",name:"labels_list",meta:{featureFlag:Mt.LABELS,permissions:["administrator"]},component:Tse}]}]},yse={class:"py-4 ltr:pr-4 rtl:pl-4 truncate"},Sse={class:"py-4 ltr:pr-4 rtl:pl-4"},Ise={key:0,class:"flex items-center"},Cse={class:"mx-2"},xse={key:1},Nse={class:"py-4 ltr:pr-4 rtl:pl-4"},Ose={key:0,class:"flex items-center"},wse={class:"mx-2"},Rse={key:1},$se={class:"py-4 ltr:pr-4 rtl:pl-4"},Mse={class:"py-4 flex justify-end gap-1"},kse={__name:"MacrosTableRow",props:{macro:{type:Object,required:!0}},emits:["delete"],setup(e){const t=e,{t:n}=Pe(),s=C(()=>{const l=t.macro.created_by;return l.available_name??l.email??""}),a=C(()=>{const l=t.macro.updated_by;return l.available_name??l.email??""}),o=C(()=>{const l=t.macro.visibility==="global"?"MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL":"MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL";return n(l)});return(l,i)=>{const r=z("router-link"),d=_t("tooltip");return p(),f("tr",null,[c("td",yse,E(e.macro.name),1),c("td",Sse,[e.macro.created_by?(p(),f("div",Ise,[v(Ft,{name:s.value,size:24,"rounded-full":""},null,8,["name"]),c("span",Cse,E(s.value),1)])):(p(),f("div",xse,"--"))]),c("td",Nse,[e.macro.updated_by?(p(),f("div",Ose,[v(Ft,{name:a.value,size:24,"rounded-full":""},null,8,["name"]),c("span",wse,E(a.value),1)])):(p(),f("div",Rse,"--"))]),c("td",$se,E(o.value),1),c("td",Mse,[v(r,{to:{name:"macros_edit",params:{macroId:e.macro.id}}},{default:K(()=>[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:""},null,512),[[d,l.$t("MACROS.EDIT.TOOLTIP"),void 0,{top:!0}]])]),_:1},8,["to"]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:i[0]||(i[0]=u=>l.$emit("delete"))},null,512),[[d,l.$t("MACROS.DELETE.TOOLTIP"),void 0,{top:!0}]])])])}}},Lse={class:"min-w-full divide-y divide-n-weak"},Dse={class:"divide-y divide-n-weak text-n-slate-11"},Pse={__name:"Index",setup(e){const t=Nn(),n=yt(),{t:s}=Pe(),a=F(!1),o=F({}),l=C(()=>t["macros/getMacros"].value),i=C(()=>t["macros/getUIFlags"].value),r=C(()=>` ${o.value.name}?`);pt(()=>{n.dispatch("macros/get")});const d=async g=>{try{await n.dispatch("macros/delete",g),_e(s("MACROS.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(s("MACROS.DELETE.API.ERROR_MESSAGE"))}},u=g=>{a.value=!0,o.value=g},m=()=>{a.value=!1},h=()=>{m(),d(o.value.id)},_=C(()=>[s("MACROS.LIST.TABLE_HEADER.NAME"),s("MACROS.LIST.TABLE_HEADER.CREATED BY"),s("MACROS.LIST.TABLE_HEADER.LAST_UPDATED_BY"),s("MACROS.LIST.TABLE_HEADER.VISIBILITY")]);return(g,T)=>{const S=z("router-link"),b=z("woot-delete-modal");return p(),V(ro,{"no-records-message":g.$t("MACROS.LIST.404"),"no-records-found":!l.value.length,"is-loading":i.value.isFetching,"loading-message":g.$t("MACROS.LOADING"),"feature-name":"macros"},{header:K(()=>[v(js,{title:g.$t("MACROS.HEADER"),description:g.$t("MACROS.DESCRIPTION"),"link-text":g.$t("MACROS.LEARN_MORE"),"feature-name":"macros"},{actions:K(()=>[v(S,{to:{name:"macros_new"}},{default:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:g.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1})]),_:1},8,["title","description","link-text"])]),body:K(()=>[c("table",Lse,[c("thead",null,[(p(!0),f(fe,null,Ae(_.value,A=>(p(),f("th",{key:A,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},E(A),1))),128))]),c("tbody",Dse,[(p(!0),f(fe,null,Ae(l.value,(A,y)=>(p(),V(kse,{key:y,macro:A,onDelete:x=>u(A)},null,8,["macro","onDelete"]))),128))])]),v(b,{show:a.value,"onUpdate:show":T[0]||(T[0]=A=>a.value=A),"on-close":m,"on-confirm":h,title:g.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:g.$t("MACROS.DELETE.CONFIRM.MESSAGE"),"message-value":r.value,"confirm-text":g.$t("MACROS.DELETE.CONFIRM.YES"),"reject-text":g.$t("MACROS.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["no-records-message","no-records-found","is-loading","loading-message"])}}},Uy=()=>{const{t:e}=Pe(),t=Nn(),n=C(()=>t["labels/getLabels"].value),s=C(()=>t["teams/getTeams"].value),a=C(()=>t["agents/getAgents"].value);return{getMacroDropdownValues:l=>{switch(l){case"assign_team":case"send_email_to_team":return s.value;case"assign_agent":return[{id:"self",name:"Self"},...a.value];case"add_label":case"remove_label":return n.value.map(i=>({id:i.title,name:i.title}));case"change_priority":return jA.map(i=>({id:i.id,name:e(`MACROS.PRIORITY_TYPES.${i.i18nKey}`)}));default:return[]}}}},Bse={class:"relative flex items-start w-full min-w-0 basis-full"},Fse={__name:"MacroNode",props:yn({singleNode:{type:Boolean,default:!1},errorKey:{type:String,default:""},fileName:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:yn(["resetAction","deleteNode"],["update:modelValue"]),setup(e){const t=e,{t:n}=Pe(),s=Ao("macroActionTypes"),{getMacroDropdownValues:a}=Uy(),o=jn(e,"modelValue"),l=C(()=>t.errorKey?n(`MACROS.ERRORS.${t.errorKey}`):""),i=C(()=>o.value.action_name==="send_email_to_team"||o.value.action_name==="send_message"?!1:!!s.value.find(u=>u.key===o.value.action_name).inputType),r=()=>a(o.value.action_name);return(d,u)=>{const m=_t("tooltip");return p(),f("div",Bse,[e.singleNode?O("",!0):(p(),V(ce,{key:0,ghost:"",sm:"",slate:"",icon:"i-lucide-menu",class:"absolute cursor-move ltr:-left-10 rtl:-right-10 ltr:mr-2 rtl:ml-2 macros__node-drag-handle"})),c("div",{class:re(["flex-grow p-2 ltr:mr-2 rtl:ml-2 rounded-md shadow-sm outline outline-1 outline-n-weak",e.errorKey?"animate-shake bg-n-ruby-8/20 outline-n-ruby-5 dark:outline-n-ruby-5":"bg-n-background dark:bg-n-solid-1"])},[v(Qg,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=h=>o.value=h),"action-types":I(s),"dropdown-values":r(),"show-action-input":i.value,"show-remove-button":!1,"is-macro":"","error-message":l.value,"initial-file-name":e.fileName,onResetAction:u[1]||(u[1]=h=>d.$emit("resetAction"))},null,8,["modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name"])],2),e.singleNode?O("",!0):pe((p(),V(ce,{key:1,icon:"i-lucide-trash-2",sm:"",faded:"",ruby:"",class:"flex-shrink-0",onClick:u[2]||(u[2]=h=>d.$emit("deleteNode"))},null,512)),[[m,d.$t("MACROS.EDITOR.DELETE_BTN_TOOLTIP")]])])}}},Gy=[{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"remove_assigned_team",label:"REMOVE_ASSIGNED_TEAM",inputType:null},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"}],Use=e=>Gy.find(t=>t.key===e).label,Gse=(e,t)=>t.map(n=>{const s=e.find(a=>a.id===n);return s?s.name:""}).join(", "),o0=(e,t)=>t.map(n=>{const s=e.find(a=>a.title===n);return s?s.title:""}).join(", "),Vse=(e,t)=>t.map(n=>{const s=e.find(a=>a.id===n);return s?s.name:""}).join(", "),Hse=(e,t,n)=>{if(!e||!n)return"";if(t==="send_attachment"){const s=n.find(a=>a.blob_id===e);if(s)return s.filename.toString()}return""},Wse={components:{Draggable:kr,MacroNode:Fse,NextButton:ce},props:{errors:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>[]},files:{type:Array,default:()=>[]}},emits:["update:modelValue","resetAction","deleteNode","addNewNode"],computed:{actionData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{fileName(){return Hse(...arguments)}}},Kse={class:"macros__nodes"},zse={class:"macro__node"},jse={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"},Yse={class:"macro__node"},Xse={class:"macro__node"},qse={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"};function Zse(e,t,n,s,a,o){const l=z("MacroNode"),i=z("Draggable"),r=z("NextButton");return p(),f("div",Kse,[c("div",zse,[c("div",null,[c("span",jse,E(e.$t("MACROS.EDITOR.START_FLOW")),1)])]),v(i,{list:o.actionData,animation:"200","item-key":"id","ghost-class":"ghost",tag:"div",class:"macros__nodes-draggable",handle:".macros__node-drag-handle"},{item:K(({index:d})=>[(p(),f("div",{key:d,class:"macro__node"},[v(l,{modelValue:o.actionData[d],"onUpdate:modelValue":u=>o.actionData[d]=u,class:"macros__node-action",type:"add",index:d,"error-key":n.errors[`action_${d}`],"file-name":o.fileName(o.actionData[d].action_params[0],o.actionData[d].action_name,n.files),"single-node":o.actionData.length===1,onResetAction:u=>e.$emit("resetAction",d),onDeleteNode:u=>e.$emit("deleteNode",d)},null,8,["modelValue","onUpdate:modelValue","index","error-key","file-name","single-node","onResetAction","onDeleteNode"])]))]),_:1},8,["list"]),c("div",Yse,[c("div",null,[v(r,{title:e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP"),class:"shadow-sm",solid:"",teal:"",icon:"i-lucide-plus-circle",onClick:t[0]||(t[0]=d=>e.$emit("addNewNode"))},{default:K(()=>[Ee(E(e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP")),1)]),_:1},8,["title"])])]),c("div",Xse,[c("div",null,[c("span",qse,E(e.$t("MACROS.EDITOR.END_FLOW")),1)])])])}const Qse=Fe(Wse,[["render",Zse],["__scopeId","data-v-a47d35a7"]]),Jse={components:{NextButton:ce},inject:["v$"],props:{macroName:{type:String,default:""},macroVisibility:{type:String,default:"global"}},emits:["update:name","update:visibility","submit"],methods:{isActive(e){return this.macroVisibility===e?"bg-n-blue-2 dark:bg-n-blue-1 border-n-blue-3 dark:border-n-blue-4":"bg-white dark:bg-n-solid-2 border-n-weak dark:border-n-strong"},onUpdateName(e){this.$emit("update:name",e)},onUpdateVisibility(e){this.$emit("update:visibility",e)}}},eae={class:"p-4 bg-n-solid-2 border border-n-weak rounded-lg shadow-sm h-full flex flex-col"},tae={class:"mt-2"},nae={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},sae={class:"grid grid-cols-1 lg:grid-cols-2 gap-3"},aae={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},oae={class:"text-xs text-n-slate-11"},lae={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},iae={class:"text-xs text-n-slate-11"},rae={class:"mt-2 flex items-start p-2 bg-n-slate-3 dark:bg-n-solid-3 rounded-md"},cae={class:"ml-2 rtl:ml-0 rtl:mr-2 mb-0 text-n-slate-11"},dae={class:"mt-auto w-full"};function uae(e,t,n,s,a,o){const l=z("woot-input"),i=z("fluent-icon"),r=z("NextButton");return p(),f("div",eae,[c("div",null,[v(l,{"model-value":n.macroName,label:e.$t("MACROS.ADD.FORM.NAME.LABEL"),placeholder:e.$t("MACROS.ADD.FORM.NAME.PLACEHOLDER"),error:o.v$.macro.name.$error?e.$t("MACROS.ADD.FORM.NAME.ERROR"):null,class:re({error:o.v$.macro.name.$error}),"onUpdate:modelValue":o.onUpdateName},null,8,["model-value","label","placeholder","error","class","onUpdate:modelValue"])]),c("div",tae,[c("p",nae,E(e.$t("MACROS.EDITOR.VISIBILITY.LABEL")),1),c("div",sae,[c("button",{class:re(["p-2 relative rounded-md border border-solid text-left cursor-default",o.isActive("global")]),onClick:t[0]||(t[0]=d=>o.onUpdateVisibility("global"))},[n.macroVisibility==="global"?(p(),V(i,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-n-brand top-2 right-2"})):O("",!0),c("p",aae,E(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL")),1),c("p",oae,E(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.DESCRIPTION")),1)],2),c("button",{class:re(["p-2 relative rounded-md border border-solid text-left cursor-default",o.isActive("personal")]),onClick:t[1]||(t[1]=d=>o.onUpdateVisibility("personal"))},[n.macroVisibility==="personal"?(p(),V(i,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-n-brand top-2 right-2"})):O("",!0),c("p",lae,E(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL")),1),c("p",iae,E(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.DESCRIPTION")),1)],2)]),c("div",rae,[v(i,{icon:"info",size:"16",class:"flex-shrink-0 mt-0.5"}),c("p",cae,E(e.$t("MACROS.ORDER_INFO")),1)])]),c("div",dae,[v(r,{blue:"",solid:"",label:e.$t("MACROS.HEADER_BTN_TXT_SAVE"),class:"w-full",onClick:t[2]||(t[2]=d=>e.$emit("submit"))},null,8,["label"])])])}const pae=Fe(Jse,[["render",uae],["__scopeId","data-v-7c88e010"]]),mae={components:{MacroNodes:Qse,MacroProperties:pae},props:{macroData:{type:Object,default:()=>({})}},emits:["submit"],setup(){const e=Lt();return cs("v$",e),{v$:e}},data(){return{macro:this.macroData,errors:{}}},computed:{files(){return this.macro&&this.macro.files?this.macro.files:[]}},watch:{$route:{handler(){this.resetValidation()},immediate:!0},macroData:{handler(){this.macro=this.macroData},immediate:!0}},validations:{macro:{name:{required:lt},visibility:{required:lt}}},methods:{removeObjectProperty(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>n!==t))},updateName(e){this.macro.name=e},updateVisibility(e){this.macro.visibility=e},appendNode(){this.macro.actions.push({action_name:"assign_team",action_params:[]})},deleteNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions.splice(e,1)},submit(){this.errors=ly(this.macro.actions),Object.keys(this.errors).length===0&&(this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.macro))},resetNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions[e].action_params=[]},resetValidation(){var e,t;this.errors={},(t=(e=this.v$)==null?void 0:e.$reset)==null||t.call(e)}}},hae={class:"flex flex-col w-full h-auto md:flex-row md:h-full"},fae={class:"flex-1 w-full h-full max-h-full px-12 py-4 overflow-y-auto md:w-auto macro-gradient-radial dark:macro-dark-gradient-radial macro-gradient-radial-size"},gae={class:"w-full md:w-1/3 pb-4"};function _ae(e,t,n,s,a,o){const l=z("MacroNodes"),i=z("MacroProperties");return p(),f("div",hae,[c("div",fae,[v(l,{modelValue:a.macro.actions,"onUpdate:modelValue":t[0]||(t[0]=r=>a.macro.actions=r),files:o.files,errors:a.errors,onAddNewNode:o.appendNode,onDeleteNode:o.deleteNode,onResetAction:o.resetNode},null,8,["modelValue","files","errors","onAddNewNode","onDeleteNode","onResetAction"])]),c("div",gae,[v(i,{"macro-name":a.macro.name,"macro-visibility":a.macro.visibility,"onUpdate:name":o.updateName,"onUpdate:visibility":o.updateVisibility,onSubmit:o.submit},null,8,["macro-name","macro-visibility","onUpdate:name","onUpdate:visibility","onSubmit"])])])}const vae=Fe(mae,[["render",_ae],["__scopeId","data-v-b13e6dc3"]]),bae={class:"flex flex-col flex-1 h-full overflow-auto"},l0={__name:"MacroEditor",setup(e){const t=yt(),n=Nn(),s=cn(),a=En(),{t:o}=Pe(),{getMacroDropdownValues:l}=Uy(),i=F(null),r=F("CREATE"),d=C(()=>Gy.map(A=>({...A,label:o(`MACROS.ACTIONS.${A.label}`)})));cs("macroActionTypes",d);const u=C(()=>n["macros/getUIFlags"].value),m=C(()=>s.params.macroId),h=()=>{t.dispatch("agents/get"),t.dispatch("teams/get"),t.dispatch("labels/get")},_=A=>{const y=A.actions.map(x=>{let $=[];if(x.action_params.length){const N=d.value.find(w=>w.key===x.action_name).inputType;N==="multi_select"||N==="search_select"?$=l(x.action_name).filter(w=>[...x.action_params].includes(w.id)):N==="team_message"?$={team_ids:l(x.action_name).filter(w=>[...x.action_params[0].team_ids].includes(w.id)),message:x.action_params[0].message}:$=[...x.action_params]}return{...x,action_params:$}});return{...A,actions:y}},g=async()=>{await t.dispatch("macros/getSingleMacro",m.value);const A=t.getters["macros/getMacro"](m.value);i.value=_(A)},T=()=>{r.value="EDIT",g()},S=()=>{r.value="CREATE",i.value={name:"",actions:[{action_name:"assign_team",action_params:[]}],visibility:"global"}};ot(()=>s,()=>{h(),s.params.macroId?T():S()},{immediate:!0,deep:!0});const b=async A=>{try{const y=r.value==="EDIT"?"macros/update":"macros/create",x=r.value==="EDIT"?o("MACROS.EDIT.API.SUCCESS_MESSAGE"):o("MACROS.ADD.API.SUCCESS_MESSAGE");let $=JSON.parse(JSON.stringify(A));$.actions=YA($.actions),await t.dispatch(y,$),_e(x),a.push({name:"macros_wrapper"})}catch{_e(o("MACROS.ERROR"))}};return(A,y)=>{const x=z("woot-loading-state");return p(),f("div",bae,[u.value.isFetchingItem?(p(),V(x,{key:0,message:I(o)("MACROS.EDITOR.LOADING")},null,8,["message"])):O("",!0),i.value&&!u.value.isFetchingItem?(p(),V(vae,{key:1,"macro-data":i.value,"onUpdate:macroData":y[0]||(y[0]=$=>i.value=$),onSubmit:b},null,8,["macro-data"])):O("",!0)])}}},Eae={routes:[{path:Bt("accounts/:accountId/settings/macros"),component:Aa,children:[{path:"",name:"macros_wrapper",component:Pse,meta:{featureFlag:Mt.MACROS,permissions:[...fs,...Xs]}}]},{path:Bt("accounts/:accountId/settings/macros"),component:sd,props:()=>({headerTitle:"MACROS.HEADER",icon:"flash-settings",showBackButton:!0}),children:[{path:":macroId/edit",name:"macros_edit",component:l0,meta:{featureFlag:Mt.MACROS,permissions:[...fs,...Xs]}},{path:"new",name:"macros_new",component:l0,meta:{featureFlag:Mt.MACROS,permissions:[...fs,...Xs]}}]}]},Tae={},Aae={class:"reports--wrapper overflow-auto bg-n-background w-full px-6"},yae={class:"max-w-[60rem] mx-auto pb-12"};function Sae(e,t){const n=z("router-view");return p(),f("div",Aae,[c("div",yae,[v(n)])])}const Iae=Fe(Tae,[["render",Sae],["__scopeId","data-v-7a827951"]]);function Vy(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Sp(e){return Vy(e)?new Date(e.getTime()):e==null?new Date(NaN):new Date(e)}function Cae(e){return Vy(e)&&!isNaN(e.getTime())}function Hy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(t>=0&&t<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var n=Sp(e),s=n.getDay(),a=(s+7-t)%7;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Wy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,a=t.firstWeekContainsDate,o=a===void 0?1:a;if(!(o>=1&&o<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var l=Sp(e),i=l.getFullYear(),r=new Date(0),d=i+1;d>=i-1&&(r.setFullYear(d,0,o),r.setHours(0,0,0,0),r=Hy(r,s),!(l.getTime()>=r.getTime()));d--);return r}function c_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,a=t.firstWeekContainsDate,o=a===void 0?1:a,l=Sp(e),i=Hy(l,s),r=Wy(l,{firstDayOfWeek:s,firstWeekContainsDate:o}),d=i.getTime()-r.getTime();return Math.round(d/(7*24*3600*1e3))+1}var d_={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},xae=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function Da(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n="".concat(Math.abs(e)),s=e<0?"-":"";n.length<t;)n="0".concat(n);return s+n}function i0(e){return Math.round(e.getTimezoneOffset()/15)*15}function r0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e>0?"-":"+",s=Math.abs(e),a=Math.floor(s/60),o=s%60;return n+Da(a,2)+t+Da(o,2)}var c0=function(t,n,s){var a=t<12?"AM":"PM";return s?a.toLocaleLowerCase():a},Ic={Y:function(t){var n=t.getFullYear();return n<=9999?"".concat(n):"+".concat(n)},YY:function(t){return Da(t.getFullYear(),4).substr(2)},YYYY:function(t){return Da(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return Da(t.getMonth()+1,2)},MMM:function(t,n){return n.monthsShort[t.getMonth()]},MMMM:function(t,n){return n.months[t.getMonth()]},D:function(t){return t.getDate()},DD:function(t){return Da(t.getDate(),2)},H:function(t){return t.getHours()},HH:function(t){return Da(t.getHours(),2)},h:function(t){var n=t.getHours();return n===0?12:n>12?n%12:n},hh:function(){var t=Ic.h.apply(Ic,arguments);return Da(t,2)},m:function(t){return t.getMinutes()},mm:function(t){return Da(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return Da(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Da(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return Da(t.getMilliseconds(),3)},d:function(t){return t.getDay()},dd:function(t,n){return n.weekdaysMin[t.getDay()]},ddd:function(t,n){return n.weekdaysShort[t.getDay()]},dddd:function(t,n){return n.weekdays[t.getDay()]},A:function(t,n){var s=n.meridiem||c0;return s(t.getHours(),t.getMinutes(),!1)},a:function(t,n){var s=n.meridiem||c0;return s(t.getHours(),t.getMinutes(),!0)},Z:function(t){return r0(i0(t),":")},ZZ:function(t){return r0(i0(t))},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()},w:function(t,n){return c_(t,{firstDayOfWeek:n.firstDayOfWeek,firstWeekContainsDate:n.firstWeekContainsDate})},ww:function(t,n){return Da(Ic.w(t,n),2)}};function u_(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",a=Sp(e);if(!Cae(a))return"Invalid Date";var o=n.locale||d_;return s.replace(xae,function(l,i){return i||(typeof Ic[l]=="function"?"".concat(Ic[l](a,o)):l)})}function d0(e){return wae(e)||Oae(e)||Nae()}function Nae(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Oae(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function wae(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function u0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Rae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u0(n,!0).forEach(function(s){Ql(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u0(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $ae(e,t){return Lae(e)||kae(e,t)||Mae()}function Mae(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function kae(e,t){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var n=[],s=!0,a=!1,o=void 0;try{for(var l=e[Symbol.iterator](),i;!(s=(i=l.next()).done)&&(n.push(i.value),!(t&&n.length===t));s=!0);}catch(r){a=!0,o=r}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw o}}return n}}function Lae(e){if(Array.isArray(e))return e}function Ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dae=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,Ky=/\d/,Jl=/\d\d/,Pae=/\d{3}/,Bae=/\d{4}/,Pr=/\d\d?/,Fae=/[+-]\d\d:?\d\d/,zy=/[+-]?\d+/,Uae=/[+-]?\d+(\.\d{1,3})?/,p_="year",Ip="month",jy="day",Yy="hour",Xy="minute",qy="second",m_="millisecond",Zy={},Zn=function(t,n,s){var a=Array.isArray(t)?t:[t],o;typeof s=="string"?o=function(i){var r=parseInt(i,10);return Ql({},s,r)}:o=s,a.forEach(function(l){Zy[l]=[n,o]})},Gae=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},id=function(t){return function(n){var s=n[t];if(!Array.isArray(s))throw new Error("Locale[".concat(t,"] need an array"));return new RegExp(s.map(Gae).join("|"))}},rd=function(t,n){return function(s,a){var o=a[t];if(!Array.isArray(o))throw new Error("Locale[".concat(t,"] need an array"));var l=o.indexOf(s);if(l<0)throw new Error("Invalid Word");return Ql({},n,l)}};Zn("Y",zy,p_);Zn("YY",Jl,function(e){var t=new Date().getFullYear(),n=Math.floor(t/100),s=parseInt(e,10);return s=(s>68?n-1:n)*100+s,Ql({},p_,s)});Zn("YYYY",Bae,p_);Zn("M",Pr,function(e){return Ql({},Ip,parseInt(e,10)-1)});Zn("MM",Jl,function(e){return Ql({},Ip,parseInt(e,10)-1)});Zn("MMM",id("monthsShort"),rd("monthsShort",Ip));Zn("MMMM",id("months"),rd("months",Ip));Zn("D",Pr,jy);Zn("DD",Jl,jy);Zn(["H","h"],Pr,Yy);Zn(["HH","hh"],Jl,Yy);Zn("m",Pr,Xy);Zn("mm",Jl,Xy);Zn("s",Pr,qy);Zn("ss",Jl,qy);Zn("S",Ky,function(e){return Ql({},m_,parseInt(e,10)*100)});Zn("SS",Jl,function(e){return Ql({},m_,parseInt(e,10)*10)});Zn("SSS",Pae,m_);function Vae(e){return e.meridiemParse||/[ap]\.?m?\.?/i}function Hae(e){return"".concat(e).toLowerCase().charAt(0)==="p"}Zn(["A","a"],Vae,function(e,t){var n=typeof t.isPM=="function"?t.isPM(e):Hae(e);return{isPM:n}});function Wae(e){var t=e.match(/([+-]|\d\d)/g)||["-","0","0"],n=$ae(t,3),s=n[0],a=n[1],o=n[2],l=parseInt(a,10)*60+parseInt(o,10);return l===0?0:s==="+"?-l:+l}Zn(["Z","ZZ"],Fae,function(e){return{offset:Wae(e)}});Zn("x",zy,function(e){return{date:new Date(parseInt(e,10))}});Zn("X",Uae,function(e){return{date:new Date(parseFloat(e)*1e3)}});Zn("d",Ky,"weekday");Zn("dd",id("weekdaysMin"),rd("weekdaysMin","weekday"));Zn("ddd",id("weekdaysShort"),rd("weekdaysShort","weekday"));Zn("dddd",id("weekdays"),rd("weekdays","weekday"));Zn("w",Pr,"week");Zn("ww",Jl,"week");function Kae(e,t){if(e!==void 0&&t!==void 0){if(t){if(e<12)return e+12}else if(e===12)return 0}return e}function zae(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=[0,0,1,0,0,0,0],s=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],a=!0,o=0;o<7;o++)e[o]===void 0?n[o]=a?s[o]:n[o]:(n[o]=e[o],a=!1);return n}function jae(e,t,n,s,a,o,l){var i;return e<100&&e>=0?(i=new Date(e+400,t,n,s,a,o,l),isFinite(i.getFullYear())&&i.setFullYear(e)):i=new Date(e,t,n,s,a,o,l),i}function Yae(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];return a<100&&a>=0?(n[0]+=400,e=new Date(Date.UTC.apply(Date,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(a)):e=new Date(Date.UTC.apply(Date,n)),e}function Xae(e,t,n){var s=t.match(Dae);if(!s)throw new Error;for(var a=s.length,o={},l=0;l<a;l+=1){var i=s[l],r=Zy[i];if(r){var u=typeof r[0]=="function"?r[0](n):r[0],m=r[1],h=(u.exec(e)||[])[0],_=m(h,n);o=Rae({},o,{},_),e=e.replace(h,"")}else{var d=i.replace(/^\[|\]$/g,"");if(e.indexOf(d)===0)e=e.substr(d.length);else throw new Error("not match")}}return o}function qae(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var s=n.locale,a=s===void 0?d_:s,o=n.backupDate,l=o===void 0?new Date:o,i=Xae(e,t,a),r=i.year,d=i.month,u=i.day,m=i.hour,h=i.minute,_=i.second,g=i.millisecond,T=i.isPM,S=i.date,b=i.offset,A=i.weekday,y=i.week;if(S)return S;var x=[r,d,u,m,h,_,g];if(x[3]=Kae(x[3],T),y!==void 0&&d===void 0&&u===void 0){var $=Wy(r===void 0?l:new Date(r,3),{firstDayOfWeek:a.firstDayOfWeek,firstWeekContainsDate:a.firstWeekContainsDate});return new Date($.getTime()+(y-1)*7*24*3600*1e3)}var N,w=zae(x,l);return b!==void 0?(w[6]+=b*60*1e3,N=Yae.apply(void 0,d0(w))):N=jae.apply(void 0,d0(w)),A!==void 0&&N.getDay()!==A?new Date(NaN):N}catch{return new Date(NaN)}}var Zae=Object.defineProperty,Qae=Object.defineProperties,Jae=Object.getOwnPropertyDescriptors,Wu=Object.getOwnPropertySymbols,Qy=Object.prototype.hasOwnProperty,Jy=Object.prototype.propertyIsEnumerable,p0=(e,t,n)=>t in e?Zae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vs=(e,t)=>{for(var n in t||(t={}))Qy.call(t,n)&&p0(e,n,t[n]);if(Wu)for(var n of Wu(t))Jy.call(t,n)&&p0(e,n,t[n]);return e},oo=(e,t)=>Qae(e,Jae(t)),eoe=(e,t)=>{var n={};for(var s in e)Qy.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Wu)for(var s of Wu(e))t.indexOf(s)<0&&Jy.call(e,s)&&(n[s]=e[s]);return n};const toe={formatLocale:d_,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let mc="en";const Qi={};Qi[mc]=toe;function eS(e,t,n=!1){if(typeof e!="string")return Qi[mc];let s=mc;return Qi[e]&&(s=e),t&&(Qi[e]=t,s=e),n||(mc=s),Qi[e]||Qi[mc]}function Pf(e){return eS(e,void 0,!0)}function h_(e,t){if(!Array.isArray(e))return[];const n=[],s=e.length;let a=0;for(t=t||s;a<s;)n.push(e.slice(a,a+=t));return n}function m0(e){return Array.isArray(e)?e[e.length-1]:void 0}function Bl(e){return Object.prototype.toString.call(e)==="[object Object]"}function dl(e,t){const n={};return Bl(e)&&(Array.isArray(t)||(t=[t]),t.forEach(s=>{Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])})),n}function tS(e,t){if(!Bl(e))return{};let n=e;return Bl(t)&&Object.keys(t).forEach(s=>{let a=t[s];const o=e[s];Bl(a)&&Bl(o)&&(a=tS(o,a)),n=oo(Vs({},n),{[s]:a})}),n}function bh(e){const t=parseInt(String(e),10);return t<10?`0${t}`:`${t}`}function noe(e){const t=/-(\w)/g;return e.replace(t,(n,s)=>s?s.toUpperCase():"")}const nS="datepicker_locale",sS="datepicker_prefixClass",aS="datepicker_getWeek";function f_(){return Ao(nS,Zu(Pf()))}function soe(e){const t=C(()=>Bl(e.value)?tS(Pf(),e.value):Pf(e.value));return cs(nS,t),t}function aoe(e){cs(sS,e)}function ya(){return Ao(sS,"mx")}function ooe(e){cs(aS,e)}function loe(){return Ao(aS,c_)}function ioe(e){const t=e.style.display,n=e.style.visibility;e.style.display="block",e.style.visibility="hidden";const s=window.getComputedStyle(e),a=e.offsetWidth+parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),o=e.offsetHeight+parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);return e.style.display=t,e.style.visibility=n,{width:a,height:o}}function roe(e,t,n,s){let a=0,o=0,l=0,i=0;const r=e.getBoundingClientRect(),d=document.documentElement.clientWidth,u=document.documentElement.clientHeight;return s&&(l=window.pageXOffset+r.left,i=window.pageYOffset+r.top),d-r.left<t&&r.right<t?a=l-r.left+1:r.left+r.width/2<=d/2?a=l:a=l+r.width-t,r.top<=n&&u-r.bottom<=n?o=i+u-r.top-n:r.top+r.height/2<=u/2?o=i+r.height:o=i-n,{left:`${a}px`,top:`${o}px`}}function g_(e,t=document.body){if(!e||e===t)return null;const n=(o,l)=>getComputedStyle(o,null).getPropertyValue(l);return/(auto|scroll)/.test(n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x"))?e:g_(e.parentElement,t)}let Dd;function coe(){if(typeof window>"u")return 0;if(Dd!==void 0)return Dd;const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=document.createElement("div");return t.style.width="100%",e.appendChild(t),Dd=e.offsetWidth-t.offsetWidth,e.parentNode.removeChild(e),Dd}const h0="ontouchend"in document?"touchstart":"mousedown";function doe(e){let t=!1;return function(...s){t||(t=!0,requestAnimationFrame(()=>{t=!1,e.apply(this,s)}))}}function vl(e,t){return{setup:e,name:e.name,props:t}}function bl(e,t){return new Proxy(e,{get(s,a){const o=s[a];return o!==void 0?o:t[a]}})}const ei=()=>e=>e,uoe=(e,t)=>{const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const a=noe(s);let o=e[s];t.indexOf(a)!==-1&&o===""&&(o=!0),n[a]=o}return n};function poe(e,{slots:t}){const n=bl(e,{appendToBody:!0}),s=ya(),a=F(null),o=F({left:"",top:""}),l=()=>{if(!n.visible||!a.value)return;const r=n.getRelativeElement();if(!r)return;const{width:d,height:u}=ioe(a.value);o.value=roe(r,d,u,n.appendToBody)};va(l,{flush:"post"}),va(r=>{const d=n.getRelativeElement();if(!d)return;const u=g_(d)||window,m=doe(l);u.addEventListener("scroll",m),window.addEventListener("resize",m),r(()=>{u.removeEventListener("scroll",m),window.removeEventListener("resize",m)})},{flush:"post"});const i=r=>{if(!n.visible)return;const d=r.target,u=a.value,m=n.getRelativeElement();u&&!u.contains(d)&&m&&!m.contains(d)&&n.onClickOutside(r)};return va(r=>{document.addEventListener(h0,i),r(()=>{document.removeEventListener(h0,i)})}),()=>v(yr,{to:"body",disabled:!n.appendToBody},{default:()=>[v(Ps,{name:`${s}-zoom-in-down`},{default:()=>{var r;return[n.visible&&v("div",{ref:a,class:`${s}-datepicker-main ${s}-datepicker-popup ${n.className}`,style:[Vs({position:"absolute"},o.value),n.style||{}]},[(r=t.default)==null?void 0:r.call(t)])]}})]})}const moe=ei()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var hoe=vl(poe,moe);const foe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},goe=c("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),_oe=[goe];function oS(e,t){return p(),f("svg",foe,_oe)}const voe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},boe=c("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),Eoe=[boe];function Toe(e,t){return p(),f("svg",voe,Eoe)}const Aoe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},yoe=c("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Soe=c("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),Ioe=c("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),Coe=[yoe,Soe,Ioe];function xoe(e,t){return p(),f("svg",Aoe,Coe)}function vi(e,t=0,n=1,s=0,a=0,o=0,l=0){const i=new Date(e,t,n,s,a,o,l);return e<100&&e>=0&&i.setFullYear(e),i}function fl(e){return e instanceof Date&&!isNaN(e.getTime())}function bi(e){return Array.isArray(e)&&e.length===2&&e.every(fl)&&e[0]<=e[1]}function Noe(e){return Array.isArray(e)&&e.every(fl)}function Cp(...e){if(e[0]!==void 0&&e[0]!==null){const n=new Date(e[0]);if(fl(n))return n}const t=e.slice(1);return t.length?Cp(...t):new Date}function Ooe(e){const t=new Date(e);return t.setMonth(0,1),t.setHours(0,0,0,0),t}function f0(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Xl(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function woe({firstDayOfWeek:e,year:t,month:n}){const s=[],a=vi(t,n,0),o=a.getDate(),l=o-(a.getDay()+7-e)%7;for(let u=l;u<=o;u++)s.push(vi(t,n,u-o));a.setMonth(n+1,0);const i=a.getDate();for(let u=1;u<=i;u++)s.push(vi(t,n,u));const r=o-l+1,d=6*7-r-i;for(let u=1;u<=d;u++)s.push(vi(t,n,i+u));return s}function Ku(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getMonth()):Number(t),a=n.getFullYear(),o=vi(a,s+1,0).getDate(),l=n.getDate();return n.setMonth(s,Math.min(l,o)),n}function ar(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getFullYear()):t;return n.setFullYear(s),n}function Roe(e,t){const n=new Date(t),s=new Date(e),a=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return a*12+o}function zu(e,t){const n=new Date(e),s=new Date(t);return n.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),n}function $oe(e,{slots:t}){const n=bl(e,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),s=ya(),a=F(null),o=C(()=>n.separator||(n.range?" ~ ":",")),l=_=>n.range?bi(_):n.multiple?Noe(_):fl(_),i=_=>Array.isArray(_)?_.some(g=>n.disabledDate(g)):n.disabledDate(_),r=C(()=>a.value!==null?a.value:typeof n.renderInputText=="function"?n.renderInputText(n.value):l(n.value)?Array.isArray(n.value)?n.value.map(_=>n.formatDate(_)).join(o.value):n.formatDate(n.value):""),d=_=>{var g;_&&_.stopPropagation(),n.onChange(n.range?[null,null]:null),(g=n.onClear)==null||g.call(n)},u=()=>{var _;if(!n.editable||a.value===null)return;const g=a.value.trim();if(a.value=null,g===""){d();return}let T;if(n.range){let S=g.split(o.value);S.length!==2&&(S=g.split(o.value.trim())),T=S.map(b=>n.parseDate(b.trim()))}else n.multiple?T=g.split(o.value).map(S=>n.parseDate(S.trim())):T=n.parseDate(g);l(T)&&!i(T)?n.onChange(T):(_=n.onInputError)==null||_.call(n,g)},m=_=>{a.value=typeof _=="string"?_:_.target.value},h=_=>{const{keyCode:g}=_;g===9?n.onBlur():g===13&&u()};return()=>{var _,g,T;const S=!n.disabled&&n.clearable&&r.value,b=oo(Vs({name:"date",type:"text",autocomplete:"off",value:r.value,class:n.inputClass||`${s}-input`,readonly:!n.editable,disabled:n.disabled,placeholder:n.placeholder},n.inputAttr),{onFocus:n.onFocus,onKeydown:h,onInput:m,onChange:u});return v("div",{class:`${s}-input-wrapper`,onClick:n.onClick},[((_=t.input)==null?void 0:_.call(t,b))||v("input",b,null),S?v("i",{class:`${s}-icon-clear`,onClick:d},[((g=t["icon-clear"])==null?void 0:g.call(t))||v(Toe,null,null)]):null,v("i",{class:`${s}-icon-calendar`},[((T=t["icon-calendar"])==null?void 0:T.call(t))||v(oS,null,null)])])}}const __=ei()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),Moe=ei()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...__]);var koe=vl($oe,Moe);function Loe(e,{slots:t}){var n;const s=bl(e,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});aoe(s.prefixClass),ooe(((n=s.formatter)==null?void 0:n.getWeek)||c_);const a=soe(xc(e,"lang")),o=F(),l=()=>o.value,i=F(!1),r=C(()=>!s.disabled&&(typeof s.open=="boolean"?s.open:i.value)),d=()=>{var N,w;s.disabled||r.value||(i.value=!0,(N=s["onUpdate:open"])==null||N.call(s,!0),(w=s.onOpen)==null||w.call(s))},u=()=>{var N,w;r.value&&(i.value=!1,(N=s["onUpdate:open"])==null||N.call(s,!1),(w=s.onClose)==null||w.call(s))},m=(N,w)=>(w=w||s.format,Bl(s.formatter)&&typeof s.formatter.stringify=="function"?s.formatter.stringify(N,w):u_(N,w,{locale:a.value.formatLocale})),h=(N,w)=>{if(w=w||s.format,Bl(s.formatter)&&typeof s.formatter.parse=="function")return s.formatter.parse(N,w);const D=new Date;return qae(N,w,{locale:a.value.formatLocale,backupDate:D})},_=N=>{switch(s.valueType){case"date":return N instanceof Date?new Date(N.getTime()):new Date(NaN);case"timestamp":return typeof N=="number"?new Date(N):new Date(NaN);case"format":return typeof N=="string"?h(N):new Date(NaN);default:return typeof N=="string"?h(N,s.valueType):new Date(NaN)}},g=N=>{if(!fl(N))return null;switch(s.valueType){case"date":return N;case"timestamp":return N.getTime();case"format":return m(N);default:return m(N,s.valueType)}},T=C(()=>{const N=s.value;return s.range?(Array.isArray(N)?N.slice(0,2):[null,null]).map(_):s.multiple?(Array.isArray(N)?N:[]).map(_):_(N)}),S=(N,w,D=!0)=>{var H,B;const k=Array.isArray(N)?N.map(g):g(N);return(H=s["onUpdate:value"])==null||H.call(s,k),(B=s.onChange)==null||B.call(s,k,w),D&&u(),k},b=F(new Date);va(()=>{r.value&&(b.value=T.value)});const A=(N,w)=>{s.confirm?b.value=N:S(N,w,!s.multiple&&(w===s.type||w==="time"))},y=()=>{var N;const w=S(b.value);(N=s.onConfirm)==null||N.call(s,w)},x=N=>s.disabledDate(N)||s.disabledTime(N),$=N=>{var w;const{prefixClass:D}=s;return v("div",{class:`${D}-datepicker-sidebar`},[(w=t.sidebar)==null?void 0:w.call(t,N),(s.shortcuts||[]).map((H,B)=>v("button",{key:B,"data-index":B,type:"button",class:`${D}-btn ${D}-btn-text ${D}-btn-shortcut`,onClick:()=>{var k;const U=(k=H.onClick)==null?void 0:k.call(H);U&&S(U)}},[H.text]))])};return()=>{var N,w;const{prefixClass:D,disabled:H,confirm:B,range:k,popupClass:U,popupStyle:G,appendToBody:L}=s,M={value:b.value,"onUpdate:value":A,emit:S},R=t.header&&v("div",{class:`${D}-datepicker-header`},[t.header(M)]),P=(t.footer||B)&&v("div",{class:`${D}-datepicker-footer`},[(N=t.footer)==null?void 0:N.call(t,M),B&&v("button",{type:"button",class:`${D}-btn ${D}-datepicker-btn-confirm`,onClick:y},[s.confirmText])]),W=(w=t.content)==null?void 0:w.call(t,M),Q=(t.sidebar||s.shortcuts)&&$(M);return v("div",{ref:o,class:{[`${D}-datepicker`]:!0,[`${D}-datepicker-range`]:k,disabled:H}},[v(koe,oo(Vs({},dl(s,__)),{value:T.value,formatDate:m,parseDate:h,disabledDate:x,onChange:S,onClick:d,onFocus:d,onBlur:u}),dl(t,["icon-calendar","icon-clear","input"])),v(hoe,{className:U,style:G,visible:r.value,appendToBody:L,getRelativeElement:l,onClickOutside:u},{default:()=>[Q,v("div",{class:`${D}-datepicker-content`},[R,W,P])]})])}}const Doe=ei()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),Poe=[...Doe,...__];var g0=vl(Loe,Poe);function Pd(e){var t=e,{value:n}=t,s=eoe(t,["value"]);const a=ya();return v("button",oo(Vs({},s),{type:"button",class:`${a}-btn ${a}-btn-text ${a}-btn-icon-${n}`}),[v("i",{class:`${a}-icon-${n}`},null)])}function v_({type:e,calendar:t,onUpdateCalendar:n},{slots:s}){var a;const o=ya(),l=()=>{n(Ku(t,h=>h-1))},i=()=>{n(Ku(t,h=>h+1))},r=()=>{n(ar(t,h=>h-1))},d=()=>{n(ar(t,h=>h+1))},u=()=>{n(ar(t,h=>h-10))},m=()=>{n(ar(t,h=>h+10))};return v("div",{class:`${o}-calendar-header`},[v(Pd,{value:"double-left",onClick:e==="year"?u:r},null),e==="date"&&v(Pd,{value:"left",onClick:l},null),v(Pd,{value:"double-right",onClick:e==="year"?m:d},null),e==="date"&&v(Pd,{value:"right",onClick:i},null),v("span",{class:`${o}-calendar-header-label`},[(a=s.default)==null?void 0:a.call(s)])])}function Boe({calendar:e,isWeekMode:t,showWeekNumber:n,titleFormat:s,getWeekActive:a,getCellClasses:o,onSelect:l,onUpdatePanel:i,onUpdateCalendar:r,onDateMouseEnter:d,onDateMouseLeave:u}){const m=ya(),h=loe(),_=f_().value,{yearFormat:g,monthBeforeYear:T,monthFormat:S="MMM",formatLocale:b}=_,A=b.firstDayOfWeek||0;let y=_.days||b.weekdaysMin;y=y.concat(y).slice(A,A+7);const x=e.getFullYear(),$=e.getMonth(),N=h_(woe({firstDayOfWeek:A,year:x,month:$}),7),w=(M,R)=>u_(M,R,{locale:_.formatLocale}),D=M=>{i(M)},H=M=>{const R=M.getAttribute("data-index"),[P,W]=R.split(",").map(Z=>parseInt(Z,10)),Q=N[P][W];return new Date(Q)},B=M=>{l(H(M.currentTarget))},k=M=>{d&&d(H(M.currentTarget))},U=M=>{u&&u(H(M.currentTarget))},G=v("button",{type:"button",class:`${m}-btn ${m}-btn-text ${m}-btn-current-year`,onClick:()=>D("year")},[w(e,g)]),L=v("button",{type:"button",class:`${m}-btn ${m}-btn-text ${m}-btn-current-month`,onClick:()=>D("month")},[w(e,S)]);return n=typeof n=="boolean"?n:t,v("div",{class:[`${m}-calendar ${m}-calendar-panel-date`,{[`${m}-calendar-week-mode`]:t}]},[v(v_,{type:"date",calendar:e,onUpdateCalendar:r},{default:()=>[T?[L,G]:[G,L]]}),v("div",{class:`${m}-calendar-content`},[v("table",{class:`${m}-table ${m}-table-date`},[v("thead",null,[v("tr",null,[n&&v("th",{class:`${m}-week-number-header`},null),y.map(M=>v("th",{key:M},[M]))])]),v("tbody",null,[N.map((M,R)=>v("tr",{key:R,class:[`${m}-date-row`,{[`${m}-active-week`]:a(M)}]},[n&&v("td",{class:`${m}-week-number`,"data-index":`${R},0`,onClick:B},[v("div",null,[h(M[0])])]),M.map((P,W)=>v("td",{key:W,class:["cell",o(P)],title:w(P,s),"data-index":`${R},${W}`,onClick:B,onMouseenter:k,onMouseleave:U},[v("div",null,[P.getDate()])]))]))])])])])}function Foe({calendar:e,getCellClasses:t,onSelect:n,onUpdateCalendar:s,onUpdatePanel:a}){const o=ya(),l=f_().value,i=l.months||l.formatLocale.monthsShort,r=u=>vi(e.getFullYear(),u),d=u=>{const h=u.currentTarget.getAttribute("data-month");n(r(parseInt(h,10)))};return v("div",{class:`${o}-calendar ${o}-calendar-panel-month`},[v(v_,{type:"month",calendar:e,onUpdateCalendar:s},{default:()=>[v("button",{type:"button",class:`${o}-btn ${o}-btn-text ${o}-btn-current-year`,onClick:()=>a("year")},[e.getFullYear()])]}),v("div",{class:`${o}-calendar-content`},[v("table",{class:`${o}-table ${o}-table-month`},[h_(i,3).map((u,m)=>v("tr",{key:m},[u.map((h,_)=>{const g=m*3+_;return v("td",{key:_,class:["cell",t(r(g))],"data-month":g,onClick:d},[v("div",null,[h])])})]))])])])}const Uoe=e=>{const t=Math.floor(e.getFullYear()/10)*10,n=[];for(let s=0;s<10;s++)n.push(t+s);return h_(n,2)};function Goe({calendar:e,getCellClasses:t=()=>[],getYearPanel:n=Uoe,onSelect:s,onUpdateCalendar:a}){const o=ya(),l=m=>vi(m,0),i=m=>{const _=m.currentTarget.getAttribute("data-year");s(l(parseInt(_,10)))},r=n(new Date(e)),d=r[0][0],u=m0(m0(r));return v("div",{class:`${o}-calendar ${o}-calendar-panel-year`},[v(v_,{type:"year",calendar:e,onUpdateCalendar:a},{default:()=>[v("span",null,[d]),v("span",{class:`${o}-calendar-decade-separator`},null),v("span",null,[u])]}),v("div",{class:`${o}-calendar-content`},[v("table",{class:`${o}-table ${o}-table-year`},[r.map((m,h)=>v("tr",{key:h},[m.map((_,g)=>v("td",{key:g,class:["cell",t(l(_))],"data-year":_,onClick:i},[v("div",null,[_])]))]))])])])}function Voe(e){const t=bl(e,{defaultValue:Xl(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),n=C(()=>(Array.isArray(t.value)?t.value:[t.value]).filter(fl).map(A=>t.type==="year"?Ooe(A):t.type==="month"?f0(A):Xl(A))),s=F(new Date);va(()=>{let b=t.calendar;if(!fl(b)){const{length:A}=n.value;b=Cp(A>0?n.value[A-1]:t.defaultValue)}s.value=f0(b)});const a=b=>{var A;s.value=b,(A=t.onCalendarChange)==null||A.call(t,b)},o=F("date");va(()=>{const b=["date","month","year"],A=Math.max(b.indexOf(t.type),b.indexOf(t.defaultPanel));o.value=A!==-1?b[A]:"date"});const l=b=>{var A;const y=o.value;o.value=b,(A=t.onPanelChange)==null||A.call(t,b,y)},i=b=>t.disabledDate(new Date(b),n.value),r=(b,A)=>{var y,x,$;if(!i(b))if((y=t.onPick)==null||y.call(t,b),t.multiple===!0){const N=n.value.filter(w=>w.getTime()!==b.getTime());N.length===n.value.length&&N.push(b),(x=t["onUpdate:value"])==null||x.call(t,N,A)}else($=t["onUpdate:value"])==null||$.call(t,b,A)},d=b=>{r(b,t.type==="week"?"week":"date")},u=b=>{if(t.type==="year")r(b,"year");else if(a(b),l("month"),t.partialUpdate&&n.value.length===1){const A=ar(n.value[0],b.getFullYear());r(A,"year")}},m=b=>{if(t.type==="month")r(b,"month");else if(a(b),l("date"),t.partialUpdate&&n.value.length===1){const A=Ku(ar(n.value[0],b.getFullYear()),b.getMonth());r(A,"month")}},h=(b,A=[])=>(i(b)?A.push("disabled"):n.value.some(y=>y.getTime()===b.getTime())&&A.push("active"),A.concat(t.getClasses(b,n.value,A.join(" ")))),_=b=>{const A=b.getMonth()!==s.value.getMonth(),y=[];return b.getTime()===new Date().setHours(0,0,0,0)&&y.push("today"),A&&y.push("not-current-month"),h(b,y)},g=b=>t.type!=="month"?s.value.getMonth()===b.getMonth()?"active":"":h(b),T=b=>t.type!=="year"?s.value.getFullYear()===b.getFullYear()?"active":"":h(b),S=b=>{if(t.type!=="week")return!1;const A=b[0].getTime(),y=b[6].getTime();return n.value.some(x=>{const $=x.getTime();return $>=A&&$<=y})};return()=>o.value==="year"?v(Goe,{calendar:s.value,getCellClasses:T,getYearPanel:t.getYearPanel,onSelect:u,onUpdateCalendar:a},null):o.value==="month"?v(Foe,{calendar:s.value,getCellClasses:g,onSelect:m,onUpdatePanel:l,onUpdateCalendar:a},null):v(Boe,{isWeekMode:t.type==="week",showWeekNumber:t.showWeekNumber,titleFormat:t.titleFormat,calendar:s.value,getCellClasses:_,getWeekActive:S,onSelect:d,onUpdatePanel:l,onUpdateCalendar:a,onDateMouseEnter:t.onDateMouseEnter,onDateMouseLeave:t.onDateMouseLeave},null)}const xp=ei()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var Np=vl(Voe,xp);const _0=(e,t)=>{const n=e.getTime();let[s,a]=t.map(o=>o.getTime());return s>a&&([s,a]=[a,s]),n>s&&n<a};function Hoe(e){const t=bl(e,{defaultValue:new Date,type:"date"}),n=ya(),s=C(()=>{let S=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return S=S.map(b=>Xl(b)),bi(S)?S:[new Date,new Date].map(b=>Xl(b))}),a=F([new Date(NaN),new Date(NaN)]);va(()=>{bi(t.value)&&(a.value=t.value)});const o=(S,b)=>{var A;const[y,x]=a.value;fl(y)&&!fl(x)?(y.getTime()>S.getTime()?a.value=[S,y]:a.value=[y,S],(A=t["onUpdate:value"])==null||A.call(t,a.value,b)):a.value=[S,new Date(NaN)]},l=F([new Date,new Date]),i=C(()=>bi(t.calendar)?t.calendar:l.value),r=C(()=>t.type==="year"?10*12:t.type==="month"?1*12:1),d=(S,b)=>{var A;const y=Roe(S[0],S[1]),x=r.value-y;if(x>0){const $=b===1?0:1;S[$]=Ku(S[$],N=>N+($===0?-x:x))}l.value=S,(A=t.onCalendarChange)==null||A.call(t,S,b)},u=S=>{d([S,i.value[1]],0)},m=S=>{d([i.value[0],S],1)};va(()=>{const S=bi(t.value)?t.value:s.value;d(S.slice(0,2))});const h=F(null),_=S=>h.value=S,g=()=>h.value=null,T=(S,b,A)=>{const y=t.getClasses?t.getClasses(S,b,A):[],x=Array.isArray(y)?y:[y];return/disabled|active/.test(A)?x:(b.length===2&&_0(S,b)&&x.push("in-range"),b.length===1&&h.value&&_0(S,[b[0],h.value])?x.concat("hover-in-range"):x)};return()=>{const S=i.value.map((b,A)=>{const y=oo(Vs({},t),{calendar:b,value:a.value,defaultValue:s.value[A],getClasses:T,partialUpdate:!1,multiple:!1,"onUpdate:value":o,onCalendarChange:A===0?u:m,onDateMouseLeave:g,onDateMouseEnter:_});return v(Np,y,null)});return v("div",{class:`${n}-calendar-range`},[S])}}const b_=xp;var E_=vl(Hoe,b_);const lS=el({setup(e,{slots:t}){const n=ya(),s=F(),a=F(""),o=F("");pt(()=>{if(!s.value)return;const g=s.value,T=g.clientHeight*100/g.scrollHeight;a.value=T<100?`${T}%`:""});const i=coe(),r=g=>{const T=g.currentTarget,{scrollHeight:S,scrollTop:b}=T;o.value=`${b*100/S}%`};let d=!1,u=0;const m=g=>{g.stopImmediatePropagation();const T=g.currentTarget,{offsetTop:S}=T;d=!0,u=g.clientY-S},h=g=>{if(!d||!s.value)return;const{clientY:T}=g,{scrollHeight:S,clientHeight:b}=s.value,y=(T-u)*S/b;s.value.scrollTop=y},_=()=>{d=!1};return pt(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",_)}),zs(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",_)}),()=>{var g;return v("div",{class:`${n}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[v("div",{ref:s,class:`${n}-scrollbar-wrap`,style:{marginRight:`-${i}px`},onScroll:r},[(g=t.default)==null?void 0:g.call(t)]),v("div",{class:`${n}-scrollbar-track`},[v("div",{class:`${n}-scrollbar-thumb`,style:{height:a.value,top:o.value},onMousedown:m},null)])])}}});function Woe({options:e,getClasses:t,onSelect:n}){const s=ya(),a=o=>{const l=o.target,i=o.currentTarget;if(l.tagName.toUpperCase()!=="LI")return;const r=i.getAttribute("data-type"),d=parseInt(i.getAttribute("data-index"),10),u=parseInt(l.getAttribute("data-index"),10),m=e[d].list[u].value;n(m,r)};return v("div",{class:`${s}-time-columns`},[e.map((o,l)=>v(lS,{key:o.type,class:`${s}-time-column`},{default:()=>[v("ul",{class:`${s}-time-list`,"data-index":l,"data-type":o.type,onClick:a},[o.list.map((i,r)=>v("li",{key:i.text,"data-index":r,class:[`${s}-time-item`,t(i.value,o.type)]},[i.text]))])]}))])}function Koe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!YE(e)}function zoe(e){let t;const n=ya();return v(lS,null,Koe(t=e.options.map(s=>v("div",{key:s.text,class:[`${n}-time-option`,e.getClasses(s.value,"time")],onClick:()=>e.onSelect(s.value,"time")},[s.text])))?t:{default:()=>[t]})}function Eh({length:e,step:t=1,options:n}){if(Array.isArray(n))return n.filter(a=>a>=0&&a<e);t<=0&&(t=1);const s=[];for(let a=0;a<e;a+=t)s.push(a);return s}function joe(e,t){let{showHour:n,showMinute:s,showSecond:a,use12h:o}=t;const l=t.format||"HH:mm:ss";n=typeof n=="boolean"?n:/[HhKk]/.test(l),s=typeof s=="boolean"?s:/m/.test(l),a=typeof a=="boolean"?a:/s/.test(l),o=typeof o=="boolean"?o:/a/i.test(l);const i=[],r=o&&e.getHours()>=12;return n&&i.push({type:"hour",list:Eh({length:o?12:24,step:t.hourStep,options:t.hourOptions}).map(d=>{const u=d===0&&o?"12":bh(d),m=new Date(e);return m.setHours(r?d+12:d),{value:m,text:u}})}),s&&i.push({type:"minute",list:Eh({length:60,step:t.minuteStep,options:t.minuteOptions}).map(d=>{const u=new Date(e);return u.setMinutes(d),{value:u,text:bh(d)}})}),a&&i.push({type:"second",list:Eh({length:60,step:t.secondStep,options:t.secondOptions}).map(d=>{const u=new Date(e);return u.setSeconds(d),{value:u,text:bh(d)}})}),o&&i.push({type:"ampm",list:["AM","PM"].map((d,u)=>{const m=new Date(e);return m.setHours(m.getHours()%12+u*12),{text:d,value:m}})}),i}function Th(e=""){const t=e.split(":");if(t.length>=2){const n=parseInt(t[0],10),s=parseInt(t[1],10);return{hours:n,minutes:s}}return null}function Yoe({date:e,option:t,format:n,formatDate:s}){const a=[];if(typeof t=="function")return t()||[];const o=Th(t.start),l=Th(t.end),i=Th(t.step),r=t.format||n;if(o&&l&&i){const d=o.minutes+o.hours*60,u=l.minutes+l.hours*60,m=i.minutes+i.hours*60,h=Math.floor((u-d)/m);for(let _=0;_<=h;_++){const g=d+_*m,T=Math.floor(g/60),S=g%60,b=new Date(e);b.setHours(T,S,0),a.push({value:b,text:s(b,r)})}}return a}const iS=(e,t,n=0)=>{if(n<=0){requestAnimationFrame(()=>{e.scrollTop=t});return}const a=(t-e.scrollTop)/n*10;requestAnimationFrame(()=>{const o=e.scrollTop+a;if(o>=t){e.scrollTop=t;return}e.scrollTop=o,iS(e,t,n-10)})};function Xoe(e){const t=bl(e,{defaultValue:Xl(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),n=ya(),s=f_(),a=(T,S)=>u_(T,S,{locale:s.value.formatLocale}),o=F(new Date);va(()=>{o.value=Cp(t.value,t.defaultValue)});const l=T=>Array.isArray(T)?T.every(S=>t.disabledTime(new Date(S))):t.disabledTime(new Date(T)),i=T=>{const S=new Date(T);return l([S.getTime(),S.setMinutes(0,0,0),S.setMinutes(59,59,999)])},r=T=>{const S=new Date(T);return l([S.getTime(),S.setSeconds(0,0),S.setSeconds(59,999)])},d=T=>{const S=new Date(T),b=S.getHours()<12?0:12,A=b+11;return l([S.getTime(),S.setHours(b,0,0,0),S.setHours(A,59,59,999)])},u=(T,S)=>S==="hour"?i(T):S==="minute"?r(T):S==="ampm"?d(T):l(T),m=(T,S)=>{var b;if(!u(T,S)){const A=new Date(T);o.value=A,l(A)||(b=t["onUpdate:value"])==null||b.call(t,A,S)}},h=(T,S)=>u(T,S)?"disabled":T.getTime()===o.value.getTime()?"active":"",_=F(),g=T=>{if(!_.value)return;const S=_.value.querySelectorAll(".active");for(let b=0;b<S.length;b++){const A=S[b],y=g_(A,_.value);if(y){const x=A.offsetTop;iS(y,x,T)}}};return pt(()=>g(0)),ot(o,()=>g(t.scrollDuration),{flush:"post"}),()=>{let T;return t.timePickerOptions?T=v(zoe,{onSelect:m,getClasses:h,options:Yoe({date:o.value,format:t.format,option:t.timePickerOptions,formatDate:a})},null):T=v(Woe,{options:joe(o.value,t),onSelect:m,getClasses:h},null),v("div",{class:`${n}-time`,ref:_},[t.showTimeHeader&&v("div",{class:`${n}-time-header`},[v("button",{type:"button",class:`${n}-btn ${n}-btn-text ${n}-time-header-title`,onClick:t.onClickTitle},[a(o.value,t.timeTitleFormat)])]),v("div",{class:`${n}-time-content`},[T])])}}const Op=ei()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var Hc=vl(Xoe,Op);function qoe(e){const t=bl(e,{defaultValue:Xl(new Date),disabledTime:()=>!1}),n=ya(),s=F([new Date(NaN),new Date(NaN)]);va(()=>{bi(t.value)?s.value=t.value:s.value=[new Date(NaN),new Date(NaN)]});const a=(d,u)=>{var m;(m=t["onUpdate:value"])==null||m.call(t,s.value,d==="time"?"time-range":d,u)},o=(d,u)=>{s.value[0]=d,s.value[1].getTime()>=d.getTime()||(s.value[1]=d),a(u,0)},l=(d,u)=>{s.value[1]=d,s.value[0].getTime()<=d.getTime()||(s.value[0]=d),a(u,1)},i=d=>t.disabledTime(d,0),r=d=>d.getTime()<s.value[0].getTime()||t.disabledTime(d,1);return()=>{const d=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return v("div",{class:`${n}-time-range`},[v(Hc,oo(Vs({},t),{"onUpdate:value":o,value:s.value[0],defaultValue:d[0],disabledTime:i}),null),v(Hc,oo(Vs({},t),{"onUpdate:value":l,value:s.value[1],defaultValue:d[1],disabledTime:r}),null)])}}const T_=Op;var A_=vl(qoe,T_);function rS(e){const t=F(!1),n=()=>{var o;t.value=!1,(o=e.onShowTimePanelChange)==null||o.call(e,!1)},s=()=>{var o;t.value=!0,(o=e.onShowTimePanelChange)==null||o.call(e,!0)};return{timeVisible:C(()=>typeof e.showTimePanel=="boolean"?e.showTimePanel:t.value),openTimePanel:s,closeTimePanel:n}}function Zoe(e){const t=bl(e,{disabledTime:()=>!1,defaultValue:Xl(new Date)}),n=F(t.value);va(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:a,timeVisible:o}=rS(t),l=(i,r)=>{var d;r==="date"&&s();let u=zu(i,Cp(t.value,t.defaultValue));if(t.disabledTime(new Date(u))&&(u=zu(i,t.defaultValue),t.disabledTime(new Date(u)))){n.value=u;return}(d=t["onUpdate:value"])==null||d.call(t,u,r)};return()=>{const i=ya(),r=oo(Vs({},dl(t,xp)),{multiple:!1,type:"date",value:n.value,"onUpdate:value":l}),d=oo(Vs({},dl(t,Op)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:a});return v("div",{class:`${i}-date-time`},[v(Np,r,null),o.value&&v(Hc,d,null)])}}const cS=ei()(["showTimePanel","onShowTimePanelChange"]),Qoe=[...cS,...xp,...Op];var dS=vl(Zoe,Qoe);function Joe(e){const t=bl(e,{defaultValue:Xl(new Date),disabledTime:()=>!1}),n=F(t.value);va(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:a,timeVisible:o}=rS(t),l=(i,r)=>{var d;r==="date"&&s();const u=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];let m=i.map((h,_)=>{const g=bi(t.value)?t.value[_]:u[_];return zu(h,g)});if(m[1].getTime()<m[0].getTime()&&(m=[m[0],m[0]]),m.some(t.disabledTime)&&(m=i.map((h,_)=>zu(h,u[_])),m.some(t.disabledTime))){n.value=m;return}(d=t["onUpdate:value"])==null||d.call(t,m,r)};return()=>{const i=ya(),r=oo(Vs({},dl(t,b_)),{type:"date",value:n.value,"onUpdate:value":l}),d=oo(Vs({},dl(t,T_)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:a});return v("div",{class:`${i}-date-time-range`},[v(E_,r,null),o.value&&v(A_,d,null)])}}const ele=[...cS,...T_,...b_];var uS=vl(Joe,ele);const tle=ei()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),v0={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function pS(e,{slots:t}){const n=e.type||"date",s=e.format||v0[n]||v0.date,a=oo(Vs({},uoe(e,tle)),{type:n,format:s});return v(g0,dl(a,g0.props),Vs({content:o=>{if(a.range){const l=n==="time"?A_:n==="datetime"?uS:E_;return Wn(l,dl(Vs(Vs({},a),o),l.props))}else{const l=n==="time"?Hc:n==="datetime"?dS:Np;return Wn(l,dl(Vs(Vs({},a),o),l.props))}},"icon-calendar":()=>n==="time"?v(xoe,null,null):v(oS,null,null)},t))}const nle={locale:eS,install:e=>{e.component("DatePicker",pS)}};var mS=Object.assign(pS,nle,{Calendar:Np,CalendarRange:E_,TimePanel:Hc,TimeRange:A_,DateTime:dS,DateTimeRange:uS});const sle={components:{DatePicker:mS},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Array,default:()=>[]}},emits:["change"],methods:{handleChange(e){this.$emit("change",e)}}},ale={class:"date-picker"};function ole(e,t,n,s,a,o){const l=z("DatePicker");return p(),f("div",ale,[v(l,{range:"",confirm:"",clearable:!1,editable:!1,"confirm-text":n.confirmText,placeholder:n.placeholder,value:n.value,onChange:o.handleChange},null,8,["confirm-text","placeholder","value","onChange"])])}const hS=Fe(sle,[["render",ole]]),lle=e=>e?e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h`:`${Math.floor(e/86400)}d`:"",Gs={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},aa={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},dr={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[aa.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[aa.DAY,aa.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[aa.DAY,aa.WEEK,aa.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[aa.WEEK,aa.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[aa.WEEK,aa.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[aa.DAY,aa.WEEK,aa.MONTH,aa.YEAR]}},b0='Inter,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',ile={type:"bar",backgroundColor:"rgb(31, 147, 255)"},fS=e=>({datasets:[ile],scales:{x:{ticks:{fontFamily:b0},grid:{drawOnChartArea:!1}},y:{type:"linear",position:"left",ticks:{fontFamily:b0,beginAtZero:!0,stepSize:1,callback:e},grid:{drawOnChartArea:!1}}}}),Ki=fS((e,t,n)=>!t||t===n.length-1?e:""),Ah=fS((e,t,n)=>!t||t===n.length-1?lle(e):""),E0={conversations_count:Ki,incoming_messages_count:Ki,outgoing_messages_count:Ki,avg_first_response_time:Ah,reply_time:Ah,avg_resolution_time:Ah,resolutions_count:Ki,bot_resolutions_count:Ki,bot_handoffs_count:Ki},T0={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"},rle={class:"multiselect-wrap--small"},cle={__name:"DateRange",emits:["onRangeChange"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=C(()=>Object.values(dr).map(r=>({...r,name:s(r.translationKey)}))),o=F(Object.values(dr)[0].id),l=C({get(){return a.value.find(r=>r.id===o.value)},set(r){o.value=r.id}}),i=r=>{l.value=r,n("onRangeChange",r)};return(r,d)=>{const u=z("multiselect");return p(),f("div",rle,[v(u,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=m=>l.value=m),class:"no-margin","track-by":"id",label:"name",placeholder:r.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":r.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:a.value,searchable:!1,"allow-empty":!1,onSelect:i},null,8,["modelValue","placeholder","select-label","options"])])}}},dle={name:"ReportsFiltersDateGroupBy",props:{validGroupOptions:{type:Array,default:()=>[aa.DAY]},selectedOption:{type:Object,default:()=>aa.DAY}},emits:["onGroupingChange"],data(){return{currentSelectedFilter:null}},computed:{translatedOptions(){return this.validGroupOptions.map(e=>({...e,groupBy:this.$t(e.translationKey)}))}},watch:{selectedOption:{handler(){this.currentSelectedFilter={...this.selectedOption,groupBy:this.$t(this.selectedOption.translationKey)}},immediate:!0}},methods:{changeFilterSelection(e){this.groupByOptions=this.$emit("onGroupingChange",e)}}},ule={class:"multiselect-wrap--small"},ple={"aria-hidden":"true",class:"hidden"};function mle(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",ule,[c("p",ple,E(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),v(l,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":t[0]||(t[0]=i=>a.currentSelectedFilter=i),class:"no-margin","track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:o.translatedOptions,"allow-empty":!1,"show-labels":!1,onSelect:o.changeFilterSelection},null,8,["modelValue","placeholder","options","onSelect"])])}const hle=Fe(dle,[["render",mle]]),fle={name:"ReportsFiltersAgents",emits:["agentsFilterSelection"],data(){return{selectedOptions:[]}},computed:{...St({options:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{handleInput(){this.$emit("agentsFilterSelection",this.selectedOptions)}}},gle={class:"multiselect-wrap--small"};function _le(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",gle,[v(l,{modelValue:a.selectedOptions,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.selectedOptions=i),o.handleInput],class:"no-margin",options:e.options,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:e.$t("CSAT_REPORTS.FILTERS.AGENTS.PLACEHOLDER"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE")},null,8,["modelValue","options","placeholder","select-label","deselect-label","onUpdate:modelValue"])])}const vle=Fe(fle,[["render",_le]]),ble={name:"ReportsFiltersLabels",emits:["labelsFilterSelection"],data(){return{selectedOption:null}},computed:{...St({options:"labels/getLabels"})},mounted(){this.$store.dispatch("labels/get")},methods:{handleInput(){this.$emit("labelsFilterSelection",this.selectedOption)}}},Ele={class:"multiselect-wrap--small"},Tle={class:"flex items-center min-w-0 gap-2"},Ale={class:"my-0 text-n-slate-12"},yle={class:"flex items-center gap-2"},Sle={class:"my-0 text-n-slate-12 truncate min-w-0"};function Ile(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",Ele,[v(l,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.selectedOption=i),o.handleInput],class:"no-margin",placeholder:e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),label:"title","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},{singleLabel:K(i=>[c("div",Tle,[c("div",{style:Ct({backgroundColor:i.option.color}),class:"w-5 h-5 rounded-full"},null,4),c("span",Ale,E(i.option.title),1)])]),option:K(i=>[c("div",yle,[c("div",{style:Ct({backgroundColor:i.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-n-weak"},null,4),c("span",Sle,E(i.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Cle=Fe(ble,[["render",Ile]]),xle={name:"ReportsFiltersInboxes",emits:["inboxFilterSelection"],data(){return{selectedOption:null}},computed:{...St({options:"inboxes/getInboxes"})},mounted(){this.$store.dispatch("inboxes/get")},methods:{handleInput(){this.$emit("inboxFilterSelection",this.selectedOption)}}},Nle={class:"multiselect-wrap--small"};function Ole(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",Nle,[v(l,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.selectedOption=i),o.handleInput],class:"no-margin",placeholder:e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const wle=Fe(xle,[["render",Ole]]),Rle={name:"ReportsFiltersTeams",emits:["teamFilterSelection"],data(){return{selectedOption:null}},computed:{...St({options:"teams/getTeams"})},mounted(){this.$store.dispatch("teams/get")},methods:{handleInput(){this.$emit("teamFilterSelection",this.selectedOption)}}},$le={class:"multiselect-wrap--small"};function Mle(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",$le,[v(l,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.selectedOption=i),o.handleInput],class:"no-margin",placeholder:e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const kle=Fe(Rle,[["render",Mle]]),Lle={name:"ReportFiltersRatings",emits:["ratingFilterSelection"],data(){return{selectedOption:null,options:Ei.reverse().map(t=>({...t,label:this.$t(t.translationKey)}))}},methods:{handleInput(e){this.$emit("ratingFilterSelection",e)}}},Dle={class:"multiselect-wrap--small"};function Ple(e,t,n,s,a,o){const l=z("multiselect");return p(),f("div",Dle,[v(l,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.selectedOption=i),o.handleInput],class:"no-margin","option-height":24,placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),options:a.options,"show-labels":!1,"track-by":"value",label:"label"},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Ble=Fe(Lle,[["render",Ple]]),Fle={class:"multiselect-wrap--small"},Ule={__name:"Funnel",emits:["funnel-filter-selection"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=Pn(),o=C(()=>a.getters["funnel/getFunnels"]||[]),l={id:"all",name:"Todos os Funis",translationKey:"REPORT.FUNNEL_FILTER.ALL_FUNNELS"},i=C(()=>[l,...o.value.map(m=>({id:m.id,name:m.name,translationKey:null}))]),r=F("all"),d=C({get(){return i.value.find(m=>m.id===r.value)||l},set(m){r.value=m.id}}),u=m=>{d.value=m,n("funnel-filter-selection",m)};return(m,h)=>{const _=z("multiselect");return p(),f("div",Fle,[v(_,{modelValue:d.value,"onUpdate:modelValue":h[0]||(h[0]=g=>d.value=g),class:"no-margin","track-by":"id",label:"name",placeholder:"Selecionar Funil","selected-label":"","select-label":m.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:i.value,searchable:!1,"allow-empty":!1,onSelect:u},null,8,["modelValue","select-label","options"])])}}},Gle={components:{WootDateRangePicker:hS,ReportsFiltersDateRange:cle,ReportsFiltersDateGroupBy:hle,ReportsFiltersAgents:vle,ReportsFiltersLabels:Cle,ReportsFiltersInboxes:wle,ReportsFiltersTeams:kle,ReportsFiltersRatings:Ble,ReportsFiltersFunnel:Ule,ToggleSwitch:so},props:{showGroupByFilter:{type:Boolean,default:!1},showAgentsFilter:{type:Boolean,default:!1},showLabelsFilter:{type:Boolean,default:!1},showInboxFilter:{type:Boolean,default:!1},showRatingFilter:{type:Boolean,default:!1},showTeamFilter:{type:Boolean,default:!1},showBusinessHoursSwitch:{type:Boolean,default:!0},showFunnelFilter:{type:Boolean,default:!1}},emits:["filterChange"],data(){return{selectedDateRange:dr.LAST_7_DAYS,selectedGroupByFilter:null,selectedLabel:null,selectedInbox:null,selectedTeam:null,selectedRating:null,selectedAgents:[],customDateRange:[new Date,new Date],businessHoursSelected:!1,selectedFunnel:null}},computed:{isDateRangeSelected(){return this.selectedDateRange.id===dr.CUSTOM_DATE_RANGE.id},isGroupByPossible(){return this.selectedDateRange.id!==dr.LAST_7_DAYS.id},to(){return this.isDateRangeSelected?_u(this.customDateRange[1]):_u(new Date)},from(){if(this.isDateRangeSelected)return gu(this.customDateRange[0]);const{offset:e}=this.selectedDateRange,t=pl(new Date,e);return gu(t)},validGroupOptions(){return this.selectedDateRange.groupByOptions},validGroupBy(){return this.selectedGroupByFilter?this.validGroupOptions.map(t=>t.id).includes(this.selectedGroupByFilter.id)?this.selectedGroupByFilter:this.validGroupOptions[0]:this.validGroupOptions[0]}},mounted(){this.emitChange()},methods:{emitChange(){const{from:e,to:t,selectedGroupByFilter:n,businessHoursSelected:s,selectedAgents:a,selectedLabel:o,selectedInbox:l,selectedTeam:i,selectedRating:r,selectedFunnel:d}=this;this.$emit("filterChange",{from:e,to:t,groupBy:n,businessHours:s,selectedAgents:a,selectedLabel:o,selectedInbox:l,selectedTeam:i,selectedRating:r,selectedFunnel:d})},onDateRangeChange(e){this.selectedDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onCustomDateRangeChange(e){this.customDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onGroupingChange(e){this.selectedGroupByFilter=e,this.emitChange()},handleAgentsFilterSelection(e){this.selectedAgents=e,this.emitChange()},handleLabelsFilterSelection(e){this.selectedLabel=e,this.emitChange()},handleInboxFilterSelection(e){this.selectedInbox=e,this.emitChange()},handleTeamFilterSelection(e){this.selectedTeam=e,this.emitChange()},handleRatingFilterSelection(e){this.selectedRating=e,this.emitChange()},handleFunnelFilterSelection(e){this.selectedFunnel=e,this.emitChange()}}},Vle={class:"flex flex-col justify-between gap-3 md:flex-row"},Hle={class:"w-full grid gap-y-2 gap-x-1.5 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]"},Wle={key:0,class:"flex items-center"},Kle={class:"mx-2 text-sm whitespace-nowrap"};function zle(e,t,n,s,a,o){const l=z("ReportsFiltersDateRange"),i=z("WootDateRangePicker"),r=z("ReportsFiltersDateGroupBy"),d=z("ReportsFiltersAgents"),u=z("ReportsFiltersLabels"),m=z("ReportsFiltersTeams"),h=z("ReportsFiltersInboxes"),_=z("ReportsFiltersRatings"),g=z("ReportsFiltersFunnel"),T=z("ToggleSwitch");return p(),f("div",Vle,[c("div",Hle,[v(l,{onOnRangeChange:o.onDateRangeChange},null,8,["onOnRangeChange"]),o.isDateRangeSelected?(p(),V(i,{key:0,"show-range":"",class:"no-margin auto-width",value:a.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),onChange:o.onCustomDateRangeChange},null,8,["value","confirm-text","placeholder","onChange"])):O("",!0),n.showGroupByFilter&&o.isGroupByPossible?(p(),V(r,{key:1,"valid-group-options":o.validGroupOptions,"selected-option":a.selectedGroupByFilter,onOnGroupingChange:o.onGroupingChange},null,8,["valid-group-options","selected-option","onOnGroupingChange"])):O("",!0),n.showAgentsFilter?(p(),V(d,{key:2,onAgentsFilterSelection:o.handleAgentsFilterSelection},null,8,["onAgentsFilterSelection"])):O("",!0),n.showLabelsFilter?(p(),V(u,{key:3,onLabelsFilterSelection:o.handleLabelsFilterSelection},null,8,["onLabelsFilterSelection"])):O("",!0),n.showTeamFilter?(p(),V(m,{key:4,onTeamFilterSelection:o.handleTeamFilterSelection},null,8,["onTeamFilterSelection"])):O("",!0),n.showInboxFilter?(p(),V(h,{key:5,onInboxFilterSelection:o.handleInboxFilterSelection},null,8,["onInboxFilterSelection"])):O("",!0),n.showRatingFilter?(p(),V(_,{key:6,onRatingFilterSelection:o.handleRatingFilterSelection},null,8,["onRatingFilterSelection"])):O("",!0),n.showFunnelFilter?(p(),V(g,{key:7,onFunnelFilterSelection:o.handleFunnelFilterSelection},null,8,["onFunnelFilterSelection"])):O("",!0)]),n.showBusinessHoursSwitch?(p(),f("div",Wle,[c("span",Kle,E(e.$t("REPORT.BUSINESS_HOURS")),1),c("span",null,[v(T,{modelValue:a.businessHoursSelected,"onUpdate:modelValue":t[0]||(t[0]=S=>a.businessHoursSelected=S),onChange:o.emitChange},null,8,["modelValue","onChange"])])])):O("",!0)])}const cd=Fe(Gle,[["render",zle]]);function gS(e="getAccountSummary",t="getAccountSummaryFetchingStatus"){const n=ke(e),s=ke(t),a=i=>{if(!n.value.previous[i])return 0;const r=n.value[i]-n.value.previous[i];return Math.round(r/n.value.previous[i]*100)},o=i=>["avg_first_response_time","avg_resolution_time","reply_time"].includes(i);return{calculateTrend:a,isAverageMetricType:o,displayMetric:i=>o(i)?rg(n.value[i]):Number(n.value[i]||"").toLocaleString(),fetchingStatus:s}}const jle={class:"text-n-slate-11"},Yle={class:"text-sm"},Xle={class:"flex items-end text-n-slate-12"},qle={key:0},Zle={key:1,class:"text-n-ruby-10 text-sm"},Qle={key:2,class:"text-xl font-medium"},Jle={key:3,class:"text-xs ml-4 flex items-center mb-0.5"},eie={__name:"ChartStats",props:{metric:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"}},setup(e){const t=e,{t:n}=Pe(),{calculateTrend:s,displayMetric:a,isAverageMetricType:o,fetchingStatus:l}=gS(t.accountSummaryKey,t.summaryFetchingKey),i=(r,d)=>o(d)?r>0?"border-n-ruby-9 text-n-ruby-9":"border-n-teal-10 text-n-teal-10":r<0?"border-n-ruby-9 text-n-ruby-9":"border-n-teal-10 text-n-teal-10";return(r,d)=>(p(),f("div",jle,[c("span",Yle,E(e.metric.NAME),1),c("div",Xle,[I(l)===I(vd).FETCHING?(p(),f("div",qle,[v(qn)])):I(l)===I(vd).FAILED?(p(),f("div",Zle,E(I(n)("REPORT.SUMMARY_FETCHING_FAILED")),1)):I(l)===I(vd).FINISHED?(p(),f("div",Qle,E(I(a)(e.metric.KEY)),1)):O("",!0),e.metric.trend&&I(l)===I(vd).FINISHED?(p(),f("div",Jle,[e.metric.trend<0?(p(),f("div",{key:0,class:re(["h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1",i(e.metric.trend,e.metric.KEY)])},null,2)):(p(),f("div",{key:1,class:re(["h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1",i(e.metric.trend,e.metric.KEY)])},null,2)),c("span",{class:re(["font-medium",i(e.metric.trend,e.metric.KEY)])},E(I(s)(e.metric.KEY))+"% ",3)])):O("",!0)])]))}},tie={components:{ChartStats:eie,BarChart:cT},props:{groupBy:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"},reportKeys:{type:Object,default:()=>({CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"})}},setup(e){const{calculateTrend:t,isAverageMetricType:n}=gS(e.accountSummaryKey);return{calculateTrend:t,isAverageMetricType:n}},computed:{...St({accountReport:"getAccountReports"}),metrics(){const e=Object.keys(this.reportKeys),t={FIRST_RESPONSE_TIME:this.$t("REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT"),RESOLUTION_TIME:this.$t("REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT")};return e.map(n=>({NAME:this.$t(`REPORT.METRICS.${n}.NAME`),KEY:this.reportKeys[n],DESC:this.$t(`REPORT.METRICS.${n}.DESC`),INFO_TEXT:t[n],TOOLTIP_TEXT:`REPORT.METRICS.${n}.TOOLTIP_TEXT`,trend:this.calculateTrend(this.reportKeys[n])}))}},methods:{getCollection(e){if(!this.accountReport.data[e.KEY])return{};const t=this.accountReport.data[e.KEY],n=t.map(a=>{var o,l,i;if(((o=this.groupBy)==null?void 0:o.period)===Gs[2].period){let r=new Date(rc(a.timestamp));const d=r.getDate()-r.getDay(),u=d+6,m=new Date(r.setDate(d)),h=new Date(r.setDate(u));return`${ts(m,"dd-MMM")} - ${ts(h,"dd-MMM")}`}return((l=this.groupBy)==null?void 0:l.period)===Gs[3].period?ts(rc(a.timestamp),"MMM-yyyy"):((i=this.groupBy)==null?void 0:i.period)===Gs[4].period?ts(rc(a.timestamp),"yyyy"):ts(rc(a.timestamp),"dd-MMM")}),s=E0[e.KEY].datasets.map(a=>{switch(a.type){case"bar":return{...a,yAxisID:"y",label:e.NAME,data:t.map(o=>o.value)};case"line":return{...a,yAxisID:"y",label:this.metrics[0].NAME,data:t.map(o=>o.count)};default:return a}});return{labels:n,datasets:s}},getChartOptions(e){const t={scales:E0[e.KEY].scales};return this.isAverageMetricType(e.KEY)&&(t.plugins={tooltip:{callbacks:{label:({raw:n,dataIndex:s})=>{var a;return this.$t(e.TOOLTIP_TEXT,{metricValue:rg(n||0),conversationCount:((a=this.accountReport.data[e.KEY][s])==null?void 0:a.count)||0})}}}}),t}}},nie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 px-6 py-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},sie={class:"mt-4 h-72"},aie={key:1,class:"flex items-center justify-center h-72"},oie={key:1,class:"text-sm text-n-slate-10"};function lie(e,t,n,s,a,o){const l=z("ChartStats"),i=z("woot-loading-state"),r=z("BarChart");return p(),f("div",nie,[(p(!0),f(fe,null,Ae(o.metrics,d=>(p(),f("div",{key:d.KEY,class:"p-4 mb-3 rounded-md"},[v(l,{metric:d,"account-summary-key":n.accountSummaryKey,"summary-fetching-key":n.summaryFetchingKey},null,8,["metric","account-summary-key","summary-fetching-key"]),c("div",sie,[e.accountReport.isFetching[d.KEY]?(p(),V(i,{key:0,class:"text-xs",message:e.$t("REPORT.LOADING_CHART")},null,8,["message"])):(p(),f("div",aie,[e.accountReport.data[d.KEY].length?(p(),V(r,{key:0,collection:o.getCollection(d),"chart-options":o.getChartOptions(d)},null,8,["collection","chart-options"])):(p(),f("span",oie,E(e.$t("REPORT.NO_ENOUGH_DATA")),1))]))])]))),128))])}const y_=Fe(tie,[["render",lie]]),iie={class:"flex flex-col gap-1 pt-10 pb-5"},rie={key:0},cie={class:"flex justify-between w-full gap-5"},die={class:"flex flex-col gap-2"},uie={class:"text-xl font-medium text-n-slate-12"},pie={key:0,class:"text-n-slate-12 mt-2"},mie={class:"flex-shrink-0"},No={__name:"ReportHeader",props:{headerTitle:{required:!0,type:String},headerDescription:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),f("section",iie,[e.hasBackButton?(p(),f("div",rie,[v(ki,{compact:""})])):O("",!0),c("div",cie,[c("div",die,[c("div",null,[c("span",uie,E(e.headerTitle),1),e.headerDescription?(p(),f("p",pie,E(e.headerDescription),1)):O("",!0)])]),c("div",mie,[at(t.$slots,"default")])])]))}},hie={CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"},fie={name:"ConversationReports",components:{ReportHeader:No,ReportFilterSelector:cd,ReportContainer:y_,V4Button:ce},data(){return{from:0,to:0,groupBy:Gs[1],businessHours:!1}},methods:{fetchAllData(){this.fetchAccountSummary(),this.fetchChartData()},fetchAccountSummary(){try{this.$store.dispatch("fetchAccountSummary",this.getRequestPayload())}catch{_e(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){["CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME"].forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:hie[e],...this.getRequestPayload()})}catch{_e(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},downloadAgentReports(){const{from:e,to:t}=this,n=Cr({type:"agent",to:t,businessHours:this.businessHours});this.$store.dispatch("downloadAgentReports",{from:e,to:t,fileName:n,businessHours:this.businessHours})},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),nn(Ai.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"conversations"})}}},gie={class:"flex flex-col gap-3"};function _ie(e,t,n,s,a,o){const l=z("V4Button"),i=z("ReportHeader"),r=z("ReportFilterSelector"),d=z("ReportContainer");return p(),f(fe,null,[v(i,{"header-title":e.$t("REPORT.HEADER")},{default:K(()=>[v(l,{label:e.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:o.downloadAgentReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),c("div",gie,[v(r,{"show-agents-filter":!1,"show-group-by-filter":"",onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),v(d,{"group-by":a.groupBy},null,8,["group-by"])])],64)}const vie=Fe(fie,[["render",_ie]]);/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function wp(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Fl(e,t){return typeof e=="function"?e(t):e}function Ua(e,t){return n=>{t.setState(s=>({...s,[e]:Fl(n,s[e])}))}}function Rp(e){return e instanceof Function}function bie(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Eie(e,t){const n=[],s=a=>{a.forEach(o=>{n.push(o);const l=t(o);l!=null&&l.length&&s(l)})};return s(e),n}function en(e,t,n){let s=[],a;return o=>{let l;n.key&&n.debug&&(l=Date.now());const i=e(o);if(!(i.length!==s.length||i.some((u,m)=>s[m]!==u)))return a;s=i;let d;if(n.key&&n.debug&&(d=Date.now()),a=t(...i),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-l)*100)/100,m=Math.round((Date.now()-d)*100)/100,h=m/16,_=(g,T)=>{for(g=String(g);g.length<T;)g=" "+g;return g};console.info(`%c ${_(m,5)} /${_(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return a}}function tn(e,t,n,s){return{debug:()=>{var a;return(a=e==null?void 0:e.debugAll)!=null?a:e[t]},key:!1,onChange:s}}function Tie(e,t,n,s){const a=()=>{var l;return(l=o.getValue())!=null?l:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(s),renderValue:a,getContext:en(()=>[e,n,t,o],(l,i,r,d)=>({table:l,column:i,row:r,cell:d,getValue:d.getValue,renderValue:d.renderValue}),tn(e.options,"debugCells"))};return e._features.forEach(l=>{l.createCell==null||l.createCell(o,n,t,e)},{}),o}function Aie(e,t,n,s){var a,o;const i={...e._getDefaultColumnDef(),...t},r=i.accessorKey;let d=(a=(o=i.id)!=null?o:r?typeof String.prototype.replaceAll=="function"?r.replaceAll(".","_"):r.replace(/\./g,"_"):void 0)!=null?a:typeof i.header=="string"?i.header:void 0,u;if(i.accessorFn?u=i.accessorFn:r&&(r.includes(".")?u=h=>{let _=h;for(const T of r.split(".")){var g;_=(g=_)==null?void 0:g[T]}return _}:u=h=>h[i.accessorKey]),!d)throw new Error;let m={id:`${String(d)}`,accessorFn:u,parent:s,depth:n,columnDef:i,columns:[],getFlatColumns:en(()=>[!0],()=>{var h;return[m,...(h=m.columns)==null?void 0:h.flatMap(_=>_.getFlatColumns())]},tn(e.options,"debugColumns")),getLeafColumns:en(()=>[e._getOrderColumnsFn()],h=>{var _;if((_=m.columns)!=null&&_.length){let g=m.columns.flatMap(T=>T.getLeafColumns());return h(g)}return[m]},tn(e.options,"debugColumns"))};for(const h of e._features)h.createColumn==null||h.createColumn(m,e);return m}const ta="debugHeaders";function A0(e,t,n){var s;let o={id:(s=n.id)!=null?s:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],i=r=>{r.subHeaders&&r.subHeaders.length&&r.subHeaders.map(i),l.push(r)};return i(o),l},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(l=>{l.createHeader==null||l.createHeader(o,e)}),o}const yie={createTable:e=>{e.getHeaderGroups=en(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>{var o,l;const i=(o=s==null?void 0:s.map(m=>n.find(h=>h.id===m)).filter(Boolean))!=null?o:[],r=(l=a==null?void 0:a.map(m=>n.find(h=>h.id===m)).filter(Boolean))!=null?l:[],d=n.filter(m=>!(s!=null&&s.includes(m.id))&&!(a!=null&&a.includes(m.id)));return Bd(t,[...i,...d,...r],e)},tn(e.options,ta)),e.getCenterHeaderGroups=en(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>(n=n.filter(o=>!(s!=null&&s.includes(o.id))&&!(a!=null&&a.includes(o.id))),Bd(t,n,e,"center")),tn(e.options,ta)),e.getLeftHeaderGroups=en(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,s)=>{var a;const o=(a=s==null?void 0:s.map(l=>n.find(i=>i.id===l)).filter(Boolean))!=null?a:[];return Bd(t,o,e,"left")},tn(e.options,ta)),e.getRightHeaderGroups=en(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,s)=>{var a;const o=(a=s==null?void 0:s.map(l=>n.find(i=>i.id===l)).filter(Boolean))!=null?a:[];return Bd(t,o,e,"right")},tn(e.options,ta)),e.getFooterGroups=en(()=>[e.getHeaderGroups()],t=>[...t].reverse(),tn(e.options,ta)),e.getLeftFooterGroups=en(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),tn(e.options,ta)),e.getCenterFooterGroups=en(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),tn(e.options,ta)),e.getRightFooterGroups=en(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),tn(e.options,ta)),e.getFlatHeaders=en(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),tn(e.options,ta)),e.getLeftFlatHeaders=en(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),tn(e.options,ta)),e.getCenterFlatHeaders=en(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),tn(e.options,ta)),e.getRightFlatHeaders=en(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),tn(e.options,ta)),e.getCenterLeafHeaders=en(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),tn(e.options,ta)),e.getLeftLeafHeaders=en(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),tn(e.options,ta)),e.getRightLeafHeaders=en(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),tn(e.options,ta)),e.getLeafHeaders=en(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,s)=>{var a,o,l,i,r,d;return[...(a=(o=t[0])==null?void 0:o.headers)!=null?a:[],...(l=(i=n[0])==null?void 0:i.headers)!=null?l:[],...(r=(d=s[0])==null?void 0:d.headers)!=null?r:[]].map(u=>u.getLeafHeaders()).flat()},tn(e.options,ta))}};function Bd(e,t,n,s){var a,o;let l=0;const i=function(h,_){_===void 0&&(_=1),l=Math.max(l,_),h.filter(g=>g.getIsVisible()).forEach(g=>{var T;(T=g.columns)!=null&&T.length&&i(g.columns,_+1)},0)};i(e);let r=[];const d=(h,_)=>{const g={depth:_,id:[s,`${_}`].filter(Boolean).join("_"),headers:[]},T=[];h.forEach(S=>{const b=[...T].reverse()[0],A=S.column.depth===g.depth;let y,x=!1;if(A&&S.column.parent?y=S.column.parent:(y=S.column,x=!0),b&&(b==null?void 0:b.column)===y)b.subHeaders.push(S);else{const $=A0(n,y,{id:[s,_,y.id,S==null?void 0:S.id].filter(Boolean).join("_"),isPlaceholder:x,placeholderId:x?`${T.filter(N=>N.column===y).length}`:void 0,depth:_,index:T.length});$.subHeaders.push(S),T.push($)}g.headers.push(S),S.headerGroup=g}),r.push(g),_>0&&d(T,_-1)},u=t.map((h,_)=>A0(n,h,{depth:l,index:_}));d(u,l-1),r.reverse();const m=h=>h.filter(g=>g.column.getIsVisible()).map(g=>{let T=0,S=0,b=[0];g.subHeaders&&g.subHeaders.length?(b=[],m(g.subHeaders).forEach(y=>{let{colSpan:x,rowSpan:$}=y;T+=x,b.push($)})):T=1;const A=Math.min(...b);return S=S+A,g.colSpan=T,g.rowSpan=S,{colSpan:T,rowSpan:S}});return m((a=(o=r[0])==null?void 0:o.headers)!=null?a:[]),r}const Sie=(e,t,n,s,a,o,l)=>{let i={id:t,index:s,original:n,depth:a,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:r=>{if(i._valuesCache.hasOwnProperty(r))return i._valuesCache[r];const d=e.getColumn(r);if(d!=null&&d.accessorFn)return i._valuesCache[r]=d.accessorFn(i.original,s),i._valuesCache[r]},getUniqueValues:r=>{if(i._uniqueValuesCache.hasOwnProperty(r))return i._uniqueValuesCache[r];const d=e.getColumn(r);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(i._uniqueValuesCache[r]=d.columnDef.getUniqueValues(i.original,s),i._uniqueValuesCache[r]):(i._uniqueValuesCache[r]=[i.getValue(r)],i._uniqueValuesCache[r])},renderValue:r=>{var d;return(d=i.getValue(r))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Eie(i.subRows,r=>r.subRows),getParentRow:()=>i.parentId?e.getRow(i.parentId,!0):void 0,getParentRows:()=>{let r=[],d=i;for(;;){const u=d.getParentRow();if(!u)break;r.push(u),d=u}return r.reverse()},getAllCells:en(()=>[e.getAllLeafColumns()],r=>r.map(d=>Tie(e,i,d,d.id)),tn(e.options,"debugRows")),_getAllCellsByColumnId:en(()=>[i.getAllCells()],r=>r.reduce((d,u)=>(d[u.column.id]=u,d),{}),tn(e.options,"debugRows"))};for(let r=0;r<e._features.length;r++){const d=e._features[r];d==null||d.createRow==null||d.createRow(i,e)}return i},Iie={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},_S=(e,t,n)=>{var s,a;const o=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=e.getValue(t))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};_S.autoRemove=e=>To(e);const vS=(e,t,n)=>{var s;return!!(!((s=e.getValue(t))==null||(s=s.toString())==null)&&s.includes(n))};vS.autoRemove=e=>To(e);const bS=(e,t,n)=>{var s;return((s=e.getValue(t))==null||(s=s.toString())==null?void 0:s.toLowerCase())===(n==null?void 0:n.toLowerCase())};bS.autoRemove=e=>To(e);const ES=(e,t,n)=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(n)};ES.autoRemove=e=>To(e)||!(e!=null&&e.length);const TS=(e,t,n)=>!n.some(s=>{var a;return!((a=e.getValue(t))!=null&&a.includes(s))});TS.autoRemove=e=>To(e)||!(e!=null&&e.length);const AS=(e,t,n)=>n.some(s=>{var a;return(a=e.getValue(t))==null?void 0:a.includes(s)});AS.autoRemove=e=>To(e)||!(e!=null&&e.length);const yS=(e,t,n)=>e.getValue(t)===n;yS.autoRemove=e=>To(e);const SS=(e,t,n)=>e.getValue(t)==n;SS.autoRemove=e=>To(e);const S_=(e,t,n)=>{let[s,a]=n;const o=e.getValue(t);return o>=s&&o<=a};S_.resolveFilterValue=e=>{let[t,n]=e,s=typeof t!="number"?parseFloat(t):t,a=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(s)?-1/0:s,l=n===null||Number.isNaN(a)?1/0:a;if(o>l){const i=o;o=l,l=i}return[o,l]};S_.autoRemove=e=>To(e)||To(e[0])&&To(e[1]);const ol={includesString:_S,includesStringSensitive:vS,equalsString:bS,arrIncludes:ES,arrIncludesAll:TS,arrIncludesSome:AS,equals:yS,weakEquals:SS,inNumberRange:S_};function To(e){return e==null||e===""}const Cie={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ua("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);return typeof s=="string"?ol.includesString:typeof s=="number"?ol.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?ol.equals:Array.isArray(s)?ol.arrIncludes:ol.weakEquals},e.getFilterFn=()=>{var n,s;return Rp(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(s=t.options.filterFns)==null?void 0:s[e.columnDef.filterFn])!=null?n:ol[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,s,a;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((s=t.options.enableColumnFilters)!=null?s:!0)&&((a=t.options.enableFilters)!=null?a:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(s=>s.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,s;return(n=(s=t.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(s=>{const a=e.getFilterFn(),o=s==null?void 0:s.find(u=>u.id===e.id),l=Fl(n,o?o.value:void 0);if(y0(a,l,e)){var i;return(i=s==null?void 0:s.filter(u=>u.id!==e.id))!=null?i:[]}const r={id:e.id,value:l};if(o){var d;return(d=s==null?void 0:s.map(u=>u.id===e.id?r:u))!=null?d:[]}return s!=null&&s.length?[...s,r]:[r]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),s=a=>{var o;return(o=Fl(t,a))==null?void 0:o.filter(l=>{const i=n.find(r=>r.id===l.id);if(i){const r=i.getFilterFn();if(y0(r,l.value,i))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(s)},e.resetColumnFilters=t=>{var n,s;e.setColumnFilters(t?[]:(n=(s=e.initialState)==null?void 0:s.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function y0(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const xie=(e,t,n)=>n.reduce((s,a)=>{const o=a.getValue(e);return s+(typeof o=="number"?o:0)},0),Nie=(e,t,n)=>{let s;return n.forEach(a=>{const o=a.getValue(e);o!=null&&(s>o||s===void 0&&o>=o)&&(s=o)}),s},Oie=(e,t,n)=>{let s;return n.forEach(a=>{const o=a.getValue(e);o!=null&&(s<o||s===void 0&&o>=o)&&(s=o)}),s},wie=(e,t,n)=>{let s,a;return n.forEach(o=>{const l=o.getValue(e);l!=null&&(s===void 0?l>=l&&(s=a=l):(s>l&&(s=l),a<l&&(a=l)))}),[s,a]},Rie=(e,t)=>{let n=0,s=0;if(t.forEach(a=>{let o=a.getValue(e);o!=null&&(o=+o)>=o&&(++n,s+=o)}),n)return s/n},$ie=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!bie(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((o,l)=>o-l);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},Mie=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),kie=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Lie=(e,t)=>t.length,yh={sum:xie,min:Nie,max:Oie,extent:wie,mean:Rie,median:$ie,unique:Mie,uniqueCount:kie,count:Lie},Die={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ua("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(s=>s!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,s;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((s=t.options.enableGrouping)!=null?s:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);if(typeof s=="number")return yh.sum;if(Object.prototype.toString.call(s)==="[object Date]")return yh.extent},e.getAggregationFn=()=>{var n,s;if(!e)throw new Error;return Rp(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(s=t.options.aggregationFns)==null?void 0:s[e.columnDef.aggregationFn])!=null?n:yh[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,s;e.setGrouping(t?[]:(n=(s=e.initialState)==null?void 0:s.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const s=t.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(e._groupingValuesCache[n]=s.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,s)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var a;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function Pie(e,t,n){if(!(t!=null&&t.length)||!n)return e;const s=e.filter(o=>!t.includes(o.id));return n==="remove"?s:[...t.map(o=>e.find(l=>l.id===o)).filter(Boolean),...s]}const Bie={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ua("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=en(n=>[Cc(t,n)],n=>n.findIndex(s=>s.id===e.id),tn(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var s;return((s=Cc(t,n)[0])==null?void 0:s.id)===e.id},e.getIsLastColumn=n=>{var s;const a=Cc(t,n);return((s=a[a.length-1])==null?void 0:s.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=en(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,s)=>a=>{let o=[];if(!(t!=null&&t.length))o=a;else{const l=[...t],i=[...a];for(;i.length&&l.length;){const r=l.shift(),d=i.findIndex(u=>u.id===r);d>-1&&o.push(i.splice(d,1)[0])}o=[...o,...i]}return Pie(o,n,s)},tn(e.options,"debugTable"))}},Sh=()=>({left:[],right:[]}),Fie={getInitialState:e=>({columnPinning:Sh(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ua("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const s=e.getLeafColumns().map(a=>a.id).filter(Boolean);t.setColumnPinning(a=>{var o,l;if(n==="right"){var i,r;return{left:((i=a==null?void 0:a.left)!=null?i:[]).filter(m=>!(s!=null&&s.includes(m))),right:[...((r=a==null?void 0:a.right)!=null?r:[]).filter(m=>!(s!=null&&s.includes(m))),...s]}}if(n==="left"){var d,u;return{left:[...((d=a==null?void 0:a.left)!=null?d:[]).filter(m=>!(s!=null&&s.includes(m))),...s],right:((u=a==null?void 0:a.right)!=null?u:[]).filter(m=>!(s!=null&&s.includes(m)))}}return{left:((o=a==null?void 0:a.left)!=null?o:[]).filter(m=>!(s!=null&&s.includes(m))),right:((l=a==null?void 0:a.right)!=null?l:[]).filter(m=>!(s!=null&&s.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(s=>{var a,o,l;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((o=(l=t.options.enableColumnPinning)!=null?l:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(i=>i.id),{left:s,right:a}=t.getState().columnPinning,o=n.some(i=>s==null?void 0:s.includes(i)),l=n.some(i=>a==null?void 0:a.includes(i));return o?"left":l?"right":!1},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();return a?(n=(s=t.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=en(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,s,a)=>{const o=[...s??[],...a??[]];return n.filter(l=>!o.includes(l.column.id))},tn(t.options,"debugRows")),e.getLeftVisibleCells=en(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,s)=>(s??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),tn(t.options,"debugRows")),e.getRightVisibleCells=en(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,s)=>(s??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),tn(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,s;return e.setColumnPinning(t?Sh():(n=(s=e.initialState)==null?void 0:s.columnPinning)!=null?n:Sh())},e.getIsSomeColumnsPinned=t=>{var n;const s=e.getState().columnPinning;if(!t){var a,o;return!!((a=s.left)!=null&&a.length||(o=s.right)!=null&&o.length)}return!!((n=s[t])!=null&&n.length)},e.getLeftLeafColumns=en(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(s=>t.find(a=>a.id===s)).filter(Boolean),tn(e.options,"debugColumns")),e.getRightLeafColumns=en(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(s=>t.find(a=>a.id===s)).filter(Boolean),tn(e.options,"debugColumns")),e.getCenterLeafColumns=en(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const a=[...n??[],...s??[]];return t.filter(o=>!a.includes(o.id))},tn(e.options,"debugColumns"))}},Fd={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ih=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Uie={getDefaultColumnDef:()=>Fd,getInitialState:e=>({columnSizing:{},columnSizingInfo:Ih(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ua("columnSizing",e),onColumnSizingInfoChange:Ua("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,s,a;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Fd.minSize,(s=o??e.columnDef.size)!=null?s:Fd.size),(a=e.columnDef.maxSize)!=null?a:Fd.maxSize)},e.getStart=en(n=>[n,Cc(t,n),t.getState().columnSizing],(n,s)=>s.slice(0,e.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),tn(t.options,"debugColumns")),e.getAfter=en(n=>[n,Cc(t,n),t.getState().columnSizing],(n,s)=>s.slice(e.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),tn(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:s,...a}=n;return a})},e.getCanResize=()=>{var n,s;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((s=t.options.enableColumnResizing)!=null?s:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var o;n+=(o=a.column.getSize())!=null?o:0}};return s(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const s=t.getColumn(e.column.id),a=s==null?void 0:s.getCanResize();return o=>{if(!s||!a||(o.persist==null||o.persist(),Ch(o)&&o.touches&&o.touches.length>1))return;const l=e.getSize(),i=e?e.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[s.id,s.getSize()]],r=Ch(o)?Math.round(o.touches[0].clientX):o.clientX,d={},u=(b,A)=>{typeof A=="number"&&(t.setColumnSizingInfo(y=>{var x,$;const N=t.options.columnResizeDirection==="rtl"?-1:1,w=(A-((x=y==null?void 0:y.startOffset)!=null?x:0))*N,D=Math.max(w/(($=y==null?void 0:y.startSize)!=null?$:0),-.999999);return y.columnSizingStart.forEach(H=>{let[B,k]=H;d[B]=Math.round(Math.max(k+k*D,0)*100)/100}),{...y,deltaOffset:w,deltaPercentage:D}}),(t.options.columnResizeMode==="onChange"||b==="end")&&t.setColumnSizing(y=>({...y,...d})))},m=b=>u("move",b),h=b=>{u("end",b),t.setColumnSizingInfo(A=>({...A,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},_=n||typeof document<"u"?document:null,g={moveHandler:b=>m(b.clientX),upHandler:b=>{_==null||_.removeEventListener("mousemove",g.moveHandler),_==null||_.removeEventListener("mouseup",g.upHandler),h(b.clientX)}},T={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),m(b.touches[0].clientX),!1),upHandler:b=>{var A;_==null||_.removeEventListener("touchmove",T.moveHandler),_==null||_.removeEventListener("touchend",T.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),h((A=b.touches[0])==null?void 0:A.clientX)}},S=Gie()?{passive:!1}:!1;Ch(o)?(_==null||_.addEventListener("touchmove",T.moveHandler,S),_==null||_.addEventListener("touchend",T.upHandler,S)):(_==null||_.addEventListener("mousemove",g.moveHandler,S),_==null||_.addEventListener("mouseup",g.upHandler,S)),t.setColumnSizingInfo(b=>({...b,startOffset:r,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:i,isResizingColumn:s.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Ih():(n=e.initialState.columnSizingInfo)!=null?n:Ih())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0}}};let Ud=null;function Gie(){if(typeof Ud=="boolean")return Ud;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Ud=e,Ud}function Ch(e){return e.type==="touchstart"}const Vie={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ua("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(s=>({...s,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,s;const a=e.columns;return(n=a.length?a.some(o=>o.getIsVisible()):(s=t.getState().columnVisibility)==null?void 0:s[e.id])!=null?n:!0},e.getCanHide=()=>{var n,s;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((s=t.options.enableHiding)!=null?s:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=en(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),tn(t.options,"debugRows")),e.getVisibleCells=en(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],tn(t.options,"debugRows"))},createTable:e=>{const t=(n,s)=>en(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),tn(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var s;e.setColumnVisibility(n?{}:(s=e.initialState.columnVisibility)!=null?s:{})},e.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((a,o)=>({...a,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;e.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function Cc(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Hie={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Wie={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:Ua("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const s=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,s,a,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=t.options.enableGlobalFilter)!=null?s:!0)&&((a=t.options.enableFilters)!=null?a:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>ol.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:s}=e.options;return Rp(s)?s:s==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[s])!=null?t:ol[s]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Kie={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ua("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var s,a;if(!t){e._queue(()=>{t=!0});return}if((s=(a=e.options.autoResetAll)!=null?a:e.options.autoResetExpanded)!=null?s:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=s=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(s),e.toggleAllRowsExpanded=s=>{s??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=s=>{var a,o;e.setExpanded(s?{}:(a=(o=e.initialState)==null?void 0:o.expanded)!=null?a:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const s=e.getState().expanded;return s===!0||Object.values(s).some(Boolean)},e.getIsAllRowsExpanded=()=>{const s=e.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||e.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},e.getExpandedDepth=()=>{let s=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const l=o.split(".");s=Math.max(s,l.length)}),s},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(s=>{var a;const o=s===!0?!0:!!(s!=null&&s[e.id]);let l={};if(s===!0?Object.keys(t.getRowModel().rowsById).forEach(i=>{l[i]=!0}):l=s,n=(a=n)!=null?a:!o,!o&&n)return{...l,[e.id]:!0};if(o&&!n){const{[e.id]:i,...r}=l;return r}return s})},e.getIsExpanded=()=>{var n;const s=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:s===!0||s!=null&&s[e.id])},e.getCanExpand=()=>{var n,s,a;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((s=t.options.enableExpanding)!=null?s:!0)&&!!((a=e.subRows)!=null&&a.length)},e.getIsAllParentsExpanded=()=>{let n=!0,s=e;for(;n&&s.parentId;)s=t.getRow(s.parentId,!0),n=s.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Bf=0,Ff=10,xh=()=>({pageIndex:Bf,pageSize:Ff}),zie={getInitialState:e=>({...e,pagination:{...xh(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ua("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var s,a;if(!t){e._queue(()=>{t=!0});return}if((s=(a=e.options.autoResetAll)!=null?a:e.options.autoResetPageIndex)!=null?s:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=s=>{const a=o=>Fl(s,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(a)},e.resetPagination=s=>{var a;e.setPagination(s?xh():(a=e.initialState.pagination)!=null?a:xh())},e.setPageIndex=s=>{e.setPagination(a=>{let o=Fl(s,a.pageIndex);const l=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...a,pageIndex:o}})},e.resetPageIndex=s=>{var a,o;e.setPageIndex(s?Bf:(a=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?a:Bf)},e.resetPageSize=s=>{var a,o;e.setPageSize(s?Ff:(a=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?a:Ff)},e.setPageSize=s=>{e.setPagination(a=>{const o=Math.max(1,Fl(s,a.pageSize)),l=a.pageSize*a.pageIndex,i=Math.floor(l/o);return{...a,pageIndex:i,pageSize:o}})},e.setPageCount=s=>e.setPagination(a=>{var o;let l=Fl(s,(o=e.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...a,pageCount:l}}),e.getPageOptions=en(()=>[e.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((o,l)=>l)),a},tn(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:s}=e.getState().pagination,a=e.getPageCount();return a===-1?!0:a===0?!1:s<a-1},e.previousPage=()=>e.setPageIndex(s=>s-1),e.nextPage=()=>e.setPageIndex(s=>s+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var s;return(s=e.options.pageCount)!=null?s:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var s;return(s=e.options.rowCount)!=null?s:e.getPrePaginationRowModel().rows.length}}},Nh=()=>({top:[],bottom:[]}),jie={getInitialState:e=>({rowPinning:Nh(),...e}),getDefaultOptions:e=>({onRowPinningChange:Ua("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,s,a)=>{const o=s?e.getLeafRows().map(r=>{let{id:d}=r;return d}):[],l=a?e.getParentRows().map(r=>{let{id:d}=r;return d}):[],i=new Set([...l,e.id,...o]);t.setRowPinning(r=>{var d,u;if(n==="bottom"){var m,h;return{top:((m=r==null?void 0:r.top)!=null?m:[]).filter(T=>!(i!=null&&i.has(T))),bottom:[...((h=r==null?void 0:r.bottom)!=null?h:[]).filter(T=>!(i!=null&&i.has(T))),...Array.from(i)]}}if(n==="top"){var _,g;return{top:[...((_=r==null?void 0:r.top)!=null?_:[]).filter(T=>!(i!=null&&i.has(T))),...Array.from(i)],bottom:((g=r==null?void 0:r.bottom)!=null?g:[]).filter(T=>!(i!=null&&i.has(T)))}}return{top:((d=r==null?void 0:r.top)!=null?d:[]).filter(T=>!(i!=null&&i.has(T))),bottom:((u=r==null?void 0:r.bottom)!=null?u:[]).filter(T=>!(i!=null&&i.has(T)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=t.options;return typeof s=="function"?s(e):(n=s??a)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:s,bottom:a}=t.getState().rowPinning,o=n.some(i=>s==null?void 0:s.includes(i)),l=n.some(i=>a==null?void 0:a.includes(i));return o?"top":l?"bottom":!1},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();if(!a)return-1;const o=(n=a==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(l=>{let{id:i}=l;return i});return(s=o==null?void 0:o.indexOf(e.id))!=null?s:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,s;return e.setRowPinning(t?Nh():(n=(s=e.initialState)==null?void 0:s.rowPinning)!=null?n:Nh())},e.getIsSomeRowsPinned=t=>{var n;const s=e.getState().rowPinning;if(!t){var a,o;return!!((a=s.top)!=null&&a.length||(o=s.bottom)!=null&&o.length)}return!!((n=s[t])!=null&&n.length)},e._getPinnedRows=(t,n,s)=>{var a;return((a=e.options.keepPinnedRows)==null||a?(n??[]).map(l=>{const i=e.getRow(l,!0);return i.getIsAllParentsExpanded()?i:null}):(n??[]).map(l=>t.find(i=>i.id===l))).filter(Boolean).map(l=>({...l,position:s}))},e.getTopRows=en(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),tn(e.options,"debugRows")),e.getBottomRows=en(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),tn(e.options,"debugRows")),e.getCenterRows=en(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,s)=>{const a=new Set([...n??[],...s??[]]);return t.filter(o=>!a.has(o.id))},tn(e.options,"debugRows"))}},Yie={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ua("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const s={...n},a=e.getPreGroupedRowModel().flatRows;return t?a.forEach(o=>{o.getCanSelect()&&(s[o.id]=!0)}):a.forEach(o=>{delete s[o.id]}),s})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const s=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),a={...n};return e.getRowModel().rows.forEach(o=>{Uf(a,o.id,s,!0,e)}),a}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=en(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Oh(e,n):{rows:[],flatRows:[],rowsById:{}},tn(e.options,"debugTable")),e.getFilteredSelectedRowModel=en(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Oh(e,n):{rows:[],flatRows:[],rowsById:{}},tn(e.options,"debugTable")),e.getGroupedSelectedRowModel=en(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Oh(e,n):{rows:[],flatRows:[],rowsById:{}},tn(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let s=!!(t.length&&Object.keys(n).length);return s&&t.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=e.getState();let s=!!t.length;return s&&t.some(a=>!n[a.id])&&(s=!1),s},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,s)=>{const a=e.getIsSelected();t.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!a,e.getCanSelect()&&a===n)return o;const i={...o};return Uf(i,e.id,n,(l=s==null?void 0:s.selectChildren)!=null?l:!0,t),i})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return I_(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Gf(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Gf(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return s=>{var a;n&&e.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},Uf=(e,t,n,s,a)=>{var o;const l=a.getRow(t,!0);n?(l.getCanMultiSelect()||Object.keys(e).forEach(i=>delete e[i]),l.getCanSelect()&&(e[t]=!0)):delete e[t],s&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(i=>Uf(e,i.id,n,s,a))};function Oh(e,t){const n=e.getState().rowSelection,s=[],a={},o=function(l,i){return l.map(r=>{var d;const u=I_(r,n);if(u&&(s.push(r),a[r.id]=r),(d=r.subRows)!=null&&d.length&&(r={...r,subRows:o(r.subRows)}),u)return r}).filter(Boolean)};return{rows:o(t.rows),flatRows:s,rowsById:a}}function I_(e,t){var n;return(n=t[e.id])!=null?n:!1}function Gf(e,t,n){var s;if(!((s=e.subRows)!=null&&s.length))return!1;let a=!0,o=!1;return e.subRows.forEach(l=>{if(!(o&&!a)&&(l.getCanSelect()&&(I_(l,t)?o=!0:a=!1),l.subRows&&l.subRows.length)){const i=Gf(l,t);i==="all"?o=!0:(i==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}const Vf=/([0-9]+)/gm,Xie=(e,t,n)=>IS(ql(e.getValue(n)).toLowerCase(),ql(t.getValue(n)).toLowerCase()),qie=(e,t,n)=>IS(ql(e.getValue(n)),ql(t.getValue(n))),Zie=(e,t,n)=>C_(ql(e.getValue(n)).toLowerCase(),ql(t.getValue(n)).toLowerCase()),Qie=(e,t,n)=>C_(ql(e.getValue(n)),ql(t.getValue(n))),Jie=(e,t,n)=>{const s=e.getValue(n),a=t.getValue(n);return s>a?1:s<a?-1:0},ere=(e,t,n)=>C_(e.getValue(n),t.getValue(n));function C_(e,t){return e===t?0:e>t?1:-1}function ql(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function IS(e,t){const n=e.split(Vf).filter(Boolean),s=t.split(Vf).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),o=s.shift(),l=parseInt(a,10),i=parseInt(o,10),r=[l,i].sort();if(isNaN(r[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>i)return 1;if(i>l)return-1}return n.length-s.length}const Jr={alphanumeric:Xie,alphanumericCaseSensitive:qie,text:Zie,textCaseSensitive:Qie,datetime:Jie,basic:ere},tre={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Ua("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const o=a==null?void 0:a.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return Jr.datetime;if(typeof o=="string"&&(s=!0,o.split(Vf).length>1))return Jr.alphanumeric}return s?Jr.text:Jr.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,s;if(!e)throw new Error;return Rp(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(s=t.options.sortingFns)==null?void 0:s[e.columnDef.sortingFn])!=null?n:Jr[e.columnDef.sortingFn]},e.toggleSorting=(n,s)=>{const a=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(l=>{const i=l==null?void 0:l.find(_=>_.id===e.id),r=l==null?void 0:l.findIndex(_=>_.id===e.id);let d=[],u,m=o?n:a==="desc";if(l!=null&&l.length&&e.getCanMultiSort()&&s?i?u="toggle":u="add":l!=null&&l.length&&r!==l.length-1?u="replace":i?u="toggle":u="replace",u==="toggle"&&(o||a||(u="remove")),u==="add"){var h;d=[...l,{id:e.id,desc:m}],d.splice(0,d.length-((h=t.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?d=l.map(_=>_.id===e.id?{..._,desc:m}:_):u==="remove"?d=l.filter(_=>_.id!==e.id):d=[{id:e.id,desc:m}];return d})},e.getFirstSortDir=()=>{var n,s;return((n=(s=e.columnDef.sortDescFirst)!=null?s:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var s,a;const o=e.getFirstSortDir(),l=e.getIsSorted();return l?l!==o&&((s=t.options.enableSortingRemoval)==null||s)&&(!(n&&(a=t.options.enableMultiRemove)!=null)||a)?!1:l==="desc"?"asc":"desc":o},e.getCanSort=()=>{var n,s;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((s=t.options.enableSorting)!=null?s:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,s;return(n=(s=e.columnDef.enableMultiSort)!=null?s:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const s=(n=t.getState().sorting)==null?void 0:n.find(a=>a.id===e.id);return s?s.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,s;return(n=(s=t.getState().sorting)==null?void 0:s.findIndex(a=>a.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return s=>{n&&(s.persist==null||s.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(s):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,s;e.setSorting(t?[]:(n=(s=e.initialState)==null?void 0:s.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},nre=[yie,Vie,Bie,Fie,Iie,Cie,Hie,Wie,tre,Die,Kie,zie,jie,Yie,Uie];function sre(e){var t,n;const s=[...nre,...(t=e._features)!=null?t:[]];let a={_features:s};const o=a._features.reduce((h,_)=>Object.assign(h,_.getDefaultOptions==null?void 0:_.getDefaultOptions(a)),{}),l=h=>a.options.mergeOptions?a.options.mergeOptions(o,h):{...o,...h};let r={...{},...(n=e.initialState)!=null?n:{}};a._features.forEach(h=>{var _;r=(_=h.getInitialState==null?void 0:h.getInitialState(r))!=null?_:r});const d=[];let u=!1;const m={_features:s,options:{...o,...e},initialState:r,_queue:h=>{d.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();u=!1}).catch(_=>setTimeout(()=>{throw _})))},reset:()=>{a.setState(a.initialState)},setOptions:h=>{const _=Fl(h,a.options);a.options=l(_)},getState:()=>a.options.state,setState:h=>{a.options.onStateChange==null||a.options.onStateChange(h)},_getRowId:(h,_,g)=>{var T;return(T=a.options.getRowId==null?void 0:a.options.getRowId(h,_,g))!=null?T:`${g?[g.id,_].join("."):_}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(h,_)=>{let g=(_?a.getPrePaginationRowModel():a.getRowModel()).rowsById[h];if(!g&&(g=a.getCoreRowModel().rowsById[h],!g))throw new Error;return g},_getDefaultColumnDef:en(()=>[a.options.defaultColumn],h=>{var _;return h=(_=h)!=null?_:{},{header:g=>{const T=g.header.column.columnDef;return T.accessorKey?T.accessorKey:T.accessorFn?T.id:null},cell:g=>{var T,S;return(T=(S=g.renderValue())==null||S.toString==null?void 0:S.toString())!=null?T:null},...a._features.reduce((g,T)=>Object.assign(g,T.getDefaultColumnDef==null?void 0:T.getDefaultColumnDef()),{}),...h}},tn(e,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:en(()=>[a._getColumnDefs()],h=>{const _=function(g,T,S){return S===void 0&&(S=0),g.map(b=>{const A=Aie(a,b,S,T),y=b;return A.columns=y.columns?_(y.columns,A,S+1):[],A})};return _(h)},tn(e,"debugColumns")),getAllFlatColumns:en(()=>[a.getAllColumns()],h=>h.flatMap(_=>_.getFlatColumns()),tn(e,"debugColumns")),_getAllFlatColumnsById:en(()=>[a.getAllFlatColumns()],h=>h.reduce((_,g)=>(_[g.id]=g,_),{}),tn(e,"debugColumns")),getAllLeafColumns:en(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(h,_)=>{let g=h.flatMap(T=>T.getLeafColumns());return _(g)},tn(e,"debugColumns")),getColumn:h=>a._getAllFlatColumnsById()[h]};Object.assign(a,m);for(let h=0;h<a._features.length;h++){const _=a._features[h];_==null||_.createTable==null||_.createTable(a)}return a}function $p(){return e=>en(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,o,l){o===void 0&&(o=0);const i=[];for(let d=0;d<a.length;d++){const u=Sie(e,e._getRowId(a[d],d,l),a[d],d,o,void 0,l==null?void 0:l.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,i.push(u),e.options.getSubRows){var r;u.originalSubRows=e.options.getSubRows(a[d],d),(r=u.originalSubRows)!=null&&r.length&&(u.subRows=s(u.originalSubRows,o+1,u))}}return i};return n.rows=s(t),n},tn(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function are(e){const t=[],n=s=>{var a;t.push(s),(a=s.subRows)!=null&&a.length&&s.getIsExpanded()&&s.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function CS(e){return t=>en(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,s)=>{if(!s.rows.length)return s;const{pageSize:a,pageIndex:o}=n;let{rows:l,flatRows:i,rowsById:r}=s;const d=a*o,u=d+a;l=l.slice(d,u);let m;t.options.paginateExpandedRows?m={rows:l,flatRows:i,rowsById:r}:m=are({rows:l,flatRows:i,rowsById:r}),m.flatRows=[];const h=_=>{m.flatRows.push(_),_.subRows.length&&_.subRows.forEach(h)};return m.rows.forEach(h),m},tn(t.options,"debugTable"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Gd(){return!0}const ore=Symbol("merge-proxy"),lre={get(e,t,n){return t===ore?n:e.get(t)},has(e,t){return e.has(t)},set:Gd,deleteProperty:Gd,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Gd,deleteProperty:Gd}},ownKeys(e){return e.keys()}};function wh(e){return"value"in e?e.value:e}function hc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Proxy({get(s){for(let a=t.length-1;a>=0;a--){const o=wh(t[a])[s];if(o!==void 0)return o}},has(s){for(let a=t.length-1;a>=0;a--)if(s in wh(t[a]))return!0;return!1},keys(){const s=[];for(let a=0;a<t.length;a++)s.push(...Object.keys(wh(t[a])));return[...Array.from(new Set(s))]}},lre)}const S0=el({props:["render","props"],setup:e=>()=>typeof e.render=="function"||typeof e.render=="object"?Wn(e.render,e.props):e.render});function I0(e){return hc(e,{data:I(e.data)})}function Mp(e){const t=Xu(e.data),n=hc({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(o,l){return t?{...o,...l}:hc(o,l)}},t?I0(e):e),s=sre(n);if(t){const o=Zu(e.data);ot(o,()=>{s.setState(l=>({...l,data:o.value}))},{immediate:!0})}const a=F(s.initialState);return va(()=>{s.setOptions(o=>{var l;const i=new Proxy({},{get:(r,d)=>a.value[d]});return hc(o,t?I0(e):e,{state:hc(i,(l=e.state)!=null?l:{}),onStateChange:r=>{r instanceof Function?a.value=r(a.value):a.value=r,e.onStateChange==null||e.onStateChange(r)}})})}),s}const ire={__name:"SortButton",props:{header:{type:Object,required:!0}},setup(e){const t={default:"i-lucide-chevrons-up-down",asc:"i-lucide-chevron-up",desc:"i-lucide-chevron-down"};return(n,s)=>(p(),f("span",{class:re(t[e.header.column.getIsSorted()||"default"])},null,2))}},rre={class:"sticky top-0 z-10 bg-n-slate-1"},cre=["onClick"],dre={key:0,class:"flex place-items-center gap-1"},ure={class:"divide-y divide-n-slate-2"},kp={__name:"Table",props:{table:{type:Object,required:!0},fixed:{type:Boolean,default:!1},type:{type:String,default:"relaxed"}},setup(e){const t=e,n=C(()=>t.type==="relaxed"),s=C(()=>n.value?"ltr:first:rounded-bl-lg ltr:first:rounded-tl-lg ltr:last:rounded-br-lg ltr:last:rounded-tr-lg rtl:first:rounded-br-lg rtl:first:rounded-tr-lg rtl:last:rounded-bl-lg rtl:last:rounded-tl-lg":"");return(a,o)=>(p(),f("table",{class:re({"table-fixed":e.fixed})},[c("thead",rre,[(p(!0),f(fe,null,Ae(e.table.getHeaderGroups(),l=>(p(),f("tr",{key:l.id,class:"rounded-xl"},[(p(!0),f(fe,null,Ae(l.headers,i=>(p(),f("th",{key:i.id,style:Ct({width:`${i.getSize()}px`}),class:re(["text-left py-3 px-5 font-medium text-sm text-n-slate-12",s.value]),onClick:r=>i.column.getCanSort()&&i.column.toggleSorting()},[i.isPlaceholder?O("",!0):(p(),f("div",dre,[v(I(S0),{render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"]),i.column.getCanSort()?(p(),V(ire,{key:0,header:i},null,8,["header"])):O("",!0)]))],14,cre))),128))]))),128))]),c("tbody",ure,[(p(!0),f(fe,null,Ae(e.table.getRowModel().rows,l=>(p(),f("tr",{key:l.id},[(p(!0),f(fe,null,Ae(l.getVisibleCells(),i=>(p(),f("td",{key:i.id,class:re(n.value?"py-4 px-5":"py-2 px-5")},[v(I(S0),{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])],2))),128))]))),128))])],2))}},pre={__name:"SummaryReportLink",props:{row:{type:Object,required:!0}},setup(e){const t=e,n=C(()=>`${t.row.original.type}_reports_show`);return(s,a)=>{const o=z("router-link");return p(),V(o,{to:{name:n.value,params:{id:e.row.original.id}},class:"text-n-slate-12 hover:underline"},{default:K(()=>[Ee(E(e.row.original.name),1)]),_:1},8,["to"])}}},mre={class:"flex-1 overflow-auto px-2 py-2 mt-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},Lp={__name:"SummaryReports",props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},summaryKey:{type:String,default:""},fetchItemsKey:{type:String,required:!0}},setup(e,{expose:t}){const n=e,s=yt(),a=F(0),o=F(0),l=F(!1),i=ke([n.getterKey])||[],r=ke([n.summaryKey])||[],d=$=>r.value.find(N=>N.id===Number($))||{},u=wp(),{t:m}=Pe(),h=$=>Wn("span",{class:$.getValue()?"":"text-n-slate-12"},$.getValue()),_=C(()=>[u.accessor("name",{header:m(`SUMMARY_REPORTS.${n.type.toUpperCase()}`),width:300,cell:$=>Wn(pre,$)}),u.accessor("conversationsCount",{header:m("SUMMARY_REPORTS.CONVERSATIONS"),width:200,cell:h}),u.accessor("avgFirstResponseTime",{header:m("SUMMARY_REPORTS.AVG_FIRST_RESPONSE_TIME"),width:200,cell:h}),u.accessor("avgResolutionTime",{header:m("SUMMARY_REPORTS.AVG_RESOLUTION_TIME"),width:200,cell:h}),u.accessor("avgReplyTime",{header:m("SUMMARY_REPORTS.AVG_REPLY_TIME"),width:200,cell:h}),u.accessor("resolutionsCount",{header:m("SUMMARY_REPORTS.RESOLUTION_COUNT"),width:200,cell:h})]),g=$=>$?rg($):"--",T=$=>$?$.toLocaleString():"--",S=C(()=>i.value.map($=>{const N=d($.id),{conversationsCount:w,avgFirstResponseTime:D,avgResolutionTime:H,avgReplyTime:B,resolvedConversationsCount:k}=N;return{id:$.id,name:$.name??$.title,type:n.type,conversationsCount:T(w),avgFirstResponseTime:g(D),avgReplyTime:g(B),avgResolutionTime:g(H),resolutionsCount:T(k)}})),b=()=>{s.dispatch(n.fetchItemsKey),s.dispatch(n.actionKey,{since:a.value,until:o.value,businessHours:l.value})};pt(()=>b());const A=$=>{a.value=$.from,o.value=$.to,l.value=$.businessHours,b()},y=Mp({get data(){return S.value},get columns(){return _.value},enableSorting:!1,getCoreRowModel:$p()});return t({downloadReports:()=>{const $={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if($[n.type]){const N=Cr({type:n.type,to:o.value,businessHours:l.value}),w={from:a.value,to:o.value,fileName:N,businessHours:l.value};s.dispatch($[n.type],w)}}}),($,N)=>(p(),f(fe,null,[v(cd,{onFilterChange:A}),c("div",mre,[v(kp,{table:I(y)},null,8,["table"])])],64))}},hre={__name:"AgentReportsIndex",setup(e){const t=F(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),f(fe,null,[v(No,{"header-title":s.$t("AGENT_REPORTS.HEADER"),"header-description":s.$t("AGENT_REPORTS.DESCRIPTION")},{default:K(()=>[v(ce,{label:s.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(Lp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchAgentSummaryReports","getter-key":"agents/getAgents","fetch-items-key":"agents/get","summary-key":"summaryReports/getAgentSummaryReports",type:"agent"},null,512)],64))}},fre={__name:"InboxReportsIndex",setup(e){const t=F(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),f(fe,null,[v(No,{"header-title":s.$t("INBOX_REPORTS.HEADER"),"header-description":s.$t("INBOX_REPORTS.DESCRIPTION")},{default:K(()=>[v(ce,{label:s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(Lp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchInboxSummaryReports","getter-key":"inboxes/getInboxes","fetch-items-key":"inboxes/get","summary-key":"summaryReports/getInboxSummaryReports",type:"inbox"},null,512)],64))}},gre={__name:"TeamReportsIndex",setup(e){const t=F(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),f(fe,null,[v(No,{"header-title":s.$t("TEAM_REPORTS.HEADER"),"header-description":s.$t("TEAM_REPORTS.DESCRIPTION")},{default:K(()=>[v(ce,{label:s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(Lp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchTeamSummaryReports","getter-key":"teams/getTeams","fetch-items-key":"teams/get","summary-key":"summaryReports/getTeamSummaryReports",type:"team"},null,512)],64))}},_re={__name:"LabelReportsIndex",setup(e){const t=F(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),f(fe,null,[v(No,{"header-title":s.$t("LABEL_REPORTS.HEADER"),"header-description":s.$t("LABEL_REPORTS.DESCRIPTION")},{default:K(()=>[v(ce,{label:s.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),v(Lp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchLabelSummaryReports","getter-key":"labels/getLabels","fetch-items-key":"labels/get","summary-key":"summaryReports/getLabelSummaryReports",type:"label"},null,512)],64))}},vre=5,bre={components:{WootDateRangePicker:hS,Avatar:Ft,ToggleSwitch:so},props:{currentFilter:{type:Object,default:()=>null},filterItemsList:{type:Array,default:()=>[]},groupByFilterItemsList:{type:Array,default:()=>[]},type:{type:String,default:"agent"},selectedGroupByFilter:{type:Object,default:()=>{}}},emits:["businessHoursToggle","dateRangeChange","filterChange","groupByFilterChange"],data(){return{currentSelectedFilter:this.currentFilter||null,currentDateRangeSelection:{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},customDateRange:[new Date,new Date],currentSelectedGroupByFilter:null,businessHoursSelected:!1}},computed:{dateRange(){return[{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},{id:1,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS")},{id:2,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS")},{id:3,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS")},{id:4,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_YEAR")},{id:5,name:this.$t("REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE")}]},isDateRangeSelected(){return this.currentDateRangeSelection.id===vre},to(){return this.isDateRangeSelected?this.toCustomDate(this.customDateRange[1]):this.toCustomDate(new Date)},from(){if(this.isDateRangeSelected)return this.fromCustomDate(this.customDateRange[0]);const t={0:6,1:29,2:89,3:179,4:364}[this.currentDateRangeSelection.id],n=pl(new Date,t);return this.fromCustomDate(n)},multiselectLabel(){return{agent:this.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"),label:this.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),inbox:this.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),team:this.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")}[this.type]||this.$t("FORMS.MULTISELECT.SELECT_ONE")},groupBy(){return this.isDateRangeSelected?Gs[4].period:{0:Gs[1].period,1:Gs[2].period,2:Gs[3].period,3:Gs[3].period,4:Gs[4].period}[this.currentDateRangeSelection.id]},notLast7Days(){return this.groupBy!==Gs[1].period}},watch:{filterItemsList(e){this.currentSelectedFilter=this.currentFilter?this.currentFilter:e[0],this.changeFilterSelection()},groupByFilterItemsList(){this.currentSelectedGroupByFilter=this.selectedGroupByFilter}},mounted(){this.onDateRangeChange()},methods:{onDateRangeChange(){this.$emit("dateRangeChange",{from:this.from,to:this.to,groupBy:this.groupBy})},onBusinessHoursToggle(){this.$emit("businessHoursToggle",this.businessHoursSelected)},fromCustomDate(e){return Go(ga(e))},toCustomDate(e){return Go(Po(e))},changeDateSelection(e){this.currentDateRangeSelection=e,this.onDateRangeChange()},changeFilterSelection(){this.$emit("filterChange",this.currentSelectedFilter)},onChange(e){this.customDateRange=e,this.onDateRangeChange()},changeGroupByFilterSelection(){this.$emit("groupByFilterChange",this.currentSelectedGroupByFilter)}}},Ere={class:"grid grid-cols-1 md:grid-cols-3 gap-y-0.5 gap-x-2"},Tre={key:0,class:"multiselect-wrap--small"},Are={class:"mb-2 text-xs font-medium"},yre={class:"flex min-w-0 items-center gap-2"},Sre={class:"my-0 text-n-slate-12 truncate"},Ire={class:"flex items-center gap-2"},Cre={class:"my-0 text-n-slate-12"},xre={key:1,class:"multiselect-wrap--small"},Nre={class:"mb-2 text-xs font-medium"},Ore={class:"flex items-center min-w-0 gap-2"},wre={class:"my-0 text-n-slate-12 truncate"},Rre={class:"flex items-center min-w-0 gap-2"},$re={class:"my-0 text-n-slate-12 truncate"},Mre={key:2,class:"multiselect-wrap--small"},kre={class:"mb-2 text-xs font-medium"},Lre={class:"multiselect-wrap--small"},Dre={class:"mb-2 text-xs font-medium"},Pre={class:"flex items-center h-10 self-center order-5 md:order-2 md:justify-self-end"},Bre={class:"mr-2 text-sm whitespace-nowrap"},Fre={key:3,class:"order-3 md:order-4"},Ure={class:"mb-2 text-xs font-medium"},Gre={key:4,class:"multiselect-wrap--small order-4 md:order-5"},Vre={class:"mb-2 text-xs font-medium"};function Hre(e,t,n,s,a,o){const l=z("Avatar"),i=z("multiselect"),r=z("ToggleSwitch"),d=z("WootDateRangePicker");return p(),f("div",Ere,[n.type==="agent"?(p(),f("div",Tre,[c("p",Are,E(e.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL")),1),v(i,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":[t[0]||(t[0]=u=>a.currentSelectedFilter=u),o.changeFilterSelection],placeholder:o.multiselectLabel,label:"name","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:K(u=>[c("div",yre,[v(l,{src:u.option.thumbnail,status:u.option.availability_status,name:u.option.name,size:22,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"]),c("span",Sre,E(u.option.name),1)])]),options:K(u=>[c("div",Ire,[v(l,{src:u.option.thumbnail,status:u.option.availability_status,name:u.option.name,size:22,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"]),c("p",Cre,E(u.option.name),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):n.type==="label"?(p(),f("div",xre,[c("p",Nre,E(e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL")),1),v(i,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":[t[1]||(t[1]=u=>a.currentSelectedFilter=u),o.changeFilterSelection],placeholder:o.multiselectLabel,label:"title","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:K(u=>[c("div",Ore,[c("div",{style:Ct({backgroundColor:u.option.color}),class:"w-5 h-5 rounded-full"},null,4),c("span",wre,E(u.option.title),1)])]),option:K(u=>[c("div",Rre,[c("div",{style:Ct({backgroundColor:u.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-n-weak"},null,4),c("span",$re,E(u.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):(p(),f("div",Mre,[c("p",kre,[n.type==="inbox"?(p(),f(fe,{key:0},[Ee(E(e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):n.type==="team"?(p(),f(fe,{key:1},[Ee(E(e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):(p(),f(fe,{key:2},[Ee(E(e.$t("FORMS.MULTISELECT.SELECT_ONE")),1)],64))]),v(i,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":[t[2]||(t[2]=u=>a.currentSelectedFilter=u),o.changeFilterSelection],"track-by":"id",label:"name",placeholder:o.multiselectLabel,"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:n.filterItemsList,searchable:!1,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"])])),c("div",Lre,[c("p",Dre,E(e.$t("REPORT.DURATION_FILTER_LABEL")),1),v(i,{modelValue:a.currentDateRangeSelection,"onUpdate:modelValue":t[3]||(t[3]=u=>a.currentDateRangeSelection=u),"track-by":"name",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:o.dateRange,searchable:!1,"allow-empty":!1,onSelect:o.changeDateSelection},null,8,["modelValue","placeholder","select-label","options","onSelect"])]),c("div",Pre,[c("span",Bre,E(e.$t("REPORT.BUSINESS_HOURS")),1),c("span",null,[v(r,{modelValue:a.businessHoursSelected,"onUpdate:modelValue":t[4]||(t[4]=u=>a.businessHoursSelected=u),onChange:o.onBusinessHoursToggle},null,8,["modelValue","onChange"])])]),o.isDateRangeSelected?(p(),f("div",Fre,[c("p",Ure,E(e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER")),1),v(d,{"show-range":"",value:a.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),class:"auto-width",onChange:o.onChange},null,8,["value","confirm-text","placeholder","onChange"])])):O("",!0),o.notLast7Days?(p(),f("div",Gre,[c("p",Vre,E(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),v(i,{modelValue:a.currentSelectedGroupByFilter,"onUpdate:modelValue":[t[5]||(t[5]=u=>a.currentSelectedGroupByFilter=u),o.changeGroupByFilterSelection],"track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:n.groupByFilterItemsList,"allow-empty":!1,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])):O("",!0)])}const Wre=Fe(bre,[["render",Hre]]),ec={DAY:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"}],WEEK:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"}],MONTH:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"}],YEAR:[{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"},{id:4,groupByKey:"REPORT.GROUPING_OPTIONS.YEAR"}]},Kre={components:{ReportHeader:No,V4Button:ce,ReportFilters:Wre,ReportContainer:y_},props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},downloadButtonLabel:{type:String,default:"Download Reports"},reportTitle:{type:String,default:"Download Reports"},hasBackButton:{type:Boolean,default:!1},selectedItem:{type:Object,default:null}},data(){return{from:0,to:0,selectedFilter:this.selectedItem,groupBy:Gs[1],groupByfilterItemsList:ec.DAY.map(this.translateOptions),selectedGroupByFilter:null,businessHours:!1}},computed:{filterItemsList(){return this.$store.getters[this.getterKey]||[]},isAgentType(){return this.type==="agent"},reportKeys(){return{CONVERSATIONS:"conversations_count",...!this.isAgentType&&{INCOMING_MESSAGES:"incoming_messages_count"},OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"}}},mounted(){this.$store.dispatch(this.actionKey)},methods:{fetchAllData(){if(this.selectedFilter){const{from:e,to:t,groupBy:n,businessHours:s}=this;this.$store.dispatch("fetchAccountSummary",{from:e,to:t,type:this.type,id:this.selectedFilter.id,groupBy:n.period,businessHours:s}),this.fetchChartData()}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{const{from:t,to:n,groupBy:s,businessHours:a}=this;this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],from:t,to:n,type:this.type,id:this.selectedFilter.id,groupBy:s.period,businessHours:a})}catch{_e(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},downloadReports(){const{from:e,to:t,type:n,businessHours:s}=this,a={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(a[n]){const o=Cr({type:n,to:t,businessHours:s}),l={from:e,to:t,fileName:o,businessHours:s};this.$store.dispatch(a[n],l)}},onDateRangeChange({from:e,to:t,groupBy:n}){this.from!==0&&this.to!==0&&nn(Ai.FILTER_REPORT,{filterType:"date",reportType:this.type}),this.from=e,this.to=t,this.groupByfilterItemsList=this.fetchFilterItems(n);const s=this.groupByfilterItemsList.filter(a=>a.id===this.groupBy.id);s.length>0?this.selectedGroupByFilter=s[0]:(this.selectedGroupByFilter=this.groupByfilterItemsList[0],this.groupBy=Gs[this.selectedGroupByFilter.id]),this.fetchAllData()},onFilterChange(e){e&&(this.selectedFilter=e,this.fetchAllData())},onGroupByFilterChange(e){var t;this.groupBy=Gs[e.id],this.fetchAllData(),nn(Ai.FILTER_REPORT,{filterType:"groupBy",filterValue:(t=this.groupBy)==null?void 0:t.period,reportType:this.type})},fetchFilterItems(e){switch(e){case Gs[2].period:return ec.WEEK.map(this.translateOptions);case Gs[3].period:return ec.MONTH.map(this.translateOptions);case Gs[4].period:return ec.YEAR.map(this.translateOptions);default:return ec.DAY.map(this.translateOptions)}},translateOptions(e){return{id:e.id,groupBy:this.$t(e.groupByKey)}},onBusinessHoursToggle(e){this.businessHours=e,this.fetchAllData(),nn(Ai.FILTER_REPORT,{filterType:"businessHours",filterValue:e,reportType:this.type})}}};function zre(e,t,n,s,a,o){const l=z("V4Button"),i=z("ReportHeader"),r=z("ReportFilters"),d=z("ReportContainer");return p(),f(fe,null,[v(i,{"header-title":n.reportTitle,"has-back-button":n.hasBackButton},{default:K(()=>[v(l,{label:n.downloadButtonLabel,icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title","has-back-button"]),o.filterItemsList?(p(),V(r,{key:0,type:n.type,"filter-items-list":o.filterItemsList,"group-by-filter-items-list":a.groupByfilterItemsList,"selected-group-by-filter":a.selectedGroupByFilter,"current-filter":a.selectedFilter,onDateRangeChange:o.onDateRangeChange,onFilterChange:o.onFilterChange,onGroupByFilterChange:o.onGroupByFilterChange,onBusinessHoursToggle:o.onBusinessHoursToggle},null,8,["type","filter-items-list","group-by-filter-items-list","selected-group-by-filter","current-filter","onDateRangeChange","onFilterChange","onGroupByFilterChange","onBusinessHoursToggle"])):O("",!0),o.filterItemsList.length?(p(),V(d,{key:1,"group-by":a.groupBy,"report-keys":o.reportKeys},null,8,["group-by","report-keys"])):O("",!0)],64)}const ti=Fe(Kre,[["render",zre]]),jre={key:1,class:"w-full py-20"},Yre={__name:"AgentReportsShow",setup(e){const t=cn(),n=yt(),s=oa("agents/getAgentById",t.params.id);return pt(()=>n.dispatch("agents/get")),(a,o)=>I(s).id?(p(),V(ti,{key:I(s).id,type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","selected-item":I(s),"download-button-label":a.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),"report-title":a.$t("AGENT_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),f("div",jre,[v(qn,{class:"mx-auto"})]))}},Xre={key:1,class:"w-full py-20"},qre={__name:"InboxReportsShow",setup(e){const t=cn(),n=oa("inboxes/getInboxById",t.params.id);return(s,a)=>I(n).id?(p(),V(ti,{key:I(n).id,type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","selected-item":I(n),"download-button-label":s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":s.$t("INBOX_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),f("div",Xre,[v(qn,{class:"mx-auto"})]))}},Zre={key:1,class:"w-full py-20"},Qre={__name:"TeamReportsShow",setup(e){const t=cn(),n=oa("teams/getTeamById",t.params.id);return(s,a)=>I(n).id?(p(),V(ti,{key:I(n).id,type:"team","getter-key":"teams/getTeams","action-key":"teams/get","selected-item":I(n),"download-button-label":s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":s.$t("TEAM_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),f("div",Zre,[v(qn,{class:"mx-auto"})]))}},Jre={key:1,class:"w-full py-20"},ece={__name:"LabelReportsShow",setup(e){const t=cn(),n=yt(),s=oa("labels/getLabelById",t.params.id);return pt(()=>n.dispatch("labels/get")),(a,o)=>I(s).id?(p(),V(ti,{key:I(s).id,type:"label","getter-key":"labels/getLabels","action-key":"labels/get","selected-item":I(s),"download-button-label":a.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":a.$t("LABEL_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),f("div",Jre,[v(qn,{class:"mx-auto"})]))}},tce={__name:"AgentReports",setup(e){return(t,n)=>(p(),V(ti,{key:"agent-reports",type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","download-button-label":t.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),"report-title":t.$t("AGENT_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},nce={__name:"InboxReports",setup(e){return(t,n)=>(p(),V(ti,{key:"inbox-reports",type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","download-button-label":t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":t.$t("INBOX_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},sce={__name:"LabelReports",setup(e){return(t,n)=>(p(),V(ti,{key:"label-reports",type:"label","getter-key":"labels/getLabels","action-key":"labels/get","download-button-label":t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":t.$t("LABEL_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},ace={__name:"TeamReports",setup(e){return(t,n)=>(p(),V(ti,{key:"team-reports",type:"team","getter-key":"teams/getTeams","action-key":"teams/get","download-button-label":t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":t.$t("TEAM_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},oce={class:"flex items-center m-0 text-sm font-medium text-n-slate-11"},lce={"data-test-id":"reportMetricLabel"},ice={"data-test-id":"reportMetricValue",class:"mt-1 mb-0 text-2xl text-n-slate-12"},us={__name:"ReportMetricCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},infoText:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup(e){return(t,n)=>{const s=z("fluent-icon"),a=_t("tooltip");return p(),f("div",{"data-test-id":"reportMetricContainer",class:re({"grayscale pointer-events-none opacity-30":e.disabled})},[c("h3",oce,[c("span",lce,E(e.label),1),pe(v(s,{"data-test-id":"reportMetricInfo",size:"14",icon:"info",class:"text-n-slate-11 my-0 mx-1 mt-0.5"},null,512),[[a,e.infoText]])]),c("h4",ice,E(e.value),1)],2)}}},rce={components:{BarChart:cT,CsatMetricCard:us},props:{filters:{type:Object,required:!0}},data(){return{csatRatings:Ei}},computed:{...St({metrics:"csat/getMetrics",ratingPercentage:"csat/getRatingPercentage",satisfactionScore:"csat/getSatisfactionScore",responseRate:"csat/getResponseRate"}),ratingFilterEnabled(){return!!this.filters.rating},chartData(){const e=[...Ei].sort((t,n)=>n.value-t.value);return{labels:["Rating"],datasets:e.map(t=>({label:t.emoji,data:[this.ratingPercentage[t.value]],backgroundColor:t.color}))}},responseCount(){return this.metrics.totalResponseCount?this.metrics.totalResponseCount.toLocaleString():"--"},chartOptions(){return{indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,stacked:!0},y:{display:!1,stacked:!0}}}}},methods:{formatToPercent(e){return e?`${e}%`:"--"},ratingToEmoji(e){return Ei.find(t=>t.value===Number(e)).emoji}}},cce={class:"flex-col lg:flex-row flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-8 gap-4"},dce={key:0,ref:"csatBarChart",class:"w-full md:w-1/2 md:max-w-[50%] flex-1 rtl:[direction:initial]"},uce={class:"flex items-center m-0 text-xs font-medium md:text-sm text-n-slate-12"},pce={class:"flex flex-row-reverse justify-end"},mce={class:"my-0 mx-0.5"},hce={class:"mt-2 h-6"};function fce(e,t,n,s,a,o){const l=z("CsatMetricCard"),i=z("BarChart");return p(),f("div",cce,[v(l,{label:e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:o.responseCount,class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),v(l,{disabled:o.ratingFilterEnabled,label:e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.TOOLTIP"),value:o.ratingFilterEnabled?"--":o.formatToPercent(e.satisfactionScore),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["disabled","label","info-text","value"]),v(l,{label:e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.TOOLTIP"),value:o.formatToPercent(e.responseRate),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),e.metrics.totalResponseCount&&!o.ratingFilterEnabled?(p(),f("div",dce,[c("h3",uce,[c("div",pce,[(p(!0),f(fe,null,Ae(e.ratingPercentage,(r,d,u)=>(p(),f("div",{key:r+d+u,class:"ltr:pr-4 rtl:pl-4"},[c("span",mce,E(o.ratingToEmoji(d)),1),c("span",null,E(o.formatToPercent(r)),1)]))),128))])]),c("div",hce,[v(i,{collection:o.chartData,"chart-options":o.chartOptions},null,8,["collection","chart-options"])])],512)):O("",!0)])}const gce=Fe(rce,[["render",fce]]),_ce={class:"flex items-center justify-between"},vce={class:"flex flex-1 items-center gap-2 justify-between"},bce={class:"text-sm truncate text-n-slate-11 mb-0"},Ece={class:"flex items-center gap-2"},Tce={class:"isolate inline-flex items-center gap-1.5"},x_={__name:"Pagination",props:{table:{type:Object,required:!0},defaultPageSize:{type:Number,default:10},showPageSizeSelector:{type:Boolean,default:!1}},emits:["pageSizeChange"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=[{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:10})}`,value:10},{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:20})}`,value:20},{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:50})}`,value:50},{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:100})}`,value:100}],l=(g,T)=>{const S=new Intl.NumberFormat(navigator.language);return Array.from({length:T-g+1},(b,A)=>S.format(g+A))},i=C(()=>n.table.getState().pagination.pageIndex+1),r=C(()=>n.table.getPageCount()),d=C(()=>r.value<=3?l(1,r.value):i.value===1?l(1,3):i.value===r.value?l(r.value-2,r.value):l(i.value-1,i.value+1)),u=C(()=>n.table.getRowCount()),m=C(()=>{const{pagination:g}=n.table.getState();return g.pageIndex*g.pageSize+1}),h=C(()=>{const{pagination:g}=n.table.getState();return Math.min((g.pageIndex+1)*g.pageSize,u.value)}),_=C({get(){return n.table.getState().pagination.pageSize},set(g){n.table.setPageSize(Number(g)),s("pageSizeChange",Number(g))}});return pt(()=>{n.showPageSizeSelector&&n.defaultPageSize&&n.defaultPageSize!==10&&n.table.setPageSize(n.defaultPageSize)}),(g,T)=>(p(),f("div",_ce,[c("div",vce,[c("p",bce,E(g.$t("REPORT.PAGINATION.RESULTS",{start:m.value,end:h.value,total:u.value})),1),c("div",Ece,[e.showPageSizeSelector?(p(),V(cr,{key:0,modelValue:_.value,"onUpdate:modelValue":T[0]||(T[0]=S=>_.value=S),variant:"outline","hide-icon":"",class:"[&>button]:text-n-slate-11 [&>button]:hover:text-n-slate-12 [&>button]:h-6",options:o},null,8,["modelValue"])):O("",!0),c("nav",Tce,[v(ce,{icon:"i-lucide-chevrons-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:T[1]||(T[1]=S=>e.table.setPageIndex(0))},null,8,["disabled"]),v(ce,{icon:"i-lucide-chevron-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:T[2]||(T[2]=S=>e.table.previousPage())},null,8,["disabled"]),(p(!0),f(fe,null,Ae(d.value,S=>(p(),V(ce,{key:S,xs:"",outline:"",color:S==i.value?"blue":"slate",class:"!h-6 min-w-6",onClick:b=>e.table.setPageIndex(S-1)},{default:K(()=>[c("span",{class:re(["text-center",{"text-n-brand":S==i.value}])},E(S),3)]),_:2},1032,["color","onClick"]))),128)),v(ce,{icon:"i-lucide-chevron-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:T[3]||(T[3]=S=>e.table.nextPage())},null,8,["disabled"]),v(ce,{icon:"i-lucide-chevrons-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:T[4]||(T[4]=S=>e.table.setPageIndex(e.table.getPageCount()-1))},null,8,["disabled"])])])])]))}},Ace={class:"flex items-center gap-1.5 text-left"},Hf={__name:"UserAvatarWithName",props:{user:{type:Object,default:()=>({})},size:{type:Number,default:20},textClass:{type:String,default:"text-sm text-n-slate-12"}},setup(e){return(t,n)=>(p(),f("div",Ace,[v(Ft,{src:e.user.thumbnail,size:e.size,name:e.user.name,status:e.user.availability_status,"hide-offline-status":"","rounded-full":""},null,8,["src","size","name","status"]),c("span",{class:re(["my-0 truncate text-capitalize",e.textClass])},E(e.user.name),3)]))}},yce={class:"text-right"},Sce={class:"text-n-slate-11 text-sm"},Ice={__name:"ConversationCell",props:{row:{type:Object,required:!0}},setup(e){const t=C(()=>({name:"inbox_conversation",params:{conversation_id:e.row.original.conversationId}}));return(n,s)=>{const a=z("router-link"),o=_t("tooltip");return p(),f("div",yce,[v(a,{to:t.value,class:"hover:underline"},{default:K(()=>[Ee(E(`#${e.row.original.conversationId}`),1)]),_:1},8,["to"]),pe((p(),f("div",Sce,[Ee(E(e.row.original.createdAgo),1)])),[[o,e.row.original.createdAt]])])}}},Cce={class:"shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},xce={key:0,class:"table-pagination"},Nce={__name:"CsatTable",props:{pageIndex:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=ke("csat/getCSATResponses"),o=ke("csat/getMetrics"),l=C(()=>a.value.map(h=>({contact:h.contact,assignedAgent:h.assigned_agent,rating:h.rating,feedbackText:h.feedback_message||"---",conversationId:h.conversation_id,createdAgo:Ds(h.created_at),createdAt:vu(h.created_at,"LLL d yyyy, h:mm a")}))),i=h=>{const _=h.getValue()||"---";return Wn("span",{class:"line-clamp-5 break-words max-w-full text-n-slate-12",title:_},_)},r=wp(),d=C(()=>[r.accessor("contact",{header:s("CSAT_REPORTS.TABLE.HEADER.CONTACT_NAME"),width:200,cell:h=>{const{contact:_}=h.row.original;return _?Wn(Hf,{user:_,class:"max-w-[200px] overflow-hidden"}):"--"}}),r.accessor("assignedAgent",{header:s("CSAT_REPORTS.TABLE.HEADER.AGENT_NAME"),width:200,cell:h=>{const{assignedAgent:_}=h.row.original;return _?Wn(Hf,{user:_,class:"max-w-[200px] overflow-hidden"}):"--"}}),r.accessor("rating",{header:s("CSAT_REPORTS.TABLE.HEADER.RATING"),align:"center",width:80,cell:h=>{const{rating:_}=h.row.original,[g={}]=Ei.filter(T=>T.value===_);return Wn("span",{class:g.emoji?"emoji-response text-lg":"text-n-slate-10"},g.emoji||"---")}}),r.accessor("feedbackText",{header:s("CSAT_REPORTS.TABLE.HEADER.FEEDBACK_TEXT"),width:400,cell:i}),r.accessor("conversationId",{header:"",width:100,cell:h=>Wn(Ice,h)})]),u=C(()=>({pageIndex:e.pageIndex,pageSize:25})),m=Mp({get data(){return l.value},get columns(){return d.value},manualPagination:!0,enableSorting:!1,getCoreRowModel:$p(),get rowCount(){return o.value.totalResponseCount},state:{get pagination(){return u.value}},onPaginationChange:h=>{const _=h(u.value);n("pageChange",_.pageIndex)}});return(h,_)=>(p(),f("div",Cce,[v(kp,{table:I(m),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),pe(c("div",{class:"h-48 flex items-center justify-center text-n-slate-12 text-sm"},E(h.$t("CSAT_REPORTS.NO_RECORDS")),513),[[pn,!l.value.length]]),I(o).totalResponseCount?(p(),f("div",xce,[v(x_,{class:"mt-2",table:I(m)},null,8,["table"])])):O("",!0)]))}},Oce={name:"CsatResponses",components:{CsatMetrics:gce,CsatTable:Nce,ReportFilterSelector:cd,ReportHeader:No,V4Button:ce},data(){return{pageIndex:0,from:0,to:0,userIds:[],inbox:null,team:null,rating:null}},computed:{...St({accountId:"getCurrentAccountId",isFeatureEnabledOnAccount:"accounts/isFeatureEnabledonAccount"}),requestPayload(){return{from:this.from,to:this.to,user_ids:this.userIds,inbox_id:this.inbox,team_id:this.team,rating:this.rating}},isTeamsEnabled(){return this.isFeatureEnabledOnAccount(this.accountId,Mt.TEAM_MANAGEMENT)}},methods:{getAllData(){try{this.$store.dispatch("csat/getMetrics",this.requestPayload),this.getResponses()}catch{_e(this.$t("REPORT.DATA_FETCHING_FAILED"))}},getResponses(){this.$store.dispatch("csat/get",{page:this.pageIndex+1,...this.requestPayload})},downloadReports(){const e="csat";try{this.$store.dispatch("csat/downloadCSATReports",{fileName:Cr({type:e,to:this.to}),...this.requestPayload})}catch{_e(this.$t("REPORT.CSAT_REPORTS.DOWNLOAD_FAILED"))}},onPageNumberChange(e){this.pageIndex=e,this.getResponses()},onFilterChange({from:e,to:t,selectedAgents:n,selectedInbox:s,selectedTeam:a,selectedRating:o}){this.from!==0&&this.to!==0&&nn(Ai.FILTER_REPORT,{filterType:"date",reportType:"csat"}),this.from=e,this.to=t,this.userIds=n.map(l=>l.id),this.inbox=s==null?void 0:s.id,this.team=a==null?void 0:a.id,this.rating=o==null?void 0:o.value,this.getAllData()}}},wce={class:"flex flex-col gap-4"};function Rce(e,t,n,s,a,o){const l=z("V4Button"),i=z("ReportHeader"),r=z("ReportFilterSelector"),d=z("CsatMetrics"),u=z("CsatTable");return p(),f(fe,null,[v(i,{"header-title":e.$t("CSAT_REPORTS.HEADER")},{default:K(()=>[v(l,{label:e.$t("CSAT_REPORTS.DOWNLOAD"),icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),c("div",wce,[v(r,{"show-agents-filter":"","show-inbox-filter":"","show-rating-filter":"","show-team-filter":o.isTeamsEnabled,"show-business-hours-switch":!1,onFilterChange:o.onFilterChange},null,8,["show-team-filter","onFilterChange"]),v(d,{filters:o.requestPayload},null,8,["filters"]),v(u,{"page-index":a.pageIndex,onPageChange:o.onPageNumberChange},null,8,["page-index","onPageChange"])])],64)}const $ce=Fe(Oce,[["render",Rce]]),Mce={class:"flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},kce={__name:"BotMetrics",props:{filters:{type:Object,required:!0}},setup(e){const t=e,n=F("0"),s=F("0"),a=F("0"),o=F("0"),l=r=>r?`${r}%`:"--",i=()=>{!t.filters.to||!t.filters.from||IN.getBotMetrics(t.filters).then(r=>{n.value=r.data.conversation_count.toLocaleString(),s.value=r.data.message_count.toLocaleString(),a.value=r.data.resolution_rate.toString(),o.value=r.data.handoff_rate.toString()})};return ot(()=>t.filters,i,{deep:!0}),pt(i),(r,d)=>(p(),f("div",Mce,[v(us,{label:r.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP"),value:n.value,class:"flex-1"},null,8,["label","info-text","value"]),v(us,{label:r.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:s.value,class:"flex-1"},null,8,["label","info-text","value"]),v(us,{label:r.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP"),value:l(a.value),class:"flex-1"},null,8,["label","info-text","value"]),v(us,{label:r.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP"),value:l(o.value),class:"flex-1"},null,8,["label","info-text","value"])]))}},Lce={name:"BotReports",components:{BotMetrics:kce,ReportHeader:No,ReportFilterSelector:cd,ReportContainer:y_},data(){return{from:0,to:0,groupBy:Gs[1],reportKeys:{BOT_RESOLUTION_COUNT:"bot_resolutions_count",BOT_HANDOFF_COUNT:"bot_handoffs_count"},businessHours:!1}},computed:{requestPayload(){return{from:this.from,to:this.to}}},methods:{fetchAllData(){this.fetchBotSummary(),this.fetchChartData()},fetchBotSummary(){try{this.$store.dispatch("fetchBotSummary",this.getRequestPayload())}catch{_e(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],...this.getRequestPayload()})}catch{_e(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),nn(Ai.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"bots"})}}},Dce={class:"flex flex-col gap-4"};function Pce(e,t,n,s,a,o){const l=z("ReportHeader"),i=z("ReportFilterSelector"),r=z("BotMetrics"),d=z("ReportContainer");return p(),f(fe,null,[v(l,{"header-title":e.$t("BOT_REPORTS.HEADER")},null,8,["header-title"]),c("div",Dce,[v(i,{"show-agents-filter":!1,"show-group-by-filter":"","show-business-hours-switch":!1,onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),v(r,{filters:o.requestPayload},null,8,["filters"]),v(d,{"account-summary-key":"getBotSummary","summary-fetching-key":"getBotSummaryFetchingStatus","group-by":a.groupBy,"report-keys":a.reportKeys},null,8,["group-by","report-keys"])])],64)}const Bce=Fe(Lce,[["render",Pce]]),Fce={class:"flex flex-col m-0.5 px-6 py-5 rounded-xl flex-grow text-n-slate-12 shadow outline-1 outline outline-n-container bg-n-solid-2 min-h-[10rem]"},Uce={class:"card-header grid w-full mb-6 grid-cols-[repeat(auto-fit,minmax(max-content,50%))] gap-y-2"},Gce={class:"flex items-center gap-2 flex-row"},Vce={class:"mb-0 text-n-slate-12 font-medium text-lg"},Hce={class:"flex flex-row items-center py-0.5 px-2 rounded bg-n-teal-3 text-xs"},Wce={class:"text-xs text-n-teal-11"},Kce={class:"flex flex-row items-center justify-end gap-2"},zce={key:0,class:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},jce={key:1,class:"items-center flex text-base justify-center px-12 py-6"},Yce={class:"text-n-slate-11"},Wc={__name:"MetricCard",props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",Fce,[c("div",Uce,[at(t.$slots,"header",{},()=>[c("div",Gce,[c("h5",Vce,E(e.header),1),c("span",Hce,[n[0]||(n[0]=c("span",{class:"bg-n-teal-9 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"},null,-1)),c("span",Wce,E(t.$t("OVERVIEW_REPORTS.LIVE")),1)])]),c("div",Kce,[at(t.$slots,"control")])])]),e.isLoading?e.isLoading?(p(),f("div",jce,[v(Zs),c("span",Yce,E(e.loadingMessage),1)])):O("",!0):(p(),f("div",zce,[at(t.$slots,"default")]))]))}},Xce={class:"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72"},qce={class:"grid gap-[5px] flex-shrink-0"},Zce={class:"grid gap-[5px] w-full min-w-[700px]"},Qce={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-n-slate-11"},Jce={class:"grid gap-[5px] flex-shrink-0"},ede={class:"font-normal text-n-slate-11"},tde={class:"grid gap-[5px] w-full min-w-[700px]"},nde={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-n-slate-12"},sde={__name:"Heatmap",props:{heatmapData:{type:Array,default:()=>[]},numberOfRows:{type:Number,default:7},isLoading:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Pe(),s=C(()=>CN(t.heatmapData)),a=C(()=>{const d=t.heatmapData.map(u=>u.value);return Wx(d,[.2,.4,.6,.8,.9,.99])});function o(d){return d?d===1?n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION",{count:d}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:d}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS")}function l(d){return ts(new Date(d),"MMM d, yyyy")}function i(d){const u=sL(d);return[n("DAYS_OF_WEEK.SUNDAY"),n("DAYS_OF_WEEK.MONDAY"),n("DAYS_OF_WEEK.TUESDAY"),n("DAYS_OF_WEEK.WEDNESDAY"),n("DAYS_OF_WEEK.THURSDAY"),n("DAYS_OF_WEEK.FRIDAY"),n("DAYS_OF_WEEK.SATURDAY")][u]}function r(d){if(!d)return"outline-n-container bg-n-slate-2 dark:bg-n-slate-5/50";let u=[...a.value,1/0].findIndex(h=>d<=h&&d>0);return u>6&&(u=5),u===0?"outline-n-container bg-n-slate-2 dark:bg-n-slate-5/50":["bg-n-blue-3 dark:outline-n-blue-4","bg-n-blue-5 dark:outline-n-blue-6","bg-n-blue-7 dark:outline-n-blue-8","bg-n-blue-8 dark:outline-n-blue-9","bg-n-blue-10 dark:outline-n-blue-8","bg-n-blue-11 dark:outline-n-blue-10"][u-1]}return(d,u)=>{const m=_t("tooltip");return p(),f("div",Xce,[e.isLoading?(p(),f(fe,{key:0},[c("div",qce,[(p(!0),f(fe,null,Ae(e.numberOfRows,h=>(p(),f("div",{key:h,class:"w-full rounded-sm bg-n-slate-3 dark:bg-n-slate-1 animate-loader-pulse h-8 min-w-[70px]"}))),128))]),c("div",Zce,[(p(!0),f(fe,null,Ae(e.numberOfRows,h=>(p(),f("div",{key:h,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(p(),f(fe,null,Ae(24,_=>c("div",{key:_,class:"w-full h-8 rounded-sm bg-n-slate-3 dark:bg-n-slate-1 animate-loader-pulse"})),64))]))),128))]),u[0]||(u[0]=c("div",null,null,-1)),c("div",Qce,[(p(),f(fe,null,Ae(24,h=>c("div",{key:h,class:"flex items-center justify-center"},E(h-1)+"  "+E(h),1)),64))])],64)):(p(),f(fe,{key:1},[c("div",Jce,[(p(!0),f(fe,null,Ae(s.value.keys(),h=>(p(),f("div",{key:h,class:"h-8 min-w-[70px] text-n-slate-12 text-[10px] font-semibold flex flex-col items-end justify-center"},[Ee(E(i(new Date(h)))+" ",1),c("time",ede,E(l(h)),1)]))),128))]),c("div",tde,[(p(!0),f(fe,null,Ae(s.value.keys(),h=>(p(),f("div",{key:h,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(p(!0),f(fe,null,Ae(s.value.get(h),_=>pe((p(),f("div",{key:_.timestamp,class:re(["h-8 rounded-sm shadow-inner dark:outline dark:outline-1",r(_.value)])},null,2)),[[m,o(_.value),void 0,{top:!0}]])),128))]))),128))]),u[1]||(u[1]=c("div",null,null,-1)),c("div",nde,[(p(),f(fe,null,Ae(24,h=>c("div",{key:h,class:"flex items-center justify-center"},E(h-1)+"  "+E(h),1)),64))])],64))])}}},Dp=(e,t=6e4)=>{const n=F(null),s=()=>{n.value=setTimeout(async()=>{await e(),s()},t)},a=()=>{n.value&&(clearTimeout(n.value),n.value=null)};return lo(()=>{a()}),{startRefetching:s,stopRefetching:a}},ade={class:"bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container absolute rounded-xl z-50 py-2 px-2 gap-2 flex flex-col min-w-[136px] shadow-lg"},ode={key:0,class:"relative"},lde=["placeholder"],ide=["disabled","onClick"],rde={key:1,class:"flex-shrink-0"},cde={key:1,class:"text-sm text-n-slate-11 px-2 py-1.5"},ua={__name:"DropdownMenu",props:{menuItems:{type:Array,required:!0,validator:e=>e.every(t=>t.action&&t.value&&t.label)},thumbnailSize:{type:Number,default:20},showSearch:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},isSearching:{type:Boolean,default:!1},labelClass:{type:String,default:""}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(null),l=F(""),i=C(()=>l.value?n.menuItems.filter(d=>d.label.toLowerCase().includes(l.value.toLowerCase())):n.menuItems),r=d=>{const{action:u,value:m,...h}=d;s("action",{action:u,value:m,...h})};return pt(()=>{o.value&&n.showSearch&&o.value.focus()}),(d,u)=>(p(),f("div",ade,[e.showSearch?(p(),f("div",ode,[u[1]||(u[1]=c("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),pe(c("input",{ref_key:"searchInput",ref:o,"onUpdate:modelValue":u[0]||(u[0]=m=>l.value=m),type:"search",placeholder:e.searchPlaceholder||I(a)("DROPDOWN_MENU.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-8 py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,lde),[[mt,l.value]])])):O("",!0),(p(!0),f(fe,null,Ae(i.value,(m,h)=>(p(),f("button",{key:h,type:"button",class:re(["inline-flex items-center justify-start w-full h-8 min-w-0 gap-2 px-2 py-1.5 transition-all duration-200 ease-in-out border-0 rounded-lg z-60 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2 disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50",{"bg-n-alpha-1 dark:bg-n-solid-active":m.isSelected,"text-n-ruby-11":m.action==="delete","text-n-slate-12":m.action!=="delete"}]),disabled:m.disabled,onClick:_=>r(m)},[at(d.$slots,"thumbnail",{item:m},()=>[m.thumbnail?(p(),V(Ft,{key:0,name:m.thumbnail.name,src:m.thumbnail.src,size:e.thumbnailSize,"rounded-full":""},null,8,["name","src","size"])):O("",!0)]),m.icon?(p(),V(Wt,{key:0,icon:m.icon,class:"flex-shrink-0 size-3.5"},null,8,["icon"])):O("",!0),m.emoji?(p(),f("span",rde,E(m.emoji),1)):O("",!0),m.label?(p(),f("span",{key:2,class:re(["min-w-0 text-sm truncate",e.labelClass])},E(m.label),3)):O("",!0)],10,ide))),128)),i.value.length===0?(p(),f("div",cde,E(e.isSearching?I(a)("DROPDOWN_MENU.SEARCHING"):I(a)("DROPDOWN_MENU.EMPTY_STATE")),1)):O("",!0)]))}},dde={class:"flex flex-row flex-wrap max-w-full"},ude={class:"relative flex items-center group"},pde={__name:"HeatmapContainer",setup(e){const t=yt(),n=ke("getOverviewUIFlags"),s=ke("getAccountConversationHeatmapData"),{t:a}=Pe(),o=[{label:a("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS"),value:6},{label:a("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS"),value:29}],l=F(6),i=C(()=>o.find(g=>g.value===l.value)),r=()=>{const g=Po(new Date);t.dispatch("downloadAccountConversationHeatmap",{daysBefore:l.value,to:Go(g)})},[d,u]=Xn(),m=()=>{if(n.value.isFetchingAccountConversationsHeatmap)return;let g=Po(new Date),T=ga(pl(g,Number(l.value)));t.dispatch("fetchAccountConversationHeatmap",{metric:"conversations_count",from:Go(T),to:Go(g),groupBy:"hour",businessHours:!1})},h=({value:g})=>{u(!1),l.value=g,m()},{startRefetching:_}=Dp(m);return pt(()=>{m(),_()}),(g,T)=>{const S=_t("on-clickaway");return p(),f("div",dde,[v(Wc,{header:g.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER")},{control:K(()=>[pe((p(),f("div",ude,[v(ce,{sm:"",slate:"",faded:"",label:i.value.label,class:"rounded-md group-hover:bg-n-alpha-2",onClick:T[0]||(T[0]=b=>I(u)())},null,8,["label"]),I(d)?(p(),V(ua,{key:0,"menu-items":o,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:T[1]||(T[1]=b=>h(b))})):O("",!0)])),[[S,()=>I(u)(!1)]]),v(ce,{sm:"",slate:"",faded:"",label:I(a)("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.DOWNLOAD_REPORT"),class:"rounded-md group-hover:bg-n-alpha-2",onClick:r},null,8,["label"])]),default:K(()=>[v(sde,{"heatmap-data":I(s),"number-of-rows":l.value+1,"is-loading":I(n).isFetchingAccountConversationsHeatmap},null,8,["heatmap-data","number-of-rows","is-loading"])]),_:1},8,["header"])])}}},mde={key:1,class:"text-n-slate-10"},hde={__name:"BaseCell",props:{content:{type:String,default:""}},setup(e){const t=ke("accounts/isRTL");return(n,s)=>(p(),f("div",{class:re(["overflow-hidden whitespace-nowrap text-ellipsis",{"text-right":I(t)}])},[n.$slots.default||e.content?at(n.$slots,"default",{key:0},()=>[e.content?(p(),f(fe,{key:0},[Ee(E(e.content),1)],64)):O("",!0)]):(p(),f("span",mde," --- "))],2))}},fde={class:"items-start flex flex-col min-w-0 my-0 mx-2"},gde={class:"overflow-hidden text-sm m-0 leading-[1.2] text-n-slate-12 whitespace-nowrap text-ellipsis"},_de={class:"text-xs text-n-slate-11"},vde={__name:"AgentCell",props:{row:{type:Object,required:!0}},setup(e){const t=ke("accounts/isRTL");return(n,s)=>(p(),V(hde,null,{default:K(()=>[c("div",{class:re(["items-center flex text-left",{"flex-row-reverse":I(t)}])},[v(Ft,{src:e.row.original.thumbnail,name:e.row.original.agent,status:e.row.original.status,size:32,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),c("div",fde,[c("h6",gde,E(e.row.original.agent),1),c("span",_de,E(e.row.original.email),1)])],2)]),_:1}))}},bde={class:"flex flex-col flex-1"},Ede={key:0,class:"items-center flex text-base justify-center p-8"},C0="report_overview_agent_table_page_size",Tde={__name:"AgentTable",props:{agents:{type:Array,default:()=>[]},agentMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=Pe(),{uiSettings:n,updateUISettings:s}=Sn(),a=()=>n.value[C0]||10,o=h=>{s({[C0]:h})},l=h=>e.agentMetrics.find(_=>_.assignee_id===Number(h))||{},i=C(()=>e.agents.map(h=>{const _=l(h.id);return{agent:h.available_name||h.name,email:h.email,thumbnail:h.thumbnail,open:_.open||0,unattended:_.unattended||0,status:h.availability_status}}).sort((h,_)=>{const g=_.open-h.open;return g===0?h.agent.localeCompare(_.agent):g})),r=h=>Wn("span",{class:h.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},h.getValue()?h.getValue():"---"),d=wp(),u=[d.accessor("agent",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),cell:h=>Wn(vde,h),size:250}),d.accessor("open",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:r,size:100}),d.accessor("unattended",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:r,size:100})],m=Mp({get data(){return i.value},columns:u,enableSorting:!1,getCoreRowModel:$p(),getPaginationRowModel:CS(),initialState:{pagination:{pageSize:a()}}});return(h,_)=>(p(),f("div",bde,[v(kp,{table:I(m),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),v(x_,{class:"mt-2",table:I(m),"show-page-size-selector":"","default-page-size":a(),onPageSizeChange:o},null,8,["table","default-page-size"]),e.isLoading?(p(),f("div",Ede,[v(Zs),c("span",null,E(h.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.agents.length?(p(),V(Lr,{key:1,title:h.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")},null,8,["title"])):O("",!0)]))}},Ade={class:"flex flex-row flex-wrap max-w-full"},yde={__name:"AgentLiveReportContainer",setup(e){const t=yt(),n=ke("getOverviewUIFlags"),s=ke("getAgentConversationMetric"),a=ke("agents/getAgents"),o=()=>t.dispatch("fetchAgentConversationMetric"),{startRefetching:l}=Dp(o);return pt(()=>{t.dispatch("agents/get"),o(),l()}),(i,r)=>(p(),f("div",Ade,[v(Wc,{header:i.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")},{default:K(()=>[v(Tde,{agents:I(a),"agent-metrics":I(s),"is-loading":I(n).isFetchingAgentConversationMetric},null,8,["agents","agent-metrics","is-loading"])]),_:1},8,["header"])]))}},Sde={class:"flex flex-col flex-1"},Ide={key:0,class:"items-center flex text-base justify-center p-8"},x0="report_overview_team_table_page_size",Cde={__name:"TeamTable",props:{teams:{type:Array,default:()=>[]},teamMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=Pe(),{uiSettings:n,updateUISettings:s}=Sn(),a=()=>n.value[x0]||10,o=h=>{s({[x0]:h})},l=h=>e.teamMetrics.find(_=>_.team_id===Number(h))||{},i=C(()=>e.teams.map(h=>{const _=l(h.id);return{agent:h.name,open:_.open||0,unattended:_.unattended||0}}).sort((h,_)=>{const g=_.open-h.open;return g===0?h.agent.localeCompare(_.agent):g})),r=h=>Wn("span",{class:h.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},h.getValue()?h.getValue():"---"),d=wp(),u=[d.accessor("agent",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.TEAM"),cell:r,size:250}),d.accessor("open",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:r,size:100}),d.accessor("unattended",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:r,size:100})],m=Mp({get data(){return i.value},columns:u,enableSorting:!1,getCoreRowModel:$p(),getPaginationRowModel:CS(),initialState:{pagination:{pageSize:a()}}});return(h,_)=>(p(),f("div",Sde,[v(kp,{table:I(m),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),v(x_,{class:"mt-2",table:I(m),"show-page-size-selector":"","default-page-size":a(),onPageSizeChange:o},null,8,["table","default-page-size"]),e.isLoading?(p(),f("div",Ide,[v(Zs),c("span",null,E(h.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.teams.length?(p(),V(Lr,{key:1,title:h.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.NO_TEAMS")},null,8,["title"])):O("",!0)]))}},xde={class:"flex flex-row flex-wrap max-w-full"},Nde={__name:"TeamLiveReportContainer",setup(e){const t=yt(),n=ke("getOverviewUIFlags"),s=ke("getTeamConversationMetric"),a=ke("teams/getTeams"),o=()=>t.dispatch("fetchTeamConversationMetric"),{startRefetching:l}=Dp(o);return pt(()=>{t.dispatch("teams/get"),o(),l()}),(i,r)=>(p(),f("div",xde,[v(Wc,{header:i.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.HEADER")},{default:K(()=>[v(Cde,{teams:I(a),"team-metrics":I(s),"is-loading":I(n).isFetchingTeamConversationMetric},null,8,["teams","team-metrics","is-loading"])]),_:1},8,["header"])]))}},Ode={class:"flex flex-col items-center md:flex-row gap-4"},wde={class:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},Rde={class:"relative flex items-center group z-50"},$de={class:"text-base text-n-slate-11"},Mde={class:"text-n-slate-12 text-3xl mb-0 mt-1"},kde={class:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},Lde={class:"text-base text-n-slate-11"},Dde={class:"text-n-slate-12 text-3xl mb-0 mt-1"},Rh="OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS",Pde={__name:"StatsLiveReportsContainer",setup(e){const{t}=Pe(),n=ke("getOverviewUIFlags"),s=ke("agents/getAgentStatus"),a=ke("getAccountConversationMetric"),o=yt(),l=ke("teams/getTeams"),i=C(()=>[{label:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.ALL_TEAMS"),value:null},...l.value.map(b=>({label:b.name,value:b.id}))]),r=C(()=>{let b={};return Object.keys(s.value).forEach(A=>{const y=t(`OVERVIEW_REPORTS.AGENT_STATUS.${T0[A]}`);b[y]=s.value[A]}),b}),d=C(()=>{let b={};return Object.keys(a.value).forEach(A=>{const y=t(`${Rh}.${T0[A]}`);b[y]=a.value[A]}),b}),u=F(null),m=C(()=>(i.value.find(A=>A.value===u.value)||{}).label),h=()=>{const b={};u.value&&(b.team_id=u.value),o.dispatch("fetchAccountConversationMetric",b)},{startRefetching:_}=Dp(h),[g,T]=Xn(),S=({value:b})=>{T(!1),u.value=b,h()};return pt(()=>{h(),_()}),(b,A)=>{const y=_t("on-clickaway");return p(),f("div",Ode,[c("div",wde,[v(Wc,{header:I(t)(`${Rh}.HEADER`),"is-loading":I(n).isFetchingAccountConversationMetric,"loading-message":I(t)(`${Rh}.LOADING_MESSAGE`)},Yo({default:K(()=>[(p(!0),f(fe,null,Ae(d.value,(x,$,N)=>(p(),f("div",{key:N,class:"flex-1 min-w-0 pb-2"},[c("h3",$de,E($),1),c("p",Mde,E(x),1)]))),128))]),_:2},[I(l).length?{name:"control",fn:K(()=>[pe((p(),f("div",Rde,[v(ce,{sm:"",slate:"",faded:"",label:m.value,class:"capitalize rounded-md group-hover:bg-n-alpha-2",onClick:A[0]||(A[0]=x=>I(T)())},null,8,["label"]),I(g)?(p(),V(ua,{key:0,"menu-items":i.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full","label-class":"capitalize",onAction:A[1]||(A[1]=x=>S(x))},null,8,["menu-items"])):O("",!0)])),[[y,()=>I(T)(!1)]])]),key:"0"}:void 0]),1032,["header","is-loading","loading-message"])]),c("div",kde,[v(Wc,{header:b.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")},{default:K(()=>[(p(!0),f(fe,null,Ae(r.value,(x,$,N)=>(p(),f("div",{key:N,class:"flex-1 min-w-0 pb-2"},[c("h3",Lde,E($),1),c("p",Dde,E(x),1)]))),128))]),_:1},8,["header"])])])}}},Bde={class:"flex flex-col gap-4 pb-6"},Fde={__name:"LiveReports",setup(e){return(t,n)=>(p(),f(fe,null,[v(No,{"header-title":t.$t("OVERVIEW_REPORTS.HEADER")},null,8,["header-title"]),c("div",Bde,[v(Pde),v(pde),v(yde),v(Nde)])],64))}},Ude={props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},toolTip:{type:String,required:!0},isLoading:{type:Boolean,default:!1}}},Gde={class:"flex flex-col gap-2 items-start justify-center min-w-[10rem]"},Vde={class:"inline-flex items-center gap-1 text-sm font-medium text-n-slate-11"},Hde={key:0,class:"w-12 h-6 mb-0.5 rounded-md bg-n-slate-3 animate-pulse"},Wde={key:1,class:"text-2xl font-medium text-n-slate-12"};function Kde(e,t,n,s,a,o){const l=z("fluent-icon"),i=_t("tooltip");return p(),f("div",Gde,[c("span",Vde,[Ee(E(n.label)+" ",1),pe(v(l,{size:"14",icon:"information",type:"outline",class:"flex flex-shrink-0 text-sm font-normal sm:font-medium text-n-slate-10"},null,512),[[i,n.toolTip,void 0,{right:!0}]])]),n.isLoading?(p(),f("div",Hde)):(p(),f("span",Wde,E(n.value),1))])}const $h=Fe(Ude,[["render",Kde]]),zde={class:"flex sm:flex-row flex-col w-full gap-4 sm:gap-14 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},jde={__name:"SLAMetrics",props:{hitRate:{type:String,required:!0},noOfBreaches:{type:Number,required:!0},noOfConversations:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),f("div",zde,[v($h,{label:t.$t("SLA_REPORTS.METRICS.HIT_RATE.LABEL"),value:e.hitRate,"tool-tip":t.$t("SLA_REPORTS.METRICS.HIT_RATE.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[0]||(n[0]=c("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),v($h,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.LABEL"),value:e.noOfBreaches,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[1]||(n[1]=c("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),v($h,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.LABEL"),value:e.noOfConversations,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"])]))}},xS={__name:"TableHeaderCell",props:{span:{type:Number,required:!0},label:{type:String,required:!0}},setup(e){const t=e,n=C(()=>t.span===1?"col-span-1":t.span===2?"col-span-2":t.span===3?"col-span-3":t.span===4?"col-span-4":t.span===5?"col-span-5":t.span===6?"col-span-6":t.span===7?"col-span-7":t.span===8?"col-span-8":t.span===9?"col-span-9":t.span===10?"col-span-10":"col-span-1");return(s,a)=>(p(),f("div",{class:re(["flex items-center px-0 py-2 text-xs font-medium text-right uppercase text-n-slate-11 rtl:text-left",n.value])},[at(s.$slots,"default",{},()=>[Ee(E(e.label),1)])],2))}},Yde=["title"],NS={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0}},setup(e){const t=e,n=eg(),s=ke("labels/getLabels"),a=C(()=>s.value.filter(({title:m})=>t.conversationLabels.includes(m))),o=F(!1),l=F(!1),i=F(-1),r=F(null),d=()=>{const m=n.before?100:0;if(!r.value)return;const h=Array.from(r.value.querySelectorAll(".label"));let _=0;l.value=!1,h.forEach((g,T)=>{_+=g.offsetWidth+8,_<r.value.clientWidth-m?i.value=T:l.value=h.length>1})};ot(a,()=>{jt(()=>d())}),pt(()=>{d()});const u=m=>{m.stopPropagation(),o.value=!o.value,jt(()=>d())};return(m,h)=>{const _=z("woot-label"),g=z("fluent-icon"),T=_t("resize");return pe((p(),f("div",{ref_key:"labelContainer",ref:r},[a.value.length||m.$slots.before?(p(),f("div",{key:0,class:re(["flex items-end flex-shrink min-w-0 gap-y-1",{"h-auto overflow-visible flex-row flex-wrap":o.value}])},[at(m.$slots,"before"),(p(!0),f(fe,null,Ae(a.value,(S,b)=>(p(),V(_,{key:S?S.id:b,title:S.title,description:S.description,color:S.color,variant:"smooth",class:re(["!mb-0 max-w-[calc(100%-0.5rem)]",{"invisible absolute":!o.value&&b>i.value}]),small:""},null,8,["title","description","color","class"]))),128)),l.value?(p(),f("button",{key:0,title:o.value?m.$t("CONVERSATION.CARD.HIDE_LABELS"):m.$t("CONVERSATION.CARD.SHOW_LABELS"),class:"h-5 py-0 px-1 flex-shrink-0 mr-6 ml-0 rtl:ml-6 rtl:mr-0 rtl:rotate-180 text-n-slate-11 border-n-strong dark:border-n-strong",onClick:u},[v(g,{icon:o.value?"chevron-left":"chevron-right",size:"12"},null,8,["icon"])],8,Yde)):O("",!0)],2)):O("",!0)])),[[T,d]])}}},Xde={class:"flex justify-between w-full"},qde={class:"text-sm sticky top-0 h-fit font-normal tracking-[-0.6%] min-w-[140px] truncate text-n-slate-11"},Zde={class:"flex flex-col w-full gap-2"},Mh={__name:"SLAEventItem",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},setup(e){const t=n=>ts(rc(n),"MMM dd, yyyy, hh:mm a");return(n,s)=>(p(),f("div",Xde,[c("span",qde,E(e.label),1),c("div",Zde,[(p(!0),f(fe,null,Ae(e.items,a=>(p(),f("span",{key:a.id,class:"text-sm font-normal text-n-slate-12 text-right tabular-nums"},E(t(a.created_at)),1))),128)),at(n.$slots,"showMore")])]))}},Qde={class:"absolute flex flex-col items-start border-n-strong bg-n-solid-3 w-96 backdrop-blur-[100px] px-6 py-5 z-50 shadow rounded-xl gap-4 max-h-96 overflow-auto"},Jde={class:"text-sm font-medium text-n-slate-12"},eue={key:0,class:"flex flex-col items-end w-full"},OS={__name:"SLAPopoverCard",props:{slaMissedEvents:{type:Array,required:!0}},setup(e){const t=e,{SLA_MISS_TYPES:n}=Pt,s=F(!1),a=C(()=>t.slaMissedEvents.filter(d=>d.event_type===n.FRT)),o=C(()=>{const d=t.slaMissedEvents.filter(u=>u.event_type===n.NRT);return s.value?d:d.slice(0,6)}),l=C(()=>t.slaMissedEvents.filter(d=>d.event_type===n.RT)),i=C(()=>o.value.length>6),r=()=>{s.value=!s.value};return(d,u)=>(p(),f("div",Qde,[c("span",Jde,E(d.$t("SLA.EVENTS.TITLE")),1),a.value.length?(p(),V(Mh,{key:0,label:d.$t("SLA.EVENTS.FRT"),items:a.value},null,8,["label","items"])):O("",!0),o.value.length?(p(),V(Mh,{key:1,label:d.$t("SLA.EVENTS.NRT"),items:o.value},{showMore:K(()=>[i.value?(p(),f("div",eue,[v(ce,{link:"",xs:"",slate:"",class:"hover:!no-underline",icon:s.value?"":"i-lucide-plus",label:s.value?d.$t("SLA.EVENTS.HIDE",{count:o.value.length}):d.$t("SLA.EVENTS.SHOW_MORE",{count:o.value.length}),onClick:r},null,8,["icon","label"])])):O("",!0)]),_:1},8,["label","items"])):O("",!0),l.value.length?(p(),V(Mh,{key:2,label:d.$t("SLA.EVENTS.RT"),items:l.value},null,8,["label","items"])):O("",!0)]))}},tue={components:{SLAPopoverCard:OS,NextButton:ce},props:{slaEvents:{type:Array,default:()=>[]}},data(){return{showSlaPopoverCard:!1}},methods:{closeSlaEvents(){this.showSlaPopoverCard=!1},openSlaEvents(){this.showSlaPopoverCard=!this.showSlaPopoverCard}}},nue={class:"flex items-center col-span-2 text-n-slate-11 justify-end"},sue={class:"relative"};function aue(e,t,n,s,a,o){const l=z("NextButton"),i=z("SLAPopoverCard"),r=_t("on-clickaway");return pe((p(),f("div",nue,[c("div",sue,[v(l,{link:"",slate:"",type:"button",label:e.$t("SLA_REPORTS.TABLE.VIEW_DETAILS"),onClick:o.openSlaEvents},null,8,["label","onClick"]),a.showSlaPopoverCard?(p(),V(i,{key:0,"sla-missed-events":n.slaEvents,class:"right-0"},null,8,["sla-missed-events"])):O("",!0)])])),[[r,o.closeSlaEvents]])}const oue=Fe(tue,[["render",aue]]),lue={class:"grid items-center content-center w-full h-16 grid-cols-12 gap-4 px-6 py-0 border-b last:border-b-0 last:rounded-b-xl border-n-weak"},iue={class:"flex items-center gap-2 col-span-6 px-0 py-2 text-sm tracking-[0.5] text-n-slate-12 rtl:text-right"},rue={class:"text-n-slate-12"},cue={class:"text-n-slate-11"},due={class:"capitalize truncate text-n-slate-12"},uue={class:"flex items-center capitalize py-2 px-0 text-sm tracking-[0.5] text-n-slate-12 text-left rtl:text-right col-span-2"},pue={class:"flex items-center col-span-2 gap-2"},mue={key:1,class:"text-n-slate-11"},hue={__name:"SLAReportItem",props:{slaName:{type:String,required:!0},conversationId:{type:Number,required:!0},conversation:{type:Object,required:!0},slaEvents:{type:Array,default:()=>[]}},setup(e){const t=e,n=C(()=>t.conversation.labels?t.conversation.labels.split(",").map(s=>s.trim()):[]);return(s,a)=>(p(),f("div",lue,[c("div",iue,[c("span",rue,E(`#${e.conversationId} `),1),c("span",cue,E(s.$t("SLA_REPORTS.WITH")),1),c("span",due,E(e.conversation.contact.name),1),n.value.length?(p(),V(NS,{key:0,class:"w-[60%]","conversation-id":e.conversationId,"conversation-labels":n.value},null,8,["conversation-id","conversation-labels"])):O("",!0)]),c("div",uue,E(e.slaName),1),c("div",pue,[e.conversation.assignee?(p(),V(Hf,{key:0,user:e.conversation.assignee},null,8,["user"])):(p(),f("span",mue," --- "))]),v(oue,{"sla-events":e.slaEvents},null,8,["sla-events"])]))}},fue={name:"SLATable",components:{SLAReportItem:hue,TableFooter:e_,Spinner:Zs,TableHeaderCell:xS},props:{slaReports:{type:Array,default:()=>[]},totalCount:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},isLoading:{type:Boolean,default:!1}},emits:["pageChange"],data(){return{pageNo:1}},computed:{shouldShowFooter(){return this.currentPage===1?this.totalCount>this.pageSize:this.slaReports.length>0}},methods:{onPageChange(e){this.$emit("pageChange",e)}}},gue={class:"min-w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 p-6"},_ue={class:"grid content-center h-12 grid-cols-12 gap-4 px-6 py-0 bg-n-slate-2 rounded-md"},vue={key:0,class:"flex items-center justify-center h-32"},bue={key:1},Eue={key:2,class:"flex items-center justify-center h-32"};function Tue(e,t,n,s,a,o){const l=z("TableHeaderCell"),i=z("Spinner"),r=z("SLAReportItem"),d=z("TableFooter");return p(),f("div",null,[c("div",gue,[c("div",_ue,[v(l,{span:6,label:e.$t("SLA_REPORTS.TABLE.HEADER.CONVERSATION")},null,8,["label"]),v(l,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.POLICY")},null,8,["label"]),v(l,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.AGENT")},null,8,["label"]),v(l,{span:1,label:""})]),n.isLoading?(p(),f("div",vue,[v(i),c("span",null,E(e.$t("SLA_REPORTS.LOADING")),1)])):n.slaReports.length>0?(p(),f("div",bue,[(p(!0),f(fe,null,Ae(n.slaReports,u=>(p(),V(r,{key:u.applied_sla.id,"sla-name":u.applied_sla.sla_name,conversation:u.conversation,"conversation-id":u.conversation.id,"sla-events":u.sla_events},null,8,["sla-name","conversation","conversation-id","sla-events"]))),128))])):(p(),f("div",Eue,E(e.$t("SLA_REPORTS.NO_RECORDS")),1))]),o.shouldShowFooter?(p(),V(d,{key:0,"current-page":n.currentPage,"total-count":n.totalCount,"page-size":n.pageSize,onPageChange:o.onPageChange},null,8,["current-page","total-count","page-size","onPageChange"])):O("",!0)])}const Aue=Fe(fue,[["render",Tue]]),N0=(e,t)=>e.map(n=>({id:n.id,name:t==="labels"?n.title:n.name,type:t})),yue=(e,t,n)=>e.find(s=>t==="labels"?s.title===n:s.id.toString()===n.toString()),Vd=(e,t)=>({keyToType:{assigned_agent_id:"agents",inbox_id:"inboxes",team_id:"teams",sla_policy_id:"sla",label_list:"labels"},typeToKey:{agents:"assigned_agent_id",inboxes:"inbox_id",teams:"team_id",sla:"sla_policy_id",labels:"label_list"}})[t][e],Sue={class:"min-w-0 truncate"},dd={__name:"DropdownButton",props:{buttonText:{type:String,default:""},trailingIcon:{type:Boolean,default:!1},icon:{type:String,default:""}},setup(e){return(t,n)=>(p(),V(ce,{ghost:"",slate:"",sm:"",class:"relative",icon:e.icon,"trailing-icon":e.trailingIcon},{default:K(()=>[c("span",Sue,E(e.buttonText),1),at(t.$slots,"dropdown")]),_:3},8,["icon","trailing-icon"]))}},Iue={class:"relative inline-flex items-center justify-start w-full p-3 border-0 rounded-none first:rounded-t-xl last:rounded-b-xl h-11 hover:enabled:bg-n-alpha-2"},Cue={class:"inline-flex items-center gap-3 overflow-hidden"},xue={class:"text-sm font-medium truncate text-n-slate-12"},wS={__name:"DropdownListItemButton",props:{buttonText:{type:String,default:""},isActive:{type:Boolean,default:!1},icon:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){return(t,n)=>{const s=z("fluent-icon");return p(),f("button",Iue,[c("div",Cue,[e.icon?(p(),V(s,{key:0,icon:e.icon,size:"18",style:Ct({color:e.iconColor})},null,8,["icon","style"])):O("",!0),c("span",xue,E(e.buttonText),1),e.isActive?(p(),V(s,{key:1,icon:"checkmark",size:"18",class:"flex-shrink-0 text-n-slate-12"})):O("",!0)]),at(t.$slots,"dropdown")])}}},Nue={class:"flex items-center justify-between h-10 min-h-[40px] sticky top-0 bg-n-solid-2 dark:bg-n-solid-2 z-10 gap-2 px-3 border-b rounded-t-xl border-n-weak"},Oue=["placeholder"],wue={__name:"DropdownSearch",props:yn({inputPlaceholder:{type:String,default:""},showClearFilter:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:yn(["remove"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=jn(e,"modelValue");return(a,o)=>{const l=z("fluent-icon");return p(),f("div",Nue,[c("div",{class:"flex items-center w-full gap-2",onKeyup:o[1]||(o[1]=Hn(ze(()=>{},["prevent"]),["space"]))},[v(l,{icon:"search",size:"16",class:"text-n-slate-11 flex-shrink-0"}),pe(c("input",{"onUpdate:modelValue":o[0]||(o[0]=i=>s.value=i),placeholder:e.inputPlaceholder,type:"text",class:"w-full mb-0 text-sm !outline-0 bg-transparent text-n-slate-12 placeholder:text-n-slate-10 reset-base"},null,8,Oue),[[mt,s.value]])],32),!e.modelValue&&e.showClearFilter?(p(),V(ce,{key:0,faded:"",xs:"",class:"flex-shrink-0",label:a.$t("REPORT.FILTER_ACTIONS.CLEAR_FILTER"),onClick:o[2]||(o[2]=i=>n("remove"))},null,8,["label"])):O("",!0)])}}},Rue={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},RS={__name:"DropdownEmptyState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",Rue,E(e.message),1))}},$ue={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},Mue={__name:"DropdownLoadingState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",$ue,E(e.message),1))}},Kc={__name:"DropdownList",props:{listItems:{type:Array,default:()=>[]},enableSearch:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:""},activeFilterId:{type:[String,Number],default:null},showClearFilter:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},loadingPlaceholder:{type:String,default:""}},emits:["onSearch","select","removeFilter"],setup(e,{emit:t}){const n=e,s=t,a=F(""),o=ml(h=>{s("onSearch",h)},300),l=h=>{a.value=h,o(h)},i=C(()=>a.value?Rr(n.listItems,a.value,["name"]):n.listItems),r=C(()=>!i.value.length),d=h=>n.activeFilterId?h===n.activeFilterId:!1,u=C(()=>n.isLoading&&r.value&&n.loadingPlaceholder),m=C(()=>!n.isLoading&&r.value);return(h,_)=>(p(),f("div",{class:"absolute z-20 w-40 bg-n-solid-2 border-0 outline outline-1 outline-n-weak shadow rounded-xl max-h-[400px]",onClick:_[2]||(_[2]=ze(()=>{},["stop"]))},[at(h.$slots,"search",{},()=>[e.enableSearch?(p(),V(wue,{key:0,modelValue:a.value,"onUpdate:modelValue":[_[0]||(_[0]=g=>a.value=g),l],"input-placeholder":e.inputPlaceholder,"show-clear-filter":e.showClearFilter,onRemove:_[1]||(_[1]=g=>h.$emit("removeFilter"))},null,8,["modelValue","input-placeholder","show-clear-filter"])):O("",!0)]),at(h.$slots,"listItem",{},()=>[u.value?(p(),V(Mue,{key:0,message:e.loadingPlaceholder},null,8,["message"])):m.value?(p(),V(RS,{key:1,message:h.$t("REPORT.FILTER_ACTIONS.EMPTY_LIST")},null,8,["message"])):O("",!0),(p(!0),f(fe,null,Ae(i.value,g=>(p(),V(wS,{key:g.id,"is-active":d(g.id),"button-text":g.name,icon:g.icon,"icon-color":g.iconColor,onClick:ze(T=>s("select",g),["stop","prevent"])},null,8,["is-active","button-text","icon","icon-color","onClick"]))),128))])]))}},kue={__name:"ActiveFilterChip",props:{name:{type:String,required:!0},id:{type:Number,required:!0},type:{type:String,required:!0},options:{type:Array,default:()=>[]},activeFilterType:{type:String,default:""},showMenu:{type:Boolean,default:!1},placeholder:{type:String,default:""},enableSearch:{type:Boolean,default:!1}},emits:["toggleDropdown","removeFilter","addFilter","closeDropdown"],setup(e,{emit:t}){const n=e,s=t,a=()=>s("toggleDropdown",n.type),o=()=>s("removeFilter",n.type),l=r=>s("addFilter",r),i=()=>s("closeDropdown");return(r,d)=>{const u=_t("on-clickaway");return p(),V(dd,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":e.name,onClick:a},Yo({_:2},[e.showMenu&&e.activeFilterType===e.type?{name:"dropdown",fn:K(()=>[e.options?pe((p(),V(Kc,{key:0,"show-clear-filter":"","list-items":e.options,"active-filter-id":e.id,"input-placeholder":e.placeholder,"enable-search":e.enableSearch,class:"flex flex-col w-[240px] overflow-y-auto left-0 md:left-auto md:right-0 top-10",onSelect:l,onRemoveFilter:o},null,8,["list-items","active-filter-id","input-placeholder","enable-search"])),[[u,i]]):O("",!0)]),key:"0"}:void 0]),1032,["button-text"])}}},Lue={__name:"AddFilterChip",props:{name:{type:String,required:!0},menuOption:{type:Array,default:()=>[]},showMenu:{type:Boolean,default:!1},placeholderI18nKey:{type:String,default:""},enableSearch:{type:Boolean,default:!0},emptyStateMessage:{type:String,default:""}},emits:["toggleDropdown","addFilter","closeDropdown"],setup(e,{emit:t}){const n=t,s=F(null),a=u=>{s.value=u},o=()=>{s.value=null},l=u=>s.value===u,i=()=>n("toggleDropdown"),r=u=>{n("addFilter",u),o()},d=()=>{o(),n("closeDropdown")};return(u,m)=>{const h=_t("on-clickaway");return p(),V(dd,{"button-text":e.name,icon:"i-lucide-filter",onClick:i},Yo({_:2},[e.showMenu?{name:"dropdown",fn:K(()=>[pe((p(),V(Kc,{class:"left-0 md:right-0 top-10"},{listItem:K(()=>[e.menuOption.length?O("",!0):(p(),V(RS,{key:0,message:e.emptyStateMessage},null,8,["message"])),(p(!0),f(fe,null,Ae(e.menuOption,_=>(p(),V(wS,{key:_.id,"button-text":_.name,onMouseenter:g=>a(_.id),onMouseleave:o,onFocus:g=>a(_.id)},Yo({_:2},[_.options&&l(_.id)?{name:"dropdown",fn:K(()=>[v(Kc,{"list-items":_.options,"input-placeholder":u.$t(`${e.placeholderI18nKey}.${_.type.toUpperCase()}`),"enable-search":e.enableSearch,class:"flex flex-col w-[216px] overflow-y-auto top-0 left-36",onSelect:r},null,8,["list-items","input-placeholder","enable-search"])]),key:"0"}:void 0]),1032,["button-text","onMouseenter","onFocus"]))),128))]),_:1})),[[h,d]])]),key:"0"}:void 0]),1032,["button-text"])}}},Due={components:{FilterButton:dd,ActiveFilterChip:kue,AddFilterChip:Lue},emits:["filterChange"],data(){return{showDropdownMenu:!1,showSubDropdownMenu:!1,activeFilterType:"",appliedFilters:{assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...St({agents:"agents/getAgents",inboxes:"inboxes/getInboxes",teams:"teams/getTeams",labels:"labels/getLabels",sla:"sla/getSLA"}),filterListMenuItems(){const e=[{id:"1",name:this.$t("SLA_REPORTS.DROPDOWN.SLA"),type:"sla"},{id:"2",name:this.$t("SLA_REPORTS.DROPDOWN.INBOXES"),type:"inboxes"},{id:"3",name:this.$t("SLA_REPORTS.DROPDOWN.AGENTS"),type:"agents"},{id:"4",name:this.$t("SLA_REPORTS.DROPDOWN.TEAMS"),type:"teams"},{id:"5",name:this.$t("SLA_REPORTS.DROPDOWN.LABELS"),type:"labels"}],n=Object.keys(this.appliedFilters).filter(s=>this.appliedFilters[s]).map(s=>Vd(s,"keyToType"));return e.filter(({type:s})=>!n.includes(s)).map(({id:s,name:a,type:o})=>({id:s,name:a,type:o,options:N0(this[o],o)}))},activeFilters(){return Object.keys(this.appliedFilters).filter(t=>this.appliedFilters[t]).map(t=>{const n=Vd(t,"keyToType"),s=yue(this[n],n,this.appliedFilters[t]);return{id:s.id,name:n==="labels"?s.title:s.name,type:n,options:N0(this[n],n)}})},hasActiveFilters(){return Object.values(this.appliedFilters).some(e=>e!==null)},isAllFilterSelected(){return!this.filterListMenuItems.length}},methods:{addFilter(e){const{type:t,id:n,name:s}=e,a=Vd(t,"typeToKey");this.appliedFilters[a]=t==="labels"?s:n,this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},removeFilter(e){const t=Vd(e,"typeToKey");this.appliedFilters[t]=null,this.$emit("filterChange",this.appliedFilters)},clearAllFilters(){this.appliedFilters={assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null},this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},showDropdown(){this.showSubDropdownMenu=!1,this.showDropdownMenu=!this.showDropdownMenu},closeDropdown(){this.showDropdownMenu=!1},openActiveFilterDropdown(e){this.closeDropdown(),this.activeFilterType=e,this.showSubDropdownMenu=!this.showSubDropdownMenu},closeActiveFilterDropdown(){this.activeFilterType="",this.showSubDropdownMenu=!1},resetDropdown(){this.closeDropdown(),this.closeActiveFilterDropdown()}}},Pue={class:"flex flex-col flex-wrap items-start gap-2 md:items-center md:flex-nowrap md:flex-row"},Bue={key:0,class:"flex flex-wrap gap-2 md:flex-nowrap"},Fue={key:1,class:"w-full h-px border md:w-px md:h-5 border-n-weak"},Uue={class:"flex items-center gap-2"},Gue={key:1,class:"w-px h-5 border border-n-weak"};function Vue(e,t,n,s,a,o){const l=z("ActiveFilterChip"),i=z("AddFilterChip"),r=z("FilterButton");return p(),f("div",Pue,[o.hasActiveFilters?(p(),f("div",Bue,[(p(!0),f(fe,null,Ae(o.activeFilters,d=>(p(),V(l,Bs({ref_for:!0},d,{key:d.type,placeholder:e.$t(`SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER.${d.type.toUpperCase()}`),"active-filter-type":a.activeFilterType,"show-menu":a.showSubDropdownMenu,"enable-search":"",onToggleDropdown:o.openActiveFilterDropdown,onCloseDropdown:o.closeActiveFilterDropdown,onAddFilter:o.addFilter,onRemoveFilter:o.removeFilter}),null,16,["placeholder","active-filter-type","show-menu","onToggleDropdown","onCloseDropdown","onAddFilter","onRemoveFilter"]))),128))])):O("",!0),o.hasActiveFilters&&!o.isAllFilterSelected?(p(),f("div",Fue)):O("",!0),c("div",Uue,[o.isAllFilterSelected?O("",!0):(p(),V(i,{key:0,"placeholder-i18n-key":"SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER",name:e.$t("SLA_REPORTS.DROPDOWN.ADD_FIlTER"),"menu-option":o.filterListMenuItems,"show-menu":a.showDropdownMenu,"empty-state-message":e.$t("SLA_REPORTS.DROPDOWN.NO_FILTER"),onToggleDropdown:o.showDropdown,onCloseDropdown:o.closeDropdown,onAddFilter:o.addFilter},null,8,["name","menu-option","show-menu","empty-state-message","onToggleDropdown","onCloseDropdown","onAddFilter"])),o.hasActiveFilters?(p(),f("div",Gue)):O("",!0),o.hasActiveFilters?(p(),V(r,{key:2,"button-text":e.$t("SLA_REPORTS.DROPDOWN.CLEAR_ALL"),onClick:o.clearAllFilters},null,8,["button-text","onClick"])):O("",!0)])])}const Hue=Fe(Due,[["render",Vue]]),Wue={components:{SLAFilter:Hue},emits:["filterChange"],data(){return{selectedDateRange:dr.LAST_7_DAYS,selectedGroupByFilter:null,customDateRange:[new Date,new Date]}},computed:{to(){return _u(this.customDateRange[1])},from(){return gu(this.customDateRange[0])}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.setInitialRange()},methods:{setInitialRange(){const{offset:e}=this.selectedDateRange,t=pl(new Date,e),n=gu(t),s=_u(new Date);this.$emit("filterChange",{from:n,to:s,...this.selectedGroupByFilter})},emitChange(){const{from:e,to:t}=this;this.$emit("filterChange",{from:e,to:t,...this.selectedGroupByFilter})},emitFilterChange(e){this.selectedGroupByFilter=e,this.emitChange()},onDateRangeChange(e){this.customDateRange=e,this.emitChange()}}},Kue={class:"flex flex-col flex-wrap w-full gap-3 md:flex-row"};function zue(e,t,n,s,a,o){const l=z("woot-date-picker"),i=z("SLAFilter");return p(),f("div",Kue,[v(l,{onDateRangeChanged:o.onDateRangeChange},null,8,["onDateRangeChanged"]),v(i,{onFilterChange:o.emitFilterChange},null,8,["onFilterChange"])])}const jue=Fe(Wue,[["render",zue]]),Yue={name:"SLAReports",components:{V4Button:ce,ReportHeader:No,SLAMetrics:jde,SLATable:Aue,SLAReportFilters:jue},data(){return{pageNumber:1,activeFilter:{from:0,to:0,assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...St({slaReports:"slaReports/getAll",slaMetrics:"slaReports/getMetrics",slaMeta:"slaReports/getMeta",uiFlags:"slaReports/getUIFlags"})},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("sla/get"),this.fetchSLAMetrics(),this.fetchSLAReports()},methods:{fetchSLAReports({pageNumber:e}={}){this.$store.dispatch("slaReports/get",{page:e||this.pageNumber,...this.activeFilter})},fetchSLAMetrics(){this.$store.dispatch("slaReports/getMetrics",this.activeFilter)},onPageChange(e){this.fetchSLAReports({pageNumber:e})},onFilterChange(e){this.activeFilter=e,this.fetchSLAReports(),this.fetchSLAMetrics()},downloadReports(){const e="sla";try{this.$store.dispatch("slaReports/download",{fileName:Cr({type:e,to:this.activeFilter.to}),...this.activeFilter})}catch{_e(this.$t("SLA_REPORTS.DOWNLOAD_FAILED"))}}}},Xue={class:"flex flex-col flex-1 gap-6"};function que(e,t,n,s,a,o){const l=z("V4Button"),i=z("ReportHeader"),r=z("SLAReportFilters"),d=z("SLAMetrics"),u=z("SLATable");return p(),f(fe,null,[v(i,{"header-title":e.$t("SLA_REPORTS.HEADER")},{default:K(()=>[v(l,{label:e.$t("SLA_REPORTS.DOWNLOAD_SLA_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),c("div",Xue,[v(r,{onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),v(d,{"hit-rate":e.slaMetrics.hitRate,"no-of-breaches":e.slaMetrics.numberOfSLAMisses,"no-of-conversations":e.slaMetrics.numberOfConversations,"is-loading":e.uiFlags.isFetchingMetrics},null,8,["hit-rate","no-of-breaches","no-of-conversations","is-loading"]),v(u,{"sla-reports":e.slaReports,"is-loading":e.uiFlags.isFetching,"current-page":Number(e.slaMeta.currentPage),"total-count":Number(e.slaMeta.count),onPageChange:o.onPageChange},null,8,["sla-reports","is-loading","current-page","total-count","onPageChange"])])],64)}const Zue=Fe(Yue,[["render",que]]),Que={class:"flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5 gap-4"},Jue={__name:"KanbanMetrics",props:{metrics:{type:Object,required:!0},formatCurrency:{type:Function,required:!0}},setup(e){const t=e,n=C(()=>(t.metrics.totalItems||0).toLocaleString()),s=C(()=>t.formatCurrency(t.metrics.totalValue||0)),a=C(()=>{var x;return(((x=t.metrics.contactMetrics)==null?void 0:x.totalContacts)||0).toLocaleString()}),o=C(()=>{var x;return(((x=t.metrics.activityMetrics)==null?void 0:x.itemsWithConversations)||0).toLocaleString()}),l=C(()=>t.formatCurrency(t.metrics.averageValue||0)),i=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.itemsCreatedToday)||0).toLocaleString()}),r=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.itemsCreatedThisWeek)||0).toLocaleString()}),d=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.itemsCreatedThisMonth)||0).toLocaleString()}),u=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.totalOffers)||0).toLocaleString()}),m=C(()=>{var x;return t.formatCurrency(((x=t.metrics.stageMetrics)==null?void 0:x.avgOffersValue)||0)}),h=C(()=>{var x;return(((x=t.metrics.checklistMetrics)==null?void 0:x.itemsWithChecklists)||0).toLocaleString()}),_=C(()=>{var x;return`${((((x=t.metrics.checklistMetrics)==null?void 0:x.completionRate)||0)*100).toFixed(1)}%`}),g=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.itemsWithDeadline)||0).toLocaleString()}),T=C(()=>{var x;return(((x=t.metrics.activityMetrics)==null?void 0:x.itemsWithAttachments)||0).toLocaleString()}),S=C(()=>{var x;return(((x=t.metrics.activityMetrics)==null?void 0:x.itemsWithNotes)||0).toLocaleString()}),b=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.itemsWithRescheduling)||0).toLocaleString()}),A=C(()=>{var x;return(((x=t.metrics.stageMetrics)==null?void 0:x.itemsWithOffers)||0).toLocaleString()}),y=C(()=>{var x;return(((x=t.metrics.activityMetrics)==null?void 0:x.averageActivitiesPerItem)||0).toLocaleString()});return(x,$)=>(p(),f("div",Que,[v(us,{label:"Itens Totais",value:n.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Valor Total",value:s.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Valor Mdio",value:l.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Itens Criados Hoje",value:i.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Itens Criados na Semana",value:r.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Itens Criados no Ms",value:d.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Total de Ofertas",value:u.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Valor Mdio das Ofertas",value:m.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Checklist",value:h.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Taxa de Concluso de Checklist",value:_.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Deadline",value:g.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Anexos",value:T.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Notas",value:S.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Conversa",value:x.itemsWithConversations,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Reagendamento",value:b.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Cards com Ofertas",value:A.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Mdia de Atividades por Item",value:y.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Total de Contatos",value:a.value,"info-text":"",class:"flex-1"},null,8,["value"]),v(us,{label:"Conversas",value:o.value,"info-text":"",class:"flex-1"},null,8,["value"])]))}},epe={style:{height:"180px",width:"100%"}},tpe={__name:"StageDistributionChart",props:{labels:{type:Array,required:!0},values:{type:Array,required:!0},colors:{type:Array,required:!0}},setup(e){const t=e,n=F(null);let s=null;const a=()=>{s&&(s.destroy(),s=null)},o=async()=>{if(await jt(),a(),!n.value)return;const l=n.value.getContext&&n.value.getContext("2d");if(!l)return;const i=(await Va(async()=>{const{default:r}=await import("./auto-CU7ORvl9.js");return{default:r}},__vite__mapDeps([0,1,2]))).default;s=new i(l,{type:"bar",data:{labels:t.labels,datasets:[{data:t.values,backgroundColor:t.colors,borderRadius:8,barPercentage:.7}]},options:{indexAxis:"y",plugins:{legend:{display:!1},tooltip:{callbacks:{label:r=>`${r.parsed.x}`}}},scales:{x:{beginAtZero:!0,ticks:{color:"#64748b",font:{size:11}},grid:{color:"rgba(51,65,85,0.1)"}},y:{ticks:{color:"#64748b",font:{size:11}},grid:{display:!1}}},responsive:!0,maintainAspectRatio:!1}})};return pt(o),ot(()=>[t.labels,t.values,t.colors],o,{deep:!0}),lo(a),(l,i)=>(p(),f("div",epe,[c("canvas",{ref_key:"chartRef",ref:n},null,512)]))}},npe={class:"font-semibold text-base mb-2"},spe={style:{height:"180px",width:"100%"}},ape={__name:"StatusDistributionChart",props:{labels:Array,values:Array,colors:Array,title:String},setup(e){const t=e,n=F(null);let s=null;const a=()=>{s&&(s.destroy(),s=null)},o=async()=>{if(await jt(),a(),!n.value)return;const l=n.value.getContext&&n.value.getContext("2d");if(!l)return;const i=(await Va(async()=>{const{default:r}=await import("./auto-CU7ORvl9.js");return{default:r}},__vite__mapDeps([0,1,2]))).default;s=new i(l,{type:"pie",data:{labels:t.labels,datasets:[{data:t.values,backgroundColor:t.colors}]},options:{plugins:{legend:{display:!0,position:"bottom"},tooltip:{callbacks:{label:r=>`${r.label}: ${r.parsed} (${(r.parsed/t.values.reduce((d,u)=>d+u,0)*100).toFixed(1)}%)`}}},responsive:!0,maintainAspectRatio:!1}})};return pt(o),ot(()=>[t.labels,t.values,t.colors],o,{deep:!0}),lo(a),(l,i)=>(p(),f("div",null,[c("h3",npe,E(e.title),1),c("div",spe,[c("canvas",{ref_key:"chartRef",ref:n},null,512)])]))}},ope={class:"font-semibold text-base mb-2"},lpe={style:{height:"180px",width:"100%"}},ipe={__name:"ValueByPriorityChart",props:{labels:Array,values:Array,colors:Array,percents:Array,title:String},setup(e){const t=e,n=F(null);let s=null;const a=()=>{s&&(s.destroy(),s=null)},o=async()=>{if(await jt(),a(),!n.value)return;const l=n.value.getContext&&n.value.getContext("2d");if(!l)return;const i=(await Va(async()=>{const{default:r}=await import("./auto-CU7ORvl9.js");return{default:r}},__vite__mapDeps([0,1,2]))).default;s=new i(l,{type:"bar",data:{labels:t.labels,datasets:[{data:t.values,backgroundColor:t.colors,borderRadius:8,barPercentage:.7}]},options:{indexAxis:"y",plugins:{legend:{display:!1},tooltip:{callbacks:{label:r=>`${r.label}: ${r.parsed.x} (${t.percents[r.dataIndex]}%)`}}},scales:{x:{beginAtZero:!0,ticks:{color:"#64748b",font:{size:11}},grid:{color:"rgba(51,65,85,0.1)"}},y:{ticks:{color:"#64748b",font:{size:11}},grid:{display:!1}}},responsive:!0,maintainAspectRatio:!1}})};return pt(o),ot(()=>[t.labels,t.values,t.colors,t.percents],o,{deep:!0}),lo(a),(l,i)=>(p(),f("div",null,[c("h3",ope,E(e.title),1),c("div",lpe,[c("canvas",{ref_key:"chartRef",ref:n},null,512)])]))}},rpe={class:"font-semibold text-base mb-2"},cpe={style:{height:"180px",width:"100%"}},dpe={__name:"ValueByStatusChart",props:{labels:Array,values:Array,colors:Array,percents:Array,title:String},setup(e){const t=e,n=F(null);let s=null;const a=()=>{s&&(s.destroy(),s=null)},o=async()=>{if(await jt(),a(),!n.value)return;const l=n.value.getContext&&n.value.getContext("2d");if(!l)return;const i=(await Va(async()=>{const{default:r}=await import("./auto-CU7ORvl9.js");return{default:r}},__vite__mapDeps([0,1,2]))).default;s=new i(l,{type:"bar",data:{labels:t.labels,datasets:[{data:t.values,backgroundColor:t.colors,borderRadius:8,barPercentage:.7}]},options:{indexAxis:"y",plugins:{legend:{display:!1},tooltip:{callbacks:{label:r=>`${r.label}: ${r.parsed.x} (${t.percents[r.dataIndex]}%)`}}},scales:{x:{beginAtZero:!0,ticks:{color:"#64748b",font:{size:11}},grid:{color:"rgba(51,65,85,0.1)"}},y:{ticks:{color:"#64748b",font:{size:11}},grid:{display:!1}}},responsive:!0,maintainAspectRatio:!1}})};return pt(o),ot(()=>[t.labels,t.values,t.colors,t.percents],o,{deep:!0}),lo(a),(l,i)=>(p(),f("div",null,[c("h3",rpe,E(e.title),1),c("div",cpe,[c("canvas",{ref_key:"chartRef",ref:n},null,512)])]))}},upe={class:"font-semibold text-base mb-2"},ppe={class:"flex flex-wrap gap-2"},mpe=["title"],hpe={class:"font-bold text-slate-500 mr-1"},fpe=["src","alt"],gpe={class:"truncate max-w-[80px]"},_pe={class:"opacity-60"},vpe={key:0,class:"ml-1 text-green-700 dark:text-green-400 font-semibold"},bpe={key:0,class:"flex items-center gap-1 border border-dashed border-slate-300 rounded-full px-2 py-1 bg-slate-100 dark:bg-slate-800 text-xs text-slate-400 ml-2"},kh=5,Epe={__name:"TopAgentsList",props:{agents:Array,title:String},setup(e){const t=e,n=C(()=>t.agents.slice(0,kh)),s=C(()=>t.agents.length>kh?t.agents.length-kh:0);return(a,o)=>(p(),f("div",null,[c("h3",upe,E(e.title),1),c("div",ppe,[(p(!0),f(fe,null,Ae(n.value,(l,i)=>(p(),f("div",{key:l.id,class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 bg-transparent text-xs text-slate-600 dark:text-slate-300 relative",title:`#${i+1} - ${l.name}
Cards: ${l.count}
Valor Total: ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l.total_value||0)}`},[c("span",hpe,"#"+E(i+1),1),c("img",{src:l.avatar_url,alt:l.name,class:"w-6 h-6 rounded-full object-cover"},null,8,fpe),c("span",gpe,E(l.name),1),c("span",_pe,"("+E(l.count)+")",1),l.total_value!==void 0?(p(),f("span",vpe,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l.total_value)),1)):O("",!0)],8,mpe))),128)),s.value>0?(p(),f("div",bpe," +"+E(s.value)+" outros ",1)):O("",!0)])]))}},Tpe={class:"font-semibold text-base mb-2"},Ape={class:"flex items-center gap-2 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 bg-white dark:bg-slate-900 text-xs text-slate-700 dark:text-slate-200",title:"Cards que no esto atribudos a nenhum agente."},ype={class:"font-semibold"},Spe={class:"font-semibold"},Ipe={class:"font-semibold"},Cpe={__name:"NoAgentCard",props:{count:Number,totalValue:Number,totalItems:Number,title:String},setup(e){const t=e,n=C(()=>t.totalItems?(t.count/t.totalItems*100).toFixed(1):"0"),s=C(()=>t.count?t.totalValue/t.count:0);return(a,o)=>(p(),f("div",null,[c("h3",Tpe,E(e.title),1),c("div",Ape,[o[0]||(o[0]=c("span",{class:"mr-1"},[c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"inline w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4zm0-2a4 4 0 100-8 4 4 0 000 8z"})])],-1)),o[1]||(o[1]=c("span",null,"Cards:",-1)),c("span",ype,E(e.count),1),c("span",null,"| "+E(n.value)+"%",1),o[2]||(o[2]=c("span",null,"| Valor Total:",-1)),c("span",Spe,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.totalValue)),1),o[3]||(o[3]=c("span",null,"| Valor Mdio:",-1)),c("span",Ipe,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.value)),1)])]))}},xpe={class:"font-semibold text-base mb-2"},Npe={class:"flex flex-col md:flex-row gap-4"},Ope=["title"],wpe={class:"font-semibold"},Rpe={key:0},$pe={key:1},Mpe=["src","alt"],kpe={key:2,class:"italic text-slate-400"},Lpe=["title"],Dpe={class:"font-semibold"},Ppe={key:0},Bpe={key:1},Fpe=["src","alt"],Upe={key:2,class:"italic text-slate-400"},Gpe={__name:"MaxMinValueCard",props:{maxItem:Object,minItem:Object,title:String},setup(e){function t(n){return n?new Date(n).toLocaleDateString("pt-BR"):"-"}return(n,s)=>{var a,o,l,i,r,d,u,m,h,_,g,T,S,b,A,y,x,$,N,w;return p(),f("div",null,[c("h3",xpe,E(e.title),1),c("div",Npe,[e.maxItem?(p(),f("div",{key:0,class:"flex-1 flex items-center gap-2 border-2 border-green-400 dark:border-green-600 rounded-lg px-3 py-2 bg-green-50 dark:bg-green-900 text-xs text-slate-700 dark:text-slate-200 shadow",title:`Ttulo: ${(a=e.maxItem.item_details)==null?void 0:a.title}
Valor: ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat((o=e.maxItem.item_details)==null?void 0:o.value)||0)}
Data: ${t((l=e.maxItem.item_details)==null?void 0:l.created_at)}
Estgio: ${((i=e.maxItem.item_details)==null?void 0:i.stage)||"-"}
Status: ${((r=e.maxItem.item_details)==null?void 0:r.status)||"-"}
Agente: ${e.maxItem.agent?e.maxItem.agent.name:"Sem agente"}`},[s[1]||(s[1]=c("span",{class:"font-semibold bg-green-400 text-white rounded px-2 py-0.5 mr-1"},"Maior",-1)),c("span",wpe,"Ttulo: "+E((d=e.maxItem.item_details)==null?void 0:d.title),1),s[2]||(s[2]=c("span",null,"|",-1)),c("span",null,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat((u=e.maxItem.item_details)==null?void 0:u.value)||0)),1),s[3]||(s[3]=c("span",null,"|",-1)),c("span",null,"Data: "+E(t((m=e.maxItem.item_details)==null?void 0:m.created_at)),1),s[4]||(s[4]=c("span",null,"|",-1)),c("span",null,"Estgio: "+E(((h=e.maxItem.item_details)==null?void 0:h.stage)||"-"),1),s[5]||(s[5]=c("span",null,"|",-1)),c("span",null,"Status: "+E(((_=e.maxItem.item_details)==null?void 0:_.status)||"-"),1),e.maxItem.agent?(p(),f("span",Rpe,"|")):O("",!0),e.maxItem.agent?(p(),f("span",$pe,[s[0]||(s[0]=Ee(" Agente: ")),c("img",{src:e.maxItem.agent.avatar_url,alt:e.maxItem.agent.name,class:"w-5 h-5 rounded-full inline-block"},null,8,Mpe),Ee(" "+E(e.maxItem.agent.name),1)])):(p(),f("span",kpe,"| Sem agente"))],8,Ope)):O("",!0),e.minItem?(p(),f("div",{key:1,class:"flex-1 flex items-center gap-2 border-2 border-blue-400 dark:border-blue-600 rounded-lg px-3 py-2 bg-blue-50 dark:bg-blue-900 text-xs text-slate-700 dark:text-slate-200 shadow",title:`Ttulo: ${(g=e.minItem.item_details)==null?void 0:g.title}
Valor: ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat((T=e.minItem.item_details)==null?void 0:T.value)||0)}
Data: ${t((S=e.minItem.item_details)==null?void 0:S.created_at)}
Estgio: ${((b=e.minItem.item_details)==null?void 0:b.stage)||"-"}
Status: ${((A=e.minItem.item_details)==null?void 0:A.status)||"-"}
Agente: ${e.minItem.agent?e.minItem.agent.name:"Sem agente"}`},[s[7]||(s[7]=c("span",{class:"font-semibold bg-blue-400 text-white rounded px-2 py-0.5 mr-1"},"Menor",-1)),c("span",Dpe,"Ttulo: "+E((y=e.minItem.item_details)==null?void 0:y.title),1),s[8]||(s[8]=c("span",null,"|",-1)),c("span",null,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat((x=e.minItem.item_details)==null?void 0:x.value)||0)),1),s[9]||(s[9]=c("span",null,"|",-1)),c("span",null,"Data: "+E(t(($=e.minItem.item_details)==null?void 0:$.created_at)),1),s[10]||(s[10]=c("span",null,"|",-1)),c("span",null,"Estgio: "+E(((N=e.minItem.item_details)==null?void 0:N.stage)||"-"),1),s[11]||(s[11]=c("span",null,"|",-1)),c("span",null,"Status: "+E(((w=e.minItem.item_details)==null?void 0:w.status)||"-"),1),e.minItem.agent?(p(),f("span",Ppe,"|")):O("",!0),e.minItem.agent?(p(),f("span",Bpe,[s[6]||(s[6]=Ee(" Agente: ")),c("img",{src:e.minItem.agent.avatar_url,alt:e.minItem.agent.name,class:"w-5 h-5 rounded-full inline-block"},null,8,Fpe),Ee(" "+E(e.minItem.agent.name),1)])):(p(),f("span",Upe,"| Sem agente"))],8,Lpe)):O("",!0)])])}}},Vpe={name:"KanbanReports",components:{ReportFilterSelector:cd,V4Button:ce,ReportHeader:No,KanbanMetrics:Jue,StageDistributionChart:tpe,StatusDistributionChart:ape,ValueByPriorityChart:ipe,ValueByStatusChart:dpe,TopAgentsList:Epe,NoAgentCard:Cpe,MaxMinValueCard:Gpe},data(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()-30),{from:t.getTime(),to:e.getTime(),userIds:[],inbox:null,metrics:{totalItems:0,itemsByStage:{},averageValue:0,totalValue:0,avgTimeInStage:{},conversionRates:{},stageMetrics:{valueByStage:{},itemsCreatedToday:0,itemsCreatedThisWeek:0,itemsCreatedThisMonth:0,stageVelocity:{},avgTimeToConversion:{},stageEfficiency:{},itemsWithDeadline:0,itemsWithRescheduling:0,itemsWithOffers:0,avgOffersValue:0,totalOffers:0,offerRanges:{low:0,medium:0,high:0},priorityDistribution:{low:0,medium:0,high:0},channelDistribution:{}},funnelMetrics:{totalFunnels:0,activeStages:0,stageDistribution:{},averageStagesPerFunnel:0,conversionByStage:{},timeInStageByFunnel:{},valueByStage:{},stageColors:{},messageTemplates:{},stagePositions:{}},checklistMetrics:{totalTasks:0,completedTasks:0,completionRate:0,itemsWithChecklists:0,averageTasksPerItem:0},activityMetrics:{totalActivities:0,activitiesByType:{},averageActivitiesPerItem:0,itemsWithNotes:0,itemsWithAttachments:0,stageChanges:0,valueChanges:0,agentChanges:0,itemsWithConversations:0},contactMetrics:{totalContacts:new Set,contactsWithEmail:0,contactsWithPhone:0,contactsWithBoth:0}},isLoading:!1,funnels:[],maxHourlyChanges:0,items:[]}},computed:{...St("funnel",["getFunnels","getSelectedFunnel","getUIFlags"]),selectedFunnel(){return this.getSelectedFunnel},funnelsFromStore(){return this.getFunnels},requestPayload(){var t;const e={};return this.from&&(e.from=this.from),this.to&&(e.to=this.to),this.userIds&&this.userIds.length>0&&(e.user_ids=this.userIds.map(n=>typeof n=="object"?n.id:n)),this.inbox&&(e.inbox_id=this.inbox),(t=this.selectedFunnel)!=null&&t.id&&(e.funnel_id=this.selectedFunnel.id),e},safeItems(){return Array.isArray(this.items)?this.items:[]},defaultChartOptions(){return{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},animation:{duration:750,easing:"easeInOutQuart"},plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{family:"'Inter', sans-serif",size:12},color:"#94a3b8"}},tooltip:{backgroundColor:"rgba(30, 41, 59, 0.95)",titleColor:"#e2e8f0",bodyColor:"#e2e8f0",borderColor:"#334155",borderWidth:1,padding:12,cornerRadius:8,displayColors:!0,usePointStyle:!0,callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),e.parsed.y!==null&&(t+=e.parsed.y.toLocaleString()),t}}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(51, 65, 85, 0.1)",drawBorder:!1},ticks:{color:"#94a3b8",padding:10,font:{family:"'Inter', sans-serif",size:11}}},x:{grid:{display:!1},ticks:{color:"#94a3b8",padding:10,font:{family:"'Inter', sans-serif",size:11}}}}}},lineChartOptions(){return{...this.defaultChartOptions,plugins:{...this.defaultChartOptions.plugins,tooltip:{...this.defaultChartOptions.plugins.tooltip,intersect:!1,mode:"nearest"}},elements:{line:{tension:.4},point:{radius:4,hoverRadius:6,backgroundColor:"#fff",borderWidth:3}}}},pieChartOptions(){return{...this.defaultChartOptions,cutout:"60%",plugins:{...this.defaultChartOptions.plugins,tooltip:{...this.defaultChartOptions.plugins.tooltip,callbacks:{label:e=>{const t=e.parsed,n=e.dataset.data.reduce((a,o)=>a+o,0),s=(t*100/n).toFixed(1);return`${e.label}: ${t.toLocaleString()} (${s}%)`}}}}}},barChartOptions(){return{...this.defaultChartOptions,plugins:{...this.defaultChartOptions.plugins,tooltip:{...this.defaultChartOptions.plugins.tooltip,callbacks:{label:e=>`${e.dataset.label}: ${this.formatCurrency(e.parsed.y)}`}}},scales:{...this.defaultChartOptions.scales,y:{...this.defaultChartOptions.scales.y,ticks:{...this.defaultChartOptions.scales.y.ticks,callback:e=>this.formatCurrency(e)}}}}},radarChartOptions(){return{...this.defaultChartOptions,scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,color:"#94a3b8",backdropColor:"transparent"},grid:{color:"rgba(51, 65, 85, 0.1)"},angleLines:{color:"rgba(51, 65, 85, 0.1)"},pointLabels:{color:"#94a3b8",font:{family:"'Inter', sans-serif",size:11}}}},plugins:{...this.defaultChartOptions.plugins,tooltip:{...this.defaultChartOptions.plugins.tooltip,callbacks:{label:e=>`${e.dataset.label}: ${e.parsed}%`}}}}},lineChartData(){const t=Object.keys(this.metrics.itemsByStage).sort((n,s)=>(this.metrics.funnelMetrics.stagePositions[n]||0)-(this.metrics.funnelMetrics.stagePositions[s]||0));return{labels:t,datasets:[{label:"Itens por Estgio",data:t.map(n=>Number(this.metrics.itemsByStage[n]||0)),fill:!0,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,pointBackgroundColor:"#fff",pointBorderColor:"#3b82f6",pointHoverBackgroundColor:"#3b82f6",pointHoverBorderColor:"#fff"}]}},pieChartData(){const e=Object.keys(this.metrics.itemsByStage);return{labels:e,datasets:[{data:e.map(t=>Number(this.metrics.itemsByStage[t]||0)),backgroundColor:e.map(t=>this.metrics.funnelMetrics.stageColors[t]||"#94a3b8"),borderWidth:2,borderColor:"#1e293b",hoverOffset:15}]}},barChartData(){const t=Object.keys(this.metrics.stageMetrics.valueByStage).sort((n,s)=>(this.metrics.funnelMetrics.stagePositions[n]||0)-(this.metrics.funnelMetrics.stagePositions[s]||0));return{labels:t,datasets:[{label:"Valor por Estgio",data:t.map(n=>Number(this.metrics.stageMetrics.valueByStage[n]||0)),backgroundColor:"rgba(16, 185, 129, 0.2)",borderColor:"#10b981",borderWidth:2,borderRadius:6,hoverBackgroundColor:"rgba(16, 185, 129, 0.4)"}]}},radarChartData(){const e=Object.keys(this.metrics.stageMetrics.stageEfficiency);return{labels:e,datasets:[{label:"Eficincia de Estgio",data:e.map(t=>Math.round((this.metrics.stageMetrics.stageEfficiency[t]||0)*100)),backgroundColor:"rgba(139, 92, 246, 0.2)",borderColor:"#8b5cf6",borderWidth:2,pointBackgroundColor:"#fff",pointBorderColor:"#8b5cf6",pointHoverBackgroundColor:"#8b5cf6",pointHoverBorderColor:"#fff",pointRadius:4,pointHoverRadius:6}]}},calendarData(){const e=new Date,t=[];for(let n=0;n<365;n+=1){const s=new Date(e);s.setDate(s.getDate()-n);const a=Math.floor(Math.random()*5);t.push({day:s.toISOString().split("T")[0],value:Number(a)})}return t},statusChartData(){const e={open:0,won:0,lost:0};return this.safeItems.forEach(t=>{var s;const n=((s=t.item_details)==null?void 0:s.status)||"open";e[n]!==void 0&&e[n]++}),{labels:["Aberto","Ganho","Perdido"],values:[e.open,e.won,e.lost],colors:["#94a3b8","#22c55e","#ef4444"]}},valueByPriorityChartData(){const e=[{key:"urgent",label:"Urgente",color:"#ef4444"},{key:"high",label:"Alta",color:"#a21caf"},{key:"medium",label:"Mdia",color:"#f59e0b"},{key:"low",label:"Baixa",color:"#22c55e"},{key:"none",label:"Nenhuma",color:"#94a3b8"}],t={},n={};this.safeItems.forEach(a=>{var l,i;const o=((l=a.item_details)==null?void 0:l.priority)||"none";t[o]=(t[o]||0)+(parseFloat((i=a.item_details)==null?void 0:i.value)||0),n[o]=(n[o]||0)+1});const s=Object.values(n).reduce((a,o)=>a+o,0)||1;return{labels:e.map(a=>a.label),values:e.map(a=>t[a.key]||0),colors:e.map(a=>a.color),percents:e.map(a=>((n[a.key]||0)/s*100).toFixed(1))}},valueByStatusChartData(){const e=[{key:"open",label:"Aberto",color:"#94a3b8"},{key:"won",label:"Ganho",color:"#22c55e"},{key:"lost",label:"Perdido",color:"#ef4444"}],t={},n={};this.safeItems.forEach(a=>{var l,i;const o=((l=a.item_details)==null?void 0:l.status)||"open";t[o]=(t[o]||0)+(parseFloat((i=a.item_details)==null?void 0:i.value)||0),n[o]=(n[o]||0)+1});const s=Object.values(n).reduce((a,o)=>a+o,0)||1;return{labels:e.map(a=>a.label),values:e.map(a=>t[a.key]||0),colors:e.map(a=>a.color),percents:e.map(a=>((n[a.key]||0)/s*100).toFixed(1))}},topAgents(){const e=new Map;return this.safeItems.forEach(t=>{var s;const n=(s=t.item_details)==null?void 0:s.agent;n&&n.id&&(e.has(n.id)?e.get(n.id).count++:e.set(n.id,{...n,count:1}))}),Array.from(e.values()).sort((t,n)=>n.count-t.count).slice(0,5)},noAgentData(){const e=this.safeItems.filter(n=>{var s;return!((s=n.item_details)!=null&&s.agent)}),t=e.reduce((n,s)=>{var a;return n+(parseFloat((a=s.item_details)==null?void 0:a.value)||0)},0);return{count:e.length,totalValue:t}},maxMinValueData(){const e=this.safeItems.filter(s=>{var a;return parseFloat((a=s.item_details)==null?void 0:a.value)>0});if(!e.length)return{maxItem:null,minItem:null};const t=e.reduce((s,a)=>{var o,l;return parseFloat((o=a.item_details)==null?void 0:o.value)>parseFloat(((l=s==null?void 0:s.item_details)==null?void 0:l.value)||0)?a:s},null),n=e.reduce((s,a)=>{var o,l;return parseFloat((o=a.item_details)==null?void 0:o.value)<parseFloat(((l=s==null?void 0:s.item_details)==null?void 0:l.value)||1/0)?a:s},null);return{maxItem:t,minItem:n}},deadlineCardData(){var i;const e=this.safeItems.filter(r=>{var d;return(d=r.item_details)==null?void 0:d.deadline_at}),t=e.length,n=e.reduce((r,d)=>{var u;return r+(parseFloat((u=d.item_details)==null?void 0:u.value)||0)},0),s=t?n/t:0,a=e.map(r=>new Date(r.item_details.deadline_at)).filter(r=>!isNaN(r)).sort((r,d)=>r-d)[0],o={};e.forEach(r=>{var u;const d=((u=r.item_details)==null?void 0:u.priority)||"none";o[d]=(o[d]||0)+1});const l=((i=Object.entries(o).sort((r,d)=>d[1]-r[1])[0])==null?void 0:i[0])||"-";return{total:t,totalValue:n,avgValue:s,nextDeadline:a?a.toLocaleDateString("pt-BR"):"-",mostCommonPriority:l,percent:this.metrics.totalItems?(t/this.metrics.totalItems*100).toFixed(1):"0"}},offersCardData(){var u;const e=this.safeItems.filter(m=>{var h;return((h=m.item_details)==null?void 0:h.offers)&&Array.isArray(m.item_details.offers)&&m.item_details.offers.length>0}),t=e.length;let n=0,s=0,a=null,o=null,l=0;const i={};e.forEach(m=>{var _;m.item_details.offers.length>1&&l++;const h=((_=m.item_details)==null?void 0:_.priority)||"none";i[h]=(i[h]||0)+1,m.item_details.offers.forEach(g=>{g.value!==void 0&&(n+=g.value,s++,(a===null||g.value>a)&&(a=g.value),(o===null||g.value<o)&&(o=g.value))})});const r=s?n/s:0,d=((u=Object.entries(i).sort((m,h)=>h[1]-m[1])[0])==null?void 0:u[0])||"-";return{total:t,avgOfferValue:r,totalOffersValue:n,maxOffer:a,minOffer:o,multiOfferCount:l,mostCommonPriority:d,percent:this.metrics.totalItems?(t/this.metrics.totalItems*100).toFixed(1):"0"}}},watch:{selectedFunnel:{handler(e,t){e!=null&&e.id&&e.id!==(t==null?void 0:t.id)&&this.fetchAllData()},immediate:!1}},async mounted(){await this.ensureFunnelSelected(),this.fetchAllData()},methods:{...WC("funnel",["fetch","setSelectedFunnel"]),async ensureFunnelSelected(){try{if((!this.funnelsFromStore||this.funnelsFromStore.length===0)&&await this.fetch(),!this.selectedFunnel&&this.funnelsFromStore&&this.funnelsFromStore.length>0){const e=this.funnelsFromStore[0];await this.setSelectedFunnel(e)}if(this.selectedFunnel&&this.funnelsFromStore&&!this.funnelsFromStore.some(t=>String(t.id)===String(this.selectedFunnel.id)))if(this.funnelsFromStore.length>0){const t=this.funnelsFromStore[0];await this.setSelectedFunnel(t)}else throw new Error("Nenhum funil disponvel para anlise");if(!this.selectedFunnel)throw new Error("Nenhum funil disponvel para anlise")}catch(e){console.error("Erro ao garantir funil selecionado:",e);try{const t=_e();t&&t.showAlert&&t.showAlert("Erro ao carregar funis. Verifique se existem funis configurados.")}catch(t){console.error("Erro ao mostrar alerta:",t)}}},async fetchAllData(){var e;try{if(this.isLoading=!0,await this.ensureFunnelSelected(),!((e=this.selectedFunnel)!=null&&e.id))throw new Error("Nenhum funil selecionado para anlise");await Promise.all([this.fetchMetrics(),this.fetchFunnels()])}catch(t){console.error("Erro ao carregar mtricas do Kanban:",t);try{const n=_e();n&&n.showAlert&&n.showAlert("Erro ao carregar mtricas do Kanban")}catch(n){console.error("Erro ao mostrar alerta:",n)}}finally{this.isLoading=!1}},async fetchFunnels(){try{this.funnelsFromStore&&this.funnelsFromStore.length>0?this.funnels=this.funnelsFromStore:(await this.fetch(),this.funnels=this.funnelsFromStore||[]),this.calculateFunnelMetrics()}catch(e){console.error("Erro ao carregar dados dos funis:",e);try{const t=_e();t&&t.showAlert&&t.showAlert("Erro ao carregar dados dos funis")}catch(t){console.error("Erro ao mostrar alerta:",t)}}},calculateFunnelMetrics(){const e={totalFunnels:this.funnels.length,activeStages:0,stageDistribution:{},averageStagesPerFunnel:0,conversionByStage:{},timeInStageByFunnel:{},valueByStage:{},stageColors:{},messageTemplates:{},stagePositions:{}};this.funnels.forEach(t=>{if(t.stages&&typeof t.stages=="object"){const n=Object.values(t.stages);e.activeStages+=n.length,n.forEach(s=>{s&&s.name&&(e.stageDistribution[s.name]=(e.stageDistribution[s.name]||0)+1,e.stageColors[s.name]=s.color||"#94a3b8",e.stagePositions[s.name]=s.position||0,s.message_templates&&Array.isArray(s.message_templates)&&(e.messageTemplates[s.name]=(e.messageTemplates[s.name]||0)+s.message_templates.length))})}}),e.averageStagesPerFunnel=e.totalFunnels>0?e.activeStages/e.totalFunnels:0,this.metrics.funnelMetrics=e},async fetchMetrics(){var e,t,n;try{if(!((e=this.selectedFunnel)!=null&&e.id))throw new Error("Nenhum funil selecionado para anlise");const s={};(t=this.selectedFunnel)!=null&&t.id&&(s.funnel_id=this.selectedFunnel.id),this.from&&(s.from=this.from),this.to&&(s.to=this.to),this.userIds&&this.userIds.length>0&&(s.user_ids=this.userIds),this.inbox&&(s.inbox_id=this.inbox),console.log("[DEBUG] Parmetros para API:",s),console.log("[DEBUG] selectedFunnel:",this.selectedFunnel);let a=null;if(this.userIds&&this.userIds.length>0){const i=this.userIds[0];a=typeof i=="object"?i.id:i}const l=((n=(await Dn.getItems(s.funnel_id,1,null,a)).data)==null?void 0:n.items)||[];this.items=l,this.metrics={...this.metrics,...this.calculateMetrics(l)}}catch(s){console.error("Erro ao carregar mtricas do Kanban:",s);try{const a=_e();a&&a.showAlert&&a.showAlert("Erro ao carregar mtricas do Kanban")}catch(a){console.error("Erro ao mostrar alerta:",a)}}},calculateMetrics(e){if(!Array.isArray(e))return console.warn("calculateMetrics recebeu dados invlidos:",e),this.metrics;const t={totalItems:e.length,itemsByStage:{},totalValue:0,averageValue:0,avgTimeInStage:{},conversionRates:{},stageMetrics:{valueByStage:{},itemsCreatedToday:0,itemsCreatedThisWeek:0,itemsCreatedThisMonth:0,stageVelocity:{},avgTimeToConversion:{},stageEfficiency:{},itemsWithDeadline:0,itemsWithRescheduling:0,itemsWithOffers:0,avgOffersValue:0,totalOffers:0,offerRanges:{low:0,medium:0,high:0},priorityDistribution:{low:0,medium:0,high:0},channelDistribution:{}},checklistMetrics:{totalTasks:0,completedTasks:0,completionRate:0,itemsWithChecklists:0,averageTasksPerItem:0},activityMetrics:{totalActivities:0,activitiesByType:{},averageActivitiesPerItem:0,itemsWithNotes:0,itemsWithAttachments:0,stageChanges:0,valueChanges:0,agentChanges:0,itemsWithConversations:0},contactMetrics:{totalContacts:new Set,contactsWithEmail:0,contactsWithPhone:0,contactsWithBoth:0}},n=new Date,s=new Date(n.getTime()-7*24*60*60*1e3),a=new Date(n.getTime()-30*24*60*60*1e3);return e.forEach(o=>{if(!o)return;const l=o.funnel_stage||"unknown",i=o.item_details||{},r=parseFloat(i==null?void 0:i.value)||0,d=new Date(o.created_at),u=Array.isArray(i==null?void 0:i.checklist)?i.checklist:[],m=Array.isArray(i==null?void 0:i.activities)?i.activities:[];if(t.itemsByStage[l]=(t.itemsByStage[l]||0)+1,t.totalValue+=r,t.stageMetrics.valueByStage[l]=(t.stageMetrics.valueByStage[l]||0)+r,d>=n.setHours(0,0,0,0)&&(t.stageMetrics.itemsCreatedToday+=1),d>=s&&(t.stageMetrics.itemsCreatedThisWeek+=1),d>=a&&(t.stageMetrics.itemsCreatedThisMonth+=1),u.length>0&&(t.checklistMetrics.itemsWithChecklists+=1,t.checklistMetrics.totalTasks+=u.length,t.checklistMetrics.completedTasks+=u.filter(h=>h&&h.completed).length),m.length>0&&(t.activityMetrics.totalActivities+=m.length,m.forEach(h=>{h&&h.type&&(t.activityMetrics.activitiesByType[h.type]=(t.activityMetrics.activitiesByType[h.type]||0)+1,h.type==="stage_changed"?t.activityMetrics.stageChanges+=1:h.type==="value_changed"?t.activityMetrics.valueChanges+=1:h.type==="note_added"?t.activityMetrics.itemsWithNotes+=1:h.type==="attachment_added"?t.activityMetrics.itemsWithAttachments+=1:h.type==="agent_changed"&&(t.activityMetrics.agentChanges+=1))})),i.priority){const h=i.priority;t.stageMetrics.priorityDistribution[h]!==void 0&&(t.stageMetrics.priorityDistribution[h]+=1)}if(i.channel&&(t.stageMetrics.channelDistribution[i.channel]=(t.stageMetrics.channelDistribution[i.channel]||0)+1),i.deadline_at&&(t.stageMetrics.itemsWithDeadline+=1),i.rescheduled&&(t.stageMetrics.itemsWithRescheduling+=1),i.offers&&Array.isArray(i.offers)&&i.offers.length>0){t.stageMetrics.itemsWithOffers+=1,t.stageMetrics.totalOffers+=i.offers.length;const h=i.offers.reduce((_,g)=>_+(parseFloat(g.value)||0),0);t.stageMetrics.avgOffersValue=i.offers.length>0?h/i.offers.length:0,i.offers.forEach(_=>{if(_.value!==void 0){const g=parseFloat(_.value);g<=1e3?t.stageMetrics.offerRanges.low+=1:g<=5e3?t.stageMetrics.offerRanges.medium+=1:t.stageMetrics.offerRanges.high+=1}})}o.conversation_display_id&&(t.activityMetrics.itemsWithConversations+=1)}),t.averageValue=e.length>0?t.totalValue/e.length:0,t.checklistMetrics.completionRate=t.checklistMetrics.totalTasks>0?t.checklistMetrics.completedTasks/t.checklistMetrics.totalTasks:0,t.checklistMetrics.averageTasksPerItem=e.length>0?t.checklistMetrics.totalTasks/e.length:0,t.activityMetrics.averageActivitiesPerItem=e.length>0?t.activityMetrics.totalActivities/e.length:0,t.contactMetrics.totalContacts=t.contactMetrics.totalContacts.size,t},onFilterChange({from:e,to:t,groupBy:n,businessHours:s,selectedAgents:a,selectedLabel:o,selectedInbox:l,selectedTeam:i,selectedRating:r,selectedFunnel:d}={}){if(e&&(this.from=e),t&&(this.to=t),a&&(this.userIds=a),l&&(this.inbox=l),d&&d.id!=="all"&&this.funnelsFromStore){const u=this.funnelsFromStore.find(m=>String(m.id)===String(d.id));u&&this.setSelectedFunnel(u)}else d&&d.id==="all"&&this.funnelsFromStore&&this.funnelsFromStore.length>0&&this.setSelectedFunnel(this.funnelsFromStore[0]);try{const u=nn();u&&u(Ai.FILTER_REPORT,{filterType:"kanban",filterValue:JSON.stringify(this.requestPayload)})}catch(u){console.error("Erro ao rastrear evento:",u)}this.$nextTick(()=>{this.fetchAllData()})},async downloadReports(){var e,t,n;try{if(!((e=this.selectedFunnel)!=null&&e.id))throw new Error("Nenhum funil selecionado para download");const s={};(t=this.selectedFunnel)!=null&&t.id&&(s.funnel_id=String(this.selectedFunnel.id)),this.from&&(s.from=this.from),this.to&&(s.to=this.to),this.userIds&&this.userIds.length>0&&(s.user_ids=this.userIds),this.inbox&&(s.inbox_id=this.inbox);const o=((n=(await Dn.getItems(s)).data)==null?void 0:n.items)||[],l=this.convertToCSV(o),i=new Blob([l],{type:"text/csv"}),r=window.URL.createObjectURL(i),d=document.createElement("a");d.href=r,d.download=Cr("kanban_report"),document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(r),document.body.removeChild(d)}catch(s){console.error("Erro ao baixar relatrio do Kanban:",s);try{const a=_e();a&&a.showAlert&&a.showAlert("Erro ao baixar relatrio do Kanban")}catch(a){console.error("Erro ao mostrar alerta:",a)}}},convertToCSV(e){if(!Array.isArray(e))return console.warn("convertToCSV recebeu dados invlidos:",e),"";const t=["ID","Estgio","Ttulo","Valor","Data de Criao","Data de Entrada no Estgio","Descrio","Prioridade","Canal","ID do Contato","Email","Telefone","Data Limite","Total de Atividades","Total de Notas","Total de Anexos"].join(","),n=e.map(s=>{if(!s)return"";const a=s.item_details||{},o=Array.isArray(a.activities)?a.activities:[],l=o.filter(r=>r&&r.type==="note_added").length,i=o.filter(r=>r&&r.type==="attachment_added").length;return[s.id||"",s.funnel_stage||"",(a.title||"").replace(/,/g,";"),a.value||"",s.created_at||"",s.stage_entered_at||"",(a.description||"").replace(/,/g,";"),a.priority||"",a.channel||"",a.contact_id||"",a.email||"",a.phone||"",a.deadline_at||"",o.length,l,i].join(",")}).filter(s=>s!=="");return[t,...n].join(`
`)},formatCurrency(e){return e==null||isNaN(e)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},formatDuration(e){if(!e||isNaN(e))return"0 dias";const t=Math.floor(e/(1e3*60*60*24));return`${t} ${t===1?"dia":"dias"}`},formatPercentage(e){return e==null||isNaN(e)?"0%":`${(e*100).toFixed(1)}%`},getHourlyChanges(){const e=Array(24).fill(0),t=Object.values(this.metrics.activityMetrics.activitiesByType).reduce((n,s)=>n+(s||0),0);for(let n=0;n<t;n+=1){const s=Math.floor((Math.sin(Math.random()*Math.PI)+1)*12);e[s]=(e[s]||0)+1}return this.maxHourlyChanges=Math.max(...e),e},getCompletionTrendClass(e="text"){const t=this.getCompletionProgress(),n=e==="bg"?"bg-":"text-";return t>=80?`${n}emerald-500 dark:${n}emerald-400`:t>=50?`${n}yellow-500 dark:${n}yellow-400`:`${n}red-500 dark:${n}red-400`},getCompletionProgress(){const e=this.metrics.totalItems,t=Object.values(this.metrics.itemsByStage).reduce((n,s)=>n+(s||0),0);return e>0?t/e*100:0},getCompletionForecast(){const e=this.getWeeklyThroughput(),t=this.metrics.totalItems-Object.values(this.metrics.itemsByStage).reduce((a,o)=>a+(o||0),0),n=e>0?t/e:0,s=new Date;return s.setDate(s.getDate()+n*7),s.toLocaleDateString("pt-BR",{day:"numeric",month:"short",year:"numeric"})},identifyBottlenecks(){const e=[];return Object.keys(this.metrics.itemsByStage).forEach(n=>{const s=this.metrics.itemsByStage[n],a=this.metrics.avgTimeInStage[n];this.metrics.stageMetrics.stageEfficiency[n]<.5&&s>0?e.push({stage:n,severity:"high",reason:"Baixa eficincia no processamento"}):a>7*24*60*60*1e3&&s>0&&e.push({stage:n,severity:"medium",reason:"Tempo de permanncia elevado"})}),e},getBottleneckSeverityClass(e){const t={high:"bg-red-500",medium:"bg-yellow-500",low:"bg-orange-500"};return t[e]||t.medium},getOptimizationSuggestions(){const e=[],t=Object.keys(this.metrics.itemsByStage),n=t.length>0?this.metrics.totalItems/t.length:0;t.forEach(l=>{this.metrics.itemsByStage[l]>n*1.5&&e.push({icon:"i-ph-warning-circle",title:`Distribuio desbalanceada em ${l}`,description:"Considere redistribuir o trabalho ou aumentar a capacidade neste estgio"})}),t.filter(l=>(this.metrics.stageMetrics.stageEfficiency[l]||0)<.6).length>0&&e.push({icon:"i-ph-trend-up",title:"Oportunidade de melhoria na eficincia",description:"Alguns estgios apresentam baixa eficincia. Analise os processos e recursos"});const a=this.metrics.averageValue;return t.filter(l=>(this.metrics.stageMetrics.valueByStage[l]||0)<a*.5).length>0&&e.push({icon:"i-ph-currency-circle-dollar",title:"Otimizao de valor por estgio",description:"Existem estgios com valor abaixo da mdia. Considere priorizar itens de maior valor"}),e},getAverageCycleTime(){const e=Object.values(this.metrics.avgTimeInStage);return e.length>0?e.reduce((t,n)=>t+(n||0),0)/e.length:0},getWeeklyThroughput(){return this.metrics.stageMetrics.itemsCreatedThisWeek},getPriorityColor(e){return{low:"#94a3b8",medium:"#f59e0b",high:"#ef4444"}[e]||"#94a3b8"},formatActivityType(e){return{stage_changed:"Mudana de Estgio",value_changed:"Alterao de Valor",agent_changed:"Mudana de Agente",note_added:"Nota Adicionada",attachment_added:"Anexo Adicionado",checklist_item_added:"Item de Checklist Adicionado",checklist_item_toggled:"Item de Checklist Alterado",conversation_linked:"Conversa Vinculada"}[e]||e}}},Hpe={class:"flex flex-col"},Wpe={class:"flex flex-col gap-3"},Kpe={key:0,class:"flex items-center justify-center p-8"},zpe={key:1,class:"flex items-center justify-center p-12"},jpe={key:2,class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Ype={class:"report-card"},Xpe={class:"card-body p-4 space-y-2"},qpe={class:"metric-summary-card"},Zpe={class:"metric-value"},Qpe={class:"metric-summary-card"},Jpe={class:"metric-value"},eme={class:"metric-summary-card"},tme={class:"metric-value"},nme={class:"report-card"},sme={class:"card-body p-4 space-y-2"},ame={class:"metric-summary-card"},ome={class:"metric-value"},lme={class:"metric-summary-card"},ime={class:"metric-value"},rme={class:"metric-summary-card"},cme={class:"metric-value"},dme={class:"report-card"},ume={class:"card-body p-4 space-y-2"},pme={class:"metric-summary-card"},mme={class:"metric-value"},hme={class:"metric-summary-card"},fme={class:"metric-value"},gme={key:3,class:"flex flex-col space-y-6"},_me={class:"flex flex-col space-y-6"},vme={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},bme={class:"report-card"},Eme={class:"card-body p-4"},Tme={class:"report-card"},Ame={class:"card-body p-4"},yme={class:"space-y-4"},Sme={class:"flex justify-between mb-1"},Ime={class:"text-sm capitalize text-slate-600"},Cme={class:"text-sm font-medium"},xme={class:"h-2 bg-slate-100 rounded-full overflow-hidden"},Nme={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ome={class:"report-card"},wme={class:"card-body p-4"},Rme={class:"report-card"},$me={class:"card-body p-4"},Mme={class:"flex flex-col items-center justify-center h-full"},kme={class:"text-3xl font-bold"},Lme={class:"text-xs text-slate-400 mt-1"},Dme={class:"text-xs text-slate-400 mt-1"},Pme={class:"text-xs text-slate-400 mt-1"},Bme={class:"text-xs text-slate-400 mt-1"},Fme={class:"text-xs text-slate-400 mt-1"},Ume={class:"report-card"},Gme={class:"card-body p-4"},Vme={class:"flex flex-col items-center justify-center h-full"},Hme={class:"text-3xl font-bold"},Wme={class:"text-xs text-slate-400 mt-1"},Kme={class:"text-xs text-slate-400 mt-1"},zme={class:"text-xs text-slate-400 mt-1"},jme={class:"text-xs text-slate-400 mt-1"},Yme={class:"text-xs text-slate-400 mt-1"},Xme={class:"text-xs text-slate-400 mt-1"},qme={class:"text-xs text-slate-400 mt-1"},Zme={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Qme={class:"report-card"},Jme={class:"card-body p-4"},ehe={class:"space-y-4"},the={class:"metric-summary-card"},nhe={class:"metric-value"},she={class:"metric-summary-card"},ahe={class:"metric-value"},ohe={class:"metric-summary-card"},lhe={class:"metric-value"},ihe={class:"offer-range-bar"},rhe={class:"flex justify-between mb-1"},che={class:"text-sm font-medium"},dhe={class:"h-2 bg-slate-100 rounded-full overflow-hidden"},uhe={class:"offer-range-bar"},phe={class:"flex justify-between mb-1"},mhe={class:"text-sm font-medium"},hhe={class:"h-2 bg-slate-100 rounded-full overflow-hidden"},fhe={class:"offer-range-bar"},ghe={class:"flex justify-between mb-1"},_he={class:"text-sm font-medium"},vhe={class:"h-2 bg-slate-100 rounded-full overflow-hidden"},bhe={class:"report-card"},Ehe={class:"card-body p-4"},The={class:"space-y-4"},Ahe={class:"grid grid-cols-2 gap-4"},yhe={class:"metric-summary-card"},She={class:"metric-value"},Ihe={class:"metric-summary-card"},Che={class:"metric-value"},xhe={class:"metric-summary-card"},Nhe={class:"metric-value"},Ohe={class:"report-card"},whe={class:"card-body p-4"},Rhe={class:"space-y-4"},$he={class:"metric-summary-card"},Mhe={class:"metric-value"},khe={class:"metric-summary-card"},Lhe={class:"metric-value"},Dhe={class:"metric-summary-card"},Phe={class:"metric-value"},Bhe={class:"metric-summary-card"},Fhe={class:"metric-value"},Uhe={class:"metric-summary-card"},Ghe={class:"metric-value"},Vhe={class:"metric-summary-card"},Hhe={class:"metric-value"},Whe={class:"metric-summary-card"},Khe={class:"metric-value"},zhe={class:"metric-summary-card"},jhe={class:"metric-value"};function Yhe(e,t,n,s,a,o){var m;const l=z("V4Button"),i=z("ReportHeader"),r=z("ReportFilterSelector"),d=z("StageDistributionChart"),u=z("TopAgentsList");return p(),f("div",Hpe,[v(i,{"header-title":"Relatrios Kanban"},{default:K(()=>[v(l,{label:"Baixar Relatrio",icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["onClick"])]),_:1}),c("div",Wpe,[v(r,{showFunnelFilter:!0,showAgentsFilter:!0,showInboxFilter:!1,"show-business-hours-switch":!1,onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),a.isLoading?(p(),f("div",Kpe,t[0]||(t[0]=[c("div",{class:"loading-spinner"},[c("i",{class:"i-ph-circle-notch text-2xl animate-spin text-blue-500"}),c("span",{class:"ml-3 text-slate-600"},"Carregando mtricas...")],-1)]))):O("",!0),!a.isLoading&&Object.keys(a.metrics.itemsByStage||{}).length===0&&a.userIds&&a.userIds.length>0?(p(),f("div",zpe,t[1]||(t[1]=[Fo('<div class="text-center" data-v-77d8af67><i class="i-ph-user-circle text-6xl text-slate-300 mb-4" data-v-77d8af67></i><h3 class="text-xl font-medium text-slate-600 mb-2" data-v-77d8af67> Nenhum item encontrado </h3><p class="text-slate-500" data-v-77d8af67> O agente selecionado no possui itens vinculados no perodo selecionado. </p><p class="text-sm text-slate-400 mt-2" data-v-77d8af67> Tente alterar o filtro de data ou selecionar outro agente. </p></div>',1)]))):O("",!0),!a.isLoading&&Object.keys(a.metrics.itemsByStage||{}).length>0?(p(),f("div",jpe,[c("div",Ype,[t[5]||(t[5]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-chart-bar text-blue-500"}),Ee(" Resumo Geral ")])],-1)),c("div",Xpe,[c("div",qpe,[t[2]||(t[2]=c("span",{class:"metric-label"},"Itens Totais",-1)),c("span",Zpe,E(a.metrics.totalItems.toLocaleString()),1)]),c("div",Qpe,[t[3]||(t[3]=c("span",{class:"metric-label"},"Valor Total",-1)),c("span",Jpe,E(o.formatCurrency(a.metrics.totalValue)),1)]),c("div",eme,[t[4]||(t[4]=c("span",{class:"metric-label"},"Valor Mdio",-1)),c("span",tme,E(o.formatCurrency(a.metrics.averageValue)),1)])])]),c("div",nme,[t[9]||(t[9]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-calendar-plus text-emerald-500"}),Ee(" Criao de Itens ")])],-1)),c("div",sme,[c("div",ame,[t[6]||(t[6]=c("span",{class:"metric-label"},"Hoje",-1)),c("span",ome,E(a.metrics.stageMetrics.itemsCreatedToday.toLocaleString()),1)]),c("div",lme,[t[7]||(t[7]=c("span",{class:"metric-label"},"Esta Semana",-1)),c("span",ime,E(a.metrics.stageMetrics.itemsCreatedThisWeek.toLocaleString()),1)]),c("div",rme,[t[8]||(t[8]=c("span",{class:"metric-label"},"Este Ms",-1)),c("span",cme,E(a.metrics.stageMetrics.itemsCreatedThisMonth.toLocaleString()),1)])])]),c("div",dme,[t[12]||(t[12]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-users text-indigo-500"}),Ee(" Contatos e Conversas ")])],-1)),c("div",ume,[c("div",pme,[t[10]||(t[10]=c("span",{class:"metric-label"},"Total de Contatos",-1)),c("span",mme,E(a.metrics.contactMetrics.totalContacts.toLocaleString()),1)]),c("div",hme,[t[11]||(t[11]=c("span",{class:"metric-label"},"Conversas",-1)),c("span",fme,E(a.metrics.activityMetrics.itemsWithConversations.toLocaleString()),1)])])])])):O("",!0),!a.isLoading&&Object.keys(a.metrics.itemsByStage||{}).length>0?(p(),f("div",gme,[c("div",_me,[c("div",vme,[c("div",bme,[t[13]||(t[13]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-funnel text-blue-500"}),Ee(" Distribuio por Etapa ")])],-1)),c("div",Eme,[v(d,{labels:Object.keys(a.metrics.itemsByStage||{}),values:Object.values(a.metrics.itemsByStage||{}),colors:Object.keys(a.metrics.itemsByStage||{}).map(h=>{var _,g;return((g=(_=a.metrics.funnelMetrics)==null?void 0:_.stageColors)==null?void 0:g[h])||"#94a3b8"})},null,8,["labels","values","colors"])])]),c("div",Tme,[t[14]||(t[14]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-flag text-rose-500"}),Ee(" Distribuio por Prioridade ")])],-1)),c("div",Ame,[c("div",yme,[(p(!0),f(fe,null,Ae(((m=a.metrics.stageMetrics)==null?void 0:m.priorityDistribution)||{},(h,_)=>(p(),f("div",{key:_,class:"priority-bar"},[c("div",Sme,[c("span",Ime,E(_==="low"?"Baixa":_==="medium"?"Mdia":"Alta"),1),c("span",Cme,E(h),1)]),c("div",xme,[c("div",{class:"h-full rounded-full transition-all duration-500",style:Ct({width:`${h/a.metrics.totalItems*100}%`,backgroundColor:o.getPriorityColor(_)})},null,4)])]))),128))])])])]),c("div",Nme,[c("div",Ome,[t[15]||(t[15]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-users-three text-amber-500"}),Ee(" Principais Agentes ")])],-1)),c("div",wme,[v(u,{agents:o.topAgents},null,8,["agents"])])]),c("div",Rme,[t[17]||(t[17]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-calendar-clock text-blue-500"}),Ee(" Itens com Deadline ")])],-1)),c("div",$me,[c("div",Mme,[c("span",kme,E(o.deadlineCardData.total),1),t[16]||(t[16]=c("span",{class:"text-sm text-slate-500 mt-1"},"Itens com prazo definido",-1)),c("span",Lme,E(o.deadlineCardData.percent)+"% do total",1),c("span",Dme,"Valor total: "+E(o.formatCurrency(o.deadlineCardData.totalValue)),1),c("span",Pme,"Valor mdio: "+E(o.formatCurrency(o.deadlineCardData.avgValue)),1),c("span",Bme,"Prximo deadline: "+E(o.deadlineCardData.nextDeadline),1),c("span",Fme,"Prioridade mais comum: "+E(o.deadlineCardData.mostCommonPriority),1)])])]),c("div",Ume,[t[19]||(t[19]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-handshake text-emerald-500"}),Ee(" Itens com Ofertas ")])],-1)),c("div",Gme,[c("div",Vme,[c("span",Hme,E(o.offersCardData.total),1),t[18]||(t[18]=c("span",{class:"text-sm text-slate-500 mt-1"},"Itens com pelo menos uma oferta",-1)),c("span",Wme,E(o.offersCardData.percent)+"% do total",1),c("span",Kme,"Valor mdio: "+E(o.formatCurrency(o.offersCardData.avgOfferValue)),1),c("span",zme,"Valor total: "+E(o.formatCurrency(o.offersCardData.totalOffersValue)),1),c("span",jme,"Maior oferta: "+E(o.formatCurrency(o.offersCardData.maxOffer)),1),c("span",Yme,"Menor oferta: "+E(o.formatCurrency(o.offersCardData.minOffer)),1),c("span",Xme,"Itens com mltiplas ofertas: "+E(o.offersCardData.multiOfferCount),1),c("span",qme,"Prioridade mais comum: "+E(o.deadlineCardData.mostCommonPriority),1)])])])]),c("div",Zme,[c("div",Qme,[t[27]||(t[27]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-handshake text-emerald-500"}),Ee(" Mtricas de Ofertas ")])],-1)),c("div",Jme,[c("div",ehe,[c("div",the,[t[20]||(t[20]=c("span",{class:"metric-label"},"Itens com Ofertas",-1)),c("span",nhe,E(o.offersCardData.total),1)]),c("div",she,[t[21]||(t[21]=c("span",{class:"metric-label"},"Total de Ofertas",-1)),c("span",ahe,E(o.formatCurrency(o.offersCardData.totalOffersValue)),1)]),c("div",ohe,[t[22]||(t[22]=c("span",{class:"metric-label"},"Valor Mdio",-1)),c("span",lhe,E(o.formatCurrency(o.offersCardData.avgOfferValue)),1)]),t[26]||(t[26]=c("h4",{class:"text-sm font-medium text-slate-600 dark:text-slate-300"}," Distribuio por Valor ",-1)),c("div",ihe,[c("div",rhe,[t[23]||(t[23]=c("span",{class:"text-sm text-slate-600"},"At R$ 1.000",-1)),c("span",che,E(a.metrics.stageMetrics.offerRanges.low),1)]),c("div",dhe,[c("div",{class:"h-full bg-emerald-400 rounded-full transition-all duration-500",style:Ct({width:`${a.metrics.stageMetrics.offerRanges.low/a.metrics.stageMetrics.totalOffers*100}%`})},null,4)])]),c("div",uhe,[c("div",phe,[t[24]||(t[24]=c("span",{class:"text-sm text-slate-600"},"R$ 1.001 a R$ 5.000",-1)),c("span",mhe,E(a.metrics.stageMetrics.offerRanges.medium),1)]),c("div",hhe,[c("div",{class:"h-full bg-emerald-500 rounded-full transition-all duration-500",style:Ct({width:`${a.metrics.stageMetrics.offerRanges.medium/a.metrics.stageMetrics.totalOffers*100}%`})},null,4)])]),c("div",fhe,[c("div",ghe,[t[25]||(t[25]=c("span",{class:"text-sm text-slate-600"},"Acima de R$ 5.000",-1)),c("span",_he,E(a.metrics.stageMetrics.offerRanges.high),1)]),c("div",vhe,[c("div",{class:"h-full bg-emerald-600 rounded-full transition-all duration-500",style:Ct({width:`${a.metrics.stageMetrics.offerRanges.high/a.metrics.stageMetrics.totalOffers*100}%`})},null,4)])])])])]),c("div",bhe,[t[31]||(t[31]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-check-square text-indigo-500"}),Ee(" Mtricas de Checklist ")])],-1)),c("div",Ehe,[c("div",The,[c("div",Ahe,[c("div",yhe,[t[28]||(t[28]=c("span",{class:"metric-label"},"Total de Tarefas",-1)),c("span",She,E(a.metrics.checklistMetrics.totalTasks),1)]),c("div",Ihe,[t[29]||(t[29]=c("span",{class:"metric-label"},"Tarefas Concludas",-1)),c("span",Che,E(a.metrics.checklistMetrics.completedTasks),1)])]),c("div",xhe,[t[30]||(t[30]=c("span",{class:"metric-label"},"Taxa de Concluso",-1)),c("span",Nhe,E(o.formatPercentage(a.metrics.checklistMetrics.completionRate)),1)])])])]),c("div",Ohe,[t[40]||(t[40]=c("div",{class:"card-header"},[c("h3",{class:"flex items-center gap-2"},[c("i",{class:"i-ph-activity text-cyan-500"}),Ee(" Mtricas de Atividade ")])],-1)),c("div",whe,[c("div",Rhe,[c("div",$he,[t[32]||(t[32]=c("span",{class:"metric-label"},"Total de Atividades",-1)),c("span",Mhe,E(a.metrics.activityMetrics.totalActivities),1)]),c("div",khe,[t[33]||(t[33]=c("span",{class:"metric-label"},"Mdia por Item",-1)),c("span",Lhe,E(Number(a.metrics.activityMetrics.averageActivitiesPerItem).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),c("div",Dhe,[t[34]||(t[34]=c("span",{class:"metric-label"},"Com Notas",-1)),c("span",Phe,E(a.metrics.activityMetrics.itemsWithNotes),1)]),c("div",Bhe,[t[35]||(t[35]=c("span",{class:"metric-label"},"Com Anexos",-1)),c("span",Fhe,E(a.metrics.activityMetrics.itemsWithAttachments),1)]),c("div",Uhe,[t[36]||(t[36]=c("span",{class:"metric-label"},"Mudanas de Estgio",-1)),c("span",Ghe,E(a.metrics.activityMetrics.stageChanges),1)]),c("div",Vhe,[t[37]||(t[37]=c("span",{class:"metric-label"},"Mudanas de Valor",-1)),c("span",Hhe,E(a.metrics.activityMetrics.valueChanges),1)]),c("div",Whe,[t[38]||(t[38]=c("span",{class:"metric-label"},"Mudanas de Agente",-1)),c("span",Khe,E(a.metrics.activityMetrics.agentChanges),1)]),c("div",zhe,[t[39]||(t[39]=c("span",{class:"metric-label"},"Com Conversas",-1)),c("span",jhe,E(a.metrics.activityMetrics.itemsWithConversations),1)])])])])])])])):O("",!0)])])}const Xhe=Fe(Vpe,[["render",Yhe],["__scopeId","data-v-77d8af67"]]),il={featureFlag:Mt.REPORTS,permissions:["administrator","report_manage"]},qhe=[{path:"agent",name:"agent_reports",meta:il,component:tce},{path:"inboxes",name:"inbox_reports",meta:il,component:nce},{path:"label",name:"label_reports",meta:il,component:sce},{path:"teams",name:"team_reports",meta:il,component:ace}],Zhe=[{path:"agents_overview",name:"agent_reports_index",meta:{permissions:["administrator","report_manage"]},component:hre},{path:"agents/:id",name:"agent_reports_show",meta:{permissions:["administrator","report_manage"]},component:Yre},{path:"inboxes_overview",name:"inbox_reports_index",meta:{permissions:["administrator","report_manage"]},component:fre},{path:"inboxes/:id",name:"inbox_reports_show",meta:{permissions:["administrator","report_manage"]},component:qre},{path:"teams_overview",name:"team_reports_index",meta:{permissions:["administrator","report_manage"]},component:gre},{path:"teams/:id",name:"team_reports_show",meta:{permissions:["administrator","report_manage"]},component:Qre},{path:"labels_overview",name:"label_reports_index",meta:{permissions:["administrator","report_manage"]},component:_re},{path:"labels/:id",name:"label_reports_show",meta:{permissions:["administrator","report_manage"]},component:ece}],Qhe={routes:[{path:Bt("accounts/:accountId/reports"),component:Iae,children:[{path:"",redirect:e=>({name:"account_overview_reports",params:e.params})},{path:"overview",name:"account_overview_reports",meta:il,component:Fde},{path:"conversation",name:"conversation_reports",meta:il,component:vie},...qhe,...Zhe,{path:"sla",name:"sla_reports",meta:il,component:Zue},{path:"csat",name:"csat_reports",meta:il,component:$ce},{path:"bot",name:"bot_reports",meta:il,component:Bce},{path:"kanban",name:"kanban_reports",meta:{permissions:["administrator","report_manage"],featureFlag:"kanban_board"},component:Xhe}]}]},$S={name:{required:lt,minLength:on(2)},thresholdTime:{decimal:dx,minValue:QE(.001)}},Jhe={props:{threshold:{type:Number,default:null},thresholdUnit:{type:String,default:"Minutes"},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["unit","isInValid","updateThreshold"],setup(){return{v$:Lt()}},data(){return{thresholdTime:this.threshold||"",thresholdUnitValue:this.thresholdUnit,options:[{value:"Minutes",label:"minutes"},{value:"Hours",label:"hours"},{value:"Days",label:"days"}]}},validations:$S,computed:{thresholdTimeErrorMessage(){let e="";return this.v$.thresholdTime.$error&&(!this.v$.thresholdTime.numeric||!this.v$.thresholdTime.minValue)&&(e=this.$t("SLA.FORM.THRESHOLD_TIME.INVALID_FORMAT_ERROR")),e}},watch:{threshold:{immediate:!0,handler(e){Number.isNaN(e)||(this.thresholdTime=e)}},thresholdUnit:{immediate:!0,handler(e){this.thresholdUnitValue=e}}},methods:{onThresholdUnitChange(){this.$emit("unit",this.thresholdUnitValue)},onThresholdTimeChange(){this.v$.thresholdTime.$touch();const e=this.v$.thresholdTime.$invalid;this.$emit("isInValid",e),this.$emit("updateThreshold",this.thresholdTime?Number(this.thresholdTime):null)}}},efe={class:"flex items-center w-full gap-3"},tfe={class:"mt-7"},nfe=["value"];function sfe(e,t,n,s,a,o){const l=z("woot-input");return p(),f("div",efe,[v(l,{modelValue:a.thresholdTime,"onUpdate:modelValue":[t[0]||(t[0]=i=>a.thresholdTime=i),o.onThresholdTimeChange],type:"number",class:re([{error:s.v$.thresholdTime.$error},"flex-grow"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:n.label,placeholder:n.placeholder,error:o.thresholdTimeErrorMessage},null,8,["modelValue","class","label","placeholder","error","onUpdate:modelValue"]),c("div",tfe,[pe(c("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>a.thresholdUnitValue=i),class:"px-4 py-1.5 min-w-[6.5rem] h-10 text-sm font-medium border-0 rounded-xl hover:cursor-pointer pr-7",onChange:t[2]||(t[2]=(...i)=>o.onThresholdUnitChange&&o.onThresholdUnitChange(...i))},[(p(!0),f(fe,null,Ae(a.options,(i,r)=>(p(),f("option",{key:r,value:i.value},E(i.label),9,nfe))),128))],544),[[zt,a.thresholdUnitValue]])])])}const afe=Fe(Jhe,[["render",sfe]]),ofe={components:{SlaTimeInput:afe,NextButton:ce,ToggleSwitch:so},props:{selectedResponse:{type:Object,default:()=>{}},submitLabel:{type:String,required:!0}},emits:["close","submitSla"],setup(){return{v$:Lt()}},data(){return{name:"",description:"",isSlaTimeInputsInvalid:!1,slaTimeInputsValidation:{},slaTimeInputs:[{threshold:null,unit:"Minutes",label:"SLA.FORM.FIRST_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.FIRST_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.NEXT_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.NEXT_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.RESOLUTION_TIME.LABEL",placeholder:"SLA.FORM.RESOLUTION_TIME.PLACEHOLDER"}],onlyDuringBusinessHours:!1}},validations:$S,computed:{...St({uiFlags:"sla/getUIFlags"}),isSubmitDisabled(){return this.v$.name.$invalid||this.isSlaTimeInputsInvalid||this.uiFlags.isUpdating},slaNameErrorMessage(){let e="";return this.v$.name.$error&&(this.v$.name.required?this.v$.name.minLength||(e=this.$t("SLA.FORM.NAME.MINIMUM_LENGTH_ERROR")):e=this.$t("SLA.FORM.NAME.REQUIRED_ERROR")),e}},mounted(){this.selectedResponse&&this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){const{name:e,description:t,first_response_time_threshold:n,next_response_time_threshold:s,resolution_time_threshold:a,only_during_business_hours:o}=this.selectedResponse;this.name=e,this.description=t,this.onlyDuringBusinessHours=o;const l=[n,s,a];this.slaTimeInputs.forEach((i,r)=>{const d=aT(l[r],{minute:"Minutes",hour:"Hours",day:"Days"});i.threshold=d.time,i.unit=d.unit})},updateThreshold(e,t){this.slaTimeInputs[e].threshold=t},updateUnit(e,t){this.slaTimeInputs[e].unit=t},onSubmit(){const e={name:this.name,description:this.description,first_response_time_threshold:this.convertToSeconds(0),next_response_time_threshold:this.convertToSeconds(1),resolution_time_threshold:this.convertToSeconds(2),only_during_business_hours:this.onlyDuringBusinessHours};this.$emit("submitSla",e)},convertToSeconds(e){const{threshold:t,unit:n}=this.slaTimeInputs[e];return t===null||t===0?null:Number(t*({Minutes:60,Hours:3600,Days:86400}[n]||1))},handleIsInvalid(e,t){this.slaTimeInputsValidation={...this.slaTimeInputsValidation,[e]:t},this.checkValidationState()},checkValidationState(){const e=Object.values(this.slaTimeInputsValidation).some(t=>t);this.isSlaTimeInputsInvalid=e}}},lfe={class:"flex flex-col h-auto overflow-auto"},ife={class:"mt-3 flex h-10 items-center text-sm w-full gap-2 border border-solid border-n-strong px-3 py-1.5 rounded-xl justify-between"},rfe={for:"sla_bh",class:"text-n-slate-11"},cfe={class:"flex items-center justify-end w-full gap-2 mt-8"};function dfe(e,t,n,s,a,o){const l=z("woot-input"),i=z("SlaTimeInput"),r=z("ToggleSwitch"),d=z("NextButton");return p(),f("div",lfe,[c("form",{class:"flex flex-wrap mx-0",onSubmit:t[3]||(t[3]=ze((...u)=>o.onSubmit&&o.onSubmit(...u),["prevent"]))},[v(l,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=u=>a.name=u),class:re([{error:s.v$.name.$error},"w-full"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.NAME.LABEL"),placeholder:e.$t("SLA.FORM.NAME.PLACEHOLDER"),error:o.slaNameErrorMessage,onInput:s.v$.name.$touch,onBlur:s.v$.name.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),v(l,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=u=>a.description=u),class:"w-full",styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("SLA.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),(p(!0),f(fe,null,Ae(a.slaTimeInputs,(u,m)=>(p(),V(i,{key:m,threshold:u.threshold,"threshold-unit":u.unit,label:e.$t(u.label),placeholder:e.$t(u.placeholder),onUpdateThreshold:h=>o.updateThreshold(m,h),onUnit:h=>o.updateUnit(m,h),onIsInValid:h=>o.handleIsInvalid(m,h)},null,8,["threshold","threshold-unit","label","placeholder","onUpdateThreshold","onUnit","onIsInValid"]))),128)),c("div",ife,[c("span",rfe,E(e.$t("SLA.FORM.BUSINESS_HOURS.PLACEHOLDER")),1),v(r,{id:"sla_bh",modelValue:a.onlyDuringBusinessHours,"onUpdate:modelValue":t[2]||(t[2]=u=>a.onlyDuringBusinessHours=u)},null,8,["modelValue"])]),c("div",cfe,[v(d,{faded:"",slate:"",type:"reset",label:e.$t("SLA.FORM.CANCEL"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(d,{type:"submit",label:n.submitLabel,disabled:o.isSubmitDisabled,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const ufe=Fe(ofe,[["render",dfe]]),pfe={components:{SlaForm:ufe},emits:["close"],methods:{onClose(){this.$emit("close")},async addSLA(e){try{await this.$store.dispatch("sla/create",e),_e(this.$t("SLA.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.message||this.$t("SLA.ADD.API.ERROR_MESSAGE");_e(n)}}}},mfe={class:"flex flex-col h-auto overflow-auto"};function hfe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("SlaForm");return p(),f("div",mfe,[v(l,{"header-title":e.$t("SLA.ADD.TITLE"),"header-content":e.$t("SLA.ADD.DESC")},null,8,["header-title","header-content"]),v(i,{"submit-label":e.$t("SLA.FORM.CREATE"),onSubmitSla:o.addSLA,onClose:o.onClose},null,8,["submit-label","onSubmitSla","onClose"])])}const ffe=Fe(pfe,[["render",hfe]]),gfe={class:"flex relative flex-col sm:flex-row p-4 gap-4 sm:p-6 justify-between group outline outline-n-container outline-1 bg-n-solid-2 rounded-2xl shadow w-full"},_fe={class:"flex flex-col min-w-0 items-start gap-3 max-w-[480px] w-full"},vfe={class:"flex items-center justify-between w-full gap-3 sm:justify-normal whitespace-nowrap"},bfe={class:"justify-between tracking-tight font-medium truncate w-fit sm:justify-normal text-n-slate-12"},Efe={class:"text-base text-n-slate-11 max-w-[25rem] w-full line-clamp-2"},Tfe={key:0,class:"absolute flex-col items-center hidden gap-1 border-none ltr:-right-3 rtl:-left-3 top-3 group-hover:flex"},MS={__name:"BaseSettingsListItem",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",gfe,[at(t.$slots,"leftSection",{},()=>[c("div",_fe,[c("div",vfe,[c("h3",bfe,[at(t.$slots,"title",{},()=>[Ee(E(e.title),1)])]),at(t.$slots,"label")]),c("p",Efe,[at(t.$slots,"description",{},()=>[Ee(E(e.description),1)])])])]),at(t.$slots,"rightSection"),t.$slots.actions?(p(),f("div",Tfe,[at(t.$slots,"actions")])):O("",!0)]))}},Afe={class:"flex flex-row items-start w-full h-full gap-1 sm:items-end sm:px-6 sm:py-2 sm:gap-2 sm:flex-col"},yfe={class:"inline-flex items-center gap-1 tracking-[-0.6%] text-sm ltr:pl-1.5 sm:ltr:pl-0 rtl:pr-1.5 sm:rtl:pr-0 text-n-slate-11"},Sfe={class:"text-sm sm:text-2xl font-medium tracking-[-1.5%] text-n-slate-12"},Lh={__name:"SLAResponseTime",props:{responseType:{type:String,default:""},responseTime:{type:String,default:""}},setup(e){return(t,n)=>{const s=z("fluent-icon"),a=_t("tooltip");return p(),f("div",Afe,[c("span",yfe,[pe(v(s,{size:"14",icon:"information",type:"outline",class:"flex-shrink-0 hidden text-sm font-normal sm:flex sm:font-medium text-n-slate-11"},null,512),[[a,t.$t(`SLA.LIST.RESPONSE_TYPES.${e.responseType}`),void 0,{left:!0}]]),Ee(" "+E(t.$t(`SLA.LIST.RESPONSE_TYPES.SHORT_HAND.${e.responseType}`))+" ",1),n[0]||(n[0]=c("span",{class:"flex sm:hidden"},":",-1))]),c("span",Sfe,E(e.responseTime),1)])}}},Ife={class:"inline-flex items-center min-w-0 gap-1 px-1.5 sm:px-2 py-1 border border-solid rounded-lg border-n-weak"},Cfe={__name:"SLABusinessHoursLabel",props:{hasBusinessHours:{type:Boolean,required:!0}},setup(e){return(t,n)=>{const s=z("fluent-icon");return p(),f("div",Ife,[v(s,{size:"14",icon:e.hasBusinessHours?"alarm-on":"alarm-off",type:"outline",class:re(["flex-shrink-0",e.hasBusinessHours?"text-n-slate-11":"text-n-slate-10"])},null,8,["icon","class"]),c("span",{class:re(["hidden text-xs tracking-[0.2%] font-normal truncate sm:block",e.hasBusinessHours?"text-n-slate-11":"text-n-slate-10"])},E(e.hasBusinessHours?t.$t("SLA.LIST.BUSINESS_HOURS_ON"):t.$t("SLA.LIST.BUSINESS_HOURS_OFF")),3)])}}},xfe={class:"flex items-center divide-x rtl:divide-x-reverse sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-n-weak gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between divide-n-weak"},Wf={__name:"SLAListItem",props:{slaName:{type:String,required:!0},description:{type:String,required:!0},firstResponse:{type:String,required:!0},nextResponse:{type:String,required:!0},resolutionTime:{type:String,required:!0},hasBusinessHours:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=t;return(s,a)=>{const o=_t("tooltip");return p(),V(MS,{class:"sm:divide-x sm:divide-n-weak",title:e.slaName,description:e.description},{label:K(()=>[v(Cfe,{"has-business-hours":e.hasBusinessHours},null,8,["has-business-hours"])]),rightSection:K(()=>[c("div",xfe,[v(Lh,{"response-type":"FRT","response-time":e.firstResponse},null,8,["response-time"]),v(Lh,{"response-type":"NRT","response-time":e.nextResponse},null,8,["response-time"]),v(Lh,{"response-type":"RT","response-time":e.resolutionTime},null,8,["response-time"])])]),actions:K(()=>[pe(v(ce,{faded:"",ruby:"",xs:"",icon:"i-lucide-trash-2","is-loading":e.isLoading,onClick:a[0]||(a[0]=l=>n("delete"))},null,8,["is-loading"]),[[o,s.$t("SLA.FORM.DELETE"),void 0,{top:!0}]])]),_:1},8,["title","description"])}}},Nfe={class:"w-full min-h-[12rem] relative"},Ofe={class:"w-full space-y-3"},wfe={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},kS={__name:"BaseEmptyState",setup(e){return(t,n)=>(p(),f("div",Nfe,[c("div",Ofe,[v(Wf,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_1"),description:t.$t("SLA.LIST.EMPTY.DESC_1"),"first-response":"20m","next-response":"1h","resolution-time":"24h","has-business-hours":""},null,8,["sla-name","description"]),v(Wf,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_2"),description:t.$t("SLA.LIST.EMPTY.DESC_2"),"first-response":"2h","next-response":"4h","resolution-time":"4d","has-business-hours":""},null,8,["sla-name","description"])]),c("div",wfe,[at(t.$slots,"default")])]))}},Rfe={class:"max-w-xs text-sm font-medium text-center"},$fe={__name:"SLAEmptyState",emits:["primaryAction"],setup(e,{emit:t}){const n=t,s=()=>n("primaryAction");return(a,o)=>(p(),V(kS,null,{default:K(()=>[c("p",Rfe,E(a.$t("SLA.LIST.404")),1),v(ce,{icon:"i-lucide-plus",class:"mt-4",label:a.$t("SLA.ADD_ACTION_LONG"),onClick:s},null,8,["label"])]),_:1}))}},Mfe={__name:"SLAHeader",props:{showActions:{type:Boolean,default:!0}},emits:["add"],setup(e){return(t,n)=>(p(),V(js,{title:t.$t("SLA.HEADER"),description:t.$t("SLA.DESCRIPTION"),"link-text":t.$t("SLA.LEARN_MORE"),"feature-name":"sla"},Yo({_:2},[e.showActions?{name:"actions",fn:K(()=>[v(ce,{label:t.$t("SLA.ADD_ACTION"),icon:"i-lucide-circle-plus",onClick:n[0]||(n[0]=s=>t.$emit("add"))},null,8,["label"])]),key:"0"}:void 0]),1032,["title","description","link-text"]))}},kfe={class:"flex items-center sm:rtl:!border-l-0 sm:rtl:!border-r border-n-weak gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between"},Lfe={__name:"SLAListItemLoading",setup(e){return(t,n)=>(p(),V(MS,{class:"opacity-50"},{title:K(()=>n[0]||(n[0]=[c("div",{class:"w-24 h-[26px] rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])),description:K(()=>n[1]||(n[1]=[c("div",{class:"w-64 h-4 mb-0.5 rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1),c("div",{class:"w-48 h-4 rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])),label:K(()=>n[2]||(n[2]=[c("div",{class:"w-32 h-[26px] bg-n-slate-4 dark:bg-n-slate-6 animate-pulse rounded-md"},null,-1)])),rightSection:K(()=>[c("div",kfe,[(p(),f(fe,null,Ae(3,s=>c("div",{key:s,class:"flex justify-end w-1/3 h-full px-4"},n[3]||(n[3]=[c("div",{class:"w-32 h-full rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)]))),64))])]),_:1}))}},Dfe={class:"flex flex-col max-w-md px-6 py-6 border shadow bg-n-solid-1 rounded-xl border-n-weak"},Pfe={class:"flex items-center w-full gap-2 mb-4"},Bfe={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},Ffe={class:"text-base font-medium text-n-slate-12"},Ufe={class:"text-sm font-normal text-n-slate-11"},Gfe={class:"text-sm font-normal text-n-slate-11"},Vfe={key:0},Hfe={class:"mt-2 text-xs tracking-tight text-center text-n-slate-11"},Wfe={key:1,href:"/super_admin",class:"block w-full"},N_={__name:"BasePaywallModal",props:{featurePrefix:{type:String,required:!0},i18nKey:{type:String,required:!0},isOnChatwootCloud:{type:Boolean,default:!1},isSuperAdmin:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=t;return(s,a)=>{const o=_t("dompurify-html");return p(),f("div",Dfe,[c("div",Pfe,[c("span",Bfe,[v(Wt,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),c("span",Ffe,E(s.$t(`${e.featurePrefix}.PAYWALL.TITLE`)),1)]),pe(c("p",Ufe,null,512),[[o,s.$t(`${e.featurePrefix}.${e.i18nKey}.AVAILABLE_ON`)]]),c("p",Gfe,[Ee(E(s.$t(`${e.featurePrefix}.${e.i18nKey}.UPGRADE_PROMPT`))+" ",1),!e.isOnChatwootCloud&&!e.isSuperAdmin?(p(),f("span",Vfe,E(s.$t(`${e.featurePrefix}.ENTERPRISE_PAYWALL.ASK_ADMIN`)),1)):O("",!0)]),e.isOnChatwootCloud?(p(),f(fe,{key:0},[v(ce,{blue:"",solid:"",md:"",onClick:a[0]||(a[0]=l=>n("upgrade"))},{default:K(()=>[Ee(E(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1}),c("span",Hfe,E(s.$t(`${e.featurePrefix}.PAYWALL.CANCEL_ANYTIME`)),1)],64)):e.isSuperAdmin?(p(),f("a",Wfe,[v(ce,{solid:"",blue:"",md:"",class:"w-full"},{default:K(()=>[Ee(E(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1})])):O("",!0)])}}},Kfe={__name:"SLAPaywallEnterprise",props:{isSuperAdmin:{type:Boolean,default:!1},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=e,s=t,a=n.isOnChatwootCloud?"PAYWALL":"ENTERPRISE_PAYWALL";return(o,l)=>(p(),V(kS,null,{default:K(()=>[v(N_,{"feature-prefix":"SLA","i18n-key":I(a),"is-on-chatwoot-cloud":e.isOnChatwootCloud,"is-super-admin":e.isSuperAdmin,onUpgrade:l[0]||(l[0]=i=>s("upgrade"))},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])]),_:1}))}},zfe={components:{AddSLA:ffe,SettingsLayout:ro,SLAEmptyState:$fe,SLAHeader:Mfe,SLAListItem:Wf,SLAListItemLoading:Lfe,SLAPaywallEnterprise:Kfe},data(){return{loading:{},showAddPopup:!1,showDeleteConfirmationPopup:!1,selectedResponse:{}}},computed:{...St({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",records:"sla/getSLA",currentUser:"getCurrentUser",accountId:"getCurrentAccountId",uiFlags:"sla/getUIFlags"}),deleteConfirmText(){return this.$t("SLA.DELETE.CONFIRM.YES")},deleteRejectText(){return this.$t("SLA.DELETE.CONFIRM.NO")},deleteMessage(){return` ${this.selectedResponse.name}`},isBehindAPaywall(){return!this.isFeatureEnabledonAccount(this.accountId,"sla")},isSuperAdmin(){return this.currentUser.type==="SuperAdmin"}},mounted(){this.$store.dispatch("sla/get")},methods:{openAddPopup(){this.isBehindAPaywall||(this.showAddPopup=!0)},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedResponse=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},confirmDeletion(){this.loading[this.selectedResponse.id]=!0,this.closeDeletePopup(),this.deleteSla(this.selectedResponse.id)},deleteSla(e){this.$store.dispatch("sla/delete",e).then(()=>{_e(this.$t("SLA.DELETE.API.SUCCESS_MESSAGE"))}).catch(()=>{_e(this.$t("SLA.DELETE.API.ERROR_MESSAGE"))}).finally(()=>{this.loading[this.selectedResponse.id]=!1})},displayTime(e){const{time:t,unit:n}=aT(e,{minute:"m",hour:"h",day:"d"});return t?`${t}${n}`:"-"},onClickCTA(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})}}},jfe={key:2,class:"flex flex-col w-full h-full gap-3"};function Yfe(e,t,n,s,a,o){const l=z("SLAHeader"),i=z("SLAListItemLoading"),r=z("SLAPaywallEnterprise"),d=z("SLAEmptyState"),u=z("SLAListItem"),m=z("AddSLA"),h=z("woot-modal"),_=z("woot-delete-modal"),g=z("SettingsLayout");return p(),V(g,{"is-loading":e.uiFlags.isFetching,"loading-message":e.$t("SLA.LOADING")},{header:K(()=>[v(l,{"show-actions":e.records.length>0,onAdd:o.openAddPopup},null,8,["show-actions","onAdd"])]),loading:K(()=>[(p(),f(fe,null,Ae(2,T=>v(i,{key:T,class:"mb-3"})),64))]),body:K(()=>[o.isBehindAPaywall?(p(),V(r,{key:0,"is-super-admin":o.isSuperAdmin,"is-on-chatwoot-cloud":e.isOnChatwootCloud,onUpgrade:o.onClickCTA},null,8,["is-super-admin","is-on-chatwoot-cloud","onUpgrade"])):e.records.length?(p(),f("div",jfe,[(p(!0),f(fe,null,Ae(e.records,T=>(p(),V(u,{key:T.title,"sla-name":T.name,description:T.description,"first-response":o.displayTime(T.first_response_time_threshold),"next-response":o.displayTime(T.next_response_time_threshold),"resolution-time":o.displayTime(T.resolution_time_threshold),"has-business-hours":T.only_during_business_hours,"is-loading":a.loading[T.id],onDelete:S=>o.openDeletePopup(T)},null,8,["sla-name","description","first-response","next-response","resolution-time","has-business-hours","is-loading","onDelete"]))),128))])):(p(),V(d,{key:1,onPrimaryAction:o.openAddPopup},null,8,["onPrimaryAction"])),v(h,{show:a.showAddPopup,"onUpdate:show":t[0]||(t[0]=T=>a.showAddPopup=T),"on-close":o.hideAddPopup},{default:K(()=>[v(m,{onClose:o.hideAddPopup},null,8,["onClose"])]),_:1},8,["show","on-close"]),v(_,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=T=>a.showDeleteConfirmationPopup=T),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:e.$t("SLA.DELETE.CONFIRM.TITLE"),message:e.$t("SLA.DELETE.CONFIRM.MESSAGE"),"message-value":o.deleteMessage,"confirm-text":o.deleteConfirmText,"reject-text":o.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message"])}const Xfe=Fe(zfe,[["render",Yfe]]),O0={featureFlag:Mt.SLA,permissions:["administrator"],installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]},qfe={routes:[{path:Bt("accounts/:accountId/settings/sla"),component:Aa,props:{},children:[{path:"",name:"sla_wrapper",meta:O0,redirect:e=>({name:"sla_list",params:e.params})},{path:"list",name:"sla_list",meta:O0,component:Xfe}]}]},Zfe={class:"flex-1 overflow-auto"},Qfe={class:"mt-6 flex-1 text-n-slate-11"},Jfe={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},ege={key:2,class:"min-w-full divide-y divide-n-weak"},tge={class:"divide-y divide-n-weak"},nge={class:"py-4 ltr:pr-4 rtl:pl-4"},sge={class:"block font-medium capitalize"},age={class:"mb-0"},oge={class:"py-4 flex justify-end gap-1"},lge={__name:"Index",setup(e){const t=yt(),{t:n}=Pe(),s=Nn(),a=C(()=>s["teams/getTeams"].value),o=C(()=>s["teams/getUIFlags"].value),{isAdmin:l}=io(),i=F({}),r=async({id:A})=>{try{i.value[A]=!0,await t.dispatch("teams/delete",A),_e(n("TEAMS_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{_e(n("TEAMS_SETTINGS.DELETE.API.ERROR_MESSAGE"))}finally{i.value[A]=!1}},d=F(!1),u=F({}),m=A=>{d.value=!0,u.value=A},h=()=>{d.value=!1,u.value={}},_=()=>{r(u.value),h()},g=C(()=>`${n("TEAMS_SETTINGS.DELETE.CONFIRM.YES")} ${u.value.name}`),T=C(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.NO")),S=C(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.TITLE",{teamName:u.value.name})),b=C(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.PLACE_HOLDER",{teamName:u.value.name}));return(A,y)=>{const x=z("router-link"),$=z("woot-loading-state"),N=z("woot-confirm-delete-modal"),w=_t("tooltip");return p(),f("div",Zfe,[v(js,{title:A.$t("TEAMS_SETTINGS.HEADER"),description:A.$t("TEAMS_SETTINGS.DESCRIPTION"),"link-text":A.$t("TEAMS_SETTINGS.LEARN_MORE"),"feature-name":"team_management"},{actions:K(()=>[I(l)?(p(),V(x,{key:0,to:{name:"settings_teams_new"}},{default:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:A.$t("TEAMS_SETTINGS.NEW_TEAM")},null,8,["label"])]),_:1})):O("",!0)]),_:1},8,["title","description","link-text"]),c("div",Qfe,[o.value.isFetching?(p(),V($,{key:0,message:A.$t("TEAMS_SETTINGS.LOADING")},null,8,["message"])):a.value.length?(p(),f("table",ege,[c("tbody",tge,[(p(!0),f(fe,null,Ae(a.value,D=>(p(),f("tr",{key:D.id},[c("td",nge,[c("span",sge,E(D.name),1),c("p",age,E(D.description),1)]),c("td",oge,[v(x,{to:{name:"settings_teams_edit",params:{teamId:D.id}}},{default:K(()=>[I(l)?pe((p(),V(ce,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[w,A.$t("TEAMS_SETTINGS.LIST.EDIT_TEAM"),void 0,{top:!0}]]):O("",!0)]),_:2},1032,["to"]),I(l)?pe((p(),V(ce,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":i.value[D.id],onClick:H=>m(D)},null,8,["is-loading","onClick"])),[[w,A.$t("TEAMS_SETTINGS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):O("",!0)])]))),128))])])):(p(),f("p",Jfe,E(A.$t("TEAMS_SETTINGS.LIST.404")),1))]),d.value?(p(),V(N,{key:0,show:d.value,"onUpdate:show":y[0]||(y[0]=D=>d.value=D),title:S.value,message:A.$t("TEAMS_SETTINGS.DELETE.CONFIRM.MESSAGE"),"confirm-text":g.value,"reject-text":T.value,"confirm-value":u.value.name,"confirm-place-holder-text":b.value,onOnConfirm:_,onOnClose:h},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):O("",!0)])}}},ige={computed:{items(){const e=["WIZARD_CREATE","WIZARD_ADD_AGENTS","WIZARD_FINISH"],t={WIZARD_CREATE:"settings_teams_new",WIZARD_ADD_AGENTS:"settings_teams_add_agents",WIZARD_FINISH:"settings_teams_finish"};return e.map(n=>({title:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.BODY`),route:t[n]}))}}},rge={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full px-5 flex-1"};function cge(e,t,n,s,a,o){const l=z("woot-wizard"),i=z("router-view");return p(),f("div",rge,[v(l,{class:"hidden md:block col-span-2",items:o.items},null,8,["items"]),v(i)])}const dge=Fe(ige,[["render",cge]]),uge={computed:{items(){const e={EDIT_WIZARD_DETAILS:"settings_teams_edit",EDIT_WIZARD_AGENTS:"settings_teams_edit_members",EDIT_WIZARD_FINISH:"settings_teams_edit_finish"};return["EDIT_WIZARD_DETAILS","EDIT_WIZARD_AGENTS","EDIT_WIZARD_FINISH"].map(n=>({title:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.BODY`),route:e[n]}))}}},pge={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full px-5 flex-1"};function mge(e,t,n,s,a,o){const l=z("woot-wizard"),i=z("router-view");return p(),f("div",pge,[v(l,{class:"hidden md:block col-span-2",items:o.items},null,8,["items"]),v(i)])}const hge=Fe(uge,[["render",mge]]),fge={title:{required:lt,minLength:on(2)},description:{},showOnSidebar:{}},gge={components:{NextButton:ce,FormInput:df},props:{onSubmit:{type:Function,default:()=>{}},submitInProgress:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},submitButtonText:{type:String,default:""}},setup(e){const t=e.formData||{},{description:n="",name:s="",allow_auto_assign:a=!0}=t,o=os({description:n,title:s,allowAutoAssign:a}),i=Lt(fge,o);return{state:o,v$:i}},methods:{handleSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.onSubmit({description:this.state.description,name:this.state.title,allow_auto_assign:this.state.allowAutoAssign})}}},_ge={class:"flex-shrink-0 w-full"},vge={class:"w-full flex items-center gap-2"},bge={for:"conversation_creation"},Ege={class:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},Tge={class:"w-full"};function Age(e,t,n,s,a,o){const l=z("FormInput"),i=z("NextButton");return p(),f("div",_ge,[c("form",{class:"mx-0 grid gap-4",onSubmit:t[3]||(t[3]=ze((...r)=>o.handleSubmit&&o.handleSubmit(...r),["prevent"]))},[v(l,{modelValue:s.state.title,"onUpdate:modelValue":t[0]||(t[0]=r=>s.state.title=r),name:"title",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.NAME.PLACEHOLDER"),"has-error":s.v$.title.$error,"error-message":s.v$.title.$error?s.v$.title.$errors[0].$message:"",onBlur:s.v$.title.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),v(l,{modelValue:s.state.description,"onUpdate:modelValue":t[1]||(t[1]=r=>s.state.description=r),name:"description",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.PLACEHOLDER"),"has-error":s.v$.description.$error,"error-message":s.v$.description.$error?s.v$.description.$errors[0].$message:"",onBlur:s.v$.description.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),c("div",vge,[pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.state.allowAutoAssign=r),type:"checkbox",value:!0},null,512),[[Xt,s.state.allowAutoAssign]]),c("label",bge,E(e.$t("TEAMS_SETTINGS.FORM.AUTO_ASSIGN.LABEL")),1)]),c("div",Ege,[c("div",Tge,[v(i,{type:"submit",label:n.submitButtonText,disabled:s.v$.title.$invalid||n.submitInProgress,"is-loading":n.submitInProgress},null,8,["label","disabled","is-loading"])])])],32)])}const LS=Fe(gge,[["render",Age]]),yge={components:{TeamForm:LS,PageHeader:da},data(){return{enabledFeatures:{}}},methods:{async createTeam(e){try{const t=await this.$store.dispatch("teams/create",{...e});Ns.replace({name:"settings_teams_add_agents",params:{page:"new",teamId:t.id}})}catch{_e(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},Sge={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Ige={class:"flex flex-wrap"};function Cge(e,t,n,s,a,o){const l=z("PageHeader"),i=z("TeamForm");return p(),f("div",Sge,[v(l,{"header-title":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),c("div",Ige,[v(i,{"on-submit":o.createTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.FORM.SUBMIT_CREATE")},null,8,["on-submit","submit-button-text"])])])}const xge=Fe(yge,[["render",Cge]]),Nge={components:{TeamForm:LS,PageHeader:da,Spinner:Zs},data(){return{enabledFeatures:{}}},computed:{teamData(){const{teamId:e}=this.$route.params;return this.$store.getters["teams/getTeam"](e)},showTeamForm(){const{id:e}=this.teamData;return e&&!this.uiFlags.isFetching},...St({uiFlags:"teams/getUIFlags"})},methods:{async updateTeam(e){try{const{teamId:t}=this.$route.params;await this.$store.dispatch("teams/update",{id:t,...e}),Ns.replace({name:"settings_teams_edit_members",params:{page:"edit",teamId:t}})}catch{_e(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},Oge={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},wge={class:"flex flex-wrap"};function Rge(e,t,n,s,a,o){const l=z("PageHeader"),i=z("TeamForm"),r=z("Spinner");return p(),f("div",Oge,[v(l,{"header-title":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),c("div",wge,[o.showTeamForm?(p(),V(i,{key:0,"on-submit":o.updateTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.BUTTON_TEXT"),"form-data":o.teamData},null,8,["on-submit","submit-button-text","form-data"])):(p(),V(r,{key:1}))])])}const $ge=Fe(Nge,[["render",Rge]]),Mge={components:{NextButton:ce,Avatar:Ft},props:{agentList:{type:Array,default:()=>[]},selectedAgents:{type:Array,default:()=>[]},updateSelectedAgents:{type:Function,default:()=>{}},isWorking:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},data(){return{}},computed:{selectedAgentCount(){return this.selectedAgents.length},allAgentsSelected(){return this.selectedAgents.length===this.agentList.length},disableSubmitButton(){return this.selectedAgentCount===0}},methods:{isAgentSelected(e){return this.selectedAgents.includes(e)},handleSelectAgent(e){const t=this.isAgentSelected(e);let n=[];t?n=this.selectedAgents.filter(s=>s!==e):n=[...this.selectedAgents,e],this.updateSelectedAgents(n)},selectAllAgents(){const e=this.agentList.map(t=>t.id);this.updateSelectedAgents(e)},agentRowClass(e){return{"is-active":this.isAgentSelected(e)}}}},kge={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},Lge={class:"ltr:pl-2.5 rtl:pr-2.5"},Dge={class:"flex items-center"},Pge=["checked","title"],Bge={class:"text-n-slate-12 ltr:pl-2.5 rtl:pr-2.5"},Fge={class:"text-n-slate-12 ltr:pl-2.5 rtl:pr-2.5"},Uge={class:"w-12"},Gge={class:"flex items-center"},Vge=["checked","onClick"],Hge={class:"flex items-center gap-2"},Wge={class:"text-base mb-0 text-n-slate-12"},Kge={class:"flex items-center justify-between mt-2"};function zge(e,t,n,s,a,o){const l=z("Avatar"),i=z("NextButton");return p(),f("div",null,[t[1]||(t[1]=c("div",{class:"add-agents__header"},null,-1)),c("table",null,[c("thead",kge,[c("tr",null,[c("td",Lge,[c("div",Dge,[c("input",{name:"select-all-agents",type:"checkbox",checked:o.allAgentsSelected?"checked":"",title:e.$t("TEAMS_SETTINGS.AGENTS.SELECT_ALL"),onClick:t[0]||(t[0]=ze((...r)=>o.selectAllAgents&&o.selectAllAgents(...r),["self"]))},null,8,Pge)])]),c("td",Bge,E(e.$t("TEAMS_SETTINGS.AGENTS.AGENT")),1),c("td",Fge,E(e.$t("TEAMS_SETTINGS.AGENTS.EMAIL")),1)])]),c("tbody",null,[(p(!0),f(fe,null,Ae(n.agentList,r=>(p(),f("tr",{key:r.id,class:re([o.agentRowClass(r.id),"border-b border-n-weak [&>td]:p-2.5 [&>td]:text-n-slate-12"])},[c("td",Uge,[c("div",Gge,[c("input",{type:"checkbox",checked:o.isAgentSelected(r.id),onClick:ze(()=>o.handleSelectAgent(r.id),["self"])},null,8,Vge)])]),c("td",null,[c("div",Hge,[v(l,{src:r.thumbnail,name:r.name,status:r.availability_status,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),c("h4",Wge,E(r.name),1)])]),c("td",null,E(r.email||"---"),1)],2))),128))])]),c("div",Kge,[c("p",null,E(e.$t("TEAMS_SETTINGS.AGENTS.SELECTED_COUNT",{selected:n.selectedAgents.length,total:n.agentList.length})),1),v(i,{type:"submit",label:n.submitButtonText,disabled:o.disableSubmitButton,"is-loading":n.isWorking},null,8,["label","disabled","is-loading"])])])}const DS=Fe(Mge,[["render",zge],["__scopeId","data-v-c0b62c4e"]]),jge={components:{PageHeader:da,AgentSelector:DS},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:Lt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...St({agentList:"agents/getAgents"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.ADD.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)}},mounted(){this.$store.dispatch("agents/get")},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},selectAllAgents(){this.selectedAgents=this.agentList.map(e=>e.id)},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/create",{teamId:e,agentsList:t}),Ns.replace({name:"settings_teams_finish",params:{page:"new",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){_e(n.message)}this.isCreating=!1}}},Yge={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Xge={class:"w-full"},qge={class:"w-full"},Zge={key:0},Qge={class:"error-message pb-2"};function Jge(e,t,n,s,a,o){const l=z("PageHeader"),i=z("AgentSelector");return p(),f("div",Yge,[c("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=ze((...r)=>o.addAgents&&o.addAgents(...r),["prevent"]))},[c("div",Xge,[v(l,{"header-title":o.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.ADD.DESC")},null,8,["header-title","header-content"])]),c("div",qge,[s.v$.selectedAgents.$error?(p(),f("div",Zge,[c("p",Qge,E(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):O("",!0),v(i,{"agent-list":e.agentList,"selected-agents":a.selectedAgents,"update-selected-agents":o.updateSelectedAgents,"is-working":a.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.ADD.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])])],32)])}const e_e=Fe(jge,[["render",Jge]]),t_e={components:{Spinner:Zs,PageHeader:da,AgentSelector:DS},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:Lt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...St({agentList:"agents/getAgents",uiFlags:"teamMembers/getUIFlags"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)},teamMembers(){return this.$store.getters["teamMembers/getTeamMembers"](this.teamId)},showAgentsList(){const{id:e}=this.currentTeam;return e&&!this.uiFlags.isFetching}},async mounted(){const{teamId:e}=this.$route.params;this.$store.dispatch("agents/get");try{await this.$store.dispatch("teamMembers/get",{teamId:e});const t=this.teamMembers.map(n=>n.id);this.updateSelectedAgents(t)}catch{this.updateSelectedAgents([])}},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/update",{teamId:e,agentsList:t}),Ns.replace({name:"settings_teams_edit_finish",params:{page:"edit",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){_e(n.message)}this.isCreating=!1}}},n_e={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},s_e={class:"w-full"},a_e={class:"w-full"},o_e={key:0},l_e={class:"error-message pb-2"};function i_e(e,t,n,s,a,o){const l=z("PageHeader"),i=z("AgentSelector"),r=z("Spinner");return p(),f("div",n_e,[c("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=ze((...d)=>o.addAgents&&o.addAgents(...d),["prevent"]))},[c("div",s_e,[v(l,{"header-title":o.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.DESC")},null,8,["header-title","header-content"])]),c("div",a_e,[s.v$.selectedAgents.$error?(p(),f("div",o_e,[c("p",l_e,E(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):O("",!0),o.showAgentsList?(p(),V(i,{key:1,"agent-list":e.agentList,"selected-agents":a.selectedAgents,"update-selected-agents":o.updateSelectedAgents,"is-working":a.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])):(p(),V(r,{key:2}))])],32)])}const r_e=Fe(t_e,[["render",i_e]]),c_e={components:{NextButton:ce,EmptyState:Lr}},d_e={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},u_e={class:"w-full text-center"};function p_e(e,t,n,s,a,o){const l=z("NextButton"),i=z("router-link"),r=z("EmptyState");return p(),f("div",d_e,[v(r,{title:e.$t("TEAMS_SETTINGS.FINISH.TITLE"),message:e.$t("TEAMS_SETTINGS.FINISH.MESSAGE"),"button-text":e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},{default:K(()=>[c("div",u_e,[v(i,{to:{name:"settings_teams_list"}},{default:K(()=>[v(l,{teal:"",label:e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1})])]),_:1},8,["title","message","button-text"])])}const w0=Fe(c_e,[["render",p_e]]),m_e={routes:[{path:Bt("accounts/:accountId/settings/teams"),component:Aa,children:[{path:"",redirect:e=>({name:"settings_teams_list",params:e.params})},{path:"list",name:"settings_teams_list",component:lge,meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]}}]},{path:Bt("accounts/:accountId/settings/teams"),component:sd,props:()=>({headerTitle:"TEAMS_SETTINGS.HEADER",icon:"people-team",showBackButton:!0}),children:[{path:"new",component:dge,children:[{path:"",name:"settings_teams_new",component:xge,meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/finish",name:"settings_teams_finish",component:w0,meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/agents",name:"settings_teams_add_agents",meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]},component:e_e}]},{path:":teamId/edit",component:hge,children:[{path:"",name:"settings_teams_edit",component:$ge,meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"agents",name:"settings_teams_edit_members",component:r_e,meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"finish",name:"settings_teams_edit_finish",meta:{featureFlag:Mt.TEAM_MANAGEMENT,permissions:["administrator"]},component:w0}]}]}]},h_e={class:"flex flex-col h-auto overflow-auto"},f_e={class:"w-full"},g_e=["placeholder"],__e={class:"w-full"},v_e=["placeholder"],b_e={class:"w-full"},E_e={class:"flex flex-col gap-2.5 mb-4 mt-2"},T_e=["id","value"],A_e=["for"],y_e={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},S_e={__name:"CustomRoleModal",props:{mode:{type:String,default:"add",validator:e=>["add","edit"].includes(e)},selectedRole:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,a=yt(),{t:o}=Pe(),l=F(""),i=F(""),r=F([]),d=F(null),u=os({showLoading:!1,message:""}),m=C(()=>({name:{required:lt,minLength:on(2)},description:{required:lt},selectedPermissions:{required:lt,minLength:on(1)}})),h=Lt(m,{name:l,description:i,selectedPermissions:r}),_=()=>{l.value="",i.value="",r.value=[],h.value.$reset()},g=()=>{l.value=n.selectedRole.name||"",i.value=n.selectedRole.description||"",r.value=n.selectedRole.permissions||[]};ot(r,($,N)=>{const w=$.includes(Kr)&&!N.includes(Kr),D=N.includes(Kr)&&!$.includes(Kr);w?r.value=[...new Set([...r.value,NN,ON])]:D&&(r.value=r.value.filter(H=>H!==Kr))},{deep:!0}),pt(()=>{var $;n.mode==="edit"&&g(),($=d.value)==null||$.focus()});const T=$=>n.mode==="edit"?`CUSTOM_ROLE.EDIT.${$}`:`CUSTOM_ROLE.ADD.${$}`,S=C(()=>o(T("TITLE"))),b=C(()=>o(T("DESC"))),A=C(()=>o(T("SUBMIT"))),y=async()=>{if(h.value.$touch(),!h.value.$invalid){u.showLoading=!0;try{const $={name:l.value,description:i.value,permissions:r.value};n.mode==="edit"?(await a.dispatch("customRole/updateCustomRole",{id:n.selectedRole.id,...$}),_e(o("CUSTOM_ROLE.EDIT.API.SUCCESS_MESSAGE"))):(await a.dispatch("customRole/createCustomRole",$),_e(o("CUSTOM_ROLE.ADD.API.SUCCESS_MESSAGE"))),_(),s("close")}catch($){const N=($==null?void 0:$.message)||o("CUSTOM_ROLE.FORM.API.ERROR_MESSAGE");_e(N)}finally{u.showLoading=!1}}},x=C(()=>h.value.$invalid||u.showLoading);return($,N)=>{const w=z("woot-modal-header");return p(),f("div",h_e,[v(w,{"header-title":S.value,"header-content":b.value},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col w-full",onSubmit:ze(y,["prevent"])},[c("div",f_e,[c("label",{class:re({error:I(h).name.$error})},[Ee(E($.$t("CUSTOM_ROLE.FORM.NAME.LABEL"))+" ",1),pe(c("input",{ref_key:"nameInput",ref:d,"onUpdate:modelValue":N[0]||(N[0]=D=>l.value=D),type:"text",placeholder:$.$t("CUSTOM_ROLE.FORM.NAME.PLACEHOLDER"),onBlur:N[1]||(N[1]=(...D)=>I(h).name.$touch&&I(h).name.$touch(...D))},null,40,g_e),[[mt,l.value,void 0,{trim:!0}]])],2)]),c("div",__e,[c("label",{class:re({error:I(h).description.$error})},[Ee(E($.$t("CUSTOM_ROLE.FORM.DESCRIPTION.LABEL"))+" ",1),pe(c("textarea",{"onUpdate:modelValue":N[2]||(N[2]=D=>i.value=D),rows:3,placeholder:$.$t("CUSTOM_ROLE.FORM.DESCRIPTION.PLACEHOLDER"),onBlur:N[3]||(N[3]=(...D)=>I(h).description.$touch&&I(h).description.$touch(...D))},null,40,v_e),[[mt,i.value]])],2)]),c("div",b_e,[c("label",{class:re({"text-n-ruby-9":I(h).selectedPermissions.$error})},E($.$t("CUSTOM_ROLE.FORM.PERMISSIONS.LABEL")),3),c("div",E_e,[(p(!0),f(fe,null,Ae(I(xN),D=>(p(),f("div",{key:D,class:"flex items-center"},[pe(c("input",{id:D,"onUpdate:modelValue":N[4]||(N[4]=H=>r.value=H),type:"checkbox",value:D,name:"permissions",class:"ltr:mr-2 rtl:ml-2"},null,8,T_e),[[Xt,r.value]]),c("label",{for:D,class:"text-sm font-normal"},E($.$t(`CUSTOM_ROLE.PERMISSIONS.${D.toUpperCase()}`)),9,A_e)]))),128))])]),c("div",y_e,[v(ce,{faded:"",slate:"",type:"reset",label:$.$t("CUSTOM_ROLE.FORM.CANCEL_BUTTON_TEXT"),onClick:N[5]||(N[5]=ze(D=>s("close"),["prevent"]))},null,8,["label"]),v(ce,{type:"submit",label:A.value,disabled:x.value,"is-loading":u.showLoading},null,8,["label","disabled","is-loading"])])],32)])}}},I_e={class:"divide-y divide-n-weak text-n-slate-11"},C_e=["title"],x_e={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},N_e={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},O_e={class:"flex justify-end gap-1 py-4"},PS={__name:"CustomRoleTableBody",props:{roles:{type:Array,required:!0},loading:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=o=>o.permissions.map(l=>s(r_("CUSTOM_ROLE.PERMISSIONS",l))).join(", ");return(o,l)=>{const i=_t("tooltip");return p(),f("tbody",I_e,[(p(!0),f(fe,null,Ae(e.roles,(r,d)=>(p(),f("tr",{key:d},[c("td",{class:"max-w-xs py-4 ltr:pr-4 rtl:pl-4 font-medium truncate align-baseline",title:r.name},E(r.name),9,C_e),c("td",x_e,E(r.description),1),c("td",N_e,E(a(r)),1),c("td",O_e,[pe(v(ce,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:u=>n("edit",r)},null,8,["onClick"]),[[i,o.$t("CUSTOM_ROLE.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),pe(v(ce,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[r.id],onClick:u=>n("delete",r)},null,8,["is-loading","onClick"]),[[i,o.$t("CUSTOM_ROLE.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])}}},w_e={class:"w-full min-h-[12rem] relative"},R_e={class:"w-full space-y-3 text-sm"},$_e={class:"opacity-30 dark:opacity-30"},M_e={class:"mb-0"},k_e={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},L_e={__name:"CustomRolePaywall",setup(e){const t=[{name:"All Permissions",description:"All permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage","contact_manage","report_manage","knowledge_base_manage"]},{name:"Conversation Permissions",description:"Conversation permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage"]},{name:"Contact Permissions",description:"Contact permissions",permissions:["contact_manage"]},{name:"Report Permissions",description:"Report permissions",permissions:["report_manage"]}],n=En(),s=ke("globalConfig/isOnChatwootCloud"),a=ke("getCurrentUser"),o=ke("getCurrentAccountId"),l=C(()=>a.value.type==="SuperAdmin"),i=C(()=>s.value?"PAYWALL":"ENTERPRISE_PAYWALL"),r=()=>{n.push({name:"billing_settings_index",params:{accountId:o.value}})},{t:d}=Pe(),u=C(()=>[d("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),d("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]);return(m,h)=>(p(),f("div",w_e,[c("div",R_e,[c("thead",$_e,[(p(!0),f(fe,null,Ae(u.value,_=>(p(),f("th",{key:_,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},[c("span",M_e,E(_),1)]))),128))]),v(PS,{class:"opacity-25 dark:opacity-20",roles:t,loading:{}})]),c("div",k_e,[v(N_,{"feature-prefix":"CUSTOM_ROLE","i18n-key":i.value,"is-on-chatwoot-cloud":I(s),"is-super-admin":l.value,onUpgrade:r},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])])]))}},D_e={key:1,class:"min-w-full overflow-x-auto divide-y divide-n-weak"},P_e={class:"mb-0"},B_e={__name:"Index",setup(e){const t=yt(),{t:n}=Pe(),s=F(!1),a=F("add"),o=F(null),l=F({}),i=F(!1),r=F({}),d=ke("customRole/getCustomRoles"),u=ke("customRole/getUIFlags"),m=C(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.YES")} ${r.value.name}`),h=C(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.NO")} ${r.value.name}`),_=C(()=>` ${r.value.name} ? `),g=ke("accounts/isFeatureEnabledonAccount"),T=ke("getCurrentAccountId"),S=C(()=>!g.value(T.value,"custom_roles")),b=async()=>{try{await t.dispatch("customRole/getCustomRole")}catch{}};pt(()=>{b()});const A=C(()=>[n("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]),y=k=>{l.value[r.value.id]=!1,r.value={},_e(k)},x=()=>{S.value||(a.value="add",o.value=null,s.value=!0)},$=k=>{a.value="edit",o.value=k,s.value=!0},N=()=>{o.value=null,s.value=!1},w=k=>{i.value=!0,r.value=k},D=()=>{i.value=!1},H=async k=>{try{await t.dispatch("customRole/deleteCustomRole",k),y(n("CUSTOM_ROLE.DELETE.API.SUCCESS_MESSAGE"))}catch(U){const G=(U==null?void 0:U.message)||n("CUSTOM_ROLE.DELETE.API.ERROR_MESSAGE");y(G)}},B=()=>{l[r.value.id]=!0,D(),H(r.value.id)};return(k,U)=>{const G=z("woot-modal"),L=z("woot-delete-modal");return p(),V(ro,{"is-loading":I(u).fetchingList,"loading-message":k.$t("CUSTOM_ROLE.LOADING"),"no-records-found":!I(d).length&&!S.value,"no-records-message":k.$t("CUSTOM_ROLE.LIST.404")},{header:K(()=>[v(js,{title:k.$t("CUSTOM_ROLE.HEADER"),description:k.$t("CUSTOM_ROLE.DESCRIPTION"),"link-text":k.$t("CUSTOM_ROLE.LEARN_MORE"),"feature-name":"canned_responses"},{actions:K(()=>[v(ce,{icon:"i-lucide-circle-plus",label:k.$t("CUSTOM_ROLE.HEADER_BTN_TXT"),disabled:S.value,onClick:x},null,8,["label","disabled"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[S.value?(p(),V(L_e,{key:0})):(p(),f("table",D_e,[c("thead",null,[(p(!0),f(fe,null,Ae(A.value,M=>(p(),f("th",{key:M,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},[c("span",P_e,E(M),1)]))),128))]),v(PS,{roles:I(d),loading:l.value,onEdit:$,onDelete:w},null,8,["roles","loading"])]))]),default:K(()=>[v(G,{show:s.value,"onUpdate:show":U[0]||(U[0]=M=>s.value=M),"on-close":N},{default:K(()=>[v(S_e,{mode:a.value,"selected-role":o.value,onClose:N},null,8,["mode","selected-role"])]),_:1},8,["show"]),v(L,{show:i.value,"onUpdate:show":U[1]||(U[1]=M=>i.value=M),"on-close":D,"on-confirm":B,title:k.$t("CUSTOM_ROLE.DELETE.CONFIRM.TITLE"),message:k.$t("CUSTOM_ROLE.DELETE.CONFIRM.MESSAGE"),"message-value":_.value,"confirm-text":m.value,"reject-text":h.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},F_e={routes:[{path:Bt("accounts/:accountId/settings/custom-roles"),component:Aa,children:[{path:"",redirect:"list"},{path:"list",name:"custom_roles_list",meta:{featureFlag:Mt.CUSTOM_ROLES,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE],permissions:["administrator"]},component:B_e}]}]},U_e={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},G_e={__name:"Wrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=z("router-view");return p(),f("div",U_e,[v(s,null,{default:K(({Component:a})=>[e.keepAlive?(p(),V(Yc,{key:0},[(p(),V(xs(a)))],1024)):(p(),V(xs(a),{key:1}))]),_:1})])}}},V_e={class:"flex flex-col gap-2"},H_e={class:"text-sm font-medium text-n-slate-12"},W_e={__name:"UserProfilePicture",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(e,{emit:t}){const n=t,s=o=>{n("change",o)},a=()=>{n("delete")};return(o,l)=>(p(),f("div",V_e,[c("span",H_e,E(o.$t("PROFILE_SETTINGS.FORM.PICTURE")),1),v(Ft,{src:e.src||"",name:e.name||"",size:72,"allow-upload":"",onUpload:s,onDelete:a},null,8,["src","name"])]))}},K_e={components:{NextButton:ce},props:{name:{type:String,default:""},email:{type:String,default:""},displayName:{type:String,default:""},emailEnabled:{type:Boolean,default:!1}},emits:["updateUser"],setup(){return{v$:Lt()}},data(){return{userName:this.name,userDisplayName:this.displayName,userEmail:this.email,inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{userName:{required:lt,minLength:on(1)},userDisplayName:{},userEmail:{required:lt,email:Zl}},watch:{name:{handler(e){this.userName=e},immediate:!0},displayName:{handler(e){this.userDisplayName=e},immediate:!0},email:{handler(e){this.userEmail=e},immediate:!0}},methods:{async updateUser(){if(this.v$.$touch(),this.v$.$invalid){_e(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}this.$emit("updateUser",{name:this.userName,displayName:this.userDisplayName,email:this.userEmail})}}};function z_e(e,t,n,s,a,o){const l=z("woot-input"),i=z("NextButton");return p(),f("form",{class:"flex flex-col gap-4",onSubmit:t[3]||(t[3]=ze(r=>o.updateUser("profile"),["prevent"]))},[v(l,{modelValue:a.userName,"onUpdate:modelValue":t[0]||(t[0]=r=>a.userName=r),styles:a.inputStyles,class:re({error:s.v$.userName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.NAME.PLACEHOLDER"),error:`${s.v$.userName.$error?e.$t("PROFILE_SETTINGS.FORM.NAME.ERROR"):""}`,onInput:s.v$.userName.$touch,onBlur:s.v$.userName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),v(l,{modelValue:a.userDisplayName,"onUpdate:modelValue":t[1]||(t[1]=r=>a.userDisplayName=r),styles:a.inputStyles,class:re({error:s.v$.userDisplayName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.PLACEHOLDER"),error:`${s.v$.userDisplayName.$error?e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.ERROR"):""}`,onInput:s.v$.userDisplayName.$touch,onBlur:s.v$.userDisplayName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),n.emailEnabled?(p(),V(l,{key:0,modelValue:a.userEmail,"onUpdate:modelValue":t[2]||(t[2]=r=>a.userEmail=r),styles:a.inputStyles,class:re({error:s.v$.userEmail.$error}),label:e.$t("PROFILE_SETTINGS.FORM.EMAIL.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.EMAIL.PLACEHOLDER"),error:`${s.v$.userEmail.$error?e.$t("PROFILE_SETTINGS.FORM.EMAIL.ERROR"):""}`,onInput:s.v$.userEmail.$touch,onBlur:s.v$.userEmail.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"])):O("",!0),c("div",null,[v(i,{type:"submit",label:e.$t("PROFILE_SETTINGS.BTN_TEXT")},null,8,["label"])])],32)}const j_e=Fe(K_e,[["render",z_e]]),Y_e={__name:"MessageSignature",props:{messageSignature:{type:String,default:""}},emits:["updateSignature"],setup(e,{emit:t}){const n=e,s=t,a=sF,o=F(n.messageSignature);ot(()=>n.messageSignature??"",i=>{o.value=i});const l=()=>{s("updateSignature",o.value)};return(i,r)=>(p(),f("form",{class:"flex flex-col gap-6",onSubmit:r[1]||(r[1]=ze(d=>l(),["prevent"]))},[v(nl,{id:"message-signature-input",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=d=>o.value=d),class:"message-editor h-[10rem] !px-3","is-format-mode":"",placeholder:i.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE.PLACEHOLDER"),"enabled-menu-options":I(a),"enable-suggestions":!1,"show-image-resize-toolbar":""},null,8,["modelValue","placeholder","enabled-menu-options"]),c("div",null,[v(ce,{type:"submit",label:i.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.BTN_TEXT")},null,8,["label"])])],32))}},X_e={components:{WithLabel:Wl},props:{id:{type:String,default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},label:{type:String,required:!0},modelValue:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:modelValue"],methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}}},q_e=["id","selected","name"],Z_e={value:"",disabled:"",selected:"",class:"hidden"},Q_e=["value"];function J_e(e,t,n,s,a,o){const l=z("WithLabel");return p(),V(l,{label:n.label,icon:n.icon,name:n.name,"has-error":n.hasError,"error-message":n.errorMessage},{default:K(()=>[c("select",{id:n.id,selected:n.modelValue,name:n.name,class:re([{"text-n-slate-9":!n.modelValue,"text-n-slate-12":n.modelValue,"pl-9":n.icon},"block w-full px-3 py-2 pr-6 mb-0 border-0 shadow-sm appearance-none rounded-xl select-caret leading-6"]),onInput:t[0]||(t[0]=(...i)=>o.onInput&&o.onInput(...i))},[c("option",Z_e,E(n.placeholder),1),at(e.$slots,"default",{},()=>[(p(!0),f(fe,null,Ae(n.options,i=>(p(),f("option",{key:i.value,value:i.value},E(i.label),9,Q_e))),128))],!0)],42,q_e)]),_:3},8,["label","icon","name","has-error","error-message"])}const O_=Fe(X_e,[["render",J_e],["__scopeId","data-v-404c6128"]]),eve={class:"flex gap-2 justify-between w-full items-start"},tve={class:"text-n-gray-12 font-medium leading-6 text-sm"},nve={class:"text-n-gray-11"},sve=["value","selected"],ave={__name:"FontSize",props:{value:{type:String,default:"default"},label:{type:String,default:""},description:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,{fontSizeOptions:a}=jg(),o=C({get:()=>n.value,set:l=>{s("change",l)}});return(l,i)=>(p(),f("div",eve,[c("div",null,[c("label",tve,E(e.label),1),c("p",nve,E(e.description),1)]),v(O_,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r),name:"fontSize",spacing:"compact",class:"min-w-28 mt-px",value:o.value,options:I(a),label:""},{default:K(()=>[(p(!0),f(fe,null,Ae(I(a),r=>(p(),f("option",{key:r.value,value:r.value,selected:r.value===o.value},E(r.label),9,sve))),128))]),_:1},8,["modelValue","value","options"])]))}},ove={class:"flex flex-col gap-2 items-center w-full rounded-t-[5px]"},lve={class:"grid grid-cols-[1fr_auto] items-center w-full gap-1"},ive={class:"overflow-hidden text-base font-medium text-n-slate-12 text-left"},rve={class:"block truncate"},cve=["checked","name"],dve={class:"text-n-slate-12 text-sm line-clamp-2 leading-[1.4] text-start"},uve=["src","alt"],pve=["src","alt"],mve={__name:"HotKeyCard",props:{active:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},lightImage:{type:String,default:""},darkImage:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("button",{class:re(["flex flex-col gap-4 w-full h-fit p-4 rounded-md border border-n-weak dark:border-n-weak",{"border-n-brand ":e.active}])},[c("div",ove,[c("div",lve,[c("div",ive,[c("span",rve,E(e.title),1)]),c("input",{checked:e.active,type:"radio",name:`hotkey-${e.title}`,class:"shadow cursor-pointer grid place-items-center border-2 border-n-strong appearance-none rounded-full w-5 h-5 checked:bg-n-brand before:content-[''] before:bg-n-brand before:border-4 before:rounded-full before:border-n-strong checked:before:w-[18px] checked:before:h-[18px] checked:border checked:border-n-brand"},null,8,cve)]),c("span",dve,E(e.description),1)]),c("div",null,[c("img",{src:e.lightImage,alt:`Light themed image for ${e.title}`,class:"block object-cover w-full dark:hidden"},null,8,uve),c("img",{src:e.darkImage,alt:`Dark themed image for ${e.title}`,class:"hidden object-cover w-full dark:block"},null,8,pve)])],2))}},hve={components:{NextButton:ce},setup(){return{v$:Lt()}},data(){return{currentPassword:"",password:"",passwordConfirmation:"",isPasswordChanging:!1,errorMessage:"",inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{currentPassword:{required:lt},password:{minLength:on(6)},passwordConfirmation:{minLength:on(6),isEqPassword(e){return e===this.password}}},computed:{isButtonDisabled(){return!this.currentPassword||!this.passwordConfirmation||!this.v$.passwordConfirmation.isEqPassword}},methods:{async changePassword(){if(this.v$.$touch(),this.v$.$invalid){_e(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}let e=this.$t("PROFILE_SETTINGS.PASSWORD_UPDATE_SUCCESS");try{await this.$store.dispatch("updatePassword",{password:this.password,passwordConfirmation:this.passwordConfirmation,currentPassword:this.currentPassword})}catch(t){e=Ju(t)||this.$t("RESET_PASSWORD.API.ERROR_MESSAGE")}finally{_e(e)}}}},fve={class:"flex flex-col w-full gap-4"};function gve(e,t,n,s,a,o){const l=z("woot-input"),i=z("NextButton");return p(),f("form",{onSubmit:t[3]||(t[3]=ze(r=>o.changePassword(),["prevent"]))},[c("div",fve,[v(l,{modelValue:a.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=r=>a.currentPassword=r),type:"password",styles:a.inputStyles,class:re({error:s.v$.currentPassword.$error}),label:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.PLACEHOLDER"),error:`${s.v$.currentPassword.$error?e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.ERROR"):""}`,onInput:s.v$.currentPassword.$touch,onBlur:s.v$.currentPassword.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),v(l,{modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=r=>a.password=r),type:"password",styles:a.inputStyles,class:re({error:s.v$.password.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.PLACEHOLDER"),error:`${s.v$.password.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD.ERROR"):""}`,onInput:s.v$.password.$touch,onBlur:s.v$.password.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),v(l,{modelValue:a.passwordConfirmation,"onUpdate:modelValue":t[2]||(t[2]=r=>a.passwordConfirmation=r),type:"password",styles:a.inputStyles,class:re({error:s.v$.passwordConfirmation.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.PLACEHOLDER"),error:`${s.v$.passwordConfirmation.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.ERROR"):""}`,onInput:s.v$.passwordConfirmation.$touch,onBlur:s.v$.passwordConfirmation.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),c("div",null,[v(i,{type:"submit",label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.BTN_TEXT"),disabled:o.isButtonDisabled},null,8,["label","disabled"])])])],32)}const _ve=Fe(hve,[["render",gve]]),vve=["id","value"],w_={__name:"CheckBox",props:{isChecked:{type:Boolean,default:!1},value:{type:String,default:null}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=C({get:()=>n.isChecked,set:o=>s("update",n.value,o)});return(o,l)=>pe((p(),f("input",{id:e.value,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value=i),type:"checkbox",value:e.value,class:"flex-shrink-0 mt-0.5 border-n-strong border bg-n-slate-2 checked:border-none checked:bg-n-brand shadow-sm appearance-none rounded-[4px] w-4 h-4 focus:ring-1 after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center after:text-center after:text-xs after:font-bold after:relative"},null,8,vve)),[[Xt,a.value]])}},bve={components:{TableHeaderCell:xS,ToggleSwitch:so,CheckBox:w_},data(){return{selectedEmailFlags:[],selectedPushFlags:[],enableAudioAlerts:!1,hasEnabledPushPermissions:!1,notificationTypes:wN}},computed:{...St({accountId:"getCurrentAccountId",emailFlags:"userNotificationSettings/getSelectedEmailFlags",pushFlags:"userNotificationSettings/getSelectedPushFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasPushAPISupport(){return"Notification"in window},isSLAEnabled(){return this.isFeatureEnabledonAccount(this.accountId,Mt.SLA)},filteredNotificationTypes(){return this.notificationTypes.filter(e=>this.isSLAEnabled?!0:!["sla_missed_first_response","sla_missed_next_response","sla_missed_resolution"].includes(e.value))}},watch:{emailFlags(e){this.selectedEmailFlags=e},pushFlags(e){this.selectedPushFlags=e}},mounted(){mP()&&this.getPushSubscription(),this.$store.dispatch("userNotificationSettings/get")},methods:{checkFlagStatus(e,t){return(e==="email"?this.selectedEmailFlags:this.selectedPushFlags).includes(`${e}_${t}`)},onRegistrationSuccess(){this.hasEnabledPushPermissions=!0},onRequestPermissions(e){e?gP({onSuccess:this.onRegistrationSuccess}):this.disablePushPermissions()},disablePushPermissions(){If(e=>e.pushManager.getSubscription().then(t=>t?t.unsubscribe():null).finally(()=>{this.hasEnabledPushPermissions=!1}).catch(()=>{}))},getPushSubscription(){If(e=>e.pushManager.getSubscription().then(t=>{t?this.hasEnabledPushPermissions=!0:this.hasEnabledPushPermissions=!1}).catch(t=>console.log(t)))},async updateNotificationSettings(){try{this.$store.dispatch("userNotificationSettings/update",{selectedEmailFlags:this.selectedEmailFlags,selectedPushFlags:this.selectedPushFlags}),_e(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}catch{_e(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_ERROR"))}},handleInput(e,t){e==="email"?this.handleEmailInput(t):this.handlePushInput(t)},handleEmailInput(e){this.selectedEmailFlags=this.toggleInput(this.selectedEmailFlags,e),this.updateNotificationSettings()},handlePushInput(e){this.selectedPushFlags=this.toggleInput(this.selectedPushFlags,e),this.updateNotificationSettings()},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]}}},Eve={id:"profile-settings-notifications",class:"flex flex-col gap-6"},Tve={class:"hidden sm:block"},Ave={class:"grid content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},yve={class:"text-sm font-normal normal-case text-n-slate-11"},Sve={class:"text-sm font-medium normal-case text-n-slate-12"},Ive={class:"flex items-center justify-between gap-1"},Cve={class:"text-sm font-medium normal-case text-n-slate-12 whitespace-nowrap"},xve={class:"grid items-center content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},Nve={class:"flex flex-row items-start gap-2 col-span-7 px-0 py-2 text-sm tracking-[0.5] rtl:text-right"},Ove={class:"text-sm text-n-slate-12"},wve={class:"flex flex-col gap-6 sm:hidden"},Rve={class:"text-sm font-medium normal-case text-n-slate-12"},$ve={class:"flex flex-col gap-4"},Mve={class:"text-sm text-n-slate-12"},kve={class:"flex items-center justify-start gap-2"},Lve={class:"text-sm font-medium normal-case text-n-slate-12"},Dve={class:"flex flex-col gap-4"},Pve={class:"text-sm text-n-slate-12"},Bve={class:"flex items-center justify-between w-full gap-2 p-4 border border-solid border-n-weak rounded-xl"},Fve={class:"flex flex-row items-center gap-2"},Uve={class:"text-sm text-n-slate-12"};function Gve(e,t,n,s,a,o){const l=z("TableHeaderCell"),i=z("CheckBox"),r=z("fluent-icon"),d=z("ToggleSwitch");return p(),f("div",Eve,[c("div",Tve,[c("div",Ave,[v(l,{span:7,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE')}`"},{default:K(()=>[c("span",yve,E(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE")),1)]),_:1}),v(l,{span:2,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL')}`"},{default:K(()=>[c("span",Sve,E(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL")),1)]),_:1}),v(l,{span:3,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH')}`"},{default:K(()=>[c("div",Ive,[c("span",Cve,E(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH")),1)])]),_:1})]),(p(!0),f(fe,null,Ae(o.filteredNotificationTypes,(u,m)=>(p(),f("div",{key:m},[c("div",xve,[c("div",Nve,[c("span",Ove,E(e.$t(u.label)),1)]),(p(),f(fe,null,Ae(["email","push"],(h,_)=>c("div",{key:_,class:re(["flex items-start gap-2 px-0 text-sm tracking-[0.5] text-left rtl:text-right",`col-span-${h==="push"?3:2}`])},[v(i,{value:`${h}_${u.value}`,"is-checked":o.checkFlagStatus(h,u.value,a.selectedPushFlags),onUpdate:g=>o.handleInput(h,g)},null,8,["value","is-checked","onUpdate"])],2)),64))])]))),128))]),c("div",wve,[c("span",Rve,E(e.$t("PROFILE_SETTINGS.FORM.EMAIL_NOTIFICATIONS_SECTION.TITLE")),1),c("div",$ve,[(p(!0),f(fe,null,Ae(o.filteredNotificationTypes,(u,m)=>(p(),f("div",{key:m,class:"flex flex-row items-start gap-2"},[v(i,{id:`email_${u.value}`,value:`email_${u.value}`,"is-checked":o.checkFlagStatus("email",u.value),onUpdate:o.handleEmailInput},null,8,["id","value","is-checked","onUpdate"]),c("span",Mve,E(e.$t(u.label)),1)]))),128))]),c("div",kve,[c("span",Lve,E(e.$t("PROFILE_SETTINGS.FORM.PUSH_NOTIFICATIONS_SECTION.TITLE")),1)]),c("div",Dve,[(p(!0),f(fe,null,Ae(o.filteredNotificationTypes,(u,m)=>(p(),f("div",{key:m,class:"flex flex-row items-start gap-2"},[v(i,{id:`push_${u.value}`,value:`push_${u.value}`,"is-checked":o.checkFlagStatus("push",u.value),onUpdate:o.handlePushInput},null,8,["id","value","is-checked","onUpdate"]),c("span",Pve,E(e.$t(u.label)),1)]))),128))])]),c("div",Bve,[c("div",Fve,[v(r,{icon:"alert",class:"flex-shrink-0 text-n-slate-12",size:"18"}),c("span",Uve,E(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.BROWSER_PERMISSION")),1)]),v(d,{modelValue:a.hasEnabledPushPermissions,"onUpdate:modelValue":t[0]||(t[0]=u=>a.hasEnabledPushPermissions=u),onChange:o.onRequestPermissions},null,8,["modelValue","onChange"])])])}const Vve=Fe(bve,[["render",Gve]]),Hve={class:"flex items-center gap-2"},Wve=["value","selected"],Kve={__name:"AudioAlertTone",props:{value:{type:String,required:!0,validator:e=>["ding","bell","chime","magic","ping"].includes(e)},label:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>[{value:"ding",label:"Ding"},{value:"bell",label:"Bell"},{value:"chime",label:"Chime"},{value:"magic",label:"Magic"},{value:"ping",label:"Ping"}]),o=C({get:()=>n.value,set:r=>{s("change",r)}}),l=new Audio,i=async()=>{try{l.src=`/audio/dashboard/${o.value}.mp3`,await l.play()}catch(r){qc(r)}};return(r,d)=>{const u=_t("tooltip");return p(),f("div",Hve,[v(O_,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=m=>o.value=m),name:"alertTone",spacing:"compact",class:"flex-grow",value:o.value,options:a.value,label:e.label},{default:K(()=>[(p(!0),f(fe,null,Ae(a.value,m=>(p(),f("option",{key:m.label,value:m.value,selected:m.value===o.value},E(m.label),9,Wve))),128))]),_:1},8,["modelValue","value","options","label"]),pe((p(),f("button",{class:"border-0 shadow-sm outline-none flex justify-center items-center size-10 appearance-none rounded-xl ring-n-weak ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-n-brand flex-shrink-0 mt-[1.75rem]",onClick:i},[v(Wt,{icon:"i-lucide-volume-2"})])),[[u,r.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.PLAY"),void 0,{top:!0}]])])}}},zve={class:"pb-1 text-sm font-medium leading-6 text-n-slate-12"},jve={class:"grid gap-3 mt-2"},Yve=["for"],Xve={class:"text-n-slate-11 text-sm font-medium mt-2"},qve={__name:"AudioAlertEvent",props:{label:{type:String,default:""},value:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=RN,o=Object.values(Tv),l=C({get:()=>{if(n.value==="none")return[];if(n.value==="mine")return[Tv.ASSIGNED];if(n.value==="all")return[...o];const d=n.value.split("+").filter(u=>o.includes(u));return[...new Set(d)]},set:d=>{const u=d.filter(Boolean).sort(),m=[...new Set(u)];if(m.length===0){s("update","none");return}s("update",m.join("+"))}}),i=(d,u)=>{let m=l.value;d?m.push(u):m=m.filter(h=>h!==u),l.value=m},r=C(()=>{const d="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_COMBINATIONS.";return n.value===""||n.value==="none"?d+"NONE":d+l.value.join("+").toUpperCase()});return(d,u)=>(p(),f("div",null,[c("label",zve,E(e.label),1),c("div",jve,[(p(!0),f(fe,null,Ae(I(a),m=>(p(),f("div",{key:m.value,class:"flex items-center gap-2"},[v(w_,{id:`checkbox-${m.value}`,"is-checked":l.value.includes(m.value),onUpdate:(h,_)=>i(_,m.value)},null,8,["id","is-checked","onUpdate"]),c("label",{for:`checkbox-${m.value}`,class:"text-sm text-n-slate-12 font-normal"},E(d.$t(`PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPES.${m.label.toUpperCase()}`)),9,Yve)]))),128)),c("div",Xve,E(d.$t(r.value)),1)])]))}},Zve={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-n-slate-12"},Qve={class:"flex flex-col gap-3 mt-2"},Jve=["for"],ebe={__name:"AudioAlertCondition",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},emits:["change"],setup(e,{emit:t}){const n=t,s=(a,o)=>{n("change",a,o)};return(a,o)=>(p(),f("div",null,[c("label",Zve,E(e.label),1),c("div",Qve,[(p(!0),f(fe,null,Ae(e.items,l=>(p(),f("div",{key:l.id,class:"flex flex-row items-start gap-2"},[v(w_,{id:`checkbox-condition-${l.value}`,"is-checked":l.model,value:l.value,onUpdate:s},null,8,["id","is-checked","value"]),c("label",{class:"text-sm font-normal text-n-slate-12",for:`checkbox-condition-${l.value}`},E(l.label),9,Jve)]))),128))])]))}},tbe={id:"profile-settings-notifications",class:"flex flex-col gap-6"},tc="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION",nbe={__name:"AudioNotifications",setup(e){const t=yt(),n=Nn(),s=C(()=>n.getCurrentUser.value),{uiSettings:a,updateUISettings:o}=Sn(),{t:l}=Pe(),i=F(""),r=F(!1),d=F(!1),u=F("ding"),m=F([]),h=b=>{const A=Sr(b);i.value=A.enableAudioAlerts,r.value=!A.alwaysPlayAudioAlert,d.value=A.alertIfUnreadAssignedConversationExist,m.value=[{id:"audio1",label:l(`${tc}.CONDITIONS.CONDITION_ONE`),model:r.value,value:"tab_is_inactive"},{id:"audio2",label:l(`${tc}.CONDITIONS.CONDITION_TWO`),model:d.value,value:"conversations_are_read"}],u.value=A.notificationTone||"ding"};ot(a,b=>{h(b)},{immediate:!0});const _=b=>{o(b),$N(s.value),_e(l("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))};pt(()=>{t.dispatch("userNotificationSettings/get")});const g=b=>{i.value=b,_({enable_audio_alerts:b})},T=(b,A)=>{b==="tab_is_inactive"?_({always_play_audio_alert:!A}):b==="conversations_are_read"&&_({alert_if_unread_assigned_conversation_exist:A})},S=b=>{_({notification_tone:b})};return(b,A)=>(p(),f("div",tbe,[v(Kve,{value:u.value,label:b.$t(`${tc}.DEFAULT_TONE.TITLE`),onChange:S},null,8,["value","label"]),v(qve,{label:b.$t(`${tc}.ALERT_TYPE.TITLE`),value:i.value,onUpdate:g},null,8,["label","value"]),v(ebe,{items:m.value,label:b.$t(`${tc}.CONDITIONS.TITLE`),onChange:T},null,8,["items","label"])]))}},sbe={class:"flex flex-col items-start w-full gap-6"},abe={class:"flex flex-col w-full gap-4"},obe={key:0,class:"text-lg font-medium text-n-slate-12"},lbe={key:1,class:"mb-0 text-sm font-normal text-n-slate-12"},ibe={class:"flex flex-col w-full gap-6"},rbe={__name:"FormSection",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",sbe,[c("div",abe,[e.title?(p(),f("h4",obe,E(e.title),1)):O("",!0),n[0]||(n[0]=c("div",{class:"flex flex-row items-center justify-between"},[c("div",{class:"flex-grow h-px bg-n-weak"})],-1)),e.description?(p(),f("p",lbe,E(e.description),1)):O("",!0)]),c("div",ibe,[at(t.$slots,"default")])]))}};function Br(){const e=ke("getCurrentUser"),t=ke("accounts/isFeatureEnabledonAccount"),n=ke("globalConfig/isOnChatwootCloud"),s=ke("globalConfig/isACustomBrandedInstance"),{isEnterprise:a,enterprisePlanName:o}=Js(),{accountId:l}=_s(),i=()=>pg(e.value,l.value),r=T=>T?t.value(l.value,T):!0,d=T=>{if(!T||!T.length)return!0;const S=i();return mg(T,S)},u=T=>{if(Array.isArray(T)&&T.length>0){const S={[Jn.ENTERPRISE]:a,[Jn.CLOUD]:n.value,[Jn.COMMUNITY]:!0};return T.some(b=>S[b])}return!0},m=T=>T?xP.includes(T):!0,h=C(()=>a?o!=="community":!0);return{checkPermissions:d,shouldShowPaywall:T=>{const S=I(T);if(!S||s.value)return!1;if(m(S)){if(n.value)return!r(S);if(a)return!h.value}return!1},isFeatureFlagEnabled:r,shouldShow:(T,S,b)=>{const A=I(T),y=I(S),x=I(b);return!d(y)||!u(x)?!1:s.value?r(A):n.value?r(A)||m(A):a?r(A)||m(A)&&!h.value:!0}}}const _o={__name:"policy",props:{as:{type:String,default:"div"},permissions:{type:Array,required:!0},featureFlag:{type:String,default:null},installationTypes:{type:Array,default:null}},setup(e){const t=e,{shouldShow:n}=Br(),s=C(()=>n(t.featureFlag,t.permissions,t.installationTypes));return(a,o)=>s.value?(p(),V(xs(e.as),{key:0},{default:K(()=>[at(a.$slots,"default")]),_:3})):O("",!0)}},cbe={components:{MessageSignature:Y_e,FormSection:rbe,FontSize:ave,UserProfilePicture:W_e,Policy:_o,UserBasicDetails:j_e,HotKeyCard:mve,ChangePassword:_ve,NotificationPreferences:Vve,AudioNotifications:nbe,AccessToken:wf},setup(){const{isEditorHotKeyEnabled:e,updateUISettings:t}=Sn(),{currentFontSize:n,updateFontSize:s}=jg(),{replaceInstallationName:a}=Io();return{currentFontSize:n,updateFontSize:s,isEditorHotKeyEnabled:e,updateUISettings:t,replaceInstallationName:a}},data(){return{avatarFile:"",avatarUrl:"",name:"",displayName:"",email:"",messageSignature:"",hotKeys:[{key:"enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-enter-dark.svg"},{key:"cmd_enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter-dark.svg"}],notificationPermissions:[...fs,...Xs],audioNotificationPermissions:[...fs,...Xs]}},computed:{...St({currentUser:"getCurrentUser",currentUserId:"getCurrentUserID",globalConfig:"globalConfig/get"})},mounted(){this.currentUserId&&this.initializeUser()},methods:{initializeUser(){this.name=this.currentUser.name,this.email=this.currentUser.email,this.avatarUrl=this.currentUser.avatar_url,this.displayName=this.currentUser.display_name,this.messageSignature=this.currentUser.message_signature},async dispatchUpdate(e,t,n){let s="";try{return await this.$store.dispatch("updateProfile",e),s=t,!0}catch(a){return s=Ju(a)||n,!1}finally{_e(s)}},async updateProfile(e){const{name:t,email:n,displayName:s}=e,a=this.currentUser.email!==n;this.name=t||this.name,this.email=n||this.email,this.displayName=s||this.displayName;const o={name:this.name,email:this.email,displayName:this.displayName,avatar:this.avatarFile},l=await this.dispatchUpdate(o,a?this.$t("PROFILE_SETTINGS.AFTER_EMAIL_CHANGED"):this.$t("PROFILE_SETTINGS.UPDATE_SUCCESS"),this.$t("RESET_PASSWORD.API.ERROR_MESSAGE"));a&&l&&MN()},async updateSignature(e){const t={message_signature:e};let n=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_SUCCESS"),s=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_ERROR");await this.dispatchUpdate(t,n,s)},updateProfilePicture({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async deleteProfilePicture(){try{await this.$store.dispatch("deleteAvatar"),this.avatarUrl="",this.avatarFile="",_e(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_SUCCESS"))}catch{_e(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_FAILED"))}},toggleHotKey(e){this.hotKeys=this.hotKeys.map(t=>t.key===e?{...t,active:!t.active}:t),this.updateUISettings({editor_message_key:e}),_e(this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.UPDATE_SUCCESS"))},async onCopyToken(e){await qo(e),_e(this.$t("COMPONENTS.CODE.COPY_SUCCESSFUL"))},async resetAccessToken(){await this.$store.dispatch("resetAccessToken")?_e(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_SUCCESS")):_e(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_ERROR"))}}},dbe={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md"},ube={class:"flex flex-col gap-6"},pbe={class:"text-2xl font-medium text-n-slate-12"},mbe={class:"flex flex-col justify-between w-full gap-5 sm:gap-4 sm:flex-row"};function hbe(e,t,n,s,a,o){const l=z("UserProfilePicture"),i=z("UserBasicDetails"),r=z("FontSize"),d=z("FormSection"),u=z("MessageSignature"),m=z("HotKeyCard"),h=z("ChangePassword"),_=z("AudioNotifications"),g=z("Policy"),T=z("NotificationPreferences"),S=z("AccessToken");return p(),f("div",dbe,[c("div",ube,[c("h2",pbe,E(e.$t("PROFILE_SETTINGS.TITLE")),1),v(l,{src:a.avatarUrl,name:a.name,onChange:o.updateProfilePicture,onDelete:o.deleteProfilePicture},null,8,["src","name","onChange","onDelete"]),v(i,{name:a.name,"display-name":a.displayName,email:a.email,"email-enabled":!e.globalConfig.disableUserProfileUpdate,onUpdateUser:o.updateProfile},null,8,["name","display-name","email","email-enabled","onUpdateUser"])]),v(d,{title:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.TITLE"),description:s.replaceInstallationName(e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.NOTE"))},{default:K(()=>[v(r,{value:s.currentFontSize,label:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.NOTE"),onChange:s.updateFontSize},null,8,["value","label","description","onChange"])]),_:1},8,["title","description"]),v(d,{title:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.NOTE")},{default:K(()=>[v(u,{"message-signature":a.messageSignature,onUpdateSignature:o.updateSignature},null,8,["message-signature","onUpdateSignature"])]),_:1},8,["title","description"]),v(d,{title:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.NOTE")},{default:K(()=>[c("div",mbe,[(p(!0),f(fe,null,Ae(a.hotKeys,b=>(p(),f("button",{key:b.key,class:re(["px-0 reset-base w-full sm:flex-1 rounded-xl outline-1 outline",s.isEditorHotKeyEnabled(b.key)?"outline-n-brand/30":"outline-n-weak"])},[(p(),V(m,{key:b.title,title:b.title,description:b.description,"light-image":b.lightImage,"dark-image":b.darkImage,active:s.isEditorHotKeyEnabled(b.key),onClick:A=>o.toggleHotKey(b.key)},null,8,["title","description","light-image","dark-image","active","onClick"]))],2))),128))])]),_:1},8,["title","description"]),e.globalConfig.disableUserProfileUpdate?O("",!0):(p(),V(d,{key:0,title:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.TITLE")},{default:K(()=>[v(h)]),_:1},8,["title"])),v(g,{permissions:a.audioNotificationPermissions},{default:K(()=>[v(d,{title:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.NOTE")},{default:K(()=>[v(_)]),_:1},8,["title","description"])]),_:1},8,["permissions"]),v(g,{permissions:a.notificationPermissions},{default:K(()=>[v(d,{title:e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TITLE")},{default:K(()=>[v(T)]),_:1},8,["title"])]),_:1},8,["permissions"]),v(d,{title:e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.TITLE"),description:s.replaceInstallationName(e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.NOTE"))},{default:K(()=>[v(S,{value:e.currentUser.access_token,onOnCopy:o.onCopyToken,onOnReset:o.resetAccessToken},null,8,["value","onOnCopy","onOnReset"])]),_:1},8,["title","description"])])}const fbe=Fe(cbe,[["render",hbe]]),gbe={routes:[{path:Bt("accounts/:accountId/profile"),name:"profile_settings",meta:{permissions:["administrator","agent","custom_role"]},component:G_e,children:[{path:"settings",name:"profile_settings_index",component:fbe,meta:{permissions:["administrator","agent","custom_role"]}}]}]},_be={routes:[{path:Bt("accounts/:accountId/settings"),name:"settings_home",meta:{permissions:[...fs,...Xs]},redirect:e=>Pa.getters.getCurrentRole==="administrator"&&Pa.getters.getCurrentCustomRoleId===null?{name:"general_settings_index",params:e.params}:{name:"canned_list",params:e.params}},...oB.routes,...jB.routes,...y9.routes,...c7.routes,...FU.routes,..._G.routes,...kG.routes,...cV.routes,...oee.routes,...Yne.routes,...Ase.routes,...Eae.routes,...Qhe.routes,...qfe.routes,...m_e.routes,...F_e.routes,...gbe.routes]};function vbe(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}let mu;function Kf(){Kf.init||(Kf.init=!0,mu=vbe()!==-1)}var Pp={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Kf(),jt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",mu&&this.$el.appendChild(e),e.data="about:blank",mu||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!mu&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const bbe=KE();HE("data-v-b329ee4c");const Ebe={class:"resize-observer",tabindex:"-1"};WE();const Tbe=bbe((e,t,n,s,a,o)=>(p(),V("div",Ebe)));Pp.render=Tbe;Pp.__scopeId="data-v-b329ee4c";Pp.__file="src/components/ResizeObserver.vue";function hu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hu=function(t){return typeof t}:hu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function Abe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ybe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Sbe(e,t,n){return t&&ybe(e.prototype,t),e}function R0(e){return Ibe(e)||Cbe(e)||xbe(e)||Nbe()}function Ibe(e){if(Array.isArray(e))return zf(e)}function Cbe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function xbe(e,t){if(e){if(typeof e=="string")return zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zf(e,t)}}function zf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Nbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Obe(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function wbe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,a,o,l=function(r){for(var d=arguments.length,u=new Array(d>1?d-1:0),m=1;m<d;m++)u[m-1]=arguments[m];if(o=u,!(s&&r===a)){var h=n.leading;typeof h=="function"&&(h=h(r,a)),(!s||r!==a)&&h&&e.apply(void 0,[r].concat(R0(o))),a=r,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[r].concat(R0(o))),s=0},t)}};return l._clear=function(){clearTimeout(s),s=null},l}function BS(e,t){if(e===t)return!0;if(hu(e)==="object"){for(var n in e)if(!BS(e[n],t[n]))return!1;return!0}return!1}var Rbe=function(){function e(t,n,s){Abe(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,s)}return Sbe(e,[{key:"createObserver",value:function(n,s){var a=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=Obe(n),this.callback=function(i,r){a.options.callback(i,r),i&&a.options.once&&(a.frozen=!0,a.destroyObserver())},this.callback&&this.options.throttle){var o=this.options.throttleOptions||{},l=o.leading;this.callback=wbe(this.callback,this.options.throttle,{leading:function(r){return l==="both"||l==="visible"&&r||l==="hidden"&&!r}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(i){var r=i[0];if(i.length>1){var d=i.find(function(m){return m.isIntersecting});d&&(r=d)}if(a.callback){var u=r.isIntersecting&&r.intersectionRatio>=a.threshold;if(u===a.oldResult)return;a.oldResult=u,a.callback(u,r)}},this.options.intersection),jt(function(){a.observer&&a.observer.observe(a.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function FS(e,t,n){var s=t.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new Rbe(e,s,n);e._vue_visibilityState=a}}function $be(e,t,n){var s=t.value,a=t.oldValue;if(!BS(s,a)){var o=e._vue_visibilityState;if(!s){US(e);return}o?o.createObserver(s,n):FS(e,{value:s},n)}}function US(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var Mbe={beforeMount:FS,updated:$be,unmounted:US};function kbe(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s&&s.push(n)||e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&s.splice(s.indexOf(n)>>>0,1)},emit:function(t,n){(e.get(t)||[]).slice().map(function(s){s(n)}),(e.get("*")||[]).slice().map(function(s){s(t,n)})}}}var Lbe={itemsLimit:1e3},Dbe=/(auto|scroll)/;function GS(e,t){return e.parentNode===null?t:GS(e.parentNode,t.concat([e]))}var Dh=function(t,n){return getComputedStyle(t,null).getPropertyValue(n)},Pbe=function(t){return Dh(t,"overflow")+Dh(t,"overflow-y")+Dh(t,"overflow-x")},Bbe=function(t){return Dbe.test(Pbe(t))};function $0(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=GS(e.parentNode,[]),n=0;n<t.length;n+=1)if(Bbe(t[n]))return t[n];return document.scrollingElement||document.documentElement}}function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}var VS={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function HS(){return this.items.length&&jf(this.items[0])!=="object"}var Yf=!1;if(typeof window<"u"){Yf=!1;try{var Fbe=Object.defineProperty({},"passive",{get:function(){Yf=!0}});window.addEventListener("test",null,Fbe)}catch{}}let Ube=0;var R_={name:"RecycleScroller",components:{ResizeObserver:Pp},directives:{ObserveVisibility:Mbe},props:{...VS,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,n=this.sizeField,s=this.minItemSize;let a=1e4,o=0,l;for(let i=0,r=t.length;i<r;i++)l=t[i][n]||s,l<a&&(a=l),o+=l,e[i]={accumulator:o,size:l};return this.$_computedMinItemSize=a,e}return[]},simpleArray:HS,itemIndexByKey(){const{keyField:e,items:t}=this,n={};for(let s=0,a=t.length;s<a;s++)n[t[s][e]]=s;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,n,s,a){const o=FC({id:Ube++,index:t,used:!0,key:s,type:a}),l=UC({item:n,position:0,nr:o});return e.push(l),l},unuseView(e,t=!1){const n=this.$_unusedViews,s=e.nr.type;let a=n.get(s);a||(a=[],n.set(s,a)),a.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const n=this.itemSize,s=this.gridItems||1,a=this.itemSecondarySize||n,o=this.$_computedMinItemSize,l=this.typeField,i=this.simpleArray?null:this.keyField,r=this.items,d=r.length,u=this.sizes,m=this.$_views,h=this.$_unusedViews,_=this.pool,g=this.itemIndexByKey;let T,S,b,A,y;if(!d)T=S=A=y=b=0;else if(this.$_prerender)T=A=0,S=y=Math.min(this.prerender,r.length),b=null;else{const B=this.getScroll();if(t){let G=B.start-this.$_lastUpdateScrollPosition;if(G<0&&(G=-G),n===null&&G<o||G<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=B.start;const k=this.buffer;B.start-=k,B.end+=k;let U=0;if(this.$refs.before&&(U=this.$refs.before.scrollHeight,B.start-=U),this.$refs.after){const G=this.$refs.after.scrollHeight;B.end+=G}if(n===null){let G,L=0,M=d-1,R=~~(d/2),P;do P=R,G=u[R].accumulator,G<B.start?L=R:R<d-1&&u[R+1].accumulator>B.start&&(M=R),R=~~((L+M)/2);while(R!==P);for(R<0&&(R=0),T=R,b=u[d-1].accumulator,S=R;S<d&&u[S].accumulator<B.end;S++);for(S===-1?S=r.length-1:(S++,S>d&&(S=d)),A=T;A<d&&U+u[A].accumulator<B.start;A++);for(y=A;y<d&&U+u[y].accumulator<B.end;y++);}else{T=~~(B.start/n*s);const G=T%s;T-=G,S=Math.ceil(B.end/n*s),A=Math.max(0,Math.floor((B.start-U)/n*s)),y=Math.floor((B.end-U)/n*s),T<0&&(T=0),S>d&&(S=d),A<0&&(A=0),y>d&&(y=d),b=Math.ceil(d/s)*n}}S-T>Lbe.itemsLimit&&this.itemsLimitError(),this.totalSize=b;let x;const $=T<=this.$_endIndex&&S>=this.$_startIndex;if($)for(let B=0,k=_.length;B<k;B++)x=_[B],x.nr.used&&(e&&(x.nr.index=g[x.item[i]]),(x.nr.index==null||x.nr.index<T||x.nr.index>=S)&&this.unuseView(x));const N=$?null:new Map;let w,D,H;for(let B=T;B<S;B++){w=r[B];const k=i?w[i]:w;if(k==null)throw new Error(`Key is ${k} on item (keyField is '${i}')`);if(x=m.get(k),!n&&!u[B].size){x&&this.unuseView(x);continue}D=w[l];let U=h.get(D),G=!1;if(!x)$?U&&U.length?x=U.pop():x=this.addView(_,B,w,k,D):(H=N.get(D)||0,(!U||H>=U.length)&&(x=this.addView(_,B,w,k,D),this.unuseView(x,!0),U=h.get(D)),x=U[H],N.set(D,H+1)),m.delete(x.nr.key),x.nr.used=!0,x.nr.index=B,x.nr.key=k,x.nr.type=D,m.set(k,x),G=!0;else if(!x.nr.used&&(x.nr.used=!0,G=!0,U)){const L=U.indexOf(x);L!==-1&&U.splice(L,1)}x.item=w,G&&(B===r.length-1&&this.$emit("scroll-end"),B===0&&this.$emit("scroll-start")),n===null?(x.position=u[B-1].accumulator,x.offset=0):(x.position=Math.floor(B/s)*n,x.offset=B%s*a)}return this.$_startIndex=T,this.$_endIndex=S,this.emitUpdate&&this.$emit("update",T,S,A,y),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:$}},getListenerTarget(){let e=$0(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,n=t==="vertical";let s;if(this.pageMode){const a=e.getBoundingClientRect(),o=n?a.height:a.width;let l=-(n?a.top:a.left),i=n?window.innerHeight:window.innerWidth;l<0&&(i+=l,l=0),l+i>o&&(i=o-l),s={start:l,end:l+i}}else n?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Yf?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const n=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/n)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,s,a;if(this.pageMode){const o=$0(this.$el),l=o.tagName==="HTML"?0:o[t.scroll],i=o.getBoundingClientRect(),d=this.$el.getBoundingClientRect()[t.start]-i[t.start];n=o,s=t.scroll,a=e+l+d}else n=this.$el,s=t.scroll,a=e;n[s]=a},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const Gbe={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Vbe={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Hbe(e,t,n,s,a,o){const l=z("ResizeObserver"),i=_t("observe-visibility");return pe((p(),f("div",{class:re(["vue-recycle-scroller",{ready:a.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...r)=>o.handleScroll&&o.handleScroll(...r))},[e.$slots.before?(p(),f("div",Gbe,[at(e.$slots,"before")],512)):O("v-if",!0),(p(),V(xs(n.listTag),{ref:"wrapper",style:Ct({[e.direction==="vertical"?"minHeight":"minWidth"]:a.totalSize+"px"}),class:re(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:K(()=>[(p(!0),f(fe,null,Ae(a.pool,r=>(p(),V(xs(n.itemTag),Bs({key:r.nr.id,style:a.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${r.position}px) translate${e.direction==="vertical"?"X":"Y"}(${r.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&a.hoverKey===r.nr.key}]]},GC(n.skipHover?{}:{mouseenter:()=>{a.hoverKey=r.nr.key},mouseleave:()=>{a.hoverKey=null}})),{default:K(()=>[at(e.$slots,"default",{item:r.item,index:r.nr.index,active:r.nr.used})]),_:2},1040,["style","class"]))),128)),at(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(p(),f("div",Vbe,[at(e.$slots,"after")],512)):O("v-if",!0),v(l,{onNotify:o.handleResize},null,8,["onNotify"])],34)),[[i,o.handleVisibilityChange]])}R_.render=Hbe;R_.__file="src/components/RecycleScroller.vue";var $_={name:"DynamicScroller",components:{RecycleScroller:R_},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let n,s;if(t.borderBoxSize){const a=t.borderBoxSize[0];n=a.inlineSize,s=a.blockSize}else n=t.contentRect.width,s=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,n,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...VS,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:HS,itemsWithSize(){const e=[],{items:t,keyField:n,simpleArray:s}=this,a=this.vscrollData.sizes,o=t.length;for(let l=0;l<o;l++){const i=t[l],r=s?l:i[n];let d=a[r];typeof d>"u"&&!this.$_undefinedMap[r]&&(d=0),e.push({item:i,id:r,size:d})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const n=this.$el.scrollTop;let s=0,a=0;const o=Math.min(e.length,t.length);for(let i=0;i<o&&!(s>=n);i++)s+=t[i].size||this.minItemSize,a+=e[i].size||this.minItemSize;const l=a-s;l!==0&&(this.$el.scrollTop+=l)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=kbe()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const n=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[n]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function Wbe(e,t,n,s,a,o){const l=z("RecycleScroller");return p(),V(l,Bs({ref:"scroller",items:o.itemsWithSize,"min-item-size":n.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:o.onScrollerResize,onVisible:o.onScrollerVisible}),{default:K(({item:i,index:r,active:d})=>[at(e.$slots,"default",zE(jE({item:i.item,index:r,active:d,itemWithSize:i})))]),before:K(()=>[at(e.$slots,"before")]),after:K(()=>[at(e.$slots,"after")]),empty:K(()=>[at(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}$_.render=Wbe;$_.__file="src/components/DynamicScroller.vue";var WS={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const n=this.vscrollData.sizes[t],s=this.vscrollData.sizes[e];n!=null&&n!==s&&this.applySize(n)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,n=this.$el.offsetHeight;this.applyWidthHeight(t,n)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const n=~~(this.vscrollParent.direction==="vertical"?t:e);n&&this.size!==n&&this.applySize(n)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,n){this.id===e&&this.applyWidthHeight(t,n)}},render(){return Wn(this.tag,this.$slots.default())}};WS.__file="src/components/DynamicScrollerItem.vue";const Kbe={class:"relative flex flex-col gap-1 w-fit"},ju={__name:"SelectMenu",props:{options:{type:Array,required:!0},modelValue:{type:String,required:!0},label:{type:String,required:!0},subMenuPosition:{type:String,default:"right",validator:e=>["right","left","bottom"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=F(!1),o=C(()=>n.label),l=()=>{a.value=!a.value},i=r=>{s("update:modelValue",r),a.value=!1};return(r,d)=>{const u=_t("on-clickaway");return pe((p(),f("div",Kbe,[v(ce,{icon:"i-lucide-chevron-down",size:"sm","trailing-icon":"",color:"slate",variant:"faded",class:re(["!w-fit max-w-40",{"dark:!bg-n-alpha-2 !bg-n-slate-9/20":a.value}]),label:o.value,onClick:l},null,8,["class","label"]),a.value?(p(),f("div",{key:0,class:re(["absolute select-none max-w-64 flex flex-col gap-1 bg-n-alpha-3 backdrop-blur-[100px] p-1 top-0 shadow-lg z-40 rounded-lg border border-n-weak dark:border-n-strong/50",{"ltr:left-full rtl:right-full ltr:ml-1 rtl:mr-1":e.subMenuPosition==="right","ltr:right-full rtl:left-full ltr:mr-1 rtl:ml-1":e.subMenuPosition==="left","top-full mt-1 ltr:right-0 rtl:left-0":e.subMenuPosition==="bottom"}])},[(p(!0),f(fe,null,Ae(e.options,m=>(p(),V(ce,{key:m.value,label:m.label,icon:m.value===e.modelValue?"i-lucide-check":"",size:"sm",variant:"ghost",color:"slate","trailing-icon":"",class:re(["!justify-end !px-2.5 !h-7",{"!bg-n-alpha-2":m.value===e.modelValue}]),onClick:h=>i(m.value)},null,8,["label","icon","class","onClick"]))),128))],2)):O("",!0)])),[[u,()=>a.value=!1]])}}},zbe={class:"relative flex"},jbe={class:"flex items-center justify-between last:mt-4 gap-2"},Ybe={class:"text-sm truncate text-n-slate-12"},Xbe={class:"flex items-center justify-between last:mt-4 gap-2"},qbe={class:"text-sm truncate text-n-slate-12"},Zbe={__name:"ConversationBasicFilter",props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["changeFilter"],setup(e,{emit:t}){const n=t,s=yt(),{t:a}=Pe(),{updateUISettings:o}=Sn(),l=ke("getChatStatusFilter"),i=ke("getChatSortFilter"),[r,d]=Xn(),u=C(()=>l.value||Pt.STATUS_TYPE.OPEN),m=C(()=>i.value||Pt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),h=C(()=>[{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT"),value:"open"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT"),value:"resolved"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT"),value:"pending"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT"),value:"snoozed"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT"),value:"all"}]),_=C(()=>[{label:a("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_asc.TEXT"),value:"last_activity_at_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_desc.TEXT"),value:"last_activity_at_desc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.created_at_desc.TEXT"),value:"created_at_desc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.created_at_asc.TEXT"),value:"created_at_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.priority_desc.TEXT"),value:"priority_desc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.priority_asc.TEXT"),value:"priority_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_asc.TEXT"),value:"waiting_since_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_desc.TEXT"),value:"waiting_since_desc"}]),g=C(()=>{var y;return((y=h.value.find(x=>x.value===l.value))==null?void 0:y.label)||""}),T=C(()=>{var y;return((y=_.value.find(x=>x.value===i.value))==null?void 0:y.label)||""}),S=(y,x)=>{o({conversations_filter_by:{status:y==="status"?x:u.value,order_by:y==="sort"?x:m.value}})},b=y=>{n("changeFilter",y,"status"),s.dispatch("setChatStatusFilter",y),S("status",y)},A=y=>{n("changeFilter",y,"sort"),s.dispatch("setChatSortFilter",y),S("sort",y)};return(y,x)=>{const $=_t("tooltip");return p(),f("div",zbe,[pe(v(ce,{icon:"i-lucide-arrow-up-down",slate:"",faded:"",xs:"",onClick:x[0]||(x[0]=N=>I(d)())},null,512),[[$,y.$t("CHAT_LIST.SORT_TOOLTIP_LABEL"),void 0,{right:!0}]]),I(r)?pe((p(),f("div",{key:0,class:re(["mt-1 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4 absolute z-40 top-full",{"ltr:left-0 rtl:right-0":!e.isOnExpandedLayout,"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},[c("div",jbe,[c("span",Ybe,E(y.$t("CHAT_LIST.CHAT_SORT.STATUS")),1),v(ju,{"model-value":I(l),options:h.value,label:g.value,"sub-menu-position":e.isOnExpandedLayout?"left":"right","onUpdate:modelValue":b},null,8,["model-value","options","label","sub-menu-position"])]),c("div",Xbe,[c("span",qbe,E(y.$t("CHAT_LIST.CHAT_SORT.ORDER_BY")),1),v(ju,{"model-value":I(i),options:_.value,label:T.value,"sub-menu-position":e.isOnExpandedLayout?"left":"right","onUpdate:modelValue":A},null,8,["model-value","options","label","sub-menu-position"])])],2)),[[I(ca),()=>I(d)()]]):O("",!0)])}}},Qbe={components:{NextButton:ce},props:{isOnExpandedLayout:{type:Boolean,default:!1}},emits:["toggle"],methods:{toggle(){this.$emit("toggle")}}};function Jbe(e,t,n,s,a,o){const l=z("NextButton"),i=_t("tooltip");return pe((p(),V(l,{icon:n.isOnExpandedLayout?"i-lucide-arrow-left-to-line":"i-lucide-arrow-right-to-line",slate:"",xs:"",faded:"",class:"flex-shrink-0 rtl:rotate-180 ltr:rotate-0 md:inline-flex hidden",onClick:o.toggle},null,8,["icon","onClick"])),[[i,e.$t("CONVERSATION.SWITCH_VIEW_LAYOUT"),void 0,{left:!0}]])}const e1e=Fe(Qbe,[["render",Jbe]]),t1e={class:"flex items-center justify-center min-w-0"},n1e=["title"],s1e=["title"],a1e={key:1,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0"},o1e={class:"flex items-center gap-1"},l1e={class:"relative"},i1e={class:"relative"},r1e={key:2,class:"relative"},c1e={__name:"ChatListHeader",props:{pageTitle:{type:String,required:!0},hasAppliedFilters:{type:Boolean,required:!0},hasActiveFolders:{type:Boolean,required:!0},activeStatus:{type:String,required:!0},isOnExpandedLayout:{type:Boolean,required:!0},conversationStats:{type:Object,required:!0},isListLoading:{type:Boolean,required:!0}},emits:["addFolders","deleteFolders","resetFilters","basicFilterChange","filtersModal"],setup(e,{emit:t}){const n=e,s=t,{uiSettings:a,updateUISettings:o}=Sn(),l=(m,h)=>{s("basicFilterChange",m,h)},i=C(()=>n.hasAppliedFilters||n.hasActiveFolders),r=C(()=>{var m;return((m=n.conversationStats)==null?void 0:m.allCount)||0}),d=C(()=>Kx(r.value)),u=()=>{const{LAYOUT_TYPES:m}=Pt,{conversation_display_type:h=m.CONDENSED}=a.value,_=h===m.CONDENSED?m.EXPANDED:m.CONDENSED;o({conversation_display_type:_,previously_used_conversation_display_type:_})};return(m,h)=>{const _=_t("tooltip");return p(),f("div",{class:re(["flex items-center justify-between gap-2 px-3 h-12",{"border-b border-n-strong":i.value}])},[c("div",t1e,[c("h1",{class:"text-base font-medium truncate text-n-slate-12",title:e.pageTitle},E(e.pageTitle),9,n1e),r.value>0&&i.value&&!e.isListLoading?(p(),f("span",{key:0,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0",title:r.value},E(d.value),9,s1e)):O("",!0),i.value?O("",!0):(p(),f("span",a1e,E(m.$t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${e.activeStatus}.TEXT`)),1))]),c("div",o1e,[e.hasAppliedFilters&&!e.hasActiveFolders?(p(),f(fe,{key:0},[c("div",l1e,[pe(v(ce,{icon:"i-lucide-save",slate:"",xs:"",faded:"",onClick:h[0]||(h[0]=g=>s("addFolders"))},null,512),[[_,m.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"),void 0,{"top-end":!0}]]),c("div",{id:"saveFilterTeleportTarget",class:re(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),pe(v(ce,{icon:"i-lucide-circle-x",ruby:"",faded:"",xs:"",onClick:h[1]||(h[1]=g=>s("resetFilters"))},null,512),[[_,m.$t("FILTER.CLEAR_BUTTON_LABEL"),void 0,{"top-end":!0}]])],64)):O("",!0),e.hasActiveFolders?(p(),f(fe,{key:1},[c("div",i1e,[pe(v(ce,{id:"toggleConversationFilterButton",icon:"i-lucide-pen-line",slate:"",xs:"",faded:"",onClick:h[2]||(h[2]=g=>s("filtersModal"))},null,512),[[_,m.$t("FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON"),void 0,{"top-end":!0}]]),c("div",{id:"conversationFilterTeleportTarget",class:re(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),pe(v(ce,{id:"toggleConversationFilterButton",icon:"i-lucide-trash-2",ruby:"",xs:"",faded:"",onClick:h[3]||(h[3]=g=>s("deleteFolders"))},null,512),[[_,m.$t("FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON"),void 0,{"top-end":!0}]])],64)):(p(),f("div",r1e,[pe(v(ce,{id:"toggleConversationFilterButton",icon:"i-lucide-list-filter",slate:"",xs:"",faded:"",onClick:h[4]||(h[4]=g=>s("filtersModal"))},null,512),[[_,m.$t("FILTER.TOOLTIP_LABEL"),void 0,{right:!0}]]),c("div",{id:"conversationFilterTeleportTarget",class:re(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)])),i.value?O("",!0):(p(),V(Zbe,{key:3,"is-on-expanded-layout":e.isOnExpandedLayout,onChangeFilter:l},null,8,["is-on-expanded-layout"])),v(e1e,{"is-on-expanded-layout":e.isOnExpandedLayout,onToggle:u},null,8,["is-on-expanded-layout"])])],2)}}},Bn={EQUAL_TO:"equal_to",NOT_EQUAL_TO:"not_equal_to",IS_PRESENT:"is_present",IS_NOT_PRESENT:"is_not_present",CONTAINS:"contains",DOES_NOT_CONTAIN:"does_not_contain",IS_GREATER_THAN:"is_greater_than",IS_LESS_THAN:"is_less_than",DAYS_BEFORE:"days_before",STARTS_WITH:"starts_with"},d1e=[Bn.IS_PRESENT,Bn.IS_NOT_PRESENT],u1e={[Bn.DAYS_BEFORE]:"plainText"},p1e={[Bn.EQUAL_TO]:"i-ph-equals-bold",[Bn.NOT_EQUAL_TO]:"i-ph-not-equals-bold",[Bn.IS_PRESENT]:"i-ph-member-of-bold",[Bn.IS_NOT_PRESENT]:"i-ph-not-member-of-bold",[Bn.CONTAINS]:"i-ph-superset-of-bold",[Bn.DOES_NOT_CONTAIN]:"i-ph-not-superset-of-bold",[Bn.IS_GREATER_THAN]:"i-ph-greater-than-bold",[Bn.IS_LESS_THAN]:"i-ph-less-than-bold",[Bn.DAYS_BEFORE]:"i-ph-calendar-minus-bold",[Bn.STARTS_WITH]:"i-ph-caret-line-right-bold"};function KS(){const{t:e}=Pe(),t=C(()=>Object.values(Bn).reduce((r,d)=>(r[d]={value:d,label:e(`FILTER.OPERATOR_LABELS.${d}`),hasInput:!d1e.includes(d),inputOverride:u1e[d]||null,icon:Wn("span",{class:`${p1e[d]} !text-n-blue-text`})},r),{})),n=C(()=>[t.value[Bn.EQUAL_TO],t.value[Bn.NOT_EQUAL_TO]]),s=C(()=>[t.value[Bn.EQUAL_TO],t.value[Bn.NOT_EQUAL_TO],t.value[Bn.IS_PRESENT],t.value[Bn.IS_NOT_PRESENT]]),a=C(()=>[t.value[Bn.EQUAL_TO],t.value[Bn.NOT_EQUAL_TO],t.value[Bn.CONTAINS],t.value[Bn.DOES_NOT_CONTAIN]]),o=C(()=>[t.value[Bn.EQUAL_TO],t.value[Bn.NOT_EQUAL_TO],t.value[Bn.IS_PRESENT],t.value[Bn.IS_NOT_PRESENT],t.value[Bn.IS_GREATER_THAN],t.value[Bn.IS_LESS_THAN]]),l=C(()=>[t.value[Bn.IS_GREATER_THAN],t.value[Bn.IS_LESS_THAN],t.value[Bn.DAYS_BEFORE]]);return{operators:t,equalityOperators:n,presenceOperators:s,containmentOperators:a,comparisonOperators:o,dateOperators:l,getOperatorTypes:r=>{switch(r){case"list":return n.value;case"text":return a.value;case"number":return n.value;case"link":return n.value;case"date":return o.value;case"checkbox":return n.value;default:return n.value}}}}const Qn={STATUS:"status",PRIORITY:"priority",ASSIGNEE_ID:"assignee_id",INBOX_ID:"inbox_id",TEAM_ID:"team_id",DISPLAY_ID:"display_id",CAMPAIGN_ID:"campaign_id",LABELS:"labels",BROWSER_LANGUAGE:"browser_language",COUNTRY_CODE:"country_code",REFERER:"referer",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at"},Rs={NAME:"name",EMAIL:"email",PHONE_NUMBER:"phone_number",IDENTIFIER:"identifier",COUNTRY_CODE:"country_code",CITY:"city",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at",REFERER:"referer",BLOCKED:"blocked"},m1e=e=>{switch(e){case"date":return"date";case"text":return"plainText";case"list":return"searchSelect";case"checkbox":return"booleanSelect";default:return"plainText"}},zS=(e,t,n="conversation")=>{const s=Object.values(n==="conversation"?Qn:Rs);return e.filter(a=>!s.includes(a.attributeKey)).map(a=>({attributeKey:a.attributeKey,value:a.attributeKey,attributeName:a.attributeDisplayName,label:a.attributeDisplayName,inputType:m1e(a.attributeDisplayType),filterOperators:t(a.attributeDisplayType),options:a.attributeDisplayType==="list"?a.attributeValues.map(o=>({id:o,name:o})):[],attributeModel:"customAttributes"}))},M0=e=>(e==null?void 0:e.replaceAll("_"," "))??"";function h1e(){const{t:e}=Pe(),t=ke("attributes/getConversationAttributes"),n=ke("labels/getLabels"),s=ke("agents/getAgents"),a=ke("inboxes/getInboxes"),o=ke("teams/getTeams"),l=ke("campaigns/getAllCampaigns"),{equalityOperators:i,presenceOperators:r,containmentOperators:d,dateOperators:u,getOperatorTypes:m}=KS(),h=C(()=>zS(t.value,m,"conversation"));return{filterTypes:C(()=>[{attributeKey:Qn.STATUS,value:Qn.STATUS,attributeName:e("FILTER.ATTRIBUTES.STATUS"),label:e("FILTER.ATTRIBUTES.STATUS"),inputType:"multiSelect",options:["open","resolved","pending","snoozed","all"].map(g=>({id:g,name:e(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${g}.TEXT`)})),dataType:"text",filterOperators:i.value,attributeModel:"standard"},{attributeKey:Qn.PRIORITY,value:Qn.PRIORITY,attributeName:e("FILTER.ATTRIBUTES.PRIORITY"),label:e("FILTER.ATTRIBUTES.PRIORITY"),inputType:"multiSelect",options:["low","medium","high","urgent"].map(g=>({id:g,name:e(`CONVERSATION.PRIORITY.OPTIONS.${g.toUpperCase()}`)})),dataType:"text",filterOperators:i.value,attributeModel:"standard"},{attributeKey:Qn.ASSIGNEE_ID,value:Qn.ASSIGNEE_ID,attributeName:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),label:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),inputType:"searchSelect",options:s.value.map(g=>({id:g.id,name:g.name})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Qn.INBOX_ID,value:Qn.INBOX_ID,attributeName:e("FILTER.ATTRIBUTES.INBOX_NAME"),label:e("FILTER.ATTRIBUTES.INBOX_NAME"),inputType:"searchSelect",options:a.value.map(g=>({...g,icon:tO(g).value})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Qn.TEAM_ID,value:Qn.TEAM_ID,attributeName:e("FILTER.ATTRIBUTES.TEAM_NAME"),label:e("FILTER.ATTRIBUTES.TEAM_NAME"),inputType:"searchSelect",options:o.value,dataType:"number",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Qn.DISPLAY_ID,value:Qn.DISPLAY_ID,attributeName:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),label:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),inputType:"plainText",datatype:"number",filterOperators:d.value,attributeModel:"standard"},{attributeKey:Qn.CAMPAIGN_ID,value:Qn.CAMPAIGN_ID,attributeName:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),label:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),inputType:"searchSelect",options:l.value.map(g=>({id:g.id,name:g.title})),datatype:"number",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Qn.LABELS,value:Qn.LABELS,attributeName:e("FILTER.ATTRIBUTES.LABELS"),label:e("FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:n.value.map(g=>({id:g.title,name:g.title,icon:Wn("span",{class:"rounded-full",style:{backgroundColor:g.color,height:"6px",width:"6px"}})})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Qn.BROWSER_LANGUAGE,value:Qn.BROWSER_LANGUAGE,attributeName:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),label:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),inputType:"searchSelect",options:vg,dataType:"text",filterOperators:i.value,attributeModel:"additional"},{attributeKey:Qn.COUNTRY_CODE,value:Qn.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:to,dataType:"text",filterOperators:i.value,attributeModel:"additional"},{attributeKey:Qn.REFERER,value:Qn.REFERER,attributeName:e("FILTER.ATTRIBUTES.REFERER_LINK"),label:e("FILTER.ATTRIBUTES.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:d.value,attributeModel:"additional"},{attributeKey:Qn.CREATED_AT,value:Qn.CREATED_AT,attributeName:e("FILTER.ATTRIBUTES.CREATED_AT"),label:e("FILTER.ATTRIBUTES.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},{attributeKey:Qn.LAST_ACTIVITY_AT,value:Qn.LAST_ACTIVITY_AT,attributeName:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),label:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},...h.value])}}const f1e=["onClick"],g1e={class:"truncate"},_1e={key:0,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},v1e={class:"truncate"},b1e={class:"flex items-center border-none px-3 gap-2"},E1e={class:"text-n-slate-11"},T1e={__name:"MultiSelect",props:yn({options:{type:Array,required:!0},maxChips:{type:Number,default:3}},{modelValue:{type:[Array,String],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=Pe(),n=jn(e,"modelValue"),s=C(()=>!(!n.value||!Array.isArray(n.value)||n.value.length===0)),a=C(()=>s.value?n.value.map(u=>u.id):[]),o=C(()=>s.value?e.options.filter(u=>a.value.includes(u.id)):[]),l=C(()=>s.value?o.value.length===e.maxChips+1?o.value:o.value.slice(0,e.maxChips):[]),i=C(()=>s.value?o.value.length===e.maxChips+1?[]:o.value.slice(e.maxChips):[]),r=C(()=>s.value?i.value.map(u=>u.name).join(", "):""),d=u=>{const m={id:u.id,name:u.name},h=m.id;if(!s.value){n.value=[m];return}a.value.includes(h)?n.value=n.value.filter(_=>_.id!==h):n.value=[...n.value,m]};return(u,m)=>{const h=_t("tooltip");return p(),V(Di,null,{trigger:K(({toggle:_})=>[s.value?(p(),f("button",{key:0,class:"bg-n-alpha-2 py-2 rounded-lg h-8 flex items-center px-0",onClick:_},[(p(!0),f(fe,null,Ae(l.value,g=>(p(),f("div",{key:g.name,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},[g.icon?(p(),V(Wt,{key:0,icon:g.icon,class:"flex-shrink-0"},null,8,["icon"])):O("",!0),c("span",g1e,E(g.name),1)]))),128)),i.value.length>0?pe((p(),f("div",_1e,[c("span",v1e,E(I(t)("COMBOBOX.MORE",{count:i.value.length})),1)])),[[h,r.value,void 0,{top:!0}]]):O("",!0),c("div",b1e,[v(Wt,{icon:"i-lucide-plus"})])],8,f1e)):(p(),V(ce,{key:1,sm:"",slate:"",faded:"",onClick:_},{icon:K(()=>[v(Wt,{icon:"i-lucide-plus",class:"text-n-slate-11"})]),default:K(()=>[c("span",E1e,E(I(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["onClick"]))]),default:K(()=>[v(Pi,{class:"top-0 min-w-48 z-50",strong:""},{default:K(()=>[v($r,{class:"max-h-80 overflow-scroll"},{default:K(()=>[(p(!0),f(fe,null,Ae(e.options,_=>(p(),V(eo,{key:_.id,icon:_.icon,"preserve-open":"",onClick:g=>d(_)},{label:K(()=>[Ee(E(_.name)+" ",1),a.value.includes(_.id)?(p(),V(Wt,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):O("",!0)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})}}},A1e={class:"list-none"},y1e={key:0,class:"text-sm text-n-ruby-11"},Yu={__name:"ConditionRow",props:yn({showQueryOperator:{type:Boolean,default:!1},filterTypes:{type:Array,required:!0}},{attributeKey:{type:String,required:!0},attributeKeyModifiers:{},values:{type:[String,Number,Array,Object],required:!0},valuesModifiers:{},filterOperator:{type:String,required:!0},filterOperatorModifiers:{},queryOperator:{type:String,required:!1,default:void 0,validator:e=>["and","or"].includes(e)},queryOperatorModifiers:{}}),emits:yn(["remove"],["update:attributeKey","update:values","update:filterOperator","update:queryOperator"]),setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=F(!1),l=jn(e,"attributeKey"),i=jn(e,"values"),r=jn(e,"filterOperator"),d=jn(e,"queryOperator"),u=$=>e.filterTypes.find(N=>N.attributeKey===$),m=C(()=>u(l.value)),h=($,N)=>{const w=$.filterOperators.find(D=>D.value===N);return w||$.filterOperators[0]},_=C(()=>h(m.value,r.value)),g=($,N)=>$.inputOverride??N.inputType,T=C(()=>g(_.value,m.value)),S=C(()=>[{label:a("FILTER.QUERY_DROPDOWN_LABELS.AND"),value:"and",icon:Wn("span",{class:"i-lucide-ampersands !text-n-blue-text"})},{label:a("FILTER.QUERY_DROPDOWN_LABELS.OR"),value:"or",icon:Wn("span",{class:"i-woot-logic-or !text-n-blue-text"})}]),b=C(()=>[{id:!0,name:a("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:a("FILTER.ATTRIBUTE_LABELS.FALSE")}]),A=C(()=>oy(Hs({attributeKey:l.value,filterOperator:r.value,values:i.value}))),y=$=>{const N=u($),w=h(N,r.value),D=g(w,N);D==="multiSelect"?i.value=[]:["searchSelect","booleanSelect"].includes(D)?i.value={}:i.value="",r.value=w.value};return ot([l,i,r],()=>{o.value=!1}),t({validate:()=>(o.value=!0,!A.value)}),($,N)=>(p(),f("li",A1e,[c("div",{class:re(["flex items-center gap-2 rounded-md",{"animate-wiggle":o.value&&A.value}])},[e.showQueryOperator?(p(),V(cr,{key:0,modelValue:d.value,"onUpdate:modelValue":N[0]||(N[0]=w=>d.value=w),variant:"faded","hide-icon":"",class:"text-sm",options:S.value},null,8,["modelValue","options"])):O("",!0),v(cr,{modelValue:l.value,"onUpdate:modelValue":[N[1]||(N[1]=w=>l.value=w),y],variant:"faded",options:e.filterTypes},null,8,["modelValue","options"]),v(cr,{modelValue:r.value,"onUpdate:modelValue":N[2]||(N[2]=w=>r.value=w),variant:"ghost",options:m.value.filterOperators},null,8,["modelValue","options"]),_.value.hasInput?(p(),f(fe,{key:1},[T.value==="multiSelect"?(p(),V(T1e,{key:0,modelValue:i.value,"onUpdate:modelValue":N[3]||(N[3]=w=>i.value=w),options:m.value.options},null,8,["modelValue","options"])):T.value==="searchSelect"?(p(),V(Of,{key:1,modelValue:i.value,"onUpdate:modelValue":N[4]||(N[4]=w=>i.value=w),options:m.value.options},null,8,["modelValue","options"])):T.value==="booleanSelect"?(p(),V(Of,{key:2,modelValue:i.value,"onUpdate:modelValue":N[5]||(N[5]=w=>i.value=w),"disable-search":"",options:b.value},null,8,["modelValue","options"])):(p(),V(ln,{key:3,modelValue:i.value,"onUpdate:modelValue":N[6]||(N[6]=w=>i.value=w),type:T.value==="date"?"date":"text",class:"[&>input]:h-8 [&>input]:py-1.5 [&>input]:outline-offset-0",placeholder:I(a)("FILTER.INPUT_PLACEHOLDER")},null,8,["modelValue","type","placeholder"]))],64)):O("",!0),v(ce,{sm:"",solid:"",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:N[7]||(N[7]=ze(w=>s("remove"),["stop"]))})],2),o.value&&A.value?(p(),f("span",y1e,E(I(a)(`FILTER.ERRORS.${A.value}`)),1)):O("",!0)]))}},S1e={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},I1e={class:"text-base font-medium leading-6 text-n-slate-12"},C1e={key:0},x1e={class:"border-b border-n-weak pb-6"},N1e={class:"grid gap-4 list-none"},O1e={class:"flex gap-2 justify-between"},w1e={class:"flex gap-2"},R1e={__name:"ConversationFilter",props:yn({isFolderView:{type:Boolean,default:!1},folderName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:yn(["applyFilter","updateFolder","close"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:a}=h1e(),o=jn(e,"modelValue"),l=F(n.folderName),i={attributeKey:"status",filterOperator:"equal_to",values:[],queryOperator:"and"},{t:r}=Pe(),d=yt(),u=()=>{o.value=[{...i}]},m=y=>{o.value.length===1?u():o.value.splice(y,1)},h=()=>{o.value.push({...i})},_=Ks("conditionsRef"),g=()=>_.value.every(y=>y.validate()),T=()=>{g()&&s("updateFolder",o.value,l.value)};function S(){g()&&(d.dispatch("setConversationFilters",Hs(JSON.parse(JSON.stringify(o.value)))),s("applyFilter",o.value),nn(_a.APPLY_FILTER,{appliedFilters:o.value.map(y=>({key:y.attributeKey,operator:y.filterOperator,queryOperator:y.queryOperator}))}))}const b=C(()=>n.isFolderView?r("FILTER.EDIT_CUSTOM_FILTER"):r("FILTER.TITLE"));lo(()=>s("close"));const A=[()=>s("close"),{ignore:["#toggleConversationFilterButton"]}];return(y,x)=>pe((p(),f("div",S1e,[c("h3",I1e,E(b.value),1),n.isFolderView?(p(),f("div",C1e,[c("div",x1e,[v(ln,{modelValue:l.value,"onUpdate:modelValue":x[0]||(x[0]=$=>l.value=$),label:I(r)("FILTER.FOLDER_LABEL"),placeholder:I(r)("FILTER.INPUT_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])])):O("",!0),c("ul",N1e,[(p(!0),f(fe,null,Ae(o.value,($,N)=>(p(),f(fe,{key:$.id},[N===0?(p(),V(Yu,{ref_for:!0,ref_key:"conditionsRef",ref:_,key:`filter-${$.attributeKey}-0`,"attribute-key":$.attributeKey,"onUpdate:attributeKey":w=>$.attributeKey=w,"filter-operator":$.filterOperator,"onUpdate:filterOperator":w=>$.filterOperator=w,values:$.values,"onUpdate:values":w=>$.values=w,"filter-types":I(a),"show-query-operator":!1,onRemove:w=>m(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),V(Yu,{key:`filter-${$.attributeKey}-${N}`,ref_for:!0,ref_key:"conditionsRef",ref:_,"attribute-key":$.attributeKey,"onUpdate:attributeKey":w=>$.attributeKey=w,"filter-operator":$.filterOperator,"onUpdate:filterOperator":w=>$.filterOperator=w,"query-operator":o.value[N-1].queryOperator,"onUpdate:queryOperator":w=>o.value[N-1].queryOperator=w,values:$.values,"onUpdate:values":w=>$.values=w,"show-query-operator":"","filter-types":I(a),onRemove:w=>m(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),c("div",O1e,[v(ce,{sm:"",ghost:"",blue:"",onClick:h},{default:K(()=>[Ee(E(y.$t("FILTER.ADD_NEW_FILTER")),1)]),_:1}),c("div",w1e,[v(ce,{sm:"",faded:"",slate:"",onClick:u},{default:K(()=>[Ee(E(I(r)("FILTER.CLEAR_BUTTON_LABEL")),1)]),_:1}),e.isFolderView?(p(),V(ce,{key:0,sm:"",solid:"",blue:"",disabled:!l.value,onClick:T},{default:K(()=>[Ee(E(I(r)("FILTER.UPDATE_BUTTON_LABEL")),1)]),_:1},8,["disabled"])):(p(),V(ce,{key:1,sm:"",solid:"",blue:"",onClick:S},{default:K(()=>[Ee(E(I(r)("FILTER.SUBMIT_BUTTON_LABEL")),1)]),_:1}))])])])),[[I(ca),A]])}},$1e={components:{NextButton:ce,NextInput:ln},directives:{onClickOutside:ca},props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:()=>{}},openLastSavedItem:{type:Function,default:()=>{}}},emits:["close"],setup(){return{v$:Lt()}},data(){return{show:!0,name:""}},computed:{isButtonDisabled(){return this.v$.name.$invalid}},validations:{name:{required:lt,minLength:on(1)}},methods:{onClose(){this.$emit("close")},async saveCustomViews(){if(this.v$.$touch(),!this.v$.$invalid){try{await this.$store.dispatch("customViews/create",{name:this.name,filter_type:this.filterType,query:this.customViewsQuery}),this.alertMessage=this.filterType===0?this.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),this.onClose(),nn(xi.SAVE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.filterType===0?t:this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE")}finally{_e(this.alertMessage)}this.openLastSavedItem()}}}},M1e={class:"z-40 max-w-3xl lg:w-[500px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},k1e={class:"text-base font-medium leading-6 text-n-slate-12"},L1e={class:"flex flex-row justify-end w-full gap-2"};function D1e(e,t,n,s,a,o){const l=z("NextInput"),i=z("NextButton"),r=_t("on-click-outside");return pe((p(),f("div",M1e,[c("h3",k1e,E(e.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")),1),c("form",{class:"w-full grid gap-6",onSubmit:t[1]||(t[1]=ze((...d)=>o.saveCustomViews&&o.saveCustomViews(...d),["prevent"]))},[v(l,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=d=>a.name=d),placeholder:e.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER"),message:s.v$.name.$error&&e.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE"),"message-type":s.v$.name.$error&&"error",onBlur:s.v$.name.$touch},null,8,["modelValue","placeholder","message","message-type","onBlur"]),c("div",L1e,[v(i,{faded:"",slate:"",sm:"",onClick:ze(o.onClose,["prevent"])},{default:K(()=>[Ee(E(e.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON")),1)]),_:1},8,["onClick"]),v(i,{solid:"",blue:"",sm:"",disabled:o.isButtonDisabled},{default:K(()=>[Ee(E(e.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON")),1)]),_:1},8,["disabled"])])],32)])),[[r,[()=>e.$emit("close"),{ignore:["#saveFilterTeleportTarget"]}]]])}const P1e=Fe($1e,[["render",D1e]]),B1e={__name:"ChatTypeTabs",props:{items:{type:Array,default:()=>[]},activeTab:{type:String,default:Pt.ASSIGNEE_TYPE.ME}},emits:["chatTabChange"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>n.items.findIndex(i=>i.key===n.activeTab)),o=i=>{if(i>=0&&i<n.items.length){const r=n.items[i];r.key!==n.activeTab&&s("chatTabChange",r.key)}};return Qs({"Alt+KeyN":{action:()=>{if(n.activeTab===Pt.ASSIGNEE_TYPE.ALL)o(0);else{const i=(a.value+1)%n.items.length;o(i)}}}}),(i,r)=>{const d=z("woot-tabs-item"),u=z("woot-tabs");return p(),V(u,{index:a.value,class:"w-full px-3 -mt-1 py-0 [&_ul]:p-0",onChange:o},{default:K(()=>[(p(!0),f(fe,null,Ae(e.items,(m,h)=>(p(),V(d,{key:m.key,class:"text-sm [&_a]:font-medium",index:h,name:m.name,count:m.count,"is-compact":""},null,8,["index","name","count"]))),128))]),_:1},8,["index"])}}},F1e=(e,t)=>e&&t?e.created_at>=t.created_at?e:t:e||t,U1e=(e=[])=>{const t=[];return e.forEach(n=>{n.source_id?t.findIndex(a=>n.source_id===a.source_id)<0&&t.push(n):t.push(n)}),t},G1e=e=>{const t=e.messages[e.messages.length-1],n=e.messages.filter(o=>o.message_type!==2),s=n[n.length-1],a=e.last_non_activity_message;return!s&&!a?t:F1e(s,a)},V1e=(e,t)=>e.filter(n=>n.created_at*1e3<=t*1e3),H1e=(e,t)=>e.filter(n=>n.created_at*1e3>t*1e3),W1e={name:"MessagePreview",props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},setup(){const{getPlainText:e}=$a();return{getPlainText:e}},computed:{messageByAgent(){const{message_type:e}=this.message;return e===Sv.OUTGOING},isMessageAnActivity(){const{message_type:e}=this.message;return e===Sv.ACTIVITY},isMessagePrivate(){const{private:e}=this.message;return e},parsedLastMessage(){const{content_attributes:e}=this.message,{email:{subject:t}={}}=e||{};return this.getPlainText(t||this.message.content)},lastMessageFileType(){const[{file_type:e}={}]=this.message.attachments;return e},attachmentIcon(){return KC[this.lastMessageFileType]},attachmentMessageContent(){return`CHAT_LIST.ATTACHMENTS.${this.lastMessageFileType}.CONTENT`},isMessageSticker(){return this.message&&this.message.content_type==="sticker"}}},K1e={class:"overflow-hidden text-ellipsis whitespace-nowrap"},z1e={key:1},j1e={key:2},Y1e={key:3},X1e={key:4};function q1e(e,t,n,s,a,o){const l=z("fluent-icon");return p(),f("div",K1e,[n.showMessageType?(p(),f(fe,{key:0},[o.isMessagePrivate?(p(),V(l,{key:0,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"lock-closed"})):o.messageByAgent?(p(),V(l,{key:1,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"arrow-reply"})):o.isMessageAnActivity?(p(),V(l,{key:2,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"info"})):O("",!0)],64)):O("",!0),n.message.content&&o.isMessageSticker?(p(),f("span",z1e,[v(l,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-11",icon:"image"}),Ee(" "+E(e.$t("CHAT_LIST.ATTACHMENTS.image.CONTENT")),1)])):n.message.content?(p(),f("span",j1e,E(o.parsedLastMessage),1)):n.message.attachments?(p(),f("span",Y1e,[o.attachmentIcon&&n.showMessageType?(p(),V(l,{key:0,size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-11",icon:o.attachmentIcon},null,8,["icon"])):O("",!0),Ee(" "+E(e.$t(`${o.attachmentMessageContent}`)),1)])):(p(),f("span",X1e,E(n.defaultEmptyMessage||e.$t("CHAT_LIST.NO_CONTENT")),1))])}const jS=Fe(W1e,[["render",q1e]]),Z1e={class:"flex items-center text-n-slate-11 text-xs min-w-0"},Q1e={class:"truncate"},M_={__name:"InboxName",props:{inbox:{type:Object,default:()=>{}}},setup(e){return(t,n)=>(p(),f("div",Z1e,[v(bg,{inbox:e.inbox,class:"size-3 ltr:mr-0.5 rtl:ml-0.5 flex-shrink-0"},null,8,["inbox"]),c("span",Q1e,E(e.inbox.name),1)]))}},Ph=(e,t)=>e.filter(n=>n.availability_status===t).sort((n,s)=>n.name.localeCompare(s.name)),YS=e=>{const t=Ph(e,"online"),n=Ph(e,"busy"),s=Ph(e,"offline");return[...t,...n,...s]},XS=(e,t,n)=>e.map(a=>a.id===t.id?{...a,availability_status:t.accounts.find(o=>o.id===n).availability_status}:a),J1e={class:"menu text-n-slate-12 min-h-7 min-w-0",role:"button"},e0e={class:"menu-label truncate min-w-0 flex-1"},t0e={__name:"menuItem",props:{option:{type:Object,default:()=>{}},variant:{type:String,default:"default"}},setup(e){return(t,n)=>{const s=z("fluent-icon");return p(),f("div",J1e,[e.variant==="icon"&&e.option.icon?(p(),V(s,{key:0,icon:e.option.icon,size:"14",class:"flex-shrink-0"},null,8,["icon"])):O("",!0),e.variant==="label"&&e.option.color?(p(),f("span",{key:1,class:"label-pill flex-shrink-0",style:Ct({backgroundColor:e.option.color})},null,4)):O("",!0),e.variant==="agent"?(p(),V(Ft,{key:2,name:e.option.label,src:e.option.thumbnail,status:e.option.status==="online"?e.option.status:null,size:20,class:"flex-shrink-0"},null,8,["name","src","status"])):O("",!0),c("p",e0e,E(e.option.label),1)])}}},k_=Fe(t0e,[["__scopeId","data-v-55c4b462"]]),n0e={class:"flex items-center h-4"},s0e={class:"my-0 mx-2 text-xs"},a0e={__name:"menuItemWithSubmenu",props:{option:{type:Object,default:()=>{}},subMenuAvailable:{type:Boolean,default:!0}},setup(e){const t=Ks("menuRef"),{width:n,height:s}=Mi(),{bottom:a,right:o}=Ou(t),l=C(()=>s.value-a.value<240?"bottom-0":"top-0"),i=C(()=>n.value-o.value<240?"right-full":"left-full"),r=C(()=>[l.value,i.value]);return(d,u)=>{const m=z("fluent-icon");return p(),f("div",{ref_key:"menuRef",ref:t,class:re(["text-n-slate-12 menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-n-alpha-3/50 backdrop-blur-[100px] justify-between hover:bg-n-brand/10 cursor-pointer dark:hover:bg-n-solid-3",e.subMenuAvailable?"":"opacity-50 cursor-not-allowed"])},[c("div",n0e,[v(m,{icon:e.option.icon,size:"14",class:"menu-icon"},null,8,["icon"]),c("p",s0e,E(e.option.label),1)]),v(m,{icon:"chevron-right",size:"12"}),e.subMenuAvailable?(p(),f("div",{key:0,class:re(["submenu bg-n-alpha-3 backdrop-blur-[100px] p-1 shadow-lg rounded-md absolute hidden max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer",r.value])},[at(d.$slots,"default",{},void 0,!0)],2)):O("",!0)],2)}}},o0e=Fe(a0e,[["__scopeId","data-v-c3eeeb11"]]),l0e={components:{Spinner:Zs}},i0e={class:"agent-placeholder"};function r0e(e,t,n,s,a,o){const l=z("Spinner");return p(),f("div",i0e,[v(l),c("p",null,E(e.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")),1)])}const c0e=Fe(l0e,[["render",r0e],["__scopeId","data-v-b4c6c347"]]),Il={MARK_AS_READ:"mark-as-read",MARK_AS_UNREAD:"mark-as-unread",PRIORITY:"priority",STATUS:"status",SNOOZE:"snooze",AGENT:"agent",TEAM:"team",LABEL:"label",DELETE:"delete",OPEN_NEW_TAB:"open-new-tab",COPY_LINK:"copy-link"},d0e={components:{MenuItem:k_,MenuItemWithSubmenu:o0e,AgentLoadingPlaceholder:c0e},props:{chatId:{type:Number,default:null},status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null},conversationUrl:{type:String,default:""},allowedOptions:{type:Array,default:()=>[]}},emits:["updateConversation","assignPriority","markAsUnread","markAsRead","assignAgent","assignTeam","assignLabel","deleteConversation","close"],setup(){const{isAdmin:e}=io();return{isAdmin:e}},data(){return{MENU:Il,STATUS_TYPE:Pt.STATUS_TYPE,readOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_READ"),icon:"mail"},unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail-unread"},statusMenuConfig:[{key:Pt.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:Pt.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"},{key:Pt.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"}],snoozeOption:{key:Pt.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:Il.PRIORITY,label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter(e=>e.key!==this.priority)},labelMenuConfig:{key:Il.LABEL,icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:Il.AGENT,icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:Il.TEAM,icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")},deleteOption:{key:Il.DELETE,icon:"delete",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.DELETE")},openInNewTabOption:{key:Il.OPEN_NEW_TAB,icon:"open",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.OPEN_IN_NEW_TAB")},copyLinkOption:{key:Il.COPY_LINK,icon:"copy",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.COPY_LINK")}}},computed:{...St({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags",currentUser:"getCurrentUser",currentAccountId:"getCurrentAccountId"}),filteredAgentOnAvailability(){const e=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),t=XS(e,this.currentUser,this.currentAccountId);return YS(t)},assignableAgents(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.filteredAgentOnAvailability]},showSnooze(){return this.status===Pt.STATUS_TYPE.OPEN}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{isAllowed(e){return this.allowedOptions.length?e.some(t=>this.allowedOptions.includes(t)):!0},toggleStatus(e,t){this.$emit("updateConversation",e,t)},async snoozeConversation(){await this.$store.dispatch("setContextMenuChatId",this.chatId),document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority(e){this.$emit("assignPriority",e)},deleteConversation(){this.$emit("deleteConversation",this.chatId)},openInNewTab(){if(!this.conversationUrl)return;const e=`${window.chatwootConfig.hostURL}${this.conversationUrl}`;window.open(e,"_blank","noopener,noreferrer"),this.$emit("close")},async copyConversationLink(){if(this.conversationUrl)try{const e=`${window.chatwootConfig.hostURL}${this.conversationUrl}`;await qo(e),_e(this.$t("CONVERSATION.CARD_CONTEXT_MENU.COPY_LINK_SUCCESS")),this.$emit("close")}catch{}},show(e){return this.status!==e},generateMenuLabelConfig(e,t="text"){return{key:e.id,...t==="icon"&&{icon:e.icon},...t==="label"&&{color:e.color},...t==="agent"&&{thumbnail:e.thumbnail},...t==="agent"&&{status:e.availability_status},...t==="text"&&{label:e.label},...t==="label"&&{label:e.title},...t==="agent"&&{label:e.name},...t==="team"&&{label:e.name}}}}},u0e={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px] outline-1 outline outline-n-weak/50"};function p0e(e,t,n,s,a,o){const l=z("MenuItem"),i=z("MenuItemWithSubmenu"),r=z("AgentLoadingPlaceholder");return p(),f("div",u0e,[o.isAllowed([a.MENU.MARK_AS_READ,a.MENU.MARK_AS_UNREAD])?(p(),f(fe,{key:0},[n.hasUnreadMessages?(p(),V(l,{key:1,option:a.readOption,variant:"icon",onClick:t[1]||(t[1]=ze(d=>e.$emit("markAsRead"),["stop"]))},null,8,["option"])):(p(),V(l,{key:0,option:a.unreadOption,variant:"icon",onClick:t[0]||(t[0]=ze(d=>e.$emit("markAsUnread"),["stop"]))},null,8,["option"])),t[3]||(t[3]=c("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):O("",!0),o.isAllowed([a.MENU.STATUS,a.MENU.SNOOZE])?(p(),f(fe,{key:1},[(p(!0),f(fe,null,Ae(a.statusMenuConfig,d=>(p(),f(fe,null,[o.show(d.key)&&o.isAllowed([a.MENU.STATUS])?(p(),V(l,{key:d.key,option:d,variant:"icon",onClick:ze(u=>o.toggleStatus(d.key,null),["stop"])},null,8,["option","onClick"])):O("",!0)],64))),256)),o.showSnooze&&o.isAllowed([a.MENU.SNOOZE])?(p(),V(l,{key:0,option:a.snoozeOption,variant:"icon",onClick:t[2]||(t[2]=ze(d=>o.snoozeConversation(),["stop"]))},null,8,["option"])):O("",!0),t[4]||(t[4]=c("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):O("",!0),o.isAllowed([a.MENU.PRIORITY,a.MENU.LABEL,a.MENU.AGENT,a.MENU.TEAM])?(p(),f(fe,{key:2},[o.isAllowed([a.MENU.PRIORITY])?(p(),V(i,{key:0,option:a.priorityConfig},{default:K(()=>[(p(!0),f(fe,null,Ae(a.priorityConfig.options,(d,u)=>(p(),V(l,{key:u,option:d,onClick:ze(m=>o.assignPriority(d.key),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option"])):O("",!0),o.isAllowed([a.MENU.LABEL])?(p(),V(i,{key:1,option:a.labelMenuConfig,"sub-menu-available":!!e.labels.length},{default:K(()=>[(p(!0),f(fe,null,Ae(e.labels,d=>(p(),V(l,{key:d.id,option:o.generateMenuLabelConfig(d,"label"),variant:"label",onClick:ze(u=>e.$emit("assignLabel",d),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):O("",!0),o.isAllowed([a.MENU.AGENT])?(p(),V(i,{key:2,option:a.agentMenuConfig,"sub-menu-available":!!o.assignableAgents.length},{default:K(()=>[e.assignableAgentsUiFlags.isFetching?(p(),V(r,{key:0})):(p(!0),f(fe,{key:1},Ae(o.assignableAgents,d=>(p(),V(l,{key:d.id,option:o.generateMenuLabelConfig(d,"agent"),variant:"agent",onClick:ze(u=>e.$emit("assignAgent",d),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):O("",!0),o.isAllowed([a.MENU.TEAM])?(p(),V(i,{key:3,option:a.teamMenuConfig,"sub-menu-available":!!e.teams.length},{default:K(()=>[(p(!0),f(fe,null,Ae(e.teams,d=>(p(),V(l,{key:d.id,option:o.generateMenuLabelConfig(d,"team"),onClick:ze(u=>e.$emit("assignTeam",d),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):O("",!0),t[5]||(t[5]=c("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):O("",!0),o.isAllowed([a.MENU.OPEN_NEW_TAB,a.MENU.COPY_LINK])?(p(),f(fe,{key:3},[o.isAllowed([a.MENU.OPEN_NEW_TAB])?(p(),V(l,{key:0,option:a.openInNewTabOption,variant:"icon",onClick:ze(o.openInNewTab,["stop"])},null,8,["option","onClick"])):O("",!0),o.isAllowed([a.MENU.COPY_LINK])?(p(),V(l,{key:1,option:a.copyLinkOption,variant:"icon",onClick:ze(o.copyConversationLink,["stop"])},null,8,["option","onClick"])):O("",!0)],64)):O("",!0),s.isAdmin&&o.isAllowed([a.MENU.DELETE])?(p(),f(fe,{key:4},[t[6]||(t[6]=c("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),v(l,{option:a.deleteOption,variant:"icon",onClick:ze(o.deleteConversation,["stop"])},null,8,["option","onClick"])],64)):O("",!0)])}const m0e=Fe(d0e,[["render",p0e]]),qS=6e4,Xf=qS*60,Hd=Xf*24,h0e={name:"TimeAgo",props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data(){return{lastActivityAtTimeAgo:Ds(this.lastActivityTimestamp),createdAtTimeAgo:Ds(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime(){return wc(this.lastActivityAtTimeAgo)},createdAtTime(){return wc(this.createdAtTimeAgo)},createdAt(){return Date.now()-this.createdAtTimestamp*1e3>Hd*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")} ${vv(this.createdAtTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")} ${this.createdAtTimeAgo}`},lastActivity(){return Date.now()-this.lastActivityTimestamp*1e3>Hd*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")} ${vv(this.lastActivityTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")} ${this.lastActivityAtTimeAgo}`},tooltipText(){return`${this.createdAt}
              ${this.lastActivity}`}},watch:{lastActivityTimestamp(){this.lastActivityAtTimeAgo=Ds(this.lastActivityTimestamp)},createdAtTimestamp(){this.createdAtTimeAgo=Ds(this.createdAtTimestamp)}},mounted(){this.isAutoRefreshEnabled&&this.createTimer()},unmounted(){clearTimeout(this.timer)},methods:{createTimer(){this.timer=setTimeout(()=>{this.lastActivityAtTimeAgo=Ds(this.lastActivityTimestamp),this.createdAtTimeAgo=Ds(this.createdAtTimestamp),this.createTimer()},this.refreshTime())},refreshTime(){const e=Date.now()-this.lastActivityTimestamp*1e3;return e>Hd?Hd:e>Xf?Xf:qS}}},f0e={class:"ml-auto leading-4 text-xxs text-n-slate-10 hover:text-n-slate-11"};function g0e(e,t,n,s,a,o){const l=_t("tooltip");return pe((p(),f("div",f0e,[c("span",null,E(`${o.createdAtTime}  ${o.lastActivityTime}`),1)])),[[l,{content:o.tooltipText,delay:{show:1e3,hide:0},hideOnClick:!0},void 0,{top:!0}]])}const _0e=Fe(h0e,[["render",g0e]]),v0e={name:"PriorityMark",props:{priority:{type:String,default:"",validate:e=>[...Object.values(fa),""].includes(e)}},data(){return{CONVERSATION_PRIORITY:fa}},computed:{tooltipText(){return this.$t(`CONVERSATION.PRIORITY.OPTIONS.${this.priority.toUpperCase()}`)},isUrgent(){return this.priority===fa.URGENT}}};function b0e(e,t,n,s,a,o){const l=z("fluent-icon"),i=_t("tooltip");return n.priority?pe((p(),f("span",{key:0,class:re(["shrink-0 rounded-sm inline-flex items-center justify-center w-3.5 h-3.5",{"bg-n-ruby-4 text-n-ruby-10":o.isUrgent,"bg-n-slate-4 text-n-slate-11":!o.isUrgent}])},[v(l,{icon:`priority-${n.priority.toLowerCase()}`,size:o.isUrgent?12:14,class:"flex-shrink-0","view-box":"0 0 14 14"},null,8,["icon","size"])],2)),[[i,{content:o.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0}]]):O("",!0)}const E0e=Fe(v0e,[["render",b0e]]),T0e=6e4,ZS={__name:"SLACardLabel",props:{chat:{type:Object,default:()=>({})},showExtendedInfo:{type:Boolean,default:!1},parentWidth:{type:Number,default:1e3}},setup(e){const t=e,{t:n}=Pe(),s=F(null),a=F({threshold:null,isSlaMissed:!1,type:null,icon:null}),o=C(()=>{var S;return(S=t.chat)==null?void 0:S.applied_sla}),l=C(()=>{var S;return(S=t.chat)==null?void 0:S.sla_events}),i=C(()=>{var S;return(S=a.value)==null?void 0:S.threshold}),r=C(()=>{var S;return(S=a.value)==null?void 0:S.isSlaMissed}),d=C(()=>r.value?"text-n-ruby-11":"text-n-amber-11"),u=C(()=>{var A,y;const S=(y=(A=a.value)==null?void 0:A.type)==null?void 0:y.toUpperCase(),b=r.value?"MISSED":"DUE";return n(`CONVERSATION.HEADER.SLA_STATUS.${S}`,{status:n(`CONVERSATION.HEADER.SLA_STATUS.${b}`)})}),m=C(()=>{var S;return t.showExtendedInfo&&((S=l.value)==null?void 0:S.length)>0}),h=C(()=>t.showExtendedInfo?"h-[26px] rounded-lg bg-n-alpha-1":"rounded h-5  border border-n-strong"),_=()=>{a.value=oT({appliedSla:o.value,chat:t.chat})},g=()=>{s.value=setTimeout(()=>{_(),g()},T0e)};ot(()=>t.chat,()=>{_()});const T=C(()=>t.showExtendedInfo?"ltr:pr-1.5 rtl:pl-1.5 ltr:border-r rtl:border-l border-n-strong":"");return pt(()=>{_(),g()}),zs(()=>{s.value&&clearTimeout(s.value)}),(S,b)=>{const A=z("fluent-icon");return i.value?(p(),f("div",{key:0,class:re(["relative flex items-center cursor-pointer min-w-fit group",h.value])},[c("div",{class:re(["flex items-center w-full truncate px-1.5",e.showExtendedInfo?"":"gap-1"])},[c("div",{class:re(["flex items-center gap-1",T.value])},[v(A,{size:"12",icon:a.value.icon,type:"outline","icon-lib":r.value?"lucide":"fluent",class:re(["flex-shrink-0",d.value])},null,8,["icon","icon-lib","class"]),e.showExtendedInfo&&e.parentWidth>650?(p(),f("span",{key:0,class:re(["text-xs font-medium",d.value])},E(u.value),3)):O("",!0)],2),c("span",{class:re(["text-xs font-medium",[d.value,e.showExtendedInfo&&"ltr:pl-1.5 rtl:pr-1.5"]])},E(a.value.threshold),3)],2),m.value?(p(),V(OS,{key:0,"sla-missed-events":l.value,class:"start-0 xl:start-auto xl:end-0 top-7 hidden group-hover:flex"},null,8,["sla-missed-events"])):O("",!0)],2)):O("",!0)}}},Bp={__name:"ContextMenu",props:{x:{type:Number,default:0},y:{type:Number,default:0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,a=Ao("contextMenuElementTarget",null),o=Ks("menuRef"),l=C(()=>{var T;return a!=null&&a.value?(T=a.value)==null?void 0:T.$el:null}),i=P$(l),{width:r,height:d}=Mi(),{width:u,height:m}=Ou(o),h=(T,S,b,A,y,x)=>{let N=T,w=S;const D=N+b>y-16,H=w+A>x-16;return D&&(N=y-b-16),H&&(w=x-A-16),{left:Math.max(16,N),top:Math.max(16,w)}},_=C(()=>{if(!o.value)return{top:`${n.y}px`,left:`${n.x}px`};const{left:T,top:S}=h(n.x,n.y,u.value,m.value,r.value,d.value);return{top:`${S}px`,left:`${T}px`}});pt(()=>{i.value=!0,jt(()=>{var T;return(T=o.value)==null?void 0:T.focus()})});const g=()=>{i.value=!1,s("close")};return zs(()=>{i.value=!1}),(T,S)=>(p(),V(Gc,{to:"body"},{default:K(()=>[c("div",{ref_key:"menuRef",ref:o,class:"fixed outline-none z-[9999] cursor-pointer",style:Ct(_.value),tabindex:"0",onBlur:g},[at(T.$slots,"default")],36)]),_:3}))}},A0e=["value","checked"],y0e={class:"px-0 py-3 border-b group-hover:border-transparent flex-1 border-n-slate-3 min-w-0"},S0e={key:0,class:"text-n-slate-11 text-xs font-medium leading-3 py-0.5 px-0 inline-flex items-center truncate"},I0e={class:"mx-0.5"},C0e={class:"ml-auto font-normal leading-4 text-xxs"},x0e={key:4,class:"flex gap-1 mt-2 ml-2"},QS={__name:"ConversationCard",props:{activeLabel:{type:String,default:""},chat:{type:Object,default:()=>({})},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},enableContextMenu:{type:Boolean,default:!1},allowedContextMenuOptions:{type:Array,default:()=>[]}},emits:["contextMenuToggle","assignAgent","assignLabel","assignTeam","markAsUnread","markAsRead","assignPriority","updateConversationStatus","deleteConversation","selectConversation","deSelectConversation"],setup(e,{emit:t}){const n=e,s=t,a=En(),o=yt(),l=F(!1),i=F(!1),r=F({x:null,y:null}),d=ke("getSelectedChat"),u=ke("inboxes/getInboxes"),m=ke("getSelectedInbox"),h=ke("getCurrentAccountId"),_=C(()=>n.chat.meta||{}),g=C(()=>_.value.assignee||{}),T=C(()=>{var Je;return(Je=_.value.sender)==null?void 0:Je.id}),S=C(()=>T.value?o.getters["contacts/getContact"](T.value):{}),b=C(()=>d.value.id===n.chat.id),A=C(()=>n.chat.unread_count),y=C(()=>A.value>0),x=C(()=>!m.value),$=C(()=>G1e(n.chat)),N=C(()=>n.chat.inbox_id),w=C(()=>N.value?o.getters["inboxes/getInbox"](N.value):{}),D=C(()=>!n.hideInboxName&&x.value&&u.value.length>1),H=C(()=>D.value||n.showAssignee&&g.value.name||n.chat.priority),B=C(()=>{var Je;return(Je=n.chat)==null?void 0:Je.sla_policy_id}),k=C(()=>{var Je;return((Je=n.chat.labels)==null?void 0:Je.length)>0||B.value}),U=C(()=>[y.value?"font-medium text-n-slate-12":"text-n-slate-11",!n.compact&&y.value?"ltr:pr-4 rtl:pl-4":"",n.compact&&y.value?"ltr:pr-6 rtl:pl-6":""]),G=C(()=>Bt(hg({accountId:h.value,activeInbox:m.value,id:n.chat.id,label:n.activeLabel,teamId:n.teamId,conversationType:n.conversationType,foldersId:n.foldersId}))),L=C(()=>n.chat.kanban_items&&n.chat.kanban_items.length>0),M=C(()=>!n.chat.kanban_items||n.chat.kanban_items.length===0?null:n.chat.kanban_items[0]),R=C(()=>{var Je;return(Je=M.value)!=null&&Je.funnel?M.value.funnel:null}),P=C(()=>{var st,ht;if(!((st=M.value)!=null&&st.funnel_stage)||!((ht=R.value)!=null&&ht.stages))return"";const Je=R.value.stages[M.value.funnel_stage];return(Je==null?void 0:Je.name)||M.value.funnel_stage||""}),W=C(()=>({backgroundColor:"#64748B20",color:"#64748B"})),Q=C(()=>"px-2 py-0.5 rounded-full"),Z=C(()=>{var st,ht;if(!((st=M.value)!=null&&st.funnel_stage)||!((ht=R.value)!=null&&ht.stages))return{};const Je=R.value.stages[M.value.funnel_stage];return Je!=null&&Je.color?{backgroundColor:`${Je.color}20`,color:Je.color}:{}}),j=Je=>{const st=G.value;if(st){if(Je.metaKey||Je.ctrlKey){Je.preventDefault(),window.open(`${window.chatwootConfig.hostURL}${st}`,"_blank","noopener,noreferrer");return}b.value||a.push({path:st})}},X=()=>{l.value=!n.hideThumbnail},q=()=>{l.value=!1},se=Je=>{s(Je?"selectConversation":"deSelectConversation",n.chat.id,w.value.id)},he=Je=>{n.enableContextMenu&&(Je.preventDefault(),s("contextMenuToggle",!0),r.value.x=Je.pageX||Je.clientX,r.value.y=Je.pageY||Je.clientY,i.value=!0)},be=()=>{s("contextMenuToggle",!1),i.value=!1,r.value.x=null,r.value.y=null},ne=(Je,st)=>{be(),s("updateConversationStatus",n.chat.id,Je,st)},J=Je=>{s("assignAgent",Je,[n.chat.id]),be()},ue=Je=>{s("assignLabel",[Je.title],[n.chat.id]),be()},Ne=Je=>{s("assignTeam",Je,n.chat.id),be()},Re=()=>{s("markAsUnread",n.chat.id),be()},Ze=()=>{s("markAsRead",n.chat.id),be()},Xe=Je=>{s("assignPriority",Je,n.chat.id),be()},Qe=()=>{s("deleteConversation",n.chat.id),be()};return(Je,st)=>{const ht=z("fluent-icon");return p(),f("div",{class:re(["relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full py-0 border-t-0 border-b-0 border-l-0 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3 group",{"active animate-card-select bg-n-alpha-1 dark:bg-n-alpha-3 border-n-weak":b.value,"bg-n-slate-2 dark:bg-n-slate-3":e.selected,"px-0":e.compact,"px-3":!e.compact}]),onClick:j,onContextmenu:st[2]||(st[2]=wt=>he(wt))},[c("div",{class:"relative",onMouseenter:X,onMouseleave:q},[e.hideThumbnail?O("",!0):(p(),V(Ft,{key:0,name:S.value.name,src:S.value.thumbnail,size:32,status:S.value.availability_status,inbox:w.value,class:re(D.value?"mt-8":"mt-4"),"hide-offline-status":"","rounded-full":""},{overlay:K(({size:wt})=>[l.value||e.selected?(p(),f("label",{key:0,class:"flex items-center justify-center rounded-full cursor-pointer absolute inset-0 z-10 backdrop-blur-[2px]",style:Ct({width:`${wt}px`,height:`${wt}px`}),onClick:st[1]||(st[1]=ze(()=>{},["stop"]))},[c("input",{value:e.selected,checked:e.selected,class:"!m-0 cursor-pointer",type:"checkbox",onChange:st[0]||(st[0]=ee=>se(ee.target.checked))},null,40,A0e)],4)):O("",!0)]),_:1},8,["name","src","status","inbox","class"]))],32),c("div",y0e,[H.value?(p(),f("div",{key:0,class:re(["flex items-center min-w-0 gap-1",{"ltr:ml-2 rtl:mr-2":!e.compact,"mx-2":e.compact}])},[D.value?(p(),V(M_,{key:0,inbox:w.value,class:"flex-1 min-w-0"},null,8,["inbox"])):O("",!0),c("div",{class:re(["flex items-center gap-2 flex-shrink-0",{"flex-1 justify-between":!D.value}])},[e.showAssignee&&g.value.name?(p(),f("span",S0e,[v(ht,{icon:"person",size:"12",class:"text-n-slate-11"}),Ee(" "+E(g.value.name),1)])):O("",!0),v(E0e,{priority:e.chat.priority,class:"flex-shrink-0"},null,8,["priority"])],2)],2)):O("",!0),c("h4",{class:re(["conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap flex-1 min-w-0 ltr:pr-16 rtl:pl-16 text-n-slate-12",y.value?"font-semibold":"font-medium"])},E(S.value.name),3),$.value?(p(),V(jS,{key:1,message:$.value,class:re(["my-0 mx-2 leading-6 h-6 flex-1 min-w-0 text-sm",U.value])},null,8,["message","class"])):(p(),f("p",{key:2,class:re(["text-n-slate-11 text-sm my-0 mx-2 leading-6 h-6 flex-1 min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",U.value])},[v(ht,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-10",icon:"info"}),c("span",I0e,E(Je.$t("CHAT_LIST.NO_MESSAGES")),1)],2)),c("div",{class:re(["absolute flex flex-col ltr:right-3 rtl:left-3",H.value?"top-8":"top-4"])},[c("span",C0e,[v(_0e,{"last-activity-timestamp":e.chat.timestamp,"created-at-timestamp":e.chat.created_at},null,8,["last-activity-timestamp","created-at-timestamp"])]),c("span",{class:re(["shadow-lg rounded-full text-xxs font-semibold h-4 leading-4 ltr:ml-auto rtl:mr-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-n-teal-9",y.value?"block":"hidden"])},E(A.value>9?"9+":A.value),3)],2),k.value?(p(),V(NS,{key:3,"conversation-labels":e.chat.labels,class:"mt-0.5 mx-2 mb-0"},Yo({_:2},[B.value?{name:"before",fn:K(()=>[v(ZS,{chat:e.chat,class:"ltr:mr-1 rtl:ml-1"},null,8,["chat"])]),key:"0"}:void 0]),1032,["conversation-labels"])):O("",!0),L.value&&R.value?(p(),f("div",x0e,[c("span",{class:"text-xs font-medium px-2 py-0.5 rounded-full",style:Ct(W.value)},E(R.value.name),5),c("span",{class:re(["text-xs font-medium px-2 py-0.5",Q.value]),style:Ct(Z.value)},E(P.value),7)])):O("",!0)]),i.value?(p(),V(Bp,{key:0,x:r.value.x,y:r.value.y,onClose:be},{default:K(()=>[v(m0e,{status:e.chat.status,"inbox-id":w.value.id,priority:e.chat.priority,"chat-id":e.chat.id,"has-unread-messages":y.value,"conversation-url":G.value,"allowed-options":e.allowedContextMenuOptions,onUpdateConversation:ne,onAssignAgent:J,onAssignLabel:ue,onAssignTeam:Ne,onMarkAsUnread:Re,onMarkAsRead:Ze,onAssignPriority:Xe,onDeleteConversation:Qe,onClose:be},null,8,["status","inbox-id","priority","chat-id","has-unread-messages","conversation-url","allowed-options"])]),_:1},8,["x","y"])):O("",!0)],34)}}},N0e={components:{ConversationCard:QS},inject:["selectConversation","deSelectConversation","assignAgent","assignTeam","assignLabels","updateConversationStatus","toggleContextMenu","markAsUnread","markAsRead","assignPriority","isConversationSelected","deleteConversation"],props:{source:{type:Object,required:!0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},kanbanItem:{type:Object,default:null}},data(){return{localKanbanItem:this.kanbanItem}},watch:{kanbanItem(e){this.localKanbanItem=e}},methods:{updateKanbanItem(e){this.localKanbanItem=e,this.$emit("update:kanbanItem",e)}}};function O0e(e,t,n,s,a,o){const l=z("ConversationCard");return p(),V(l,{key:n.source.id,"active-label":n.label,"team-id":n.teamId,"folders-id":n.foldersId,chat:n.source,"conversation-type":n.conversationType,selected:o.isConversationSelected(n.source.id),"show-assignee":n.showAssignee,"kanban-item":a.localKanbanItem,"enable-context-menu":"",onSelectConversation:o.selectConversation,onDeSelectConversation:o.deSelectConversation,onAssignAgent:o.assignAgent,onAssignTeam:o.assignTeam,onAssignLabel:o.assignLabels,onUpdateConversationStatus:o.updateConversationStatus,onContextMenuToggle:o.toggleContextMenu,onMarkAsUnread:o.markAsUnread,onAssignPriority:o.assignPriority,"onUpdate:kanbanItem":o.updateKanbanItem,onMarkAsRead:o.markAsRead,onDeleteConversation:o.deleteConversation},null,8,["active-label","team-id","folders-id","chat","conversation-type","selected","show-assignee","kanban-item","onSelectConversation","onDeSelectConversation","onAssignAgent","onAssignTeam","onAssignLabel","onUpdateConversationStatus","onContextMenuToggle","onMarkAsUnread","onAssignPriority","onUpdate:kanbanItem","onMarkAsRead","onDeleteConversation"])}const w0e=Fe(N0e,[["render",O0e]]),R0e={props:{show:{type:Boolean,default:!1},activeCustomView:{type:Object,default:()=>{}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:()=>{}}},emits:["close","update:show"],computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},activeCustomViews(){return this.activeFilterType===0?"conversation":this.activeFilterType===1?"contact":""},deleteMessage(){return` ${this.activeCustomView&&this.activeCustomView.name}?`},deleteConfirmText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES")}`},deleteRejectText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO")}`},isFolderSection(){return this.activeFilterType===0&&this.$route.name!=="home"},isSegmentSection(){return this.activeFilterType===1&&this.$route.name!=="contacts_dashboard"}},methods:{async deleteSavedCustomViews(){var e;try{const t=Number(this.customViewsId),n=this.activeCustomViews;await this.$store.dispatch("customViews/delete",{id:t,filterType:n}),this.closeDeletePopup(),_e(this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),nn(xi.DELETE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(t){const n=(e=t==null?void 0:t.response)!=null&&e.message||this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE");_e(n)}this.openLastItemAfterDelete()},closeDeletePopup(){this.$emit("close")}}};function $0e(e,t,n,s,a,o){const l=z("woot-delete-modal");return p(),f("div",null,[o.localShow?(p(),V(l,{key:0,show:o.localShow,"onUpdate:show":t[0]||(t[0]=i=>o.localShow=i),"on-close":o.closeDeletePopup,"on-confirm":o.deleteSavedCustomViews,title:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":o.deleteMessage,"confirm-text":o.deleteConfirmText,"reject-text":o.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):O("",!0)])}const M0e=Fe(R0e,[["render",$0e]]),Wd=Pt.SNOOZE_OPTIONS,k0e=e=>{const t=mA(q3(e,1));return gA(t)?t:Uc(t,{days:(8-t.getDay())%7})},L0e=e=>{const t=gi(Uc(e,{months:1}));return gA(t)?t:Uc(t,{days:(8-t.getDay())%7})},D0e=e=>Uc(e,{days:1}),Bh=e=>IL(SL(yL(e,9),0),0),L_=(e,t=new Date)=>{let n=null;return e===Wd.AN_HOUR_FROM_NOW?n=Uc(t,{hours:1}):e===Wd.UNTIL_TOMORROW?n=Bh(D0e(t)):e===Wd.UNTIL_NEXT_WEEK?n=Bh(k0e(t)):e===Wd.UNTIL_NEXT_MONTH&&(n=Bh(L0e(t))),n?Go(n):null},P0e=e=>{if(!e)return null;const t=new Date(e);return lx(t)?ts(t,"h.mmaaa"):e?ts(t,"d MMM, h.mmaaa"):null},B0e=e=>e?Go(new Date(e)):null,F0e=e=>{if(!e)return null;const t={minutes:"m",minute:"m",hours:"h",hour:"h",days:"d",day:"d",months:"mo",month:"mo",years:"y",year:"y"};return e.replace(/^in\s+/i,"").replace(/\s(minute|hour|day|month|year)s?\b/gi,(s,a)=>t[a.toLowerCase()]||s)},k0="CMD_MUTE_CONVERSATION",L0="CMD_UNMUTE_CONVERSATION",D0="CMD_SEND_TRANSCRIPT",U0e="CMD_REOPEN_CONVERSATION",G0e="CMD_RESOLVE_CONVERSATION",V0e="CMD_SNOOZE_CONVERSATION",H0e="CMD_AI_ASSIST",P0="CMD_BULK_ACTION_SNOOZE_CONVERSATION",B0="CMD_BULK_ACTION_REOPEN_CONVERSATION",F0="CMD_BULK_ACTION_RESOLVE_CONVERSATION",U0="CMD_SNOOZE_NOTIFICATION",W0e={components:{Avatar:Ft,Spinner:Zs,NextButton:ce},props:{selectedInboxes:{type:Array,default:()=>[]},conversationCount:{type:Number,default:0}},emits:["select","close"],data(){return{query:"",selectedAgent:null,goBackToAgentList:!1}},computed:{...St({uiFlags:"bulkActions/getUIFlags",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"}),filteredAgents(){return this.query?this.assignableAgents.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase())):[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.assignableAgents]},assignableAgents(){return this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.selectedInboxes.join(","))},conversationLabel(){return this.conversationCount>1?"conversations":"conversation"}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",this.selectedInboxes)},methods:{submit(){this.$emit("select",this.selectedAgent)},goBack(){this.goBackToAgentList=!0,this.selectedAgent=null},assignAgent(e){this.selectedAgent=e},onClose(){this.$emit("close")},onCloseAgentList(){this.selectedAgent===null&&!this.goBackToAgentList&&this.onClose(),this.goBackToAgentList=!1}}},K0e={class:"bulk-action__agents"},z0e={class:"flex items-center justify-between header"},j0e={class:"container"},Y0e={key:0,class:"agent__list-loading"},X0e={key:1,class:"agent__list-container"},q0e={key:0},Z0e={class:"search-container"},Q0e={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},J0e=["placeholder"],eEe=["onClick"],tEe={class:"my-0 text-n-slate-12"},nEe={key:1,class:"agent-confirmation-container"},sEe={key:0},aEe={key:1},oEe={class:"agent-confirmation-actions"};function lEe(e,t,n,s,a,o){const l=z("NextButton"),i=z("Spinner"),r=z("fluent-icon"),d=z("Avatar"),u=_t("on-clickaway");return pe((p(),f("div",K0e,[t[2]||(t[2]=c("div",{class:"triangle"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),c("div",z0e,[c("span",null,E(e.$t("BULK_ACTION.AGENT_SELECT_LABEL")),1),v(l,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o.onClose},null,8,["onClick"])]),c("div",j0e,[e.assignableAgentsUiFlags.isFetching?(p(),f("div",Y0e,[v(i),c("p",null,E(e.$t("BULK_ACTION.AGENT_LIST_LOADING")),1)])):(p(),f("div",X0e,[a.selectedAgent?(p(),f("div",nEe,[a.selectedAgent.id?(p(),f("p",sEe,[Ee(E(e.$t("BULK_ACTION.ASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:o.conversationLabel}))+" ",1),c("strong",null,E(a.selectedAgent.name),1),t[1]||(t[1]=c("span",null,"?",-1))])):(p(),f("p",aEe,E(e.$t("BULK_ACTION.UNASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:o.conversationLabel})),1)),c("div",oEe,[v(l,{faded:"",sm:"",slate:"",type:"reset",label:e.$t("BULK_ACTION.GO_BACK_LABEL"),onClick:o.goBack},null,8,["label","onClick"]),v(l,{sm:"",type:"submit",label:e.$t("BULK_ACTION.YES"),"is-loading":e.uiFlags.isUpdating,onClick:o.submit},null,8,["label","is-loading","onClick"])])])):(p(),f("ul",q0e,[c("li",Z0e,[c("div",Q0e,[v(r,{icon:"search",class:"search-icon",size:"16"}),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.query=m),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,J0e),[[mt,a.query]])])]),(p(!0),f(fe,null,Ae(o.filteredAgents,m=>(p(),f("li",{key:m.id},[c("div",{class:"agent-list-item",onClick:h=>o.assignAgent(m)},[v(d,{name:m.name,src:m.thumbnail,status:m.availability_status,size:22,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),c("span",tEe,E(m.name),1)],8,eEe)]))),128))]))]))])])),[[u,o.onCloseAgentList]])}const iEe=Fe(W0e,[["render",lEe],["__scopeId","data-v-93d5beb7"]]),rEe={class:"absolute z-20 w-auto origin-top-right border border-solid rounded-lg shadow-md ltr:right-2 rtl:left-2 top-12 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak"},cEe={class:"p-2.5 flex gap-1 items-center justify-between"},dEe={class:"text-sm font-medium text-n-slate-12"},uEe={class:"px-2.5 pt-0 pb-2.5"},pEe={__name:"UpdateActions",props:{showResolve:{type:Boolean,default:!0},showReopen:{type:Boolean,default:!0},showSnooze:{type:Boolean,default:!0}},emits:["update","close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F([{icon:"i-lucide-check",key:"resolved"},{icon:"i-lucide-redo",key:"open"},{icon:"i-lucide-alarm-clock",key:"snoozed"}]),l=u=>{if(u==="snoozed"){const m=document.querySelector("ninja-keys");m==null||m.open({parent:"bulk_action_snooze_conversation"})}else s("update",u)},i=()=>{s("close")},r=u=>({resolved:n.showResolve,open:n.showReopen,snoozed:n.showSnooze})[u]||!1,d=u=>({resolved:a("CONVERSATION.HEADER.RESOLVE_ACTION"),open:a("CONVERSATION.HEADER.REOPEN_ACTION"),snoozed:a("BULK_ACTION.UPDATE.SNOOZE_UNTIL")})[u]||"";return(u,m)=>{const h=_t("on-clickaway");return pe((p(),f("div",rEe,[m[0]||(m[0]=c("div",{class:"right-[var(--triangle-position)] block z-10 absolute text-left -top-3"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px",class:"fill-n-alpha-3 backdrop-blur-[100px] stroke-n-weak"})])],-1)),c("div",cEe,[c("span",dEe,E(u.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")),1),v(ce,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:i})]),c("div",uEe,[v(dp,{class:"m-0 list-none"},{default:K(()=>[(p(!0),f(fe,null,Ae(o.value,_=>(p(),f(fe,null,[r(_.key)?(p(),V(Pc,{key:_.key},{default:K(()=>[v(ce,{ghost:"",sm:"",slate:"",class:"!w-full !justify-start",icon:_.icon,label:d(_.key),onClick:g=>l(_.key)},null,8,["icon","label","onClick"])]),_:2},1024)):O("",!0)],64))),256))]),_:1})])])),[[h,i]])}}},mEe={components:{NextButton:ce},emits:["update","close","assign"],data(){return{query:"",selectedLabels:[]}},computed:{...St({labels:"labels/getLabels"}),filteredLabels(){return this.labels.filter(e=>e.title.toLowerCase().includes(this.query.toLowerCase()))}},methods:{isLabelSelected(e){return this.selectedLabels.includes(e)},assignLabels(e){this.$emit("update",e)},onClose(){this.$emit("close")}}},hEe={class:"labels-container"},fEe={class:"flex items-center justify-between header"},gEe={class:"labels-list"},_Ee={class:"labels-list__header"},vEe={class:"flex items-center justify-between h-8 gap-2 label-list-search"},bEe=["placeholder"],EEe={class:"labels-list__body"},TEe=["value"],AEe={class:"overflow-hidden label-title whitespace-nowrap text-ellipsis"},yEe={class:"labels-list__footer"};function SEe(e,t,n,s,a,o){const l=z("NextButton"),i=z("fluent-icon"),r=_t("on-clickaway");return pe((p(),f("div",hEe,[t[3]||(t[3]=c("div",{class:"triangle"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),c("div",fEe,[c("span",null,E(e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")),1),v(l,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o.onClose},null,8,["onClick"])]),c("div",gEe,[c("header",_Ee,[c("div",vEe,[v(i,{icon:"search",class:"search-icon",size:"16"}),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.query=d),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm label--search_input"},null,8,bEe),[[mt,a.query]])])]),c("ul",EEe,[(p(!0),f(fe,null,Ae(o.filteredLabels,d=>(p(),f("li",{key:d.id,class:"label__list-item"},[c("label",{class:re(["item",{"label-selected":o.isLabelSelected(d.title)}])},[pe(c("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>a.selectedLabels=u),type:"checkbox",value:d.title,class:"label-checkbox"},null,8,TEe),[[Xt,a.selectedLabels]]),c("span",AEe,E(d.title),1),c("span",{class:"label-pill",style:Ct({backgroundColor:d.color})},null,4)],2)]))),128))]),c("footer",yEe,[v(l,{sm:"",type:"submit",label:e.$t("BULK_ACTION.LABELS.ASSIGN_SELECTED_LABELS"),disabled:!a.selectedLabels.length,onClick:t[2]||(t[2]=d=>e.$emit("assign",a.selectedLabels))},null,8,["label","disabled"])])])])),[[r,o.onClose]])}const IEe=Fe(mEe,[["render",SEe],["__scopeId","data-v-96455213"]]),CEe={components:{NextButton:ce},emits:["assignTeam","close"],data(){return{query:"",selectedteams:[]}},computed:{...St({teams:"teams/getTeams"}),filteredTeams(){return[{name:"None",id:0},...this.teams.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))]}},methods:{assignTeam(e){this.$emit("assignTeam",e)},onClose(){this.$emit("close")}}},xEe={class:"bulk-action__teams"},NEe={class:"flex items-center justify-between header"},OEe={class:"container"},wEe={class:"team__list-container"},REe={class:"search-container"},$Ee={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},MEe=["placeholder"],kEe=["onClick"],LEe={class:"my-0 ltr:ml-2 rtl:mr-2 text-n-slate-12"},DEe={key:1},PEe={class:"team__list-item"},BEe={class:"my-0 ltr:ml-2 rtl:mr-2 text-n-slate-12"};function FEe(e,t,n,s,a,o){const l=z("NextButton"),i=z("fluent-icon"),r=_t("on-clickaway");return pe((p(),f("div",xEe,[t[1]||(t[1]=c("div",{class:"triangle"},[c("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[c("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),c("div",NEe,[c("span",null,E(e.$t("BULK_ACTION.TEAMS.TEAM_SELECT_LABEL")),1),v(l,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o.onClose},null,8,["onClick"])]),c("div",OEe,[c("div",wEe,[c("ul",null,[c("li",REe,[c("div",$Ee,[v(i,{icon:"search",class:"search-icon",size:"16"}),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.query=d),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,MEe),[[mt,a.query]])])]),o.filteredTeams.length?(p(!0),f(fe,{key:0},Ae(o.filteredTeams,d=>(p(),f("li",{key:d.id},[c("div",{class:"team__list-item",onClick:u=>o.assignTeam(d)},[c("span",LEe,E(d.name),1)],8,kEe)]))),128)):(p(),f("li",DEe,[c("div",PEe,[c("span",BEe,E(e.$t("BULK_ACTION.TEAMS.NO_TEAMS_AVAILABLE")),1)])]))])])])])),[[r,o.onClose]])}const UEe=Fe(CEe,[["render",FEe],["__scopeId","data-v-71bff55d"]]),GEe={components:{DatePicker:mS,NextButton:ce},emits:["close","chooseTime"],data(){return{snoozeTime:null,lang:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearFormat:"YYYY",monthFormat:"MMMM"}}},methods:{onClose(){this.$emit("close")},chooseTime(){this.$emit("chooseTime",this.snoozeTime)},disabledDate(e){const t=new Date;return t.setDate(t.getDate()-1),e<t},disabledTime(e){const t=new Date;return t.setHours(t.getHours()+1),e<t}}},VEe={class:"flex flex-col"},HEe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function WEe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("DatePicker"),r=z("NextButton");return p(),f("div",VEe,[v(l,{"header-title":e.$t("CONVERSATION.CUSTOM_SNOOZE.TITLE")},null,8,["header-title"]),c("form",{class:"modal-content w-full pt-2 px-5 pb-6",onSubmit:t[1]||(t[1]=ze((...d)=>o.chooseTime&&o.chooseTime(...d),["prevent"]))},[v(i,{value:a.snoozeTime,"onUpdate:value":t[0]||(t[0]=d=>a.snoozeTime=d),type:"datetime",inline:"","input-class":"mx-input ",lang:a.lang,"disabled-date":o.disabledDate,"disabled-time":o.disabledTime},null,8,["value","lang","disabled-date","disabled-time"]),c("div",HEe,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.CANCEL"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(r,{type:"submit",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.APPLY")},null,8,["label"])])],32)])}const D_=Fe(GEe,[["render",WEe]]),KEe={components:{AgentSelector:iEe,UpdateActions:pEe,LabelActions:IEe,TeamActions:UEe,CustomSnoozeModal:D_,NextButton:ce},props:{conversations:{type:Array,default:()=>[]},allConversationsSelected:{type:Boolean,default:!1},selectedInboxes:{type:Array,default:()=>[]},showOpenAction:{type:Boolean,default:!1},showResolvedAction:{type:Boolean,default:!1},showSnoozedAction:{type:Boolean,default:!1}},emits:["selectAllConversations","assignAgent","updateConversations","assignLabels","assignTeam","resolveConversations"],data(){return{showAgentsList:!1,showUpdateActions:!1,showLabelActions:!1,showTeamsList:!1,popoverPositions:{},showCustomTimeSnoozeModal:!1}},mounted(){It.on(P0,this.onCmdSnoozeConversation),It.on(B0,this.onCmdReopenConversation),It.on(F0,this.onCmdResolveConversation)},unmounted(){It.off(P0,this.onCmdSnoozeConversation),It.off(B0,this.onCmdReopenConversation),It.off(F0,this.onCmdResolveConversation)},methods:{onCmdSnoozeConversation(e){e===Pt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?this.showCustomTimeSnoozeModal=!0:this.updateConversations("snoozed",L_(e)||null)},onCmdReopenConversation(){this.updateConversations("open",null)},onCmdResolveConversation(){this.updateConversations("resolved",null)},customSnoozeTime(e){this.showCustomTimeSnoozeModal=!1,e&&this.updateConversations("snoozed",Go(e))},hideCustomSnoozeModal(){this.showCustomTimeSnoozeModal=!1},selectAll(e){this.$emit("selectAllConversations",e.target.checked)},submit(e){this.$emit("assignAgent",e)},updateConversations(e,t){this.$emit("updateConversations",e,t)},assignLabels(e){this.$emit("assignLabels",e)},assignTeam(e){this.$emit("assignTeam",e)},resolveConversations(){this.$emit("resolveConversations")},toggleUpdateActions(){this.showUpdateActions=!this.showUpdateActions},toggleLabelActions(){this.showLabelActions=!this.showLabelActions},toggleAgentList(){this.showAgentsList=!this.showAgentsList},toggleTeamsList(){this.showTeamsList=!this.showTeamsList}}},zEe={class:"bulk-action__container"},jEe={class:"flex items-center justify-between"},YEe={class:"flex items-center justify-between bulk-action__panel"},XEe=["checked",".indeterminate"],qEe={class:"flex items-center gap-1 bulk-action__actions"},ZEe={key:0,class:"bulk-action__alert"};function QEe(e,t,n,s,a,o){const l=z("NextButton"),i=z("LabelActions"),r=z("UpdateActions"),d=z("AgentSelector"),u=z("TeamActions"),m=z("CustomSnoozeModal"),h=z("woot-modal"),_=_t("tooltip");return p(),f("div",zEe,[c("div",jEe,[c("label",YEe,[c("input",{type:"checkbox",class:"checkbox",checked:n.allConversationsSelected,".indeterminate":!n.allConversationsSelected,onChange:t[0]||(t[0]=g=>o.selectAll(g))},null,40,XEe),c("span",null,E(e.$t("BULK_ACTION.CONVERSATIONS_SELECTED",{conversationCount:n.conversations.length})),1)]),c("div",qEe,[pe(v(l,{icon:"i-lucide-tags",slate:"",xs:"",faded:"",onClick:o.toggleLabelActions},null,8,["onClick"]),[[_,e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")]]),pe(v(l,{icon:"i-lucide-repeat",slate:"",xs:"",faded:"",onClick:o.toggleUpdateActions},null,8,["onClick"]),[[_,e.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")]]),pe(v(l,{icon:"i-lucide-user-round-plus",slate:"",xs:"",faded:"",onClick:o.toggleAgentList},null,8,["onClick"]),[[_,e.$t("BULK_ACTION.ASSIGN_AGENT_TOOLTIP")]]),pe(v(l,{icon:"i-lucide-users-round",slate:"",xs:"",faded:"",onClick:o.toggleTeamsList},null,8,["onClick"]),[[_,e.$t("BULK_ACTION.ASSIGN_TEAM_TOOLTIP")]])]),v(Ps,{name:"popover-animation"},{default:K(()=>[a.showLabelActions?(p(),V(i,{key:0,class:"label-actions-box",onAssign:o.assignLabels,onClose:t[1]||(t[1]=g=>a.showLabelActions=!1)},null,8,["onAssign"])):O("",!0)]),_:1}),v(Ps,{name:"popover-animation"},{default:K(()=>[a.showUpdateActions?(p(),V(r,{key:0,class:"update-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,"show-resolve":!n.showResolvedAction,"show-reopen":!n.showOpenAction,"show-snooze":!n.showSnoozedAction,onUpdate:o.updateConversations,onClose:t[2]||(t[2]=g=>a.showUpdateActions=!1)},null,8,["selected-inboxes","conversation-count","show-resolve","show-reopen","show-snooze","onUpdate"])):O("",!0)]),_:1}),v(Ps,{name:"popover-animation"},{default:K(()=>[a.showAgentsList?(p(),V(d,{key:0,class:"agent-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,onSelect:o.submit,onClose:t[3]||(t[3]=g=>a.showAgentsList=!1)},null,8,["selected-inboxes","conversation-count","onSelect"])):O("",!0)]),_:1}),v(Ps,{name:"popover-animation"},{default:K(()=>[a.showTeamsList?(p(),V(u,{key:0,class:"team-actions-box",onAssignTeam:o.assignTeam,onClose:t[4]||(t[4]=g=>a.showTeamsList=!1)},null,8,["onAssignTeam"])):O("",!0)]),_:1})]),n.allConversationsSelected?(p(),f("div",ZEe,E(e.$t("BULK_ACTION.ALL_CONVERSATIONS_SELECTED_ALERT")),1)):O("",!0),v(h,{show:a.showCustomTimeSnoozeModal,"onUpdate:show":t[5]||(t[5]=g=>a.showCustomTimeSnoozeModal=g),"on-close":o.hideCustomSnoozeModal},{default:K(()=>[v(m,{onClose:o.hideCustomSnoozeModal,onChooseTime:o.customSnoozeTime},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const JEe=Fe(KEe,[["render",QEe],["__scopeId","data-v-66a565e2"]]),JS={__name:"IntersectionObserver",props:{options:{type:Object,default:()=>({root:document,rootMargin:"100px 0 100px 0)"})}},emits:["observed"],setup(e,{emit:t}){const n=t,s=F("");return L$(s,([{isIntersecting:a}])=>{a&&n("observed")},e.options),(a,o)=>(p(),f("div",{ref_key:"observedElement",ref:s,class:"h-6 w-full"},null,512))}};function eTe(e){const t=()=>{const a=e.value.querySelectorAll("div.conversations-list div.conversation"),o=e.value.querySelector("div.conversations-list div.conversation.active"),l=[...a].indexOf(o),i=a.length-1;return{allConversations:a,activeConversation:o,activeConversationIndex:l,lastConversationIndex:i}},n=a=>{const{allConversations:o,activeConversationIndex:l,lastConversationIndex:i}=t(),r=a==="previous"?l-1:l+1;o.length>0&&r>=0&&r<=i?o[r].click():o.length>0&&o[a==="previous"?0:i].click()};Qs({"Alt+KeyJ":{action:()=>n("previous"),allowOnFocusedInput:!0},"Alt+KeyK":{action:()=>n("next"),allowOnFocusedInput:!0}})}function tTe(){const e=Pn(),{t}=Pe(),n=ke("bulkActions/getSelectedConversationIds"),s=F([]);function a(_,g){e.dispatch("bulkActions/setSelectedConversationIds",_),s.value=[...s.value,g]}function o(_,g){e.dispatch("bulkActions/removeSelectedConversationIds",_),s.value=s.value.filter(T=>T!==g)}function l(){e.dispatch("bulkActions/clearSelectedConversationIds"),s.value=[]}function i(_,g){const T=I(g);_?(e.dispatch("bulkActions/setSelectedConversationIds",T.map(S=>S.id)),s.value=T.map(S=>S.inbox_id)):l()}function r(_){return n.value.includes(_)}async function d(_,g=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:g||n.value,fields:{assignee_id:_.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),g?_e(t("CONVERSATION.CARD_CONTEXT_MENU.API.AGENT_ASSIGNMENT.SUCCESFUL",{agentName:_.name,conversationId:g})):_e(t("BULK_ACTION.ASSIGN_SUCCESFUL"))}catch{_e(t("BULK_ACTION.ASSIGN_FAILED"))}}async function u(_,g=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:g||n.value,labels:{add:_}}),e.dispatch("bulkActions/clearSelectedConversationIds"),g?_e(t("CONVERSATION.CARD_CONTEXT_MENU.API.LABEL_ASSIGNMENT.SUCCESFUL",{labelName:_[0],conversationId:g})):_e(t("BULK_ACTION.LABELS.ASSIGN_SUCCESFUL"))}catch{_e(t("BULK_ACTION.LABELS.ASSIGN_FAILED"))}}async function m(_){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{team_id:_.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),_e(t("BULK_ACTION.TEAMS.ASSIGN_SUCCESFUL"))}catch{_e(t("BULK_ACTION.TEAMS.ASSIGN_FAILED"))}}async function h(_,g){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{status:_},snoozed_until:g}),e.dispatch("bulkActions/clearSelectedConversationIds"),_e(t("BULK_ACTION.UPDATE.UPDATE_SUCCESFUL"))}catch{_e(t("BULK_ACTION.UPDATE.UPDATE_FAILED"))}}return{selectedConversations:n,selectedInboxes:s,selectConversation:a,deSelectConversation:o,selectAllConversations:i,resetBulkActions:l,isConversationSelected:r,onAssignAgent:d,onAssignLabels:u,onAssignTeamsForBulk:m,onUpdateConversations:h}}const Ba=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],nc=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],ur=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],nTe=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],pr=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}],sTe=[{attributeKey:"status",attributeI18nKey:"STATUS",inputType:"multi_select",dataType:"text",filterOperators:Ba,attributeModel:"standard"},{attributeKey:"assignee_id",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",dataType:"text",filterOperators:nc,attributeModel:"standard"},{attributeKey:"priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",dataType:"text",filterOperators:Ba,attributeModel:"standard"},{attributeKey:"inbox_id",attributeI18nKey:"INBOX_NAME",inputType:"search_select",dataType:"text",filterOperators:nc,attributeModel:"standard"},{attributeKey:"team_id",attributeI18nKey:"TEAM_NAME",inputType:"search_select",dataType:"number",filterOperators:nc,attributeModel:"standard"},{attributeKey:"display_id",attributeI18nKey:"CONVERSATION_IDENTIFIER",inputType:"plain_text",dataType:"Number",filterOperators:ur,attributeModel:"standard"},{attributeKey:"campaign_id",attributeI18nKey:"CAMPAIGN_NAME",inputType:"search_select",dataType:"Number",filterOperators:nc,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:nc,attributeModel:"standard"},{attributeKey:"browser_language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",dataType:"text",filterOperators:Ba,attributeModel:"additional"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",dataType:"text",filterOperators:Ba,attributeModel:"additional"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:ur,attributeModel:"additional"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:pr,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:pr,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:pr,attributeModel:"standard"}],aTe=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"status",i18nKey:"STATUS"},{key:"assignee_id",i18nKey:"ASSIGNEE_NAME"},{key:"inbox_id",i18nKey:"INBOX_NAME"},{key:"team_id",i18nKey:"TEAM_NAME"},{key:"display_id",i18nKey:"CONVERSATION_IDENTIFIER"},{key:"campaign_id",i18nKey:"CAMPAIGN_NAME"},{key:"labels",i18nKey:"LABELS"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"}]},{name:"Additional Filters",i18nGroup:"ADDITIONAL_FILTERS",attributes:[{key:"browser_language",i18nKey:"BROWSER_LANGUAGE"},{key:"country_code",i18nKey:"COUNTRY_NAME"},{key:"referer",i18nKey:"REFERER_LINK"}]}],oTe=[{attributeKey:"name",attributeI18nKey:"NAME",inputType:"plain_text",dataType:"text",filterOperators:Ba,attribute_type:"standard"},{attributeKey:"email",attributeI18nKey:"EMAIL",inputType:"plain_text",dataType:"text",filterOperators:ur,attribute_type:"standard"},{attributeKey:"phone_number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",dataType:"text",filterOperators:ur,attribute_type:"standard"},{attributeKey:"identifier",attributeI18nKey:"IDENTIFIER",inputType:"plain_text",dataType:"number",filterOperators:Ba,attribute_type:"standard"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY",inputType:"search_select",dataType:"number",filterOperators:Ba,attribute_type:"standard"},{attributeKey:"city",attributeI18nKey:"CITY",inputType:"plain_text",dataType:"Number",filterOperators:ur,attribute_type:"standard"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:pr,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:pr,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:pr,attributeModel:"standard"},{attributeKey:"blocked",attributeI18nKey:"BLOCKED",inputType:"search_select",dataType:"text",filterOperators:Ba,attributeModel:"standard"}],lTe=e=>{switch(e){case"date":return"date";case"text":return"plain_text";case"list":return"search_select";case"checkbox":return"search_select";default:return"plain_text"}},iTe=e=>{switch(e){case"list":return Ba;case"text":return ur;case"number":return Ba;case"link":return Ba;case"date":return nTe;case"checkbox":return Ba;default:return Ba}},rTe=({filteri18nKey:e,attributeModel:t})=>{const{t:n}=Pe(),{getters:s}=yt(),a=aTe;return{setFilterAttributes:()=>{const r=s["attributes/getAttributesByModel"](t),d={name:n(`${e}.GROUPS.CUSTOM_ATTRIBUTES`),attributes:r.map(h=>({key:h.attribute_key,name:h.attribute_display_name}))},u=a.map(h=>({name:n(`${e}.GROUPS.${h.i18nGroup}`),attributes:h.attributes.map(_=>({key:_.key,name:n(`${e}.ATTRIBUTES.${_.i18nKey}`)}))})),m=r.map(h=>({attributeKey:h.attribute_key,attributeI18nKey:`CUSTOM_ATTRIBUTE_${h.attribute_display_type.toUpperCase()}`,inputType:lTe(h.attribute_display_type),filterOperators:iTe(h.attribute_display_type),attributeModel:"custom_attributes"}));return{filterGroups:[...u,d],filterTypes:[...m]}},initializeStatusAndAssigneeFilterToModal:(r,d,u)=>r!==""?{attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:r,name:n(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${r}.TEXT`)}],query_operator:"and",custom_attribute_type:""}:u===Pt.ASSIGNEE_TYPE.ME?{attribute_key:"assignee_id",filter_operator:"equal_to",values:d,query_operator:"and",custom_attribute_type:""}:null,initializeInboxTeamAndLabelFilterToModal:(r,d,u,m,h)=>{const _=[];return r&&_.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:r,name:d.name}],query_operator:"and",custom_attribute_type:""}),u&&_.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:m,query_operator:"and",custom_attribute_type:""}),h&&_.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:h,name:h}],query_operator:"and",custom_attribute_type:""}),_}}},cTe=(e,t,n)=>{if((e==="created_at"||e==="last_activity_at")&&t==="days_before")return"plain_text";const s=n.find(a=>a.attributeKey===e);return s==null?void 0:s.inputType},dTe=e=>({text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"})[e],uTe=(e,t)=>{const n=t.find(o=>o.attribute_key===e),{attribute_display_type:s}=n;return dTe(s)},Kd=(e,t,n,s)=>{const a=t==null?void 0:t.find(o=>o[n]===e[0]);return{id:e[0],name:a?a[s]:e[0]}},pTe=e=>e.map(t=>({id:t,name:t})),mTe=(e,t)=>t.filter(s=>e.includes(s.title)).map(({title:s})=>({id:s,name:s})),hTe=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:a})=>({id:s.toLowerCase(),name:a})),fTe=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:a})=>({id:s,name:a})),gTe=(e,t)=>t.filter(n=>e.includes(n.id)),_Te=(e,t)=>{const{attribute_key:n,values:s}=e,{languages:a,countries:o,agents:l,inboxes:i,teams:r,campaigns:d,labels:u,priority:m}=t;switch(n){case"status":return pTe(s);case"assignee_id":return Kd(s,l,"id","name");case"inbox_id":return Kd(s,i,"id","name");case"team_id":return Kd(s,r,"id","name");case"campaign_id":return Kd(s,d,"id","title");case"labels":return mTe(s,u);case"priority":return gTe(s,m);case"browser_language":return hTe(s,a);case"country_code":return fTe(s,o);default:return{id:s[0],name:s[0]}}},eI=(e,t)=>{const{attribute_key:n,filter_operator:s,values:a}=e,{filterTypes:o,allCustomAttributes:l}=t,i=cTe(n,s,o);return i===void 0?uTe(n,l)==="string"?a[0].toString():{id:a[0],name:a[0]}:i==="multi_select"||i==="search_select"?_Te(e,t):a[0].toString()},vTe={key:3,class:"flex items-center justify-center p-4 overflow-auto"},bTe={key:0,class:"flex justify-center my-4"},ETe={key:1,class:"p-4 text-center text-n-slate-11"},TTe={__name:"ChatList",props:{conversationInbox:{type:[String,Number],default:0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showConversationList:{default:!0,type:Boolean},isOnExpandedLayout:{default:!1,type:Boolean}},emits:["conversationLoad"],setup(e,{emit:t}){Pt.ASSIGNEE_TYPE.KANBAN="kanban";const n=e,s=t,{uiSettings:a}=Sn(),{t:o}=Pe(),l=En(),i=cn(),r=Pn(),d=F(null),u=F(null);cs("contextMenuElementTarget",u);const m=F(Pt.ASSIGNEE_TYPE.ME),h=F(Pt.STATUS_TYPE.OPEN),_=F(Pt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),g=F(!1),T=F([]),S=F({}),b=F(!1),A=F(!1),y=F(!1),x=F([]),$=F(sTe.map(ft=>({...ft,attributeName:o(`FILTER.ATTRIBUTES.${ft.attributeI18nKey}`)}))),N=ke("getCurrentUser"),w=ke("getFilteredConversations"),D=ke("getMineChats"),H=ke("getAllStatusChats"),B=ke("getUnAssignedChats"),k=ke("getChatListLoadingStatus"),U=ke("getSelectedInbox"),G=ke("conversationStats/getStats"),L=ke("getAppliedConversationFiltersV2"),M=ke("customViews/getConversationCustomViews"),R=ke("agents/getAgents"),P=ke("teams/getTeams"),W=ke("inboxes/getInboxes"),Q=ke("campaigns/getAllCampaigns"),Z=ke("labels/getLabels"),j=ke("getCurrentAccountId"),X=ke("teams/getTeam");eTe(d);const{selectedConversations:q,selectedInboxes:se,selectConversation:he,deSelectConversation:be,selectAllConversations:ne,resetBulkActions:J,isConversationSelected:ue,onAssignAgent:Ne,onAssignLabels:Re,onAssignTeamsForBulk:Ze,onUpdateConversations:Xe}=tTe(),{initializeStatusAndAssigneeFilterToModal:Qe,initializeInboxTeamAndLabelFilterToModal:Je}=rTe({filteri18nKey:"FILTER",attributeModel:"conversation_attribute"}),st=C(()=>({root:d.value,rootMargin:"100px 0px 100px 0px"})),ht=C(()=>L.value.length!==0),wt=C(()=>{if(n.foldersId){const ft=M.value.filter(dn=>dn.id===Number(n.foldersId)),[kt]=ft;return kt}}),ee=C(()=>{var ft;return(ft=wt.value)==null?void 0:ft.name}),de=C(()=>!!(wt.value&&n.foldersId!==0)),ie=C(()=>ht.value||de.value),Ce=C(()=>{const{id:ft,name:kt}=N.value;return{id:ft,name:kt}}),Se=C(()=>pg(N.value,j.value)),je=C(()=>kN(LN,Se.value,ft=>ft.permissions).map(({key:ft,count:kt})=>({key:ft,name:o(`CHAT_LIST.ASSIGNEE_TYPE_TABS.${ft}`),count:ft===Pt.ASSIGNEE_TYPE.KANBAN?Ie.value:G.value[kt]||0}))),Ke=C(()=>ie.value||m.value===Pt.ASSIGNEE_TYPE.ALL),$e=C(()=>ie.value?"appliedFilters":m.value),Be=oa("inboxes/getInbox",U),Ue=oa("conversationPage/getCurrentPageFilter",m),ge=oa("conversationPage/getCurrentPageFilter",$e),ae=oa("conversationPage/getHasEndReached",$e),ve=oa("attributes/getAttributesByModel","conversation_attribute"),Y=C(()=>je.value.find(kt=>kt.key===m.value).count),oe=C(()=>{const kt=T.value&&Array.isArray(T.value)&&!T.value.length,dn=!ie.value&&kt,In=T.value.length<25&&Y.value<25&&Y.value>T.value.length;return dn&&In?1:Ue.value+1}),te=C(()=>({inboxId:n.conversationInbox?n.conversationInbox:void 0,assigneeType:m.value,status:h.value,sortBy:_.value,page:oe.value,labels:n.label?[n.label]:void 0,teamId:n.teamId||void 0,conversationType:n.conversationType||void 0})),le=C(()=>n.teamId?X.value(n.teamId):{}),ye=C(()=>ht.value?o("CHAT_LIST.TAB_HEADING"):Be.value.name?Be.value.name:le.value.name?le.value.name:n.label?`#${n.label}`:n.conversationType==="mention"?o("CHAT_LIST.MENTION_HEADING"):n.conversationType==="participating"?o("CONVERSATION_PARTICIPANTS.SIDEBAR_MENU_TITLE"):n.conversationType==="unattended"?o("CHAT_LIST.UNATTENDED_HEADING"):de.value?wt.value.name:o("CHAT_LIST.TAB_HEADING")),me=C(()=>w.value.filter(ft=>ft.kanban_items&&ft.kanban_items.length>0)),Ie=C(()=>me.value.length),Oe=C(()=>{let ft=[];if(ie.value)ft=[...w.value];else{const kt=te.value;m.value==="me"?ft=[...D.value(kt)]:m.value==="unassigned"?ft=[...B.value(kt)]:m.value==="kanban"?ft=[...me.value]:ft=[...H.value(kt)]}if(wt.value){const{payload:kt}=wt.value.query;ft=ft.filter(dn=>DN(dn,kt))}return ft}),we=C(()=>Oe.value.length&&ae.value&&!k.value),Ye=C(()=>Oe.value.length===q.value.length&&Oe.value.every(ft=>q.value.includes(ft.id))),He=C(()=>[...new Set(se.value)]);F([]),C(()=>r.getters["accounts/isFeatureEnabledonAccount"](j.value,"kanban_board"));function et(){const{conversations_filter_by:ft={}}=a.value,{status:kt,order_by:dn}=ft;h.value=kt||Pt.STATUS_TYPE.OPEN,_.value=Object.values(Pt.SORT_BY_TYPE).includes(dn)?dn:Pt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC}function bt(){s("conversationLoad")}function Nt(ft){ft=Hs(ft);let kt=ge.value+1;r.dispatch("fetchFilteredConversations",{queryData:Ho(ft),page:kt}).then(bt),g.value=!1}function ct(ft){ft=Hs(ft);let kt=ge.value+1;r.dispatch("fetchFilteredConversations",{queryData:ft,page:kt}).then(bt)}function Ot(ft){ft=Hs(ft),J(),S.value=Ho(ft),r.dispatch("conversationPage/reset"),r.dispatch("emptyAllConversations"),Nt(ft)}function Le(){g.value=!1,x.value=[]}function qe(ft,kt){const dn=Hs(ft),In={...I(wt),name:I(kt),query:Ho(dn)};r.dispatch("customViews/update",In),Le()}function De(){b.value=!0}function Te(){b.value=!1}function Ge(){A.value=!0}function nt(){A.value=!1}function Tt(){return{agents:R.value,teams:P.value,inboxes:W.value,labels:Z.value,campaigns:Q.value,languages:vg,countries:to,priority:[{id:"low",name:o("CONVERSATION.PRIORITY.OPTIONS.LOW")},{id:"medium",name:o("CONVERSATION.PRIORITY.OPTIONS.MEDIUM")},{id:"high",name:o("CONVERSATION.PRIORITY.OPTIONS.HIGH")},{id:"urgent",name:o("CONVERSATION.PRIORITY.OPTIONS.URGENT")}],filterTypes:$.value,allCustomAttributes:ve.value}}function Kt(){const ft=Qe(h.value,Ce.value,m.value);ft&&(x.value=[...x.value,zo(ft)]);const kt=Je(n.conversationInbox,Be.value,n.teamId,le.value,n.label).map(zo);x.value=[...x.value,...kt]}function dt(ft){var In,Me;const kt=(Me=(In=I(ft))==null?void 0:In.query)==null?void 0:Me.payload;if(!Array.isArray(kt))return;const dn=kt.map(Ve=>{const tt=zo(Ve),vt=Array.isArray(tt.values)?eI(Hs(Ve),Tt()):[];return{attributeKey:tt.attributeKey,attributeModel:tt.attributeModel,customAttributeType:tt.customAttributeType,filterOperator:tt.filterOperator,queryOperator:tt.queryOperator??"and",values:vt}});x.value=[...x.value,...dn]}function $t(){x.value=[...L.value]}function Gt(){if(g.value===!0){Le();return}!ht.value&&!de.value&&Kt(),de.value&&dt(wt.value),ht.value&&$t(),g.value=!0}function mn(){if(r.dispatch("updateChatListFilters",te.value),m.value===Pt.ASSIGNEE_TYPE.KANBAN){bt();return}r.dispatch("fetchAllConversations").then(bt)}function On(){if(x.value=[],J(),r.dispatch("conversationPage/reset"),r.dispatch("emptyAllConversations"),r.dispatch("clearConversationFilters"),de.value){const ft=wt.value.query;ct(ft)}n.foldersId||mn()}function Rn(){if(!(ae.value||k.value))if(!ie.value)mn();else if(de.value){const ft=wt.value.query;ct(ft)}else ht.value&&Nt(L.value)}function gn(){const ft=u.value;if(ft&&ft.hasScrollbar){const{scrollTop:kt,scrollHeight:dn,clientHeight:In}=ft.$el;dn-(kt+In)<100&&Rn()}}function wn(ft){m.value!==ft&&(J(),It.emit("clearSearchInput"),m.value=ft,Ue.value||mn())}function ls(ft,kt){kt==="status"?h.value=ft:_.value=ft,On()}function ns(){const kt=M.value[M.value.length-1].id;l.push({name:"folder_conversations",params:{id:kt}})}function Fs(){M.value.length>0?ns():(l.push({name:"home"}),mn())}function gt(){const{params:{accountId:ft,inbox_id:kt,label:dn,teamId:In},name:Me}=i;let Ve="";PN({route:{name:Me}})?Ve="mention":BN({route:{name:Me}})&&(Ve="unattended"),l.push(iT({accountId:ft,conversationType:Ve,customViewId:n.foldersId,inboxId:kt,label:dn,teamId:In}))}async function vn(ft,kt=null){r.dispatch("setCurrentChatPriority",{priority:ft,conversationId:kt}),r.dispatch("assignPriority",{conversationId:kt,priority:ft}).then(()=>{nn(_a.CHANGE_PRIORITY,{newValue:ft,from:"Context menu"}),_e(o("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:ft,conversationId:kt}))})}async function vs(ft){try{await r.dispatch("markMessagesUnread",{id:ft}),gt()}catch{}}async function ma(ft){try{await r.dispatch("markMessagesRead",{id:ft})}catch{}}async function Ha(ft,kt=null){try{await r.dispatch("assignTeam",{conversationId:kt,teamId:ft.id}),_e(o("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.SUCCESFUL",{team:ft.name,conversationId:kt}))}catch{_e(o("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.FAILED"))}}function wo(ft,kt,dn){r.dispatch("toggleStatus",{conversationId:ft,status:kt,snoozedUntil:dn}).then(()=>{_e(o("CONVERSATION.CHANGE_STATUS"))})}function Wa(ft){return q.value.length?q.value.every(kt=>{var dn;return((dn=r.getters.getConversationById(kt))==null?void 0:dn.status)===ft}):!1}function yl(ft){y.value=ft}function $n(ft){ne(ft,Oe)}jl("fetch_conversation_stats",()=>{ie.value||r.dispatch("conversationStats/get",te.value)}),ba(u,"scroll",gn),pt(()=>{r.dispatch("setChatListFilters",te.value),et(),r.dispatch("setChatStatusFilter",h.value),r.dispatch("setChatSortFilter",_.value),On(),de.value&&r.dispatch("campaigns/get")});const Ma=F(null),Ka=F(null);async function za(){try{await r.dispatch("deleteConversation",Ka.value),gt(),Ka.value=null,Ma.value.close(),_e(o("CONVERSATION.SUCCESS_DELETE_CONVERSATION"))}catch{_e(o("CONVERSATION.FAIL_DELETE_CONVERSATION"))}}const ja=ft=>{Ka.value=ft,Ma.value.open()};return cs("selectConversation",he),cs("deSelectConversation",be),cs("assignAgent",Ne),cs("assignTeam",Ha),cs("assignLabels",Re),cs("updateConversationStatus",wo),cs("toggleContextMenu",yl),cs("markAsUnread",vs),cs("markAsRead",ma),cs("assignPriority",vn),cs("isConversationSelected",ue),cs("deleteConversation",ja),ot(le,()=>On()),ot(C(()=>n.conversationInbox),()=>On()),ot(C(()=>n.label),()=>On()),ot(C(()=>n.conversationType),()=>On()),ot(wt,(ft,kt)=>{ft!==kt&&r.dispatch("customViews/setActiveConversationFolder",ft||null),On()}),ot(w,()=>{T.value=Oe.value}),ot(te,(ft,kt)=>{ft!==kt&&r.dispatch("updateChatListFilters",ft)}),(ft,kt)=>(p(),f("div",{class:re(["flex flex-col flex-shrink-0 bg-n-solid-1 conversations-list-wrap",[{hidden:!e.showConversationList},e.isOnExpandedLayout?"basis-full":"w-[340px] 2xl:w-[412px]"]])},[at(ft.$slots,"default"),v(c1e,{"page-title":ye.value,"has-applied-filters":ht.value,"has-active-folders":de.value,"active-status":h.value,"is-on-expanded-layout":e.isOnExpandedLayout,"conversation-stats":I(G),"is-list-loading":I(k)&&!Oe.value.length,onAddFolders:De,onDeleteFolders:Ge,onFiltersModal:Gt,onResetFilters:On,onBasicFilterChange:ls},null,8,["page-title","has-applied-filters","has-active-folders","active-status","is-on-expanded-layout","conversation-stats","is-list-loading"]),b.value?(p(),V(Gc,{key:0,to:"#saveFilterTeleportTarget"},{default:K(()=>[v(P1e,{modelValue:x.value,"onUpdate:modelValue":kt[0]||(kt[0]=dn=>x.value=dn),"custom-views-query":S.value,"open-last-saved-item":ns,onClose:Te},null,8,["modelValue","custom-views-query"])]),_:1})):O("",!0),A.value?(p(),V(M0e,{key:1,show:A.value,"onUpdate:show":kt[1]||(kt[1]=dn=>A.value=dn),"active-custom-view":wt.value,"custom-views-id":e.foldersId,"open-last-item-after-delete":Fs,onClose:nt},null,8,["show","active-custom-view","custom-views-id"])):O("",!0),ie.value?O("",!0):(p(),V(B1e,{key:2,items:je.value,"active-tab":m.value,"is-compact":"",onChatTabChange:wn},null,8,["items","active-tab"])),!I(k)&&!Oe.value.length?(p(),f("p",vTe,E(ft.$t("CHAT_LIST.LIST.404")),1)):O("",!0),I(q).length?(p(),V(JEe,{key:4,conversations:I(q),"all-conversations-selected":Ye.value,"selected-inboxes":He.value,"show-open-action":Wa("open"),"show-resolved-action":Wa("resolved"),"show-snoozed-action":Wa("snoozed"),onSelectAllConversations:$n,onAssignAgent:I(Ne),onUpdateConversations:I(Xe),onAssignLabels:I(Re),onAssignTeam:I(Ze)},null,8,["conversations","all-conversations-selected","selected-inboxes","show-open-action","show-resolved-action","show-snoozed-action","onAssignAgent","onUpdateConversations","onAssignLabels","onAssignTeam"])):O("",!0),c("div",{ref_key:"conversationListRef",ref:d,class:re(["flex-1 overflow-hidden conversations-list hover:overflow-y-auto",{"overflow-hidden":y.value}])},[v(I($_),{ref_key:"conversationDynamicScroller",ref:u,items:Oe.value,"min-item-size":24,class:"w-full h-full overflow-auto"},{default:K(({item:dn,index:In,active:Me})=>[v(I(WS),{item:dn,active:Me,"data-index":In,"size-dependencies":[dn.messages,dn.labels,dn.uuid,dn.inbox_id]},{default:K(()=>{var Ve;return[v(w0e,{source:dn,label:e.label,"team-id":e.teamId,"folders-id":e.foldersId,"conversation-type":e.conversationType,"show-assignee":Ke.value,"kanban-item":(Ve=dn.kanban_items)==null?void 0:Ve[0],onSelectConversation:I(he),onDeSelectConversation:I(be)},null,8,["source","label","team-id","folders-id","conversation-type","show-assignee","kanban-item","onSelectConversation","onDeSelectConversation"])]}),_:2},1032,["item","active","data-index","size-dependencies"])]),after:K(()=>[I(k)?(p(),f("div",bTe,[v(qn,{class:"text-n-brand"})])):we.value?(p(),f("p",ETe,E(ft.$t("CHAT_LIST.EOF")),1)):(p(),V(JS,{key:2,options:st.value,onObserved:Rn},null,8,["options"]))]),_:1},8,["items"])],2),v(Ms,{ref_key:"deleteConversationDialogRef",ref:Ma,type:"alert",title:ft.$t("CONVERSATION.DELETE_CONVERSATION.TITLE",{conversationId:Ka.value}),description:ft.$t("CONVERSATION.DELETE_CONVERSATION.DESCRIPTION"),"confirm-button-label":ft.$t("CONVERSATION.DELETE_CONVERSATION.CONFIRM"),onConfirm:za,onClose:kt[2]||(kt[2]=dn=>Ka.value=null)},null,8,["title","description","confirm-button-label"]),g.value?(p(),V(Gc,{key:5,to:"#conversationFilterTeleportTarget"},{default:K(()=>[v(R1e,{modelValue:x.value,"onUpdate:modelValue":kt[3]||(kt[3]=dn=>x.value=dn),"folder-name":ee.value,"is-folder-view":de.value,onApplyFilter:Ot,onUpdateFolder:qe,onClose:Le},null,8,["modelValue","folder-name","is-folder-view"])]),_:1})):O("",!0)],2))}},ATe={components:{NextButton:ce},props:{show:{type:Boolean,default:!1},currentChat:{type:Object,default:()=>({})}},emits:["cancel","update:show"],setup(){return{v$:Lt()}},data(){return{email:"",selectedType:"",isSubmitting:!1}},validations:{email:{required:lt,email:Zl,minLength:on(4)}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},sentToOtherEmailAddress(){return this.selectedType==="other_email_address"},isFormValid(){return this.selectedType?this.sentToOtherEmailAddress?!!this.email&&!this.v$.email.$error:!0:!1},selectedEmailAddress(){const{meta:e}=this.currentChat;switch(this.selectedType){case"contact":return e.sender.email;case"assignee":return e.assignee.email;case"other_email_address":return this.email;default:return""}}},methods:{onCancel(){this.$emit("cancel")},async onSubmit(){this.isSubmitting=!1;try{await this.$store.dispatch("sendEmailTranscript",{email:this.selectedEmailAddress,conversationId:this.currentChat.id}),_e(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS")),this.onCancel()}catch{_e(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR"))}finally{this.isSubmitting=!1}}}},yTe={class:"flex flex-col h-auto overflow-auto"},STe={class:"w-full"},ITe={key:0,class:"flex items-center gap-2"},CTe={for:"contact"},xTe={key:1,class:"flex items-center gap-2"},NTe={for:"assignee"},OTe={class:"flex items-center gap-2"},wTe={for:"other_email_address"},RTe={key:2,class:"w-[50%] mt-1"},$Te=["placeholder"],MTe={key:0,class:"message"},kTe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function LTe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("NextButton"),r=z("woot-modal");return p(),V(r,{show:o.localShow,"onUpdate:show":t[6]||(t[6]=d=>o.localShow=d),"on-close":o.onCancel},{default:K(()=>[c("div",yTe,[v(l,{"header-title":e.$t("EMAIL_TRANSCRIPT.TITLE"),"header-content":e.$t("EMAIL_TRANSCRIPT.DESC")},null,8,["header-title","header-content"]),c("form",{class:"w-full",onSubmit:t[5]||(t[5]=ze((...d)=>o.onSubmit&&o.onSubmit(...d),["prevent"]))},[c("div",STe,[n.currentChat.meta.sender&&n.currentChat.meta.sender.email?(p(),f("div",ITe,[pe(c("input",{id:"contact","onUpdate:modelValue":t[0]||(t[0]=d=>a.selectedType=d),type:"radio",name:"selectedType",value:"contact"},null,512),[[Vl,a.selectedType]]),c("label",CTe,E(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_CONTACT")),1)])):O("",!0),n.currentChat.meta.assignee?(p(),f("div",xTe,[pe(c("input",{id:"assignee","onUpdate:modelValue":t[1]||(t[1]=d=>a.selectedType=d),type:"radio",name:"selectedType",value:"assignee"},null,512),[[Vl,a.selectedType]]),c("label",NTe,E(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_AGENT")),1)])):O("",!0),c("div",OTe,[pe(c("input",{id:"other_email_address","onUpdate:modelValue":t[2]||(t[2]=d=>a.selectedType=d),type:"radio",name:"selectedType",value:"other_email_address"},null,512),[[Vl,a.selectedType]]),c("label",wTe,E(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_OTHER_EMAIL_ADDRESS")),1)]),o.sentToOtherEmailAddress?(p(),f("div",RTe,[c("label",{class:re({error:s.v$.email.$error})},[pe(c("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>a.email=d),type:"text",placeholder:e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.PLACEHOLDER"),onInput:t[4]||(t[4]=(...d)=>s.v$.email.$touch&&s.v$.email.$touch(...d))},null,40,$Te),[[mt,a.email]]),s.v$.email.$error?(p(),f("span",MTe,E(e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.ERROR")),1)):O("",!0)],2)])):O("",!0)]),c("div",kTe,[v(i,{faded:"",slate:"",type:"reset",label:e.$t("EMAIL_TRANSCRIPT.CANCEL"),onClick:ze(o.onCancel,["prevent"])},null,8,["label","onClick"]),v(i,{type:"submit",label:e.$t("EMAIL_TRANSCRIPT.SUBMIT"),disabled:!o.isFormValid},null,8,["label","disabled"])])],32)])]),_:1},8,["show","on-close"])}const DTe=Fe(ATe,[["render",LTe]]),PTe={class:"relative flex items-center justify-end resolve-actions"},BTe={key:0,class:"border rounded-lg shadow-lg border-n-strong dark:border-n-strong box-content p-2 w-fit z-10 bg-n-alpha-3 backdrop-blur-[100px] absolute block left-auto top-full mt-0.5 start-0 xl:start-auto xl:end-0 max-w-[12.5rem] min-w-[9.75rem] [&_ul>li]:mb-0"},FTe={__name:"ResolveAction",setup(e){const t=yt(),n=Nn(),{t:s}=Pe(),a=F(null),o=F(!1),[l,i]=Xn(),r=()=>i(!1),d=()=>i(!0),u=C(()=>n.getSelectedChat.value),m=C(()=>u.value.status===Pt.STATUS_TYPE.OPEN),h=C(()=>u.value.status===Pt.STATUS_TYPE.PENDING),_=C(()=>u.value.status===Pt.STATUS_TYPE.RESOLVED),g=C(()=>u.value.status===Pt.STATUS_TYPE.SNOOZED),T=C(()=>!h.value&&!g.value),S=C(()=>h.value||g.value),b=()=>{const w=document.querySelectorAll(".conversations-list .conversation"),D=document.querySelector("div.conversations-list div.conversation.active"),H=[...w].indexOf(D),B=w.length-1;return{all:w,activeIndex:H,lastIndex:B}},A=()=>{document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},y=(w,D)=>{r(),o.value=!0,t.dispatch("toggleStatus",{conversationId:u.value.id,status:w,snoozedUntil:D}).then(()=>{_e(s("CONVERSATION.CHANGE_STATUS")),o.value=!1})},x=()=>{y(Pt.STATUS_TYPE.OPEN)},$=()=>{y(Pt.STATUS_TYPE.RESOLVED)};return Qs({"Alt+KeyM":{action:()=>{var w;return(w=a.value)==null?void 0:w.$el.click()},allowOnFocusedInput:!0},"Alt+KeyE":{action:async()=>{await y(Pt.STATUS_TYPE.RESOLVED)}},"$mod+Alt+KeyE":{action:async w=>{const{all:D,activeIndex:H,lastIndex:B}=b();await y(Pt.STATUS_TYPE.RESOLVED),H<B?D[H+1].click():D.length>1&&(D[0].click(),document.querySelector(".conversations-list").scrollTop=0),w.preventDefault()}}}),jl(U0e,x),jl(G0e,$),(w,D)=>{const H=_t("on-clickaway");return p(),f("div",PTe,[c("div",{class:re(["rounded-lg shadow outline-1 outline flex-shrink-0",S.value?"outline-transparent":"outline-n-container"])},[m.value?(p(),V(ce,{key:0,label:I(s)("CONVERSATION.HEADER.RESOLVE_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":o.value,onClick:$},null,8,["label","is-loading"])):_.value?(p(),V(ce,{key:1,label:I(s)("CONVERSATION.HEADER.REOPEN_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":o.value,onClick:x},null,8,["label","is-loading"])):S.value?(p(),V(ce,{key:2,label:I(s)("CONVERSATION.HEADER.OPEN_ACTION"),size:"sm",color:"slate","is-loading":o.value,onClick:x},null,8,["label","is-loading"])):O("",!0),T.value?(p(),V(ce,{key:3,ref_key:"arrowDownButtonRef",ref:a,icon:"i-lucide-chevron-down",disabled:o.value,size:"sm",class:"ltr:rounded-l-none rtl:rounded-r-none !outline-0",color:"slate","trailing-icon":"",onClick:d},null,8,["disabled"])):O("",!0)],2),I(l)?pe((p(),f("div",BTe,[v(dp,{class:"mb-0"},{default:K(()=>[h.value?O("",!0):(p(),V(Pc,{key:0},{default:K(()=>[v(ce,{label:I(s)("CONVERSATION.RESOLVE_DROPDOWN.SNOOZE_UNTIL"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-alarm-clock-minus",class:"w-full",onClick:D[0]||(D[0]=()=>A())},null,8,["label"])]),_:1})),h.value?O("",!0):(p(),V(Pc,{key:1},{default:K(()=>[v(ce,{label:I(s)("CONVERSATION.RESOLVE_DROPDOWN.MARK_PENDING"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-circle-dot-dashed",class:"w-full",onClick:D[1]||(D[1]=()=>y(I(Pt).STATUS_TYPE.PENDING))},null,8,["label"])]),_:1}))]),_:1})])),[[H,r]]):O("",!0)])}}},UTe={components:{ContextMenu:Bp,Button:ce},props:{show:{type:Boolean,default:!1},conversationId:{type:[Number,String],required:!0}},data(){return{title:"",message:"",selectedInbox:"",scheduledTime:"",isLoading:!1,scheduledMessages:[],isScheduledMessagesOpen:!0,isEditing:!1,editingMessageId:null,enabledFeatures:{},showDeleteConfirmation:!1,messageToDelete:null,expandedMessages:[],statusFilter:"all",filterMenuItems:[{id:"all",label:"Todos os status",icon:"list"},{id:"pending",label:"Pendentes",icon:"clock"},{id:"sent",label:"Enviados",icon:"checkmark"}],showFilterMenu:!1,filterMenuPosition:{x:0,y:0},isRecurrent:!1,selectedPeriod:"",templates:[],selectedTemplate:null,loadingTemplates:!1}},computed:{...St({currentChat:"getSelectedChat",inboxes:"inboxes/getInboxes",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",selectedFunnel:"funnel/getSelectedFunnel"}),account(){return this.$store.getters["accounts/getAccount"](this.accountId)},isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,Mt.SCHEDULE_MESSAGES)},pendingMessagesCount(){return this.scheduledMessages.filter(e=>e.status==="pending").length},filteredMessages(){return this.statusFilter==="all"?this.scheduledMessages:this.scheduledMessages.filter(e=>e.status===this.statusFilter)}},async mounted(){console.log("[ScheduleMessageModal] isFeatureEnabled:",this.isFeatureEnabled),console.log("[ScheduleMessageModal] mounted"),console.log("[ScheduleMessageModal] enabledFeatures:",this.enabledFeatures),console.log("[ScheduleMessageModal] isFeatureEnabled:",this.isFeatureEnabled),await this.fetchScheduledMessages(),await this.fetchTemplates(),this.isFeatureEnabled||(console.log("[ScheduleMessageModal] Feature desabilitada, fechando modal"),this.onClose())},methods:{async fetchTemplates(){try{this.loadingTemplates=!0;const e=await ra.get(),t=[];e.data.forEach(n=>{Object.values(n.stages).forEach(s=>{s.message_templates&&t.push(...s.message_templates)})}),this.templates=t,console.log("[ScheduleMessageModal] Templates carregados:",this.templates)}catch(e){console.error("[ScheduleMessageModal] Erro ao carregar templates:",e),_e("Erro ao carregar templates de mensagens","error")}finally{this.loadingTemplates=!1}},applyTemplate(){this.selectedTemplate&&(this.message=this.selectedTemplate.content,this.title=this.selectedTemplate.title||this.selectedTemplate.content.substring(0,50)+"...")},initializeEnabledFeatures(){this.enabledFeatures=this.account.features},async fetchScheduledMessages(){try{const e=await $l.getScheduledMessages(this.conversationId);console.log("Resposta da API:",e),this.scheduledMessages=e.data.payload||[],console.log("Mensagens agendadas:",this.scheduledMessages)}catch(e){console.error("Erro ao buscar mensagens:",e),_e("Erro ao carregar mensagens agendadas","error")}},onClose(){this.$emit("close"),this.resetForm()},resetForm(){console.log("Iniciando reset do formulrio"),this.title="",this.message="",this.selectedInbox="",this.scheduledTime="",this.isLoading=!1,this.isEditing=!1,this.editingMessageId=null,this.isRecurrent=!1,this.selectedPeriod="",this.selectedTemplate=null,console.log("Formulrio resetado")},async onSubmit(){try{this.isLoading=!0;const e={scheduled_message:{inbox_id:this.selectedInbox,content:this.message,scheduled_at:new Date(this.scheduledTime).toISOString(),title:this.title,is_recurrent:this.isRecurrent,period:this.selectedPeriod}};await $l.scheduleMessage({conversation_id:this.conversationId,...e.scheduled_message}),_e("Mensagem agendada com sucesso","success"),await this.fetchScheduledMessages(),this.resetForm(),this.onClose()}catch{_e("No foi possvel agendar a mensagem. Tente novamente.","error")}finally{this.isLoading=!1}},async updateScheduledMessage(){try{this.isLoading=!0;const e={inbox_id:this.selectedInbox,content:this.message,scheduled_at:new Date(this.scheduledTime).toISOString(),title:this.title,is_recurrent:this.isRecurrent,period:this.selectedPeriod};await $l.updateScheduledMessage(this.conversationId,this.editingMessageId,e),_e("Agendamento atualizado com sucesso","success"),await this.fetchScheduledMessages(),this.resetForm(),this.onClose()}catch{_e("No foi possvel atualizar o agendamento. Tente novamente.","error")}finally{this.isLoading=!1}},formatDate(e){return new Date(e*1e3).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},getInboxName(e){const t=this.inboxes.find(n=>n.id===e);return t?t.name:"Caixa no encontrada"},getStatusText(e){return e==="sent"?"Enviado":"Pendente"},getStatusClass(e){return{"status-pending":e==="pending","status-sent":e==="sent"}},handleEdit(e){console.log("Preenchendo formulrio para edio:",e),this.title=e.title,this.message=e.message,this.selectedInbox=e.inbox_id;const t=new Date(e.scheduled_at*1e3);this.scheduledTime=t.toISOString().slice(0,16),this.isRecurrent=e.is_recurrent||!1,e.period&&typeof e.period=="object"&&e.period.type?this.selectedPeriod=e.period.type:typeof e.period=="string"?this.selectedPeriod=e.period:this.selectedPeriod="",this.selectedTemplate=null,this.isEditing=!0,this.editingMessageId=e.id,this.isScheduledMessagesOpen=!1},async deleteMessage(e){this.messageToDelete=e,this.showDeleteConfirmation=!0},closeDeleteModal(){this.showDeleteConfirmation=!1,this.messageToDelete=null},async confirmDelete(){try{await $l.deleteScheduledMessage(this.conversationId,this.messageToDelete),await this.fetchScheduledMessages(),_e("Agendamento excludo com sucesso","success")}catch{_e("No foi possvel excluir o agendamento","error")}finally{this.closeDeleteModal()}},toggleScheduledMessages(){this.isScheduledMessagesOpen=!this.isScheduledMessagesOpen},handleSubmit(e){this.isEditing||this.onSubmit()},toggleMessageExpand(e){const t=this.expandedMessages.indexOf(e);t===-1?this.expandedMessages.push(e):this.expandedMessages.splice(t,1)},openFilterMenu(e){e.stopPropagation();const t=e.target.getBoundingClientRect();this.filterMenuPosition={x:t.left,y:t.bottom+4},this.showFilterMenu=!0},closeFilterMenu(){this.showFilterMenu=!1},handleFilterSelect(e){this.statusFilter=e.id,this.closeFilterMenu()},async handleResend(e){try{this.isLoading=!0;const t=new Date,n=new Date(t.getTime()+5e3),s={inbox_id:e.inbox_id,content:e.message,scheduled_at:n.toISOString(),title:e.title};e.is_recurrent&&e.period&&(s.is_recurrent=e.is_recurrent,s.period=e.period),await $l.scheduleMessage({conversation_id:this.conversationId,...s}),_e("Mensagem reenviada com sucesso para 5 segundos","success"),await this.fetchScheduledMessages()}catch(t){console.error("Erro ao reenviar mensagem:",t),_e("No foi possvel reenviar a mensagem. Tente novamente.","error")}finally{this.isLoading=!1}},getPeriodText(e){switch(typeof e=="object"&&e!==null?e.type:e){case"every_day":return"Todos os dias";case"every_day_at_time":return"Todos os dias no mesmo horrio";case"every_week":return"Todas as semanas";case"every_month":return"Todos os meses";case"every_weekday":return"Dias teis (Segunda a Sexta)";case"every_weekend":return"Fins de semana (Sbado e Domingo)";default:return"Recorrncia desconhecida"}}}},GTe={class:"schedule-message-container"},VTe={class:"schedule-message"},HTe={class:"form-column"},WTe={class:"form-group"},KTe={class:"form-group"},zTe={class:"template-selector"},jTe=["value"],YTe={key:0,class:"template-loading"},XTe={class:"form-group"},qTe={class:"form-group"},ZTe=["value"],QTe={class:"form-group"},JTe={class:"form-group"},eAe={class:"checkbox-group"},tAe={class:"checkbox-label"},nAe={key:0,class:"form-group"},sAe={class:"modal-footer dark:border-slate-600"},aAe={class:"button-wrapper"},oAe={class:"scheduled-list-column"},lAe={class:"scheduled-messages"},iAe={class:"scheduled-messages-header"},rAe={class:"header-content"},cAe={class:"title-group"},dAe={class:"dark:text-slate-100"},uAe={key:0,class:"counter"},pAe={key:0,class:"empty-state"},mAe={class:"empty-state-content"},hAe={key:1,class:"scheduled-messages-list"},fAe=["onClick"],gAe={class:"header-content"},_Ae={class:"title-section"},vAe={class:"title-and-badge"},bAe={class:"title"},EAe={class:"meta-info"},TAe={class:"datetime"},AAe={class:"inbox"},yAe={key:0,class:"recurrence"},SAe={class:"recurrence-text"},IAe={class:"message-expandable"},CAe={class:"message-preview"},xAe={class:"preview-header"},NAe={class:"preview-content"},OAe={class:"actions"},wAe={class:"delete-confirmation-modal"},RAe={class:"modal-footer"},$Ae={class:"button-wrapper"};function MAe(e,t,n,s,a,o){const l=z("Button"),i=z("fluent-icon"),r=z("woot-button"),d=z("woot-modal"),u=z("context-menu");return p(),f("div",GTe,[v(d,{show:o.isFeatureEnabled&&n.show,"on-close":o.onClose,"show-close-button":!0,"close-on-backdrop-click":!0},{default:K(()=>[t[33]||(t[33]=c("div",{class:"modal-header"},[c("div",{class:"header-content"},[c("div",{class:"title-group"},[c("h1",{class:"modal-title"},"Agendamento de Mensagem")])])],-1)),c("div",VTe,[c("div",HTe,[c("form",{class:"schedule-message__form",onSubmit:t[8]||(t[8]=ze((...m)=>o.handleSubmit&&o.handleSubmit(...m),["prevent"])),onClick:t[9]||(t[9]=ze(()=>{},["stop"]))},[c("div",WTe,[t[11]||(t[11]=c("label",{class:"dark:text-slate-100"},"Ttulo",-1)),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.title=m),type:"text",class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",placeholder:"Digite um ttulo para identificar este agendamento",required:""},null,512),[[mt,a.title]])]),c("div",KTe,[t[14]||(t[14]=c("label",{class:"dark:text-slate-100"},"Modelo de Mensagem",-1)),c("div",zTe,[pe(c("select",{"onUpdate:modelValue":t[1]||(t[1]=m=>a.selectedTemplate=m),class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",onChange:t[2]||(t[2]=(...m)=>o.applyTemplate&&o.applyTemplate(...m))},[t[12]||(t[12]=c("option",{value:""},"Selecione um template (opcional)",-1)),(p(!0),f(fe,null,Ae(a.templates,m=>(p(),f("option",{key:m.id,value:m},E(m.title||m.content.substring(0,50)+"..."),9,jTe))),128))],544),[[zt,a.selectedTemplate]]),a.loadingTemplates?(p(),f("div",YTe,t[13]||(t[13]=[c("span",{class:"loading-spinner"},null,-1),c("span",{class:"loading-text"},"Carregando templates...",-1)]))):O("",!0)])]),c("div",XTe,[t[15]||(t[15]=c("label",{class:"dark:text-slate-100"},"Mensagem",-1)),pe(c("textarea",{"onUpdate:modelValue":t[3]||(t[3]=m=>a.message=m),class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",placeholder:"Digite a mensagem que ser enviada",required:""},null,512),[[mt,a.message]])]),c("div",qTe,[t[17]||(t[17]=c("label",{class:"dark:text-slate-100"},"Selecione um canal",-1)),pe(c("select",{"onUpdate:modelValue":t[4]||(t[4]=m=>a.selectedInbox=m),class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",required:""},[t[16]||(t[16]=c("option",{value:""},"Selecione um canal",-1)),(p(!0),f(fe,null,Ae(e.inboxes,m=>(p(),f("option",{key:m.id,value:m.id},E(m.name),9,ZTe))),128))],512),[[zt,a.selectedInbox]])]),c("div",QTe,[t[18]||(t[18]=c("label",{class:"dark:text-slate-100"},"Data e Hora do Envio",-1)),pe(c("input",{"onUpdate:modelValue":t[5]||(t[5]=m=>a.scheduledTime=m),type:"datetime-local",class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",required:""},null,512),[[mt,a.scheduledTime]])]),c("div",JTe,[c("div",eAe,[c("label",tAe,[pe(c("input",{"onUpdate:modelValue":t[6]||(t[6]=m=>a.isRecurrent=m),type:"checkbox",class:"checkbox-input"},null,512),[[Xt,a.isRecurrent]]),t[19]||(t[19]=c("span",{class:"checkbox-text dark:text-slate-100"}," Mensagem recorrente ",-1))])])]),a.isRecurrent?(p(),f("div",nAe,[t[21]||(t[21]=c("label",{class:"dark:text-slate-100"},"Frequncia de Recorrncia",-1)),pe(c("select",{"onUpdate:modelValue":t[7]||(t[7]=m=>a.selectedPeriod=m),class:"form-input dark:bg-slate-700 dark:text-slate-100 dark:border-slate-600",required:""},t[20]||(t[20]=[c("option",{value:""},"Selecione a frequncia",-1),c("option",{value:"every_day"},"Todos os dias",-1),c("option",{value:"every_day_at_time"}," Todos os dias no mesmo horrio ",-1),c("option",{value:"every_week"},"Todas as semanas",-1),c("option",{value:"every_month"},"Todos os meses",-1),c("option",{value:"every_weekday"}," Dias teis (Segunda a Sexta) ",-1),c("option",{value:"every_weekend"}," Fins de semana (Sbado e Domingo) ",-1)]),512),[[zt,a.selectedPeriod]])])):O("",!0),c("div",sAe,[c("div",aAe,[v(l,{variant:"ghost",color:"slate",size:"sm",onClick:o.onClose},{default:K(()=>t[22]||(t[22]=[Ee(" Cancelar ")])),_:1},8,["onClick"]),a.isEditing?(p(),V(l,{key:1,variant:"solid",color:"teal",size:"sm",type:"button",onClick:o.updateScheduledMessage},{default:K(()=>t[24]||(t[24]=[Ee(" Salvar alteraes ")])),_:1},8,["onClick"])):(p(),V(l,{key:0,variant:"solid",color:"teal",size:"sm",type:"submit"},{default:K(()=>t[23]||(t[23]=[Ee(" Agendar mensagem ")])),_:1}))])])],32)]),c("div",oAe,[c("div",lAe,[c("div",iAe,[c("div",rAe,[c("div",cAe,[c("h3",dAe,[t[25]||(t[25]=Ee(" Mensagens Agendadas ")),a.scheduledMessages.length>0?(p(),f("span",uAe,E(o.pendingMessagesCount),1)):O("",!0)]),a.scheduledMessages.length>0?(p(),V(r,{key:0,variant:"clear",size:"small",class:"filter-button",onClick:t[10]||(t[10]=m=>o.openFilterMenu(m))},{default:K(()=>[v(i,{icon:"filter",size:"16"})]),_:1})):O("",!0)])])]),a.scheduledMessages.length===0?(p(),f("div",pAe,[c("div",mAe,[v(i,{icon:"calendar",size:"32",class:"empty-icon"}),t[26]||(t[26]=c("p",{class:"empty-text"},"Nenhuma mensagem agendada",-1)),t[27]||(t[27]=c("p",{class:"empty-subtext"}," As mensagens agendadas aparecero aqui ",-1))])])):(p(),f("div",hAe,[(p(!0),f(fe,null,Ae(o.filteredMessages,m=>(p(),f("div",{key:m.id,class:"scheduled-message"},[c("div",{class:"message-header",onClick:h=>o.toggleMessageExpand(m.id)},[c("div",gAe,[c("div",_Ae,[c("div",vAe,[c("span",bAe,E(m.title),1),c("span",{class:re(["status-badge",o.getStatusClass(m.status)])},[t[28]||(t[28]=c("span",{class:"pulse-dot"},null,-1)),Ee(" "+E(o.getStatusText(m.status)),1)],2)]),v(i,{icon:a.expandedMessages.includes(m.id)?"chevron-up":"chevron-down",size:"14",class:"expand-icon"},null,8,["icon"])]),c("div",EAe,[c("div",TAe,[v(i,{icon:"calendar",size:"12",class:"icon"}),Ee(" "+E(o.formatDate(m.scheduled_at)),1)]),c("div",AAe,[v(i,{icon:"chat",size:"12",class:"icon"}),Ee(" "+E(o.getInboxName(m.inbox_id)),1)]),m.is_recurrent?(p(),f("div",yAe,[v(i,{icon:"arrow-clockwise",size:"12",class:"icon"}),c("span",SAe,E(o.getPeriodText(m.period)),1)])):O("",!0)])])],8,fAe),pe(c("div",IAe,[c("div",CAe,[c("div",xAe,[v(i,{icon:"chat",size:"14",class:"preview-icon"}),t[29]||(t[29]=c("span",null,"Mensagem Agendada",-1))]),c("div",NAe,E(m.message),1)]),c("div",OAe,[v(r,{variant:"clear",size:"small",class:"action-button resend",onClick:ze(h=>o.handleResend(m),["stop","prevent"])},{default:K(()=>[v(i,{icon:"arrow-clockwise",size:"12"}),t[30]||(t[30]=Ee(" Reenviar "))]),_:2},1032,["onClick"]),v(r,{variant:"clear",size:"small",class:"action-button edit",onClick:ze(h=>o.handleEdit(m),["stop","prevent"])},{default:K(()=>[v(i,{icon:"edit",size:"12"}),t[31]||(t[31]=Ee(" Editar "))]),_:2},1032,["onClick"]),v(r,{variant:"clear",size:"small",class:"action-button delete",onClick:ze(h=>o.deleteMessage(m.id),["stop"])},{default:K(()=>[v(i,{icon:"delete",size:"12"}),t[32]||(t[32]=Ee(" Excluir "))]),_:2},1032,["onClick"])])],512),[[pn,a.expandedMessages.includes(m.id)]])]))),128))]))])])])]),_:1},8,["show","on-close"]),v(d,{show:a.showDeleteConfirmation,"on-close":o.closeDeleteModal,"show-close-button":!0,"close-on-backdrop-click":!0},{default:K(()=>[c("div",wAe,[t[36]||(t[36]=c("div",{class:"modal-header"},[c("div",{class:"header-content"},[c("div",{class:"title-group"},[c("h1",{class:"modal-title"},"Excluir agendamento")])])],-1)),t[37]||(t[37]=c("div",{class:"modal-content"},[c("p",{class:"modal-message"}," Tem certeza que deseja excluir este agendamento? Esta ao no pode ser desfeita. ")],-1)),c("div",RAe,[c("div",$Ae,[v(l,{variant:"ghost",color:"slate",size:"sm",onClick:o.closeDeleteModal},{default:K(()=>t[34]||(t[34]=[Ee(" No, manter ")])),_:1},8,["onClick"]),v(l,{variant:"solid",color:"ruby",size:"sm",onClick:o.confirmDelete},{default:K(()=>t[35]||(t[35]=[Ee(" Sim, excluir ")])),_:1},8,["onClick"])])])])]),_:1},8,["show","on-close"]),v(u,{show:a.showFilterMenu,x:a.filterMenuPosition.x,y:a.filterMenuPosition.y,items:a.filterMenuItems,"selected-id":a.statusFilter,onSelect:o.handleFilterSelect,onClose:o.closeFilterMenu},null,8,["show","x","y","items","selected-id","onSelect","onClose"])])}const kAe=Fe(UTe,[["render",MAe],["__scopeId","data-v-d6a3527d"]]),LAe={class:"relative flex items-center gap-2 actions--container"},DAe={class:"relative flex items-center group"},PAe={__name:"MoreActions",setup(e){const{isStacklab:t}=Js(),n=Pn(),{t:s}=Pe(),[a,o]=Xn(!1),[l,i]=Xn(!1),[r,d]=Xn(!1),u=C(()=>n.getters.getSelectedChat),m=C(()=>{const T=[];return u.value.muted?T.push({icon:"i-lucide-volume-1",label:s("CONTACT_PANEL.UNMUTE_CONTACT"),action:"unmute",value:"unmute"}):T.push({icon:"i-lucide-volume-off",label:s("CONTACT_PANEL.MUTE_CONTACT"),action:"mute",value:"mute"}),T.push({icon:"i-lucide-share",label:s("CONTACT_PANEL.SEND_TRANSCRIPT"),action:"send_transcript",value:"send_transcript"}),t===!0&&T.push({icon:"i-lucide-calendar",label:s("SCHEDULE_MESSAGES.TITLE"),action:"schedule_message",value:"schedule_message"}),T}),h=({action:T})=>{d(!1),T==="mute"?(n.dispatch("muteConversation",u.value.id),_e(s("CONTACT_PANEL.MUTED_SUCCESS"))):T==="unmute"?(n.dispatch("unmuteConversation",u.value.id),_e(s("CONTACT_PANEL.UNMUTED_SUCCESS"))):T==="send_transcript"?o():T==="schedule_message"&&i()},_=()=>{n.dispatch("muteConversation",u.value.id),_e(s("CONTACT_PANEL.MUTED_SUCCESS"))},g=()=>{n.dispatch("unmuteConversation",u.value.id),_e(s("CONTACT_PANEL.UNMUTED_SUCCESS"))};return It.on(k0,_),It.on(L0,g),It.on(D0,o),zs(()=>{It.off(k0,_),It.off(L0,g),It.off(D0,o)}),(T,S)=>{const b=_t("tooltip"),A=_t("on-clickaway");return p(),f("div",LAe,[v(FTe,{"conversation-id":u.value.id,status:u.value.status},null,8,["conversation-id","status"]),pe((p(),f("div",DAe,[pe(v(ce,{size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-more-vertical",class:"rounded-md group-hover:bg-n-alpha-2",onClick:S[0]||(S[0]=y=>I(d)())},null,512),[[b,T.$t("CONVERSATION.HEADER.MORE_ACTIONS")]]),I(r)?(p(),V(ua,{key:0,"menu-items":m.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h},null,8,["menu-items"])):O("",!0)])),[[A,()=>I(d)(!1)]]),I(a)?(p(),V(DTe,{key:0,show:I(a),"current-chat":u.value,onCancel:I(o)},null,8,["show","current-chat","onCancel"])):O("",!0),I(l)?(p(),V(kAe,{key:1,variation:T.outline,"conversation-id":u.value.id,"inbox-id":u.value.inbox_id,show:I(l),onClose:I(i)},null,8,["variation","conversation-id","inbox-id","show","onClose"])):O("",!0)])}}},P_=()=>{const e=ke("getSelectedChat"),t=ke("inboxes/getInboxById"),n=C(()=>{const N=e.value.inbox_id;return zo(t.value(N),{deep:!0})}),s=C(()=>n.value.channelType),a=C(()=>s.value===Ut.API),o=C(()=>s.value===Ut.FB),l=C(()=>s.value===Ut.WEB),i=C(()=>s.value===Ut.TWILIO),r=C(()=>s.value===Ut.LINE),d=C(()=>s.value===Ut.EMAIL),u=C(()=>s.value===Ut.TELEGRAM),m=C(()=>n.value.provider||""),h=C(()=>d.value&&n.value.provider==="microsoft"),_=C(()=>d.value&&n.value.provider==="google"),g=C(()=>{const{medium:N=""}=n.value;return i.value&&N==="sms"}),T=C(()=>s.value===Ut.SMS||g.value),S=C(()=>{const{medium:N=""}=n.value;return i.value&&N==="whatsapp"}),b=C(()=>s.value===Ut.WHATSAPP&&m.value==="whatsapp_cloud"),A=C(()=>s.value===Ut.WHATSAPP&&m.value==="default"),y=C(()=>s.value===Ut.WHATSAPP||S.value),x=C(()=>s.value===Ut.INSTAGRAM),$=C(()=>s.value===Ut.VOICE);return{inbox:n,isAFacebookInbox:o,isALineChannel:r,isAPIInbox:a,isASmsInbox:T,isATelegramChannel:u,isATwilioChannel:i,isAWebWidgetInbox:l,isAWhatsAppChannel:y,isAMicrosoftInbox:h,isAGoogleInbox:_,isATwilioWhatsAppChannel:S,isAWhatsAppCloudChannel:b,is360DialogWhatsAppChannel:A,isAnEmailChannel:d,isAnInstagramChannel:x,isAVoiceChannel:$}},BAe={class:"flex items-center justify-start w-full xl:w-auto max-w-full min-w-0 xl:flex-1"},FAe={class:"flex flex-col items-start min-w-0 ml-2 overflow-hidden rtl:ml-0 rtl:mr-2"},UAe={class:"flex flex-row items-center max-w-full gap-1 p-0 m-0"},GAe={class:"text-sm font-medium truncate leading-tight text-n-slate-12"},VAe={class:"flex items-center gap-2 overflow-hidden text-xs conversation--header--actions text-ellipsis whitespace-nowrap"},HAe={key:1,class:"font-medium text-n-amber-10"},WAe={class:"flex flex-row items-center justify-start xl:justify-end flex-shrink-0 gap-2 w-full xl:w-auto header-actions-wrap"},KAe={__name:"ConversationHeader",props:{chat:{type:Object,default:()=>({})},showBackButton:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Pe(),s=Pn(),a=cn(),o=F(null),{width:l}=Er(o),{isAWebWidgetInbox:i}=P_(),r=C(()=>s.getters.getSelectedChat),d=C(()=>s.getters.getCurrentAccountId),u=C(()=>t.chat.meta),m=C(()=>{const{params:{inbox_id:y,label:x,teamId:$,id:N},name:w}=a,D={conversation_through_mentions:"mention",conversation_through_unattended:"unattended"};return iT({accountId:d.value,inboxId:y,label:x,teamId:$,conversationType:D[w],customViewId:N})}),h=C(()=>i.value?u.value.hmac_verified:!0),_=C(()=>s.getters["contacts/getContact"](t.chat.meta.sender.id)),g=C(()=>r.value.status===Pt.STATUS_TYPE.SNOOZED),T=C(()=>{const{snoozed_until:y}=r.value;return y?`${n("CONVERSATION.HEADER.SNOOZED_UNTIL")} ${P0e(y)}`:n("CONVERSATION.HEADER.SNOOZED_UNTIL_NEXT_REPLY")}),S=C(()=>{const{inbox_id:y}=t.chat;return s.getters["inboxes/getInbox"](y)}),b=C(()=>s.getters["inboxes/getInboxes"].length>1),A=C(()=>{var y;return(y=t.chat)==null?void 0:y.sla_policy_id});return(y,x)=>{const $=z("fluent-icon"),N=_t("tooltip");return p(),f("div",{ref_key:"conversationHeader",ref:o,class:"flex flex-col gap-3 items-center justify-between flex-1 w-full min-w-0 xl:flex-row px-3 py-2 border-b bg-n-background border-n-weak h-24 xl:h-12"},[c("div",BAe,[e.showBackButton?(p(),V(ki,{key:0,"back-url":m.value,class:"ltr:mr-2 rtl:ml-2"},null,8,["back-url"])):O("",!0),v(Ft,{name:_.value.name,src:_.value.thumbnail,size:32,status:_.value.availability_status,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),c("div",FAe,[c("div",UAe,[c("span",GAe,E(_.value.name),1),h.value?O("",!0):pe((p(),V($,{key:0,size:"14",class:"text-n-amber-10 my-0 mx-0 min-w-[14px] flex-shrink-0",icon:"warning"},null,512)),[[N,y.$t("CONVERSATION.UNVERIFIED_SESSION")]])]),c("div",VAe,[b.value?(p(),V(M_,{key:0,inbox:S.value,class:"!mx-0"},null,8,["inbox"])):O("",!0),g.value?(p(),f("span",HAe,E(T.value),1)):O("",!0)])])]),c("div",WAe,[A.value?(p(),V(ZS,{key:0,chat:e.chat,"show-extended-info":"","parent-width":I(l),class:"hidden md:flex"},null,8,["chat","parent-width"])):O("",!0),v(PAe,{"conversation-id":r.value.id},null,8,["conversation-id"])])],512)}}},zAe={components:{LoadingState:xr},props:{config:{type:Array,default:()=>[]},currentChat:{type:Object,default:()=>({})},isVisible:{type:Boolean,default:!1},position:{type:Number,required:!0}},data(){return{hasOpenedAtleastOnce:!1,iframeLoading:!0}},computed:{dashboardAppContext(){return{conversation:this.currentChat,contact:this.$store.getters["contacts/getContact"](this.contactId),currentAgent:this.currentAgent}},contactId(){var e,t,n;return(n=(t=(e=this.currentChat)==null?void 0:e.meta)==null?void 0:t.sender)==null?void 0:n.id},currentAgent(){const{id:e,name:t,email:n}=this.$store.getters.getCurrentUser;return{id:e,name:t,email:n}}},watch:{isVisible(){this.isVisible&&(this.hasOpenedAtleastOnce=!0)}},mounted(){window.addEventListener("message",this.triggerEvent)},unmounted(){window.removeEventListener("message",this.triggerEvent)},methods:{triggerEvent(e){this.isVisible&&e.data==="chatwoot-dashboard-app:fetch-info"&&this.onIframeLoad(0)},getFrameId(e){return`dashboard-app--frame-${this.position}-${e}`},onIframeLoad(e){const t=document.getElementById(this.getFrameId(e)),n={event:"appContext",data:this.dashboardAppContext};t.contentWindow.postMessage(JSON.stringify(n),"*"),this.iframeLoading=!1}}},jAe={key:0,class:"dashboard-app--container"},YAe=["id","src","onLoad"];function XAe(e,t,n,s,a,o){const l=z("LoadingState");return a.hasOpenedAtleastOnce?(p(),f("div",jAe,[(p(!0),f(fe,null,Ae(n.config,(i,r)=>(p(),f("div",{key:r,class:"dashboard-app--list"},[a.iframeLoading?(p(),V(l,{key:0,message:e.$t("DASHBOARD_APPS.LOADING_MESSAGE"),class:"dashboard-app_loading-container"},null,8,["message"])):O("",!0),i.type==="frame"&&i.url?(p(),f("iframe",{key:1,id:o.getFrameId(r),src:i.url,onLoad:()=>o.onIframeLoad(r)},null,40,YAe)):O("",!0)]))),128))])):O("",!0)}const qAe=Fe(zAe,[["render",XAe],["__scopeId","data-v-e20fef4a"]]),ZAe={class:"h-full w-full bg-n-background border border-n-weak rounded-lg p-4 flex flex-col"},QAe={class:"flex-1 flex items-center justify-center"},JAe=["src","alt"],eye={class:"mt-auto"},tye={class:"text-base text-n-slate-12 font-interDisplay font-semibold tracking-[0.3px]"},nye={class:"text-n-slate-11 text-sm"},zd={__name:"OnboardingFeatureCard",props:{imageSrc:{type:String,default:""},imageAlt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},to:{type:String,default:""},linkText:{type:String,default:""}},setup(e){return(t,n)=>{const s=z("router-link");return p(),f("div",ZAe,[c("div",QAe,[c("img",{src:e.imageSrc,alt:e.imageAlt,class:"h-36 w-auto mx-auto"},null,8,JAe)]),c("div",eye,[c("p",tye,E(e.title),1),c("p",nye,E(e.description),1),e.to?(p(),V(s,{key:0,to:{name:e.to},class:"no-underline text-n-brand text-sm font-medium"},{default:K(()=>[c("span",null,E(e.linkText),1),n[0]||(n[0]=c("span",{class:"ml-2"},E(""),-1))]),_:1},8,["to"])):O("",!0)])])}}},sye={class:"min-h-screen lg:max-w-5xl max-w-4xl mx-auto grid grid-cols-2 grid-rows-[auto_1fr_1fr] auto-rows-min gap-4 p-8 w-full font-inter overflow-auto"},aye={class:"col-span-full self-start"},oye={class:"text-xl font-semibold text-n-slate-12 font-interDisplay tracking-[0.3px]"},lye={class:"text-n-slate-11 max-w-2xl text-base"},iye={__name:"OnboardingView",setup(e){const t=Nn(),{t:n}=Pe(),s=C(()=>t["globalConfig/get"].value),a=C(()=>t.getCurrentUser.value),o=C(()=>{const l=new Date().getHours();let i;return l<12?i="ONBOARDING.GREETING_MORNING":l<18?i="ONBOARDING.GREETING_AFTERNOON":i="ONBOARDING.GREETING_EVENING",n(i,{name:a.value.name,installationName:s.value.installationName})});return(l,i)=>(p(),f("div",sye,[c("div",aye,[c("p",oye,E(o.value),1),c("p",lye,E(l.$t("ONBOARDING.DESCRIPTION",{installationName:s.value.installationName})),1)]),v(zd,{"image-src":"/dashboard/images/onboarding/omnichannel-inbox.png","image-alt":"Omnichannel",to:"settings_inbox_new",title:l.$t("ONBOARDING.ALL_CONVERSATION.TITLE"),description:l.$t("ONBOARDING.ALL_CONVERSATION.DESCRIPTION"),"link-text":l.$t("ONBOARDING.ALL_CONVERSATION.NEW_LINK")},null,8,["title","description","link-text"]),v(zd,{"image-src":"/dashboard/images/onboarding/teams.png","image-alt":"Teams",to:"settings_teams_new",title:l.$t("ONBOARDING.TEAM_MEMBERS.TITLE"),description:l.$t("ONBOARDING.TEAM_MEMBERS.DESCRIPTION"),"link-text":l.$t("ONBOARDING.TEAM_MEMBERS.NEW_LINK")},null,8,["title","description","link-text"]),v(zd,{"image-src":"/dashboard/images/onboarding/canned-responses.png","image-alt":"Canned responses",to:"canned_list",title:l.$t("ONBOARDING.CANNED_RESPONSES.TITLE"),description:l.$t("ONBOARDING.CANNED_RESPONSES.DESCRIPTION"),"link-text":l.$t("ONBOARDING.CANNED_RESPONSES.NEW_LINK")},null,8,["title","description","link-text"]),v(zd,{"image-src":"/dashboard/images/onboarding/labels.png","image-alt":"Labels",to:"labels_list",title:l.$t("ONBOARDING.LABELS.TITLE"),description:l.$t("ONBOARDING.LABELS.DESCRIPTION"),"link-text":l.$t("ONBOARDING.LABELS.NEW_LINK")},null,8,["title","description","link-text"])]))}},rye={props:{customClass:{type:String,default:""}}};function cye(e,t,n,s,a,o){return p(),f("kbd",{class:re(["hotkey p-0.5 min-w-[1rem] uppercase",n.customClass])},[at(e.$slots,"default")],2)}const or=Fe(rye,[["render",cye]]),dye={components:{Hotkey:or},data(){return{keyShortcuts:[{key:"K",description:this.$t("CONVERSATION.EMPTY_STATE.CMD_BAR")},{key:"/",description:this.$t("CONVERSATION.EMPTY_STATE.KEYBOARD_SHORTCUTS")}]}}},uye={class:"flex flex-col gap-2 mt-9"},pye={class:"flex items-center gap-2"},mye={class:"text-sm font-medium text-center text-n-slate-12"};function hye(e,t,n,s,a,o){const l=z("Hotkey");return p(),f("div",uye,[(p(!0),f(fe,null,Ae(a.keyShortcuts,i=>(p(),f("div",{key:i.key,class:"flex items-center gap-2"},[c("div",pye,[v(l,{"custom-class":"w-8 h-6 text-lg font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:K(()=>t[0]||(t[0]=[Ee("  ")])),_:1}),v(l,{"custom-class":"w-8 h-6 text-xs font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:K(()=>[Ee(E(i.key),1)]),_:2},1024)]),c("span",mye,E(i.description),1)]))),128))])}const fye=Fe(dye,[["render",hye]]),gye="/vite/assets/no-chat-dark-BSWrQBd3.svg",_ye="/vite/assets/no-chat-okxWD-4P.svg",vye={components:{FeaturePlaceholder:fye},props:{message:{type:String,required:!0}}},bye={class:"flex flex-col items-center justify-center h-full"},Eye={class:"text-sm text-n-slate-12 font-medium text-center"};function Tye(e,t,n,s,a,o){const l=z("FeaturePlaceholder");return p(),f("div",bye,[t[1]||(t[1]=c("img",{class:"m-4 w-32 hidden dark:block",src:gye,alt:"No Chat dark"},null,-1)),t[2]||(t[2]=c("img",{class:"m-4 w-32 block dark:hidden",src:_ye,alt:"No Chat"},null,-1)),c("span",Eye,[Ee(E(n.message)+" ",1),t[0]||(t[0]=c("br",null,null,-1))]),v(l)])}const Aye=Fe(vye,[["render",Tye]]),yye={components:{OnboardingView:iye,EmptyStateMessage:Aye},props:{isOnExpandedLayout:{type:Boolean,default:!1}},setup(){const{isAdmin:e}=io(),{accountScopedUrl:t}=_s();return{isAdmin:e,accountScopedUrl:t}},computed:{...St({currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",uiFlags:"inboxes/getUIFlags",loadingChatList:"getChatListLoadingStatus"}),loadingIndicatorMessage(){return this.uiFlags.isFetching?this.$t("CONVERSATION.LOADING_INBOXES"):this.$t("CONVERSATION.LOADING_CONVERSATIONS")},conversationMissingMessage(){return this.isOnExpandedLayout?this.$t("CONVERSATION.404"):this.$t("CONVERSATION.SELECT_A_CONVERSATION")},newInboxURL(){return this.accountScopedUrl("settings/inboxes/new")},emptyClassName(){return!this.inboxesList.length&&!this.uiFlags.isFetching&&!this.loadingChatList&&this.isAdmin?"h-full overflow-auto w-full":"flex-1 min-w-0 px-0 flex flex-col items-center justify-center h-full"}}},Sye={key:1,class:"clearfix mx-auto"},Iye={key:2,class:"flex flex-col items-center justify-center h-full"};function Cye(e,t,n,s,a,o){const l=z("woot-loading-state"),i=z("OnboardingView"),r=z("EmptyStateMessage");return p(),f("div",{class:re(o.emptyClassName)},[e.uiFlags.isFetching||e.loadingChatList?(p(),V(l,{key:0,message:o.loadingIndicatorMessage},null,8,["message"])):O("",!0),!e.inboxesList.length&&!e.uiFlags.isFetching&&!e.loadingChatList?(p(),f("div",Sye,[s.isAdmin?(p(),V(i,{key:0})):(p(),V(r,{key:1,message:e.$t("CONVERSATION.NO_INBOX_AGENT")},null,8,["message"]))])):!e.uiFlags.isFetching&&!e.loadingChatList?(p(),f("div",Iye,[e.allConversations.length?e.allConversations.length&&!e.currentChat.id?(p(),V(r,{key:1,message:o.conversationMissingMessage},null,8,["message"])):O("",!0):(p(),V(r,{key:0,message:e.$t("CONVERSATION.NO_MESSAGE_1")},null,8,["message"]))])):O("",!0)],2)}const xye=Fe(yye,[["render",Cye]]);class Nye extends tl{constructor(){super("integrations",{accountScoped:!0}),this.conversation_events=["summarize","reply_suggestion","label_suggestion"],this.message_events=["rephrase"]}processEvent({type:t="rephrase",content:n,tone:s,conversationId:a,hookId:o}){let l={tone:s,content:n};return this.conversation_events.includes(t)&&(l={conversation_display_id:a}),axios.post(`${this.url}/hooks/${o}/process_event`,{event:{name:t,data:l}})}}const G0=new Nye,Oye=e=>e.toLowerCase().split(",").filter(t=>t.trim()).map(t=>t.trim()).filter((t,n,s)=>s.indexOf(t)===n);function ud(){const e=yt(),t=Nn(),{t:n}=Pe(),s=C(()=>t["integrations/getUIFlags"].value),a=ke("integrations/getAppIntegrations"),o=ke("getSelectedChat"),l=ke("draftMessages/getReplyEditorMode"),i=C(()=>{var y;return(y=a.value.find(x=>x.id==="openai"&&!!x.hooks.length))==null?void 0:y.hooks[0]}),r=C(()=>!!i.value),d=C(()=>{if(i.value){const{settings:y={}}=i.value||{};return y.label_suggestion}return!1}),u=C(()=>s.value.isFetching),m=C(()=>{var y;return(y=i.value)==null?void 0:y.id}),h=C(()=>{var y;return(y=o.value)==null?void 0:y.id}),_=C(()=>`draft-${h.value}-${l.value}`),g=C(()=>t["draftMessages/get"].value(_.value)),T=async()=>{a.value.length||await e.dispatch("integrations/get")},S=async(y,x)=>{const $=Eu[y.toUpperCase()];$&&nn($,{type:y,...x})},b=async()=>{if(!h.value)return[];try{const y=await G0.processEvent({type:"label_suggestion",hookId:m.value,conversationId:h.value}),{data:{message:x}}=y;return Oye(x)}catch{return[]}},A=async(y="rephrase")=>{var x;try{const $=await G0.processEvent({hookId:m.value,type:y,content:g.value,conversationId:h.value}),{data:{message:N}}=$;return N}catch($){const N=$.response.data.error,w=((x=N==null?void 0:N.error)==null?void 0:x.message)||n("INTEGRATION_SETTINGS.OPEN_AI.GENERATE_ERROR");return _e(w),""}};return pt(()=>{T()}),{draftMessage:g,uiFlags:s,appIntegrations:a,currentChat:o,replyMode:l,isAIIntegrationEnabled:r,isLabelSuggestionFeatureEnabled:d,isFetchingAppIntegrations:u,fetchIntegrationsIfRequired:T,recordAnalytics:S,fetchLabelSuggestions:b,processEvent:A}}const V0=[],wye={mounted(){const e=this.getKeyboardEvents();if(e){const t=this.wrapEventsInKeybindingsHandler(e),n=Bx(t);this.addEventHandler(n)}},unmounted(){var e;if(this.$el&&((e=this.$el.dataset)!=null&&e.keydownHandlerIndex)){const t=V0[this.$el.dataset.keydownHandlerIndex];document.removeEventListener("keydown",t)}},methods:{addEventHandler(e){const t=V0.push(e)-1,n=this.getElementToBind();n&&n.dataset&&(document.addEventListener("keydown",e),n.dataset.keydownHandlerIndex=t)},getElementToBind(){return this.$el},getKeyboardEvents(){return null},wrapEventsInKeybindingsHandler(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this.keydownWrapper(e[n])}),t},keydownWrapper(e){return t=>{const n=typeof e=="function"?e:e.action,s=typeof e=="function"?!1:e.allowOnFocusedInput;Dx(t)&&(Px(t)&&t.target.blur(),!s)||n(t)}}}},Rye={class:"reply-editor bg-n-slate-9/10 rounded-md py-1 pl-2 pr-1 text-xs tracking-wide mt-2 flex items-center gap-1.5 -mx-2"},$ye={class:"flex-grow gap-1 mt-px text-xs truncate"},Mye={__name:"ReplyToMessage",props:{message:{type:Object,required:!0}},emits:["dismiss"],setup(e,{emit:t}){const n=t;return(s,a)=>{const o=z("fluent-icon"),l=_t("tooltip");return p(),f("div",Rye,[v(o,{class:"flex-shrink-0 icon",icon:"arrow-reply",size:"14"}),c("div",$ye,[Ee(E(s.$t("CONVERSATION.REPLYBOX.REPLYING_TO"))+" ",1),v(jS,{message:e.message,"show-message-type":!1,"default-empty-message":s.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND"),class:"inline"},null,8,["message","default-empty-message"])]),pe(v(ce,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a[0]||(a[0]=ze(i=>n("dismiss"),["stop"]))},null,512),[[l,s.$t("CONVERSATION.REPLYBOX.DISMISS_REPLY")]])])}}},kye={class:"flex overflow-auto max-h-[12.5rem]"},Lye={class:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},Dye=["src"],Pye={key:1,class:"relative w-6 h-6 text-lg text-left -top-px"},Bye={class:"max-w-3/5 min-w-[50%] overflow-hidden text-ellipsis"},Fye={class:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},Uye={class:"w-[30%] justify-center"},Gye={class:"overflow-hidden text-xs text-ellipsis whitespace-nowrap"},Vye={class:"flex items-center justify-center"},Hye={__name:"AttachmentsPreview",props:{attachments:{type:Array,default:()=>[]}},emits:["removeAttachment"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>n.attachments.filter(u=>!(u!=null&&u.isRecordedAudio))),o=C(()=>n.attachments.filter(u=>u.isRecordedAudio)),l=u=>{s("removeAttachment",a.value.filter((m,h)=>h!==u).concat(o.value))},i=u=>{const m=u.byte_size||u.size;return wx(m,0)},r=u=>(u.content_type||u.type).includes("image"),d=u=>u.filename||u.name;return(u,m)=>(p(),f("div",kye,[(p(!0),f(fe,null,Ae(a.value,(h,_)=>(p(),f("div",{key:h.id,class:"flex items-center p-1 bg-n-slate-3 gap-1 rounded-md w-[15rem] mb-1"},[c("div",Lye,[r(h.resource)?(p(),f("img",{key:0,class:"object-cover w-6 h-6 rounded-sm",src:h.thumb},null,8,Dye)):(p(),f("span",Pye,"  "))]),c("div",Bye,[c("span",Fye,E(d(h.resource)),1)]),c("div",Uye,[c("span",Gye,E(i(h.resource)),1)]),c("div",Vye,[v(ce,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:g=>l(_)},null,8,["onClick"])])]))),128))]))}},Wye={__name:"EditorModeToggle",props:{mode:{type:String,default:Us.REPLY}},emits:["toggleMode"],setup(e){const t=e,n=Ks("wootEditorReplyMode"),s=Ks("wootEditorPrivateMode"),a=Er(n),o=Er(s),l=C(()=>t.mode===Us.NOTE),i=C(()=>`${(l.value?o.width.value:a.width.value)+16}px`),r=C(()=>`${l.value?a.width.value+16:0}px`);return(d,u)=>(p(),f("button",{class:"flex items-center w-auto h-8 p-1 transition-all border rounded-full bg-n-alpha-2 group relative duration-300 ease-in-out z-0",onClick:u[0]||(u[0]=m=>d.$emit("toggleMode"))},[c("div",{ref_key:"wootEditorReplyMode",ref:n,class:"flex items-center gap-1 px-2 z-20"},E(d.$t("CONVERSATION.REPLYBOX.REPLY")),513),c("div",{ref_key:"wootEditorPrivateMode",ref:s,class:"flex items-center gap-1 px-2 z-20"},E(d.$t("CONVERSATION.REPLYBOX.PRIVATE_NOTE")),513),c("div",{class:"absolute shadow-sm rounded-full h-6 w-[var(--chip-width)] transition-all duration-300 ease-in-out translate-x-[var(--translate-x)] rtl:translate-x-[var(--rtl-translate-x)] bg-n-solid-1",style:Ct({"--chip-width":i.value,"--translate-x":r.value,"--rtl-translate-x":"calc(-1 * var(--translate-x))"})},null,4)]))}},Kye={name:"ReplyTopPanel",components:{NextButton:ce,EditorModeToggle:Wye},props:{mode:{type:String,default:Us.REPLY},isMessageLengthReachingThreshold:{type:Boolean,default:()=>!1},charactersRemaining:{type:Number,default:()=>0}},emits:["setReplyMode","togglePopout"],setup(e,{emit:t}){const n=i=>{t("setReplyMode",i)},s=()=>{n(Us.REPLY)},a=()=>{n(Us.NOTE)},o=()=>{const i=e.mode===Us.REPLY?Us.NOTE:Us.REPLY;n(i)};return Qs({"Alt+KeyP":{action:()=>a(),allowOnFocusedInput:!0},"Alt+KeyL":{action:()=>s(),allowOnFocusedInput:!0}}),{handleModeToggle:o,handleReplyClick:s,handleNoteClick:a,REPLY_EDITOR_MODES:Us}},computed:{replyButtonClass(){return{"is-active":this.mode===Us.REPLY}},noteButtonClass(){return{"is-active":this.mode===Us.NOTE}},charLengthClass(){return this.charactersRemaining<0?"text-n-ruby-9":"text-n-slate-11"},characterLengthWarning(){return this.charactersRemaining<0?`${-this.charactersRemaining} ${Av.NEGATIVE}`:`${this.charactersRemaining} ${Av.UNDER_50}`}}},zye={class:"flex justify-between h-[3.25rem] gap-2 ltr:pl-3 rtl:pr-3"},jye={class:"flex items-center mx-4 my-0"},Yye={key:0,class:"text-xs"};function Xye(e,t,n,s,a,o){const l=z("EditorModeToggle"),i=z("NextButton");return p(),f("div",zye,[v(l,{mode:n.mode,class:"mt-3",onToggleMode:s.handleModeToggle},null,8,["mode","onToggleMode"]),c("div",jye,[n.isMessageLengthReachingThreshold?(p(),f("div",Yye,[c("span",{class:re(o.charLengthClass)},E(o.characterLengthWarning),3)])):O("",!0)]),v(i,{ghost:"",class:"ltr:rounded-bl-md rtl:rounded-br-md ltr:rounded-br-none rtl:rounded-bl-none ltr:rounded-tl-none rtl:rounded-tr-none text-n-slate-11 ltr:rounded-tr-[11px] rtl:rounded-tl-[11px]",icon:"i-lucide-maximize-2",onClick:t[0]||(t[0]=r=>e.$emit("togglePopout"))})])}const qye=Fe(Kye,[["render",Xye]]),Fh=e=>e.length?e.replace(/\s+/g,"").split(",").every(n=>Zl.$validator(n)):!0,Zye={components:{ButtonV4:ce},props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},emits:["update:bccEmails","update:ccEmails","update:toEmails"],setup(){return{v$:Lt()}},data(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails(e){e!==this.bccEmailsVal&&(this.bccEmailsVal=e)},ccEmails(e){e!==this.ccEmailsVal&&(this.ccEmailsVal=e)},toEmails(e){e!==this.toEmailsVal&&(this.toEmailsVal=e)}},mounted(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails(e){return Fh(e)}},bccEmailsVal:{hasValidEmails(e){return Fh(e)}},toEmailsVal:{hasValidEmails(e){return Fh(e)}}},methods:{handleAddBcc(){this.showBcc=!0},onBlur(){this.v$.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},Qye={key:0},Jye={class:"input-group-label"},eSe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},tSe={class:"input-group-wrap"},nSe={class:"input-group-label"},sSe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},aSe={key:0,class:"message"},oSe={key:1,class:"input-group-wrap"},lSe={class:"input-group-label"},iSe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},rSe={key:0,class:"message"};function cSe(e,t,n,s,a,o){const l=z("woot-input"),i=z("ButtonV4");return p(),f("div",null,[n.toEmails?(p(),f("div",Qye,[c("div",{class:re(["input-group small",{error:s.v$.toEmailsVal.$error}])},[c("label",Jye,E(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO")),1),c("div",eSe,[v(l,{modelValue:s.v$.toEmailsVal.$model,"onUpdate:modelValue":t[0]||(t[0]=r=>s.v$.toEmailsVal.$model=r),type:"text",class:re(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.toEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:o.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2)])):O("",!0),c("div",tSe,[c("div",{class:re(["input-group small",{error:s.v$.ccEmailsVal.$error}])},[c("label",nSe,E(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL")),1),c("div",sSe,[v(l,{modelValue:s.v$.ccEmailsVal.$model,"onUpdate:modelValue":t[1]||(t[1]=r=>s.v$.ccEmailsVal.$model=r),class:re(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.ccEmailsVal.$error}]),type:"text",placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:o.onBlur},null,8,["modelValue","class","placeholder","onBlur"])]),a.showBcc?O("",!0):(p(),V(i,{key:0,label:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"),ghost:"",xs:"",primary:"",onClick:o.handleAddBcc},null,8,["label","onClick"]))],2),s.v$.ccEmailsVal.$error?(p(),f("span",aSe,E(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR")),1)):O("",!0)]),a.showBcc?(p(),f("div",oSe,[c("div",{class:re(["input-group small",{error:s.v$.bccEmailsVal.$error}])},[c("label",lSe,E(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL")),1),c("div",iSe,[v(l,{modelValue:s.v$.bccEmailsVal.$model,"onUpdate:modelValue":t[2]||(t[2]=r=>s.v$.bccEmailsVal.$model=r),type:"text",class:re(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.bccEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER"),onBlur:o.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2),s.v$.bccEmailsVal.$error?(p(),f("span",rSe,E(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR")),1)):O("",!0)])):O("",!0)])}const dSe=Fe(Zye,[["render",cSe],["__scopeId","data-v-aa13b592"]]);class uSe extends tl{constructor(){super("integrations/dyte",{accountScoped:!0})}createAMeeting(t){return axios.post(`${this.url}/create_a_meeting`,{conversation_id:t})}addParticipantToMeeting(t){return axios.post(`${this.url}/add_participant_to_meeting`,{message_id:t})}}const tI=new uSe,pSe={components:{NextButton:ce},props:{conversationId:{type:Number,default:0}},data(){return{isLoading:!1}},computed:{...St({appIntegrations:"integrations/getAppIntegrations"}),isVideoIntegrationEnabled(){return this.appIntegrations.find(e=>e.id==="dyte"&&!!e.hooks.length)}},mounted(){this.appIntegrations.length||this.$store.dispatch("integrations/get")},methods:{async onClick(){this.isLoading=!0;try{await tI.createAMeeting(this.conversationId)}catch{_e(this.$t("INTEGRATION_SETTINGS.DYTE.CREATE_ERROR"))}finally{this.isLoading=!1}}}};function mSe(e,t,n,s,a,o){const l=z("NextButton"),i=_t("tooltip");return o.isVideoIntegrationEnabled?pe((p(),V(l,{key:0,icon:"i-ph-video-camera",slate:"",faded:"",sm:"",onClick:o.onClick},null,8,["onClick"])),[[i,e.$t("INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT"),void 0,{"top-end":!0}]]):O("",!0)}const hSe=Fe(pSe,[["render",mSe]]),fSe={components:{NextButton:ce},emits:["close"],setup(){const{updateUISettings:e}=Sn(),{recordAnalytics:t}=ud(),n=Lt();return{updateUISettings:e,v$:n,recordAnalytics:t}},data(){return{value:""}},validations:{value:{required:lt}},methods:{onClose(){this.$emit("close")},onDismiss(){_e(this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DISMISS_MESSAGE")),this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.onClose()},async finishOpenAI(){var t,n;const e={app_id:"openai",settings:{api_key:this.value}};try{await this.$store.dispatch("integrations/createHook",e),this.alertMessage=this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.SUCCESS_MESSAGE"),this.recordAnalytics(Eu.ADDED_AI_INTEGRATION_VIA_CTA_BUTTON),this.onClose()}catch(s){const a=(n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message;this.alertMessage=a||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{_e(this.alertMessage)}},openOpenAIDoc(){window.open("https://www.chatwoot.com/blog/v2-17","_blank")}}},gSe={class:"flex-1 min-w-0 px-0"},_Se={class:"w-full mt-2"},vSe={class:"flex flex-row justify-between w-full gap-2 px-0 py-2"},bSe={class:"flex items-center gap-1"};function ESe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("woot-input"),r=z("NextButton");return p(),f("div",gSe,[v(l,{"header-title":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.TITLE"),"header-content":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DESC")},null,8,["header-title","header-content"]),c("form",{class:"flex flex-col flex-wrap modal-content",onSubmit:t[1]||(t[1]=ze((...d)=>o.finishOpenAI&&o.finishOpenAI(...d),["prevent"]))},[c("div",_Se,[v(i,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=d=>a.value=d),type:"text",class:re({error:s.v$.value.$error}),placeholder:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.KEY_PLACEHOLDER"),onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"])]),c("div",vSe,[v(r,{ghost:"",type:"button",class:"!px-3",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.NEED_HELP"),onClick:ze(o.openOpenAIDoc,["prevent"])},null,8,["label","onClick"]),c("div",bSe,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.DISMISS"),onClick:ze(o.onDismiss,["prevent"])},null,8,["label","onClick"]),v(r,{type:"submit",disabled:s.v$.value.$invalid,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.FINISH")},null,8,["disabled","label"])])])],32)])}const TSe=Fe(fSe,[["render",ESe]]),ASe={},ySe={class:"animation-container margin-top-1"},SSe={class:"ai-typing--wrap"};function ISe(e,t){const n=z("fluent-icon");return p(),f("div",ySe,[c("div",SSe,[v(n,{icon:"wand",size:"14",class:"ai-typing--icon"}),c("label",null,E(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.AI_WRITING")),1)]),t[0]||(t[0]=c("span",{class:"loader"},null,-1)),t[1]||(t[1]=c("span",{class:"loader"},null,-1)),t[2]||(t[2]=c("span",{class:"loader"},null,-1))])}const CSe=Fe(ASe,[["render",ISe],["__scopeId","data-v-bb5a687d"]]),xSe={components:{AILoader:CSe,NextButton:ce},props:{aiOption:{type:String,required:!0}},emits:["close","applyText"],setup(){const{formatMessage:e}=$a(),{draftMessage:t,processEvent:n,recordAnalytics:s}=ud();return{draftMessage:t,processEvent:n,recordAnalytics:s,formatMessage:e}},data(){return{generatedContent:"",isGenerating:!0}},computed:{headerTitle(){var t;const e=(t=this.aiOption)==null?void 0:t.toUpperCase();return e?this.$t("INTEGRATION_SETTINGS.OPEN_AI.WITH_AI",{option:this.$t(`INTEGRATION_SETTINGS.OPEN_AI.OPTIONS.${e}`)}):""}},mounted(){this.generateAIContent(this.aiOption)},methods:{onClose(){this.$emit("close")},async generateAIContent(e="rephrase"){this.isGenerating=!0,this.generatedContent=await this.processEvent(e),this.isGenerating=!1},applyText(){this.recordAnalytics(this.aiOption),this.$emit("applyText",this.generatedContent),this.onClose()}}},NSe={class:"flex flex-col"},OSe={key:0,class:"w-full"},wSe={class:"mt-1 text-base text-n-slate-12"},RSe={class:"mt-1 text-base text-n-slate-12"},$Se={key:1},MSe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function kSe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("AILoader"),r=z("NextButton"),d=_t("dompurify-html");return p(),f("div",NSe,[v(l,{"header-title":o.headerTitle},null,8,["header-title"]),c("form",{class:"flex flex-col w-full modal-content",onSubmit:t[0]||(t[0]=ze((...u)=>o.applyText&&o.applyText(...u),["prevent"]))},[s.draftMessage?(p(),f("div",OSe,[c("h4",wSe,E(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.DRAFT_TITLE")),1),pe(c("p",null,null,512),[[d,s.formatMessage(s.draftMessage,!1)]]),c("h4",RSe,E(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.GENERATED_TITLE")),1)])):O("",!0),c("div",null,[a.isGenerating?(p(),V(i,{key:0})):pe((p(),f("p",$Se,null,512)),[[d,s.formatMessage(a.generatedContent,!1)]])]),c("div",MSe,[v(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.CANCEL"),onClick:ze(o.onClose,["prevent"])},null,8,["label","onClick"]),v(r,{type:"submit",disabled:!a.generatedContent,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.APPLY")},null,8,["disabled","label"])])],32)])}const LSe=Fe(xSe,[["render",kSe],["__scopeId","data-v-75714faa"]]),DSe={class:"relative"},PSe={__name:"AIAssistanceCTAButton",emits:["open"],setup(e,{emit:t}){const n=t,s=()=>{n("open")};return(a,o)=>(p(),f("div",DSe,[v(ce,{class:"cta-btn cta-btn-light dark:cta-btn-dark hover:cta-btn-light-hover dark:hover:cta-btn-dark-hover",label:a.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),icon:"i-ph-magic-wand",sm:"",onClick:s},null,8,["label"]),o[0]||(o[0]=c("div",{class:"radar-ping-animation absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-n-brand"},null,-1)),o[1]||(o[1]=c("div",{class:"absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-n-brand opacity-50"},null,-1))]))}},BSe=Fe(PSe,[["__scopeId","data-v-5f45d805"]]),FSe={components:{NextButton:ce,AIAssistanceModal:LSe,AICTAModal:TSe,AIAssistanceCTAButton:BSe},emits:["replaceText"],setup(e,{emit:t}){const{uiSettings:n,updateUISettings:s}=Sn(),{isAIIntegrationEnabled:a,draftMessage:o,recordAnalytics:l}=ud(),{isAdmin:i}=io(),r=F(""),d=m=>{r.value=m};return Qs({"$mod+KeyZ":{action:()=>{r.value&&(t("replaceText",r.value),r.value="")},allowOnFocusedInput:!0}}),{uiSettings:n,updateUISettings:s,isAdmin:i,initialMessage:r,initializeMessage:d,recordAnalytics:l,isAIIntegrationEnabled:a,draftMessage:o}},data:()=>({showAIAssistanceModal:!1,showAICtaModal:!1,aiOption:""}),computed:{...St({isAChatwootInstance:"globalConfig/isAChatwootInstance"}),isAICTAModalDismissed(){return this.uiSettings.is_open_ai_cta_modal_dismissed},shouldShowAIAssistCTAButtonForAdmin(){return this.isAdmin&&!this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed&&this.isAChatwootInstance},shouldShowAIAssistCTAButton(){return this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed}},mounted(){It.on(H0e,this.onAIAssist),this.initializeMessage(this.draftMessage)},methods:{hideAIAssistanceModal(){this.recordAnalytics("DISMISS_AI_SUGGESTION",{aiOption:this.aiOption}),this.showAIAssistanceModal=!1},openAIAssist(){this.isAICTAModalDismissed||this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.initializeMessage(this.draftMessage),document.querySelector("ninja-keys").open({parent:"ai_assist"})},hideAICtaModal(){this.showAICtaModal=!1},openAICta(){this.showAICtaModal=!0},onAIAssist(e){this.aiOption=e,this.showAIAssistanceModal=!0},insertText(e){this.$emit("replaceText",e)}}},USe={key:0,class:"relative"},GSe={key:1,class:"relative"};function VSe(e,t,n,s,a,o){const l=z("AIAssistanceCTAButton"),i=z("NextButton"),r=z("AIAssistanceModal"),d=z("woot-modal"),u=z("AICTAModal"),m=_t("tooltip");return p(),f("div",null,[s.isAIIntegrationEnabled?(p(),f("div",USe,[o.shouldShowAIAssistCTAButton?(p(),V(l,{key:0,onOpen:o.openAIAssist},null,8,["onOpen"])):pe((p(),V(i,{key:1,icon:"i-ph-magic-wand",slate:"",faded:"",sm:"",onClick:o.openAIAssist},null,8,["onClick"])),[[m,e.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),void 0,{"top-end":!0}]]),v(d,{show:e.showAIAssistanceModal,"onUpdate:show":t[0]||(t[0]=h=>e.showAIAssistanceModal=h),"on-close":o.hideAIAssistanceModal},{default:K(()=>[v(r,{"ai-option":e.aiOption,onApplyText:o.insertText,onClose:o.hideAIAssistanceModal},null,8,["ai-option","onApplyText","onClose"])]),_:1},8,["show","on-close"])])):o.shouldShowAIAssistCTAButtonForAdmin?(p(),f("div",GSe,[v(l,{onClick:o.openAICta},null,8,["onClick"]),v(d,{show:e.showAICtaModal,"onUpdate:show":t[1]||(t[1]=h=>e.showAICtaModal=h),"on-close":o.hideAICtaModal},{default:K(()=>[v(u,{onClose:o.hideAICtaModal},null,8,["onClose"])]),_:1},8,["show","on-close"])])):O("",!0)])}const HSe=Fe(FSe,[["render",VSe]]),WSe={name:"ReplyBottomPanel",components:{NextButton:ce,FileUpload:bu,VideoCallButton:hSe,AIAssistanceButton:HSe},mixins:[Mr],props:{mode:{type:String,default:Us.REPLY},onSend:{type:Function,default:()=>{}},sendButtonText:{type:String,default:""},recordingAudioDurationText:{type:String,default:"00:00"},inbox:{type:Object,default:()=>({})},showFileUpload:{type:Boolean,default:!1},showAudioRecorder:{type:Boolean,default:!1},onFileUpload:{type:Function,default:()=>{}},toggleEmojiPicker:{type:Function,default:()=>{}},toggleAudioRecorder:{type:Function,default:()=>{}},toggleAudioRecorderPlayPause:{type:Function,default:()=>{}},isRecordingAudio:{type:Boolean,default:!1},recordingAudioState:{type:String,default:""},isSendDisabled:{type:Boolean,default:!1},showEditorToggle:{type:Boolean,default:!1},isOnPrivateNote:{type:Boolean,default:!1},enableMultipleFileUpload:{type:Boolean,default:!0},enableWhatsAppTemplates:{type:Boolean,default:!1},conversationId:{type:Number,required:!0},message:{type:String,default:""},newConversationModalActive:{type:Boolean,default:!1},portalSlug:{type:String,required:!0},conversationType:{type:String,default:""}},emits:["replaceText","toggleInsertArticle","toggleEditor","selectWhatsappTemplate"],setup(){const{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t}=Sn(),n=F(!1);return Qs({"$mod+Alt+KeyA":{action:()=>{document.querySelector("#conversationAttachment").click()},allowOnFocusedInput:!0}}),{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t,uploadRef:n}},computed:{...St({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"integrations/getUIFlags"}),isNote(){return this.mode===Us.NOTE},wrapClass(){return{"is-note-mode":this.isNote}},showAttachButton(){return this.showFileUpload||this.isNote},showAudioRecorderButton(){return this.isALineChannel?!1:this.isFeatureEnabledonAccount(this.accountId,Mt.VOICE_RECORDER)&&this.showAudioRecorder},showAudioPlayStopButton(){return this.showAudioRecorder&&this.isRecordingAudio},isInstagramDM(){return this.conversationType==="instagram_direct_message"},allowedFileTypes(){return this.isATwilioWhatsAppChannel?zC:this.isALineChannel?jC:this.isAnInstagramChannel||this.isInstagramDM?YC:fu},enableDragAndDrop(){return!this.newConversationModalActive},audioRecorderPlayStopIcon(){switch(this.recordingAudioState){case"playing":return"i-ph-pause";case"paused":return"i-ph-play";case"stopped":return"i-ph-play";default:return"i-ph-stop"}},showMessageSignatureButton(){return!this.isOnPrivateNote},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},signatureToggleTooltip(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},enableInsertArticleInReply(){return this.portalSlug},isFetchingAppIntegrations(){return this.uiFlags.isFetching}},mounted(){og.start()},methods:{toggleMessageSignature(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature)},replaceText(e){this.$emit("replaceText",e)},toggleInsertArticle(){this.$emit("toggleInsertArticle")}}},KSe={class:"left-wrap"},zSe={class:"fixed top-0 bottom-0 left-0 right-0 z-20 flex flex-col items-center justify-center w-full h-full gap-2 text-n-slate-12 bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},jSe={class:"text-2xl break-words text-n-slate-12"},YSe={class:"right-wrap"};function XSe(e,t,n,s,a,o){const l=z("NextButton"),i=z("FileUpload"),r=z("VideoCallButton"),d=z("AIAssistanceButton"),u=z("fluent-icon"),m=_t("tooltip");return p(),f("div",{class:re(["flex justify-between p-3",o.wrapClass])},[c("div",KSe,[pe(v(l,{icon:"i-ph-smiley-sticker",slate:"",faded:"",sm:"",onClick:n.toggleEmojiPicker},null,8,["onClick"]),[[m,e.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),void 0,{"top-end":!0}]]),pe((p(),V(i,{ref:"uploadRef","input-id":"conversationAttachment",size:4096*4096,accept:o.allowedFileTypes,multiple:n.enableMultipleFileUpload,drop:o.enableDragAndDrop,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},onInputFile:n.onFileUpload},{default:K(()=>[o.showAttachButton?pe((p(),V(l,{key:0,icon:"i-ph-paperclip",slate:"",faded:"",sm:""},null,512)),[[m,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]):O("",!0)]),_:1},8,["accept","multiple","drop","onInputFile"])),[[m,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]),o.showAudioRecorderButton?pe((p(),V(l,{key:0,icon:n.isRecordingAudio?"i-ph-microphone-slash":"i-ph-microphone",slate:"",faded:"",sm:"",onClick:n.toggleAudioRecorder},null,8,["icon","onClick"])),[[m,e.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON"),void 0,{"top-end":!0}]]):O("",!0),n.showEditorToggle?pe((p(),V(l,{key:1,icon:"i-ph-quotes",slate:"",faded:"",sm:"",onClick:t[0]||(t[0]=h=>e.$emit("toggleEditor"))},null,512)),[[m,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):O("",!0),o.showAudioPlayStopButton?pe((p(),V(l,{key:2,icon:o.audioRecorderPlayStopIcon,slate:"",faded:"",sm:"",label:n.recordingAudioDurationText,onClick:n.toggleAudioRecorderPlayPause},null,8,["icon","label","onClick"])),[[m,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):O("",!0),o.showMessageSignatureButton?pe((p(),V(l,{key:3,icon:"i-ph-signature",slate:"",faded:"",sm:"",onClick:o.toggleMessageSignature},null,8,["onClick"])),[[m,o.signatureToggleTooltip,void 0,{"top-end":!0}]]):O("",!0),n.enableWhatsAppTemplates?pe((p(),V(l,{key:4,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:t[1]||(t[1]=h=>e.$emit("selectWhatsappTemplate"))},null,512)),[[m,e.$t("CONVERSATION.FOOTER.WHATSAPP_TEMPLATES"),void 0,{"top-end":!0}]]):O("",!0),(e.isAWebWidgetInbox||e.isAPIInbox)&&!n.isOnPrivateNote?(p(),V(r,{key:5,"conversation-id":n.conversationId},null,8,["conversation-id"])):O("",!0),o.isFetchingAppIntegrations?O("",!0):(p(),V(d,{key:6,"conversation-id":n.conversationId,"is-private-note":n.isOnPrivateNote,message:n.message,onReplaceText:o.replaceText},null,8,["conversation-id","is-private-note","message","onReplaceText"])),v(Ps,{name:"modal-fade"},{default:K(()=>[pe(c("div",zSe,[v(u,{icon:"cloud-backup",size:"40"}),c("h4",jSe,E(e.$t("CONVERSATION.REPLYBOX.DRAG_DROP")),1)],512),[[pn,s.uploadRef&&s.uploadRef.dropActive]])]),_:1}),o.enableInsertArticleInReply?pe((p(),V(l,{key:7,icon:"i-ph-article-ny-times",slate:"",faded:"",sm:"",onClick:o.toggleInsertArticle},null,8,["onClick"])),[[m,e.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH"),void 0,{"top-end":!0}]]):O("",!0)]),c("div",YSe,[v(l,{label:n.sendButtonText,type:"submit",sm:"",color:o.isNote?"amber":"blue",disabled:n.isSendDisabled,class:"flex-shrink-0",onClick:n.onSend},null,8,["label","color","disabled","onClick"])])],2)}const qSe=Fe(WSe,[["render",XSe],["__scopeId","data-v-f0050fce"]]),ZSe={af:"Afrikaans",af_NA:"Afrikaans (Namibia)",af_ZA:"Afrikaans (South Africa)",ak:"Akan",ak_GH:"Akan (Ghana)",sq:"Albanian",sq_AL:"Albanian (Albania)",sq_XK:"Albanian (Kosovo)",sq_MK:"Albanian (Macedonia)",am:"Amharic",am_ET:"Amharic (Ethiopia)",ar:"Arabic",ar_DZ:"Arabic (Algeria)",ar_BH:"Arabic (Bahrain)",ar_TD:"Arabic (Chad)",ar_KM:"Arabic (Comoros)",ar_DJ:"Arabic (Djibouti)",ar_EG:"Arabic (Egypt)",ar_ER:"Arabic (Eritrea)",ar_IQ:"Arabic (Iraq)",ar_IL:"Arabic (Israel)",ar_JO:"Arabic (Jordan)",ar_KW:"Arabic (Kuwait)",ar_LB:"Arabic (Lebanon)",ar_LY:"Arabic (Libya)",ar_MR:"Arabic (Mauritania)",ar_MA:"Arabic (Morocco)",ar_OM:"Arabic (Oman)",ar_PS:"Arabic (Palestinian Territories)",ar_QA:"Arabic (Qatar)",ar_SA:"Arabic (Saudi Arabia)",ar_SO:"Arabic (Somalia)",ar_SS:"Arabic (South Sudan)",ar_SD:"Arabic (Sudan)",ar_SY:"Arabic (Syria)",ar_TN:"Arabic (Tunisia)",ar_AE:"Arabic (United Arab Emirates)",ar_EH:"Arabic (Western Sahara)",ar_YE:"Arabic (Yemen)",hy:"Armenian",hy_AM:"Armenian (Armenia)",as:"Assamese",as_IN:"Assamese (India)",az:"Azerbaijani",az_AZ:"Azerbaijani (Azerbaijan)",az_Cyrl_AZ:"Azerbaijani (Cyrillic, Azerbaijan)",az_Cyrl:"Azerbaijani (Cyrillic)",az_Latn_AZ:"Azerbaijani (Latin, Azerbaijan)",az_Latn:"Azerbaijani (Latin)",bm:"Bambara",bm_Latn_ML:"Bambara (Latin, Mali)",bm_Latn:"Bambara (Latin)",eu:"Basque",eu_ES:"Basque (Spain)",be:"Belarusian",be_BY:"Belarusian (Belarus)",bn:"Bengali",bn_BD:"Bengali (Bangladesh)",bn_IN:"Bengali (India)",bs:"Bosnian",bs_BA:"Bosnian (Bosnia & Herzegovina)",bs_Cyrl_BA:"Bosnian (Cyrillic, Bosnia & Herzegovina)",bs_Cyrl:"Bosnian (Cyrillic)",bs_Latn_BA:"Bosnian (Latin, Bosnia & Herzegovina)",bs_Latn:"Bosnian (Latin)",br:"Breton",br_FR:"Breton (France)",bg:"Bulgarian",bg_BG:"Bulgarian (Bulgaria)",my:"Burmese",my_MM:"Burmese (Myanmar (Burma))",ca:"Catalan",ca_AD:"Catalan (Andorra)",ca_FR:"Catalan (France)",ca_IT:"Catalan (Italy)",ca_ES:"Catalan (Spain)",zh:"Chinese",zh_CN:"Chinese (China)",zh_HK:"Chinese (Hong Kong SAR China)",zh_MO:"Chinese (Macau SAR China)",zh_Hans_CN:"Chinese (Simplified, China)",zh_Hans_HK:"Chinese (Simplified, Hong Kong SAR China)",zh_Hans_MO:"Chinese (Simplified, Macau SAR China)",zh_Hans_SG:"Chinese (Simplified, Singapore)",zh_Hans:"Chinese (Simplified)",zh_SG:"Chinese (Singapore)",zh_TW:"Chinese (Taiwan)",zh_Hant_HK:"Chinese (Traditional, Hong Kong SAR China)",zh_Hant_MO:"Chinese (Traditional, Macau SAR China)",zh_Hant_TW:"Chinese (Traditional, Taiwan)",zh_Hant:"Chinese (Traditional)",kw:"Cornish",kw_GB:"Cornish (United Kingdom)",hr:"Croatian",hr_BA:"Croatian (Bosnia & Herzegovina)",hr_HR:"Croatian (Croatia)",cs:"Czech",cs_CZ:"Czech (Czech Republic)",da:"Danish",da_DK:"Danish (Denmark)",da_GL:"Danish (Greenland)",nl:"Dutch",nl_AW:"Dutch (Aruba)",nl_BE:"Dutch (Belgium)",nl_BQ:"Dutch (Caribbean Netherlands)",nl_CW:"Dutch (Curaao)",nl_NL:"Dutch (Netherlands)",nl_SX:"Dutch (Sint Maarten)",nl_SR:"Dutch (Suriname)",dz:"Dzongkha",dz_BT:"Dzongkha (Bhutan)",en:"English",en_AS:"English (American Samoa)",en_AI:"English (Anguilla)",en_AG:"English (Antigua & Barbuda)",en_AU:"English (Australia)",en_BS:"English (Bahamas)",en_BB:"English (Barbados)",en_BE:"English (Belgium)",en_BZ:"English (Belize)",en_BM:"English (Bermuda)",en_BW:"English (Botswana)",en_IO:"English (British Indian Ocean Territory)",en_VG:"English (British Virgin Islands)",en_CM:"English (Cameroon)",en_CA:"English (Canada)",en_KY:"English (Cayman Islands)",en_CX:"English (Christmas Island)",en_CC:"English (Cocos (Keeling) Islands)",en_CK:"English (Cook Islands)",en_DG:"English (Diego Garcia)",en_DM:"English (Dominica)",en_ER:"English (Eritrea)",en_FK:"English (Falkland Islands)",en_FJ:"English (Fiji)",en_GM:"English (Gambia)",en_GH:"English (Ghana)",en_GI:"English (Gibraltar)",en_GD:"English (Grenada)",en_GU:"English (Guam)",en_GG:"English (Guernsey)",en_GY:"English (Guyana)",en_HK:"English (Hong Kong SAR China)",en_IN:"English (India)",en_IE:"English (Ireland)",en_IM:"English (Isle of Man)",en_JM:"English (Jamaica)",en_JE:"English (Jersey)",en_KE:"English (Kenya)",en_KI:"English (Kiribati)",en_LS:"English (Lesotho)",en_LR:"English (Liberia)",en_MO:"English (Macau SAR China)",en_MG:"English (Madagascar)",en_MW:"English (Malawi)",en_MY:"English (Malaysia)",en_MT:"English (Malta)",en_MH:"English (Marshall Islands)",en_MU:"English (Mauritius)",en_FM:"English (Micronesia)",en_MS:"English (Montserrat)",en_NA:"English (Namibia)",en_NR:"English (Nauru)",en_NZ:"English (New Zealand)",en_NG:"English (Nigeria)",en_NU:"English (Niue)",en_NF:"English (Norfolk Island)",en_MP:"English (Northern Mariana Islands)",en_PK:"English (Pakistan)",en_PW:"English (Palau)",en_PG:"English (Papua New Guinea)",en_PH:"English (Philippines)",en_PN:"English (Pitcairn Islands)",en_PR:"English (Puerto Rico)",en_RW:"English (Rwanda)",en_WS:"English (Samoa)",en_SC:"English (Seychelles)",en_SL:"English (Sierra Leone)",en_SG:"English (Singapore)",en_SX:"English (Sint Maarten)",en_SB:"English (Solomon Islands)",en_ZA:"English (South Africa)",en_SS:"English (South Sudan)",en_SH:"English (St. Helena)",en_KN:"English (St. Kitts & Nevis)",en_LC:"English (St. Lucia)",en_VC:"English (St. Vincent & Grenadines)",en_SD:"English (Sudan)",en_SZ:"English (Swaziland)",en_TZ:"English (Tanzania)",en_TK:"English (Tokelau)",en_TO:"English (Tonga)",en_TT:"English (Trinidad & Tobago)",en_TC:"English (Turks & Caicos Islands)",en_TV:"English (Tuvalu)",en_UM:"English (U.S. Outlying Islands)",en_VI:"English (U.S. Virgin Islands)",en_UG:"English (Uganda)",en_GB:"English (United Kingdom)",en_US:"English (United States)",en_VU:"English (Vanuatu)",en_ZM:"English (Zambia)",en_ZW:"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",et_EE:"Estonian (Estonia)",ee:"Ewe",ee_GH:"Ewe (Ghana)",ee_TG:"Ewe (Togo)",fo:"Faroese",fo_FO:"Faroese (Faroe Islands)",fi:"Finnish",fi_FI:"Finnish (Finland)",fr:"French",fr_DZ:"French (Algeria)",fr_BE:"French (Belgium)",fr_BJ:"French (Benin)",fr_BF:"French (Burkina Faso)",fr_BI:"French (Burundi)",fr_CM:"French (Cameroon)",fr_CA:"French (Canada)",fr_CF:"French (Central African Republic)",fr_TD:"French (Chad)",fr_KM:"French (Comoros)",fr_CG:"French (Congo - Brazzaville)",fr_CD:"French (Congo - Kinshasa)",fr_CI:"French (Cte dIvoire)",fr_DJ:"French (Djibouti)",fr_GQ:"French (Equatorial Guinea)",fr_FR:"French (France)",fr_GF:"French (French Guiana)",fr_PF:"French (French Polynesia)",fr_GA:"French (Gabon)",fr_GP:"French (Guadeloupe)",fr_GN:"French (Guinea)",fr_HT:"French (Haiti)",fr_LU:"French (Luxembourg)",fr_MG:"French (Madagascar)",fr_ML:"French (Mali)",fr_MQ:"French (Martinique)",fr_MR:"French (Mauritania)",fr_MU:"French (Mauritius)",fr_YT:"French (Mayotte)",fr_MC:"French (Monaco)",fr_MA:"French (Morocco)",fr_NC:"French (New Caledonia)",fr_NE:"French (Niger)",fr_RE:"French (Runion)",fr_RW:"French (Rwanda)",fr_SN:"French (Senegal)",fr_SC:"French (Seychelles)",fr_BL:"French (St. Barthlemy)",fr_MF:"French (St. Martin)",fr_PM:"French (St. Pierre & Miquelon)",fr_CH:"French (Switzerland)",fr_SY:"French (Syria)",fr_TG:"French (Togo)",fr_TN:"French (Tunisia)",fr_VU:"French (Vanuatu)",fr_WF:"French (Wallis & Futuna)",ff:"Fulah",ff_CM:"Fulah (Cameroon)",ff_GN:"Fulah (Guinea)",ff_MR:"Fulah (Mauritania)",ff_SN:"Fulah (Senegal)",gl:"Galician",gl_ES:"Galician (Spain)",lg:"Ganda",lg_UG:"Ganda (Uganda)",ka:"Georgian",ka_GE:"Georgian (Georgia)",de:"German",de_AT:"German (Austria)",de_BE:"German (Belgium)",de_DE:"German (Germany)",de_LI:"German (Liechtenstein)",de_LU:"German (Luxembourg)",de_CH:"German (Switzerland)",el:"Greek",el_CY:"Greek (Cyprus)",el_GR:"Greek (Greece)",gu:"Gujarati",gu_IN:"Gujarati (India)",ha:"Hausa",ha_GH:"Hausa (Ghana)",ha_Latn_GH:"Hausa (Latin, Ghana)",ha_Latn_NE:"Hausa (Latin, Niger)",ha_Latn_NG:"Hausa (Latin, Nigeria)",ha_Latn:"Hausa (Latin)",ha_NE:"Hausa (Niger)",ha_NG:"Hausa (Nigeria)",he:"Hebrew",he_IL:"Hebrew (Israel)",hi:"Hindi",hi_IN:"Hindi (India)",hu:"Hungarian",hu_HU:"Hungarian (Hungary)",is:"Icelandic",is_IS:"Icelandic (Iceland)",ig:"Igbo",ig_NG:"Igbo (Nigeria)",id:"Indonesian",id_ID:"Indonesian (Indonesia)",ga:"Irish",ga_IE:"Irish (Ireland)",it:"Italian",it_IT:"Italian (Italy)",it_SM:"Italian (San Marino)",it_CH:"Italian (Switzerland)",ja:"Japanese",ja_JP:"Japanese (Japan)",kl:"Kalaallisut",kl_GL:"Kalaallisut (Greenland)",kn:"Kannada",kn_IN:"Kannada (India)",ks:"Kashmiri",ks_Arab_IN:"Kashmiri (Arabic, India)",ks_Arab:"Kashmiri (Arabic)",ks_IN:"Kashmiri (India)",kk:"Kazakh",kk_Cyrl_KZ:"Kazakh (Cyrillic, Kazakhstan)",kk_Cyrl:"Kazakh (Cyrillic)",kk_KZ:"Kazakh (Kazakhstan)",km:"Khmer",km_KH:"Khmer (Cambodia)",ki:"Kikuyu",ki_KE:"Kikuyu (Kenya)",rw:"Kinyarwanda",rw_RW:"Kinyarwanda (Rwanda)",ko:"Korean",ko_KP:"Korean (North Korea)",ko_KR:"Korean (South Korea)",ky:"Kyrgyz",ky_Cyrl_KG:"Kyrgyz (Cyrillic, Kyrgyzstan)",ky_Cyrl:"Kyrgyz (Cyrillic)",ky_KG:"Kyrgyz (Kyrgyzstan)",lo:"Lao",lo_LA:"Lao (Laos)",lv:"Latvian",lv_LV:"Latvian (Latvia)",ln:"Lingala",ln_AO:"Lingala (Angola)",ln_CF:"Lingala (Central African Republic)",ln_CG:"Lingala (Congo - Brazzaville)",ln_CD:"Lingala (Congo - Kinshasa)",lt:"Lithuanian",lt_LT:"Lithuanian (Lithuania)",lu:"Luba-Katanga",lu_CD:"Luba-Katanga (Congo - Kinshasa)",lb:"Luxembourgish",lb_LU:"Luxembourgish (Luxembourg)",mk:"Macedonian",mk_MK:"Macedonian (Macedonia)",mg:"Malagasy",mg_MG:"Malagasy (Madagascar)",ms:"Malay",ms_BN:"Malay (Brunei)",ms_Latn_BN:"Malay (Latin, Brunei)",ms_Latn_MY:"Malay (Latin, Malaysia)",ms_Latn_SG:"Malay (Latin, Singapore)",ms_Latn:"Malay (Latin)",ms_MY:"Malay (Malaysia)",ms_SG:"Malay (Singapore)",ml:"Malayalam",ml_IN:"Malayalam (India)",mt:"Maltese",mt_MT:"Maltese (Malta)",gv:"Manx",gv_IM:"Manx (Isle of Man)",mr:"Marathi",mr_IN:"Marathi (India)",mn:"Mongolian",mn_Cyrl_MN:"Mongolian (Cyrillic, Mongolia)",mn_Cyrl:"Mongolian (Cyrillic)",mn_MN:"Mongolian (Mongolia)",ne:"Nepali",ne_IN:"Nepali (India)",ne_NP:"Nepali (Nepal)",nd:"North Ndebele",nd_ZW:"North Ndebele (Zimbabwe)",se:"Northern Sami",se_FI:"Northern Sami (Finland)",se_NO:"Northern Sami (Norway)",se_SE:"Northern Sami (Sweden)",no:"Norwegian",no_NO:"Norwegian (Norway)",nb:"Norwegian Bokml",nb_NO:"Norwegian Bokml (Norway)",nb_SJ:"Norwegian Bokml (Svalbard & Jan Mayen)",nn:"Norwegian Nynorsk",nn_NO:"Norwegian Nynorsk (Norway)",or:"Oriya",or_IN:"Oriya (India)",om:"Oromo",om_ET:"Oromo (Ethiopia)",om_KE:"Oromo (Kenya)",os:"Ossetic",os_GE:"Ossetic (Georgia)",os_RU:"Ossetic (Russia)",ps:"Pashto",ps_AF:"Pashto (Afghanistan)",fa:"Persian",fa_AF:"Persian (Afghanistan)",fa_IR:"Persian (Iran)",pl:"Polish",pl_PL:"Polish (Poland)",pt:"Portuguese",pt_AO:"Portuguese (Angola)",pt_BR:"Portuguese (Brazil)",pt_CV:"Portuguese (Cape Verde)",pt_GW:"Portuguese (Guinea-Bissau)",pt_MO:"Portuguese (Macau SAR China)",pt_MZ:"Portuguese (Mozambique)",pt_PT:"Portuguese (Portugal)",pt_ST:"Portuguese (So Tom & Prncipe)",pt_TL:"Portuguese (Timor-Leste)",pa:"Punjabi",pa_Arab_PK:"Punjabi (Arabic, Pakistan)",pa_Arab:"Punjabi (Arabic)",pa_Guru_IN:"Punjabi (Gurmukhi, India)",pa_Guru:"Punjabi (Gurmukhi)",pa_IN:"Punjabi (India)",pa_PK:"Punjabi (Pakistan)",qu:"Quechua",qu_BO:"Quechua (Bolivia)",qu_EC:"Quechua (Ecuador)",qu_PE:"Quechua (Peru)",ro:"Romanian",ro_MD:"Romanian (Moldova)",ro_RO:"Romanian (Romania)",rm:"Romansh",rm_CH:"Romansh (Switzerland)",rn:"Rundi",rn_BI:"Rundi (Burundi)",ru:"Russian",ru_BY:"Russian (Belarus)",ru_KZ:"Russian (Kazakhstan)",ru_KG:"Russian (Kyrgyzstan)",ru_MD:"Russian (Moldova)",ru_RU:"Russian (Russia)",ru_UA:"Russian (Ukraine)",sg:"Sango",sg_CF:"Sango (Central African Republic)",gd:"Scottish Gaelic",gd_GB:"Scottish Gaelic (United Kingdom)",sr:"Serbian",sr_BA:"Serbian (Bosnia & Herzegovina)",sr_Cyrl_BA:"Serbian (Cyrillic, Bosnia & Herzegovina)",sr_Cyrl_XK:"Serbian (Cyrillic, Kosovo)",sr_Cyrl_ME:"Serbian (Cyrillic, Montenegro)",sr_Cyrl_RS:"Serbian (Cyrillic, Serbia)",sr_Cyrl:"Serbian (Cyrillic)",sr_XK:"Serbian (Kosovo)",sr_Latn_BA:"Serbian (Latin, Bosnia & Herzegovina)",sr_Latn_XK:"Serbian (Latin, Kosovo)",sr_Latn_ME:"Serbian (Latin, Montenegro)",sr_Latn_RS:"Serbian (Latin, Serbia)",sr_Latn:"Serbian (Latin)",sr_ME:"Serbian (Montenegro)",sr_RS:"Serbian (Serbia)",sh:"Serbo-Croatian",sh_BA:"Serbo-Croatian (Bosnia & Herzegovina)",sn:"Shona",sn_ZW:"Shona (Zimbabwe)",ii:"Sichuan Yi",ii_CN:"Sichuan Yi (China)",si:"Sinhala",si_LK:"Sinhala (Sri Lanka)",sk:"Slovak",sk_SK:"Slovak (Slovakia)",sl:"Slovenian",sl_SI:"Slovenian (Slovenia)",so:"Somali",so_DJ:"Somali (Djibouti)",so_ET:"Somali (Ethiopia)",so_KE:"Somali (Kenya)",so_SO:"Somali (Somalia)",es:"Spanish",es_AR:"Spanish (Argentina)",es_BO:"Spanish (Bolivia)",es_IC:"Spanish (Canary Islands)",es_EA:"Spanish (Ceuta & Melilla)",es_CL:"Spanish (Chile)",es_CO:"Spanish (Colombia)",es_CR:"Spanish (Costa Rica)",es_CU:"Spanish (Cuba)",es_DO:"Spanish (Dominican Republic)",es_EC:"Spanish (Ecuador)",es_SV:"Spanish (El Salvador)",es_GQ:"Spanish (Equatorial Guinea)",es_GT:"Spanish (Guatemala)",es_HN:"Spanish (Honduras)",es_MX:"Spanish (Mexico)",es_NI:"Spanish (Nicaragua)",es_PA:"Spanish (Panama)",es_PY:"Spanish (Paraguay)",es_PE:"Spanish (Peru)",es_PH:"Spanish (Philippines)",es_PR:"Spanish (Puerto Rico)",es_ES:"Spanish (Spain)",es_US:"Spanish (United States)",es_UY:"Spanish (Uruguay)",es_VE:"Spanish (Venezuela)",sw:"Swahili",sw_KE:"Swahili (Kenya)",sw_TZ:"Swahili (Tanzania)",sw_UG:"Swahili (Uganda)",sv:"Swedish",sv_AX:"Swedish (land Islands)",sv_FI:"Swedish (Finland)",sv_SE:"Swedish (Sweden)",tl:"Tagalog",tl_PH:"Tagalog (Philippines)",ta:"Tamil",ta_IN:"Tamil (India)",ta_MY:"Tamil (Malaysia)",ta_SG:"Tamil (Singapore)",ta_LK:"Tamil (Sri Lanka)",te:"Telugu",te_IN:"Telugu (India)",th:"Thai",th_TH:"Thai (Thailand)",bo:"Tibetan",bo_CN:"Tibetan (China)",bo_IN:"Tibetan (India)",ti:"Tigrinya",ti_ER:"Tigrinya (Eritrea)",ti_ET:"Tigrinya (Ethiopia)",to:"Tongan",to_TO:"Tongan (Tonga)",tr:"Turkish",tr_CY:"Turkish (Cyprus)",tr_TR:"Turkish (Turkey)",uk:"Ukrainian",uk_UA:"Ukrainian (Ukraine)",ur:"Urdu",ur_IN:"Urdu (India)",ur_PK:"Urdu (Pakistan)",ug:"Uyghur",ug_Arab_CN:"Uyghur (Arabic, China)",ug_Arab:"Uyghur (Arabic)",ug_CN:"Uyghur (China)",uz:"Uzbek",uz_AF:"Uzbek (Afghanistan)",uz_Arab_AF:"Uzbek (Arabic, Afghanistan)",uz_Arab:"Uzbek (Arabic)",uz_Cyrl_UZ:"Uzbek (Cyrillic, Uzbekistan)",uz_Cyrl:"Uzbek (Cyrillic)",uz_Latn_UZ:"Uzbek (Latin, Uzbekistan)",uz_Latn:"Uzbek (Latin)",uz_UZ:"Uzbek (Uzbekistan)",vi:"Vietnamese",vi_VN:"Vietnamese (Vietnam)",cy:"Welsh",cy_GB:"Welsh (United Kingdom)",fy:"Western Frisian",fy_NL:"Western Frisian (Netherlands)",yi:"Yiddish",yo:"Yoruba",yo_BJ:"Yoruba (Benin)",yo_NG:"Yoruba (Nigeria)",zu:"Zulu",zu_ZA:"Zulu (South Africa)"},QSe={class:"flex flex-col py-1"},JSe={class:"flex items-center justify-between py-2 mb-1"},eIe={class:"text-base text-n-slate-12"},tIe={class:"relative"},nIe={class:"absolute ltr:left-0 rtl:right-0 w-8 top-0.5 h-8 flex justify-center items-center"},sIe=["placeholder","value"],aIe={__name:"Header",props:{title:{type:String,default:"Chatwoot"}},emits:["search","close"],setup(e,{emit:t}){const n=t,s=F(null),a=F("");pt(()=>{s.value.focus()});const o=r=>{n("search",r.target.value)},l=()=>{n("close")};return Qs({Slash:{action:r=>{r.preventDefault(),s.value.focus()}},Escape:{action:()=>{l()},allowOnFocusedInput:!0}}),(r,d)=>{const u=z("fluent-icon");return p(),f("div",QSe,[c("div",JSe,[c("h3",eIe,E(e.title),1),v(ce,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:l})]),c("div",tIe,[c("div",nIe,[v(u,{icon:"search",class:"",size:"18"})]),c("input",{ref_key:"searchInputRef",ref:s,type:"text",placeholder:r.$t("HELP_CENTER.ARTICLE_SEARCH.PLACEHOLDER"),class:"block w-full !h-9 ltr:!pl-8 rtl:!pr-8 dark:!bg-n-slate-2 !border-n-weak !bg-n-slate-2 text-sm rounded-md leading-8 text-n-slate-12 shadow-sm ring-2 ring-transparent ring-n-weak border border-solid placeholder:text-n-slate-10 focus:border-n-brand focus:ring-n-brand !mb-0",value:a.value,onInput:o},null,40,sIe)])])}}},oIe={class:"w-full mb-0 -mx-1 text-sm rounded-sm ltr:text-left rtl:text-right text-n-slate-12 hover:underline group-hover:underline"},lIe={class:"flex content-between items-center gap-0.5 w-full"},iIe={class:"w-full mb-0 text-sm ltr:text-left rtl:text-right text-n-slate-11"},rIe={class:"flex gap-0.5"},cIe={__name:"ArticleSearchResultItem",props:{id:{type:Number,default:0},title:{type:String,default:"Untitled"},url:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""}},emits:["insert","preview"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=r=>{r.stopPropagation(),s("insert",n.id)},l=r=>{r.stopPropagation(),s("preview",n.id)},i=async r=>{r.stopPropagation(),await qo(n.url),_e(a("CONTACT_PANEL.COPY_SUCCESSFUL"))};return(r,d)=>(p(),f("button",{class:"flex flex-col w-full gap-1 px-2 py-1 border border-transparent border-solid rounded-md cursor-pointer hover:bg-n-slate-3 group focus:outline-none focus:bg-n-slate-3",onClick:l},[c("h4",oIe,E(e.title),1),c("div",lIe,[c("p",iIe,E(e.locale)+" "+E(" / ")+" "+E(e.category||r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.UNCATEGORIZED")),1),c("div",rIe,[v(ce,{title:r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.COPY_LINK"),faded:"",slate:"",xs:"",type:"reset",icon:"i-lucide-copy",class:"invisible group-hover:visible",onClick:i},null,8,["title"]),v(ce,{xs:"",faded:"",slate:"",label:r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.INSERT_ARTICLE"),onClick:o},null,8,["label"])])])]))}},dIe={name:"SearchResults",components:{SearchResultItem:cIe},props:{articles:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},searchQuery:{type:String,default:""}},emits:["preview","insert"],computed:{showNoResults(){return this.searchQuery&&this.articles.length===0}},methods:{handlePreview(e){this.$emit("preview",e)},handleInsert(e){this.$emit("insert",e)}}},uIe={class:"flex justify-end h-full gap-1 py-4 overflow-y-auto bg-n-background"},pIe={class:"flex flex-col w-full gap-1"},mIe={key:0,class:"text-center flex items-center justify-center px-4 py-8 text-n-slate-10 text-sm"},hIe={key:1,class:"text-center flex items-center justify-center px-4 py-8 text-n-slate-10 text-sm"};function fIe(e,t,n,s,a,o){const l=z("SearchResultItem");return p(),f("div",uIe,[c("div",pIe,[n.isLoading?(p(),f("div",mIe,E(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.SEARCH_LOADER")),1)):o.showNoResults?(p(),f("div",hIe,E(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.NO_RESULT")),1)):(p(!0),f(fe,{key:2},Ae(n.articles,i=>(p(),V(l,{id:i.id,key:i.id,title:i.title,body:i.content,url:i.url,category:i.category.name,locale:i.localeName,onPreview:o.handlePreview,onInsert:o.handleInsert},null,8,["id","title","body","url","category","locale","onPreview","onInsert"]))),128))])])}const gIe=Fe(dIe,[["render",fIe]]),_Ie={class:"h-full w-full flex flex-col flex-1 overflow-hidden"},vIe={class:"py-1"},bIe={class:"-ml-4 h-full overflow-y-auto"},EIe={class:"w-full h-full min-h-0"},TIe={class:"flex justify-end gap-2 py-2"},AIe={__name:"ArticleView",props:{url:{type:String,default:""}},emits:["back","insert"],setup(e,{emit:t}){const n=t,s=ke("accounts/isRTL"),a=l=>{l.stopPropagation(),n("back")},o=l=>{l.stopPropagation(),n("insert")};return(l,i)=>(p(),f("div",_Ie,[c("div",vIe,[v(ce,{link:"",xs:"",label:l.$t("HELP_CENTER.ARTICLE_SEARCH.BACK_RESULTS"),icon:"i-lucide-chevron-left",onClick:a},null,8,["label"])]),c("div",bIe,[c("div",EIe,[v(lO,{url:e.url,"is-rtl":I(s),"is-dir-applied":""},null,8,["url","is-rtl"])])]),c("div",TIe,[v(ce,{faded:"",slate:"",sm:"",type:"reset",icon:"i-lucide-chevron-left",label:l.$t("HELP_CENTER.ARTICLE_SEARCH.BACK"),onClick:a},null,8,["label"]),v(ce,{sm:"",type:"submit",icon:"i-lucide-arrow-down-to-dot",label:l.$t("HELP_CENTER.ARTICLE_SEARCH.INSERT_ARTICLE"),onClick:o},null,8,["label"])])]))}},yIe=e=>e.startsWith("https")?e:`https://${e}`,SIe=()=>{const{hostURL:e,helpCenterURL:t}=window.chatwootConfig||{},n=t||e||"";if(!n)throw new Error("No valid base URL found in configuration");return n},IIe=e=>e?yIe(e):SIe(),nI=(e,t)=>`${IIe(t)}/hc/${e}`,CIe=(e,t,n,s,a)=>`${nI(e,a)}/articles/${s}`,REt=e=>{switch(e){case"draft":return 0;case"published":return 1;case"archived":return 2;default:return}},Ii={DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived"},xIe={publish:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.PUBLISH",value:Ii.PUBLISHED,action:"publish",icon:"i-lucide-check"},draft:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DRAFT",value:Ii.DRAFT,action:"draft",icon:"i-lucide-pencil-line"},archive:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.ARCHIVE",value:Ii.ARCHIVED,action:"archive",icon:"i-lucide-archive-restore"},delete:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DELETE",value:"delete",action:"delete",icon:"i-lucide-trash"}},H0={[Ii.ARCHIVED]:["publish","draft"],[Ii.DRAFT]:["publish","archive"],[Ii.PUBLISHED]:["draft","archive"]},$Et={ALL:"all"},MEt="all",kEt=[{key:"ALL",value:"all"},{key:"MINE",value:"mine"},{key:"DRAFT",value:"draft"},{key:"ARCHIVED",value:"archived"}],LEt=[{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.MAKE_DEFAULT",action:"change-default",value:"default",icon:"i-lucide-star"},{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.DELETE",action:"delete",value:"delete",icon:"i-lucide-trash"}],DEt={published:["archive","draft"],archived:["draft"],draft:["archive"]},NIe={name:"ArticleSearchPopover",components:{SearchHeader:aIe,SearchResults:gIe,ArticleView:AIe},props:{selectedPortalSlug:{type:String,required:!0}},emits:["close","insert"],data(){return{searchQuery:"",isLoading:!1,searchResults:[],activeId:"",debounceSearch:()=>{}}},computed:{...St({portalBySlug:"portals/portalBySlug"}),portal(){return this.portalBySlug(this.selectedPortalSlug)},portalCustomDomain(){var e;return(e=this.portal)==null?void 0:e.custom_domain},articleViewerUrl(){const e=this.activeArticle(this.activeId);if(!e)return"";const t=document.body.classList.contains("dark"),n=new URL(e.url);return n.searchParams.set("show_plain_layout","true"),t&&n.searchParams.set("theme","dark"),`${n}`},searchResultsWithUrl(){return this.searchResults.map(e=>({...e,localeName:this.localeName(e.category.locale||"en"),url:this.generateArticleUrl(e)}))}},mounted(){this.fetchArticlesByQuery(this.searchQuery),this.debounceSearch=ml(this.fetchArticlesByQuery,500,!1)},methods:{generateArticleUrl(e){return CIe(this.selectedPortalSlug,"","",e.slug,this.portalCustomDomain)},localeName(e){return ZSe[e]},activeArticle(e){return this.searchResultsWithUrl.find(t=>t.id===e)},onSearch(e){this.searchQuery=e,this.activeId="",this.debounceSearch(e)},onClose(){this.$emit("close"),this.searchQuery="",this.activeId="",this.searchResults=[]},async fetchArticlesByQuery(e){try{const t=e?"":"views";this.isLoading=!0,this.searchResults=[];const{data:n}=await FN.searchArticles({portalSlug:this.selectedPortalSlug,query:e,sort:t});this.searchResults=n.payload,this.isLoading=!0}catch{}finally{this.isLoading=!1}},handlePreview(e){this.activeId=e},onBack(){this.activeId=""},onInsert(e){const t=this.activeArticle(e||this.activeId);this.$emit("insert",t),_e(this.$t("HELP_CENTER.ARTICLE_SEARCH.SUCCESS_ARTICLE_INSERTED")),this.onClose()}}},OIe={class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},wIe={class:"flex flex-col px-4 pb-4 rounded-md shadow-md border border-solid border-n-weak bg-n-background z-[1000] max-w-[720px] md:w-[20rem] lg:w-[24rem] xl:w-[28rem] 2xl:w-[32rem] h-[calc(100vh-20rem)] max-h-[40rem]"};function RIe(e,t,n,s,a,o){const l=z("SearchHeader"),i=z("ArticleView"),r=z("SearchResults"),d=_t("on-clickaway");return p(),f("div",OIe,[pe((p(),f("div",wIe,[v(l,{title:e.$t("HELP_CENTER.ARTICLE_SEARCH.TITLE"),class:"w-full sticky top-0 bg-[inherit]",onClose:o.onClose,onSearch:o.onSearch},null,8,["title","onClose","onSearch"]),a.activeId?(p(),V(i,{key:0,url:o.articleViewerUrl,onBack:o.onBack,onInsert:o.onInsert},null,8,["url","onBack","onInsert"])):(p(),V(r,{key:1,"search-query":a.searchQuery,"is-loading":a.isLoading,"portal-slug":n.selectedPortalSlug,articles:o.searchResultsWithUrl,onPreview:o.handlePreview,onInsert:o.onInsert},null,8,["search-query","is-loading","portal-slug","articles","onPreview","onInsert"]))])),[[d,o.onClose]])])}const $Ie=Fe(NIe,[["render",RIe]]),MIe={class:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-n-slate-1 border border-dashed border-n-weak rounded-sm overflow-auto"},kIe={class:"w-fit !m-0"},LIe={__name:"MessageSignatureMissingAlert",setup(e){const t=En(),n=()=>t.push({name:"profile_settings_index"});return(s,a)=>(p(),f("div",MIe,[c("p",kIe,[Ee(E(s.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+" ",1),v(ce,{link:"",label:s.$t("CONVERSATION.FOOTER.CLICK_HERE"),onClick:n},null,8,["label"])])]))}};function ia(e,t,n,s){return new(n||(n=Promise))(function(a,o){function l(d){try{r(s.next(d))}catch(u){o(u)}}function i(d){try{r(s.throw(d))}catch(u){o(u)}}function r(d){var u;d.done?a(d.value):(u=d.value,u instanceof n?u:new n(function(m){m(u)})).then(l,i)}r((s=s.apply(e,t||[])).next())})}let pd=class{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const a=()=>{this.un(t,a),this.un(t,n)};return this.on(t,a),a}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}};const W0={decode:function(e,t){return ia(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const s=n[0];if(s.some(a=>a>1||a<-1)){const a=s.length;let o=0;for(let l=0;l<a;l++){const i=Math.abs(s[l]);i>o&&(o=i)}for(const l of n)for(let i=0;i<a;i++)l[i]/=o}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function sI(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[s,a]of Object.entries(t))if(s==="children")for(const[o,l]of Object.entries(t))typeof l=="string"?n.appendChild(document.createTextNode(l)):n.appendChild(sI(o,l));else s==="style"?Object.assign(n.style,a):s==="textContent"?n.textContent=a:n.setAttribute(s,a.toString());return n}function K0(e,t,n){const s=sI(e,t||{});return n==null||n.appendChild(s),s}var DIe=Object.freeze({__proto__:null,createElement:K0,default:K0});const PIe={fetchBlob:function(e,t,n){return ia(this,void 0,void 0,function*(){const s=yield fetch(e,n);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return function(a,o){ia(this,void 0,void 0,function*(){if(!a.body||!a.headers)return;const l=a.body.getReader(),i=Number(a.headers.get("Content-Length"))||0;let r=0;const d=m=>ia(this,void 0,void 0,function*(){r+=(m==null?void 0:m.length)||0;const h=Math.round(r/i*100);o(h)}),u=()=>ia(this,void 0,void 0,function*(){let m;try{m=yield l.read()}catch{return}m.done||(d(m.value),yield u())});u()})}(s.clone(),t),s.blob()})}};class BIe extends pd{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,s){return this.media.addEventListener(t,n,s),()=>this.media.removeEventListener(t,n,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const s=this.getSrc();if(t&&s===t)return;this.revokeSrc();const a=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=a}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return ia(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class Ar extends pd{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const s=this.parentFromOptionsContainer(t.container);this.parent=s;const[a,o]=this.initHtml();s.appendChild(a),this.container=a,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),n&&o.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const s=this.wrapper.getBoundingClientRect(),a=n.clientX-s.left,o=n.clientY-s.top;return[a/s.width,o/s.height]};if(this.wrapper.addEventListener("click",n=>{const[s,a]=t(n);this.emit("click",s,a)}),this.wrapper.addEventListener("dblclick",n=>{const[s,a]=t(n);this.emit("dblclick",s,a)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:s,clientWidth:a}=this.scrollContainer,o=n/s,l=(n+a)/s;this.emit("scroll",o,l,n,n+a)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,s,a,o=3,l=0,i=100){if(!t)return()=>{};const r=matchMedia("(pointer: coarse)").matches;let d=()=>{};const u=m=>{if(m.button!==l)return;m.preventDefault(),m.stopPropagation();let h=m.clientX,_=m.clientY,g=!1;const T=Date.now(),S=$=>{if($.preventDefault(),$.stopPropagation(),r&&Date.now()-T<i)return;const N=$.clientX,w=$.clientY,D=N-h,H=w-_;if(g||Math.abs(D)>o||Math.abs(H)>o){const B=t.getBoundingClientRect(),{left:k,top:U}=B;g||(s==null||s(h-k,_-U),g=!0),n(D,H,N-k,w-U),h=N,_=w}},b=$=>{if(g){const N=$.clientX,w=$.clientY,D=t.getBoundingClientRect(),{left:H,top:B}=D;a==null||a(N-H,w-B)}d()},A=$=>{$.relatedTarget&&$.relatedTarget!==document.documentElement||b($)},y=$=>{g&&($.stopPropagation(),$.preventDefault())},x=$=>{g&&$.preventDefault()};document.addEventListener("pointermove",S),document.addEventListener("pointerup",b),document.addEventListener("pointerout",A),document.addEventListener("pointercancel",A),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",y,{capture:!0}),d=()=>{document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",A),document.removeEventListener("pointercancel",A),document.removeEventListener("touchmove",x),setTimeout(()=>{document.removeEventListener("click",y,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{d(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,s)=>{this.emit("drag",Math.max(0,Math.min(1,s/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var s;const a=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const o=this.parent.clientHeight||128;return n!=null&&n.every(l=>!l.overlay)?o/a:o}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,s=n*t;this.setScroll(s)}destroy(){var t,n;this.subscriptions.forEach(s=>s()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,s;const a=()=>{n&&clearTimeout(n),s&&s()};return this.timeouts.push(a),()=>new Promise((o,l)=>{a(),s=l,n=setTimeout(()=>{n=void 0,s=void 0,o()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),s=n.getContext("2d"),a=n.height*(window.devicePixelRatio||1),o=s.createLinearGradient(0,0,0,a),l=1/(t.length-1);return t.forEach((i,r)=>{const d=r*l;o.addColorStop(d,i)}),o}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,s,a){const o=t[0],l=t[1]||t[0],i=o.length,{width:r,height:d}=s.canvas,u=d/2,m=this.getPixelRatio(),h=n.barWidth?n.barWidth*m:1,_=n.barGap?n.barGap*m:n.barWidth?h/2:0,g=n.barRadius||0,T=r/(h+_)/i,S=g&&"roundRect"in s?"roundRect":"rect";s.beginPath();let b=0,A=0,y=0;for(let x=0;x<=i;x++){const $=Math.round(x*T);if($>b){const D=Math.round(A*u*a),H=D+Math.round(y*u*a)||1;let B=u-D;n.barAlign==="top"?B=0:n.barAlign==="bottom"&&(B=d-H),s[S](b*(h+_),B,h,H,g),b=$,A=0,y=0}const N=Math.abs(o[x]||0),w=Math.abs(l[x]||0);N>A&&(A=N),w>y&&(y=w)}s.fill(),s.closePath()}renderLineWaveform(t,n,s,a){const o=l=>{const i=t[l]||t[0],r=i.length,{height:d}=s.canvas,u=d/2,m=s.canvas.width/r;s.moveTo(0,u);let h=0,_=0;for(let g=0;g<=r;g++){const T=Math.round(g*m);if(T>h){const b=u+(Math.round(_*u*a)||1)*(l===0?-1:1);s.lineTo(h,b),h=T,_=0}const S=Math.abs(i[g]||0);S>_&&(_=S)}s.lineTo(h,u)};s.beginPath(),o(0),o(1),s.fill(),s.closePath()}renderWaveform(t,n,s){if(s.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,s);let a=n.barHeight||1;if(n.normalize){const o=Array.from(t[0]).reduce((l,i)=>Math.max(l,Math.abs(i)),0);a=o?1/o:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,s,a):this.renderLineWaveform(t,n,s,a)}renderSingleCanvas(t,n,s,a,o,l,i){const r=this.getPixelRatio(),d=document.createElement("canvas");d.width=Math.round(s*r),d.height=Math.round(a*r),d.style.width=`${s}px`,d.style.height=`${a}px`,d.style.left=`${Math.round(o)}px`,l.appendChild(d);const u=d.getContext("2d");if(this.renderWaveform(t,n,u),d.width>0&&d.height>0){const m=d.cloneNode(),h=m.getContext("2d");h.drawImage(d,0,0),h.globalCompositeOperation="source-in",h.fillStyle=this.convertColorValues(n.progressColor),h.fillRect(0,0,d.width,d.height),i.appendChild(m)}}renderMultiCanvas(t,n,s,a,o,l){const i=this.getPixelRatio(),{clientWidth:r}=this.scrollContainer,d=s/i;let u=Math.min(Ar.MAX_CANVAS_WIDTH,r,d),m={};if(n.barWidth||n.barGap){const S=n.barWidth||.5,b=S+(n.barGap||S/2);u%b!=0&&(u=Math.floor(u/b)*b)}const h=S=>{if(S<0||S>=_||m[S])return;m[S]=!0;const b=S*u,A=Math.min(d-b,u);if(A<=0)return;const y=t.map(x=>{const $=Math.floor(b/d*x.length),N=Math.floor((b+A)/d*x.length);return x.slice($,N)});this.renderSingleCanvas(y,n,A,a,b,o,l)},_=Math.ceil(d/u);if(!this.isScrollable){for(let S=0;S<_;S++)h(S);return}const g=this.scrollContainer.scrollLeft/d,T=Math.floor(g*_);h(T-1),h(T),h(T+1),_>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:S}=this.scrollContainer,b=Math.floor(S/d*_);Object.keys(m).length>Ar.MAX_NODES&&(o.innerHTML="",l.innerHTML="",m={}),h(b-1),h(b),h(b+1)}))}renderChannel(t,n,s,a){var{overlay:o}=n,l=function(u,m){var h={};for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&m.indexOf(_)<0&&(h[_]=u[_]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(_=Object.getOwnPropertySymbols(u);g<_.length;g++)m.indexOf(_[g])<0&&Object.prototype.propertyIsEnumerable.call(u,_[g])&&(h[_[g]]=u[_[g]])}return h}(n,["overlay"]);const i=document.createElement("div"),r=this.getHeight(l.height,l.splitChannels);i.style.height=`${r}px`,o&&a>0&&(i.style.marginTop=`-${r}px`),this.canvasWrapper.style.minHeight=`${r}px`,this.canvasWrapper.appendChild(i);const d=i.cloneNode();this.progressWrapper.appendChild(d),this.renderMultiCanvas(t,l,s,r,i,d)}render(t){return ia(this,void 0,void 0,function*(){var n;this.timeouts.forEach(r=>r()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),a=this.scrollContainer.clientWidth,o=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=o>a;const l=this.options.fillParent&&!this.isScrollable,i=(l?a:o)*s;if(this.wrapper.style.width=l?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let r=0;r<t.numberOfChannels;r++){const d=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[r]);this.renderChannel([t.getChannelData(r)],d,i,r)}else{const r=[t.getChannelData(0)];t.numberOfChannels>1&&r.push(t.getChannelData(1)),this.renderChannel(r,this.options,i,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:s}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:a}=this.progressWrapper.getBoundingClientRect();let o=a-s;o*=2,o=o<0?Math.floor(o):Math.ceil(o),o/=2,this.scrollContainer.scrollLeft+=o}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:s,scrollWidth:a,clientWidth:o}=this.scrollContainer,l=t*a,i=s,r=s+o,d=o/2;if(this.isDragging)l+30>r?this.scrollContainer.scrollLeft+=30:l-30<i&&(this.scrollContainer.scrollLeft-=30);else{(l<i||l>r)&&(this.scrollContainer.scrollLeft=l-(this.options.autoCenter?d:0));const u=l-s-d;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,m=u/a,h=(u+o)/a;this.emit("scroll",m,h,u,u+o)}}renderProgress(t,n){if(isNaN(t))return;const s=100*t;this.canvasWrapper.style.clipPath=`polygon(${s}% 0, 100% 0, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=`translateX(-${Math.round(s)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,s){return ia(this,void 0,void 0,function*(){const a=this.canvasWrapper.querySelectorAll("canvas");if(!a.length)throw new Error("No waveform data");if(s==="dataURL"){const o=Array.from(a).map(l=>l.toDataURL(t,n));return Promise.resolve(o)}return Promise.all(Array.from(a).map(o=>new Promise((l,i)=>{o.toBlob(r=>{r?l(r):i(new Error("Could not export image"))},t,n)})))})}}Ar.MAX_CANVAS_WIDTH=8e3,Ar.MAX_NODES=10;class FIe extends pd{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class z0 extends pd{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ia(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ia(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,s;const a=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+a),(s=this.bufferNode)===null||s===void 0||s.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return ia(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let s=0;s<n;s++)t.push(this.buffer.getChannelData(s));return t}}const UIe={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class zc extends BIe{static create(t){return new zc(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new z0:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},UIe,t),this.timer=new FIe;const s=n?void 0:this.getMediaElement();this.renderer=new Ar(this.options,s),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const a=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:o,duration:l}=this.options;(a||o&&l)&&this.load(a,o,l).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,s,a)=>{const o=this.getDuration();this.emit("scroll",t*o,n*o,s,a)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let s;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?s=0:this.options.dragToSeek===!0?s=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(s=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},s),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,s,a){return ia(this,void 0,void 0,function*(){var o;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!s){const i=this.options.fetchParams||{};window.AbortController&&!i.signal&&(this.abortController=new AbortController,i.signal=(o=this.abortController)===null||o===void 0?void 0:o.signal);const r=d=>this.emit("loading",d);n=yield PIe.fetchBlob(t,r,i)}this.setSrc(t,n);const l=yield new Promise(i=>{const r=a||this.getDuration();r?i(r):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>i(this.getDuration()),{once:!0}))});if(!t&&!n){const i=this.getMediaElement();i instanceof z0&&(i.duration=l)}if(s)this.decodedData=W0.createBuffer(s,l||0);else if(n){const i=yield n.arrayBuffer();this.decodedData=yield W0.decode(i,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,s){return ia(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,s)}catch(a){throw this.emit("error",a),a}})}loadBlob(t,n,s){return ia(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,s)}catch(a){throw this.emit("error",a),a}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const a=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let l=0;l<a;l++){const i=this.decodedData.getChannelData(l),r=[],d=i.length/n;for(let u=0;u<n;u++){const m=i.slice(Math.floor(u*d),Math.ceil((u+1)*d));let h=0;for(let _=0;_<m.length;_++){const g=m[_];Math.abs(g)>Math.abs(h)&&(h=g)}r.push(Math.round(h*s)/s)}o.push(r)}return o}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return ia(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return ia(this,arguments,void 0,function*(t="image/png",n=1,s="dataURL"){return this.renderer.exportImage(t,n,s)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}zc.BasePlugin=class extends pd{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},zc.dom=DIe;function Uh(e,t,n,s){return new(n||(n=Promise))(function(a,o){function l(d){try{r(s.next(d))}catch(u){o(u)}}function i(d){try{r(s.throw(d))}catch(u){o(u)}}function r(d){var u;d.done?a(d.value):(u=d.value,u instanceof n?u:new n(function(m){m(u)})).then(l,i)}r((s=s.apply(e,[])).next())})}class aI{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const a=()=>{this.un(t,a),this.un(t,n)};return this.on(t,a),a}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}}class GIe extends aI{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class VIe extends aI{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const HIe=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class B_ extends GIe{constructor(t){var n,s,a,o,l,i;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(s=t.scrollingWaveform)!==null&&s!==void 0&&s,scrollingWaveformWindow:(a=t.scrollingWaveformWindow)!==null&&a!==void 0?a:5,continuousWaveform:(o=t.continuousWaveform)!==null&&o!==void 0&&o,renderRecordedAudio:(l=t.renderRecordedAudio)===null||l===void 0||l,mediaRecorderTimeslice:(i=t.mediaRecorderTimeslice)!==null&&i!==void 0?i:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new VIe,this.subscriptions.push(this.timer.on("tick",()=>{const r=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+r,this.emit("record-progress",this.duration)}))}static create(t){return new B_(t||{})}renderMicStream(t){var n;const s=new AudioContext,a=s.createMediaStreamSource(t),o=s.createAnalyser();a.connect(o),this.options.continuousWaveform&&(o.fftSize=32);const l=o.frequencyBinCount,i=new Float32Array(l);let r=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const d=setInterval(()=>{var u,m,h,_;if(!this.isWaveformPaused){if(o.getFloatTimeDomainData(i),this.options.scrollingWaveform){const g=Math.floor((this.options.scrollingWaveformWindow||0)*s.sampleRate),T=Math.min(g,this.dataWindow?this.dataWindow.length+l:l),S=new Float32Array(g);if(this.dataWindow){const b=Math.max(0,g-this.dataWindow.length);S.set(this.dataWindow.slice(-T+l),b)}S.set(i,g-l),this.dataWindow=S}else if(this.options.continuousWaveform){if(!this.dataWindow){const T=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((m=(u=this.wavesurfer)===null||u===void 0?void 0:u.getWidth())!==null&&m!==void 0?m:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(T)}let g=0;for(let T=0;T<l;T++){const S=Math.abs(i[T]);S>g&&(g=S)}if(r+1>this.dataWindow.length){const T=new Float32Array(2*this.dataWindow.length);T.set(this.dataWindow,0),this.dataWindow=T}this.dataWindow[r]=g,r++}else this.dataWindow=i;if(this.wavesurfer){const g=((_=(h=this.dataWindow)===null||h===void 0?void 0:h.length)!==null&&_!==void 0?_:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:g).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(T=>{console.error("Error rendering real-time recording data:",T)})}}},10);return{onDestroy:()=>{clearInterval(d),a==null||a.disconnect(),s==null||s.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(d),this.stopMic()}}}startMic(t){return Uh(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const{onDestroy:s,onEnd:a}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",s)),this.subscriptions.push(this.once("record-end",a)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Uh(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const s=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||HIe.find(l=>MediaRecorder.isTypeSupported(l)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=s,this.stopRecording();const a=[];s.ondataavailable=l=>{l.data.size>0&&a.push(l.data),this.emit("record-data-available",l.data)};const o=l=>{var i;const r=new Blob(a,{type:s.mimeType});this.emit(l,r),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(i=this.wavesurfer)===null||i===void 0||i.load(URL.createObjectURL(r)))};s.onpause=()=>o("record-pause"),s.onstop=()=>o("record-end"),s.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Uh(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}var F_={};function WIe(e){return new Int8Array(e)}function KIe(e){return new Int16Array(e)}function oI(e){return new Int32Array(e)}function lI(e){return new Float32Array(e)}function zIe(e){return new Float64Array(e)}function iI(e){if(e.length==1)return lI(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(iI(e));return n}function rI(e){if(e.length==1)return oI(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(rI(e));return n}function cI(e){if(e.length==1)return KIe(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(cI(e));return n}function dI(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(dI(e));return n}var uI={};uI.fill=function(e,t,n,s){if(arguments.length==2)for(var a=0;a<e.length;a++)e[a]=arguments[1];else for(var a=t;a<n;a++)e[a]=s};var md={};md.arraycopy=function(e,t,n,s,a){for(var o=t+a;t<o;)n[s++]=e[t++]};md.out={};md.out.println=function(e){console.log(e)};md.out.printf=function(){console.log.apply(console,arguments)};var Fp={};Fp.SQRT2=1.4142135623730951;Fp.FAST_LOG10=function(e){return Math.log10(e)};Fp.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function gl(e){this.ordinal=e}gl.short_block_allowed=new gl(0);gl.short_block_coupled=new gl(1);gl.short_block_dispensed=new gl(2);gl.short_block_forced=new gl(3);var pI={};pI.MAX_VALUE=34028235e31;function Ga(e){this.ordinal=e}Ga.vbr_off=new Ga(0);Ga.vbr_mt=new Ga(1);Ga.vbr_rh=new Ga(2);Ga.vbr_abr=new Ga(3);Ga.vbr_mtrh=new Ga(4);Ga.vbr_default=Ga.vbr_mtrh;var jIe=function(e){},ms={System:md,VbrMode:Ga,Float:pI,ShortBlock:gl,Util:Fp,Arrays:uI,new_array_n:dI,new_byte:WIe,new_double:zIe,new_float:lI,new_float_n:iI,new_int:oI,new_int_n:rI,new_short_n:cI,assert:jIe},Gh,j0;function YIe(){if(j0)return Gh;j0=1;var e=ms,t=e.System,n=e.Util,s=e.Arrays,a=e.new_float,o=pa();function l(){var i=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*n.SQRT2*.5/2384e-9,.017876148*n.SQRT2*.5/2384e-9,.003134727*n.SQRT2*.5/2384e-9,.002457142*n.SQRT2*.5/2384e-9,971317e-9*n.SQRT2*.5/2384e-9,218868e-9*n.SQRT2*.5/2384e-9,101566e-9*n.SQRT2*.5/2384e-9,13828e-9*n.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],r=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],d=r[o.SHORT_TYPE],u=r[o.SHORT_TYPE],m=r[o.SHORT_TYPE],h=r[o.SHORT_TYPE],_=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function g(b,A,y){for(var x=10,$=A+238-14-286,N=-15;N<0;N++){var w,D,H;w=i[x+-10],D=b[$+-224]*w,H=b[A+224]*w,w=i[x+-9],D+=b[$+-160]*w,H+=b[A+160]*w,w=i[x+-8],D+=b[$+-96]*w,H+=b[A+96]*w,w=i[x+-7],D+=b[$+-32]*w,H+=b[A+32]*w,w=i[x+-6],D+=b[$+32]*w,H+=b[A+-32]*w,w=i[x+-5],D+=b[$+96]*w,H+=b[A+-96]*w,w=i[x+-4],D+=b[$+160]*w,H+=b[A+-160]*w,w=i[x+-3],D+=b[$+224]*w,H+=b[A+-224]*w,w=i[x+-2],D+=b[A+-256]*w,H-=b[$+256]*w,w=i[x+-1],D+=b[A+-192]*w,H-=b[$+192]*w,w=i[x+0],D+=b[A+-128]*w,H-=b[$+128]*w,w=i[x+1],D+=b[A+-64]*w,H-=b[$+64]*w,w=i[x+2],D+=b[A+0]*w,H-=b[$+0]*w,w=i[x+3],D+=b[A+64]*w,H-=b[$+-64]*w,w=i[x+4],D+=b[A+128]*w,H-=b[$+-128]*w,w=i[x+5],D+=b[A+192]*w,H-=b[$+-192]*w,D*=i[x+6],w=H-D,y[30+N*2]=H+D,y[31+N*2]=i[x+7]*w,x+=18,A--,$++}{var D,H,B,k;H=b[A+-16]*i[x+-10],D=b[A+-32]*i[x+-2],H+=(b[A+-48]-b[A+16])*i[x+-9],D+=b[A+-96]*i[x+-1],H+=(b[A+-80]+b[A+48])*i[x+-8],D+=b[A+-160]*i[x+0],H+=(b[A+-112]-b[A+80])*i[x+-7],D+=b[A+-224]*i[x+1],H+=(b[A+-144]+b[A+112])*i[x+-6],D-=b[A+32]*i[x+2],H+=(b[A+-176]-b[A+144])*i[x+-5],D-=b[A+96]*i[x+3],H+=(b[A+-208]+b[A+176])*i[x+-4],D-=b[A+160]*i[x+4],H+=(b[A+-240]-b[A+208])*i[x+-3],D-=b[A+224],B=D-H,k=D+H,H=y[14],D=y[15]-H,y[31]=k+H,y[30]=B+D,y[15]=B-D,y[14]=k-H}{var U;U=y[28]-y[0],y[0]+=y[28],y[28]=U*i[x+-2*18+7],U=y[29]-y[1],y[1]+=y[29],y[29]=U*i[x+-2*18+7],U=y[26]-y[2],y[2]+=y[26],y[26]=U*i[x+-4*18+7],U=y[27]-y[3],y[3]+=y[27],y[27]=U*i[x+-4*18+7],U=y[24]-y[4],y[4]+=y[24],y[24]=U*i[x+-6*18+7],U=y[25]-y[5],y[5]+=y[25],y[25]=U*i[x+-6*18+7],U=y[22]-y[6],y[6]+=y[22],y[22]=U*n.SQRT2,U=y[23]-y[7],y[7]+=y[23],y[23]=U*n.SQRT2-y[7],y[7]-=y[6],y[22]-=y[7],y[23]-=y[22],U=y[6],y[6]=y[31]-U,y[31]=y[31]+U,U=y[7],y[7]=y[30]-U,y[30]=y[30]+U,U=y[22],y[22]=y[15]-U,y[15]=y[15]+U,U=y[23],y[23]=y[14]-U,y[14]=y[14]+U,U=y[20]-y[8],y[8]+=y[20],y[20]=U*i[x+-10*18+7],U=y[21]-y[9],y[9]+=y[21],y[21]=U*i[x+-10*18+7],U=y[18]-y[10],y[10]+=y[18],y[18]=U*i[x+-12*18+7],U=y[19]-y[11],y[11]+=y[19],y[19]=U*i[x+-12*18+7],U=y[16]-y[12],y[12]+=y[16],y[16]=U*i[x+-14*18+7],U=y[17]-y[13],y[13]+=y[17],y[17]=U*i[x+-14*18+7],U=-y[20]+y[24],y[20]+=y[24],y[24]=U*i[x+-12*18+7],U=-y[21]+y[25],y[21]+=y[25],y[25]=U*i[x+-12*18+7],U=y[4]-y[8],y[4]+=y[8],y[8]=U*i[x+-12*18+7],U=y[5]-y[9],y[5]+=y[9],y[9]=U*i[x+-12*18+7],U=y[0]-y[12],y[0]+=y[12],y[12]=U*i[x+-4*18+7],U=y[1]-y[13],y[1]+=y[13],y[13]=U*i[x+-4*18+7],U=y[16]-y[28],y[16]+=y[28],y[28]=U*i[x+-4*18+7],U=-y[17]+y[29],y[17]+=y[29],y[29]=U*i[x+-4*18+7],U=n.SQRT2*(y[2]-y[10]),y[2]+=y[10],y[10]=U,U=n.SQRT2*(y[3]-y[11]),y[3]+=y[11],y[11]=U,U=n.SQRT2*(-y[18]+y[26]),y[18]+=y[26],y[26]=U-y[18],U=n.SQRT2*(-y[19]+y[27]),y[19]+=y[27],y[27]=U-y[19],U=y[2],y[19]-=y[3],y[3]-=U,y[2]=y[31]-U,y[31]+=U,U=y[3],y[11]-=y[19],y[18]-=U,y[3]=y[30]-U,y[30]+=U,U=y[18],y[27]-=y[11],y[19]-=U,y[18]=y[15]-U,y[15]+=U,U=y[19],y[10]-=U,y[19]=y[14]-U,y[14]+=U,U=y[10],y[11]-=U,y[10]=y[23]-U,y[23]+=U,U=y[11],y[26]-=U,y[11]=y[22]-U,y[22]+=U,U=y[26],y[27]-=U,y[26]=y[7]-U,y[7]+=U,U=y[27],y[27]=y[6]-U,y[6]+=U,U=n.SQRT2*(y[0]-y[4]),y[0]+=y[4],y[4]=U,U=n.SQRT2*(y[1]-y[5]),y[1]+=y[5],y[5]=U,U=n.SQRT2*(y[16]-y[20]),y[16]+=y[20],y[20]=U,U=n.SQRT2*(y[17]-y[21]),y[17]+=y[21],y[21]=U,U=-n.SQRT2*(y[8]-y[12]),y[8]+=y[12],y[12]=U-y[8],U=-n.SQRT2*(y[9]-y[13]),y[9]+=y[13],y[13]=U-y[9],U=-n.SQRT2*(y[25]-y[29]),y[25]+=y[29],y[29]=U-y[25],U=-n.SQRT2*(y[24]+y[28]),y[24]-=y[28],y[28]=U-y[24],U=y[24]-y[16],y[24]=U,U=y[20]-U,y[20]=U,U=y[28]-U,y[28]=U,U=y[25]-y[17],y[25]=U,U=y[21]-U,y[21]=U,U=y[29]-U,y[29]=U,U=y[17]-y[1],y[17]=U,U=y[9]-U,y[9]=U,U=y[25]-U,y[25]=U,U=y[5]-U,y[5]=U,U=y[21]-U,y[21]=U,U=y[13]-U,y[13]=U,U=y[29]-U,y[29]=U,U=y[1]-y[0],y[1]=U,U=y[16]-U,y[16]=U,U=y[17]-U,y[17]=U,U=y[8]-U,y[8]=U,U=y[9]-U,y[9]=U,U=y[24]-U,y[24]=U,U=y[25]-U,y[25]=U,U=y[4]-U,y[4]=U,U=y[5]-U,y[5]=U,U=y[20]-U,y[20]=U,U=y[21]-U,y[21]=U,U=y[12]-U,y[12]=U,U=y[13]-U,y[13]=U,U=y[28]-U,y[28]=U,U=y[29]-U,y[29]=U,U=y[0],y[0]+=y[31],y[31]-=U,U=y[1],y[1]+=y[30],y[30]-=U,U=y[16],y[16]+=y[15],y[15]-=U,U=y[17],y[17]+=y[14],y[14]-=U,U=y[8],y[8]+=y[23],y[23]-=U,U=y[9],y[9]+=y[22],y[22]-=U,U=y[24],y[24]+=y[7],y[7]-=U,U=y[25],y[25]+=y[6],y[6]-=U,U=y[4],y[4]+=y[27],y[27]-=U,U=y[5],y[5]+=y[26],y[26]-=U,U=y[20],y[20]+=y[11],y[11]-=U,U=y[21],y[21]+=y[10],y[10]-=U,U=y[12],y[12]+=y[19],y[19]-=U,U=y[13],y[13]+=y[18],y[18]-=U,U=y[28],y[28]+=y[3],y[3]-=U,U=y[29],y[29]+=y[2],y[2]-=U}}function T(b,A){for(var y=0;y<3;y++){var x,$,N,w,D,H;w=b[A+2*3]*r[o.SHORT_TYPE][0]-b[A+5*3],x=b[A+0*3]*r[o.SHORT_TYPE][2]-b[A+3*3],$=w+x,N=w-x,w=b[A+5*3]*r[o.SHORT_TYPE][0]+b[A+2*3],x=b[A+3*3]*r[o.SHORT_TYPE][2]+b[A+0*3],D=w+x,H=-w+x,x=(b[A+1*3]*r[o.SHORT_TYPE][1]-b[A+4*3])*2069978111953089e-26,w=(b[A+4*3]*r[o.SHORT_TYPE][1]+b[A+1*3])*2069978111953089e-26,b[A+3*0]=$*190752519173728e-25+x,b[A+3*5]=-D*190752519173728e-25+w,N=N*.8660254037844387*1907525191737281e-26,D=D*.5*1907525191737281e-26+w,b[A+3*1]=N-D,b[A+3*2]=N+D,$=$*.5*1907525191737281e-26-x,H=H*.8660254037844387*1907525191737281e-26,b[A+3*3]=$+H,b[A+3*4]=$-H,A++}}function S(b,A,y){var x,$;{var N,w,D,H,B,k,U,G;N=y[17]-y[9],D=y[15]-y[11],H=y[14]-y[12],B=y[0]+y[8],k=y[1]+y[7],U=y[2]+y[6],G=y[3]+y[5],b[A+17]=B+U-G-(k-y[4]),$=(B+U-G)*u[19]+(k-y[4]),x=(N-D-H)*u[18],b[A+5]=x+$,b[A+6]=x-$,w=(y[16]-y[10])*u[18],k=k*u[19]+y[4],x=N*u[12]+w+D*u[13]+H*u[14],$=-B*u[16]+k-U*u[17]+G*u[15],b[A+1]=x+$,b[A+2]=x-$,x=N*u[13]-w-D*u[14]+H*u[12],$=-B*u[17]+k-U*u[15]+G*u[16],b[A+9]=x+$,b[A+10]=x-$,x=N*u[14]-w+D*u[12]-H*u[13],$=B*u[15]-k+U*u[16]-G*u[17],b[A+13]=x+$,b[A+14]=x-$}{var L,M,R,P,W,Q,Z,j;L=y[8]-y[0],R=y[6]-y[2],P=y[5]-y[3],W=y[17]+y[9],Q=y[16]+y[10],Z=y[15]+y[11],j=y[14]+y[12],b[A+0]=W+Z+j+(Q+y[13]),x=(W+Z+j)*u[19]-(Q+y[13]),$=(L-R+P)*u[18],b[A+11]=x+$,b[A+12]=x-$,M=(y[7]-y[1])*u[18],Q=y[13]-Q*u[19],x=W*u[15]-Q+Z*u[16]+j*u[17],$=L*u[14]+M+R*u[12]+P*u[13],b[A+3]=x+$,b[A+4]=x-$,x=-W*u[17]+Q-Z*u[15]-j*u[16],$=L*u[13]+M-R*u[14]-P*u[12],b[A+7]=x+$,b[A+8]=x-$,x=-W*u[16]+Q-Z*u[17]-j*u[15],$=L*u[12]-M+R*u[13]-P*u[14],b[A+15]=x+$,b[A+16]=x-$}}this.mdct_sub48=function(b,A,y){for(var x=A,$=286,N=0;N<b.channels_out;N++){for(var w=0;w<b.mode_gr;w++){for(var D,H=b.l3_side.tt[w][N],B=H.xr,k=0,U=b.sb_sample[N][1-w],G=0,L=0;L<18/2;L++)for(g(x,$,U[G]),g(x,$+32,U[G+1]),G+=2,$+=64,D=1;D<32;D+=2)U[G-1][D]*=-1;for(D=0;D<32;D++,k+=18){var M=H.block_type,R=b.sb_sample[N][w],P=b.sb_sample[N][1-w];if(H.mixed_block_flag!=0&&D<2&&(M=0),b.amp_filter[D]<1e-12)s.fill(B,k+0,k+18,0);else{if(b.amp_filter[D]<1)for(var L=0;L<18;L++)P[L][_[D]]*=b.amp_filter[D];if(M==o.SHORT_TYPE){for(var L=-12/4;L<0;L++){var W=r[o.SHORT_TYPE][L+3];B[k+L*3+9]=R[9+L][_[D]]*W-R[8-L][_[D]],B[k+L*3+18]=R[14-L][_[D]]*W+R[15+L][_[D]],B[k+L*3+10]=R[15+L][_[D]]*W-R[14-L][_[D]],B[k+L*3+19]=P[2-L][_[D]]*W+P[3+L][_[D]],B[k+L*3+11]=P[3+L][_[D]]*W-P[2-L][_[D]],B[k+L*3+20]=P[8-L][_[D]]*W+P[9+L][_[D]]}T(B,k)}else{for(var Q=a(18),L=-36/4;L<0;L++){var Z,j;Z=r[M][L+27]*P[L+9][_[D]]+r[M][L+36]*P[8-L][_[D]],j=r[M][L+9]*R[L+9][_[D]]-r[M][L+18]*R[8-L][_[D]],Q[L+9]=Z-j*d[3+L+9],Q[L+18]=Z*d[3+L+9]+j}S(B,k,Q)}}if(M!=o.SHORT_TYPE&&D!=0)for(var L=7;L>=0;--L){var X,q;X=B[k+L]*m[20+L]+B[k+-1-L]*h[28+L],q=B[k+L]*h[28+L]-B[k+-1-L]*m[20+L],B[k+-1-L]=X,B[k+L]=q}}}if(x=y,$=286,b.mode_gr==1)for(var se=0;se<18;se++)t.arraycopy(b.sb_sample[N][1][se],0,b.sb_sample[N][0][se],0,32)}}}return Gh=l,Gh}var Vh,Y0;function mI(){if(Y0)return Vh;Y0=1;var e=pa(),t=ms,n=t.System,s=t.new_float,a=t.new_float_n;function o(){this.l=s(e.SBMAX_l),this.s=a([e.SBMAX_s,3]);var l=this;this.assign=function(i){n.arraycopy(i.l,0,l.l,0,e.SBMAX_l);for(var r=0;r<e.SBMAX_s;r++)for(var d=0;d<3;d++)l.s[r][d]=i.s[r][d]}}return Vh=o,Vh}var Hh,X0;function XIe(){if(X0)return Hh;X0=1;var e=mI();function t(){this.thm=new e,this.en=new e}return Hh=t,Hh}function So(e){var t=e;this.ordinal=function(){return t}}So.STEREO=new So(0);So.JOINT_STEREO=new So(1);So.DUAL_CHANNEL=new So(2);So.MONO=new So(3);So.NOT_SET=new So(4);var hd=So,Wh,q0;function pa(){if(q0)return Wh;q0=1;var e=ms,t=e.System,n=e.VbrMode,s=e.new_array_n,a=e.new_float,o=e.new_float_n,l=e.new_int,i=e.assert;r.ENCDELAY=576,r.POSTDELAY=1152,r.MDCTDELAY=48,r.FFTOFFSET=224+r.MDCTDELAY,r.DECDELAY=528,r.SBLIMIT=32,r.CBANDS=64,r.SBPSY_l=21,r.SBPSY_s=12,r.SBMAX_l=22,r.SBMAX_s=13,r.PSFB21=6,r.PSFB12=6,r.BLKSIZE=1024,r.HBLKSIZE=r.BLKSIZE/2+1,r.BLKSIZE_s=256,r.HBLKSIZE_s=r.BLKSIZE_s/2+1,r.NORM_TYPE=0,r.START_TYPE=1,r.SHORT_TYPE=2,r.STOP_TYPE=3,r.MPG_MD_LR_LR=0,r.MPG_MD_LR_I=1,r.MPG_MD_MS_LR=2,r.MPG_MD_MS_I=3,r.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function r(){var d=YIe(),u=XIe(),m=hd,h=r.FFTOFFSET,_=r.MPG_MD_MS_LR,g=null;this.psy=null;var T=null,S=null,b=null;this.setModules=function(N,w,D,H){g=N,this.psy=w,T=w,S=H,b=D};var A=new d;function y(N){var w,D;if(N.ATH.useAdjust==0){N.ATH.adjust=1;return}if(D=N.loudness_sq[0][0],w=N.loudness_sq[1][0],N.channels_out==2?(D+=N.loudness_sq[0][1],w+=N.loudness_sq[1][1]):(D+=D,w+=w),N.mode_gr==2&&(D=Math.max(D,w)),D*=.5,D*=N.ATH.aaSensitivityP,D>.03125)N.ATH.adjust>=1?N.ATH.adjust=1:N.ATH.adjust<N.ATH.adjustLimit&&(N.ATH.adjust=N.ATH.adjustLimit),N.ATH.adjustLimit=1;else{var H=31.98*D+625e-6;N.ATH.adjust>=H?(N.ATH.adjust*=H*.075+.925,N.ATH.adjust<H&&(N.ATH.adjust=H)):N.ATH.adjustLimit>=H?N.ATH.adjust=H:N.ATH.adjust<N.ATH.adjustLimit&&(N.ATH.adjust=N.ATH.adjustLimit),N.ATH.adjustLimit=H}}function x(N){var w,D;for(i(0<=N.bitrate_index&&N.bitrate_index<16),i(0<=N.mode_ext&&N.mode_ext<4),N.bitrate_stereoMode_Hist[N.bitrate_index][4]++,N.bitrate_stereoMode_Hist[15][4]++,N.channels_out==2&&(N.bitrate_stereoMode_Hist[N.bitrate_index][N.mode_ext]++,N.bitrate_stereoMode_Hist[15][N.mode_ext]++),w=0;w<N.mode_gr;++w)for(D=0;D<N.channels_out;++D){var H=N.l3_side.tt[w][D].block_type|0;N.l3_side.tt[w][D].mixed_block_flag!=0&&(H=4),N.bitrate_blockType_Hist[N.bitrate_index][H]++,N.bitrate_blockType_Hist[N.bitrate_index][5]++,N.bitrate_blockType_Hist[15][H]++,N.bitrate_blockType_Hist[15][5]++}}function $(N,w){var D=N.internal_flags,H,B;if(D.lame_encode_frame_init==0){var k,U,G=a(2014),L=a(2014);for(D.lame_encode_frame_init=1,k=0,U=0;k<286+576*(1+D.mode_gr);++k)k<576*D.mode_gr?(G[k]=0,D.channels_out==2&&(L[k]=0)):(G[k]=w[0][U],D.channels_out==2&&(L[k]=w[1][U]),++U);for(B=0;B<D.mode_gr;B++)for(H=0;H<D.channels_out;H++)D.l3_side.tt[B][H].block_type=r.SHORT_TYPE;A.mdct_sub48(D,G,L),i(576>=r.FFTOFFSET),i(D.mf_size>=r.BLKSIZE+N.framesize-r.FFTOFFSET),i(D.mf_size>=512+N.framesize-32)}}this.lame_encode_mp3_frame=function(N,w,D,H,B,k){var U,G=s([2,2]);G[0][0]=new u,G[0][1]=new u,G[1][0]=new u,G[1][1]=new u;var L=s([2,2]);L[0][0]=new u,L[0][1]=new u,L[1][0]=new u,L[1][1]=new u;var M,R=[null,null],P=N.internal_flags,W=o([2,4]),Q=[.5,.5],Z=[[0,0],[0,0]],j=[[0,0],[0,0]],X,q,se;if(R[0]=w,R[1]=D,P.lame_encode_frame_init==0&&$(N,R),P.padding=0,(P.slot_lag-=P.frac_SpF)<0&&(P.slot_lag+=N.out_samplerate,P.padding=1),P.psymodel!=0){var he,be=[null,null],ne=0,J=l(2);for(se=0;se<P.mode_gr;se++){for(q=0;q<P.channels_out;q++)be[q]=R[q],ne=576+se*576-r.FFTOFFSET;if(N.VBR==n.vbr_mtrh||N.VBR==n.vbr_mt?he=T.L3psycho_anal_vbr(N,be,ne,se,G,L,Z[se],j[se],W[se],J):he=T.L3psycho_anal_ns(N,be,ne,se,G,L,Z[se],j[se],W[se],J),he!=0)return-4;for(N.mode==m.JOINT_STEREO&&(Q[se]=W[se][2]+W[se][3],Q[se]>0&&(Q[se]=W[se][3]/Q[se])),q=0;q<P.channels_out;q++){var ue=P.l3_side.tt[se][q];ue.block_type=J[q],ue.mixed_block_flag=0}}}else for(se=0;se<P.mode_gr;se++)for(q=0;q<P.channels_out;q++)P.l3_side.tt[se][q].block_type=r.NORM_TYPE,P.l3_side.tt[se][q].mixed_block_flag=0,j[se][q]=Z[se][q]=700;if(y(P),A.mdct_sub48(P,R[0],R[1]),P.mode_ext=r.MPG_MD_LR_LR,N.force_ms)P.mode_ext=r.MPG_MD_MS_LR;else if(N.mode==m.JOINT_STEREO){var Ne=0,Re=0;for(se=0;se<P.mode_gr;se++)for(q=0;q<P.channels_out;q++)Ne+=j[se][q],Re+=Z[se][q];if(Ne<=1*Re){var Ze=P.l3_side.tt[0],Xe=P.l3_side.tt[P.mode_gr-1];Ze[0].block_type==Ze[1].block_type&&Xe[0].block_type==Xe[1].block_type&&(P.mode_ext=r.MPG_MD_MS_LR)}}if(P.mode_ext==_?(M=L,X=j):(M=G,X=Z),N.analysis&&P.pinfo!=null)for(se=0;se<P.mode_gr;se++)for(q=0;q<P.channels_out;q++)P.pinfo.ms_ratio[se]=P.ms_ratio[se],P.pinfo.ms_ener_ratio[se]=Q[se],P.pinfo.blocktype[se][q]=P.l3_side.tt[se][q].block_type,P.pinfo.pe[se][q]=X[se][q],t.arraycopy(P.l3_side.tt[se][q].xr,0,P.pinfo.xr[se][q],0,576),P.mode_ext==_&&(P.pinfo.ers[se][q]=P.pinfo.ers[se][q+2],t.arraycopy(P.pinfo.energy[se][q+2],0,P.pinfo.energy[se][q],0,P.pinfo.energy[se][q].length));if(N.VBR==n.vbr_off||N.VBR==n.vbr_abr){var Qe,Je;for(Qe=0;Qe<18;Qe++)P.nsPsy.pefirbuf[Qe]=P.nsPsy.pefirbuf[Qe+1];for(Je=0,se=0;se<P.mode_gr;se++)for(q=0;q<P.channels_out;q++)Je+=X[se][q];for(P.nsPsy.pefirbuf[18]=Je,Je=P.nsPsy.pefirbuf[9],Qe=0;Qe<9;Qe++)Je+=(P.nsPsy.pefirbuf[Qe]+P.nsPsy.pefirbuf[18-Qe])*r.fircoef[Qe];for(Je=670*5*P.mode_gr*P.channels_out/Je,se=0;se<P.mode_gr;se++)for(q=0;q<P.channels_out;q++)X[se][q]*=Je}if(P.iteration_loop.iteration_loop(N,X,Q,M),g.format_bitstream(N),U=g.copy_buffer(P,H,B,k,1),N.bWriteVbrTag&&S.addVbrFrame(N),N.analysis&&P.pinfo!=null){for(q=0;q<P.channels_out;q++){var st;for(st=0;st<h;st++)P.pinfo.pcmdata[q][st]=P.pinfo.pcmdata[q][st+N.framesize];for(st=h;st<1600;st++)P.pinfo.pcmdata[q][st]=R[q][st-h]}b.set_frame_pinfo(N,M)}return x(P),U}}return Wh=r,Wh}var hI=ms,Z0=hI.Util,Q0=hI.new_float,ws=pa();function qIe(){var e=Q0(ws.BLKSIZE),t=Q0(ws.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(o,l,i){var r=0,d,u,m;i<<=1;var h=l+i;d=4;do{var _,g,T,S,b,A,y;y=d>>1,S=d,b=d<<1,A=b+S,d=b<<1,u=l,m=u+y;do{var x,$,N,w;$=o[u+0]-o[u+S],x=o[u+0]+o[u+S],w=o[u+b]-o[u+A],N=o[u+b]+o[u+A],o[u+b]=x-N,o[u+0]=x+N,o[u+A]=$-w,o[u+S]=$+w,$=o[m+0]-o[m+S],x=o[m+0]+o[m+S],w=Z0.SQRT2*o[m+A],N=Z0.SQRT2*o[m+b],o[m+b]=x-N,o[m+0]=x+N,o[m+A]=$-w,o[m+S]=$+w,m+=d,u+=d}while(u<h);for(g=n[r+0],_=n[r+1],T=1;T<y;T++){var D,H;D=1-2*_*_,H=2*_*g,u=l+T,m=l+S-T;do{var B,k,U,x,$,G,N,L,w,M;k=H*o[u+S]-D*o[m+S],B=D*o[u+S]+H*o[m+S],$=o[u+0]-B,x=o[u+0]+B,G=o[m+0]-k,U=o[m+0]+k,k=H*o[u+A]-D*o[m+A],B=D*o[u+A]+H*o[m+A],w=o[u+b]-B,N=o[u+b]+B,M=o[m+b]-k,L=o[m+b]+k,k=_*N-g*M,B=g*N+_*M,o[u+b]=x-B,o[u+0]=x+B,o[m+A]=G-k,o[m+S]=G+k,k=g*L-_*w,B=_*L+g*w,o[m+b]=U-B,o[m+0]=U+B,o[u+A]=$-k,o[u+S]=$+k,m+=d,u+=d}while(u<h);D=g,g=D*n[r+0]-_*n[r+1],_=D*n[r+1]+_*n[r+0]}r+=2}while(d<i)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(o,l,i,r,d){for(var u=0;u<3;u++){var m=ws.BLKSIZE_s/2,h=65535&576/3*(u+1),_=ws.BLKSIZE_s/8-1;do{var g,T,S,b,A,y=a[_<<2]&255;g=t[y]*r[i][d+y+h],A=t[127-y]*r[i][d+y+h+128],T=g-A,g=g+A,S=t[y+64]*r[i][d+y+h+64],A=t[63-y]*r[i][d+y+h+192],b=S-A,S=S+A,m-=4,l[u][m+0]=g+S,l[u][m+2]=g-S,l[u][m+1]=T+b,l[u][m+3]=T-b,g=t[y+1]*r[i][d+y+h+1],A=t[126-y]*r[i][d+y+h+129],T=g-A,g=g+A,S=t[y+65]*r[i][d+y+h+65],A=t[62-y]*r[i][d+y+h+193],b=S-A,S=S+A,l[u][m+ws.BLKSIZE_s/2+0]=g+S,l[u][m+ws.BLKSIZE_s/2+2]=g-S,l[u][m+ws.BLKSIZE_s/2+1]=T+b,l[u][m+ws.BLKSIZE_s/2+3]=T-b}while(--_>=0);s(l[u],m,ws.BLKSIZE_s/2)}},this.fft_long=function(o,l,i,r,d){var u=ws.BLKSIZE/8-1,m=ws.BLKSIZE/2;do{var h,_,g,T,S,b=a[u]&255;h=e[b]*r[i][d+b],S=e[b+512]*r[i][d+b+512],_=h-S,h=h+S,g=e[b+256]*r[i][d+b+256],S=e[b+768]*r[i][d+b+768],T=g-S,g=g+S,m-=4,l[m+0]=h+g,l[m+2]=h-g,l[m+1]=_+T,l[m+3]=_-T,h=e[b+1]*r[i][d+b+1],S=e[b+513]*r[i][d+b+513],_=h-S,h=h+S,g=e[b+257]*r[i][d+b+257],S=e[b+769]*r[i][d+b+769],T=g-S,g=g+S,l[m+ws.BLKSIZE/2+0]=h+g,l[m+ws.BLKSIZE/2+2]=h-g,l[m+ws.BLKSIZE/2+1]=_+T,l[m+ws.BLKSIZE/2+3]=_-T}while(--u>=0);s(l,m,ws.BLKSIZE/2)},this.init_fft=function(o){for(var l=0;l<ws.BLKSIZE;l++)e[l]=.42-.5*Math.cos(2*Math.PI*(l+.5)/ws.BLKSIZE)+.08*Math.cos(4*Math.PI*(l+.5)/ws.BLKSIZE);for(var l=0;l<ws.BLKSIZE_s/2;l++)t[l]=.5*(1-Math.cos(2*Math.PI*(l+.5)/ws.BLKSIZE_s))}}var ZIe=qIe,El=ms,zi=El.VbrMode,J0=El.Float,ji=El.ShortBlock,Na=El.Util,QIe=El.Arrays,ks=El.new_float,Xa=El.new_float_n,li=El.new_int,rn=El.assert,JIe=ZIe,rt=pa();function e2e(){var e=hd,t=new JIe,n=2.302585092994046,s=2,a=16,o=2,l=16,i=.34,r=1/(14752*14752)/(rt.BLKSIZE/2),d=.01,u=.8,m=.6,h=.3,_=3.5,g=21,T=.2302585093;function S(Y,oe){for(var te=0,le=0;le<rt.BLKSIZE/2;++le)te+=Y[le]*oe.ATH.eql_w[le];return te*=r,te}function b(Y,oe,te,le,ye,me,Ie,Oe,we,Ye,He){var et=Y.internal_flags;if(we<2)t.fft_long(et,le[ye],we,Ye,He),t.fft_short(et,me[Ie],we,Ye,He);else if(we==2){for(var bt=rt.BLKSIZE-1;bt>=0;--bt){var Nt=le[ye+0][bt],ct=le[ye+1][bt];le[ye+0][bt]=(Nt+ct)*Na.SQRT2*.5,le[ye+1][bt]=(Nt-ct)*Na.SQRT2*.5}for(var Ot=2;Ot>=0;--Ot)for(var bt=rt.BLKSIZE_s-1;bt>=0;--bt){var Nt=me[Ie+0][Ot][bt],ct=me[Ie+1][Ot][bt];me[Ie+0][Ot][bt]=(Nt+ct)*Na.SQRT2*.5,me[Ie+1][Ot][bt]=(Nt-ct)*Na.SQRT2*.5}}oe[0]=le[ye+0][0],oe[0]*=oe[0];for(var bt=rt.BLKSIZE/2-1;bt>=0;--bt){var Le=le[ye+0][rt.BLKSIZE/2-bt],qe=le[ye+0][rt.BLKSIZE/2+bt];oe[rt.BLKSIZE/2-bt]=(Le*Le+qe*qe)*.5}for(var Ot=2;Ot>=0;--Ot){te[Ot][0]=me[Ie+0][Ot][0],te[Ot][0]*=te[Ot][0];for(var bt=rt.BLKSIZE_s/2-1;bt>=0;--bt){var Le=me[Ie+0][Ot][rt.BLKSIZE_s/2-bt],qe=me[Ie+0][Ot][rt.BLKSIZE_s/2+bt];te[Ot][rt.BLKSIZE_s/2-bt]=(Le*Le+qe*qe)*.5}}{for(var De=0,bt=11;bt<rt.HBLKSIZE;bt++)De+=oe[bt];et.tot_ener[we]=De}if(Y.analysis){for(var bt=0;bt<rt.HBLKSIZE;bt++)et.pinfo.energy[Oe][we][bt]=et.pinfo.energy_save[we][bt],et.pinfo.energy_save[we][bt]=oe[bt];et.pinfo.pe[Oe][we]=et.pe[we]}Y.athaa_loudapprox==2&&we<2&&(et.loudness_sq[Oe][we]=et.loudness_sq_save[we],et.loudness_sq_save[we]=S(oe,et))}var A=8,y=23,x=15,$,N,w,D=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function H(){$=Math.pow(10,(A+1)/16),N=Math.pow(10,(y+1)/16),w=Math.pow(10,x/10)}var B=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],k=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],U=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function G(Y,oe,te,le,ye,me){var Ie;if(oe>Y)if(oe<Y*N)Ie=oe/Y;else return Y+oe;else{if(Y>=oe*N)return Y+oe;Ie=Y/oe}if(Y+=oe,le+3<=6){if(Ie>=$)return Y;var Oe=0|Na.FAST_LOG10_X(Ie,16);return Y*k[Oe]}var Oe=0|Na.FAST_LOG10_X(Ie,16);if(oe=ye.ATH.cb_l[te]*ye.ATH.adjust,Y<w*oe){if(Y>oe){var we,Ye;return we=1,Oe<=13&&(we=U[Oe]),Ye=Na.FAST_LOG10_X(Y/oe,10/15),Y*((B[Oe]-we)*Ye+we)}return Oe>13?Y:Y*U[Oe]}return Y*B[Oe]}var L=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function M(Y,oe,te){var le;if(Y<0&&(Y=0),oe<0&&(oe=0),Y<=0)return oe;if(oe<=0)return Y;if(oe>Y?le=oe/Y:le=Y/oe,-2<=te&&te<=2){if(le>=$)return Y+oe;var ye=0|Na.FAST_LOG10_X(le,16);return(Y+oe)*L[ye]}return le<N?Y+oe:(Y<oe&&(Y=oe),Y)}function R(Y,oe){var te=Y.internal_flags;if(te.channels_out>1){for(var le=0;le<rt.SBMAX_l;le++){var ye=te.thm[0].l[le],me=te.thm[1].l[le];te.thm[0].l[le]+=me*oe,te.thm[1].l[le]+=ye*oe}for(var le=0;le<rt.SBMAX_s;le++)for(var Ie=0;Ie<3;Ie++){var ye=te.thm[0].s[le][Ie],me=te.thm[1].s[le][Ie];te.thm[0].s[le][Ie]+=me*oe,te.thm[1].s[le][Ie]+=ye*oe}}}function P(Y){for(var oe=0;oe<rt.SBMAX_l;oe++)if(!(Y.thm[0].l[oe]>1.58*Y.thm[1].l[oe]||Y.thm[1].l[oe]>1.58*Y.thm[0].l[oe])){var te=Y.mld_l[oe]*Y.en[3].l[oe],le=Math.max(Y.thm[2].l[oe],Math.min(Y.thm[3].l[oe],te));te=Y.mld_l[oe]*Y.en[2].l[oe];var ye=Math.max(Y.thm[3].l[oe],Math.min(Y.thm[2].l[oe],te));Y.thm[2].l[oe]=le,Y.thm[3].l[oe]=ye}for(var oe=0;oe<rt.SBMAX_s;oe++)for(var me=0;me<3;me++)if(!(Y.thm[0].s[oe][me]>1.58*Y.thm[1].s[oe][me]||Y.thm[1].s[oe][me]>1.58*Y.thm[0].s[oe][me])){var te=Y.mld_s[oe]*Y.en[3].s[oe][me],le=Math.max(Y.thm[2].s[oe][me],Math.min(Y.thm[3].s[oe][me],te));te=Y.mld_s[oe]*Y.en[2].s[oe][me];var ye=Math.max(Y.thm[3].s[oe][me],Math.min(Y.thm[2].s[oe][me],te));Y.thm[2].s[oe][me]=le,Y.thm[3].s[oe][me]=ye}}function W(Y,oe,te){var le=oe,ye=Math.pow(10,te);oe*=2,le*=2;for(var me=0;me<rt.SBMAX_l;me++){var Ie,Oe,we,Ye;if(Ye=Y.ATH.cb_l[Y.bm_l[me]]*ye,Ie=Math.min(Math.max(Y.thm[0].l[me],Ye),Math.max(Y.thm[1].l[me],Ye)),Oe=Math.max(Y.thm[2].l[me],Ye),we=Math.max(Y.thm[3].l[me],Ye),Ie*oe<Oe+we){var He=Ie*le/(Oe+we);Oe*=He,we*=He}Y.thm[2].l[me]=Math.min(Oe,Y.thm[2].l[me]),Y.thm[3].l[me]=Math.min(we,Y.thm[3].l[me])}ye*=rt.BLKSIZE_s/rt.BLKSIZE;for(var me=0;me<rt.SBMAX_s;me++)for(var et=0;et<3;et++){var Ie,Oe,we,Ye;if(Ye=Y.ATH.cb_s[Y.bm_s[me]]*ye,Ie=Math.min(Math.max(Y.thm[0].s[me][et],Ye),Math.max(Y.thm[1].s[me][et],Ye)),Oe=Math.max(Y.thm[2].s[me][et],Ye),we=Math.max(Y.thm[3].s[me][et],Ye),Ie*oe<Oe+we){var He=Ie*oe/(Oe+we);Oe*=He,we*=He}Y.thm[2].s[me][et]=Math.min(Y.thm[2].s[me][et],Oe),Y.thm[3].s[me][et]=Math.min(Y.thm[3].s[me][et],we)}}function Q(Y,oe,te,le,ye){var me,Ie,Oe=0,we=0;for(me=Ie=0;me<rt.SBMAX_s;++Ie,++me){for(var Ye=Y.bo_s[me],He=Y.npart_s,et=Ye<He?Ye:He;Ie<et;)rn(oe[Ie]>=0),rn(te[Ie]>=0),Oe+=oe[Ie],we+=te[Ie],Ie++;if(Y.en[le].s[me][ye]=Oe,Y.thm[le].s[me][ye]=we,Ie>=He){++me;break}rn(oe[Ie]>=0),rn(te[Ie]>=0);{var bt=Y.PSY.bo_s_weight[me],Nt=1-bt;Oe=bt*oe[Ie],we=bt*te[Ie],Y.en[le].s[me][ye]+=Oe,Y.thm[le].s[me][ye]+=we,Oe=Nt*oe[Ie],we=Nt*te[Ie]}}for(;me<rt.SBMAX_s;++me)Y.en[le].s[me][ye]=0,Y.thm[le].s[me][ye]=0}function Z(Y,oe,te,le){var ye,me,Ie=0,Oe=0;for(ye=me=0;ye<rt.SBMAX_l;++me,++ye){for(var we=Y.bo_l[ye],Ye=Y.npart_l,He=we<Ye?we:Ye;me<He;)rn(oe[me]>=0),rn(te[me]>=0),Ie+=oe[me],Oe+=te[me],me++;if(Y.en[le].l[ye]=Ie,Y.thm[le].l[ye]=Oe,me>=Ye){++ye;break}rn(oe[me]>=0),rn(te[me]>=0);{var et=Y.PSY.bo_l_weight[ye],bt=1-et;Ie=et*oe[me],Oe=et*te[me],Y.en[le].l[ye]+=Ie,Y.thm[le].l[ye]+=Oe,Ie=bt*oe[me],Oe=bt*te[me]}}for(;ye<rt.SBMAX_l;++ye)Y.en[le].l[ye]=0,Y.thm[le].l[ye]=0}function j(Y,oe,te,le,ye,me){var Ie=Y.internal_flags,Oe,we;for(we=Oe=0;we<Ie.npart_s;++we){for(var Ye=0,He=Ie.numlines_s[we],et=0;et<He;++et,++Oe){var bt=oe[me][Oe];Ye+=bt}te[we]=Ye}for(rn(we==Ie.npart_s),Oe=we=0;we<Ie.npart_s;we++){var Nt=Ie.s3ind_s[we][0],ct=Ie.s3_ss[Oe++]*te[Nt];for(++Nt;Nt<=Ie.s3ind_s[we][1];)ct+=Ie.s3_ss[Oe]*te[Nt],++Oe,++Nt;{var Ot=o*Ie.nb_s1[ye][we];le[we]=Math.min(ct,Ot)}if(Ie.blocktype_old[ye&1]==rt.SHORT_TYPE){var Ot=l*Ie.nb_s2[ye][we],Le=le[we];le[we]=Math.min(Ot,Le)}Ie.nb_s2[ye][we]=Ie.nb_s1[ye][we],Ie.nb_s1[ye][we]=ct,rn(le[we]>=0)}for(;we<=rt.CBANDS;++we)te[we]=0,le[we]=0}function X(Y,oe,te,le){var ye=Y.internal_flags;Y.short_blocks==ji.short_block_coupled&&!(oe[0]!=0&&oe[1]!=0)&&(oe[0]=oe[1]=0);for(var me=0;me<ye.channels_out;me++)le[me]=rt.NORM_TYPE,Y.short_blocks==ji.short_block_dispensed&&(oe[me]=1),Y.short_blocks==ji.short_block_forced&&(oe[me]=0),oe[me]!=0?(rn(ye.blocktype_old[me]!=rt.START_TYPE),ye.blocktype_old[me]==rt.SHORT_TYPE&&(le[me]=rt.STOP_TYPE)):(le[me]=rt.SHORT_TYPE,ye.blocktype_old[me]==rt.NORM_TYPE&&(ye.blocktype_old[me]=rt.START_TYPE),ye.blocktype_old[me]==rt.STOP_TYPE&&(ye.blocktype_old[me]=rt.SHORT_TYPE)),te[me]=ye.blocktype_old[me],ye.blocktype_old[me]=le[me]}function q(Y,oe,te){return te>=1?Y:te<=0?oe:oe>0?Math.pow(Y/oe,te)*oe:0}var se=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function he(Y,oe){for(var te=309.07,le=0;le<rt.SBMAX_s-1;le++)for(var ye=0;ye<3;ye++){var me=Y.thm.s[le][ye];if(me>0){var Ie=me*oe,Oe=Y.en.s[le][ye];Oe>Ie&&(Oe>Ie*1e10?te+=se[le]*(10*n):te+=se[le]*Na.FAST_LOG10(Oe/Ie))}}return te}var be=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ne(Y,oe){for(var te=281.0575,le=0;le<rt.SBMAX_l-1;le++){var ye=Y.thm.l[le];if(ye>0){var me=ye*oe,Ie=Y.en.l[le];Ie>me&&(Ie>me*1e10?te+=be[le]*(10*n):te+=be[le]*Na.FAST_LOG10(Ie/me))}}return te}function J(Y,oe,te,le,ye){var me,Ie;for(me=Ie=0;me<Y.npart_l;++me){var Oe=0,we=0,Ye;for(Ye=0;Ye<Y.numlines_l[me];++Ye,++Ie){var He=oe[Ie];Oe+=He,we<He&&(we=He)}te[me]=Oe,le[me]=we,ye[me]=Oe*Y.rnumlines_l[me],rn(Y.rnumlines_l[me]>=0),rn(te[me]>=0),rn(le[me]>=0),rn(ye[me]>=0)}}function ue(Y,oe,te,le){var ye=D.length-1,me=0,Ie=te[me]+te[me+1];if(Ie>0){var Oe=oe[me];Oe<oe[me+1]&&(Oe=oe[me+1]),rn(Y.numlines_l[me]+Y.numlines_l[me+1]-1>0),Ie=20*(Oe*2-Ie)/(Ie*(Y.numlines_l[me]+Y.numlines_l[me+1]-1));var we=0|Ie;we>ye&&(we=ye),le[me]=we}else le[me]=0;for(me=1;me<Y.npart_l-1;me++)if(Ie=te[me-1]+te[me]+te[me+1],Ie>0){var Oe=oe[me-1];Oe<oe[me]&&(Oe=oe[me]),Oe<oe[me+1]&&(Oe=oe[me+1]),rn(Y.numlines_l[me-1]+Y.numlines_l[me]+Y.numlines_l[me+1]-1>0),Ie=20*(Oe*3-Ie)/(Ie*(Y.numlines_l[me-1]+Y.numlines_l[me]+Y.numlines_l[me+1]-1));var we=0|Ie;we>ye&&(we=ye),le[me]=we}else le[me]=0;if(rn(me==Y.npart_l-1),Ie=te[me-1]+te[me],Ie>0){var Oe=oe[me-1];Oe<oe[me]&&(Oe=oe[me]),rn(Y.numlines_l[me-1]+Y.numlines_l[me]-1>0),Ie=20*(Oe*2-Ie)/(Ie*(Y.numlines_l[me-1]+Y.numlines_l[me]-1));var we=0|Ie;we>ye&&(we=ye),le[me]=we}else le[me]=0;rn(me==Y.npart_l-1)}var Ne=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(Y,oe,te,le,ye,me,Ie,Oe,we,Ye){var He=Y.internal_flags,et=Xa([2,rt.BLKSIZE]),bt=Xa([2,3,rt.BLKSIZE_s]),Nt=ks(rt.CBANDS+1),ct=ks(rt.CBANDS+1),Ot=ks(rt.CBANDS+2),Le=li(2),qe=li(2),De,Te,Ge,nt,Tt,Kt,dt,$t,Gt=Xa([2,576]),mn,On=li(rt.CBANDS+2),Rn=li(rt.CBANDS+2);for(QIe.fill(Rn,0),De=He.channels_out,Y.mode==e.JOINT_STEREO&&(De=4),Y.VBR==zi.vbr_off?mn=He.ResvMax==0?0:He.ResvSize/He.ResvMax*.5:Y.VBR==zi.vbr_rh||Y.VBR==zi.vbr_mtrh||Y.VBR==zi.vbr_mt?mn=.6:mn=1,Te=0;Te<He.channels_out;Te++){var gn=oe[Te],wn=te+576-350-g+192;for(nt=0;nt<576;nt++){var ls,ns;for(ls=gn[wn+nt+10],ns=0,Tt=0;Tt<(g-1)/2-1;Tt+=2)ls+=Ne[Tt]*(gn[wn+nt+Tt]+gn[wn+nt+g-Tt]),ns+=Ne[Tt+1]*(gn[wn+nt+Tt+1]+gn[wn+nt+g-Tt-1]);Gt[Te][nt]=ls+ns}ye[le][Te].en.assign(He.en[Te]),ye[le][Te].thm.assign(He.thm[Te]),De>2&&(me[le][Te].en.assign(He.en[Te+2]),me[le][Te].thm.assign(He.thm[Te+2]))}for(Te=0;Te<De;Te++){var Fs,gt,vn=ks(12),vs=[0,0,0,0],ma=ks(12),Ha=1,wo,Wa=ks(rt.CBANDS),yl=ks(rt.CBANDS),$n=[0,0,0,0],Ma=ks(rt.HBLKSIZE),Ka=Xa([3,rt.HBLKSIZE_s]);for(rn(He.npart_s<=rt.CBANDS),rn(He.npart_l<=rt.CBANDS),nt=0;nt<3;nt++)vn[nt]=He.nsPsy.last_en_subshort[Te][nt+6],rn(He.nsPsy.last_en_subshort[Te][nt+4]>0),ma[nt]=vn[nt]/He.nsPsy.last_en_subshort[Te][nt+4],vs[0]+=vn[nt];if(Te==2)for(nt=0;nt<576;nt++){var za,ja;za=Gt[0][nt],ja=Gt[1][nt],Gt[0][nt]=za+ja,Gt[1][nt]=za-ja}{var ft=Gt[Te&1],kt=0;for(nt=0;nt<9;nt++){for(var dn=kt+64,In=1;kt<dn;kt++)In<Math.abs(ft[kt])&&(In=Math.abs(ft[kt]));He.nsPsy.last_en_subshort[Te][nt]=vn[nt+3]=In,vs[1+nt/3]+=In,In>vn[nt+3-2]?(rn(vn[nt+3-2]>0),In=In/vn[nt+3-2]):vn[nt+3-2]>In*10?In=vn[nt+3-2]/(In*10):In=0,ma[nt+3]=In}}if(Y.analysis){var Me=ma[0];for(nt=1;nt<12;nt++)Me<ma[nt]&&(Me=ma[nt]);He.pinfo.ers[le][Te]=He.pinfo.ers_save[Te],He.pinfo.ers_save[Te]=Me}for(wo=Te==3?He.nsPsy.attackthre_s:He.nsPsy.attackthre,nt=0;nt<12;nt++)$n[nt/3]==0&&ma[nt]>wo&&($n[nt/3]=nt%3+1);for(nt=1;nt<4;nt++){var Ve;vs[nt-1]>vs[nt]?(rn(vs[nt]>0),Ve=vs[nt-1]/vs[nt]):(rn(vs[nt-1]>0),Ve=vs[nt]/vs[nt-1]),Ve<1.7&&($n[nt]=0,nt==1&&($n[0]=0))}for($n[0]!=0&&He.nsPsy.lastAttacks[Te]!=0&&($n[0]=0),(He.nsPsy.lastAttacks[Te]==3||$n[0]+$n[1]+$n[2]+$n[3]!=0)&&(Ha=0,$n[1]!=0&&$n[0]!=0&&($n[1]=0),$n[2]!=0&&$n[1]!=0&&($n[2]=0),$n[3]!=0&&$n[2]!=0&&($n[3]=0)),Te<2?qe[Te]=Ha:Ha==0&&(qe[0]=qe[1]=0),we[Te]=He.tot_ener[Te],gt=bt,Fs=et,b(Y,Ma,Ka,Fs,Te&1,gt,Te&1,le,Te,oe,te),J(He,Ma,Nt,Wa,yl),ue(He,Wa,yl,On),$t=0;$t<3;$t++){var tt,vt;for(j(Y,Ka,ct,Ot,Te,$t),Q(He,ct,Ot,Te,$t),dt=0;dt<rt.SBMAX_s;dt++){if(vt=He.thm[Te].s[dt][$t],vt*=u,$n[$t]>=2||$n[$t+1]==1){var xt=$t!=0?$t-1:2,In=q(He.thm[Te].s[dt][xt],vt,m*mn);vt=Math.min(vt,In)}if($n[$t]==1){var xt=$t!=0?$t-1:2,In=q(He.thm[Te].s[dt][xt],vt,h*mn);vt=Math.min(vt,In)}else if($t!=0&&$n[$t-1]==3||$t==0&&He.nsPsy.lastAttacks[Te]==3){var xt=$t!=2?$t+1:0,In=q(He.thm[Te].s[dt][xt],vt,h*mn);vt=Math.min(vt,In)}tt=vn[$t*3+3]+vn[$t*3+4]+vn[$t*3+5],vn[$t*3+5]*6<tt&&(vt*=.5,vn[$t*3+4]*6<tt&&(vt*=.5)),He.thm[Te].s[dt][$t]=vt}}for(He.nsPsy.lastAttacks[Te]=$n[2],Kt=0,Ge=0;Ge<He.npart_l;Ge++){for(var Dt=He.s3ind[Ge][0],sn=Nt[Dt]*D[On[Dt]],We=He.s3_ll[Kt++]*sn;++Dt<=He.s3ind[Ge][1];)sn=Nt[Dt]*D[On[Dt]],We=G(We,He.s3_ll[Kt++]*sn,Dt,Dt-Ge,He);We*=.158489319246111,He.blocktype_old[Te&1]==rt.SHORT_TYPE?Ot[Ge]=We:Ot[Ge]=q(Math.min(We,Math.min(s*He.nb_1[Te][Ge],a*He.nb_2[Te][Ge])),We,mn),He.nb_2[Te][Ge]=He.nb_1[Te][Ge],He.nb_1[Te][Ge]=We}for(;Ge<=rt.CBANDS;++Ge)Nt[Ge]=0,Ot[Ge]=0;Z(He,Nt,Ot,Te)}if((Y.mode==e.STEREO||Y.mode==e.JOINT_STEREO)&&Y.interChRatio>0&&R(Y,Y.interChRatio),Y.mode==e.JOINT_STEREO){var Zt;P(He),Zt=Y.msfix,Math.abs(Zt)>0&&W(He,Zt,Y.ATHlower*He.ATH.adjust)}for(X(Y,qe,Ye,Le),Te=0;Te<De;Te++){var Tn,is=0,Ro,Yn;Te>1?(Tn=Oe,is=-2,Ro=rt.NORM_TYPE,(Ye[0]==rt.SHORT_TYPE||Ye[1]==rt.SHORT_TYPE)&&(Ro=rt.SHORT_TYPE),Yn=me[le][Te-2]):(Tn=Ie,is=0,Ro=Ye[Te],Yn=ye[le][Te]),Ro==rt.SHORT_TYPE?Tn[is+Te]=he(Yn,He.masking_lower):Tn[is+Te]=ne(Yn,He.masking_lower),Y.analysis&&(He.pinfo.pe[le][Te]=Tn[is+Te])}return 0};function Re(Y,oe,te,le,ye,me,Ie,Oe){var we=Y.internal_flags;if(le<2)t.fft_long(we,Ie[Oe],le,oe,te);else if(le==2)for(var Ye=rt.BLKSIZE-1;Ye>=0;--Ye){var He=Ie[Oe+0][Ye],et=Ie[Oe+1][Ye];Ie[Oe+0][Ye]=(He+et)*Na.SQRT2*.5,Ie[Oe+1][Ye]=(He-et)*Na.SQRT2*.5}me[0]=Ie[Oe+0][0],me[0]*=me[0];for(var Ye=rt.BLKSIZE/2-1;Ye>=0;--Ye){var bt=Ie[Oe+0][rt.BLKSIZE/2-Ye],Nt=Ie[Oe+0][rt.BLKSIZE/2+Ye];me[rt.BLKSIZE/2-Ye]=(bt*bt+Nt*Nt)*.5}{for(var ct=0,Ye=11;Ye<rt.HBLKSIZE;Ye++)ct+=me[Ye];we.tot_ener[le]=ct}if(Y.analysis){for(var Ye=0;Ye<rt.HBLKSIZE;Ye++)we.pinfo.energy[ye][le][Ye]=we.pinfo.energy_save[le][Ye],we.pinfo.energy_save[le][Ye]=me[Ye];we.pinfo.pe[ye][le]=we.pe[le]}}function Ze(Y,oe,te,le,ye,me,Ie,Oe){var we=Y.internal_flags;if(ye==0&&le<2&&t.fft_short(we,Ie[Oe],le,oe,te),le==2)for(var Ye=rt.BLKSIZE_s-1;Ye>=0;--Ye){var He=Ie[Oe+0][ye][Ye],et=Ie[Oe+1][ye][Ye];Ie[Oe+0][ye][Ye]=(He+et)*Na.SQRT2*.5,Ie[Oe+1][ye][Ye]=(He-et)*Na.SQRT2*.5}me[ye][0]=Ie[Oe+0][ye][0],me[ye][0]*=me[ye][0];for(var Ye=rt.BLKSIZE_s/2-1;Ye>=0;--Ye){var bt=Ie[Oe+0][ye][rt.BLKSIZE_s/2-Ye],Nt=Ie[Oe+0][ye][rt.BLKSIZE_s/2+Ye];me[ye][rt.BLKSIZE_s/2-Ye]=(bt*bt+Nt*Nt)*.5}}function Xe(Y,oe,te,le){var ye=Y.internal_flags;Y.athaa_loudapprox==2&&te<2&&(ye.loudness_sq[oe][te]=ye.loudness_sq_save[te],ye.loudness_sq_save[te]=S(le,ye))}var Qe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Je(Y,oe,te,le,ye,me,Ie,Oe,we,Ye){for(var He=Xa([2,576]),et=Y.internal_flags,bt=et.channels_out,Nt=Y.mode==e.JOINT_STEREO?4:bt,ct=0;ct<bt;ct++){firbuf=oe[ct];for(var Ot=te+576-350-g+192,Le=0;Le<576;Le++){var qe,De;qe=firbuf[Ot+Le+10],De=0;for(var Te=0;Te<(g-1)/2-1;Te+=2)qe+=Qe[Te]*(firbuf[Ot+Le+Te]+firbuf[Ot+Le+g-Te]),De+=Qe[Te+1]*(firbuf[Ot+Le+Te+1]+firbuf[Ot+Le+g-Te-1]);He[ct][Le]=qe+De}ye[le][ct].en.assign(et.en[ct]),ye[le][ct].thm.assign(et.thm[ct]),Nt>2&&(me[le][ct].en.assign(et.en[ct+2]),me[le][ct].thm.assign(et.thm[ct+2]))}for(var ct=0;ct<Nt;ct++){var Ge=ks(12),nt=ks(12),Tt=[0,0,0,0],Kt=He[ct&1],dt=0,$t=ct==3?et.nsPsy.attackthre_s:et.nsPsy.attackthre,Gt=1;if(ct==2)for(var Le=0,Te=576;Te>0;++Le,--Te){var mn=He[0][Le],On=He[1][Le];He[0][Le]=mn+On,He[1][Le]=mn-On}for(var Le=0;Le<3;Le++)nt[Le]=et.nsPsy.last_en_subshort[ct][Le+6],rn(et.nsPsy.last_en_subshort[ct][Le+4]>0),Ge[Le]=nt[Le]/et.nsPsy.last_en_subshort[ct][Le+4],Tt[0]+=nt[Le];for(var Le=0;Le<9;Le++){for(var Rn=dt+64,gn=1;dt<Rn;dt++)gn<Math.abs(Kt[dt])&&(gn=Math.abs(Kt[dt]));et.nsPsy.last_en_subshort[ct][Le]=nt[Le+3]=gn,Tt[1+Le/3]+=gn,gn>nt[Le+3-2]?(rn(nt[Le+3-2]>0),gn=gn/nt[Le+3-2]):nt[Le+3-2]>gn*10?gn=nt[Le+3-2]/(gn*10):gn=0,Ge[Le+3]=gn}for(var Le=0;Le<3;++Le){var wn=nt[Le*3+3]+nt[Le*3+4]+nt[Le*3+5],ls=1;nt[Le*3+5]*6<wn&&(ls*=.5,nt[Le*3+4]*6<wn&&(ls*=.5)),Oe[ct][Le]=ls}if(Y.analysis){for(var ns=Ge[0],Le=1;Le<12;Le++)ns<Ge[Le]&&(ns=Ge[Le]);et.pinfo.ers[le][ct]=et.pinfo.ers_save[ct],et.pinfo.ers_save[ct]=ns}for(var Le=0;Le<12;Le++)we[ct][Le/3]==0&&Ge[Le]>$t&&(we[ct][Le/3]=Le%3+1);for(var Le=1;Le<4;Le++){var Fs=Tt[Le-1],gt=Tt[Le],vn=Math.max(Fs,gt);vn<4e4&&Fs<1.7*gt&&gt<1.7*Fs&&(Le==1&&we[ct][0]<=we[ct][Le]&&(we[ct][0]=0),we[ct][Le]=0)}we[ct][0]<=et.nsPsy.lastAttacks[ct]&&(we[ct][0]=0),(et.nsPsy.lastAttacks[ct]==3||we[ct][0]+we[ct][1]+we[ct][2]+we[ct][3]!=0)&&(Gt=0,we[ct][1]!=0&&we[ct][0]!=0&&(we[ct][1]=0),we[ct][2]!=0&&we[ct][1]!=0&&(we[ct][2]=0),we[ct][3]!=0&&we[ct][2]!=0&&(we[ct][3]=0)),ct<2?Ye[ct]=Gt:Gt==0&&(Ye[0]=Ye[1]=0),Ie[ct]=et.tot_ener[ct]}}function st(Y,oe,te){if(te==0)for(var le=0;le<Y.npart_s;le++)Y.nb_s2[oe][le]=Y.nb_s1[oe][le],Y.nb_s1[oe][le]=0}function ht(Y,oe){for(var te=0;te<Y.npart_l;te++)Y.nb_2[oe][te]=Y.nb_1[oe][te],Y.nb_1[oe][te]=0}function wt(Y,oe,te,le){var ye=D.length-1,me=0,Ie=te[me]+te[me+1];if(Ie>0){var Oe=oe[me];Oe<oe[me+1]&&(Oe=oe[me+1]),rn(Y.numlines_s[me]+Y.numlines_s[me+1]-1>0),Ie=20*(Oe*2-Ie)/(Ie*(Y.numlines_s[me]+Y.numlines_s[me+1]-1));var we=0|Ie;we>ye&&(we=ye),le[me]=we}else le[me]=0;for(me=1;me<Y.npart_s-1;me++)if(Ie=te[me-1]+te[me]+te[me+1],rn(me+1<Y.npart_s),Ie>0){var Oe=oe[me-1];Oe<oe[me]&&(Oe=oe[me]),Oe<oe[me+1]&&(Oe=oe[me+1]),rn(Y.numlines_s[me-1]+Y.numlines_s[me]+Y.numlines_s[me+1]-1>0),Ie=20*(Oe*3-Ie)/(Ie*(Y.numlines_s[me-1]+Y.numlines_s[me]+Y.numlines_s[me+1]-1));var we=0|Ie;we>ye&&(we=ye),le[me]=we}else le[me]=0;if(rn(me==Y.npart_s-1),Ie=te[me-1]+te[me],Ie>0){var Oe=oe[me-1];Oe<oe[me]&&(Oe=oe[me]),rn(Y.numlines_s[me-1]+Y.numlines_s[me]-1>0),Ie=20*(Oe*2-Ie)/(Ie*(Y.numlines_s[me-1]+Y.numlines_s[me]-1));var we=0|Ie;we>ye&&(we=ye),le[me]=we}else le[me]=0;rn(me==Y.npart_s-1)}function ee(Y,oe,te,le,ye,me){var Ie=Y.internal_flags,Oe=new float[rt.CBANDS],we=ks(rt.CBANDS),Ye,He,et,bt=new int[rt.CBANDS];for(et=He=0;et<Ie.npart_s;++et){var Nt=0,ct=0,Ot=Ie.numlines_s[et];for(Ye=0;Ye<Ot;++Ye,++He){var Le=oe[me][He];Nt+=Le,ct<Le&&(ct=Le)}te[et]=Nt,Oe[et]=ct,we[et]=Nt/Ot,rn(we[et]>=0)}for(rn(et==Ie.npart_s);et<rt.CBANDS;++et)Oe[et]=0,we[et]=0;for(wt(Ie,Oe,we,bt),He=et=0;et<Ie.npart_s;et++){var qe=Ie.s3ind_s[et][0],De=Ie.s3ind_s[et][1],Te,Ge,nt,Tt,Kt;for(Te=bt[qe],Ge=1,Tt=Ie.s3_ss[He]*te[qe]*D[bt[qe]],++He,++qe;qe<=De;)Te+=bt[qe],Ge+=1,nt=Ie.s3_ss[He]*te[qe]*D[bt[qe]],Tt=M(Tt,nt,qe-et),++He,++qe;Te=(1+2*Te)/(2*Ge),Kt=D[Te]*.5,Tt*=Kt,le[et]=Tt,Ie.nb_s2[ye][et]=Ie.nb_s1[ye][et],Ie.nb_s1[ye][et]=Tt,nt=Oe[et],nt*=Ie.minval_s[et],nt*=Kt,le[et]>nt&&(le[et]=nt),Ie.masking_lower>1&&(le[et]*=Ie.masking_lower),le[et]>te[et]&&(le[et]=te[et]),Ie.masking_lower<1&&(le[et]*=Ie.masking_lower),rn(le[et]>=0)}for(;et<rt.CBANDS;++et)te[et]=0,le[et]=0}function de(Y,oe,te,le,ye){var me=ks(rt.CBANDS),Ie=ks(rt.CBANDS),Oe=li(rt.CBANDS+2),we;J(Y,oe,te,me,Ie),ue(Y,me,Ie,Oe);var Ye=0;for(we=0;we<Y.npart_l;we++){var He,et,bt,Nt,ct=Y.s3ind[we][0],Ot=Y.s3ind[we][1],Le=0,qe=0;for(Le=Oe[ct],qe+=1,et=Y.s3_ll[Ye]*te[ct]*D[Oe[ct]],++Ye,++ct;ct<=Ot;)Le+=Oe[ct],qe+=1,He=Y.s3_ll[Ye]*te[ct]*D[Oe[ct]],Nt=M(et,He,ct-we),et=Nt,++Ye,++ct;if(Le=(1+2*Le)/(2*qe),bt=D[Le]*.5,et*=bt,Y.blocktype_old[ye&1]==rt.SHORT_TYPE){var De=s*Y.nb_1[ye][we];De>0?le[we]=Math.min(et,De):le[we]=Math.min(et,te[we]*h)}else{var Te=a*Y.nb_2[ye][we],Ge=s*Y.nb_1[ye][we],De;Te<=0&&(Te=et),Ge<=0&&(Ge=et),Y.blocktype_old[ye&1]==rt.NORM_TYPE?De=Math.min(Ge,Te):De=Ge,le[we]=Math.min(et,De)}Y.nb_2[ye][we]=Y.nb_1[ye][we],Y.nb_1[ye][we]=et,He=me[we],He*=Y.minval_l[we],He*=bt,le[we]>He&&(le[we]=He),Y.masking_lower>1&&(le[we]*=Y.masking_lower),le[we]>te[we]&&(le[we]=te[we]),Y.masking_lower<1&&(le[we]*=Y.masking_lower),rn(le[we]>=0)}for(;we<rt.CBANDS;++we)te[we]=0,le[we]=0}function ie(Y,oe){var te=Y.internal_flags;Y.short_blocks==ji.short_block_coupled&&!(oe[0]!=0&&oe[1]!=0)&&(oe[0]=oe[1]=0);for(var le=0;le<te.channels_out;le++)Y.short_blocks==ji.short_block_dispensed&&(oe[le]=1),Y.short_blocks==ji.short_block_forced&&(oe[le]=0)}function Ce(Y,oe,te){for(var le=Y.internal_flags,ye=0;ye<le.channels_out;ye++){var me=rt.NORM_TYPE;oe[ye]!=0?(rn(le.blocktype_old[ye]!=rt.START_TYPE),le.blocktype_old[ye]==rt.SHORT_TYPE&&(me=rt.STOP_TYPE)):(me=rt.SHORT_TYPE,le.blocktype_old[ye]==rt.NORM_TYPE&&(le.blocktype_old[ye]=rt.START_TYPE),le.blocktype_old[ye]==rt.STOP_TYPE&&(le.blocktype_old[ye]=rt.SHORT_TYPE)),te[ye]=le.blocktype_old[ye],le.blocktype_old[ye]=me}}function Se(Y,oe,te,le,ye,me,Ie){for(var Oe=me*2,we=me>0?Math.pow(10,ye):1,Ye,He,et=0;et<Ie;++et){var bt=Y[2][et],Nt=Y[3][et],ct=oe[0][et],Ot=oe[1][et],Le=oe[2][et],qe=oe[3][et];if(ct<=1.58*Ot&&Ot<=1.58*ct){var De=te[et]*Nt,Te=te[et]*bt;He=Math.max(Le,Math.min(qe,De)),Ye=Math.max(qe,Math.min(Le,Te))}else He=Le,Ye=qe;if(me>0){var Ge,nt,Tt=le[et]*we;if(Ge=Math.min(Math.max(ct,Tt),Math.max(Ot,Tt)),Le=Math.max(He,Tt),qe=Math.max(Ye,Tt),nt=Le+qe,nt>0&&Ge*Oe<nt){var Kt=Ge*Oe/nt;Le*=Kt,qe*=Kt}He=Math.min(Le,He),Ye=Math.min(qe,Ye)}He>bt&&(He=bt),Ye>Nt&&(Ye=Nt),oe[2][et]=He,oe[3][et]=Ye}}this.L3psycho_anal_vbr=function(Y,oe,te,le,ye,me,Ie,Oe,we,Ye){var He=Y.internal_flags,et,bt,Nt=ks(rt.HBLKSIZE),ct=Xa([3,rt.HBLKSIZE_s]),Ot=Xa([2,rt.BLKSIZE]),Le=Xa([2,3,rt.BLKSIZE_s]),qe=Xa([4,rt.CBANDS]),De=Xa([4,rt.CBANDS]),Te=Xa([4,3]),Ge=.6,nt=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Tt=li(2),Kt=Y.mode==e.JOINT_STEREO?4:He.channels_out;Je(Y,oe,te,le,ye,me,we,Te,nt,Tt),ie(Y,Tt);{for(var dt=0;dt<Kt;dt++){var $t=dt&1;et=Ot,Re(Y,oe,te,dt,le,Nt,et,$t),Xe(Y,le,dt,Nt),Tt[$t]!=0?de(He,Nt,qe[dt],De[dt],dt):ht(He,dt)}Tt[0]+Tt[1]==2&&Y.mode==e.JOINT_STEREO&&Se(qe,De,He.mld_cb_l,He.ATH.cb_l,Y.ATHlower*He.ATH.adjust,Y.msfix,He.npart_l);for(var dt=0;dt<Kt;dt++){var $t=dt&1;Tt[$t]!=0&&Z(He,qe[dt],De[dt],dt)}}{for(var Gt=0;Gt<3;Gt++){for(var dt=0;dt<Kt;++dt){var $t=dt&1;Tt[$t]!=0?st(He,dt,Gt):(bt=Le,Ze(Y,oe,te,dt,Gt,ct,bt,$t),ee(Y,ct,qe[dt],De[dt],dt,Gt))}Tt[0]+Tt[1]==0&&Y.mode==e.JOINT_STEREO&&Se(qe,De,He.mld_cb_s,He.ATH.cb_s,Y.ATHlower*He.ATH.adjust,Y.msfix,He.npart_s);for(var dt=0;dt<Kt;++dt){var $t=dt&1;Tt[$t]==0&&Q(He,qe[dt],De[dt],dt,Gt)}}for(var dt=0;dt<Kt;dt++){var $t=dt&1;if(Tt[$t]==0)for(var mn=0;mn<rt.SBMAX_s;mn++){for(var On=ks(3),Gt=0;Gt<3;Gt++){var Rn=He.thm[dt].s[mn][Gt];if(Rn*=u,nt[dt][Gt]>=2||nt[dt][Gt+1]==1){var gn=Gt!=0?Gt-1:2,wn=q(He.thm[dt].s[mn][gn],Rn,m*Ge);Rn=Math.min(Rn,wn)}else if(nt[dt][Gt]==1){var gn=Gt!=0?Gt-1:2,wn=q(He.thm[dt].s[mn][gn],Rn,h*Ge);Rn=Math.min(Rn,wn)}else if(Gt!=0&&nt[dt][Gt-1]==3||Gt==0&&He.nsPsy.lastAttacks[dt]==3){var gn=Gt!=2?Gt+1:0,wn=q(He.thm[dt].s[mn][gn],Rn,h*Ge);Rn=Math.min(Rn,wn)}Rn*=Te[dt][Gt],On[Gt]=Rn}for(var Gt=0;Gt<3;Gt++)He.thm[dt].s[mn][Gt]=On[Gt]}}}for(var dt=0;dt<Kt;dt++)He.nsPsy.lastAttacks[dt]=nt[dt][2];Ce(Y,Tt,Ye);for(var dt=0;dt<Kt;dt++){var ls,ns,Fs,gt;dt>1?(ls=Oe,ns=-2,Fs=rt.NORM_TYPE,(Ye[0]==rt.SHORT_TYPE||Ye[1]==rt.SHORT_TYPE)&&(Fs=rt.SHORT_TYPE),gt=me[le][dt-2]):(ls=Ie,ns=0,Fs=Ye[dt],gt=ye[le][dt]),Fs==rt.SHORT_TYPE?ls[ns+dt]=he(gt,He.masking_lower):ls[ns+dt]=ne(gt,He.masking_lower),Y.analysis&&(He.pinfo.pe[le][dt]=ls[ns+dt])}return 0};function je(Y,oe){var te=Y,le;return te>=0?le=-te*27:le=te*oe,le<=-72?0:Math.exp(le*T)}function Ke(Y){var oe=0,te=0;{var le=0,ye,me;for(le=0;je(le,Y)>1e-20;le-=1);for(ye=le,me=0;Math.abs(me-ye)>1e-12;)le=(me+ye)/2,je(le,Y)>0?me=le:ye=le;oe=ye}{var le=0,ye,me;for(le=0;je(le,Y)>1e-20;le+=1);for(ye=0,me=le;Math.abs(me-ye)>1e-12;)le=(me+ye)/2,je(le,Y)>0?ye=le:me=le;te=me}{var Ie=0,Oe=1e3,we;for(we=0;we<=Oe;++we){var le=oe+we*(te-oe)/Oe,Ye=je(le,Y);Ie+=Ye}{var He=(Oe+1)/(Ie*(te-oe));return He}}}function $e(Y){var oe,te,le,ye;return oe=Y,oe>=0?oe*=3:oe*=1.5,oe>=.5&&oe<=2.5?(ye=oe-.5,te=8*(ye*ye-2*ye)):te=0,oe+=.474,le=15.811389+7.5*oe-17.5*Math.sqrt(1+oe*oe),le<=-60?0:(oe=Math.exp((te+le)*T),oe/=.6609193,oe)}function Be(Y){return Y<0&&(Y=0),Y=Y*.001,13*Math.atan(.76*Y)+3.5*Math.atan(Y*Y/(7.5*7.5))}function Ue(Y,oe,te,le,ye,me,Ie,Oe,we,Ye,He,et){var bt=ks(rt.CBANDS+1),Nt=Oe/(et>15?2*576:2*192),ct=li(rt.HBLKSIZE),Ot;Oe/=we;var Le=0,qe=0;for(Ot=0;Ot<rt.CBANDS;Ot++){var De,Te;for(De=Be(Oe*Le),bt[Ot]=Oe*Le,Te=Le;Be(Oe*Te)-De<i&&Te<=we/2;Te++);for(Y[Ot]=Te-Le,qe=Ot+1;Le<Te;)rn(Le<rt.HBLKSIZE),ct[Le++]=Ot;if(Le>we/2){Le=we/2,++Ot;break}}rn(Ot<rt.CBANDS),bt[Ot]=Oe*Le;for(var Ge=0;Ge<et;Ge++){var nt,Tt,Kt,dt,$t;Kt=Ye[Ge],dt=Ye[Ge+1],nt=0|Math.floor(.5+He*(Kt-.5)),nt<0&&(nt=0),Tt=0|Math.floor(.5+He*(dt-.5)),Tt>we/2&&(Tt=we/2),te[Ge]=(ct[nt]+ct[Tt])/2,oe[Ge]=ct[Tt];var Gt=Nt*dt;Ie[Ge]=(Gt-bt[oe[Ge]])/(bt[oe[Ge]+1]-bt[oe[Ge]]),Ie[Ge]<0?Ie[Ge]=0:Ie[Ge]>1&&(Ie[Ge]=1),$t=Be(Oe*Ye[Ge]*He),$t=Math.min($t,15.5)/15.5,me[Ge]=Math.pow(10,1.25*(1-Math.cos(Math.PI*$t))-2.5)}Le=0;for(var mn=0;mn<qe;mn++){var On=Y[mn],De,Rn;De=Be(Oe*Le),Rn=Be(Oe*(Le+On-1)),le[mn]=.5*(De+Rn),De=Be(Oe*(Le-.5)),Rn=Be(Oe*(Le+On-.5)),ye[mn]=Rn-De,Le+=On}return qe}function ge(Y,oe,te,le,ye,me){var Ie=Xa([rt.CBANDS,rt.CBANDS]),Oe,we=0;if(me)for(var Ye=0;Ye<oe;Ye++)for(Oe=0;Oe<oe;Oe++){var He=$e(te[Ye]-te[Oe])*le[Oe];Ie[Ye][Oe]=He*ye[Ye]}else for(Oe=0;Oe<oe;Oe++)for(var et=15+Math.min(21/te[Oe],12),bt=Ke(et),Ye=0;Ye<oe;Ye++){var He=bt*je(te[Ye]-te[Oe],et)*le[Oe];Ie[Ye][Oe]=He*ye[Ye]}for(var Ye=0;Ye<oe;Ye++){for(Oe=0;Oe<oe&&!(Ie[Ye][Oe]>0);Oe++);for(Y[Ye][0]=Oe,Oe=oe-1;Oe>0&&!(Ie[Ye][Oe]>0);Oe--);Y[Ye][1]=Oe,we+=Y[Ye][1]-Y[Ye][0]+1}for(var Nt=ks(we),ct=0,Ye=0;Ye<oe;Ye++)for(Oe=Y[Ye][0];Oe<=Y[Ye][1];Oe++)Nt[ct++]=Ie[Ye][Oe];return Nt}function ae(Y){var oe=Be(Y);return oe=Math.min(oe,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*oe))-2.5)}this.psymodel_init=function(Y){var oe=Y.internal_flags,te,le=!0,ye=13,me=24,Ie=0,Oe=0,we=-8.25,Ye=-4.5,He=ks(rt.CBANDS),et=ks(rt.CBANDS),bt=ks(rt.CBANDS),Nt=Y.out_samplerate;switch(Y.experimentalZ){default:case 0:le=!0;break;case 1:le=!(Y.VBR==zi.vbr_mtrh||Y.VBR==zi.vbr_mt);break;case 2:le=!1;break;case 3:ye=8,Ie=-1.75,Oe=-.0125,we=-8.25,Ye=-2.25;break}for(oe.ms_ener_ratio_old=.25,oe.blocktype_old[0]=oe.blocktype_old[1]=rt.NORM_TYPE,te=0;te<4;++te){for(var Le=0;Le<rt.CBANDS;++Le)oe.nb_1[te][Le]=1e20,oe.nb_2[te][Le]=1e20,oe.nb_s1[te][Le]=oe.nb_s2[te][Le]=1;for(var ct=0;ct<rt.SBMAX_l;ct++)oe.en[te].l[ct]=1e20,oe.thm[te].l[ct]=1e20;for(var Le=0;Le<3;++Le){for(var ct=0;ct<rt.SBMAX_s;ct++)oe.en[te].s[ct][Le]=1e20,oe.thm[te].s[ct][Le]=1e20;oe.nsPsy.lastAttacks[te]=0}for(var Le=0;Le<9;Le++)oe.nsPsy.last_en_subshort[te][Le]=10}for(oe.loudness_sq_save[0]=oe.loudness_sq_save[1]=0,oe.npart_l=Ue(oe.numlines_l,oe.bo_l,oe.bm_l,He,et,oe.mld_l,oe.PSY.bo_l_weight,Nt,rt.BLKSIZE,oe.scalefac_band.l,rt.BLKSIZE/(2*576),rt.SBMAX_l),rn(oe.npart_l<rt.CBANDS),te=0;te<oe.npart_l;te++){var Ot=Ie;He[te]>=ye&&(Ot=Oe*(He[te]-ye)/(me-ye)+Ie*(me-He[te])/(me-ye)),bt[te]=Math.pow(10,Ot/10),oe.numlines_l[te]>0?oe.rnumlines_l[te]=1/oe.numlines_l[te]:oe.rnumlines_l[te]=0}oe.s3_ll=ge(oe.s3ind,oe.npart_l,He,et,bt,le);var Le=0;for(te=0;te<oe.npart_l;te++){var qe;qe=J0.MAX_VALUE;for(var De=0;De<oe.numlines_l[te];De++,Le++){var Te=Nt*Le/(1e3*rt.BLKSIZE),Ge;Ge=this.ATHformula(Te*1e3,Y)-20,Ge=Math.pow(10,.1*Ge),Ge*=oe.numlines_l[te],qe>Ge&&(qe=Ge)}oe.ATH.cb_l[te]=qe,qe=-20+He[te]*20/10,qe>6&&(qe=100),qe<-15&&(qe=-15),qe-=8,oe.minval_l[te]=Math.pow(10,qe/10)*oe.numlines_l[te]}for(oe.npart_s=Ue(oe.numlines_s,oe.bo_s,oe.bm_s,He,et,oe.mld_s,oe.PSY.bo_s_weight,Nt,rt.BLKSIZE_s,oe.scalefac_band.s,rt.BLKSIZE_s/(2*192),rt.SBMAX_s),rn(oe.npart_s<rt.CBANDS),Le=0,te=0;te<oe.npart_s;te++){var qe,Ot=we;He[te]>=ye&&(Ot=Ye*(He[te]-ye)/(me-ye)+we*(me-He[te])/(me-ye)),bt[te]=Math.pow(10,Ot/10),qe=J0.MAX_VALUE;for(var De=0;De<oe.numlines_s[te];De++,Le++){var Te=Nt*Le/(1e3*rt.BLKSIZE_s),Ge;Ge=this.ATHformula(Te*1e3,Y)-20,Ge=Math.pow(10,.1*Ge),Ge*=oe.numlines_s[te],qe>Ge&&(qe=Ge)}oe.ATH.cb_s[te]=qe,qe=-7+He[te]*7/12,He[te]>12&&(qe*=1+Math.log(1+qe)*3.1),He[te]<12&&(qe*=1+Math.log(1-qe)*2.3),qe<-15&&(qe=-15),qe-=8,oe.minval_s[te]=Math.pow(10,qe/10)*oe.numlines_s[te]}oe.s3_ss=ge(oe.s3ind_s,oe.npart_s,He,et,bt,le),H(),t.init_fft(oe),oe.decay=Math.exp(-1*n/(d*Nt/192));{var nt;nt=_,Y.exp_nspsytune&2&&(nt=1),Math.abs(Y.msfix)>0&&(nt=Y.msfix),Y.msfix=nt;for(var Tt=0;Tt<oe.npart_l;Tt++)oe.s3ind[Tt][1]>oe.npart_l-1&&(oe.s3ind[Tt][1]=oe.npart_l-1)}var Kt=576*oe.mode_gr/Nt;if(oe.ATH.decay=Math.pow(10,-12/10*Kt),oe.ATH.adjust=.01,oe.ATH.adjustLimit=1,rn(oe.bo_l[rt.SBMAX_l-1]<=oe.npart_l),rn(oe.bo_s[rt.SBMAX_s-1]<=oe.npart_s),Y.ATHtype!=-1){var Te,dt=Y.out_samplerate/rt.BLKSIZE,$t=0;for(Te=0,te=0;te<rt.BLKSIZE/2;++te)Te+=dt,oe.ATH.eql_w[te]=1/Math.pow(10,this.ATHformula(Te,Y)/10),$t+=oe.ATH.eql_w[te];for($t=1/$t,te=rt.BLKSIZE/2;--te>=0;)oe.ATH.eql_w[te]*=$t}{for(var Tt=Le=0;Tt<oe.npart_s;++Tt)for(te=0;te<oe.numlines_s[Tt];++te)++Le;for(var Tt=Le=0;Tt<oe.npart_l;++Tt)for(te=0;te<oe.numlines_l[Tt];++te)++Le}for(Le=0,te=0;te<oe.npart_l;te++){var Te=Nt*(Le+oe.numlines_l[te]/2)/(1*rt.BLKSIZE);oe.mld_cb_l[te]=ae(Te),Le+=oe.numlines_l[te]}for(;te<rt.CBANDS;++te)oe.mld_cb_l[te]=1;for(Le=0,te=0;te<oe.npart_s;te++){var Te=Nt*(Le+oe.numlines_s[te]/2)/(1*rt.BLKSIZE_s);oe.mld_cb_s[te]=ae(Te),Le+=oe.numlines_s[te]}for(;te<rt.CBANDS;++te)oe.mld_cb_s[te]=1;return 0};function ve(Y,oe){Y<-.3&&(Y=3410),Y/=1e3,Y=Math.max(.1,Y);var te=3.64*Math.pow(Y,-.8)-6.8*Math.exp(-.6*Math.pow(Y-3.4,2))+6*Math.exp(-.15*Math.pow(Y-8.7,2))+(.6+.04*oe)*.001*Math.pow(Y,4);return te}this.ATHformula=function(Y,oe){var te;switch(oe.ATHtype){case 0:te=ve(Y,9);break;case 1:te=ve(Y,-1);break;case 2:te=ve(Y,0);break;case 3:te=ve(Y,1)+6;break;case 4:te=ve(Y,oe.ATHcurve);break;default:te=ve(Y,0);break}return te}}var t2e=e2e,n2e=hd;function s2e(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=n2e.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var a2e=s2e,o2e=pa(),fI={};fI.SFBMAX=o2e.SBMAX_s*3;var Up=fI,gI=ms,l2e=gI.new_float,ii=gI.new_int,Kh=Up;function i2e(){this.xr=l2e(576),this.l3_enc=ii(576),this.scalefac=ii(Kh.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=ii(3),this.subblock_gain=ii(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=ii(Kh.SFBMAX),this.window=ii(Kh.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=ii(4),this.max_nonzero_coeff=0;var e=this;function t(s){return new Int32Array(s)}function n(s){return new Float32Array(s)}this.assign=function(s){e.xr=n(s.xr),e.l3_enc=t(s.l3_enc),e.scalefac=t(s.scalefac),e.xrpow_max=s.xrpow_max,e.part2_3_length=s.part2_3_length,e.big_values=s.big_values,e.count1=s.count1,e.global_gain=s.global_gain,e.scalefac_compress=s.scalefac_compress,e.block_type=s.block_type,e.mixed_block_flag=s.mixed_block_flag,e.table_select=t(s.table_select),e.subblock_gain=t(s.subblock_gain),e.region0_count=s.region0_count,e.region1_count=s.region1_count,e.preflag=s.preflag,e.scalefac_scale=s.scalefac_scale,e.count1table_select=s.count1table_select,e.part2_length=s.part2_length,e.sfb_lmax=s.sfb_lmax,e.sfb_smin=s.sfb_smin,e.psy_lmax=s.psy_lmax,e.sfbmax=s.sfbmax,e.psymax=s.psymax,e.sfbdivide=s.sfbdivide,e.width=t(s.width),e.window=t(s.window),e.count1bits=s.count1bits,e.sfb_partition_table=s.sfb_partition_table.slice(0),e.slen=t(s.slen),e.max_nonzero_coeff=s.max_nonzero_coeff}}var U_=i2e,r2e=ms,eE=r2e.new_int,c2e=U_;function d2e(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[eE(4),eE(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new c2e}var u2e=d2e,_I=ms,jd=_I.System,Yd=_I.new_int,Xd=pa();function p2e(e,t,n,s){this.l=Yd(1+Xd.SBMAX_l),this.s=Yd(1+Xd.SBMAX_s),this.psfb21=Yd(1+Xd.PSFB21),this.psfb12=Yd(1+Xd.PSFB12);var a=this.l,o=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],jd.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),jd.arraycopy(this.arrS,0,o,0,Math.min(this.arrS.length,this.s.length)),jd.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),jd.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var vI=p2e,G_=ms,zh=G_.new_float,m2e=G_.new_float_n,h2e=G_.new_int,tE=pa();function f2e(){this.last_en_subshort=m2e([4,9]),this.lastAttacks=h2e(4),this.pefirbuf=zh(19),this.longfact=zh(tE.SBMAX_l),this.shortfact=zh(tE.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var g2e=f2e;function _2e(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var v2e=_2e,Fr=ms,b2e=Fr.new_byte,E2e=Fr.new_double,qa=Fr.new_float,ri=Fr.new_float_n,po=Fr.new_int,qd=Fr.new_int_n,T2e=u2e,A2e=vI,y2e=g2e,S2e=v2e,nE=mI(),As=pa(),I2e=Up;ul.MFSIZE=3*1152+As.ENCDELAY-As.MDCTDELAY;ul.MAX_HEADER_BUF=256;ul.MAX_BITS_PER_CHANNEL=4095;ul.MAX_BITS_PER_GRANULE=7680;ul.BPC=320;function ul(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=ri([2,ul.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new T2e,this.ms_ratio=qa(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=po(2),this.CurrentStep=po(2),this.masking_lower=0,this.bv_scf=po(576),this.pseudohalf=po(I2e.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*ul.BPC+1),this.itime=E2e(2),this.sideinfo_len=0,this.sb_sample=ri([2,2,18,As.SBLIMIT]),this.amp_filter=qa(32);function t(){this.write_timing=0,this.ptr=0,this.buf=b2e(e)}this.header=new Array(ul.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new A2e,this.minval_l=qa(As.CBANDS),this.minval_s=qa(As.CBANDS),this.nb_1=ri([4,As.CBANDS]),this.nb_2=ri([4,As.CBANDS]),this.nb_s1=ri([4,As.CBANDS]),this.nb_s2=ri([4,As.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=qa(4),this.loudness_sq=ri([2,2]),this.loudness_sq_save=qa(2),this.mld_l=qa(As.SBMAX_l),this.mld_s=qa(As.SBMAX_s),this.bm_l=po(As.SBMAX_l),this.bo_l=po(As.SBMAX_l),this.bm_s=po(As.SBMAX_s),this.bo_s=po(As.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=qd([As.CBANDS,2]),this.s3ind_s=qd([As.CBANDS,2]),this.numlines_s=po(As.CBANDS),this.numlines_l=po(As.CBANDS),this.rnumlines_l=qa(As.CBANDS),this.mld_cb_l=qa(As.CBANDS),this.mld_cb_s=qa(As.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=qa(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=po(2),this.nsPsy=new y2e,this.VBR_seek_table=new S2e,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=qd([16,5]),this.bitrate_blockType_Hist=qd([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new nE;for(var n=0;n<this.thm.length;n++)this.thm[n]=new nE;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var Gp=ul,C2e=ms,ci=C2e.new_float,di=pa();function x2e(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=ci(di.SBMAX_l),this.s=ci(di.SBMAX_s),this.psfb21=ci(di.PSFB21),this.psfb12=ci(di.PSFB12),this.cb_l=ci(di.CBANDS),this.cb_s=ci(di.CBANDS),this.eql_w=ci(di.BLKSIZE/2)}var N2e=x2e,bI=ms,Oa=bI.System,sE=bI.Arrays;Cs.STEPS_per_dB=100;Cs.MAX_dB=120;Cs.GAIN_NOT_ENOUGH_SAMPLES=-24601;Cs.GAIN_ANALYSIS_ERROR=0;Cs.GAIN_ANALYSIS_OK=1;Cs.INIT_GAIN_ANALYSIS_ERROR=0;Cs.INIT_GAIN_ANALYSIS_OK=1;Cs.YULE_ORDER=10;Cs.MAX_ORDER=Cs.YULE_ORDER;Cs.MAX_SAMP_FREQ=48e3;Cs.RMS_WINDOW_TIME_NUMERATOR=1;Cs.RMS_WINDOW_TIME_DENOMINATOR=20;Cs.MAX_SAMPLES_PER_WINDOW=Cs.MAX_SAMP_FREQ*Cs.RMS_WINDOW_TIME_NUMERATOR/Cs.RMS_WINDOW_TIME_DENOMINATOR+1;function Cs(){var e=64.82,t=.95,n=Cs.RMS_WINDOW_TIME_NUMERATOR,s=Cs.RMS_WINDOW_TIME_DENOMINATOR,a=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],o=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function l(m,h,_,g,T,S){for(;T--!=0;)_[g]=1e-10+m[h+0]*S[0]-_[g-1]*S[1]+m[h-1]*S[2]-_[g-2]*S[3]+m[h-2]*S[4]-_[g-3]*S[5]+m[h-3]*S[6]-_[g-4]*S[7]+m[h-4]*S[8]-_[g-5]*S[9]+m[h-5]*S[10]-_[g-6]*S[11]+m[h-6]*S[12]-_[g-7]*S[13]+m[h-7]*S[14]-_[g-8]*S[15]+m[h-8]*S[16]-_[g-9]*S[17]+m[h-9]*S[18]-_[g-10]*S[19]+m[h-10]*S[20],++g,++h}function i(m,h,_,g,T,S){for(;T--!=0;)_[g]=m[h+0]*S[0]-_[g-1]*S[1]+m[h-1]*S[2]-_[g-2]*S[3]+m[h-2]*S[4],++g,++h}function r(m,h){for(var _=0;_<MAX_ORDER;_++)m.linprebuf[_]=m.lstepbuf[_]=m.loutbuf[_]=m.rinprebuf[_]=m.rstepbuf[_]=m.routbuf[_]=0;switch(0|h){case 48e3:m.reqindex=0;break;case 44100:m.reqindex=1;break;case 32e3:m.reqindex=2;break;case 24e3:m.reqindex=3;break;case 22050:m.reqindex=4;break;case 16e3:m.reqindex=5;break;case 12e3:m.reqindex=6;break;case 11025:m.reqindex=7;break;case 8e3:m.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return m.sampleWindow=0|(h*n+s-1)/s,m.lsum=0,m.rsum=0,m.totsamp=0,sE.ill(m.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(m,h){return r(m,h)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(m.linpre=MAX_ORDER,m.rinpre=MAX_ORDER,m.lstep=MAX_ORDER,m.rstep=MAX_ORDER,m.lout=MAX_ORDER,m.rout=MAX_ORDER,sE.fill(m.B,0),INIT_GAIN_ANALYSIS_OK)};function d(m){return m*m}this.AnalyzeSamples=function(m,h,_,g,T,S,b){var A,y,x,$,N,w,D;if(S==0)return GAIN_ANALYSIS_OK;switch(D=0,N=S,b){case 1:g=h,T=_;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(S<MAX_ORDER?(Oa.arraycopy(h,_,m.linprebuf,MAX_ORDER,S),Oa.arraycopy(g,T,m.rinprebuf,MAX_ORDER,S)):(Oa.arraycopy(h,_,m.linprebuf,MAX_ORDER,MAX_ORDER),Oa.arraycopy(g,T,m.rinprebuf,MAX_ORDER,MAX_ORDER));N>0;){w=N>m.sampleWindow-m.totsamp?m.sampleWindow-m.totsamp:N,D<MAX_ORDER?(A=m.linpre+D,y=m.linprebuf,x=m.rinpre+D,$=m.rinprebuf,w>MAX_ORDER-D&&(w=MAX_ORDER-D)):(A=_+D,y=h,x=T+D,$=g),l(y,A,m.lstepbuf,m.lstep+m.totsamp,w,a[m.reqindex]),l($,x,m.rstepbuf,m.rstep+m.totsamp,w,a[m.reqindex]),i(m.lstepbuf,m.lstep+m.totsamp,m.loutbuf,m.lout+m.totsamp,w,o[m.reqindex]),i(m.rstepbuf,m.rstep+m.totsamp,m.routbuf,m.rout+m.totsamp,w,o[m.reqindex]),A=m.lout+m.totsamp,y=m.loutbuf,x=m.rout+m.totsamp,$=m.routbuf;for(var H=w%8;H--!=0;)m.lsum+=d(y[A++]),m.rsum+=d($[x++]);for(H=w/8;H--!=0;)m.lsum+=d(y[A+0])+d(y[A+1])+d(y[A+2])+d(y[A+3])+d(y[A+4])+d(y[A+5])+d(y[A+6])+d(y[A+7]),A+=8,m.rsum+=d($[x+0])+d($[x+1])+d($[x+2])+d($[x+3])+d($[x+4])+d($[x+5])+d($[x+6])+d($[x+7]),x+=8;if(N-=w,D+=w,m.totsamp+=w,m.totsamp==m.sampleWindow){var B=Cs.STEPS_per_dB*10*Math.log10((m.lsum+m.rsum)/m.totsamp*.5+1e-37),k=B<=0?0:0|B;k>=m.A.length&&(k=m.A.length-1),m.A[k]++,m.lsum=m.rsum=0,Oa.arraycopy(m.loutbuf,m.totsamp,m.loutbuf,0,MAX_ORDER),Oa.arraycopy(m.routbuf,m.totsamp,m.routbuf,0,MAX_ORDER),Oa.arraycopy(m.lstepbuf,m.totsamp,m.lstepbuf,0,MAX_ORDER),Oa.arraycopy(m.rstepbuf,m.totsamp,m.rstepbuf,0,MAX_ORDER),m.totsamp=0}if(m.totsamp>m.sampleWindow)return GAIN_ANALYSIS_ERROR}return S<MAX_ORDER?(Oa.arraycopy(m.linprebuf,S,m.linprebuf,0,MAX_ORDER-S),Oa.arraycopy(m.rinprebuf,S,m.rinprebuf,0,MAX_ORDER-S),Oa.arraycopy(h,_,m.linprebuf,MAX_ORDER-S,S),Oa.arraycopy(g,T,m.rinprebuf,MAX_ORDER-S,S)):(Oa.arraycopy(h,_+S-MAX_ORDER,m.linprebuf,0,MAX_ORDER),Oa.arraycopy(g,T+S-MAX_ORDER,m.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function u(m,h){var _,g=0;for(_=0;_<h;_++)g+=m[_];if(g==0)return GAIN_NOT_ENOUGH_SAMPLES;var T=0|Math.ceil(g*(1-t));for(_=h;_-- >0&&!((T-=m[_])<=0););return e-_/Cs.STEPS_per_dB}this.GetTitleGain=function(m){for(var h=u(m.A,m.A.length),_=0;_<m.A.length;_++)m.B[_]+=m.A[_],m.A[_]=0;for(var _=0;_<MAX_ORDER;_++)m.linprebuf[_]=m.lstepbuf[_]=m.loutbuf[_]=m.rinprebuf[_]=m.rstepbuf[_]=m.routbuf[_]=0;return m.totsamp=0,m.lsum=m.rsum=0,h}}var EI=Cs,TI=ms,Yi=TI.new_float,aE=TI.new_int,wa=EI;function O2e(){this.linprebuf=Yi(wa.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Yi(wa.MAX_SAMPLES_PER_WINDOW+wa.MAX_ORDER),this.lstep=0,this.loutbuf=Yi(wa.MAX_SAMPLES_PER_WINDOW+wa.MAX_ORDER),this.lout=0,this.rinprebuf=Yi(wa.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Yi(wa.MAX_SAMPLES_PER_WINDOW+wa.MAX_ORDER),this.rstep=0,this.routbuf=Yi(wa.MAX_SAMPLES_PER_WINDOW+wa.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=aE(0|wa.STEPS_per_dB*wa.MAX_dB),this.B=aE(0|wa.STEPS_per_dB*wa.MAX_dB)}var w2e=O2e;function R2e(e){this.bits=e}var AI=R2e,V_=ms,oE=V_.new_float,$2e=V_.new_int,lE=V_.assert,M2e=AI,iE=pa(),k2e=Up,L2e=Gp;function D2e(e){var t=e;this.quantize=t,this.iteration_loop=function(n,s,a,o){var l=n.internal_flags,i=oE(k2e.SFBMAX),r=oE(576),d=$2e(2),u=0,m,h=l.l3_side,_=new M2e(u);this.quantize.rv.ResvFrameBegin(n,_),u=_.bits;for(var g=0;g<l.mode_gr;g++){m=this.quantize.qupvt.on_pe(n,s,d,u,g,g),l.mode_ext==iE.MPG_MD_MS_LR&&(this.quantize.ms_convert(l.l3_side,g),this.quantize.qupvt.reduce_side(d,a[g],u,m));for(var T=0;T<l.channels_out;T++){var S,b,A=h.tt[g][T];A.block_type!=iE.SHORT_TYPE?(S=0,b=l.PSY.mask_adjust-S):(S=0,b=l.PSY.mask_adjust_short-S),l.masking_lower=Math.pow(10,b*.1),this.quantize.init_outer_loop(l,A),this.quantize.init_xrpow(l,A,r)&&(this.quantize.qupvt.calc_xmin(n,o[g][T],A,i),this.quantize.outer_loop(n,A,i,r,T,d[T])),this.quantize.iteration_finish_one(l,g,T),lE(A.part2_3_length<=L2e.MAX_BITS_PER_CHANNEL),lE(A.part2_3_length<=d[T])}}this.quantize.rv.ResvFrameEnd(l,u)}}var P2e=D2e;function kn(e,t,n,s){this.xlen=e,this.linmax=t,this.table=n,this.hlen=s}var Et={};Et.t1HB=[1,1,1,0];Et.t2HB=[1,2,1,3,1,1,3,2,0];Et.t3HB=[3,2,1,1,1,1,3,2,0];Et.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];Et.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];Et.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];Et.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];Et.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];Et.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];Et.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];Et.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];Et.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];Et.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];Et.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];Et.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];Et.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];Et.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];Et.t1l=[1,4,3,5];Et.t2l=[1,4,7,4,5,7,6,7,8];Et.t3l=[2,3,7,4,4,7,6,7,8];Et.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];Et.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];Et.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];Et.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];Et.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];Et.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];Et.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];Et.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];Et.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];Et.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];Et.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];Et.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];Et.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];Et.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];Et.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];Et.ht=[new kn(0,0,null,null),new kn(2,0,Et.t1HB,Et.t1l),new kn(3,0,Et.t2HB,Et.t2l),new kn(3,0,Et.t3HB,Et.t3l),new kn(0,0,null,null),new kn(4,0,Et.t5HB,Et.t5l),new kn(4,0,Et.t6HB,Et.t6l),new kn(6,0,Et.t7HB,Et.t7l),new kn(6,0,Et.t8HB,Et.t8l),new kn(6,0,Et.t9HB,Et.t9l),new kn(8,0,Et.t10HB,Et.t10l),new kn(8,0,Et.t11HB,Et.t11l),new kn(8,0,Et.t12HB,Et.t12l),new kn(16,0,Et.t13HB,Et.t13l),new kn(0,0,null,Et.t16_5l),new kn(16,0,Et.t15HB,Et.t15l),new kn(1,1,Et.t16HB,Et.t16l),new kn(2,3,Et.t16HB,Et.t16l),new kn(3,7,Et.t16HB,Et.t16l),new kn(4,15,Et.t16HB,Et.t16l),new kn(6,63,Et.t16HB,Et.t16l),new kn(8,255,Et.t16HB,Et.t16l),new kn(10,1023,Et.t16HB,Et.t16l),new kn(13,8191,Et.t16HB,Et.t16l),new kn(4,15,Et.t24HB,Et.t24l),new kn(5,31,Et.t24HB,Et.t24l),new kn(6,63,Et.t24HB,Et.t24l),new kn(7,127,Et.t24HB,Et.t24l),new kn(8,255,Et.t24HB,Et.t24l),new kn(9,511,Et.t24HB,Et.t24l),new kn(11,2047,Et.t24HB,Et.t24l),new kn(13,8191,Et.t24HB,Et.t24l),new kn(0,0,Et.t32HB,Et.t32l),new kn(0,0,Et.t33HB,Et.t33l)];Et.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];Et.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];Et.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];Et.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];Et.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];Et.scfsi_band=[0,6,11,16,21];var H_=Et,jh,rE;function yI(){if(rE)return jh;rE=1;var e=vI,t=ms,n=t.VbrMode,s=t.Float,a=t.Util,o=t.new_float,l=t.new_int,i=t.assert,r=pa(),d=AI,u=Gp;m.Q_MAX=257,m.Q_MAX2=116,m.LARGE_BITS=1e5,m.IXMAX_VAL=8206;function m(){var h=W_(),_=null,g=null,T=null;this.setModules=function(M,R,P){_=M,g=R,T=P};function S(M){return i(0<=M+m.Q_MAX2&&M<m.Q_MAX),D[M+m.Q_MAX2]}this.IPOW20=function(M){return i(0<=M&&M<m.Q_MAX),H[M]};var b=2220446049250313e-31,A=m.IXMAX_VAL,y=A+2,x=m.Q_MAX,$=m.Q_MAX2;m.LARGE_BITS;var N=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var w=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=w,this.sfBandIndex=[new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var D=o(x+$+1),H=o(x),B=o(y),k=o(y);this.adj43=k;function U(M,R){var P=T.ATHformula(R,M);return P-=N,P=Math.pow(10,P/10+M.ATHlower),P}function G(M){for(var R=M.internal_flags.ATH.l,P=M.internal_flags.ATH.psfb21,W=M.internal_flags.ATH.s,Q=M.internal_flags.ATH.psfb12,Z=M.internal_flags,j=M.out_samplerate,X=0;X<r.SBMAX_l;X++){var q=Z.scalefac_band.l[X],se=Z.scalefac_band.l[X+1];R[X]=s.MAX_VALUE;for(var he=q;he<se;he++){var be=he*j/1152,ne=U(M,be);R[X]=Math.min(R[X],ne)}}for(var X=0;X<r.PSFB21;X++){var q=Z.scalefac_band.psfb21[X],se=Z.scalefac_band.psfb21[X+1];P[X]=s.MAX_VALUE;for(var he=q;he<se;he++){var be=he*j/1152,ne=U(M,be);P[X]=Math.min(P[X],ne)}}for(var X=0;X<r.SBMAX_s;X++){var q=Z.scalefac_band.s[X],se=Z.scalefac_band.s[X+1];W[X]=s.MAX_VALUE;for(var he=q;he<se;he++){var be=he*j/384,ne=U(M,be);W[X]=Math.min(W[X],ne)}W[X]*=Z.scalefac_band.s[X+1]-Z.scalefac_band.s[X]}for(var X=0;X<r.PSFB12;X++){var q=Z.scalefac_band.psfb12[X],se=Z.scalefac_band.psfb12[X+1];Q[X]=s.MAX_VALUE;for(var he=q;he<se;he++){var be=he*j/384,ne=U(M,be);Q[X]=Math.min(Q[X],ne)}Q[X]*=Z.scalefac_band.s[13]-Z.scalefac_band.s[12]}if(M.noATH){for(var X=0;X<r.SBMAX_l;X++)R[X]=1e-20;for(var X=0;X<r.PSFB21;X++)P[X]=1e-20;for(var X=0;X<r.SBMAX_s;X++)W[X]=1e-20;for(var X=0;X<r.PSFB12;X++)Q[X]=1e-20}Z.ATH.floor=10*Math.log10(U(M,-1))}this.iteration_init=function(M){var R=M.internal_flags,P=R.l3_side,W;if(R.iteration_init_init==0){for(R.iteration_init_init=1,P.main_data_begin=0,G(M),B[0]=0,W=1;W<y;W++)B[W]=Math.pow(W,4/3);for(W=0;W<y-1;W++)k[W]=W+1-Math.pow(.5*(B[W]+B[W+1]),.75);for(k[W]=.5,W=0;W<x;W++)H[W]=Math.pow(2,(W-210)*-.1875);for(W=0;W<=x+$;W++)D[W]=Math.pow(2,(W-210-$)*.25);_.huffman_init(R);{var Q,Z,j,X;for(W=M.exp_nspsytune>>2&63,W>=32&&(W-=64),Q=Math.pow(10,W/4/10),W=M.exp_nspsytune>>8&63,W>=32&&(W-=64),Z=Math.pow(10,W/4/10),W=M.exp_nspsytune>>14&63,W>=32&&(W-=64),j=Math.pow(10,W/4/10),W=M.exp_nspsytune>>20&63,W>=32&&(W-=64),X=j*Math.pow(10,W/4/10),W=0;W<r.SBMAX_l;W++){var q;W<=6?q=Q:W<=13?q=Z:W<=20?q=j:q=X,R.nsPsy.longfact[W]=q}for(W=0;W<r.SBMAX_s;W++){var q;W<=5?q=Q:W<=10?q=Z:W<=11?q=j:q=X,R.nsPsy.shortfact[W]=q}}}},this.on_pe=function(M,R,P,W,Q,Z){var j=M.internal_flags,X=0,q,se=l(2),he,be=new d(X),ne=g.ResvMaxBits(M,W,be,Z);X=be.bits;var J=X+ne;for(J>u.MAX_BITS_PER_GRANULE&&(J=u.MAX_BITS_PER_GRANULE),q=0,he=0;he<j.channels_out;++he)P[he]=Math.min(u.MAX_BITS_PER_CHANNEL,X/j.channels_out),se[he]=0|P[he]*R[Q][he]/700-P[he],se[he]>W*3/4&&(se[he]=W*3/4),se[he]<0&&(se[he]=0),se[he]+P[he]>u.MAX_BITS_PER_CHANNEL&&(se[he]=Math.max(0,u.MAX_BITS_PER_CHANNEL-P[he])),q+=se[he];if(q>ne)for(he=0;he<j.channels_out;++he)se[he]=ne*se[he]/q;for(he=0;he<j.channels_out;++he)P[he]+=se[he],ne-=se[he];for(q=0,he=0;he<j.channels_out;++he)q+=P[he];if(q>u.MAX_BITS_PER_GRANULE){var ue=0;for(he=0;he<j.channels_out;++he)P[he]*=u.MAX_BITS_PER_GRANULE,P[he]/=q,ue+=P[he]}return J},this.reduce_side=function(M,R,P,W){i(M[0]+M[1]<=u.MAX_BITS_PER_GRANULE);var Q=.33*(.5-R)/.5;Q<0&&(Q=0),Q>.5&&(Q=.5);var Z=0|Q*.5*(M[0]+M[1]);Z>u.MAX_BITS_PER_CHANNEL-M[0]&&(Z=u.MAX_BITS_PER_CHANNEL-M[0]),Z<0&&(Z=0),M[1]>=125&&(M[1]-Z>125?(M[0]<P&&(M[0]+=Z),M[1]-=Z):(M[0]+=M[1]-125,M[1]=125)),Z=M[0]+M[1],Z>W&&(M[0]=W*M[0]/Z,M[1]=W*M[1]/Z),i(M[0]<=u.MAX_BITS_PER_CHANNEL),i(M[1]<=u.MAX_BITS_PER_CHANNEL),i(M[0]+M[1]<=u.MAX_BITS_PER_GRANULE)},this.athAdjust=function(M,R,P){var W=90.30873362,Q=94.82444863,Z=a.FAST_LOG10_X(R,10),j=M*M,X=0;return Z-=P,j>1e-20&&(X=1+a.FAST_LOG10_X(j,10/W)),X<0&&(X=0),Z*=X,Z+=P+W-Q,Math.pow(10,.1*Z)},this.calc_xmin=function(M,R,P,W){var Q=0,Z=M.internal_flags,j,X=0,q=0,se=Z.ATH,he=P.xr,be=M.VBR==n.vbr_mtrh?1:0,ne=Z.masking_lower;for((M.VBR==n.vbr_mtrh||M.VBR==n.vbr_mt)&&(ne=1),j=0;j<P.psy_lmax;j++){var J,ue,Ne,Re,Ze,Xe;M.VBR==n.vbr_rh||M.VBR==n.vbr_mtrh?ue=athAdjust(se.adjust,se.l[j],se.floor):ue=se.adjust*se.l[j],Ze=P.width[j],Ne=ue/Ze,Re=b,Xe=Ze>>1,J=0;do{var Qe,Je;Qe=he[X]*he[X],J+=Qe,Re+=Qe<Ne?Qe:Ne,X++,Je=he[X]*he[X],J+=Je,Re+=Je<Ne?Je:Ne,X++}while(--Xe>0);if(J>ue&&q++,j==r.SBPSY_l){var st=ue*Z.nsPsy.longfact[j];Re<st&&(Re=st)}if(be!=0&&(ue=Re),!M.ATHonly){var ht=R.en.l[j];if(ht>0){var st;st=J*R.thm.l[j]*ne/ht,be!=0&&(st*=Z.nsPsy.longfact[j]),ue<st&&(ue=st)}}be!=0?W[Q++]=ue:W[Q++]=ue*Z.nsPsy.longfact[j]}var wt=575;if(P.block_type!=r.SHORT_TYPE)for(var ee=576;ee--!=0&&h.EQ(he[ee],0);)wt=ee;P.max_nonzero_coeff=wt;for(var de=P.sfb_smin;j<P.psymax;de++,j+=3){var Ze,ie,Ce;for(M.VBR==n.vbr_rh||M.VBR==n.vbr_mtrh?Ce=athAdjust(se.adjust,se.s[de],se.floor):Ce=se.adjust*se.s[de],Ze=P.width[j],ie=0;ie<3;ie++){var J=0,ue,Ne,Re,Xe=Ze>>1;Ne=Ce/Ze,Re=b;do{var Qe,Je;Qe=he[X]*he[X],J+=Qe,Re+=Qe<Ne?Qe:Ne,X++,Je=he[X]*he[X],J+=Je,Re+=Je<Ne?Je:Ne,X++}while(--Xe>0);if(J>Ce&&q++,de==r.SBPSY_s){var st=Ce*Z.nsPsy.shortfact[de];Re<st&&(Re=st)}if(be!=0?ue=Re:ue=Ce,!M.ATHonly&&!M.ATHshort){var ht=R.en.s[de][ie];if(ht>0){var st;st=J*R.thm.s[de][ie]*ne/ht,be!=0&&(st*=Z.nsPsy.shortfact[de]),ue<st&&(ue=st)}}be!=0?W[Q++]=ue:W[Q++]=ue*Z.nsPsy.shortfact[de]}M.useTemporal&&(W[Q-3]>W[Q-3+1]&&(W[Q-3+1]+=(W[Q-3]-W[Q-3+1])*Z.decay),W[Q-3+1]>W[Q-3+2]&&(W[Q-3+2]+=(W[Q-3+1]-W[Q-3+2])*Z.decay))}return q};function L(M){this.s=M}this.calc_noise_core=function(M,R,P,W){var Q=0,Z=R.s,j=M.l3_enc;if(Z>M.count1)for(;P--!=0;){var X;X=M.xr[Z],Z++,Q+=X*X,X=M.xr[Z],Z++,Q+=X*X}else if(Z>M.big_values){var q=o(2);for(q[0]=0,q[1]=W;P--!=0;){var X;X=Math.abs(M.xr[Z])-q[j[Z]],Z++,Q+=X*X,X=Math.abs(M.xr[Z])-q[j[Z]],Z++,Q+=X*X}}else for(;P--!=0;){var X;X=Math.abs(M.xr[Z])-B[j[Z]]*W,Z++,Q+=X*X,X=Math.abs(M.xr[Z])-B[j[Z]]*W,Z++,Q+=X*X}return R.s=Z,Q},this.calc_noise=function(M,R,P,W,Q){var Z=0,j=0,X,q,se=0,he=0,be=0,ne=-20,J=0,ue=M.scalefac,Ne=0;for(W.over_SSD=0,X=0;X<M.psymax;X++){var Re=M.global_gain-(ue[Ne++]+(M.preflag!=0?w[X]:0)<<M.scalefac_scale+1)-M.subblock_gain[M.window[X]]*8,Ze=0;if(Q!=null&&Q.step[X]==Re)Ze=Q.noise[X],J+=M.width[X],P[Z++]=Ze/R[j++],Ze=Q.noise_log[X];else{var Xe=S(Re);if(q=M.width[X]>>1,J+M.width[X]>M.max_nonzero_coeff){var Qe;Qe=M.max_nonzero_coeff-J+1,Qe>0?q=Qe>>1:q=0}var Je=new L(J);Ze=this.calc_noise_core(M,Je,q,Xe),J=Je.s,Q!=null&&(Q.step[X]=Re,Q.noise[X]=Ze),Ze=P[Z++]=Ze/R[j++],Ze=a.FAST_LOG10(Math.max(Ze,1e-20)),Q!=null&&(Q.noise_log[X]=Ze)}if(Q!=null&&(Q.global_gain=M.global_gain),be+=Ze,Ze>0){var st;st=Math.max(0|Ze*10+.5,1),W.over_SSD+=st*st,se++,he+=Ze}ne=Math.max(ne,Ze)}return W.over_count=se,W.tot_noise=be,W.over_noise=he,W.max_noise=ne,se},this.set_pinfo=function(M,R,P,W,Q){var Z=M.internal_flags,j,X,q,se,he,be=R.scalefac_scale==0?.5:1,ne=R.scalefac,J=o(L3Side.SFBMAX),ue=o(L3Side.SFBMAX),Ne=new CalcNoiseResult;calc_xmin(M,P,R,J),calc_noise(R,J,ue,Ne,null);var Re=0;for(X=R.sfb_lmax,R.block_type!=r.SHORT_TYPE&&R.mixed_block_flag==0&&(X=22),j=0;j<X;j++){var Ze=Z.scalefac_band.l[j],Xe=Z.scalefac_band.l[j+1],Qe=Xe-Ze;for(se=0;Re<Xe;Re++)se+=R.xr[Re]*R.xr[Re];se/=Qe,he=1e15,Z.pinfo.en[W][Q][j]=he*se,Z.pinfo.xfsf[W][Q][j]=he*J[j]*ue[j]/Qe,P.en.l[j]>0&&!M.ATHonly?se=se/P.en.l[j]:se=0,Z.pinfo.thr[W][Q][j]=he*Math.max(se*P.thm.l[j],Z.ATH.l[j]),Z.pinfo.LAMEsfb[W][Q][j]=0,R.preflag!=0&&j>=11&&(Z.pinfo.LAMEsfb[W][Q][j]=-be*w[j]),j<r.SBPSY_l&&(i(ne[j]>=0),Z.pinfo.LAMEsfb[W][Q][j]-=be*ne[j])}if(R.block_type==r.SHORT_TYPE)for(X=j,j=R.sfb_smin;j<r.SBMAX_s;j++)for(var Ze=Z.scalefac_band.s[j],Xe=Z.scalefac_band.s[j+1],Qe=Xe-Ze,Je=0;Je<3;Je++){for(se=0,q=Ze;q<Xe;q++)se+=R.xr[Re]*R.xr[Re],Re++;se=Math.max(se/Qe,1e-20),he=1e15,Z.pinfo.en_s[W][Q][3*j+Je]=he*se,Z.pinfo.xfsf_s[W][Q][3*j+Je]=he*J[X]*ue[X]/Qe,P.en.s[j][Je]>0?se=se/P.en.s[j][Je]:se=0,(M.ATHonly||M.ATHshort)&&(se=0),Z.pinfo.thr_s[W][Q][3*j+Je]=he*Math.max(se*P.thm.s[j][Je],Z.ATH.s[j]),Z.pinfo.LAMEsfb_s[W][Q][3*j+Je]=-2*R.subblock_gain[Je],j<r.SBPSY_s&&(Z.pinfo.LAMEsfb_s[W][Q][3*j+Je]-=be*ne[X]),X++}Z.pinfo.LAMEqss[W][Q]=R.global_gain,Z.pinfo.LAMEmainbits[W][Q]=R.part2_3_length+R.part2_length,Z.pinfo.LAMEsfbits[W][Q]=R.part2_length,Z.pinfo.over[W][Q]=Ne.over_count,Z.pinfo.max_noise[W][Q]=Ne.max_noise*10,Z.pinfo.over_noise[W][Q]=Ne.over_noise*10,Z.pinfo.tot_noise[W][Q]=Ne.tot_noise*10,Z.pinfo.over_SSD[W][Q]=Ne.over_SSD}}return jh=m,jh}var Yh,cE;function SI(){if(cE)return Yh;cE=1;var e=ms,t=e.System,n=e.Arrays,s=e.new_int,a=e.assert,o=pa(),l=H_,i=U_,r=yI();function d(){var u=null;this.qupvt=null,this.setModules=function(Z){this.qupvt=Z,u=Z};function m(Z){this.bits=0|Z}var h=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function _(Z,j,X,q,se,he){var be=.5946/j;for(Z=Z>>1;Z--!=0;)se[he++]=be>X[q++]?0:1,se[he++]=be>X[q++]?0:1}function g(Z,j,X,q,se,he){Z=Z>>1;var be=Z%2;for(Z=Z>>1;Z--!=0;){var ne,J,ue,Ne,Re,Ze,Xe,Qe;ne=X[q++]*j,J=X[q++]*j,Re=0|ne,ue=X[q++]*j,Ze=0|J,Ne=X[q++]*j,Xe=0|ue,ne+=u.adj43[Re],Qe=0|Ne,J+=u.adj43[Ze],se[he++]=0|ne,ue+=u.adj43[Xe],se[he++]=0|J,Ne+=u.adj43[Qe],se[he++]=0|ue,se[he++]=0|Ne}if(be!=0){var ne,J,Re,Ze;ne=X[q++]*j,J=X[q++]*j,Re=0|ne,Ze=0|J,ne+=u.adj43[Re],J+=u.adj43[Ze],se[he++]=0|ne,se[he++]=0|J}}function T(Z,j,X,q,se){var he,be,ne=0,J,ue=0,Ne=0,Re=0,Ze=j,Xe=0,Qe=Ze,Je=0,st=Z,ht=0;for(J=se!=null&&q.global_gain==se.global_gain,q.block_type==o.SHORT_TYPE?be=38:be=21,he=0;he<=be;he++){var wt=-1;if((J||q.block_type==o.NORM_TYPE)&&(wt=q.global_gain-(q.scalefac[he]+(q.preflag!=0?u.pretab[he]:0)<<q.scalefac_scale+1)-q.subblock_gain[q.window[he]]*8),a(q.width[he]>=0),J&&se.step[he]==wt)ue!=0&&(g(ue,X,st,ht,Qe,Je),ue=0),Ne!=0&&(_(Ne,X,st,ht,Qe,Je),Ne=0);else{var ee=q.width[he];if(ne+q.width[he]>q.max_nonzero_coeff){var de;de=q.max_nonzero_coeff-ne+1,n.fill(j,q.max_nonzero_coeff,576,0),ee=de,ee<0&&(ee=0),he=be+1}if(ue==0&&Ne==0&&(Qe=Ze,Je=Xe,st=Z,ht=Re),se!=null&&se.sfb_count1>0&&he>=se.sfb_count1&&se.step[he]>0&&wt>=se.step[he]?(ue!=0&&(g(ue,X,st,ht,Qe,Je),ue=0,Qe=Ze,Je=Xe,st=Z,ht=Re),Ne+=ee):(Ne!=0&&(_(Ne,X,st,ht,Qe,Je),Ne=0,Qe=Ze,Je=Xe,st=Z,ht=Re),ue+=ee),ee<=0){Ne!=0&&(_(Ne,X,st,ht,Qe,Je),Ne=0),ue!=0&&(g(ue,X,st,ht,Qe,Je),ue=0);break}}he<=be&&(Xe+=q.width[he],Re+=q.width[he],ne+=q.width[he])}ue!=0&&(g(ue,X,st,ht,Qe,Je),ue=0),Ne!=0&&(_(Ne,X,st,ht,Qe,Je),Ne=0)}function S(Z,j,X){var q=0,se=0;do{var he=Z[j++],be=Z[j++];q<he&&(q=he),se<be&&(se=be)}while(j<X);return q<se&&(q=se),q}function b(Z,j,X,q,se,he){var be=l.ht[q].xlen*65536+l.ht[se].xlen,ne=0,J;do{var ue=Z[j++],Ne=Z[j++];ue!=0&&(ue>14&&(ue=15,ne+=be),ue*=16),Ne!=0&&(Ne>14&&(Ne=15,ne+=be),ue+=Ne),ne+=l.largetbl[ue]}while(j<X);return J=ne&65535,ne>>=16,ne>J&&(ne=J,q=se),he.bits+=ne,q}function A(Z,j,X,q){var se=0,he=l.ht[1].hlen;do{var be=Z[j+0]*2+Z[j+1];j+=2,se+=he[be]}while(j<X);return q.bits+=se,1}function y(Z,j,X,q,se){var he=0,be,ne=l.ht[q].xlen,J;q==2?J=l.table23:J=l.table56;do{var ue=Z[j+0]*ne+Z[j+1];j+=2,he+=J[ue]}while(j<X);return be=he&65535,he>>=16,he>be&&(he=be,q++),se.bits+=he,q}function x(Z,j,X,q,se){var he=0,be=0,ne=0,J=l.ht[q].xlen,ue=l.ht[q].hlen,Ne=l.ht[q+1].hlen,Re=l.ht[q+2].hlen;do{var Ze=Z[j+0]*J+Z[j+1];j+=2,he+=ue[Ze],be+=Ne[Ze],ne+=Re[Ze]}while(j<X);var Xe=q;return he>be&&(he=be,Xe++),he>ne&&(he=ne,Xe=q+2),se.bits+=he,Xe}var $=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function N(Z,j,X,q){var se=S(Z,j,X);switch(se){case 0:return se;case 1:return A(Z,j,X,q);case 2:case 3:return y(Z,j,X,$[se-1],q);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return x(Z,j,X,$[se-1],q);default:if(se>r.IXMAX_VAL)return q.bits=r.LARGE_BITS,-1;se-=15;var he;for(he=24;he<32&&!(l.ht[he].linmax>=se);he++);var be;for(be=he-8;be<24&&!(l.ht[be].linmax>=se);be++);return b(Z,j,X,be,he,q)}}this.noquant_count_bits=function(Z,j,X){var q=j.l3_enc,se=Math.min(576,j.max_nonzero_coeff+2>>1<<1);for(X!=null&&(X.sfb_count1=0);se>1&&!(q[se-1]|q[se-2]);se-=2);j.count1=se;for(var he=0,be=0;se>3;se-=4){var ne;if(((q[se-1]|q[se-2]|q[se-3]|q[se-4])&2147483647)>1)break;ne=((q[se-4]*2+q[se-3])*2+q[se-2])*2+q[se-1],he+=l.t32l[ne],be+=l.t33l[ne]}var J=he;if(j.count1table_select=0,he>be&&(J=be,j.count1table_select=1),j.count1bits=J,j.big_values=se,se==0)return J;if(j.block_type==o.SHORT_TYPE)he=3*Z.scalefac_band.s[3],he>j.big_values&&(he=j.big_values),be=j.big_values;else if(j.block_type==o.NORM_TYPE){if(he=j.region0_count=Z.bv_scf[se-2],be=j.region1_count=Z.bv_scf[se-1],a(he+be+2<o.SBPSY_l),be=Z.scalefac_band.l[he+be+2],he=Z.scalefac_band.l[he+1],be<se){var ue=new m(J);j.table_select[2]=N(q,be,se,ue),J=ue.bits}}else j.region0_count=7,j.region1_count=o.SBMAX_l-1-7-1,he=Z.scalefac_band.l[8],be=se,he>be&&(he=be);if(he=Math.min(he,se),be=Math.min(be,se),0<he){var ue=new m(J);j.table_select[0]=N(q,0,he,ue),J=ue.bits}if(he<be){var ue=new m(J);j.table_select[1]=N(q,he,be,ue),J=ue.bits}if(Z.use_best_huffman==2&&(j.part2_3_length=J,best_huffman_divide(Z,j),J=j.part2_3_length),X!=null&&j.block_type==o.NORM_TYPE){for(var Ne=0;Z.scalefac_band.l[Ne]<j.big_values;)Ne++;X.sfb_count1=Ne}return J},this.count_bits=function(Z,j,X,q){var se=X.l3_enc,he=r.IXMAX_VAL/u.IPOW20(X.global_gain);if(X.xrpow_max>he)return r.LARGE_BITS;if(T(j,se,u.IPOW20(X.global_gain),X,q),Z.substep_shaping&2)for(var be=0,ne=X.global_gain+X.scalefac_scale,J=.634521682242439/u.IPOW20(ne),ue=0;ue<X.sfbmax;ue++){var Ne=X.width[ue];if(Z.pseudohalf[ue]==0)be+=Ne;else{var Re;for(Re=be,be+=Ne;Re<be;++Re)se[Re]=j[Re]>=J?se[Re]:0}}return this.noquant_count_bits(Z,X,q)};function w(Z,j,X,q,se,he,be){for(var ne=j.big_values,J=0;J<=22;J++)q[J]=r.LARGE_BITS;for(var J=0;J<16;J++){var ue=Z.scalefac_band.l[J+1];if(ue>=ne)break;var Ne=0,Re=new m(Ne),Ze=N(X,0,ue,Re);Ne=Re.bits;for(var Xe=0;Xe<8;Xe++){var Qe=Z.scalefac_band.l[J+Xe+2];if(Qe>=ne)break;var Je=Ne;Re=new m(Je);var st=N(X,ue,Qe,Re);Je=Re.bits,q[J+Xe]>Je&&(q[J+Xe]=Je,se[J+Xe]=J,he[J+Xe]=Ze,be[J+Xe]=st)}}}function D(Z,j,X,q,se,he,be,ne){for(var J=j.big_values,ue=2;ue<o.SBMAX_l+1;ue++){var Ne=Z.scalefac_band.l[ue];if(Ne>=J)break;var Re=se[ue-2]+j.count1bits;if(X.part2_3_length<=Re)break;var Ze=new m(Re),Xe=N(q,Ne,J,Ze);Re=Ze.bits,!(X.part2_3_length<=Re)&&(X.assign(j),X.part2_3_length=Re,X.region0_count=he[ue-2],X.region1_count=ue-2-he[ue-2],X.table_select[0]=be[ue-2],X.table_select[1]=ne[ue-2],X.table_select[2]=Xe)}}this.best_huffman_divide=function(Z,j){var X=new i,q=j.l3_enc,se=s(23),he=s(23),be=s(23),ne=s(23);if(!(j.block_type==o.SHORT_TYPE&&Z.mode_gr==1)){X.assign(j),j.block_type==o.NORM_TYPE&&(w(Z,j,q,se,he,be,ne),D(Z,X,j,q,se,he,be,ne));var J=X.big_values;if(!(J==0||(q[J-2]|q[J-1])>1)&&(J=j.count1+2,!(J>576))){X.assign(j),X.count1=J;for(var ue=0,Ne=0;J>X.big_values;J-=4){var Re=((q[J-4]*2+q[J-3])*2+q[J-2])*2+q[J-1];ue+=l.t32l[Re],Ne+=l.t33l[Re]}if(X.big_values=J,X.count1table_select=0,ue>Ne&&(ue=Ne,X.count1table_select=1),X.count1bits=ue,X.block_type==o.NORM_TYPE)D(Z,X,j,q,se,he,be,ne);else{if(X.part2_3_length=ue,ue=Z.scalefac_band.l[8],ue>J&&(ue=J),ue>0){var Ze=new m(X.part2_3_length);X.table_select[0]=N(q,0,ue,Ze),X.part2_3_length=Ze.bits}if(J>ue){var Ze=new m(X.part2_3_length);X.table_select[1]=N(q,ue,J,Ze),X.part2_3_length=Ze.bits}j.part2_3_length>X.part2_3_length&&j.assign(X)}}}};var H=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],B=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],k=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],U=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];d.slen1_tab=k,d.slen2_tab=U;function G(Z,j){for(var X,q=j.tt[1][Z],se=j.tt[0][Z],he=0;he<l.scfsi_band.length-1;he++){for(X=l.scfsi_band[he];X<l.scfsi_band[he+1]&&!(se.scalefac[X]!=q.scalefac[X]&&q.scalefac[X]>=0);X++);if(X==l.scfsi_band[he+1]){for(X=l.scfsi_band[he];X<l.scfsi_band[he+1];X++)q.scalefac[X]=-1;j.scfsi[Z][he]=1}}var be=0,ne=0;for(X=0;X<11;X++)q.scalefac[X]!=-1&&(ne++,be<q.scalefac[X]&&(be=q.scalefac[X]));for(var J=0,ue=0;X<o.SBPSY_l;X++)q.scalefac[X]!=-1&&(ue++,J<q.scalefac[X]&&(J=q.scalefac[X]));for(var he=0;he<16;he++)if(be<H[he]&&J<B[he]){var Ne=k[he]*ne+U[he]*ue;q.part2_length>Ne&&(q.part2_length=Ne,q.scalefac_compress=he)}}this.best_scalefac_store=function(Z,j,X,q){var se=q.tt[j][X],he,be,ne,J,ue=0;for(ne=0,he=0;he<se.sfbmax;he++){var Ne=se.width[he];for(ne+=Ne,J=-Ne;J<0&&se.l3_enc[J+ne]==0;J++);J==0&&(se.scalefac[he]=ue=-2)}if(se.scalefac_scale==0&&se.preflag==0){var Re=0;for(he=0;he<se.sfbmax;he++)se.scalefac[he]>0&&(Re|=se.scalefac[he]);if(!(Re&1)&&Re!=0){for(he=0;he<se.sfbmax;he++)se.scalefac[he]>0&&(se.scalefac[he]>>=1);se.scalefac_scale=ue=1}}if(se.preflag==0&&se.block_type!=o.SHORT_TYPE&&Z.mode_gr==2){for(he=11;he<o.SBPSY_l&&!(se.scalefac[he]<u.pretab[he]&&se.scalefac[he]!=-2);he++);if(he==o.SBPSY_l){for(he=11;he<o.SBPSY_l;he++)se.scalefac[he]>0&&(se.scalefac[he]-=u.pretab[he]);se.preflag=ue=1}}for(be=0;be<4;be++)q.scfsi[X][be]=0;for(Z.mode_gr==2&&j==1&&q.tt[0][X].block_type!=o.SHORT_TYPE&&q.tt[1][X].block_type!=o.SHORT_TYPE&&(G(X,q),ue=0),he=0;he<se.sfbmax;he++)se.scalefac[he]==-2&&(se.scalefac[he]=0);ue!=0&&(Z.mode_gr==2?this.scale_bitcount(se):this.scale_bitcount_lsf(Z,se))};function L(Z,j){for(var X=0;X<j;++X)if(Z[X]<0)return!1;return!0}var M=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],R=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],P=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(Z){var j,X,q=0,se=0,he,be=Z.scalefac;if(a(L(be,Z.sfbmax)),Z.block_type==o.SHORT_TYPE)he=M,Z.mixed_block_flag!=0&&(he=R);else if(he=P,Z.preflag==0){for(X=11;X<o.SBPSY_l&&!(be[X]<u.pretab[X]);X++);if(X==o.SBPSY_l)for(Z.preflag=1,X=11;X<o.SBPSY_l;X++)be[X]-=u.pretab[X]}for(X=0;X<Z.sfbdivide;X++)q<be[X]&&(q=be[X]);for(;X<Z.sfbmax;X++)se<be[X]&&(se=be[X]);for(Z.part2_length=r.LARGE_BITS,j=0;j<16;j++)q<H[j]&&se<B[j]&&Z.part2_length>he[j]&&(Z.part2_length=he[j],Z.scalefac_compress=j);return Z.part2_length==r.LARGE_BITS};var W=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(Z,j){var X,q,se,he,be,ne,J,ue,Ne=s(4),Re=j.scalefac;for(j.preflag!=0?X=2:X=0,J=0;J<4;J++)Ne[J]=0;if(j.block_type==o.SHORT_TYPE){q=1;var Ze=u.nr_of_sfb_block[X][q];for(ue=0,se=0;se<4;se++)for(he=Ze[se]/3,J=0;J<he;J++,ue++)for(be=0;be<3;be++)Re[ue*3+be]>Ne[se]&&(Ne[se]=Re[ue*3+be])}else{q=0;var Ze=u.nr_of_sfb_block[X][q];for(ue=0,se=0;se<4;se++)for(he=Ze[se],J=0;J<he;J++,ue++)Re[ue]>Ne[se]&&(Ne[se]=Re[ue])}for(ne=!1,se=0;se<4;se++)Ne[se]>W[X][se]&&(ne=!0);if(!ne){var Xe,Qe,Je,st;for(j.sfb_partition_table=u.nr_of_sfb_block[X][q],se=0;se<4;se++)j.slen[se]=Q[Ne[se]];switch(Xe=j.slen[0],Qe=j.slen[1],Je=j.slen[2],st=j.slen[3],X){case 0:j.scalefac_compress=(Xe*5+Qe<<4)+(Je<<2)+st;break;case 1:j.scalefac_compress=400+(Xe*5+Qe<<2)+Je;break;case 2:j.scalefac_compress=500+Xe*3+Qe;break;default:t.err.printf(`intensity stereo not implemented yet
`);break}}if(!ne)for(a(j.sfb_partition_table!=null),j.part2_length=0,se=0;se<4;se++)j.part2_length+=j.slen[se]*j.sfb_partition_table[se];return ne};var Q=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(Z){for(var j=2;j<=576;j+=2){for(var X=0,q;Z.scalefac_band.l[++X]<j;);for(q=h[X][0];Z.scalefac_band.l[q+1]>j;)q--;for(q<0&&(q=h[X][0]),Z.bv_scf[j-2]=q,q=h[X][1];Z.scalefac_band.l[q+Z.bv_scf[j-2]+2]>j;)q--;q<0&&(q=h[X][1]),Z.bv_scf[j-1]=q}}}return Yh=d,Yh}var Xh,dE;function W_(){if(dE)return Xh;dE=1;var e=ms,t=e.System,n=e.Arrays,s=e.new_byte,a=e.new_float_n,o=e.new_int,l=e.assert,i=SI(),r=H_,d=pa(),u=Gp;m.EQ=function(h,_){return Math.abs(h)>Math.abs(_)?Math.abs(h-_)<=Math.abs(h)*1e-6:Math.abs(h-_)<=Math.abs(_)*1e-6},m.NEQ=function(h,_){return!m.EQ(h,_)};function m(){var h=K_(),_=this,g=32773,T=null,S=null,b=null,A=null;this.setModules=function(j,X,q,se){T=j,S=X,b=q,A=se};var y=null,x=0,$=0,N=0;this.getframebits=function(j){var X=j.internal_flags,q;X.bitrate_index!=0?q=r.bitrate_table[j.version][X.bitrate_index]:q=j.brate;var se=0|(j.version+1)*72e3*q/j.out_samplerate+X.padding;return 8*se};function w(j){t.arraycopy(j.header[j.w_ptr].buf,0,y,$,j.sideinfo_len),$+=j.sideinfo_len,x+=j.sideinfo_len*8,j.w_ptr=j.w_ptr+1&u.MAX_HEADER_BUF-1}function D(j,X,q){for(;q>0;){var se;N==0&&(N=8,$++,l($<h.LAME_MAXMP3BUFFER),l(j.header[j.w_ptr].write_timing>=x),j.header[j.w_ptr].write_timing==x&&w(j),y[$]=0),se=Math.min(q,N),q-=se,N-=se,y[$]|=X>>q<<N,x+=se}}function H(j,X,q){for(;q>0;){var se;N==0&&(N=8,$++,l($<h.LAME_MAXMP3BUFFER),y[$]=0),se=Math.min(q,N),q-=se,N-=se,y[$]|=X>>q<<N,x+=se}}function B(j,X){var q=j.internal_flags,se;if(X>=8&&(D(q,76,8),X-=8),X>=8&&(D(q,65,8),X-=8),X>=8&&(D(q,77,8),X-=8),X>=8&&(D(q,69,8),X-=8),X>=32){var he=b.getLameShortVersion();if(X>=32)for(se=0;se<he.length&&X>=8;++se)X-=8,D(q,he.charAt(se),8)}for(;X>=1;X-=1)D(q,q.ancillary_flag,1),q.ancillary_flag^=j.disable_reservoir?0:1}function k(j,X,q){for(var se=j.header[j.h_ptr].ptr;q>0;){var he=Math.min(q,8-(se&7));q-=he,j.header[j.h_ptr].buf[se>>3]|=X>>q<<8-(se&7)-he,se+=he}j.header[j.h_ptr].ptr=se}function U(j,X){j<<=8;for(var q=0;q<8;q++)j<<=1,X<<=1,(X^j)&65536&&(X^=g);return X}this.CRC_writeheader=function(j,X){var q=65535;q=U(X[2]&255,q),q=U(X[3]&255,q);for(var se=6;se<j.sideinfo_len;se++)q=U(X[se]&255,q);X[4]=byte(q>>8),X[5]=byte(q&255)};function G(j,X){var q=j.internal_flags,se,he,be;if(se=q.l3_side,q.header[q.h_ptr].ptr=0,n.fill(q.header[q.h_ptr].buf,0,q.sideinfo_len,0),j.out_samplerate<16e3?k(q,4094,12):k(q,4095,12),k(q,j.version,1),k(q,1,2),k(q,j.error_protection?0:1,1),k(q,q.bitrate_index,4),k(q,q.samplerate_index,2),k(q,q.padding,1),k(q,j.extension,1),k(q,j.mode.ordinal(),2),k(q,q.mode_ext,2),k(q,j.copyright,1),k(q,j.original,1),k(q,j.emphasis,2),j.error_protection&&k(q,0,16),j.version==1){for(l(se.main_data_begin>=0),k(q,se.main_data_begin,9),q.channels_out==2?k(q,se.private_bits,3):k(q,se.private_bits,5),be=0;be<q.channels_out;be++){var ne;for(ne=0;ne<4;ne++)k(q,se.scfsi[be][ne],1)}for(he=0;he<2;he++)for(be=0;be<q.channels_out;be++){var J=se.tt[he][be];k(q,J.part2_3_length+J.part2_length,12),k(q,J.big_values/2,9),k(q,J.global_gain,8),k(q,J.scalefac_compress,4),J.block_type!=d.NORM_TYPE?(k(q,1,1),k(q,J.block_type,2),k(q,J.mixed_block_flag,1),J.table_select[0]==14&&(J.table_select[0]=16),k(q,J.table_select[0],5),J.table_select[1]==14&&(J.table_select[1]=16),k(q,J.table_select[1],5),k(q,J.subblock_gain[0],3),k(q,J.subblock_gain[1],3),k(q,J.subblock_gain[2],3)):(k(q,0,1),J.table_select[0]==14&&(J.table_select[0]=16),k(q,J.table_select[0],5),J.table_select[1]==14&&(J.table_select[1]=16),k(q,J.table_select[1],5),J.table_select[2]==14&&(J.table_select[2]=16),k(q,J.table_select[2],5),l(0<=J.region0_count&&J.region0_count<16),l(0<=J.region1_count&&J.region1_count<8),k(q,J.region0_count,4),k(q,J.region1_count,3)),k(q,J.preflag,1),k(q,J.scalefac_scale,1),k(q,J.count1table_select,1)}}else for(l(se.main_data_begin>=0),k(q,se.main_data_begin,8),k(q,se.private_bits,q.channels_out),he=0,be=0;be<q.channels_out;be++){var J=se.tt[he][be];k(q,J.part2_3_length+J.part2_length,12),k(q,J.big_values/2,9),k(q,J.global_gain,8),k(q,J.scalefac_compress,9),J.block_type!=d.NORM_TYPE?(k(q,1,1),k(q,J.block_type,2),k(q,J.mixed_block_flag,1),J.table_select[0]==14&&(J.table_select[0]=16),k(q,J.table_select[0],5),J.table_select[1]==14&&(J.table_select[1]=16),k(q,J.table_select[1],5),k(q,J.subblock_gain[0],3),k(q,J.subblock_gain[1],3),k(q,J.subblock_gain[2],3)):(k(q,0,1),J.table_select[0]==14&&(J.table_select[0]=16),k(q,J.table_select[0],5),J.table_select[1]==14&&(J.table_select[1]=16),k(q,J.table_select[1],5),J.table_select[2]==14&&(J.table_select[2]=16),k(q,J.table_select[2],5),l(0<=J.region0_count&&J.region0_count<16),l(0<=J.region1_count&&J.region1_count<8),k(q,J.region0_count,4),k(q,J.region1_count,3)),k(q,J.scalefac_scale,1),k(q,J.count1table_select,1)}j.error_protection&&CRC_writeheader(q,q.header[q.h_ptr].buf);{var ue=q.h_ptr;l(q.header[ue].ptr==q.sideinfo_len*8),q.h_ptr=ue+1&u.MAX_HEADER_BUF-1,q.header[q.h_ptr].write_timing=q.header[ue].write_timing+X,q.h_ptr==q.w_ptr&&t.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function L(j,X){var q=r.ht[X.count1table_select+32],se,he=0,be=X.big_values,ne=X.big_values;for(l(X.count1table_select<2),se=(X.count1-X.big_values)/4;se>0;--se){var J=0,ue=0,Ne;Ne=X.l3_enc[be+0],Ne!=0&&(ue+=8,X.xr[ne+0]<0&&J++),Ne=X.l3_enc[be+1],Ne!=0&&(ue+=4,J*=2,X.xr[ne+1]<0&&J++),Ne=X.l3_enc[be+2],Ne!=0&&(ue+=2,J*=2,X.xr[ne+2]<0&&J++),Ne=X.l3_enc[be+3],Ne!=0&&(ue++,J*=2,X.xr[ne+3]<0&&J++),be+=4,ne+=4,D(j,J+q.table[ue],q.hlen[ue]),he+=q.hlen[ue]}return he}function M(j,X,q,se,he){var be=r.ht[X],ne=0;if(X==0)return ne;for(var J=q;J<se;J+=2){var ue=0,Ne=0,Re=be.xlen,Ze=be.xlen,Xe=0,Qe=he.l3_enc[J],Je=he.l3_enc[J+1];if(Qe!=0&&(he.xr[J]<0&&Xe++,ue--),X>15){if(Qe>14){var st=Qe-15;l(st<=be.linmax),Xe|=st<<1,Ne=Re,Qe=15}if(Je>14){var ht=Je-15;l(ht<=be.linmax),Xe<<=Re,Xe|=ht,Ne+=Re,Je=15}Ze=16}Je!=0&&(Xe<<=1,he.xr[J+1]<0&&Xe++,ue--),Qe=Qe*Ze+Je,Ne-=ue,ue+=be.hlen[Qe],D(j,be.table[Qe],ue),D(j,Xe,Ne),ne+=ue+Ne}return ne}function R(j,X){var q=3*j.scalefac_band.s[3];q>X.big_values&&(q=X.big_values);var se=M(j,X.table_select[0],0,q,X);return se+=M(j,X.table_select[1],q,X.big_values,X),se}function P(j,X){var q,se,he,be;q=X.big_values;var ne=X.region0_count+1;return l(ne<j.scalefac_band.l.length),he=j.scalefac_band.l[ne],ne+=X.region1_count+1,l(ne<j.scalefac_band.l.length),be=j.scalefac_band.l[ne],he>q&&(he=q),be>q&&(be=q),se=M(j,X.table_select[0],0,he,X),se+=M(j,X.table_select[1],he,be,X),se+=M(j,X.table_select[2],be,q,X),se}function W(j){var X,q,se,he,be=0,ne=j.internal_flags,J=ne.l3_side;if(j.version==1)for(X=0;X<2;X++)for(q=0;q<ne.channels_out;q++){var ue=J.tt[X][q],Ne=i.slen1_tab[ue.scalefac_compress],Re=i.slen2_tab[ue.scalefac_compress];for(he=0,se=0;se<ue.sfbdivide;se++)ue.scalefac[se]!=-1&&(D(ne,ue.scalefac[se],Ne),he+=Ne);for(;se<ue.sfbmax;se++)ue.scalefac[se]!=-1&&(D(ne,ue.scalefac[se],Re),he+=Re);l(he==ue.part2_length),ue.block_type==d.SHORT_TYPE?he+=R(ne,ue):he+=P(ne,ue),he+=L(ne,ue),l(he==ue.part2_3_length+ue.part2_length),be+=he}else for(X=0,q=0;q<ne.channels_out;q++){var ue=J.tt[X][q],Ze,Xe,Qe=0;if(l(ue.sfb_partition_table!=null),he=0,se=0,Xe=0,ue.block_type==d.SHORT_TYPE){for(;Xe<4;Xe++){var Je=ue.sfb_partition_table[Xe]/3,st=ue.slen[Xe];for(Ze=0;Ze<Je;Ze++,se++)D(ne,Math.max(ue.scalefac[se*3+0],0),st),D(ne,Math.max(ue.scalefac[se*3+1],0),st),D(ne,Math.max(ue.scalefac[se*3+2],0),st),Qe+=3*st}he+=R(ne,ue)}else{for(;Xe<4;Xe++){var Je=ue.sfb_partition_table[Xe],st=ue.slen[Xe];for(Ze=0;Ze<Je;Ze++,se++)D(ne,Math.max(ue.scalefac[se],0),st),Qe+=st}he+=P(ne,ue)}he+=L(ne,ue),l(he==ue.part2_3_length),l(Qe==ue.part2_length),be+=Qe+he}return be}function Q(){this.total=0}function Z(j,X){var q=j.internal_flags,se,he,be,ne,J;return J=q.w_ptr,ne=q.h_ptr-1,ne==-1&&(ne=u.MAX_HEADER_BUF-1),se=q.header[ne].write_timing-x,X.total=se,se>=0&&(he=1+ne-J,ne<J&&(he=1+ne-J+u.MAX_HEADER_BUF),se-=he*8*q.sideinfo_len),be=_.getframebits(j),se+=be,X.total+=be,X.total%8!=0?X.total=1+X.total/8:X.total=X.total/8,X.total+=$+1,se<0&&t.err.println(`strange error flushing buffer ... 
`),se}this.flush_bitstream=function(j){var X=j.internal_flags,q,se,he=X.h_ptr-1;if(he==-1&&(he=u.MAX_HEADER_BUF-1),q=X.l3_side,!((se=Z(j,new Q))<0)){if(B(j,se),l(X.header[he].write_timing+this.getframebits(j)==x),X.ResvSize=0,q.main_data_begin=0,X.findReplayGain){var be=T.GetTitleGain(X.rgdata);l(NEQ(be,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),X.RadioGain=Math.floor(be*10+.5)|0}X.findPeakSample&&(X.noclipGainChange=Math.ceil(Math.log10(X.PeakSample/32767)*20*10)|0,X.noclipGainChange>0&&(EQ(j.scale,1)||EQ(j.scale,0))?X.noclipScale=Math.floor(32767/X.PeakSample*100)/100:X.noclipScale=-1)}},this.add_dummy_byte=function(j,X,q){for(var se=j.internal_flags,he;q-- >0;)for(H(se,X,8),he=0;he<u.MAX_HEADER_BUF;++he)se.header[he].write_timing+=8},this.format_bitstream=function(j){var X=j.internal_flags,q;q=X.l3_side;var se=this.getframebits(j);B(j,q.resvDrain_pre),G(j,se);var he=8*X.sideinfo_len;if(he+=W(j),B(j,q.resvDrain_post),he+=q.resvDrain_post,q.main_data_begin+=(se-he)/8,Z(j,new Q)!=X.ResvSize&&t.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),q.main_data_begin*8!=X.ResvSize&&(t.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*q.main_data_begin,X.ResvSize,q.resvDrain_post,q.resvDrain_pre,8*X.sideinfo_len,he-q.resvDrain_post-8*X.sideinfo_len,he,he%8,se),t.err.println("This is a fatal error.  It has several possible causes:"),t.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),t.err.println(" 9%%  Your system is overclocked"),t.err.println(" 1%%  bug in LAME encoding library"),X.ResvSize=q.main_data_begin*8),x>1e9){var be;for(be=0;be<u.MAX_HEADER_BUF;++be)X.header[be].write_timing-=x;x=0}return 0},this.copy_buffer=function(j,X,q,se,he){var be=$+1;if(be<=0)return 0;if(se!=0&&be>se)return-1;if(t.arraycopy(y,0,X,q,be),$=-1,N=0,he!=0){var ne=o(1);if(ne[0]=j.nMusicCRC,A.updateMusicCRC(ne,X,q,be),j.nMusicCRC=ne[0],be>0&&(j.VBR_seek_table.nBytesWritten+=be),j.decode_on_the_fly){for(var J=a([2,1152]),ue=be,Ne=-1,Re;Ne!=0;)if(Ne=S.hip_decode1_unclipped(j.hip,X,q,ue,J[0],J[1]),ue=0,Ne==-1&&(Ne=0),Ne>0){if(j.findPeakSample){for(Re=0;Re<Ne;Re++)J[0][Re]>j.PeakSample?j.PeakSample=J[0][Re]:-J[0][Re]>j.PeakSample&&(j.PeakSample=-J[0][Re]);if(j.channels_out>1)for(Re=0;Re<Ne;Re++)J[1][Re]>j.PeakSample?j.PeakSample=J[1][Re]:-J[1][Re]>j.PeakSample&&(j.PeakSample=-J[1][Re])}if(j.findReplayGain&&T.AnalyzeSamples(j.rgdata,J[0],0,J[1],0,Ne,j.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return be},this.init_bit_stream_w=function(j){y=s(h.LAME_MAXMP3BUFFER),j.h_ptr=j.w_ptr=0,j.header[j.h_ptr].write_timing=0,$=-1,N=0,x=0}}return Xh=m,Xh}var qh,uE;function K_(){if(uE)return qh;uE=1;var e=ms,t=e.System,n=e.VbrMode,s=e.ShortBlock,a=e.new_float,o=e.new_int_n,l=e.new_short_n,i=e.assert,r=t2e,d=a2e,u=Gp,m=N2e,h=w2e,_=P2e,g=W_(),T=H_,S=pa();function b(){var A=hd,y=this,x=128*1024;b.V9=410,b.V8=420,b.V7=430,b.V6=440,b.V5=450,b.V4=460,b.V3=470,b.V2=480,b.V1=490,b.V0=500,b.R3MIX=1e3,b.STANDARD=1001,b.EXTREME=1002,b.INSANE=1003,b.STANDARD_FAST=1004,b.EXTREME_FAST=1005,b.MEDIUM=1006,b.MEDIUM_FAST=1007;var $=16384+x;b.LAME_MAXMP3BUFFER=$;var N,w,D,H,B,k=new r,U,G,L;this.enc=new S,this.setModules=function(ee,de,ie,Ce,Se,je,Ke,$e,Be){N=ee,w=de,D=ie,H=Ce,B=Se,U=je,G=$e,L=Be,this.enc.setModules(w,k,H,U)};function M(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=a(S.SBMAX_l),this.bo_s_weight=a(S.SBMAX_s)}function R(){this.lowerlimit=0}function P(ee,de){this.lowpass=de}var W=4294479419;function Q(ee){var de;return ee.class_id=W,de=ee.internal_flags=new u,ee.mode=A.NOT_SET,ee.original=1,ee.in_samplerate=44100,ee.num_channels=2,ee.num_samples=-1,ee.bWriteVbrTag=!0,ee.quality=-1,ee.short_blocks=null,de.subblock_gain=-1,ee.lowpassfreq=0,ee.highpassfreq=0,ee.lowpasswidth=-1,ee.highpasswidth=-1,ee.VBR=n.vbr_off,ee.VBR_q=4,ee.ATHcurve=-1,ee.VBR_mean_bitrate_kbps=128,ee.VBR_min_bitrate_kbps=0,ee.VBR_max_bitrate_kbps=0,ee.VBR_hard_min=0,de.VBR_min_bitrate=1,de.VBR_max_bitrate=13,ee.quant_comp=-1,ee.quant_comp_short=-1,ee.msfix=-1,de.resample_ratio=1,de.OldValue[0]=180,de.OldValue[1]=180,de.CurrentStep[0]=4,de.CurrentStep[1]=4,de.masking_lower=1,de.nsPsy.attackthre=-1,de.nsPsy.attackthre_s=-1,ee.scale=-1,ee.athaa_type=-1,ee.ATHtype=-1,ee.athaa_loudapprox=-1,ee.athaa_sensitivity=0,ee.useTemporal=null,ee.interChRatio=-1,de.mf_samples_to_encode=S.ENCDELAY+S.POSTDELAY,ee.encoder_padding=0,de.mf_size=S.ENCDELAY-S.MDCTDELAY,ee.findReplayGain=!1,ee.decode_on_the_fly=!1,de.decode_on_the_fly=!1,de.findReplayGain=!1,de.findPeakSample=!1,de.RadioGain=0,de.AudiophileGain=0,de.noclipGainChange=0,de.noclipScale=-1,ee.preset=0,ee.write_id3tag_automatic=!0,0}this.lame_init=function(){var ee=new d;return Q(ee),ee.lame_allocated_gfp=1,ee};function Z(ee){return ee>1?0:ee<=0?1:Math.cos(Math.PI/2*ee)}this.nearestBitrateFullIndex=function(ee){var de=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ie=0,Ce=0,Se=0,je=0;je=de[16],Se=16,Ce=de[16],ie=16;for(var Ke=0;Ke<16;Ke++)if(Math.max(ee,de[Ke+1])!=ee){je=de[Ke+1],Se=Ke+1,Ce=de[Ke],ie=Ke;break}return je-ee>ee-Ce?ie:Se};function j(ee,de){var ie=44100;return de>=48e3?ie=48e3:de>=44100?ie=44100:de>=32e3?ie=32e3:de>=24e3?ie=24e3:de>=22050?ie=22050:de>=16e3?ie=16e3:de>=12e3?ie=12e3:de>=11025?ie=11025:de>=8e3&&(ie=8e3),ee==-1?ie:(ee<=15960&&(ie=44100),ee<=15250&&(ie=32e3),ee<=11220&&(ie=24e3),ee<=9970&&(ie=22050),ee<=7230&&(ie=16e3),ee<=5420&&(ie=12e3),ee<=4510&&(ie=11025),ee<=3970&&(ie=8e3),de<ie?de>44100?48e3:de>32e3?44100:de>24e3?32e3:de>22050?24e3:de>16e3?22050:de>12e3?16e3:de>11025?12e3:de>8e3?11025:8e3:ie)}function X(ee,de){switch(ee){case 44100:return de.version=1,0;case 48e3:return de.version=1,1;case 32e3:return de.version=1,2;case 22050:return de.version=0,0;case 24e3:return de.version=0,1;case 16e3:return de.version=0,2;case 11025:return de.version=0,0;case 12e3:return de.version=0,1;case 8e3:return de.version=0,2;default:return de.version=0,-1}}function q(ee,de,ie){ie<16e3&&(de=2);for(var Ce=T.bitrate_table[de][1],Se=2;Se<=14;Se++)T.bitrate_table[de][Se]>0&&Math.abs(T.bitrate_table[de][Se]-ee)<Math.abs(Ce-ee)&&(Ce=T.bitrate_table[de][Se]);return Ce}function se(ee,de,ie){ie<16e3&&(de=2);for(var Ce=0;Ce<=14;Ce++)if(T.bitrate_table[de][Ce]>0&&T.bitrate_table[de][Ce]==ee)return Ce;return-1}function he(ee,de){var ie=[new P(8,2e3),new P(16,3700),new P(24,3900),new P(32,5500),new P(40,7e3),new P(48,7500),new P(56,1e4),new P(64,11e3),new P(80,13500),new P(96,15100),new P(112,15600),new P(128,17e3),new P(160,17500),new P(192,18600),new P(224,19400),new P(256,19700),new P(320,20500)],Ce=y.nearestBitrateFullIndex(de);ee.lowerlimit=ie[Ce].lowpass}function be(ee){var de=ee.internal_flags,ie=32,Ce=-1;if(de.lowpass1>0){for(var Se=999,je=0;je<=31;je++){var Ke=je/31;Ke>=de.lowpass2&&(ie=Math.min(ie,je)),de.lowpass1<Ke&&Ke<de.lowpass2&&(Se=Math.min(Se,je))}Se==999?de.lowpass1=(ie-.75)/31:de.lowpass1=(Se-.75)/31,de.lowpass2=ie/31}if(de.highpass2>0&&de.highpass2<.9*(.75/31)&&(de.highpass1=0,de.highpass2=0,t.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),de.highpass2>0){for(var $e=-1,je=0;je<=31;je++){var Ke=je/31;Ke<=de.highpass1&&(Ce=Math.max(Ce,je)),de.highpass1<Ke&&Ke<de.highpass2&&($e=Math.max($e,je))}de.highpass1=Ce/31,$e==-1?de.highpass2=(Ce+.75)/31:de.highpass2=($e+.75)/31}for(var je=0;je<32;je++){var Be,Ue,Ke=je/31;de.highpass2>de.highpass1?Be=Z((de.highpass2-Ke)/(de.highpass2-de.highpass1+1e-20)):Be=1,de.lowpass2>de.lowpass1?Ue=Z((Ke-de.lowpass1)/(de.lowpass2-de.lowpass1+1e-20)):Ue=1,de.amp_filter[je]=Be*Ue}}function ne(ee){var de=ee.internal_flags;switch(ee.quality){default:case 9:de.psymodel=0,de.noise_shaping=0,de.noise_shaping_amp=0,de.noise_shaping_stop=0,de.use_best_huffman=0,de.full_outer_loop=0;break;case 8:ee.quality=7;case 7:de.psymodel=1,de.noise_shaping=0,de.noise_shaping_amp=0,de.noise_shaping_stop=0,de.use_best_huffman=0,de.full_outer_loop=0;break;case 6:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.noise_shaping_amp=0,de.noise_shaping_stop=0,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=0,de.full_outer_loop=0;break;case 5:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.noise_shaping_amp=0,de.noise_shaping_stop=0,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=0,de.full_outer_loop=0;break;case 4:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.noise_shaping_amp=0,de.noise_shaping_stop=0,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=1,de.full_outer_loop=0;break;case 3:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.noise_shaping_amp=1,de.noise_shaping_stop=1,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=1,de.full_outer_loop=0;break;case 2:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.substep_shaping==0&&(de.substep_shaping=2),de.noise_shaping_amp=1,de.noise_shaping_stop=1,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=1,de.full_outer_loop=0;break;case 1:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.substep_shaping==0&&(de.substep_shaping=2),de.noise_shaping_amp=2,de.noise_shaping_stop=1,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=1,de.full_outer_loop=0;break;case 0:de.psymodel=1,de.noise_shaping==0&&(de.noise_shaping=1),de.substep_shaping==0&&(de.substep_shaping=2),de.noise_shaping_amp=2,de.noise_shaping_stop=1,de.subblock_gain==-1&&(de.subblock_gain=1),de.use_best_huffman=1,de.full_outer_loop=0;break}}function J(ee){var de=ee.internal_flags;ee.frameNum=0,ee.write_id3tag_automatic&&G.id3tag_write_v2(ee),de.bitrate_stereoMode_Hist=o([16,5]),de.bitrate_blockType_Hist=o([16,6]),de.PeakSample=0,ee.bWriteVbrTag&&U.InitVbrTag(ee)}this.lame_init_params=function(ee){var de=ee.internal_flags;if(de.Class_ID=0,de.ATH==null&&(de.ATH=new m),de.PSY==null&&(de.PSY=new M),de.rgdata==null&&(de.rgdata=new h),de.channels_in=ee.num_channels,de.channels_in==1&&(ee.mode=A.MONO),de.channels_out=ee.mode==A.MONO?1:2,de.mode_ext=S.MPG_MD_MS_LR,ee.mode==A.MONO&&(ee.force_ms=!1),ee.VBR==n.vbr_off&&ee.VBR_mean_bitrate_kbps!=128&&ee.brate==0&&(ee.brate=ee.VBR_mean_bitrate_kbps),ee.VBR==n.vbr_off||ee.VBR==n.vbr_mtrh||ee.VBR==n.vbr_mt||(ee.free_format=!1),ee.VBR==n.vbr_off&&ee.brate==0&&g.EQ(ee.compression_ratio,0)&&(ee.compression_ratio=11.025),ee.VBR==n.vbr_off&&ee.compression_ratio>0&&(ee.out_samplerate==0&&(ee.out_samplerate=map2MP3Frequency(int(.97*ee.in_samplerate))),ee.brate=0|ee.out_samplerate*16*de.channels_out/(1e3*ee.compression_ratio),de.samplerate_index=X(ee.out_samplerate,ee),ee.free_format||(ee.brate=q(ee.brate,ee.version,ee.out_samplerate))),ee.out_samplerate!=0&&(ee.out_samplerate<16e3?(ee.VBR_mean_bitrate_kbps=Math.max(ee.VBR_mean_bitrate_kbps,8),ee.VBR_mean_bitrate_kbps=Math.min(ee.VBR_mean_bitrate_kbps,64)):ee.out_samplerate<32e3?(ee.VBR_mean_bitrate_kbps=Math.max(ee.VBR_mean_bitrate_kbps,8),ee.VBR_mean_bitrate_kbps=Math.min(ee.VBR_mean_bitrate_kbps,160)):(ee.VBR_mean_bitrate_kbps=Math.max(ee.VBR_mean_bitrate_kbps,32),ee.VBR_mean_bitrate_kbps=Math.min(ee.VBR_mean_bitrate_kbps,320))),ee.lowpassfreq==0){var ie=16e3;switch(ee.VBR){case n.vbr_off:{var Ce=new R;he(Ce,ee.brate),ie=Ce.lowerlimit;break}case n.vbr_abr:{var Ce=new R;he(Ce,ee.VBR_mean_bitrate_kbps),ie=Ce.lowerlimit;break}case n.vbr_rh:{var Se=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=ee.VBR_q&&ee.VBR_q<=9){var je=Se[ee.VBR_q],Ke=Se[ee.VBR_q+1],$e=ee.VBR_q_frac;ie=linear_int(je,Ke,$e)}else ie=19500;break}default:{var Se=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=ee.VBR_q&&ee.VBR_q<=9){var je=Se[ee.VBR_q],Ke=Se[ee.VBR_q+1],$e=ee.VBR_q_frac;ie=linear_int(je,Ke,$e)}else ie=19500}}ee.mode==A.MONO&&(ee.VBR==n.vbr_off||ee.VBR==n.vbr_abr)&&(ie*=1.5),ee.lowpassfreq=ie|0}if(ee.out_samplerate==0&&(2*ee.lowpassfreq>ee.in_samplerate&&(ee.lowpassfreq=ee.in_samplerate/2),ee.out_samplerate=j(ee.lowpassfreq|0,ee.in_samplerate)),ee.lowpassfreq=Math.min(20500,ee.lowpassfreq),ee.lowpassfreq=Math.min(ee.out_samplerate/2,ee.lowpassfreq),ee.VBR==n.vbr_off&&(ee.compression_ratio=ee.out_samplerate*16*de.channels_out/(1e3*ee.brate)),ee.VBR==n.vbr_abr&&(ee.compression_ratio=ee.out_samplerate*16*de.channels_out/(1e3*ee.VBR_mean_bitrate_kbps)),ee.bWriteVbrTag||(ee.findReplayGain=!1,ee.decode_on_the_fly=!1,de.findPeakSample=!1),de.findReplayGain=ee.findReplayGain,de.decode_on_the_fly=ee.decode_on_the_fly,de.decode_on_the_fly&&(de.findPeakSample=!0),de.findReplayGain&&N.InitGainAnalysis(de.rgdata,ee.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return ee.internal_flags=null,-6;switch(de.decode_on_the_fly&&!ee.decode_only&&(de.hip!=null&&L.hip_decode_exit(de.hip),de.hip=L.hip_decode_init()),de.mode_gr=ee.out_samplerate<=24e3?1:2,ee.framesize=576*de.mode_gr,ee.encoder_delay=S.ENCDELAY,de.resample_ratio=ee.in_samplerate/ee.out_samplerate,ee.VBR){case n.vbr_mt:case n.vbr_rh:case n.vbr_mtrh:{var Be=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];ee.compression_ratio=Be[ee.VBR_q]}break;case n.vbr_abr:ee.compression_ratio=ee.out_samplerate*16*de.channels_out/(1e3*ee.VBR_mean_bitrate_kbps);break;default:ee.compression_ratio=ee.out_samplerate*16*de.channels_out/(1e3*ee.brate);break}if(ee.mode==A.NOT_SET&&(ee.mode=A.JOINT_STEREO),ee.highpassfreq>0?(de.highpass1=2*ee.highpassfreq,ee.highpasswidth>=0?de.highpass2=2*(ee.highpassfreq+ee.highpasswidth):de.highpass2=1*2*ee.highpassfreq,de.highpass1/=ee.out_samplerate,de.highpass2/=ee.out_samplerate):(de.highpass1=0,de.highpass2=0),ee.lowpassfreq>0?(de.lowpass2=2*ee.lowpassfreq,ee.lowpasswidth>=0?(de.lowpass1=2*(ee.lowpassfreq-ee.lowpasswidth),de.lowpass1<0&&(de.lowpass1=0)):de.lowpass1=1*2*ee.lowpassfreq,de.lowpass1/=ee.out_samplerate,de.lowpass2/=ee.out_samplerate):(de.lowpass1=0,de.lowpass2=0),be(ee),de.samplerate_index=X(ee.out_samplerate,ee),de.samplerate_index<0)return ee.internal_flags=null,-1;if(ee.VBR==n.vbr_off){if(ee.free_format)de.bitrate_index=0;else if(ee.brate=q(ee.brate,ee.version,ee.out_samplerate),de.bitrate_index=se(ee.brate,ee.version,ee.out_samplerate),de.bitrate_index<=0)return ee.internal_flags=null,-1}else de.bitrate_index=1;ee.analysis&&(ee.bWriteVbrTag=!1),de.pinfo!=null&&(ee.bWriteVbrTag=!1),w.init_bit_stream_w(de);for(var Ue=de.samplerate_index+3*ee.version+6*(ee.out_samplerate<16e3?1:0),ge=0;ge<S.SBMAX_l+1;ge++)de.scalefac_band.l[ge]=H.sfBandIndex[Ue].l[ge];for(var ge=0;ge<S.PSFB21+1;ge++){var ae=(de.scalefac_band.l[22]-de.scalefac_band.l[21])/S.PSFB21,ve=de.scalefac_band.l[21]+ge*ae;de.scalefac_band.psfb21[ge]=ve}de.scalefac_band.psfb21[S.PSFB21]=576;for(var ge=0;ge<S.SBMAX_s+1;ge++)de.scalefac_band.s[ge]=H.sfBandIndex[Ue].s[ge];for(var ge=0;ge<S.PSFB12+1;ge++){var ae=(de.scalefac_band.s[13]-de.scalefac_band.s[12])/S.PSFB12,ve=de.scalefac_band.s[12]+ge*ae;de.scalefac_band.psfb12[ge]=ve}de.scalefac_band.psfb12[S.PSFB12]=192,ee.version==1?de.sideinfo_len=de.channels_out==1?21:36:de.sideinfo_len=de.channels_out==1?13:21,ee.error_protection&&(de.sideinfo_len+=2),J(ee),de.Class_ID=W;{var Y;for(Y=0;Y<19;Y++)de.nsPsy.pefirbuf[Y]=700*de.mode_gr*de.channels_out;ee.ATHtype==-1&&(ee.ATHtype=4)}switch(i(ee.VBR_q<=9),i(ee.VBR_q>=0),ee.VBR){case n.vbr_mt:ee.VBR=n.vbr_mtrh;case n.vbr_mtrh:{ee.useTemporal==null&&(ee.useTemporal=!1),D.apply_preset(ee,500-ee.VBR_q*10,0),ee.quality<0&&(ee.quality=LAME_DEFAULT_QUALITY),ee.quality<5&&(ee.quality=0),ee.quality>5&&(ee.quality=5),de.PSY.mask_adjust=ee.maskingadjust,de.PSY.mask_adjust_short=ee.maskingadjust_short,ee.experimentalY?de.sfb21_extra=!1:de.sfb21_extra=ee.out_samplerate>44e3,de.iteration_loop=new VBRNewIterationLoop(B);break}case n.vbr_rh:{D.apply_preset(ee,500-ee.VBR_q*10,0),de.PSY.mask_adjust=ee.maskingadjust,de.PSY.mask_adjust_short=ee.maskingadjust_short,ee.experimentalY?de.sfb21_extra=!1:de.sfb21_extra=ee.out_samplerate>44e3,ee.quality>6&&(ee.quality=6),ee.quality<0&&(ee.quality=LAME_DEFAULT_QUALITY),de.iteration_loop=new VBROldIterationLoop(B);break}default:{var oe;de.sfb21_extra=!1,ee.quality<0&&(ee.quality=LAME_DEFAULT_QUALITY),oe=ee.VBR,oe==n.vbr_off&&(ee.VBR_mean_bitrate_kbps=ee.brate),D.apply_preset(ee,ee.VBR_mean_bitrate_kbps,0),ee.VBR=oe,de.PSY.mask_adjust=ee.maskingadjust,de.PSY.mask_adjust_short=ee.maskingadjust_short,oe==n.vbr_off?de.iteration_loop=new _(B):de.iteration_loop=new ABRIterationLoop(B);break}}if(i(ee.scale>=0),ee.VBR!=n.vbr_off){if(de.VBR_min_bitrate=1,de.VBR_max_bitrate=14,ee.out_samplerate<16e3&&(de.VBR_max_bitrate=8),ee.VBR_min_bitrate_kbps!=0&&(ee.VBR_min_bitrate_kbps=q(ee.VBR_min_bitrate_kbps,ee.version,ee.out_samplerate),de.VBR_min_bitrate=se(ee.VBR_min_bitrate_kbps,ee.version,ee.out_samplerate),de.VBR_min_bitrate<0)||ee.VBR_max_bitrate_kbps!=0&&(ee.VBR_max_bitrate_kbps=q(ee.VBR_max_bitrate_kbps,ee.version,ee.out_samplerate),de.VBR_max_bitrate=se(ee.VBR_max_bitrate_kbps,ee.version,ee.out_samplerate),de.VBR_max_bitrate<0))return-1;ee.VBR_min_bitrate_kbps=T.bitrate_table[ee.version][de.VBR_min_bitrate],ee.VBR_max_bitrate_kbps=T.bitrate_table[ee.version][de.VBR_max_bitrate],ee.VBR_mean_bitrate_kbps=Math.min(T.bitrate_table[ee.version][de.VBR_max_bitrate],ee.VBR_mean_bitrate_kbps),ee.VBR_mean_bitrate_kbps=Math.max(T.bitrate_table[ee.version][de.VBR_min_bitrate],ee.VBR_mean_bitrate_kbps)}return ee.tune&&(de.PSY.mask_adjust+=ee.tune_value_a,de.PSY.mask_adjust_short+=ee.tune_value_a),ne(ee),i(ee.scale>=0),ee.athaa_type<0?de.ATH.useAdjust=3:de.ATH.useAdjust=ee.athaa_type,de.ATH.aaSensitivityP=Math.pow(10,ee.athaa_sensitivity/-10),ee.short_blocks==null&&(ee.short_blocks=s.short_block_allowed),ee.short_blocks==s.short_block_allowed&&(ee.mode==A.JOINT_STEREO||ee.mode==A.STEREO)&&(ee.short_blocks=s.short_block_coupled),ee.quant_comp<0&&(ee.quant_comp=1),ee.quant_comp_short<0&&(ee.quant_comp_short=0),ee.msfix<0&&(ee.msfix=0),ee.exp_nspsytune=ee.exp_nspsytune|1,ee.internal_flags.nsPsy.attackthre<0&&(ee.internal_flags.nsPsy.attackthre=r.NSATTACKTHRE),ee.internal_flags.nsPsy.attackthre_s<0&&(ee.internal_flags.nsPsy.attackthre_s=r.NSATTACKTHRE_S),i(ee.scale>=0),ee.scale<0&&(ee.scale=1),ee.ATHtype<0&&(ee.ATHtype=4),ee.ATHcurve<0&&(ee.ATHcurve=4),ee.athaa_loudapprox<0&&(ee.athaa_loudapprox=2),ee.interChRatio<0&&(ee.interChRatio=0),ee.useTemporal==null&&(ee.useTemporal=!0),de.slot_lag=de.frac_SpF=0,ee.VBR==n.vbr_off&&(de.slot_lag=de.frac_SpF=(ee.version+1)*72e3*ee.brate%ee.out_samplerate|0),H.iteration_init(ee),k.psymodel_init(ee),i(ee.scale>=0),0};function ue(ee,de){(ee.in_buffer_0==null||ee.in_buffer_nsamples<de)&&(ee.in_buffer_0=a(de),ee.in_buffer_1=a(de),ee.in_buffer_nsamples=de)}this.lame_encode_flush=function(ee,de,ie,Ce){var Se=ee.internal_flags,je=l([2,1152]),Ke=0,$e,Be,Ue,ge,ae=Se.mf_samples_to_encode-S.POSTDELAY,ve=Ne(ee);if(Se.mf_samples_to_encode<1)return 0;for($e=0,ee.in_samplerate!=ee.out_samplerate&&(ae+=16*ee.out_samplerate/ee.in_samplerate),Ue=ee.framesize-ae%ee.framesize,Ue<576&&(Ue+=ee.framesize),ee.encoder_padding=Ue,ge=(ae+Ue)/ee.framesize;ge>0&&Ke>=0;){var Y=ve-Se.mf_size,oe=ee.frameNum;Y*=ee.in_samplerate,Y/=ee.out_samplerate,Y>1152&&(Y=1152),Y<1&&(Y=1),Be=Ce-$e,Ce==0&&(Be=0),Ke=this.lame_encode_buffer(ee,je[0],je[1],Y,de,ie,Be),ie+=Ke,$e+=Ke,ge-=oe!=ee.frameNum?1:0}if(Se.mf_samples_to_encode=0,Ke<0||(Be=Ce-$e,Ce==0&&(Be=0),w.flush_bitstream(ee),Ke=w.copy_buffer(Se,de,ie,Be,1),Ke<0))return Ke;if(ie+=Ke,$e+=Ke,Be=Ce-$e,Ce==0&&(Be=0),ee.write_id3tag_automatic){if(G.id3tag_write_v1(ee),Ke=w.copy_buffer(Se,de,ie,Be,0),Ke<0)return Ke;$e+=Ke}return $e},this.lame_encode_buffer=function(ee,de,ie,Ce,Se,je,Ke){var $e=ee.internal_flags,Be=[null,null];if($e.Class_ID!=W)return-3;if(Ce==0)return 0;ue($e,Ce),Be[0]=$e.in_buffer_0,Be[1]=$e.in_buffer_1;for(var Ue=0;Ue<Ce;Ue++)Be[0][Ue]=de[Ue],$e.channels_in>1&&(Be[1][Ue]=ie[Ue]);return Re(ee,Be[0],Be[1],Ce,Se,je,Ke)};function Ne(ee){var de=S.BLKSIZE+ee.framesize-S.FFTOFFSET;return de=Math.max(de,512+ee.framesize-32),de}function Re(ee,de,ie,Ce,Se,je,Ke){var $e=ee.internal_flags,Be=0,Ue,ge,ae,ve,Y,oe=[null,null],te=[null,null];if($e.Class_ID!=W)return-3;if(Ce==0)return 0;if(Y=w.copy_buffer($e,Se,je,Ke,0),Y<0)return Y;if(je+=Y,Be+=Y,te[0]=de,te[1]=ie,g.NEQ(ee.scale,0)&&g.NEQ(ee.scale,1))for(ge=0;ge<Ce;++ge)te[0][ge]*=ee.scale,$e.channels_out==2&&(te[1][ge]*=ee.scale);if(g.NEQ(ee.scale_left,0)&&g.NEQ(ee.scale_left,1))for(ge=0;ge<Ce;++ge)te[0][ge]*=ee.scale_left;if(g.NEQ(ee.scale_right,0)&&g.NEQ(ee.scale_right,1))for(ge=0;ge<Ce;++ge)te[1][ge]*=ee.scale_right;if(ee.num_channels==2&&$e.channels_out==1)for(ge=0;ge<Ce;++ge)te[0][ge]=.5*(te[0][ge]+te[1][ge]),te[1][ge]=0;ve=Ne(ee),oe[0]=$e.mfbuf[0],oe[1]=$e.mfbuf[1];for(var le=0;Ce>0;){var ye=[null,null],me=0,Ie=0;ye[0]=te[0],ye[1]=te[1];var Oe=new Xe;if(wt(ee,oe,ye,le,Ce,Oe),me=Oe.n_in,Ie=Oe.n_out,$e.findReplayGain&&!$e.decode_on_the_fly&&N.AnalyzeSamples($e.rgdata,oe[0],$e.mf_size,oe[1],$e.mf_size,Ie,$e.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(Ce-=me,le+=me,$e.channels_out==2,$e.mf_size+=Ie,i($e.mf_size<=u.MFSIZE),$e.mf_samples_to_encode<1&&($e.mf_samples_to_encode=S.ENCDELAY+S.POSTDELAY),$e.mf_samples_to_encode+=Ie,$e.mf_size>=ve){var we=Ke-Be;if(Ke==0&&(we=0),Ue=Ze(ee,oe[0],oe[1],Se,je,we),Ue<0)return Ue;for(je+=Ue,Be+=Ue,$e.mf_size-=ee.framesize,$e.mf_samples_to_encode-=ee.framesize,ae=0;ae<$e.channels_out;ae++)for(ge=0;ge<$e.mf_size;ge++)oe[ae][ge]=oe[ae][ge+ee.framesize]}}return Be}function Ze(ee,de,ie,Ce,Se,je){var Ke=y.enc.lame_encode_mp3_frame(ee,de,ie,Ce,Se,je);return ee.frameNum++,Ke}function Xe(){this.n_in=0,this.n_out=0}function Qe(){this.num_used=0}function Je(ee,de){return de!=0?Je(de,ee%de):ee}function st(ee,de,ie){var Ce=Math.PI*de;ee/=ie,ee<0&&(ee=0),ee>1&&(ee=1);var Se=ee-.5,je=.42-.5*Math.cos(2*ee*Math.PI)+.08*Math.cos(4*ee*Math.PI);return Math.abs(Se)<1e-9?Ce/Math.PI:je*Math.sin(ie*Ce*Se)/(Math.PI*ie*Se)}function ht(ee,de,ie,Ce,Se,je,Ke,$e,Be){var Ue=ee.internal_flags,ge,ae=0,ve,Y=ee.out_samplerate/Je(ee.out_samplerate,ee.in_samplerate);Y>u.BPC&&(Y=u.BPC);var oe=Math.abs(Ue.resample_ratio-Math.floor(.5+Ue.resample_ratio))<1e-4?1:0,te=1/Ue.resample_ratio;te>1&&(te=1);var le=31;le%2==0&&--le,le+=oe;var ye=le+1;if(Ue.fill_buffer_resample_init==0){for(Ue.inbuf_old[0]=a(ye),Ue.inbuf_old[1]=a(ye),ge=0;ge<=2*Y;++ge)Ue.blackfilt[ge]=a(ye);for(Ue.itime[0]=0,Ue.itime[1]=0,ae=0;ae<=2*Y;ae++){var me=0,Ie=(ae-Y)/(2*Y);for(ge=0;ge<=le;ge++)me+=Ue.blackfilt[ae][ge]=st(ge-Ie,te,le);for(ge=0;ge<=le;ge++)Ue.blackfilt[ae][ge]/=me}Ue.fill_buffer_resample_init=1}var Oe=Ue.inbuf_old[Be];for(ve=0;ve<Ce;ve++){var we,Ye;if(we=ve*Ue.resample_ratio,ae=0|Math.floor(we-Ue.itime[Be]),le+ae-le/2>=Ke)break;var Ie=we-Ue.itime[Be]-(ae+.5*(le%2));Ye=0|Math.floor(Ie*2*Y+Y+.5);var He=0;for(ge=0;ge<=le;++ge){var et=0|ge+ae-le/2,bt;bt=et<0?Oe[ye+et]:Se[je+et],He+=bt*Ue.blackfilt[Ye][ge]}de[ie+ve]=He}if($e.num_used=Math.min(Ke,le+ae-le/2),Ue.itime[Be]+=$e.num_used-ve*Ue.resample_ratio,$e.num_used>=ye)for(ge=0;ge<ye;ge++)Oe[ge]=Se[je+$e.num_used+ge-ye];else{var Nt=ye-$e.num_used;for(ge=0;ge<Nt;++ge)Oe[ge]=Oe[ge+$e.num_used];for(ae=0;ge<ye;++ge,++ae)Oe[ge]=Se[je+ae];i(ae==$e.num_used)}return ve}function wt(ee,de,ie,Ce,Se,je){var Ke=ee.internal_flags;if(Ke.resample_ratio<.9999||Ke.resample_ratio>1.0001)for(var $e=0;$e<Ke.channels_out;$e++){var Be=new Qe;je.n_out=ht(ee,de[$e],Ke.mf_size,ee.framesize,ie[$e],Ce,Se,Be,$e),je.n_in=Be.num_used}else{je.n_out=Math.min(ee.framesize,Se),je.n_in=je.n_out;for(var Ue=0;Ue<je.n_out;++Ue)de[0][Ke.mf_size+Ue]=ie[0][Ce+Ue],Ke.channels_out==2&&(de[1][Ke.mf_size+Ue]=ie[1][Ce+Ue])}}}return qh=b,qh}var B2e=ms,Mo=B2e.VbrMode;function F2e(){var e=K_();function t(u,m,h,_,g,T,S,b,A,y,x,$,N,w,D){this.vbr_q=u,this.quant_comp=m,this.quant_comp_s=h,this.expY=_,this.st_lrm=g,this.st_s=T,this.masking_adj=S,this.masking_adj_short=b,this.ath_lower=A,this.ath_curve=y,this.ath_sensitivity=x,this.interch=$,this.safejoint=N,this.sfb21mod=w,this.msfix=D}function n(u,m,h,_,g,T,S,b,A,y,x,$,N,w){this.quant_comp=m,this.quant_comp_s=h,this.safejoint=_,this.nsmsfix=g,this.st_lrm=T,this.st_s=S,this.nsbass=b,this.scale=A,this.masking_adj=y,this.ath_lower=x,this.ath_curve=$,this.interch=N,this.sfscale=w}var s;this.setModules=function(u){s=u};var a=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],o=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function l(u,m,h){var _=u.VBR==Mo.vbr_rh?a:o,g=u.VBR_q_frac,T=_[m],S=_[m+1],b=T;T.st_lrm=T.st_lrm+g*(S.st_lrm-T.st_lrm),T.st_s=T.st_s+g*(S.st_s-T.st_s),T.masking_adj=T.masking_adj+g*(S.masking_adj-T.masking_adj),T.masking_adj_short=T.masking_adj_short+g*(S.masking_adj_short-T.masking_adj_short),T.ath_lower=T.ath_lower+g*(S.ath_lower-T.ath_lower),T.ath_curve=T.ath_curve+g*(S.ath_curve-T.ath_curve),T.ath_sensitivity=T.ath_sensitivity+g*(S.ath_sensitivity-T.ath_sensitivity),T.interch=T.interch+g*(S.interch-T.interch),T.msfix=T.msfix+g*(S.msfix-T.msfix),d(u,b.vbr_q),h!=0?u.quant_comp=b.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=b.quant_comp),h!=0?u.quant_comp_short=b.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=b.quant_comp_s),b.expY!=0&&(u.experimentalY=b.expY!=0),h!=0?u.internal_flags.nsPsy.attackthre=b.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=b.st_lrm),h!=0?u.internal_flags.nsPsy.attackthre_s=b.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=b.st_s),h!=0?u.maskingadjust=b.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=b.masking_adj),h!=0?u.maskingadjust_short=b.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=b.masking_adj_short),h!=0?u.ATHlower=-b.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-b.ath_lower/10),h!=0?u.ATHcurve=b.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=b.ath_curve),h!=0?u.athaa_sensitivity=b.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=b.ath_sensitivity),b.interch>0&&(h!=0?u.interChRatio=b.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=b.interch)),b.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|b.safejoint),b.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|b.sfb21mod<<20),h!=0?u.msfix=b.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=b.msfix),h==0&&(u.VBR_q=m,u.VBR_q_frac=g)}var i=[new n(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new n(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new n(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new n(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new n(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new n(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new n(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new n(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new n(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new n(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new n(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new n(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new n(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new n(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new n(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function r(u,m,h){var _=m,g=s.nearestBitrateFullIndex(m);if(u.VBR=Mo.vbr_abr,u.VBR_mean_bitrate_kbps=_,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),i[g].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),i[g].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(i[g].nsbass)>0){var T=int(i[g].nsbass*4);T<0&&(T+=64),u.exp_nspsytune=u.exp_nspsytune|T<<2}return h!=0?u.quant_comp=i[g].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=i[g].quant_comp),h!=0?u.quant_comp_short=i[g].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=i[g].quant_comp_s),h!=0?u.msfix=i[g].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=i[g].nsmsfix),h!=0?u.internal_flags.nsPsy.attackthre=i[g].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=i[g].st_lrm),h!=0?u.internal_flags.nsPsy.attackthre_s=i[g].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=i[g].st_s),h!=0?u.scale=i[g].scale:Math.abs(u.scale- -1)>0||(u.scale=i[g].scale),h!=0?u.maskingadjust=i[g].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=i[g].masking_adj),i[g].masking_adj>0?h!=0?u.maskingadjust_short=i[g].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=i[g].masking_adj*.9):h!=0?u.maskingadjust_short=i[g].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=i[g].masking_adj*1.1),h!=0?u.ATHlower=-i[g].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-i[g].ath_lower/10),h!=0?u.ATHcurve=i[g].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=i[g].ath_curve),h!=0?u.interChRatio=i[g].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=i[g].interch),m}this.apply_preset=function(u,m,h){switch(m){case e.R3MIX:{m=e.V3,u.VBR=Mo.vbr_mtrh;break}case e.MEDIUM:{m=e.V4,u.VBR=Mo.vbr_rh;break}case e.MEDIUM_FAST:{m=e.V4,u.VBR=Mo.vbr_mtrh;break}case e.STANDARD:{m=e.V2,u.VBR=Mo.vbr_rh;break}case e.STANDARD_FAST:{m=e.V2,u.VBR=Mo.vbr_mtrh;break}case e.EXTREME:{m=e.V0,u.VBR=Mo.vbr_rh;break}case e.EXTREME_FAST:{m=e.V0,u.VBR=Mo.vbr_mtrh;break}case e.INSANE:return m=320,u.preset=m,r(u,m,h),u.VBR=Mo.vbr_off,m}switch(u.preset=m,m){case e.V9:return l(u,9,h),m;case e.V8:return l(u,8,h),m;case e.V7:return l(u,7,h),m;case e.V6:return l(u,6,h),m;case e.V5:return l(u,5,h),m;case e.V4:return l(u,4,h),m;case e.V3:return l(u,3,h),m;case e.V2:return l(u,2,h),m;case e.V1:return l(u,1,h),m;case e.V0:return l(u,0,h),m}return 8<=m&&m<=320?r(u,m,h):(u.preset=0,m)};function d(u,m){var h=0;return 0>m&&(h=-1,m=0),9<m&&(h=-1,m=9),u.VBR_q=m,u.VBR_q_frac=0,h}}var U2e=F2e;function G2e(){this.setModules=function(e,t){}}var V2e=G2e;function H2e(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var W2e=H2e,II=ms,pE=II.new_float,K2e=II.new_int;function z2e(){this.global_gain=0,this.sfb_count1=0,this.step=K2e(39),this.noise=pE(39),this.noise_log=pE(39)}var j2e=z2e,Ur=ms,Cl=Ur.System,mE=Ur.VbrMode,Zh=Ur.Util,Xi=Ur.Arrays,sc=Ur.new_float,ac=Ur.assert,Y2e=V2e,Qh=W2e,X2e=j2e,Ln=pa(),hE=U_,fE=Up;function q2e(){var e;this.rv=null;var t;this.qupvt=null;var n,s=new Y2e,a;this.setModules=function(b,A,y,x){e=b,t=A,this.rv=A,n=y,this.qupvt=y,a=x,s.setModules(n,a)},this.ms_convert=function(b,A){for(var y=0;y<576;++y){var x=b.tt[A][0].xr[y],$=b.tt[A][1].xr[y];b.tt[A][0].xr[y]=(x+$)*(Zh.SQRT2*.5),b.tt[A][1].xr[y]=(x-$)*(Zh.SQRT2*.5)}};function o(b,A,y,x){x=0;for(var $=0;$<=y;++$){var N=Math.abs(b.xr[$]);x+=N,A[$]=Math.sqrt(N*Math.sqrt(N)),A[$]>b.xrpow_max&&(b.xrpow_max=A[$])}return x}this.init_xrpow=function(b,A,y){var x=0,$=0|A.max_nonzero_coeff;if(A.xrpow_max=0,Xi.fill(y,$,576,0),x=o(A,y,$,x),x>1e-20){var N=0;b.substep_shaping&2&&(N=1);for(var w=0;w<A.psymax;w++)b.pseudohalf[w]=N;return!0}return Xi.fill(A.l3_enc,0,576,0),!1};function l(b,A){var y=b.ATH,x=A.xr;if(A.block_type!=Ln.SHORT_TYPE)for(var $=!1,N=Ln.PSFB21-1;N>=0&&!$;N--){var w=b.scalefac_band.psfb21[N],D=b.scalefac_band.psfb21[N+1],H=n.athAdjust(y.adjust,y.psfb21[N],y.floor);b.nsPsy.longfact[21]>1e-12&&(H*=b.nsPsy.longfact[21]);for(var B=D-1;B>=w;B--)if(Math.abs(x[B])<H)x[B]=0;else{$=!0;break}}else for(var k=0;k<3;k++)for(var $=!1,N=Ln.PSFB12-1;N>=0&&!$;N--){var w=b.scalefac_band.s[12]*3+(b.scalefac_band.s[13]-b.scalefac_band.s[12])*k+(b.scalefac_band.psfb12[N]-b.scalefac_band.psfb12[0]),D=w+(b.scalefac_band.psfb12[N+1]-b.scalefac_band.psfb12[N]),U=n.athAdjust(y.adjust,y.psfb12[N],y.floor);b.nsPsy.shortfact[12]>1e-12&&(U*=b.nsPsy.shortfact[12]);for(var B=D-1;B>=w;B--)if(Math.abs(x[B])<U)x[B]=0;else{$=!0;break}}}this.init_outer_loop=function(b,A){A.part2_3_length=0,A.big_values=0,A.count1=0,A.global_gain=210,A.scalefac_compress=0,A.table_select[0]=0,A.table_select[1]=0,A.table_select[2]=0,A.subblock_gain[0]=0,A.subblock_gain[1]=0,A.subblock_gain[2]=0,A.subblock_gain[3]=0,A.region0_count=0,A.region1_count=0,A.preflag=0,A.scalefac_scale=0,A.count1table_select=0,A.part2_length=0,A.sfb_lmax=Ln.SBPSY_l,A.sfb_smin=Ln.SBPSY_s,A.psy_lmax=b.sfb21_extra?Ln.SBMAX_l:Ln.SBPSY_l,A.psymax=A.psy_lmax,A.sfbmax=A.sfb_lmax,A.sfbdivide=11;for(var y=0;y<Ln.SBMAX_l;y++)A.width[y]=b.scalefac_band.l[y+1]-b.scalefac_band.l[y],A.window[y]=3;if(A.block_type==Ln.SHORT_TYPE){var x=sc(576);A.sfb_smin=0,A.sfb_lmax=0,A.mixed_block_flag!=0&&(A.sfb_smin=3,A.sfb_lmax=b.mode_gr*2+4),A.psymax=A.sfb_lmax+3*((b.sfb21_extra?Ln.SBMAX_s:Ln.SBPSY_s)-A.sfb_smin),A.sfbmax=A.sfb_lmax+3*(Ln.SBPSY_s-A.sfb_smin),A.sfbdivide=A.sfbmax-18,A.psy_lmax=A.sfb_lmax;var $=b.scalefac_band.l[A.sfb_lmax];Cl.arraycopy(A.xr,0,x,0,576);for(var y=A.sfb_smin;y<Ln.SBMAX_s;y++)for(var N=b.scalefac_band.s[y],w=b.scalefac_band.s[y+1],D=0;D<3;D++)for(var H=N;H<w;H++)A.xr[$++]=x[3*H+D];for(var B=A.sfb_lmax,y=A.sfb_smin;y<Ln.SBMAX_s;y++)A.width[B]=A.width[B+1]=A.width[B+2]=b.scalefac_band.s[y+1]-b.scalefac_band.s[y],A.window[B]=0,A.window[B+1]=1,A.window[B+2]=2,B+=3}A.count1bits=0,A.sfb_partition_table=n.nr_of_sfb_block[0][0],A.slen[0]=0,A.slen[1]=0,A.slen[2]=0,A.slen[3]=0,A.max_nonzero_coeff=575,Xi.fill(A.scalefac,0),l(b,A)};function i(b){this.ordinal=b}i.BINSEARCH_NONE=new i(0),i.BINSEARCH_UP=new i(1),i.BINSEARCH_DOWN=new i(2);function r(b,A,y,x,$){var N,w=b.CurrentStep[x],D=!1,H=b.OldValue[x],B=i.BINSEARCH_NONE;for(A.global_gain=H,y-=A.part2_length;;){var k;if(N=a.count_bits(b,$,A,null),w==1||N==y)break;N>y?(B==i.BINSEARCH_DOWN&&(D=!0),D&&(w/=2),B=i.BINSEARCH_UP,k=w):(B==i.BINSEARCH_UP&&(D=!0),D&&(w/=2),B=i.BINSEARCH_DOWN,k=-w),A.global_gain+=k,A.global_gain<0&&(A.global_gain=0,D=!0),A.global_gain>255&&(A.global_gain=255,D=!0)}for(ac(A.global_gain>=0),ac(A.global_gain<256);N>y&&A.global_gain<255;)A.global_gain++,N=a.count_bits(b,$,A,null);return b.CurrentStep[x]=H-A.global_gain>=4?4:2,b.OldValue[x]=A.global_gain,A.part2_3_length=N,N}this.trancate_smallspectrums=function(b,A,y,x){var $=sc(fE.SFBMAX);if(!(!(b.substep_shaping&4)&&A.block_type==Ln.SHORT_TYPE||b.substep_shaping&128)){n.calc_noise(A,y,$,new Qh,null);for(var w=0;w<576;w++){var N=0;A.l3_enc[w]!=0&&(N=Math.abs(A.xr[w])),x[w]=N}var w=0,D=8;A.block_type==Ln.SHORT_TYPE&&(D=6);do{var H,B,k,U,G=A.width[D];if(w+=G,!($[D]>=1)&&(Xi.sort(x,w-G,G),!BitStream.EQ(x[w-1],0))){H=(1-$[D])*y[D],B=0,U=0;do{var L;for(k=1;U+k<G&&!BitStream.NEQ(x[U+w-G],x[U+w+k-G]);k++);if(L=x[U+w-G]*x[U+w-G]*k,H<L){U!=0&&(B=x[U+w-G-1]);break}H-=L,U+=k}while(U<G);if(!BitStream.EQ(B,0))do Math.abs(A.xr[w-G])<=B&&(A.l3_enc[w-G]=0);while(--G>0)}}while(++D<A.psymax);A.part2_3_length=a.noquant_count_bits(b,A,null)}};function d(b){for(var A=0;A<b.sfbmax;A++)if(b.scalefac[A]+b.subblock_gain[b.window[A]]==0)return!1;return!0}function u(b){return Zh.FAST_LOG10(.368+.632*b*b*b)}function m(b,A){for(var y=1e-37,x=0;x<A.psymax;x++)y+=u(b[x]);return Math.max(1e-20,y)}function h(b,A,y,x,$){var N;switch(b){default:case 9:{A.over_count>0?(N=y.over_SSD<=A.over_SSD,y.over_SSD==A.over_SSD&&(N=y.bits<A.bits)):N=y.max_noise<0&&y.max_noise*10+y.bits<=A.max_noise*10+A.bits;break}case 0:N=y.over_count<A.over_count||y.over_count==A.over_count&&y.over_noise<A.over_noise||y.over_count==A.over_count&&BitStream.EQ(y.over_noise,A.over_noise)&&y.tot_noise<A.tot_noise;break;case 8:y.max_noise=m($,x);case 1:N=y.max_noise<A.max_noise;break;case 2:N=y.tot_noise<A.tot_noise;break;case 3:N=y.tot_noise<A.tot_noise&&y.max_noise<A.max_noise;break;case 4:N=y.max_noise<=0&&A.max_noise>.2||y.max_noise<=0&&A.max_noise<0&&A.max_noise>y.max_noise-.2&&y.tot_noise<A.tot_noise||y.max_noise<=0&&A.max_noise>0&&A.max_noise>y.max_noise-.2&&y.tot_noise<A.tot_noise+A.over_noise||y.max_noise>0&&A.max_noise>-.05&&A.max_noise>y.max_noise-.1&&y.tot_noise+y.over_noise<A.tot_noise+A.over_noise||y.max_noise>0&&A.max_noise>-.1&&A.max_noise>y.max_noise-.15&&y.tot_noise+y.over_noise+y.over_noise<A.tot_noise+A.over_noise+A.over_noise;break;case 5:N=y.over_noise<A.over_noise||BitStream.EQ(y.over_noise,A.over_noise)&&y.tot_noise<A.tot_noise;break;case 6:N=y.over_noise<A.over_noise||BitStream.EQ(y.over_noise,A.over_noise)&&(y.max_noise<A.max_noise||BitStream.EQ(y.max_noise,A.max_noise)&&y.tot_noise<=A.tot_noise);break;case 7:N=y.over_count<A.over_count||y.over_noise<A.over_noise;break}return A.over_count==0&&(N=N&&y.bits<A.bits),N}function _(b,A,y,x,$){var N=b.internal_flags,w;A.scalefac_scale==0?w=1.2968395546510096:w=1.6817928305074292;for(var D=0,H=0;H<A.sfbmax;H++)D<y[H]&&(D=y[H]);var B=N.noise_shaping_amp;switch(B==3&&($?B=2:B=1),B){case 2:break;case 1:D>1?D=Math.pow(D,.5):D*=.95;break;case 0:default:D>1?D=1:D*=.95;break}for(var k=0,H=0;H<A.sfbmax;H++){var U=A.width[H],G;if(k+=U,!(y[H]<D)){if(N.substep_shaping&2&&(N.pseudohalf[H]=N.pseudohalf[H]==0?1:0,N.pseudohalf[H]==0&&N.noise_shaping_amp==2))return;for(A.scalefac[H]++,G=-U;G<0;G++)x[k+G]*=w,x[k+G]>A.xrpow_max&&(A.xrpow_max=x[k+G]);if(N.noise_shaping_amp==2)return}}}function g(b,A){for(var y=1.2968395546510096,x=0,$=0;$<b.sfbmax;$++){var N=b.width[$],w=b.scalefac[$];if(b.preflag!=0&&(w+=n.pretab[$]),x+=N,w&1){w++;for(var D=-N;D<0;D++)A[x+D]*=y,A[x+D]>b.xrpow_max&&(b.xrpow_max=A[x+D])}b.scalefac[$]=w>>1}b.preflag=0,b.scalefac_scale=1}function T(b,A,y){var x,$=A.scalefac;for(x=0;x<A.sfb_lmax;x++)if($[x]>=16)return!0;for(var N=0;N<3;N++){var w=0,D=0;for(x=A.sfb_lmax+N;x<A.sfbdivide;x+=3)w<$[x]&&(w=$[x]);for(;x<A.sfbmax;x+=3)D<$[x]&&(D=$[x]);if(!(w<16&&D<8)){if(A.subblock_gain[N]>=7)return!0;A.subblock_gain[N]++;var H=b.scalefac_band.l[A.sfb_lmax];for(x=A.sfb_lmax+N;x<A.sfbmax;x+=3){var B,k=A.width[x],U=$[x];if(U=U-(4>>A.scalefac_scale),U>=0){$[x]=U,H+=k*3;continue}$[x]=0;{var G=210+(U<<A.scalefac_scale+1);B=n.IPOW20(G)}H+=k*(N+1);for(var L=-k;L<0;L++)y[H+L]*=B,y[H+L]>A.xrpow_max&&(A.xrpow_max=y[H+L]);H+=k*(3-N-1)}{var B=n.IPOW20(202);H+=A.width[x]*(N+1);for(var L=-A.width[x];L<0;L++)y[H+L]*=B,y[H+L]>A.xrpow_max&&(A.xrpow_max=y[H+L])}}}return!1}function S(b,A,y,x,$){var N=b.internal_flags;_(b,A,y,x,$);var w=d(A);return w?!1:(N.mode_gr==2?w=a.scale_bitcount(A):w=a.scale_bitcount_lsf(N,A),w?(N.noise_shaping>1&&(Xi.fill(N.pseudohalf,0),A.scalefac_scale==0?(g(A,x),w=!1):A.block_type==Ln.SHORT_TYPE&&N.subblock_gain>0&&(w=T(N,A,x)||d(A))),w||(N.mode_gr==2?w=a.scale_bitcount(A):w=a.scale_bitcount_lsf(N,A)),!w):!0)}this.outer_loop=function(b,A,y,x,$,N){var w=b.internal_flags,D=new hE,H=sc(576),B=sc(fE.SFBMAX),k=new Qh,U,G=new X2e,L=9999999,M=!1,R=!1,P=0;if(r(w,A,N,$,x),w.noise_shaping==0)return 100;n.calc_noise(A,y,B,k,G),k.bits=A.part2_3_length,D.assign(A);var W=0;for(Cl.arraycopy(x,0,H,0,576);!M;){do{var Q=new Qh,Z,j=255;if(w.substep_shaping&2?Z=20:Z=3,w.sfb21_extra&&(B[D.sfbmax]>1||D.block_type==Ln.SHORT_TYPE&&(B[D.sfbmax+1]>1||B[D.sfbmax+2]>1))||!S(b,D,B,x,R))break;D.scalefac_scale!=0&&(j=254);var X=N-D.part2_length;if(X<=0)break;for(;(D.part2_3_length=a.count_bits(w,x,D,G))>X&&D.global_gain<=j;)D.global_gain++;if(D.global_gain>j)break;if(k.over_count==0){for(;(D.part2_3_length=a.count_bits(w,x,D,G))>L&&D.global_gain<=j;)D.global_gain++;if(D.global_gain>j)break}if(n.calc_noise(D,y,B,Q,G),Q.bits=D.part2_3_length,A.block_type!=Ln.SHORT_TYPE?U=b.quant_comp:U=b.quant_comp_short,U=h(U,k,Q,D,B)?1:0,U!=0)L=A.part2_3_length,k=Q,A.assign(D),W=0,Cl.arraycopy(x,0,H,0,576);else if(w.full_outer_loop==0&&(++W>Z&&k.over_count==0||w.noise_shaping_amp==3&&R&&W>30||w.noise_shaping_amp==3&&R&&D.global_gain-P>15))break}while(D.global_gain+D.scalefac_scale<255);w.noise_shaping_amp==3?R?M=!0:(D.assign(A),Cl.arraycopy(H,0,x,0,576),W=0,P=D.global_gain,R=!0):M=!0}return ac(A.global_gain+A.scalefac_scale<=255),b.VBR==mE.vbr_rh||b.VBR==mE.vbr_mtrh?Cl.arraycopy(H,0,x,0,576):w.substep_shaping&1&&trancate_smallspectrums(w,A,y,x),k.over_count},this.iteration_finish_one=function(b,A,y){var x=b.l3_side,$=x.tt[A][y];a.best_scalefac_store(b,A,y,x),b.use_best_huffman==1&&a.best_huffman_divide(b,$),t.ResvAdjust(b,$)},this.VBR_encode_granule=function(b,A,y,x,$,N,w){var D=b.internal_flags,H=new hE,B=sc(576),k=w,U=w+1,G=(w+N)/2,L,M,R=0,P=D.sfb21_extra;ac(k<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Xi.fill(H.l3_enc,0);do G>k-42?D.sfb21_extra=!1:D.sfb21_extra=P,M=outer_loop(b,A,y,x,$,G),M<=0?(R=1,U=A.part2_3_length,H.assign(A),Cl.arraycopy(x,0,B,0,576),w=U-32,L=w-N,G=(w+N)/2):(N=G+32,L=w-N,G=(w+N)/2,R!=0&&(R=2,A.assign(H),Cl.arraycopy(B,0,x,0,576)));while(L>12);D.sfb21_extra=P,R==2&&Cl.arraycopy(H.l3_enc,0,A.l3_enc,0,576),ac(A.part2_3_length<=k)},this.get_framebits=function(b,A){var y=b.internal_flags;y.bitrate_index=y.VBR_min_bitrate;var x=e.getframebits(b);y.bitrate_index=1,x=e.getframebits(b);for(var $=1;$<=y.VBR_max_bitrate;$++){y.bitrate_index=$;var N=new MeanBits(x);A[$]=t.ResvFrameBegin(b,N),x=N.bits}},this.VBR_old_prepare=function(b,A,y,x,$,N,w,D,H){var B=b.internal_flags,k,U=0,G=1,L=0;B.bitrate_index=B.VBR_max_bitrate;var M=t.ResvFrameBegin(b,new MeanBits(0))/B.mode_gr;get_framebits(b,N);for(var R=0;R<B.mode_gr;R++){var P=n.on_pe(b,A,D[R],M,R,0);B.mode_ext==Ln.MPG_MD_MS_LR&&(ms_convert(B.l3_side,R),n.reduce_side(D[R],y[R],M,P));for(var W=0;W<B.channels_out;++W){var Q=B.l3_side.tt[R][W];Q.block_type!=Ln.SHORT_TYPE?(U=1.28/(1+Math.exp(3.5-A[R][W]/300))-.05,k=B.PSY.mask_adjust-U):(U=2.56/(1+Math.exp(3.5-A[R][W]/300))-.14,k=B.PSY.mask_adjust_short-U),B.masking_lower=Math.pow(10,k*.1),init_outer_loop(B,Q),H[R][W]=n.calc_xmin(b,x[R][W],Q,$[R][W]),H[R][W]!=0&&(G=0),w[R][W]=126,L+=D[R][W]}}for(var R=0;R<B.mode_gr;R++)for(var W=0;W<B.channels_out;W++)L>N[B.VBR_max_bitrate]&&(D[R][W]*=N[B.VBR_max_bitrate],D[R][W]/=L),w[R][W]>D[R][W]&&(w[R][W]=D[R][W]);return G},this.bitpressure_strategy=function(b,A,y,x){for(var $=0;$<b.mode_gr;$++)for(var N=0;N<b.channels_out;N++){for(var w=b.l3_side.tt[$][N],D=A[$][N],H=0,B=0;B<w.psy_lmax;B++)D[H++]*=1+.029*B*B/Ln.SBMAX_l/Ln.SBMAX_l;if(w.block_type==Ln.SHORT_TYPE)for(var B=w.sfb_smin;B<Ln.SBMAX_s;B++)D[H++]*=1+.029*B*B/Ln.SBMAX_s/Ln.SBMAX_s,D[H++]*=1+.029*B*B/Ln.SBMAX_s/Ln.SBMAX_s,D[H++]*=1+.029*B*B/Ln.SBMAX_s/Ln.SBMAX_s;x[$][N]=0|Math.max(y[$][N],.9*x[$][N])}},this.VBR_new_prepare=function(b,A,y,x,$,N){var w=b.internal_flags,D=1,H=0,B=0,k;if(b.free_format){w.bitrate_index=0;var U=new MeanBits(H);k=t.ResvFrameBegin(b,U),H=U.bits,$[0]=k}else{w.bitrate_index=w.VBR_max_bitrate;var U=new MeanBits(H);t.ResvFrameBegin(b,U),H=U.bits,get_framebits(b,$),k=$[w.VBR_max_bitrate]}for(var G=0;G<w.mode_gr;G++){n.on_pe(b,A,N[G],H,G,0),w.mode_ext==Ln.MPG_MD_MS_LR&&ms_convert(w.l3_side,G);for(var L=0;L<w.channels_out;++L){var M=w.l3_side.tt[G][L];w.masking_lower=Math.pow(10,w.PSY.mask_adjust*.1),init_outer_loop(w,M),n.calc_xmin(b,y[G][L],M,x[G][L])!=0&&(D=0),B+=N[G][L]}}for(var G=0;G<w.mode_gr;G++)for(var L=0;L<w.channels_out;L++)B>k&&(N[G][L]*=k,N[G][L]/=B);return D},this.calc_target_bits=function(b,A,y,x,$,N){var w=b.internal_flags,D=w.l3_side,H,B,k,U,G=0;w.bitrate_index=w.VBR_max_bitrate;var L=new MeanBits(G);for(N[0]=t.ResvFrameBegin(b,L),G=L.bits,w.bitrate_index=1,G=e.getframebits(b)-w.sideinfo_len*8,$[0]=G/(w.mode_gr*w.channels_out),G=b.VBR_mean_bitrate_kbps*b.framesize*1e3,w.substep_shaping&1&&(G*=1.09),G/=b.out_samplerate,G-=w.sideinfo_len*8,G/=w.mode_gr*w.channels_out,H=.93+.07*(11-b.compression_ratio)/(11-5.5),H<.9&&(H=.9),H>1&&(H=1),B=0;B<w.mode_gr;B++){var M=0;for(k=0;k<w.channels_out;k++){if(x[B][k]=int(H*G),A[B][k]>700){var R=int((A[B][k]-700)/1.4),P=D.tt[B][k];x[B][k]=int(H*G),P.block_type==Ln.SHORT_TYPE&&R<G/2&&(R=G/2),R>G*3/2?R=G*3/2:R<0&&(R=0),x[B][k]+=R}x[B][k]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(x[B][k]=LameInternalFlags.MAX_BITS_PER_CHANNEL),M+=x[B][k]}if(M>LameInternalFlags.MAX_BITS_PER_GRANULE)for(k=0;k<w.channels_out;++k)x[B][k]*=LameInternalFlags.MAX_BITS_PER_GRANULE,x[B][k]/=M}if(w.mode_ext==Ln.MPG_MD_MS_LR)for(B=0;B<w.mode_gr;B++)n.reduce_side(x[B],y[B],G*w.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(U=0,B=0;B<w.mode_gr;B++)for(k=0;k<w.channels_out;k++)x[B][k]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(x[B][k]=LameInternalFlags.MAX_BITS_PER_CHANNEL),U+=x[B][k];if(U>N[0])for(B=0;B<w.mode_gr;B++)for(k=0;k<w.channels_out;k++)x[B][k]*=N[0],x[B][k]/=U}}var Z2e=q2e,Q2e=ms,gE=Q2e.assert;function J2e(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var s=t.internal_flags,a,o=s.l3_side,l=e.getframebits(t);n.bits=(l-s.sideinfo_len*8)/s.mode_gr;var i=8*256*s.mode_gr-8;t.brate>320?a=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(a=8*1440,t.strict_ISO&&(a=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=a-l,s.ResvMax>i&&(s.ResvMax=i),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var r=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return r>a&&(r=a),gE(s.ResvMax%8==0),gE(s.ResvMax>=0),o.resvDrain_pre=0,s.pinfo!=null&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),r},this.ResvMaxBits=function(t,n,s,a){var o=t.internal_flags,l,i=o.ResvSize,r=o.ResvMax;a!=0&&(i+=n),o.substep_shaping&1&&(r*=.9),s.bits=n,i*10>r*9?(l=i-r*9/10,s.bits+=l,o.substep_shaping|=128):(l=0,o.substep_shaping&=127,!t.disable_reservoir&&!(o.substep_shaping&1)&&(s.bits-=.1*n));var d=i<o.ResvMax*6/10?i:o.ResvMax*6/10;return d-=l,d<0&&(d=0),d},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var s,a=t.l3_side;t.ResvSize+=n*t.mode_gr;var o=0;a.resvDrain_post=0,a.resvDrain_pre=0,(s=t.ResvSize%8)!=0&&(o+=s),s=t.ResvSize-o-t.ResvMax,s>0&&(o+=s);{var l=Math.min(a.main_data_begin*8,o)/8;a.resvDrain_pre+=8*l,o-=8*l,t.ResvSize-=8*l,a.main_data_begin-=l}a.resvDrain_post+=o,t.ResvSize-=o}}var eCe=J2e;function tCe(){var e="http://www.mp3dev.org/",t=3,n=98,s=4,a=0,o=93;this.getLameVersion=function(){return t+"."+n+"."+s},this.getLameShortVersion=function(){return t+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return a+"."+o},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var nCe=tCe,Gr=ms,sCe=Gr.System,Jh=Gr.VbrMode,_E=Gr.ShortBlock,aCe=Gr.Arrays,Zd=Gr.new_byte,oCe=Gr.assert;jc.NUMTOCENTRIES=100;jc.MAXFRAMESIZE=2880;function jc(){var e,t,n;this.setModules=function(G,L,M){e=G,t=L,n=M};var s=1,a=2,o=4,l=8,i=jc.NUMTOCENTRIES,r=jc.MAXFRAMESIZE,d=i+4+4+4+4+4,u=d+9+1+1+8+1+1+3+1+1+2+4+2+2,m=128,h=64,_=32,g=null,T="Xing",S="Info",b=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function A(G,L){if(G.nVbrNumFrames++,G.sum+=L,G.seen++,!(G.seen<G.want)&&(G.pos<G.size&&(G.bag[G.pos]=G.sum,G.pos++,G.seen=0),G.pos==G.size)){for(var M=1;M<G.size;M+=2)G.bag[M/2]=G.bag[M];G.want*=2,G.pos/=2}}function y(G,L){if(!(G.pos<=0))for(var M=1;M<i;++M){var R=M/i,P,W,Q=0|Math.floor(R*G.pos);Q>G.pos-1&&(Q=G.pos-1),P=G.bag[Q],W=G.sum;var Z=0|256*P/W;Z>255&&(Z=255),L[M]=255&Z}}this.addVbrFrame=function(G){var L=G.internal_flags,M=Tables.bitrate_table[G.version][L.bitrate_index];oCe(L.VBR_seek_table.bag!=null),A(L.VBR_seek_table,M)};function x(G,L){var M=G[L+0]&255;return M<<=8,M|=G[L+1]&255,M<<=8,M|=G[L+2]&255,M<<=8,M|=G[L+3]&255,M}function $(G,L,M){G[L+0]=255&(M>>24&255),G[L+1]=255&(M>>16&255),G[L+2]=255&(M>>8&255),G[L+3]=255&(M&255)}function N(G,L,M){G[L+0]=255&(M>>8&255),G[L+1]=255&(M&255)}function w(G,L){return new String(G,L,T.length(),g).equals(T)||new String(G,L,S.length(),g).equals(S)}function D(G,L,M){return 255&(G<<L|M&~(-1<<L))}function H(G,L){var M=G.internal_flags;L[0]=D(L[0],8,255),L[1]=D(L[1],3,7),L[1]=D(L[1],1,G.out_samplerate<16e3?0:1),L[1]=D(L[1],1,G.version),L[1]=D(L[1],2,1),L[1]=D(L[1],1,G.error_protection?0:1),L[2]=D(L[2],4,M.bitrate_index),L[2]=D(L[2],2,M.samplerate_index),L[2]=D(L[2],1,0),L[2]=D(L[2],1,G.extension),L[3]=D(L[3],2,G.mode.ordinal()),L[3]=D(L[3],2,M.mode_ext),L[3]=D(L[3],1,G.copyright),L[3]=D(L[3],1,G.original),L[3]=D(L[3],2,G.emphasis),L[0]=255;var R=255&(L[1]&241),P;G.version==1?P=m:G.out_samplerate<16e3?P=_:P=h,G.VBR==Jh.vbr_off&&(P=G.brate);var W;G.free_format?W=0:W=255&16*e.BitrateIndex(P,G.version,G.out_samplerate),G.version==1?(L[1]=255&(R|10),R=255&(L[2]&13),L[2]=255&(W|R)):(L[1]=255&(R|2),R=255&(L[2]&13),L[2]=255&(W|R))}this.getVbrTag=function(G){var L=new VBRTagData,M=0;L.flags=0;var R=G[M+1]>>3&1,P=G[M+2]>>2&3,W=G[M+3]>>6&3,Q=G[M+2]>>4&15;if(Q=Tables.bitrate_table[R][Q],G[M+1]>>4==14?L.samprate=Tables.samplerate_table[2][P]:L.samprate=Tables.samplerate_table[R][P],R!=0?W!=3?M+=36:M+=21:W!=3?M+=21:M+=13,!w(G,M))return null;M+=4,L.hId=R;var Z=L.flags=x(G,M);if(M+=4,Z&s&&(L.frames=x(G,M),M+=4),Z&a&&(L.bytes=x(G,M),M+=4),Z&o){if(L.toc!=null)for(var j=0;j<i;j++)L.toc[j]=G[M+j];M+=i}L.vbrScale=-1,Z&l&&(L.vbrScale=x(G,M),M+=4),L.headersize=(R+1)*72e3*Q/L.samprate,M+=21;var X=G[M+0]<<4;X+=G[M+1]>>4;var q=(G[M+1]&15)<<8;return q+=G[M+2]&255,(X<0||X>3e3)&&(X=-1),(q<0||q>3e3)&&(q=-1),L.encDelay=X,L.encPadding=q,L},this.InitVbrTag=function(G){var L=G.internal_flags,M;G.version==1?M=m:G.out_samplerate<16e3?M=_:M=h,G.VBR==Jh.vbr_off&&(M=G.brate);var R=(G.version+1)*72e3*M/G.out_samplerate,P=L.sideinfo_len+u;if(L.VBR_seek_table.TotalFrameSize=R,R<P||R>r){G.bWriteVbrTag=!1;return}L.VBR_seek_table.nVbrNumFrames=0,L.VBR_seek_table.nBytesWritten=0,L.VBR_seek_table.sum=0,L.VBR_seek_table.seen=0,L.VBR_seek_table.want=1,L.VBR_seek_table.pos=0,L.VBR_seek_table.bag==null&&(L.VBR_seek_table.bag=new int[400],L.VBR_seek_table.size=400);var W=Zd(r);H(G,W);for(var Q=L.VBR_seek_table.TotalFrameSize,Z=0;Z<Q;++Z)t.add_dummy_byte(G,W[Z]&255,1)};function B(G,L){var M=L^G;return L=L>>8^b[M&255],L}this.updateMusicCRC=function(G,L,M,R){for(var P=0;P<R;++P)G[0]=B(L[M+P],G[0])};function k(G,L,M,R,P){var W=G.internal_flags,Q=0,Z=G.encoder_delay,j=G.encoder_padding,X=100-10*G.VBR_q-G.quality,q=n.getLameVeryShortVersion(),se,he=0,be,ne=[1,5,3,2,4,0,3],J=0|(G.lowpassfreq/100+.5>255?255:G.lowpassfreq/100+.5),ue=0,Ne=0,Re=0,Ze=G.internal_flags.noise_shaping,Xe=0,Qe=0,Je=0,st=0,ht=0,wt=(G.exp_nspsytune&1)!=0,ee=(G.exp_nspsytune&2)!=0,de=!1,ie=!1,Ce=G.internal_flags.nogap_total,Se=G.internal_flags.nogap_current,je=G.ATHtype,Ke=0,$e;switch(G.VBR){case vbr_abr:$e=G.VBR_mean_bitrate_kbps;break;case vbr_off:$e=G.brate;break;default:$e=G.VBR_min_bitrate_kbps}switch(G.VBR.ordinal()<ne.length?se=ne[G.VBR.ordinal()]:se=0,be=16*he+se,W.findReplayGain&&(W.RadioGain>510&&(W.RadioGain=510),W.RadioGain<-510&&(W.RadioGain=-510),Ne=8192,Ne|=3072,W.RadioGain>=0?Ne|=W.RadioGain:(Ne|=512,Ne|=-W.RadioGain)),W.findPeakSample&&(ue=Math.abs(0|W.PeakSample/32767*Math.pow(2,23)+.5)),Ce!=-1&&(Se>0&&(ie=!0),Se<Ce-1&&(de=!0)),Ke=je+((wt?1:0)<<4)+((ee?1:0)<<5)+((de?1:0)<<6)+((ie?1:0)<<7),X<0&&(X=0),G.mode){case MONO:Xe=0;break;case STEREO:Xe=1;break;case DUAL_CHANNEL:Xe=2;break;case JOINT_STEREO:G.force_ms?Xe=4:Xe=3;break;case NOT_SET:default:Xe=7;break}G.in_samplerate<=32e3?Je=0:G.in_samplerate==48e3?Je=2:G.in_samplerate>48e3?Je=3:Je=1,(G.short_blocks==_E.short_block_forced||G.short_blocks==_E.short_block_dispensed||G.lowpassfreq==-1&&G.highpassfreq==-1||G.scale_left<G.scale_right||G.scale_left>G.scale_right||G.disable_reservoir&&G.brate<320||G.noATH||G.ATHonly||je==0||G.in_samplerate<=32e3)&&(Qe=1),st=Ze+(Xe<<2)+(Qe<<5)+(Je<<6),ht=W.nMusicCRC,$(M,R+Q,X),Q+=4;for(var Be=0;Be<9;Be++)M[R+Q+Be]=255&q.charAt(Be);Q+=9,M[R+Q]=255&be,Q++,M[R+Q]=255&J,Q++,$(M,R+Q,ue),Q+=4,N(M,R+Q,Ne),Q+=2,N(M,R+Q,Re),Q+=2,M[R+Q]=255&Ke,Q++,$e>=255?M[R+Q]=255:M[R+Q]=255&$e,Q++,M[R+Q]=255&Z>>4,M[R+Q+1]=255&(Z<<4)+(j>>8),M[R+Q+2]=255&j,Q+=3,M[R+Q]=255&st,Q++,M[R+Q++]=0,N(M,R+Q,G.preset),Q+=2,$(M,R+Q,L),Q+=4,N(M,R+Q,ht),Q+=2;for(var Ue=0;Ue<Q;Ue++)P=B(M[R+Ue],P);return N(M,R+Q,P),Q+=2,Q}function U(G){G.seek(0);var L=Zd(10);G.readFully(L);var M;return new String(L,"ISO-8859-1").startsWith("ID3")?M=0:M=((L[6]&127)<<21|(L[7]&127)<<14|(L[8]&127)<<7|L[9]&127)+L.length,M}this.getLameTagFrame=function(G,L){var M=G.internal_flags;if(!G.bWriteVbrTag||M.Class_ID!=Lame.LAME_ID||M.VBR_seek_table.pos<=0)return 0;if(L.length<M.VBR_seek_table.TotalFrameSize)return M.VBR_seek_table.TotalFrameSize;aCe.fill(L,0,M.VBR_seek_table.TotalFrameSize,0),H(G,L);var R=Zd(i);if(G.free_format)for(var P=1;P<i;++P)R[P]=255&255*P/100;else y(M.VBR_seek_table,R);var W=M.sideinfo_len;G.error_protection&&(W-=2),G.VBR==Jh.vbr_off?(L[W++]=255&S.charAt(0),L[W++]=255&S.charAt(1),L[W++]=255&S.charAt(2),L[W++]=255&S.charAt(3)):(L[W++]=255&T.charAt(0),L[W++]=255&T.charAt(1),L[W++]=255&T.charAt(2),L[W++]=255&T.charAt(3)),$(L,W,s+a+o+l),W+=4,$(L,W,M.VBR_seek_table.nVbrNumFrames),W+=4;var Q=M.VBR_seek_table.nBytesWritten+M.VBR_seek_table.TotalFrameSize;$(L,W,0|Q),W+=4,sCe.arraycopy(R,0,L,W,R.length),W+=R.length,G.error_protection&&t.CRC_writeheader(M,L);for(var Z=0,P=0;P<W;P++)Z=B(L[P],Z);return W+=k(G,Q,L,W,Z),M.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(G,L){var M=G.internal_flags;if(M.VBR_seek_table.pos<=0||(L.seek(L.length()),L.length()==0))return-1;var R=U(L);L.seek(R);var P=Zd(r),W=getLameTagFrame(G,P);return W>P.length?-1:(W<1||L.write(P,0,W),0)}}var lCe=jc,CI=ms,vE=CI.new_byte,iCe=CI.assert,rCe=K_(),cCe=U2e,dCe=EI,uCe=yI(),pCe=Z2e,mCe=SI(),hCe=eCe,fCe=hd,gCe=W_();pa();var _Ce=nCe,vCe=lCe;function bCe(){this.setModules=function(e,t){}}function ECe(){this.setModules=function(e,t,n){}}function TCe(){}function ACe(){this.setModules=function(e,t){}}function yCe(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var s=new rCe,a=new bCe,o=new dCe,l=new gCe,i=new cCe,r=new uCe,d=new pCe,u=new vCe,m=new _Ce,h=new ACe,_=new hCe,g=new mCe,T=new ECe,S=new TCe;s.setModules(o,l,i,r,d,u,m,h,S),l.setModules(o,S,m,u),h.setModules(l,m),i.setModules(s),d.setModules(l,_,r,g),r.setModules(g,_,s.enc.psy),_.setModules(l),g.setModules(r),u.setModules(s,l,m),a.setModules(T,S),T.setModules(m,h,i);var b=s.lame_init();b.num_channels=e,b.in_samplerate=t,b.brate=n,b.mode=fCe.STEREO,b.quality=3,b.bWriteVbrTag=!1,b.disable_reservoir=!0,b.write_id3tag_automatic=!1,s.lame_init_params(b);var A=1152,y=0|1.25*A+7200,x=vE(y);this.encodeBuffer=function($,N){e==1&&(N=$),iCe($.length==N.length),$.length>A&&(A=$.length,y=0|1.25*A+7200,x=vE(y));var w=s.lame_encode_buffer(b,$,N,$.length,x,0,y);return new Int8Array(x.subarray(0,w))},this.flush=function(){var $=s.lame_encode_flush(b,x,0,y);return new Int8Array(x.subarray(0,$))}}function fo(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Vp(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}fo.RIFF=Vp("RIFF");fo.WAVE=Vp("WAVE");fo.fmt_=Vp("fmt ");fo.data=Vp("data");fo.readHeader=function(e){var t=new fo,n=e.getUint32(0,!1);if(fo.RIFF==n&&(e.getUint32(4,!0),fo.WAVE==e.getUint32(8,!1)&&fo.fmt_==e.getUint32(12,!1))){var s=e.getUint32(16,!0),a=20;switch(s){case 16:case 18:t.channels=e.getUint16(a+2,!0),t.sampleRate=e.getUint32(a+4,!0);break;default:throw"extended fmt chunk not implemented"}a+=s;for(var o=fo.data,l=0;o!=n&&(n=e.getUint32(a,!1),l=e.getUint32(a+4,!0),o!=n);)a+=l+8;return t.dataLen=l,t.dataOffset=a+8,t}};F_.Mp3Encoder=yCe;F_.WavHeader=fo;const Qd=(e,t,n)=>{for(let s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))},SCe=async(e,t,n)=>{const s=e.length*t*2,a=new ArrayBuffer(44+s),o=new DataView(a);Qd(o,0,"RIFF"),o.setUint32(4,36+s,!0),Qd(o,8,"WAVE"),Qd(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,t,!0),o.setUint32(24,n,!0),o.setUint32(28,n*t*2,!0),o.setUint16(32,t*2,!0),o.setUint16(34,16,!0),Qd(o,36,"data"),o.setUint32(40,s,!0);const l=44;for(let i=0;i<e.length;i++)for(let r=0;r<t;r++){const d=Math.max(-1,Math.min(1,e.getChannelData(r)[i]));o.setInt16(l+(i*t+r)*2,d*32767,!0)}return new Blob([a],{type:"audio/wav"})},xI=async e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=await e.arrayBuffer();return await t.decodeAudioData(n)},ICe=async e=>{const t=await xI(e);return SCe(t,t.numberOfChannels,t.sampleRate)},CCe=(e,t,n,s=128)=>{const a=[],o=new F_.Mp3Encoder(e,t,s),l=1152;for(let r=0;r<n.length;r+=l){const d=Math.min(r+l,n.length),u=n.subarray(r,d),m=o.encodeBuffer(u);m.length>0&&a.push(new Int8Array(m))}const i=o.flush();return i.length>0&&a.push(new Int8Array(i)),new Blob(a,{type:"audio/mp3"})},xCe=async(e,t=128)=>{try{const n=await xI(e),s=new Int16Array(n.length*n.numberOfChannels);let a=0;for(let o=0;o<n.length;o+=1)for(let l=0;l<n.numberOfChannels;l+=1){const i=Math.max(-1,Math.min(1,n.getChannelData(l)[o]));s[a]=i<0?i*32768:i*32767,a+=1}return CCe(n.numberOfChannels,n.sampleRate,s,t)}catch{throw new Error("Conversion to MP3 failed.")}},NCe=async(e,t,n=128)=>{let s;if(t==="audio/wav")s=await ICe(e);else if(t==="audio/mp3")s=await xCe(e,n);else throw new Error("Unsupported output format");return s},OCe={__name:"AudioRecorder",props:{audioRecordFormat:{type:String,required:!0}},emits:["recorderProgressChanged","finishRecord","pause","play"],setup(e,{expose:t,emit:n}){const s=e,a=n,o=F(null),l=F(null),i=F(null),r=F(!1),d=F(!1),u=F(!1),m=S=>{const b=lL({start:0,end:S});return ts(new Date(0,0,0,0,b.minutes,b.seconds),"mm:ss")},h=()=>{l.value=zc.create({container:o.value,waveColor:"#1F93FF",progressColor:"#6E6F73",height:100,barWidth:2,barGap:1,barRadius:2,plugins:[B_.create({scrollingWaveform:!0,renderRecordedAudio:!1})]}),l.value.on("pause",()=>a("pause")),l.value.on("play",()=>a("play")),i.value=l.value.plugins[0],l.value.on("finish",()=>{d.value=!1}),i.value.on("record-end",async S=>{const b=URL.createObjectURL(S),A=await NCe(S,s.audioRecordFormat),y=`${oN()}.mp3`,x=new File([A],y,{type:s.audioRecordFormat});l.value.load(b),a("finishRecord",{name:x.name,type:x.type,size:x.size,file:x}),u.value=!0,r.value=!1}),i.value.on("record-progress",S=>{a("recorderProgressChanged",m(S))})},_=()=>{r.value&&(i.value.stopRecording(),r.value=!1)},g=()=>{i.value.startRecording(),r.value=!0},T=()=>{u.value&&(l.value.playPause(),d.value=!d.value)};return pt(()=>{h(),g()}),zs(()=>{l.value&&l.value.destroy()}),t({playPause:T,stopRecording:_,record:i}),(S,b)=>(p(),f("div",{ref_key:"waveformContainer",ref:o,class:"w-full p-1"},null,512))}},wCe="en",RCe="UTILITY",rl={HEADER:"HEADER",BODY:"BODY",BUTTONS:"BUTTONS"},NI=["IMAGE","VIDEO","DOCUMENT"],Ul=(e,t)=>{var n;return(n=e.components)==null?void 0:n.find(s=>s.type===t)},qf=e=>e.replace(/{{|}}/g,""),$Ce=e=>Object.keys(e).every(n=>e[n]),MCe=(e,t)=>e.replace(/{{([^}]+)}}/g,(n,s)=>{var o;const a=qf(s);return((o=t.body)==null?void 0:o[a])||`{{${s}}}`}),kCe=(e,t)=>{const n={},s=Ul(e,rl.BODY),a=Ul(e,rl.HEADER);if(!s)return n;const l=s.text.match(/{{([^}]+)}}/g);return l&&(n.body={},l.forEach(r=>{const d=qf(r);n.body[d]=""})),t&&(n.header||(n.header={}),n.header.media_url="",n.header.media_type=a.format.toLowerCase()),e.components.filter(r=>r.type===rl.BUTTONS).forEach(r=>{r.buttons&&r.buttons.forEach((d,u)=>{if(d.type==="URL"&&d.url&&d.url.includes("{{")){const m=d.url.match(/{{([^}]+)}}/g)||[];m.length>0&&(n.buttons||(n.buttons=[]),n.buttons[u]={type:"url",parameter:"",url:d.url,variables:m.map(h=>qf(h))})}d.type==="COPY_CODE"&&(n.buttons||(n.buttons=[]),n.buttons[u]={type:"copy_code",parameter:""})})}),n},LCe={class:"w-full"},DCe={class:"flex gap-2 mb-2.5"},PCe={class:"flex flex-1 gap-1 items-center px-2.5 py-0 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},BCe=["placeholder"],FCe=["disabled","title"],UCe={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},GCe=["onClick"],VCe={class:"flex justify-between items-center mb-2.5"},HCe={class:"text-sm"},WCe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},KCe={key:0,class:"mb-3"},zCe={class:"text-xs font-medium text-n-slate-11"},jCe={key:0,class:"text-sm label-body"},YCe={key:1,class:"text-sm italic text-n-slate-11"},XCe={class:"text-xs font-medium text-n-slate-11"},qCe={class:"text-sm label-body"},ZCe={key:1,class:"mt-3"},QCe={class:"text-xs font-medium text-n-slate-11"},JCe={class:"text-sm label-body"},exe={key:2,class:"mt-3"},txe={class:"text-xs font-medium text-n-slate-11"},nxe={class:"flex flex-wrap gap-1 mt-1"},sxe={class:"mt-3"},axe={class:"text-xs font-medium text-n-slate-11"},oxe={class:"text-sm"},lxe={key:0,class:"py-8 text-center"},ixe={key:0},rxe={key:1,class:"space-y-4"},cxe={class:"text-n-slate-11"},dxe={__name:"TemplatesPicker",props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=yt(),l=F(""),i=F(!1),r=oa("inboxes/getFilteredWhatsAppTemplates",xc(n,"inboxId")),d=C(()=>r.value.filter(S=>S.name.toLowerCase().includes(l.value.toLowerCase()))),u=S=>{var b;return((b=Ul(S,rl.BODY))==null?void 0:b.text)||""},m=S=>Ul(S,rl.HEADER),h=S=>Ul(S,rl.FOOTER),_=S=>Ul(S,rl.BUTTONS),g=S=>{const b=m(S);return b&&NI.includes(b.format)},T=async()=>{i.value=!0;try{await o.dispatch("inboxes/syncTemplates",n.inboxId),_e(a("WHATSAPP_TEMPLATES.PICKER.REFRESH_SUCCESS"))}catch{_e(a("WHATSAPP_TEMPLATES.PICKER.REFRESH_ERROR"))}finally{i.value=!1}};return(S,b)=>{const A=z("fluent-icon");return p(),f("div",LCe,[c("div",DCe,[c("div",PCe,[v(A,{icon:"search",class:"text-n-slate-12",size:"16"}),pe(c("input",{"onUpdate:modelValue":b[0]||(b[0]=y=>l.value=y),type:"search",placeholder:I(a)("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,BCe),[[mt,l.value]])]),c("button",{disabled:i.value,class:"flex justify-center items-center w-9 h-9 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 hover:bg-n-alpha-2 dark:hover:bg-n-solid-2 disabled:opacity-50 disabled:cursor-not-allowed",title:I(a)("WHATSAPP_TEMPLATES.PICKER.REFRESH_BUTTON"),onClick:T},[v(Wt,{icon:"i-lucide-refresh-ccw",class:re(["text-n-slate-12 size-4",{"animate-spin":i.value}])},null,8,["class"])],8,FCe)]),c("div",UCe,[(p(!0),f(fe,null,Ae(d.value,(y,x)=>(p(),f("div",{key:y.id},[c("button",{class:"block p-2.5 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:$=>s("onSelect",y)},[c("div",null,[c("div",VCe,[c("p",HCe,E(y.name),1),c("span",WCe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+": "+E(y.language),1)]),m(y)?(p(),f("div",KCe,[c("p",zCe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.HEADER")||"HEADER"),1),m(y).format==="TEXT"?(p(),f("div",jCe,E(m(y).text),1)):g(y)?(p(),f("div",YCe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.MEDIA_CONTENT",{format:m(y).format})||`${m(y).format} ${I(a)("WHATSAPP_TEMPLATES.PICKER.MEDIA_CONTENT_FALLBACK")}`),1)):O("",!0)])):O("",!0),c("div",null,[c("p",XCe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.BODY")||"BODY"),1),c("p",qCe,E(u(y)),1)]),h(y)?(p(),f("div",ZCe,[c("p",QCe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.FOOTER")||"FOOTER"),1),c("p",JCe,E(h(y).text),1)])):O("",!0),_(y)?(p(),f("div",exe,[c("p",txe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.BUTTONS")||"BUTTONS"),1),c("div",nxe,[(p(!0),f(fe,null,Ae(_(y).buttons,$=>(p(),f("span",{key:$.text,class:"px-2 py-1 text-xs rounded bg-n-slate-3 text-n-slate-12"},E($.text),1))),128))])])):O("",!0),c("div",sxe,[c("p",axe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.CATEGORY")||"CATEGORY"),1),c("p",oxe,E(y.category),1)])])],8,GCe),x!=d.value.length-1?(p(),f("hr",{key:`hr-${x}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):O("",!0)]))),128)),d.value.length?O("",!0):(p(),f("div",lxe,[l.value&&I(r).length?(p(),f("div",ixe,[c("p",null,[Ee(E(I(a)("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),c("strong",null,E(l.value),1)])])):I(r).length?O("",!0):(p(),f("div",rxe,[c("p",cxe,E(I(a)("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_AVAILABLE")),1)]))]))])])}}},uxe=Fe(dxe,[["__scopeId","data-v-c9137a2e"]]),pxe={class:"flex flex-col gap-4 p-4 mb-4 rounded-lg bg-n-alpha-black2"},mxe={class:"flex justify-between items-center"},hxe={class:"text-sm font-medium text-n-slate-12"},fxe={class:"text-xs text-n-slate-11"},gxe={class:"flex flex-col gap-2"},_xe={class:"rounded-md"},vxe={class:"text-sm whitespace-pre-wrap text-n-slate-12"},bxe={class:"text-xs text-n-slate-11"},Exe={key:0},Txe={key:0,class:"mb-4"},Axe={class:"mb-2.5 text-sm font-semibold"},yxe={class:"flex items-center mb-2.5"},Sxe={key:1},Ixe={class:"mb-2.5 text-sm font-semibold"},Cxe={key:2},xxe={class:"mb-2.5 text-sm font-semibold"},Nxe={key:3,class:"p-2.5 text-center rounded-md bg-n-ruby-9/20 text-n-ruby-9"},z_={__name:"WhatsAppTemplateParser",props:{template:{type:Object,default:()=>({}),validator:e=>!(!e||typeof e!="object"||!e.components||!Array.isArray(e.components))}},emits:["sendMessage","resetTemplate","back"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=F({}),i=C(()=>`${o("WHATSAPP_TEMPLATES.PARSER.LANGUAGE")}: ${s.template.language||wCe}`),r=C(()=>`${o("WHATSAPP_TEMPLATES.PARSER.CATEGORY")}: ${s.template.category||RCe}`),d=C(()=>Ul(s.template,rl.HEADER)),u=C(()=>Ul(s.template,rl.BODY)),m=C(()=>{var w;return((w=u.value)==null?void 0:w.text)||""}),h=C(()=>{var w;return NI.includes((w=d.value)==null?void 0:w.format)}),_=C(()=>{var D;const w=(D=d.value)==null?void 0:D.format;return w?w.charAt(0)+w.slice(1).toLowerCase():""}),g=C(()=>{var w;return((w=m.value)==null?void 0:w.match(/{{([^}]+)}}/g))!==null}),T=C(()=>MCe(m.value,l.value)),S=C(()=>{var w;return!g.value&&!h.value?!1:!!(h.value&&!((w=l.value.header)!=null&&w.media_url)||g.value&&l.value.body&&Object.values(l.value.body).some(H=>!H)||l.value.buttons&&l.value.buttons.some(H=>!H.parameter))}),b=Lt({processedParams:{requiredIfKeysPresent:rf(g),allKeysRequired:$Ce}},{processedParams:l}),A=()=>{l.value=kCe(s.template,h.value)},y=w=>{var D;(D=l.value).header??(D.header={}),l.value.header.media_url=w},x=()=>{if(b.value.$touch(),b.value.$invalid)return;const{name:w,category:D,language:H,namespace:B}=s.template,k={message:T.value,templateParams:{name:w,category:D,language:H,namespace:B,processed_params:l.value}};a("sendMessage",k)},$=()=>{a("resetTemplate")},N=()=>{a("back")};return pt(A),ot(()=>s.template,()=>{A(),b.value.$reset()},{deep:!0}),t({processedParams:l,hasVariables:g,hasMediaHeader:h,headerComponent:d,renderedTemplate:T,v$:b,updateMediaUrl:y,sendMessage:x,resetTemplate:$,goBack:N}),(w,D)=>{var H;return p(),f("div",null,[c("div",pxe,[c("div",mxe,[c("h3",hxe,E(e.template.name),1),c("span",fxe,E(i.value),1)]),c("div",gxe,[c("div",_xe,[c("div",vxe,E(T.value),1)])]),c("div",bxe,E(r.value),1)]),g.value||h.value?(p(),f("div",Exe,[h.value?(p(),f("div",Txe,[c("p",Axe,E(w.$t("WHATSAPP_TEMPLATES.PARSER.MEDIA_HEADER_LABEL",{type:_.value})||`${_.value} Header`),1),c("div",yxe,[v(ln,{"model-value":((H=l.value.header)==null?void 0:H.media_url)||"",type:"url",class:"flex-1",placeholder:I(o)("WHATSAPP_TEMPLATES.PARSER.MEDIA_URL_LABEL",{type:_.value}),"onUpdate:modelValue":y},null,8,["model-value","placeholder"])])])):O("",!0),l.value.body?(p(),f("div",Sxe,[c("p",Ixe,E(w.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(p(!0),f(fe,null,Ae(l.value.body,(B,k)=>(p(),f("div",{key:`body-${k}`,class:"flex items-center mb-2.5"},[v(ln,{modelValue:l.value.body[k],"onUpdate:modelValue":U=>l.value.body[k]=U,type:"text",class:"flex-1",placeholder:I(o)("WHATSAPP_TEMPLATES.PARSER.VARIABLE_PLACEHOLDER",{variable:k})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):O("",!0),l.value.buttons?(p(),f("div",Cxe,[c("p",xxe,E(I(o)("WHATSAPP_TEMPLATES.PARSER.BUTTON_PARAMETERS")),1),(p(!0),f(fe,null,Ae(l.value.buttons,(B,k)=>(p(),f("div",{key:`button-${k}`,class:"flex items-center mb-2.5"},[v(ln,{modelValue:l.value.buttons[k].parameter,"onUpdate:modelValue":U=>l.value.buttons[k].parameter=U,type:"text",class:"flex-1",placeholder:I(o)("WHATSAPP_TEMPLATES.PARSER.BUTTON_PARAMETER")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):O("",!0),I(b).$dirty&&I(b).$invalid?(p(),f("p",Nxe,E(w.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):O("",!0)])):O("",!0),at(w.$slots,"actions",{sendMessage:x,resetTemplate:$,goBack:N,isValid:!I(b).$invalid,disabled:S.value})])}}},Oxe={class:"w-full"},wxe={class:"flex gap-2 justify-end"},Rxe={__name:"TemplateParser",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","resetTemplate"],setup(e,{emit:t}){const n=t,s=o=>{n("sendMessage",o)},a=()=>{n("resetTemplate")};return(o,l)=>(p(),f("div",Oxe,[v(z_,{template:e.template,onSendMessage:s,onResetTemplate:a},{actions:K(({sendMessage:i,resetTemplate:r,disabled:d})=>[c("footer",wxe,[v(ce,{faded:"",slate:"",type:"reset",label:o.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"),onClick:r},null,8,["label","onClick"]),v(ce,{type:"button",label:o.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),disabled:d,onClick:i},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])]))}},$xe={components:{TemplatesPicker:uxe,TemplateParser:Rxe},props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],data(){return{selectedWaTemplate:null}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},modalHeaderContent(){return this.selectedWaTemplate?this.$t("WHATSAPP_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:this.selectedWaTemplate.name}):this.$t("WHATSAPP_TEMPLATES.MODAL.SUBTITLE")}},methods:{pickTemplate(e){this.selectedWaTemplate=e},onResetTemplate(){this.selectedWaTemplate=null},onSendMessage(e){this.$emit("onSend",e)},onClose(){this.$emit("cancel")}}},Mxe={class:"row modal-content"};function kxe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("TemplatesPicker"),r=z("TemplateParser"),d=z("woot-modal");return p(),V(d,{show:o.localShow,"onUpdate:show":t[0]||(t[0]=u=>o.localShow=u),"on-close":o.onClose,size:"modal-big"},{default:K(()=>[v(l,{"header-title":e.$t("WHATSAPP_TEMPLATES.MODAL.TITLE"),"header-content":o.modalHeaderContent},null,8,["header-title","header-content"]),c("div",Mxe,[a.selectedWaTemplate?(p(),V(r,{key:1,template:a.selectedWaTemplate,onResetTemplate:o.onResetTemplate,onSendMessage:o.onSendMessage},null,8,["template","onResetTemplate","onSendMessage"])):(p(),V(i,{key:0,"inbox-id":n.inboxId,onOnSelect:o.pickTemplate},null,8,["inbox-id","onOnSelect"]))])]),_:1},8,["show","on-close"])}const Lxe=Fe($xe,[["render",kxe],["__scopeId","data-v-aadd6c10"]]),Dxe={computed:{...St({accountId:"getCurrentAccountId"})},methods:{onFileUpload(e){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(e):this.onIndirectFileUpload(e)},onDirectFileUpload(e){const t=this.isATwilioSMSChannel?lf:Nc;e&&(Ci(e,t)?new og.DirectUpload(e.file,`/api/v1/accounts/${this.accountId}/conversations/${this.currentChat.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:s=>{s.setRequestHeader("api_access_token",this.currentUser.access_token)}}).create((s,a)=>{s?_e(s):this.attachFile({file:e,blob:a})}):_e(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t})))},onIndirectFileUpload(e){const t=this.isATwilioSMSChannel?lf:Nc;e&&(Ci(e,t)?this.attachFile({file:e}):_e(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t})))}}},Pxe=ng(()=>Va(()=>import("./EmojiInput-CHOuDIMs.js"),__vite__mapDeps([3,4,5,6,2,7,8,9,10,11,12,13,14,15]))),Bxe={components:{ArticleSearchPopover:$Ie,AttachmentPreview:Hye,AudioRecorder:OCe,Banner:td,CannedResponse:qg,EmojiInput:Pxe,MessageSignatureMissingAlert:LIe,ReplyBottomPanel:qSe,ReplyEmailHead:dSe,ReplyToMessage:Mye,ReplyTopPanel:qye,ResizableTextArea:ag,WhatsappTemplates:Lxe,WootMessageEditor:nl},mixins:[Mr,Dxe,wye],props:{popOutReplyBox:{type:Boolean,default:!1}},emits:["update:popOutReplyBox"],setup(){const{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s}=Sn(),a=Ks("replyEditor");return{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s,replyEditor:a}},data(){return{message:"",inReplyTo:{},isFocused:!1,showEmojiPicker:!1,attachedFiles:[],isRecordingAudio:!1,recordingAudioState:"",recordingAudioDurationText:"",isUploading:!1,replyType:Us.REPLY,mentionSearchKey:"",hasSlashCommand:!1,bccEmails:"",ccEmails:"",toEmails:"",doAutoSaveDraft:()=>{},showWhatsAppTemplatesModal:!1,updateEditorSelectionWith:"",undefinedVariableMessage:"",showMentions:!1,showUserMentions:!1,showCannedMenu:!1,showVariablesMenu:!1,newConversationModalActive:!1,showArticleSearchPopover:!1,hasRecordedAudio:!1}},computed:{...St({currentChat:"getSelectedChat",messageSignature:"getMessageSignature",currentUser:"getCurrentUser",lastEmail:"getLastEmailInSelectedChat",globalConfig:"globalConfig/get"}),currentContact(){return this.$store.getters["contacts/getContact"](this.currentChat.meta.sender.id)},shouldShowReplyToMessage(){var e;return((e=this.inReplyTo)==null?void 0:e.id)&&!this.isPrivate&&this.inboxHasFeature(Vc.REPLY_TO)&&!this.is360DialogWhatsAppChannel},showRichContentEditor(){if(this.isOnPrivateNote||this.isRichEditorEnabled)return!0;if(this.isAPIInbox){const{display_rich_content_editor:e=!1}=this.uiSettings;return e}return!1},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:0;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{_e(this.$t("CONVERSATION.CHANGE_AGENT"))})}},showSelfAssignBanner(){return this.message!==""&&!this.isOnPrivateNote&&(!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id)},showWhatsappTemplates(){return this.isAWhatsAppCloudChannel&&!this.isPrivate},isPrivate(){return this.currentChat.can_reply||this.isAWhatsAppChannel?this.isOnPrivateNote:!0},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},messagePlaceHolder(){return this.isPrivate?this.$t("CONVERSATION.FOOTER.PRIVATE_MSG_INPUT"):this.$t("CONVERSATION.FOOTER.MSG_INPUT")},isMessageLengthReachingThreshold(){return this.message.length>this.maxLength-50},charactersRemaining(){return this.maxLength-this.message.length},isReplyButtonDisabled(){return this.isATwitterInbox?!0:this.hasAttachments||this.hasRecordedAudio?!1:this.isMessageEmpty||this.message.length===0||this.message.length>this.maxLength},sender(){return{name:this.currentUser.name,thumbnail:this.currentUser.avatar_url}},conversationType(){const{additional_attributes:e}=this.currentChat;return(e?e.type:"")||""},maxLength(){return this.isPrivate?$o.GENERAL:this.isAFacebookInbox?$o.FACEBOOK:this.isAnInstagramChannel?$o.INSTAGRAM:this.isATwilioWhatsAppChannel?$o.TWILIO_WHATSAPP:this.isAWhatsAppCloudChannel?$o.WHATSAPP_CLOUD:this.isASmsInbox?$o.TWILIO_SMS:this.isAnEmailChannel?$o.EMAIL:this.isATwilioSMSChannel?$o.TWILIO_SMS:this.isAWhatsAppChannel?$o.WHATSAPP_CLOUD:$o.GENERAL},showFileUpload(){return this.isAWebWidgetInbox||this.isAFacebookInbox||this.isAWhatsAppChannel||this.isAPIInbox||this.isAnEmailChannel||this.isASmsInbox||this.isATelegramChannel||this.isALineChannel||this.isAnInstagramChannel},replyButtonLabel(){let e=this.$t("CONVERSATION.REPLYBOX.SEND");this.isPrivate&&(e=this.$t("CONVERSATION.REPLYBOX.CREATE"));const t=this.isEditorHotKeyEnabled("cmd_enter")?"( + )":"()";return`${e} ${t}`},replyBoxClass(){return{"is-private":this.isPrivate,"is-focused":this.isFocused||this.hasAttachments}},hasAttachments(){return this.attachedFiles.length},isRichEditorEnabled(){return this.isAWebWidgetInbox||this.isAnEmailChannel},showAudioRecorder(){return!this.isOnPrivateNote&&this.showFileUpload},showAudioRecorderEditor(){return this.showAudioRecorder&&this.isRecordingAudio},isOnPrivateNote(){return this.replyType===Us.NOTE},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=Pt,{conversation_display_type:t=e}=this.uiSettings;return t!==e},isMessageEmpty(){return this.message?!this.message.trim().replace(/\n/g,"").length:!0},showReplyHead(){return!this.isOnPrivateNote&&this.isAnEmailChannel},enableMultipleFileUpload(){return this.isAnEmailChannel||this.isAWebWidgetInbox||this.isAPIInbox||this.isAWhatsAppChannel||this.isATelegramChannel},isSignatureEnabledForInbox(){return!this.isPrivate&&this.sendWithSignature},isSignatureAvailable(){return!!this.signatureToApply},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},editorMessageKey(){const{editor_message_key:e}=this.uiSettings;return e},commandPlusEnterToSendEnabled(){return this.editorMessageKey==="cmd_enter"},enterToSendEnabled(){return this.editorMessageKey==="enter"},conversationId(){return this.currentChat.id},conversationIdByRoute(){return this.conversationId},editorStateId(){return`draft-${this.conversationIdByRoute}-${this.replyType}`},audioRecordFormat(){return this.isAWhatsAppChannel||this.isATelegramChannel?Jp.MP3:this.isAPIInbox?Jp.MP3:Jp.WAV},messageVariables(){return qx({conversation:this.currentChat,contact:this.currentContact,inbox:this.inbox})},signatureToApply(){return this.showRichContentEditor?this.messageSignature:Ti(this.messageSignature)},connectedPortalSlug(){const{help_center:e={}}=this.inbox,{slug:t=""}=e;return t}},watch:{currentChat(e,t){const{can_reply:n}=e;t&&t.id!==e.id&&this.setCCAndToEmailsFromLastChat(),!this.isOnPrivateNote&&(n||this.isAWhatsAppChannel?this.replyType=Us.REPLY:this.replyType=Us.NOTE,this.fetchAndSetReplyTo())},lastEmail:{handler(e){e&&this.setCCAndToEmailsFromLastChat()},deep:!0},conversationIdByRoute(e,t){e!==t&&(this.setToDraft(t,this.replyType),this.getFromDraft(),this.resetRecorderAndClearAttachments())},message(e){const t=Vo(e,this.signatureToApply),n=t.startsWith("/");this.hasSlashCommand=n&&!this.showRichContentEditor,this.showMentions=this.hasSlashCommand,this.mentionSearchKey=this.hasSlashCommand?t.substring(1):"",this.doAutoSaveDraft()},replyType(e,t){this.setToDraft(this.conversationIdByRoute,t),this.getFromDraft()}},mounted(){this.getFromDraft(),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.handleKeyEvents),this.setCCAndToEmailsFromLastChat(),this.doAutoSaveDraft=ml(()=>{this.saveDraft(this.conversationIdByRoute,this.replyType)},500,!0),this.fetchAndSetReplyTo(),It.on(xn.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),It.on(xn.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive),It.on(xn.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor)},unmounted(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.handleKeyEvents),It.off(xn.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),It.off(xn.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor),It.off(xn.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},methods:{handleInsert(e){const{url:t,title:n}=e;if(this.isRichEditorEnabled){const o=n.split(`
`).filter(l=>l.trim()!=="").join(" ");It.emit(xn.INSERT_INTO_RICH_EDITOR,`[${o}](${t})`)}else this.addIntoEditor(`${this.$t("CONVERSATION.REPLYBOX.INSERT_READ_MORE")} ${t}`);nn(_a.INSERT_ARTICLE_LINK)},toggleRichContentEditor(){this.updateUISettings({display_rich_content_editor:!this.showRichContentEditor});const e=Ti(this.messageSignature);if(!this.showRichContentEditor&&this.messageSignature){let t=Vo(this.message,this.messageSignature);t=Ti(t),t=kl(t,e),this.message=t}else this.message=Rx(this.message,e,this.messageSignature)},resetRecorderAndClearAttachments(){this.resetAudioRecorderInput(),this.attachedFiles=[]},saveDraft(e,t){if(this.message||this.message===""){const n=`draft-${e}-${t}`,s=Xx(this.message||"");this.$store.dispatch("draftMessages/set",{key:n,message:s})}},setToDraft(e,t){this.saveDraft(e,t),this.message=""},getFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`,t=this.$store.getters["draftMessages/get"](e)||"";this.message=this.toggleSignatureForDraft(t)}},toggleSignatureForDraft(e){return this.isPrivate?e:this.sendWithSignature?kl(e,this.signatureToApply):Vo(e,this.signatureToApply)},removeFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`;this.$store.dispatch("draftMessages/delete",{key:e})}},getElementToBind(){return this.replyEditor},getKeyboardEvents(){return{Escape:{action:()=>{this.hideEmojiPicker(),this.hideMentions()},allowOnFocusedInput:!0},"$mod+KeyK":{action:e=>{e.preventDefault(),document.querySelector("ninja-keys").open()},allowOnFocusedInput:!0},Enter:{action:e=>{this.isAValidEvent("enter")&&(this.onSendReply(),e.preventDefault())},allowOnFocusedInput:!0},"$mod+Enter":{action:()=>{this.isAValidEvent("cmd_enter")&&this.onSendReply()},allowOnFocusedInput:!0}}},isAValidEvent(e){return!this.showUserMentions&&!this.showMentions&&!this.showCannedMenu&&!this.showVariablesMenu&&this.isFocused&&this.isEditorHotKeyEnabled(e)},onPaste(e){const t=e.clipboardData.files;!this.showRichContentEditor&&t.length!==0&&this.$refs.messageInput.$el.blur(),!(!t.length||!t[0])&&t.forEach(n=>{const{name:s,type:a,size:o}=n;this.onFileUpload({name:s,type:a,size:o,file:n})})},toggleUserMention(e){this.showUserMentions=e},toggleCannedMenu(e){this.showCannedMenu=e},toggleVariablesMenu(e){this.showVariablesMenu=e},openWhatsappTemplateModal(){this.showWhatsAppTemplatesModal=!0},hideWhatsappTemplatesModal(){this.showWhatsAppTemplatesModal=!1},onClickSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:a,name:o,role:l,avatar_url:i}=this.currentUser,r={account_id:e,availability_status:t,available_name:n,email:s,id:a,name:o,role:l,thumbnail:i};this.assignedAgent=r},confirmOnSendReply(){if(!this.isReplyButtonDisabled&&!this.showMentions){const e=this.isATwilioWhatsAppChannel||this.isAWhatsAppCloudChannel||this.is360DialogWhatsAppChannel,t=this.isAnInstagramChannel;if((e||t)&&!this.isPrivate)this.sendMessageAsMultipleMessages(this.message);else{const n=this.getMessagePayload(this.message);this.sendMessage(n)}this.isPrivate||this.clearEmailField(),this.clearMessage(),this.hideEmojiPicker(),this.$emit("update:popOutReplyBox",!1)}},sendMessageAsMultipleMessages(e){this.getMultipleMessagesPayload(e).forEach(n=>{this.sendMessage(n)})},sendMessageAnalyticsData(e){var t;return e?nn(_a.SENT_PRIVATE_NOTE):nn(_a.SENT_MESSAGE,{channelType:this.channelType,signatureEnabled:this.sendWithSignature,hasReplyTo:!!((t=this.inReplyTo)!=null&&t.id)})},async onSendReply(){const e=Yx({message:this.message,variables:this.messageVariables});if(e.length>0){const t=e.length>1?e.length:1;this.undefinedVariableMessage=this.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.MESSAGE",{undefinedVariablesCount:t,undefinedVariables:e.join(", ")}),await this.$refs.confirmDialog.showConfirmation()&&this.confirmOnSendReply()}else this.confirmOnSendReply()},async sendMessage(e){var t,n;try{await this.$store.dispatch("createPendingMessageAndSend",e),It.emit(xn.SCROLL_TO_MESSAGE),It.emit(xn.MESSAGE_SENT),this.removeFromDraft(),this.sendMessageAnalyticsData(e.private)}catch(s){const a=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.error)||this.$t("CONVERSATION.MESSAGE_ERROR");_e(a)}},async onSendWhatsAppReply(e){this.sendMessage({conversationId:this.currentChat.id,...e}),this.hideWhatsappTemplatesModal()},replaceText(e){this.sendWithSignature&&!this.private&&(e=kl(e,this.signatureToApply));const t=jx({message:e,variables:this.messageVariables});setTimeout(()=>{nn(_a.INSERTED_A_CANNED_RESPONSE),this.message=t},100)},setReplyMode(e=Us.REPLY){const{can_reply:t}=this.currentChat;if(this.$store.dispatch("draftMessages/setReplyEditorMode",{mode:e}),(t||this.isAWhatsAppChannel)&&(this.replyType=e),this.showRichContentEditor){this.isRecordingAudio&&this.toggleAudioRecorder();return}this.$nextTick(()=>this.$refs.messageInput.focus())},clearEditorSelection(){this.updateEditorSelectionWith=""},insertIntoTextEditor(e,t,n){const{message:s}=this,a=s.slice(0,t)+e+s.slice(n,s.length);this.message=a},addIntoEditor(e){if(this.showRichContentEditor&&(this.updateEditorSelectionWith=e,this.onFocus()),!this.showRichContentEditor){const{selectionStart:t,selectionEnd:n}=this.$refs.messageInput.$el;this.insertIntoTextEditor(e,t,n)}},clearMessage(){this.message="",this.sendWithSignature&&!this.isPrivate&&(this.message=kl(this.message,this.signatureToApply)),this.attachedFiles=[],this.isRecordingAudio=!1,this.resetReplyToMessage(),this.resetAudioRecorderInput()},clearEmailField(){this.ccEmails="",this.bccEmails="",this.toEmails=""},toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker},toggleAudioRecorder(){this.isRecordingAudio=!this.isRecordingAudio,this.isRecorderAudioStopped=!this.isRecordingAudio,this.isRecordingAudio||this.resetAudioRecorderInput()},toggleAudioRecorderPlayPause(){this.isRecordingAudio&&(this.isRecorderAudioStopped?this.isRecorderAudioStopped&&this.$refs.audioRecorderInput.playPause():(this.isRecorderAudioStopped=!0,this.$refs.audioRecorderInput.stopRecording()))},hideEmojiPicker(){this.showEmojiPicker&&this.toggleEmojiPicker()},hideMentions(){this.showMentions=!1},onTypingOn(){this.toggleTyping("on")},onTypingOff(){this.toggleTyping("off")},onBlur(){this.isFocused=!1,this.saveDraft(this.conversationIdByRoute,this.replyType)},onFocus(){this.isFocused=!0},onRecordProgressChanged(e){this.recordingAudioDurationText=e},onFinishRecorder(e){this.recordingAudioState="stopped",this.hasRecordedAudio=!0;const t={...e,isRecordedAudio:!0};return e&&this.onFileUpload(t)},toggleTyping(e){const t=this.currentChat.id,n=this.isPrivate;t&&this.$store.dispatch("conversationTypingStatus/toggleTyping",{status:e,conversationId:t,isPrivate:n})},attachFile({blob:e,file:t}){const n=new FileReader;n.readAsDataURL(t.file),n.onloadend=()=>{this.attachedFiles.push({currentChatId:this.currentChat.id,resource:e||t,isPrivate:this.isPrivate,thumb:n.result,blobSignedId:e?e.signed_id:void 0,isRecordedAudio:(t==null?void 0:t.isRecordedAudio)||!1})}},removeAttachment(e){this.attachedFiles=e},setReplyToInPayload(e){var t;return(t=this.inReplyTo)!=null&&t.id?{...e,contentAttributes:{...e.contentAttributes,in_reply_to:this.inReplyTo.id}}:e},getMultipleMessagesPayload(e){const t=[];if(this.attachedFiles&&this.attachedFiles.length){let s=this.isAnInstagramChannel?"":e;this.attachedFiles.forEach(a=>{const o=this.globalConfig.directUploadsEnabled?a.blobSignedId:a.resource.file;let l={conversationId:this.currentChat.id,files:[o],private:!1,message:s,sender:this.sender};l=this.setReplyToInPayload(l),t.push(l),this.isAnInstagramChannel||(s="")})}const n=!this.attachedFiles||!this.attachedFiles.length;if(this.isAnInstagramChannel&&this.message||!this.isAnInstagramChannel&&n){let s={conversationId:this.currentChat.id,message:e,private:!1,sender:this.sender};s=this.setReplyToInPayload(s),t.push(s)}return t},getMessagePayload(e){let t={conversationId:this.currentChat.id,message:e,private:this.isPrivate,sender:this.sender};return t=this.setReplyToInPayload(t),this.attachedFiles&&this.attachedFiles.length&&(t.files=[],this.attachedFiles.forEach(n=>{this.globalConfig.directUploadsEnabled?t.files.push(n.blobSignedId):t.files.push(n.resource.file)})),this.ccEmails&&!this.isOnPrivateNote&&(t.ccEmails=this.ccEmails),this.bccEmails&&!this.isOnPrivateNote&&(t.bccEmails=this.bccEmails),this.toEmails&&!this.isOnPrivateNote&&(t.toEmails=this.toEmails),t},setCcEmails(e){this.bccEmails=e.bccEmails,this.ccEmails=e.ccEmails},setCCAndToEmailsFromLastChat(){var l,i,r;const e=((r=(i=(l=this.currentChat)==null?void 0:l.meta)==null?void 0:i.sender)==null?void 0:r.email)||"",{email:t,forward_to_email:n}=this.inbox,{cc:s,bcc:a,to:o}=zx(this.lastEmail,e,t,n);this.toEmails=o.join(", "),this.ccEmails=s.join(", "),this.bccEmails=a.join(", ")},fetchAndSetReplyTo(){var n,s;const e=vo.MESSAGE_REPLY_TO,t=Qa.getFromJsonStore(e,this.conversationId);this.inReplyTo=(s=(n=this.currentChat)==null?void 0:n.messages)==null?void 0:s.find(a=>a.id===t)},resetReplyToMessage(){const e=vo.MESSAGE_REPLY_TO;Qa.deleteFromJsonStore(e,this.conversationId),It.emit(xn.TOGGLE_REPLY_TO_MESSAGE)},onNewConversationModalActive(e){this.newConversationModalActive=e},onSearchPopoverClose(){this.showArticleSearchPopover=!1},toggleInsertArticle(){this.showArticleSearchPopover=!this.showArticleSearchPopover},resetAudioRecorderInput(){this.recordingAudioDurationText="00:00",this.isRecordingAudio=!1,this.recordingAudioState="",this.hasRecordedAudio=!1,this.attachedFiles=this.attachedFiles.filter(e=>!(e!=null&&e.isRecordedAudio))},togglePopout(){this.$emit("update:popOutReplyBox",!this.popOutReplyBox)}}},Fxe={class:"reply-box__top"};function Uxe(e,t,n,s,a,o){const l=z("Banner"),i=z("ReplyTopPanel"),r=z("ArticleSearchPopover"),d=z("ReplyToMessage"),u=z("CannedResponse"),m=z("EmojiInput"),h=z("ReplyEmailHead"),_=z("AudioRecorder"),g=z("ResizableTextArea"),T=z("WootMessageEditor"),S=z("AttachmentPreview"),b=z("MessageSignatureMissingAlert"),A=z("ReplyBottomPanel"),y=z("WhatsappTemplates"),x=z("woot-confirm-modal"),$=_t("on-clickaway");return p(),f(fe,null,[o.showSelfAssignBanner?(p(),V(l,{key:0,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg banner--self-assign","banner-message":e.$t("CONVERSATION.NOT_ASSIGNED_TO_YOU"),"has-action-button":"","action-button-label":e.$t("CONVERSATION.ASSIGN_TO_ME"),onPrimaryAction:o.onClickSelfAssign},null,8,["banner-message","action-button-label","onPrimaryAction"])):O("",!0),c("div",{ref:"replyEditor",class:re(["reply-box",o.replyBoxClass])},[v(i,{mode:a.replyType,"is-message-length-reaching-threshold":o.isMessageLengthReachingThreshold,"characters-remaining":o.charactersRemaining,"popout-reply-box":n.popOutReplyBox,onSetReplyMode:o.setReplyMode,onTogglePopout:o.togglePopout},null,8,["mode","is-message-length-reaching-threshold","characters-remaining","popout-reply-box","onSetReplyMode","onTogglePopout"]),a.showArticleSearchPopover&&o.connectedPortalSlug?(p(),V(r,{key:0,"selected-portal-slug":o.connectedPortalSlug,onInsert:o.handleInsert,onClose:o.onSearchPopoverClose},null,8,["selected-portal-slug","onInsert","onClose"])):O("",!0),c("div",Fxe,[o.shouldShowReplyToMessage?(p(),V(d,{key:0,message:a.inReplyTo,onDismiss:o.resetReplyToMessage},null,8,["message","onDismiss"])):O("",!0),a.showMentions&&a.hasSlashCommand?pe((p(),V(u,{key:1,class:"normal-editor__canned-box","search-key":a.mentionSearchKey,onReplace:o.replaceText},null,8,["search-key","onReplace"])),[[$,o.hideMentions]]):O("",!0),a.showEmojiPicker?pe((p(),V(m,{key:2,class:re({"emoji-dialog--expanded":o.isOnExpandedLayout||n.popOutReplyBox}),"on-click":o.addIntoEditor},null,8,["class","on-click"])),[[$,o.hideEmojiPicker]]):O("",!0),o.showReplyHead?(p(),V(h,{key:3,"cc-emails":a.ccEmails,"onUpdate:ccEmails":t[0]||(t[0]=N=>a.ccEmails=N),"bcc-emails":a.bccEmails,"onUpdate:bccEmails":t[1]||(t[1]=N=>a.bccEmails=N),"to-emails":a.toEmails,"onUpdate:toEmails":t[2]||(t[2]=N=>a.toEmails=N)},null,8,["cc-emails","bcc-emails","to-emails"])):O("",!0),o.showAudioRecorderEditor?(p(),V(_,{key:4,ref:"audioRecorderInput","audio-record-format":o.audioRecordFormat,onRecorderProgressChanged:o.onRecordProgressChanged,onFinishRecord:o.onFinishRecorder,onPlay:t[3]||(t[3]=N=>a.recordingAudioState="playing"),onPause:t[4]||(t[4]=N=>a.recordingAudioState="paused")},null,8,["audio-record-format","onRecorderProgressChanged","onFinishRecord"])):o.showRichContentEditor?(p(),V(T,{key:6,modelValue:a.message,"onUpdate:modelValue":t[6]||(t[6]=N=>a.message=N),"editor-id":o.editorStateId,class:"input","is-private":o.isOnPrivateNote,placeholder:o.messagePlaceHolder,"update-selection-with":a.updateEditorSelectionWith,"min-height":4,"enable-variables":"",variables:o.messageVariables,signature:o.signatureToApply,"allow-signature":"","channel-type":e.channelType,onTypingOff:o.onTypingOff,onTypingOn:o.onTypingOn,onFocus:o.onFocus,onBlur:o.onBlur,onToggleUserMention:o.toggleUserMention,onToggleCannedMenu:o.toggleCannedMenu,onToggleVariablesMenu:o.toggleVariablesMenu,onClearSelection:o.clearEditorSelection},null,8,["modelValue","editor-id","is-private","placeholder","update-selection-with","variables","signature","channel-type","onTypingOff","onTypingOn","onFocus","onBlur","onToggleUserMention","onToggleCannedMenu","onToggleVariablesMenu","onClearSelection"])):(p(),V(g,{key:5,ref:"messageInput",modelValue:a.message,"onUpdate:modelValue":t[5]||(t[5]=N=>a.message=N),class:"rounded-none input",placeholder:o.messagePlaceHolder,"min-height":4,signature:o.signatureToApply,"allow-signature":"","send-with-signature":o.sendWithSignature,onTypingOff:o.onTypingOff,onTypingOn:o.onTypingOn,onFocus:o.onFocus,onBlur:o.onBlur},null,8,["modelValue","placeholder","signature","send-with-signature","onTypingOff","onTypingOn","onFocus","onBlur"]))]),o.hasAttachments&&!o.showAudioRecorderEditor?(p(),f("div",{key:1,class:"attachment-preview-box",onPaste:t[7]||(t[7]=(...N)=>o.onPaste&&o.onPaste(...N))},[v(S,{class:"flex-col mt-4",attachments:a.attachedFiles,onRemoveAttachment:o.removeAttachment},null,8,["attachments","onRemoveAttachment"])],32)):O("",!0),o.isSignatureEnabledForInbox&&!o.isSignatureAvailable?(p(),V(b,{key:2})):O("",!0),v(A,{"conversation-id":o.conversationId,"enable-multiple-file-upload":o.enableMultipleFileUpload,"enable-whats-app-templates":o.showWhatsappTemplates,inbox:o.inbox,"is-on-private-note":o.isOnPrivateNote,"is-recording-audio":a.isRecordingAudio,"is-send-disabled":o.isReplyButtonDisabled,mode:a.replyType,"on-file-upload":e.onFileUpload,"on-send":o.onSendReply,"conversation-type":o.conversationType,"recording-audio-duration-text":a.recordingAudioDurationText,"recording-audio-state":a.recordingAudioState,"send-button-text":o.replyButtonLabel,"show-audio-recorder":o.showAudioRecorder,"show-editor-toggle":e.isAPIInbox&&!o.isOnPrivateNote,"show-emoji-picker":a.showEmojiPicker,"show-file-upload":o.showFileUpload,"toggle-audio-recorder-play-pause":o.toggleAudioRecorderPlayPause,"toggle-audio-recorder":o.toggleAudioRecorder,"toggle-emoji-picker":o.toggleEmojiPicker,message:a.message,"portal-slug":o.connectedPortalSlug,"new-conversation-modal-active":a.newConversationModalActive,onSelectWhatsappTemplate:o.openWhatsappTemplateModal,onToggleEditor:o.toggleRichContentEditor,onReplaceText:o.replaceText,onToggleInsertArticle:o.toggleInsertArticle},null,8,["conversation-id","enable-multiple-file-upload","enable-whats-app-templates","inbox","is-on-private-note","is-recording-audio","is-send-disabled","mode","on-file-upload","on-send","conversation-type","recording-audio-duration-text","recording-audio-state","send-button-text","show-audio-recorder","show-editor-toggle","show-emoji-picker","show-file-upload","toggle-audio-recorder-play-pause","toggle-audio-recorder","toggle-emoji-picker","message","portal-slug","new-conversation-modal-active","onSelectWhatsappTemplate","onToggleEditor","onReplaceText","onToggleInsertArticle"]),v(y,{"inbox-id":o.inbox.id,show:a.showWhatsAppTemplatesModal,onClose:o.hideWhatsappTemplatesModal,onOnSend:o.onSendWhatsAppReply,onCancel:o.hideWhatsappTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),v(x,{ref:"confirmDialog",title:e.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.TITLE"),description:a.undefinedVariableMessage},null,8,["title","description"])],2)],64)}const Gxe=Fe(Bxe,[["render",Uxe],["__scopeId","data-v-4b6e58b3"]]),ys={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},Kn={USER:"user",AGENT:"agent",ACTIVITY:"activity",PRIVATE:"private",BOT:"bot",ERROR:"error",TEMPLATE:"template",EMAIL:"email",UNSUPPORTED:"unsupported"},qi={USER:"User",AGENT_BOT:"agent_bot",CAPTAIN_ASSISTANT:"captain_assistant"},$s={LEFT:"left",RIGHT:"right",CENTER:"center"},Vn={SENT:"sent",DELIVERED:"delivered",READ:"read",FAILED:"failed",PROGRESS:"progress"},Is={IMAGE:"image",AUDIO:"audio",VIDEO:"video",FILE:"file",LOCATION:"location",FALLBACK:"fallback",SHARE:"share",STORY_MENTION:"story_mention",CONTACT:"contact",IG_REEL:"ig_reel"},Do={TEXT:"text",INPUT_TEXT:"input_text",INPUT_TEXTAREA:"input_textarea",INPUT_EMAIL:"input_email",INPUT_SELECT:"input_select",CARDS:"cards",FORM:"form",ARTICLE:"article",INCOMING_EMAIL:"incoming_email",INPUT_CSAT:"input_csat",INTEGRATIONS:"integrations",STICKER:"sticker"};Is.IMAGE,Is.VIDEO,Is.AUDIO,Is.IG_REEL;const OI=Symbol("MessageControl");function Os(){const e=Ao(OI,null);if(e===null)throw new Error("Component is missing a parent <Message /> component.");const t=ke("getSelectedChatAttachments"),n=C(()=>{const s=t.value.filter(a=>[Is.IMAGE,Is.VIDEO,Is.IG_REEL,Is.AUDIO].includes(a.file_type));return Hs(s)});return{...e,filteredCurrentChatAttachments:n}}function Vxe(e){cs(OI,e)}const Hxe={__name:"MessageStatus",props:{status:{type:String,required:!0,validator:e=>Object.values(Vn).includes(e)}},setup(e){const{t}=Pe(),n=["i-lucide-clock-1","i-lucide-clock-2","i-lucide-clock-3","i-lucide-clock-4","i-lucide-clock-5","i-lucide-clock-6","i-lucide-clock-7","i-lucide-clock-8","i-lucide-clock-9","i-lucide-clock-10","i-lucide-clock-11","i-lucide-clock-12"],s=F(n[0]);y$(()=>{const d=(n.indexOf(s.value)+1)%n.length;s.value=n[d]},500,{immediate:e.status===Vn.PROGRESS,immediateCallback:!1});const o=C(()=>({[Vn.SENT]:"i-lucide-check",[Vn.DELIVERED]:"i-lucide-check-check",[Vn.READ]:"i-lucide-check-check"})[e.status]),l=C(()=>({[Vn.SENT]:"text-n-slate-10",[Vn.DELIVERED]:"text-n-slate-10",[Vn.READ]:"text-[#7EB6FF]"})[e.status]),i=C(()=>({[Vn.SENT]:t("CHAT_LIST.SENT"),[Vn.DELIVERED]:t("CHAT_LIST.DELIVERED"),[Vn.READ]:t("CHAT_LIST.MESSAGE_READ"),[Vn.PROGRESS]:t("CHAT_LIST.SENDING")})[e.status]);return(r,d)=>{const u=_t("tooltip");return e.status===I(Vn).PROGRESS?pe((p(),V(Wt,{key:0,icon:s.value,class:"text-n-slate-10"},null,8,["icon"])),[[u,i.value,void 0,{"top-start":!0}]]):pe((p(),V(Wt,{key:1,icon:o.value,class:re([l.value,"size-[14px]"])},null,8,["icon","class"])),[[u,i.value,void 0,{"top-start":!0}]])}}},Wxe={class:"text-xs flex items-center gap-1.5"},Kxe={class:"inline"},zxe={class:"inline"},jxe={__name:"MessageMeta",setup(e){const{isAFacebookInbox:t,isALineChannel:n,isAPIInbox:s,isASmsInbox:a,isATelegramChannel:o,isATwilioChannel:l,isAWebWidgetInbox:i,isAWhatsAppChannel:r,isAnEmailChannel:d,isAnInstagramChannel:u}=P_(),{status:m,isPrivate:h,createdAt:_,sourceId:g,messageType:T,contentAttributes:S}=Os(),b=C(()=>Qu(_.value,"LLL d, h:mm a")),A=C(()=>{var w;return h.value||m.value===Vn.FAILED||(w=S.value)!=null&&w.deleted?!1:T.value===ys.OUTGOING||T.value===ys.TEMPLATE}),y=C(()=>A.value?d.value?!!g.value:r.value||l.value||t.value||a.value||o.value||u.value?g.value&&m.value===Vn.SENT:!!n.value:!1),x=C(()=>A.value?r.value||l.value||a.value||t.value?g.value&&m.value===Vn.DELIVERED:i.value||s.value?m.value===Vn.SENT:n.value?m.value===Vn.DELIVERED:!1:!1),$=C(()=>A.value?r.value||l.value||t.value||u.value?g.value&&m.value===Vn.READ:i.value||s.value?m.value===Vn.READ:!1:!1),N=C(()=>$.value?Vn.READ:x.value?Vn.DELIVERED:y.value?Vn.SENT:Vn.PROGRESS);return(w,D)=>(p(),f("div",Wxe,[c("div",Kxe,[c("time",zxe,E(b.value),1)]),I(h)?(p(),V(Wt,{key:0,icon:"i-lucide-lock-keyhole",class:"size-3"})):O("",!0),A.value?(p(),V(Hxe,{key:1,status:N.value},null,8,["status"])):O("",!0)]))}},Yxe={class:"line-clamp-2 break-all"},Oo={__name:"Base",setup(e){const{variant:t,orientation:n,inReplyTo:s,shouldGroupWithNext:a}=Os(),{t:o}=Pe(),l={[Kn.AGENT]:"bg-n-solid-blue text-n-slate-12",[Kn.PRIVATE]:"bg-n-solid-amber text-n-amber-12 [&_.prosemirror-mention-node]:font-semibold",[Kn.USER]:"bg-n-slate-4 text-n-slate-12",[Kn.ACTIVITY]:"bg-n-alpha-1 text-n-slate-11 text-sm",[Kn.BOT]:"bg-n-solid-iris text-n-slate-12",[Kn.TEMPLATE]:"bg-n-solid-iris text-n-slate-12",[Kn.ERROR]:"bg-n-ruby-4 text-n-ruby-12",[Kn.EMAIL]:"w-full",[Kn.UNSUPPORTED]:"bg-n-solid-amber/70 border border-dashed border-n-amber-12 text-n-amber-12"},i={[$s.LEFT]:"left-bubble rounded-xl ltr:rounded-bl-sm rtl:rounded-br-sm",[$s.RIGHT]:"right-bubble rounded-xl ltr:rounded-br-sm rtl:rounded-bl-sm",[$s.CENTER]:"rounded-md"},r=C(()=>({[$s.LEFT]:"justify-start",[$s.RIGHT]:"justify-end",[$s.CENTER]:"justify-center"})[n.value]),d=C(()=>{const h=[l[t.value]];return t.value!==Kn.ACTIVITY?h.push(i[n.value]):h.push("rounded-lg"),h}),u=()=>{It.emit(xn.SCROLL_TO_MESSAGE,{messageId:s.value.id})},m=C(()=>{if(!s)return"";const{content:h,attachments:_}=s.value;if(h)return h;if(_!=null&&_.length){const g=_[0],T=g.fileType??g.file_type;return o(`CHAT_LIST.ATTACHMENTS.${T}.CONTENT`)}return o("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")});return(h,_)=>(p(),f("div",{class:re(["text-sm",[d.value,{"max-w-lg":I(t)!==I(Kn).EMAIL}]])},[I(s)?(p(),f("div",{key:0,class:"bg-n-alpha-black1 rounded-lg p-2 -mx-1 mb-2 cursor-pointer",onClick:u},[c("span",Yxe,E(m.value),1)])):O("",!0),at(h.$slots,"default"),!I(a)&&I(t)!==I(Kn).ACTIVITY?(p(),V(jxe,{key:1,class:re([[r.value,I(t)===I(Kn).EMAIL?"px-3 pb-3":"",I(t)===I(Kn).PRIVATE?"text-n-amber-12/50":"text-n-slate-11"],"mt-2"])},null,8,["class"])):O("",!0)],2))}},Xxe={class:"prose prose-bubble"},wI={__name:"FormattedContent",props:{content:{type:String,required:!0}},setup(e){const t=e,{variant:n}=Os(),s=C(()=>n.value===Kn.ACTIVITY?t.content:new tp(t.content).formattedMessage);return(a,o)=>{const l=_t("dompurify-html");return pe((p(),f("span",Xxe,null,512)),[[l,s.value]])}}},qxe=e=>{const l="center center",i=F(1),r=F(l),d=F(0),u=C(()=>({transform:`rotate(${d.value}deg)`})),m=C(()=>({transform:`scale(${i.value})`,cursor:i.value<3?"zoom-in":"zoom-out",transformOrigin:`${r.value}`})),h=()=>{e.value&&(r.value=l)},_=$=>{if(!e.value)return;h();const N=$==="clockwise"?90:-90;d.value=(d.value+N)%360,i.value=1,h()},g=($,N)=>{if(!e.value)return{x:50,y:50};const w=e.value.getBoundingClientRect(),{relativeX:D,relativeY:H}=Zx($,N,w),{rotatedX:B,rotatedY:k}=Qx(D,H,d.value);return Jx(B,k,w.width,w.height)},T=($,N,w)=>{if(!e.value)return;const D=Math.max(1,Math.min(3,i.value+$));if(D!==i.value){if(N!=null&&w!=null&&i.value===1){const{x:H,y:B}=g(N,w);r.value=`${H}% ${B}%`}i.value=D}},S=$=>{if(!e.value)return;$.preventDefault();const N=i.value>=3?1:3,{x:w,y:D}=g($.clientX,$.clientY);r.value=`${w}% ${D}%`,i.value=N},b=$=>{if(!e.value)return;$.preventDefault();const N=$.deltaY>0?-.2:.2;T(N,$.clientX,$.clientY)},A=ml($=>{if(!e.value||i.value!==1)return;const{x:N,y:w}=g($.clientX,$.clientY);r.value=`${N}% ${w}%`},100,!1),y=ml(()=>{e.value&&i.value===1&&(r.value=l)},110,!1);return{zoomScale:i,imgTransformOriginPoint:r,activeImageRotation:d,imageWrapperStyle:u,imageStyle:m,getZoomOrigin:g,resetTransformOrigin:h,onRotate:_,onZoom:T,onDoubleClickZoomImage:S,onWheelImageZoom:b,onMouseMove:A,onMouseLeave:y,resetZoomAndRotation:()=>{d.value=0,i.value=1,h()}}},Zxe={key:0,class:"flex items-center min-w-[15rem] shrink-0"},Qxe={class:"flex flex-col ml-2 rtl:ml-0 rtl:mr-2 overflow-hidden"},Jxe={class:"text-base leading-5 m-0 font-medium"},eNe={class:"overflow-hidden text-n-slate-12 whitespace-nowrap text-ellipsis"},tNe={class:"text-xs text-n-slate-11 whitespace-nowrap text-ellipsis"},nNe={class:"flex-1 mx-2 px-2 truncate text-sm font-medium text-center text-n-slate-12"},sNe={class:"truncate"},aNe={class:"flex items-center gap-2 ml-2 shrink-0"},oNe={class:"flex items-stretch flex-1 h-full overflow-hidden"},lNe={class:"flex items-center justify-center w-16 shrink-0"},iNe={class:"flex-1 flex items-center justify-center overflow-hidden"},rNe=["src"],cNe=["src"],dNe=["src"],uNe={class:"flex items-center justify-center w-16 shrink-0"},pNe={class:"z-10 flex items-center justify-center h-12 border-t border-n-weak"},mNe={class:"rounded-md flex items-center justify-center px-3 py-1 bg-n-slate-3 text-n-slate-12 text-sm font-medium"},Hp={__name:"GalleryView",props:yn({attachment:{type:Object,required:!0},allAttachments:{type:Array,required:!0}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:yn(["close"],["update:show"]),setup(e,{emit:t}){const n=e,s=t,a=jn(e,"show"),{t:o}=Pe(),l=Nn(),i={IMAGE:"image",VIDEO:"video",IG_REEL:"ig_reel",AUDIO:"audio"},r=F(!1),d=F({}),u=F(""),m=F(n.allAttachments.findIndex(Z=>Z.message_id===n.attachment.message_id)||0),h=Ks("imageRef"),{imageWrapperStyle:_,imageStyle:g,onRotate:T,activeImageRotation:S,onZoom:b,onDoubleClickZoomImage:A,onWheelImageZoom:y,onMouseMove:x,onMouseLeave:$,resetZoomAndRotation:N}=qxe(h),w=C(()=>l.getCurrentUser.value),D=C(()=>n.allAttachments.length>1),H=C(()=>{const{created_at:Z}=d.value;return Z&&Qu(Z,"LLL d yyyy, h:mm a")||""}),B=C(()=>u.value===i.IMAGE),k=C(()=>[i.VIDEO,i.IG_REEL].includes(u.value)),U=C(()=>u.value===i.AUDIO),G=C(()=>{var he,be,ne;const{name:Z,available_name:j,avatar_url:X,thumbnail:q,id:se}=((he=d.value)==null?void 0:he.sender)||((be=n.attachment)==null?void 0:be.sender)||{};return{name:((ne=w.value)==null?void 0:ne.id)===se?"You":Z||j||"",avatar:q||X||""}}),L=C(()=>{const{data_url:Z}=d.value;if(!Z)return"";const j=Z.split("/").pop();return j?decodeURIComponent(j):""}),M=()=>s("close"),R=Z=>{const{file_type:j}=Z;Object.values(i).includes(j)&&(d.value=Z,u.value=j)},P=(Z,j)=>{Z&&(m.value=j,R(Z),N())},W=async()=>{const{file_type:Z,data_url:j,extension:X}=d.value;if(Object.values(i).includes(Z))try{r.value=!0,await cg({url:j,type:Z,extension:X})}catch{_e(o("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{r.value=!1}};return Qs({Escape:{action:M},ArrowLeft:{action:()=>{P(n.allAttachments[m.value-1],m.value-1)}},ArrowRight:{action:()=>{P(n.allAttachments[m.value+1],m.value+1)}}}),pt(()=>{R(n.attachment)}),(Z,j)=>{const X=z("woot-modal"),q=_t("dompurify-html");return p(),V(Gc,{to:"body"},{default:K(()=>[v(X,{show:a.value,"onUpdate:show":j[14]||(j[14]=se=>a.value=se),"full-width":"","show-close-button":!1,"on-close":M},{default:K(()=>[c("div",{class:"bg-n-background flex flex-col h-[inherit] w-[inherit] overflow-hidden select-none",onClick:M},[c("header",{class:"z-10 flex items-center justify-between w-full h-16 px-6 py-2 bg-n-background border-b border-n-weak",onClick:j[4]||(j[4]=ze(()=>{},["stop"]))},[G.value?(p(),f("div",Zxe,[G.value.avatar?(p(),V(Ft,{key:0,name:G.value.name,src:G.value.avatar,size:40,"rounded-full":"",class:"flex-shrink-0"},null,8,["name","src"])):O("",!0),c("div",Qxe,[c("h3",Jxe,[c("span",eNe,E(G.value.name),1)]),c("span",tNe,E(H.value),1)])])):O("",!0),c("div",nNe,[pe(c("span",sNe,null,512),[[q,L.value]])]),c("div",aNe,[B.value?(p(),V(ce,{key:0,icon:"i-lucide-zoom-in",slate:"",ghost:"",onClick:j[0]||(j[0]=se=>I(b)(.1))})):O("",!0),B.value?(p(),V(ce,{key:1,icon:"i-lucide-zoom-out",slate:"",ghost:"",onClick:j[1]||(j[1]=se=>I(b)(-.1))})):O("",!0),B.value?(p(),V(ce,{key:2,icon:"i-lucide-rotate-ccw",slate:"",ghost:"",onClick:j[2]||(j[2]=se=>I(T)("counter-clockwise"))})):O("",!0),B.value?(p(),V(ce,{key:3,icon:"i-lucide-rotate-cw",slate:"",ghost:"",onClick:j[3]||(j[3]=se=>I(T)("clockwise"))})):O("",!0),v(ce,{icon:"i-lucide-download",slate:"",ghost:"","is-loading":r.value,disabled:r.value,onClick:W},null,8,["is-loading","disabled"]),v(ce,{icon:"i-lucide-x",slate:"",ghost:"",onClick:M})])]),c("main",oNe,[c("div",lNe,[D.value?(p(),V(ce,{key:0,icon:"ltr:i-lucide-chevron-left rtl:i-lucide-chevron-right",class:"z-10",blue:"",faded:"",lg:"",disabled:m.value===0,onClick:j[5]||(j[5]=ze(se=>P(e.allAttachments[m.value-1],m.value-1),["stop"]))},null,8,["disabled"])):O("",!0)]),c("div",iNe,[B.value?(p(),f("div",{key:0,style:Ct(I(_)),class:re(["flex items-center justify-center origin-center",{"w-[calc(100dvh-8rem)] h-[calc(100dvw-7rem)]":I(S)%180!==0,"size-full":I(S)%180===0}])},[(p(),f("img",{ref_key:"imageRef",ref:h,key:d.value.message_id,src:d.value.data_url,style:Ct(I(g)),class:"max-h-full max-w-full object-contain duration-100 ease-in-out transform select-none",onClick:j[6]||(j[6]=ze(()=>{},["stop"])),onDblclick:j[7]||(j[7]=ze((...se)=>I(A)&&I(A)(...se),["stop"])),onWheel:j[8]||(j[8]=ze((...se)=>I(y)&&I(y)(...se),["prevent","stop"])),onMousemove:j[9]||(j[9]=(...se)=>I(x)&&I(x)(...se)),onMouseleave:j[10]||(j[10]=(...se)=>I($)&&I($)(...se))},null,44,rNe))],6)):O("",!0),k.value?(p(),f("video",{key:d.value.message_id,src:d.value.data_url,controls:"",playsInline:"",class:"max-h-full max-w-full object-contain",onClick:j[11]||(j[11]=ze(()=>{},["stop"]))},null,8,cNe)):O("",!0),U.value?(p(),f("audio",{key:d.value.message_id,controls:"",class:"w-full max-w-md",onClick:j[12]||(j[12]=ze(()=>{},["stop"]))},[c("source",{src:`${d.value.data_url}?t=${Date.now()}`},null,8,dNe)])):O("",!0)]),c("div",uNe,[D.value?(p(),V(ce,{key:0,icon:"ltr:i-lucide-chevron-right rtl:i-lucide-chevron-left",class:"z-10",blue:"",faded:"",lg:"",disabled:m.value===e.allAttachments.length-1,onClick:j[13]||(j[13]=ze(se=>P(e.allAttachments[m.value+1],m.value+1),["stop"]))},null,8,["disabled"])):O("",!0)])]),c("footer",pNe,[c("div",mNe,E(`${m.value+1} / ${e.allAttachments.length}`),1)])])]),_:1},8,["show"])]),_:1})}}},hNe={key:0,class:"flex flex-col items-center justify-center gap-1 text-xs text-center rounded-lg size-full bg-n-alpha-1 text-n-slate-11"},fNe=["src"],gNe={__name:"Image",props:{attachment:{type:Object,required:!0}},setup(e){const t=F(!1),n=F(!1),{filteredCurrentChatAttachments:s}=Os(),a=()=>{t.value=!0};return(o,l)=>(p(),f(fe,null,[c("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer",onClick:l[0]||(l[0]=i=>n.value=!0)},[t.value?(p(),f("div",hNe,[v(Wt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),Ee(" "+E(o.$t("COMPONENTS.MEDIA.LOADING_FAILED")),1)])):(p(),f("img",{key:1,class:"object-cover w-full h-full skip-context-menu",src:e.attachment.dataUrl,onError:a},null,40,fNe))]),n.value?(p(),V(Hp,{key:0,show:n.value,"onUpdate:show":l[1]||(l[1]=i=>n.value=i),attachment:I(Hs)(e.attachment),"all-attachments":I(s),onError:a,onClose:l[2]||(l[2]=()=>n.value=!1)},null,8,["show","attachment","all-attachments"])):O("",!0)],64))}},_Ne=["src"],vNe={class:"absolute w-full h-full inset-0 p-1 flex items-center justify-center"},bNe={class:"size-7 bg-n-slate-1/60 backdrop-blur-sm rounded-full overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.4)]"},ENe={__name:"Video",props:{attachment:{type:Object,required:!0}},setup(e){const t=F(!1),{filteredCurrentChatAttachments:n}=Os();return(s,a)=>(p(),f(fe,null,[c("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer relative group",onClick:a[0]||(a[0]=o=>t.value=!0)},[c("video",{src:e.attachment.dataUrl,class:"w-full h-full object-cover",muted:"",playsInline:""},null,8,_Ne),c("div",vNe,[c("div",bNe,[v(Wt,{icon:"i-teenyicons-play-small-solid",class:"size-7 text-n-slate-12/80 backdrop-blur"})])])]),t.value?(p(),V(Hp,{key:0,show:t.value,"onUpdate:show":a[1]||(a[1]=o=>t.value=o),attachment:I(Hs)(e.attachment),"all-attachments":I(n),onError:s.onError,onClose:a[2]||(a[2]=()=>t.value=!1)},null,8,["show","attachment","all-attachments","onError"])):O("",!0)],64))}},TNe=["src"],ANe={class:"flex gap-1 w-full flex-1 items-center justify-start"},yNe={class:"tabular-nums text-xs"},SNe={class:"flex-1 items-center flex px-2"},INe=["max","value"],CNe={class:"text-xs text-n-slate-11 font-medium"},xNe={key:0,class:"text-n-slate-12 p-3 text-sm bg-n-alpha-1 rounded-lg w-full break-words"},RI=Object.assign({inheritAttrs:!1},{__name:"Audio",props:{attachment:{type:Object,required:!0}},setup(e){const t=C(()=>UN(e.attachment.dataUrl)),n=Ks("audioPlayer"),s=F(!1),a=F(!1),o=F(0),l=F(0),i=F(1),r=()=>{var A;l.value=(A=n.value)==null?void 0:A.duration},d=C(()=>`${i.value}x`);pt(()=>{var A;l.value=(A=n.value)==null?void 0:A.duration,n.value.playbackRate=i.value});const u=A=>{if(!A||Number.isNaN(A))return"00:00";const y=Math.floor(A/60),x=Math.floor(A%60);return`${y.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`},m=()=>{n.value.muted=!n.value.muted,a.value=n.value.muted},h=()=>{var A;o.value=(A=n.value)==null?void 0:A.currentTime},_=A=>{const y=Number(A.target.value);n.value.currentTime=y,o.value=y},g=()=>{s.value?(n.value.pause(),s.value=!1):(n.value.play(),s.value=!0)},T=()=>{s.value=!1,o.value=0,i.value=1,n.value.playbackRate=1},S=()=>{const A=[1,1.5,2],x=(A.indexOf(i.value)+1)%A.length;i.value=A[x],n.value.playbackRate=i.value},b=async()=>{const{fileType:A,dataUrl:y,extension:x}=e.attachment;cg({url:y,type:A,extension:x})};return(A,y)=>(p(),f(fe,null,[c("audio",{ref_key:"audioPlayer",ref:n,controls:"",class:"hidden",onLoadedmetadata:r,onTimeupdate:h,onEnded:T},[c("source",{src:t.value},null,8,TNe)],544),c("div",Bs(A.$attrs,{class:"rounded-xl w-full gap-2 p-1.5 bg-n-alpha-white flex flex-col items-center border border-n-container shadow-[0px_2px_8px_0px_rgba(94,94,94,0.06)]"}),[c("div",ANe,[c("button",{class:"p-0 border-0 size-8",onClick:g},[s.value?(p(),V(Wt,{key:0,class:"size-8",icon:"i-teenyicons-pause-small-solid"})):(p(),V(Wt,{key:1,class:"size-8",icon:"i-teenyicons-play-small-solid"}))]),c("div",yNe,E(u(o.value))+" / "+E(u(l.value)),1),c("div",SNe,[c("input",{type:"range",min:"0",max:l.value,value:o.value,class:"w-full h-1 bg-n-slate-12/40 rounded-lg appearance-none cursor-pointer accent-current",onInput:_},null,40,INe)]),c("button",{class:"border-0 w-10 h-6 grid place-content-center bg-n-alpha-2 hover:bg-alpha-3 rounded-2xl",onClick:S},[c("span",CNe,E(d.value),1)]),c("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:m},[a.value?(p(),V(Wt,{key:0,class:"size-4",icon:"i-lucide-volume-off"})):(p(),V(Wt,{key:1,class:"size-4",icon:"i-lucide-volume-2"}))]),c("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:b},[v(Wt,{class:"size-4",icon:"i-lucide-download"})])]),e.attachment.transcribedText?(p(),f("div",xNe,E(e.attachment.transcribedText),1)):O("",!0)],16)],64))}}),$I={__name:"FileIcon",props:{fileType:{type:String,required:!0}},setup(e){const t=C(()=>({"7z":"i-woot-file-zip",csv:"i-woot-file-csv",doc:"i-woot-file-doc",docx:"i-woot-file-doc",json:"i-woot-file-txt",odt:"i-woot-file-doc",pdf:"i-woot-file-pdf",ppt:"i-woot-file-ppt",pptx:"i-woot-file-ppt",rar:"i-woot-file-zip",rtf:"i-woot-file-doc",tar:"i-woot-file-zip",txt:"i-woot-file-txt",xls:"i-woot-file-xls",xlsx:"i-woot-file-xls",zip:"i-woot-file-zip"})[e.fileType]||"i-teenyicons-text-document-solid");return(n,s)=>(p(),V(Wt,{icon:t.value},null,8,["icon"]))}},NNe={class:"h-9 bg-n-alpha-white gap-2 overflow-hidden items-center flex px-2 rounded-lg border border-n-container"},ONe=["title"],wNe=["href"],RNe={__name:"File",props:{attachment:{type:Object,required:!0}},setup(e){const{t}=Pe(),n=C(()=>{var o;return eN(((o=e.attachment)==null?void 0:o.dataUrl)||"")}),s=C(()=>{const{base:o,type:l}=n.value,i=(r,d,u)=>r.length>d?`${r.substring(0,d).trimEnd()}${u?"..":"..."}`:r;return l?`${i(o,12,!0)}.${l}`:i(o,14,!1)}),a=C(()=>({"7z":"dark:text-[#EDEEF0] text-[#2F265F]",csv:"text-n-amber-12",doc:"dark:text-[#D6E1FF] text-[#1F2D5C]",docx:"dark:text-[#D6E1FF] text-[#1F2D5C]",json:"text-n-slate-12",odt:"dark:text-[#D6E1FF] text-[#1F2D5C]",pdf:"text-n-slate-12",ppt:"dark:text-[#FFE0C2] text-[#582D1D]",pptx:"dark:text-[#FFE0C2] text-[#582D1D]",rar:"dark:text-[#EDEEF0] text-[#2F265F]",rtf:"dark:text-[#D6E1FF] text-[#1F2D5C]",tar:"dark:text-[#EDEEF0] text-[#2F265F]",txt:"text-n-slate-12",xls:"text-n-teal-12",xlsx:"text-n-teal-12",zip:"dark:text-[#EDEEF0] text-[#2F265F]"})[n.value.type]||"text-n-slate-12");return(o,l)=>{const i=_t("tooltip");return p(),f("div",NNe,[v($I,{class:"flex-shrink-0","file-type":n.value.type},null,8,["file-type"]),c("span",{class:re(["flex-1 min-w-0 text-sm max-w-36",a.value]),title:n.value.name},E(s.value),11,ONe),pe((p(),f("a",{class:"flex-shrink-0 size-9 grid place-content-center cursor-pointer text-n-slate-11 hover:text-n-slate-12 transition-colors",href:e.attachment.dataUrl,rel:"noreferrer noopener nofollow",target:"_blank"},[v(Wt,{icon:"i-lucide-download"})],8,wNe)),[[i,I(t)("CONVERSATION.DOWNLOAD")]])])}}},MI=Object.assign({inheritAttrs:!1},{__name:"AttachmentChips",props:{attachments:{type:Array,default:()=>[]}},setup(e){const t=e,n=XE(),{orientation:s}=Os(),a=C(()=>{const d=[n.class,"flex","flex-wrap"];return s.value==="right"&&d.push("justify-end"),d}),o=C(()=>Array.isArray(t.attachments)?t.attachments:[]),l=C(()=>{const d=[Is.IMAGE,Is.VIDEO];return o.value.filter(m=>d.includes(m.fileType)).sort((m,h)=>d.indexOf(m.fileType)-d.indexOf(h.fileType))}),i=C(()=>o.value.filter(d=>d.fileType===Is.AUDIO)),r=C(()=>o.value.filter(d=>d.fileType===Is.FILE));return(d,u)=>(p(),f(fe,null,[l.value.length?(p(),f("div",{key:0,class:re(a.value)},[(p(!0),f(fe,null,Ae(l.value,m=>(p(),f(fe,{key:m.id},[m.fileType===I(Is).IMAGE?(p(),V(gNe,{key:0,attachment:m},null,8,["attachment"])):m.fileType===I(Is).VIDEO?(p(),V(ENe,{key:1,attachment:m},null,8,["attachment"])):O("",!0)],64))),128))],2)):O("",!0),i.value.length?(p(),f("div",{key:1,class:re(a.value)},[(p(!0),f(fe,null,Ae(i.value,m=>(p(),f("div",{key:m.id},[v(RI,{class:"bg-n-alpha-3 dark:bg-n-alpha-2 text-n-slate-12",attachment:m},null,8,["attachment"])]))),128))],2)):O("",!0),r.value.length?(p(),f("div",{key:2,class:re(a.value)},[(p(!0),f(fe,null,Ae(r.value,m=>(p(),V(RNe,{key:m.id,attachment:m},null,8,["attachment"]))),128))],2)):O("",!0)],64))}}),kI={__name:"TranslationToggle",props:{showingOriginal:Boolean},emits:["toggle"],setup(e){return(t,n)=>(p(),f("span",null,[c("span",{class:"text-xs text-n-slate-11 cursor-pointer hover:underline select-none",onClick:n[0]||(n[0]=s=>t.$emit("toggle"))},E(e.showingOriginal?t.$t("CONVERSATION.VIEW_TRANSLATED"):t.$t("CONVERSATION.VIEW_ORIGINAL")),1)]))}};function LI(e){const t=C(()=>{if(!e.value)return!1;const{translations:s={}}=e.value;return Object.keys(s||{}).length>0}),n=C(()=>{if(!t.value)return null;const s=e.value.translations;return s[Object.keys(s)[0]]});return{hasTranslations:t,translationContent:n}}const $Ne={class:"gap-3 flex flex-col"},MNe={key:0,class:"text-n-slate-11"},kNe={key:0,class:"px-2 py-1 rounded-lg bg-n-alpha-3"},LNe={__name:"Index",setup(e){const{content:t,attachments:n,contentAttributes:s,messageType:a}=Os(),{hasTranslations:o,translationContent:l}=LI(s),i=F(!1),r=C(()=>i.value?t.value:o.value?l.value:t.value),d=C(()=>a.value===ys.TEMPLATE),u=C(()=>{var h;return!t.value&&!((h=n.value)!=null&&h.length)}),m=()=>{i.value=!i.value};return(h,_)=>(p(),V(Oo,{class:"px-4 py-3","data-bubble-name":"text"},{default:K(()=>[c("div",$Ne,[u.value?(p(),f("span",MNe,E(h.$t("CONVERSATION.NO_CONTENT")),1)):O("",!0),r.value?(p(),V(wI,{key:1,content:r.value},null,8,["content"])):O("",!0),I(o)?(p(),V(kI,{key:2,class:"-mt-3","showing-original":i.value,onToggle:m},null,8,["showing-original"])):O("",!0),v(MI,{attachments:I(n),class:"gap-2"},null,8,["attachments"]),d.value?(p(),f(fe,{key:3},[I(s).submittedEmail?(p(),f("div",kNe,E(I(s).submittedEmail),1)):O("",!0)],64)):O("",!0)])]),_:1}))}},DNe=["title"],PNe={__name:"Activity",setup(e){const{content:t,createdAt:n}=Os(),s=C(()=>Qu(n.value,"LLL d, h:mm a"));return(a,o)=>{const l=_t("dompurify-html"),i=_t("tooltip");return pe((p(),V(Oo,{class:"px-3 py-1 !rounded-xl flex min-w-0 items-center gap-2","data-bubble-name":"activity"},{default:K(()=>[pe(c("span",{title:I(t)},null,8,DNe),[[l,I(t)]])]),_:1})),[[i,s.value,void 0,{top:!0}]])}}},BNe={key:0,class:"flex items-center gap-1 text-center rounded-lg"},FNe={class:"mb-0 text-n-slate-11"},UNe={key:1,class:"relative group rounded-lg overflow-hidden"},GNe=["src","width","height"],VNe={class:"absolute right-2 bottom-2 hidden group-hover:flex gap-2"},HNe={__name:"Image",emits:["error"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),{filteredCurrentChatAttachments:a,attachments:o}=Os(),l=C(()=>o.value[0]),i=F(!1),r=F(!1),d=F(!1),u=()=>{i.value=!0,n("error")},m=async()=>{const{fileType:h,dataUrl:_,extension:g}=l.value;try{d.value=!0,await cg({url:_,type:h,extension:g})}catch{_e(s("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{d.value=!1}};return(h,_)=>(p(),f(fe,null,[v(Oo,{class:"overflow-hidden p-3","data-bubble-name":"image",onClick:_[1]||(_[1]=g=>r.value=!0)},{default:K(()=>[i.value?(p(),f("div",BNe,[v(Wt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),c("p",FNe,E(h.$t("COMPONENTS.MEDIA.IMAGE_UNAVAILABLE")),1)])):(p(),f("div",UNe,[c("img",{class:"skip-context-menu",src:l.value.dataUrl,width:l.value.width,height:l.value.height,onClick:_[0]||(_[0]=(...g)=>h.onClick&&h.onClick(...g)),onError:u},null,40,GNe),_[4]||(_[4]=c("div",{class:"inset-0 p-2 pointer-events-none absolute bg-gradient-to-tl from-n-slate-12/30 dark:from-n-slate-1/50 via-transparent to-transparent hidden group-hover:flex"},null,-1)),c("div",VNe,[v(ce,{xs:"",solid:"",slate:"",icon:"i-lucide-expand",class:"opacity-60"}),v(ce,{xs:"",solid:"",slate:"",icon:"i-lucide-download",class:"opacity-60","is-loading":d.value,disabled:d.value,onClick:ze(m,["stop"])},null,8,["is-loading","disabled"])])]))]),_:1}),r.value?(p(),V(Hp,{key:0,show:r.value,"onUpdate:show":_[2]||(_[2]=g=>r.value=g),attachment:I(Hs)(l.value),"all-attachments":I(a),onError:u,onClose:_[3]||(_[3]=()=>r.value=!1)},null,8,["show","attachment","all-attachments"])):O("",!0)],64))}},WNe={class:"grid gap-4 min-w-64"},KNe={class:"grid gap-3"},zNe={class:"space-y-1 overflow-hidden"},jNe={key:0,class:"text-n-slate-12 text-sm truncate"},YNe={key:0,class:"truncate text-sm text-n-slate-12"},XNe={key:1,class:"truncate text-sm text-n-slate-11"},qNe={key:0,class:"mb-2"},ZNe=["href"],Wp={__name:"BaseAttachment",props:{icon:{type:[String,Object],required:!0},iconBgColor:{type:String,default:"bg-n-alpha-3"},senderTranslationKey:{type:String,required:!0},content:{type:String,required:!0},title:{type:String,default:""},action:{type:Object,required:!0,validator:e=>e.label&&(e.href||e.onClick)}},setup(e){const{sender:t}=Os(),{t:n}=Pe(),s=C(()=>{var a;return((a=t==null?void 0:t.value)==null?void 0:a.name)||""});return(a,o)=>(p(),V(Oo,{class:"overflow-hidden p-3","data-bubble-name":"attachment"},{default:K(()=>[c("div",WNe,[c("div",KNe,[c("div",{class:re(["size-8 rounded-lg grid place-content-center",e.iconBgColor])},[at(a.$slots,"icon",{},()=>[v(Wt,{icon:e.icon,class:"text-white size-4"},null,8,["icon"])])],2),c("div",zNe,[s.value?(p(),f("div",jNe,E(I(n)(e.senderTranslationKey,{sender:s.value})),1)):O("",!0),at(a.$slots,"default",{},()=>[e.title?(p(),f("div",YNe,E(e.title),1)):O("",!0),e.content?(p(),f("div",XNe,E(e.content),1)):O("",!0)])])]),e.action?(p(),f("div",qNe,[e.action.href?(p(),f("a",{key:0,href:e.action.href,rel:"noreferrer noopener nofollow",target:"_blank",class:"w-full block bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container"},E(e.action.label),9,ZNe)):(p(),f("button",{key:1,class:"w-full bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container",onClick:o[0]||(o[0]=(...l)=>e.action.onClick&&e.action.onClick(...l))},E(e.action.label),1))])):O("",!0)])]),_:3}))}},QNe={__name:"File",setup(e){const{attachments:t}=Os(),{t:n}=Pe(),s=C(()=>t.value[0].dataUrl),a=C(()=>s.value&&s.value.substring(s.value.lastIndexOf("/")+1)||n("CONVERSATION.UNKNOWN_FILE_TYPE")),o=C(()=>a.value.split(".").pop());return(l,i)=>(p(),V(Wp,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-n-alpha-3 dark:bg-n-alpha-white","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.FILE",content:decodeURI(a.value),action:{href:s.value,label:l.$t("CONVERSATION.DOWNLOAD")}},{icon:K(()=>[v($I,{"file-type":o.value,class:"size-4"},null,8,["file-type"])]),_:1},8,["content","action"]))}},JNe={__name:"Audio",setup(e){const{attachments:t}=Os(),n=C(()=>t.value[0]);return(s,a)=>(p(),V(Oo,{class:"bg-transparent","data-bubble-name":"audio"},{default:K(()=>[v(RI,{attachment:n.value,class:"p-2 text-n-slate-12 skip-context-menu"},null,8,["attachment"])]),_:1}))}},eOe={class:"relative group rounded-lg overflow-hidden"},tOe={key:0,class:"absolute p-2 flex items-start justify-end right-0 pointer-events-none"},nOe=["src"],bE={__name:"Video",emits:["error"],setup(e,{emit:t}){const n=t,s=F(!1),a=F(!1),{filteredCurrentChatAttachments:o,attachments:l}=Os(),i=()=>{s.value=!0,n("error")},r=C(()=>l.value[0]),d=C(()=>r.value.fileType===Is.IG_REEL);return(u,m)=>(p(),f(fe,null,[v(Oo,{class:"overflow-hidden p-3","data-bubble-name":"video",onClick:m[0]||(m[0]=h=>a.value=!0)},{default:K(()=>[c("div",eOe,[d.value?(p(),f("div",tOe,[v(Wt,{icon:"i-lucide-instagram",class:"text-white shadow-lg"})])):O("",!0),c("video",{controls:"",class:re(["rounded-lg skip-context-menu",{"max-w-48":d.value,"max-w-full":!d.value}]),src:r.value.dataUrl,onError:i},null,42,nOe)])]),_:1}),a.value?(p(),V(Hp,{key:0,show:a.value,"onUpdate:show":m[1]||(m[1]=h=>a.value=h),attachment:I(Hs)(r.value),"all-attachments":I(o),onError:u.onError,onClose:m[2]||(m[2]=()=>a.value=!1)},null,8,["show","attachment","all-attachments","onError"])):O("",!0)],64))}},sOe={key:0,class:"mb-2"},aOe=["src"],oOe=["src"],lOe={key:3,class:"flex items-center gap-1 px-5 py-4 text-center rounded-lg bg-n-alpha-1"},iOe={class:"mb-0 text-n-slate-11"},rOe={__name:"InstagramStory",emits:["error"],setup(e,{emit:t}){const n=t,{variant:s,content:a,attachments:o}=Os(),l=C(()=>o.value[0]),i=F(!1),r=F(!1),d=C(()=>s.value===Kn.ACTIVITY?a.value:new tp(a.value).formattedMessage),u=()=>{i.value=!0,n("error")},m=()=>{r.value=!0,n("error")};return(h,_)=>{const g=_t("dompurify-html");return p(),V(Oo,{class:"p-3 overflow-hidden","data-bubble-name":"ig-story"},{default:K(()=>[I(a)?pe((p(),f("div",sOe,null,512)),[[g,d.value]]):O("",!0),i.value?r.value?(p(),f("div",lOe,[v(Wt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),c("p",iOe,E(h.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])):(p(),f("video",{key:2,class:"rounded-lg max-w-80 skip-context-menu",controls:"",src:l.value.dataUrl,onError:m},null,40,oOe)):(p(),f("img",{key:1,class:"rounded-lg max-w-80 skip-context-menu",src:l.value.dataUrl,onError:u},null,40,aOe))]),_:1})}}},EE={a:["class","href","id","style","target"],address:["class","id","style"],b:["class","id","style"],blockquote:["class","id","style"],br:["class","id","style"],caption:["class","id","style"],cite:["class","id","style"],code:["class","id","style"],col:["align","bgcolor","char","charoff","class","id","style","valign","width"],colgroup:["align","bgcolor","char","charoff","class","id","style","valign","width"],center:["class","id","style"],dd:["class","id","style"],div:["align","class","dir","id","style"],dt:["class","id","style"],em:["class","id","style"],font:["class","color","face","id","size","style"],h1:["align","class","dir","id","style"],h2:["align","class","dir","id","style"],h3:["align","class","dir","id","style"],h4:["align","class","dir","id","style"],h5:["align","class","dir","id","style"],h6:["align","class","dir","id","style"],hr:["align","size","width"],i:["class","id","style"],img:["align","alt","border","class","height","hspace","id","src","style","title","usemap","vspace","width"],label:["class","id","style"],legend:["class","id","style"],li:["class","dir","id","style","type"],ol:["class","dir","id","style","type","start","reversed"],p:["align","class","dir","id","style"],pre:["class","id","style"],span:["class","id","style"],strong:["class","id","style"],style:[],sub:["class","id","style"],sup:["class","id","style"],table:["align","bgcolor","border","cellpadding","cellspacing","class","dir","frame","id","rules","style","width"],tbody:["class","id","style"],td:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],tfoot:["align","bgcolor","char","charoff","class","id","style","valign"],th:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],thead:["align","bgcolol","char","charoff","class","id","style","valign"],tr:["align","bgcolor","char","charoff","class","dir","id","style","valign"],u:["class","id","style"],ul:["class","dir","id","style"]},cOe=["script","iframe","textarea","title","noscript","noembed","svg"],dOe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"];function uOe(e,t){return t?e.split(",").map(n=>n.trim()).map(n=>{const s=n.replace(/\./g,"."+t+"_").replace(/#/g,"#"+t+"_");return s.toLowerCase().startsWith("body")?"#"+t+" "+s.substring(4):"#"+t+" "+s}).join(","):e}function pOe(e,t,n){return e.trim().replace(/expression\((.*?)\)/g,"").replace(/url\(["']?(.*?)["']?\)/g,(s,a)=>n?`url("${encodeURI(n(decodeURI(a)))}")`:t.includes(a.toLowerCase().split(":")[0])?s:"")}function DI(e,t,n,s,a){if(!e)return;const o=[];for(let l=0;l<e.length;l++){const i=e[l];o.push(i)}for(const l of o)if(n.includes(l)){const i=e.getPropertyValue(l);e.setProperty(l,pOe(i,t,a),s?e.getPropertyPriority(l):void 0)}else e.removeProperty(l)}function TE(e,t,n,s,a,o){e.selectorText=uOe(e.selectorText,t),DI(e.style,n,s,a,o)}const AE=["http","https","mailto"];function mOe(e,{dropAllHtmlTags:t=!1,rewriteExternalLinks:n,rewriteExternalResources:s,id:a="msg_"+String.fromCharCode(...new Array(24).fill(void 0).map(()=>Math.random()*25%25+65)),allowedSchemas:o=AE,allowedCssProperties:l=dOe,preserveCssPriority:i=!0,noWrapper:r=!1}){var d,u,m,h,_;r&&(a="");const g=new DOMParser().parseFromString(e,"text/html");o=Array.isArray(o)?o.map(x=>x.toLowerCase()):AE;const T=g.createNodeIterator(g.documentElement,NodeFilter.SHOW_COMMENT);let S;for(;S=T.nextNode();)(d=S.parentNode)==null||d.removeChild(S);const b=[...cOe];t&&b.push("style"),g.querySelectorAll(b.join(", ")).forEach(x=>x.remove()),g.querySelectorAll("head > style").forEach(x=>{g.body.appendChild(x)});const A=[],y=g.createNodeIterator(g.body,NodeFilter.SHOW_ELEMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});for(;S=y.nextNode();){const x=S,$=x.tagName.toLowerCase();if(!($==="body"||$==="html")){if(t){if(S.textContent){const N=g.createTextNode(S.textContent);(u=S.parentNode)==null||u.replaceChild(N,S)}else(m=S.parentNode)==null||m.removeChild(S);continue}if($ in EE){const N=EE[$];for(const w of x.getAttributeNames())if(!N.includes(w))x.removeAttribute(w);else if(w==="class"&&!r)x.setAttribute(w,((h=x.getAttribute(w))==null?void 0:h.split(" ").map(D=>a+"_"+D).join(" "))??"");else if(w==="id"&&!r)x.setAttribute(w,a+"_"+(x.getAttribute(w)??""));else if(w==="href"||w==="src"){const D=x.getAttribute(w)??"";w==="href"&&n?x.setAttribute(w,n(D)):w==="src"&&s?x.setAttribute(w,s(D)):o.includes(D.toLowerCase().split(":")[0])||x.removeAttribute(w)}DI(x.style,o,l,i,s),$==="a"&&(x.setAttribute("rel","noopener noreferrer"),x.setAttribute("target","_blank"))}else x.insertAdjacentHTML("afterend",x.innerHTML),A.push(x)}}for(const x of A)try{try{(_=x.parentNode)==null||_.removeChild(x)}catch{x.outerHTML=""}}catch{try{x.remove()}catch{}}if(g.querySelectorAll("body style").forEach(x=>{const $=x,N=$.sheet,w=[];if(!N.cssRules){$.textContent="";return}for(let D=0;D<N.cssRules.length;D++){const H=N.cssRules[D];if("selectorText"in H)TE(H,a,o,l,i,s),w.push(H);else if("cssRules"in H&&"media"in H){const B=H,k=[];for(let U=0;U<B.cssRules.length;U++){const G=B.cssRules[U];G.type===G.STYLE_RULE&&(TE(G,a,o,l,i,s),k.push(G))}for(;B.cssRules.length>0;)B.deleteRule(0);for(const U of k)B.insertRule(U.cssText,B.cssRules.length);w.push(B)}}$.textContent=w.map(D=>D.cssText).join(`
`)}),r)return g.body.innerHTML;{const x=g.createElement("div");return x.id=a,x.innerHTML=g.body.innerHTML,x.outerHTML}}function hOe(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function fOe(e,t,n){let s=e??"";return(s==null?void 0:s.length)===0&&t&&(s=hOe(t).split(`
`).map(a=>"<p>"+a+"</p>").join(`
`)),mOe(s,n??{})}const gOe=["innerHTML"],_Oe=["title"],yE=el({__name:"Letter",props:{className:{},html:{},text:{},useIframe:{type:Boolean},iframeTitle:{},rewriteExternalLinks:{},rewriteExternalResources:{},allowedCssProperties:{},allowedSchemas:{},preserveCssPriority:{type:Boolean}},setup(e){const t=e,{className:n,html:s,text:a,useIframe:o,iframeTitle:l,rewriteExternalLinks:i,rewriteExternalResources:r,allowedSchemas:d,allowedCssProperties:u,preserveCssPriority:m}=os(t),h=fOe(s,a,{rewriteExternalResources:r,rewriteExternalLinks:i,allowedSchemas:d,preserveCssPriority:m,allowedCssProperties:u}),_="data:text/html;charset=utf-8,"+encodeURIComponent(h);return(g,T)=>I(o)?I(o)?(p(),f("div",{key:1,class:re([I(n)])},[c("iframe",{src:_,title:I(l)},null,8,_Oe)],2)):O("",!0):(p(),f("div",{key:0,class:re([I(n)]),innerHTML:I(h)},null,10,gOe))}}),vOe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"],SE=vOe,IE=[".gmail_quote_container",".gmail_quote",".OutlookQuote",".email-quote",".quoted-text",".quote",'[class*="quote"]','[class*="Quote"]'],bOe=[/On .* wrote:/i,/-----Original Message-----/i,/Sent: /i,/From: /i];class CE{static extractQuotes(t){const n=document.createElement("div");return n.innerHTML=t,IE.forEach(a=>{n.querySelectorAll(a).forEach(o=>{o.remove()})}),this.findTextNodeQuotes(n).forEach(a=>{a.remove()}),n.innerHTML}static hasQuotes(t){const n=document.createElement("div");n.innerHTML=t;for(const a of IE)if(n.querySelector(a))return!0;return this.findTextNodeQuotes(n).length>0}static findTextNodeQuotes(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);for(let a=s.nextNode();a!==null;a=s.nextNode())if(bOe.some(l=>l.test(a.textContent))){const l=this.findParentBlock(a);l&&!n.includes(l)&&n.push(l)}return n}static findParentBlock(t){const n=["DIV","P","BLOCKQUOTE","SECTION"];let s=t.parentElement;for(;s;){if(n.includes(s.tagName))return s;s=s.parentElement}return null}}const EOe={key:1},TOe={key:2},AOe={key:3},yOe={key:4},SOe={__name:"EmailMeta",setup(e){const{contentAttributes:t,status:n,sender:s}=Os(),a=C(()=>n.value===Vn.FAILED),o=C(()=>{var h,_;return((_=(h=t.value)==null?void 0:h.email)==null?void 0:_.from)??[]}),l=C(()=>{const{toEmails:h,email:_}=t.value;return(_==null?void 0:_.to)??h??[]}),i=C(()=>{var h,_,g;return((h=t.value)==null?void 0:h.ccEmails)??((g=(_=t.value)==null?void 0:_.email)==null?void 0:g.cc)??[]}),r=C(()=>{const h=o.value[0]??"",_=s.value.email??"";return!h&&!_?null:h===_?s.value.name:null}),d=C(()=>{var h,_,g;return((h=t.value)==null?void 0:h.bccEmails)??((g=(_=t.value)==null?void 0:_.email)==null?void 0:g.bcc)??[]}),u=C(()=>{var h,_;return((_=(h=t.value)==null?void 0:h.email)==null?void 0:_.subject)??""}),m=C(()=>o.value[0]||l.value.length||i.value.length||d.value.length||u.value);return(h,_)=>pe((p(),f("section",{class:re(["space-y-1 rtl:pl-9 ltr:pr-9 text-sm break-words",a.value?"text-n-ruby-11":"text-n-slate-11"])},[m.value?(p(),f(fe,{key:0},[o.value[0]?(p(),f("div",{key:0,class:re(a.value?"text-n-ruby-11":"text-n-slate-12")},[r.value?(p(),f(fe,{key:0},[c("span",null,E(r.value),1),Ee(" <"+E(o.value[0])+"> ",1)],64)):(p(),f(fe,{key:1},[Ee(E(o.value[0]),1)],64))],2)):O("",!0),l.value.length?(p(),f("div",EOe,E(h.$t("EMAIL_HEADER.TO"))+": "+E(l.value.join(", ")),1)):O("",!0),i.value.length?(p(),f("div",TOe,E(h.$t("EMAIL_HEADER.CC"))+": "+E(i.value.join(", ")),1)):O("",!0),d.value.length?(p(),f("div",AOe,E(h.$t("EMAIL_HEADER.BCC"))+": "+E(d.value.join(", ")),1)):O("",!0),u.value?(p(),f("div",yOe,E(h.$t("EMAIL_HEADER.SUBJECT"))+": "+E(u.value),1)):O("",!0)],64)):O("",!0)],2)),[[pn,m.value]])}},IOe={key:1,class:"px-4 pb-4 space-y-2"},xE={__name:"Index",setup(e){const{content:t,contentAttributes:n,attachments:s,messageType:a}=Os(),o=F(!1),l=F(!1),i=F(!1),r=F(!1),d=Ks("contentContainer");pt(()=>{var w;o.value=((w=d.value)==null?void 0:w.scrollHeight)>400});const u=C(()=>a.value===ys.OUTGOING),m=C(()=>!u.value),{hasTranslations:h,translationContent:_}=LI(n),g=C(()=>{var D,H,B;const w=((B=(H=(D=n==null?void 0:n.value)==null?void 0:D.email)==null?void 0:H.textContent)==null?void 0:B.full)??t.value;return w==null?void 0:w.replace(/\n/g,"<br>")}),T=C(()=>{var w,D,H;return((H=(D=(w=n==null?void 0:n.value)==null?void 0:w.email)==null?void 0:D.htmlContent)==null?void 0:H.full)??g.value}),S=C(()=>h.value&&!r.value?_.value:t.value),b=C(()=>h.value&&!r.value?_.value:g.value),A=C(()=>h.value&&!r.value?_.value:T.value),y=C(()=>CE.extractQuotes(A.value)),x=C(()=>CE.hasQuotes(A.value)),$=C(()=>r.value?"original":h.value?"translated":"original"),N=()=>{r.value=!r.value};return(w,D)=>(p(),V(Oo,{class:re(["w-full",{"bg-n-slate-4":m.value,"bg-n-solid-blue":u.value}]),"data-bubble-name":"email"},{default:K(()=>[v(SOe,{class:re(["p-3",{"border-b border-n-strong":m.value,"border-b border-n-slate-8/20":u.value}])},null,8,["class"]),c("section",{ref_key:"contentContainer",ref:d,class:"p-3"},[c("div",{class:re({"max-h-[400px] overflow-hidden relative":!l.value&&o.value,"overflow-y-scroll relative":l.value})},[o.value&&!l.value?(p(),f("div",{key:0,class:re(["absolute left-0 right-0 bottom-0 h-40 px-8 flex items-end",{"bg-gradient-to-t from-n-slate-4 via-n-slate-4 via-20% to-transparent":m.value,"bg-gradient-to-t from-n-solid-blue via-n-solid-blue via-20% to-transparent":u.value}])},[c("button",{class:"text-n-slate-12 py-2 px-8 mx-auto text-center flex items-center gap-2",onClick:D[0]||(D[0]=H=>l.value=!0)},[v(Wt,{icon:"i-lucide-maximize-2"}),Ee(" "+E(w.$t("EMAIL_HEADER.EXPAND")),1)])],2)):O("",!0),u.value&&I(t)?(p(),V(wI,{key:1,class:"text-n-slate-12",content:S.value},null,8,["content"])):(p(),f(fe,{key:2},[i.value?(p(),V(I(yE),{key:`letter-quoted-${$.value}`,"class-name":"prose prose-bubble !max-w-none letter-render","allowed-css-properties":[...I(SE),"transform","transform-origin"],html:A.value,text:b.value},null,8,["allowed-css-properties","html","text"])):(p(),V(I(yE),{key:`letter-unquoted-${$.value}`,"class-name":"prose prose-bubble !max-w-none letter-render",html:y.value,"allowed-css-properties":[...I(SE),"transform","transform-origin"],text:b.value},null,8,["html","allowed-css-properties","text"]))],64)),x.value?(p(),f("button",{key:3,class:"text-n-slate-11 px-1 leading-none text-sm bg-n-alpha-black2 text-center flex items-center gap-1 mt-2",onClick:D[1]||(D[1]=H=>i.value=!i.value)},[i.value?(p(),f(fe,{key:0},[Ee(E(w.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)],64)):(p(),f(fe,{key:1},[Ee(E(w.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)],64)),v(Wt,{icon:i.value?"i-lucide-chevron-up":"i-lucide-chevron-down"},null,8,["icon"])])):O("",!0)],2)],512),I(h)?(p(),V(kI,{key:0,class:"py-2 px-3","showing-original":r.value,onToggle:N},null,8,["showing-original"])):O("",!0),Array.isArray(I(s))&&I(s).length?(p(),f("section",IOe,[v(MI,{attachments:I(s),class:"gap-1"},null,8,["attachments"])])):O("",!0)]),_:1},8,["class"]))}},COe={__name:"Unsupported",setup(e){return(t,n)=>(p(),V(Oo,{class:"px-4 py-3 text-sm","data-bubble-name":"unsupported"},{default:K(()=>[Ee(E(t.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)]),_:1}))}},xOe={__name:"Contact",setup(e){const{attachments:t}=Os(),n=yt(),{t:s}=Pe(),a=C(()=>t.value[0]),o=C(()=>a.value.fallbackTitle),l=C(()=>{const{meta:g}=a.value??{},{firstName:T,lastName:S}=g??{};return`${T??""} ${S??""}`.trim()}),i=C(()=>o.value.replace(/\s|-|[A-Za-z]/g,"")),r=C(()=>o.value.replace(/\D/g,""));function d(){return{name:l.value,phone_number:`+${r.value}`}}async function u(g){const S={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[g],attribute_model:"standard",custom_attribute_type:""}]};return(await n.dispatch("contacts/filter",{queryPayload:S,resetState:!1})).shift()}function m(g){const S=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${g}`;window.open(S,"_blank")}async function h(){try{let g=await u(r);g||(g=await n.dispatch("contacts/create",d()),_e(s("CONTACT_FORM.SUCCESS_MESSAGE"))),m(g.id)}catch(g){g instanceof ep?g.data.includes("phone_number")&&_e(s("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):g instanceof Zc?_e(g.data):_e(s("CONTACT_FORM.ERROR_MESSAGE"))}}const _=C(()=>({label:s("CONVERSATION.SAVE_CONTACT"),onClick:h}));return(g,T)=>(p(),V(Wp,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-[#D6409F]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.CONTACT",title:l.value,content:o.value,action:i.value?_.value:null},null,8,["title","content","action"]))}},NOe={key:0,class:"text-sm truncate text-n-slate-12"},OOe={key:1,class:"video-call--container"},wOe=["src"],ROe={key:2},$Oe={__name:"Dyte",setup(e){const{content:t,sender:n,id:s}=Os(),{t:a}=Pe(),o=F(!1),l=F(""),i=C(()=>$x(l.value)),r=async()=>{o.value=!0;try{const{data:{token:m}={}}=await tI.addParticipantToMeeting(s.value);l.value=m}catch{_e(a("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{o.value=!1}},d=()=>{l.value=""},u=C(()=>({label:a("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),onClick:r}));return(m,h)=>(p(),V(Wp,{icon:"i-ph-video-camera-fill","icon-bg-color":"bg-[#2781F6]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.MEETING",action:u.value},{default:K(()=>[I(n)?O("",!0):(p(),f("div",NOe,E(I(t)),1)),l.value?(p(),f("div",OOe,[c("iframe",{src:i.value,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,wOe),c("button",{class:"px-4 py-2 text-sm rounded-lg bg-n-solid-3 mt-3",onClick:d},E(m.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM")),1)])):(p(),f("div",ROe,E("")))]),_:1},8,["action"]))}},MOe={__name:"Location",setup(e){const{attachments:t}=Os(),{t:n}=Pe(),s=C(()=>t.value[0]),a=C(()=>s.value.coordinatesLat),o=C(()=>s.value.coordinatesLong),l=C(()=>s.value.fallbackTitle??s.value.fallback_title),i=C(()=>`https://maps.google.com/?q=${a.value},${o.value}`);return(r,d)=>(p(),V(Wp,{icon:"i-ph-navigation-arrow-fill","icon-bg-color":"bg-[#0D9B8A]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.LOCATION",content:l.value,action:{label:I(n)("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP"),href:i.value}},null,8,["content","action"]))}},kOe={key:0,class:"mt-4"},LOe={class:"text-n-slate-11 italic"},DOe={key:0},POe={key:1,class:"flex mt-1"},BOe={key:2,class:"text-n-slate-11 italic mt-2"},FOe={__name:"CSAT",setup(e){const{contentAttributes:t,content:n}=Os(),{t:s}=Pe(),a=C(()=>{var u,m;return((m=(u=t.value)==null?void 0:u.submittedValues)==null?void 0:m.csatSurveyResponse)??{}}),o=C(()=>!!a.value.rating),l=C(()=>{var u;return((u=t.value)==null?void 0:u.displayType)||Hl.EMOJI}),i=C(()=>l.value===Hl.STAR),r=C(()=>o.value?Ei.find(u=>u.value===a.value.rating):null),d=C(()=>a.value.rating||0);return(u,m)=>(p(),V(Oo,{class:"px-4 py-3","data-bubble-name":"csat"},{default:K(()=>[c("h4",null,E(I(n)||I(s)("CONVERSATION.CSAT_REPLY_MESSAGE")),1),o.value?(p(),f("dl",kOe,[c("dt",LOe,E(I(s)("CONVERSATION.RATING_TITLE")),1),i.value?(p(),f("dd",POe,[(p(),f(fe,null,Ae(5,h=>c("span",{key:h,class:"text-2xl mr-1"},[c("i",{class:re([h<=d.value?"i-ri-star-fill text-n-amber-9":"i-ri-star-line text-n-slate-10"])},null,2)])),64))])):(p(),f("dd",DOe,E(I(s)(r.value.translationKey)),1)),a.value.feedbackMessage?(p(),f("dt",BOe,E(I(s)("CONVERSATION.FEEDBACK_TITLE")),1)):O("",!0),c("dd",null,E(a.value.feedbackMessage),1)])):O("",!0)]),_:1}))}},UOe=["title"],GOe={key:0,class:"mt-4"},VOe={class:"text-n-slate-11 italic mt-2"},HOe={key:1,class:"my-2 font-medium"},WOe={__name:"Form",setup(e){const{content:t,contentAttributes:n,contentType:s}=Os(),{t:a}=Pe(),{isAWebWidgetInbox:o}=P_(),l=C(()=>{var i;if(s.value===Do.FORM){const{items:r,submittedValues:d=[]}=n.value;return d.length?d.map(u=>{const m=r.find(h=>h.name===u.name);return{title:u.value,value:u.value,label:m==null?void 0:m.label}}):[]}if(s.value===Do.INPUT_SELECT){const[r]=((i=n.value)==null?void 0:i.submittedValues)??[];return r?[{title:r.title,value:r.value,label:""}]:[]}return[]});return(i,r)=>{const d=_t("dompurify-html");return p(),V(Oo,{class:"px-4 py-3","data-bubble-name":"csat"},{default:K(()=>[pe(c("span",{title:I(t)},null,8,UOe),[[d,I(t)]]),l.value.length?(p(),f("dl",GOe,[(p(!0),f(fe,null,Ae(l.value,u=>(p(),f(fe,{key:u.title},[c("dt",VOe,E(u.label||I(a)("CONVERSATION.RESPONSE")),1),c("dd",null,E(u.title),1)],64))),128))])):I(o)?(p(),f("div",HOe,E(I(a)("CONVERSATION.NO_RESPONSE")),1)):O("",!0)]),_:1})}}},KOe={class:"text-xs text-n-ruby-11 flex items-center gap-1.5"},zOe={class:"relative group"},jOe={class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer"},YOe={__name:"MessageError",props:{error:{type:String,required:!0}},setup(e){const{orientation:t}=Os(),{t:n}=Pe();return(s,a)=>(p(),f("div",KOe,[c("span",null,E(I(n)("CHAT_LIST.FAILED_TO_SEND")),1),c("div",zOe,[c("div",jOe,[v(Wt,{icon:"i-lucide-alert-triangle",class:"text-n-ruby-11 size-[14px]"})]),c("div",{class:re(["absolute bg-n-alpha-3 px-4 py-3 border rounded-xl border-n-strong text-n-slate-12 bottom-6 w-52 text-xs backdrop-blur-[100px] shadow-[0px_0px_24px_0px_rgba(0,0,0,0.12)] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all break-all",{"ltr:left-0 rtl:right-0":I(t)===I($s).LEFT,"ltr:right-0 rtl:left-0":I(t)===I($s).RIGHT}])},E(e.error),3)])]))}},XOe={components:{AddCannedModal:dy,MenuItem:k_,ContextMenu:Bp,NextButton:ce},props:{message:{type:Object,required:!0},isOpen:{type:Boolean,default:!1},enabledOptions:{type:Object,default:()=>({})},contextMenuPosition:{type:Object,default:()=>({})},hideButton:{type:Boolean,default:!1}},emits:["open","close","replyTo"],setup(){const{getPlainText:e}=$a();return{getPlainText:e}},data(){return{isCannedResponseModalOpen:!1,showDeleteModal:!1}},computed:{...St({getAccount:"accounts/getAccount",currentAccountId:"getCurrentAccountId"}),plainTextContent(){return this.getPlainText(this.messageContent)},conversationId(){return this.message.conversation_id??this.message.conversationId},messageId(){return this.message.id},messageContent(){return this.message.content},contentAttributes(){return Hs(this.message.content_attributes??this.message.contentAttributes)}},methods:{async copyLinkToMessage(){const e=window.chatwootConfig.hostURL+Bt(hg({id:this.conversationId,accountId:this.currentAccountId}));await qo(`${e}?messageId=${this.messageId}`),_e(this.$t("CONVERSATION.CONTEXT_MENU.LINK_COPIED")),this.handleClose()},async handleCopy(){await qo(this.plainTextContent),_e(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL")),this.handleClose()},showCannedResponseModal(){nn(Tu.ADDED_TO_CANNED_RESPONSE),this.isCannedResponseModalOpen=!0},hideCannedResponseModal(){this.isCannedResponseModalOpen=!1,this.handleClose()},handleOpen(e){this.$emit("open",e)},handleClose(e){this.$emit("close",e)},handleTranslate(){const{locale:e}=this.getAccount(this.currentAccountId);this.$store.dispatch("translateMessage",{conversationId:this.conversationId,messageId:this.messageId,targetLanguage:e||"en"}),nn(_a.TRANSLATE_A_MESSAGE),this.handleClose()},handleReplyTo(){this.$emit("replyTo",this.message),this.handleClose()},openDeleteModal(){this.handleClose(),this.showDeleteModal=!0},async confirmDeletion(){try{await this.$store.dispatch("deleteMessage",{conversationId:this.conversationId,messageId:this.messageId}),_e(this.$t("CONVERSATION.SUCCESS_DELETE_MESSAGE")),this.handleClose()}catch{_e(this.$t("CONVERSATION.FAIL_DELETE_MESSSAGE"))}},closeDeleteModal(){this.showDeleteModal=!1}}},qOe={class:"context-menu"},ZOe={class:"menu-container"},QOe={key:5};function JOe(e,t,n,s,a,o){const l=z("AddCannedModal"),i=z("woot-modal"),r=z("woot-delete-modal"),d=z("NextButton"),u=z("MenuItem"),m=z("ContextMenu");return p(),f("div",qOe,[a.isCannedResponseModalOpen&&n.enabledOptions.cannedResponse?(p(),V(i,{key:0,show:a.isCannedResponseModalOpen,"onUpdate:show":t[0]||(t[0]=h=>a.isCannedResponseModalOpen=h),"on-close":o.hideCannedResponseModal},{default:K(()=>[v(l,{"response-content":o.plainTextContent,"on-close":o.hideCannedResponseModal},null,8,["response-content","on-close"])]),_:1},8,["show","on-close"])):O("",!0),a.showDeleteModal&&n.enabledOptions.delete?(p(),V(r,{key:1,show:a.showDeleteModal,"onUpdate:show":t[1]||(t[1]=h=>a.showDeleteModal=h),class:"context-menu--delete-modal","on-close":o.closeDeleteModal,"on-confirm":o.confirmDeletion,title:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.TITLE"),message:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.MESSAGE"),"confirm-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.DELETE"),"reject-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.CANCEL")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])):O("",!0),n.hideButton?O("",!0):(p(),V(d,{key:2,ghost:"",slate:"",sm:"",icon:"i-lucide-ellipsis-vertical",class:"invisible group-hover/context-menu:visible",onClick:o.handleOpen},null,8,["onClick"])),n.isOpen&&!a.isCannedResponseModalOpen?(p(),V(m,{key:3,x:n.contextMenuPosition.x,y:n.contextMenuPosition.y,onClose:o.handleClose},{default:K(()=>[c("div",ZOe,[n.enabledOptions.replyTo?(p(),V(u,{key:0,option:{icon:"arrow-reply",label:e.$t("CONVERSATION.CONTEXT_MENU.REPLY_TO")},variant:"icon",onClick:ze(o.handleReplyTo,["stop"])},null,8,["option","onClick"])):O("",!0),n.enabledOptions.copy?(p(),V(u,{key:1,option:{icon:"clipboard",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY")},variant:"icon",onClick:ze(o.handleCopy,["stop"])},null,8,["option","onClick"])):O("",!0),n.enabledOptions.translate?(p(),V(u,{key:2,option:{icon:"translate",label:e.$t("CONVERSATION.CONTEXT_MENU.TRANSLATE")},variant:"icon",onClick:ze(o.handleTranslate,["stop"])},null,8,["option","onClick"])):O("",!0),t[2]||(t[2]=c("hr",null,null,-1)),n.enabledOptions.copyLink?(p(),V(u,{key:3,option:{icon:"link",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY_PERMALINK")},variant:"icon",onClick:ze(o.copyLinkToMessage,["stop"])},null,8,["option","onClick"])):O("",!0),n.enabledOptions.cannedResponse?(p(),V(u,{key:4,option:{icon:"comment-add",label:e.$t("CONVERSATION.CONTEXT_MENU.CREATE_A_CANNED_RESPONSE")},variant:"icon",onClick:ze(o.showCannedResponseModal,["stop"])},null,8,["option","onClick"])):O("",!0),n.enabledOptions.delete?(p(),f("hr",QOe)):O("",!0),n.enabledOptions.delete?(p(),V(u,{key:6,option:{icon:"delete",label:e.$t("CONVERSATION.CONTEXT_MENU.DELETE")},variant:"icon",onClick:ze(o.openDeleteModal,["stop"])},null,8,["option","onClick"])):O("",!0)])]),_:1},8,["x","y","onClose"])):O("",!0)])}const ewe=Fe(XOe,[["render",JOe],["__scopeId","data-v-c14c8c4d"]]),twe=["id","data-message-id"],nwe={key:0},swe={key:0,class:"[grid-area:avatar] flex items-end"},awe={key:2,class:"context-menu-wrap"},owe={__name:"Message",props:{id:{type:Number,required:!0},messageType:{type:Number,required:!0,validator:e=>Object.values(ys).includes(e)},status:{type:String,required:!0,validator:e=>Object.values(Vn).includes(e)},attachments:{type:Array,default:()=>[]},content:{type:String,default:null},contentAttributes:{type:Object,default:()=>({})},contentType:{type:String,default:"text",validator:e=>Object.values(Do).includes(e)},conversationId:{type:Number,required:!0},createdAt:{type:Number,required:!0},currentUserId:{type:Number,required:!0},groupWithNext:{type:Boolean,default:!1},inboxId:{type:Number,default:null},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:null},isEmailInbox:{type:Boolean,default:!1},private:{type:Boolean,default:!1},sender:{type:Object,default:null},senderId:{type:Number,default:null},senderType:{type:String,default:null},sourceId:{type:String,default:""}},setup(e){const t=e,n=F({}),s=F(!1),a=F(!1),{t:o}=Pe(),l=cn(),i=C(()=>{var L;return t.private?Kn.PRIVATE:t.isEmailInbox&&[ys.INCOMING,ys.OUTGOING].includes(t.messageType)||t.contentType===Do.INCOMING_EMAIL?Kn.EMAIL:t.status===Vn.FAILED?Kn.ERROR:(L=t.contentAttributes)!=null&&L.isUnsupported?Kn.UNSUPPORTED:(!t.sender||t.sender.type===qi.AGENT_BOT)&&t.messageType===ys.OUTGOING?Kn.BOT:{[ys.INCOMING]:Kn.USER,[ys.ACTIVITY]:Kn.ACTIVITY,[ys.OUTGOING]:Kn.AGENT,[ys.TEMPLATE]:Kn.TEMPLATE}[t.messageType]||Kn.USER}),r=C(()=>{var L,M;if(t.messageType===ys.ACTIVITY)return!1;if(t.status===Vn.PROGRESS&&t.messageType===ys.OUTGOING)return!0;const U=t.senderId??((L=t.sender)==null?void 0:L.id),G=((M=t.sender)==null?void 0:M.type)??t.senderType;return!G||!U||[qi.AGENT_BOT,qi.CAPTAIN_ASSISTANT].includes(G)?!0:G.toLowerCase()===qi.USER.toLowerCase()}),d=C(()=>r.value?$s.RIGHT:t.messageType===ys.ACTIVITY?$s.CENTER:$s.LEFT),u=C(()=>({[$s.LEFT]:"justify-start",[$s.RIGHT]:"justify-end",[$s.CENTER]:"justify-center"})[d.value]),m=C(()=>({[$s.LEFT]:"grid grid-cols-1fr",[$s.RIGHT]:"grid grid-cols-[1fr_24px]"})[d.value]),h=C(()=>({[$s.LEFT]:`
      "bubble"
      "meta"
    `,[$s.RIGHT]:`
      "bubble avatar"
      "meta spacer"
    `})[d.value]),_=C(()=>t.status===Vn.FAILED?!1:t.groupWithNext),g=C(()=>!(t.messageType===ys.ACTIVITY||d.value===$s.LEFT)),T=C(()=>{var U;if(t.isEmailInbox&&!t.private&&[ys.INCOMING,ys.OUTGOING].includes(t.messageType))return xE;if(t.contentType===Do.INPUT_CSAT)return FOe;if([Do.INPUT_SELECT,Do.FORM].includes(t.contentType))return WOe;if(t.contentType===Do.INCOMING_EMAIL)return xE;if((U=t.contentAttributes)!=null&&U.isUnsupported)return COe;if(t.contentAttributes.type==="dyte")return $Oe;if(t.contentAttributes.imageType==="story_mention")return rOe;if(Array.isArray(t.attachments)&&t.attachments.length===1){const G=t.attachments[0].fileType;if(!t.content){if(G===Is.IMAGE)return HNe;if(G===Is.FILE)return QNe;if(G===Is.AUDIO)return JNe;if(G===Is.VIDEO||G===Is.IG_REEL)return bE;if(G===Is.LOCATION)return MOe}if(G===Is.CONTACT)return xOe}return LNe}),S=C(()=>{var U;return!((U=t.contentAttributes)!=null&&U.isUnsupported)}),b=C(()=>t.messageType!==ys.ACTIVITY),A=C(()=>{var U;return(U=t.contentAttributes)==null?void 0:U.deleted}),y=C(()=>({id:t.id,content_attributes:t.contentAttributes,content:t.content,conversation_id:t.conversationId})),x=C(()=>{const U=!!t.content,G=!!(t.attachments&&t.attachments.length>0),L=t.messageType===ys.OUTGOING,M=t.status===Vn.FAILED||t.status===Vn.PROGRESS;return{copy:U,delete:(U||G)&&!M&&!A.value,cannedResponse:L&&U&&!A.value,copyLink:!M,translate:!M&&!A.value&&U,replyTo:!t.private&&t.inboxSupportsReplyTo.outgoing&&!M}}),$=C(()=>{var R;const U=!!(t.attachments&&t.attachments.length>0),G=t.contentType===Do.INCOMING_EMAIL,L=(R=t.contentAttributes)==null?void 0:R.isUnsupported,M=t.contentType===Do.INTEGRATIONS;return U||t.content||G||L||M});function N(U){var L,M;(L=U.target)!=null&&L.classList.contains("skip-context-menu")||["a","img"].includes((M=U.target)==null?void 0:M.tagName.toLowerCase())||getSelection().toString()||(U.preventDefault(),U.type==="contextmenu"&&nn(Tu.OPEN_MESSAGE_CONTEXT_MENU),n.value={x:U.pageX||U.clientX,y:U.pageY||U.clientY},a.value=!0)}function w(){a.value=!1,n.value={x:null,y:null}}function D(){const U=vo.MESSAGE_REPLY_TO,{conversationId:G,id:L}=t;Qa.updateJsonStore(U,G,L),It.emit(xn.TOGGLE_REPLY_TO_MESSAGE,t)}const H=C(()=>{if(!t.sender)return{name:o("CONVERSATION.BOT"),src:""};const{sender:U}=t,{name:G,type:L,avatarUrl:M,thumbnail:R}=U||{};return[qi.AGENT_BOT,qi.CAPTAIN_ASSISTANT].includes(L)?{name:G??"",src:M??""}:{name:G??"",src:R??""}}),B=C(()=>H.value.name===""?"":`${o("CONVERSATION.SENT_BY")} ${H.value.name}`);return pt(()=>{if(Number(l.query.messageId)!==Number(t.id))return;s.value=!0,S$(()=>{s.value=!1},1e3)}),Vxe({...VC(t),isPrivate:C(()=>t.private),variant:i,orientation:d,isBotOrAgentMessage:r,shouldGroupWithNext:_}),(U,G)=>{const L=_t("tooltip");return $.value?(p(),f("div",{key:0,id:`message${t.id}`,class:re(["flex w-full message-bubble-container mb-2",[u.value,{"group-with-next":_.value,"bg-n-alpha-1":s.value}]]),"data-message-id":t.id},[i.value===I(Kn).ACTIVITY?(p(),f("div",nwe,[v(PNe,{content:e.content},null,8,["content"])])):(p(),f("div",{key:1,class:re([[m.value,{"gap-y-2":e.contentAttributes.externalError,"w-full":i.value===I(Kn).EMAIL}],"gap-x-2"]),style:Ct({gridTemplateAreas:h.value})},[!_.value&&g.value?pe((p(),f("div",swe,[v(Ft,Bs(H.value,{size:24}),null,16)])),[[L,B.value,void 0,{"left-end":!0}]]):O("",!0),c("div",{class:re(["[grid-area:bubble] flex",{"ltr:ml-8 rtl:mr-8 justify-end":d.value===I($s).RIGHT,"ltr:mr-8 rtl:ml-8":d.value===I($s).LEFT,"min-w-0":i.value===I(Kn).EMAIL}]),onContextmenu:G[0]||(G[0]=M=>N(M))},[(p(),V(xs(T.value)))],34),e.contentAttributes.externalError?(p(),V(YOe,{key:1,class:re(["[grid-area:meta]",u.value]),error:e.contentAttributes.externalError},null,8,["class","error"])):O("",!0)],6)),S.value?(p(),f("div",awe,[b.value?(p(),V(ewe,{key:0,"context-menu-position":n.value,"is-open":a.value,"enabled-options":x.value,message:y.value,"hide-button":"",onOpen:N,onClose:w,onReplyTo:D},null,8,["context-menu-position","is-open","enabled-options","message"])):O("",!0)])):O("",!0)],10,twe)):O("",!0)}}},lwe={class:"px-4 bg-n-background"},iwe={__name:"MessageList",props:{currentUserId:{type:Number,required:!0},firstUnreadId:{type:Number,default:null},isAnEmailChannel:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({incoming:!1,outgoing:!1})},messages:{type:Array,default:()=>[]}},setup(e){const t=e,n=C(()=>zo(t.messages,{deep:!0})),s=(o,l)=>{var T,S;if(o===l.length-1)return!1;const i=l[o],r=l[o+1];if(r.status==="failed")return!1;const d=r.senderId??((T=r.sender)==null?void 0:T.id),u=i.senderId??((S=i.sender)==null?void 0:S.id),m=d===u,h=r.messageType,_=i.messageType,g=h===ys.TEMPLATE&&_===ys.TEMPLATE;return!m||g||_!==h?!1:Math.floor(r.createdAt/60)===Math.floor(i.createdAt/60)},a=o=>{var r,d,u;if(!o)return null;const l=((r=o.contentAttributes)==null?void 0:r.inReplyTo)??((d=o.content_attributes)==null?void 0:d.in_reply_to);if(!l)return null;const i=(u=t.messages)==null?void 0:u.find(m=>m.id===l);return i?zo(i):null};return(o,l)=>(p(),f("ul",lwe,[at(o.$slots,"beforeAll"),(p(!0),f(fe,null,Ae(n.value,(i,r)=>(p(),f(fe,{key:i.id},[e.firstUnreadId&&i.id===e.firstUnreadId?at(o.$slots,"unreadBadge",{key:0}):O("",!0),v(owe,Bs({ref_for:!0},i,{"is-email-inbox":e.isAnEmailChannel,"in-reply-to":a(i),"group-with-next":s(r,n.value),"inbox-supports-reply-to":e.inboxSupportsReplyTo,"current-user-id":e.currentUserId,"data-clarity-mask":"True"}),null,16,["is-email-inbox","in-reply-to","group-with-next","inbox-supports-reply-to","current-user-id"])],64))),128)),at(o.$slots,"after")]))}},rwe={name:"LabelSuggestion",components:{Avatar:Ft,NextButton:ce},props:{suggestedLabels:{type:Array,required:!0},chatLabels:{type:Array,required:!1,default:()=>[]}},setup(){const{isAIIntegrationEnabled:e}=ud();return{isAIIntegrationEnabled:e}},data(){return{isDismissed:!1,isHovered:!1,selectedLabels:[]}},computed:{...St({allLabels:"labels/getLabels",currentAccountId:"getCurrentAccountId",currentChat:"getSelectedChat"}),conversationId(){var e;return(e=this.currentChat)==null?void 0:e.id},labelTooltip(){return this.preparedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.MULTIPLE_SUGGESTION"):this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.SINGLE_SUGGESTION")},addButtonText(){return this.selectedLabels.length===1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABEL"):this.selectedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABELS"):this.$t("LABEL_MGMT.SUGGESTIONS.ADD_ALL_LABELS")},preparedLabels(){return this.allLabels.filter(e=>this.suggestedLabels.includes(e.title))},shouldShowSuggestions(){return this.isDismissed||!this.isAIIntegrationEnabled?!1:this.preparedLabels.length&&this.chatLabels.length===0}},watch:{conversationId:{immediate:!0,handler(){this.selectedLabels=[],this.isDismissed=this.isConversationDismissed()}}},methods:{pushOrAddLabel(e){if(this.preparedLabels.length===1){this.addAllLabels();return}this.selectedLabels.includes(e)?this.selectedLabels=this.selectedLabels.filter(t=>t!==e):this.selectedLabels.push(e)},dismissSuggestions(){Qa.setFlag(vo.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId),this.isDismissed=!0,this.trackLabelEvent(Eu.DISMISS_LABEL_SUGGESTION)},isConversationDismissed(){return Qa.getFlag(vo.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId)},addAllLabels(){let e=this.selectedLabels;e.length||(e=this.preparedLabels.map(t=>t.title)),this.$store.dispatch("conversationLabels/update",{conversationId:this.conversationId,labels:e}),this.trackLabelEvent(Eu.APPLY_LABEL_SUGGESTION)},trackLabelEvent(e){const t={conversationId:this.conversationId,account:this.currentAccountId,suggestions:this.suggestedLabels,labelsApplied:this.selectedLabels.length?this.selectedLabels:this.suggestedLabels};nn(e,t)}}},cwe={class:"wrap"},dwe={class:"label-suggestion--container"},uwe={class:"label-suggestion--title"},pwe={class:"label-suggestion--options"},mwe=["onClick"],hwe={key:0,class:"inline-flex items-center gap-1"},fwe={class:"sender--info has-tooltip","data-original-title":"null"};function gwe(e,t,n,s,a,o){const l=z("woot-label"),i=z("NextButton"),r=z("Avatar"),d=_t("tooltip");return o.shouldShowSuggestions?(p(),f("li",{key:0,class:"label-suggestion right list-none",onMouseover:t[0]||(t[0]=u=>a.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>a.isHovered=!1)},[c("div",cwe,[c("div",dwe,[c("h6",uwe,E(e.$t("LABEL_MGMT.SUGGESTIONS.SUGGESTED_LABELS")),1),c("div",pwe,[(p(!0),f(fe,null,Ae(o.preparedLabels,u=>pe((p(),f("button",{key:u.title,class:"label-suggestion--option !px-0",onClick:m=>o.pushOrAddLabel(u.title)},[v(l,Bs({variant:"dashed",ref_for:!0},u,{"bg-color":a.selectedLabels.includes(u.title)?"#2781F6":""}),null,16,["bg-color"])],8,mwe)),[[d,{content:a.selectedLabels.includes(u.title)?e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT"):o.labelTooltip,delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])),128)),o.preparedLabels.length===1?pe((p(),V(i,{key:0,faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:a.isHovered?"ruby":"blue",onClick:o.dismissSuggestions},null,8,["color","onClick"])),[[d,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]]):O("",!0)]),o.preparedLabels.length>1?(p(),f("div",hwe,[v(i,{xs:"",icon:"i-lucide-plus",class:"flex-shrink-0",variant:a.selectedLabels.length===0?"faded":"solid",label:o.addButtonText,onClick:o.addAllLabels},null,8,["variant","label","onClick"]),pe(v(i,{faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:a.isHovered?"ruby":"blue",onClick:o.dismissSuggestions},null,8,["color","onClick"]),[[d,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])):O("",!0)]),c("div",fwe,[pe(v(r,{size:16,name:"chatwoot-ai","icon-name":"i-lucide-sparkles"},null,512),[[d,{content:e.$t("LABEL_MGMT.SUGGESTIONS.POWERED_BY"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])])],32)):O("",!0)}const _we=Fe(rwe,[["render",gwe],["__scopeId","data-v-d77d666e"]]),vwe=(e,t)=>e+t.scrollHeight,bwe=(e,t,n)=>{let s=[...n].reduce(vwe,0);return e-s-t/2},ef={FACEBOOK:"https://developers.facebook.com/docs/messenger-platform/policy/policy-overview/",TWILIO_WHATSAPP:"https://www.twilio.com/docs/whatsapp/tutorial/send-whatsapp-notification-messages-templates#sending-non-template-messages-within-a-24-hour-session",WHATSAPP_CLOUD:"https://business.whatsapp.com/policy#:~:text=You%20may%20reply%20to%20a,messages%20via%20approved%20Message%20Templates."},Ewe={components:{MessageList:iwe,ReplyBox:Gxe,Banner:td,ConversationLabelSuggestion:_we,Spinner:qn},mixins:[Mr],setup(){const e=F(!1),t=F(null),{isEnterprise:n}=Js();Qs({Escape:{action:()=>{e.value=!1}}});const{isAIIntegrationEnabled:a,isLabelSuggestionFeatureEnabled:o,fetchIntegrationsIfRequired:l,fetchLabelSuggestions:i}=ud();return cs("contextMenuElementTarget",t),{isEnterprise:n,isPopOutReplyBox:e,isAIIntegrationEnabled:a,isLabelSuggestionFeatureEnabled:o,fetchIntegrationsIfRequired:l,fetchLabelSuggestions:i,conversationPanelRef:t}},data(){return{isLoadingPrevious:!0,heightBeforeLoad:null,conversationPanel:null,hasUserScrolled:!1,isProgrammaticScroll:!1,messageSentSinceOpened:!1,labelSuggestions:[]}},computed:{...St({currentChat:"getSelectedChat",currentUserId:"getCurrentUserID",listLoadingStatus:"getAllMessagesLoaded",currentAccountId:"getCurrentAccountId"}),isOpen(){var e;return((e=this.currentChat)==null?void 0:e.status)===Pt.STATUS_TYPE.OPEN},shouldShowLabelSuggestions(){return this.isOpen&&this.isEnterprise&&this.isAIIntegrationEnabled&&!this.messageSentSinceOpened},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},typingUsersList(){return this.$store.getters["conversationTypingStatus/getUserList"](this.currentChat.id)},isAnyoneTyping(){return this.typingUsersList.length!==0},typingUserNames(){const e=this.typingUsersList;if(this.isAnyoneTyping){const[t,n]=GN(e);return this.$t(t,n)}return""},getMessages(){const e=this.currentChat.messages||[];return this.isAWhatsAppChannel?U1e(e):e},readMessages(){return V1e(this.getMessages,this.currentChat.agent_last_seen_at)},unReadMessages(){return H1e(this.getMessages,this.currentChat.agent_last_seen_at)},shouldShowSpinner(){return this.currentChat&&this.currentChat.dataFetched===void 0||!this.listLoadingStatus&&this.isLoadingPrevious},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,{additional_attributes:t={}}=this.inbox,n=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===Ut.FB&&t.type==="instagram_direct_message"&&n},replyWindowBannerMessage(){if(this.isAWhatsAppChannel)return this.$t("CONVERSATION.TWILIO_WHATSAPP_CAN_REPLY");if(this.isAPIInbox){const{additional_attributes:e={}}=this.inbox;if(e){const{agent_reply_time_window_message:t,agent_reply_time_window:n}=e;return t||this.$t("CONVERSATION.API_HOURS_WINDOW",{hours:n})}return""}return this.$t("CONVERSATION.CANNOT_REPLY")},replyWindowLink(){return this.isAFacebookInbox||this.isAnInstagramChannel?ef.FACEBOOK:this.isAWhatsAppCloudChannel?ef.WHATSAPP_CLOUD:this.isAPIInbox?"":ef.TWILIO_WHATSAPP},replyWindowLinkText(){return this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAnInstagramChannel?this.$t("CONVERSATION.24_HOURS_WINDOW"):this.isAPIInbox?"":this.$t("CONVERSATION.TWILIO_WHATSAPP_24_HOURS_WINDOW")},unreadMessageCount(){return this.currentChat.unread_count||0},unreadMessageLabel(){const e=this.unreadMessageCount>9?"9+":this.unreadMessageCount,t=this.unreadMessageCount>1?"CONVERSATION.UNREAD_MESSAGES":"CONVERSATION.UNREAD_MESSAGE";return`${e} ${this.$t(t)}`},inboxSupportsReplyTo(){const e=this.inboxHasFeature(Vc.REPLY_TO),t=this.inboxHasFeature(Vc.REPLY_TO_OUTGOING)&&!this.is360DialogWhatsAppChannel;return{incoming:e,outgoing:t}}},watch:{currentChat(e,t){e.id!==t.id&&(this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions(),this.messageSentSinceOpened=!1)}},created(){It.on(xn.SCROLL_TO_MESSAGE,this.onScrollToMessage),It.on(xn.FETCH_LABEL_SUGGESTIONS,this.fetchSuggestions),It.on(xn.MESSAGE_SENT,()=>{this.messageSentSinceOpened=!0})},mounted(){this.addScrollListener(),this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions()},unmounted(){this.removeBusListeners(),this.removeScrollListener()},methods:{async fetchSuggestions(){this.labelSuggestions=[],!this.isLabelSuggestionDismissed()&&this.isEnterprise&&(await this.fetchIntegrationsIfRequired(),this.isLabelSuggestionFeatureEnabled&&(this.labelSuggestions=await this.fetchLabelSuggestions({conversationId:this.currentChat.id}),this.$nextTick(()=>{const{messageId:e}=this.$route.query;!e&&!this.hasUserScrolled&&this.scrollToBottom()})))},isLabelSuggestionDismissed(){return Qa.getFlag(vo.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.currentChat.id)},fetchAllAttachmentsFromCurrentChat(){this.$store.dispatch("fetchAllAttachments",this.currentChat.id)},removeBusListeners(){It.off(xn.SCROLL_TO_MESSAGE,this.onScrollToMessage)},onScrollToMessage({messageId:e=""}={}){this.$nextTick(()=>{const t=document.getElementById("message"+e);t?(this.isProgrammaticScroll=!0,t.scrollIntoView({behavior:"smooth"}),this.fetchPreviousMessages()):this.scrollToBottom()}),this.makeMessagesRead()},addScrollListener(){this.conversationPanel=this.$el.querySelector(".conversation-panel"),this.setScrollParams(),this.conversationPanel.addEventListener("scroll",this.handleScroll),this.$nextTick(()=>this.scrollToBottom()),this.isLoadingPrevious=!1},removeScrollListener(){this.conversationPanel.removeEventListener("scroll",this.handleScroll)},scrollToBottom(){this.isProgrammaticScroll=!0;let e=[],t=this.conversationPanel.querySelector(".label-suggestion");this.unreadMessageCount>0?e=this.conversationPanel.querySelectorAll(".message--unread"):t?e=[t]:e=Array.from(this.conversationPanel.querySelectorAll(".message--read")).slice(-1),this.conversationPanel.scrollTop=bwe(this.conversationPanel.scrollHeight,this.$el.scrollHeight,e)},setScrollParams(){this.heightBeforeLoad=this.conversationPanel.scrollHeight,this.scrollTopBeforeLoad=this.conversationPanel.scrollTop},async fetchPreviousMessages(e=0){this.setScrollParams();const t=this.currentChat.dataFetched===!0&&!this.listLoadingStatus&&!this.isLoadingPrevious;if(e<100&&!this.isLoadingPrevious&&t){this.isLoadingPrevious=!0;try{await this.$store.dispatch("fetchPreviousMessages",{conversationId:this.currentChat.id,before:this.currentChat.messages[0].id});const n=this.conversationPanel.scrollHeight-this.heightBeforeLoad;this.conversationPanel.scrollTop=this.scrollTopBeforeLoad+n,this.setScrollParams()}catch{}finally{this.isLoadingPrevious=!1}}},handleScroll(e){this.isProgrammaticScroll?(this.isProgrammaticScroll=!1,this.hasUserScrolled=!1):this.hasUserScrolled=!0,It.emit(xn.ON_MESSAGE_LIST_SCROLL),this.fetchPreviousMessages(e.target.scrollTop)},makeMessagesRead(){this.$store.dispatch("markMessagesRead",{id:this.currentChat.id})}}},Twe={class:"flex flex-col justify-between flex-grow h-full min-w-0 m-0"},Awe={class:"min-h-[4rem] flex flex-shrink-0 flex-grow-0 items-center flex-auto justify-center max-w-full mt-0 mr-0 mb-1 ml-0 relative first:mt-auto last:mb-0"},ywe={class:"list-none flex justify-center items-center"},Swe={class:"shadow-lg rounded-full bg-n-brand text-white text-xs font-medium my-2.5 mx-auto px-2.5 py-1.5"},Iwe={key:0,class:"absolute flex items-center w-full h-0 -top-7"},Cwe={class:"flex py-2 pr-4 pl-5 shadow-md rounded-full bg-white dark:bg-n-solid-3 text-n-slate-11 text-xs font-semibold my-2.5 mx-auto"};function xwe(e,t,n,s,a,o){var m;const l=z("Banner"),i=z("Spinner"),r=z("ConversationLabelSuggestion"),d=z("MessageList"),u=z("ReplyBox");return p(),f("div",Twe,[e.currentChat.can_reply?o.hasDuplicateInstagramInbox?(p(),V(l,{key:1,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":e.$t("CONVERSATION.OLD_INSTAGRAM_INBOX_REPLY_BANNER")},null,8,["banner-message"])):O("",!0):(p(),V(l,{key:0,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":o.replyWindowBannerMessage,"href-link":o.replyWindowLink,"href-link-text":o.replyWindowLinkText},null,8,["banner-message","href-link","href-link-text"])),v(d,{ref:"conversationPanelRef",class:"conversation-panel flex-shrink flex-grow basis-px flex flex-col overflow-y-auto relative h-full m-0 pb-4","current-user-id":e.currentUserId,"first-unread-id":(m=o.unReadMessages[0])==null?void 0:m.id,"is-an-email-channel":e.isAnEmailChannel,"inbox-supports-reply-to":o.inboxSupportsReplyTo,messages:o.getMessages},{beforeAll:K(()=>[v(Ps,{name:"slide-up"},{default:K(()=>[c("li",Awe,[o.shouldShowSpinner?(p(),V(i,{key:0,class:"text-n-brand"})):O("",!0)])]),_:1})]),unreadBadge:K(()=>[pe(c("li",ywe,[c("span",Swe,E(o.unreadMessageLabel),1)],512),[[pn,o.unreadMessageCount!=0]])]),after:K(()=>[o.shouldShowLabelSuggestions?(p(),V(r,{key:0,"suggested-labels":a.labelSuggestions,"chat-labels":e.currentChat.labels,"conversation-id":e.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):O("",!0)]),_:1},8,["current-user-id","first-unread-id","is-an-email-channel","inbox-supports-reply-to","messages"]),c("div",{class:re(["flex relative flex-col",{"modal-mask":s.isPopOutReplyBox,"bg-n-background":!s.isPopOutReplyBox}])},[o.isAnyoneTyping?(p(),f("div",Iwe,[c("div",Cwe,[Ee(E(o.typingUserNames)+" ",1),t[1]||(t[1]=c("img",{class:"w-6 ltr:ml-2 rtl:mr-2",src:Mx,alt:"Someone is typing"},null,-1))])])):O("",!0),v(u,{"pop-out-reply-box":s.isPopOutReplyBox,"onUpdate:popOutReplyBox":t[0]||(t[0]=h=>s.isPopOutReplyBox=h)},null,8,["pop-out-reply-box"])],2)])}const Nwe=Fe(Ewe,[["render",xwe],["__scopeId","data-v-31c4e762"]]),Owe={components:{ConversationHeader:KAe,DashboardAppFrame:qAe,EmptyState:xye,MessagesView:Nwe},props:{inboxId:{type:[Number,String],default:"",required:!1},isInboxView:{type:Boolean,default:!1},isContactPanelOpen:{type:Boolean,default:!0},isOnExpandedLayout:{type:Boolean,default:!0}},data(){return{activeIndex:0}},computed:{...St({currentChat:"getSelectedChat",dashboardApps:"dashboardApps/getRecords"}),filteredDashboardApps(){return this.dashboardApps.filter(e=>e.show_in_navigation===!1)},dashboardAppTabs(){return[{key:"messages",index:0,name:this.$t("CONVERSATION.DASHBOARD_APP_TAB_MESSAGES")},...this.filteredDashboardApps.map((e,t)=>({key:`dashboard-${e.id}`,index:t+1,name:e.title}))]},showContactPanel(){return this.isContactPanelOpen&&this.currentChat.id}},watch:{"currentChat.inbox_id":{immediate:!0,handler(e){e&&this.$store.dispatch("inboxAssignableAgents/fetch",[e])}},"currentChat.id"(){this.fetchLabels(),this.activeIndex=0}},mounted(){this.fetchLabels(),this.$store.dispatch("dashboardApps/get")},methods:{fetchLabels(){this.currentChat.id&&this.$store.dispatch("conversationLabels/get",this.currentChat.id)},onDashboardAppTabChange(e){this.activeIndex=e}}},wwe={class:"flex h-full min-h-0 m-0"};function Rwe(e,t,n,s,a,o){const l=z("ConversationHeader"),i=z("woot-tabs-item"),r=z("woot-tabs"),d=z("MessagesView"),u=z("EmptyState"),m=z("DashboardAppFrame");return p(),f("div",{class:re(["conversation-details-wrap flex flex-col min-w-0 w-full bg-n-background relative",{"border-l rtl:border-l-0 rtl:border-r border-n-weak":!n.isOnExpandedLayout}])},[e.currentChat.id?(p(),V(l,{key:0,chat:e.currentChat,"show-back-button":n.isOnExpandedLayout&&!n.isInboxView},null,8,["chat","show-back-button"])):O("",!0),o.filteredDashboardApps.length&&e.currentChat.id?(p(),V(r,{key:1,index:a.activeIndex,class:"-mt-px border-t border-t-n-background",onChange:o.onDashboardAppTabChange},{default:K(()=>[(p(!0),f(fe,null,Ae(o.dashboardAppTabs,h=>(p(),V(i,{key:h.key,index:h.index,name:h.name,"show-badge":!1,"is-compact":"",class:"[&_a]:pt-1"},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])):O("",!0),pe(c("div",wwe,[e.currentChat.id?(p(),V(d,{key:0,"inbox-id":n.inboxId,"is-inbox-view":n.isInboxView},null,8,["inbox-id","is-inbox-view"])):O("",!0),!e.currentChat.id&&!n.isInboxView?(p(),V(u,{key:1,"is-on-expanded-layout":n.isOnExpandedLayout},null,8,["is-on-expanded-layout"])):O("",!0),at(e.$slots,"default")],512),[[pn,!a.activeIndex]]),(p(!0),f(fe,null,Ae(o.filteredDashboardApps,(h,_)=>pe((p(),V(m,{key:e.currentChat.id+"-"+h.id,"is-visible":a.activeIndex-1===_,config:o.filteredDashboardApps[_].content,position:_,"current-chat":e.currentChat},null,8,["is-visible","config","position","current-chat"])),[[pn,a.activeIndex-1===_]])),128))],2)}const PI=Fe(Owe,[["render",Rwe]]),BI={__name:"CmdBarConversationSnooze",setup(e){const t=yt(),n=Nn(),{t:s}=Pe(),a=F(!1),o=C(()=>n.getSelectedChat.value),l=C(()=>n.getContextMenuChatId.value),i=async(m,h)=>{var _;await t.dispatch("toggleStatus",{conversationId:((_=o.value)==null?void 0:_.id)||l.value,status:m,snoozedUntil:h}),t.dispatch("setContextMenuChatId",null),_e(s("CONVERSATION.CHANGE_STATUS"))},r=m=>{m===Pt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?a.value=!0:i(Pt.STATUS_TYPE.SNOOZED,L_(m)||null)},d=m=>{a.value=!1,m&&i(Pt.STATUS_TYPE.SNOOZED,Go(m))},u=()=>{t.dispatch("setContextMenuChatId",null),a.value=!1};return jl(V0e,r),(m,h)=>{const _=z("woot-modal");return p(),V(_,{show:a.value,"onUpdate:show":h[0]||(h[0]=g=>a.value=g),"on-close":u},{default:K(()=>[v(D_,{onClose:u,onChooseTime:d})]),_:1},8,["show"])}}},$we={class:"flex flex-col justify-center items-center absolute top-36 xl:top-24 ltr:right-2 rtl:left-2 bg-n-solid-2 border border-n-weak rounded-full gap-2 p-1"},FI={__name:"SidepanelSwitch",setup(e){const{updateUISettings:t}=Sn(),n=ke("getCurrentAccountId"),s=ke("accounts/isFeatureEnabledonAccount"),a=C(()=>s.value(n.value,Mt.CAPTAIN)),{uiSettings:o}=Sn(),l=C(()=>o.value.is_contact_sidebar_open),i=C(()=>o.value.is_copilot_panel_open),r=()=>{t({is_contact_sidebar_open:!l.value,is_copilot_panel_open:!1})},d=()=>{t({is_contact_sidebar_open:!0,is_copilot_panel_open:!1})},u=()=>{t({is_contact_sidebar_open:!1,is_copilot_panel_open:!0})};return Qs({"Alt+KeyO":{action:r}}),(h,_)=>{const g=_t("tooltip");return p(),f("div",$we,[pe(v(ce,{ghost:"",slate:"",sm:"",class:re(["!rounded-full",{"bg-n-alpha-2":l.value}]),icon:"i-ph-user-bold",onClick:d},null,8,["class"]),[[g,h.$t("CONVERSATION.SIDEBAR.CONTACT"),void 0,{top:!0}]]),a.value?pe((p(),V(ce,{key:0,ghost:"",slate:"",class:re(["!rounded-full",{"bg-n-alpha-2 !text-n-iris-9":i.value}]),sm:"",icon:"i-woot-captain",onClick:u},null,8,["class"])),[[g,h.$t("CONVERSATION.SIDEBAR.COPILOT"),void 0,{bottom:!0}]]):O("",!0)])}}},Mwe={props:{icon:{type:String,default:""},iconSize:{type:[Number,String],default:20},emoji:{type:String,default:""}},computed:{...St({uiSettings:"getUISettings"}),isIconTypeEmoji(){const{icon_type:e}=this.uiSettings||{};return e==="emoji"},showEmoji(){return this.isIconTypeEmoji&&this.emoji&&nO(this.emoji)},showIcon(){return!this.showEmoji&&this.icon},iconContent(){return this.showEmoji?this.emoji:""},className(){return{"icon--emoji":this.showEmoji,"icon--font":this.showIcon,[this.icon]:this.showIcon}}}};function kwe(e,t,n,s,a,o){const l=z("fluent-icon");return o.showEmoji?(p(),f("i",{key:0,class:re(o.className)},E(o.iconContent),3)):o.showIcon?(p(),V(l,{key:1,size:n.iconSize,icon:n.icon,class:re(["flex-shrink-0",o.className])},null,8,["size","icon","class"])):O("",!0)}const UI=Fe(Mwe,[["render",kwe],["__scopeId","data-v-93a331dd"]]),Lwe={class:"text-sm"},Dwe={class:"flex justify-between"},Pwe={class:"text-n-slate-12 text-sm mb-0 py-0 pr-2 pl-0"},Bwe={class:"flex flex-row"},Fwe={class:"flex justify-end w-3 text-n-blue-text cursor-pointer"},ko={__name:"AccordionItem",props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=()=>{n("toggle")};return(a,o)=>{const l=z("fluent-icon");return p(),f("div",Lwe,[c("button",{class:re(["flex items-center select-none w-full rounded-lg bg-n-slate-2 outline outline-1 outline-n-weak m-0 cursor-grab justify-between py-2 px-4 drag-handle",{"rounded-bl-none rounded-br-none":e.isOpen}]),onClick:ze(s,["stop"])},[c("div",Dwe,[v(UI,{class:"inline-block w-5",icon:e.icon,emoji:e.emoji},null,8,["icon","emoji"]),c("h5",Pwe,E(e.title),1)]),c("div",Bwe,[at(a.$slots,"button"),c("div",Fwe,[e.isOpen?(p(),V(l,{key:0,size:"24",icon:"subtract",type:"solid"})):(p(),V(l,{key:1,size:"24",icon:"add",type:"solid"}))])])],2),e.isOpen?(p(),f("div",{key:0,class:re(["bg-n-background outline outline-1 outline-n-weak -mt-[-1px] border-t-0 rounded-br-lg rounded-bl-lg",e.compact?"p-0":"px-2 py-4"])},[at(a.$slots,"default")],2)):O("",!0)])}}},Uwe={components:{ConversationCard:QS,Spinner:qn},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:{conversations(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations(){return this.conversations.filter(e=>e.id!==Number(this.conversationId))},...St({uiFlags:"contactConversations/getUIFlags"})},watch:{contactId(e,t){e&&e!==t&&this.$store.dispatch("contactConversations/get",e)}},mounted(){this.$store.dispatch("contactConversations/get",this.contactId)}},Gwe={key:0,class:""},Vwe={key:0,class:"no-label-message px-4 p-3"},Hwe={key:1,class:"contact-conversation--list"},Wwe={key:1,class:"flex items-center justify-center py-5"};function Kwe(e,t,n,s,a,o){const l=z("ConversationCard"),i=z("Spinner");return e.uiFlags.isFetching?(p(),f("div",Wwe,[v(i)])):(p(),f("div",Gwe,[o.previousConversations.length?(p(),f("div",Hwe,[(p(!0),f(fe,null,Ae(o.previousConversations,r=>(p(),V(l,{key:r.id,chat:r,"hide-inbox-name":!1,"hide-thumbnail":"","enable-context-menu":"",compact:"","allowed-context-menu-options":["open-new-tab","copy-link"]},null,8,["chat"]))),128))])):(p(),f("div",Vwe,[c("span",null,E(e.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND")),1)]))]))}const zwe=Fe(Uwe,[["render",Kwe],["__scopeId","data-v-a047c83a"]]);function GI(e=!0){const{t}=Pe(),n=ke("getCurrentUser"),s=ke("getSelectedChat"),a=ke("getCurrentAccountId"),o=ke("inboxAssignableAgents/getAssignableAgents"),l=C(()=>{var m;return(m=s.value)==null?void 0:m.inbox_id}),i=C(()=>{var m,h;return(h=(m=s.value)==null?void 0:m.meta)==null?void 0:h.assignee}),r=()=>({confirmed:!0,name:t("AGENT_MGMT.MULTI_SELECTOR.LIST.NONE")||"None",id:0,role:"agent",account_id:0,email:"None"}),d=C(()=>l.value?o.value(l.value):[]);return{agentsList:C(()=>{const m=d.value||[],h=XS(m,n.value,a.value),_=YS(h);return[...e&&i.value?[r()]:[],..._]}),assignableAgents:d}}const jwe={props:{title:{type:String,required:!0},value:{type:[String,Number],default:""},compact:{type:Boolean,default:!1}}},Ywe={class:"items-center flex justify-between mb-1.5"},Xwe={class:"text-sm font-medium text-n-slate-12"},qwe={key:0,class:"break-words"};function Zwe(e,t,n,s,a,o){return p(),f("div",{class:re(["overflow-auto",n.compact?"py-0 px-0":"py-3 px-4"])},[c("div",Ywe,[c("span",Xwe,E(n.title),1),at(e.$slots,"button")]),n.value?(p(),f("div",qwe,[at(e.$slots,"default",{},()=>[Ee(E(n.value),1)])])):O("",!0)],2)}const VI=Fe(jwe,[["render",Zwe]]),Qwe={components:{WootDropdownItem:Pc,WootDropdownMenu:dp,Avatar:Ft,NextButton:ce},props:{options:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},emits:["select"],data(){return{search:""}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.search.toLowerCase()))},noResult(){return this.filteredOptions.length===0&&this.search!==""}},mounted(){this.focusInput()},methods:{onclick(e){this.$emit("select",e)},focusInput(){this.$refs.searchbar.focus()},isActive(e){return this.selectedItems.some(t=>t&&e.id===t.id)}}},Jwe={class:"dropdown-wrap"},eRe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},tRe=["placeholder"],nRe={class:"flex items-start justify-start flex-auto overflow-auto mt-2"},sRe={class:"w-full max-h-[10rem]"},aRe={class:"flex items-center justify-between w-full min-w-0 gap-2"},oRe=["title"],lRe={key:0,class:"w-full justify-center items-center flex text-n-slate-10 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"};function iRe(e,t,n,s,a,o){const l=z("Avatar"),i=z("NextButton"),r=z("WootDropdownItem"),d=z("WootDropdownMenu");return p(),f("div",Jwe,[c("div",eRe,[pe(c("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=u=>a.search=u),type:"text",class:"search-input",autofocus:"true",placeholder:n.inputPlaceholder},null,8,tRe),[[mt,a.search]])]),c("div",nRe,[c("div",sRe,[v(d,null,{default:K(()=>[(p(!0),f(fe,null,Ae(o.filteredOptions,u=>(p(),V(r,{key:u.id},{default:K(()=>[v(i,{slate:"",variant:o.isActive(u)?"faded":"ghost","trailing-icon":"",icon:o.isActive(u)?"i-lucide-check":"",class:"w-full !px-2.5",onClick:()=>o.onclick(u)},{default:K(()=>[c("div",aRe,[c("span",{class:"my-0 overflow-hidden text-sm leading-4 whitespace-nowrap text-ellipsis",title:u.name},E(u.name),9,oRe)]),n.hasThumbnail?(p(),V(l,{key:0,src:u.thumbnail,name:u.name,status:u.availability_status,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"])):O("",!0)]),_:2},1032,["variant","icon","onClick"])]),_:2},1024))),128))]),_:1}),o.noResult?(p(),f("h4",lRe,E(n.noSearchResult),1)):O("",!0)])])])}const HI=Fe(Qwe,[["render",iRe],["__scopeId","data-v-7ae8e95d"]]),rRe={class:"flex items-center justify-between w-full min-w-0"},cRe={key:0,class:"text-sm text-ellipsis text-n-slate-12"},dRe=["title"],uRe={class:"flex items-center justify-between mb-1"},pRe={class:"m-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis"},WI={__name:"MultiselectDropdown",props:{options:{type:Array,default:()=>[]},selectedItem:{type:Object,default:()=>({})},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,[a,o]=Xn(!1),l=()=>o(!1),i=d=>{s("select",d),l()},r=C(()=>!!(n.selectedItem&&n.selectedItem.id));return(d,u)=>(p(),V(I(Li),{onTrigger:l},{default:K(()=>[c("div",{class:"relative w-full mb-2",onKeyup:Hn(l,["esc"])},[v(ce,{slate:"",outline:"","trailing-icon":"",icon:I(a)?"i-lucide-chevron-up":"i-lucide-chevron-down",class:"w-full !px-2",onClick:u[0]||(u[0]=()=>I(o)())},{default:K(()=>[c("div",rRe,[r.value?(p(),f("h4",{key:1,class:"items-center overflow-hidden text-sm leading-tight whitespace-nowrap text-ellipsis text-n-slate-12",title:e.selectedItem.name},E(e.selectedItem.name),9,dRe)):(p(),f("h4",cRe,E(e.multiselectorPlaceholder),1))]),r.value&&e.hasThumbnail?(p(),V(Ft,{key:0,src:e.selectedItem.thumbnail,status:e.selectedItem.availability_status,name:e.selectedItem.name,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"])):O("",!0)]),_:1},8,["icon"]),c("div",{class:re([{"block visible":I(a),"hidden invisible":!I(a)},"box-border top-[2.625rem] w-full border rounded-lg bg-n-alpha-3 backdrop-blur-[100px] absolute shadow-lg border-n-strong dark:border-n-strong p-2 z-[9999]"])},[c("div",uRe,[c("h4",pRe,E(e.multiselectorTitle),1),v(ce,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:l})]),I(a)?(p(),V(HI,{key:0,options:e.options,"selected-items":[e.selectedItem],"has-thumbnail":e.hasThumbnail,"input-placeholder":e.inputPlaceholder,"no-search-result":e.noSearchResult,onSelect:i},null,8,["options","selected-items","has-thumbnail","input-placeholder","no-search-result"])):O("",!0)],2)],32)]),_:1}))}};function mRe(){const e=yt(),t=Nn(),n=C(()=>t.getSelectedChat.value),s=C(()=>{var m;return(m=n.value)==null?void 0:m.id}),a=C(()=>t["labels/getLabels"].value),o=C(()=>e.getters["conversationLabels/getConversationLabels"](s.value)),l=C(()=>a.value.filter(({title:m})=>o.value.includes(m))),i=C(()=>a.value.filter(({title:m})=>!o.value.includes(m))),r=async m=>{await e.dispatch("conversationLabels/update",{conversationId:s.value,labels:m})};return{accountLabels:a,savedLabels:o,activeLabels:l,inactiveLabels:i,addLabelToConversation:m=>{const h=l.value.map(_=>_.title);h.push(m.title),r(h)},removeLabelFromConversation:m=>{const h=l.value.map(_=>_.title).filter(_=>_!==m);r(h)},onUpdateLabels:r}}const hRe={components:{NextButton:ce},props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},emits:["selectLabel"],methods:{onClick(){this.$emit("selectLabel",this.title)}}},fRe={class:"flex items-center min-w-0 gap-2"},gRe=["title"];function _Re(e,t,n,s,a,o){const l=z("NextButton"),i=z("woot-dropdown-item");return p(),V(i,null,{default:K(()=>[v(l,{slate:"",ghost:"",blue:"","trailing-icon":"",icon:n.selected?"i-lucide-circle-check":"",class:re(["w-full !px-2.5 justify-between",{"!flex-row":!n.selected}]),onClick:o.onClick},{default:K(()=>[c("div",fRe,[n.color?(p(),f("div",{key:0,class:"size-3 flex-shrink-0 rounded-full outline outline-1 outline-n-weak",style:Ct({backgroundColor:n.color})},null,4)):O("",!0),c("span",{class:"overflow-hidden text-ellipsis whitespace-nowrap leading-[1.1]",title:n.title},E(n.title),9,gRe)])]),_:1},8,["icon","class","onClick"])]),_:1})}const vRe=Fe(hRe,[["render",_Re]]),bRe=/[^a-zA-Z0-9_-]/g,ERe=/\s+/g,TRe=(e="")=>e?e.trim().toLowerCase().replace(ERe,"-").replace(bRe,""):"",ARe={components:{LabelDropdownItem:vRe,AddLabelModal:Fy,Hotkey:or,NextButton:ce},props:{accountLabels:{type:Array,default:()=>[]},selectedLabels:{type:Array,default:()=>[]},allowCreation:{type:Boolean,default:!1}},emits:["update","add","remove"],data(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder(){const e=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?`${e}:`:e},filteredActiveLabels(){return this.search?Rr(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult(){return this.filteredActiveLabels.length===0},hasExactMatchInResults(){return this.filteredActiveLabels.some(e=>e.title===this.search)},shouldShowCreate(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch(){return TRe(this.search)}},mounted(){this.focusInput()},methods:{focusInput(){this.$refs.searchbar.focus()},updateLabels(e){this.$emit("update",e)},onAdd(e){this.$emit("add",e)},onRemove(e){this.$emit("remove",e)},onAddRemove(e){this.selectedLabels.includes(e.title)?this.onRemove(e.title):this.onAdd(e)},showCreateModal(){this.createModalVisible=!0},hideCreateModal(){this.createModalVisible=!1}}},yRe={class:"flex flex-col w-full max-h-[12.5rem]"},SRe={class:"flex items-center justify-center mb-1"},IRe={class:"flex-grow m-0 overflow-hidden text-sm text-n-slate-12 whitespace-nowrap text-ellipsis"},CRe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},xRe=["placeholder"],NRe={class:"flex items-start justify-start flex-auto flex-grow flex-shrink overflow-auto"},ORe={class:"w-full my-1"},wRe={key:0,class:"flex justify-center py-4 px-2.5 font-medium text-xs text-n-slate-11"},RRe={key:1,class:"flex pt-1 border-t border-solid border-n-weak"};function $Re(e,t,n,s,a,o){const l=z("Hotkey"),i=z("LabelDropdownItem"),r=z("woot-dropdown-menu"),d=z("NextButton"),u=z("AddLabelModal"),m=z("woot-modal");return p(),f("div",yRe,[c("div",SRe,[c("h4",IRe,E(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE")),1),v(l,{"custom-class":"border border-solid text-n-slate-12 bg-n-slate-2 text-xxs border-n-strong flex-shrink-0"},{default:K(()=>t[2]||(t[2]=[Ee(E("L"))])),_:1})]),c("div",CRe,[pe(c("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=h=>a.search=h),type:"text",class:"search-input",autofocus:"true",placeholder:e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},null,8,xRe),[[mt,a.search]])]),c("div",NRe,[c("div",ORe,[v(r,null,{default:K(()=>[(p(!0),f(fe,null,Ae(o.filteredActiveLabels,h=>(p(),V(i,{key:h.title,title:h.title,color:h.color,selected:n.selectedLabels.includes(h.title),onSelectLabel:_=>o.onAddRemove(h)},null,8,["title","color","selected","onSelectLabel"]))),128))]),_:1}),o.noResult?(p(),f("div",wRe,E(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT")),1)):O("",!0),n.allowCreation&&o.shouldShowCreate?(p(),f("div",RRe,[v(d,{icon:"i-lucide-plus",slate:"",sm:"",ghost:"",label:`${o.createLabelPlaceholder} ${o.parsedSearch}`,disabled:o.hasExactMatchInResults,onClick:o.showCreateModal},null,8,["label","disabled","onClick"]),v(m,{show:a.createModalVisible,"onUpdate:show":t[1]||(t[1]=h=>a.createModalVisible=h),"on-close":o.hideCreateModal},{default:K(()=>[v(u,{"prefill-title":o.parsedSearch,onClose:o.hideCreateModal},null,8,["prefill-title","onClose"])]),_:1},8,["show","on-close"])])):O("",!0)])])])}const MRe=Fe(ARe,[["render",$Re]]),kRe={__name:"AddLabel",emits:["add"],setup(e,{emit:t}){const n=t,s=()=>{n("add")};return(a,o)=>(p(),V(ce,{faded:"",xs:"",icon:"i-lucide-plus",class:"mb-0.5 ltr:mr-0.5 rtl:ml-0.5 !rounded-[4px]",label:a.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"),onClick:s},null,8,["label"]))}},LRe={components:{Spinner:Zs,LabelDropdown:MRe,AddLabel:kRe},setup(){const{isAdmin:e}=io(),{savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:a,removeLabelFromConversation:o}=mRe(),l=F(!1),i=()=>{l.value=!l.value},r=()=>{l.value=!1};return Qs({KeyL:{action:u=>{u.preventDefault(),i()}},Escape:{action:()=>{l.value&&i()},allowOnFocusedInput:!0}}),{isAdmin:e,savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:a,removeLabelFromConversation:o,showSearchDropdownLabel:l,closeDropdownLabel:r,toggleLabels:i}},data(){return{selectedLabels:[]}},computed:{...St({conversationUiFlags:"conversationLabels/getUIFlags"})}},DRe={class:"sidebar-labels-wrap"},PRe={key:0,class:"contact-conversation--list"};function BRe(e,t,n,s,a,o){const l=z("AddLabel"),i=z("woot-label"),r=z("LabelDropdown"),d=z("Spinner"),u=_t("on-clickaway");return p(),f("div",DRe,[e.conversationUiFlags.isFetching?(p(),V(d,{key:1})):(p(),f("div",PRe,[pe((p(),f("div",{class:"label-wrap flex flex-wrap",onKeyup:t[0]||(t[0]=Hn((...m)=>s.closeDropdownLabel&&s.closeDropdownLabel(...m),["esc"]))},[v(l,{onAdd:s.toggleLabels},null,8,["onAdd"]),(p(!0),f(fe,null,Ae(s.activeLabels,m=>(p(),V(i,{key:m.id,title:m.title,description:m.description,"show-close":"",color:m.color,variant:"smooth",class:"max-w-[calc(100%-0.5rem)]",onRemove:s.removeLabelFromConversation},null,8,["title","description","color","onRemove"]))),128)),c("div",{class:re([{"block visible":s.showSearchDropdownLabel,"hidden invisible":!s.showSearchDropdownLabel},"border rounded-lg bg-n-alpha-3 top-6 backdrop-blur-[100px] absolute w-full shadow-lg border-n-strong dark:border-n-strong p-2 box-border z-[9999]"])},[s.showSearchDropdownLabel?(p(),V(r,{key:0,"account-labels":s.accountLabels,"selected-labels":s.savedLabels,"allow-creation":s.isAdmin,onAdd:s.addLabelToConversation,onRemove:s.removeLabelFromConversation},null,8,["account-labels","selected-labels","allow-creation","onAdd","onRemove"])):O("",!0)],2)],32)),[[u,s.closeDropdownLabel]])]))])}const FRe=Fe(LRe,[["render",BRe],["__scopeId","data-v-0ae0a433"]]),URe={components:{ContactDetailsItem:VI,MultiselectDropdown:WI,ConversationLabels:FRe,NextButton:ce},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=GI();return{agentsList:e}},data(){return{priorityOptions:[{id:null,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),thumbnail:"/assets/images/dashboard/priority/none.svg"},{id:fa.URGENT,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),thumbnail:`/assets/images/dashboard/priority/${fa.URGENT}.svg`},{id:fa.HIGH,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),thumbnail:`/assets/images/dashboard/priority/${fa.HIGH}.svg`},{id:fa.MEDIUM,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),thumbnail:`/assets/images/dashboard/priority/${fa.MEDIUM}.svg`},{id:fa.LOW,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),thumbnail:`/assets/images/dashboard/priority/${fa.LOW}.svg`}]}},computed:{...St({currentChat:"getSelectedChat",currentUser:"getCurrentUser",teams:"teams/getTeams"}),hasAnAssignedTeam(){var e,t;return!!((t=(e=this.currentChat)==null?void 0:e.meta)!=null&&t.team)},teamsList(){return this.hasAnAssignedTeam?[{id:0,name:this.$t("TEAMS_SETTINGS.LIST.NONE")},...this.teams]:this.teams},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:0;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{_e(this.$t("CONVERSATION.CHANGE_AGENT"))})}},assignedTeam:{get(){return this.currentChat.meta.team},set(e){const t=this.currentChat.id,n=e?e.id:0;this.$store.dispatch("setCurrentChatTeam",{team:e,conversationId:t}),this.$store.dispatch("assignTeam",{conversationId:t,teamId:n}).then(()=>{_e(this.$t("CONVERSATION.CHANGE_TEAM"))})}},assignedPriority:{get(){return this.priorityOptions.find(t=>t.id===this.currentChat.priority)||this.priorityOptions[0]},set(e){var a;const t=this.currentChat.id,n=(a=this.currentChat)==null?void 0:a.priority,s=e?e.id:null;this.$store.dispatch("setCurrentChatPriority",{priority:s,conversationId:t}),this.$store.dispatch("assignPriority",{conversationId:t,priority:s}).then(()=>{nn(_a.CHANGE_PRIORITY,{oldValue:n,newValue:s,from:"Conversation Sidebar"}),_e(this.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:e.name,conversationId:t}))})}},showSelfAssign(){return!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id}},methods:{onSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:a,name:o,role:l,avatar_url:i}=this.currentUser,r={account_id:e,availability_status:t,available_name:n,email:s,id:a,name:o,role:l,thumbnail:i};this.assignedAgent=r},onClickAssignAgent(e){this.assignedAgent&&this.assignedAgent.id===e.id?this.assignedAgent=null:this.assignedAgent=e},onClickAssignTeam(e){this.assignedTeam&&this.assignedTeam.id===e.id?this.assignedTeam=null:this.assignedTeam=e},onClickAssignPriority(e){const t=this.assignedPriority&&this.assignedPriority.id===e.id;this.assignedPriority=t?null:e}}},GRe={class:"bg-n-background"},VRe={class:"multiselect-wrap--small"},HRe={class:"multiselect-wrap--small"},WRe={class:"multiselect-wrap--small"};function KRe(e,t,n,s,a,o){const l=z("NextButton"),i=z("ContactDetailsItem"),r=z("MultiselectDropdown"),d=z("ConversationLabels");return p(),f("div",GRe,[c("div",VRe,[v(i,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ASSIGNEE_LABEL")},{button:K(()=>[o.showSelfAssign?(p(),V(l,{key:0,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_SIDEBAR.SELF_ASSIGN"),onClick:o.onSelfAssign},null,8,["label","onClick"])):O("",!0)]),_:1},8,["title"]),v(r,{options:s.agentsList,"selected-item":o.assignedAgent,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.AGENT"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.AGENT"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.AGENT"),onSelect:o.onClickAssignAgent},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),c("div",HRe,[v(i,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.TEAM_LABEL")},null,8,["title"]),v(r,{options:o.teamsList,"selected-item":o.assignedTeam,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.TEAM"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.TEAM"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.TEAM"),onSelect:o.onClickAssignTeam},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),c("div",WRe,[v(i,{compact:"",title:e.$t("CONVERSATION.PRIORITY.TITLE")},null,8,["title"]),v(r,{options:a.priorityOptions,"selected-item":o.assignedPriority,"multiselector-title":e.$t("CONVERSATION.PRIORITY.TITLE"),"multiselector-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SELECT_PLACEHOLDER"),"no-search-result":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.NO_RESULTS"),"input-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.INPUT_PLACEHOLDER"),onSelect:o.onClickAssignPriority},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),v(i,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_LABELS")},null,8,["title"]),v(d,{"conversation-id":n.conversationId},null,8,["conversation-id"])])}const zRe=Fe(URe,[["render",KRe]]),jRe={class:"flex"},YRe={__name:"ThumbnailGroup",props:{usersList:{type:Array,default:()=>[]},size:{type:Number,default:24},showMoreThumbnailsCount:{type:Boolean,default:!1},moreThumbnailsText:{type:String,default:""},gap:{type:String,default:"normal",validator(e){return["normal","tight"].includes(e)}}},setup(e){const t=e,n=C(()=>t.gap==="tight"?"ltr:[&:not(:first-child)]:-ml-2 rtl:[&:not(:first-child)]:-mr-2":"ltr:[&:not(:first-child)]:-ml-1 rtl:[&:not(:first-child)]:-mr-1"),s=C(()=>t.gap==="tight"?"ltr:-ml-2 rtl:-mr-2":"ltr:-ml-1 rtl:-mr-1");return(a,o)=>{const l=_t("tooltip");return p(),f("div",jRe,[(p(!0),f(fe,null,Ae(e.usersList,i=>pe((p(),V(Ft,{key:i.id,title:i.name,src:i.thumbnail,name:i.name,size:e.size,class:re(["[&>span]:outline [&>span]:outline-1 [&>span]:outline-n-background [&>span]:shadow",n.value]),"rounded-full":""},null,8,["title","src","name","size","class"])),[[l,i.name]])),128)),e.showMoreThumbnailsCount?(p(),f("span",{key:0,class:re(["text-n-slate-11 bg-n-slate-4 outline outline-1 outline-n-background text-xs font-medium rounded-full px-2 inline-flex items-center shadow relative",s.value])},E(e.moreThumbnailsText),3)):O("",!0)])}}},XRe={components:{Spinner:Zs,ThumbnailGroup:YRe,MultiselectDropdownItems:HI,NextButton:ce},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=GI(!1);return{agentsList:e}},data(){return{selectedWatchers:[],showDropDown:!1}},computed:{...St({watchersUiFlas:"conversationWatchers/getUIFlags",currentUser:"getCurrentUser"}),watchersFromStore(){return this.$store.getters["conversationWatchers/getByConversationId"](this.conversationId)},watchersList:{get(){return this.selectedWatchers},set(e){this.selectedWatchers=[...e];const t=e.map(n=>n.id);this.updateParticipant(t)}},isUserWatching(){return this.selectedWatchers.some(e=>e.id===this.currentUser.id)},thumbnailList(){return this.selectedWatchers.slice(0,4)},moreAgentCount(){return this.watchersList.length-4},moreThumbnailsText(){return this.moreAgentCount>1?this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANTS_TEXT",{count:this.moreAgentCount}):this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANT_TEXT",{count:1})},showMoreThumbs(){return this.moreAgentCount>0},totalWatchersText(){return this.selectedWatchers.length>1?this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANTS_TEXT",{count:this.selectedWatchers.length}):this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANT_TEXT",{count:1})}},watch:{conversationId(){this.fetchParticipants()},watchersFromStore(e=[]){this.selectedWatchers=[...e]}},mounted(){this.fetchParticipants(),this.$store.dispatch("agents/get")},methods:{fetchParticipants(){const e=this.conversationId;this.$store.dispatch("conversationWatchers/show",{conversationId:e})},async updateParticipant(e){const t=this.conversationId;let n=this.$t("CONVERSATION_PARTICIPANTS.API.SUCCESS_MESSAGE");try{await this.$store.dispatch("conversationWatchers/update",{conversationId:t,userIds:e})}catch(s){n=(s==null?void 0:s.message)||this.$t("CONVERSATION_PARTICIPANTS.API.ERROR_MESSAGE")}finally{_e(n)}this.fetchParticipants()},onOpenDropdown(){this.showDropDown=!0},onCloseDropdown(){this.showDropDown=!1},onClickItem(e){if(this.watchersList.some(n=>n.id===e.id)){const n=this.watchersList.filter(s=>s.id!==e.id);this.watchersList=[...n]}else this.watchersList=[...this.watchersList,e]},onSelfAssign(){this.watchersList=[...this.selectedWatchers,this.currentUser]}}},qRe={class:"relative bg-n-background"},ZRe={class:"flex justify-between"},QRe={class:"flex justify-between w-full mb-1"},JRe={key:0,class:"m-0 text-sm total-watchers"},e$e={key:1,class:"m-0 text-sm text-n-slate-10"},t$e={class:"flex items-center justify-between"},n$e={key:0,class:"m-0 text-sm text-n-slate-10"},s$e={class:"flex items-center justify-between mb-1"},a$e={class:"m-0 overflow-hidden text-sm whitespace-nowrap text-ellipsis text-n-slate-12"};function o$e(e,t,n,s,a,o){const l=z("Spinner"),i=z("NextButton"),r=z("ThumbnailGroup"),d=z("MultiselectDropdownItems"),u=_t("tooltip"),m=_t("on-clickaway");return p(),f("div",qRe,[c("div",ZRe,[c("div",QRe,[c("div",null,[o.watchersList.length?(p(),f("p",JRe,[e.watchersUiFlas.isFetching?(p(),V(l,{key:0,size:"tiny"})):O("",!0),Ee(" "+E(o.totalWatchersText),1)])):(p(),f("p",e$e,E(e.$t("CONVERSATION_PARTICIPANTS.NO_PARTICIPANTS_TEXT")),1))]),pe(v(i,{slate:"",ghost:"",sm:"",icon:"i-lucide-settings",class:"relative -top-1",title:e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),onClick:o.onOpenDropdown},null,8,["title","onClick"]),[[u,e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),void 0,{left:!0}]])])]),c("div",t$e,[v(r,{"more-thumbnails-text":o.moreThumbnailsText,"show-more-thumbnails-count":o.showMoreThumbs,"users-list":o.thumbnailList},null,8,["more-thumbnails-text","show-more-thumbnails-count","users-list"]),o.isUserWatching?(p(),f("p",n$e,E(e.$t("CONVERSATION_PARTICIPANTS.YOU_ARE_WATCHING")),1)):(p(),V(i,{key:1,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_PARTICIPANTS.WATCH_CONVERSATION"),onClick:o.onSelfAssign},null,8,["label","onClick"]))]),pe((p(),f("div",{class:re([{"block visible":a.showDropDown,"hidden invisible":!a.showDropDown},"border rounded-lg shadow-lg bg-n-alpha-3 absolute backdrop-blur-[100px] border-n-strong dark:border-n-strong p-2 z-[9999] box-border top-8 w-full"])},[c("div",s$e,[c("h4",a$e,E(e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS")),1),v(i,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:o.onCloseDropdown},null,8,["onClick"])]),v(d,{options:s.agentsList,"selected-items":a.selectedWatchers,"has-thumbnail":"",onSelect:o.onClickItem},null,8,["options","selected-items","onSelect"])],2)),[[m,()=>{o.onCloseDropdown()}]])])}const l$e=Fe(XRe,[["render",o$e]]),i$e={components:{EmojiOrIcon:UI,NextButton:ce},props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{async onCopy(e){e.preventDefault(),await qo(this.value),_e(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL"))}}},r$e={class:"w-full h-5 ltr:-ml-1 rtl:-mr-1"},c$e=["href"],d$e=["title"],u$e={key:1,class:"text-sm text-n-slate-11"},p$e={key:1,class:"flex items-center gap-2 text-n-slate-11"},m$e={key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis"},h$e={key:1,class:"text-sm text-n-slate-11"};function f$e(e,t,n,s,a,o){const l=z("EmojiOrIcon"),i=z("NextButton"),r=_t("dompurify-html");return p(),f("div",r$e,[n.href?(p(),f("a",{key:0,href:n.href,class:"flex items-center gap-2 text-n-slate-11 hover:underline"},[v(l,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?(p(),f("span",{key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis",title:n.value},E(n.value),9,d$e)):(p(),f("span",u$e,E(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1)),n.showCopy?(p(),V(i,{key:2,ghost:"",xs:"",slate:"",class:"ltr:-ml-1 rtl:-mr-1",icon:"i-lucide-clipboard",onClick:o.onCopy},null,8,["onClick"])):O("",!0)],8,c$e)):(p(),f("div",p$e,[v(l,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?pe((p(),f("span",m$e,null,512)),[[r,n.value]]):(p(),f("span",h$e,E(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1))]))])}const g$e=Fe(i$e,[["render",f$e]]),_$e={props:{socialProfiles:{type:Object,default:()=>({})}},data(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"},{key:"telegram",icon:"telegram",link:"https://t.me/"}]}},computed:{availableProfiles(){return this.socialMediaLinks.filter(e=>!!this.socialProfiles[e.key])}}},v$e={key:0,class:"flex items-end gap-3 mx-0 my-2"},b$e=["href"];function E$e(e,t,n,s,a,o){const l=z("fluent-icon");return o.availableProfiles.length?(p(),f("div",v$e,[(p(!0),f(fe,null,Ae(o.availableProfiles,i=>(p(),f("a",{key:i.key,href:`${i.link}${n.socialProfiles[i.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"},[v(l,{icon:`brand-${i.key}`,size:"16",class:"text-n-slate-11 hover:text-n-slate-10"},null,8,["icon"])],8,b$e))),128))])):O("",!0)}const T$e=Fe(_$e,[["render",E$e]]),A$e={components:{NextButton:ce,Avatar:Ft},props:{contact:{type:Object,default:()=>({})},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:()=>{}}},emits:["cancel","success"],setup(){return{v$:Lt()}},data(){return{countries:to,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:lt},description:{},email:{email:Zl},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber(){return $u(this.phoneNumber)},isPhoneNumberNotValid(){return this.phoneNumber!==""?!Ev(this.phoneNumber,this.activeDialCode)||(this.phoneNumber!==""?this.activeDialCode==="":!1):!1},phoneNumberError(){return this.activeDialCode===""?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):Ev(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:this.phoneNumber===""&&this.activeDialCode!==""?"":this.activeDialCode?`${this.activeDialCode}${this.phoneNumber}`:""}},watch:{contact(){this.setContactObject()}},mounted(){this.setContactObject(),this.setDialCode()},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("success")},countryNameWithCode({name:e,id:t}){return t?!e&&!t?"":`${e} (${t})`:e},setDialCode(){if(this.phoneNumber!==""&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){const e=this.parsePhoneNumber.countryCallingCode;this.activeDialCode=`+${e}`}},setContactObject(){const{email:e,phone_number:t,name:n}=this.contact,s=this.contact.additional_attributes||{};this.name=n||"",this.email=e||"",this.phoneNumber=t||"",this.companyName=s.company_name||"",this.country={id:s.country_code||"",name:s.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=s.city||"",this.description=s.description||"",this.avatarUrl=this.contact.thumbnail||"";const{social_profiles:a={},screen_name:o}=s;this.socialProfileUserNames={twitter:a.twitter||o||"",facebook:a.facebook||"",linkedin:a.linkedin||"",github:a.github||"",instagram:a.instagram||""}},getContactObject(){this.country===null&&(this.country={id:"",name:""});const e={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:{...this.contact.additional_attributes,description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames}};return this.avatarFile&&(e.avatar=this.avatarFile,e.isFormData=!0),e},setPhoneCode(e){if(this.phoneNumber!==""&&this.parsePhoneNumber){const t=this.parsePhoneNumber.countryCallingCode;if(t===e)return;this.activeDialCode=`+${t}`;const n=this.phoneNumber.replace(`+${t}`,`${e}`);this.phoneNumber=n}else this.activeDialCode=e},async handleSubmit(){if(this.v$.$touch(),!(this.v$.$invalid||this.isPhoneNumberNotValid))try{await this.onSubmit(this.getContactObject()),this.onSuccess(),_e(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))}catch(e){e instanceof ep?e.data.includes("email")?_e(this.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):e.data.includes("phone_number")&&_e(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e instanceof Zc?_e(e.data):_e(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{this.contact&&this.contact.id&&(await this.$store.dispatch("contacts/deleteAvatar",this.contact.id),_e(this.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"))),this.avatarFile=null,this.avatarUrl="",this.activeDialCode=""}catch(e){_e(e.message?e.message:this.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"))}}}},y$e={class:"flex flex-col mb-4 items-start gap-1 w-full"},S$e={class:"mb-0.5 text-sm font-medium text-n-slate-12"},I$e={class:"w-full"},C$e=["placeholder"],x$e=["placeholder"],N$e={key:0,class:"message"},O$e={class:"w-full"},w$e=["placeholder"],R$e={class:"w-full"},$$e={key:0,class:"message"},M$e={key:0,class:"relative mx-0 mt-0 mb-2.5 p-2 rounded-md text-sm border border-solid border-n-amber-5 text-n-amber-12 bg-n-amber-3"},k$e={class:"w-full"},L$e={class:"w-full"},D$e={class:"flex items-center h-10 px-2 text-sm border-solid border-y ltr:border-l rtl:border-r ltr:rounded-l-md rtl:rounded-r-md bg-n-solid-3 text-n-slate-11 border-n-weak"},P$e=["onUpdate:modelValue"],B$e={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"};function F$e(e,t,n,s,a,o){const l=z("Avatar"),i=z("woot-phone-input"),r=z("woot-input"),d=z("multiselect"),u=z("NextButton");return p(),f("form",{class:"w-full px-8 pt-6 pb-8 contact--form",onSubmit:t[10]||(t[10]=ze((...m)=>o.handleSubmit&&o.handleSubmit(...m),["prevent"]))},[c("div",y$e,[c("label",S$e,E(e.$t("CONTACT_FORM.FORM.AVATAR.LABEL")),1),v(l,{src:a.avatarUrl,size:72,name:n.contact.name,"allow-upload":"","rounded-full":"",onUpload:o.handleImageUpload,onDelete:o.handleAvatarDelete},null,8,["src","name","onUpload","onDelete"])]),c("div",null,[c("div",I$e,[c("label",{class:re({error:s.v$.name.$error})},[Ee(E(e.$t("CONTACT_FORM.FORM.NAME.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.name=m),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...m)=>s.v$.name.$touch&&s.v$.name.$touch(...m))},null,40,C$e),[[mt,a.name]])],2),c("label",{class:re({error:s.v$.email.$error})},[Ee(E(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+" ",1),pe(c("input",{"onUpdate:modelValue":t[2]||(t[2]=m=>a.email=m),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER"),onInput:t[3]||(t[3]=(...m)=>s.v$.email.$touch&&s.v$.email.$touch(...m))},null,40,x$e),[[mt,a.email]]),s.v$.email.$error?(p(),f("span",N$e,E(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR")),1)):O("",!0)],2)])]),c("div",O$e,[c("label",{class:re({error:s.v$.description.$error})},[Ee(E(e.$t("CONTACT_FORM.FORM.BIO.LABEL"))+" ",1),pe(c("textarea",{"onUpdate:modelValue":t[4]||(t[4]=m=>a.description=m),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER"),onInput:t[5]||(t[5]=(...m)=>s.v$.description.$touch&&s.v$.description.$touch(...m))},null,40,w$e),[[mt,a.description]])],2)]),c("div",null,[c("div",R$e,[c("label",{class:re({error:o.isPhoneNumberNotValid})},[Ee(E(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+" ",1),v(i,{modelValue:a.phoneNumber,"onUpdate:modelValue":t[6]||(t[6]=m=>a.phoneNumber=m),value:a.phoneNumber,error:o.isPhoneNumberNotValid,placeholder:e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER"),onBlur:s.v$.phoneNumber.$touch,onSetCode:o.setPhoneCode},null,8,["modelValue","value","error","placeholder","onBlur","onSetCode"]),o.isPhoneNumberNotValid?(p(),f("span",$$e,E(o.phoneNumberError),1)):O("",!0)],2),o.isPhoneNumberNotValid||!a.phoneNumber?(p(),f("div",M$e,E(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP")),1)):O("",!0)])]),v(r,{modelValue:a.companyName,"onUpdate:modelValue":t[7]||(t[7]=m=>a.companyName=m),class:"w-full",label:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),c("div",null,[c("div",k$e,[c("label",null,E(e.$t("CONTACT_FORM.FORM.COUNTRY.LABEL")),1),v(d,{modelValue:a.country,"onUpdate:modelValue":t[8]||(t[8]=m=>a.country=m),"track-by":"id",label:"name",placeholder:e.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":e.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":e.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":o.countryNameWithCode,"max-height":160,options:a.countries,"allow-empty":"","option-height":104},null,8,["modelValue","placeholder","select-label","deselect-label","custom-label","options"])])]),v(r,{modelValue:a.city,"onUpdate:modelValue":t[9]||(t[9]=m=>a.city=m),class:"w-full",label:e.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),c("div",L$e,[c("label",null,E(e.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.SOCIAL_PROFILES")),1),(p(!0),f(fe,null,Ae(a.socialProfileKeys,m=>(p(),f("div",{key:m.key,class:"flex items-stretch w-full mb-4"},[c("span",D$e,E(m.prefixURL),1),pe(c("input",{"onUpdate:modelValue":h=>a.socialProfileUserNames[m.key]=h,class:"input-group-field ltr:!rounded-l-none rtl:!rounded-r-none !mb-0",type:"text"},null,8,P$e),[[mt,a.socialProfileUserNames[m.key]]])]))),128))]),c("div",B$e,[v(u,{type:"submit",label:e.$t("CONTACT_FORM.FORM.SUBMIT"),"is-loading":n.inProgress},null,8,["label","is-loading"]),v(u,{faded:"",slate:"",type:"reset",label:e.$t("CONTACT_FORM.FORM.CANCEL"),onClick:ze(o.onCancel,["prevent"])},null,8,["label","onClick"])])],32)}const U$e=Fe(A$e,[["render",F$e],["__scopeId","data-v-0fdc19dd"]]),G$e={components:{ContactForm:U$e},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:()=>({})}},emits:["cancel","update:show"],computed:{...St({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("cancel")},async onSubmit(e){await this.$store.dispatch("contacts/update",e),await this.$store.dispatch("contacts/fetchContactableInbox",this.contact.id)}}},V$e={class:"flex flex-col h-auto overflow-auto"};function H$e(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("ContactForm"),r=z("woot-modal");return p(),V(r,{show:o.localShow,"onUpdate:show":t[0]||(t[0]=d=>o.localShow=d),"on-close":o.onCancel,"modal-type":"right-aligned"},{default:K(()=>[c("div",V$e,[v(l,{"header-title":`${e.$t("EDIT_CONTACT.TITLE")} - ${n.contact.name||n.contact.email}`,"header-content":e.$t("EDIT_CONTACT.DESC")},null,8,["header-title","header-content"]),v(i,{contact:n.contact,"in-progress":e.uiFlags.isUpdating,"on-submit":o.onSubmit,onSuccess:o.onSuccess,onCancel:o.onCancel},null,8,["contact","in-progress","on-submit","onSuccess","onCancel"])])]),_:1},8,["show","on-close"])}const W$e=Fe(G$e,[["render",H$e]]),K$e={props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}},z$e={key:0,class:"my-4 relative p-2.5 border rounded-[4px] text-n-slate-12 border-n-weak bg-n-background"},j$e={class:"text-base font-medium text-n-slate-12"},Y$e={class:"ml-0 list-none"};function X$e(e,t,n,s,a,o){const l=_t("dompurify-html");return n.parentContactName?(p(),f("div",z$e,[c("h5",j$e,E(e.$t("MERGE_CONTACTS.SUMMARY.TITLE")),1),c("ul",Y$e,[c("li",null,[t[0]||(t[0]=c("span",{class:"inline-block mr-1"},"",-1)),pe(c("span",null,null,512),[[l,e.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:n.primaryContactName})]])]),c("li",null,[t[1]||(t[1]=c("span",{class:"inline-block mr-1"},"",-1)),pe(c("span",null,null,512),[[l,e.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:n.primaryContactName,parentContactName:n.parentContactName})]])])])])):O("",!0)}const q$e=Fe(K$e,[["render",X$e]]),Z$e={class:"option-item--user"},Q$e={class:"option__user-data"},J$e={class:"option__title"},eMe={key:0,class:"user-identifier"},tMe={class:"option__body"},nMe={key:0,class:"email-icon-wrap"},sMe={key:1,class:"phone-icon-wrap"},aMe={key:2},oMe={__name:"ContactDropdownItem",props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}},setup(e){return(t,n)=>{const s=z("fluent-icon");return p(),f("div",Z$e,[v(Ft,{src:e.thumbnail,size:28,name:e.name,"rounded-full":""},null,8,["src","name"]),c("div",Q$e,[c("h5",J$e,[Ee(E(e.name)+" ",1),e.identifier?(p(),f("span",eMe,E(t.$t("MERGE_CONTACTS.DROPDOWN_ITEM.ID",{identifier:e.identifier})),1)):O("",!0)]),c("p",tMe,[e.email?(p(),f("span",nMe,[v(s,{class:"merge-contact--icon",icon:"mail",size:"12"}),Ee(" "+E(e.email),1)])):O("",!0),e.phoneNumber?(p(),f("span",sMe,[v(s,{class:"merge-contact--icon",icon:"call",size:"12"}),Ee(" "+E(e.phoneNumber),1)])):O("",!0),!e.phoneNumber&&!e.email?(p(),f("span",aMe,E("---"))):O("",!0)])])])}}},lMe=Fe(oMe,[["__scopeId","data-v-99c0745e"]]),iMe={components:{MergeContactSummary:q$e,ContactDropdownItem:lMe,NextButton:ce},props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:()=>[]}},emits:["search","submit","cancel"],setup(){return{v$:Lt()}},validations:{primaryContact:{required:lt},parentContact:{required:lt}},data(){return{parentContact:void 0}},computed:{parentContactName(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange(e){this.$emit("search",e)},onSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.parentContact.id)},onCancel(){this.$emit("cancel")}}},rMe={class:"multiselect__label"},cMe={key:0,class:"message"},dMe={class:"flex multiselect-wrap--medium"},uMe={class:"w-8 relative text-base text-n-strong after:content-[''] after:h-12 after:w-0 ltr:after:left-4 rtl:after:right-4 after:absolute after:border-l after:border-solid after:border-n-strong before:content-[''] before:h-0 before:w-4 ltr:before:left-4 rtl:before:right-4 before:top-12 before:absolute before:border-b before:border-solid before:border-n-strong"},pMe={class:"flex flex-col w-full ltr:pl-8 rtl:pr-8"},mMe={class:"multiselect__label"},hMe={class:"flex justify-end gap-2 mt-6"};function fMe(e,t,n,s,a,o){const l=z("woot-label"),i=z("ContactDropdownItem"),r=z("multiselect"),d=z("fluent-icon"),u=z("MergeContactSummary"),m=z("NextButton");return p(),f("form",{onSubmit:t[1]||(t[1]=ze((...h)=>o.onSubmit&&o.onSubmit(...h),["prevent"]))},[c("div",null,[c("div",null,[c("div",{class:re(["mt-1 multiselect-wrap--medium",{error:s.v$.parentContact.$error}])},[c("label",rMe,[Ee(E(e.$t("MERGE_CONTACTS.PARENT.TITLE"))+" ",1),v(l,{title:e.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:"",class:"ml-2"},null,8,["title"])]),v(r,{modelValue:a.parentContact,"onUpdate:modelValue":t[0]||(t[0]=h=>a.parentContact=h),options:n.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:e.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":"",loading:n.isSearching,"max-height":150,"open-direction":"top",onSearchChange:o.searchChange},{singleLabel:K(h=>[v(i,{thumbnail:h.option.thumbnail,identifier:h.option.id,name:h.option.name,email:h.option.email,"phone-number":h.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),option:K(h=>[v(i,{thumbnail:h.option.thumbnail,identifier:h.option.id,name:h.option.name,email:h.option.email,"phone-number":h.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),noResult:K(()=>[c("span",null,E(e.$t("AGENT_MGMT.SEARCH.NO_RESULTS")),1)]),_:1},8,["modelValue","options","placeholder","loading","onSearchChange"]),s.v$.parentContact.$error?(p(),f("span",cMe,E(e.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR")),1)):O("",!0)],2)]),c("div",dMe,[c("div",uMe,[v(d,{icon:"arrow-up",class:"absolute -top-1 ltr:left-2 rtl:right-2",size:"17"})]),c("div",pMe,[c("label",mMe,[Ee(E(e.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+" ",1),v(l,{title:e.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:"",class:"ml-2"},null,8,["title"])]),v(r,{"model-value":n.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},{singleLabel:K(h=>[v(i,{thumbnail:h.option.thumbnail,name:h.option.name,identifier:h.option.id,email:h.option.email,"phone-number":h.option.phoneNumber},null,8,["thumbnail","name","identifier","email","phone-number"])]),_:1},8,["model-value"])])])]),v(u,{"primary-contact-name":n.primaryContact.name,"parent-contact-name":o.parentContactName},null,8,["primary-contact-name","parent-contact-name"]),c("div",hMe,[v(m,{faded:"",slate:"",type:"reset",label:e.$t("MERGE_CONTACTS.FORM.CANCEL"),onClick:ze(o.onCancel,["prevent"])},null,8,["label","onClick"]),v(m,{type:"submit","is-loading":n.isMerging,label:e.$t("MERGE_CONTACTS.FORM.SUBMIT")},null,8,["is-loading","label"])])],32)}const gMe=Fe(iMe,[["render",fMe],["__scopeId","data-v-86ea5319"]]),_Me={components:{MergeContact:gMe},props:{show:{type:Boolean,default:!1},primaryContact:{type:Object,required:!0}},emits:["close","update:show"],data(){return{isSearching:!1,searchResults:[]}},computed:{...St({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onClose(){this.$emit("close")},async onContactSearch(e){this.isSearching=!0,this.searchResults=[];try{const{data:{payload:t}}=await wi.search(e);this.searchResults=t.filter(n=>n.id!==this.primaryContact.id)}catch{_e(this.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"))}finally{this.isSearching=!1}},async onMergeContacts(e){nn(xi.MERGED_CONTACTS);try{await this.$store.dispatch("contacts/merge",{childId:this.primaryContact.id,parentId:e}),_e(this.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),this.onClose()}catch{_e(this.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"))}}}};function vMe(e,t,n,s,a,o){const l=z("woot-modal-header"),i=z("MergeContact"),r=z("woot-modal");return p(),V(r,{show:o.localShow,"onUpdate:show":t[0]||(t[0]=d=>o.localShow=d),"on-close":o.onClose},{default:K(()=>[v(l,{"header-title":e.$t("MERGE_CONTACTS.TITLE"),"header-content":e.$t("MERGE_CONTACTS.DESCRIPTION")},null,8,["header-title","header-content"]),v(i,{"primary-contact":n.primaryContact,"is-searching":a.isSearching,"is-merging":e.uiFlags.isMerging,"search-results":a.searchResults,onSearch:o.onContactSearch,onCancel:o.onClose,onSubmit:o.onMergeContacts},null,8,["primary-contact","is-searching","is-merging","search-results","onSearch","onCancel","onSubmit"])]),_:1},8,["show","on-close"])}const bMe=Fe(_Me,[["render",vMe]]),NE={"Channel::Email":1,"Channel::Whatsapp":2,"Channel::Sms":3,"Channel::TwilioSms":4,"Channel::WebWidget":5,"Channel::Api":6},KI=({name:e,email:t,channelType:n,phoneNumber:s})=>n===Ut.EMAIL?`${e} (${t})`:n===Ut.TWILIO||n===Ut.WHATSAPP?`${e} (${s})`:e,EMe=({name:e,id:t,email:n,channelType:s,phoneNumber:a,medium:o,...l})=>({id:t,icon:Ir(s,o,"line"),label:KI({name:e,email:n,channelType:s,phoneNumber:a}),action:"inbox",value:t,name:e,email:n,phoneNumber:a,channelType:s,...l}),TMe=(e,t)=>{const n=NE[e.channelType]||999,s=NE[t.channelType]||999;if(n!==s)return n-s;const a=e.name||"",o=t.name||"";return a.localeCompare(o)},AMe=e=>e?e.map(EMe).sort(TMe):[],yMe=e=>{var n;const t=((n=e.match(/^([^@]*)@/))==null?void 0:n[1])||e.split("@")[0];return t.charAt(0).toUpperCase()+t.slice(1)},zI=e=>e.map(t=>({...t.inbox,sourceId:t.sourceId})),OE=(e,t=[])=>!e||!e.length?[]:e.map(n=>{const s=t.find(a=>a.id===n.id)||{};return{...Sr(s,{deep:!0}),...n}}),SMe=(e,t)=>{const n=[];return e.forEach(s=>{t?n.push(s.blobSignedId):n.push(s.resource.file)}),n},IMe=({targetInbox:e,selectedContact:t,message:n,subject:s,ccEmails:a,bccEmails:o,currentUser:l,attachedFiles:i=[],directUploadsEnabled:r=!1})=>{const d={inboxId:e.id,sourceId:e.sourceId,contactId:Number(t.id),message:{content:n},assigneeId:l.id};return i!=null&&i.length&&(d.files=SMe(i,r)),s&&(d.mailSubject=s),a&&(d.message.cc_emails=a),o&&(d.message.bcc_emails=o),d},CMe=({targetInbox:e,selectedContact:t,message:n,templateParams:s,currentUser:a})=>({inboxId:e.id,sourceId:e.sourceId,contactId:t.id,message:{content:n,template_params:s},assigneeId:a.id}),xMe=({keys:e=["email"],query:t})=>({payload:e.map(n=>{const s={attribute_key:n,filter_operator:"contains",values:[t],attribute_model:"standard"};return e.findIndex(a=>a===n)!==e.length-1&&(s.query_operator="or"),s})}),NMe=async({keys:e,query:t})=>{const{data:{payload:n}}=await wi.filter(void 0,"name",xMe({keys:e,query:t})),s=Sr(n,{deep:!0});return(s==null?void 0:s.filter(o=>o.phoneNumber||o.email))||[]},OMe=async e=>{const t={name:e.startsWith("+")?e.slice(1):yMe(e),...e.startsWith("+")?{phone_number:e}:{email:e}},{data:{payload:{contact:n}}}=await wi.create(t);return Sr(n,{deep:!0})},wMe=async e=>{const{data:{payload:t=[]}}=await wi.getContactableInboxes(e),n=Sr(t,{deep:!0});return zI(n)},Rl={SINGLE:"single",MULTIPLE:"multiple"},Fa={EMAIL:"email",TEL:"tel",TEXT:"text"},jI=e=>{if(!e)return!0;try{return m3(e)}catch{return!1}},RMe=e=>{try{const t=p3(e);return{isValid:(t==null?void 0:t.isValid())||!1,formattedValue:(t==null?void 0:t.formatInternational())||e}}catch{return{isValid:!1,formattedValue:e}}},$Me=e=>({newTag:{...e===Fa.EMAIL?{email:Zl}:{},...e===Fa.TEL?{isValidPhone:jI}:{}}}),MMe=(e,t,n)=>e===Fa.TEL?!jI(t):n.$invalid,kMe=(e,t,n)=>{let s=!0,a=e;if(t===Fa.EMAIL)s=!n;else if(t===Fa.TEL){const{isValid:o,formattedValue:l}=RMe(e);s=o,a=l}return{isValid:s,formattedValue:a}},LMe=(e,t,n)=>({label:e,value:t,...n===Fa.EMAIL?{email:t}:{},...n===Fa.TEL?{phoneNumber:t}:{},thumbnail:{name:e,src:""},action:"create"}),DMe=({mode:e,tags:t,menuItems:n,newTag:s,isLoading:a,type:o,isNewTagInValidType:l})=>{if(e===Rl.SINGLE&&t.length>=1)return[];const i=n.filter(u=>!t.includes(u.label)),r=s==null?void 0:s.trim();if(r&&!t.includes(r)&&!a&&!i.length){const{isValid:u,formattedValue:m}=kMe(r,o,l);if(u)return[LMe(m,r,o)]}return i},PMe=(e,t)=>!(e===Rl.SINGLE&&t>=1),BMe=(e,t)=>e.find(n=>n.email===t),FMe={class:"relative flex items-center justify-between w-full gap-3 whitespace-nowrap"},UMe=["for"],GMe=["id","type","placeholder","disabled","onKeydown"],fd={__name:"InlineInput",props:yn({type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},customLabelClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},disabled:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!1}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:yn(["enterPress","input","blur","focus"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const s=e,a=n,o=jn(e,"modelValue"),l=F(null),i=()=>{a("enterPress")},r=m=>{a("input",m.target.value),o.value=m.target.value},d=m=>{a("blur",m.target.value)},u=m=>{a("focus",m.target.value)};return pt(()=>{jt(()=>{var m;s.focusOnMount&&((m=l.value)==null||m.focus())})}),t({focus:()=>{var m;return(m=l.value)==null?void 0:m.focus()}}),(m,h)=>(p(),f("div",FMe,[e.label?(p(),f("label",{key:0,for:e.id,class:re([e.customLabelClass,"mb-0.5 text-sm font-medium text-n-slate-12"])},E(e.label),11,UMe)):O("",!0),at(m.$slots,"prefix"),pe(c("input",{id:e.id,ref_key:"inlineInputRef",ref:l,"onUpdate:modelValue":h[0]||(h[0]=_=>o.value=_),type:e.type,placeholder:e.placeholder,disabled:e.disabled,class:re([e.customInputClass,"flex w-full reset-base text-sm h-6 !mb-0 border-0 rounded-none outline-none outline-0 bg-transparent dark:bg-transparent placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 dark:text-n-slate-12 transition-all duration-500 ease-in-out"]),onInput:r,onFocus:u,onBlur:d,onKeydown:Hn(ze(i,["prevent"]),["enter"])},null,42,GMe),[[qE,o.value]])]))}},VMe={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},HMe=["onClick"],WMe={key:0,class:"relative flex items-center gap-2 flex-1 min-w-[200px] w-full"},Zf={__name:"TagInput",props:yn({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},type:{type:String,default:Fa.TEXT},isLoading:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[],validator:e=>e.every(({action:t,value:n,label:s})=>t&&n&&s)},showDropdown:{type:Boolean,default:!1},mode:{type:String,default:Rl.MULTIPLE,validator:e=>[Rl.SINGLE,Rl.MULTIPLE].includes(e)},focusOnMount:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:yn(["update:modelValue","input","blur","focus","onClickOutside","add","remove"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,a=jn(e,"modelValue"),o=F(null),l=F(n.modelValue),i=F(""),r=F(!0),d=C(()=>$Me(n.type)),u=Lt(d,{newTag:i}),m=C(()=>MMe(n.type,i.value,u.value)),h=C(()=>n.mode===Rl.SINGLE?r.value&&!l.value.length:r.value||!l.value.length),_=C(()=>n.mode===Rl.SINGLE&&l.value.length>=1?!1:n.showDropdown),g=C(()=>DMe({mode:n.mode,tags:l.value,menuItems:n.menuItems,newTag:i.value,isLoading:n.isLoading,type:n.type,isNewTagInValidType:m.value})),T=H=>{const B=BMe(n.menuItems,H);return B?s("add",{value:H,...B}):s("add",{value:H,action:"create"})},S=H=>{var B;l.value.push(H),i.value="",a.value=l.value,(B=o.value)==null||B.focus()},b=async()=>{var B;const H=(B=i.value)==null?void 0:B.trim();if(H){if(!PMe(n.mode,l.value.length)){i.value="";return}if([Fa.EMAIL,Fa.TEL].includes(n.type)||n.allowCreate){if(!await u.value.$validate())return;T(H)}S(H)}},A=H=>{l.value.splice(H,1),a.value=l.value,s("remove")},y=async({email:H,phoneNumber:B,...k})=>{if(n.mode===Rl.SINGLE&&l.value.length>=1||!n.showDropdown)return;const U=n.type==="email";if(i.value=U?H:B,!await u.value.$validate())return;const G=U?{email:H,...k}:{phoneNumber:B,...k};s("add",G),S(H)},x=()=>{var H;s("focus"),(H=o.value)==null||H.focus(),r.value=!0},$=H=>{H.key===","&&(H.preventDefault(),b())},N=()=>{l.value.length&&(r.value=!1),s("onClickOutside")};ot(()=>n.modelValue,H=>{l.value=H}),ot(()=>i.value,async H=>{var B;n.type==="email"&&((B=H==null?void 0:H.trim())==null?void 0:B.length)>2&&await u.value.$validate()});const w=H=>s("input",H),D=H=>s("blur",H);return(H,B)=>pe((p(),f("div",{class:"flex flex-wrap w-full gap-2 border border-transparent focus:outline-none",tabindex:"0",onFocus:x,onClick:x},[(p(!0),f(fe,null,Ae(l.value,(k,U)=>(p(),f("div",{key:U,class:"flex items-center justify-center max-w-full gap-1 px-3 py-1 rounded-lg h-7 bg-n-alpha-2"},[c("span",VMe,E(k),1),c("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3.5 text-n-slate-11",onClick:ze(G=>A(U),["stop"])},null,8,HMe)]))),128)),h.value||_.value?(p(),f("div",WMe,[v(fd,{ref_key:"tagInputRef",ref:o,modelValue:i.value,"onUpdate:modelValue":B[0]||(B[0]=k=>i.value=k),placeholder:e.placeholder,disabled:e.disabled,class:"w-full","focus-on-mount":e.focusOnMount,"custom-input-class":`w-full ${m.value?"!text-n-ruby-9 dark:!text-n-ruby-9":""}`,onEnterPress:b,onFocus:x,onInput:w,onBlur:D,onKeydown:$},null,8,["modelValue","placeholder","disabled","focus-on-mount","custom-input-class"]),_.value?(p(),V(ua,{key:0,"menu-items":g.value,"is-searching":e.isLoading,class:"ltr:left-0 rtl:right-0 z-[100] top-8 overflow-y-auto max-h-60 w-[inherit] max-w-md dark:!outline-n-slate-5",onAction:y},null,8,["menu-items","is-searching"])):O("",!0)])):O("",!0)],32)),[[I(ca),()=>N()]])}},KMe={class:"relative flex-1 px-4 py-3 overflow-y-visible"},zMe={class:"flex items-baseline w-full gap-3 min-h-7"},jMe={class:"text-sm font-medium text-n-slate-11 whitespace-nowrap"},YMe={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 px-3 min-h-7 min-w-0"},XMe={class:"text-sm truncate text-n-slate-12"},qMe={class:"text-sm truncate text-n-slate-12"},Jd="COMPOSE_NEW_CONVERSATION.FORM.CONTACT_SELECTOR",ZMe={__name:"ContactSelector",props:{contacts:{type:Array,required:!0},selectedContact:{type:Object,default:null},showContactsDropdown:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},isCreatingContact:{type:Boolean,required:!0},contactId:{type:String,default:null},contactableInboxesList:{type:Array,default:()=>[]},showInboxesDropdown:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1}},emits:["searchContacts","setSelectedContact","clearSelectedContact","updateDropdown"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(Fa.EMAIL),l=C(()=>{var u;return(u=n.contacts)==null?void 0:u.map(({name:m,id:h,thumbnail:_,email:g,...T})=>({id:h,label:g?`${m} (${g})`:m,value:h,thumbnail:{name:m,src:_},...T,name:m,email:g,action:"contact"}))}),i=C(()=>{const{name:u,email:m="",phoneNumber:h=""}=n.selectedContact||{};return m?`${u} (${m})`:h?`${u} (${h})`:u||""}),r=C(()=>n.hasErrors?"[&_input]:placeholder:!text-n-ruby-9 [&_input]:dark:placeholder:!text-n-ruby-9":""),d=u=>{o.value=u.startsWith("+")?Fa.TEL:Fa.EMAIL,s("searchContacts",u)};return(u,m)=>{var h;return p(),f("div",KMe,[c("div",zMe,[c("label",jMe,E(I(a)(`${Jd}.LABEL`)),1),e.isCreatingContact?(p(),f("div",YMe,[c("span",XMe,E(I(a)(`${Jd}.CONTACT_CREATING`)),1)])):e.selectedContact?(p(),f("div",{key:1,class:re(["flex items-center gap-1.5 rounded-md bg-n-alpha-2 min-h-7 min-w-0",e.contactId?"px-3":"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1"])},[c("span",qMe,E(e.isCreatingContact?I(a)(`${Jd}.CONTACT_CREATING`):i.value),1),e.contactId?O("",!0):(p(),V(ce,{key:0,variant:"ghost",icon:"i-lucide-x",color:"slate",disabled:e.contactId,size:"xs",onClick:m[0]||(m[0]=_=>s("clearSelectedContact"))},null,8,["disabled"]))],2)):(p(),V(Zf,{key:2,placeholder:I(a)(`${Jd}.TAG_INPUT_PLACEHOLDER`),mode:"single","menu-items":l.value,"show-dropdown":e.showContactsDropdown,"is-loading":e.isLoading,disabled:((h=e.contactableInboxesList)==null?void 0:h.length)>0&&e.showInboxesDropdown,"allow-create":"",type:o.value,class:re(["flex-1 min-h-7",r.value]),"focus-on-mount":"",onInput:d,onOnClickOutside:m[1]||(m[1]=_=>s("updateDropdown","contacts",!1)),onAdd:m[2]||(m[2]=_=>s("setSelectedContact",_)),onRemove:m[3]||(m[3]=_=>s("clearSelectedContact"))},null,8,["placeholder","menu-items","show-dropdown","is-loading","disabled","type","class"]))])])}}},QMe={class:"flex items-center flex-1 w-full gap-3 px-4 py-3 overflow-y-visible"},JMe={class:"mb-0.5 text-sm font-medium text-n-slate-11 whitespace-nowrap"},eke={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 truncate ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 h-7 min-w-0"},tke={class:"text-sm truncate text-n-slate-12"},nke={key:1,class:"relative flex items-center h-7"},ske={__name:"InboxSelector",props:{targetInbox:{type:Object,default:null},selectedContact:{type:Object,default:null},showInboxesDropdown:{type:Boolean,required:!0},contactableInboxesList:{type:Array,default:()=>[]},hasErrors:{type:Boolean,default:!1}},emits:["updateInbox","toggleDropdown","handleInboxAction"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=C(()=>KI(n.targetInbox));return(l,i)=>{var r;return p(),f("div",QMe,[c("label",JMe,E(I(a)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.LABEL")),1),e.targetInbox?(p(),f("div",eke,[c("span",tke,E(o.value),1),v(ce,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"flex-shrink-0",onClick:i[0]||(i[0]=d=>s("updateInbox",null))})])):pe((p(),f("div",nke,[v(ce,{label:I(a)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.BUTTON"),variant:"link",size:"sm",color:e.hasErrors?"ruby":"slate",disabled:!e.selectedContact,class:"hover:!no-underline",onClick:i[1]||(i[1]=d=>s("toggleDropdown",!e.showInboxesDropdown))},null,8,["label","color","disabled"]),((r=e.contactableInboxesList)==null?void 0:r.length)>0&&e.showInboxesDropdown?(p(),V(ua,{key:0,"menu-items":e.contactableInboxesList,class:"ltr:left-0 rtl:right-0 z-[100] top-8 overflow-y-auto max-h-60 w-fit max-w-sm dark:!outline-n-slate-5",onAction:i[2]||(i[2]=d=>s("handleInboxAction",d))},null,8,["menu-items"])):O("",!0)])),[[I(ca),()=>s("toggleDropdown",!1)]])])}}},ake={class:"flex flex-col divide-y divide-n-strong"},oke={class:"flex items-baseline flex-1 w-full h-8 gap-3 px-4 py-3"},lke={class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},ike={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},rke={class:"flex items-center w-full gap-3 min-h-7"},cke={key:0,class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},dke={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},ui="COMPOSE_NEW_CONVERSATION.FORM.EMAIL_OPTIONS",uke={__name:"EmailOptions",props:yn({contacts:{type:Array,required:!0},showCcEmailsDropdown:{type:Boolean,required:!1},showBccEmailsDropdown:{type:Boolean,required:!1},isLoading:{type:Boolean,default:!1},hasErrors:{type:Boolean,default:!1}},{subject:{type:String,default:""},subjectModifiers:{},ccEmails:{type:String,default:""},ccEmailsModifiers:{},bccEmails:{type:String,default:""},bccEmailsModifiers:{}}),emits:yn(["searchCcEmails","searchBccEmails","updateDropdown"],["update:subject","update:ccEmails","update:bccEmails"]),setup(e,{emit:t}){const n=e,s=t,a=F(!1),o=()=>{a.value=!a.value},l=jn(e,"subject"),i=jn(e,"ccEmails"),r=jn(e,"bccEmails"),{t:d}=Pe(),u=C(()=>n.ccEmails?n.ccEmails.split(",").map(S=>S.trim()):[]),m=C(()=>n.bccEmails?n.bccEmails.split(",").map(S=>S.trim()):[]),h=C(()=>{var S;return(S=n.contacts)==null?void 0:S.map(({name:b,id:A,email:y})=>({id:A,label:y,email:y,thumbnail:{name:b,src:""},value:A,action:"email"}))}),_=S=>{i.value=S.join(",")},g=S=>{r.value=S.join(",")},T=C(()=>n.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"");return(S,b)=>(p(),f("div",ake,[c("div",oke,[v(fd,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=A=>l.value=A),placeholder:I(d)(`${ui}.SUBJECT_PLACEHOLDER`),label:I(d)(`${ui}.SUBJECT_LABEL`),"focus-on-mount":"","custom-input-class":T.value},null,8,["modelValue","placeholder","label","custom-input-class"])]),c("div",lke,[c("label",ike,E(I(d)(`${ui}.CC_LABEL`)),1),c("div",rke,[v(Zf,{"model-value":u.value,placeholder:I(d)(`${ui}.CC_PLACEHOLDER`),"menu-items":h.value,"show-dropdown":e.showCcEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7",onFocus:b[1]||(b[1]=A=>s("updateDropdown","cc",!0)),onInput:b[2]||(b[2]=A=>s("searchCcEmails",A)),onOnClickOutside:b[3]||(b[3]=A=>s("updateDropdown","cc",!1)),"onUpdate:modelValue":_},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"]),v(ce,{label:I(d)(`${ui}.BCC_BUTTON`),variant:"ghost",size:"sm",color:"slate",class:"flex-shrink-0",onClick:o},null,8,["label"])])]),a.value?(p(),f("div",cke,[c("label",dke,E(I(d)(`${ui}.BCC_LABEL`)),1),v(Zf,{"model-value":m.value,placeholder:I(d)(`${ui}.BCC_PLACEHOLDER`),"menu-items":h.value,"show-dropdown":e.showBccEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7","focus-on-mount":"",onFocus:b[4]||(b[4]=A=>s("updateDropdown","bcc",!0)),onInput:b[5]||(b[5]=A=>s("searchBccEmails",A)),onOnClickOutside:b[6]||(b[6]=A=>s("updateDropdown","bcc",!1)),"onUpdate:modelValue":g},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"])])):O("",!0)]))}},pke={__name:"MessageEditor",props:yn({isEmailOrWebWidgetInbox:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1},hasAttachments:{type:Boolean,default:!1},sendWithSignature:{type:Boolean,default:!1},messageSignature:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,{t:n}=Pe(),s=jn(e,"modelValue"),a=F({hasSlashCommand:!1,showMentions:!1,mentionSearchKey:""}),o=C(()=>Ti(t.messageSignature));ot(s,r=>{if(t.isEmailOrWebWidgetInbox)return;const d=r?Vo(r,o.value):"",u=d.startsWith("/");a.value={...a.value,hasSlashCommand:u,showMentions:u,mentionSearchKey:u?d.slice(1):""}},{immediate:!0});const l=()=>{a.value.showMentions=!1},i=async r=>{const d=t.sendWithSignature?kl(r,o.value):r;await jt(),s.value=d};return(r,d)=>{const u=_t("on-clickaway");return p(),f("div",{class:re(["flex-1 h-full",[!e.hasAttachments&&"min-h-[200px]"]])},[e.isEmailOrWebWidgetInbox?(p(),V(Ws,{key:0,modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=m=>s.value=m),placeholder:I(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:re(["[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 [&>div]:!bg-transparent h-full [&_.ProseMirror-woot-style]:!max-h-[200px]",e.hasErrors?"[&_.empty-node]:before:!text-n-ruby-9 [&_.empty-node]:dark:before:!text-n-ruby-9":""]),"enable-variables":"","show-character-count":!1},null,8,["modelValue","placeholder","class"])):(p(),V(wr,{key:1,modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=m=>s.value=m),placeholder:I(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:"!px-0 [&>div]:!px-4 [&>div]:!border-transparent [&>div]:!bg-transparent","custom-text-area-class":e.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"","auto-height":"","allow-signature":"",signature:e.messageSignature,"send-with-signature":e.sendWithSignature},{default:K(()=>[a.value.showMentions&&a.value.hasSlashCommand?pe((p(),V(qg,{key:0,class:"normal-editor__canned-box","search-key":a.value.mentionSearchKey,onReplace:i},null,8,["search-key"])),[[u,l]]):O("",!0)]),_:1},8,["modelValue","placeholder","custom-text-area-class","signature","send-with-signature"]))],2)}}},mke=({isATwilioSMSChannel:e,attachFile:t})=>{const{t:n}=Pe(),s=ke("getCurrentAccountId"),a=ke("getCurrentUser"),o=ke("getSelectedChat"),l=ke("globalConfig/get"),i=C(()=>e?lf:Nc),r=m=>{m&&(Ci(m,i.value)?new og.DirectUpload(m.file,`/api/v1/accounts/${s.value}/conversations/${o.value.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:_=>{_.setRequestHeader("api_access_token",a.value.access_token)}}).create((_,g)=>{_?_e(_):t({file:m,blob:g})}):_e(n("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:i.value})))},d=m=>{m&&(Ci(m,i.value)?t({file:m}):_e(n("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:i.value})))};return{onFileUpload:m=>{l.value.directUploadsEnabled?r(m):d(m)}}},hke={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},fke={class:"w-full"},gke={class:"flex gap-3 justify-between items-end w-full h-14"},_ke={__name:"WhatsappTemplate",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","back"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=l=>{n("sendMessage",l)},o=()=>{n("back")};return(l,i)=>(p(),f("div",hke,[c("div",fke,[v(z_,{template:e.template,onSendMessage:a,onBack:o},{actions:K(({sendMessage:r,goBack:d,disabled:u})=>[c("div",gke,[v(ce,{label:I(s)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.BACK"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:d},null,8,["label","onClick"]),v(ce,{label:I(s)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.SEND_MESSAGE"),class:"w-full font-medium",disabled:u,onClick:r},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])])]))}},vke={class:"relative"},bke={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},Eke={class:"relative w-full"},Tke=["placeholder"],Ake=["onClick"],yke={class:"text-sm text-n-slate-12"},Ske={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},Ike={key:0,class:"pt-2 w-full text-sm text-n-slate-11"},Cke={__name:"WhatsAppOptions",props:{inboxId:{type:Number,required:!0}},emits:["sendMessage"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=ke("inboxes/getFilteredWhatsAppTemplates"),l=F(""),i=F(null),r=F(!1),d=C(()=>o.value(n.inboxId)),u=C(()=>d.value.filter(S=>S.name.toLowerCase().includes(l.value.toLowerCase()))),m=S=>S.components.find(b=>b.type==="BODY").text,h=()=>{l.value="",r.value=!r.value},_=S=>{i.value=S,r.value=!1},g=()=>{i.value=null,r.value=!0},T=S=>{s("sendMessage",S),i.value=null};return(S,b)=>(p(),f("div",vke,[v(ce,{icon:"i-ri-whatsapp-line",label:I(a)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:i.value,class:"!text-xs font-medium",onClick:h},null,8,["label","disabled"]),r.value?(p(),f("div",bke,[c("div",Eke,[v(Wt,{icon:"i-lucide-search",class:"absolute size-3.5 top-2 ltr:left-3 rtl:right-3"}),pe(c("input",{"onUpdate:modelValue":b[0]||(b[0]=A=>l.value=A),type:"search",placeholder:I(a)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 ltr:pl-10 rtl:pr-10 ltr:pr-2 rtl:pl-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,Tke),[[mt,l.value]])]),(p(!0),f(fe,null,Ae(u.value,A=>(p(),f("div",{key:A.id,class:"flex flex-col gap-2 p-2 w-full rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:y=>_(A)},[c("span",yke,E(A.name),1),c("p",Ske,E(m(A)),1)],8,Ake))),128)),u.value.length===0?(p(),f("p",Ike,E(I(a)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.EMPTY_STATE")),1)):O("",!0)])):O("",!0),i.value?(p(),V(_ke,{key:1,template:i.value,onSendMessage:T,onBack:g},null,8,["template"])):O("",!0)]))}},xke={class:"flex items-center justify-between w-full h-[3.25rem] gap-2 px-4 py-3"},Nke={class:"flex gap-2 items-center"},Oke={key:1,class:"relative"},wke={class:"flex gap-2 items-center"},Rke={__name:"ActionButtons",props:{attachedFiles:{type:Array,default:()=>[]},isWhatsappInbox:{type:Boolean,default:!1},isEmailOrWebWidgetInbox:{type:Boolean,default:!1},isTwilioSmsInbox:{type:Boolean,default:!1},messageTemplates:{type:Array,default:()=>[]},channelType:{type:String,default:""},isLoading:{type:Boolean,default:!1},disableSendButton:{type:Boolean,default:!1},hasSelectedInbox:{type:Boolean,default:!1},hasNoInbox:{type:Boolean,default:!1},isDropdownActive:{type:Boolean,default:!1},messageSignature:{type:String,default:""},inboxId:{type:Number,default:null}},emits:["discard","sendMessage","sendWhatsappMessage","insertEmoji","addSignature","removeSignature","attachFile"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(null),l=F(!1),i=ng(()=>Va(()=>import("./EmojiInput-CHOuDIMs.js"),__vite__mapDeps([3,4,5,6,2,7,8,9,10,11,12,13,14,15]))),r=C(()=>n.isEmailOrWebWidgetInbox?n.messageSignature:Ti(n.messageSignature)),{fetchSignatureFlagFromUISettings:d,setSignatureFlagForInbox:u,isEditorHotKeyEnabled:m}=Sn(),h=C(()=>d(n.channelType)),_=()=>{r.value&&(h.value?s("addSignature",r.value):s("removeSignature",r.value))},g=()=>{u(n.channelType,!h.value),_()};ot(()=>n.hasSelectedInbox,y=>{jt(()=>{y&&n.isEmailOrWebWidgetInbox&&_()})},{immediate:!0});const T=y=>{s("insertEmoji",y)},{onFileUpload:S}=mke({isATwilioSMSChannel:n.isTwilioSmsInbox,attachFile:({blob:y,file:x})=>{if(!x)return;const $=new FileReader;$.readAsDataURL(x.file),$.onloadend=()=>{const N={resource:y||x,isPrivate:!1,thumb:$.result,blobSignedId:y==null?void 0:y.signed_id};s("attachFile",[...n.attachedFiles,N])}}}),b=C(()=>{const y=m("cmd_enter")?" + ":"";return a("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.SEND",{keyCode:y})});return Qs({Enter:{action:()=>{m("enter")&&!n.isWhatsappInbox&&!n.isDropdownActive&&s("sendMessage")}},"$mod+Enter":{action:()=>{m("cmd_enter")&&!n.isWhatsappInbox&&!n.isDropdownActive&&s("sendMessage")}}}),(y,x)=>(p(),f("div",xke,[c("div",Nke,[e.isWhatsappInbox?(p(),V(Cke,{key:0,"inbox-id":e.inboxId,"message-templates":e.messageTemplates,onSendMessage:x[0]||(x[0]=$=>s("sendWhatsappMessage",$))},null,8,["inbox-id","message-templates"])):O("",!0),!e.isWhatsappInbox&&!e.hasNoInbox?pe((p(),f("div",Oke,[v(ce,{icon:"i-lucide-smile-plus",color:"slate",size:"sm",class:"!w-10",onClick:x[1]||(x[1]=$=>l.value=!l.value)}),l.value?(p(),V(I(i),{key:0,class:"ltr:left-0 rtl:right-0 top-full mt-1.5","on-click":T})):O("",!0)])),[[I(ca),()=>l.value=!1]]):O("",!0),e.isEmailOrWebWidgetInbox?(p(),V(I(bu),{key:2,ref_key:"uploadAttachment",ref:o,"input-id":"composeNewConversationAttachment",size:4096*4096,accept:I(fu),multiple:"","drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},class:"p-px",onInputFile:I(S)},{default:K(()=>[v(ce,{icon:"i-lucide-plus",color:"slate",size:"sm",class:"!w-10 relative"})]),_:1},8,["accept","onInputFile"])):O("",!0),e.hasSelectedInbox&&!e.isWhatsappInbox?(p(),V(ce,{key:3,icon:"i-lucide-signature",color:"slate",size:"sm",class:"!w-10",onClick:g})):O("",!0)]),c("div",wke,[v(ce,{label:I(a)("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.DISCARD"),variant:"faded",color:"slate",size:"sm",class:"!text-xs font-medium",onClick:x[2]||(x[2]=$=>s("discard"))},null,8,["label"]),e.isWhatsappInbox?O("",!0):(p(),V(ce,{key:0,label:b.value,size:"sm",class:"!text-xs font-medium",disabled:e.isLoading||e.disableSendButton,"is-loading":e.isLoading,onClick:x[3]||(x[3]=$=>s("sendMessage"))},null,8,["label","disabled","is-loading"]))])]))}},$ke=Fe(Rke,[["__scopeId","data-v-322ccfb2"]]),Mke={},kke={class:"flex items-center w-full px-4 py-3 dark:bg-n-amber-11/15 bg-n-amber-3"},Lke={class:"text-sm dark:text-n-amber-11 text-n-amber-11"};function Dke(e,t){return p(),f("div",kke,[c("span",Lke,E(e.$t("COMPOSE_NEW_CONVERSATION.FORM.NO_INBOX_ALERT")),1)])}const Pke=Fe(Mke,[["render",Dke]]),Bke={class:"flex flex-col gap-4 p-4"},Fke={key:0,class:"flex flex-wrap gap-3"},Uke=["src"],Gke={key:1,class:"flex flex-wrap gap-3"},Vke={class:"text-sm font-medium text-n-slate-11"},Hke={__name:"AttachmentPreviews",props:{attachments:{type:Array,required:!0}},emits:["update:attachments"],setup(e,{emit:t}){const n=e,s=t,a=r=>(r.content_type||r.type).includes("image"),o=C(()=>n.attachments.filter(r=>a(r.resource))),l=C(()=>n.attachments.filter(r=>!a(r.resource))),i=r=>{const d=n.attachments.filter(u=>u.resource.id!==r);s("update:attachments",d)};return(r,d)=>(p(),f("div",Bke,[o.value.length>0?(p(),f("div",Fke,[(p(!0),f(fe,null,Ae(o.value,u=>(p(),f("div",{key:u.id,class:"relative group/image w-[4.5rem] h-[4.5rem]"},[c("img",{class:"object-cover w-[4.5rem] h-[4.5rem] rounded-lg",src:u.thumb},null,8,Uke),v(ce,{variant:"ghost",icon:"i-lucide-trash",color:"slate",class:"absolute top-1 ltr:right-1 rtl:left-1 !w-5 !h-5 transition-opacity duration-150 ease-in-out opacity-0 group-hover/image:opacity-100",onClick:m=>i(u.resource.id)},null,8,["onClick"])]))),128))])):O("",!0),l.value.length>0?(p(),f("div",Gke,[(p(!0),f(fe,null,Ae(l.value,u=>(p(),f("div",{key:u.id,class:"max-w-[18.75rem] inline-flex items-center h-8 min-w-0 bg-n-alpha-2 dark:bg-n-solid-3 rounded-lg gap-3 ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2"},[c("span",Vke,E(I(tN)(u.resource)),1),v(ce,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"shrink-0 !h-5 !w-5",onClick:m=>i(u.resource.id)},null,8,["onClick"])]))),128))])):O("",!0)]))}},Wke={class:"w-[42rem] divide-y divide-n-strong overflow-visible transition-all duration-300 ease-in-out top-full justify-between flex flex-col bg-n-alpha-3 border border-n-strong shadow-sm backdrop-blur-[100px] rounded-xl min-w-0"},Kke={__name:"ComposeNewConversationForm",props:{contacts:{type:Array,default:()=>[]},contactId:{type:String,default:null},selectedContact:{type:Object,default:null},targetInbox:{type:Object,default:null},currentUser:{type:Object,default:null},isCreatingContact:{type:Boolean,default:!1},isFetchingInboxes:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isDirectUploadsEnabled:{type:Boolean,default:!1},contactConversationsUiFlags:{type:Object,default:null},contactsUiFlags:{type:Object,default:null},messageSignature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1}},emits:["searchContacts","discard","updateSelectedContact","updateTargetInbox","clearSelectedContact","createConversation"],setup(e,{emit:t}){const n=e,s=t,a=F(!1),o=F(!1),l=F(!1),i=F(!1),r=C(()=>n.contactConversationsUiFlags.isCreating),d=os({message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),u=C(()=>{var Q,Z,j,X,q,se,he,be,ne;return{isEmail:((Q=n.targetInbox)==null?void 0:Q.channelType)===Ut.EMAIL,isTwilio:((Z=n.targetInbox)==null?void 0:Z.channelType)===Ut.TWILIO,isWhatsapp:((j=n.targetInbox)==null?void 0:j.channelType)===Ut.WHATSAPP,isWebWidget:((X=n.targetInbox)==null?void 0:X.channelType)===Ut.WEB,isApi:((q=n.targetInbox)==null?void 0:q.channelType)===Ut.API,isEmailOrWebWidget:((se=n.targetInbox)==null?void 0:se.channelType)===Ut.EMAIL||((he=n.targetInbox)==null?void 0:he.channelType)===Ut.WEB,isTwilioSMS:((be=n.targetInbox)==null?void 0:be.channelType)===Ut.TWILIO&&((ne=n.targetInbox)==null?void 0:ne.medium)==="sms"}}),m=C(()=>{var Q;return Object.keys(((Q=n.targetInbox)==null?void 0:Q.messageTemplates)||{}).length?n.targetInbox.messageTemplates:[]}),h=C(()=>{var Q;return((Q=n.targetInbox)==null?void 0:Q.channelType)||""}),_=C(()=>({selectedContact:{required:lt},targetInbox:{required:lt},message:{required:rf(!u.value.isWhatsapp)},subject:{required:rf(u.value.isEmail)}})),g=Lt(_,{selectedContact:C(()=>n.selectedContact),targetInbox:C(()=>n.targetInbox),message:C(()=>d.message),subject:C(()=>d.subject)}),T=C(()=>({isContactInvalid:g.value.selectedContact.$dirty&&g.value.selectedContact.$invalid,isInboxInvalid:g.value.targetInbox.$dirty&&g.value.targetInbox.$invalid,isSubjectInvalid:g.value.subject.$dirty&&g.value.subject.$invalid,isMessageInvalid:g.value.message.$dirty&&g.value.message.$invalid})),S=()=>{const{message:Q,subject:Z,ccEmails:j,bccEmails:X,attachedFiles:q}=d;return IMe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:Q,subject:Z,ccEmails:j,bccEmails:X,currentUser:n.currentUser,attachedFiles:q,directUploadsEnabled:n.isDirectUploadsEnabled})},b=C(()=>{var Q;return AMe((Q=n.selectedContact)==null?void 0:Q.contactInboxes)}),A=C(()=>n.selectedContact&&b.value.length===0&&!n.contactsUiFlags.isFetchingInboxes&&!n.isFetchingInboxes),y=C(()=>a.value||o.value||l.value||i.value),x=Q=>{a.value=!0,s("searchContacts",{keys:["email","phone_number","name"],query:Q})},$=(Q,Z)=>{Q==="cc"?l.value=Z:Q==="bcc"?i.value=Z:a.value=Z},N=Q=>{l.value=!0,s("searchContacts",{keys:["email"],query:Q})},w=Q=>{i.value=!0,s("searchContacts",{keys:["email"],query:Q})},D=async({value:Q,action:Z,...j})=>{g.value.$reset(),s("updateSelectedContact",{value:Q,action:Z,...j}),a.value=!1,o.value=!0},H=({value:Q,action:Z,...j})=>{g.value.$reset(),s("updateTargetInbox",{...j}),o.value=!1,d.attachedFiles=[]},B=Q=>{if(g.value.$reset(),n.sendWithSignature){const Z=u.value.isEmailOrWebWidget?n.messageSignature:Ti(n.messageSignature);d.message=Vo(d.message,Z)}s("updateTargetInbox",Q),d.attachedFiles=[]},k=()=>{s("clearSelectedContact"),d.attachedFiles=[]},U=Q=>{d.message+=Q},G=Q=>{d.message=kl(d.message,Q)},L=Q=>{d.message=Vo(d.message,Q)},M=Q=>{d.attachedFiles=Q},R=()=>{Object.assign(d,{message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),g.value.$reset()},P=async()=>{if(await g.value.$validate())try{await s("createConversation",{payload:S(),isFromWhatsApp:!1})&&R()}catch{}},W=async({message:Q,templateParams:Z})=>{const j=CMe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:Q,templateParams:Z,currentUser:n.currentUser});await s("createConversation",{payload:j,isFromWhatsApp:!0})};return(Q,Z)=>{var j;return p(),f("div",Wke,[v(ZMe,{contacts:e.contacts,"selected-contact":e.selectedContact,"show-contacts-dropdown":a.value,"is-loading":e.isLoading,"is-creating-contact":e.isCreatingContact,"contact-id":e.contactId,"contactable-inboxes-list":b.value,"show-inboxes-dropdown":o.value,"has-errors":T.value.isContactInvalid,onSearchContacts:x,onSetSelectedContact:D,onClearSelectedContact:k,onUpdateDropdown:$},null,8,["contacts","selected-contact","show-contacts-dropdown","is-loading","is-creating-contact","contact-id","contactable-inboxes-list","show-inboxes-dropdown","has-errors"]),A.value?(p(),V(Pke,{key:0})):(p(),V(ske,{key:1,"target-inbox":e.targetInbox,"selected-contact":e.selectedContact,"show-inboxes-dropdown":o.value,"contactable-inboxes-list":b.value,"has-errors":T.value.isInboxInvalid,onUpdateInbox:B,onToggleDropdown:Z[0]||(Z[0]=X=>o.value=X),onHandleInboxAction:H},null,8,["target-inbox","selected-contact","show-inboxes-dropdown","contactable-inboxes-list","has-errors"])),u.value.isEmail?(p(),V(uke,{key:2,"cc-emails":d.ccEmails,"onUpdate:ccEmails":Z[1]||(Z[1]=X=>d.ccEmails=X),"bcc-emails":d.bccEmails,"onUpdate:bccEmails":Z[2]||(Z[2]=X=>d.bccEmails=X),subject:d.subject,"onUpdate:subject":Z[3]||(Z[3]=X=>d.subject=X),contacts:e.contacts,"show-cc-emails-dropdown":l.value,"show-bcc-emails-dropdown":i.value,"is-loading":e.isLoading,"has-errors":T.value.isSubjectInvalid,onSearchCcEmails:N,onSearchBccEmails:w,onUpdateDropdown:$},null,8,["cc-emails","bcc-emails","subject","contacts","show-cc-emails-dropdown","show-bcc-emails-dropdown","is-loading","has-errors"])):O("",!0),!u.value.isWhatsapp&&!A.value?(p(),V(pke,{key:3,modelValue:d.message,"onUpdate:modelValue":Z[4]||(Z[4]=X=>d.message=X),"message-signature":e.messageSignature,"send-with-signature":e.sendWithSignature,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"has-errors":T.value.isMessageInvalid,"has-attachments":d.attachedFiles.length>0},null,8,["modelValue","message-signature","send-with-signature","is-email-or-web-widget-inbox","has-errors","has-attachments"])):O("",!0),d.attachedFiles.length>0?(p(),V(Hke,{key:4,attachments:d.attachedFiles,"onUpdate:attachments":Z[5]||(Z[5]=X=>d.attachedFiles=X)},null,8,["attachments"])):O("",!0),v($ke,{"attached-files":d.attachedFiles,"is-whatsapp-inbox":u.value.isWhatsapp,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"is-twilio-sms-inbox":u.value.isTwilioSMS,"message-templates":m.value,"channel-type":h.value,"is-loading":r.value,"disable-send-button":r.value,"has-selected-inbox":!!e.targetInbox,"inbox-id":(j=e.targetInbox)==null?void 0:j.id,"has-no-inbox":A.value,"is-dropdown-active":y.value,"message-signature":e.messageSignature,onInsertEmoji:U,onAddSignature:G,onRemoveSignature:L,onAttachFile:M,onDiscard:Z[6]||(Z[6]=X=>Q.$emit("discard")),onSendMessage:P,onSendWhatsappMessage:W},null,8,["attached-files","is-whatsapp-inbox","is-email-or-web-widget-inbox","is-twilio-sms-inbox","message-templates","channel-type","is-loading","disable-send-button","has-selected-inbox","inbox-id","has-no-inbox","is-dropdown-active","message-signature"])])}}},Kp={__name:"ComposeConversation",props:{alignPosition:{type:String,default:"left"},contactId:{type:String,default:null},isModal:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,a=yt(),{t:o}=Pe(),{width:l}=Mi(),{fetchSignatureFlagFromUISettings:i}=Sn(),r=C(()=>l.value<Pt.SMALL_SCREEN_BREAKPOINT),d=C(()=>n.isModal||r.value),u=F([]),m=F(null),h=F(null),_=F(!1),g=F(!1),T=F(!1),S=F(!1),b=ke("contacts/getContactById"),A=ke("contacts/getUIFlags"),y=ke("getCurrentUser"),x=ke("globalConfig/get"),$=ke("contactConversations/getUIFlags"),N=ke("getMessageSignature"),w=ke("inboxes/getInboxes"),D=C(()=>{var q;return i((q=h.value)==null?void 0:q.channelType)}),H=C(()=>x.value.directUploadsEnabled),B=C(()=>b.value(n.contactId)),k=C(()=>d.value?"":n.alignPosition==="right"?"absolute ltr:left-0 ltr:right-[unset] rtl:right-0 rtl:left-[unset]":"absolute rtl:left-0 rtl:right-[unset] ltr:right-0 ltr:left-[unset]"),U=ml(async q=>{T.value=!0,u.value=[];try{u.value=await NMe(q),T.value=!1}catch{_e(o("COMPOSE_NEW_CONVERSATION.CONTACT_SEARCH.ERROR_MESSAGE"))}finally{T.value=!1}},300,!1),G=()=>{u.value=[]},L=async({value:q,action:se,...he})=>{let be;if(se==="create"){_.value=!0;try{be=await OMe(q),_.value=!1}catch{_.value=!1;return}}else be=he;if(m.value=be,be!=null&&be.id){g.value=!0;try{const ne=await wMe(be.id);m.value.contactInboxes=OE(ne,w.value),g.value=!1}catch{g.value=!1}}},M=q=>{h.value=q,G()},R=()=>{m.value=null,h.value=null},P=()=>{S.value=!1,n.contactId||(m.value=null),h.value=null,G(),s("close")},W=async({payload:q,isFromWhatsApp:se})=>{try{const he=await a.dispatch("contactConversations/create",{params:q,isFromWhatsApp:se}),be={type:"link",to:`/app/accounts/${he.account_id}/conversations/${he.id}`,message:o("COMPOSE_NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")};return P(),_e(o("COMPOSE_NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),be),!0}catch(he){return _e(he instanceof Zc?he.data:o("COMPOSE_NEW_CONVERSATION.FORM.ERROR_MESSAGE")),!1}},Q=()=>{S.value=!S.value};ot(B,(q,se)=>{if(q&&n.contactId){(q==null?void 0:q.id)!==(se==null?void 0:se.id)&&R();const he=zI(q.contactInboxes||[]);m.value={...q,contactInboxes:OE(he,w.value)}}},{immediate:!0,deep:!0});const Z=()=>{S.value&&(S.value=!1,s("close"))},j=()=>{d.value&&Z()};return pt(()=>G()),Qs({Escape:{action:()=>{S.value&&(S.value=!1)}}}),(q,se)=>pe((p(),f("div",{class:re(["relative",{"z-50":S.value&&!d.value}])},[at(q.$slots,"trigger",{isOpen:S.value,toggle:Q}),S.value?(p(),f("div",{key:0,class:re({"fixed z-50 bg-n-alpha-black1 backdrop-blur-[4px] flex items-start pt-[clamp(3rem,15vh,12rem)] justify-center inset-0":d.value}),onClick:ze(j,["self"])},[v(Kke,{class:re([{"mt-2":!d.value},k.value]),contacts:u.value,"contact-id":e.contactId,"is-loading":T.value,"current-user":I(y),"selected-contact":m.value,"target-inbox":h.value,"is-creating-contact":_.value,"is-fetching-inboxes":g.value,"is-direct-uploads-enabled":H.value,"contact-conversations-ui-flags":I($),"contacts-ui-flags":I(A),"message-signature":I(N),"send-with-signature":D.value,onSearchContacts:I(U),onResetContactSearch:G,onUpdateSelectedContact:L,onUpdateTargetInbox:M,onClearSelectedContact:R,onCreateConversation:W,onDiscard:P},null,8,["class","contacts","contact-id","is-loading","current-user","selected-contact","target-inbox","is-creating-contact","is-fetching-inboxes","is-direct-uploads-enabled","contact-conversations-ui-flags","contacts-ui-flags","message-signature","send-with-signature","onSearchContacts"])],2)):O("",!0)],2)),[[I(ca),[Z,{ignore:["div.ProseMirror-prompt"]}]]])}},zke={components:{NextButton:ce,ContactInfoRow:g$e,EditContact:W$e,Avatar:Ft,ComposeConversation:Kp,SocialIcons:T$e,ContactMergeModal:bMe},props:{contact:{type:Object,default:()=>({})},showAvatar:{type:Boolean,default:!0}},emits:["panelClose"],setup(){const{isAdmin:e}=io();return{isAdmin:e}},data(){return{showEditModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:{...St({uiFlags:"contacts/getUIFlags"}),contactProfileLink(){return`/app/accounts/${this.$route.params.accountId}/contacts/${this.contact.id}`},additionalAttributes(){return this.contact.additional_attributes||{}},location(){const{country:e="",city:t="",country_code:n}=this.additionalAttributes,s=[t,e].filter(a=>!!a).join(", ");return s?this.findCountryFlag(n,s):""},socialProfiles(){const{social_profiles:e,screen_name:t,social_telegram_user_name:n}=this.additionalAttributes;return{twitter:t,telegram:n,...e||{}}},confirmDeleteMessage(){return` ${this.contact.name}?`}},watch:{"contact.id":{handler(e){this.$store.dispatch("contacts/fetchContactableInbox",e)},immediate:!0}},methods:{dynamicTime:Ds,toggleEditModal(){this.showEditModal=!this.showEditModal},openComposeConversationModal(e){e(),It.emit(xn.NEW_CONVERSATION_MODAL,!0)},closeComposeConversationModal(){It.emit(xn.NEW_CONVERSATION_MODAL,!1)},toggleDeleteModal(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion(){this.deleteContact(this.contact),this.closeDelete()},closeDelete(){this.showDeleteModal=!1,this.showEditModal=!1},findCountryFlag(e,t){try{if(!e)return`${t} `;const n=e==null?void 0:e.toLowerCase();return`${t} <span class="fi fi-${n} size-3.5"></span>`}catch{return""}},async deleteContact({id:e}){try{await this.$store.dispatch("contacts/delete",e),this.$emit("panelClose"),_e(this.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),Pg(this.$route.name)?this.$router.push({name:RD(this.$route.name)}):Bg(this.$route.name)?this.$router.push({name:"inbox_view"}):this.$route.name!=="contacts_dashboard"&&this.$router.push({name:"contacts_dashboard"})}catch(t){_e(t.message?t.message:this.$t("DELETE_CONTACT.API.ERROR_MESSAGE"))}},closeMergeModal(){this.showMergeModal=!1},openMergeModal(){this.showMergeModal=!0}}},jke={class:"relative items-center w-full p-4"},Yke={class:"flex flex-col w-full gap-2 text-left rtl:text-right"},Xke={class:"flex flex-row justify-between"},qke={class:"flex flex-col items-start gap-1.5 min-w-0 w-full"},Zke={key:0,class:"flex items-center w-full min-w-0 gap-3"},Qke={class:"flex-shrink max-w-full min-w-0 my-0 text-base capitalize break-words text-n-slate-12"},Jke={class:"flex flex-row items-center gap-2"},e3e={key:0,class:"i-lucide-info text-sm text-n-slate-10"},t3e=["href"],n3e={key:1,class:"break-words mb-0.5"},s3e={class:"flex flex-col items-start w-full gap-2"},a3e={class:"flex items-center w-full mt-0.5 gap-2"};function o3e(e,t,n,s,a,o){const l=z("Avatar"),i=z("ContactInfoRow"),r=z("SocialIcons"),d=z("NextButton"),u=z("ComposeConversation"),m=z("EditContact"),h=z("ContactMergeModal"),_=z("woot-delete-modal"),g=_t("tooltip");return p(),f("div",jke,[c("div",Yke,[c("div",Xke,[n.showAvatar?(p(),V(l,{key:0,src:n.contact.thumbnail,name:n.contact.name,status:n.contact.availability_status,size:48,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"])):O("",!0)]),c("div",qke,[n.showAvatar?(p(),f("div",Zke,[c("h3",Qke,E(n.contact.name),1),c("div",Jke,[n.contact.created_at?pe((p(),f("span",e3e,null,512)),[[g,`${e.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${o.dynamicTime(n.contact.created_at)}`,void 0,{left:!0}]]):O("",!0),c("a",{href:o.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer",class:"leading-3"},t[1]||(t[1]=[c("span",{class:"i-lucide-external-link text-sm text-n-slate-10"},null,-1)]),8,t3e)])])):O("",!0),o.additionalAttributes.description?(p(),f("p",n3e,E(o.additionalAttributes.description),1)):O("",!0),c("div",s3e,[v(i,{href:n.contact.email?`mailto:${n.contact.email}`:"",value:n.contact.email,icon:"mail",emoji:"",title:e.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""},null,8,["href","value","title"]),v(i,{href:n.contact.phone_number?`tel:${n.contact.phone_number}`:"",value:n.contact.phone_number,icon:"call",emoji:"",title:e.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""},null,8,["href","value","title"]),n.contact.identifier?(p(),V(i,{key:0,value:n.contact.identifier,icon:"contact-identify",emoji:"",title:e.$t("CONTACT_PANEL.IDENTIFIER")},null,8,["value","title"])):O("",!0),v(i,{value:o.additionalAttributes.company_name,icon:"building-bank",emoji:"",title:e.$t("CONTACT_PANEL.COMPANY")},null,8,["value","title"]),o.location||o.additionalAttributes.location?(p(),V(i,{key:1,value:o.location||o.additionalAttributes.location,icon:"map",emoji:"",title:e.$t("CONTACT_PANEL.LOCATION")},null,8,["value","title"])):O("",!0),v(r,{"social-profiles":o.socialProfiles},null,8,["social-profiles"])])]),c("div",a3e,[v(u,{"contact-id":String(n.contact.id),"is-modal":"",onClose:o.closeComposeConversationModal},{trigger:K(({toggle:T})=>[pe(v(d,{icon:"i-ph-chat-circle-dots",slate:"",faded:"",sm:"",onClick:S=>o.openComposeConversationModal(T)},null,8,["onClick"]),[[g,e.$t("CONTACT_PANEL.NEW_MESSAGE"),void 0,{"top-end":!0}]])]),_:1},8,["contact-id","onClose"]),pe(v(d,{icon:"i-ph-pencil-simple",slate:"",faded:"",sm:"",onClick:o.toggleEditModal},null,8,["onClick"]),[[g,e.$t("EDIT_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]),pe(v(d,{icon:"i-ph-arrows-merge",slate:"",faded:"",sm:"",disabled:e.uiFlags.isMerging,onClick:o.openMergeModal},null,8,["disabled","onClick"]),[[g,e.$t("CONTACT_PANEL.MERGE_CONTACT"),void 0,{"top-end":!0}]]),s.isAdmin?pe((p(),V(d,{key:0,icon:"i-ph-trash",slate:"",faded:"",sm:"",ruby:"",disabled:e.uiFlags.isDeleting,onClick:o.toggleDeleteModal},null,8,["disabled","onClick"])),[[g,e.$t("DELETE_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]):O("",!0)]),a.showEditModal?(p(),V(m,{key:0,show:a.showEditModal,contact:n.contact,onCancel:o.toggleEditModal},null,8,["show","contact","onCancel"])):O("",!0),a.showMergeModal?(p(),V(h,{key:1,"primary-contact":n.contact,show:a.showMergeModal,onClose:o.closeMergeModal},null,8,["primary-contact","show","onClose"])):O("",!0)]),a.showDeleteModal?(p(),V(_,{key:0,show:a.showDeleteModal,"onUpdate:show":t[0]||(t[0]=T=>a.showDeleteModal=T),"on-close":o.closeDelete,"on-confirm":o.confirmDeletion,title:e.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:e.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":o.confirmDeleteMessage,"confirm-text":e.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":e.$t("DELETE_CONTACT.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):O("",!0)])}const l3e=Fe(zke,[["render",o3e]]),i3e={class:"flex flex-col gap-2 border-b border-n-strong group/note"},r3e={class:"flex items-center justify-between gap-2"},c3e={class:"flex items-center gap-1.5 min-w-0"},d3e={class:"min-w-0 truncate"},u3e={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},p3e={class:"font-medium text-n-slate-12"},m3e={class:"font-medium text-n-slate-12"},h3e={key:0},YI={__name:"ContactNoteItem",props:{note:{type:Object,required:!0},writtenBy:{type:String,required:!0},allowDelete:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=e,s=t,a=Ks("noteContentRef"),o=F(!1),[l,i]=Xn(),{t:r}=Pe(),{formatMessage:d}=$a(),u=()=>{s("delete",n.note.id)};return pt(()=>{var m;n.collapsible&&(o.value=((m=a.value)==null?void 0:m.clientHeight)>91)}),(m,h)=>{var g,T,S,b,A,y;const _=_t("dompurify-html");return p(),f("div",i3e,[c("div",r3e,[c("div",c3e,[v(Ft,{name:((T=(g=e.note)==null?void 0:g.user)==null?void 0:T.name)||"Bot",src:(b=(S=e.note)==null?void 0:S.user)!=null&&b.name?(y=(A=e.note)==null?void 0:A.user)==null?void 0:y.thumbnail:"/assets/images/chatwoot_bot.png",size:16,"rounded-full":""},null,8,["name","src"]),c("div",d3e,[c("span",u3e,[c("span",p3e,E(e.writtenBy),1),Ee(" "+E(I(r)("CONTACTS_LAYOUT.SIDEBAR.NOTES.WROTE"))+" ",1),c("span",m3e,E(I(Ds)(e.note.createdAt)),1)])])]),e.allowDelete?(p(),V(ce,{key:0,variant:"faded",color:"ruby",size:"xs",icon:"i-lucide-trash",class:"opacity-0 group-hover/note:opacity-100",onClick:u})):O("",!0)]),pe(c("p",{ref_key:"noteContentRef",ref:a,class:re(["mb-0 prose-sm prose-p:text-sm prose-p:leading-relaxed prose-p:mb-1 prose-p:mt-0 prose-ul:mb-1 prose-ul:mt-0 text-n-slate-12",{"line-clamp-4":e.collapsible&&!I(l)&&o.value}])},null,2),[[_,I(d)(e.note.content||"")]]),e.collapsible&&o.value?(p(),f("p",h3e,[v(ce,{variant:"faded",color:"blue",size:"xs",icon:I(l)?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:h[0]||(h[0]=()=>I(i)())},{default:K(()=>[I(l)?(p(),f(fe,{key:0},[Ee(E(I(r)("CONTACTS_LAYOUT.SIDEBAR.NOTES.COLLAPSE")),1)],64)):(p(),f(fe,{key:1},[Ee(E(I(r)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EXPAND")),1)],64))]),_:1},8,["icon"])])):O("",!0)])}}},f3e={key:0,class:"p-8 grid place-content-center"},g3e={key:1,class:"p-8 grid place-content-center"},_3e={class:"text-center"},v3e={key:2,class:"max-h-[300px] overflow-scroll"},b3e={__name:"ContactNotes",props:{contactId:{type:String,required:!0}},setup(e){const{t}=Pe(),n=yt(),s=ke("getCurrentUser"),a=ke("contactNotes/getUIFlags"),o=C(()=>a.value.isFetching),l=ke("contactNotes/getAllNotesByContactId"),i=C(()=>l.value(e.contactId)),r=({user:d}={})=>{var m;const u=(m=s.value)==null?void 0:m.id;return(d==null?void 0:d.id)===u?t("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):(d==null?void 0:d.name)||t("CONVERSATION.BOT")};return ot(()=>e.contactId,()=>n.dispatch("contactNotes/get",{contactId:e.contactId}),{immediate:!0}),(d,u)=>o.value?(p(),f("div",f3e,[v(qn)])):i.value.length?(p(),f("div",v3e,[(p(!0),f(fe,null,Ae(i.value,m=>(p(),V(YI,{key:m.id,class:"p-4 last-of-type:border-b-0",note:m,collapsible:"","written-by":r(m)},null,8,["note","written-by"]))),128))])):(p(),f("div",g3e,[c("p",_3e,E(I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.NO_NOTES")),1)]))}},E3e={class:"relative group w-[inherit] whitespace-normal z-20"},T3e={class:"bg-n-background w-fit ltr:left-4 rtl:right-4 top-0 border p-2.5 group-hover:flex items-center hidden absolute border-n-weak rounded-lg shadow-md"},A3e={class:"text-n-slate-12 mb-0 text-xs"},y3e={__name:"HelperTextPopup",props:{message:{type:String,default:""}},setup(e){return(t,n)=>{const s=z("fluent-icon");return p(),f("div",E3e,[v(s,{icon:"info",size:"14",class:"mt-0.5 text-n-slate-11 absolute"}),c("div",T3e,[c("p",A3e,E(e.message),1)])])}}},S3e="yyyy-MM-dd",I3e={components:{MultiselectDropdown:WI,HelperTextPopup:y3e,NextButton:ce},props:{label:{type:String,required:!0},description:{type:String,default:""},values:{type:Array,default:()=>[]},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeRegex:{type:String,default:null},regexCue:{type:String,default:null},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},emits:["update","delete","copy"],setup(){return{v$:Lt()}},data(){return{isEditing:!1,editedValue:null}},computed:{displayValue(){return this.isAttributeTypeDate?this.value?new Date(this.value||new Date).toLocaleDateString():"---":this.isAttributeTypeCheckbox?this.value==="false"?!1:this.value:this.hasValue?this.value:"---"},formattedValue(){return this.isAttributeTypeDate?ts(this.value?new Date(this.value):new Date,S3e):this.value},listOptions(){return this.values.map((e,t)=>({id:t+1,name:e}))},selectedItem(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox(){return this.attributeType==="checkbox"},isAttributeTypeList(){return this.attributeType==="list"},isAttributeTypeLink(){return this.attributeType==="link"},isAttributeTypeDate(){return this.attributeType==="date"},hasValue(){return this.value!==null&&this.value!==""},urlValue(){return uf(this.value)?this.value:"---"},hrefURL(){return uf(this.value)?this.value:""},notAttributeTypeCheckboxAndList(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage(){return this.v$.editedValue.$error},errorMessage(){return this.v$.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.v$.editedValue.regexValidation?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED"):this.regexCue?this.regexCue:this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_INPUT")}},watch:{value(){this.isEditing=!1,this.editedValue=this.formattedValue},contactId(){this.v$.$reset()}},validations(){return this.isAttributeTypeLink?{editedValue:{required:lt,url:Xc}}:{editedValue:{required:lt,regexValidation:e=>!(this.attributeRegex&&!dg(this.attributeRegex).test(e))}}},mounted(){this.editedValue=this.formattedValue,It.on(xn.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},unmounted(){It.off(xn.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute(e){this.attributeKey===e&&this.onEdit()},focusInput(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onClickAway(){this.v$.$reset(),this.isEditing=!1},onEdit(){this.isEditing=!0,this.$nextTick(()=>{this.focusInput()})},onUpdateListValue(e){e&&(this.editedValue=e.name,this.onUpdate())},onUpdate(){const e=this.attributeType==="date"?bA(this.editedValue):this.editedValue;this.v$.$touch(),!this.v$.$invalid&&(this.isEditing=!1,this.$emit("update",this.attributeKey,e))},onDelete(){this.isEditing=!1,this.v$.$reset(),this.$emit("delete",this.attributeKey)},onCopy(){this.$emit("copy",this.value)}}},C3e={class:"px-4 py-3"},x3e={class:"flex items-center mb-1"},N3e={class:"flex items-center w-full m-0 text-sm error"},O3e={key:0,class:"flex items-center"},w3e={class:"flex items-center justify-between w-full"},R3e={key:0},$3e={key:0},M3e={class:"flex items-center w-full mb-2"},k3e=["type"],L3e={key:0,class:"block w-full -mt-px text-sm font-normal text-n-ruby-11"},D3e=["href"],P3e={key:1,class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},B3e={class:"flex items-center max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},F3e={key:1};function U3e(e,t,n,s,a,o){const l=z("HelperTextPopup"),i=z("NextButton"),r=z("MultiselectDropdown"),d=_t("tooltip"),u=_t("on-clickaway");return p(),f("div",C3e,[c("div",x3e,[c("h4",N3e,[o.isAttributeTypeCheckbox?(p(),f("div",O3e,[pe(c("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>a.editedValue=m),class:"!my-0 ltr:mr-2 ltr:ml-0 rtl:mr-0 rtl:ml-2",type:"checkbox",onChange:t[1]||(t[1]=(...m)=>o.onUpdate&&o.onUpdate(...m))},null,544),[[Xt,a.editedValue]])])):O("",!0),c("div",w3e,[c("span",{class:re(["w-full inline-flex gap-1.5 items-start font-medium whitespace-nowrap text-sm mb-0",s.v$.editedValue.$error?"text-n-ruby-11":"text-n-slate-12"])},[Ee(E(n.label)+" ",1),n.description?(p(),V(l,{key:0,message:n.description,class:"mt-0.5"},null,8,["message"])):O("",!0)],2),n.showActions&&o.hasValue?pe((p(),V(i,{key:0,slate:"",sm:"",link:"",icon:"i-lucide-trash-2",onClick:o.onDelete},null,8,["onClick"])),[[d,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),void 0,{left:!0}]]):O("",!0)])])]),o.notAttributeTypeCheckboxAndList?(p(),f("div",R3e,[a.isEditing?pe((p(),f("div",$3e,[c("div",M3e,[pe(c("input",{ref:"inputfield","onUpdate:modelValue":t[2]||(t[2]=m=>a.editedValue=m),type:o.inputType,class:re(["!h-8 ltr:!rounded-r-none rtl:!rounded-l-none !mb-0 !text-sm",{error:s.v$.editedValue.$error}]),autofocus:"true",onBlur:t[3]||(t[3]=(...m)=>s.v$.editedValue.$touch&&s.v$.editedValue.$touch(...m)),onKeyup:t[4]||(t[4]=Hn((...m)=>o.onUpdate&&o.onUpdate(...m),["enter"]))},null,42,k3e),[[qE,a.editedValue]]),c("div",null,[v(i,{sm:"",icon:"i-lucide-check",class:"ltr:rounded-l-none rtl:rounded-r-none h-[34px]",onClick:o.onUpdate},null,8,["onClick"])])]),o.shouldShowErrorMessage?(p(),f("span",L3e,E(o.errorMessage),1)):O("",!0)])),[[u,o.onClickAway]]):O("",!0),pe(c("div",{class:re(["flex group",{"is-editable":n.showActions}])},[o.isAttributeTypeLink?(p(),f("a",{key:0,href:o.hrefURL,target:"_blank",rel:"noopener noreferrer",class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},E(o.urlValue),9,D3e)):(p(),f("p",P3e,E(o.displayValue),1)),c("div",B3e,[n.showActions&&o.hasValue?pe((p(),V(i,{key:0,xs:"",slate:"",ghost:"",icon:"i-lucide-clipboard",class:"hidden group-hover:flex flex-shrink-0",onClick:o.onCopy},null,8,["onClick"])),[[d,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY")]]):O("",!0),n.showActions?pe((p(),V(i,{key:1,xs:"",slate:"",ghost:"",icon:"i-lucide-pen",class:"hidden group-hover:flex flex-shrink-0",onClick:o.onEdit},null,8,["onClick"])),[[d,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),void 0,{right:!0}]]):O("",!0)])],2),[[pn,!a.isEditing]])])):O("",!0),o.isAttributeTypeList?(p(),f("div",F3e,[v(r,{options:o.listOptions,"selected-item":o.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER"),onSelect:o.onUpdateListValue},null,8,["options","selected-item","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])])):O("",!0)])}const G3e=Fe(I3e,[["render",U3e],["__scopeId","data-v-c2c5de8e"]]),V3e={class:"conversation--details"},H3e={key:0,class:"p-3 text-center"},W3e={key:1,class:"flex items-center px-2 py-2"},K3e={__name:"CustomAttributes",props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null},attributeFrom:{type:String,required:!0},emptyStateMessage:{type:String,default:""},staticElements:{type:Array,default:()=>[]}},setup(e){const t=e,n=yt(),s=Nn(),a=cn(),{t:o}=Pe(),{uiSettings:l,updateUISettings:i}=Sn(),r=F(!1),[d,u]=Xn(!1),m=C(()=>s.getSelectedChat.value),h=C(()=>s["attributes/getAttributesByModel"].value(t.attributeType)),_=C(()=>{var L,M;return((M=(L=m.value.meta)==null?void 0:L.sender)==null?void 0:M.id)||a.params.contactId||t.contactId}),g=C(()=>s["contacts/getContact"].value(_.value)),T=C(()=>t.attributeType==="conversation_attribute"?m.value.custom_attributes||{}:g.value.custom_attributes||{}),S=C(()=>m.value.id),b=C(()=>d.value?o("CUSTOM_ATTRIBUTES.SHOW_LESS"):o("CUSTOM_ATTRIBUTES.SHOW_MORE")),A=C(()=>h.value.map(L=>{const M=Object.hasOwnProperty.call(T.value,L.attribute_key);return{...L,type:"custom_attribute",key:L.attribute_key,value:M?T.value[L.attribute_key]:""}})),y=C(()=>`conversation_elements_order_${t.attributeFrom}`),x=C(()=>{const L=l.value[y.value]??[],M=[...t.staticElements,...A.value];return L.length?M.sort((R,P)=>{const W=L.indexOf(R.key),Q=L.indexOf(P.key);return W===-1&&Q===-1?0:W===-1?1:Q===-1?-1:W-Q}):M}),$=C(()=>d.value||x.value.length<=5?x.value:x.value.slice(0,5)),N=(L=[],M=[])=>{const R=[...M],P=new Set(M);return L.filter(W=>W.startsWith("static-")&&!P.has(W)).forEach(W=>{const Q=L.slice(L.indexOf(W)).find(Z=>P.has(Z));Q?R.splice(R.indexOf(Q),0,W):R.push(W)}),R},w=()=>{r.value=!1;const L=l.value[y.value]??[],M=x.value.map(({key:P})=>P),R=N(L,M);i({[y.value]:R})},D=()=>{if(!l.value[y.value]){const M=x.value.map(R=>R.key);i({[y.value]:M})}d.value=l.value[`show_all_attributes_${t.attributeFrom}`]||!1},H=()=>{u(),i({[`show_all_attributes_${t.attributeFrom}`]:d.value})},B=async(L,M)=>{var P;const R={...T.value,[L]:M};try{t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:S.value,customAttributes:R}):n.dispatch("contacts/update",{id:t.contactId,customAttributes:R}),_e(o("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS"))}catch(W){const Q=((P=W==null?void 0:W.response)==null?void 0:P.message)||o("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR");_e(Q)}},k=async L=>{var M;try{const{[L]:R,...P}=T.value;t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:S.value,customAttributes:P}):n.dispatch("contacts/deleteCustomAttributes",{id:t.contactId,customAttributes:[L]}),_e(o("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS"))}catch(R){const P=((M=R==null?void 0:R.response)==null?void 0:M.message)||o("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR");_e(P)}},U=async L=>{await qo(L),_e(o("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"))};pt(()=>{D()});const G=["[&>*:nth-child(odd)]:!bg-n-background [&>*:nth-child(even)]:!bg-n-slate-2","dark:[&>*:nth-child(odd)]:!bg-n-background dark:[&>*:nth-child(even)]:!bg-n-solid-1"];return(L,M)=>(p(),f("div",V3e,[v(I(kr),{list:$.value,disabled:!I(d),animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"key",class:re(["last:rounded-b-lg",G]),onStart:M[0]||(M[0]=R=>r.value=!0),onEnd:w},{item:K(({element:R})=>[c("div",{class:re(["drag-handle relative border-b border-n-weak/50 dark:border-n-weak/90",{"cursor-grab":I(d),"last:border-transparent dark:last:border-transparent":x.value.length<=5}])},[R.type==="static_attribute"?at(L.$slots,"staticItem",{key:0,element:R},void 0,!0):(p(),V(G3e,{key:R.id,"attribute-key":R.attribute_key,"attribute-type":R.attribute_display_type,values:R.attribute_values,label:R.attribute_display_name,description:R.attribute_description,value:R.value,"show-actions":"","attribute-regex":R.regex_pattern,"regex-cue":R.regex_cue,"contact-id":e.contactId,onUpdate:B,onDelete:k,onCopy:U},null,8,["attribute-key","attribute-type","values","label","description","value","attribute-regex","regex-cue","contact-id"]))],2)]),_:3},8,["list","disabled"]),!$.value.length&&e.emptyStateMessage?(p(),f("p",H3e,E(e.emptyStateMessage),1)):O("",!0),x.value.length>5?(p(),f("div",W3e,[v(ce,{ghost:"",xs:"",icon:I(d)?"i-lucide-chevron-up":"i-lucide-chevron-down",label:b.value,onClick:H},null,8,["icon","label"])])):O("",!0)]))}},XI=Fe(K3e,[["__scopeId","data-v-d46305f9"]]),z3e={class:"conversation--details"},j3e=["href"],Y3e={__name:"ConversationInfo",props:{conversationAttributes:{type:Object,default:()=>({})},contactAttributes:{type:Object,default:()=>({})}},setup(e){const t=e,n=C(()=>t.conversationAttributes.referer),s=C(()=>{var u;return(u=t.conversationAttributes.initiated_at)==null?void 0:u.timestamp}),a=C(()=>t.conversationAttributes.browser),o=C(()=>{if(!a.value)return"";const{browser_name:u="",browser_version:m=""}=a.value;return`${u} ${m}`}),l=C(()=>eO(t.conversationAttributes.browser_language)),i=C(()=>{if(!a.value)return"";const{platform_name:u="",platform_version:m=""}=a.value;return`${u} ${m}`}),r=C(()=>t.contactAttributes.created_at_ip),d=C(()=>[{content:s,title:"CONTACT_PANEL.INITIATED_AT",key:"static-initiated-at",type:"static_attribute"},{content:l,title:"CONTACT_PANEL.BROWSER_LANGUAGE",key:"static-browser-language",type:"static_attribute"},{content:n,title:"CONTACT_PANEL.INITIATED_FROM",key:"static-referer",type:"static_attribute"},{content:o,title:"CONTACT_PANEL.BROWSER",key:"static-browser",type:"static_attribute"},{content:i,title:"CONTACT_PANEL.OS",key:"static-platform",type:"static_attribute"},{content:r,title:"CONTACT_PANEL.IP_ADDRESS",key:"static-ip-address",type:"static_attribute"}].filter(u=>!!u.content.value));return(u,m)=>(p(),f("div",z3e,[v(XI,{"static-elements":d.value,"attribute-class":"conversation--attribute","attribute-from":"conversation_panel","attribute-type":"conversation_attribute"},{staticItem:K(({element:h})=>[(p(),V(VI,{key:h.title,title:u.$t(h.title),value:h.content.value},{default:K(()=>[h.key==="static-referer"?(p(),f("a",{key:0,href:h.content.value,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-n-brand"},E(h.content.value),9,j3e)):O("",!0)]),_:2},1032,["title","value"]))]),_:1},8,["static-elements"])]))}},X3e={class:"macro-preview absolute border border-n-weak max-h-[22.5rem] z-50 w-64 rounded-md bg-n-alpha-3 backdrop-blur-[100px] shadow-lg bottom-8 right-8 overflow-y-auto p-4 text-left rtl:text-right"},q3e={class:"mb-4 text-sm text-n-slate-12"},Z3e={key:0,class:"top-[0.390625rem] absolute -bottom-1 left-0 w-px bg-n-slate-6"},Q3e={class:"mb-1 text-xs text-n-slate-11"},J3e={class:"text-n-slate-12 text-sm"},eLe={__name:"MacroPreview",props:{macro:{type:Object,required:!0}},setup(e){const t=e,n=ke("labels/getLabels"),s=ke("teams/getTeams"),a=ke("agents/getAgents"),o=(i,r)=>({assign_team:Gse(s.value,r),add_label:o0(n.value,r),remove_label:o0(n.value,r),assign_agent:Vse(a.value,r),mute_conversation:null,snooze_conversation:null,resolve_conversation:null,remove_assigned_team:null,send_webhook_event:r[0],send_message:r[0],send_email_transcript:r[0],add_private_note:r[0]})[i]||"",l=C(()=>t.macro.actions.map(i=>({actionName:Use(i.action_name),actionValue:o(i.action_name,i.action_params)})));return(i,r)=>(p(),f("div",X3e,[c("h6",q3e,E(e.macro.name),1),(p(!0),f(fe,null,Ae(l.value,(d,u)=>(p(),f("div",{key:u,class:"relative pl-4 macro-block"},[u!==e.macro.actions.length-1?(p(),f("div",Z3e)):O("",!0),r[0]||(r[0]=c("div",{class:"absolute -left-[0.21875rem] top-[0.2734375rem] w-2 h-2 rounded-full bg-n-solid-1 border-2 border-solid border-n-weak dark:border-n-slate-6"},null,-1)),c("p",Q3e,E(i.$t(`MACROS.ACTIONS.${d.actionName}`)),1),c("p",J3e,E(d.actionValue),1)]))),128))]))}},tLe=Fe(eLe,[["__scopeId","data-v-de8da4be"]]),nLe={class:"overflow-hidden whitespace-nowrap text-ellipsis font-medium text-n-slate-12"},sLe={class:"flex items-center gap-1 justify-end"},aLe={__name:"MacroItem",props:{macro:{type:Object,required:!0},conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,n=yt(),{t:s}=Pe(),a=F(!1),o=F(!1),l=async d=>{try{a.value=!0,await n.dispatch("macros/execute",{macroId:d.id,conversationIds:[t.conversationId]}),nn(_a.EXECUTED_A_MACRO),_e(s("MACROS.EXECUTE.EXECUTED_SUCCESSFULLY"))}catch{_e(s("MACROS.ERROR"))}finally{a.value=!1}},i=()=>{o.value=!o.value},r=()=>{o.value=!1};return(d,u)=>{const m=_t("tooltip"),h=_t("on-clickaway");return p(),f("div",{class:re(["relative flex items-center justify-between leading-4 rounded-md h-10 pl-3 pr-2",o.value?"cursor-default":"drag-handle cursor-grab"])},[c("span",nLe,E(e.macro.name),1),c("div",sLe,[pe(v(ce,{icon:"i-lucide-info",slate:"",faded:"",xs:"",onClick:i},null,512),[[m,d.$t("MACROS.EXECUTE.PREVIEW"),void 0,{"left-start":!0}]]),pe(v(ce,{icon:"i-lucide-play",slate:"",faded:"",xs:"","is-loading":a.value,onClick:u[0]||(u[0]=_=>l(e.macro))},null,8,["is-loading"]),[[m,d.$t("MACROS.EXECUTE.BUTTON_TOOLTIP"),void 0,{"left-start":!0}]])]),v(Ps,{name:"menu-slide"},{default:K(()=>[o.value?pe((p(),V(tLe,{key:0,macro:e.macro},null,8,["macro"])),[[h,r]]):O("",!0)]),_:1})],2)}}},oLe={key:0,class:"p-3"},lLe={class:"flex flex-col items-center justify-center h-full"},iLe={key:1,class:"flex items-center gap-2 justify-center p-6 text-n-slate-12"},rLe={class:"text-sm"},wE="macros_display_order",cLe={__name:"List",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=yt(),{accountScopedUrl:n}=_s(),{uiSettings:s,updateUISettings:a}=Sn(),o=F(!1),l=ke("macros/getMacros"),i=ke("macros/getUIFlags"),r=C({get:()=>{var _;const u=((_=s.value)==null?void 0:_[wE])??[],m=l.value??[];if(!u.length||!m.length)return m;const h=new Map(u.map((g,T)=>[g,T]));return[...m].sort((g,T)=>{const S=h.get(g.id)??1/0,b=h.get(T.id)??1/0;return S-b})},set:u=>{a({[wE]:u.map(({id:m})=>m)})}}),d=()=>{o.value=!1};return pt(()=>{t.dispatch("macros/get")}),(u,m)=>{const h=z("router-link");return p(),f("div",null,[!I(i).isFetching&&!I(l).length?(p(),f("div",oLe,[c("p",lLe,E(u.$t("MACROS.LIST.404")),1),v(h,{to:I(n)("settings/macros")},{default:K(()=>[v(ce,{faded:"",xs:"",icon:"i-lucide-plus",class:"mt-1",label:u.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1},8,["to"])])):O("",!0),I(i).isFetching?(p(),f("div",iLe,[c("span",rLe,E(u.$t("MACROS.LOADING")),1),v(qn,{class:"size-5"})])):O("",!0),!I(i).isFetching&&I(l).length?(p(),V(I(kr),{key:2,modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=_=>r.value=_),class:"p-1",animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"id",onStart:m[1]||(m[1]=_=>o.value=!0),onEnd:d},{item:K(({element:_})=>[(p(),V(aLe,{key:_.id,macro:_,"conversation-id":e.conversationId},null,8,["macro","conversation-id"]))]),_:1},8,["modelValue"])):O("",!0)])}}},dLe=Fe(cLe,[["__scopeId","data-v-306724a7"]]),uLe={class:"funnel-selector"},pLe={key:0,class:"md:inline hidden"},mLe={key:1,class:"md:inline hidden"},hLe={key:0,class:"dropdown-menu"},fLe=["onClick"],gLe={class:"p-4"},_Le={class:"funnel-list"},vLe=["onClick"],bLe={class:"funnel-name"},ELe={__name:"FunnelSelector",setup(e){const t=Pn(),{t:n}=Pe(),s=F(!1),a=F(!1),o=F(window.innerWidth<768),l=C(()=>t.getters["funnel/getFunnels"]),i=C(()=>t.getters["funnel/getSelectedFunnel"]),r=C(()=>t.getters["funnel/getUIFlags"]),d=()=>{o.value?a.value=!0:s.value=!s.value},u=async _=>{try{await t.dispatch("funnel/setSelectedFunnel",_),s.value=!1,a.value=!1}catch{t.dispatch("notifications/show",{type:"error",message:n("KANBAN.ERRORS.FUNNEL_SELECTION_FAILED")})}},m=()=>{o.value=window.innerWidth<768},h=_=>{_.target.closest(".funnel-selector")||(s.value=!1)};return pt(async()=>{try{await t.dispatch("funnel/fetch"),!i.value&&l.value.length>0&&await u(l.value[0]),window.addEventListener("resize",m),document.addEventListener("click",h)}catch{t.dispatch("notifications/show",{type:"error",message:n("KANBAN.ERRORS.FUNNEL_FETCH_FAILED")})}}),ot(l,async _=>{_.length>0&&!i.value&&(console.log("[FUNNEL-SELECTOR] Selecionando primeiro funil automaticamente"),await u(_[0]))},{immediate:!0}),zs(()=>{window.removeEventListener("resize",m),document.removeEventListener("click",h)}),(_,g)=>{const T=z("fluent-icon");return p(),f("div",uLe,[v(ce,{type:"button",variant:"outline",color:"slate",size:"sm",isLoading:r.value.isFetching,onClick:d},{icon:K(()=>[v(T,{icon:"task",size:"16"})]),default:K(()=>[r.value.isFetching?(p(),f("span",pLe,E(_.$t("KANBAN.LOADING_FUNNELS")),1)):(p(),f("span",mLe,E(i.value?i.value.name:_.$t("KANBAN.SELECT_FUNNEL")),1)),v(T,{icon:"chevron-down",size:"16",class:"md:inline hidden ml-1"})]),_:1},8,["isLoading"]),s.value&&!o.value?(p(),f("div",hLe,[(p(!0),f(fe,null,Ae(l.value,S=>{var b;return p(),f("div",{key:S.id,class:re(["dropdown-item",{active:((b=i.value)==null?void 0:b.id)===S.id}]),onClick:A=>u(S)},E(S.name),11,fLe)}),128))])):O("",!0),v(qt,{show:a.value,"onUpdate:show":g[0]||(g[0]=S=>a.value=S),"on-close":()=>a.value=!1,size:"small"},{default:K(()=>[c("div",gLe,[g[1]||(g[1]=c("h3",{class:"text-lg font-medium mb-3"},"Selecionar Funil",-1)),c("div",_Le,[(p(!0),f(fe,null,Ae(l.value,S=>{var b,A;return p(),f("button",{key:S.id,class:re(["funnel-option",{"funnel-active":((b=i.value)==null?void 0:b.id)===S.id}]),onClick:y=>u(S)},[v(T,{icon:"task",size:"18",class:"mr-2"}),c("div",bLe,E(S.name),1),((A=i.value)==null?void 0:A.id)===S.id?(p(),V(T,{key:0,icon:"checkmark",size:"16",class:"ml-auto text-woot-500"})):O("",!0)],10,vLe)}),128))])])]),_:1},8,["show","on-close"])])}}},qI=Fe(ELe,[["__scopeId","data-v-0a030692"]]),TLe={class:"tabs-container"},ALe={class:"flex items-center gap-4 border-b border-slate-200 dark:border-slate-700"},yLe={class:"flex items-center gap-2"},SLe={class:"flex items-center gap-2"},ILe={class:"flex items-center gap-2"},CLe={class:"flex items-center gap-2"},xLe={class:"flex items-center gap-2"},NLe={class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm"},OLe={key:0,class:"space-y-6"},wLe={class:"flex items-center gap-3 mb-6"},RLe={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},$Le={class:"text-base font-medium text-slate-800 dark:text-slate-100"},MLe={class:"space-y-2"},kLe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},LLe=["placeholder"],DLe={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},PLe={class:"lg:col-span-1"},BLe={class:"bg-gradient-to-br from-woot-50/50 to-white dark:from-slate-800/50 dark:to-slate-800 rounded-lg border border-woot-100 dark:border-slate-700 overflow-hidden"},FLe={class:"p-4 border-b border-woot-100/50 dark:border-slate-700/50"},ULe={class:"flex items-center justify-between"},GLe={class:"flex items-center gap-4"},VLe={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},HLe={class:"flex items-center gap-2"},WLe={for:"has-value",class:"text-xs text-slate-600 dark:text-slate-400"},KLe={key:0,class:"divide-y divide-slate-100 dark:divide-slate-700/50"},zLe={class:"p-4"},jLe={class:"mb-4"},YLe={class:"relative h-10"},XLe=["placeholder"],qLe={class:"flex items-center h-10 gap-2"},ZLe={class:"relative flex-1 h-full"},QLe=["placeholder"],JLe={class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},eDe={class:"text-slate-500 dark:text-slate-400 sm:text-sm"},tDe={class:"relative currency-selector h-full"},nDe={class:"font-medium"},sDe=["onClick"],aDe={class:"mr-2"},oDe={class:"flex items-center justify-between gap-2"},lDe={class:"flex items-center gap-2 flex-1"},iDe={class:"text-sm text-slate-600 dark:text-slate-400"},rDe={class:"flex items-center gap-1"},cDe={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},dDe={class:"text-xs text-slate-500 dark:text-slate-400"},uDe=["onClick"],pDe={class:"lg:col-span-2"},mDe={class:"h-full flex flex-col bg-gradient-to-br from-slate-50/50 to-white dark:from-slate-800/50 dark:to-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},hDe={class:"p-4 border-b border-slate-200/50 dark:border-slate-700/50"},fDe={class:"block text-sm font-medium text-slate-600 dark:text-slate-300"},gDe={class:"flex-1 p-4"},_De=["placeholder"],vDe={key:1,class:"space-y-6"},bDe={class:"grid grid-cols-2 gap-6"},EDe={class:"space-y-2"},TDe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},ADe={class:"space-y-2"},yDe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},SDe=["disabled"],IDe={value:"",disabled:""},CDe=["value"],xDe={key:2,class:"space-y-6"},NDe={class:"flex items-center gap-3 mb-6"},ODe={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},wDe={class:"text-base font-medium text-slate-800 dark:text-slate-100"},RDe={class:"space-y-4"},$De={class:"space-y-1.5"},MDe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},kDe={class:"grid grid-cols-5 gap-2"},LDe=["value"],DDe={class:"space-y-1.5"},PDe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},BDe={class:"relative"},FDe=["disabled"],UDe={value:""},GDe=["value"],VDe={key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},HDe={key:3,class:"space-y-6"},WDe={class:"flex items-center gap-3 mb-6"},KDe={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},zDe={class:"text-base font-medium text-slate-800 dark:text-slate-100"},jDe={class:"space-y-4"},YDe={class:"flex items-center"},XDe={for:"has-scheduling",class:"ml-2 text-sm font-medium text-slate-700 dark:text-slate-300"},qDe={key:0,class:"space-y-4"},ZDe={class:"flex gap-6"},QDe={class:"flex items-center"},JDe={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},e4e={class:"flex items-center"},t4e={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},n4e={key:0,class:"space-y-1.5"},s4e={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},a4e={key:1,class:"space-y-1.5"},o4e={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},l4e={key:4,class:"space-y-6"},i4e={class:"flex items-center gap-3 mb-6"},r4e={class:"flex items-center justify-center w-8 h-8 rounded-lg bg-woot-50 dark:bg-woot-900/20"},c4e={class:"text-base font-medium text-slate-800 dark:text-slate-100"},d4e={class:"space-y-4"},u4e={class:"space-y-3"},p4e={class:"flex items-center"},m4e={for:"has-conversation",class:"ml-2 text-sm font-medium text-slate-700 dark:text-slate-300"},h4e={key:0},f4e={key:0},g4e={key:1,class:"text-slate-400"},_4e={class:"max-h-72 overflow-y-auto"},v4e=["onClick"],b4e={key:0,class:"px-3 py-2 text-slate-400 text-sm"},E4e={key:0,class:"text-center py-4"},T4e={class:"text-sm text-slate-500"},A4e=["onUpdate:modelValue"],y4e=["onUpdate:modelValue"],S4e=["onClick"],I4e={class:"flex justify-end space-x-2 pt-4 p-3"},C4e={__name:"KanbanItemForm",props:{funnelId:{type:[String,Number],required:!0},stage:{type:String,required:!0},position:{type:Number,default:0},initialData:{type:Object,default:null},isEditing:{type:Boolean,default:!1},currentConversation:{type:Object,default:null},initialDate:{type:Date,default:null}},emits:["saved","close"],setup(e,{emit:t}){var Qe,Je,st,ht,wt,ee,de,ie,Ce,Se,je,Ke,$e,Be,Ue,ge,ae,ve,Y,oe,te,le,ye,me,Ie,Oe,we,Ye,He,et,bt,Nt,ct,Ot;const n=(Le,qe=!0)=>{if(!Le)return null;try{let De=new Date(Le);if(typeof Le=="string"&&Le.length===10){const dt=Le.split("-");De=new Date(dt[0],dt[1]-1,dt[2],12,0,0)}const Te=De.getFullYear(),Ge=String(De.getMonth()+1).padStart(2,"0"),nt=String(De.getDate()).padStart(2,"0");if(!qe)return`${Te}-${Ge}-${nt}`;const Tt=String(De.getHours()).padStart(2,"0"),Kt=String(De.getMinutes()).padStart(2,"0");return`${Te}-${Ge}-${nt}T${Tt}:${Kt}`}catch(De){return console.error("Erro ao formatar data:",De),null}},{t:s}=Pe(),a=Pn(),o=t,l=F("general"),i=e,r=F(!1),d=F(!1),u=C(()=>a.getters["funnel/getSelectedFunnel"]),m=C(()=>{var Le;return(Le=u.value)!=null&&Le.stages?Object.entries(u.value.stages).map(([qe,De])=>({id:qe,name:De.name,position:De.position})).sort((qe,De)=>qe.position-De.position):[]}),h=F(!!((Je=(Qe=i.initialData)==null?void 0:Qe.item_details)!=null&&Je.conversation_id)),_=F([]),g=F(!1),T=F(""),S=F(!1),b=F(null),A=F({top:"0px",left:"0px",width:"100%"}),y=C(()=>T.value?_.value.filter(Le=>{var Te;const qe=(Te=Le.meta)==null?void 0:Te.sender;return`${Le.id} ${(qe==null?void 0:qe.name)||""} ${(qe==null?void 0:qe.email)||""}`.toLowerCase().includes(T.value.toLowerCase())}):_.value),x=C(()=>_.value.find(Le=>Le.id===k.value.item_details.conversation_id)||null),$=F(!!((ht=(st=i.initialData)==null?void 0:st.item_details)!=null&&ht.value)),N=C(()=>{var Le,qe,De,Te;return!!((qe=(Le=i.initialData)==null?void 0:Le.item_details)!=null&&qe.scheduled_at||(Te=(De=i.initialData)==null?void 0:De.item_details)!=null&&Te.deadline_at||i.initialDate)}),w=F(N.value);N.value&&(w.value=!0);const D=F(((ee=(wt=i.initialData)==null?void 0:wt.item_details)==null?void 0:ee.scheduling_type)||((ie=(de=i.initialData)==null?void 0:de.item_details)!=null&&ie.scheduled_at?"schedule":"deadline"));F("R$");const H=F(""),B=[{symbol:"R$",code:"BRL",locale:"pt-BR"},{symbol:"$",code:"USD",locale:"en-US"},{symbol:"",code:"EUR",locale:"de-DE"}];F(B[0]);const k=F({title:((Ce=i.initialData)==null?void 0:Ce.title)||"",description:((je=(Se=i.initialData)==null?void 0:Se.item_details)==null?void 0:je.description)||((Ke=i.initialData)==null?void 0:Ke.description)||"",funnel_id:i.funnelId,funnel_stage:i.stage,position:i.position,item_details:{title:(($e=i.initialData)==null?void 0:$e.title)||"",description:((Ue=(Be=i.initialData)==null?void 0:Be.item_details)==null?void 0:Ue.description)||((ge=i.initialData)==null?void 0:ge.description)||"",value:null,currency:B[0],offers:[],priority:((ve=(ae=i.initialData)==null?void 0:ae.item_details)==null?void 0:ve.priority)||((Y=i.initialData)==null?void 0:Y.priority)||"none",agent_id:((te=(oe=i.initialData)==null?void 0:oe.item_details)==null?void 0:te.agent_id)||null,conversation_id:((ye=(le=i.initialData)==null?void 0:le.item_details)==null?void 0:ye.conversation_id)||null,scheduling_type:D.value,scheduled_at:null,deadline_at:null},custom_attributes:((me=i.initialData)==null?void 0:me.custom_attributes)||{}});console.log("[DEBUG] KanbanItemForm - initialData recebido:",i.initialData),console.log("[DEBUG] KanbanItemForm - description do initialData:",(Ie=i.initialData)==null?void 0:Ie.description),console.log("[DEBUG] KanbanItemForm - item_details do initialData:",(Oe=i.initialData)==null?void 0:Oe.item_details),console.log("[DEBUG] KanbanItemForm - description dentro de item_details:",(Ye=(we=i.initialData)==null?void 0:we.item_details)==null?void 0:Ye.description),console.log("[DEBUG] KanbanItemForm - prioridade no initialData:",(He=i.initialData)==null?void 0:He.priority),console.log("[DEBUG] KanbanItemForm - prioridade dentro do item_details:",(bt=(et=i.initialData)==null?void 0:et.item_details)==null?void 0:bt.priority),console.log("[DEBUG] KanbanItemForm - prioridade inicializada no form:",k.value.item_details.priority);const U=F(Array.isArray((ct=(Nt=i.initialData)==null?void 0:Nt.item_details)==null?void 0:ct.custom_attributes)?i.initialData.item_details.custom_attributes.map(Le=>({name:Le.name||"",type:Le.type||""})):Array.isArray((Ot=i.initialData)==null?void 0:Ot.custom_attributes)?i.initialData.custom_attributes.map(Le=>({name:Le.name||"",type:Le.type||""})):[]);ot(()=>{var Le,qe,De;return[(qe=(Le=i.initialData)==null?void 0:Le.item_details)==null?void 0:qe.custom_attributes,(De=i.initialData)==null?void 0:De.custom_attributes]},([Le,qe])=>{Array.isArray(Le)?U.value=Le.map(De=>({name:De.name||"",type:De.type||""})):Array.isArray(qe)?U.value=qe.map(De=>({name:De.name||"",type:De.type||""})):U.value=[]},{immediate:!0,deep:!0}),pt(async()=>{var qe,De,Te,Ge,nt,Tt,Kt,dt,$t;d.value=!0;try{await a.dispatch("agents/get")}catch(Gt){console.error("Erro ao carregar agentes:",Gt)}finally{d.value=!1}(i.currentConversation||i.isEditing&&((De=(qe=i.initialData)==null?void 0:qe.item_details)!=null&&De.conversation_id))&&(h.value=!0,G());const Le=Gt=>{Q.value&&!Gt.target.closest(".currency-selector")&&(Q.value=!1)};document.addEventListener("mousedown",Le),zs(()=>{document.removeEventListener("mousedown",Le)}),(nt=(Ge=(Te=i.initialData)==null?void 0:Te.item_details)==null?void 0:Ge.offers)!=null&&nt.length&&(j.value=[...i.initialData.item_details.offers]),N.value&&(w.value=!0,(Kt=(Tt=i.initialData)==null?void 0:Tt.item_details)!=null&&Kt.scheduled_at?(D.value="schedule",k.value.item_details.scheduled_at=n(i.initialData.item_details.scheduled_at),console.log("[DEBUG] Agendamento com hora configurado:",k.value.item_details.scheduled_at)):($t=(dt=i.initialData)==null?void 0:dt.item_details)!=null&&$t.deadline_at?(D.value="deadline",k.value.item_details.deadline_at=n(i.initialData.item_details.deadline_at,!1),console.log("[DEBUG] Prazo configurado:",k.value.item_details.deadline_at)):i.initialDate&&(D.value="deadline",k.value.item_details.deadline_at=n(i.initialDate,!1),console.log("[DEBUG] Data inicial configurada como prazo:",k.value.item_details.deadline_at)),console.log("[DEBUG SCHEDULING] Checkbox de agendamento marcado:",w.value),console.log("[DEBUG SCHEDULING] Tipo de agendamento:",D.value),console.log("[DEBUG SCHEDULING] Data de agendamento:",k.value.item_details.scheduled_at),console.log("[DEBUG SCHEDULING] Data de prazo:",k.value.item_details.deadline_at))}),ot(w,Le=>{Le?(console.log("[DEBUG] Agendamento ativado"),k.value.item_details.scheduling_type||(D.value="deadline",k.value.item_details.scheduling_type="deadline")):(k.value.item_details.scheduled_at=null,k.value.item_details.deadline_at=null,console.log("[DEBUG] Agendamento desativado, valores limpos"))}),ot(D,(Le,qe)=>{if(Le!==qe)if(k.value.item_details.scheduling_type=Le,Le==="deadline")!k.value.item_details.deadline_at&&k.value.item_details.scheduled_at&&(k.value.item_details.deadline_at=n(k.value.item_details.scheduled_at,!1)),k.value.item_details.scheduled_at=null;else{if(!k.value.item_details.scheduled_at&&k.value.item_details.deadline_at){const De=new Date(k.value.item_details.deadline_at);De.setHours(12,0,0,0),k.value.item_details.scheduled_at=n(De)}k.value.item_details.deadline_at=null}});const G=async()=>{try{if(g.value=!0,i.currentConversation)_.value=[i.currentConversation];else{const Le=await $l.get({});_.value=Le.data.data.payload}}catch(Le){console.error("Erro ao carregar conversas:",Le)}finally{g.value=!1}},L=(Le,qe)=>{const De=Z.value;let Te=Le.target.value.replace(/[^\d.,]/g,"");if(H.value=Te,!Le.target.selectionStart&&Te){const Ge=Te.replace(",","."),nt=parseFloat(Ge);Number.isNaN(nt)||(Le.target.value=new Intl.NumberFormat(De.currency.locale,{style:"currency",currency:De.currency.code}).format(nt),De.value=nt)}},M=(Le,qe)=>{const De=Z.value;if(!H.value){Le.target.value="",De.value=null;return}const Te=H.value.replace(",","."),Ge=parseFloat(Te);if(Number.isNaN(Ge)){Le.target.value="",De.value=null;return}Le.target.value=new Intl.NumberFormat(De.currency.locale,{style:"currency",currency:De.currency.code}).format(Ge),De.value=Ge};ot($,Le=>{Le||(k.value.item_details.value=null,H.value="")}),ot(h,Le=>{Le?G():k.value.item_details.conversation_id=null}),va(()=>{var Le,qe,De,Te,Ge,nt,Tt,Kt,dt,$t,Gt,mn,On,Rn,gn,wn,ls,ns;console.log("watchEffect: ttulo atual",k.value.title),k.value={...k.value,funnel_id:((Le=u.value)==null?void 0:Le.id)||i.funnelId,funnel_stage:k.value.funnel_stage||i.stage,position:i.position,title:k.value.title||((qe=i.initialData)==null?void 0:qe.title)||((Te=(De=i.initialData)==null?void 0:De.item_details)==null?void 0:Te.title)||"",item_details:{...k.value.item_details,title:k.value.title||((Ge=i.initialData)==null?void 0:Ge.title)||((Tt=(nt=i.initialData)==null?void 0:nt.item_details)==null?void 0:Tt.title)||"",description:k.value.description,priority:k.value.item_details.priority||((dt=(Kt=i.initialData)==null?void 0:Kt.item_details)==null?void 0:dt.priority)||(($t=i.initialData)==null?void 0:$t.priority)||"none",value:k.value.item_details.value||((mn=(Gt=i.initialData)==null?void 0:Gt.item_details)==null?void 0:mn.value),currency:k.value.item_details.currency||((Rn=(On=i.initialData)==null?void 0:On.item_details)==null?void 0:Rn.currency),scheduled_at:k.value.item_details.scheduled_at||((wn=(gn=i.initialData)==null?void 0:gn.item_details)==null?void 0:wn.scheduled_at),deadline_at:k.value.item_details.deadline_at||((ns=(ls=i.initialData)==null?void 0:ls.item_details)==null?void 0:ns.deadline_at)}}}),ot(()=>k.value.title,Le=>{k.value.item_details&&(k.value.item_details.title=Le)}),ot(()=>k.value.description,Le=>{k.value.item_details&&(k.value.item_details.description=Le)});const R=()=>{var qe;const Le={};return(qe=k.value.title)!=null&&qe.trim()||(Le.title=s("KANBAN.ERRORS.TITLE_REQUIRED")),k.value.funnel_id||(Le.funnel_id=s("KANBAN.ERRORS.FUNNEL_REQUIRED")),k.value.funnel_stage||(Le.funnel_stage=s("KANBAN.ERRORS.STAGE_REQUIRED")),Object.keys(Le).length>0?(It.emit("newToastMessage",{message:Le[Object.keys(Le)[0]],type:"error"}),Le):null},P=[{id:"none",name:s("KANBAN.PRIORITY_LABELS.NONE")},{id:"low",name:s("KANBAN.PRIORITY_LABELS.LOW")},{id:"medium",name:s("KANBAN.PRIORITY_LABELS.MEDIUM")},{id:"high",name:s("KANBAN.PRIORITY_LABELS.HIGH")},{id:"urgent",name:s("KANBAN.PRIORITY_LABELS.URGENT")}],W=async Le=>{var De,Te;if(Le.preventDefault(),!R())try{r.value=!0,k.value.item_details.title=k.value.title,k.value.item_details.description=k.value.description;let Ge={};i.isEditing&&((De=i.initialData)!=null&&De.item_details)&&(Ge=JSON.parse(JSON.stringify(i.initialData.item_details)),["notes","checklist","attachments","activities"].forEach($t=>{i.initialData.item_details[$t]&&(Ge[$t]=i.initialData.item_details[$t])})),["title","description","value","currency","priority","agent_id","conversation_id","scheduling_type","scheduled_at","deadline_at","custom_attributes"].forEach(dt=>{k.value.item_details[dt]!==void 0&&(Ge[dt]=k.value.item_details[dt])}),Ge.title=k.value.title,Ge.offers=j.value,j.value.length>0&&(Ge.value=j.value[0].value,Ge.currency=j.value[0].currency);const Tt={funnel_id:((Te=u.value)==null?void 0:Te.id)||i.funnelId,funnel_stage:k.value.funnel_stage,position:i.position,item_details:Ge,conversation_display_id:k.value.conversation_display_id};Ge.custom_attributes=U.value.filter(dt=>dt.name.trim()!==""&&dt.type.trim()!=="");const Kt=i.isEditing?await a.dispatch("kanban/updateItemDetails",{itemId:i.initialData.id,details:Tt}):await a.dispatch("kanban/createKanbanItem",Tt);console.log("[FORM-DEBUG] Data returned from store action:",Kt),It.emit("newToastMessage",{message:i.isEditing?"Item atualizado com sucesso":"Item criado com sucesso",type:"success"}),o("saved",Kt),o("close")}catch(Ge){console.error("Erro ao salvar item:",Ge),It.emit("newToastMessage",{message:"Erro ao salvar item",type:"error"})}finally{r.value=!1}},Q=F(!1),Z=F({description:"",value:"",currency:B[0]}),j=F([]),X=F(null),q=()=>{Z.value.value&&Z.value.description&&(j.value.push({description:Z.value.description,value:Z.value.value,currency:Z.value.currency}),k.value.item_details.value=j.value[0].value,k.value.item_details.currency=j.value[0].currency,Z.value={description:"",value:"",currency:B[0]})},se=Le=>{if(j.value.splice(Le,1),Le===0&&j.value.length>0){const[qe]=j.value;k.value.item_details.value=qe.value,k.value.item_details.currency=qe.currency,k.value.item_details.description=qe.description}else j.value.length===0&&(k.value.item_details.value=null,k.value.item_details.currency=B[0],k.value.item_details.description="");k.value.item_details.offers=j.value.slice(1)},he=Le=>{X.value=X.value===Le?null:Le},be=(Le,qe)=>{Z.value.currency=Le,X.value=null},ne=(Le,qe)=>{if(!Le)return"-";try{return new Intl.NumberFormat(qe.locale,{style:"currency",currency:qe.code,minimumFractionDigits:2,maximumFractionDigits:2}).format(Le)}catch(De){return console.error("Erro ao formatar valor:",De),Le.toString()}},{isStacklab:J}=Js();function ue(){U.value.push({name:"",type:""})}function Ne(Le){U.value.splice(Le,1)}ot(l,Le=>{Le==="custom_fields"&&U.value.length===0&&U.value.push({name:"",type:""})});function Re(){S.value=!0,T.value="",setTimeout(()=>{const Le=b.value;if(Le){const De=Le.getBoundingClientRect();A.value={position:"fixed",top:`${De.bottom+window.scrollY}px`,left:`${De.left+window.scrollX}px`,width:`${De.width}px`,zIndex:99999}}const qe=Le==null?void 0:Le.querySelector("input");qe&&qe.focus()},0)}function Ze(Le){k.value.item_details.conversation_id=Le,k.value.conversation_display_id=Le,S.value=!1}function Xe(Le){var qe;(qe=b.value)!=null&&qe.contains(Le.target)||(S.value=!1)}return pt(()=>{document.addEventListener("mousedown",Xe)}),zs(()=>{document.removeEventListener("mousedown",Xe)}),(Le,qe)=>{var Te;const De=z("fluent-icon");return p(),f("form",{class:"flex flex-col gap-4 max-h-[85vh] overflow-y-auto w-full px-4",onSubmit:ze(W,["prevent"])},[c("div",TLe,[c("div",ALe,[c("button",{type:"button",class:re(["tab-button",[l.value==="general"?"tab-active":"tab-inactive"]]),onClick:qe[0]||(qe[0]=Ge=>l.value="general")},[c("div",yLe,[v(De,{icon:"document",size:"16"}),Ee(" "+E(I(s)("KANBAN.TABS.GENERAL")),1)])],2),c("button",{type:"button",class:re(["tab-button",[l.value==="pipeline"?"tab-active":"tab-inactive"]]),onClick:qe[1]||(qe[1]=Ge=>l.value="pipeline")},[c("div",SLe,[v(De,{icon:"task",size:"16"}),Ee(" "+E(I(s)("KANBAN.TABS.PIPELINE")),1)])],2),c("button",{type:"button",class:re(["tab-button",[l.value==="assignment"?"tab-active":"tab-inactive"]]),onClick:qe[2]||(qe[2]=Ge=>l.value="assignment")},[c("div",ILe,[v(De,{icon:"bot",size:"16"}),Ee(" "+E(I(s)("KANBAN.TABS.ASSIGNMENT")),1)])],2),I(J)===!0?(p(),f("button",{key:0,type:"button",class:re(["tab-button",[l.value==="scheduling"?"tab-active":"tab-inactive"]]),onClick:qe[3]||(qe[3]=Ge=>l.value="scheduling")},[c("div",CLe,[v(De,{icon:"calendar-clock",size:"16"}),Ee(" "+E(I(s)("KANBAN.TABS.SCHEDULING")),1)])],2)):O("",!0),c("button",{type:"button",class:re(["tab-button",[l.value==="relationships"?"tab-active":"tab-inactive"]]),onClick:qe[4]||(qe[4]=Ge=>l.value="relationships")},[c("div",xLe,[v(De,{icon:"attach",size:"16"}),Ee(" "+E(I(s)("KANBAN.TABS.RELATIONSHIPS")),1)])],2),c("button",{type:"button",class:re(["tab-button",l.value==="custom_fields"?"tab-active":"tab-inactive"]),onClick:qe[5]||(qe[5]=ze(Ge=>l.value="custom_fields",["prevent","stop"]))},E(I(s)("KANBAN.TABS.CUSTOM_FIELDS")),3)])]),c("div",NLe,[l.value==="general"?(p(),f("div",OLe,[c("div",wLe,[c("div",RLe,[v(De,{icon:"document",size:"18",class:"text-woot-500"})]),c("h4",$Le,E(I(s)("KANBAN.TABS.GENERAL")),1)]),c("div",MLe,[c("label",kLe,E(I(s)("KANBAN.FORM.TITLE.LABEL")),1),pe(c("input",{"onUpdate:modelValue":qe[6]||(qe[6]=Ge=>k.value.title=Ge),type:"text",class:"w-full px-4 py-3 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 shadow-sm",placeholder:I(s)("KANBAN.FORM.TITLE.PLACEHOLDER"),required:""},null,8,LLe),[[mt,k.value.title]])]),c("div",DLe,[c("div",PLe,[c("div",BLe,[c("div",FLe,[c("div",ULe,[c("div",GLe,[c("span",VLe,E(I(s)("KANBAN.FORM.VALUE.LABEL")),1)]),c("div",HLe,[pe(c("input",{id:"has-value","onUpdate:modelValue":qe[7]||(qe[7]=Ge=>$.value=Ge),type:"checkbox",class:"w-4 h-4 text-woot-500 border-slate-300 rounded focus:ring-woot-500"},null,512),[[Xt,$.value]]),c("label",WLe,E(I(s)("KANBAN.FORM.VALUE.HAS_VALUE")),1)])])]),$.value?(p(),f("div",KLe,[c("div",zLe,[c("div",jLe,[c("div",YLe,[pe(c("input",{"onUpdate:modelValue":qe[8]||(qe[8]=Ge=>Z.value.description=Ge),type:"text",class:"w-full h-full px-4 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",placeholder:I(s)("KANBAN.FORM.VALUE.OFFER_DESCRIPTION_PLACEHOLDER")},null,8,XLe),[[mt,Z.value.description]])])]),c("div",qLe,[c("div",ZLe,[pe(c("input",{"onUpdate:modelValue":qe[9]||(qe[9]=Ge=>Z.value.value=Ge),type:"text",inputmode:"decimal",class:"w-full h-full px-4 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 shadow-sm text-left pr-12",placeholder:I(s)("KANBAN.FORM.VALUE.PLACEHOLDER"),onInput:qe[10]||(qe[10]=Ge=>L(Ge)),onBlur:qe[11]||(qe[11]=Ge=>M(Ge))},null,40,QLe),[[mt,Z.value.value]]),c("div",JLe,[c("span",eDe,E(Z.value.currency.symbol),1)])]),c("div",tDe,[c("button",{ref:"currencyButton",type:"button",class:"flex items-center h-full gap-2 px-3 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 transition-all min-w-[80px]",onClick:qe[12]||(qe[12]=()=>he("new"))},[c("span",nDe,E(Z.value.currency.code),1),v(De,{icon:"chevron-down",size:"12",class:re(["text-slate-400",{"rotate-180":X.value==="new"}])},null,8,["class"])],512),X.value==="new"?(p(),f("div",{key:0,class:"fixed right-auto mt-1 w-[120px] py-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-[99999]",style:Ct({top:Le.$refs.currencyButton.getBoundingClientRect().bottom+4+"px",left:Le.$refs.currencyButton.getBoundingClientRect().left+"px"}),onMousedown:qe[13]||(qe[13]=ze(()=>{},["stop"]))},[(p(),f(fe,null,Ae(B,Ge=>c("button",{key:Ge.code,type:"button",class:re(["flex items-center w-full px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",{"text-woot-500 bg-woot-50 dark:bg-woot-900/20":Z.value.currency.code===Ge.code,"text-slate-700 dark:text-slate-300":Z.value.currency.code!==Ge.code}]),onClick:()=>be(Ge)},[c("span",aDe,E(Ge.symbol),1),Ee(" "+E(Ge.code),1)],10,sDe)),64))],36)):O("",!0)]),c("button",{type:"button",class:"p-2.5 bg-woot-500 hover:bg-woot-600 text-white rounded-lg transition-colors",onClick:q},[v(De,{icon:"add",size:"16"})])])]),(p(!0),f(fe,null,Ae(j.value,(Ge,nt)=>(p(),f("div",{key:nt,class:"p-4"},[c("div",oDe,[c("div",lDe,[c("span",iDe,E(Ge.description||I(s)("KANBAN.FORM.VALUE.OFFER_DESCRIPTION_PLACEHOLDER")),1),c("div",rDe,[c("span",cDe,E(ne(Ge.value,Ge.currency)),1),c("span",dDe,E(Ge.currency.code),1)])]),c("button",{class:"p-1.5 text-slate-400 hover:text-ruby-500 dark:text-slate-500 dark:hover:text-ruby-400 hover:bg-ruby-50 dark:hover:bg-ruby-900/20 rounded transition-colors",onClick:()=>se(nt)},[v(De,{icon:"dismiss",size:"16"})],8,uDe)])]))),128))])):O("",!0)])]),c("div",pDe,[c("div",mDe,[c("div",hDe,[c("label",fDe,E(I(s)("KANBAN.FORM.DESCRIPTION.LABEL")),1)]),c("div",gDe,[pe(c("textarea",{"onUpdate:modelValue":qe[14]||(qe[14]=Ge=>k.value.description=Ge),rows:"4",class:"w-full h-full px-4 py-2.5 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500 resize-none shadow-sm",placeholder:I(s)("KANBAN.FORM.DESCRIPTION.PLACEHOLDER")},null,8,_De),[[mt,k.value.description]])])])])])])):O("",!0),l.value==="pipeline"?(p(),f("div",vDe,[c("div",bDe,[c("div",EDe,[c("label",TDe,E(I(s)("KANBAN.FORM.FUNNEL.LABEL")),1),v(qI,{class:"w-full"})]),c("div",ADe,[c("label",yDe,E(I(s)("KANBAN.FORM.STAGE.LABEL")),1),pe(c("select",{"onUpdate:modelValue":qe[15]||(qe[15]=Ge=>k.value.funnel_stage=Ge),class:"w-full px-4 py-2.5 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",disabled:!((Te=u.value)!=null&&Te.id)},[c("option",IDe,E(I(s)("KANBAN.FORM.STAGE.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(m.value,Ge=>(p(),f("option",{key:Ge.id,value:Ge.id},E(Ge.name),9,CDe))),128))],8,SDe),[[zt,k.value.funnel_stage]])])])])):O("",!0),l.value==="assignment"?(p(),f("div",xDe,[c("div",NDe,[c("div",ODe,[v(De,{icon:"bot",size:"18",class:"text-woot-500"})]),c("h4",wDe,E(I(s)("KANBAN.TABS.ASSIGNMENT")),1)]),c("div",RDe,[c("div",$De,[c("label",MDe,E(I(s)("KANBAN.FORM.PRIORITY.LABEL")),1),c("div",kDe,[(p(),f(fe,null,Ae(P,Ge=>c("label",{key:Ge.id,class:"relative flex cursor-pointer"},[pe(c("input",{"onUpdate:modelValue":qe[16]||(qe[16]=nt=>k.value.item_details.priority=nt),type:"radio",value:Ge.id,class:"peer sr-only"},null,8,LDe),[[Vl,k.value.item_details.priority]]),c("div",{class:re(["w-full px-3 py-2 text-xs text-center rounded-lg border transition-colors peer-checked:border-woot-500 peer-checked:bg-woot-50 peer-checked:text-woot-600 dark:peer-checked:bg-woot-900/20 dark:peer-checked:text-woot-400",[Ge.id===k.value.item_details.priority?{"border-slate-200 bg-slate-100 text-slate-600 dark:bg-slate-700/50 dark:text-slate-300":Ge.id==="none","border-ruby-200 bg-ruby-500 text-white dark:bg-ruby-500 dark:text-white":Ge.id==="urgent","border-orange-200 bg-orange-600 text-white dark:bg-orange-600 dark:text-white":Ge.id==="high","border-yellow-200 bg-yellow-500 text-white dark:bg-yellow-500 dark:text-white":Ge.id==="medium","border-green-200 bg-[#22c55e] text-white dark:bg-[#22c55e] dark:text-white":Ge.id==="low"}:{"border-slate-200 bg-slate-100 text-slate-500 dark:bg-slate-700/50 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700":Ge.id==="none","border-ruby-200 bg-ruby-100 text-ruby-500 dark:bg-ruby-900/30 dark:text-ruby-400 hover:bg-ruby-200 dark:hover:bg-ruby-900/50":Ge.id==="urgent","border-orange-200 bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400 hover:bg-orange-200 dark:hover:bg-orange-900/50":Ge.id==="high","border-yellow-200 bg-yellow-100 text-[#996b00] dark:bg-yellow-900/30 dark:text-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50":Ge.id==="medium","border-green-200 bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50":Ge.id==="low"}]])},E(Ge.name),3)])),64))])]),c("div",DDe,[c("label",PDe,E(I(s)("KANBAN.FORM.AGENT.LABEL")),1),c("div",BDe,[pe(c("select",{"onUpdate:modelValue":qe[17]||(qe[17]=Ge=>k.value.item_details.agent_id=Ge),class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",disabled:d.value},[c("option",UDe,E(I(s)("KANBAN.FORM.AGENT.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(I(a).getters["agents/getAgents"],Ge=>(p(),f("option",{key:Ge.id,value:Ge.id},E(Ge.name),9,GDe))),128))],8,FDe),[[zt,k.value.item_details.agent_id]]),d.value?(p(),f("div",VDe,qe[30]||(qe[30]=[c("span",{class:"loading-spinner"},null,-1)]))):O("",!0)])])])])):O("",!0),l.value==="scheduling"&&I(J)===!0?(p(),f("div",HDe,[c("div",WDe,[c("div",KDe,[v(De,{icon:"calendar-clock",size:"18",class:"text-woot-500"})]),c("h4",zDe,E(I(s)("KANBAN.FORM.SCHEDULING.LABEL")),1)]),c("div",jDe,[c("div",YDe,[pe(c("input",{id:"has-scheduling","onUpdate:modelValue":qe[18]||(qe[18]=Ge=>w.value=Ge),type:"checkbox",class:"w-4 h-4 text-woot-500 border-slate-300 rounded focus:ring-woot-500"},null,512),[[Xt,w.value]]),c("label",XDe,E(I(s)("KANBAN.FORM.SCHEDULING.HAS_SCHEDULING")),1)]),w.value?(p(),f("div",qDe,[c("div",ZDe,[c("label",QDe,[pe(c("input",{"onUpdate:modelValue":qe[19]||(qe[19]=Ge=>D.value=Ge),type:"radio",value:"deadline",class:"w-4 h-4 text-woot-500 border-slate-300 focus:ring-woot-500"},null,512),[[Vl,D.value]]),c("span",JDe,E(I(s)("KANBAN.FORM.SCHEDULING.DEADLINE")),1)]),c("label",e4e,[pe(c("input",{"onUpdate:modelValue":qe[20]||(qe[20]=Ge=>D.value=Ge),type:"radio",value:"schedule",class:"w-4 h-4 text-woot-500 border-slate-300 focus:ring-woot-500"},null,512),[[Vl,D.value]]),c("span",t4e,E(I(s)("KANBAN.FORM.SCHEDULING.SCHEDULE")),1)])]),D.value==="schedule"?(p(),f("div",n4e,[c("label",s4e,E(I(s)("KANBAN.FORM.SCHEDULING.DATETIME")),1),pe(c("input",{"onUpdate:modelValue":qe[21]||(qe[21]=Ge=>k.value.item_details.scheduled_at=Ge),type:"datetime-local",class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},null,512),[[mt,k.value.item_details.scheduled_at]])])):(p(),f("div",a4e,[c("label",o4e,E(I(s)("KANBAN.FORM.SCHEDULING.DEADLINE_DATE")),1),pe(c("input",{"onUpdate:modelValue":qe[22]||(qe[22]=Ge=>k.value.item_details.deadline_at=Ge),type:"date",class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},null,512),[[mt,k.value.item_details.deadline_at]])]))])):O("",!0)])])):O("",!0),l.value==="relationships"?(p(),f("div",l4e,[c("div",i4e,[c("div",r4e,[v(De,{icon:"attach",size:"18",class:"text-woot-500"})]),c("h4",c4e,E(I(s)("KANBAN.TABS.RELATIONSHIPS")),1)]),c("div",d4e,[c("div",u4e,[c("div",p4e,[pe(c("input",{id:"has-conversation","onUpdate:modelValue":qe[23]||(qe[23]=Ge=>h.value=Ge),type:"checkbox",class:"w-4 h-4 text-woot-500 border-slate-300 rounded focus:ring-woot-500"},null,512),[[Xt,h.value]]),c("label",m4e,E(I(s)("KANBAN.FORM.CONVERSATION.HAS_CONVERSATION")),1)]),h.value?(p(),f("div",h4e,[c("div",{ref_key:"conversationSelectorRef",ref:b,class:"relative"},[c("div",{class:"w-full px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",onClick:Re,tabindex:"0"},[x.value?(p(),f("span",f4e," #"+E(x.value.id)+" - "+E(x.value.meta.sender.name||x.value.meta.sender.email),1)):(p(),f("span",g4e,E(I(s)("KANBAN.FORM.CONVERSATION.PLACEHOLDER")),1))]),(p(),V(yr,{to:"body"},[S.value?(p(),f("div",{key:0,style:Ct(A.value),class:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-96 overflow-y-auto",onMousedown:qe[25]||(qe[25]=ze(()=>{},["stop"]))},[pe(c("input",{"onUpdate:modelValue":qe[24]||(qe[24]=Ge=>T.value=Ge),type:"text",class:"w-full px-3 py-2 mb-2 text-sm border-b border-slate-200 dark:border-slate-700 bg-transparent focus:outline-none",placeholder:"Buscar conversa..."},null,512),[[mt,T.value]]),c("div",_4e,[(p(!0),f(fe,null,Ae(y.value,Ge=>(p(),f("div",{key:Ge.id,class:"px-3 py-2 hover:bg-woot-50 dark:hover:bg-slate-700 cursor-pointer text-sm",onClick:nt=>Ze(Ge.id)}," #"+E(Ge.id)+" - "+E(Ge.meta.sender.name||Ge.meta.sender.email),9,v4e))),128)),y.value.length===0?(p(),f("div",b4e," Nenhuma conversa encontrada ")):O("",!0)])],36)):O("",!0)]))],512)])):O("",!0)])])])):O("",!0),l.value==="custom_fields"?(p(),f("div",{key:5,class:"space-y-6",onClick:qe[28]||(qe[28]=ze(()=>{},["prevent","stop"]))},[U.value.length===0?(p(),f("div",E4e,[c("p",T4e,E(I(s)("KANBAN.FORM.CUSTOM_FIELDS.EMPTY")),1)])):(p(),f("div",{key:1,class:"space-y-4",onClick:qe[27]||(qe[27]=ze(()=>{},["prevent","stop"]))},[(p(!0),f(fe,null,Ae(U.value,(Ge,nt)=>(p(),f("div",{key:nt,class:"flex gap-2 items-center",onClick:qe[26]||(qe[26]=ze(()=>{},["prevent","stop"]))},[pe(c("input",{"onUpdate:modelValue":Tt=>Ge.name=Tt,type:"text",class:"w-1/2 rounded-lg",placeholder:"Chave (name)"},null,8,A4e),[[mt,Ge.name]]),pe(c("select",{"onUpdate:modelValue":Tt=>Ge.type=Tt,class:"w-1/2 rounded-lg"},qe[31]||(qe[31]=[c("option",{value:"string"},"Texto",-1),c("option",{value:"number"},"Nmero",-1),c("option",{value:"date"},"Data",-1),c("option",{value:"boolean"},"Booleano",-1)]),8,y4e),[[zt,Ge.type]]),c("button",{type:"button",onClick:Tt=>Ne(nt),class:"p-1 text-ruby-500"},"  ",8,S4e)]))),128)),c("button",{type:"button",onClick:ue,class:"mt-2 px-3 py-1 bg-woot-500 text-white rounded"}," Adicionar campo ")]))])):O("",!0)]),c("div",I4e,[v(ce,{type:"button",variant:"ghost",color:"slate",size:"sm",onClick:qe[29]||(qe[29]=Ge=>o("close"))},{default:K(()=>[Ee(E(I(s)("KANBAN.CANCEL")),1)]),_:1}),v(ce,{type:"submit",variant:"solid",color:"blue",size:"sm",isLoading:r.value},{default:K(()=>[Ee(E(I(s)("KANBAN.SAVE")),1)]),_:1},8,["isLoading"])])],32)}}},Oi=Fe(C4e,[["__scopeId","data-v-521f8105"]]);var eu={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}};function x4e(e,t,n){n=n||{};var s;return typeof eu[e]=="string"?s=eu[e]:t===1?s=eu[e].one:s=eu[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"em "+s:"h "+s:s}var N4e={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},O4e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},w4e={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},R4e={date:nm({formats:N4e,defaultWidth:"full"}),time:nm({formats:O4e,defaultWidth:"full"}),dateTime:nm({formats:w4e,defaultWidth:"full"})},$4e={lastWeek:function(e,t,n){var s=e.getUTCDay(),a=s===0||s===6?"ltimo":"ltima";return"'"+a+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"};function M4e(e,t,n,s){var a=$4e[e];return typeof a=="function"?a(t,n,s):a}var k4e={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},L4e={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},D4e={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},P4e={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},B4e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},F4e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}};function U4e(e,t){var n=Number(e),s=t||{},a=String(s.unit);return a==="week"||a==="isoWeek"?n+"":n+""}var G4e={ordinalNumber:U4e,era:Hr({values:k4e,defaultWidth:"wide"}),quarter:Hr({values:L4e,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Hr({values:D4e,defaultWidth:"wide"}),day:Hr({values:P4e,defaultWidth:"wide"}),dayPeriod:Hr({values:B4e,defaultWidth:"wide",formattingValues:F4e,defaultFormattingWidth:"wide"})},V4e=/^(\d+)[o]?/i,H4e=/\d+/i,W4e={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},K4e={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},z4e={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},j4e={any:[/1/i,/2/i,/3/i,/4/i]},Y4e={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},X4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},q4e={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},Z4e={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},Q4e={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},J4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},e8e={ordinalNumber:lN({matchPattern:V4e,parsePattern:H4e,valueCallback:function(e){return parseInt(e,10)}}),era:Wr({matchPatterns:W4e,defaultMatchWidth:"wide",parsePatterns:K4e,defaultParseWidth:"any"}),quarter:Wr({matchPatterns:z4e,defaultMatchWidth:"wide",parsePatterns:j4e,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Wr({matchPatterns:Y4e,defaultMatchWidth:"wide",parsePatterns:X4e,defaultParseWidth:"any"}),day:Wr({matchPatterns:q4e,defaultMatchWidth:"wide",parsePatterns:Z4e,defaultParseWidth:"any"}),dayPeriod:Wr({matchPatterns:Q4e,defaultMatchWidth:"any",parsePatterns:J4e,defaultParseWidth:"any"})},mr={code:"pt-BR",formatDistance:x4e,formatLong:R4e,formatRelative:M4e,localize:G4e,match:e8e,options:{weekStartsOn:0,firstWeekContainsDate:1}};const t8e={class:"send-message-template"},n8e={class:"modal-content"},s8e={class:"border border-dashed border-woot-500 dark:border-woot-400 rounded-lg p-4 mb-4 bg-woot-50/10 dark:bg-woot-900/10"},a8e={class:"flex items-center gap-3 mb-3"},o8e={class:"flex-1"},l8e={class:"text-sm font-medium text-woot-600 dark:text-woot-400"},i8e={class:"flex items-center gap-2 text-xs text-slate-500"},r8e={key:0},c8e={key:1},d8e={key:0,class:"flex items-center justify-center h-6 min-w-[1.5rem] px-2 bg-ruby-500 text-white text-xs font-medium rounded-full"},u8e={class:"grid grid-cols-2 gap-4 mb-3 pt-3 border-t border-woot-200/50 dark:border-woot-700/50"},p8e={class:"flex items-center gap-2"},m8e={class:"text-xs text-slate-700 dark:text-slate-300"},h8e={class:"flex items-center gap-2"},f8e={class:"text-xs capitalize text-slate-700 dark:text-slate-300"},g8e={class:"flex items-center justify-between text-[10px] pt-3 border-t border-woot-200/50 dark:border-woot-700/50"},_8e={class:"text-woot-500 dark:text-woot-400"},v8e={class:"flex items-center gap-3 text-slate-500"},b8e={key:0},E8e={key:1},T8e={key:0,class:"mb-4"},A8e={key:1,class:"flex items-center justify-center py-8"},y8e={key:2,class:"flex flex-col items-center justify-center py-8"},S8e={key:3,class:"templates-container"},I8e={key:0,class:"templates-grid"},C8e=["onClick"],x8e={class:"template-info"},N8e={class:"flex items-center gap-2 mb-2"},O8e={class:"template-title flex-1"},w8e=["title"],R8e={class:"flex items-center gap-2 mt-2"},$8e={key:0,class:"text-[10px] px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"},M8e={key:1,class:"text-[10px] px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"},k8e={key:1,class:"empty-templates"},L8e={class:"flex flex-col items-center justify-center py-8 text-center"},D8e={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},P8e={class:"text-xs text-slate-500 dark:text-slate-400"},B8e={class:"mt-4 flex justify-center"},F8e={key:2,class:"mt-2"},U8e=["placeholder"],G8e={class:"modal-footer"},V8e={key:0,class:"mb-2 text-sm text-ruby-500 text-center"},H8e={class:"flex justify-end gap-2"},W8e={__name:"SendMessageTemplate",props:{conversationId:{type:[Number,String],required:!0},currentStage:{type:String,required:!0},contact:{type:Object,default:()=>({})},conversation:{type:Object,default:()=>({})},item:{type:Object,required:!0},items:{type:Array,default:()=>[]},isBulk:{type:Boolean,default:!1}},emits:["close","send"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(!1),l=F(!1),i=F([]),r=F(null),d=F(null),u=F(null),m=F(!1),h=F(""),_=async()=>{try{o.value=!0;const y=await ra.get();i.value=y.data}catch(y){r.value=y.message,console.error("Erro ao carregar funis:",y)}finally{o.value=!1}},g=C(()=>{const y=[];return i.value.forEach(x=>{var $;($=x.stages[n.currentStage])!=null&&$.message_templates&&y.push(...x.stages[n.currentStage].message_templates)}),y}),T=C(()=>{var x;const y=i.value.find($=>$.stages[n.currentStage]);return((x=y==null?void 0:y.stages[n.currentStage])==null?void 0:x.color)||"#E5E7EB"}),S=async()=>{var y;try{l.value=!0;const x=m.value?h.value:u.value.content;n.isBulk?await Promise.all(n.items.map($=>{var N;return Au.create({conversationId:$.item_details.conversation.display_id,message:x,private:!1,message_type:"outgoing",inbox_id:((N=$.item_details.conversation)==null?void 0:N.inbox_id)||1})})):await Au.create({conversationId:n.conversationId,message:x,private:!1,message_type:"outgoing",inbox_id:((y=n.conversation)==null?void 0:y.inbox_id)||1}),It.emit("newToastMessage",{message:n.isBulk?"Mensagens enviadas com sucesso":"Mensagem enviada com sucesso",action:{type:"success"}}),s("send")}catch(x){It.emit("newToastMessage",{message:"Erro ao enviar mensagem(ns)",action:{type:"error"}}),console.error("Erro detalhado em handleSendMessage:",x)}finally{l.value=!1}},b=()=>{_()};pt(()=>{b()}),lo(()=>{u.value=null,i.value=[],r.value=null});const A=C(()=>{var $,N;const y=(N=($=n.conversation)==null?void 0:$.meta)==null?void 0:N.channel;return{"Channel::WebWidget":{name:"Website"},"Channel::Api":{name:"API"},"Channel::Email":{name:"Email"},"Channel::TwitterProfile":{name:"Twitter"},"Channel::FacebookPage":{name:"Facebook"},"Channel::TelegramBot":{name:"Telegram"},"Channel::WhatsApp":{name:"WhatsApp"}}[y]||{name:"Chat"}});return(y,x)=>{var N,w,D,H,B,k,U,G,L,M,R,P,W;const $=z("fluent-icon");return p(),f("div",t8e,[c("div",n8e,[c("div",s8e,[c("div",a8e,[v(Ft,{src:(N=e.contact)==null?void 0:N.thumbnail,name:(w=e.contact)==null?void 0:w.name,size:40},null,8,["src","name"]),c("div",o8e,[c("h4",l8e,E(((D=e.contact)==null?void 0:D.name)||I(a)("KANBAN.ITEM_CONVERSATION.NO_CONTACT")),1),c("div",i8e,[(H=e.contact)!=null&&H.email?(p(),f("span",r8e,[x[3]||(x[3]=c("span",{class:"material-icons-outlined text-sm mr-1"},"mail",-1)),Ee(" "+E(I(a)("KANBAN.ITEM_CONVERSATION.CONTACT.EMAIL"))+": "+E(e.contact.email),1)])):O("",!0),(B=e.contact)!=null&&B.phone_number?(p(),f("span",c8e,[x[4]||(x[4]=c("span",{class:"material-icons-outlined text-sm mr-1"},"phone",-1)),Ee(" "+E(I(a)("KANBAN.ITEM_CONVERSATION.CONTACT.PHONE"))+": "+E(e.contact.phone_number),1)])):O("",!0)])]),(k=e.conversation)!=null&&k.unread_count?(p(),f("div",d8e,E(e.conversation.unread_count>9?"9+":e.conversation.unread_count),1)):O("",!0)]),c("div",u8e,[c("div",null,[x[5]||(x[5]=c("p",{class:"text-[10px] uppercase tracking-wider text-woot-500 dark:text-woot-400 mb-1"}," Canal ",-1)),c("div",p8e,[c("span",m8e,E(A.value.name),1)])]),c("div",null,[x[6]||(x[6]=c("p",{class:"text-[10px] uppercase tracking-wider text-woot-500 dark:text-woot-400 mb-1"}," Status ",-1)),c("div",h8e,[c("span",{class:re(["w-2 h-2 rounded-full",{"bg-green-500":((U=e.conversation)==null?void 0:U.status)==="open","bg-yellow-500":((G=e.conversation)==null?void 0:G.status)==="pending","bg-slate-500":((L=e.conversation)==null?void 0:L.status)==="resolved"}])},null,2),c("span",f8e,E(((M=e.conversation)==null?void 0:M.status)||"desconhecido"),1)])])]),c("div",g8e,[c("div",_8e," Conversa #"+E((R=e.conversation)==null?void 0:R.id),1),c("div",v8e,[(P=e.conversation)!=null&&P.created_at?(p(),f("span",b8e," Criado em: "+E(new Date(e.conversation.created_at).toLocaleDateString()),1)):O("",!0),(W=e.conversation)!=null&&W.last_activity_at?(p(),f("span",E8e," ltima atividade: "+E(new Date(e.conversation.last_activity_at).toLocaleDateString()),1)):O("",!0)])])]),m.value?O("",!0):(p(),f("div",T8e,x[7]||(x[7]=[c("h4",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"}," Selecione um template ",-1),c("p",{class:"text-xs text-slate-500 dark:text-slate-400"}," Escolha um template para enviar uma mensagem pr-definida ",-1)]))),o.value&&!m.value?(p(),f("div",A8e,x[8]||(x[8]=[c("span",{class:"loading-spinner"},null,-1)]))):r.value&&!m.value?(p(),f("div",y8e,[v($,{icon:"error",size:"24",class:"text-ruby-500 mb-2"}),x[10]||(x[10]=c("p",{class:"text-slate-600 dark:text-slate-400"}," Erro ao carregar templates ",-1)),v(ce,{variant:"ghost",color:"slate",size:"sm",class:"mt-2",onClick:_},{default:K(()=>x[9]||(x[9]=[Ee(" Tentar novamente ")])),_:1})])):(p(),f("div",S8e,[g.value.length&&!m.value?(p(),f("div",I8e,[c("div",{class:"templates-list grid grid-cols-2 gap-4 p-2 rounded-lg",style:Ct({backgroundColor:`${T.value}15`,border:`1px solid ${T.value}`})},[(p(!0),f(fe,null,Ae(g.value,Q=>{var Z,j,X;return p(),f("div",{key:Q.id,class:re(["template-item",{selected:((Z=u.value)==null?void 0:Z.id)===Q.id}]),onClick:q=>u.value=Q},[c("div",x8e,[c("div",N8e,[c("h5",O8e,E(Q.title),1)]),c("p",{class:"template-content line-clamp-2",title:Q.content},E(Q.content),9,w8e),c("div",R8e,[(j=Q.webhook)!=null&&j.enabled?(p(),f("span",$8e," Webhook ")):O("",!0),(X=Q.conditions)!=null&&X.enabled?(p(),f("span",M8e," Condies ")):O("",!0)])])],10,C8e)}),128))],4)])):m.value?O("",!0):(p(),f("div",k8e,[c("div",L8e,[v($,{icon:"document",size:"24",class:"text-slate-400 dark:text-slate-600 mb-2"}),c("h4",D8e,E(I(a)("KANBAN.MESSAGE_TEMPLATES.NO_TEMPLATES")),1),c("p",P8e,E(I(a)("KANBAN.MESSAGE_TEMPLATES.NO_TEMPLATES_DESCRIPTION")),1)])])),c("div",B8e,[c("button",{class:"text-sm text-woot-500 hover:text-woot-600 dark:text-woot-400 dark:hover:text-woot-300 hover:underline",onClick:x[0]||(x[0]=Q=>m.value=!m.value)},E(m.value?I(a)("KANBAN.SEND_MESSAGE.SELECT_TEMPLATE"):I(a)("KANBAN.SEND_MESSAGE.CUSTOM_MESSAGE")),1)]),m.value?(p(),f("div",F8e,[pe(c("textarea",{"onUpdate:modelValue":x[1]||(x[1]=Q=>h.value=Q),class:"w-full p-3 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",placeholder:I(a)("KANBAN.SEND_MESSAGE.CUSTOM_MESSAGE_PLACEHOLDER"),rows:"4"},null,8,U8e),[[mt,h.value]])])):O("",!0)]))]),c("footer",G8e,[d.value?(p(),f("div",V8e,E(d.value),1)):O("",!0),c("div",H8e,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:x[2]||(x[2]=Q=>s("close"))},{default:K(()=>[Ee(E(I(a)("CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",disabled:!u.value&&!h.value||l.value,isLoading:l.value,onClick:S},{default:K(()=>[Ee(E(l.value?I(a)("KANBAN.SEND_MESSAGE.STATUS.SENDING"):u.value?I(a)("KANBAN.SEND_MESSAGE.ACTIONS.SEND_SELECTED",{title:u.value.title}):h.value?I(a)("KANBAN.SEND_MESSAGE.ACTIONS.SEND_CUSTOM"):I(a)("KANBAN.SEND_MESSAGE.ACTIONS.SEND")),1)]),_:1},8,["disabled","isLoading"])])])])}}},ZI=Fe(W8e,[["__scopeId","data-v-b8f644a3"]]),K8e={class:"item-statistics bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},z8e={class:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-3"},j8e={class:"grid grid-cols-2 gap-4"},Y8e={class:"block text-xs text-slate-500 dark:text-slate-400"},X8e={class:"block text-sm font-medium text-slate-800 dark:text-slate-200"},q8e={__name:"KanbanItemStatistics",props:{item:{type:Object,required:!0},notes:{type:Array,default:()=>[]},checklistItems:{type:Array,default:()=>[]},attachments:{type:Array,default:()=>[]}},setup(e){const t=e,{t:n}=Pe(),s=C(()=>t.checklistItems.length),a=C(()=>t.checklistItems.filter(l=>l.completed).length),o=C(()=>{var u,m;const l=t.item.stage_entered_at?lg(new Date(t.item.stage_entered_at),{locale:mr,addSuffix:!1}):n("KANBAN.STATISTICS.NOT_AVAILABLE"),i=((u=t.notes)==null?void 0:u.length)||0,r=`${a.value}/${s.value}`,d=((m=t.attachments)==null?void 0:m.length)||0;return[{icon:"book-clock",label:n("KANBAN.STATISTICS.TIME_IN_STAGE"),value:l},{icon:"comment-add",label:n("KANBAN.STATISTICS.NOTES"),value:i},{icon:"checkmark-circle",label:n("KANBAN.STATISTICS.CHECKLIST"),value:r},{icon:"attach",label:n("KANBAN.STATISTICS.ATTACHMENTS"),value:d}]});return(l,i)=>{const r=z("fluent-icon");return p(),f("div",K8e,[c("h3",z8e,E(I(n)("KANBAN.STATISTICS.TITLE")),1),c("div",j8e,[(p(!0),f(fe,null,Ae(o.value,d=>(p(),f("div",{key:d.label,class:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg"},[v(r,{icon:d.icon,size:"18",class:"text-slate-500 dark:text-slate-400"},null,8,["icon"]),c("div",null,[c("span",Y8e,E(d.label),1),c("span",X8e,E(d.value),1)])]))),128))])])}}},Z8e=Fe(q8e,[["__scopeId","data-v-f024e47d"]]),Q8e={class:"quick-actions bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700"},J8e={class:"text-sm font-medium text-slate-900 dark:text-slate-100 mb-3"},e5e={class:"grid grid-cols-4 gap-2"},t5e=["onClick"],n5e={class:"text-xs mt-1 text-slate-600 dark:text-slate-400"},s5e={__name:"KanbanQuickActions",emits:["quick-action"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=[{id:"move",icon:"arrow-right",color:"emerald",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.MOVE")},{id:"assign",icon:"person",color:"violet",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.ASSIGN")},{id:"chat",icon:"chat",color:"amber",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.CHAT")},{id:"duplicate",icon:"copy",color:"sky",description:s("KANBAN.QUICK_ACTIONS_DESCRIPTIONS.DUPLICATE")}],o=l=>{n("quick-action",l)};return(l,i)=>{const r=z("fluent-icon");return p(),f("div",Q8e,[c("h3",J8e,E(I(s)("KANBAN.QUICK_ACTIONS")),1),c("div",e5e,[(p(),f(fe,null,Ae(a,d=>c("button",{key:d.id,class:re(["quick-action-btn flex flex-col items-center",{"hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-600 dark:hover:text-emerald-400":d.color==="emerald","hover:bg-violet-50 dark:hover:bg-violet-900/20 hover:text-violet-600 dark:hover:text-violet-400":d.color==="violet","hover:bg-amber-50 dark:hover:bg-amber-900/20 hover:text-amber-600 dark:hover:text-amber-400":d.color==="amber","hover:bg-sky-50 dark:hover:bg-sky-900/20 hover:text-sky-600 dark:hover:text-sky-400":d.color==="sky"}]),onClick:u=>o(d.id)},[v(r,{icon:d.icon,size:"20",class:re({"text-emerald-500 dark:text-emerald-400":d.color==="emerald","text-violet-500 dark:text-violet-400":d.color==="violet","text-amber-500 dark:text-amber-400":d.color==="amber","text-sky-500 dark:text-sky-400":d.color==="sky"})},null,8,["icon","class"]),c("span",n5e,E(d.description),1)],10,t5e)),64))])])}}},a5e=Fe(s5e,[["__scopeId","data-v-32ede582"]]),o5e={class:"header-section"},l5e={class:"flex items-center justify-between gap-4 mb-3"},i5e={class:"text-xl font-semibold text-slate-900 dark:text-slate-100"},r5e={class:"flex items-center gap-2"},c5e={key:1,class:"px-3 py-1.5 text-sm font-medium rounded-full bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-50"},d5e={key:0,class:"text-base text-slate-600 dark:text-slate-400 mb-4"},u5e={key:1,class:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700 mb-4"},p5e={class:"flex items-center justify-between mb-3"},m5e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},h5e={class:"text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-full"},f5e={class:"relative py-4"},g5e={class:"flex justify-between relative"},_5e={key:0,class:"text-xs font-bold"},v5e={key:1,class:"text-xs font-medium"},b5e={class:"mt-2 text-center max-w-16"},E5e={class:"info-grid"},T5e={class:"info-card"},A5e={class:"info-label"},y5e={class:"info-content"},S5e={key:0,class:"loading-text"},I5e={key:1,class:"flex items-center gap-2"},C5e={class:"font-medium"},x5e={key:2,class:"no-data-text"},N5e={key:0,class:"info-card"},O5e={class:"info-label"},w5e={class:"flex items-center gap-2 flex-1"},R5e={key:0,class:"flex items-center justify-between w-full"},$5e={class:"text-xs text-slate-700 dark:text-slate-300 truncate my-0"},M5e={key:0,class:"flex items-center justify-center h-4 min-w-[1rem] px-1 text-[0.625rem] font-medium bg-ruby-500 text-white rounded-full flex-shrink-0"},k5e={key:1,class:"text-xs text-slate-500 flex items-center"},L5e={key:2,class:"text-xs text-slate-500 flex items-center"},D5e={key:1,class:"info-card"},P5e={class:"info-label"},B5e={class:"info-content value-text"},F5e={class:"info-card"},U5e={class:"info-label"},G5e={class:"info-content flex items-center gap-2"},V5e={class:"font-medium"},H5e={class:"text-xs text-slate-500"},W5e={__name:"KanbanItemHeader",props:{item:{type:Object,required:!0},agentInfo:{type:Object,default:null},loadingAgent:{type:Boolean,default:!1},conversationData:{type:Object,default:null},loadingConversation:{type:Boolean,default:!1},currentStageName:{type:String,default:""},itemDescription:{type:String,default:""}},emits:["navigate-to-conversation","context-menu"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=C(()=>{var S,b;const g=((b=(S=n.item.item_details)==null?void 0:S.priority)==null?void 0:b.toLowerCase())||"none";return g==="none"?null:{high:{label:a("KANBAN.PRIORITY_LABELS.HIGH"),class:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50"},medium:{label:a("KANBAN.PRIORITY_LABELS.MEDIUM"),class:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50"},low:{label:a("KANBAN.PRIORITY_LABELS.LOW"),class:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50"}}[g]||null}),l=C(()=>{var T,S;const g={high:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50",medium:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50",low:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50",none:"bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-50"};return g[((S=(T=n.item.item_details)==null?void 0:T.priority)==null?void 0:S.toLowerCase())||"none"]||g.none}),i=C(()=>{var g;return(g=n.item.item_details)!=null&&g.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.item.item_details.value):null}),r=C(()=>{var A,y,x,$;const g=(y=(A=n.conversationData)==null?void 0:A.contact)==null?void 0:y.name,T=($=(x=n.conversationData)==null?void 0:x.contact)==null?void 0:$.email,S=a("KANBAN.ITEM_CONVERSATION.NO_CONTACT"),b=g||T||S;return b.length>10?`${b.substring(0,10)}...`:b}),d=g=>{if(!g||!g.stage_entered_at)return"";try{return a("KANBAN.STAGE.TIME_IN_STAGE",{time:lg(new Date(g.stage_entered_at),{locale:mr,addSuffix:!1})})}catch{return""}},u=(g,T)=>{s("navigate-to-conversation",g,T)},m=(g,T)=>{s("context-menu",g,T)},h=C(()=>{var N,w,D,H;const g=((w=(N=n.item.item_details)==null?void 0:N.funnel)==null?void 0:w.stages)||((D=n.item.funnel)==null?void 0:D.stages)||null,T=((H=n.item.item_details)==null?void 0:H.activities)||[];if(!g||!T.length)return{stages:[],currentStageIndex:-1,completedStages:[]};const S=Object.entries(g).map(([B,k])=>({key:B,name:k.name,color:k.color,position:k.position})).sort((B,k)=>B.position-k.position),b=T.filter(B=>B.type==="stage_changed").sort((B,k)=>new Date(B.created_at)-new Date(k.created_at)),A=new Set;b.forEach(B=>{B.details.new_stage&&A.add(B.details.new_stage)});const y=n.item.funnel_stage,x=S.findIndex(B=>B.key===y),$=[];if(x>=0)for(let B=0;B<x;B++)A.has(S[B].key)&&$.push(S[B].key);return{stages:S,currentStageIndex:x,completedStages:$,currentStage:y,visitedStages:Array.from(A)}}),_=C(()=>{var T;const g=((T=n.item.assigned_agents)==null?void 0:T[0])||n.item.agent;return g?{name:g.name,avatar_url:g.avatar_url||g.thumbnail||""}:null});return C(()=>{var S;const g=(S=n.item.item_details)==null?void 0:S.status,T=n.item.funnel_stage;return console.log("DEBUG STATUS:",{status:g,currentStage:T,translation_won:a("KANBAN.STATUS.WON"),translation_lost:a("KANBAN.STATUS.LOST"),translation_completed:a("KANBAN.STATUS.COMPLETED"),translation_in_progress:a("KANBAN.STATUS.IN_PROGRESS")}),g==="won"?{type:"won",label:a("KANBAN.STATUS.WON")||"Ganho",class:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}:g==="lost"?{type:"lost",label:a("KANBAN.STATUS.LOST")||"Perdido",class:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}:T==="resolved"||T==="closed"?{type:"won",label:a("KANBAN.STATUS.COMPLETED")||"Concludo",class:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}:{type:"active",label:a("KANBAN.STATUS.IN_PROGRESS")||"Em Andamento",class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}}),(g,T)=>{var b,A,y,x;const S=z("fluent-icon");return p(),f("div",o5e,[c("div",l5e,[c("h3",i5e,E(n.item.item_details.title),1),c("div",r5e,[(b=n.item.item_details)!=null&&b.priority&&n.item.item_details.priority!=="none"?(p(),f("span",{key:0,class:re(["px-3 py-1.5 text-sm font-medium rounded-full",l.value])},E(((A=o.value)==null?void 0:A.label)||I(a)(`KANBAN.PRIORITY_LABELS.${(((y=n.item.item_details)==null?void 0:y.priority)||"NONE").toUpperCase()}`)),3)):(p(),f("span",c5e,E(I(a)("KANBAN.PRIORITY_LABELS.NONE")),1))])]),e.itemDescription?(p(),f("p",d5e,E(e.itemDescription),1)):O("",!0),h.value.stages.length>0?(p(),f("div",u5e,[c("div",p5e,[c("span",m5e,E(I(a)("KANBAN.STAGE.PROGRESS")),1),c("span",h5e,E(h.value.currentStageIndex+1)+" / "+E(h.value.stages.length),1)]),c("div",f5e,[c("div",g5e,[T[2]||(T[2]=c("div",{class:"absolute top-3 left-3 h-0.5 bg-slate-200 dark:bg-slate-700 rounded-full",style:{width:"calc(100% - 40px)"}},null,-1)),c("div",{class:"absolute top-3 left-3 h-0.5 bg-gradient-to-r from-woot-500 to-woot-600 rounded-full transition-all duration-700 ease-out",style:Ct({width:h.value.currentStageIndex>0?`calc((100% - 40px) * ${h.value.currentStageIndex/Math.max(h.value.stages.length-1,1)})`:"0%"})},null,4),(p(!0),f(fe,null,Ae(h.value.stages,($,N)=>(p(),f("div",{key:$.key,class:"flex flex-col items-center group"},[c("div",{class:re(["relative flex items-center justify-center w-6 h-6 rounded-full transition-all duration-300 group-hover:scale-110 z-10",{"bg-woot-500 text-white shadow-lg shadow-woot-500/25":N===h.value.currentStageIndex,"bg-green-500 text-white shadow-sm":N<h.value.currentStageIndex&&h.value.completedStages.includes($.key),"bg-yellow-400 text-white shadow-sm":h.value.visitedStages.includes($.key)&&N<h.value.currentStageIndex&&!h.value.completedStages.includes($.key),"bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400":N<h.value.currentStageIndex&&!h.value.visitedStages.includes($.key)||N>h.value.currentStageIndex}])},[N<h.value.currentStageIndex&&h.value.completedStages.includes($.key)?(p(),f("span",_5e,"  ")):(p(),f("span",v5e,E(N+1),1))],2),c("div",b5e,[c("div",{class:re(["text-xs font-medium transition-colors duration-200",{"text-woot-600 dark:text-woot-400":N===h.value.currentStageIndex,"text-green-600 dark:text-green-400":N<h.value.currentStageIndex&&h.value.completedStages.includes($.key),"text-yellow-600 dark:text-yellow-400":h.value.visitedStages.includes($.key)&&N<h.value.currentStageIndex&&!h.value.completedStages.includes($.key),"text-slate-500 dark:text-slate-400":N<h.value.currentStageIndex&&!h.value.visitedStages.includes($.key)||N>h.value.currentStageIndex}])},E($.name),3)])]))),128))])])])):O("",!0),c("div",E5e,[c("div",T5e,[c("span",A5e,E(I(a)("KANBAN.ITEM_DETAILS.AGENT_RESPONSIBLE")),1),c("div",y5e,[e.loadingAgent?(p(),f("div",S5e,E(I(a)("KANBAN.ITEM_DETAILS.LOADING_AGENT")),1)):_.value?(p(),f("div",I5e,[v(Ft,{name:_.value.name,src:_.value.avatar_url,size:28},null,8,["name","src"]),c("span",C5e,E(_.value.name),1)])):(p(),f("div",x5e,E(I(a)("KANBAN.ITEM_DETAILS.NO_AGENT")),1))])]),(x=n.item.item_details)!=null&&x.conversation_id?(p(),f("div",N5e,[c("span",O5e,E(I(a)("KANBAN.FORM.CONVERSATION.LABEL")),1),c("div",{class:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700 min-h-[1.5rem] cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick:T[0]||(T[0]=$=>{var N;return u($,(N=n.conversationData)==null?void 0:N.display_id)}),onContextmenu:T[1]||(T[1]=$=>m($,n.item.conversation_id))},[c("div",w5e,[v(S,{icon:"chat",class:"text-slate-500 dark:text-slate-400 flex-shrink-0",size:"16"}),e.conversationData?(p(),f("div",R5e,[c("div",$5e,[Ee(" #"+E(e.conversationData.display_id)+" - "+E(r.value)+" ",1),c("span",{class:re(["ml-2 text-xs px-2 py-0.5 rounded-full",{"bg-green-100 text-green-700":e.conversationData.status==="open","bg-yellow-100 text-yellow-700":e.conversationData.status==="pending","bg-slate-100 text-slate-700":e.conversationData.status==="resolved"}])},E(e.conversationData.status),3)]),e.conversationData.unread_count>0?(p(),f("span",M5e,E(e.conversationData.unread_count>9?"9+":e.conversationData.unread_count),1)):O("",!0)])):e.loadingConversation?(p(),f("div",k5e,E(I(a)("KANBAN.LOADING_CONVERSATION")),1)):(p(),f("div",L5e,E(I(a)("KANBAN.CONVERSATION_NOT_FOUND")),1))])],32)])):O("",!0),i.value?(p(),f("div",D5e,[c("span",P5e,E(I(a)("KANBAN.FORM.VALUE.LABEL")),1),c("span",B5e,E(i.value),1)])):O("",!0),c("div",F5e,[c("span",U5e,E(I(a)("KANBAN.FORM.STAGE.LABEL")),1),c("div",G5e,[c("span",V5e,E(e.currentStageName),1),c("span",H5e,E(d(e.item)),1)])])])])}}},K5e=Fe(W5e,[["__scopeId","data-v-0fe09972"]]),z5e={class:"kanban-details flex flex-col lg:flex-row gap-4"},j5e={class:"w-full lg:w-2/3 p-4 lg:p-8 space-y-6"},Y5e={class:"space-y-4"},X5e={class:"tabs-container border-b border-slate-200 dark:border-slate-700 mb-6"},q5e={class:"tabs-scroll-wrapper"},Z5e=["onClick"],Q5e={class:"flex items-center gap-2"},J5e={class:"space-y-6"},ePe={key:0,class:"space-y-4"},tPe={class:"note-input-section"},nPe=["placeholder"],sPe={class:"flex flex-col gap-2 mt-2"},aPe={class:"flex items-center gap-2"},oPe=["disabled"],lPe={key:0},iPe={key:0,class:"flex items-center gap-2 px-2 py-1 text-xs text-slate-600 dark:text-slate-400"},rPe={class:"truncate"},cPe={key:0,class:"selected-links-preview mt-2 mb-3 space-y-2"},dPe={key:0,class:"selected-link"},uPe={class:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},pPe={class:"flex items-center gap-2"},mPe={class:"text-sm text-blue-700 dark:text-blue-300"},hPe={key:1,class:"selected-link"},fPe={class:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"},gPe={class:"flex items-center gap-2"},_Pe={class:"text-sm text-green-700 dark:text-green-300"},vPe={key:2,class:"selected-link"},bPe={class:"flex items-center justify-between p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800"},EPe={class:"flex items-center gap-2"},TPe={class:"text-sm text-purple-700 dark:text-purple-300"},APe=["disabled"],yPe={class:"item-selector p-0 bg-transparent border-none shadow-none"},SPe={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},IPe={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},CPe={class:"px-4 py-2"},xPe={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},NPe={key:0,class:"p-4 text-center text-sm text-slate-500"},OPe={key:1,class:"p-4 text-center"},wPe={class:"text-sm text-slate-500"},RPe={key:2,class:"divide-y divide-slate-100 dark:divide-slate-700"},$Pe=["onClick"],MPe={class:"flex items-center gap-3"},kPe={class:"flex items-center gap-3 flex-1 min-w-0"},LPe={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate flex-1"},DPe={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 whitespace-nowrap"},PPe={class:"flex items-center gap-1 text-xs text-slate-400 whitespace-nowrap"},BPe={key:0,class:"mt-1 ml-6 text-xs text-slate-500 dark:text-slate-400 line-clamp-1"},FPe={class:"conversation-selector p-0 bg-transparent border-none shadow-none"},UPe={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},GPe={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},VPe={class:"px-4 py-2"},HPe={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},WPe={key:0,class:"p-4 text-center text-sm text-slate-500"},KPe={key:1,class:"p-4 text-center"},zPe={class:"text-sm text-slate-500"},jPe={key:2,class:"divide-y divide-slate-100 dark:divide-slate-700"},YPe=["onClick"],XPe={class:"flex items-center gap-3"},qPe={class:"flex items-center gap-3 flex-1 min-w-0"},ZPe={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate flex-1"},QPe={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 whitespace-nowrap"},JPe={class:"flex items-center gap-1 text-xs text-slate-400 whitespace-nowrap"},e6e={key:0,class:"mt-1 ml-6 text-xs text-slate-500 dark:text-slate-400 line-clamp-1"},t6e={class:"contact-selector p-0 bg-transparent border-none shadow-none"},n6e={class:"px-4 py-3 border-b border-slate-200 dark:border-slate-700"},s6e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},a6e={class:"px-4 py-2"},o6e={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},l6e={key:0,class:"p-4 text-center text-sm text-slate-500"},i6e={key:1,class:"p-4 text-center"},r6e={class:"text-sm text-slate-500"},c6e={key:2,class:"divide-y divide-slate-100 dark:divide-slate-700"},d6e=["onClick"],u6e={class:"flex items-center gap-3"},p6e={class:"flex items-center gap-2"},m6e={key:0,class:"mt-1 ml-9 flex items-center gap-4 text-xs text-slate-500"},h6e={key:0,class:"flex items-center gap-1"},f6e={key:1,class:"flex items-center gap-1"},g6e={class:"notes-section pb-8"},_6e={class:"note-layout"},v6e={class:"note-content"},b6e={class:"flex items-start justify-between"},E6e={class:"note-text"},T6e={class:"flex items-center gap-1"},A6e=["onClick"],y6e={class:"icon-button"},S6e=["onClick"],I6e={class:"icon-button"},C6e={key:0,class:"note-links mt-3 mb-3"},x6e={key:0,class:"linked-item"},N6e={class:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},O6e={class:"text-sm text-blue-700 dark:text-blue-300"},w6e={key:1,class:"linked-conversation mt-2"},R6e={class:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"},$6e={class:"text-sm text-green-700 dark:text-green-300"},M6e={key:2,class:"linked-contact mt-2"},k6e={class:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800"},L6e={class:"text-sm text-purple-700 dark:text-purple-300"},D6e={class:"note-metadata"},P6e={class:"flex items-center gap-2"},B6e={class:"note-author"},F6e={class:"note-date"},U6e={key:1,class:"note-files"},G6e={class:"file-info"},V6e={class:"file-icon"},H6e=["href","title"],W6e=["onClick"],K6e={key:0,class:"note-images"},z6e=["src","alt","onClick"],j6e={key:1,class:"space-y-4"},Y6e={class:"flex items-center justify-between mb-3"},X6e={class:"flex items-center gap-2"},q6e={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},Z6e={class:"text-xs text-slate-500"},Q6e={class:"flex items-center gap-2"},J6e={class:"h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},eBe={key:0,class:"space-y-2"},tBe={class:"relative flex items-center cursor-pointer"},nBe=["checked","onChange"],sBe={class:"flex items-center gap-2 flex-1"},aBe={key:0,class:"flex items-center gap-1 px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full"},oBe={class:"truncate max-w-[150px]"},lBe={key:1,class:"flex items-center gap-1 px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full"},iBe={class:"truncate max-w-[150px]"},rBe={key:2,class:"flex items-center gap-1 px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full"},cBe={class:"truncate max-w-[150px]"},dBe={class:"flex items-center gap-1"},uBe=["onClick","title"],pBe=["onClick"],mBe=["onClick"],hBe={class:"mt-3"},fBe={class:"flex gap-2 mb-2"},gBe=["placeholder"],_Be={class:"flex gap-2"},vBe=["disabled"],bBe={key:2,class:"space-y-4"},EBe={class:"flex justify-between items-center"},TBe=["disabled"],ABe={key:0},yBe={class:"attachments-grid"},SBe={key:0,class:"attachment-section"},IBe={class:"section-title"},CBe={class:"images-grid"},xBe=["src","alt","onClick"],NBe={class:"attachment-info"},OBe={class:"flex flex-col"},wBe={class:"attachment-name"},RBe={class:"attachment-source"},$Be=["onClick"],MBe={key:1,class:"attachment-section"},kBe={class:"section-title"},LBe={class:"files-grid"},DBe={class:"file-info"},PBe={class:"file-icon"},BBe={class:"flex flex-col"},FBe=["href","title"],UBe={class:"file-source"},GBe=["onClick"],VBe={key:3,class:"space-y-4"},HBe={class:"flex justify-end mb-2"},WBe={key:0,class:"mb-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-auto max-h-96"},KBe={class:"text-xs"},zBe={key:1,class:"p-4 text-center bg-slate-50 dark:bg-slate-800 rounded-lg"},jBe={class:"text-sm text-slate-600 dark:text-slate-400"},YBe={key:2,class:"history-timeline"},XBe={class:"history-connector"},qBe={class:"history-icon"},ZBe={class:"history-content"},QBe={class:"history-header"},JBe={class:"flex items-center gap-2"},e9e={class:"history-title"},t9e={class:"history-date"},n9e={class:"history-details"},s9e={class:"history-text"},a9e={class:"history-author"},o9e={class:"text-xs text-slate-600 dark:text-slate-400"},l9e={key:4,class:"space-y-4"},i9e={key:0,class:"text-sm text-slate-500"},r9e={class:"w-1/3 font-medium flex items-center gap-1"},c9e=["onUpdate:modelValue","onChange"],d9e=["onUpdate:modelValue","onChange"],u9e=["onUpdate:modelValue","onChange"],p9e=["onUpdate:modelValue","onChange"],m9e={class:"w-full lg:w-1/3 p-4 space-y-6"},h9e={class:"p-4 space-y-4"},f9e={class:"text-lg font-medium text-slate-900 dark:text-slate-100"},g9e={class:"space-y-2"},_9e={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},v9e=["value"],b9e={class:"space-y-2"},E9e={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},T9e=["value"],A9e={class:"flex justify-end gap-2 mt-4"},y9e={class:"settings-modal"},S9e={class:"settings-header"},I9e={class:"text-lg font-medium"},C9e={class:"settings-content"},x9e={class:"settings-modal"},N9e={class:"settings-header"},O9e={class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},w9e={class:"text-sm text-slate-600 dark:text-slate-400 mt-1"},R9e={class:"settings-content"},$9e={class:"space-y-3"},M9e=["onClick"],k9e={class:"flex-1 min-w-0"},L9e={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate"},D9e={class:"text-xs text-slate-500 dark:text-slate-400 truncate"},P9e={__name:"KanbanItemDetails",props:{item:{type:Object,required:!0}},emits:["update:item","item-updated"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=Pn(),l=En(),{isStacklab:i}=Js(),r=F(!1),d=F(!1),u=F(!1),m=F([]),h=F([]),_=F([]),g=F(!1),T=F(!1),S=F(!1),b=F(null),A=F(null),y=F(null),x=F("notes"),$=F(""),N=F(!1),w=F(null),D=F(""),H=F(!1),B=F(null),k=F(n.item.checklist||[]),U=C(()=>N.value?k.value.filter(Me=>!Me.completed):k.value),G=C(()=>k.value.length),L=C(()=>k.value.filter(Me=>Me.completed).length),M=C(()=>G.value===0?0:L.value/G.value*100),R=C(()=>{var Ve;const Me=o.getters["funnel/getSelectedFunnel"];return!(Me!=null&&Me.stages)||!n.item.funnel_stage?"":((Ve=Me.stages[n.item.funnel_stage])==null?void 0:Ve.name)||n.item.funnel_stage}),P=C(()=>o.getters.getCurrentUser),W=async()=>{try{g.value=!0;const Ve=(await Dn.getItems()).data;let tt=[];Ve&&Ve.items?tt=Ve.items:Array.isArray(Ve)&&(tt=Ve),m.value=tt.map(vt=>{var xt,Dt,sn,We;return{id:vt.id,title:((xt=vt.item_details)==null?void 0:xt.title)||a("KANBAN.UNTITLED_ITEM"),description:(Dt=vt.item_details)==null?void 0:Dt.description,value:(sn=vt.item_details)==null?void 0:sn.value,priority:(We=vt.item_details)==null?void 0:We.priority,stage:vt.funnel_stage}})}catch(Me){console.error("Erro ao carregar itens:",Me)}finally{g.value=!1}};C(()=>{var tt,vt;const Me=((vt=(tt=n.item.item_details)==null?void 0:tt.priority)==null?void 0:vt.toLowerCase())||"none";return Me==="none"?null:{high:{label:a("KANBAN.PRIORITY_LABELS.HIGH"),class:"bg-n-ruby-3 dark:bg-n-ruby-8 text-n-ruby-9 dark:text-n-ruby-1"},medium:{label:a("KANBAN.PRIORITY_LABELS.MEDIUM"),class:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50"},low:{label:a("KANBAN.PRIORITY_LABELS.LOW"),class:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50"}}[Me]||null}),C(()=>{var Ve,tt;const Me={high:"bg-n-ruby-3 dark:bg-n-ruby-8 text-n-ruby-9 dark:text-n-ruby-1",medium:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50",low:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50",none:"bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-50"};return Me[((tt=(Ve=n.item.item_details)==null?void 0:Ve.priority)==null?void 0:tt.toLowerCase())||"none"]||Me.none}),C(()=>{var Me;return(Me=n.item.item_details)!=null&&Me.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.item.item_details.value):null});const Q=F(null),Z=F(!1),j=async Me=>{var Ve,tt,vt;if(Me)try{if(Z.value=!0,((Ve=n.item.assigned_agents)==null?void 0:Ve.length)>0)Q.value=n.item.assigned_agents[0];else if(n.item.agent)Q.value=n.item.agent;else{const xt=((vt=(tt=o.getters["funnel/getSelectedFunnel"])==null?void 0:tt.settings)==null?void 0:vt.agents)||[];Q.value=xt.find(Dt=>Dt.id===Me)||null}}catch(xt){console.error("Erro ao obter dados do agente:",xt)}finally{Z.value=!1}},X=C(()=>Q.value?{name:Q.value.name,avatar_url:Q.value.avatar_url||Q.value.thumbnail||""}:null),q=C(()=>n.item.conversation||null),se=F(!1),he=async Me=>{if(Me)try{if(se.value=!0,n.item.conversation)q.value=n.item.conversation;else{const tt=(await $l.get({assigneeType:["all"],status:["open","pending","resolved"]})).data.data.payload;q.value=tt.find(vt=>vt.id===Me)}}catch(Ve){console.error("Erro ao carregar dados da conversa:",Ve)}finally{se.value=!1}},be=F(""),ne=F([]),J=F(!1),ue=F(null);F("");const Ne=F([]),Re=F(!1),Ze=F(""),Xe=Me=>{try{return!!(Me&&typeof Me=="object"&&Me.fileType&&typeof Me.fileType=="string"&&Me.fileType.startsWith("image/"))}catch{return!1}},Qe=Me=>{var Ve;return((Ve=Me.attachments)==null?void 0:Ve.some(tt=>!Xe(tt)))||!1},Je=Me=>{var Ve;return((Ve=Me.attachments)==null?void 0:Ve.some(Xe))||!1},st=Me=>{var Ve;return((Ve=Me.attachments)==null?void 0:Ve.filter(tt=>!Xe(tt)))||[]},ht=Me=>{var Ve;return((Ve=Me.attachments)==null?void 0:Ve.filter(Xe))||[]},wt=Me=>!Me||!Me.fileType?"":Me.fileType.includes("pdf")?"":"",ee=async(Me,Ve)=>{var tt;try{const vt={id:Date.now(),type:Me,details:Ve,created_at:new Date().toISOString(),user:{id:P.value.id,name:P.value.name,avatar_url:P.value.avatar_url}},xt=[...((tt=n.item.item_details)==null?void 0:tt.activities)||[],vt],Dt={...n.item,item_details:{...n.item.item_details,activities:xt}},{data:sn}=await Dn.updateItem(n.item.id,Dt);s("update:item",sn),s("item-updated"),n.item.item_details=sn.item_details}catch(vt){console.error("Erro ao registrar atividade:",vt)}},de=async()=>{var Me,Ve;if(!(!be.value.trim()&&!((Me=Ne.value)!=null&&Me.length)&&!b.value&&!A.value&&!y.value))try{if(J.value=!0,ue.value){const tt=ne.value.map(Dt=>Dt.id===ue.value?{...Dt,text:be.value,attachments:[...Dt.attachments||[],...Ne.value],linked_item_id:b.value||Dt.linked_item_id,linked_conversation_id:A.value||Dt.linked_conversation_id,linked_contact_id:y.value||Dt.linked_contact_id,updated_at:new Date().toISOString(),author:P.value.name,author_id:P.value.id,author_avatar:P.value.avatar_url}:Dt),vt={...n.item,item_details:{...n.item.item_details,notes:tt}},{data:xt}=await Dn.updateItem(n.item.id,vt);s("update:item",xt),s("item-updated"),ne.value=xt.item_details.notes,n.item.item_details=xt.item_details,await ee("note_added",{note_text:be.value.substring(0,100),has_attachments:Ne.value.length>0,has_links:!!(b.value||A.value||y.value)})}else{const tt={id:Date.now(),text:be.value,created_at:new Date().toISOString(),attachments:Ne.value,linked_item_id:b.value||null,linked_conversation_id:A.value||null,linked_contact_id:y.value||null,author:P.value.name,author_id:P.value.id,author_avatar:P.value.avatar_url},vt=[...((Ve=n.item.item_details)==null?void 0:Ve.notes)||[],tt],xt={...n.item,item_details:{...n.item.item_details,notes:vt}},{data:Dt}=await Dn.updateItem(n.item.id,xt);s("update:item",Dt),s("item-updated"),ne.value=Dt.item_details.notes,n.item.item_details=Dt.item_details,await ee("note_added",{note_text:be.value.substring(0,100),has_attachments:Ne.value.length>0,has_links:!!(b.value||A.value||y.value)})}be.value="",Ne.value=[],Ze.value="",b.value=null,A.value=null,y.value=null,ue.value=null,r.value=!1,d.value=!1,u.value=!1}catch(tt){console.error("Erro ao adicionar nota:",tt)}finally{J.value=!1}};ot(()=>{var Me;return(Me=n.item.item_details)==null?void 0:Me.notes},Me=>{Me&&(ne.value=Me)},{immediate:!0});const ie=async()=>{try{T.value=!0;const Me=await $l.get({});h.value=Me.data.data.payload.map(Ve=>{var tt;return{id:Ve.id,title:Ve.meta.sender.name||Ve.meta.sender.email||a("KANBAN.ITEM_CONVERSATION.NO_CONTACT"),description:((tt=Ve.messages[0])==null?void 0:tt.content)||a("KANBAN.NO_MESSAGES"),unread_count:Ve.unread_count,created_at:new Date(Ve.created_at).toLocaleDateString(),channel_type:Ve.channel_type,status:Ve.status}})}catch(Me){console.error("Erro ao carregar conversas:",Me)}finally{T.value=!1}},Ce=Me=>{A.value=Me.id,d.value=!1},Se=async()=>{var Me;try{S.value=!0;const Ve=await wi.get();_.value=((Me=Ve.data)==null?void 0:Me.payload)||[]}catch(Ve){console.error("Erro ao carregar contatos:",Ve)}finally{S.value=!1}},je=Me=>{y.value=Me.id,u.value=!1},Ke=Me=>m.value.find(Ve=>Ve.id===Me),$e=Me=>{b.value=Me.id,r.value=!1},Be=async()=>{if($.value.trim())try{const Me={id:Date.now(),text:$.value.trim(),completed:!1,created_at:new Date().toISOString()},Ve=[...k.value,Me],tt={...n.item,checklist:Ve},{data:vt}=await Dn.updateItem(n.item.id,tt);k.value=vt.checklist,n.item.checklist=vt.checklist,await ee("checklist_item_added",{item_text:Me.text}),$.value=""}catch(Me){console.error("Erro ao adicionar item ao checklist:",Me)}},Ue=async Me=>{try{const Ve=k.value.map(xt=>({...xt,completed:xt.id===Me.id?!xt.completed:xt.completed})),tt={...n.item,checklist:Ve},{data:vt}=await Dn.updateItem(n.item.id,tt);k.value=vt.checklist,n.item.checklist=vt.checklist,s("update:item",vt),s("item-updated"),await ee("checklist_item_toggled",{item_text:Me.text,completed:!Me.completed})}catch(Ve){console.error("Erro ao atualizar item do checklist:",Ve)}},ge=async()=>{try{const Me={...n.item,checklist:[]},{data:Ve}=await Dn.updateItem(n.item.id,Me);k.value=Ve.checklist||[],s("update:item",Ve),s("item-updated")}catch(Me){console.error("Erro ao deletar checklist:",Me)}},ae=async Me=>{try{const Ve=k.value.filter(xt=>xt.id!==Me.id);k.value=Ve;const tt={...n.item,checklist:Ve},{data:vt}=await Dn.updateItem(n.item.id,tt);s("update:item",vt),s("update:item",vt),s("item-updated")}catch(Ve){k.value=n.item.checklist||[],console.error("Erro ao remover item do checklist:",Ve)}},ve=()=>{r.value?r.value=!1:(r.value=!0,d.value=!1,u.value=!1)},Y=()=>{d.value?d.value=!1:(d.value=!0,r.value=!1,u.value=!1)},oe=()=>{u.value?u.value=!1:(u.value=!0,r.value=!1,d.value=!1)};C(()=>{if(r.value)return a("KANBAN.CANCEL");if(b.value){const Me=m.value.find(Ve=>Ve.id===b.value);return(Me==null?void 0:Me.title)||a("KANBAN.FORM.NOTES.LINK_ITEM")}return a("KANBAN.FORM.NOTES.LINK_ITEM")}),C(()=>{if(d.value)return a("KANBAN.CANCEL");if(A.value){const Me=h.value.find(Ve=>Ve.id===A.value);return Me?`#${Me.id} - ${Me.title}`:a("KANBAN.FORM.NOTES.LINK_CONVERSATION")}return a("KANBAN.FORM.NOTES.LINK_CONVERSATION")}),C(()=>{if(u.value)return a("KANBAN.CANCEL");if(y.value){const Me=_.value.find(Ve=>Ve.id===y.value);return(Me==null?void 0:Me.name)||a("KANBAN.FORM.NOTES.LINK_CONTACT")}return a("KANBAN.FORM.NOTES.LINK_CONTACT")}),C(()=>{if(r.value)return a("KANBAN.CANCEL");if(b.value){const Me=m.value.find(Ve=>Ve.id===b.value);return(Me==null?void 0:Me.title)||a("KANBAN.FORM.NOTES.LINK_ITEM")}return a("KANBAN.FORM.NOTES.LINK_ITEM")});const te=Me=>{w.value=Me.id,D.value=Me.text,$.value=Me.text},le=async()=>{try{const Me=k.value.map(vt=>vt.id===w.value?{...vt,text:$.value}:vt),Ve={...n.item,item_details:{...n.item.item_details,checklist:Me}},{data:tt}=await Dn.updateItem(n.item.id,Ve);k.value=Me,w.value=null,D.value="",$.value="",s("update:item",tt),s("item-updated")}catch(Me){console.error("Erro ao editar item do checklist:",Me)}},ye=()=>{w.value=null,D.value="",$.value=""},me=async(Me,Ve)=>{try{const{data:tt}=await Dn.assignAgentToChecklistItem(n.item.id,Me.id,Ve);k.value=tt.checklist,n.item.checklist=tt.checklist,s("update:item",tt),s("item-updated"),await ee("checklist_item_agent_assigned",{item_text:Me.text,agent_id:Ve})}catch(tt){console.error("Erro ao atribuir agente ao item do checklist:",tt)}},Ie=async Me=>{try{const{data:Ve}=await Dn.removeAgentFromChecklistItem(n.item.id,Me.id);k.value=Ve.checklist,n.item.checklist=Ve.checklist,s("update:item",Ve),s("item-updated"),await ee("checklist_item_agent_removed",{item_text:Me.text})}catch(Ve){console.error("Erro ao remover agente do item do checklist:",Ve)}},Oe=C(()=>o.getters["agents/getAgents"]),we=Me=>{if(!Me.agent_id)return null;const Ve=Oe.value.find(tt=>tt.id===Me.agent_id);return Ve?{id:Ve.id,name:Ve.name,avatar_url:Ve.avatar_url||""}:null},Ye=Me=>{B.value=Me,H.value=!0},He=()=>{H.value=!1,B.value=null},et=async Me=>{B.value&&(await me(B.value,Me),He())},bt=async Me=>{var Ve;if(Me){if(Ze.value=Me.file.name,!((Ve=n.item)!=null&&Ve.id)){console.error("ID do item no encontrado:",n.item);return}Re.value=!0;try{if(Ci(Me,Nc)){const tt=new FormData;tt.append("attachment",Me.file);const vt=`/api/v1/accounts/${o.getters.getCurrentAccountId}/kanban/items/${n.item.id}/note_attachments`,xt=await axios.post(vt,tt,{headers:{"Content-Type":"multipart/form-data"}}),Dt={id:xt.data.id.toString(),url:xt.data.attachment_url,filename:Me.file.name,fileType:Me.file.type||"application/octet-stream",source:{type:"note",id:Date.now()}};Ne.value=[...Ne.value,Dt]}}catch(tt){console.error("Erro ao fazer upload:",tt.message)}finally{Re.value=!1}}},Nt=async Me=>{const Ve=Me.source.type==="item",tt=Ve?`/api/v1/accounts/${o.getters.getCurrentAccountId}/kanban/items/${n.item.id}/attachments/${Me.id}`:`/api/v1/accounts/${o.getters.getCurrentAccountId}/kanban/items/${n.item.id}/note_attachments/${Me.id}`;try{if(await axios.delete(tt),Ve){const vt=n.item.attachments.filter(sn=>sn.id!==Me.id),xt={...n.item,attachments:vt},{data:Dt}=await Dn.updateItem(n.item.id,xt);s("update:item",Dt),s("item-updated"),n.item.attachments=Dt.attachments}else{const vt=ne.value.map(sn=>sn.id===Me.source.id?{...sn,attachments:sn.attachments.filter(We=>We.id!==Me.id)}:sn),xt={...n.item,item_details:{...n.item.item_details,notes:vt}},{data:Dt}=await Dn.updateItem(n.item.id,xt);s("update:item",Dt),s("item-updated"),ne.value=Dt.item_details.notes,n.item.item_details=Dt.item_details}}catch(vt){console.error("Erro ao remover anexo:",vt.message)}},ct=Me=>{if(!Me)return"";try{return ts(new Date(Me),"dd/MM/yyyy HH:mm",{locale:mr})}catch(Ve){return console.error("Erro ao formatar data:",Ve),""}},Ot=C(()=>{var tt;const Me=ne.value.reduce((vt,xt)=>xt.attachments&&Array.isArray(xt.attachments)?[...vt,...xt.attachments.map(Dt=>{var sn,We;return{...Dt,source:{type:"note",id:xt.id,date:xt.created_at,text:((sn=xt.text)==null?void 0:sn.substring(0,50))+(((We=xt.text)==null?void 0:We.length)>50?"...":"")}}})]:vt,[]),Ve=((tt=n.item.attachments)==null?void 0:tt.map(vt=>({...vt,source:{type:"item",id:n.item.id}})))||[];return[...Me,...Ve]});pt(()=>{var tt,vt,xt,Dt,sn,We;(tt=n.item.item_details)!=null&&tt.agent_id&&j(n.item.item_details.agent_id),Se(),W(),ie(),(vt=n.item.item_details)!=null&&vt.notes&&(ne.value=n.item.item_details.notes),n.item.checklist&&(k.value=n.item.checklist),n.item.agent?(Q.value=n.item.agent,Z.value=!1):(xt=n.item.item_details)!=null&&xt.agent_id&&j(n.item.item_details.agent_id),n.item.conversation?(q.value=n.item.conversation,se.value=!1):(Dt=n.item.item_details)!=null&&Dt.conversation_id&&he((sn=n.item.item_details)==null?void 0:sn.conversation_id);const Me=Zt=>{const Tn=Zt.target,is=Tn.closest(".item-selector"),Ro=Tn.closest(".conversation-selector"),Yn=Tn.closest(".contact-selector"),ni=Tn.closest(".action-button");!is&&!ni&&r.value&&(r.value=!1),!Ro&&!ni&&d.value&&(d.value=!1),!Yn&&!ni&&u.value&&(u.value=!1)};document.addEventListener("mousedown",Me),zs(()=>{document.removeEventListener("mousedown",Me)});let Ve=[];Array.isArray(n.item.custom_attributes)&&n.item.custom_attributes.length>0?Ve=n.item.custom_attributes:Array.isArray((We=n.item.item_details)==null?void 0:We.custom_attributes)&&n.item.item_details.custom_attributes.length>0&&(Ve=n.item.item_details.custom_attributes),wo.value=Ve.map(Zt=>({...Zt,value:Zt.value??""})),Wa()}),ot(x,Me=>{Me==="notes"&&u.value&&_.value.length===0&&Se()});const Le=async Me=>{try{J.value=!0;const Ve=ne.value.filter(xt=>xt.id!==Me),tt={...n.item,item_details:{...n.item.item_details,notes:Ve}},{data:vt}=await Dn.updateItem(n.item.id,tt);s("update:item",vt),s("item-updated"),ne.value=vt.item_details.notes}catch(Ve){console.error("Erro ao remover a nota:",Ve)}finally{J.value=!1}},qe=Me=>{ue.value=Me.id,be.value=Me.text},De=async Me=>{var Ve;if(Me){if(!((Ve=n.item)!=null&&Ve.id)){console.error("ID do item no encontrado:",n.item);return}Re.value=!0;try{if(Ci(Me,Nc)){const tt=new FormData;tt.append("attachment",Me.file);const vt=`/api/v1/accounts/${o.getters.getCurrentAccountId}/kanban/items/${n.item.id}/attachments`,xt=await axios.post(vt,tt,{headers:{"Content-Type":"multipart/form-data"}}),Dt={id:xt.data.id.toString(),url:xt.data.attachment_url,filename:Me.file.name,fileType:Me.file.type||"application/octet-stream",source:{type:"item",id:n.item.id}},sn=[...n.item.attachments||[],Dt],We={...n.item,attachments:sn},{data:Zt}=await Dn.updateItem(n.item.id,We);s("update:item",Zt),s("item-updated"),n.item.attachments=Zt.attachments,await ee("attachment_added",{filename:Me.file.name,file_type:Me.file.type})}}catch(tt){console.error("Erro ao fazer upload:",tt.message)}finally{Re.value=!1}}},Te=C(()=>{var Ve;console.log("Histrico: item_details",n.item.item_details);const Me=((Ve=n.item.item_details)==null?void 0:Ve.activities)||[];return console.log("Atividades encontradas:",Me.length),Me.map(tt=>{var sn,We;console.log("Processando atividade:",tt.type,tt);let vt,xt,Dt;switch(tt.type){case"attachment_added":vt="attach",xt=a("KANBAN.HISTORY.ATTACHMENT_ADDED"),Dt=`${a("KANBAN.HISTORY.FILE")}: ${tt.details.filename}`;break;case"note_added":vt="comment-add",xt=a("KANBAN.HISTORY.NOTE_ADDED"),Dt=tt.details.note_text;break;case"checklist_item_added":vt="add-circle",xt=a("KANBAN.HISTORY.CHECKLIST_ITEM_ADDED"),Dt=tt.details.item_text;break;case"checklist_item_toggled":vt=tt.details.completed?"checkmark":"dismiss",xt=a("KANBAN.HISTORY.CHECKLIST_ITEM_UPDATED"),Dt=`${tt.details.item_text} - ${tt.details.completed?a("KANBAN.HISTORY.COMPLETED"):a("KANBAN.HISTORY.PENDING")}`;break;case"priority_changed":vt="alert",xt=a("KANBAN.HISTORY.PRIORITY_CHANGED"),Dt=`${tt.details.old_priority||a("KANBAN.HISTORY.NONE")}  ${tt.details.new_priority}`;break;case"status_changed":vt="status",xt=a("KANBAN.HISTORY.STATUS_CHANGED"),Dt=`${tt.details.old_status||a("KANBAN.HISTORY.PENDING")}  ${tt.details.new_status}`;break;case"stage_changed":vt="arrow-right",xt=a("KANBAN.HISTORY.STAGE_CHANGED"),Dt=`${tt.details.old_stage||"-"}  ${tt.details.new_stage}`;break;case"value_changed":vt="credit-card-person",xt=a("KANBAN.HISTORY.VALUE_CHANGED");const Zt=tt.details.old_value||"0",Tn=tt.details.new_value,is=((sn=tt.details.currency)==null?void 0:sn.symbol)||"R$";Dt=`${is} ${Zt}  ${is} ${Tn}`;break;case"agent_changed":vt="person",xt=a("KANBAN.HISTORY.AGENT_CHANGED"),Dt=`${tt.details.old_agent||a("KANBAN.HISTORY.NONE")}  ${tt.details.new_agent||a("KANBAN.HISTORY.NONE")}`;break;case"conversation_linked":vt="chat",xt=a("KANBAN.HISTORY.CONVERSATION_LINKED"),Dt=`${((We=tt.details.user)==null?void 0:We.name)||a("KANBAN.SYSTEM")} ${a("KANBAN.HISTORY.LINKED_CONVERSATION")} #${tt.details.conversation_id} - ${tt.details.conversation_title}`;break;default:vt="info",xt=`${a("KANBAN.HISTORY.ACTIVITY")}: ${tt.type}`,Dt=JSON.stringify(tt.details)}return{...tt,icon:vt,title:xt,details:Dt}}).reverse()}),Ge=(Me,Ve)=>{if(Me.stopPropagation(),!Ve)return;const tt=o.getters.getCurrentAccountId;try{l.push({name:"inbox_conversation_through_inbox",params:{accountId:tt,conversationId:Ve}})}catch(vt){console.error("Erro ao navegar para a conversa:",vt),window.location.href=`/app/accounts/${tt}/conversations/${Ve}`}},nt=(Me,Ve)=>{!Ve||!q.value||(Me.preventDefault(),Tt.value=!0,Kt.value={x:Me.clientX,y:Me.clientY})},Tt=F(!1),Kt=F({x:0,y:0}),dt=F(!1),$t=({template:Me,conversationId:Ve})=>{dt.value=!1},Gt=()=>{var tt;if(Tt.value=!1,console.log("Dados do item:",n.item),console.log("Dados da conversa:",n.item.conversation),!((tt=n.item.conversation)!=null&&tt.id)){console.log("ID da conversa no encontrado");return}const Me=o.getters.getCurrentAccountId,Ve=n.item.conversation.id;console.log("Navegando para conversa:",{accountId:Me,conversationId:Ve,route:"inbox_conversation_through_inbox"});try{l.push({name:"inbox_conversation_through_inbox",params:{accountId:Me,conversationId:Ve}})}catch(vt){console.error("Erro na navegao:",vt),window.location.href=`/app/accounts/${Me}/conversations/${Ve}`}};ot(dt,Me=>{Me||jt(()=>{Tt.value=!1})});const mn=[{id:"notes",icon:"document",label:a("KANBAN.TABS.NOTES")},{id:"checklist",icon:"checkmark-circle",label:a("KANBAN.TABS.CHECKLIST")},{id:"attachments",icon:"attach",label:a("KANBAN.TABS.ATTACHMENTS")},{id:"history",icon:"calendar-clock",label:a("KANBAN.TABS.HISTORY")}];C(()=>{var Ve,tt,vt,xt;const Me=((tt=(Ve=q.value)==null?void 0:Ve.contact)==null?void 0:tt.name)||((xt=(vt=q.value)==null?void 0:vt.contact)==null?void 0:xt.email)||"";return Me.length>17?`${Me.substring(0,10)}...`:Me}),pt(()=>{var Me,Ve;console.log("KanbanItemDetails montado com item:",n.item),console.log("Item details:",n.item.item_details),(Me=n.item.item_details)!=null&&Me.activities&&console.log("Atividades:",(Ve=n.item.item_details)==null?void 0:Ve.activities.length)});const On=C(()=>{var Me;return((Me=n.item.item_details)==null?void 0:Me.description)||n.item.description||""});F("");const Rn=Me=>{var Ve,tt;switch(Me){case"move":gn.value=!0;break;case"assign":console.log("=== Debug Navegao ===");const vt=o.getters.getCurrentAccountId,xt=(tt=(Ve=n.item.conversation)==null?void 0:Ve.contact)==null?void 0:tt.id;if(!xt){console.log("ID do contato no encontrado");return}const Dt={name:"contacts_show",params:{accountId:vt,id:xt}};console.log("Route Config:",Dt);try{console.log("Tentando navegar via router.push..."),l.push(Dt)}catch(sn){console.error("Erro na navegao:",sn);const We=`/app/accounts/${vt}/contacts/${xt}`;console.log("Usando fallback URL:",We),window.location.href=We}break;case"chat":dt.value=!0;break;case"duplicate":Fs();break}},gn=F(!1),wn=F({funnel_id:n.item.funnel_id,funnel_stage:n.item.funnel_stage}),ls=C(()=>{const Me=Ha.value.find(Ve=>String(Ve.id)===String(wn.value.funnel_id));return Me!=null&&Me.stages?Object.entries(Me.stages).map(([Ve,tt])=>({id:Ve,name:tt.name,position:tt.position})).sort((Ve,tt)=>Ve.position-tt.position):[]}),ns=async()=>{try{const Me={...n.item,funnel_id:wn.value.funnel_id,funnel_stage:wn.value.funnel_stage},{data:Ve}=await Dn.updateItem(n.item.id,Me);s("update:item",Ve),gn.value=!1,await ee("stage_changed",{old_stage:n.item.funnel_stage,new_stage:wn.value.funnel_stage})}catch(Me){console.error("Erro ao mover item:",Me)}},Fs=async()=>{try{const Me={...n.item,id:void 0,item_details:{...n.item.item_details,title:`${n.item.item_details.title} (Cpia)`}},{data:Ve}=await Dn.createItem(Me);It.emit("newToastMessage",{message:"Item duplicado com sucesso",action:{type:"success"}})}catch{It.emit("newToastMessage",{message:"Erro ao duplicar o item",action:{type:"error"}})}},gt=F([]),vn=F(!1),vs=async()=>{var Ve,tt;const Me=o.getters.getCurrentAccountId;if(!((tt=(Ve=n.item.item_details)==null?void 0:Ve.conversation)!=null&&tt.id)||!Me){console.log("No conversation ID or account ID found");return}try{vn.value=!0;const vt=await Au.getPreviousMessages({accountId:Me,conversationId:n.item.conversation.id,before:Math.floor(Date.now()/1e3)});gt.value=vt.data.payload.filter(xt=>xt.message_type===1).map(xt=>{var Dt,sn;return{id:xt.id,text:xt.content,isMe:((Dt=xt.sender)==null?void 0:Dt.id)===((sn=P.value)==null?void 0:sn.id),timestamp:new Date(Number(xt.created_at)*1e3).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),sender:xt.sender}}),jt(()=>{ma()})}catch(vt){console.error("Error loading messages:",vt)}finally{vn.value=!1}},ma=()=>{const Me=document.querySelector(".chat-messages");Me&&(Me.scrollTop=Me.scrollHeight)};ot(()=>{var Me,Ve;return(Ve=(Me=n.item.item_details)==null?void 0:Me.conversation)==null?void 0:Ve.id},Me=>{console.log("Conversation ID changed:",Me),Me&&vs()}),pt(()=>{console.log("Component mounted, loading messages..."),vs()});const Ha=C(()=>o.getters["funnel/getFunnels"]||[]);ot(()=>wn.value.funnel_id,Me=>{const Ve=Ha.value.find(vt=>String(vt.id)===String(Me)),tt=Ve&&Object.keys(Ve.stages)[0];wn.value.funnel_stage=tt||""}),C(()=>{const Me=[];return b.value&&Me.push({type:"item",id:b.value}),A.value&&Me.push({type:"conversation",id:A.value}),y.value&&Me.push({type:"contact",id:y.value}),Me}),mn.push({id:"custom_fields",icon:"edit",label:a("KANBAN.TABS.CUSTOM_FIELDS")});const wo=F([]);function Wa(){n.item.item_details&&Array.isArray(n.item.item_details.custom_attributes)?wo.value=n.item.item_details.custom_attributes.map(Me=>({...Me})):wo.value=[]}pt(()=>{Wa()}),ot(()=>n.item.item_details&&n.item.item_details.custom_attributes,()=>{Wa()},{immediate:!0,deep:!0});const yl=C(()=>{var Dt;const Me=Ha.value.find(sn=>String(sn.id)===String(n.item.funnel_id)),Ve=Array.isArray(Me==null?void 0:Me.global_custom_attributes)?Me.global_custom_attributes:[],tt=Array.isArray((Dt=n.item.item_details)==null?void 0:Dt.custom_attributes)?n.item.item_details.custom_attributes:[],vt=Ve.map(sn=>{const We=tt.find(Zt=>Zt.name===sn.name&&Zt.type===sn.type);return{name:sn.name,type:sn.type,value:We?We.value:"",_isGlobal:!0}}),xt=tt.filter(sn=>!Ve.some(We=>We.name===sn.name&&We.type===sn.type));return[...vt,...xt]}),$n=F([]);ot(()=>yl.value,Me=>{$n.value=Me.map(Ve=>({...Ve}))},{immediate:!0,deep:!0});function Ma(Me,Ve){$n.value[Me].value=Ve}async function Ka(){try{const Me=$n.value.map(vt=>({name:vt.name,type:vt.type,value:vt.value})),Ve={...n.item,custom_attributes:Me,item_details:{...n.item.item_details,custom_attributes:Me}},{data:tt}=await Dn.updateItem(n.item.id,Ve);s("update:item",tt),s("item-updated")}catch(Me){console.error("Erro ao salvar campos personalizados:",Me)}}const za=F(""),ja=F(""),ft=F(""),kt=C(()=>za.value?m.value.filter(Me=>(Me.title||"").toLowerCase().includes(za.value.toLowerCase())):m.value),dn=C(()=>ja.value?h.value.filter(Me=>((Me.title||"")+" "+(Me.description||"")).toLowerCase().includes(ja.value.toLowerCase())):h.value),In=C(()=>ft.value?_.value.filter(Me=>(Me.name||"").toLowerCase().includes(ft.value.toLowerCase())):_.value);return(Me,Ve)=>{var vt,xt,Dt,sn;const tt=z("fluent-icon");return p(),f(fe,null,[c("div",z5e,[c("div",j5e,[v(K5e,{item:n.item,"agent-info":X.value,"loading-agent":Z.value,"conversation-data":q.value,"loading-conversation":se.value,"current-stage-name":R.value,"item-description":On.value,onNavigateToConversation:Ge,onContextMenu:nt},null,8,["item","agent-info","loading-agent","conversation-data","loading-conversation","current-stage-name","item-description"]),c("div",Y5e,[c("div",X5e,[c("div",q5e,[(p(),f(fe,null,Ae(mn,We=>c("button",{key:We.id,class:re(["tab-button flex-shrink-0",x.value===We.id?"tab-active":"tab-inactive"]),onClick:Zt=>x.value=We.id},[c("div",Q5e,[v(tt,{icon:We.icon,size:"16"},null,8,["icon"]),Ee(" "+E(We.label),1)])],10,Z5e)),64))])]),c("div",J5e,[x.value==="notes"?(p(),f("div",ePe,[c("div",tPe,[pe(c("textarea",{"onUpdate:modelValue":Ve[0]||(Ve[0]=We=>be.value=We),class:"w-full px-3 py-2 text-sm border border-slate-200 bg-slate-50 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300 resize-none",placeholder:I(a)("KANBAN.FORM.NOTES.PLACEHOLDER"),rows:"3"},null,8,nPe),[[mt,be.value]]),c("div",sPe,[c("div",aPe,[I(i)===!0?(p(),V(I(bu),{key:0,ref:"upload",accept:I(fu),onInputFile:bt},{default:K(()=>[c("button",{class:"action-button hover:bg-slate-100 dark:hover:bg-slate-600",disabled:Re.value},[v(tt,{icon:"attach",size:"20"}),Re.value?(p(),f("span",lPe,"...")):O("",!0)],8,oPe)]),_:1},8,["accept"])):O("",!0),I(i)===!0?(p(),f("button",{key:1,class:"action-button",onClick:ve},[v(tt,{icon:"link",size:"20"})])):O("",!0),I(i)===!0?(p(),f("button",{key:2,class:"action-button",onClick:Y},[v(tt,{icon:"chat",size:"20"})])):O("",!0),I(i)===!0?(p(),f("button",{key:3,class:"action-button",onClick:oe},[v(tt,{icon:"person",size:"20"})])):O("",!0)]),Ze.value?(p(),f("div",iPe,[v(tt,{icon:"document",size:"12"}),c("span",rPe,E(Ze.value),1)])):O("",!0)]),b.value||A.value||y.value?(p(),f("div",cPe,[b.value?(p(),f("div",dPe,[c("div",uPe,[c("div",pPe,[v(tt,{icon:"link",size:"14",class:"text-blue-600 dark:text-blue-400"}),c("span",mPe,E(((vt=Ke(b.value))==null?void 0:vt.title)||`Item #${b.value}`),1)]),c("button",{class:"p-1 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300",onClick:Ve[1]||(Ve[1]=We=>b.value=null)},[v(tt,{icon:"dismiss",size:"12"})])])])):O("",!0),A.value?(p(),f("div",hPe,[c("div",fPe,[c("div",gPe,[v(tt,{icon:"chat",size:"14",class:"text-green-600 dark:text-green-400"}),c("span",_Pe," Conversa #"+E(A.value),1)]),c("button",{class:"p-1 text-green-400 hover:text-green-600 dark:hover:text-green-300",onClick:Ve[2]||(Ve[2]=We=>A.value=null)},[v(tt,{icon:"dismiss",size:"12"})])])])):O("",!0),y.value?(p(),f("div",vPe,[c("div",bPe,[c("div",EPe,[v(tt,{icon:"person",size:"14",class:"text-purple-600 dark:text-purple-400"}),c("span",TPe,E(((xt=_.value.find(We=>We.id===y.value))==null?void 0:xt.name)||`Contato #${y.value}`),1)]),c("button",{class:"p-1 text-purple-400 hover:text-purple-600 dark:hover:text-purple-300",onClick:Ve[3]||(Ve[3]=We=>y.value=null)},[v(tt,{icon:"dismiss",size:"12"})])])])):O("",!0)])):O("",!0),c("button",{class:"primary-button",disabled:!be.value.trim()&&!((Dt=Ne.value.value)!=null&&Dt.length)&&!b.value&&!A.value&&!y.value,onClick:de},E(ue.value?I(a)("SAVE"):I(a)("KANBAN.ADD")),9,APe)]),r.value?(p(),V(qt,{key:0,show:r.value,onClose:Ve[5]||(Ve[5]=We=>r.value=!1)},{default:K(()=>[c("div",yPe,[c("div",SPe,[c("h4",IPe,E(I(a)("KANBAN.FORM.NOTES.SELECT_ITEM")),1)]),c("div",CPe,[pe(c("input",{"onUpdate:modelValue":Ve[4]||(Ve[4]=We=>za.value=We),type:"text",class:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",placeholder:"Buscar..."},null,512),[[mt,za.value]])]),c("div",xPe,[g.value?(p(),f("div",NPe,[Ve[22]||(Ve[22]=c("span",{class:"loading-spinner w-4 h-4 mr-2"},null,-1)),Ee(" "+E(I(a)("KANBAN.LOADING")),1)])):kt.value.length===0?(p(),f("div",OPe,[c("p",wPe,E(I(a)("KANBAN.FORM.NOTES.NO_ITEMS")),1)])):(p(),f("div",RPe,[(p(!0),f(fe,null,Ae(kt.value,We=>(p(),f("button",{key:We.id,class:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:bg-slate-50 dark:focus:bg-slate-700",onClick:Zt=>$e(We)},[c("div",MPe,[c("div",{class:re(["flex-shrink-0 w-1.5 h-5 rounded-full",{"bg-n-ruby-9":We.priority==="high","bg-yellow-500":We.priority==="medium","bg-green-500":We.priority==="low","bg-slate-300":We.priority==="none"}])},null,2),c("div",kPe,[c("h4",LPe,E(We.title),1),c("span",DPe,E(We.stage_name),1),c("span",PPe,[v(tt,{icon:"calendar",size:"12"}),Ee(" "+E(We.createdAt),1)])])]),We.description?(p(),f("p",BPe,E(We.description),1)):O("",!0)],8,$Pe))),128))]))])])]),_:1},8,["show"])):O("",!0),d.value?(p(),V(qt,{key:1,show:d.value,onClose:Ve[7]||(Ve[7]=We=>d.value=!1)},{default:K(()=>[c("div",FPe,[c("div",UPe,[c("h4",GPe,E(I(a)("KANBAN.FORM.NOTES.SELECT_CONVERSATION")),1)]),c("div",VPe,[pe(c("input",{"onUpdate:modelValue":Ve[6]||(Ve[6]=We=>ja.value=We),type:"text",class:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",placeholder:"Buscar..."},null,512),[[mt,ja.value]])]),c("div",HPe,[T.value?(p(),f("div",WPe,[Ve[23]||(Ve[23]=c("span",{class:"loading-spinner w-4 h-4 mr-2"},null,-1)),Ee(" "+E(I(a)("KANBAN.LOADING")),1)])):dn.value.length===0?(p(),f("div",KPe,[c("p",zPe,E(I(a)("KANBAN.FORM.NOTES.NO_CONVERSATIONS")),1)])):(p(),f("div",jPe,[(p(!0),f(fe,null,Ae(dn.value,We=>(p(),f("button",{key:We.id,class:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:bg-slate-50 dark:focus:bg-slate-700",onClick:Zt=>Ce(We)},[c("div",XPe,[c("div",{class:re(["flex-shrink-0 w-1.5 h-5 rounded-full",{"bg-green-500":We.status==="open","bg-yellow-500":We.status==="pending","bg-slate-500":We.status==="resolved"}])},null,2),c("div",qPe,[c("h4",ZPe," #"+E(We.id)+" - "+E(We.title),1),c("span",QPe,E(We.channel_type),1),c("span",JPe,[v(tt,{icon:"contact-card",size:"12"}),Ee(" "+E(We.created_at),1)])])]),We.description?(p(),f("p",e6e,E(We.description),1)):O("",!0)],8,YPe))),128))]))])])]),_:1},8,["show"])):O("",!0),u.value?(p(),V(qt,{key:2,show:u.value,onClose:Ve[9]||(Ve[9]=We=>u.value=!1)},{default:K(()=>[c("div",t6e,[c("div",n6e,[c("h4",s6e,E(I(a)("KANBAN.FORM.NOTES.SELECT_CONTACT")),1)]),c("div",a6e,[pe(c("input",{"onUpdate:modelValue":Ve[8]||(Ve[8]=We=>ft.value=We),type:"text",class:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",placeholder:"Buscar..."},null,512),[[mt,ft.value]])]),c("div",o6e,[S.value?(p(),f("div",l6e,[Ve[24]||(Ve[24]=c("span",{class:"loading-spinner w-4 h-4 mr-2"},null,-1)),Ee(" "+E(I(a)("KANBAN.LOADING")),1)])):In.value.length===0?(p(),f("div",i6e,[c("p",r6e,E(I(a)("KANBAN.FORM.NOTES.NO_CONTACTS")),1)])):(p(),f("div",c6e,[(p(!0),f(fe,null,Ae(In.value,We=>(p(),f("button",{key:We.id,class:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:bg-slate-50 dark:focus:bg-slate-700",onClick:Zt=>je(We)},[c("div",u6e,[c("div",{class:"cursor-pointer",onClick:Gt},[We.avatar_url?(p(),V(Ft,{key:0,src:We.avatar_url,name:We.name,size:24},null,8,["src","name"])):O("",!0)]),c("div",p6e,[c("h3",{class:"text-sm font-medium text-slate-900 dark:text-slate-100 cursor-pointer hover:text-woot-500 dark:hover:text-woot-400",onClick:Gt},E(We.name),1)])]),We.phone||We.last_activity_at?(p(),f("div",m6e,[We.phone?(p(),f("span",h6e,[v(tt,{icon:"call",size:"12"}),Ee(" "+E(We.phone),1)])):O("",!0),We.last_activity_at?(p(),f("span",f6e,[v(tt,{icon:"alarm",size:"12"}),Ee(" "+E(I(a)("KANBAN.FORM.NOTES.LAST_ACTIVITY"))+": "+E(We.last_activity_at),1)])):O("",!0)])):O("",!0)],8,d6e))),128))]))])])]),_:1},8,["show"])):O("",!0),c("div",g6e,[(p(!0),f(fe,null,Ae(ne.value,We=>{var Zt,Tn,is,Ro;return p(),f("div",{key:We.id,class:"note-card"},[c("div",_6e,[c("div",v6e,[c("div",b6e,[c("div",E6e,E(We.text),1),c("div",T6e,[c("button",{class:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",onClick:Yn=>qe(We)},[c("span",y6e,[v(tt,{icon:"edit",size:"16"})])],8,A6e),c("button",{class:"p-1 text-slate-400 hover:text-n-ruby-9 dark:hover:text-n-ruby-4",onClick:Yn=>Le(We.id)},[c("span",I6e,[v(tt,{icon:"delete",size:"16"})])],8,S6e)])]),We.linked_item_id||We.linked_conversation_id||We.linked_contact_id?(p(),f("div",C6e,[We.linked_item_id?(p(),f("div",x6e,[c("div",N6e,[v(tt,{icon:"link",size:"14",class:"text-blue-600 dark:text-blue-400"}),c("span",O6e,E(I(a)("KANBAN.FORM.NOTES.LINKED_ITEM"))+": "+E(((Zt=Ke(We.linked_item_id))==null?void 0:Zt.title)||`#${We.linked_item_id}`),1)])])):O("",!0),We.linked_conversation_id?(p(),f("div",w6e,[c("div",R6e,[v(tt,{icon:"chat",size:"14",class:"text-green-600 dark:text-green-400"}),c("span",$6e,E(I(a)("KANBAN.FORM.NOTES.LINKED_CONVERSATION"))+": #"+E(We.linked_conversation_id),1)])])):O("",!0),We.linked_contact_id?(p(),f("div",M6e,[c("div",k6e,[v(tt,{icon:"person",size:"14",class:"text-purple-600 dark:text-purple-400"}),c("span",L6e,E(I(a)("KANBAN.FORM.NOTES.LINKED_CONTACT"))+": "+E(((Ro=(is=(Tn=_.value)==null?void 0:Tn.find)==null?void 0:is.call(Tn,Yn=>Yn.id===We.linked_contact_id))==null?void 0:Ro.name)||`#${We.linked_contact_id}`),1)])])):O("",!0)])):O("",!0),c("div",D6e,[c("div",P6e,[v(Ft,{name:We.author,src:We.author_avatar,size:20},null,8,["name","src"]),c("span",B6e,E(We.author),1)]),c("span",F6e,E(ct(We.created_at||new Date)),1)]),Qe(We)?(p(),f("div",U6e,[(p(!0),f(fe,null,Ae(st(We),Yn=>(p(),f("div",{key:Yn.id,class:"file-attachment"},[c("div",G6e,[c("span",V6e,E(wt(Yn)),1),c("a",{href:Yn.url,target:"_blank",class:"file-name",title:Yn.filename},E(Yn.filename),9,H6e)]),c("button",{class:"file-action",onClick:ni=>Nt(Yn)},[v(tt,{icon:"delete",size:"12"})],8,W6e)]))),128))])):O("",!0)]),Je(We)?(p(),f("div",K6e,[(p(!0),f(fe,null,Ae(ht(We),Yn=>(p(),f("div",{key:Yn.id,class:"image-preview"},[c("img",{src:Yn.url,alt:Yn.filename,class:"preview-image",onClick:ni=>Me.openImagePreview(Yn.url)},null,8,z6e)]))),128))])):O("",!0)])])}),128))])])):O("",!0),x.value==="checklist"?(p(),f("div",j6e,[c("div",Y6e,[c("div",X6e,[c("span",q6e,E(I(a)("KANBAN.FORM.CHECKLIST.PROGRESS")),1),c("span",Z6e,E(L.value)+"/"+E(G.value)+" "+E(I(a)("KANBAN.FORM.CHECKLIST.ITEMS")),1)]),c("div",Q6e,[c("button",{class:"text-sm text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-400",onClick:Ve[10]||(Ve[10]=We=>N.value=!N.value)},E(I(a)("KANBAN.FORM.CHECKLIST.HIDE_COMPLETED")),1),c("button",{class:"text-sm text-n-ruby-9 hover:text-n-ruby-10 dark:text-n-ruby-4 dark:hover:text-n-ruby-3",onClick:ge},E(I(a)("DELETE")),1)])]),c("div",J6e,[c("div",{class:"h-full bg-woot-500 transition-all duration-300 ease-out",style:Ct({width:`${M.value}%`})},null,4)]),k.value.length>0?(p(),f("div",eBe,[(p(!0),f(fe,null,Ae(U.value,We=>{var Zt,Tn;return p(),f("div",{key:We.id,class:"group flex items-center gap-3 p-2 hover:bg-slate-50/50 dark:hover:bg-slate-800/50 rounded-lg transition-colors duration-200"},[c("label",tBe,[c("input",{type:"checkbox",checked:We.completed,class:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-slate-300 dark:border-slate-600 checked:border-woot-500 dark:checked:border-woot-500 checked:bg-woot-500 dark:checked:bg-woot-500 transition-all duration-200",onChange:is=>Ue(We)},null,40,nBe),v(tt,{icon:"checkmark",size:"12",class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200"})]),c("div",sBe,[c("span",{class:re([{"line-through text-slate-400 dark:text-slate-500":We.completed,"text-slate-700 dark:text-slate-300":!We.completed},"text-sm transition-colors duration-200"])},E(We.text),3),We.linked_item_id?(p(),f("div",aBe,[v(tt,{icon:"link",size:"10"}),c("span",oBe,E(((Zt=Ke(We.linked_item_id))==null?void 0:Zt.title)||I(a)("KANBAN.FORM.NOTES.ITEM_NOT_FOUND")),1)])):O("",!0),We.linked_conversation_id?(p(),f("div",lBe,[v(tt,{icon:"chat",size:"10"}),c("span",iBe," #"+E(We.linked_conversation_id),1)])):O("",!0),We.linked_contact_id?(p(),f("div",rBe,[v(tt,{icon:"scan-person",size:"10"}),c("span",cBe,E(((Tn=_.value.value.find(is=>is.id===We.linked_contact_id))==null?void 0:Tn.name)||I(a)("KANBAN.FORM.NOTES.CONTACT_NOT_FOUND")),1)])):O("",!0)]),c("div",dBe,[we(We)?(p(),V(Ft,{key:0,name:we(We).name,src:we(We).avatar_url,size:20,class:"flex-shrink-0 cursor-pointer hover:ring-2 hover:ring-woot-500/20 transition-all duration-200",onClick:is=>Ie(We),title:`${I(a)("KANBAN.ASSIGNED_TO")} ${we(We).name} - ${I(a)("KANBAN.CLICK_TO_REMOVE")}`},null,8,["name","src","onClick","title"])):(p(),f("button",{key:1,class:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-woot-500 dark:text-slate-500 dark:hover:text-woot-400 transition-all duration-200",onClick:is=>Ye(We),title:I(a)("KANBAN.ASSIGN_AGENT")},[v(tt,{icon:"person-add",size:"14"})],8,uBe))]),c("button",{class:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-woot-500 dark:text-slate-500 dark:hover:text-woot-400 transition-all duration-200",onClick:is=>te(We)},[v(tt,{icon:"edit",size:"14"})],8,pBe),c("button",{class:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-n-ruby-9 dark:text-slate-500 dark:hover:text-n-ruby-4 transition-all duration-200",onClick:is=>ae(We)},[v(tt,{icon:"dismiss",size:"14"})],8,mBe)])}),128))])):O("",!0),c("div",hBe,[c("div",fBe,[pe(c("input",{"onUpdate:modelValue":Ve[11]||(Ve[11]=We=>$.value=We),type:"text",class:"flex-1 h-10 px-3 text-sm border border-slate-200 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",placeholder:I(a)("KANBAN.FORM.CHECKLIST.ADD_ITEM"),onKeyup:Ve[12]||(Ve[12]=Hn(We=>w.value?le():Be(),["enter"]))},null,40,gBe),[[mt,$.value]]),c("div",_Be,[w.value?(p(),f("button",{key:0,class:"text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",onClick:ye},E(I(a)("KANBAN.CANCEL")),1)):O("",!0),c("button",{class:"relative inline-flex items-center h-10 px-4 text-sm font-medium text-white bg-woot-500 hover:bg-woot-600 dark:bg-woot-600 dark:hover:bg-woot-700 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!$.value.trim(),onClick:Ve[13]||(Ve[13]=We=>w.value?le():Be())},[v(tt,{icon:w.value?"checkmark":"add-circle",class:"mr-1.5",size:"14"},null,8,["icon"]),Ee(" "+E(w.value?I(a)("SAVE"):I(a)("ADD")),1)],8,vBe)])])])])):O("",!0),x.value==="attachments"?(p(),f("div",bBe,[c("div",EBe,[v(I(bu),{ref:"uploadItem",accept:I(fu),onInputFile:De},{default:K(()=>[c("button",{class:"primary-button flex items-center gap-2",disabled:Re.value},[v(tt,{icon:"attach",size:"16"}),Ee(" "+E(I(a)("KANBAN.ITEM_DETAILS.ATTACHMENTS.ADD_FILE"))+" ",1),Re.value?(p(),f("span",ABe,"...")):O("",!0)],8,TBe)]),_:1},8,["accept"])]),c("div",yBe,[Ot.value.some(Xe)?(p(),f("div",SBe,[c("h4",IBe,E(I(a)("KANBAN.ITEM_DETAILS.ATTACHMENTS.IMAGES")),1),c("div",CBe,[(p(!0),f(fe,null,Ae(Ot.value.filter(Xe),We=>(p(),f("div",{key:We.id,class:"image-card"},[c("img",{src:We.url,alt:We.filename,class:"attachment-preview",onClick:Zt=>Me.openImagePreview(We.url)},null,8,xBe),c("div",NBe,[c("div",OBe,[c("span",wBe,E(We.filename),1),c("span",RBe,E(We.source.type==="note"?`Nota: ${We.source.text}`:"Anexo do item"),1)]),c("button",{class:"delete-button",onClick:Zt=>Nt(We)},[v(tt,{icon:"delete",size:"12"})],8,$Be)])]))),128))])])):O("",!0),Ot.value.some(We=>!Xe(We))?(p(),f("div",MBe,[c("h4",kBe,E(I(a)("KANBAN.ITEM_DETAILS.ATTACHMENTS.FILES")),1),c("div",LBe,[(p(!0),f(fe,null,Ae(Ot.value.filter(We=>!Xe(We)),We=>(p(),f("div",{key:We.id,class:"file-card"},[c("div",DBe,[c("span",PBe,E(wt(We)),1),c("div",BBe,[c("a",{href:We.url,target:"_blank",class:"file-name",title:We.filename},E(We.filename),9,FBe),c("span",UBe,E(We.source.type==="note"?`Nota: ${We.source.text}`:"Anexo do item"),1)])]),c("button",{class:"delete-button",onClick:Zt=>Nt(We)},[v(tt,{icon:"delete",size:"12"})],8,GBe)]))),128))])])):O("",!0)])])):O("",!0),x.value==="history"?(p(),f("div",VBe,[c("div",HBe,[c("button",{class:"text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",onClick:Ve[14]||(Ve[14]=We=>Me.showDebug=!Me.showDebug)},E(Me.showDebug?I(a)("KANBAN.DEBUG.HIDE"):I(a)(" KANBAN.DEBUG.SHOW")),1)]),Me.showDebug?(p(),f("div",WBe,[c("pre",KBe,E(JSON.stringify((sn=n.item.item_details)==null?void 0:sn.activities,null,2)),1)])):O("",!0),Te.value.length===0?(p(),f("div",zBe,[c("p",jBe,E(I(a)("KANBAN.HISTORY.NO_ACTIVITY")),1)])):(p(),f("div",YBe,[(p(!0),f(fe,null,Ae(Te.value,(We,Zt)=>(p(),f("div",{key:We.id,class:"history-item"},[c("div",XBe,[c("div",qBe,[v(tt,{icon:We.icon,size:"16"},null,8,["icon"])])]),c("div",ZBe,[c("div",QBe,[c("div",JBe,[c("span",e9e,E(We.title),1)]),c("span",t9e,E(ct(We.created_at)),1)]),c("div",n9e,[c("p",s9e,E(We.details),1)]),c("div",a9e,[We.user?(p(),V(Ft,{key:0,name:We.user.name,src:We.user.avatar_url,size:20},null,8,["name","src"])):O("",!0),c("span",o9e,E(We.user?We.user.name:I(a)("SYSTEM")),1)])])]))),128))]))])):O("",!0),x.value==="custom_fields"?(p(),f("div",l9e,[$n.value.length===0?(p(),f("p",i9e," Nenhum campo personalizado disponvel. ")):O("",!0),(p(!0),f(fe,null,Ae($n.value,(We,Zt)=>(p(),f("div",{key:We.name+"-"+We.type,class:"flex gap-2 items-center"},[c("span",r9e,[We._isGlobal?(p(),V(tt,{key:0,icon:"globe",size:"14",class:"text-woot-500 align-middle",title:"Campo global do funil"})):O("",!0),Ee(" "+E(We.name),1)]),We.type==="string"?pe((p(),f("input",{key:0,"onUpdate:modelValue":Tn=>We.value=Tn,type:"text",class:"w-2/3 input",onChange:Tn=>Ma(Zt,We.value)},null,40,c9e)),[[mt,We.value]]):We.type==="number"?pe((p(),f("input",{key:1,"onUpdate:modelValue":Tn=>We.value=Tn,type:"number",class:"w-2/3 input",onChange:Tn=>Ma(Zt,We.value)},null,40,d9e)),[[mt,We.value,void 0,{number:!0}]]):We.type==="date"?pe((p(),f("input",{key:2,"onUpdate:modelValue":Tn=>We.value=Tn,type:"date",class:"w-2/3 input",onChange:Tn=>Ma(Zt,We.value)},null,40,u9e)),[[mt,We.value]]):pe((p(),f("input",{key:3,"onUpdate:modelValue":Tn=>We.value=Tn,type:"text",class:"w-2/3 input",onChange:Tn=>Ma(Zt,We.value)},null,40,p9e)),[[mt,We.value]])]))),128)),c("button",{class:"primary-button mt-4",onClick:Ka}," Salvar ")])):O("",!0)])])]),c("div",m9e,[v(a5e,{onQuickAction:Rn}),v(Z8e,{item:n.item,notes:ne.value,"checklist-items":k.value,attachments:Ot.value},null,8,["item","notes","checklist-items","attachments"])])]),gn.value?(p(),V(qt,{key:0,show:gn.value,onClose:Ve[18]||(Ve[18]=We=>gn.value=!1)},{default:K(()=>[c("div",h9e,[c("h3",f9e,E(I(a)("KANBAN.BULK_ACTIONS.MOVE.TITLE")),1),c("div",g9e,[c("label",_9e,E(I(a)("KANBAN.FORM.FUNNEL.LABEL")),1),pe(c("select",{"onUpdate:modelValue":Ve[15]||(Ve[15]=We=>wn.value.funnel_id=We),class:"w-full h-10 px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},[(p(!0),f(fe,null,Ae(Ha.value,We=>(p(),f("option",{key:We.id,value:We.id},E(We.name),9,v9e))),128))],512),[[zt,wn.value.funnel_id]])]),c("div",b9e,[c("label",E9e,E(I(a)("KANBAN.FORM.STAGE.LABEL")),1),pe(c("select",{"onUpdate:modelValue":Ve[16]||(Ve[16]=We=>wn.value.funnel_stage=We),class:"w-full h-10 px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},[(p(!0),f(fe,null,Ae(ls.value,We=>(p(),f("option",{key:We.id,value:We.id},E(We.name),9,T9e))),128))],512),[[zt,wn.value.funnel_stage]])]),c("div",A9e,[c("button",{class:"px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",onClick:Ve[17]||(Ve[17]=We=>gn.value=!1)},E(I(a)("KANBAN.CANCEL")),1),c("button",{class:"px-4 py-2 text-sm text-white bg-woot-500 hover:bg-woot-600 rounded-lg transition-colors",onClick:ns},E(I(a)("KANBAN.MOVE")),1)])])]),_:1},8,["show"])):O("",!0),v(qt,{show:dt.value,"onUpdate:show":Ve[20]||(Ve[20]=We=>dt.value=We),"on-close":()=>dt.value=!1,"show-close-button":!0,size:"medium","close-on-backdrop-click":!1,class:re({"z-50":dt.value})},{default:K(()=>{var We,Zt,Tn,is;return[c("div",y9e,[c("header",S9e,[c("h3",I9e,E(I(a)("KANBAN.SEND_MESSAGE.TITLE")),1)]),c("div",C9e,[v(ZI,{"conversation-id":(We=n.item.item_details)==null?void 0:We.conversation_id,"current-stage":n.item.funnel_stage||"",contact:(Tn=(Zt=n.item.item_details)==null?void 0:Zt.conversation)==null?void 0:Tn.contact,conversation:(is=n.item.item_details)==null?void 0:is.conversation,item:n.item,onClose:Ve[19]||(Ve[19]=()=>dt.value=!1),onSend:$t},null,8,["conversation-id","current-stage","contact","conversation","item"])])])]}),_:1},8,["show","on-close","class"]),v(qt,{show:H.value,"onUpdate:show":Ve[21]||(Ve[21]=We=>H.value=We),"on-close":He,"show-close-button":!0,size:"small","close-on-backdrop-click":!1,class:re({"z-50":H.value})},{default:K(()=>{var We;return[c("div",x9e,[c("div",N9e,[c("h3",O9e,E(I(a)("KANBAN.ASSIGN_AGENT_TO_CHECKLIST_ITEM")),1),c("p",w9e,E((We=B.value)==null?void 0:We.text),1)]),c("div",R9e,[c("div",$9e,[(p(!0),f(fe,null,Ae(Oe.value,Zt=>(p(),f("div",{key:Zt.id,class:"flex items-center gap-3 p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer transition-colors duration-200",onClick:Tn=>et(Zt.id)},[v(Ft,{name:Zt.name,src:Zt.avatar_url,size:32,class:"flex-shrink-0"},null,8,["name","src"]),c("div",k9e,[c("p",L9e,E(Zt.name),1),c("p",D9e,E(Zt.email),1)]),v(tt,{icon:"chevron-right",size:"16",class:"text-slate-400 flex-shrink-0"})],8,M9e))),128))])])])]}),_:1},8,["show","class"])],64)}}},zp=Fe(P9e,[["__scopeId","data-v-c455e4bf"]]),B9e={class:"p-4"},F9e={key:0,class:"flex flex-col gap-4"},U9e={class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},G9e={class:"flex items-center gap-2"},V9e={class:"flex items-center gap-2"},H9e={class:"text-white"},W9e={key:0,class:"flex flex-col gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},K9e={key:0,class:"flex items-center justify-between"},z9e={class:"text-sm font-semibold text-slate-700 dark:text-slate-200"},j9e={key:1,class:"flex items-center justify-between"},Y9e={key:2,class:"flex flex-col gap-2"},X9e={key:0,class:"flex items-center justify-between"},q9e={class:"text-sm text-slate-700 dark:text-slate-200"},Z9e={key:1,class:"flex items-center justify-between"},Q9e={class:"text-sm text-slate-700 dark:text-slate-200"},J9e={class:"flex justify-center gap-2 mt-2"},e7e={key:1,class:"flex flex-col gap-2"},t7e={class:"flex flex-col gap-2"},n7e={class:"flex items-center gap-2 mb-2"},s7e={class:"text-xs text-slate-500"},a7e={class:"text-sm text-slate-700 dark:text-slate-200 whitespace-pre-wrap break-words"},o7e={key:1,class:"flex flex-col items-center justify-center gap-4 text-center p-6 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},l7e={class:"p-6"},i7e={class:"text-lg font-medium mb-4 flex items-center gap-2"},r7e={__name:"KanbanActions",props:{conversationId:{type:[Number,String],required:!0}},emits:[],setup(e,{emit:t}){const n=e,s=Pn(),a=F([]),o=F(!1),l=F(null),i=F(!1),r=F(null),d=F([]),u=C(()=>s.getters.getSelectedChat),m=C(()=>{var R,P,W;return((W=(P=(R=u.value)==null?void 0:R.meta)==null?void 0:P.sender)==null?void 0:W.name)||"Sem nome"}),h=C(()=>{var R;return!((R=u.value)!=null&&R.kanban_items)||u.value.kanban_items.length===0?null:u.value.kanban_items[0]}),_=C(()=>u.value?{id:u.value.id,meta:u.value.meta,messages:u.value.messages||[]}:null);ot(()=>n.conversationId,async(R,P)=>{});const g=C(()=>{const R=l.value||h.value;return R!=null&&R.funnel?R.funnel:null}),T=C(()=>{var W;const R=l.value||h.value;if(!R||!((W=g.value)!=null&&W.stages))return null;const P=g.value.stages[R.funnel_stage];return(P==null?void 0:P.name)||R.funnel_stage}),S=C(()=>{var W;const R=l.value||h.value;if(!R||!((W=g.value)!=null&&W.stages))return{};const P=g.value.stages[R.funnel_stage];return P!=null&&P.color?{backgroundColor:`${P.color}20`,color:P.color}:{}}),b=C(()=>({backgroundColor:"#64748B20",color:"#64748B"})),A=C(()=>{var W,Q,Z,j,X,q,se;if(h.value)return{...h.value,description:((W=h.value.item_details)==null?void 0:W.description)||"",item_details:{...h.value.item_details,description:((Q=h.value.item_details)==null?void 0:Q.description)||"",_agent:(Z=h.value.item_details)!=null&&Z.agent_id?d.value.find(he=>he.id===h.value.item_details.agent_id):null},_conversation:_.value};const R=(X=(j=u.value)==null?void 0:j.meta)==null?void 0:X.assignee,P=((q=u.value)==null?void 0:q.priority)||"none";return{title:m.value,description:"",funnel_id:(se=a.value[0])==null?void 0:se.id,funnel_stage:"lead",item_details:{title:m.value,description:"",conversation_id:n.conversationId,agent_id:(R==null?void 0:R.id)||null,_agent:R,priority:P},_conversation:_.value}}),y=async()=>{try{const R=await ra.get();a.value=R.data}catch{}};pt(async()=>{await Promise.all([y(),$()])});const x=async R=>{try{o.value=!1,l.value=null,It.emit("kanban.item.updated"),u.value&&It.emit("conversation.updated",u.value.id)}catch{It.emit("newToastMessage",{message:"Erro ao salvar alteraes",type:"error"})}},$=async()=>{try{const{data:R}=await Qc.get();d.value=R}catch{}},N=C(()=>{var W,Q;const R=(Q=(W=h.value)==null?void 0:W.item_details)==null?void 0:Q.priority,P={low:"Baixa",medium:"Mdia",high:"Alta",urgent:"Urgente",none:"Nenhuma"};return P[R]||P.none}),w=C(()=>{var Q,Z;const R=(Z=(Q=h.value)==null?void 0:Q.item_details)==null?void 0:Z.priority,P={low:"#10B981",medium:"#F59E0B",high:"#EF4444",urgent:"#7C3AED",none:"#64748B"},W=P[R]||P.none;return{backgroundColor:`${W}20`,color:W}}),D=C(()=>{var R,P,W,Q;return!!((P=(R=h.value)==null?void 0:R.item_details)!=null&&P.deadline_at||(Q=(W=h.value)==null?void 0:W.item_details)!=null&&Q.scheduled_at)}),H=C(()=>{var R,P,W,Q,Z,j;return!!((P=(R=h.value)==null?void 0:R.item_details)!=null&&P.value||(Q=(W=h.value)==null?void 0:W.item_details)!=null&&Q.priority&&((j=(Z=h.value)==null?void 0:Z.item_details)==null?void 0:j.priority)!=="none"||D.value)}),B=(R,P)=>R?new Intl.NumberFormat((P==null?void 0:P.locale)||"pt-BR",{style:"currency",currency:(P==null?void 0:P.code)||"BRL"}).format(R):"-",k=R=>R?ts(new Date(R),"dd/MM/yyyy",{locale:mr}):"-",U=R=>R?ts(new Date(R),"dd/MM/yyyy 's' HH:mm",{locale:mr}):"-",G=R=>R?lg(new Date(R),{locale:mr,addSuffix:!0}):"",L=R=>{var W,Q,Z,j;const P={...R,title:((W=R.item_details)==null?void 0:W.title)||m.value,description:((Q=R.item_details)==null?void 0:Q.description)||"",priority:((Z=R.item_details)==null?void 0:Z.priority)||"none",funnel_stage:R.funnel_stage,item_details:{...R.item_details,priority:((j=R.item_details)==null?void 0:j.priority)||"none"}};r.value=P,i.value=!0},M=async()=>{i.value=!1,r.value=null};return(R,P)=>{var Q;const W=z("fluent-icon");return p(),f("div",B9e,[h.value&&g.value?(p(),f("div",F9e,[c("div",U9e,[c("div",G9e,[P[9]||(P[9]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Funil:",-1)),c("span",{class:"text-xs font-medium px-2 py-1 rounded-full",style:Ct(b.value)},E(g.value.name),5)]),c("div",V9e,[P[10]||(P[10]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Etapa:",-1)),c("span",{class:"text-xs font-medium px-2 py-1 rounded-full",style:Ct(S.value)},E(T.value),5)]),h.value.stage_entered_at?(p(),f("div",{key:0,class:"flex items-center gap-2 text-xs font-medium",style:Ct(S.value)},[P[11]||(P[11]=c("span",{class:"text-white"},"Tempo na etapa",-1)),c("span",H9e,E(G(h.value.stage_entered_at)),1)],4)):O("",!0)]),H.value?(p(),f("div",W9e,[h.value.item_details.value?(p(),f("div",K9e,[P[12]||(P[12]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Valor:",-1)),c("span",z9e,E(B(h.value.item_details.value,h.value.item_details.currency)),1)])):O("",!0),h.value.item_details.priority&&h.value.item_details.priority!=="none"?(p(),f("div",j9e,[P[13]||(P[13]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Prioridade:",-1)),c("span",{class:"text-xs font-medium px-3 py-1 rounded-full",style:Ct(w.value)},E(N.value),5)])):O("",!0),D.value?(p(),f("div",Y9e,[h.value.item_details.deadline_at?(p(),f("div",X9e,[P[14]||(P[14]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium flex items-center gap-1"},[c("i",{class:"icon-calendar-clock text-base align-text-bottom"}),Ee(" Prazo: ")],-1)),c("span",q9e,E(k(h.value.item_details.deadline_at)),1)])):O("",!0),h.value.item_details.scheduled_at?(p(),f("div",Z9e,[P[15]||(P[15]=c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium flex items-center gap-1"},[c("i",{class:"icon-calendar text-base align-text-bottom"}),Ee(" Agendado: ")],-1)),c("span",Q9e,E(U(h.value.item_details.scheduled_at)),1)])):O("",!0)])):O("",!0)])):O("",!0),c("div",J9e,[v(ce,{variant:"outline",color:"slate",size:"sm",class:"w-full sm:w-auto",onClick:P[0]||(P[0]=Z=>o.value=!0)},{icon:K(()=>[v(W,{icon:"edit",size:"16"})]),default:K(()=>[P[16]||(P[16]=Ee(" Atualizar Funil "))]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",class:"w-full sm:w-auto",onClick:P[1]||(P[1]=Z=>L(h.value))},{icon:K(()=>[v(W,{icon:"info",size:"16"})]),default:K(()=>[P[17]||(P[17]=Ee(" Ver Detalhes "))]),_:1})]),(Q=h.value.item_details.notes)!=null&&Q.length?(p(),f("div",e7e,[P[18]||(P[18]=c("div",{class:"flex items-center gap-2"},[c("i",{class:"icon-message-square text-slate-600 dark:text-slate-400"}),c("span",{class:"text-slate-600 dark:text-slate-400 text-sm font-medium"},"Notas")],-1)),c("div",t7e,[(p(!0),f(fe,null,Ae(h.value.item_details.notes,Z=>(p(),f("div",{key:Z.id,class:"bg-white dark:bg-slate-800 p-3 rounded-lg"},[c("div",n7e,[c("span",s7e,E(U(Z.created_at)),1)]),c("p",a7e,E(Z.text),1)]))),128))])])):O("",!0)])):(p(),f("div",o7e,[P[20]||(P[20]=c("i",{class:"icon-funnel text-3xl text-slate-400 dark:text-slate-500"},null,-1)),P[21]||(P[21]=c("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Nenhum item do Kanban associado ",-1)),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:P[2]||(P[2]=Z=>o.value=!0)},{icon:K(()=>[v(W,{icon:"add",size:"16"})]),default:K(()=>[P[19]||(P[19]=Ee(" Definir Funil "))]),_:1})])),v(qt,{show:o.value,"onUpdate:show":P[5]||(P[5]=Z=>o.value=Z),size:"full-width","on-close":()=>{o.value=!1,l.value.value=null}},{default:K(()=>[c("div",l7e,[c("h3",i7e,[P[22]||(P[22]=c("i",{class:"icon-funnel text-slate-600 dark:text-slate-400"},null,-1)),Ee(" "+E(h.value?"Editar Item do Kanban":"Criar Item do Kanban"),1)]),a.value[0]?(p(),V(Oi,{key:0,"funnel-id":A.value.funnel_id||a.value[0].id,stage:A.value.funnel_stage||"lead","initial-data":A.value,"is-editing":!!h.value,"current-conversation":_.value,onSaved:x,onClose:P[3]||(P[3]=Z=>o.value=!1),"onUpdate:preview":P[4]||(P[4]=Z=>l.value.value=Z)},null,8,["funnel-id","stage","initial-data","is-editing","current-conversation"])):O("",!0)])]),_:1},8,["show","on-close"]),v(qt,{show:i.value,"onUpdate:show":P[8]||(P[8]=Z=>i.value=Z),size:"full-width","on-close":()=>{i.value=!1,r.value.value=null,M()}},{default:K(()=>[r.value?(p(),V(zp,{key:0,item:r.value,onClose:P[6]||(P[6]=()=>{i.value=!1,r.value.value=null,M()}),onEdit:P[7]||(P[7]=()=>{i.value=!1,o.value=!0}),onItemUpdated:M},null,8,["item"])):O("",!0)]),_:1},8,["show","on-close"])])}}},c7e={class:"flex items-center justify-between px-4 py-2 border-b border-n-weak h-12"},d7e={class:"flex items-center justify-between gap-2 flex-1"},u7e={class:"font-medium text-sm text-n-slate-12"},p7e={class:"flex items-center"},QI={__name:"SidebarActionsHeader",props:{title:{type:String,required:!0},buttons:{type:Array,default:()=>[]}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=a=>{n("click",a.key)};return(a,o)=>{const l=_t("tooltip");return p(),f("div",c7e,[c("div",d7e,[c("span",u7e,E(e.title),1),c("div",p7e,[(p(!0),f(fe,null,Ae(e.buttons,i=>pe((p(),V(ce,{key:i.key,icon:i.icon,ghost:"",sm:"",onClick:r=>s(i)},null,8,["icon","onClick"])),[[l,i.tooltip]])),128)),pe(v(ce,{icon:"i-lucide-x",ghost:"",sm:"",onClick:o[0]||(o[0]=i=>a.$emit("close"))},null,512),[[l,a.$t("GENERAL.CLOSE")]])])])])}}};class m7e extends tl{constructor(){super("integrations/shopify",{accountScoped:!0})}getOrders(t){return axios.get(`${this.url}/orders`,{params:{contact_id:t}})}}const h7e=new m7e,f7e={class:"py-3 border-b border-n-weak last:border-b-0 flex flex-col gap-1.5"},g7e={class:"flex justify-between items-center"},_7e={class:"font-medium flex"},v7e=["href"],b7e=["title"],E7e={class:"text-sm text-n-slate-12"},T7e={class:"text-n-slate-11 border-r border-n-weak pr-2"},A7e={class:"text-n-slate-11 pl-2"},y7e={key:0},S7e=["title"],I7e={__name:"ShopifyOrderItem",props:{order:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Pe(),s=u=>ts(new Date(u),"MMM d, yyyy"),a=(u,m)=>new Intl.NumberFormat("en",{style:"currency",currency:m||"USD"}).format(u),o=u=>({paid:"bg-n-teal-5 text-n-teal-12"})[u]||"bg-n-solid-3 text-n-slate-12",l=(u,m="")=>`CONVERSATION_SIDEBAR.SHOPIFY.${u.toUpperCase()}_STATUS.${m.toUpperCase()}`,i=C(()=>{const{fulfillment_status:u}=t.order;return u?n(l("FULFILLMENT",u)):""}),r=C(()=>{const{financial_status:u}=t.order;return u?n(l("FINANCIAL",u)):""}),d=u=>({fulfilled:"text-n-teal-9",partial:"text-n-amber-9",unfulfilled:"text-n-ruby-9"})[u]||"text-n-slate-11";return(u,m)=>(p(),f("div",f7e,[c("div",g7e,[c("div",_7e,[c("a",{href:e.order.admin_url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline text-n-slate-12 cursor-pointer truncate"},[Ee(E(u.$t("CONVERSATION_SIDEBAR.SHOPIFY.ORDER_ID",{id:e.order.id}))+" ",1),m[0]||(m[0]=c("i",{class:"i-lucide-external-link pl-5"},null,-1))],8,v7e)]),c("div",{class:re([o(e.order.financial_status),"text-xs px-2 py-1 rounded capitalize truncate"]),title:r.value},E(r.value),11,b7e)]),c("div",E7e,[c("span",T7e,E(s(e.order.created_at)),1),c("span",A7e,E(a(e.order.total_price,e.order.currency)),1)]),i.value?(p(),f("div",y7e,[c("span",{class:re([d(e.order.fulfillment_status),"capitalize font-medium"]),title:i.value},E(i.value),11,S7e)])):O("",!0)]))}},C7e={class:"px-4 py-2 text-n-slate-12"},x7e={key:0,class:"text-center text-n-slate-12"},N7e={key:1,class:"flex justify-center items-center p-4"},O7e={key:2,class:"text-center text-n-ruby-12"},w7e={key:3,class:"text-center text-n-slate-12"},R7e={key:4},$7e={__name:"ShopifyOrdersList",props:{contactId:{type:[Number,String],required:!0}},setup(e){const t=e,n=oa("contacts/getContact",t.contactId),s=C(()=>{var r,d;return!!((r=n.value)!=null&&r.email)||!!((d=n.value)!=null&&d.phone_number)}),a=F([]),o=F(!0),l=F(""),i=async()=>{var r,d;try{o.value=!0;const u=await h7e.getOrders(t.contactId);a.value=u.data.orders}catch(u){l.value=((d=(r=u.response)==null?void 0:r.data)==null?void 0:d.error)||"CONVERSATION_SIDEBAR.SHOPIFY.ERROR"}finally{o.value=!1}};return ot(()=>t.contactId,()=>{s.value&&i()},{immediate:!0}),(r,d)=>(p(),f("div",C7e,[s.value?o.value?(p(),f("div",N7e,[v(qn,{size:"32",class:"text-n-brand"})])):l.value?(p(),f("div",O7e,E(l.value),1)):a.value.length?(p(),f("div",R7e,[(p(!0),f(fe,null,Ae(a.value,u=>(p(),V(I7e,{key:u.id,order:u},null,8,["order"]))),128))])):(p(),f("div",w7e,E(r.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1)):(p(),f("div",x7e,E(r.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1))]))}};class M7e extends tl{constructor(){super("integrations/linear",{accountScoped:!0})}getTeams(){return axios.get(`${this.url}/teams`)}getTeamEntities(t){return axios.get(`${this.url}/team_entities?team_id=${t}`)}createIssue(t){return axios.post(`${this.url}/create_issue`,t)}link_issue(t,n,s){return axios.post(`${this.url}/link_issue`,{issue_id:n,conversation_id:t,title:s})}getLinkedIssue(t){return axios.get(`${this.url}/linked_issues?conversation_id=${t}`)}unlinkIssue(t,n,s){return axios.post(`${this.url}/unlink_issue`,{link_id:t,issue_id:n,conversation_id:s})}searchIssues(t){return axios.get(`${this.url}/search_issue?q=${t}`)}}const Gl=new M7e,k7e={class:"flex items-center justify-end w-full gap-2 mt-2"},L7e={__name:"LinkIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F([]),l=F(!1),i=F({id:null,name:""}),r=F(!1),d=F(!1),u=F(""),m=()=>{o.value=[],l.value=!l.value},h=C(()=>i.value.id?i.value.name:a("INTEGRATION_SETTINGS.LINEAR.LINK.SELECT")),_=C(()=>!i.value.id||d.value),g=A=>{i.value=A,m()},T=()=>{s("close")},S=async A=>{if(o.value=[],!!A){u.value=A;try{r.value=!0;const y=await Gl.searchIssues(A);o.value=y.data.map(x=>({id:x.identifier,name:`${x.identifier} ${x.title}`,icon:"status",iconColor:x.state.color}))}catch(y){const x=lr(y,a("INTEGRATION_SETTINGS.LINEAR.LINK.ERROR"));_e(x)}finally{r.value=!1}}},b=async()=>{const{id:A}=i.value;try{d.value=!0,await Gl.link_issue(n.conversationId,A,n.title),_e(a("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_SUCCESS")),u.value="",o.value=[],T(),nn(fg.LINK_ISSUE)}catch(y){const x=lr(y,a("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_ERROR"));_e(x)}finally{d.value=!1}};return(A,y)=>{const x=_t("on-clickaway");return p(),f("div",{class:re(["flex flex-col justify-between",l.value?"h-[256px]":"gap-2"])},[v(dd,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":h.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:m},Yo({_:2},[l.value?{name:"dropdown",fn:K(()=>[o.value?pe((p(),V(Kc,{key:0,"show-clear-filter":!1,"list-items":o.value,"active-filter-id":i.value.id,"is-loading":r.value,"input-placeholder":A.$t("INTEGRATION_SETTINGS.LINEAR.LINK.SEARCH"),"loading-placeholder":A.$t("INTEGRATION_SETTINGS.LINEAR.LINK.LOADING"),"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onOnSearch:S,onSelect:g},null,8,["list-items","active-filter-id","is-loading","input-placeholder","loading-placeholder"])),[[x,m]]):O("",!0)]),key:"0"}:void 0]),1032,["button-text"]),c("div",k7e,[v(ce,{faded:"",slate:"",type:"reset",label:A.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:ze(T,["prevent"])},null,8,["label"]),v(ce,{type:"submit",label:A.$t("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE"),disabled:_.value,"is-loading":d.value,onClick:ze(b,["prevent"])},null,8,["label","disabled","is-loading"])])],2)}}},D7e={title:{required:lt},teamId:{required:lt}},P7e={key:0,class:"mt-1 message"},B7e=Object.assign({name:"SearchableDropdown"},{__name:"SearchableDropdown",props:{type:{type:String,required:!0},label:{type:String,default:null},items:{type:Array,required:!0},value:{type:[Number,String],default:null},placeholder:{type:String,default:null},error:{type:String,default:null}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,a=F(!1),o=()=>{a.value=!a.value},l=m=>{s("change",m,n.type),o()},i=C(()=>!!n.error),r=C(()=>n.value?n.items.find(m=>m.id===n.value):null),d=C(()=>{var m;return((m=r.value)==null?void 0:m.name)||n.placeholder}),u=C(()=>{var m;return((m=r.value)==null?void 0:m.id)||null});return(m,h)=>{const _=_t("on-clickaway");return p(),f("div",{class:re(["flex w-full",e.type==="stateId"&&a.value?"h-[150px]":"gap-2"])},[c("label",{class:re(["w-full",{error:i.value}])},[Ee(E(e.label)+" ",1),v(dd,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":d.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:o},Yo({_:2},[a.value?{name:"dropdown",fn:K(()=>[pe(v(Kc,{"show-clear-filter":!1,"list-items":e.items,"active-filter-id":u.value,"input-placeholder":e.placeholder,"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onSelect:l},null,8,["list-items","active-filter-id","input-placeholder"]),[[_,o]])]),key:"0"}:void 0]),1032,["button-text"]),i.value?(p(),f("span",P7e,E(e.error),1)):O("",!0)],2)],2)}}}),F7e=["placeholder"],U7e={class:"flex flex-col gap-4"},G7e={class:"flex items-center justify-end w-full gap-2 mt-8"},V7e={__name:"CreateIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F([]),l=F([]),i=F([]),r=F([]),d=F([]),u=[{id:0,name:"No priority"},{id:1,name:"Urgent"},{id:2,name:"High"},{id:3,name:"Normal"},{id:4,name:"Low"}],m=["Backlog","Todo","In Progress","Done","Canceled"],h=F(!1),_={borderRadius:"0.75rem",fontSize:"0.875rem"},g=os({title:"",description:"",teamId:"",assigneeId:"",labelId:"",stateId:"",priority:"",projectId:""}),T=Lt(D7e,g),S=C(()=>T.value.title.$invalid||h.value),b=C(()=>T.value.title.$error?a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.REQUIRED_ERROR"):""),A=C(()=>T.value.teamId.$error?a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.REQUIRED_ERROR"):""),y=C(()=>[{type:"teamId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.LABEL",items:o.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.SEARCH",error:A.value},{type:"assigneeId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.LABEL",items:l.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.SEARCH",error:""},{type:"labelId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.LABEL",items:r.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.SEARCH",error:""},{type:"priority",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.LABEL",items:u,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.SEARCH",error:""},{type:"projectId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.LABEL",items:i.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.SEARCH",error:""},{type:"stateId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.LABEL",items:d.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.SEARCH",error:""}]),x=()=>s("close"),$=async()=>{try{const H=await Gl.getTeams();o.value=H.data}catch(H){const B=lr(H,a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ERROR"));_e(B)}},N=async()=>{try{const H=await Gl.getTeamEntities(g.teamId);l.value=H.data.users,r.value=H.data.labels,i.value=H.data.projects,d.value=m.map(B=>H.data.states.find(k=>k.name===B)).filter(Boolean)}catch(H){const B=lr(H,a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ENTITIES_ERROR"));_e(B)}},w=(H,B)=>{g[B]=H.id,B==="teamId"&&(g.assigneeId="",g.stateId="",g.labelId="",g.projectId="",N())},D=async()=>{if(T.value.$touch(),T.value.$invalid)return;const H={team_id:g.teamId,title:g.title,description:g.description||void 0,assignee_id:g.assigneeId||void 0,project_id:g.projectId||void 0,state_id:g.stateId||void 0,priority:g.priority||void 0,label_ids:g.labelId?[g.labelId]:void 0,conversation_id:n.conversationId};try{h.value=!0;const B=await Gl.createIssue(H),{identifier:k}=B.data;await Gl.link_issue(n.conversationId,k,n.title),_e(a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_SUCCESS")),nn(fg.CREATE_ISSUE),x()}catch(B){const k=lr(B,a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_ERROR"));_e(k)}finally{h.value=!1}};return pt($),(H,B)=>{const k=z("woot-input");return p(),f("div",null,[v(k,{modelValue:g.title,"onUpdate:modelValue":B[0]||(B[0]=U=>g.title=U),class:re([{error:I(T).title.$error},"w-full"]),styles:{..._,padding:"0.375rem 0.75rem"},label:H.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.LABEL"),placeholder:H.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.PLACEHOLDER"),error:b.value,onInput:I(T).title.$touch},null,8,["modelValue","class","styles","label","placeholder","error","onInput"]),c("label",null,[Ee(E(H.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.LABEL"))+" ",1),pe(c("textarea",{"onUpdate:modelValue":B[1]||(B[1]=U=>g.description=U),style:Ct({..._,padding:"0.5rem 0.75rem"}),rows:"3",class:"text-sm",placeholder:H.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.PLACEHOLDER")},null,12,F7e),[[mt,g.description]])]),c("div",U7e,[(p(!0),f(fe,null,Ae(y.value,U=>(p(),V(B7e,{key:U.type,type:U.type,value:g[U.type],label:H.$t(U.label),items:U.items,placeholder:H.$t(U.placeholder),error:U.error,onChange:w},null,8,["type","value","label","items","placeholder","error"]))),128))]),c("div",G7e,[v(ce,{faded:"",slate:"",type:"reset",label:H.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:ze(x,["prevent"])},null,8,["label"]),v(ce,{type:"submit",label:H.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE"),disabled:S.value,"is-loading":h.value,onClick:ze(D,["prevent"])},null,8,["label","disabled","is-loading"])])])}}},H7e={class:"flex flex-col h-auto overflow-auto"},W7e={class:"flex flex-col h-auto overflow-auto"},K7e={class:"flex flex-col px-8 pb-4 mt-1"},z7e={key:0,class:"flex flex-col px-8 pb-4"},j7e={key:1,class:"flex flex-col px-8 pb-4"},Y7e={__name:"CreateOrLinkIssue",props:{accountId:{type:[Number,String],required:!0},conversation:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(0),l=C(()=>{const{meta:{sender:{name:u=null}={}}={}}=n.conversation;return a("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_TITLE",{conversationId:n.conversation.id,name:u})}),i=F([{key:0,name:a("INTEGRATION_SETTINGS.LINEAR.CREATE")},{key:1,name:a("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE")}]),r=()=>{s("close")},d=u=>{o.value=u};return(u,m)=>{const h=z("woot-modal-header"),_=z("woot-tabs-item"),g=z("woot-tabs");return p(),f("div",H7e,[v(h,{"header-title":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.TITLE"),"header-content":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.DESCRIPTION")},null,8,["header-title","header-content"]),c("div",W7e,[c("div",K7e,[v(g,{class:"ltr:[&>ul]:pl-0 rtl:[&>ul]:pr-0",index:o.value,onChange:d},{default:K(()=>[(p(!0),f(fe,null,Ae(i.value,(T,S)=>(p(),V(_,{key:T.key,index:S,name:T.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index"])]),o.value===0?(p(),f("div",z7e,[v(V7e,{"account-id":e.accountId,"conversation-id":e.conversation.id,title:l.value,onClose:r},null,8,["account-id","conversation-id","title"])])):(p(),f("div",j7e,[v(L7e,{"conversation-id":e.conversation.id,title:l.value,onClose:r},null,8,["conversation-id","title"])]))])])}}},X7e={class:"inline-flex items-center justify-center rounded-md"},q7e={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z7e={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q7e={key:2,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J7e={key:3,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j_={__name:"CardPriorityIcon",props:{priority:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",X7e,[e.priority===I(fa).LOW?(p(),f("svg",q7e,n[0]||(n[0]=[Fo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-slate-6"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):O("",!0),e.priority===I(fa).MEDIUM?(p(),f("svg",Z7e,n[1]||(n[1]=[Fo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):O("",!0),e.priority===I(fa).HIGH?(p(),f("svg",Q7e,n[2]||(n[2]=[Fo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-amber-9"></rect></g>',2)]))):O("",!0),e.priority===I(fa).URGENT?(p(),f("svg",J7e,n[3]||(n[3]=[Fo('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-ruby-9"></rect></g>',2)]))):O("",!0)]))}},eFe={class:"flex items-center justify-between"},tFe={class:"flex items-center gap-2 px-2 py-1.5 border rounded-lg border-n-strong"},nFe={class:"flex items-center gap-1"},sFe={class:"text-xs font-medium text-n-slate-12"},aFe={__name:"IssueHeader",props:{identifier:{type:String,required:!0},issueUrl:{type:String,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,a=()=>{s("unlinkIssue")},o=()=>{window.open(n.issueUrl,"_blank")};return(l,i)=>{const r=z("fluent-icon");return p(),f("div",eFe,[c("div",tFe,[c("div",nFe,[v(r,{icon:"linear",size:"16",class:"text-[#5E6AD2]","view-box":"0 0 19 19"}),c("span",sFe,E(e.identifier),1)]),i[0]||(i[0]=c("span",{class:"w-px h-3 text-n-weak bg-n-weak"},null,-1)),v(ce,{link:"",xs:"",slate:"",icon:"i-lucide-arrow-up-right",class:"!size-4",onClick:o})]),v(ce,{ghost:"",xs:"",slate:"",icon:"i-lucide-unlink",onClick:a})])}}},oFe={class:"flex flex-col gap-4"},lFe={class:"flex flex-col w-full"},iFe={class:"mt-2 text-sm font-medium text-n-slate-12"},rFe={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-3"},cFe={class:"flex flex-col gap-2"},dFe={class:"flex items-center gap-2"},uFe={key:0,class:"flex items-center gap-1.5"},pFe={class:"text-xs capitalize truncate text-n-slate-12"},mFe={key:1,class:"w-px h-3 bg-n-slate-4"},hFe={class:"flex items-center gap-1"},fFe={class:"text-xs text-n-slate-12"},gFe={key:2,class:"w-px h-3 bg-n-slate-4"},_Fe={key:3,class:"flex items-center gap-1.5"},vFe={class:"text-xs text-n-slate-12"},bFe={key:0,class:"flex flex-wrap"},EFe={__name:"LinearIssueItem",props:{linkedIssue:{type:Object,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,{linkedIssue:a}=n,o={1:"Urgent",2:"High",3:"Medium",4:"Low"},l=C(()=>a.issue),i=C(()=>{const m=l.value.assignee;return m?{name:m.name,thumbnail:m.avatarUrl}:null}),r=C(()=>{var m;return((m=l.value.labels)==null?void 0:m.nodes)||[]}),d=C(()=>o[l.value.priority]),u=()=>{s("unlinkIssue",a.id,a.issue.identifier)};return(m,h)=>{var g,T;const _=z("woot-label");return p(),f("div",oFe,[c("div",lFe,[v(aFe,{identifier:l.value.identifier,"link-id":I(a).id,"issue-url":l.value.url,onUnlinkIssue:u},null,8,["identifier","link-id","issue-url"]),c("h3",iFe,E(l.value.title),1),l.value.description?(p(),f("p",rFe,E(l.value.description),1)):O("",!0)]),c("div",cFe,[c("div",dFe,[i.value?(p(),f("div",uFe,[v(Ft,{src:i.value.thumbnail,name:i.value.name,size:16},null,8,["src","name"]),c("span",pFe,E(i.value.name),1)])):O("",!0),i.value?(p(),f("div",mFe)):O("",!0),c("div",hFe,[v(Wt,{icon:"i-lucide-activity",class:"size-4",style:Ct({color:(g=l.value.state)==null?void 0:g.color})},null,8,["style"]),c("span",fFe,E((T=l.value.state)==null?void 0:T.name),1)]),d.value?(p(),f("div",gFe)):O("",!0),d.value?(p(),f("div",_Fe,[v(j_,{priority:d.value.toLowerCase()},null,8,["priority"]),c("span",vFe,E(d.value),1)])):O("",!0)]),r.value.length?(p(),f("div",bFe,[(p(!0),f(fe,null,Ae(r.value,S=>(p(),V(_,{key:S.id,title:S.name,description:S.description,color:S.color,variant:"smooth",small:""},null,8,["title","description","color"]))),128))])):O("",!0)])])}}},TFe={class:"px-4 pt-3 pb-2"},AFe={key:0,class:"flex justify-center p-8"},yFe={key:1,class:"flex justify-center p-4"},SFe={class:"text-sm text-n-slate-11"},IFe={key:2,class:"max-h-[300px] overflow-y-auto"},CFe={__name:"IssuesList",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,{t:n}=Pe(),s=Nn(),a=F([]),o=F(!1),l=F(!1),i=s.getCurrentAccountId,r=C(()=>s.getConversationById.value(t.conversationId)||{}),d=C(()=>a.value.length>0),u=async()=>{o.value=!0,a.value=[];try{const g=await Gl.getLinkedIssue(t.conversationId);a.value=g.data||[]}catch{}finally{o.value=!1}},m=async(g,T)=>{try{await Gl.unlinkIssue(g,T,t.conversationId),nn(fg.UNLINK_ISSUE),a.value=a.value.filter(S=>S.id!==g),_e(n("INTEGRATION_SETTINGS.LINEAR.UNLINK.SUCCESS"))}catch(S){const b=lr(S,n("INTEGRATION_SETTINGS.LINEAR.UNLINK.ERROR"));_e(b)}},h=()=>{l.value=!0},_=()=>{l.value=!1,u()};return ot(()=>t.conversationId,()=>{u()}),pt(()=>{u()}),(g,T)=>{const S=z("woot-modal");return p(),f("div",null,[c("div",TFe,[v(ce,{ghost:"",xs:"",icon:"i-lucide-plus",label:g.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK_BUTTON"),onClick:h},null,8,["label"])]),o.value?(p(),f("div",AFe,[v(qn)])):d.value?(p(),f("div",IFe,[(p(!0),f(fe,null,Ae(a.value,b=>(p(),V(EFe,{key:b.id,class:"px-4 pt-3 pb-4 border-b border-n-weak last:border-b-0","linked-issue":b,onUnlinkIssue:m},null,8,["linked-issue"]))),128))])):(p(),f("div",yFe,[c("p",SFe,E(g.$t("INTEGRATION_SETTINGS.LINEAR.NO_LINKED_ISSUES")),1)])),v(S,{show:l.value,"onUpdate:show":T[0]||(T[0]=b=>l.value=b),"on-close":_,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:K(()=>[v(Y7e,{conversation:r.value,"account-id":I(i),onClose:_},null,8,["conversation","account-id"])]),_:1},8,["show"])])}}},xFe={class:"flex flex-col p-3"},NFe={class:"w-12 h-12 mb-3"},OFe=["src"],wFe=["src"],RFe={class:"flex-1 mb-4"},$Fe={class:"mb-1.5 text-sm font-medium text-n-slate-12"},MFe={key:0,class:"text-sm text-n-slate-11"},kFe={key:1,class:"text-sm text-n-slate-11"},tf="linear",LFe={__name:"LinearSetupCTA",setup(e){const{isAdmin:t}=io(),s=Nn().getCurrentAccountId,a=C(()=>Bt(`accounts/${s.value}/settings/integrations/${tf}`)),o=()=>{window.open(a.value,"_blank")};return(l,i)=>(p(),f("div",xFe,[c("div",NFe,[c("img",{src:`/dashboard/images/integrations/${tf}.png`,class:"object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:hidden dark:bg-n-alpha-2"},null,8,OFe),c("img",{src:`/dashboard/images/integrations/${tf}-dark.png`,class:"hidden object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:block"},null,8,wFe)]),c("div",RFe,[c("h3",$Fe,E(l.$t("INTEGRATION_SETTINGS.LINEAR.CTA.TITLE")),1),I(t)?(p(),f("p",MFe,E(l.$t("INTEGRATION_SETTINGS.LINEAR.CTA.DESCRIPTION")),1)):(p(),f("p",kFe,E(l.$t("INTEGRATION_SETTINGS.LINEAR.CTA.AGENT_DESCRIPTION")),1))]),I(t)?(p(),V(ce,{key:0,faded:"",slate:"",onClick:o},{default:K(()=>[Ee(E(l.$t("INTEGRATION_SETTINGS.LINEAR.CTA.BUTTON_TEXT")),1)]),_:1})):O("",!0)]))}},DFe={class:"w-full"},PFe={class:"pb-8 list-group px-2"},BFe={key:0,class:"conversation--actions"},FFe={key:1,class:"conversation--actions"},UFe={key:2},GFe={key:3},VFe={key:4},HFe={key:6},WFe={key:7},KFe={key:8},zFe={key:9},jFe={__name:"ContactPanel",props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0}},setup(e){const t=e,{updateUISettings:n,isContactSidebarItemOpen:s,conversationSidebarItemsOrder:a,toggleSidebarUIState:o}=Sn(),l=F(!1),i=F([]),r=ke("getCurrentAccountId"),d=ke("accounts/isFeatureEnabledonAccount"),u=oa("integrations/getIntegration","shopify"),m=C(()=>u.value.enabled),h=oa("integrations/getIntegration","linear"),_=C(()=>{var G;return((G=h.value)==null?void 0:G.enabled)||!1}),g=d.value(r.value,Mt.LINEAR),T=yt(),S=ke("getSelectedChat"),b=C(()=>t.conversationId),A=ke("conversationMetadata/getConversationMetadata"),y=C(()=>A.value(b.value)),x=C(()=>y.value.additional_attributes||{}),$=C(()=>{var G;return(G=S.value.meta)==null?void 0:G.channel}),N=ke("contacts/getContact"),w=C(()=>{var G,L;return(L=(G=S.value.meta)==null?void 0:G.sender)==null?void 0:L.id}),D=C(()=>N.value(w.value)),H=C(()=>D.value.additional_attributes||{}),B=()=>{w.value&&T.dispatch("contacts/show",{id:w.value})};ot(w,(G,L)=>{G&&G!==L&&B()});const k=()=>{l.value=!1,n({conversation_sidebar_items_order:i.value})},U=()=>{n({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})};return pt(()=>{i.value=[...a.value];const G="kanban_panel",L={name:G,enabled:!0},M=i.value.findIndex(R=>R.name===G);M!==-1&&i.value.splice(M,1),i.value.unshift(L),B(),T.dispatch("attributes/get",0),T.dispatch("integrations/get","linear")}),(G,L)=>{const M=z("woot-feature-toggle");return p(),f("div",DFe,[v(QI,{title:G.$t("CONVERSATION.SIDEBAR.CONTACT"),onClose:U},null,8,["title"]),v(l3e,{contact:D.value,"channel-type":$.value},null,8,["contact","channel-type"]),c("div",PFe,[v(I(kr),{list:i.value,animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"name",class:"flex flex-col gap-3",onStart:L[10]||(L[10]=R=>l.value=!0),onEnd:k},{item:K(({element:R})=>[R.name==="conversation_actions"?(p(),f("div",BFe,[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_ACTIONS"),"is-open":I(s)("is_conv_actions_open"),onToggle:L[0]||(L[0]=P=>I(o)("is_conv_actions_open",P))},{default:K(()=>[v(zRe,{"conversation-id":b.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):R.name==="conversation_participants"?(p(),f("div",FFe,[v(ko,{title:G.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_TITLE"),"is-open":I(s)("is_conv_participants_open"),onToggle:L[1]||(L[1]=P=>I(o)("is_conv_participants_open",P))},{default:K(()=>[v(l$e,{"conversation-id":b.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):R.name==="conversation_info"?(p(),f("div",UFe,[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_INFO"),"is-open":I(s)("is_conv_details_open"),compact:"",onToggle:L[2]||(L[2]=P=>I(o)("is_conv_details_open",P))},{default:K(()=>[v(Y3e,{"conversation-attributes":x.value,"contact-attributes":H.value},null,8,["conversation-attributes","contact-attributes"])]),_:1},8,["title","is-open"])])):R.name==="contact_attributes"?(p(),f("div",GFe,[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":I(s)("is_contact_attributes_open"),compact:"",onToggle:L[3]||(L[3]=P=>I(o)("is_contact_attributes_open",P))},{default:K(()=>[v(XI,{"attribute-type":"contact_attribute","attribute-from":"conversation_contact_panel","contact-id":D.value.id,"empty-state-message":G.$t("CONVERSATION_CUSTOM_ATTRIBUTES.NO_RECORDS_FOUND")},null,8,["contact-id","empty-state-message"])]),_:1},8,["title","is-open"])])):R.name==="previous_conversation"?(p(),f("div",VFe,[D.value.id?(p(),V(ko,{key:0,title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.PREVIOUS_CONVERSATION"),"is-open":I(s)("is_previous_conv_open"),compact:"",onToggle:L[4]||(L[4]=P=>I(o)("is_previous_conv_open",P))},{default:K(()=>[v(zwe,{"contact-id":D.value.id,"conversation-id":b.value},null,8,["contact-id","conversation-id"])]),_:1},8,["title","is-open"])):O("",!0)])):R.name==="macros"?(p(),V(M,{key:5,"feature-key":"macros"},{default:K(()=>[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.MACROS"),"is-open":I(s)("is_macro_open"),compact:"",onToggle:L[5]||(L[5]=P=>I(o)("is_macro_open",P))},{default:K(()=>[v(dLe,{"conversation-id":b.value},null,8,["conversation-id"])]),_:1},8,["title","is-open"])]),_:1})):R.name==="linear_issues"&&I(g)?(p(),f("div",HFe,[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.LINEAR_ISSUES"),"is-open":I(s)("is_linear_issues_open"),compact:"",onToggle:L[6]||(L[6]=P=>I(o)("is_linear_issues_open",P))},{default:K(()=>[_.value?(p(),V(CFe,{key:1,"conversation-id":b.value},null,8,["conversation-id"])):(p(),V(LFe,{key:0}))]),_:1},8,["title","is-open"])])):R.name==="shopify_orders"&&m.value?(p(),f("div",WFe,[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.SHOPIFY_ORDERS"),"is-open":I(s)("is_shopify_orders_open"),compact:"",onToggle:L[7]||(L[7]=P=>I(o)("is_shopify_orders_open",P))},{default:K(()=>[v($7e,{"contact-id":w.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):R.name==="contact_notes"?(p(),f("div",KFe,[v(ko,{title:G.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_NOTES"),"is-open":I(s)("is_contact_notes_open"),compact:"",onToggle:L[8]||(L[8]=P=>I(o)("is_contact_notes_open",P))},{default:K(()=>[v(b3e,{"contact-id":w.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):R.name==="kanban_panel"?(p(),f("div",zFe,[v(ko,{title:"Kanban","is-open":I(s)("is_kanban_panel_open"),compact:"",onToggle:L[9]||(L[9]=P=>I(o)("is_kanban_panel_open",P))},{default:K(()=>[v(r7e,{"conversation-id":b.value},null,8,["conversation-id"])]),_:1},8,["is-open"])])):O("",!0)]),_:1},8,["list"])])])}}},YFe=Fe(jFe,[["__scopeId","data-v-1c08c3f3"]]),XFe={class:"flex flex-1 overflow-auto"},JI={__name:"ConversationSidebar",props:{currentChat:{required:!0,type:Object}},setup(e){const{uiSettings:t,updateUISettings:n}=Sn(),{width:s}=Mi(),a=C(()=>{const{is_contact_sidebar_open:i}=t.value;return i?0:null}),o=C(()=>s.value<Pt.SMALL_SCREEN_BREAKPOINT),l=()=>{var i;o.value&&((i=t.value)!=null&&i.is_contact_sidebar_open)&&n({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})};return(i,r)=>pe((p(),f("div",{class:re(["bg-n-background h-full overflow-hidden flex flex-col fixed top-0 z-40 w-full max-w-sm transition-transform duration-300 ease-in-out ltr:right-0 rtl:left-0 md:static md:w-[320px] md:min-w-[320px] ltr:border-l rtl:border-r border-n-weak 2xl:min-w-[360px] 2xl:w-[360px] shadow-lg md:shadow-none",[{"md:flex":a.value===0,"md:hidden":a.value!==0}]])},[c("div",XFe,[pe(v(YFe,{"conversation-id":e.currentChat.id,"inbox-id":e.currentChat.inbox_id},null,8,["conversation-id","inbox-id"]),[[pn,a.value===0]])])],2)),[[I(ca),()=>l()]])}},qFe={components:{ChatList:TTe,ConversationBox:PI,CmdBarConversationSnooze:BI,SidepanelSwitch:FI,ConversationSidebar:JI},beforeRouteLeave(e,t,n){this.conversationId&&this.$store.dispatch("clearSelectedState"),n()},props:{inboxId:{type:[String,Number],default:0},conversationId:{type:[String,Number],default:0},label:{type:String,default:""},teamId:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0}},setup(){const{uiSettings:e,updateUISettings:t}=Sn(),{accountId:n}=_s();return{uiSettings:e,updateUISettings:t,accountId:n}},data(){return{showSearchModal:!1}},computed:{...St({chatList:"getAllConversations",currentChat:"getSelectedChat"}),showConversationList(){return this.isOnExpandedLayout?!this.conversationId:!0},showMessageView(){return this.conversationId?!0:!this.isOnExpandedLayout},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=Pt,{conversation_display_type:t=e}=this.uiSettings;return t!==e},shouldShowSidebar(){if(!this.currentChat.id)return!1;const{is_contact_sidebar_open:e}=this.uiSettings;return e}},watch:{conversationId(){this.fetchConversationIfUnavailable()}},created(){this.conversationId||this.$store.dispatch("clearSelectedState")},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("portals/index"),this.initialize(),this.$watch("$store.state.route",()=>this.initialize()),this.$watch("chatList.length",()=>{this.setActiveChat()})},methods:{onConversationLoad(){this.fetchConversationIfUnavailable()},initialize(){this.$store.dispatch("setActiveInbox",this.inboxId),this.setActiveChat()},toggleConversationLayout(){const{LAYOUT_TYPES:e}=Pt,{conversation_display_type:t=e.CONDENSED}=this.uiSettings,n=t===e.CONDENSED?e.EXPANDED:e.CONDENSED;this.updateUISettings({conversation_display_type:n,previously_used_conversation_display_type:n})},fetchConversationIfUnavailable(){if(!this.conversationId)return;this.findConversation()||this.$store.dispatch("getConversation",this.conversationId)},findConversation(){const e=parseInt(this.conversationId,10),[t]=this.chatList.filter(n=>n.id===e);return t},setActiveChat(){if(this.conversationId){const e=this.findConversation();if(!e||e.id===this.currentChat.id)return;const{messageId:t}=this.$route.query;this.$store.dispatch("setActiveChat",{data:e,after:t}).then(()=>{It.emit(xn.SCROLL_TO_MESSAGE,{messageId:t})})}else this.$store.dispatch("clearSelectedState")},onSearch(){this.showSearchModal=!0},closeSearch(){this.showSearchModal=!1}}},ZFe={class:"flex w-full h-full min-w-0"};function QFe(e,t,n,s,a,o){const l=z("ChatList"),i=z("SidepanelSwitch"),r=z("ConversationBox"),d=z("ConversationSidebar"),u=z("CmdBarConversationSnooze");return p(),f("section",ZFe,[v(l,{"show-conversation-list":o.showConversationList,"conversation-inbox":n.inboxId,label:n.label,"team-id":n.teamId,"conversation-type":n.conversationType,"folders-id":n.foldersId,"is-on-expanded-layout":o.isOnExpandedLayout,onConversationLoad:o.onConversationLoad},null,8,["show-conversation-list","conversation-inbox","label","team-id","conversation-type","folders-id","is-on-expanded-layout","onConversationLoad"]),o.showMessageView?(p(),V(r,{key:0,"inbox-id":n.inboxId,"is-on-expanded-layout":o.isOnExpandedLayout},{default:K(()=>[e.currentChat.id?(p(),V(i,{key:0})):O("",!0)]),_:1},8,["inbox-id","is-on-expanded-layout"])):O("",!0),o.shouldShowSidebar?(p(),V(d,{key:1,"current-chat":e.currentChat},null,8,["current-chat"])):O("",!0),v(u)])}const na=Fe(qFe,[["render",QFe]]),sa=["administrator","agent","conversation_manage","conversation_unassigned_manage","conversation_participating_manage"],JFe={routes:[{path:Bt("accounts/:accountId/dashboard"),name:"home",meta:{permissions:sa},component:na,props:()=>({inboxId:0})},{path:Bt("accounts/:accountId/conversations/:conversation_id"),name:"inbox_conversation",meta:{permissions:sa},component:na,props:e=>({inboxId:0,conversationId:e.params.conversation_id})},{path:Bt("accounts/:accountId/inbox/:inbox_id"),name:"inbox_dashboard",meta:{permissions:sa},component:na,props:e=>({inboxId:e.params.inbox_id})},{path:Bt("accounts/:accountId/inbox/:inbox_id/conversations/:conversation_id"),name:"conversation_through_inbox",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversation_id,inboxId:e.params.inbox_id})},{path:Bt("accounts/:accountId/label/:label"),name:"label_conversations",meta:{permissions:sa},component:na,props:e=>({label:e.params.label})},{path:Bt("accounts/:accountId/label/:label/conversations/:conversation_id"),name:"conversations_through_label",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversation_id,label:e.params.label})},{path:Bt("accounts/:accountId/team/:teamId"),name:"team_conversations",meta:{permissions:sa},component:na,props:e=>({teamId:e.params.teamId})},{path:Bt("accounts/:accountId/team/:teamId/conversations/:conversationId"),name:"conversations_through_team",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversationId,teamId:e.params.teamId})},{path:Bt("accounts/:accountId/custom_view/:id"),name:"folder_conversations",meta:{permissions:sa},component:na,props:e=>({foldersId:e.params.id})},{path:Bt("accounts/:accountId/custom_view/:id/conversations/:conversation_id"),name:"conversations_through_folders",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversation_id,foldersId:e.params.id})},{path:Bt("accounts/:accountId/mentions/conversations"),name:"conversation_mentions",meta:{permissions:sa},component:na,props:()=>({conversationType:"mention"})},{path:Bt("accounts/:accountId/mentions/conversations/:conversationId"),name:"conversation_through_mentions",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversationId,conversationType:"mention"})},{path:Bt("accounts/:accountId/unattended/conversations"),name:"conversation_unattended",meta:{permissions:sa},component:na,props:()=>({conversationType:"unattended"})},{path:Bt("accounts/:accountId/unattended/conversations/:conversationId"),name:"conversation_through_unattended",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversationId,conversationType:"unattended"})},{path:Bt("accounts/:accountId/participating/conversations"),name:"conversation_participating",meta:{permissions:sa},component:na,props:()=>({conversationType:"participating"})},{path:Bt("accounts/:accountId/participating/conversations/:conversationId"),name:"conversation_through_participating",meta:{permissions:sa},component:na,props:e=>({conversationId:e.params.conversationId,conversationType:"participating"})}]},eUe={class:"flex items-center"},tUe=["placeholder","value"],nUe={__name:"SearchHeader",emits:["search"],setup(e,{emit:t}){const n=t,s=F(""),a=F(!1),o=Ks("searchInput"),l=m=>{m.key==="/"&&document.activeElement.tagName!=="INPUT"?(m.preventDefault(),o.value.focus()):m.key==="Escape"&&document.activeElement.tagName==="INPUT"&&(m.preventDefault(),o.value.blur())},i=ml(m=>n("search",m.length>1||m.match(/^[0-9]+$/)?m:""),500),r=m=>{s.value=m.target.value,i(s.value)},d=()=>{a.value=!0},u=()=>{a.value=!1};return pt(()=>{o.value.focus(),document.addEventListener("keydown",l)}),zs(()=>{document.removeEventListener("keydown",l)}),(m,h)=>{const _=z("fluent-icon"),g=z("woot-label");return p(),f("div",{class:re(["input-container rounded-xl transition-[border-bottom] duration-[0.2s] ease-[ease-in-out] relative flex items-center py-2 px-4 h-14 gap-2 border border-solid bg-n-alpha-black2",{"border-n-brand":a.value,"border-n-weak":!a.value}])},[c("div",eUe,[v(_,{icon:"search",class:re(["icon",{"text-n-blue-text":a.value,"text-n-slate-10":!a.value}]),"aria-hidden":"true"},null,8,["class"])]),c("input",{ref_key:"searchInput",ref:o,type:"search",class:"reset-base outline-none w-full m-0 bg-transparent border-transparent shadow-none text-n-slate-12 dark:text-n-slate-12 active:border-transparent active:shadow-none hover:border-transparent hover:shadow-none focus:border-transparent focus:shadow-none",placeholder:m.$t("SEARCH.INPUT_PLACEHOLDER"),value:s.value,onFocus:d,onBlur:u,onInput:r},null,40,tUe),v(g,{title:m.$t("SEARCH.PLACEHOLDER_KEYBINDING"),"show-close":!1,small:"",class:"!m-0 whitespace-nowrap !bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong"},null,8,["title"])],2)}}},sUe={class:"mt-1 border-b border-n-weak"},aUe={__name:"SearchTabs",props:{tabs:{type:Array,default:()=>[]},selectedTab:{type:Number,default:0}},emits:["tabChange"],setup(e,{emit:t}){const n=e,s=t,a=F(n.selectedTab);ot(()=>n.selectedTab,(l,i)=>{l!==i&&(a.value=n.selectedTab)});const o=l=>{a.value=l,s("tabChange",n.tabs[l].key)};return(l,i)=>{const r=z("woot-tabs-item"),d=z("woot-tabs");return p(),f("div",sUe,[v(d,{index:a.value,border:!1,onChange:o},{default:K(()=>[(p(!0),f(fe,null,Ae(e.tabs,(u,m)=>(p(),V(r,{key:u.key,index:m,name:u.name,count:u.count,"show-badge":u.showBadge,"is-compact":""},null,8,["index","name","count","show-badge"]))),128))]),_:1},8,["index"])])}}},oUe={class:"mx-0 my-2"},lUe={key:0,class:"sticky top-0 p-2 z-50 mb-0.5 bg-n-background"},iUe={class:"text-sm text-n-slate-12"},rUe={key:2,class:"flex items-center justify-center px-4 py-6 m-2 rounded-xl bg-n-slate-2 dark:bg-n-solid-1"},cUe={class:"mx-2 my-0 text-center text-n-slate-11"},jp={__name:"SearchResultSection",props:{title:{type:String,default:""},empty:{type:Boolean,default:!1},query:{type:String,default:""},showTitle:{type:Boolean,default:!0},isFetching:{type:Boolean,default:!0}},setup(e){const t=e,n=C(()=>t.title.toLowerCase());return(s,a)=>{const o=z("woot-loading-state"),l=z("fluent-icon");return p(),f("section",oUe,[e.showTitle?(p(),f("div",lUe,[c("h3",iUe,E(e.title),1)])):O("",!0),at(s.$slots,"default"),e.isFetching?(p(),V(o,{key:1,message:e.empty?s.$t("SEARCH.SEARCHING_DATA"):s.$t("SEARCH.LOADING_DATA")},null,8,["message"])):O("",!0),e.empty&&!e.isFetching?(p(),f("div",rUe,[v(l,{icon:"info",size:"16px",class:"text-n-slate-11"}),c("p",cUe,E(s.$t("SEARCH.EMPTY_STATE",{item:n.value,query:e.query})),1)])):O("",!0)])}}},dUe={class:"flex-grow min-w-0 ml-2"},uUe={class:"flex items-center min-w-0 justify-between gap-1 mb-1"},pUe={class:"flex"},mUe={class:"flex items-center justify-center h-5 ml-1 rounded bg-n-slate-3 dark:bg-n-solid-3 w-fit rtl:ml-0 rtl:mr-1"},hUe={class:"text-xs font-normal min-w-0 truncate text-n-slate-11 dark:text-n-slate-11"},fUe={class:"flex flex-wrap gap-x-2 gap-y-1.5"},gUe={class:"text-xs font-normal text-n-slate-11 dark:text-n-slate-11"},e2={__name:"SearchResultConversationItem",props:{id:{type:Number,default:0},inbox:{type:Object,default:()=>({})},name:{type:String,default:""},email:{type:String,default:""},accountId:{type:[String,Number],default:""},createdAt:{type:[String,Date,Number],default:""},messageId:{type:Number,default:0},emailSubject:{type:String,default:""}},setup(e){const t=e,n=C(()=>{const l={};return t.messageId&&(l.messageId=t.messageId),Bt(`accounts/${t.accountId}/conversations/${t.id}`,l)}),s=Ds(t.createdAt),a=C(()=>[{label:"SEARCH.FROM",value:t.name,show:!!t.name},{label:"SEARCH.EMAIL",value:t.email,show:!!t.email},{label:"SEARCH.EMAIL_SUBJECT",value:t.emailSubject,show:!!t.emailSubject}]),o=C(()=>a.value.filter(l=>l.show));return(l,i)=>{const r=z("woot-label"),d=z("router-link");return p(),V(d,{to:n.value,class:"flex p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:K(()=>[v(Ft,{name:"chats",size:24,"icon-name":"i-lucide-messages-square",class:"[&>span]:rounded"}),c("div",dUe,[c("div",uUe,[c("div",pUe,[v(r,{class:"!bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong m-0",title:`#${e.id}`,"show-close":!1,small:""},null,8,["title"]),c("div",mUe,[v(M_,{inbox:e.inbox,class:"mx-2 bg-n-slate-3 dark:bg-n-solid-3 text-n-slate-11 dark:text-n-slate-11"},null,8,["inbox"])])]),c("span",hUe,E(I(s)),1)]),c("div",fUe,[(p(!0),f(fe,null,Ae(o.value,u=>(p(),f("h5",{key:u.label,class:"m-0 text-sm min-w-0 text-n-slate-12 dark:text-n-slate-12 truncate"},[c("span",gUe,E(l.$t(u.label))+": ",1),Ee(" "+E(u.value),1)]))),128))]),at(l.$slots,"default")])]),_:3},8,["to"])}}},_Ue={key:0,class:"space-y-1.5 list-none"},vUe={__name:"SearchResultConversationsList",props:{conversations:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=e,n=ke("getCurrentAccountId"),s=C(()=>t.conversations.map(a=>{var o;return{...a,mail_subject:((o=a.additional_attributes)==null?void 0:o.mail_subject)||""}}));return(a,o)=>(p(),V(jp,{title:a.$t("SEARCH.SECTION.CONVERSATIONS"),empty:!e.conversations.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.conversations.length?(p(),f("ul",_Ue,[(p(!0),f(fe,null,Ae(s.value,l=>(p(),f("li",{key:l.id},[v(e2,{id:l.id,name:l.contact.name,email:l.contact.email,"account-id":I(n),inbox:l.inbox,"created-at":l.created_at,"email-subject":l.mail_subject},null,8,["id","name","email","account-id","inbox","created-at","email-subject"])]))),128))])):O("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},bUe={key:0,class:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t to-transparent from-n-background flex items-end justify-center pb-2"},EUe={__name:"ReadMore",props:{shrink:{type:Boolean,default:!1}},emits:["expand"],setup(e){return(t,n)=>(p(),f("div",null,[c("div",{class:re({"max-h-[100px] overflow-hidden relative":e.shrink})},[at(t.$slots,"default"),e.shrink?(p(),f("div",bUe,[v(ce,{label:t.$t("SEARCH.READ_MORE"),icon:"i-lucide-chevrons-down",blue:"",xs:"",faded:"",class:"backdrop-filter backdrop-blur-[2px]",onClick:n[0]||(n[0]=ze(s=>t.$emit("expand"),["prevent"]))},null,8,["label"])])):O("",!0)],2)]))}},TUe={class:"header"},AUe={class:"text-n-slate-11"},yUe={class:"message-content"},SUe={__name:"MessageContent",props:{author:{type:String,default:""},content:{type:String,default:""},searchTerm:{type:String,default:""}},setup(e){const t=e,{highlightContent:n}=$a(),s=Ks("messageContainer"),a=F(!1),o=()=>{const r=s.value;if(r){const d=r.querySelector(".message-content");a.value=d.offsetHeight>150}},l=r=>{var d=document.createTextNode(r),u=document.createElement("p");return u.appendChild(d),u.innerText},i=(r="")=>{const d=l(r);return n(d,t.searchTerm,"searchkey--highlight")};return pt(()=>{ot(()=>s.value,o),jt(o)}),(r,d)=>{const u=_t("dompurify-html");return p(),f("blockquote",{ref_key:"messageContainer",ref:s,class:"message border-l-2 border-n-weak"},[c("p",TUe,[c("strong",AUe,E(e.author),1),Ee(" "+E(r.$t("SEARCH.WROTE")),1)]),v(EUe,{shrink:a.value,onExpand:d[0]||(d[0]=m=>a.value=!1)},{default:K(()=>[pe(c("div",yUe,null,512),[[u,i(e.content)]])]),_:1},8,["shrink"])],512)}}},IUe=Fe(SUe,[["__scopeId","data-v-879926cf"]]),CUe={key:0,class:"space-y-1.5 list-none"},xUe={__name:"SearchResultMessagesList",props:{messages:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const{t}=Pe(),n=ke("getCurrentAccountId"),s=a=>a&&a.sender&&a.sender.name?a.sender.name:t("SEARCH.BOT_LABEL");return(a,o)=>(p(),V(jp,{title:a.$t("SEARCH.SECTION.MESSAGES"),empty:!e.messages.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.messages.length?(p(),f("ul",CUe,[(p(!0),f(fe,null,Ae(e.messages,l=>(p(),f("li",{key:l.id},[v(e2,{id:l.conversation_id,"account-id":I(n),inbox:l.inbox,"created-at":l.created_at,"message-id":l.id},{default:K(()=>[v(IUe,{author:s(l),content:l.content,"search-term":e.query},null,8,["author","content","search-term"])]),_:2},1032,["id","account-id","inbox","created-at","message-id"])]))),128))])):O("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},NUe={class:"ml-2 rtl:mr-2 min-w-0 rtl:ml-0"},OUe={class:"text-sm name truncate min-w-0 text-n-slate-12"},wUe={class:"grid items-center m-0 gap-1 text-sm grid-cols-[minmax(0,1fr)_auto_auto]"},RUe=["title"],$Ue={key:1,class:"text-n-slate-10"},MUe={key:2,class:"text-n-slate-12"},kUe={__name:"SearchResultContactItem",props:{id:{type:[String,Number],default:0},email:{type:String,default:""},phone:{type:String,default:""},name:{type:String,default:""},thumbnail:{type:String,default:""},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=C(()=>Bt(`accounts/${t.accountId}/contacts/${t.id}`));return(s,a)=>{const o=z("router-link");return p(),V(o,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:K(()=>[v(Ft,{name:e.name,src:e.thumbnail,size:24,"rounded-full":"",class:"mt-0.5"},null,8,["name","src"]),c("div",NUe,[c("h5",OUe,E(e.name),1),c("p",wUe,[e.email?(p(),f("span",{key:0,class:"truncate text-n-slate-12",title:e.email},E(e.email),9,RUe)):O("",!0),e.phone?(p(),f("span",$Ue,"")):O("",!0),e.phone?(p(),f("span",MUe,E(e.phone),1)):O("",!0)])])]),_:1},8,["to"])}}},LUe={key:0,class:"space-y-1.5 list-none"},DUe={__name:"SearchResultContactsList",props:{contacts:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=ke("getCurrentAccountId");return(n,s)=>(p(),V(jp,{title:n.$t("SEARCH.SECTION.CONTACTS"),empty:!e.contacts.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.contacts.length?(p(),f("ul",LUe,[(p(!0),f(fe,null,Ae(e.contacts,a=>(p(),f("li",{key:a.id},[v(kUe,{id:a.id,name:a.name,email:a.email,phone:a.phone_number,"account-id":I(t),thumbnail:a.thumbnail},null,8,["id","name","email","phone","account-id","thumbnail"])]))),128))])):O("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},PUe={class:"flex items-center justify-center w-6 h-6 mt-0.5 rounded bg-n-slate-3"},BUe={class:"ltr:ml-2 rtl:mr-2 min-w-0 flex-1"},FUe={class:"flex items-center gap-2"},UUe={class:"text-sm font-medium truncate min-w-0 text-n-slate-12"},GUe={key:0,class:"text-xs font-medium whitespace-nowrap capitalize bg-n-slate-3 px-1 py-0.5 rounded text-n-slate-10"},VUe={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-2"},RE=300,HUe={__name:"SearchResultArticleItem",props:{id:{type:[String,Number],default:0},title:{type:String,default:""},description:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""},content:{type:String,default:""},portalSlug:{type:String,required:!0},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=C(()=>Bt(`accounts/${t.accountId}/portals/${t.portalSlug}/${t.locale}/articles/edit/${t.id}`)),s=C(()=>{if(!t.content)return t.description||"";const o=new tp(t.content).plainText.trim();return o.length>RE?`${o.substring(0,RE)}...`:o});return(a,o)=>{const l=z("router-link");return p(),V(l,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:K(()=>[c("div",PUe,[v(Wt,{icon:"i-lucide-library-big",class:"text-n-slate-10"})]),c("div",BUe,[c("div",FUe,[c("h5",UUe,E(e.title),1),e.category?(p(),f("span",GUe,E(e.category),1)):O("",!0)]),s.value?(p(),f("p",VUe,E(s.value),1)):O("",!0)])]),_:1},8,["to"])}}},WUe={key:0,class:"space-y-1.5 list-none"},KUe={__name:"SearchResultArticlesList",props:{articles:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=ke("getCurrentAccountId");return(n,s)=>(p(),V(jp,{title:n.$t("SEARCH.SECTION.ARTICLES"),empty:!e.articles.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.articles.length?(p(),f("ul",WUe,[(p(!0),f(fe,null,Ae(e.articles,a=>(p(),f("li",{key:a.id},[v(HUe,{id:a.id,title:a.title,description:a.description,content:a.content,"portal-slug":a.portal_slug,locale:a.locale,"account-id":I(t),category:a.category_name,status:a.status},null,8,["id","title","description","content","portal-slug","locale","account-id","category","status"])]))),128))])):O("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},zUe={class:"flex flex-col w-full h-full bg-n-background"},jUe={class:"flex w-full p-4"},YUe={class:"flex flex-col flex-grow w-full h-full overflow-hidden"},XUe={class:"w-full max-w-4xl mx-auto"},qUe={class:"flex flex-col w-full px-4"},ZUe={class:"flex-grow w-full h-full overflow-y-auto"},QUe={class:"w-full max-w-4xl mx-auto px-4 pb-6"},JUe={key:0},eGe={key:1,class:"flex justify-center mt-4 mb-6"},tGe={key:1,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 rounded-md"},nGe={class:"m-2 text-center text-n-slate-11"},sGe={key:2,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 text-center rounded-md"},aGe={class:"text-center margin-bottom-0"},oGe={class:"m-2 text-center text-n-slate-11"},lGe=15,iGe={__name:"SearchView",setup(e){const t=En(),n=yt(),{t:s}=Pe(),a=F("all"),o=F(""),l=F({contacts:1,conversations:1,messages:1,articles:1}),i=ke("conversationSearch/getContactRecords"),r=ke("conversationSearch/getConversationRecords"),d=ke("conversationSearch/getMessageRecords"),u=ke("conversationSearch/getArticleRecords"),m=ke("conversationSearch/getUIFlags"),h=(ne,J)=>ne.value.map(ue=>({...ue,type:J})),_=C(()=>h(i,"contact")),g=C(()=>h(r,"conversation")),T=C(()=>h(d,"message")),S=C(()=>h(u,"article")),b=C(()=>a.value==="all"),A=ne=>b.value?ne.value.slice(0,5):ne.value,y=C(()=>A(_)),x=C(()=>A(g)),$=C(()=>A(T)),N=C(()=>A(S)),w=ne=>C(()=>a.value===ne||b.value),D=w("contacts"),H=w("conversations"),B=w("messages"),k=w("articles"),{shouldShow:U,isFeatureFlagEnabled:G}=Br(),L={all:{permissions:[Ji,...fs,...Xs,er],count:()=>null},contacts:{permissions:[...fs,Ji],count:()=>_.value.length},conversations:{permissions:[...fs,...Xs],count:()=>g.value.length},messages:{permissions:[...fs,...Xs],count:()=>T.value.length},articles:{permissions:[...fs,er],featureFlag:Mt.HELP_CENTER,count:()=>S.value.length}},M=C(()=>Object.entries(L).map(([ne,J])=>({key:ne,name:s(`SEARCH.TABS.${ne.toUpperCase()}`),count:J.count(),showBadge:ne!=="all",permissions:J.permissions,featureFlag:J.featureFlag})).filter(ne=>U(ne.featureFlag,ne.permissions,null)&&G(ne.featureFlag))),R=C(()=>[{permissions:[...fs,Ji],count:()=>y.value.length},{permissions:[...fs,...Xs],count:()=>x.value.length+$.value.length},{permissions:[...fs,er],featureFlag:Mt.HELP_CENTER,count:()=>N.value.length}].filter(J=>U(J.featureFlag,J.permissions,null)&&G(J.featureFlag)).map(J=>J.count()).reduce((J,ue)=>J+ue,0)),P=C(()=>{const ne=M.value.findIndex(J=>J.key===a.value);return ne>=0?ne:0}),W=C(()=>{const{contact:ne,message:J,conversation:ue,article:Ne,isFetching:Re}=m.value;return Re||ne.isFetching||J.isFetching||ue.isFetching||Ne.isFetching}),Q=C(()=>R.value===0&&m.value.isSearchCompleted&&b.value&&!W.value&&o.value),Z=C(()=>m.value.isSearchCompleted&&R.value!==0||W.value||!b.value&&o.value&&!W.value),j=C(()=>{if(!o.value||W.value||a.value==="all")return!1;const ne={contacts:_.value,conversations:g.value,messages:T.value,articles:S.value}[a.value];return(ne==null?void 0:ne.length)>0&&ne.length===l.value[a.value]*lGe}),X=C(()=>{var ne,J,ue,Ne;return{contacts:((ne=_.value)==null?void 0:ne.length)>5&&b.value,conversations:((J=g.value)==null?void 0:J.length)>5&&b.value,messages:((ue=T.value)==null?void 0:ue.length)>5&&b.value,articles:((Ne=S.value)==null?void 0:Ne.length)>5&&b.value}}),q=()=>{l.value={contacts:1,conversations:1,messages:1,articles:1},n.dispatch("conversationSearch/clearSearchResults")},se=ne=>{o.value=ne,q(),ne&&(nn(_a.SEARCH_CONVERSATION),n.dispatch("conversationSearch/fullSearch",{q:ne,page:1}))},he=()=>{window.history.length>2?t.go(-1):t.push({name:"home"}),q()},be=()=>{const ne={contacts:"conversationSearch/contactSearch",conversations:"conversationSearch/conversationSearch",messages:"conversationSearch/messageSearch",articles:"conversationSearch/articleSearch"};if(m.value.isFetching||a.value==="all")return;const J=a.value;l.value[J]+=1,n.dispatch(ne[J],{q:o.value,page:l.value[J]})};return pt(()=>{n.dispatch("conversationSearch/clearSearchResults")}),zs(()=>{o.value="",n.dispatch("conversationSearch/clearSearchResults")}),(ne,J)=>{const ue=z("fluent-icon");return p(),f("div",zUe,[c("div",jUe,[v(ce,{label:I(s)("GENERAL_SETTINGS.BACK"),icon:"i-lucide-chevron-left",faded:"",primary:"",sm:"",onClick:he},null,8,["label"])]),c("section",YUe,[c("div",XUe,[c("div",qUe,[v(nUe,{onSearch:se}),o.value?(p(),V(aUe,{key:0,tabs:M.value,"selected-tab":P.value,onTabChange:J[0]||(J[0]=Ne=>a.value=Ne)},null,8,["tabs","selected-tab"])):O("",!0)])]),c("div",ZUe,[c("div",QUe,[Z.value?(p(),f("div",JUe,[v(_o,{permissions:[...I(fs),I(Ji)],class:"flex flex-col justify-center"},{default:K(()=>[I(D)?(p(),V(DUe,{key:0,"is-fetching":I(m).contact.isFetching,contacts:y.value,query:o.value,"show-title":b.value},null,8,["is-fetching","contacts","query","show-title"])):O("",!0),X.value.contacts?(p(),V(ce,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:J[1]||(J[1]=Ne=>a.value="contacts")},null,8,["label"])):O("",!0)]),_:1},8,["permissions"]),v(_o,{permissions:[...I(fs),...I(Xs)],class:"flex flex-col justify-center"},{default:K(()=>[I(B)?(p(),V(xUe,{key:0,"is-fetching":I(m).message.isFetching,messages:$.value,query:o.value,"show-title":b.value},null,8,["is-fetching","messages","query","show-title"])):O("",!0),X.value.messages?(p(),V(ce,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:J[2]||(J[2]=Ne=>a.value="messages")},null,8,["label"])):O("",!0)]),_:1},8,["permissions"]),v(_o,{permissions:[...I(fs),...I(Xs)],class:"flex flex-col justify-center"},{default:K(()=>[I(H)?(p(),V(vUe,{key:0,"is-fetching":I(m).conversation.isFetching,conversations:x.value,query:o.value,"show-title":b.value},null,8,["is-fetching","conversations","query","show-title"])):O("",!0),X.value.conversations?(p(),V(ce,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:J[3]||(J[3]=Ne=>a.value="conversations")},null,8,["label"])):O("",!0)]),_:1},8,["permissions"]),I(G)(I(Mt).HELP_CENTER)?(p(),V(_o,{key:0,permissions:[...I(fs),I(er)],"feature-flag":I(Mt).HELP_CENTER,class:"flex flex-col justify-center"},{default:K(()=>[I(k)?(p(),V(KUe,{key:0,"is-fetching":I(m).article.isFetching,articles:N.value,query:o.value,"show-title":b.value},null,8,["is-fetching","articles","query","show-title"])):O("",!0),X.value.articles?(p(),V(ce,{key:1,label:I(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:J[4]||(J[4]=Ne=>a.value="articles")},null,8,["label"])):O("",!0)]),_:1},8,["permissions","feature-flag"])):O("",!0),j.value?(p(),f("div",eGe,[b.value?O("",!0):(p(),V(ce,{key:0,label:I(s)("SEARCH.LOAD_MORE"),icon:"i-lucide-cloud-download",slate:"",sm:"",faded:"",onClick:be},null,8,["label"]))])):O("",!0)])):Q.value?(p(),f("div",tGe,[v(ue,{icon:"info",size:"16px",class:"text-n-slate-11"}),c("p",nGe,E(I(s)("SEARCH.EMPTY_STATE_FULL",{query:o.value})),1)])):o.value?O("",!0):(p(),f("div",sGe,[c("p",aGe,[v(ue,{icon:"search",size:"24px",class:"text-n-slate-11"})]),c("p",oGe,E(I(s)("SEARCH.EMPTY_STATE_DEFAULT")),1)]))])])])])}}},rGe=[{path:Bt("accounts/:accountId/search"),name:"search",meta:{permissions:[...fs,...Xs,Ji,er]},component:iGe}],cGe={class:"relative"},dGe={key:0,class:"absolute top-full mt-1 ltr:-right-32 rtl:-left-32 sm:ltr:right-0 sm:rtl:left-0 flex flex-col gap-4 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4"},uGe={class:"flex items-center justify-between gap-2"},pGe={class:"text-sm text-n-slate-12"},mGe={class:"flex items-center justify-between gap-2"},hGe={class:"text-sm text-n-slate-12"},fGe={__name:"ContactSortMenu",props:{activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""}},emits:["update:sort"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(!1),l=[{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.NAME"),value:"name"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.EMAIL"),value:"email"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COMPANY"),value:"company_name"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COUNTRY"),value:"country"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CITY"),value:"city"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.LAST_ACTIVITY"),value:"last_activity_at"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CREATED_AT"),value:"created_at"}],i=[{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.ASCENDING"),value:""},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.DESCENDING"),value:"-"}],r=xc(n,"activeSort"),d=xc(n,"activeOrdering"),u=C(()=>{const g=l.find(T=>T.value===r.value);return(g==null?void 0:g.label)||a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")}),m=C(()=>{const g=i.find(T=>T.value===d.value);return(g==null?void 0:g.label)||a("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")}),h=g=>{s("update:sort",{sort:g,order:n.activeOrdering})},_=g=>{s("update:sort",{sort:n.activeSort,order:g})};return(g,T)=>{const S=_t("on-clickaway");return p(),f("div",cGe,[v(ce,{icon:"i-lucide-arrow-down-up",color:"slate",size:"sm",variant:"ghost",class:re(o.value?"bg-n-alpha-2":""),onClick:T[0]||(T[0]=b=>o.value=!o.value)},null,8,["class"]),o.value?pe((p(),f("div",dGe,[c("div",uGe,[c("span",pGe,E(I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")),1),v(ju,{"model-value":r.value,options:l,label:u.value,"onUpdate:modelValue":h},null,8,["model-value","label"])]),c("div",mGe,[c("span",hGe,E(I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")),1),v(ju,{"model-value":d.value,options:i,label:m.value,"onUpdate:modelValue":_},null,8,["model-value","label"])])])),[[S,()=>o.value=!1]]):O("",!0)])}}},gGe={class:"relative"},_Ge={__name:"ContactMoreActions",emits:["add","import","export"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=[{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.ADD_CONTACT"),action:"add",value:"add",icon:"i-lucide-plus"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.EXPORT_CONTACT"),action:"export",value:"export",icon:"i-lucide-upload"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.IMPORT_CONTACT"),action:"import",value:"import",icon:"i-lucide-download"}],o=F(!1),l=({action:i})=>{i==="add"?n("add"):i==="import"?n("import"):i==="export"&&n("export")};return(i,r)=>{const d=_t("on-clickaway");return pe((p(),f("div",gGe,[v(ce,{icon:"i-lucide-ellipsis-vertical",color:"slate",variant:"ghost",size:"sm",class:re(o.value?"bg-n-alpha-2":""),onClick:r[0]||(r[0]=u=>o.value=!o.value)},null,8,["class"]),o.value?(p(),V(ua,{key:0,"menu-items":a,class:"ltr:right-0 rtl:left-0 mt-1 w-52 top-full",onAction:r[1]||(r[1]=u=>l(u))})):O("",!0)])),[[d,()=>o.value=!1]])}}},vGe={class:"sticky top-0 z-10"},bGe={class:"flex items-start sm:items-center justify-between w-full py-6 px-6 gap-2 mx-auto max-w-[60rem]"},EGe={class:"text-xl font-medium truncate text-n-slate-12"},TGe={class:"flex items-center flex-col sm:flex-row flex-shrink-0 gap-4"},AGe={key:0,class:"flex items-center gap-2 w-full"},yGe={class:"flex items-center flex-shrink-0 gap-4"},SGe={class:"flex items-center gap-2"},IGe={key:0,class:"relative"},CGe={key:0,class:"absolute top-0 right-0 w-2 h-2 rounded-full bg-n-brand"},xGe={__name:"ContactHeader",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},headerTitle:{type:String,required:!0},buttonLabel:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},isSegmentsView:{type:Boolean,default:!1},hasActiveFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["search","filter","update:sort","add","import","export","createSegment","deleteSegment"],setup(e,{emit:t}){const n=t;return(s,a)=>(p(),f("header",vGe,[c("div",bGe,[c("span",EGe,E(e.headerTitle),1),c("div",TGe,[e.showSearch?(p(),f("div",AGe,[v(ln,{"model-value":e.searchValue,type:"search",placeholder:s.$t("CONTACTS_LAYOUT.HEADER.SEARCH_PLACEHOLDER"),"custom-input-class":["h-8 [&:not(.focus)]:!border-transparent bg-n-alpha-2 dark:bg-n-solid-1 ltr:!pl-8 !py-1 rtl:!pr-8"],class:"w-full",onInput:a[0]||(a[0]=o=>n("search",o.target.value))},{prefix:K(()=>[v(Wt,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-2 rtl:right-2"})]),_:1},8,["model-value","placeholder"])])):O("",!0),c("div",yGe,[c("div",SGe,[!e.isLabelView&&!e.isActiveView?(p(),f("div",IGe,[v(ce,{id:"toggleContactsFilterButton",icon:e.isSegmentsView?"i-lucide-pen-line":"i-lucide-list-filter",color:"slate",size:"sm",class:"relative w-8",variant:"ghost",onClick:a[1]||(a[1]=o=>n("filter"))},{default:K(()=>[e.hasActiveFilters&&!e.isSegmentsView?(p(),f("div",CGe)):O("",!0)]),_:1},8,["icon"]),at(s.$slots,"filter")])):O("",!0),e.hasActiveFilters&&!e.isSegmentsView&&!e.isLabelView&&!e.isActiveView?(p(),V(ce,{key:1,icon:"i-lucide-save",color:"slate",size:"sm",variant:"ghost",onClick:a[2]||(a[2]=o=>n("createSegment"))})):O("",!0),e.isSegmentsView&&!e.isLabelView&&!e.isActiveView?(p(),V(ce,{key:2,icon:"i-lucide-trash",color:"slate",size:"sm",variant:"ghost",onClick:a[3]||(a[3]=o=>n("deleteSegment"))})):O("",!0),v(fGe,{"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"onUpdate:sort":a[4]||(a[4]=o=>n("update:sort",o))},null,8,["active-sort","active-ordering"]),v(_Ge,{onAdd:a[5]||(a[5]=o=>n("add")),onImport:a[6]||(a[6]=o=>n("import")),onExport:a[7]||(a[7]=o=>n("export"))})]),a[8]||(a[8]=c("div",{class:"w-px h-4 bg-n-strong"},null,-1)),v(Kp,null,{trigger:K(({toggle:o})=>[v(ce,{label:e.buttonLabel,size:"sm",onClick:o},null,8,["label","onClick"])]),_:1})])])])]))}},NGe={class:"absolute z-[9999] w-full mt-1 transition-opacity duration-200 border rounded-md shadow-lg bg-n-solid-1 border-n-strong"},OGe={class:"relative border-b border-n-strong"},wGe=["value","placeholder"],RGe=["aria-multiselectable"],$Ge=["aria-selected","onClick"],MGe={key:0,class:"flex-shrink-0 i-lucide-check size-4 text-n-slate-11"},kGe={key:0,class:"px-3 py-2 text-sm text-n-slate-11"},t2={__name:"ComboBoxDropdown",props:yn({open:{type:Boolean,required:!0},options:{type:Array,required:!0},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},multiple:{type:Boolean,default:!1},selectedValues:{type:[String,Number,Array],default:()=>[]}},{searchValue:{type:String,default:""},searchValueModifiers:{}}),emits:yn(["select","search"],["update:searchValue"]),setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=jn(e,"searchValue"),i=F(null),r=u=>Array.isArray(s.selectedValues)?s.selectedValues.includes(u.value):u.value===s.selectedValues,d=u=>{l.value=u.target.value,a("search",u.target.value)};return t({focus:()=>{var u;return(u=i.value)==null?void 0:u.focus()}}),(u,m)=>pe((p(),f("div",NGe,[c("div",OGe,[m[0]||(m[0]=c("span",{class:"absolute i-lucide-search top-2.5 size-4 left-3"},null,-1)),c("input",{ref_key:"searchInput",ref:i,value:l.value,type:"search",placeholder:e.searchPlaceholder||I(o)("COMBOBOX.SEARCH_PLACEHOLDER"),class:"reset-base w-full py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-t-md bg-n-solid-1 text-n-slate-12",onInput:d},null,40,wGe)]),c("ul",{class:"py-1 mb-0 overflow-auto max-h-60",role:"listbox","aria-multiselectable":e.multiple},[(p(!0),f(fe,null,Ae(e.options,h=>(p(),f("li",{key:h.value,class:re(["flex items-center justify-between w-full gap-2 px-3 py-2 text-sm transition-colors duration-150 cursor-pointer hover:bg-n-alpha-2",{"bg-n-alpha-2":r(h)}]),role:"option","aria-selected":r(h),onClick:_=>a("select",h)},[c("span",{class:re([{"font-medium":r(h)},"text-n-slate-12"])},E(h.label),3),r(h)?(p(),f("span",MGe)):O("",!0)],10,$Ge))),128)),e.options.length===0?(p(),f("li",kGe,E(e.emptyState||I(o)("COMBOBOX.EMPTY_STATE")),1)):O("",!0)],8,RGe)],512)),[[pn,e.open]])}},Jo={__name:"ComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1},useApiResults:{type:Boolean,default:!1}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(n.modelValue),l=F(!1),i=F(""),r=F(null),d=F(null),u=C(()=>{if(n.useApiResults&&i.value)return n.options;const T=i.value.toLowerCase();return n.options.filter(S=>S.label.toLowerCase().includes(T))}),m=C(()=>n.placeholder||a("COMBOBOX.PLACEHOLDER")),h=C(()=>{const T=n.options.find(S=>S.value===o.value);return(T==null?void 0:T.label)??m.value}),_=T=>{o.value=T.value,s("update:modelValue",T.value),l.value=!1,i.value=""},g=()=>{n.disabled||(l.value=!l.value,l.value&&(i.value="",jt(()=>{var T;return(T=r.value)==null?void 0:T.focus()})))};return ot(()=>n.modelValue,T=>{o.value=T}),(T,S)=>(p(),f("div",{ref_key:"comboboxRef",ref:d,class:re(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:S[3]||(S[3]=ze(()=>{},["prevent"]))},[v(I(Li),{onTrigger:S[2]||(S[2]=b=>l.value=!1)},{default:K(()=>[v(ce,{variant:"outline",color:e.hasError&&!l.value?"ruby":l.value?"blue":"slate",label:h.value,"trailing-icon":"",disabled:e.disabled,class:re(["justify-between w-full !px-3 !py-2.5 text-n-slate-12 font-normal group-hover/combobox:border-n-slate-6 [&:not(.focused)]:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:outline-n-weak focus:outline-n-brand",{focused:l.value}]),icon:l.value?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:g},null,8,["color","label","disabled","class","icon"]),v(t2,{ref_key:"dropdownRef",ref:r,"search-value":i.value,"onUpdate:searchValue":S[0]||(S[0]=b=>i.value=b),open:l.value,options:u.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,"selected-values":o.value,onSearch:S[1]||(S[1]=b=>s("search",b)),onSelect:_},null,8,["search-value","open","options","search-placeholder","empty-state","selected-values"]),e.message?(p(),f("p",{key:0,class:re(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},E(e.message),3)):O("",!0)]),_:1})],2))}},LGe={class:"flex items-center flex-shrink-0"},DGe={key:0,class:"inline-flex justify-center text-sm whitespace-nowrap"},PGe={key:0,class:"text-sm left-[38px] top-2.5 text-n-slate-11 ltr:!pl-1 rtl:!pr-1"},BGe={key:0,class:"min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out text-n-ruby-9 dark:text-n-ruby-9"},FGe={__name:"PhoneNumberInput",props:yn({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=jn(e,"modelValue"),{t:s}=Pe(),a=F(!1),o=F(""),l=F(sT()),i=F(nT()),r=F(""),d={phoneNumber:{minLength:on(2),numeric:ux},activeDialCode:{required:lt,validDialCode:$=>to.some(N=>N.dial_code===$)}},u=Lt(d,{phoneNumber:r,activeDialCode:i}),m=C(()=>u.value.$invalid),h=C(()=>to.map($=>({value:$.id,label:$.name,dialCode:$.dial_code,emoji:$.emoji,isSelected:String(l.value)===String($.id),action:"phoneNumberInput"}))),_=C(()=>{const $=o.value.toLowerCase();return h.value.filter(({label:N,dialCode:w,value:D})=>[N,w,D].some(H=>H.toLowerCase().includes($)))}),g=C(()=>l.value?h.value.find($=>$.value===l.value):""),T=C(()=>{const $="outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8",N="has-[:focus]:outline-n-brand dark:has-[:focus]:outline-n-brand";return t.showBorder?m.value?$:`${N} outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak`:m.value?$:`outline-transparent ${N}`}),S=C(()=>u.value.$dirty?u.value.activeDialCode.$invalid?s("PHONE_INPUT.DIAL_CODE_ERROR"):u.value.phoneNumber.$invalid&&s("PHONE_INPUT.ERROR"):""),b=$=>{const N=$?`${i.value}${$}`:"";n.value=N},A=async({value:$,dialCode:N})=>{!$||!a.value||(l.value=$,i.value=N,o.value="",a.value=!1,!u.value.$invalid&&r.value&&b(r.value))},y=()=>{a.value=!a.value},x=()=>{a.value=!1};return ot(r,async $=>{await u.value.$touch(),u.value.$invalid||b($)}),ot(n,$=>{const N=$u($);N&&(N!=null&&N.country&&(l.value=N.country),N!=null&&N.countryCallingCode&&(i.value=`+${N.countryCallingCode}`),r.value=$.replace(`+${N.countryCallingCode}`,""))},{immediate:!0}),($,N)=>{const w=_t("on-clickaway");return p(),f("div",null,[pe((p(),f("div",{class:re(["relative flex items-center h-8 transition-all duration-500 ease-in-out outline outline-1 outline-offset-[-1px] rounded-lg bg-n-alpha-black2",[T.value,{"cursor-not-allowed opacity-50":e.disabled}]])},[v(ln,{modelValue:r.value,"onUpdate:modelValue":N[0]||(N[0]=D=>r.value=D),type:"tel",placeholder:e.placeholder,disabled:e.disabled,"custom-input-class":"!border-0 !outline-none h-8 !py-0.5 !bg-transparent ltr:!pl-1 rtl:!pr-1",class:"w-full !flex-row"},{prefix:K(()=>{var D;return[c("div",LGe,[v(ce,{label:((D=g.value)==null?void 0:D.emoji)||"",color:"slate",size:"sm",icon:g.value?"i-lucide-chevron-down":"i-lucide-globe","trailing-icon":"",disabled:e.disabled,type:"button",class:"!h-[1.875rem] top-1 ltr:ml-px rtl:mr-px !px-2 outline-0 !outline-none !rounded-lg border-0 ltr:!rounded-r-none rtl:!rounded-l-none",onClick:y},{default:K(()=>{var H;return[g.value?(p(),f("span",DGe,E((H=g.value)==null?void 0:H.emoji),1)):O("",!0)]}),_:1},8,["label","icon","disabled"]),g.value?(p(),f("span",PGe,E(i.value),1)):O("",!0)])]}),_:1},8,["modelValue","placeholder","disabled"]),a.value?(p(),V(ua,{key:0,"menu-items":_.value,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:A},null,8,["menu-items"])):O("",!0)],2)),[[w,()=>x()]]),S.value?(p(),f(fe,{key:0},[S.value?(p(),f("p",BGe,E(S.value),1)):O("",!0)],64)):O("",!0)])}}},UGe={class:"flex flex-col gap-6"},GGe={class:"flex flex-col items-start gap-2"},VGe={class:"py-1 text-sm font-medium text-n-slate-12"},HGe={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},WGe={class:"flex flex-col items-start gap-2"},KGe={class:"py-1 text-sm font-medium text-n-slate-12"},zGe={class:"flex flex-wrap gap-2"},jGe=["onUpdate:modelValue","placeholder","size"],Y_={__name:"ContactsForm",props:{contactData:{type:Object,default:null},isDetailsView:{type:Boolean,default:!1},isNewContact:{type:Boolean,default:!1}},emits:["update"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l={FIRST_NAME:{field:"firstName"},LAST_NAME:{field:"lastName"},EMAIL_ADDRESS:{field:"email"},PHONE_NUMBER:{field:"phoneNumber"},CITY:{field:"additionalAttributes.city"},COUNTRY:{field:"additionalAttributes.countryCode"},BIO:{field:"additionalAttributes.description"},COMPANY_NAME:{field:"additionalAttributes.companyName"}},i={LINKEDIN:"i-ri-linkedin-box-fill",FACEBOOK:"i-ri-facebook-circle-fill",INSTAGRAM:"i-ri-instagram-line",TWITTER:"i-ri-twitter-x-fill",GITHUB:"i-ri-github-fill"},r={id:0,name:"",email:"",firstName:"",lastName:"",phoneNumber:"",additionalAttributes:{description:"",companyName:"",countryCode:"",country:"",city:"",socialProfiles:{facebook:"",github:"",instagram:"",linkedin:"",twitter:""}}},d=os({...r}),m=Lt({firstName:{required:lt},email:{email:Zl}},d),h=C(()=>m.value.$invalid),_=()=>{if(s.isNewContact)return;const{id:D,name:H="",email:B,phoneNumber:k,additionalAttributes:U={}}=s.contactData||{},{firstName:G,lastName:L}=nN(H||""),{description:M="",companyName:R="",countryCode:P="",country:W="",city:Q="",socialProfiles:Z={}}=U||{};Object.assign(d,{id:D,name:H,firstName:G,lastName:L,email:B,phoneNumber:k,additionalAttributes:{description:M,companyName:R,countryCode:P,country:W,city:Q,socialProfiles:Z}})},g=C(()=>to.map(({name:D,id:H})=>({label:D,value:H}))),T=C(()=>Object.keys(l).map(D=>({key:D,placeholder:o(`CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM.${D}.PLACEHOLDER`)}))),S=C(()=>Object.entries(i).map(([D,H])=>({key:D,placeholder:o(`CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.FORM.${D}.PLACEHOLDER`),icon:H}))),b=D=>{var B;const H=(B=l[D])==null?void 0:B.field;return["firstName","email"].includes(H)},A=D=>{var H;return(H=l[D])==null?void 0:H.field},y=D=>{var B;const H=(B=l[D])==null?void 0:B.field;return H?C({get:()=>{var G,L;if(H==="firstName"||H==="lastName")return((G=d[H])==null?void 0:G.toString())||"";const[k,U]=H.split(".");return((L=U?d[k][U]:d[k])==null?void 0:L.toString())||""},set:async k=>{if(H==="firstName"||H==="lastName")d[H]=k,d.name=`${d.firstName} ${d.lastName}`.trim();else{const[G,L]=H.split(".");L?d[G][L]=k:d[G]=k}if(await m.value.$validate()){const{firstName:G,lastName:L,...M}=d;a("update",M)}}}):null},x=D=>{var H;return b(D)&&((H=m.value[A(D)])!=null&&H.$error)?"error":"info"},$=D=>{const H=to.find(B=>B.id===D);d.additionalAttributes.country=(H==null?void 0:H.name)||"",a("update",d)},N=()=>{m.value.$reset()},w=()=>{Object.assign(d,r)};return ot(()=>{var D;return(D=s.contactData)==null?void 0:D.id},D=>{D&&_()},{immediate:!0}),t({state:d,resetValidation:N,isFormInvalid:h,resetForm:w}),(D,H)=>(p(),f("div",UGe,[c("div",GGe,[c("span",VGe,E(I(o)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.TITLE")),1),c("div",HGe,[(p(!0),f(fe,null,Ae(T.value,B=>(p(),f(fe,{key:B.key},[B.key==="COUNTRY"?(p(),V(Jo,{key:0,modelValue:d.additionalAttributes.countryCode,"onUpdate:modelValue":[H[0]||(H[0]=k=>d.additionalAttributes.countryCode=k),$],options:g.value,placeholder:B.placeholder,class:re(["[&>div>button]:h-8",{"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:!outline-transparent":!e.isDetailsView,"[&>div>button]:!bg-n-alpha-black2":e.isDetailsView}])},null,8,["modelValue","options","placeholder","class"])):B.key==="PHONE_NUMBER"?(p(),V(FGe,{key:1,modelValue:y(B.key).value,"onUpdate:modelValue":k=>y(B.key).value=k,placeholder:B.placeholder,"show-border":e.isDetailsView},null,8,["modelValue","onUpdate:modelValue","placeholder","show-border"])):(p(),V(ln,{key:2,modelValue:y(B.key).value,"onUpdate:modelValue":k=>y(B.key).value=k,placeholder:B.placeholder,"message-type":x(B.key),"custom-input-class":`h-8 !pt-1 !pb-1 ${e.isDetailsView?"":"[&:not(.error,.focus)]:!outline-transparent"}`,class:"w-full",onInput:k=>b(B.key)&&I(m)[A(B.key)].$touch(),onBlur:k=>b(B.key)&&I(m)[A(B.key)].$touch()},null,8,["modelValue","onUpdate:modelValue","placeholder","message-type","custom-input-class","onInput","onBlur"]))],64))),128))])]),c("div",WGe,[c("span",KGe,E(I(o)("CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.TITLE")),1),c("div",zGe,[(p(!0),f(fe,null,Ae(S.value,B=>(p(),f("div",{key:B.key,class:re(["flex items-center h-8 gap-2 px-2 rounded-lg",{"bg-n-alpha-2 dark:bg-n-solid-2":e.isDetailsView,"bg-n-alpha-2 dark:bg-n-solid-3":!e.isDetailsView}])},[v(Wt,{icon:B.icon,class:"flex-shrink-0 text-n-slate-11 size-4"},null,8,["icon"]),pe(c("input",{"onUpdate:modelValue":k=>d.additionalAttributes.socialProfiles[B.key.toLowerCase()]=k,class:"w-auto min-w-[100px] text-sm bg-transparent outline-none reset-base text-n-slate-12 dark:text-n-slate-12 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10",placeholder:B.placeholder,size:B.placeholder.length,onInput:H[1]||(H[1]=k=>a("update",d))},null,40,jGe),[[mt,d.additionalAttributes.socialProfiles[B.key.toLowerCase()]]])],2))),128))])])]))}},YGe={class:"flex items-center justify-between w-full gap-3"},n2={__name:"CreateNewContactDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=F(null),l=F(null),i=F(null),r=ke("contacts/getUIFlags"),d=C(()=>r.value.isCreating),u=g=>{i.value=g},m=async()=>{i.value&&s("create",i.value)},h=()=>{var g;(g=l.value)==null||g.resetForm(),o.value.close()},_=()=>{o.value.close()};return t({dialogRef:o,contactsFormRef:l,onSuccess:h}),(g,T)=>(p(),V(Ms,{ref_key:"dialogRef",ref:o,width:"3xl",onConfirm:m},{footer:K(()=>{var S;return[c("div",YGe,[v(ce,{label:I(a)("DIALOG.BUTTONS.CANCEL"),variant:"link",type:"reset",class:"h-10 hover:!no-underline hover:text-n-brand",onClick:_},null,8,["label"]),v(ce,{type:"submit",label:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SAVE_CONTACT"),color:"blue",disabled:(S=l.value)==null?void 0:S.isFormInvalid,"is-loading":d.value},null,8,["label","disabled","is-loading"])])]}),default:K(()=>[v(Y_,{ref_key:"contactsFormRef",ref:l,"is-new-contact":"",onUpdate:u},null,512)]),_:1},512))}},XGe={__name:"ContactExportDialog",emits:["export"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=cn(),l=F(null),i=ke("customViews/getContactCustomViews"),r=ke("contacts/getAppliedContactFilters"),d=ke("contacts/getUIFlags"),u=C(()=>d.value.isExporting),m=C(()=>o.params.segmentId),h=C(()=>m.value?i.value.find(T=>T.id===Number(m.value)):void 0),_=async()=>{let T={payload:[]};m.value&&h.value?T=h.value.query:Object.keys(r.value).length>0&&(T=Ho(r.value)),s("export",{...T,label:o.params.label||""})},g=async()=>{var T;await _(),(T=l.value)==null||T.close()};return t({dialogRef:l}),(T,S)=>(p(),V(Ms,{ref_key:"dialogRef",ref:l,title:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.TITLE"),description:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.DESCRIPTION"),"confirm-button-label":I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.CONFIRM"),"is-loading":u.value,"disable-confirm-button":u.value,onConfirm:g},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}},qGe={class:"mb-0 text-sm text-n-slate-11"},ZGe={class:"flex flex-col gap-2"},QGe={class:"flex items-center gap-2"},JGe={class:"text-sm text-n-slate-12 whitespace-nowrap"},eVe={class:"flex items-center justify-between w-full gap-2"},tVe={key:0,class:"text-sm text-n-slate-12"},nVe={key:2,class:"flex items-center gap-1"},sVe="/downloads/import-contacts-sample.csv",aVe={__name:"ContactImportDialog",emits:["import"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=ke("contacts/getUIFlags"),l=C(()=>o.value.isImporting),i=F(null),r=F(null),d=F(null),u=F(""),m=()=>{var S;return(S=r.value)==null?void 0:S.click()},h=S=>{const b=S.lastIndexOf("."),A=S.slice(b),y=S.slice(0,b);return y.length>20?`${y.slice(0,20)}...${A}`:S},_=()=>{var b;const S=(b=r.value)==null?void 0:b.files[0];d.value=S,u.value=S?h(S.name):""},g=()=>{d.value=null,r.value&&(r.value.value=null),u.value=""},T=async()=>{d.value&&s("import",d.value)};return t({dialogRef:i}),(S,b)=>(p(),V(Ms,{ref_key:"dialogRef",ref:i,title:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.TITLE"),"confirm-button-label":I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.IMPORT"),"is-loading":l.value,"disable-confirm-button":l.value,onConfirm:T},{description:K(()=>[c("p",qGe,[Ee(E(I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DESCRIPTION"))+" ",1),c("a",{href:sVe,target:"_blank",rel:"noopener noreferrer",download:"import-contacts-sample.csv",class:"text-n-blue-text"},E(I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DOWNLOAD_LABEL")),1)])]),default:K(()=>[c("div",ZGe,[c("div",QGe,[c("label",JGe,E(I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.LABEL")),1),c("div",eVe,[d.value?(p(),f("span",tVe,E(u.value),1)):O("",!0),d.value?(p(),f("div",nVe,[v(ce,{label:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHANGE"),color:"slate",variant:"ghost",size:"sm",onClick:m},null,8,["label"]),b[0]||(b[0]=c("div",{class:"w-px h-3 bg-n-strong"},null,-1)),v(ce,{icon:"i-lucide-trash",color:"slate",variant:"ghost",size:"sm",onClick:g})])):(p(),V(ce,{key:1,label:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHOOSE_FILE"),icon:"i-lucide-upload",color:"slate",variant:"ghost",size:"sm",class:"!w-fit",onClick:m},null,8,["label"]))])])]),c("input",{ref_key:"fileInput",ref:r,type:"file",accept:"text/csv",class:"hidden",onChange:_},null,544)]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},oVe=1,lVe={__name:"CreateSegmentDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=ke("customViews/getUIFlags"),l=C(()=>o.value.isCreating),i=F(null),r=os({name:""}),u=Lt({name:{required:lt}},r),m=async()=>{await u.value.$validate()&&(s("create",{name:r.name,filter_type:oVe}),r.name="",u.value.$reset())};return t({dialogRef:i}),(h,_)=>(p(),V(Ms,{ref_key:"dialogRef",ref:i,title:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.TITLE"),"confirm-button-label":I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.CONFIRM"),"is-loading":l.value,"disable-confirm-button":l.value,onConfirm:m},{default:K(()=>[v(ln,{modelValue:r.name,"onUpdate:modelValue":_[0]||(_[0]=g=>r.name=g),label:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.LABEL"),placeholder:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.PLACEHOLDER"),message:I(u).name.$error?I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR"):"","message-type":I(u).name.$error?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},iVe="contact",rVe={__name:"DeleteSegmentDialog",emits:["delete"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=ke("customViews/getUIFlags"),l=C(()=>o.value.isDeleting),i=F(null),r=async()=>{s("delete",{filterType:iVe})};return t({dialogRef:i}),(d,u)=>(p(),V(Ms,{ref_key:"dialogRef",ref:i,type:"alert",title:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.TITLE"),description:I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.DESCRIPTION"),"confirm-button-label":I(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.CONFIRM"),"is-loading":l.value,"disable-confirm-button":l.value,onConfirm:r},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}};function cVe(){const{t:e}=Pe(),t=ke("attributes/getContactAttributes"),{equalityOperators:n,containmentOperators:s,dateOperators:a,getOperatorTypes:o}=KS(),l=C(()=>zS(t.value,o,"contact"));return{filterTypes:C(()=>[{attributeKey:Rs.NAME,value:Rs.NAME,attributeName:e("CONTACTS_LAYOUT.FILTER.NAME"),label:e("CONTACTS_LAYOUT.FILTER.NAME"),inputType:"plainText",dataType:"text",filterOperators:n.value,attributeModel:"standard"},{attributeKey:Rs.EMAIL,value:Rs.EMAIL,attributeName:e("CONTACTS_LAYOUT.FILTER.EMAIL"),label:e("CONTACTS_LAYOUT.FILTER.EMAIL"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Rs.PHONE_NUMBER,value:Rs.PHONE_NUMBER,attributeName:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),label:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Rs.IDENTIFIER,value:Rs.IDENTIFIER,attributeName:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),label:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),inputType:"plainText",dataType:"number",filterOperators:n.value,attributeModel:"standard"},{attributeKey:Rs.COUNTRY_CODE,value:Rs.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:to,dataType:"number",filterOperators:n.value,attributeModel:"additional"},{attributeKey:Rs.CITY,value:Rs.CITY,attributeName:e("CONTACTS_LAYOUT.FILTER.CITY"),label:e("CONTACTS_LAYOUT.FILTER.CITY"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Rs.CREATED_AT,value:Rs.CREATED_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),label:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:a.value,attributeModel:"standard"},{attributeKey:Rs.LAST_ACTIVITY_AT,value:Rs.LAST_ACTIVITY_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),label:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:a.value,attributeModel:"standard"},{attributeKey:Rs.REFERER,value:Rs.REFERER,attributeName:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),label:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Rs.BLOCKED,value:Rs.BLOCKED,attributeName:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),label:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),inputType:"searchSelect",options:[{id:"true",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_TRUE")},{id:"false",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_FALSE")}],dataType:"text",filterOperators:n.value,attributeModel:"standard"},...l.value])}}const dVe={class:"z-40 max-w-3xl min-w-96 lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},uVe={class:"text-base font-medium leading-6 text-n-slate-12"},pVe={key:0},mVe={class:"pb-6 border-b border-n-weak"},hVe={class:"grid gap-4 list-none"},fVe={class:"flex justify-between gap-2"},gVe={class:"flex gap-2 flex-shrink-0"},_Ve={__name:"ContactsFilter",props:yn({isSegmentView:{type:Boolean,default:!1},segmentName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:yn(["applyFilter","updateSegment","close","clearFilters"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:a}=cVe(),o=jn(e,"modelValue"),l=F(n.segmentName),i={attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"},{t:r}=Pe(),d=yt(),u=()=>{s("clearFilters"),o.value=[{...i}]},m=y=>{o.value.length===1?u():o.value.splice(y,1)},h=()=>{o.value.push({...i})},_=Ks("conditionsRef"),g=()=>_.value.every(y=>y.validate()),T=()=>{g()&&s("updateSegment",o.value,l.value)};function S(){g()&&(d.dispatch("contacts/setContactFilters",Hs(JSON.parse(JSON.stringify(o.value)))),s("applyFilter",o.value),nn(xi.APPLY_FILTER,{appliedFilters:o.value.map(y=>({key:y.attributeKey,operator:y.filterOperator,queryOperator:y.queryOperator}))}))}const b=C(()=>n.isSegmentView?r("CONTACTS_LAYOUT.FILTER.EDIT_SEGMENT"):r("CONTACTS_LAYOUT.FILTER.TITLE"));lo(()=>s("close"));const A=[()=>s("close"),{ignore:["#toggleContactsFilterButton"]}];return(y,x)=>pe((p(),f("div",dVe,[c("h3",uVe,E(b.value),1),n.isSegmentView?(p(),f("div",pVe,[c("div",mVe,[v(ln,{modelValue:l.value,"onUpdate:modelValue":x[0]||(x[0]=$=>l.value=$),label:y.$t("CONTACTS_LAYOUT.FILTER.SEGMENT.LABEL"),placeholder:I(r)("CONTACTS_LAYOUT.FILTER.SEGMENT.INPUT_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])])):O("",!0),c("ul",hVe,[(p(!0),f(fe,null,Ae(o.value,($,N)=>(p(),f(fe,{key:$.id},[N===0?(p(),V(Yu,{ref_for:!0,ref_key:"conditionsRef",ref:_,key:`filter-${$.attributeKey}-0`,"attribute-key":$.attributeKey,"onUpdate:attributeKey":w=>$.attributeKey=w,"filter-operator":$.filterOperator,"onUpdate:filterOperator":w=>$.filterOperator=w,values:$.values,"onUpdate:values":w=>$.values=w,"filter-types":I(a),"show-query-operator":!1,onRemove:w=>m(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),V(Yu,{key:`filter-${$.attributeKey}-${N}`,ref_for:!0,ref_key:"conditionsRef",ref:_,"attribute-key":$.attributeKey,"onUpdate:attributeKey":w=>$.attributeKey=w,"filter-operator":$.filterOperator,"onUpdate:filterOperator":w=>$.filterOperator=w,"query-operator":o.value[N-1].queryOperator,"onUpdate:queryOperator":w=>o.value[N-1].queryOperator=w,values:$.values,"onUpdate:values":w=>$.values=w,"show-query-operator":"","filter-types":I(a),onRemove:w=>m(N)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),c("div",fVe,[v(ce,{sm:"",ghost:"",blue:"",class:"flex-shrink-0",onClick:h},{default:K(()=>[Ee(E(y.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.ADD_FILTER")),1)]),_:1}),c("div",gVe,[v(ce,{sm:"",faded:"",slate:"",onClick:u},{default:K(()=>[Ee(E(y.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.CLEAR_FILTERS")),1)]),_:1}),e.isSegmentView?(p(),V(ce,{key:0,sm:"",solid:"",blue:"",disabled:!l.value,onClick:T},{default:K(()=>[Ee(E(y.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.UPDATE_SEGMENT")),1)]),_:1},8,["disabled"])):(p(),V(ce,{key:1,sm:"",solid:"",blue:"",onClick:S},{default:K(()=>[Ee(E(y.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.APPLY_FILTERS")),1)]),_:1}))])])])),[[I(ca),A]])}},vVe={class:"absolute mt-1 ltr:-right-52 rtl:-left-52 sm:ltr:right-0 sm:rtl:left-0 top-full"},bVe={__name:"ContactListHeaderWrapper",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},headerTitle:{type:String,default:""},segmentsId:{type:[String,Number],default:0},activeSegment:{type:Object,default:null},hasAppliedFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["update:sort","search","applyFilter","clearFilters"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=En(),r=F(null),d=F(null),u=F(null),m=F(null),h=F(null),_=F(!1),g=F([]),T=F({}),S=ke("contacts/getAppliedContactFiltersV4"),b=ke("attributes/getContactAttributes"),A=C(()=>s.activeSegment&&s.segmentsId!==0),y=C(()=>{var j;return(j=s.activeSegment)==null?void 0:j.name}),x=async()=>{var j,X;await((j=r.value)==null?void 0:j.contactsFormRef.resetValidation()),(X=r.value)==null||X.dialogRef.open()},$=()=>{var j;return(j=u.value)==null?void 0:j.dialogRef.open()},N=()=>{var j;return(j=d.value)==null?void 0:j.dialogRef.open()},w=()=>{var j;return(j=m.value)==null?void 0:j.dialogRef.open()},D=()=>{var j;return(j=h.value)==null?void 0:j.dialogRef.open()},H=async j=>{var X;try{await l.dispatch("contacts/create",j),(X=r.value)==null||X.onSuccess(),_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SUCCESS_MESSAGE"))}catch(q){const se="CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION";q instanceof ep?q.data.includes("email")?_e(o(`${se}.EMAIL_ADDRESS_DUPLICATE`)):q.data.includes("phone_number")&&_e(o(`${se}.PHONE_NUMBER_DUPLICATE`)):q instanceof Zc?_e(q.data):_e(o(`${se}.ERROR_MESSAGE`))}},B=async j=>{var X;try{await l.dispatch("contacts/import",j),(X=u.value)==null||X.dialogRef.close(),_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.SUCCESS_MESSAGE")),nn(xi.IMPORT_SUCCESS)}catch(q){_e(q.message??o("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.ERROR_MESSAGE")),nn(xi.IMPORT_FAILURE)}},k=async j=>{try{await l.dispatch("contacts/export",j),_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.SUCCESS_MESSAGE"))}catch(X){_e(X.message||o("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.ERROR_MESSAGE"))}},U=async j=>{var X,q;try{const se={...j,query:T.value},he=await l.dispatch("customViews/create",se);(X=m.value)==null||X.dialogRef.close(),_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.SUCCESS_MESSAGE"));const be=(q=he==null?void 0:he.data)==null?void 0:q.id;if(!be)return;i.push({name:"contacts_dashboard_segments_index",params:{segmentId:be},query:{page:1}})}catch{_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR_MESSAGE"))}},G=async j=>{var X;try{await l.dispatch("customViews/delete",{id:Number(s.segmentsId),...j}),i.push({name:"contacts_dashboard_index",query:{page:1}}),(X=h.value)==null||X.dialogRef.close(),_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.SUCCESS_MESSAGE"))}catch{_e(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.ERROR_MESSAGE"))}},L=()=>{_.value=!1,g.value=[]},M=async()=>{a("clearFilters")},R=async j=>{j=Hs(j),T.value=Ho(j),a("applyFilter",Ho(j)),_.value=!1},P=async(j,X)=>{j=Hs(j);const q={...s.activeSegment,name:X,query:Ho(j)};await l.dispatch("customViews/update",q),L()},W=()=>({countries:to,filterTypes:oTe,allCustomAttributes:Hs(b.value)}),Q=j=>{var se,he;const X=(he=(se=I(j))==null?void 0:se.query)==null?void 0:he.payload;if(!Array.isArray(X))return;const q=X.map(be=>{const ne=zo(be),J=Array.isArray(ne.values)?eI(Hs(be),W()):[];return{attributeKey:ne.attributeKey,attributeModel:ne.attributeModel,customAttributeType:ne.customAttributeType,filterOperator:ne.filterOperator,queryOperator:ne.queryOperator??"and",values:J}});g.value=[...g.value,...q]},Z=()=>{g.value=[],A.value?Q(s.activeSegment):g.value=s.hasAppliedFilters?[...S.value]:[{attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"}],_.value=!0};return t({onToggleFilters:Z}),(j,X)=>(p(),f(fe,null,[v(xGe,{"show-search":e.showSearch,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"is-segments-view":A.value,"is-label-view":e.isLabelView,"is-active-view":e.isActiveView,"has-active-filters":e.hasAppliedFilters,"button-label":I(o)("CONTACTS_LAYOUT.HEADER.MESSAGE_BUTTON"),onSearch:X[1]||(X[1]=q=>a("search",q)),"onUpdate:sort":X[2]||(X[2]=q=>a("update:sort",q)),onAdd:x,onImport:$,onExport:N,onFilter:Z,onCreateSegment:w,onDeleteSegment:D},{filter:K(()=>[c("div",vVe,[_.value?(p(),V(_Ve,{key:0,modelValue:g.value,"onUpdate:modelValue":X[0]||(X[0]=q=>g.value=q),"segment-name":y.value,"is-segment-view":A.value,onApplyFilter:R,onUpdateSegment:P,onClose:L,onClearFilters:M},null,8,["modelValue","segment-name","is-segment-view"])):O("",!0)])]),_:1},8,["show-search","search-value","active-sort","active-ordering","header-title","is-segments-view","is-label-view","is-active-view","has-active-filters","button-label"]),v(n2,{ref_key:"createNewContactDialogRef",ref:r,onCreate:H},null,512),v(XGe,{ref_key:"contactExportDialogRef",ref:d,onExport:k},null,512),v(aVe,{ref_key:"contactImportDialogRef",ref:u,onImport:B},null,512),v(lVe,{ref_key:"createSegmentDialogRef",ref:m,onCreate:U},null,512),v(rVe,{ref_key:"deleteSegmentDialogRef",ref:h,onDelete:G},null,512)],64))}},EVe={class:"flex flex-wrap items-center w-full gap-2 mx-auto"},TVe={key:0,class:"inline-flex items-center gap-2 h-7"},AVe={class:"lowercase whitespace-nowrap first-letter:capitalize text-n-slate-12"},yVe={class:"px-1 text-xs text-n-slate-10 whitespace-nowrap"},SVe={key:0,class:"content-center h-full px-1 text-xs font-medium uppercase rounded-lg text-n-slate-10"},IVe={key:1,class:"w-px h-3 rounded-lg bg-n-strong"},CVe={__name:"ActiveFilterPreview",props:{appliedFilters:{type:Array,default:()=>[]},maxVisibleFilters:{type:Number,default:2},clearButtonLabel:{type:String,default:""},moreFiltersLabel:{type:String,default:""},showClearButton:{type:Boolean,default:!0}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=t,s=l=>!["email"].includes(l),a=l=>({equal_to:"is",not_equal_to:"is not",contains:"contains",does_not_contain:"does not contain",is_present:"is present",is_not_present:"is not present",is_greater_than:"is greater than",is_less_than:"is less than",days_before:"days before"})[l]||M0(l),o=l=>l?Array.isArray(l)?l.join(", "):typeof l=="object"&&l.name?l.name:l:"";return(l,i)=>(p(),f("div",EVe,[(p(!0),f(fe,null,Ae(e.appliedFilters,(r,d)=>(p(),f(fe,{key:d},[d<e.maxVisibleFilters?(p(),f("div",TVe,[c("div",{class:"flex items-center h-full min-w-0 gap-1 px-2 py-1 text-xs border rounded-lg hover:bg-n-solid-2 max-w-72 border-n-weak hover:cursor-pointer",onClick:i[0]||(i[0]=u=>n("openFilter"))},[c("span",AVe,E(I(M0)(r.attributeKey)),1),c("span",yVe,E(a(r.filterOperator)),1),r.values?(p(),f("span",{key:0,class:re(["lowercase truncate text-n-slate-12",{"first-letter:capitalize":s(r.attributeKey)}])},E(o(r.values)),3)):O("",!0)]),d<e.maxVisibleFilters-1&&d<e.appliedFilters.length-1?(p(),f("span",SVe,E(r.queryOperator),1)):O("",!0)])):O("",!0)],64))),128)),e.appliedFilters.length>e.maxVisibleFilters?(p(),f("div",{key:0,class:"inline-flex items-center content-center px-1 text-xs rounded-lg text-n-slate-10 hover:text-n-slate-11 h-7 hover:cursor-pointer",onClick:i[1]||(i[1]=r=>n("openFilter"))},E(e.moreFiltersLabel),1)):O("",!0),e.showClearButton?(p(),f("div",IVe)):O("",!0),e.showClearButton?(p(),V(ce,{key:2,label:e.clearButtonLabel,size:"xs",class:"!px-1",variant:"ghost",onClick:i[2]||(i[2]=r=>n("clearFilters"))},null,8,["label"])):O("",!0)]))}},xVe={__name:"ContactsActiveFiltersPreview",props:{activeSegment:{type:Object,default:null}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=cn(),l=ke("contacts/getAppliedContactFiltersV4"),i=C(()=>o.params.segmentId),r=C(()=>{var _,g;const m=(g=(_=n.activeSegment)==null?void 0:_.query)==null?void 0:g.payload;return Array.isArray(m)?m.map(T=>{const S=zo(T);return{attributeKey:S.attributeKey,attributeModel:S.attributeModel,customAttributeType:S.customAttributeType,filterOperator:S.filterOperator,queryOperator:S.queryOperator??"and",values:S.values}}):[]}),d=C(()=>n.activeSegment&&i.value!==0),u=C(()=>d.value?r.value:l.value);return(m,h)=>(p(),V(CVe,{"applied-filters":u.value,"max-visible-filters":2,"more-filters-label":I(a)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.MORE_FILTERS",{count:u.value.length-2}),"clear-button-label":I(a)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.CLEAR_FILTERS"),"show-clear-button":!d.value,class:"max-w-[60rem] px-6",onOpenFilter:h[0]||(h[0]=_=>s("openFilter")),onClearFilters:h[1]||(h[1]=_=>s("clearFilters"))},null,8,["applied-filters","more-filters-label","clear-button-label","show-clear-button"]))}},NVe={class:"flex justify-between h-12 w-full max-w-[calc(60rem-3px)] outline outline-n-container outline-1 -outline-offset-1 mx-auto bg-n-solid-2 rounded-xl py-2 ltr:pl-4 rtl:pr-4 ltr:pr-3 rtl:pl-3 items-center before:absolute before:inset-x-0 before:-top-4 before:bg-gradient-to-t before:from-n-background before:from-10% before:dark:from-0% before:to-transparent before:h-4 before:pointer-events-none"},OVe={class:"flex items-center gap-3"},wVe={class:"min-w-0 text-sm font-normal line-clamp-1 text-n-slate-11"},RVe={class:"flex items-center gap-2"},$Ve={class:"inline-flex items-center gap-2 text-sm text-n-slate-11"},MVe={class:"px-3 tabular-nums py-0.5 bg-n-alpha-black2 rounded-md"},kVe={class:"truncate"},X_={__name:"PaginationFooter",props:{currentPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:16},currentPageInfo:{type:String,default:""}},emits:["update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=C(()=>Math.ceil(n.totalItems/n.itemsPerPage)),l=C(()=>(n.currentPage-1)*n.itemsPerPage+1),i=C(()=>Math.min(l.value+n.itemsPerPage-1,n.totalItems)),r=C(()=>n.currentPage===1),d=C(()=>n.currentPage===o.value),u=_=>{_>=1&&_<=o.value&&s("update:currentPage",_)},m=C(()=>a(n.currentPageInfo?n.currentPageInfo:"PAGINATION_FOOTER.SHOWING",{startItem:l.value,endItem:i.value,totalItems:n.totalItems})),h=C(()=>a("PAGINATION_FOOTER.CURRENT_PAGE_INFO",{currentPage:"",totalPages:o.value}));return(_,g)=>(p(),f("div",NVe,[c("div",OVe,[c("span",wVe,E(m.value),1)]),c("div",RVe,[v(ce,{icon:"i-lucide-chevrons-left",variant:"ghost",size:"sm",color:"slate",class:"!w-8 !h-6",disabled:r.value,onClick:g[0]||(g[0]=T=>u(1))},null,8,["disabled"]),v(ce,{icon:"i-lucide-chevron-left",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:r.value,onClick:g[1]||(g[1]=T=>u(e.currentPage-1))},null,8,["disabled"]),c("div",$Ve,[c("span",MVe,E(e.currentPage),1),c("span",kVe,E(h.value),1)]),v(ce,{icon:"i-lucide-chevron-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:d.value,onClick:g[2]||(g[2]=T=>u(e.currentPage+1))},null,8,["disabled"]),v(ce,{icon:"i-lucide-chevrons-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:d.value,onClick:g[3]||(g[3]=T=>u(o.value))},null,8,["disabled"])])]))}},LVe={class:"flex w-full h-full gap-4 overflow-hidden justify-evenly bg-n-background"},DVe={class:"flex flex-col w-full h-full transition-all duration-300"},PVe={class:"flex-1 overflow-y-auto"},BVe={class:"w-full mx-auto max-w-[60rem]"},FVe={key:0,class:"sticky bottom-0 z-0 px-4 pb-4"},UVe={__name:"ContactsListLayout",props:{searchValue:{type:String,default:""},headerTitle:{type:String,default:""},showPaginationFooter:{type:Boolean,default:!0},currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},itemsPerPage:{type:Number,default:15},activeSort:{type:String,default:""},activeOrdering:{type:String,default:""},activeSegment:{type:Object,default:null},segmentsId:{type:[String,Number],default:0},hasAppliedFilters:{type:Boolean,default:!1},isFetchingList:{type:Boolean,default:!1}},emits:["update:currentPage","update:sort","search","applyFilter","clearFilters"],setup(e,{emit:t}){const n=e,s=t,a=cn(),o=F(null),l=C(()=>a.name!=="contacts_dashboard_segments_index"),i=C(()=>a.name==="contacts_dashboard_active"),r=C(()=>a.name==="contacts_dashboard_labels_index"),d=C(()=>(n.hasAppliedFilters||!l.value)&&!n.isFetchingList&&!r.value&&!i.value),u=h=>{s("update:currentPage",h)},m=()=>{var h;(h=o.value)==null||h.onToggleFilters()};return(h,_)=>(p(),f("section",LVe,[c("div",DVe,[v(bVe,{ref_key:"contactListHeaderWrapper",ref:o,"show-search":l.value&&!i.value,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"active-segment":e.activeSegment,"segments-id":e.segmentsId,"has-applied-filters":e.hasAppliedFilters,"is-label-view":r.value,"is-active-view":i.value,"onUpdate:sort":_[0]||(_[0]=g=>s("update:sort",g)),onSearch:_[1]||(_[1]=g=>s("search",g)),onApplyFilter:_[2]||(_[2]=g=>s("applyFilter",g)),onClearFilters:_[3]||(_[3]=g=>s("clearFilters"))},null,8,["show-search","search-value","active-sort","active-ordering","header-title","active-segment","segments-id","has-applied-filters","is-label-view","is-active-view"]),c("main",PVe,[c("div",BVe,[d.value?(p(),V(xVe,{key:0,"active-segment":e.activeSegment,onClearFilters:_[4]||(_[4]=g=>s("clearFilters")),onOpenFilter:m},null,8,["active-segment"])):O("",!0),at(h.$slots,"default")])]),e.showPaginationFooter?(p(),f("footer",FVe,[v(X_,{"current-page-info":"CONTACTS_LAYOUT.PAGINATION_FOOTER.SHOWING","current-page":e.currentPage,"total-items":e.totalItems,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":u},null,8,["current-page","total-items","items-per-page"])])):O("",!0)])]))}},GVe={class:"flex flex-col w-full shadow outline-1 outline outline-n-container group/cardLayout rounded-2xl bg-n-solid-2"},Tl={__name:"CardLayout",props:{layout:{type:String,default:"col"},selectable:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),f("div",GVe,[c("div",{class:re(["flex w-full gap-3 py-5",[e.layout==="col"?"flex-col":"flex-row justify-between items-center",e.selectable?"px-10 py-6":"px-6"]]),onClick:s},[at(a.$slots,"default")],2),at(a.$slots,"after")]))}},VVe={__name:"Flag",props:{country:{type:String,required:!0},squared:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{const s=["fi",`fi-${t.country.toLowerCase()}`,"flex-shrink-0"];return t.squared&&s.push("fis"),Wn("span",{class:s})};return(s,a)=>(p(),V(xs(n)))}},s2={__name:"ConfirmContactDeleteDialog",props:{selectedContact:{type:Object,default:null}},emits:["goToContactsList"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=cn(),r=F(null),d=async m=>{if(m)try{await l.dispatch("contacts/delete",m),_e(o("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.SUCCESS_MESSAGE"))}catch{_e(o("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.ERROR_MESSAGE"))}},u=async()=>{var m;a("goToContactsList"),await d(i.params.contactId||s.selectedContact.id),(m=r.value)==null||m.close()};return t({dialogRef:r}),(m,h)=>(p(),V(Ms,{ref_key:"dialogRef",ref:r,type:"alert",title:I(o)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.TITLE"),description:I(o)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.DESCRIPTION"),"confirm-button-label":I(o)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.CONFIRM"),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},HVe={class:"flex flex-col items-start border-t border-n-strong px-6 py-5"},WVe={class:"overflow-hidden min-h-0"},KVe={class:"inline-flex text-n-slate-11 text-sm items-center gap-1"},zVe={__name:"ContactDeleteSection",props:{selectedContact:{type:Object,required:!0}},setup(e){const{t}=Pe(),[n,s]=Xn(),a=F(null),o=()=>{var l;(l=a.value)==null||l.dialogRef.open()};return(l,i)=>(p(),f(fe,null,[c("div",HVe,[v(ce,{label:I(t)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),sm:"",link:"",slate:"",class:"hover:!no-underline text-n-slate-12",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:i[0]||(i[0]=r=>I(s)())},null,8,["label"]),c("div",{class:re(["transition-all duration-300 ease-in-out grid w-full overflow-hidden",I(n)?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"])},[c("div",WVe,[c("span",KVe,[Ee(E(I(t)("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.MESSAGE"))+" ",1),v(ce,{label:I(t)("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.BUTTON"),sm:"",ruby:"",link:"",onClick:i[1]||(i[1]=r=>o())},null,8,["label"])])])],2)]),v(s2,{ref_key:"confirmDeleteContactDialogRef",ref:a,"selected-contact":e.selectedContact},null,8,["selected-contact"])],64))}},jVe={class:"flex items-center justify-start flex-1 gap-4"},YVe={class:"flex flex-col gap-0.5 flex-1"},XVe={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},qVe={class:"text-base font-medium truncate text-n-slate-12"},ZVe={class:"inline-flex items-center gap-1"},QVe={key:0,class:"i-ph-building-light size-4 text-n-slate-10 mb-0.5"},JVe={key:1,class:"text-sm truncate text-n-slate-11"},eHe={class:"flex flex-wrap items-center justify-start gap-x-3 gap-y-1"},tHe=["title"],nHe={class:"text-sm text-n-slate-11"},sHe={key:1,class:"w-px h-3 truncate bg-n-slate-6"},aHe={key:2,class:"text-sm truncate text-n-slate-11"},oHe={key:3,class:"w-px h-3 truncate bg-n-slate-6"},lHe={key:4,class:"inline-flex items-center gap-2 text-sm truncate text-n-slate-11"},iHe={key:5,class:"w-px h-3 truncate bg-n-slate-6"},rHe={class:"overflow-hidden"},cHe={class:"flex flex-col gap-6 p-6 border-t border-n-strong"},a2={__name:"ContactsCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},email:{type:String,default:""},additionalAttributes:{type:Object,default:()=>({})},phoneNumber:{type:String,default:""},thumbnail:{type:String,default:""},availabilityStatus:{type:String,default:null},isExpanded:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1}},emits:["toggle","updateContact","showContact"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(null),l=()=>({id:n.id,name:n.name,email:n.email,phoneNumber:n.phoneNumber,additionalAttributes:n.additionalAttributes}),i=F(l()),r=C(()=>{var S;return(S=o.value)==null?void 0:S.isFormInvalid}),d=C(()=>to.reduce((S,b)=>(S[b.code]=b,S[b.id]=b,S),{})),u=C(()=>{const S=n.additionalAttributes||{},{country:b,countryCode:A,city:y}=S;if(!b&&!A)return null;const x=d.value[b]||d.value[A];return x?{countryCode:x.id,city:y?`${y},`:null,name:x.name}:null}),m=C(()=>u.value?[u.value.city,u.value.name].filter(Boolean).join(" "):""),h=S=>{Object.assign(i.value,S)},_=()=>{s("updateContact",i.value)},g=()=>{s("toggle"),i.value=l()},T=()=>s("showContact",n.id);return(S,b)=>(p(),V(Tl,{key:e.id,layout:"row"},{after:K(()=>[c("div",{class:re(["transition-all duration-500 ease-in-out grid overflow-hidden",e.isExpanded?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"])},[c("div",rHe,[c("div",cHe,[v(Y_,{ref_key:"contactsFormRef",ref:o,"contact-data":i.value,onUpdate:h},null,8,["contact-data"]),c("div",null,[v(ce,{label:I(a)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":e.isUpdating,disabled:e.isUpdating||r.value,onClick:_},null,8,["label","is-loading","disabled"])])]),v(zVe,{"selected-contact":{id:n.id,name:n.name}},null,8,["selected-contact"])])],2)]),default:K(()=>{var A,y;return[c("div",jVe,[v(Ft,{name:e.name,src:e.thumbnail,size:48,status:e.availabilityStatus,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),c("div",YVe,[c("div",XVe,[c("span",qVe,E(e.name),1),c("span",ZVe,[(A=e.additionalAttributes)!=null&&A.companyName?(p(),f("span",QVe)):O("",!0),(y=e.additionalAttributes)!=null&&y.companyName?(p(),f("span",JVe,E(e.additionalAttributes.companyName),1)):O("",!0)])]),c("div",eHe,[e.email?(p(),f("div",{key:0,class:"truncate max-w-72",title:e.email},[c("span",nHe,E(e.email),1)],8,tHe)):O("",!0),e.email?(p(),f("div",sHe)):O("",!0),e.phoneNumber?(p(),f("span",aHe,E(e.phoneNumber),1)):O("",!0),e.phoneNumber?(p(),f("div",oHe)):O("",!0),u.value?(p(),f("span",lHe,[v(VVe,{country:u.value.countryCode,class:"size-3.5"},null,8,["country"]),Ee(" "+E(m.value),1)])):O("",!0),u.value?(p(),f("div",iHe)):O("",!0),v(ce,{label:I(a)("CONTACTS_LAYOUT.CARD.VIEW_DETAILS"),variant:"link",size:"xs",onClick:T},null,8,["label"])])])]),v(ce,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",class:re({"rotate-180":e.isExpanded}),onClick:g},null,8,["class"])]}),_:1}))}},dHe={class:"flex flex-col gap-4 px-6 pt-4 pb-6"},uHe={__name:"ContactsList",props:{contacts:{type:Array,required:!0}},setup(e){const{t}=Pe(),n=yt(),s=En(),a=cn(),o=ke("contacts/getUIFlags"),l=C(()=>o.value.isUpdating),i=F(null),r=async m=>{try{await n.dispatch("contacts/update",m),_e(t("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch(h){const _="CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM";h instanceof ep?h.data.includes("email")?_e(t(`${_}.EMAIL_ADDRESS.DUPLICATE`)):h.data.includes("phone_number")&&_e(t(`${_}.PHONE_NUMBER.DUPLICATE`)):h instanceof Zc?_e(h.data):_e(t(`${_}.ERROR_MESSAGE`))}},d=async m=>{const h={contacts_dashboard_segments_index:["contacts_edit_segment","segmentId"],contacts_dashboard_labels_index:["contacts_edit_label","label"]},[_,g]=h[a.name]||["contacts_edit"],T={contactId:m,...g&&{[g]:a.params[g]}};await s.push({name:_,params:T,query:a.query})},u=m=>{i.value=i.value===m?null:m};return(m,h)=>(p(),f("div",dHe,[(p(!0),f(fe,null,Ae(e.contacts,_=>(p(),V(a2,{id:_.id,key:_.id,name:_.name,email:_.email,thumbnail:_.thumbnail,"phone-number":_.phoneNumber,"additional-attributes":_.additionalAttributes,"availability-status":_.availabilityStatus,"is-expanded":i.value===_.id,"is-updating":l.value,onToggle:g=>u(_.id),onUpdateContact:r,onShowContact:d},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","availability-status","is-expanded","is-updating","onToggle"]))),128))]))}},pHe={class:"relative flex flex-col items-center justify-center w-full h-full overflow-hidden"},mHe={class:"relative w-full max-w-[60rem] mx-auto overflow-hidden h-full max-h-[28rem]"},hHe={class:"w-full h-full space-y-4 overflow-y-hidden opacity-50 pointer-events-none"},fHe={class:"absolute inset-x-0 bottom-0 flex flex-col items-center justify-end w-full h-full pb-20 bg-gradient-to-t from-n-background from-25% dark:from-n-background to-transparent"},gHe={class:"flex flex-col items-center justify-center gap-6"},_He={class:"flex flex-col items-center justify-center gap-3"},vHe={class:"text-3xl font-medium text-center text-n-slate-12 font-interDisplay"},bHe={class:"max-w-xl text-base text-center text-n-slate-11 font-interDisplay tracking-[0.3px]"},Al={__name:"EmptyStateLayout",props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},actionPerms:{type:Array,default:()=>[]}},setup(e){return(t,n)=>(p(),f("section",pHe,[c("div",mHe,[c("div",hHe,[at(t.$slots,"empty-state-item")]),c("div",fHe,[c("div",gHe,[c("div",_He,[c("h2",vHe,E(e.title),1),c("p",bHe,E(e.subtitle),1)]),v(_o,{permissions:e.actionPerms},{default:K(()=>[at(t.$slots,"actions")]),_:3},8,["permissions"])])])])]))}},EHe=[{additionalAttributes:{city:"Los Angeles",country:"United States",description:"I'm Candice, a developer focusing on building web solutions. Currently, Im working as a Product Developer at Lumora.",companyName:"Lumora",countryCode:"US",socialProfiles:{github:"candice-dev",twitter:"candice_w_dev",facebook:"candice.dev",linkedin:"candice-matherson",instagram:"candice.codes"}},availabilityStatus:"offline",email:"candice.matherson@lumora.com",id:22,name:"Candice Matherson",phoneNumber:"+14155552671",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-11-11T11:53:09.299Z",linkContact:"https://example.com",listContact:"Follow-Up",textContact:"Hi there!",numberContact:"42",checkboxContact:!1},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"San Francisco",country:"United States",description:"Passionate about design and user experience.",companyName:"Designify",countryCode:"US",socialProfiles:{github:"ophelia-folkard",twitter:"oph_designs",facebook:"ophelia.folkard",linkedin:"ophelia-folkard",instagram:"ophelia.design"}},availabilityStatus:"offline",email:"ophelia.folkard@designify.com",id:21,name:"Ophelia Folkard",phoneNumber:"+14155552672",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-10-05T10:12:34.567Z",linkContact:"https://designify.com",listContact:"Prospects",textContact:"Looking forward to connecting!"},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Austin",country:"United States",description:"Avid coder and tech enthusiast.",companyName:"CodeHub",countryCode:"US",socialProfiles:{github:"willy_castelot",twitter:"willy_code",facebook:"willy.castelot",linkedin:"willy-castelot",instagram:"willy.coder"}},availabilityStatus:"offline",email:"willy.castelot@codehub.io",id:20,name:"Willy Castelot",phoneNumber:"+14155552673",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets collaborate!",checkboxContact:!0},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Seattle",country:"United States",description:"Product manager with a love for innovation.",companyName:"InnovaTech",countryCode:"US",socialProfiles:{github:"elisabeth-d",twitter:"elisabeth_innova",facebook:"elisabeth.derington",linkedin:"elisabeth-derington",instagram:"elisabeth.innovates"}},availabilityStatus:"offline",email:"elisabeth.derington@innova.com",id:19,name:"Elisabeth Derington",phoneNumber:"+14155552674",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets schedule a call."},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Chicago",country:"United States",description:"Marketing specialist and content creator.",companyName:"Contently",countryCode:"US",socialProfiles:{github:"olia-olenchenko",twitter:"olia_content",facebook:"olia.olenchenko",linkedin:"olia-olenchenko",instagram:"olia.creates"}},availabilityStatus:"offline",email:"olia.olenchenko@contently.com",id:18,name:"Olia Olenchenko",phoneNumber:"+14155552675",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Boston",country:"United States",description:"SEO expert and analytics enthusiast.",companyName:"OptiSearch",countryCode:"US",socialProfiles:{github:"nate-vannuchi",twitter:"nate_seo",facebook:"nathaniel.vannuchi",linkedin:"nathaniel-vannuchi",instagram:"nate.optimizes"}},availabilityStatus:"offline",email:"nathaniel.vannuchi@optisearch.com",id:17,name:"Nathaniel Vannuchi",phoneNumber:"+14155552676",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Denver",country:"United States",description:"UI/UX designer with a flair for minimalist designs.",companyName:"Minimal Designs",countryCode:"US",socialProfiles:{github:"merrile-petruk",twitter:"merrile_ux",facebook:"merrile.petruk",linkedin:"merrile-petruk",instagram:"merrile.designs"}},availabilityStatus:"offline",email:"merrile.petruk@minimal.com",id:16,name:"Merrile Petruk",phoneNumber:"+14155552677",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Miami",country:"United States",description:"Entrepreneur with a background in e-commerce.",companyName:"Ecom Solutions",countryCode:"US",socialProfiles:{github:"cordell-d",twitter:"cordell_entrepreneur",facebook:"cordell.dalinder",linkedin:"cordell-dalinder",instagram:"cordell.ecom"}},availabilityStatus:"offline",email:"cordell.dalinder@ecomsolutions.com",id:15,name:"Cordell Dalinder",phoneNumber:"+14155552678",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232}],THe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},AHe={key:0},yHe={__name:"ContactEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""},showButton:{type:Boolean,default:!0},buttonLabel:{type:String,default:""}},emits:["create"],setup(e,{emit:t}){const n=t,s=F(null),a=()=>{var o;(o=s.value)==null||o.dialogRef.open()};return(o,l)=>(p(),V(Al,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[c("div",THe,[(p(!0),f(fe,null,Ae(I(EHe).slice(0,5),i=>(p(),V(a2,{id:i.id,key:i.id,name:i.name,email:i.email,thumbnail:i.thumbnail,"phone-number":i.phoneNumber,"additional-attributes":i.additionalAttributes,"is-expanded":i.id===0,onToggle:r=>o.toggleExpanded(i.id)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","is-expanded","onToggle"]))),128))])]),actions:K(()=>[e.showButton?(p(),f("div",AHe,[v(ce,{label:e.buttonLabel,icon:"i-lucide-plus",onClick:a},null,8,["label"]),v(n2,{ref_key:"createNewContactDialogRef",ref:s,onCreate:l[0]||(l[0]=i=>n("create",i))},null,512)])):O("",!0)]),_:1},8,["title","subtitle"]))}},SHe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},IHe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},CHe={key:1,class:"flex items-center justify-center py-10"},xHe={class:"text-base text-n-slate-11"},NHe="last_activity_at",OHe=300,oc={__name:"ContactsIndex",setup(e){const t=yt(),n=cn(),s=En(),{t:a}=Pe(),{updateUISettings:o,uiSettings:l}=Sn(),i=ke("contacts/getContactsList"),r=ke("contacts/getUIFlags"),d=ke("customViews/getUIFlags"),u=ke("customViews/getContactCustomViews"),m=ke("contacts/getAppliedContactFilters"),h=ke("contacts/getMeta"),_=C(()=>{var ue;return(ue=n.query)==null?void 0:ue.search}),g=F(_.value||""),T=C(()=>{var ue;return Number((ue=n.query)==null?void 0:ue.page)||1}),S=(ue="")=>{const Ne=ue.startsWith("-");return{sort:(Ne?ue.slice(1):ue)||NHe,order:Ne?"-":""}},{contacts_sort_by:b=""}=l.value??{},{sort:A,order:y}=S(b),x=os({activeSort:A,activeOrdering:y}),$=C(()=>n.params.label),N=C(()=>n.params.segmentId),w=C(()=>r.value.isFetching||d.value.isFetching),D=C(()=>{var ue;return Number((ue=h.value)==null?void 0:ue.currentPage)}),H=C(()=>{var ue;return(ue=h.value)==null?void 0:ue.count}),B=C(()=>{if(N.value)return u.value.find(ue=>ue.id===Number(N.value))}),k=C(()=>i.value.length>0),U=C(()=>n.name==="contacts_dashboard_index"&&T.value===1),G=C(()=>n.name==="contacts_dashboard_active"),L=C(()=>m.value.length>0),M=C(()=>!_.value&&!k.value&&U.value&&!L.value),R=C(()=>(_.value||L.value||!U.value)&&!k.value),P=C(()=>{var ue;return _.value?a("CONTACTS_LAYOUT.HEADER.SEARCH_TITLE"):G.value?a("CONTACTS_LAYOUT.HEADER.ACTIVE_TITLE"):N.value?(ue=B.value)==null?void 0:ue.name:$.value?`#${$.value}`:a("CONTACTS_LAYOUT.HEADER.TITLE")}),W=C(()=>G.value?a("CONTACTS_LAYOUT.EMPTY_STATE.ACTIVE_EMPTY_STATE_TITLE"):!_.value||L.value?a("CONTACTS_LAYOUT.EMPTY_STATE.LIST_EMPTY_STATE_TITLE"):a("CONTACTS_LAYOUT.EMPTY_STATE.SEARCH_EMPTY_STATE_TITLE")),Q=(ue,Ne="")=>{const Re={...n.query,page:ue.toString(),...Ne?{search:Ne}:{}};Ne||delete Re.search,s.replace({query:Re})},Z=()=>`${x.activeOrdering}${x.activeSort}`,j=(ue=1)=>({page:ue,sortAttr:Z(),label:$.value}),X=async(ue=1)=>{await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/get",j(ue)),Q(ue)},q=async(ue,Ne=1)=>{!N.value&&!L.value||(await t.dispatch("contacts/filter",{...j(Ne),queryPayload:ue}),Q(Ne))},se=async(ue=1)=>{await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/active",{page:ue,sortAttr:Z()}),Q(ue)},he=ml(async(ue,Ne=1)=>{if(await t.dispatch("contacts/clearContactFilters"),g.value=ue,!ue){Q(Ne),await X(Ne);return}Q(Ne,ue),await t.dispatch("contacts/search",{...j(Ne),search:encodeURIComponent(ue)})},OHe),be=async ue=>{var Ne,Re;if(Q(ue,g.value),!w.value){if(_.value){await he(_.value,ue);return}if(g.value="",G.value){await se(ue);return}if((L.value||(Ne=B.value)!=null&&Ne.query)&&!$.value){const Ze=((Re=B.value)==null?void 0:Re.query)||Ho(m.value);await q(Ze,ue);return}await X(ue)}},ne=async({sort:ue,order:Ne})=>{var Re;if(Object.assign(x,{activeSort:ue,activeOrdering:Ne}),await o({contacts_sort_by:Z()}),_.value){await he(g.value);return}if(G.value){await se();return}await(N.value||L.value?q(N.value?(Re=B.value)==null?void 0:Re.query:Ho(m.value)):X())},J=async ue=>{await t.dispatch("contacts/create",ue)};return ot(()=>{var ue;return(ue=l.value)==null?void 0:ue.contacts_sort_by},ue=>{if(ue){const{sort:Ne,order:Re}=S(ue);x.activeSort=Ne,x.activeOrdering=Re}},{immediate:!0}),ot([$,B,G],()=>{be(T.value)},{deep:!0}),ot(_,ue=>{if(!w.value&&(g.value=ue||"",ue===void 0)){if(G.value||$.value||B.value||L.value)return;X()}}),pt(async()=>{if(N.value)B.value&&N.value&&await q(B.value.query,T.value);else{if(_.value){await he(_.value,T.value);return}if(G.value){await se(T.value);return}await X(T.value)}}),(ue,Ne)=>(p(),f("div",SHe,[v(UVe,{"search-value":g.value,"header-title":P.value,"current-page":D.value,"total-items":H.value,"show-pagination-footer":!w.value&&k.value,"active-sort":x.activeSort,"active-ordering":x.activeOrdering,"active-segment":B.value,"segments-id":N.value,"is-fetching-list":w.value,"has-applied-filters":L.value,"onUpdate:currentPage":be,onSearch:I(he),"onUpdate:sort":ne,onApplyFilter:q,onClearFilters:X},{default:K(()=>[w.value?(p(),f("div",IHe,[v(qn)])):(p(),f(fe,{key:1},[M.value?(p(),V(yHe,{key:0,class:"pt-14",title:I(a)("CONTACTS_LAYOUT.EMPTY_STATE.TITLE"),subtitle:I(a)("CONTACTS_LAYOUT.EMPTY_STATE.SUBTITLE"),"button-label":I(a)("CONTACTS_LAYOUT.EMPTY_STATE.BUTTON_LABEL"),onCreate:J},null,8,["title","subtitle","button-label"])):R.value?(p(),f("div",CHe,[c("span",xHe,E(W.value),1)])):(p(),V(uHe,{key:2,contacts:I(i)},null,8,["contacts"]))],64))]),_:1},8,["search-value","header-title","current-page","total-items","show-pagination-footer","active-sort","active-ordering","active-segment","segments-id","is-fetching-list","has-applied-filters","onSearch"])]))}},wHe=["aria-label"],RHe={class:"flex items-center mb-0 min-w-0"},$He=["onClick"],MHe={class:"min-w-0 truncate"},kHe={key:2,class:"text-sm truncate text-n-slate-12 min-w-0 block"},o2={__name:"Breadcrumb",props:{items:{type:Array,required:!0}},emits:["click"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=(o,l)=>{n("click",o,l)};return(o,l)=>(p(),f("nav",{"aria-label":I(s)("BREADCRUMB.ARIA_LABEL"),class:"flex items-center h-8 min-w-0"},[c("ol",RHe,[(p(!0),f(fe,null,Ae(e.items,(i,r)=>(p(),f("li",{key:r,class:re(["flex items-center",{"min-w-0 flex-1":r===e.items.length-1}])},[r>0?(p(),V(Wt,{key:0,icon:"i-lucide-chevron-right",class:"flex-shrink-0 mx-2 size-4 text-n-slate-11 dark:text-n-slate-11"})):O("",!0),r!==e.items.length-1?(p(),f("button",{key:1,class:"inline-flex items-center justify-center min-w-0 gap-2 p-0 text-sm font-medium transition-all duration-200 ease-in-out border-0 rounded-lg text-n-slate-11 hover:text-n-slate-12 outline-transparent max-w-56",onClick:d=>a(i,r)},[c("span",MHe,E(i.label),1)],8,$He)):(p(),f("span",kHe,E(i.emoji?i.emoji:"")+" "+E(i.label),1))],2))),128))])],8,wHe))}},LHe={class:"relative flex items-center"},DHe={key:0,class:"flex items-center gap-1"},PHe={__name:"ListAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),[o,l]=Xn(),i=C(()=>{var d;return((d=n.attribute.attributeValues)==null?void 0:d.map(u=>({label:u,value:u,action:"select",isSelected:u===n.attribute.value})))||[]}),r=async d=>{s("update",d.value),l(!1)};return(d,u)=>{const m=_t("on-clickaway");return p(),f("div",{class:re(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[pe((p(),f("div",LHe,[c("span",{class:re(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate flex-1":e.isEditingView}]),onClick:u[0]||(u[0]=h=>I(l)(!n.isEditingView))},E(e.attribute.value||I(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.SELECT")),3),I(o)?(p(),V(ua,{key:0,"menu-items":i.value,"show-search":"",class:re(["w-48 mt-2 top-full",{"ltr:right-0 rtl:left-0":!e.isEditingView,"ltr:left-0 rtl:right-0":e.isEditingView}]),onAction:u[1]||(u[1]=h=>r(h))},null,8,["menu-items","class"])):O("",!0)])),[[m,()=>I(l)(!1)]]),e.isEditingView?(p(),f("div",DHe,[v(ce,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[2]||(u[2]=h=>I(l)())}),v(ce,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[3]||(u[3]=h=>s("delete"))})])):O("",!0)],2)}}},BHe={__name:"CheckboxAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,a=F(!!n.attribute.value),o=l=>{s("update",l)};return(l,i)=>(p(),f("div",{class:re(["flex items-center w-full gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[v(so,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=r=>a.value=r),onChange:o},null,8,["modelValue"]),e.isEditingView?(p(),V(ce,{key:0,variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:i[1]||(i[1]=r=>s("delete"))})):O("",!0)],2))}},FHe={key:1,class:"flex items-center gap-1"},UHe={key:2,class:"flex items-center w-full"},GHe={__name:"DateAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(!1),l=F(n.attribute.value||""),r=Lt({editedValue:{required:lt,isDate:g=>new Date(g).toISOString()}},{editedValue:l}),d=C(()=>n.attribute.value?new Date(n.attribute.value).toLocaleDateString():a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),u=C(()=>r.value.$errors.length>0),m=C({get(){const g=l.value??n.attribute.value;return g?new Date(g).toISOString().slice(0,10):o.value&&!u.value?new Date().toISOString().slice(0,10):""},set(g){l.value=g&&new Date(g).toISOString()}}),h=g=>{o.value=typeof g=="boolean"?g:!o.value,o.value&&!l.value&&(r.value.$reset(),l.value=new Date().toISOString())},_=async()=>{await r.value.$validate()&&(s("update",bA(l.value)),o.value=!1)};return(g,T)=>{const S=_t("on-clickaway");return p(),f("div",{class:re(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[o.value?O("",!0):(p(),f("span",{key:0,class:re(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView}]),onClick:T[0]||(T[0]=b=>h(!e.isEditingView))},E(d.value),3)),e.isEditingView&&!o.value?(p(),f("div",FHe,[v(ce,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[1]||(T[1]=b=>h(!0))}),v(ce,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[2]||(T[2]=b=>s("delete"))})])):O("",!0),o.value?pe((p(),f("div",UHe,[v(ln,{modelValue:m.value,"onUpdate:modelValue":T[3]||(T[3]=b=>m.value=b),type:"date",class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",message:u.value?I(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_DATE"):"","message-type":u.value?"error":"info",autofocus:"","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:Hn(_,["enter"])},null,8,["modelValue","message","message-type"]),v(ce,{icon:"i-lucide-check",color:u.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:_},null,8,["color"])])),[[S,()=>h(!1)]]):O("",!0)],2)}}},VHe=["href"],HHe={key:1,class:"flex items-center gap-1"},WHe={key:2,class:"flex items-center w-full"},KHe={__name:"OtherAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(!1),l=F(n.attribute.value||""),i=C(()=>n.attribute.attributeDisplayType==="link"),r=C(()=>n.attribute.attributeDisplayType==="text"),d=C(()=>n.attribute.attributeDisplayType==="number"),u=C(()=>({editedValue:{required:lt,...i.value&&{url:b=>!b||uf(b)},...r.value&&n.attribute.regexPattern&&{regexValidation:b=>b?dg(n.attribute.regexPattern).test(b):!0}}})),m=Lt(u,{editedValue:l}),h=C(()=>m.value.$error),_=C(()=>{var b,A,y;return h.value?i.value&&((b=m.value.editedValue.url)!=null&&b.$invalid)?a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_URL"):r.value&&n.attribute.regexPattern&&((A=m.value.editedValue.regexValidation)!=null&&A.$invalid)?n.attribute.regexCue||a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_INPUT"):d.value&&((y=m.value.editedValue.required)!=null&&y.$invalid)?a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_NUMBER"):a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.REQUIRED"):""}),g=C(()=>{switch(n.attribute.attributeDisplayType){case"link":return"url";case"number":return"number";default:return"text"}}),T=b=>{o.value=typeof b=="boolean"?b:!o.value,o.value&&(m.value.$reset(),l.value=n.attribute.value||"")},S=async()=>{await m.value.$validate()&&(s("update",l.value),T(!1))};return(b,A)=>{const y=_t("on-clickaway");return p(),f("div",{class:re(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[o.value?O("",!0):(p(),f("span",{key:0,class:re(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView&&!i.value,"truncate hover:text-n-brand text-n-blue-text":e.isEditingView&&i.value}]),onClick:A[1]||(A[1]=x=>T(!e.isEditingView))},[i.value&&e.attribute.value&&e.isEditingView?(p(),f("a",{key:0,href:e.attribute.value,target:"_blank",rel:"noopener noreferrer",class:"hover:underline",onClick:A[0]||(A[0]=ze(()=>{},["stop"]))},E(e.attribute.value),9,VHe)):(p(),f(fe,{key:1},[Ee(E(e.attribute.value||I(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),1)],64))],2)),e.isEditingView&&!o.value?(p(),f("div",HHe,[v(ce,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:A[2]||(A[2]=x=>T(!0))}),v(ce,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:A[3]||(A[3]=x=>s("delete"))})])):O("",!0),o.value?pe((p(),f("div",WHe,[v(ln,{modelValue:l.value,"onUpdate:modelValue":A[4]||(A[4]=x=>l.value=x),placeholder:I(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT"),type:g.value,class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",autofocus:"",message:_.value,"message-type":h.value?"error":"info","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:Hn(S,["enter"])},null,8,["modelValue","placeholder","type","message","message-type"]),v(ce,{icon:"i-lucide-check",color:h.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:S},null,8,["color"])])),[[y,()=>T(!1)]]):O("",!0)],2)}}},zHe={class:"flex items-center justify-between truncate"},jHe={class:"text-sm font-medium truncate text-n-slate-12"},$E={__name:"ContactCustomAttributeItem",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},setup(e){const t=e,n=yt(),{t:s}=Pe(),a=cn(),o=async()=>{var d;try{await n.dispatch("contacts/deleteCustomAttributes",{id:a.params.contactId,customAttributes:[t.attribute.attributeKey]}),_e(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_SUCCESS_MESSAGE"))}catch(u){_e(((d=u==null?void 0:u.response)==null?void 0:d.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_ERROR"))}},l=async d=>{var u;try{await n.dispatch("contacts/update",{id:a.params.contactId,customAttributes:{[t.attribute.attributeKey]:d}}),_e(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.SUCCESS_MESSAGE"))}catch(m){_e(((u=m==null?void 0:m.response)==null?void 0:u.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.UPDATE_ERROR"))}},i={list:PHe,checkbox:BHe,date:GHe,default:KHe},r=C(()=>i[t.attribute.attributeDisplayType]||i.default);return(d,u)=>(p(),f("div",{class:re(["grid grid-cols-[140px,1fr] group/attribute items-center w-full gap-2",e.isEditingView?"min-h-10":"min-h-11"])},[c("div",zHe,[c("span",jHe,E(e.attribute.attributeDisplayName),1)]),(p(),V(xs(r.value),{attribute:e.attribute,"is-editing-view":e.isEditingView,onUpdate:l,onDelete:o},null,40,["attribute","is-editing-view"]))],2))}},YHe={key:0,class:"flex flex-col gap-6 px-6 py-6"},XHe={key:0,class:"flex flex-col gap-2"},qHe={key:1,class:"flex items-center gap-3"},ZHe={class:"text-sm font-medium text-n-slate-10"},QHe={class:"flex flex-col gap-3"},JHe={key:0,class:"relative"},eWe=["placeholder"],tWe={key:1,class:"flex items-center justify-start h-11"},nWe={class:"text-sm text-n-slate-11"},sWe={key:2,class:"flex flex-col gap-2"},aWe={key:1,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},oWe={__name:"ContactCustomAttributes",props:{selectedContact:{type:Object,default:null}},setup(e){const t=e,{t:n}=Pe(),{uiSettings:s}=Sn(),a=F(""),o=ke("attributes/getContactAttributes")||[],l=C(()=>{var S;return((S=o.value)==null?void 0:S.length)>0}),i=(S,b,A)=>!S.length||!b?[]:S.reduce((y,x)=>{const{attributeKey:$}=x;return A($,b)&&y.push({...x,value:b[$]??""}),y},[]),r=C(()=>s.value.conversation_elements_order_conversation_contact_panel??[]),d=S=>{const b=r.value;if(!(b!=null&&b.length))return S;const A=new Map(b.map((y,x)=>[y,x]));return[...S].sort((y,x)=>{const $=A.get(y.attributeKey)??1/0,N=A.get(x.attributeKey)??1/0;return $-N})},u=C(()=>{var b;const S=i(o.value,(b=t.selectedContact)==null?void 0:b.customAttributes,(A,y)=>A in y);return d(S)}),m=C(()=>{var b;const S=i(o.value,(b=t.selectedContact)==null?void 0:b.customAttributes,(A,y)=>!(A in y));return d(S)}),h=C(()=>{var S;return(S=m.value)==null?void 0:S.filter(b=>b.attributeDisplayName.toLowerCase().includes(a.value.toLowerCase()))}),_=C(()=>{var S;return(S=m.value)==null?void 0:S.length}),g=C(()=>_.value===0),T=C(()=>u.value.length===0);return(S,b)=>l.value?(p(),f("div",YHe,[T.value?O("",!0):(p(),f("div",XHe,[(p(!0),f(fe,null,Ae(u.value,A=>(p(),V($E,{key:A.id,"is-editing-view":"",attribute:A},null,8,["attribute"]))),128))])),g.value?O("",!0):(p(),f("div",qHe,[b[1]||(b[1]=c("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1)),c("span",ZHe,E(I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.UNUSED_ATTRIBUTES",{count:_.value})),1),b[2]||(b[2]=c("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1))])),c("div",QHe,[g.value?O("",!0):(p(),f("div",JHe,[b[3]||(b[3]=c("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),pe(c("input",{"onUpdate:modelValue":b[0]||(b[0]=A=>a.value=A),type:"search",placeholder:I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,eWe),[[mt,a.value]])])),h.value.length===0&&!g.value?(p(),f("div",tWe,[c("p",nWe,E(I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.NO_ATTRIBUTES")),1)])):O("",!0),g.value?O("",!0):(p(),f("div",sWe,[(p(!0),f(fe,null,Ae(h.value,A=>(p(),V($E,{key:A.id,attribute:A},null,8,["attribute"]))),128))]))])])):(p(),f("p",aWe,E(I(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.EMPTY_STATE")),1))}},lWe={class:"flex w-full h-full overflow-hidden justify-evenly bg-n-background"},iWe={class:"flex flex-col w-full h-full transition-all duration-300 ltr:2xl:ml-56 rtl:2xl:mr-56"},rWe={class:"sticky top-0 z-10 px-6 3xl:px-0"},cWe={class:"w-full mx-auto max-w-[40.625rem]"},dWe={class:"flex flex-col xs:flex-row items-start xs:items-center justify-between w-full py-7 gap-2"},uWe={class:"flex items-center gap-2"},pWe={class:"flex-1 px-6 overflow-y-auto 3xl:px-px"},mWe={class:"w-full py-4 mx-auto max-w-[40.625rem]"},hWe={key:0,class:"hidden lg:block overflow-y-auto justify-end min-w-52 w-full py-6 max-w-md border-l border-n-weak bg-n-solid-2"},fWe={key:0,id:"contact-sidebar-content",class:"order-2 w-[85%] sm:w-[50%] bg-n-solid-2 ltr:border-l rtl:border-r border-n-weak overflow-y-auto py-6 shadow-lg"},gWe={__name:"ContactsDetailsLayout",props:{selectedContact:{type:Object,default:()=>({})},isUpdating:{type:Boolean,default:!1}},emits:["goToContactsList","toggleBlock"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=eg(),l=cn(),i=F(!1),r=C(()=>l.params.contactId),d=C(()=>{var S;return(S=n.selectedContact)==null?void 0:S.name}),u=C(()=>{const S=[{label:a("CONTACTS_LAYOUT.HEADER.BREADCRUMB.CONTACTS"),link:"#"}];return n.selectedContact&&S.push({label:d.value}),S}),m=C(()=>{var S;return(S=n.selectedContact)==null?void 0:S.blocked}),h=()=>{s("goToContactsList")},_=()=>{s("toggleBlock",m.value)},g=()=>{i.value=!i.value},T=()=>{i.value&&(i.value=!1)};return(S,b)=>(p(),f("section",lWe,[c("div",iWe,[c("header",rWe,[c("div",cWe,[c("div",dWe,[v(o2,{items:u.value,onClick:h},null,8,["items"]),c("div",uWe,[v(ce,{label:m.value?S.$t("CONTACTS_LAYOUT.HEADER.UNBLOCK_CONTACT"):S.$t("CONTACTS_LAYOUT.HEADER.BLOCK_CONTACT"),size:"sm",slate:"","is-loading":e.isUpdating,disabled:e.isUpdating,onClick:_},null,8,["label","is-loading","disabled"]),v(Kp,{"contact-id":r.value},{trigger:K(({toggle:A})=>[v(ce,{label:S.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),size:"sm",onClick:A},null,8,["label","onClick"])]),_:1},8,["contact-id"])])])])]),c("main",pWe,[c("div",mWe,[at(S.$slots,"default")])])]),I(o).sidebar?(p(),f("div",hWe,[at(S.$slots,"sidebar")])):O("",!0),I(o).sidebar?(p(),f("div",{key:1,class:re(["lg:hidden fixed top-0 ltr:right-0 rtl:left-0 h-full z-50 flex justify-end transition-all duration-200 ease-in-out",i.value?"w-full":"w-16"])},[pe((p(),f("div",{class:re(["flex items-start p-1 w-fit h-fit relative order-1 xs:top-24 top-28 transition-all bg-n-solid-2 border border-n-weak duration-500 ease-in-out",[i.value?"justify-end ltr:rounded-l-full rtl:rounded-r-full ltr:rounded-r-none rtl:rounded-l-none":"justify-center rounded-full ltr:mr-6 rtl:ml-6"]])},[v(ce,{ghost:"",slate:"",sm:"",class:re(["!rounded-full rtl:rotate-180",{"bg-n-alpha-2":i.value}]),icon:i.value?"i-lucide-panel-right-close":"i-lucide-panel-right-open","data-contact-sidebar-toggle":"",onClick:g},null,8,["class","icon"])],2)),[[I(ca),[T,{ignore:["#contact-sidebar-content"]}]]]),v(Ps,{"enter-active-class":"transition-transform duration-200 ease-in-out","leave-active-class":"transition-transform duration-200 ease-in-out","enter-from-class":"ltr:translate-x-full rtl:-translate-x-full","enter-to-class":"ltr:translate-x-0 rtl:-translate-x-0","leave-from-class":"ltr:translate-x-0 rtl:-translate-x-0","leave-to-class":"ltr:translate-x-full rtl:-translate-x-full"},{default:K(()=>[i.value?(p(),f("div",fWe,[at(S.$slots,"sidebar")])):O("",!0)]),_:3})],2)):O("",!0)]))}},_We={class:"text-sm text-n-slate-12 ltr:mr-px rtl:ml-px"},vWe={__name:"LabelItem",props:{label:{type:Object,default:null},isHovered:{type:Boolean,default:!1}},emits:["remove","hover"],setup(e,{emit:t}){const n=e,s=t,a=()=>{var l;s("remove",(l=n.label)==null?void 0:l.id)},o=()=>{var l;s("hover",(l=n.label)==null?void 0:l.id)};return(l,i)=>(p(),f("div",{class:"flex items-center px-1 py-1 overflow-hidden transition-all duration-300 ease-out rounded-md bg-n-alpha-2 h-7",onMouseenter:o},[c("div",{class:"w-2 h-2 m-1 rounded-sm",style:Ct({backgroundColor:e.label.color})},null,4),c("span",_We,E(e.label.title),1),c("div",{class:re(["w-0 flex relative ltr:left-1 rtl:right-1 flex-shrink-0 overflow-hidden transition-[width] duration-300 ease-out",{"w-6":e.isHovered}])},[v(ce,{class:re(["transition-opacity duration-200 !h-7 ltr:rounded-r-md rtl:rounded-l-md ltr:rounded-l-none rtl:rounded-r-none w-6 bg-transparent",{"opacity-0":!e.isHovered,"opacity-100":e.isHovered}]),slate:"",xs:"",faded:"",icon:"i-lucide-x",onClick:a},null,8,["class"])],2)],32))}},bWe={class:"relative"},EWe={class:"text-sm text-n-slate-11"},TWe={__name:"AddLabel",props:{labelMenuItems:{type:Array,default:()=>[]}},emits:["updateLabel"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=F(!1);return(o,l)=>{const i=_t("on-clickaway");return p(),f("div",bWe,[c("button",{class:re(["flex items-center gap-1 px-2 py-1 rounded-md outline-dashed h-6 outline-1 outline-n-slate-6 hover:bg-n-alpha-2",{"bg-n-alpha-2":a.value}]),onClick:l[0]||(l[0]=r=>a.value=!a.value)},[l[2]||(l[2]=c("span",{class:"i-lucide-plus"},null,-1)),c("span",EWe,E(I(s)("LABEL.TAG_BUTTON")),1)],2),a.value?pe((p(),V(ua,{key:0,"menu-items":e.labelMenuItems,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:l[1]||(l[1]=r=>n("updateLabel",r))},{thumbnail:K(({item:r})=>[c("div",{class:"rounded-sm size-2",style:Ct({backgroundColor:r.thumbnail.color})},null,4)]),_:1},8,["menu-items"])),[[i,()=>a.value=!1]]):O("",!0)])}}},AWe={__name:"ContactLabels",props:{contactId:{type:[String,Number],default:null}},setup(e){const t=e,n=yt(),s=cn(),a=F(!1),o=F(null),l=ke("labels/getLabels"),i=ke("contactLabels/getContactLabels"),r=C(()=>{const T=i.value(t.contactId);return l.value.filter(({title:S})=>T.includes(S))}),d=C(()=>{var T;return(T=l.value)==null?void 0:T.map(S=>({label:S.title,value:S.id,thumbnail:{name:S.title,color:S.color},isSelected:r.value.some(b=>b.id===S.id),action:"contactLabel"})).toSorted((S,b)=>Number(S.isSelected)-Number(b.isSelected))}),u=async T=>{T&&n.dispatch("contactLabels/get",T)},m=async({value:T})=>{try{const S=r.value.map(y=>y.title),b=l.value.find(y=>y.id===T);if(!b)return;let A;S.includes(b.title)?A=S.filter(y=>y!==b.title):A=[...S,b.title],await n.dispatch("contactLabels/update",{contactId:t.contactId,labels:A}),a.value=!1}catch{}},h=T=>m({value:T});ot(()=>t.contactId,(T,S)=>{T!==S&&u(T)}),pt(()=>{s.params.contactId&&u(s.params.contactId)});const _=()=>{o.value=null},g=T=>{o.value=T};return(T,S)=>(p(),f("div",{class:"flex flex-wrap items-center gap-2",onMouseleave:_},[(p(!0),f(fe,null,Ae(r.value,b=>(p(),V(vWe,{key:b.id,label:b,"is-hovered":o.value===b.id,onRemove:h,onHover:A=>g(b.id)},null,8,["label","is-hovered","onHover"]))),128)),v(TWe,{"label-menu-items":d.value,onUpdateLabel:m},null,8,["label-menu-items"])],32))}},yWe={class:"flex flex-col items-start gap-8 pb-6"},SWe={class:"flex flex-col items-start gap-3"},IWe={class:"flex flex-col gap-1"},CWe={class:"text-base font-medium text-n-slate-12"},xWe={class:"flex flex-col gap-1.5"},NWe={key:0,class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},OWe={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},wWe={key:0,class:"i-ph-activity text-n-slate-10 size-4"},RWe={class:"flex flex-col items-start gap-6"},$We={class:"flex flex-col items-start w-full gap-4 pt-6 border-t border-n-strong"},MWe={class:"flex flex-col gap-2"},kWe={class:"text-base font-medium text-n-slate-12"},LWe={class:"text-sm text-n-slate-11"},DWe={__name:"ContactDetails",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=yt(),l=F(null),i=F(null),r=F(""),d=F(null),u=ke("contacts/getUIFlags"),m=C(()=>u.value.isUpdating),h=C(()=>{var w;return(w=d.value)==null?void 0:w.isFormInvalid}),_=F({}),g=()=>n.selectedContact?{...n.selectedContact}:{};pt(()=>{Object.assign(_.value,g())});const T=C(()=>{var w;return(w=_.value)!=null&&w.createdAt?Ds(_.value.createdAt):""}),S=C(()=>{var w;return(w=_.value)!=null&&w.lastActivityAt?Ds(_.value.lastActivityAt):""}),b=C(()=>{var w;return r.value?r.value:(w=_.value)==null?void 0:w.thumbnail}),A=w=>{Object.assign(_.value,w)},y=async()=>{try{const{customAttributes:w,...D}=_.value;await o.dispatch("contacts/update",D),await o.dispatch("contacts/fetchContactableInbox",n.selectedContact.id),_e(a("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch{_e(a("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.ERROR_MESSAGE"))}},x=()=>{var w;(w=l.value)==null||w.dialogRef.open()},$=async({file:w,url:D})=>{var H;i.value=w,r.value=D;try{await o.dispatch("contacts/update",{...(H=d.value)==null?void 0:H.state,avatar:w,isFormData:!0}),_e(a("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.SUCCESS_MESSAGE"))}catch{_e(a("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.ERROR_MESSAGE"))}},N=async()=>{try{n.selectedContact&&n.selectedContact.id&&(await o.dispatch("contacts/deleteAvatar",n.selectedContact.id),_e(a("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.SUCCESS_MESSAGE"))),i.value=null,r.value="",_.value.thumbnail=null}catch(w){_e(w.message?w.message:a("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.ERROR_MESSAGE"))}};return(w,D)=>{var H,B,k,U,G,L;return p(),f("div",yWe,[c("div",SWe,[v(Ft,{src:b.value||"",name:((H=e.selectedContact)==null?void 0:H.name)||"",size:72,"allow-upload":"",onUpload:$,onDelete:N},null,8,["src","name"]),c("div",IWe,[c("h3",CWe,E((B=e.selectedContact)==null?void 0:B.name),1),c("div",xWe,[(k=e.selectedContact)!=null&&k.identifier?(p(),f("span",NWe,[D[1]||(D[1]=c("span",{class:"i-ph-user-gear text-n-slate-10 size-4"},null,-1)),Ee(" "+E((U=e.selectedContact)==null?void 0:U.identifier),1)])):O("",!0),c("span",OWe,[(G=e.selectedContact)!=null&&G.identifier?(p(),f("span",wWe)):O("",!0),Ee(" "+E(w.$t("CONTACTS_LAYOUT.DETAILS.CREATED_AT",{date:T.value}))+"  "+E(w.$t("CONTACTS_LAYOUT.DETAILS.LAST_ACTIVITY",{date:S.value})),1)])])]),v(AWe,{"contact-id":(L=e.selectedContact)==null?void 0:L.id},null,8,["contact-id"])]),c("div",RWe,[v(Y_,{ref_key:"contactsFormRef",ref:d,"contact-data":_.value,"is-details-view":"",onUpdate:A},null,8,["contact-data"]),v(ce,{label:I(a)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":m.value,disabled:m.value||h.value,onClick:y},null,8,["label","is-loading","disabled"])]),c("div",$We,[c("div",MWe,[c("h6",kWe,E(I(a)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT")),1),c("span",LWe,E(I(a)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT_DESCRIPTION")),1)]),v(ce,{label:I(a)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),color:"ruby",onClick:x},null,8,["label"])]),v(s2,{ref_key:"confirmDeleteContactDialogRef",ref:l,"selected-contact":e.selectedContact,onGoToContactsList:D[0]||(D[0]=M=>s("goToContactsList"))},null,8,["selected-contact"])])}}},PWe={class:"flex items-center h-8 rounded-lg bg-n-alpha-1 w-fit"},BWe=["onClick"],FWe={__name:"TabBar",props:{initialActiveTab:{type:Number,default:0},tabs:{type:Array,required:!0,validator:e=>e.every(t=>typeof t.label=="string"&&(t.count?typeof t.count=="number":!0))}},emits:["tabChanged"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>n.initialActiveTab),o=i=>{s("tabChanged",n.tabs[i])},l=i=>i>a.value&&i<n.tabs.length-1||i<a.value-1&&i>-1;return(i,r)=>(p(),f("div",PWe,[(p(!0),f(fe,null,Ae(e.tabs,(d,u)=>(p(),f(fe,{key:u},[c("button",{class:re(["relative px-4 truncate py-1.5 text-sm border-0 outline-1 outline rounded-lg transition-colors duration-300 ease-in-out hover:text-n-brand",[a.value===u?"text-n-blue-text bg-n-solid-active outline-n-container dark:outline-transparent":"text-n-slate-10 outline-transparent h-8"]]),onClick:m=>o(u)},E(d.label)+" "+E(d.count?`(${d.count})`:""),11,BWe),c("div",{class:re(["w-px h-3.5 rounded my-auto transition-colors duration-300 ease-in-out",l(u)?"bg-n-strong":"bg-transparent dark:bg-transparent"])},null,2)],64))),128))]))}},UWe={class:"flex flex-col gap-6 py-6"},GWe={class:"flex items-center gap-3"},VWe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},HWe={key:1},WWe={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"},KWe={__name:"ContactNotes",setup(e){const{t}=Pe(),n=yt(),s=cn(),a=os({message:""}),o=ke("getCurrentUser"),l=ke("contactNotes/getAllNotesByContactId"),i=ke("contactNotes/getUIFlags"),r=C(()=>i.value.isFetching),d=C(()=>i.value.isCreating),u=C(()=>l.value(s.params.contactId)),m=T=>{var b,A;return((b=T==null?void 0:T.user)==null?void 0:b.id)===o.value.id?t("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):((A=T==null?void 0:T.user)==null?void 0:A.name)||"Bot"},h=T=>{if(!T)return;const{contactId:S}=s.params;n.dispatch("contactNotes/create",{content:T,contactId:S}),a.message=""},_=T=>{if(!T)return;const{contactId:S}=s.params;n.dispatch("contactNotes/delete",{noteId:T,contactId:S})};return Qs({"$mod+Enter":{action:()=>h(a.message),allowOnFocusedInput:!0}}),(T,S)=>(p(),f("div",UWe,[v(Ws,{modelValue:a.message,"onUpdate:modelValue":S[1]||(S[1]=b=>a.message=b),placeholder:I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),"focus-on-mount":"",class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 px-6"},{actions:K(()=>[c("div",GWe,[v(ce,{variant:"link",color:"blue",size:"sm",label:I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),class:"hover:no-underline","is-loading":d.value,disabled:!a.message||d.value,onClick:S[0]||(S[0]=b=>h(a.message))},null,8,["label","is-loading","disabled"])])]),_:1},8,["modelValue","placeholder"]),r.value?(p(),f("div",VWe,[v(qn)])):u.value.length>0?(p(),f("div",HWe,[(p(!0),f(fe,null,Ae(u.value,b=>(p(),V(YI,{key:b.id,class:"mx-6 py-4",note:b,"written-by":m(b),"allow-delete":"",onDelete:_},null,8,["note","written-by"]))),128))])):(p(),f("p",WWe,E(I(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EMPTY_STATE")),1))]))}},zWe={class:"flex items-end w-full gap-2 pb-1"},jWe={class:"w-full mb-0 text-sm leading-7 text-n-slate-12 line-clamp-2"},YWe={class:"flex items-center flex-shrink-0 gap-2 pb-2"},XWe={key:1,class:"inline-flex items-center justify-center rounded-full size-5 bg-n-brand"},qWe={class:"text-xs font-semibold text-white"},ZWe={__name:"CardMessagePreview",props:{conversation:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Pe(),{getPlainText:s}=$a(),a=C(()=>{const{lastNonActivityMessage:i={},customAttributes:r={}}=t.conversation,{email:{subject:d}={}}=r;return s(d||(i==null?void 0:i.content)||n("CHAT_LIST.NO_CONTENT"))}),o=C(()=>{const{meta:{assignee:i={}}={}}=t.conversation;return{name:i.name??i.availableName,thumbnail:i.thumbnail,status:i.availabilityStatus}}),l=C(()=>{const{unreadCount:i}=t.conversation;return i});return(i,r)=>(p(),f("div",zWe,[c("p",jWe,E(a.value),1),c("div",YWe,[o.value.name?(p(),V(Ft,{key:0,name:o.value.name,src:o.value.thumbnail,size:20,status:o.value.status,"rounded-full":""},null,8,["name","src","status"])):O("",!0),l.value>0?(p(),f("div",XWe,[c("span",qWe,E(l.value),1)])):O("",!0)])]))}},QWe={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=Object.freeze({DEFAULT_WIDTH:80,CHAR_WIDTH:{SHORT:8,LONG:6},BASE_WIDTH:12,THRESHOLD:5}),s=F(null),a=F(1),o=C(()=>{var m;const u=new Set(t.conversationLabels);return(m=t.accountLabels)==null?void 0:m.filter(({title:h})=>u.has(h))}),l=({title:u=""})=>{const m=u.length>n.THRESHOLD?n.CHAR_WIDTH.LONG:n.CHAR_WIDTH.SHORT;return u.length*m+n.BASE_WIDTH},i=u=>u.length?u.reduce((h,_)=>h+l(_),0)/u.length:n.DEFAULT_WIDTH,r=C(()=>{var u;return(u=o.value)==null?void 0:u.slice(0,a.value)}),d=()=>{if(!s.value)return;const u=s.value.offsetWidth,m=i(o.value);a.value=Math.max(1,Math.floor(u/m))};return(u,m)=>{const h=_t("resize");return pe((p(),f("div",{ref_key:"containerRef",ref:s,class:"flex items-center gap-2.5 w-full min-w-0 h-6 overflow-hidden"},[(p(!0),f(fe,null,Ae(r.value,(_,g)=>(p(),f("div",{key:_.id,class:re(["flex items-center gap-1.5 min-w-0",[g!==r.value.length-1?"flex-shrink-0 text-ellipsis":"flex-shrink"]])},[c("div",{style:Ct({backgroundColor:_.color}),class:"size-1.5 rounded-full flex-shrink-0"},null,4),c("span",{class:re(["text-sm text-n-slate-10 whitespace-nowrap",{truncate:g===r.value.length-1}])},E(_.title),3)],2))),128))])),[[h,d]])}}},JWe={class:"flex items-center min-w-fit gap-0.5 h-6"},eKe={class:"flex items-center justify-center size-4"},tKe=6e4,l2={__name:"SLACardLabel",props:{conversation:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,s=F(null),a=F({threshold:null,isSlaMissed:!1,type:null,icon:null}),o=h=>Object.keys(h).reduce((_,g)=>(_[g.replace(/([A-Z])/g,"_$1").toLowerCase()]=h[g],_),{}),l=C(()=>{var h;return(h=n.conversation)==null?void 0:h.appliedSla}),i=C(()=>{var h;return(h=a.value)==null?void 0:h.isSlaMissed}),r=C(()=>{var h,_;return((h=a.value)==null?void 0:h.threshold)&&((_=l.value)==null?void 0:_.id)}),d=C(()=>{var h,_;return(_=(h=a.value)==null?void 0:h.type)==null?void 0:_.toUpperCase()}),u=()=>{a.value=oT({appliedSla:o(l.value||{}),chat:n.conversation})},m=()=>{s.value=setTimeout(()=>{u(),m()},tKe)};return pt(()=>{u(),m()}),zs(()=>{s.value&&clearTimeout(s.value)}),ot(()=>n.conversation,u),t({hasSlaThreshold:r}),(h,_)=>(p(),f("div",JWe,[c("div",eKe,[(p(),f("svg",{width:"10",height:"13",viewBox:"0 0 10 13",fill:"none",class:re(i.value?"fill-n-ruby-10":"fill-n-slate-9"),xmlns:"http://www.w3.org/2000/svg"},_[0]||(_[0]=[c("path",{d:"M4.55091 12.412C7.44524 12.412 9.37939 10.4571 9.37939 7.51446C9.37939 2.63072 5.21405 0.599854 2.36808 0.599854C1.81546 0.599854 1.45626 0.800176 1.45626 1.1801C1.45626 1.32516 1.52534 1.48404 1.64277 1.62219C2.27828 2.38204 2.92069 3.27314 2.93451 4.36455C2.93451 4.5925 2.9276 4.78592 2.76181 5.08295L3.05194 5.03459C2.81017 4.21949 2.18848 3.63234 1.5806 3.63234C1.32501 3.63234 1.15232 3.81884 1.15232 4.09514C1.15232 4.23331 1.19377 4.56488 1.19377 4.79974C1.19377 5.95332 0.26123 6.69935 0.26123 8.67495C0.26123 10.92 1.97434 12.412 4.55091 12.412ZM4.68906 10.8923C3.65982 10.8923 2.96905 10.2637 2.96905 9.33119C2.96905 8.3572 3.66672 8.01181 3.75652 7.38322C3.76344 7.32796 3.79107 7.31414 3.83251 7.34867C4.08809 7.57663 4.24697 7.85293 4.37822 8.1776C4.67525 7.77696 4.81341 6.9204 4.73051 6.0293C4.72361 5.97404 4.75814 5.94642 4.80649 5.96713C6.02916 6.53357 6.65085 7.74241 6.65085 8.82693C6.65085 9.92527 6.00844 10.8923 4.68906 10.8923Z"},null,-1)]),2))]),c("span",{class:re(["text-sm truncate",i.value?"text-n-ruby-11":"text-n-slate-11"])},E(`${d.value}: ${a.value.threshold}`),3)]))}},nKe={class:"flex flex-col w-full gap-1"},sKe={class:"flex items-center justify-between w-full gap-2 py-1 h-7"},aKe={class:"mb-0 text-sm leading-7 text-n-slate-12 line-clamp-1"},oKe={key:0,class:"inline-flex items-center justify-center flex-shrink-0 rounded-full size-5 bg-n-brand"},lKe={class:"text-xs font-semibold text-white"},iKe={key:0,class:"w-px h-3 bg-n-slate-4"},rKe={class:"overflow-hidden"},cKe={__name:"CardMessagePreviewWithMeta",props:{conversation:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e,{expose:t}){const n=e,{t:s}=Pe(),a=F(null),{getPlainText:o}=$a(),l=C(()=>{const{lastNonActivityMessage:u={},customAttributes:m={}}=n.conversation,{email:{subject:h}={}}=m;return o(h||(u==null?void 0:u.content)||s("CHAT_LIST.NO_CONTENT"))}),i=C(()=>{const{meta:{assignee:u={}}={}}=n.conversation;return{name:u.name??u.availableName,thumbnail:u.thumbnail,status:u.availabilityStatus}}),r=C(()=>{const{unreadCount:u}=n.conversation;return u}),d=C(()=>{var u,m;return((u=a.value)==null?void 0:u.hasSlaThreshold)&&((m=n.conversation)==null?void 0:m.slaPolicyId)});return t({hasSlaThreshold:d}),(u,m)=>(p(),f("div",nKe,[c("div",sKe,[c("p",aKe,E(l.value),1),r.value>0?(p(),f("div",oKe,[c("span",lKe,E(r.value),1)])):O("",!0)]),c("div",{class:re(["grid items-center gap-2.5 h-7",d.value?"grid-cols-[auto_auto_1fr_20px]":"grid-cols-[1fr_20px]"])},[pe(v(l2,{ref_key:"slaCardLabelRef",ref:a,conversation:e.conversation},null,8,["conversation"]),[[pn,d.value]]),d.value?(p(),f("div",iKe)):O("",!0),c("div",rKe,[v(QWe,{"conversation-labels":e.conversation.labels,"account-labels":e.accountLabels},null,8,["conversation-labels","account-labels"])]),i.value.name?(p(),V(Ft,{key:1,name:i.value.name,src:i.value.thumbnail,size:20,status:i.value.status,"rounded-full":""},null,8,["name","src","status"])):O("",!0)],2)]))}},dKe={class:"flex flex-col w-full gap-1 min-w-0"},uKe={class:"flex items-center justify-between h-6 gap-2"},pKe={class:"text-base font-medium truncate text-n-slate-12"},mKe={class:"flex items-center gap-2"},hKe={class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-5"},fKe={class:"text-sm text-n-slate-10"},gKe={__name:"ConversationCard",props:{conversation:{type:Object,required:!0},contact:{type:Object,required:!0},stateInbox:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=En(),s=cn(),a=F(null),o=C(()=>t.contact),l=C(()=>{var T;return(T=o.value)==null?void 0:T.name}),i=C(()=>{var T;return(T=o.value)==null?void 0:T.thumbnail}),r=C(()=>{var T;return(T=o.value)==null?void 0:T.availabilityStatus}),d=C(()=>t.stateInbox),u=C(()=>{var T;return(T=d.value)==null?void 0:T.name}),m=C(()=>{const{channelType:T,medium:S}=d.value;return Ir(T,S)}),h=C(()=>{var S;const T=(S=t.conversation)==null?void 0:S.timestamp;return T?wc(Ds(T)):""}),_=C(()=>{var S;const{labels:T=[]}=t.conversation;return!((S=a.value)!=null&&S.hasSlaThreshold)&&T.length===0}),g=T=>{const S=Bt(hg({accountId:s.params.accountId,id:t.conversation.id}));if(T.metaKey||T.ctrlKey){window.open(window.chatwootConfig.hostURL+S,"_blank","noopener noreferrer nofollow");return}n.push({path:S})};return(T,S)=>{const b=_t("tooltip");return p(),f("div",{role:"button",class:"flex w-full gap-3 px-3 py-4 transition-all duration-300 ease-in-out cursor-pointer",onClick:g},[v(Ft,{name:l.value,src:i.value,size:24,status:r.value,"rounded-full":""},null,8,["name","src","status"]),c("div",dKe,[c("div",uKe,[c("h4",pKe,E(l.value),1),c("div",mKe,[v(j_,{priority:e.conversation.priority||null},null,8,["priority"]),pe((p(),f("div",hKe,[v(Wt,{icon:m.value,class:"flex-shrink-0 text-n-slate-11 size-3"},null,8,["icon"])])),[[b,u.value,void 0,{left:!0}]]),c("span",fKe,E(h.value),1)])]),pe(v(ZWe,{conversation:e.conversation},null,8,["conversation"]),[[pn,_.value]]),pe(v(cKe,{ref_key:"cardMessagePreviewWithMetaRef",ref:a,conversation:e.conversation,"account-labels":e.accountLabels},null,8,["conversation","account-labels"]),[[pn,!_.value]])])])}}},_Ke={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},vKe={key:1,class:"px-6 py-4 divide-y divide-n-strong [&>*:hover]:!border-y-transparent [&>*:hover+*]:!border-t-transparent"},bKe={key:2,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},EKe={__name:"ContactHistory",setup(e){const{t}=Pe(),n=cn(),s=ke("contactConversations/getAllConversationsByContactId"),a=ke("contacts/getContactById"),o=ke("inboxes/getInboxById"),l=ke("labels/getLabels"),i=C(()=>l.value),r=ke("contactConversations/getUIFlags"),d=C(()=>r.value.isFetching),u=C(()=>s.value(n.params.contactId));return(m,h)=>d.value?(p(),f("div",_Ke,[v(qn)])):u.value.length>0?(p(),f("div",vKe,[(p(!0),f(fe,null,Ae(u.value,_=>(p(),V(gKe,{key:_.id,conversation:_,contact:I(a)(_.meta.sender.id),"state-inbox":I(o)(_.inboxId),"account-labels":i.value,class:"rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3"},null,8,["conversation","contact","state-inbox","account-labels"]))),128))])):(p(),f("p",bKe,E(I(t)("CONTACTS_LAYOUT.SIDEBAR.HISTORY.EMPTY_STATE")),1))}},TKe={class:"flex flex-col"},AKe={class:"flex flex-col gap-2"},yKe={class:"flex items-center justify-between h-5 gap-2"},SKe={class:"text-sm text-n-slate-12"},IKe={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-teal-11 bg-n-alpha-2"},CKe={class:"relative flex justify-center gap-2 top-4"},xKe={class:"flex flex-col gap-2"},NKe={class:"flex items-center justify-between h-5 gap-2"},OKe={class:"text-sm text-n-slate-12"},wKe={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-ruby-11 bg-n-alpha-2"},RKe={class:"border border-n-strong h-[60px] gap-2 flex items-center rounded-xl p-3"},$Ke={class:"flex flex-col w-full min-w-0 gap-1"},MKe={class:"text-sm leading-4 truncate text-n-slate-11"},kKe={class:"text-sm leading-4 truncate text-n-slate-11"},LKe={__name:"ContactMergeForm",props:{selectedContact:{type:Object,required:!0},primaryContactId:{type:[Number,null],default:null},primaryContactList:{type:Array,default:()=>[]},isSearching:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:primaryContactId","search"],setup(e,{emit:t}){const n=t,{t:s}=Pe();return(a,o)=>(p(),f("div",TKe,[c("div",AKe,[c("div",yKe,[c("label",SKe,E(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY")),1),c("span",IKe,E(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_HELP_LABEL")),1)]),v(Jo,{id:"inbox","use-api-results":"","model-value":e.primaryContactId,options:e.primaryContactList,"empty-state":e.isSearching?I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.IS_SEARCHING"):I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.EMPTY_STATE"),"search-placeholder":I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_PLACEHOLDER"),placeholder:I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PLACEHOLDER"),"has-error":e.hasError,message:e.errorMessage,class:"[&>div>button]:bg-n-alpha-black2","onUpdate:modelValue":o[0]||(o[0]=l=>n("update:primaryContactId",l)),onSearch:o[1]||(o[1]=l=>n("search",l))},null,8,["model-value","options","empty-state","search-placeholder","placeholder","has-error","message"])]),c("div",CKe,[(p(),f(fe,null,Ae(3,l=>c("div",{key:l,class:"relative w-4 h-8"},o[2]||(o[2]=[c("div",{class:"absolute w-0 h-0 border-l-[4px] border-r-[4px] border-b-[6px] border-l-transparent border-r-transparent border-n-strong ltr:translate-x-[4px] rtl:-translate-x-[4px] -translate-y-[4px]"},null,-1),c("div",{class:"absolute w-[1px] h-full bg-n-strong left-1/2 transform -translate-x-1/2"},null,-1)]))),64))]),c("div",xKe,[c("div",NKe,[c("label",OKe,E(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT")),1),c("span",wKe,E(I(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT_HELP_LABEL")),1)]),c("div",RKe,[v(Ft,{name:e.selectedContact.name||"",src:e.selectedContact.thumbnail||"",size:32,"rounded-full":""},null,8,["name","src"]),c("div",$Ke,[c("span",MKe,E(e.selectedContact.name),1),c("span",kKe,E(e.selectedContact.email),1)])])])]))}},DKe={class:"flex flex-col gap-8 px-6 py-6"},PKe={class:"flex flex-col gap-2"},BKe={class:"text-base text-n-slate-12"},FKe={class:"text-sm text-n-slate-11"},UKe={class:"flex items-center justify-between gap-3"},GKe={__name:"ContactMerge",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList","resetTab"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=yt(),l=cn(),i=os({primaryContactId:null}),r=ke("contacts/getUIFlags"),d=F([]),u=F(!1),h=Lt({primaryContactId:{required:lt}},i),_=C(()=>r.value.isMerging),g=C(()=>{var A;return((A=d.value)==null?void 0:A.map(y=>({value:y.id,label:`(ID: ${y.id}) ${y.name}`})))??[]}),T=ml(async A=>{u.value=!0,d.value=[];try{const{data:{payload:y}}=await wi.search(A);d.value=y.filter(x=>x.id!==n.selectedContact.id),u.value=!1}catch{_e(a("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_ERROR_MESSAGE"))}finally{u.value=!1}},300,!1),S=()=>{i.primaryContactId===null&&s("resetTab"),i.primaryContactId=null,d.value=[],u.value=!1},b=async()=>{if(await h.value.$validate()){nn(xi.MERGED_CONTACTS);try{await o.dispatch("contacts/merge",{childId:n.selectedContact.id||l.params.contactId,parentId:i.primaryContactId}),s("goToContactsList"),_e(a("CONTACTS_LAYOUT.SIDEBAR.MERGE.SUCCESS_MESSAGE")),S()}catch{_e(a("CONTACTS_LAYOUT.SIDEBAR.MERGE.ERROR_MESSAGE"))}}};return(A,y)=>(p(),f("div",DKe,[c("div",PKe,[c("h4",BKe,E(I(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.TITLE")),1),c("p",FKe,E(I(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.DESCRIPTION")),1)]),v(LKe,{"primary-contact-id":i.primaryContactId,"onUpdate:primaryContactId":y[0]||(y[0]=x=>i.primaryContactId=x),"selected-contact":e.selectedContact,"primary-contact-list":g.value,"is-searching":u.value,"has-error":!!I(h).primaryContactId.$error,"error-message":I(h).primaryContactId.$error?I(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_REQUIRED_ERROR"):"",onSearch:I(T)},null,8,["primary-contact-id","selected-contact","primary-contact-list","is-searching","has-error","error-message","onSearch"]),c("div",UKe,[v(ce,{variant:"faded",color:"slate",label:I(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:S},null,8,["label"]),v(ce,{label:I(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CONFIRM"),class:"w-full","is-loading":_.value,disabled:_.value,onClick:b},null,8,["label","is-loading","disabled"])])]))}},VKe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},HKe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},WKe={class:"px-6"},KKe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},tu={__name:"ContactManageView",setup(e){const t=yt(),n=cn(),s=En(),a=ke("contacts/getContactById"),o=ke("contacts/getUIFlags"),l=F("attributes"),i=F(null),r=C(()=>o.value.isFetchingItem),d=C(()=>o.value.isMerging),u=C(()=>o.value.isUpdating),m=C(()=>a.value(n.params.contactId)),h=C(()=>r.value||d.value),{t:_}=Pe(),g=[{key:"ATTRIBUTES",value:"attributes"},{key:"HISTORY",value:"history"},{key:"NOTES",value:"notes"},{key:"MERGE",value:"merge"}],T=C(()=>g.map(D=>({label:_(`CONTACTS_LAYOUT.SIDEBAR.TABS.${D.key}`),value:D.value}))),S=C(()=>g.findIndex(D=>D.value===l.value)),b=()=>{var D;(D=window.history.state)!=null&&D.back||window.history.length>1?s.back():s.push(`/app/accounts/${n.params.accountId}/contacts?page=1`)},A=async()=>{n.params.contactId&&(await t.dispatch("contacts/show",{id:n.params.contactId}),await t.dispatch("contacts/fetchContactableInbox",n.params.contactId))},y=D=>{l.value=D.value},x=()=>{const{contactId:D}=n.params;D&&t.dispatch("contactNotes/get",{contactId:D})},$=()=>{const{contactId:D}=n.params;D&&t.dispatch("contactConversations/get",D)},N=()=>{t.dispatch("attributes/get")},w=async D=>{const H={success:{block:_("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_SUCCESS_MESSAGE"),unblock:_("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_SUCCESS_MESSAGE")},error:{block:_("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_ERROR_MESSAGE"),unblock:_("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_ERROR_MESSAGE")}};try{await t.dispatch("contacts/update",{...m.value,blocked:!D}),_e(D?H.success.unblock:H.success.block)}catch{_e(D?H.error.unblock:H.error.block)}};return pt(()=>{A(),x(),$(),N()}),(D,H)=>(p(),f("div",VKe,[v(gWe,{"button-label":D.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),"selected-contact":m.value,"is-detail-view":"","show-pagination-footer":!1,"is-updating":u.value,onGoToContactsList:b,onToggleBlock:w},{sidebar:K(()=>[c("div",WKe,[v(FWe,{tabs:T.value,"initial-active-tab":S.value,class:"w-full [&>button]:w-full bg-n-alpha-black2",onTabChanged:y},null,8,["tabs","initial-active-tab"])]),r.value?(p(),f("div",KKe,[v(qn)])):(p(),f(fe,{key:1},[l.value==="attributes"?(p(),V(oWe,{key:0,"selected-contact":m.value},null,8,["selected-contact"])):O("",!0),l.value==="notes"?(p(),V(KWe,{key:1})):O("",!0),l.value==="history"?(p(),V(EKe,{key:2})):O("",!0),l.value==="merge"?(p(),V(GKe,{key:3,ref_key:"contactMergeRef",ref:i,"selected-contact":m.value,onGoToContactsList:b,onResetTab:H[0]||(H[0]=B=>y(g[0]))},null,8,["selected-contact"])):O("",!0)],64))]),default:K(()=>[h.value?(p(),f("div",HKe,[v(qn)])):m.value?(p(),V(DWe,{key:1,"selected-contact":m.value,onGoToContactsList:b},null,8,["selected-contact"])):O("",!0)]),_:1},8,["button-label","selected-contact","is-updating"])]))}},sl={featureFlag:Mt.CRM,permissions:["administrator","agent","contact_manage"]},zKe=[{path:Bt("accounts/:accountId/contacts"),component:oc,meta:sl,children:[{path:"",name:"contacts_dashboard_index",component:oc,meta:sl},{path:"segments/:segmentId",name:"contacts_dashboard_segments_index",component:oc,meta:sl},{path:"labels/:label",name:"contacts_dashboard_labels_index",component:oc,meta:sl},{path:"active",name:"contacts_dashboard_active",component:oc,meta:sl}]},{path:Bt("accounts/:accountId/contacts/:contactId"),component:tu,meta:sl,children:[{path:"",name:"contacts_edit",component:tu,meta:sl},{path:"segments/:segmentId",name:"contacts_edit_segment",component:tu,meta:sl},{path:"labels/:label",name:"contacts_edit_label",component:tu,meta:sl}]}],jKe={components:{Avatar:Ft,Spinner:Zs,EmptyState:Lr,NextButton:ce},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},onClickNotification:{type:Function,default:()=>{}},onMarkAllDoneClick:{type:Function,default:()=>{}}},computed:{...St({notificationMetadata:"notifications/getMeta"}),showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{dynamicTime:Ds}},YKe={class:"flex-grow flex-shrink h-full px-4 py-8 overflow-hidden bg-n-background"},XKe={class:"flex w-full items-center justify-between gap-2 mb-4"},qKe={class:"text-xl font-medium text-n-slate-12"},ZKe={class:"notifications-table overflow-auto"},QKe=["onClick"],JKe={class:"p-2.5 text-n-slate-12"},eze={class:"overflow-hidden flex-view notification-contant--wrap whitespace-nowrap text-ellipsis"},tze={class:"notification--title"},nze={class:"overflow-hidden notification--message-title whitespace-nowrap text-ellipsis"},sze={class:"text-right"},aze={class:"notification--type"},oze={class:"thumbnail--column"},lze={class:"text-right timestamp--column ltr:mr-2 rtl:ml-2"},ize={class:"notification--created-at"},rze={key:0,class:"notification--unread-indicator"},cze={key:1,class:"notifications--loader"};function dze(e,t,n,s,a,o){const l=z("NextButton"),i=z("Avatar"),r=z("EmptyState"),d=z("Spinner");return p(),f("section",YKe,[c("div",XKe,[c("h6",qKe,E(e.$t("NOTIFICATIONS_PAGE.HEADER")),1),e.notificationMetadata.unreadCount?(p(),V(l,{key:0,type:"submit",sm:"",label:e.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),"is-loading":n.isUpdating,onClick:n.onMarkAllDoneClick},null,8,["label","is-loading","onClick"])):O("",!0)]),c("table",ZKe,[pe(c("tbody",null,[(p(!0),f(fe,null,Ae(n.notifications,u=>(p(),f("tr",{key:u.id,class:re([{"is-unread":u.read_at===null},"border-b border-n-weak"]),onClick:()=>n.onClickNotification(u)},[c("td",JKe,[c("div",eze,[c("h5",tze,E(`#${u.primary_actor?u.primary_actor.id:e.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),c("span",nze,E(u.push_message_title),1)])]),c("td",sze,[c("span",aze,E(e.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${u.notification_type}`)),1)]),c("td",oze,[u.primary_actor.meta.assignee?(p(),V(i,{key:0,src:u.primary_actor.meta.assignee.thumbnail,size:28,name:u.primary_actor.meta.assignee.name,"rounded-full":""},null,8,["src","name"])):O("",!0)]),c("td",null,[c("div",lze,[c("span",ize,E(o.dynamicTime(u.last_activity_at)),1)])]),c("td",null,[u.read_at?O("",!0):(p(),f("div",rze))])],10,QKe))),128))],512),[[pn,!n.isLoading]])]),o.showEmptyResult?(p(),V(r,{key:0,title:e.$t("NOTIFICATIONS_PAGE.LIST.404")},null,8,["title"])):O("",!0),n.isLoading?(p(),f("div",cze,[v(d),c("span",null,E(e.$t("NOTIFICATIONS_PAGE.LIST.LOADING_MESSAGE")),1)])):O("",!0)])}const uze=Fe(jKe,[["render",dze],["__scopeId","data-v-577256f2"]]),pze={components:{NotificationTable:uze,TableFooter:e_},computed:{...St({accountId:"getCurrentAccountId",meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"})},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(e){window.history.pushState({},null,`${this.$route.path}?page=${e}`),this.$store.dispatch("notifications/get",{page:e})},openConversation(e){const{primary_actor_id:t,primary_actor_type:n,primary_actor:{id:s},notification_type:a}=e;nn(Tu.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:a}),this.$store.dispatch("notifications/read",{id:e.id,primaryActorId:t,primaryActorType:n,unreadCount:this.meta.unreadCount}),this.$router.push(`/app/accounts/${this.accountId}/conversations/${s}`)},onMarkAllDoneClick(){nn(Tu.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")}}},mze={class:"h-full overflow-y-auto"},hze={class:"flex flex-col h-full"};function fze(e,t,n,s,a,o){const l=z("NotificationTable"),i=z("TableFooter");return p(),f("div",mze,[c("div",hze,[v(l,{notifications:e.records,"is-loading":e.uiFlags.isFetching,"is-updating":e.uiFlags.isUpdating,"on-click-notification":o.openConversation,"on-mark-all-done-click":o.onMarkAllDoneClick},null,8,["notifications","is-loading","is-updating","on-click-notification","on-mark-all-done-click"]),v(i,{class:"border-t border-n-weak","current-page":Number(e.meta.currentPage),"total-count":e.meta.count,"page-size":15,onPageChange:o.onPageChange},null,8,["current-page","total-count","onPageChange"])])])}const gze=Fe(pze,[["render",fze]]),_ze=[{path:Bt("accounts/:accountId/notifications"),component:sd,props:{headerTitle:"",icon:"",showNewButton:!1},children:[{path:"",name:"notifications_index",component:gze,meta:{permissions:["administrator","agent","custom_role"]}}]}],vze={CONVERSATION_MENTION:["i-lucide-at-sign","text-n-blue-text"],CONVERSATION_ASSIGNMENT:["i-lucide-chevrons-right","text-n-blue-text"],CONVERSATION_CREATION:["i-lucide-mail-plus","text-n-blue-text"],PARTICIPATING_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],ASSIGNED_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],SLA_MISSED_FIRST_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_NEXT_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_RESOLUTION:["i-lucide-heart-crack","text-n-ruby-11"]},bze={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px] outline-1 outline outline-n-weak/50"},Eze={__name:"InboxContextMenu",props:{contextMenuPosition:{type:Object,default:()=>({})},menuItems:{type:Array,default:()=>[]}},emits:["close","selectAction"],setup(e,{emit:t}){const n=t,s=()=>{n("close")},a=o=>{n("selectAction",o),s()};return(o,l)=>(p(),V(Bp,{x:e.contextMenuPosition.x,y:e.contextMenuPosition.y,onClose:s},{default:K(()=>[c("div",bze,[(p(!0),f(fe,null,Ae(e.menuItems,i=>(p(),V(k_,{key:i.key,option:i,variant:"icon",class:"!w-48",onClick:ze(r=>a(i.key),["stop"])},null,8,["option","onClick"]))),128))])]),_:1},8,["x","y"]))}},Tze={class:"flex items-start gap-2"},Aze={class:"mb-0 line-clamp-2"},yze={class:"flex items-center justify-between h-6 gap-2"},Sze={class:"flex items-center flex-1 min-w-0 gap-1"},Ize={key:0,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},Cze={key:1,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},xze={class:"flex items-center flex-shrink-0 gap-2"},Nze={key:0,class:"w-px h-3 rounded-sm bg-n-slate-4"},Oze={key:2,class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-4"},wze={class:"text-xs text-n-slate-10"},Rze={__name:"InboxCard",props:{inboxItem:{type:Object,default:()=>({})},stateInbox:{type:Object,default:()=>({})}},emits:["click","contextMenuOpen","contextMenuClose","markNotificationAsRead","markNotificationAsUnRead","deleteNotification"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(!1),l=F({x:null,y:null}),i=F(null),r={emphasis:"text-sm font-medium text-n-slate-11",emphasisUnread:"text-sm font-medium text-n-slate-12",normal:"text-sm font-normal text-n-slate-11",normalUnread:"text-sm text-n-slate-12"},d=C(()=>{var B;return(B=n.inboxItem)==null?void 0:B.primaryActor}),u=C(()=>{var B;return(B=d.value)==null?void 0:B.meta}),m=C(()=>{var B;return(B=u.value)==null?void 0:B.sender}),h=C(()=>{var B;return!((B=n.inboxItem)!=null&&B.readAt)}),_=C(()=>n.stateInbox),g=C(()=>{const{channelType:B,medium:k}=_.value;return Ir(B,k)}),T=C(()=>{var B,k;return((B=i.value)==null?void 0:B.hasSlaThreshold)&&((k=d.value)==null?void 0:k.slaPolicyId)}),S=C(()=>{var k;const B=(k=n.inboxItem)==null?void 0:k.lastActivityAt;return B?wc(Ds(B)):""}),b=C(()=>[{key:h.value?"mark_as_read":"mark_as_unread",icon:h.value?"mail":"mail-unread",label:a(`INBOX.MENU_ITEM.MARK_AS_${h.value?"READ":"UNREAD"}`)},{key:"delete",icon:"delete",label:a("INBOX.MENU_ITEM.DELETE")}]),A=C(()=>({emphasis:h.value?r.emphasisUnread:r.emphasis,normal:h.value?r.normalUnread:r.normal})),y=B=>B.startsWith(": ")?B.slice(2):B.replace(/^([^:]+):/g,(k,U)=>`<span class="${A.value.emphasis}">${U}:</span>`),x=C(()=>{var k;const B=`<span class="${A.value.normal}">${y(((k=n.inboxItem)==null?void 0:k.pushMessageBody)||"")}</span>`;return h.value?`<span class="inline-flex flex-shrink-0 w-2 h-2 mb-px rounded-full bg-n-iris-10 ltr:mr-1 rtl:ml-1"></span> ${B}`:B}),$=C(()=>{var G,L;const B=((L=(G=n.inboxItem)==null?void 0:G.notificationType)==null?void 0:L.toUpperCase())||"",[k="",U="text-n-blue-text"]=vze[B]||[];return{text:B?a(`INBOX.TYPES_NEXT.${B}`):"",icon:k,color:U}}),N=C(()=>{const{snoozedUntil:B}=n.inboxItem;return B?F0e(Ds(B0e(B))):null}),w=C(()=>{var B,k;return(k=(B=n.inboxItem)==null?void 0:B.meta)==null?void 0:k.lastSnoozedAt}),D=C(()=>w.value?a("INBOX.TYPES_NEXT.SNOOZED_ENDS"):a("INBOX.TYPES_NEXT.SNOOZED_UNTIL",{time:wc(N.value)})),H={close:()=>{o.value=!1,l.value={x:null,y:null},s("contextMenuClose")},open:B=>{B.preventDefault(),l.value={x:B.pageX||B.clientX,y:B.pageY||B.clientY},o.value=!0,s("contextMenuOpen")},handle:B=>{var U;const k={mark_as_read:()=>s("markNotificationAsRead",n.inboxItem),mark_as_unread:()=>s("markNotificationAsUnRead",n.inboxItem),delete:()=>s("deleteNotification",n.inboxItem)};(U=k[B])==null||U.call(k)}};return tg(H.close),(B,k)=>{var L,M,R;const U=_t("dompurify-html"),G=_t("tooltip");return p(),f("div",{role:"button",class:"flex flex-col w-full gap-1 p-3 transition-all duration-300 ease-in-out cursor-pointer",onContextmenu:k[0]||(k[0]=P=>H.open(P)),onClick:k[1]||(k[1]=P=>s("click"))},[c("div",Tze,[v(Ft,{name:m.value.name,src:m.value.thumbnail,size:20,"rounded-full":"",class:"mt-1"},null,8,["name","src"]),pe(c("p",Aze,null,512),[[U,x.value]])]),c("div",yze,[c("div",Sze,[N.value||w.value?(p(),f("div",Ize,[v(Wt,{icon:w.value?"i-lucide-alarm-clock-off":"i-lucide-alarm-clock-plus",class:re(["flex-shrink-0 size-4",h.value?"text-n-blue-text":"text-n-slate-11"])},null,8,["icon","class"]),c("span",{class:re(["text-xs font-medium truncate",h.value?"text-n-blue-text":"text-n-slate-11"])},E(D.value),3)])):$.value.text?(p(),f("div",Cze,[v(Wt,{icon:$.value.icon,class:re([h.value?$.value.color:"text-n-slate-11","flex-shrink-0 size-4"])},null,8,["icon","class"]),c("span",{class:re(["text-xs font-medium truncate",h.value?$.value.color:"text-n-slate-11"])},E($.value.text),3)])):O("",!0)]),c("div",xze,[pe(v(l2,{ref_key:"slaCardLabel",ref:i,conversation:d.value,class:re(["[&>span]:text-xs",!h.value&&"[&>span]:text-n-slate-11 [&>div>svg]:fill-n-slate-11"])},null,8,["conversation","class"]),[[pn,T.value]]),T.value?(p(),f("div",Nze)):O("",!0),(L=d.value)!=null&&L.priority?(p(),V(j_,{key:1,priority:(M=d.value)==null?void 0:M.priority,class:"[&>svg]:size-4"},null,8,["priority"])):O("",!0),g.value?pe((p(),f("div",Oze,[v(Wt,{icon:g.value,class:"flex-shrink-0 text-n-slate-11 size-2.5"},null,8,["icon"])])),[[G,(R=_.value)==null?void 0:R.name,void 0,{left:!0}]]):O("",!0),c("span",wze,E(S.value),1)])]),o.value?(p(),V(Eze,{key:0,"context-menu-position":l.value,"menu-items":b.value,onClose:H.close,onSelectAction:H.handle},null,8,["context-menu-position","menu-items","onClose","onSelectAction"])):O("",!0)],32)}}},$ze={role:"button",class:"flex items-center w-full h-8 px-2 py-1 rounded-md cursor-pointer hover:text-n-blue-text min-w-0"},Mze={class:"text-xs font-medium truncate text-n-slate-12"},kze={__name:"MenuItem",props:{label:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",$ze,[c("span",Mze,E(e.label),1)]))}},Lze={components:{MenuItem:kze},emits:["optionClick"],data(){return{menuItems:[{key:"mark_all_read",label:this.$t("INBOX.MENU_ITEM.MARK_ALL_READ")},{key:"delete_all",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL")},{key:"delete_all_read",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL_READ")}]}},methods:{onClick(e){this.$emit("optionClick",e)}}},Dze={class:"z-50 flex flex-col max-w-64 min-w-40 gap-1 bg-n-alpha-3 backdrop-blur-[100px] divide-y py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl divide-n-weak dark:divide-n-strong"},Pze={class:"flex flex-col"};function Bze(e,t,n,s,a,o){const l=z("MenuItem");return p(),f("div",Dze,[c("div",Pze,[(p(!0),f(fe,null,Ae(a.menuItems,i=>(p(),V(l,{key:i.key,label:i.label,onClick:ze(r=>o.onClick(i.key),["stop"])},null,8,["label","onClick"]))),128))])])}const Fze=Fe(Lze,[["render",Bze]]),Uze={components:{NextButton:ce},emits:["filter"],setup(){const{uiSettings:e,updateUISettings:t}=Sn();return{uiSettings:e,updateUISettings:t}},data(){return{showSortMenu:!1,displayOptions:[{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.SNOOZED"),key:Pt.INBOX_DISPLAY_BY.SNOOZED,selected:!1,type:Pt.INBOX_FILTER_TYPE.STATUS},{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.READ"),key:Pt.INBOX_DISPLAY_BY.READ,selected:!1,type:Pt.INBOX_FILTER_TYPE.TYPE}],sortOptions:[{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.NEWEST"),key:Pt.INBOX_SORT_BY.NEWEST,type:Pt.INBOX_FILTER_TYPE.SORT_ORDER},{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.OLDEST"),key:Pt.INBOX_SORT_BY.OLDEST,type:Pt.INBOX_FILTER_TYPE.SORT_ORDER}],activeSort:Pt.INBOX_SORT_BY.NEWEST,activeDisplayFilter:{status:"",type:""}}},computed:{activeSortOption(){var e;return((e=this.sortOptions.find(t=>t.key===this.activeSort))==null?void 0:e.name)||""}},mounted(){this.setSavedFilter()},methods:{updateDisplayOption(e){this.displayOptions.forEach(t=>{t.key===e.key&&(t.selected=!e.selected,this.activeDisplayFilter[t.type]=t.selected?t.key:"",this.saveSelectedDisplayFilter(),this.$emit("filter",e))})},openSortMenu(){this.showSortMenu=!this.showSortMenu},onSortOptionClick(e){this.activeSort=e.key,this.showSortMenu=!1,this.saveSelectedDisplayFilter(),this.$emit("filter",e)},saveSelectedDisplayFilter(){this.updateUISettings({inbox_filter_by:{...this.activeDisplayFilter,sort_by:this.activeSort||Pt.INBOX_SORT_BY.NEWEST}})},setSavedFilter(){const{inbox_filter_by:e={}}=this.uiSettings,{status:t,type:n,sort_by:s}=e;this.activeSort=s||Pt.INBOX_SORT_BY.NEWEST,this.displayOptions.forEach(a=>{a.selected=a.type===Pt.INBOX_FILTER_TYPE.STATUS?a.key===t:a.key===n,this.activeDisplayFilter[a.type]=a.selected?a.key:""})}}},Gze={class:"flex flex-col bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container shadow-lg z-50 max-w-64 min-w-[170px] w-fit rounded-xl divide-y divide-n-weak dark:divide-n-strong"},Vze={class:"flex items-center gap-2 justify-between p-3 rounded-t-lg h-11"},Hze={class:"flex gap-1.5 min-w-0"},Wze={class:"text-xs font-medium text-n-slate-12 truncate min-w-0"},Kze={class:"relative"},zze={key:0,class:"absolute flex flex-col gap-0.5 bg-n-alpha-3 backdrop-blur-[100px] z-60 rounded-lg p-0.5 w-fit min-w-20 max-w-32 top-px outline outline-1 outline-n-container dark:outline-n-strong"},jze=["onClick"],Yze={key:0,class:"i-lucide-check size-2.5 flex-shrink-0 text-n-blue-text"},Xze={class:"px-3 py-4 text-xs font-medium text-n-slate-11"},qze={class:"flex flex-col divide-y divide-n-weak dark:divide-n-strong"},Zze=["id","name","checked","onChange"],Qze=["for"];function Jze(e,t,n,s,a,o){const l=z("NextButton"),i=_t("on-clickaway");return p(),f("div",Gze,[c("div",Vze,[c("div",Hze,[t[0]||(t[0]=c("span",{class:"i-lucide-arrow-down-up size-3.5 text-n-slate-12"},null,-1)),c("span",Wze,E(e.$t("INBOX.DISPLAY_MENU.SORT")),1)]),pe((p(),f("div",Kze,[v(l,{label:o.activeSortOption,icon:"i-lucide-chevron-down",slate:"","trailing-icon":"",xs:"",outline:"",class:"w-fit min-w-20 max-w-32",onClick:o.openSortMenu},null,8,["label","onClick"]),a.showSortMenu?(p(),f("div",zze,[(p(!0),f(fe,null,Ae(a.sortOptions,r=>(p(),f("div",{key:r.key,role:"button",class:re(["flex rounded-md h-5 w-full items-center justify-between px-1.5 py-0.5 gap-2 whitespace-nowrap",{"bg-n-brand/10 dark:bg-n-brand/10":a.activeSort===r.key}]),onClick:ze(d=>o.onSortOptionClick(r),["stop"])},[c("span",{class:re(["text-xs font-medium hover:text-n-brand truncate min-w-0 dark:hover:text-n-brand",{"text-n-blue-text dark:text-n-blue-text":a.activeSort===r.key,"text-n-slate-11":a.activeSort!==r.key}])},E(r.name),3),a.activeSort===r.key?(p(),f("span",Yze)):O("",!0)],10,jze))),128))])):O("",!0)])),[[i,()=>a.showSortMenu=!1]])]),c("div",null,[c("span",Xze,E(e.$t("INBOX.DISPLAY_MENU.DISPLAY")),1),c("div",qze,[(p(!0),f(fe,null,Ae(a.displayOptions,r=>(p(),f("div",{key:r.key,class:"flex items-center px-3 py-2 gap-1.5 h-9"},[c("input",{id:r.key,type:"checkbox",name:r.key,checked:r.selected,class:"m-0 border-[1.5px] shadow border-n-weak appearance-none rounded-[4px] w-4 h-4 dark:bg-n-background focus:ring-1 focus:ring-n-weak dark:focus:ring-n-strong checked:bg-n-brand dark:checked:bg-n-brand after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center checked:border-t checked:border-n-blue-10 checked:border-b-0 checked:border-r-0 checked:border-l-0 after:text-center after:text-xs after:font-bold after:relative after:-top-[1.5px]",onChange:d=>o.updateDisplayOption(r)},null,40,Zze),c("label",{for:r.key,class:"text-xs font-medium text-n-slate-12 !ml-0 !mr-0 dark:text-n-slate-12"},E(r.name),9,Qze)]))),128))])])])}const eje=Fe(Uze,[["render",Jze]]),tje={components:{NextButton:ce,InboxOptionMenu:Fze,InboxDisplayMenu:eje},props:{isContextMenuOpen:{type:Boolean,default:!1}},emits:["redirect","filter"],data(){return{showInboxDisplayMenu:!1,showInboxOptionMenu:!1}},watch:{isContextMenuOpen:{handler(e){e&&(this.showInboxDisplayMenu=!1,this.showInboxOptionMenu=!1)},immediate:!0}},methods:{markAllRead(){nn(hi.MARK_ALL_NOTIFICATIONS_AS_READ),this.$store.dispatch("notifications/readAll").then(()=>{_e(this.$t("INBOX.ALERTS.MARK_ALL_READ"))})},deleteAll(){this.$store.dispatch("notifications/deleteAll").then(()=>{_e(this.$t("INBOX.ALERTS.DELETE_ALL"))})},deleteAllRead(){this.$store.dispatch("notifications/deleteAllRead").then(()=>{_e(this.$t("INBOX.ALERTS.DELETE_ALL_READ"))})},openInboxDisplayMenu(){this.showInboxDisplayMenu=!this.showInboxDisplayMenu},openInboxOptionsMenu(){this.showInboxOptionMenu=!this.showInboxOptionMenu},onInboxOptionMenuClick(e){const n={mark_all_read:()=>this.markAllRead(),delete_all:()=>this.deleteAll(),delete_all_read:()=>this.deleteAllRead()}[e];n&&n(),this.$emit("redirect")},onFilterChange(e){this.$emit("filter",e),this.showInboxDisplayMenu=!1,this.$emit("redirect")}}},nje={class:"flex items-center justify-between w-full gap-1 h-12 px-3"},sje={class:"flex items-center gap-2 min-w-0 flex-1"},aje={class:"min-w-0 text-base font-medium truncate text-n-slate-12"},oje={class:"relative"},lje={class:"relative flex items-center gap-1"};function ije(e,t,n,s,a,o){const l=z("NextButton"),i=z("InboxDisplayMenu"),r=z("InboxOptionMenu"),d=_t("on-clickaway");return p(),f("div",nje,[c("div",sje,[c("h1",aje,E(e.$t("INBOX.LIST.TITLE")),1),c("div",oje,[v(l,{label:e.$t("INBOX.LIST.DISPLAY_DROPDOWN"),icon:"i-lucide-chevron-down","trailing-icon":"",slate:"",xs:"",faded:"",onClick:o.openInboxDisplayMenu},null,8,["label","onClick"]),a.showInboxDisplayMenu?pe((p(),V(i,{key:0,class:"absolute mt-1 top-full ltr:left-0 rtl:right-0",onFilter:o.onFilterChange},null,8,["onFilter"])),[[d,o.openInboxDisplayMenu]]):O("",!0)])]),c("div",lje,[v(l,{icon:"i-lucide-sliders-vertical",slate:"",xs:"",faded:"",onClick:o.openInboxOptionsMenu},null,8,["onClick"]),a.showInboxOptionMenu?pe((p(),V(r,{key:0,class:"absolute top-full mt-1 ltr:right-0 ltr:lg:right-[unset] rtl:left-0 rtl:lg:left-[unset]",onOptionClick:o.onInboxOptionMenuClick},null,8,["onOptionClick"])),[[d,o.openInboxOptionsMenu]]):O("",!0)])])}const rje=Fe(tje,[["render",ije]]),cje={class:"flex w-full h-full bg-n-solid-1"},dje={key:0,class:"flex justify-center my-4"},uje={key:1,class:"p-4 text-sm font-medium text-center text-n-slate-10"},pje={__name:"InboxList",setup(e){const{t}=Pe(),n=cn(),s=En(),a=yt(),{uiSettings:o}=Sn(),l=F(null),i=F(1),r=F(""),d=F(""),u=F(Pt.INBOX_SORT_BY.NEWEST),m=F(!1),h=C(()=>({root:l.value,rootMargin:"100px 0px 100px 0px"})),_=ke("notifications/getMeta"),g=ke("notifications/getUIFlags"),T=ke("notifications/getFilteredNotificationsV4"),S=ke("inboxes/getInboxById"),b=C(()=>Number(n.params.id)),A=C(()=>({page:i.value,status:r.value,type:d.value,sortOrder:u.value})),y=C(()=>T.value(A.value)),x=C(()=>g.value.isAllNotificationsLoaded&&!g.value.isFetching),$=C(()=>!g.value.isFetching&&!y.value.length),N=P=>S.value(P),w=()=>{i.value=1,a.dispatch("notifications/clear");const P=A.value;a.dispatch("notifications/index",P)},D=()=>{var W;const P=(W=l.value)==null?void 0:W.querySelector(".inbox-card.active");P==null||P.scrollIntoView({block:"center",behavior:"smooth"})},H=()=>{n.name!=="inbox_view"&&s.replace({name:"inbox_view"})},B=()=>{g.value.isAllNotificationsLoaded||(i.value+=1,a.dispatch("notifications/index",{page:i.value,status:r.value,type:d.value,sortOrder:u.value}))},k=async P=>{nn(hi.MARK_NOTIFICATION_AS_READ);const{id:W,primary_actor_id:Q,primary_actor_type:Z}=P;try{await a.dispatch("notifications/read",{id:W,primaryActorId:Q,primaryActorType:Z,unreadCount:_.value.unreadCount}),_e(t("INBOX.ALERTS.MARK_AS_READ")),a.dispatch("notifications/unReadCount")}catch{}},U=async P=>{nn(hi.MARK_NOTIFICATION_AS_UNREAD),H();const{id:W}=P;try{await a.dispatch("notifications/unread",{id:W}),_e(t("INBOX.ALERTS.MARK_AS_UNREAD")),a.dispatch("notifications/unReadCount")}catch{}},G=async P=>{nn(hi.DELETE_NOTIFICATION),H();try{await a.dispatch("notifications/delete",{notification:P,unread_count:_.value.unreadCount,count:_.value.count}),_e(t("INBOX.ALERTS.DELETE"))}catch{}},L=P=>{const{STATUS:W,TYPE:Q,SORT_ORDER:Z}=Pt.INBOX_FILTER_TYPE;P.type===W&&(r.value=P.selected?P.key:""),P.type===Q&&(d.value=P.selected?P.key:""),P.type===Z&&(u.value=P.key),w()},M=()=>{const{inbox_filter_by:P={}}=o.value,{status:W,type:Q,sort_by:Z}=P;r.value=W,d.value=Q,u.value=Z||Pt.INBOX_SORT_BY.NEWEST,a.dispatch("notifications/setNotificationFilters",A.value)},R=async P=>{const{id:W,primaryActorId:Q,primaryActorType:Z,primaryActor:{inboxId:j,id:X},notificationType:q}=P;if(n.params.id!==String(X)){nn(hi.OPEN_CONVERSATION_VIA_INBOX,{notificationType:q});try{await a.dispatch("notifications/read",{id:W,primaryActorId:Q,primaryActorType:Z,unreadCount:_.value.unreadCount}),a.dispatch("notifications/unReadCount"),s.push({name:"inbox_view_conversation",params:{inboxId:j,type:"conversation",id:X}})}catch{}}};return ot(A,(P,W)=>{P!==W&&a.dispatch("notifications/updateNotificationFilters",P)},{deep:!0}),ot(b,()=>{jt(D)}),pt(()=>{D(),M(),w()}),(P,W)=>{const Q=z("router-view");return p(),f("section",cje,[c("div",{class:re(["flex flex-col h-full w-full lg:min-w-[340px] lg:max-w-[340px] ltr:border-r rtl:border-l border-n-weak",b.value?"hidden xl:flex":"flex"])},[v(rje,{"is-context-menu-open":m.value,onFilter:L,onRedirect:H},null,8,["is-context-menu-open"]),c("div",{ref_key:"notificationList",ref:l,class:"flex flex-col gap-0.5 w-full h-[calc(100%-56px)] pb-4 overflow-x-hidden px-2 overflow-y-auto divide-y divide-n-weak [&>*:hover]:!border-y-transparent [&>*.active]:!border-y-transparent [&>*:hover+*]:!border-t-transparent [&>*.active+*]:!border-t-transparent"},[(p(!0),f(fe,null,Ae(y.value,Z=>{var j,X;return p(),V(Rze,{key:Z.id,"inbox-item":Z,"state-inbox":N((j=Z.primaryActor)==null?void 0:j.inboxId),class:re(["inbox-card rounded-none hover:rounded-lg hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3",b.value===((X=Z.primaryActor)==null?void 0:X.id)?"bg-n-alpha-1 dark:bg-n-alpha-3 rounded-lg active":""]),onMarkNotificationAsRead:k,onMarkNotificationAsUnRead:U,onDeleteNotification:G,onContextMenuOpen:W[0]||(W[0]=q=>m.value=!0),onContextMenuClose:W[1]||(W[1]=q=>m.value=!1),onClick:q=>R(Z)},null,8,["inbox-item","state-inbox","class","onClick"])}),128)),I(g).isFetching?(p(),f("div",dje,[v(qn,{class:"text-n-brand"})])):O("",!0),$.value?(p(),f("p",uje,E(P.$t("INBOX.LIST.NO_NOTIFICATIONS")),1)):O("",!0),!x.value&&!I(g).isFetching?(p(),V(JS,{key:2,options:h.value,onObserved:B},null,8,["options"])):O("",!0)],512)],2),v(Q),v(BI)])}}},mje={components:{NextButton:ce},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0}},emits:["prev","next"],computed:{isUpDisabled(){return this.currentIndex===1},isDownDisabled(){return this.currentIndex===this.totalLength||this.totalLength<=1}},methods:{handleUpClick(){this.currentIndex>1&&this.$emit("prev")},handleDownClick(){this.currentIndex<this.totalLength&&this.$emit("next")}}},hje={class:"flex gap-2 items-center"},fje={class:"flex gap-1 items-center"},gje={class:"flex items-center gap-1 whitespace-nowrap"},_je={class:"text-sm font-medium text-n-slate-12 tabular-nums"},vje={key:0,class:"text-sm text-n-slate-9 relative -top-px"},bje={key:1,class:"text-sm text-n-slate-9 tabular-nums"};function Eje(e,t,n,s,a,o){const l=z("NextButton");return p(),f("div",hje,[c("div",fje,[v(l,{icon:"i-lucide-chevron-up",xs:"",slate:"",faded:"",disabled:o.isUpDisabled,onClick:o.handleUpClick},null,8,["disabled","onClick"]),v(l,{icon:"i-lucide-chevron-down",xs:"",slate:"",faded:"",disabled:o.isDownDisabled,onClick:o.handleDownClick},null,8,["disabled","onClick"])]),c("div",gje,[c("span",_je,E(n.totalLength<=1?"1":n.currentIndex),1),n.totalLength>1?(p(),f("span",vje," / ")):O("",!0),n.totalLength>1?(p(),f("span",bje,E(n.totalLength),1)):O("",!0)])])}const Tje=Fe(mje,[["render",Eje]]),Aje={components:{PaginationButton:Tje,NextButton:ce,BackButton:ki,CustomSnoozeModal:D_},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0},activeNotification:{type:Object,default:null}},emits:["next","prev"],data(){return{showCustomSnoozeModal:!1}},computed:{...St({meta:"notifications/getMeta"})},mounted(){It.on(U0,this.onCmdSnoozeNotification)},unmounted(){It.off(U0,this.onCmdSnoozeNotification)},methods:{openSnoozeNotificationModal(){document.querySelector("ninja-keys").open({parent:"snooze_notification"})},hideCustomSnoozeModal(){this.showCustomSnoozeModal=!1},async snoozeNotification(e){var t;try{await this.$store.dispatch("notifications/snooze",{id:(t=this.activeNotification)==null?void 0:t.id,snoozedUntil:e}),_e(this.$t("INBOX.ALERTS.SNOOZE"))}catch{}},onCmdSnoozeNotification(e){if(e===Pt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME)this.showCustomSnoozeModal=!0;else{const t=L_(e)||null;this.snoozeNotification(t)}},scheduleCustomSnooze(e){if(this.showCustomSnoozeModal=!1,e){const t=Go(e)||null;this.snoozeNotification(t)}},deleteNotification(){nn(hi.DELETE_NOTIFICATION),this.$store.dispatch("notifications/delete",{notification:this.activeNotification,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{_e(this.$t("INBOX.ALERTS.DELETE"))}),this.$router.replace({name:"inbox_view"})},onClickNext(){this.$emit("next")},onClickPrev(){this.$emit("prev")},onClickGoToInboxList(){this.$router.replace({name:"inbox_view"})}}},yje={class:"flex items-center justify-between w-full gap-2 border-b px-3 h-12 rtl:border-r border-n-weak flex-shrink-0"},Sje={class:"flex items-center gap-4"},Ije={class:"flex items-center gap-2"};function Cje(e,t,n,s,a,o){const l=z("BackButton"),i=z("PaginationButton"),r=z("NextButton"),d=z("CustomSnoozeModal"),u=z("woot-modal");return p(),f("div",yje,[c("div",Sje,[v(l,{compact:"","button-label":e.$t("INBOX.ACTION_HEADER.BACK"),class:"xl:hidden flex"},null,8,["button-label"]),n.totalLength>1?(p(),V(i,{key:0,"total-length":n.totalLength,"current-index":n.currentIndex+1,onNext:o.onClickNext,onPrev:o.onClickPrev},null,8,["total-length","current-index","onNext","onPrev"])):O("",!0)]),c("div",Ije,[v(r,{label:e.$t("INBOX.ACTION_HEADER.SNOOZE"),icon:"i-lucide-bell-minus",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:o.openSnoozeNotificationModal},null,8,["label","onClick"]),v(r,{label:e.$t("INBOX.ACTION_HEADER.DELETE"),icon:"i-lucide-trash-2",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:o.deleteNotification},null,8,["label","onClick"])]),v(u,{show:a.showCustomSnoozeModal,"onUpdate:show":t[0]||(t[0]=m=>a.showCustomSnoozeModal=m),"on-close":o.hideCustomSnoozeModal},{default:K(()=>[v(d,{onClose:o.hideCustomSnoozeModal,onChooseTime:o.scheduleCustomSnooze},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const xje=Fe(Aje,[["render",Cje]]),Nje={components:{Spinner:qn},props:{emptyStateMessage:{type:String,default:""}},computed:{...St({uiFlags:"notifications/getUIFlags"}),emptyMessage(){return this.emptyStateMessage?this.emptyStateMessage:this.$t("INBOX.LIST.NOTE")}}},Oje={class:"items-center justify-center hidden w-full h-full text-center bg-n-background lg:flex"},wje={key:0,class:"flex justify-center my-4"},Rje={key:1,class:"flex flex-col items-center gap-2"},$je={class:"text-sm font-medium text-n-slate-11"};function Mje(e,t,n,s,a,o){const l=z("Spinner"),i=z("fluent-icon");return p(),f("div",Oje,[e.uiFlags.isFetching?(p(),f("div",wje,[v(l,{class:"text-n-brand"})])):(p(),f("div",Rje,[v(i,{icon:"mail-inbox",size:"40",class:"text-n-slate-11"}),c("span",$je,E(o.emptyMessage),1)]))])}const i2=Fe(Nje,[["render",Mje]]),kje={class:"h-full w-full flex-1"},Lje={key:0,class:"flex w-full h-full"},Dje={key:1,class:"flex flex-col w-full h-full"},Pje={key:0,class:"flex items-center flex-1 my-4 justify-center bg-n-solid-1"},Bje={key:1,class:"flex h-[calc(100%-48px)] min-w-0"},Fje={__name:"InboxView",setup(e){const t=cn(),n=En(),s=yt(),{uiSettings:a}=Sn(),o=F(!1),l=ke("notifications/getFilteredNotifications"),i=ke("getSelectedChat"),r=ke("getConversationById"),d=ke("notifications/getUIFlags"),u=ke("notifications/getMeta"),m=C(()=>Number(t.params.inboxId)),h=C(()=>Number(t.params.id)),_=C(()=>{const{inbox_filter_by:k={}}=a.value,{sort_by:U}=k;return U||"desc"}),g=C(()=>l.value({sortOrder:_.value})),T=C(()=>{var k;return(k=g.value)==null?void 0:k.find(U=>{var G;return((G=U.primary_actor)==null?void 0:G.id)===h.value})}),S=C(()=>u.value.count),b=C(()=>{var k;return!h.value||!((k=g.value)!=null&&k.length)&&d.value.isFetching}),A=C(()=>{var k;return(k=g.value)==null?void 0:k.findIndex(U=>{var G;return((G=U.primary_actor)==null?void 0:G.id)===h.value})}),y=C(()=>{if(i.value.id){const{is_contact_sidebar_open:k}=a.value;return k}return!1}),x=()=>r.value(h.value),$=async k=>{const{id:U,primary_actor_id:G,primary_actor_type:L,primary_actor:{meta:{unreadCount:M}={},id:R},notification_type:P}=k;nn(hi.OPEN_CONVERSATION_VIA_INBOX,{notificationType:P});try{await s.dispatch("notifications/read",{id:U,primaryActorId:G,primaryActorType:L,unreadCount:M}),n.push({name:"inbox_view_conversation",params:{type:"conversation",id:R}})}catch{}},N=async()=>{const k=x();if(k)try{await s.dispatch("setActiveChat",{data:k}),It.emit(xn.SCROLL_TO_MESSAGE)}catch{}},w=async()=>{if(!h.value)return;if(s.dispatch("clearSelectedState"),x()){await N();return}o.value=!0;try{await s.dispatch("getConversation",h.value),await N()}catch{}finally{o.value=!1}},D=(k,U)=>{const G=U==="prev"&&k>0,L=U==="next"&&k<S.value-1;if(!G&&!L)return;const M=U==="prev"?k-1:k+1,R=g.value[M];R&&$(R)},H=()=>{D(A.value,"next")},B=()=>{D(A.value,"prev")};return ot(h,(k,U)=>{k!==U&&w()},{immediate:!0}),pt(async()=>{await s.dispatch("agents/get")}),(k,U)=>(p(),f("div",kje,[b.value?(p(),f("div",Lje,[v(i2,{"empty-state-message":k.$t("INBOX.LIST.NO_MESSAGES_AVAILABLE")},null,8,["empty-state-message"])])):(p(),f("div",Dje,[v(xje,{"total-length":S.value,"current-index":A.value,"active-notification":T.value,onNext:H,onPrev:B},null,8,["total-length","current-index","active-notification"]),o.value?(p(),f("div",Pje,[v(qn,{class:"text-n-brand"})])):(p(),f("div",Bje,[v(PI,{class:"flex-1 [&.conversation-details-wrap]:!border-0","is-inbox-view":"","inbox-id":m.value,"is-on-expanded-layout":!1},{default:K(()=>[I(i).id?(p(),V(FI,{key:0})):O("",!0)]),_:1},8,["inbox-id"]),y.value?(p(),V(JI,{key:0,"current-chat":I(i)},null,8,["current-chat"])):O("",!0)]))]))]))}},Uje=[{path:Bt("accounts/:accountId/inbox-view"),component:pje,children:[{path:"",name:"inbox_view",component:i2,meta:{permissions:[...fs,...Xs]}},{path:":type/:id",name:"inbox_view_conversation",component:Fje,meta:{permissions:[...fs,...Xs]}}]}],mo=(e="")=>{const t=e?`/${e}`:"";return Bt(`accounts/:accountId/portals${t}`)},Gje={components:{NextButton:ce},data(){return{helpCenterDocsURL:Pt.HELP_CENTER_DOCS_URL,upgradeFeature:[{key:1,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.TITLE"),icon:"book-copy",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.DESCRIPTION")},{key:2,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.TITLE"),icon:"globe-line",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.DESCRIPTION")},{key:3,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.TITLE"),icon:"heart-handshake",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.DESCRIPTION")},{key:4,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.TITLE"),icon:"search-check",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.DESCRIPTION")}]}},computed:{...St({accountId:"getCurrentAccountId",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"})},methods:{openBillingPage(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},openHelpCenterDocs(){window.open(this.helpCenterDocsURL,"_blank")}}},Vje={class:"flex flex-col gap-12 sm:gap-16 items-center justify-center py-0 px-4 w-full min-h-screen max-w-full overflow-auto bg-n-background"},Hje={class:"flex flex-col justify-start sm:justify-center gap-6"},Wje={class:"flex flex-col gap-1.5 items-start sm:items-center"},Kje={class:"text-n-slate-12 text-left sm:text-center text-4xl sm:text-5xl mb-6 font-semibold"},zje={class:"max-w-2xl text-base font-normal leading-6 text-left sm:text-center text-n-slate-11"},jje={key:0,class:"flex flex-row gap-3 justify-start items-center sm:justify-center"},Yje={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-16 w-full max-w-2xl overflow-auto"},Xje={class:"flex gap-2 flex-row"},qje={class:"font-semibold text-lg text-n-slate-12"},Zje={class:"text-sm leading-6 text-n-slate-12"};function Qje(e,t,n,s,a,o){const l=z("NextButton"),i=z("fluent-icon");return p(),f("div",Vje,[c("div",Hje,[c("div",Wje,[c("h1",Kje,E(e.$t("HELP_CENTER.UPGRADE_PAGE.TITLE")),1),c("p",zje,E(e.isOnChatwootCloud?e.$t("HELP_CENTER.UPGRADE_PAGE.DESCRIPTION"):e.$t("HELP_CENTER.UPGRADE_PAGE.SELF_HOSTED_DESCRIPTION")),1)]),e.isOnChatwootCloud?(p(),f("div",jje,[v(l,{outline:"",label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.LEARN_MORE"),onClick:o.openHelpCenterDocs},null,8,["label","onClick"]),v(l,{label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.UPGRADE"),onClick:o.openBillingPage},null,8,["label","onClick"])])):O("",!0)]),c("div",Yje,[(p(!0),f(fe,null,Ae(a.upgradeFeature,r=>(p(),f("div",{key:r.key,class:"w-64 min-w-full"},[c("div",Xje,[c("div",null,[v(i,{icon:r.icon,"icon-lib":"lucide",size:26,class:"mt-px text-n-slate-12"},null,8,["icon"])]),c("div",null,[c("h5",qje,E(r.title),1),c("p",Zje,E(r.description),1)])])]))),128))])])}const Jje=Fe(Gje,[["render",Qje]]),eYe={class:"flex w-full h-full min-h-0"},tYe={key:0,class:"flex flex-1 h-full px-0 overflow-hidden bg-n-background"},nYe={__name:"HelpCenterPageRouteView",setup(e){const t=cn(),n=Pn(),{uiSettings:s,updateUISettings:a}=Sn(),o=C(()=>n.getters.getCurrentAccountId),l=C(()=>n.getters["portals/allPortals"]),i=(g,T)=>n.getters["accounts/isFeatureEnabledonAccount"](g,T),r=C(()=>i(o.value,Mt.HELP_CENTER)),d=C(()=>{const g=t.params.portalSlug||s.value.last_active_portal_slug;return g?n.getters["portals/portalBySlug"](g):l.value[0]}),u=C(()=>{var g;return d.value?(g=d.value.meta)==null?void 0:g.default_locale:""}),m=C(()=>t.params.locale||u.value),h=C(()=>d.value?d.value.slug:""),_=async()=>{await n.dispatch("portals/index");const g={portalSlug:h.value,locale:m.value};n.dispatch("portals/show",g),n.dispatch("categories/index",g),n.dispatch("agents/get")};return pt(()=>_()),ot(()=>t.params.portalSlug,g=>{g&&g!==s.value.last_active_portal_slug&&a({last_active_portal_slug:g,last_active_locale_code:m.value})}),(g,T)=>{const S=z("router-view");return p(),f("div",eYe,[r.value?(p(),f("section",tYe,[v(S)])):(p(),V(Jje,{key:1}))])}}},sYe={class:"flex items-center justify-center w-full bg-n-background text-n-slate-11"},aYe={__name:"PortalsIndexPage",setup(e){const t=Pn(),n=En(),{uiSettings:s}=Sn(),a=cn(),o=C(()=>t.getters["portals/allPortals"]),l=m=>!!o.value.find(h=>h.slug===m),i=(m,h)=>{n.replace({name:m,params:h,replace:!0})},r=()=>{const{last_active_portal_slug:m,last_active_locale_code:h}=s.value||{};if(l(m))return{portalSlug:m,locale:h};if(o.value.length>0){const{slug:_,meta:{default_locale:g}={}}=o.value[0];return{portalSlug:_,locale:g}}return null},d=()=>{const m=r(),{navigationPath:h}=a.params,g=["portals_articles_index","portals_categories_index","portals_locales_index","portals_settings_index"].includes(h)?h:"portals_articles_index";return m?i(g,m):i("portals_new",{})},u=async()=>{await t.dispatch("portals/index"),jt(()=>d())};return pt(()=>u()),(m,h)=>(p(),f("div",sYe,[v(qn)]))}},oYe={class:"flex justify-between w-full gap-1"},lYe={class:"flex items-center gap-2"},iYe={class:"relative flex items-center group"},rYe={class:"flex items-center justify-between w-full gap-4"},cYe={class:"flex items-center gap-4"},dYe={class:"flex items-center gap-1"},uYe={class:"text-sm truncate text-n-slate-11"},pYe={class:"block text-sm whitespace-nowrap text-n-slate-11"},mYe={class:"inline-flex items-center gap-1 text-n-slate-11 whitespace-nowrap"},hYe={class:"text-sm"},fYe={class:"text-sm text-n-slate-11 line-clamp-1"},ME={__name:"ArticleCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},status:{type:String,required:!0},author:{type:Object,default:null},category:{type:Object,required:!0},views:{type:Number,required:!0},updatedAt:{type:Number,required:!0}},emits:["openArticle","articleAction"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),[o,l]=Xn(),i=C(()=>{const S=Object.entries(xIe).reduce((A,[y,x])=>(A[y]={...x,label:a(x.label)},A),{});return[...(H0[n.status]||H0[Ii.PUBLISHED]).map(A=>S[A]),S.delete]}),r=C(()=>{switch(n.status){case"archived":return"text-n-slate-12";case"draft":return"text-n-amber-11";default:return"text-n-teal-11"}}),d=C(()=>{switch(n.status){case"archived":return a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.ARCHIVED");case"draft":return a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.DRAFT");default:return a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.PUBLISHED")}}),u=C(()=>{var S;return(S=n.category)!=null&&S.slug?`${n.category.icon} ${n.category.name}`:a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.CATEGORY.UNCATEGORISED")}),m=C(()=>{var S,b;return((S=n.author)==null?void 0:S.name)||((b=n.author)==null?void 0:b.availableName)||""}),h=C(()=>{var S;return(S=n.author)==null?void 0:S.thumbnail}),_=C(()=>Ds(n.updatedAt)),g=({action:S,value:b})=>{l(!1),s("articleAction",{action:S,value:b,id:n.id})},T=S=>{s("openArticle",S)};return(S,b)=>{const A=_t("on-clickaway");return p(),V(Tl,null,{default:K(()=>[c("div",oYe,[c("span",{class:"text-base cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12 line-clamp-1",onClick:b[0]||(b[0]=y=>T(e.id))},E(e.title),1),c("div",lYe,[c("span",{class:re(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",r.value])},E(d.value),3),pe((p(),f("div",iYe,[v(ce,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:b[1]||(b[1]=y=>I(l)())}),I(o)?(p(),V(ua,{key:0,"menu-items":i.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full",onAction:b[2]||(b[2]=y=>g(y))},null,8,["menu-items"])):O("",!0)])),[[A,()=>I(l)(!1)]])])]),c("div",rYe,[c("div",cYe,[c("div",dYe,[v(Ft,{name:m.value,src:h.value,size:16,"rounded-full":""},null,8,["name","src"]),c("span",uYe,E(m.value||"-"),1)]),c("span",pYe,E(u.value),1),c("div",mYe,[v(Wt,{icon:"i-lucide-eye",class:"size-4"}),c("span",hYe,E(I(a)("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.VIEWS",{count:e.views})),1)])]),c("span",fYe,E(_.value),1)])]),_:1})}}},kE=[{id:1,title:"How to get an SSL certificate for your Help Center's custom domain",status:"draft",updatedAt:1729205669,author:{availableName:"Michael"},category:{slug:"configuration",icon:"",name:"Setup & Configuration"},views:3400},{id:2,title:"Setting up your first Help Center portal",status:"published",updatedAt:1729205669,author:{availableName:"John"},category:{slug:"onboarding",icon:"",name:"Onboarding"},views:400},{id:3,title:"Best practices for organizing your Help Center content",status:"archived",updatedAt:1729205669,author:{availableName:"Fernando"},category:{slug:"best-practices",icon:"",name:"Best Practices"},views:400},{id:4,title:"Customizing the appearance of your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Jane"},category:{slug:"design",icon:"",name:"Design"},views:400},{id:5,title:"Integrating your Help Center with third-party tools",status:"published",updatedAt:1729205669,author:{availableName:"Sarah"},category:{slug:"integrations",icon:"",name:"Integrations"},views:2800},{id:6,title:"Managing user permissions in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Alex"},category:{slug:"administration",icon:"",name:"Administration"},views:1200},{id:7,title:"Creating and managing FAQ sections",status:"published",updatedAt:1729205669,author:{availableName:"Emily"},category:{slug:"content-management",icon:"",name:"Content Management"},views:5600},{id:8,title:"Implementing search functionality in your Help Center",status:"archived",updatedAt:1729205669,author:{availableName:"David"},category:{slug:"features",icon:"",name:"Features"},views:1800},{id:9,title:"Analyzing Help Center usage metrics",status:"published",updatedAt:1729205669,author:{availableName:"Rachel"},category:{slug:"analytics",icon:"",name:"Analytics"},views:3200},{id:10,title:"Setting up multilingual support in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Carlos"},category:{slug:"localization",icon:"",name:"Localization"},views:900},{id:11,title:"Creating interactive tutorials for your products",status:"published",updatedAt:1729205669,author:{availableName:"Olivia"},category:{slug:"education",icon:"",name:"Education"},views:4100},{id:12,title:"Implementing a feedback system in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Nathan"},category:{slug:"user-engagement",icon:"",name:"User Engagement"},views:750},{id:13,title:"Optimizing Help Center content for SEO",status:"published",updatedAt:1729205669,author:{availableName:"Sophia"},category:{slug:"seo",icon:"",name:"SEO"},views:2900},{id:14,title:"Creating a knowledge base for internal teams",status:"archived",updatedAt:1729205669,author:{availableName:"Daniel"},category:{slug:"internal-resources",icon:"",name:"Internal Resources"},views:1500}],gYe={class:"flex flex-col gap-6"},_Ye={__name:"CreatePortalDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=yt(),l=F(null),i=ke("portals/isCreatingPortal"),r=os({name:"",slug:"",domain:"",logoUrl:"",avatarBlobId:""}),d={name:{required:lt,minLength:on(2)},slug:{required:fc.withMessage(()=>a("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR"),lt),isValidSlug:fc.withMessage(()=>a("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR"),iN)}},u=Lt(d,r),m=C(()=>u.value.name.$error?a("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR"):""),h=C(()=>{var A;return((A=u.value.slug.$errors[0])==null?void 0:A.$message)||""}),_=C(()=>u.value.$invalid);ot(()=>r.name,()=>{r.slug=VN(r.name)});const g=A=>{s("create",{slug:A.slug,locale:"en"})},T=()=>{Object.keys(r).forEach(A=>{r[A]=""}),u.value.$reset()},S=async A=>{try{await o.dispatch("portals/create",A),l.value.close();const y={has_custom_domain:!!A.custom_domain};nn(yv.ONBOARD_BASIC_INFORMATION,y),nn(yv.CREATE_PORTAL,y),_e(a("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.SUCCESS_MESSAGE")),T(),g(A)}catch(y){l.value.close(),_e((y==null?void 0:y.message)||a("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.ERROR_MESSAGE"))}},b=async()=>{if(!await u.value.$validate())return;const y={name:r.name,slug:r.slug,custom_domain:r.domain,blob_id:r.avatarBlobId||null,color:"#2781F6"};await S(y)};return t({dialogRef:l}),(A,y)=>(p(),V(Ms,{ref_key:"dialogRef",ref:l,type:"edit",title:I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.TITLE"),"confirm-button-label":I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.CONFIRM_BUTTON_LABEL"),description:I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.DESCRIPTION"),"disable-confirm-button":_.value||I(i),"is-loading":I(i),onConfirm:b},{default:K(()=>[c("div",gYe,[v(ln,{id:"portal-name",modelValue:r.name,"onUpdate:modelValue":y[0]||(y[0]=x=>r.name=x),type:"text",placeholder:I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.PLACEHOLDER"),label:I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.LABEL"),"message-type":m.value?"error":"info",message:m.value||I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.MESSAGE"),onBlur:y[1]||(y[1]=x=>I(u).name.$touch())},null,8,["modelValue","placeholder","label","message-type","message"]),v(ln,{id:"portal-slug",modelValue:r.slug,"onUpdate:modelValue":y[2]||(y[2]=x=>r.slug=x),type:"text",placeholder:I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.PLACEHOLDER"),label:I(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.LABEL"),"message-type":h.value?"error":"info",message:h.value||I(nI)(r.slug),onInput:y[3]||(y[3]=x=>I(u).slug.$touch()),onBlur:y[4]||(y[4]=x=>I(u).slug.$touch())},null,8,["modelValue","placeholder","label","message-type","message"])])]),_:1},8,["title","confirm-button-label","description","disable-confirm-button","is-loading"]))}},vYe={class:"grid grid-cols-2 gap-4 p-px"},bYe={class:"space-y-4"},EYe={class:"space-y-4"},TYe={__name:"PortalEmptyState",setup(e){const t=F(null),n=()=>{t.value.dialogRef.open()},s=En(),a=({slug:o,locale:l})=>{s.push({name:"portals_articles_index",params:{portalSlug:o,locale:l}})};return(o,l)=>(p(),V(Al,{title:o.$t("HELP_CENTER.TITLE"),subtitle:o.$t("HELP_CENTER.NEW_PAGE.DESCRIPTION")},{"empty-state-item":K(()=>[c("div",vYe,[c("div",bYe,[(p(!0),f(fe,null,Ae(I(kE),(i,r)=>(p(),V(ME,{id:i.id,key:`article-${r}`,title:i.title,status:i.status,"updated-at":i.updatedAt,author:i.author,category:i.category,views:i.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))]),c("div",EYe,[(p(!0),f(fe,null,Ae(I(kE).reverse(),(i,r)=>(p(),V(ME,{id:i.id,key:`article-${r}`,title:i.title,status:i.status,"updated-at":i.updatedAt,author:i.author,category:i.category,views:i.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))])])]),actions:K(()=>[v(ce,{label:o.$t("HELP_CENTER.NEW_PAGE.CREATE_PORTAL_BUTTON"),icon:"i-lucide-plus",onClick:n},null,8,["label"]),v(_Ye,{ref_key:"createPortalDialogRef",ref:t,onCreate:a},null,512)]),_:1},8,["title","subtitle"]))}},AYe={class:"w-full h-full bg-n-background"},yYe={__name:"PortalsNewPage",setup(e){return(t,n)=>(p(),f("div",AYe,[v(TYe)]))}},LE=()=>Va(()=>import("./PortalsArticlesIndexPage-Bi-6LSLC.js"),__vite__mapDeps([16,2,5,6,17,18,19,11,12,20,21,8,22,23,14,10,24,25,26,7,4,9,27,28,13,1,29,30,31])),SYe=()=>Va(()=>import("./PortalsArticlesNewPage-BsY-_ObZ.js"),__vite__mapDeps([32,2,5,6,17,18,21,8,22,11,12,23,14,10,24,33,19,20,4,7,9,34,27,28,13,1,29,30])),DE=()=>Va(()=>import("./PortalsArticlesEditPage-BkUhURC4.js"),__vite__mapDeps([35,2,5,6,17,18,21,8,22,11,12,23,14,10,24,33,19,20,4,7,9,34,27,28,13,1,29,30])),IYe=()=>Va(()=>import("./PortalsCategoriesIndexPage-DIep0Xcv.js"),__vite__mapDeps([36,2,5,6,17,18,21,8,22,11,12,23,14,10,24,19,20,25,26,7,4,9,27,28,13,1,29,30])),CYe=()=>Va(()=>import("./PortalsLocalesIndexPage-CPEkx8hh.js"),__vite__mapDeps([37,2,5,6,17,18,19,11,12,20,21,8,22,23,14,10,24,7,4,9,27,28,13,1,29,30])),xYe=()=>Va(()=>import("./PortalsSettingsIndexPage-D8527UoR.js"),__vite__mapDeps([38,2,17,18,5,6,21,8,19,11,12,20,22,23,14,10,24,4,7,9,27,28,13,1,29,30])),xl={featureFlag:Mt.HELP_CENTER,permissions:["administrator","agent","knowledge_base_manage"]},NYe=[{path:mo(":portalSlug/:locale/:categorySlug?/articles/:tab?"),name:"portals_articles_index",meta:xl,component:LE},{path:mo(":portalSlug/:locale/:categorySlug?/articles/new"),name:"portals_articles_new",meta:xl,component:SYe},{path:mo(":portalSlug/:locale/:categorySlug?/articles/:tab?/edit/:articleSlug"),name:"portals_articles_edit",meta:xl,component:DE},{path:mo(":portalSlug/:locale/categories"),name:"portals_categories_index",meta:xl,component:IYe},{path:mo(":portalSlug/:locale/categories/:categorySlug/articles"),name:"portals_categories_articles_index",meta:xl,component:LE},{path:mo(":portalSlug/:locale/categories/:categorySlug/articles/:articleSlug"),name:"portals_categories_articles_edit",meta:xl,component:DE},{path:mo(":portalSlug/locales"),name:"portals_locales_index",meta:xl,component:CYe},{path:mo(":portalSlug/settings"),name:"portals_settings_index",meta:xl,component:xYe},{path:mo("new"),name:"portals_new",meta:{featureFlag:Mt.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:yYe},{path:mo(":navigationPath"),name:"portals_index",meta:{featureFlag:Mt.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:aYe}],OYe={routes:[{path:mo(),component:nYe,redirect:e=>({name:"portals_index",params:{navigationPath:"portals_articles_index",...e.params}}),children:[...NYe]}]},wYe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background px-6"},RYe={__name:"CampaignsPageRouteView",props:{keepAlive:{type:Boolean,default:!0}},setup(e){const t=yt();return pt(()=>{t.dispatch("campaigns/get"),t.dispatch("labels/get")}),(n,s)=>{const a=z("router-view");return p(),f("div",wYe,[v(a,null,{default:K(({Component:o})=>[e.keepAlive?(p(),V(Yc,{key:0},[(p(),V(xs(o)))],1024)):(p(),V(xs(o),{key:1}))]),_:1})])}}},$Ye={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},MYe={class:"sticky top-0 z-10 px-6 lg:px-0"},kYe={class:"w-full max-w-[60rem] mx-auto"},LYe={class:"flex items-center justify-between w-full h-20 gap-2"},DYe={class:"text-xl font-medium text-n-slate-12"},PYe={class:"relative group/campaign-button"},BYe={class:"flex-1 px-6 overflow-y-auto lg:px-0"},FYe={class:"w-full max-w-[60rem] mx-auto py-4"},q_={__name:"CampaignLayout",props:{headerTitle:{type:String,default:""},buttonLabel:{type:String,default:""}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>{const l=_t("on-clickaway");return p(),f("section",$Ye,[c("header",MYe,[c("div",kYe,[c("div",LYe,[c("span",DYe,E(e.headerTitle),1),pe((p(),f("div",PYe,[v(ce,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:s},null,8,["label"]),at(a.$slots,"action")])),[[l,()=>n("close")]])])])]),c("main",BYe,[c("div",FYe,[at(a.$slots,"default")])])])}}},UYe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},GYe={class:"flex items-center gap-1.5 flex-shrink-0"},VYe={class:"text-sm font-medium text-n-slate-12"},HYe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},WYe={class:"flex items-center gap-1.5 flex-shrink-0"},KYe={class:"text-sm font-medium text-n-slate-12"},zYe={__name:"LiveChatCampaignDetails",props:{sender:{type:Object,default:null},inboxName:{type:String,default:""},inboxIcon:{type:String,default:""}},setup(e){const t=e,{t:n}=Pe(),s=C(()=>{var o;return((o=t.sender)==null?void 0:o.name)||n("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.BOT")}),a=C(()=>{var o;return(o=t.sender)==null?void 0:o.thumbnail});return(o,l)=>(p(),f(fe,null,[c("span",UYe,E(I(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.SENT_BY")),1),c("div",GYe,[v(Ft,{name:s.value,src:a.value,size:16,"rounded-full":""},null,8,["name","src"]),c("span",VYe,E(s.value),1)]),c("span",HYe,E(I(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.FROM")),1),c("div",WYe,[v(Wt,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),c("span",KYe,E(e.inboxName),1)])],64))}},jYe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},YYe={class:"flex items-center gap-1.5 flex-shrink-0"},XYe={class:"text-sm font-medium text-n-slate-12"},qYe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},ZYe={class:"flex-1 text-sm font-medium truncate text-n-slate-12"},QYe={__name:"SMSCampaignDetails",props:{inboxName:{type:String,default:""},inboxIcon:{type:String,default:""},scheduledAt:{type:Number,default:0}},setup(e){const{t}=Pe();return(n,s)=>(p(),f(fe,null,[c("span",jYe,E(I(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.SENT_FROM")),1),c("div",YYe,[v(Wt,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),c("span",XYe,E(e.inboxName),1)]),c("span",qYe,E(I(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.ON")),1),c("span",ZYe,E(I(vu)(new Date(e.scheduledAt),"LLL d, h:mm a")),1)],64))}},JYe={class:"flex flex-col items-start justify-between flex-1 min-w-0 gap-2"},eXe={class:"flex justify-between gap-3 w-fit"},tXe={class:"text-base font-medium capitalize text-n-slate-12 line-clamp-1"},nXe={class:"text-sm text-n-slate-11 line-clamp-1 [&>p]:mb-0 h-6"},sXe={class:"flex items-center w-full h-6 gap-2 overflow-hidden"},aXe={class:"flex items-center justify-end w-20 gap-2"},PE="completed",Yp={__name:"CampaignCard",props:{title:{type:String,default:""},message:{type:String,default:""},isLiveChatType:{type:Boolean,default:!1},isEnabled:{type:Boolean,default:!1},status:{type:String,default:""},sender:{type:Object,default:null},inbox:{type:Object,default:null},scheduledAt:{type:Number,default:0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),{formatMessage:o}=$a(),l=C(()=>n.isLiveChatType?n.isEnabled:n.status!==PE),i=C(()=>({"text-n-teal-11":l.value,"text-n-slate-12":!l.value})),r=C(()=>n.isLiveChatType?n.isEnabled?a("CAMPAIGN.LIVE_CHAT.CARD.STATUS.ENABLED"):a("CAMPAIGN.LIVE_CHAT.CARD.STATUS.DISABLED"):n.status===PE?a("CAMPAIGN.SMS.CARD.STATUS.COMPLETED"):a("CAMPAIGN.SMS.CARD.STATUS.SCHEDULED")),d=C(()=>{var m;return((m=n.inbox)==null?void 0:m.name)||""}),u=C(()=>{const{medium:m,channel_type:h}=n.inbox;return Ir(h,m)});return(m,h)=>{const _=_t("dompurify-html");return p(),V(Tl,{layout:"row"},{default:K(()=>[c("div",JYe,[c("div",eXe,[c("span",tXe,E(e.title),1),c("span",{class:re(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",i.value])},E(r.value),3)]),pe(c("div",nXe,null,512),[[_,I(o)(e.message,!1,!1,!1)]]),c("div",sXe,[e.isLiveChatType?(p(),V(zYe,{key:0,sender:e.sender,"inbox-name":d.value,"inbox-icon":u.value},null,8,["sender","inbox-name","inbox-icon"])):(p(),V(QYe,{key:1,"inbox-name":d.value,"inbox-icon":u.value,"scheduled-at":e.scheduledAt},null,8,["inbox-name","inbox-icon","scheduled-at"]))])]),c("div",aXe,[e.isLiveChatType?(p(),V(ce,{key:0,variant:"faded",size:"sm",color:"slate",icon:"i-lucide-sliders-vertical",onClick:h[0]||(h[0]=g=>s("edit"))})):O("",!0),v(ce,{variant:"faded",color:"ruby",size:"sm",icon:"i-lucide-trash",onClick:h[1]||(h[1]=g=>s("delete"))})])]),_:1})}}},oXe={class:"flex flex-col gap-4"},Z_={__name:"CampaignList",props:{campaigns:{type:Array,required:!0},isLiveChatType:{type:Boolean,default:!1}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,s=o=>n("edit",o),a=o=>n("delete",o);return(o,l)=>(p(),f("div",oXe,[(p(!0),f(fe,null,Ae(e.campaigns,i=>(p(),V(Yp,{key:i.id,title:i.title,message:i.message,"is-enabled":i.enabled,status:i.campaign_status,sender:i.sender,inbox:i.inbox,"scheduled-at":i.scheduled_at,"is-live-chat-type":e.isLiveChatType,onEdit:r=>s(i),onDelete:r=>a(i)},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at","is-live-chat-type","onEdit","onDelete"]))),128))]))}},lXe={class:"flex flex-col gap-1"},iXe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},rXe={class:"flex flex-col gap-1"},cXe={for:"sentBy",class:"mb-0.5 text-sm font-medium text-n-slate-12"},dXe={class:"flex flex-col gap-2.5"},uXe={class:"mb-2.5 text-sm font-medium text-n-slate-12"},pXe={class:"flex items-center gap-2"},mXe={class:"text-sm font-medium text-n-slate-12"},hXe={class:"flex items-center gap-2"},fXe={class:"text-sm font-medium text-n-slate-12"},gXe={key:0,class:"flex items-center justify-between w-full gap-3"},r2={__name:"LiveChatCampaignForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},selectedCampaign:{type:Object,default:()=>({})},showActionButtons:{type:Boolean,default:!0}},emits:["submit","cancel"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i={uiFlags:ke("campaigns/getUIFlags"),inboxes:ke("inboxes/getWebsiteInboxes")},r=F([]),d={title:"",message:"",inboxId:null,senderId:0,enabled:!0,triggerOnlyDuringBusinessHours:!1,endPoint:"",timeOnPage:10},u=os({...d}),m={shouldBeAValidURLPattern:k=>{try{return new ix(k),!0}catch{return!1}},shouldStartWithHTTP:k=>k?k.startsWith("https://")||k.startsWith("http://"):!1},h={title:{required:lt,minLength:on(1)},message:{required:lt,minLength:on(1)},inboxId:{required:lt},senderId:{required:lt},endPoint:{required:lt,...m},timeOnPage:{required:lt}},_=Lt(h,u),g=C(()=>i.uiFlags.value.isCreating),T=C(()=>_.value.$invalid),S=(k,U,G)=>(k==null?void 0:k.map(L=>({value:L[U],label:L[G]})))??[],b=C(()=>S(i.inboxes.value,"id","name")),A=C(()=>[{value:0,label:"Bot"},...S(r.value,"id","name")]),y=(k,U)=>_.value[k].$error?o(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.${U}.ERROR`):"",x=C(()=>({title:y("title","TITLE"),message:y("message","MESSAGE"),inbox:y("inboxId","INBOX"),endPoint:y("endPoint","END_POINT"),timeOnPage:y("timeOnPage","TIME_ON_PAGE"),sender:y("senderId","SENT_BY")})),$=()=>Object.assign(u,d),N=()=>a("cancel"),w=async k=>{var U,G;if(!k){r.value=[];return}try{const L=await l.dispatch("inboxMembers/get",{inboxId:k});r.value=((U=L==null?void 0:L.data)==null?void 0:U.payload)??[]}catch(L){r.value=[],_e(((G=L==null?void 0:L.response)==null?void 0:G.message)??o("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE"))}},D=()=>({title:u.title,message:u.message,inbox_id:u.inboxId,sender_id:u.senderId||null,enabled:u.enabled,trigger_only_during_business_hours:u.triggerOnlyDuringBusinessHours,trigger_rules:{url:u.endPoint,time_on_page:u.timeOnPage}}),H=async()=>{await _.value.$validate()&&(a("submit",D()),s.mode==="create"&&($(),N()))},B=k=>{if(!k)return;const{title:U,message:G,inbox:{id:L},sender:M,enabled:R,trigger_only_during_business_hours:P,trigger_rules:{url:W,time_on_page:Q}}=k;Object.assign(u,{title:U,message:G,inboxId:L,senderId:(M==null?void 0:M.id)??0,enabled:R,triggerOnlyDuringBusinessHours:P,endPoint:W,timeOnPage:Q})};return ot(()=>u.inboxId,k=>{k&&w(k)},{immediate:!0}),ot(()=>s.selectedCampaign,k=>{s.mode==="edit"&&k&&B(k)},{immediate:!0}),t({prepareCampaignDetails:D,isSubmitDisabled:T}),(k,U)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze(H,["prevent"])},[v(ln,{modelValue:u.title,"onUpdate:modelValue":U[0]||(U[0]=G=>u.title=G),label:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.LABEL"),placeholder:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.PLACEHOLDER"),message:x.value.title,"message-type":x.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:u.message,"onUpdate:modelValue":U[1]||(U[1]=G=>u.message=G),label:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.LABEL"),placeholder:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.PLACEHOLDER"),message:x.value.message,"message-type":x.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",lXe,[c("label",iXe,E(I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.LABEL")),1),v(Jo,{id:"inbox",modelValue:u.inboxId,"onUpdate:modelValue":U[2]||(U[2]=G=>u.inboxId=G),options:b.value,"has-error":!!x.value.inbox,placeholder:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.PLACEHOLDER"),message:x.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",rXe,[c("label",cXe,E(I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.LABEL")),1),v(Jo,{id:"sentBy",modelValue:u.senderId,"onUpdate:modelValue":U[3]||(U[3]=G=>u.senderId=G),options:A.value,"has-error":!!x.value.sender,disabled:!u.inboxId,placeholder:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:x.value.sender},null,8,["modelValue","options","has-error","disabled","placeholder","message"])]),v(ln,{modelValue:u.endPoint,"onUpdate:modelValue":U[4]||(U[4]=G=>u.endPoint=G),type:"url",label:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.LABEL"),placeholder:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.PLACEHOLDER"),message:x.value.endPoint,"message-type":x.value.endPoint?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(ln,{modelValue:u.timeOnPage,"onUpdate:modelValue":U[5]||(U[5]=G=>u.timeOnPage=G),type:"number",label:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.LABEL"),placeholder:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.PLACEHOLDER"),message:x.value.timeOnPage,"message-type":x.value.timeOnPage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("fieldset",dXe,[c("legend",uXe,E(I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TITLE")),1),c("label",pXe,[pe(c("input",{"onUpdate:modelValue":U[6]||(U[6]=G=>u.enabled=G),type:"checkbox"},null,512),[[Xt,u.enabled]]),c("span",mXe,E(I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.ENABLED")),1)]),c("label",hXe,[pe(c("input",{"onUpdate:modelValue":U[7]||(U[7]=G=>u.triggerOnlyDuringBusinessHours=G),type:"checkbox"},null,512),[[Xt,u.triggerOnlyDuringBusinessHours]]),c("span",fXe,E(I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TRIGGER_ONLY_BUSINESS_HOURS")),1)])]),e.showActionButtons?(p(),f("div",gXe,[v(ce,{type:"button",variant:"faded",color:"slate",label:I(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:N},null,8,["label"]),v(ce,{type:"submit",label:I(o)(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.${e.mode.toUpperCase()}`),class:"w-full","is-loading":g.value,disabled:g.value||T.value},null,8,["label","is-loading","disabled"])])):O("",!0)],32))}},_Xe={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6 max-h-[85vh] overflow-y-auto"},vXe={class:"text-base font-medium text-n-slate-12"},bXe={__name:"LiveChatCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=yt(),{t:a}=Pe(),o=async r=>{var d;try{await s.dispatch("campaigns/create",r),nn(gg.CREATE_CAMPAIGN,{type:_g.ONGOING}),_e(a("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const m=((d=u==null?void 0:u.response)==null?void 0:d.message)||a("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE");_e(m)}},l=()=>n("close"),i=r=>{o(r),l()};return(r,d)=>(p(),f("div",_Xe,[c("h3",vXe,E(I(a)("CAMPAIGN.LIVE_CHAT.CREATE.TITLE")),1),v(r2,{mode:"create",onSubmit:i,onCancel:l})]))}},EXe={__name:"EditLiveChatCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=Pe(),a=yt(),o=F(null),l=F(null),i=ke("campaigns/getUIFlags"),r=C(()=>i.value.isUpdating),d=C(()=>{var _;return(_=l.value)==null?void 0:_.isSubmitDisabled}),u=C(()=>n.selectedCampaign.id),m=async _=>{var g;try{await a.dispatch("campaigns/update",{id:u.value,..._}),_e(s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.SUCCESS_MESSAGE")),o.value.close()}catch(T){const S=((g=T==null?void 0:T.response)==null?void 0:g.message)||s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.ERROR_MESSAGE");_e(S)}},h=()=>{m(l.value.prepareCampaignDetails())};return t({dialogRef:o}),(_,g)=>(p(),V(Ms,{ref_key:"dialogRef",ref:o,type:"edit",title:I(s)("CAMPAIGN.LIVE_CHAT.EDIT.TITLE"),"is-loading":r.value,"disable-confirm-button":r.value||d.value,"overflow-y-auto":"",onConfirm:h},{default:K(()=>[v(r2,{ref_key:"liveChatCampaignFormRef",ref:l,mode:"edit","selected-campaign":e.selectedCampaign,"show-action-buttons":!1,onSubmit:h},null,8,["selected-campaign"])]),_:1},8,["title","is-loading","disable-confirm-button"]))}},Q_={__name:"ConfirmDeleteCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=Pe(),a=yt(),o=F(null),l=async r=>{if(r)try{await a.dispatch("campaigns/delete",r),_e(s("CAMPAIGN.CONFIRM_DELETE.API.SUCCESS_MESSAGE"))}catch{_e(s("CAMPAIGN.CONFIRM_DELETE.API.ERROR_MESSAGE"))}},i=async()=>{var r;await l(n.selectedCampaign.id),(r=o.value)==null||r.close()};return t({dialogRef:o}),(r,d)=>(p(),V(Ms,{ref_key:"dialogRef",ref:o,type:"alert",title:I(s)("CAMPAIGN.CONFIRM_DELETE.TITLE"),description:I(s)("CAMPAIGN.CONFIRM_DELETE.DESCRIPTION"),"confirm-button-label":I(s)("CAMPAIGN.CONFIRM_DELETE.CONFIRM"),onConfirm:i},null,8,["title","description","confirm-button-label"]))}},TXe=[{id:1,title:"Chatbot Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Alexa Rivera"},message:"Hello!  Need help with our chatbot features? Feel free to ask!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/features/chatbot/",time_on_page:10},trigger_only_during_business_hours:!0,created_at:"2024-10-24T13:10:26.636Z",updated_at:"2024-10-24T13:10:26.636Z"},{id:2,title:"Pricing Information Support",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Jamie Lee"},message:"Hello!  Any questions on pricing? Im here to help!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/pricings",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:08.763Z",updated_at:"2024-10-24T13:11:08.763Z"},{id:3,title:"Product Setup Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chatwoot"},message:"Hi! Chatwoot here. Need help setting up? Let me know!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://{*.}?chatwoot.com/apps/account/*/settings/inboxes/new/",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:44.285Z",updated_at:"2024-10-24T13:11:44.285Z"},{id:4,title:"General Assistance Campaign",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chris Barlow"},message:"Hi there!  Im here for any questions you may have. Lets chat!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://siv.com",time_on_page:200},trigger_only_during_business_hours:!1,created_at:"2024-10-29T19:54:33.741Z",updated_at:"2024-10-29T19:56:26.296Z"}],c2=[{id:1,title:"Customer Feedback Request",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Enjoying our product? Share your feedback on G2 and earn a $25 Amazon coupon: https://chwt.app/g2-review",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1729775588,audience:[{id:4,type:"Label"},{id:5,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:13:08.496Z",updated_at:"2024-10-24T13:15:38.698Z"},{id:2,title:"Welcome New Customer",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome aboard!  Let us know if you have any questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1729732500,audience:[{id:1,type:"Label"},{id:6,type:"Label"},{id:5,type:"Label"},{id:2,type:"Label"},{id:4,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:14:00.168Z",updated_at:"2024-10-24T13:15:38.707Z"},{id:3,title:"New Business Welcome",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Were excited to have your business with us!",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1730368440,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"},{id:4,type:"Label"},{id:2,type:"Label"},{id:5,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-30T07:54:49.915Z",updated_at:"2024-10-30T07:54:49.915Z"},{id:4,title:"New Member Onboarding",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome to the team! Reach out if you have questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1730304840,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-29T16:14:10.374Z",updated_at:"2024-10-30T16:15:03.157Z"}],AXe={class:"flex flex-col gap-4 p-px"},yXe={__name:"LiveChatCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),V(Al,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[c("div",AXe,[(p(!0),f(fe,null,Ae(I(TXe),s=>(p(),V(Yp,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at,"is-live-chat-type":""},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},SXe={key:0,class:"flex justify-center items-center py-10 text-n-slate-11"},IXe={__name:"LiveChatCampaignsPage",setup(e){const{t}=Pe(),n=Nn(),s=F(null),a=F(null),o=F(null),l=ke("campaigns/getUIFlags"),i=C(()=>l.value.isFetching),[r,d]=Xn(),u=C(()=>n["campaigns/getLiveChatCampaigns"].value),m=C(()=>{var g;return((g=u.value)==null?void 0:g.length)===0&&!i.value}),h=g=>{o.value=g,s.value.dialogRef.open()},_=g=>{o.value=g,a.value.dialogRef.open()};return(g,T)=>(p(),V(q_,{"header-title":I(t)("CAMPAIGN.LIVE_CHAT.HEADER_TITLE"),"button-label":I(t)("CAMPAIGN.LIVE_CHAT.NEW_CAMPAIGN"),onClick:T[1]||(T[1]=S=>I(d)()),onClose:T[2]||(T[2]=S=>I(d)(!1))},{action:K(()=>[I(r)?(p(),V(bXe,{key:0,onClose:T[0]||(T[0]=S=>I(d)(!1))})):O("",!0)]),default:K(()=>[i.value?(p(),f("div",SXe,[v(qn)])):m.value?(p(),V(yXe,{key:2,title:I(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.TITLE"),subtitle:I(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),V(Z_,{key:1,campaigns:u.value,"is-live-chat-type":"",onEdit:h,onDelete:_},null,8,["campaigns"])),v(EXe,{ref_key:"editLiveChatCampaignDialogRef",ref:s,"selected-campaign":o.value},null,8,["selected-campaign"]),v(Q_,{ref_key:"confirmDeleteCampaignDialogRef",ref:a,"selected-campaign":o.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},CXe={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},xXe=["onClick"],NXe={key:0,class:"flex items-center text-sm text-n-slate-11"},d2={__name:"TagMultiSelectComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=F(s.modelValue),i=F(!1),r=F(""),d=F(null),u=F(null),m=C(()=>{const b=r.value.toLowerCase();return s.options.filter(A=>{var y;return(y=A.label)==null?void 0:y.toLowerCase().includes(b)})}),h=C(()=>s.placeholder||o("COMBOBOX.PLACEHOLDER")),_=C(()=>l.value.map(b=>s.options.find(y=>y.value===b)||{value:b,label:b})),g=b=>{const A=l.value.indexOf(b.value);A===-1?l.value.push(b.value):l.value.splice(A,1),a("update:modelValue",l.value)},T=b=>{const A=l.value.indexOf(b);A!==-1&&(l.value.splice(A,1),a("update:modelValue",l.value))},S=()=>{s.disabled||(i.value=!i.value,i.value&&(r.value="",jt(()=>{var b;return(b=d.value)==null?void 0:b.focus()})))};return ot(()=>s.modelValue,b=>{l.value=b}),t({toggleDropdown:S,open:i,disabled:s.disabled}),(b,A)=>(p(),f("div",{ref_key:"comboboxRef",ref:u,class:re(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:A[3]||(A[3]=ze(()=>{},["prevent"]))},[v(I(Li),{onTrigger:A[2]||(A[2]=y=>i.value=!1)},{default:K(()=>[c("div",{class:re(["flex flex-wrap w-full gap-2 px-3 py-2.5 border rounded-lg cursor-pointer bg-n-alpha-black2 min-h-[42px] transition-all duration-500 ease-in-out",{"border-n-ruby-8":e.hasError,"border-n-weak dark:border-n-weak hover:border-n-slate-6 dark:hover:border-n-slate-6":!e.hasError&&!i.value,"border-n-brand":i.value,"cursor-not-allowed pointer-events-none opacity-50":e.disabled}]),onClick:S},[(p(!0),f(fe,null,Ae(_.value,y=>(p(),f("div",{key:y.value,class:"flex items-center justify-center max-w-full gap-1 px-2 py-0.5 rounded-lg bg-n-alpha-black1",onClick:A[0]||(A[0]=ze(()=>{},["stop"]))},[c("span",CXe,E(y.label),1),c("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3 text-n-slate-11",onClick:x=>T(y.value)},null,8,xXe)]))),128)),_.value.length===0?(p(),f("span",NXe,E(h.value),1)):O("",!0)],2),v(t2,{ref_key:"dropdownRef",ref:d,open:i.value,options:m.value,"search-value":r.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,multiple:"","selected-values":l.value,"onUpdate:searchValue":A[1]||(A[1]=y=>r.value=y),onSelect:g},null,8,["open","options","search-value","search-placeholder","empty-state","selected-values"]),e.message?(p(),f("p",{key:0,class:re(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},E(e.message),3)):O("",!0)]),_:1})],2))}},OXe={class:"flex flex-col gap-1"},wXe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},RXe={class:"flex flex-col gap-1"},$Xe={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},MXe={class:"flex items-center justify-between w-full gap-3"},kXe={__name:"SMSCampaignForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a={uiFlags:ke("campaigns/getUIFlags"),labels:ke("labels/getLabels"),inboxes:ke("inboxes/getSMSInboxes")},o={title:"",message:"",inboxId:null,scheduledAt:null,selectedAudience:[]},l=os({...o}),i={title:{required:lt,minLength:on(1)},message:{required:lt,minLength:on(1)},inboxId:{required:lt},scheduledAt:{required:lt},selectedAudience:{required:lt}},r=Lt(i,l),d=C(()=>a.uiFlags.value.isCreating),u=C(()=>{const N=new Date;return new Date(N.getTime()-N.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),m=(N,w,D)=>(N==null?void 0:N.map(H=>({value:H[w],label:H[D]})))??[],h=C(()=>m(a.labels.value,"id","title")),_=C(()=>m(a.inboxes.value,"id","name")),g=(N,w)=>r.value[N].$error?s(`CAMPAIGN.SMS.CREATE.FORM.${w}.ERROR`):"",T=C(()=>({title:g("title","TITLE"),message:g("message","MESSAGE"),inbox:g("inboxId","INBOX"),scheduledAt:g("scheduledAt","SCHEDULED_AT"),audience:g("selectedAudience","AUDIENCE")})),S=C(()=>r.value.$invalid),b=N=>N?new Date(N).toISOString():null,A=()=>{Object.assign(l,o)},y=()=>n("cancel"),x=()=>{var N;return{title:l.title,message:l.message,inbox_id:l.inboxId,scheduled_at:b(l.scheduledAt),audience:(N=l.selectedAudience)==null?void 0:N.map(w=>({id:w,type:"Label"}))}},$=async()=>{await r.value.$validate()&&(n("submit",x()),A(),y())};return(N,w)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze($,["prevent"])},[v(ln,{modelValue:l.title,"onUpdate:modelValue":w[0]||(w[0]=D=>l.title=D),label:I(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.LABEL"),placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.PLACEHOLDER"),message:T.value.title,"message-type":T.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(wr,{modelValue:l.message,"onUpdate:modelValue":w[1]||(w[1]=D=>l.message=D),label:I(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.LABEL"),placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.PLACEHOLDER"),"show-character-count":"",message:T.value.message,"message-type":T.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",OXe,[c("label",wXe,E(I(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.LABEL")),1),v(Jo,{id:"inbox",modelValue:l.inboxId,"onUpdate:modelValue":w[2]||(w[2]=D=>l.inboxId=D),options:_.value,"has-error":!!T.value.inbox,placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.PLACEHOLDER"),message:T.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",RXe,[c("label",$Xe,E(I(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL")),1),v(d2,{modelValue:l.selectedAudience,"onUpdate:modelValue":w[3]||(w[3]=D=>l.selectedAudience=D),options:h.value,label:I(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL"),placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!T.value.audience,message:T.value.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),v(ln,{modelValue:l.scheduledAt,"onUpdate:modelValue":w[4]||(w[4]=D=>l.scheduledAt=D),label:I(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:u.value,placeholder:I(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:T.value.scheduledAt,"message-type":T.value.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),c("div",MXe,[v(ce,{variant:"faded",color:"slate",type:"button",label:I(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:y},null,8,["label"]),v(ce,{label:I(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":d.value,disabled:d.value||S.value},null,8,["label","is-loading","disabled"])])],32))}},LXe={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6"},DXe={class:"text-base font-medium text-n-slate-12"},PXe={__name:"SMSCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=yt(),{t:a}=Pe(),o=async r=>{var d;try{await s.dispatch("campaigns/create",r),nn(gg.CREATE_CAMPAIGN,{type:_g.ONE_OFF}),_e(a("CAMPAIGN.SMS.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const m=((d=u==null?void 0:u.response)==null?void 0:d.message)||a("CAMPAIGN.SMS.CREATE.FORM.API.ERROR_MESSAGE");_e(m)}},l=r=>{o(r)},i=()=>n("close");return(r,d)=>(p(),f("div",LXe,[c("h3",DXe,E(I(a)("CAMPAIGN.SMS.CREATE.TITLE")),1),v(kXe,{onSubmit:l,onCancel:i})]))}},BXe={class:"flex flex-col gap-4 p-px"},FXe={__name:"SMSCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),V(Al,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[c("div",BXe,[(p(!0),f(fe,null,Ae(I(c2),s=>(p(),V(Yp,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},UXe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},GXe={__name:"SMSCampaignsPage",setup(e){const{t}=Pe(),n=Nn(),s=F(null),[a,o]=Xn(),l=ke("campaigns/getUIFlags"),i=C(()=>l.value.isFetching),r=F(null),d=C(()=>n["campaigns/getSMSCampaigns"].value),u=C(()=>{var h;return((h=d.value)==null?void 0:h.length)===0&&!i.value}),m=h=>{s.value=h,r.value.dialogRef.open()};return(h,_)=>(p(),V(q_,{"header-title":I(t)("CAMPAIGN.SMS.HEADER_TITLE"),"button-label":I(t)("CAMPAIGN.SMS.NEW_CAMPAIGN"),onClick:_[1]||(_[1]=g=>I(o)()),onClose:_[2]||(_[2]=g=>I(o)(!1))},{action:K(()=>[I(a)?(p(),V(PXe,{key:0,onClose:_[0]||(_[0]=g=>I(o)(!1))})):O("",!0)]),default:K(()=>[i.value?(p(),f("div",UXe,[v(qn)])):u.value?(p(),V(FXe,{key:2,title:I(t)("CAMPAIGN.SMS.EMPTY_STATE.TITLE"),subtitle:I(t)("CAMPAIGN.SMS.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),V(Z_,{key:1,campaigns:d.value,onDelete:m},null,8,["campaigns"])),v(Q_,{ref_key:"confirmDeleteCampaignDialogRef",ref:r,"selected-campaign":s.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},VXe={class:"flex flex-col gap-1"},HXe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},WXe={class:"flex flex-col gap-1"},KXe={for:"template",class:"mb-0.5 text-sm font-medium text-n-slate-12"},zXe={class:"mt-1 text-xs text-n-slate-11"},jXe={class:"flex flex-col gap-1"},YXe={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},XXe={class:"flex gap-3 justify-between items-center w-full"},qXe={__name:"WhatsAppCampaignForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a={uiFlags:ke("campaigns/getUIFlags"),labels:ke("labels/getLabels"),inboxes:ke("inboxes/getWhatsAppInboxes"),getFilteredWhatsAppTemplates:ke("inboxes/getFilteredWhatsAppTemplates")},o={title:"",inboxId:null,templateId:null,scheduledAt:null,selectedAudience:[]},l=os({...o}),i=F(null),r={title:{required:lt,minLength:on(1)},inboxId:{required:lt},templateId:{required:lt},scheduledAt:{required:lt},selectedAudience:{required:lt}},d=Lt(r,l),u=C(()=>a.uiFlags.value.isCreating),m=C(()=>{const B=new Date;return new Date(B.getTime()-B.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),h=(B,k,U)=>(B==null?void 0:B.map(G=>({value:G[k],label:G[U]})))??[],_=C(()=>h(a.labels.value,"id","title")),g=C(()=>h(a.inboxes.value,"id","name")),T=C(()=>l.inboxId?a.getFilteredWhatsAppTemplates.value(l.inboxId).map(k=>{const U=k.name.replace(/_/g," ").replace(/\b\w/g,G=>G.toUpperCase());return{value:k.id,label:`${U} (${k.language||"en"})`,template:k}}):[]),S=C(()=>{var B;return l.templateId?(B=T.value.find(k=>k.value===l.templateId))==null?void 0:B.template:null}),b=(B,k)=>d.value[B].$error?s(`CAMPAIGN.WHATSAPP.CREATE.FORM.${k}.ERROR`):"",A=C(()=>({title:b("title","TITLE"),inbox:b("inboxId","INBOX"),template:b("templateId","TEMPLATE"),scheduledAt:b("scheduledAt","SCHEDULED_AT"),audience:b("selectedAudience","AUDIENCE")})),y=C(()=>{var B,k;return((k=(B=i.value)==null?void 0:B.v$)==null?void 0:k.$invalid)===!1||!0}),x=C(()=>d.value.$invalid||!y.value),$=B=>B?new Date(B).toISOString():null,N=()=>{Object.assign(l,o),d.value.$reset()},w=()=>n("cancel"),D=()=>{var L;const B=S.value,k=i.value,U=(k==null?void 0:k.renderedTemplate)||"",G={name:(B==null?void 0:B.name)||"",namespace:(B==null?void 0:B.namespace)||"",category:(B==null?void 0:B.category)||"UTILITY",language:(B==null?void 0:B.language)||"en_US",processed_params:(k==null?void 0:k.processedParams)||{}};return{title:l.title,message:U,template_params:G,inbox_id:l.inboxId,scheduled_at:$(l.scheduledAt),audience:(L=l.selectedAudience)==null?void 0:L.map(M=>({id:M,type:"Label"}))}},H=async()=>{await d.value.$validate()&&(n("submit",D()),N(),w())};return ot(()=>l.inboxId,()=>{l.templateId=null}),(B,k)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze(H,["prevent"])},[v(ln,{modelValue:l.title,"onUpdate:modelValue":k[0]||(k[0]=U=>l.title=U),label:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TITLE.LABEL"),placeholder:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TITLE.PLACEHOLDER"),message:A.value.title,"message-type":A.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",VXe,[c("label",HXe,E(I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.INBOX.LABEL")),1),v(Jo,{id:"inbox",modelValue:l.inboxId,"onUpdate:modelValue":k[1]||(k[1]=U=>l.inboxId=U),options:g.value,"has-error":!!A.value.inbox,placeholder:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.INBOX.PLACEHOLDER"),message:A.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",WXe,[c("label",KXe,E(I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.LABEL")),1),v(Jo,{id:"template",modelValue:l.templateId,"onUpdate:modelValue":k[2]||(k[2]=U=>l.templateId=U),options:T.value,"has-error":!!A.value.template,placeholder:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.PLACEHOLDER"),message:A.value.template,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"]),c("p",zXe,E(I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.INFO")),1)]),S.value?(p(),V(z_,{key:0,ref_key:"templateParserRef",ref:i,template:S.value},null,8,["template"])):O("",!0),c("div",jXe,[c("label",YXe,E(I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.LABEL")),1),v(d2,{modelValue:l.selectedAudience,"onUpdate:modelValue":k[3]||(k[3]=U=>l.selectedAudience=U),options:_.value,label:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.LABEL"),placeholder:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!A.value.audience,message:A.value.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),v(ln,{modelValue:l.scheduledAt,"onUpdate:modelValue":k[4]||(k[4]=U=>l.scheduledAt=U),label:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:m.value,placeholder:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:A.value.scheduledAt,"message-type":A.value.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),c("div",XXe,[v(ce,{variant:"faded",color:"slate",type:"button",label:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:w},null,8,["label"]),v(ce,{label:I(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":u.value,disabled:u.value||x.value},null,8,["label","is-loading","disabled"])])],32))}},ZXe={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] rounded-xl border border-n-weak shadow-md max-h-[80vh] overflow-y-auto"},QXe={class:"p-6 flex flex-col gap-6"},JXe={class:"text-base font-medium text-n-slate-12 flex-shrink-0"},eqe={__name:"WhatsAppCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=yt(),{t:a}=Pe(),o=async r=>{var d;try{await s.dispatch("campaigns/create",r),nn(gg.CREATE_CAMPAIGN,{type:_g.ONE_OFF}),_e(a("CAMPAIGN.WHATSAPP.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const m=((d=u==null?void 0:u.response)==null?void 0:d.message)||a("CAMPAIGN.WHATSAPP.CREATE.FORM.API.ERROR_MESSAGE");_e(m)}},l=r=>{o(r)},i=()=>n("close");return(r,d)=>(p(),f("div",ZXe,[c("div",QXe,[c("h3",JXe,E(I(a)("CAMPAIGN.WHATSAPP.CREATE.TITLE")),1),v(qXe,{onSubmit:l,onCancel:i})])]))}},tqe={class:"flex flex-col gap-4 p-px"},nqe={__name:"WhatsAppCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),V(Al,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[c("div",tqe,[(p(!0),f(fe,null,Ae(I(c2),s=>(p(),V(Yp,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},sqe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},aqe={__name:"WhatsAppCampaignsPage",setup(e){const{t}=Pe(),n=Nn(),s=F(null),[a,o]=Xn(),l=ke("campaigns/getUIFlags"),i=C(()=>l.value.isFetching),r=F(null),d=C(()=>n["campaigns/getWhatsAppCampaigns"].value),u=C(()=>{var h;return((h=d.value)==null?void 0:h.length)===0&&!i.value}),m=h=>{s.value=h,r.value.dialogRef.open()};return(h,_)=>(p(),V(q_,{"header-title":I(t)("CAMPAIGN.WHATSAPP.HEADER_TITLE"),"button-label":I(t)("CAMPAIGN.WHATSAPP.NEW_CAMPAIGN"),onClick:_[1]||(_[1]=g=>I(o)()),onClose:_[2]||(_[2]=g=>I(o)(!1))},{action:K(()=>[I(a)?(p(),V(eqe,{key:0,onClose:_[0]||(_[0]=g=>I(o)(!1))})):O("",!0)]),default:K(()=>[i.value?(p(),f("div",sqe,[v(qn)])):u.value?(p(),V(nqe,{key:2,title:I(t)("CAMPAIGN.WHATSAPP.EMPTY_STATE.TITLE"),subtitle:I(t)("CAMPAIGN.WHATSAPP.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),V(Z_,{key:1,campaigns:d.value,onDelete:m},null,8,["campaigns"])),v(Q_,{ref_key:"confirmDeleteCampaignDialogRef",ref:r,"selected-campaign":s.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},lc={featureFlag:Mt.CAMPAIGNS,permissions:["administrator"]},oqe={routes:[{path:Bt("accounts/:accountId/campaigns"),component:RYe,children:[{path:"",redirect:e=>({name:"campaigns_ongoing_index",params:e.params})},{path:"ongoing",name:"campaigns_ongoing_index",meta:lc,redirect:e=>({name:"campaigns_livechat_index",params:e.params})},{path:"one_off",name:"campaigns_one_off_index",meta:lc,redirect:e=>({name:"campaigns_sms_index",params:e.params})},{path:"live_chat",name:"campaigns_livechat_index",meta:lc,component:IXe},{path:"sms",name:"campaigns_sms_index",meta:lc,component:GXe},{path:"whatsapp",name:"campaigns_whatsapp_index",meta:{...lc,featureFlag:Mt.WHATSAPP_CAMPAIGNS},component:aqe}]}]},lqe={class:"flex justify-between w-full gap-1"},iqe={class:"flex items-center gap-2"},rqe={class:"relative flex items-center group"},cqe={class:"flex items-center justify-between w-full gap-4"},dqe={class:"text-sm truncate text-n-slate-11"},uqe={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"},u2={__name:"AssistantCard",props:{id:{type:Number,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},updatedAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:a}=Br(),{t:o}=Pe(),[l,i]=Xn(),r=C(()=>{const m=[{label:o("CAPTAIN.ASSISTANTS.OPTIONS.VIEW_CONNECTED_INBOXES"),value:"viewConnectedInboxes",action:"viewConnectedInboxes",icon:"i-lucide-link"}];return a(["administrator"])&&m.push({label:o("CAPTAIN.ASSISTANTS.OPTIONS.EDIT_ASSISTANT"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:o("CAPTAIN.ASSISTANTS.OPTIONS.DELETE_ASSISTANT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),m}),d=C(()=>Ds(n.updatedAt)),u=({action:m,value:h})=>{i(!1),s("action",{action:m,value:h,id:n.id})};return(m,h)=>{const _=z("router-link"),g=_t("on-clickaway");return p(),V(Tl,null,{default:K(()=>[c("div",lqe,[v(_,{to:{name:"captain_assistants_edit",params:{assistantId:e.id}},class:"text-base text-n-slate-12 line-clamp-1 hover:underline transition-colors"},{default:K(()=>[Ee(E(e.name),1)]),_:1},8,["to"]),c("div",iqe,[pe((p(),f("div",rqe,[v(ce,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=T=>I(i)())}),I(l)?(p(),V(ua,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h[1]||(h[1]=T=>u(T))},null,8,["menu-items"])):O("",!0)])),[[g,()=>I(i)(!1)]])])]),c("div",cqe,[c("span",dqe,E(e.description||"Description not available"),1),c("span",uqe,E(d.value),1)])]),_:1})}}},Xp={__name:"DeleteDialog",props:{type:{type:String,required:!0},entity:{type:Object,required:!0},deletePayload:{type:Object,default:null}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=F(null),r=C(()=>s.type.toUpperCase()),d=async m=>{if(m)try{await l.dispatch(`captain${s.type}/delete`,m),a("deleteSuccess"),_e(o(`CAPTAIN.${r.value}.DELETE.SUCCESS_MESSAGE`))}catch{_e(o(`CAPTAIN.${r.value}.DELETE.ERROR_MESSAGE`))}},u=async()=>{var m;await d(s.deletePayload||s.entity.id),(m=i.value)==null||m.close()};return t({dialogRef:i}),(m,h)=>(p(),V(Ms,{ref_key:"deleteDialogRef",ref:i,type:"alert",title:I(o)(`CAPTAIN.${r.value}.DELETE.TITLE`),description:I(o)(`CAPTAIN.${r.value}.DELETE.DESCRIPTION`),"confirm-button-label":I(o)(`CAPTAIN.${r.value}.DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},pqe={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},mqe={class:"sticky top-0 z-10 px-6"},hqe={class:"w-full max-w-[60rem] mx-auto"},fqe={class:"flex items-start lg:items-center justify-between w-full py-6 lg:py-0 lg:h-20 gap-4 lg:gap-2 flex-col lg:flex-row"},gqe={class:"flex gap-4 items-center"},_qe={class:"text-xl font-medium text-n-slate-12"},vqe={key:1,class:"flex items-center gap-2"},bqe={key:0,class:"relative group/campaign-button"},Eqe={class:"flex-1 px-6 overflow-y-auto"},Tqe={class:"w-full max-w-[60rem] h-full mx-auto py-4"},Aqe={key:1,class:"flex items-center justify-center py-10 text-n-slate-11"},yqe={key:2},Sqe={key:3},Iqe={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"},gd={__name:"PageLayout",props:{currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},headerTitle:{type:String,default:""},backUrl:{type:[String,Object],default:""},buttonPolicy:{type:Array,default:()=>[]},buttonLabel:{type:String,default:""},featureFlag:{type:String,default:""},isFetching:{type:Boolean,default:!1},showKnowMore:{type:Boolean,default:!0},isEmpty:{type:Boolean,default:!1},showPaginationFooter:{type:Boolean,default:!0}},emits:["click","close","update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{shouldShowPaywall:a}=Br(),o=C(()=>a(n.featureFlag)),l=()=>{s("click")},i=r=>{s("update:currentPage",r)};return(r,d)=>{const u=_t("on-clickaway");return p(),f("section",pqe,[c("header",mqe,[c("div",hqe,[c("div",fqe,[c("div",gqe,[e.backUrl?(p(),V(ki,{key:0,to:e.backUrl},null,8,["to"])):O("",!0),at(r.$slots,"headerTitle",{},()=>[c("span",_qe,E(e.headerTitle),1)]),!e.isEmpty&&e.showKnowMore?(p(),f("div",vqe,[d[0]||(d[0]=c("div",{class:"w-0.5 h-4 rounded-2xl bg-n-weak"},null,-1)),at(r.$slots,"knowMore")])):O("",!0)]),!o.value&&e.buttonLabel?pe((p(),f("div",bqe,[v(_o,{permissions:e.buttonPolicy},{default:K(()=>[v(ce,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:l},null,8,["label"])]),_:1},8,["permissions"]),at(r.$slots,"action")])),[[u,()=>s("close")]]):O("",!0)])])]),c("main",Eqe,[c("div",Tqe,[o.value?O("",!0):at(r.$slots,"controls",{key:0}),e.isFetching?(p(),f("div",Aqe,[v(qn)])):o.value?(p(),f("div",yqe,[at(r.$slots,"paywall")])):e.isEmpty?(p(),f("div",Sqe,[at(r.$slots,"emptyState")])):at(r.$slots,"body",{key:4}),at(r.$slots,"default")])]),e.showPaginationFooter?(p(),f("footer",Iqe,[v(X_,{"current-page":e.currentPage,"total-items":e.totalCount,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":i},null,8,["current-page","total-items","items-per-page"])])):O("",!0)])}}},Cqe={class:"w-full max-w-[60rem] mx-auto h-full max-h-[448px] grid place-content-center"},J_={__name:"Paywall",setup(e){const t=En(),n=ke("getCurrentUser"),s=C(()=>n.value.type==="SuperAdmin"),{accountId:a,isOnChatwootCloud:o}=_s(),l=C(()=>o.value?"PAYWALL":"ENTERPRISE_PAYWALL"),i=()=>{t.push({name:"billing_settings_index",params:{accountId:a.value}})};return(r,d)=>(p(),f("div",Cqe,[v(N_,{class:"mx-auto","feature-prefix":"CAPTAIN","i18n-key":l.value,"is-super-admin":s.value,"is-on-chatwoot-cloud":I(o),onUpgrade:i},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])]))}},xqe={class:"flex flex-col gap-2.5"},Nqe={class:"mb-3 text-sm font-medium text-n-slate-12"},Oqe={class:"flex items-center gap-2"},wqe={class:"text-sm font-medium text-n-slate-12"},Rqe={class:"flex items-center gap-2"},$qe={class:"text-sm font-medium text-n-slate-12"},Mqe={class:"flex items-center gap-2"},kqe={class:"text-sm font-medium text-n-slate-12"},Lqe={class:"flex items-center justify-between w-full gap-3"},Dqe={__name:"AssistantForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},assistant:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o={uiFlags:ke("captainAssistants/getUIFlags")},i=os({...{name:"",description:"",productName:"",featureFaq:!1,featureMemory:!1,featureCitation:!1}}),r={name:{required:lt,minLength:on(1)},description:{required:lt,minLength:on(1)},productName:{required:lt,minLength:on(1)}},d=Lt(r,i),u=C(()=>o.uiFlags.value.creatingItem),m=(b,A)=>d.value[b].$error?a(`CAPTAIN.ASSISTANTS.FORM.${A}.ERROR`):"",h=C(()=>({name:m("name","NAME"),description:m("description","DESCRIPTION"),productName:m("productName","PRODUCT_NAME")})),_=()=>s("cancel"),g=()=>({name:i.name,description:i.description,config:{product_name:i.productName,feature_faq:i.featureFaq,feature_memory:i.featureMemory,feature_citation:i.featureCitation}}),T=async()=>{await d.value.$validate()&&s("submit",g())},S=b=>{if(!b)return;const{name:A,description:y,config:x}=b;Object.assign(i,{name:A,description:y,productName:x.product_name,featureFaq:x.feature_faq||!1,featureMemory:x.feature_memory||!1,featureCitation:x.feature_citation||!1})};return ot(()=>n.assistant,b=>{n.mode==="edit"&&b&&S(b)},{immediate:!0}),(b,A)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze(T,["prevent"])},[v(ln,{modelValue:i.name,"onUpdate:modelValue":A[0]||(A[0]=y=>i.name=y),label:I(a)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:h.value.name,"message-type":h.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:i.description,"onUpdate:modelValue":A[1]||(A[1]=y=>i.description=y),label:I(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:h.value.description,"message-type":h.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(ln,{modelValue:i.productName,"onUpdate:modelValue":A[2]||(A[2]=y=>i.productName=y),label:I(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:h.value.productName,"message-type":h.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("fieldset",xqe,[c("legend",Nqe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),c("label",Oqe,[pe(c("input",{"onUpdate:modelValue":A[3]||(A[3]=y=>i.featureFaq=y),type:"checkbox"},null,512),[[Xt,i.featureFaq]]),c("span",wqe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),c("label",Rqe,[pe(c("input",{"onUpdate:modelValue":A[4]||(A[4]=y=>i.featureMemory=y),type:"checkbox"},null,512),[[Xt,i.featureMemory]]),c("span",$qe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),c("label",Mqe,[pe(c("input",{"onUpdate:modelValue":A[5]||(A[5]=y=>i.featureCitation=y),type:"checkbox"},null,512),[[Xt,i.featureCitation]]),c("span",kqe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])]),c("div",Lqe,[v(ce,{type:"button",variant:"faded",color:"slate",label:I(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:_},null,8,["label"]),v(ce,{type:"submit",label:I(a)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},Pqe={__name:"CreateAssistantDialog",props:{selectedAssistant:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=F(null),r=F(null),d=T=>l.dispatch("captainAssistants/update",{id:s.selectedAssistant.id,...T}),u=C(()=>`CAPTAIN.ASSISTANTS.${s.type.toUpperCase()}`),m=T=>l.dispatch("captainAssistants/create",T),h=async T=>{try{s.type==="edit"?await d(T):await m(T),_e(o(`${u.value}.SUCCESS_MESSAGE`)),i.value.close()}catch(S){const b=(S==null?void 0:S.message)||o(`${u.value}.ERROR_MESSAGE`);_e(b)}},_=()=>{a("close")},g=()=>{i.value.close()};return t({dialogRef:i}),(T,S)=>(p(),V(Ms,{ref_key:"dialogRef",ref:i,type:"edit",title:I(o)(`${u.value}.TITLE`),description:I(o)("CAPTAIN.ASSISTANTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",onClose:_},{footer:K(()=>S[0]||(S[0]=[])),default:K(()=>[v(Dqe,{ref_key:"assistantForm",ref:r,mode:e.type,assistant:e.selectedAssistant,onSubmit:h,onCancel:g},null,8,["mode","assistant"])]),_:1},8,["title","description"]))}},Bqe={class:"custom-dashed-border rounded-2xl py-5 px-6"},Fqe={class:"flex flex-col md:flex-row items-start md:items-center gap-6"},Uqe={class:"flex-shrink-0 bg-gray-800 w-[7.5rem] h-[6.5rem] rounded-lg flex items-center justify-center overflow-hidden"},Gqe=["src","alt"],Vqe=["src","alt"],Hqe=["src","alt"],Wqe={class:"flex flex-col flex-1 gap-3 ltr:pr-8 rtl:pl-8"},Kqe={key:0,class:"text-n-slate-12 text-sm mb-0"},zqe={class:"flex gap-3"},ev={__name:"FeatureSpotlight",props:{title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""}},setup(e){const t=F(!1),n=()=>{t.value=!0},s=a=>{a&&window.open(a,"_blank")};return(a,o)=>(p(),f("section",Bqe,[c("div",Fqe,[c("div",Uqe,[!t.value&&e.thumbnail?(p(),f("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover rounded-lg",loading:"lazy",onError:n},null,40,Gqe)):(p(),f(fe,{key:1},[e.fallbackThumbnailDark?(p(),f("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",class:"w-full h-full object-cover hidden dark:block rounded-lg",loading:"lazy"},null,8,Vqe)):O("",!0),e.fallbackThumbnail?(p(),f("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover block dark:hidden rounded-lg",loading:"lazy"},null,8,Hqe)):O("",!0)],64))]),c("div",Wqe,[e.note?(p(),f("p",Kqe,E(e.note),1)):O("",!0),c("div",zqe,[at(a.$slots,"actions",{},()=>[e.videoUrl?(p(),V(ce,{key:0,label:a.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",onClick:o[0]||(o[0]=l=>s(e.videoUrl))},null,8,["label"])):O("",!0),e.learnMoreUrl?(p(),V(ce,{key:1,label:a.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",icon:"i-lucide-arrow-up-right",onClick:o[1]||(o[1]=l=>s(e.learnMoreUrl))},null,8,["label"])):O("",!0)])])])])]))}},jqe=[{account_id:2,config:{product_name:"HelpDesk Pro"},created_at:1736033561,description:"An advanced AI assistant designed to enhance customer support solutions by automating workflows and providing instant responses.",id:4,name:"Support Genie"},{account_id:3,config:{product_name:"CRM Tools"},created_at:1736033562,description:"Helps streamline customer relationship management by organizing contacts, automating follow-ups, and providing insights.",id:5,name:"CRM Assistant"},{account_id:4,config:{product_name:"SalesFlow"},created_at:1736033563,description:"Optimizes your sales pipeline by tracking prospects, forecasting sales, and automating administrative tasks.",id:6,name:"SalesBot"},{account_id:5,config:{product_name:"TicketMaster AI"},created_at:1736033564,description:"Automates ticket assignment, categorization, and customer query responses to enhance support efficiency.",id:7,name:"TicketBot"},{account_id:6,config:{product_name:"FinanceAssist"},created_at:1736033565,description:"Provides financial analytics, reporting, and insights, helping teams make data-driven financial decisions.",id:8,name:"Finance Wizard"},{account_id:8,config:{product_name:"HR Assistant"},created_at:1736033567,description:"Streamlines HR operations including employee management, payroll, and recruitment processes.",id:10,name:"HR Helper"}],Yqe=[{account_id:1,assistant:{id:1,name:"Helper Pro"},content:"Comprehensive guide on using conversation filters to manage chats effectively.",created_at:1736143272,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688192-how-to-use-conversation-filters",id:3059,name:"How to use Conversation Filters? | User Guide | Chatwoot",status:"available"},{account_id:2,assistant:{id:2,name:"Support Genie"},content:"Step-by-step guide for automating ticket assignments and improving support workflow in Chatwoot.",created_at:1736143273,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688200-automating-ticket-assignments",id:3060,name:"Automating Ticket Assignments | User Guide | Chatwoot",status:"available"},{account_id:3,assistant:{id:3,name:"CRM Assistant"},content:"A detailed guide on managing and organizing customer profiles for better relationship management.",created_at:1736143274,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688210-managing-customer-profiles",id:3061,name:"Managing Customer Profiles | User Guide | Chatwoot",status:"available"},{account_id:4,assistant:{id:4,name:"SalesBot"},content:"Learn how to optimize sales tracking and improve your sales forecasting using advanced features.",created_at:1736143275,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688220-sales-tracking-guide",id:3062,name:"Sales Tracking Guide | User Guide | Chatwoot",status:"available"},{account_id:5,assistant:{id:5,name:"TicketBot"},content:"How to efficiently create, manage, and resolve tickets in Chatwoot.",created_at:1736143276,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688230-managing-tickets",id:3063,name:"Managing Tickets | User Guide | Chatwoot",status:"available"},{account_id:6,assistant:{id:6,name:"Finance Wizard"},content:"Detailed guide on how to use financial reporting tools and generate insightful analytics.",created_at:1736143277,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688240-financial-reporting",id:3064,name:"Financial Reporting | User Guide | Chatwoot",status:"available"}],Xqe=[{account_id:1,answer:"Messenger may be deactivated because you are on a free plan or the limit for inboxes might have been reached.",created_at:1736283330,id:87,question:"Why is my Messenger in Chatwoot deactivated?",status:"pending",assistant:{account_id:1,config:{product_name:"Chatwoot"},created_at:1736033280,description:"Assists with general queries and system-wide issues.",id:1,name:"Assistant 2"}},{account_id:2,answer:"You can integrate your WhatsApp account by navigating to the Integrations section and selecting the WhatsApp integration option.",created_at:1736283340,id:88,question:"How do I integrate WhatsApp with Chatwoot?",assistant:{account_id:2,config:{product_name:"Chatwoot"},created_at:1736033281,description:"Helps with integration and setup-related inquiries.",id:2,name:"Assistant 3"}},{account_id:3,answer:"To reset your password, go to the login page and click on 'Forgot Password', then follow the instructions sent to your email.",created_at:1736283350,id:89,question:"How can I reset my password in Chatwoot?",assistant:{account_id:3,config:{product_name:"Chatwoot"},created_at:1736033282,description:"Handles account management and recovery support.",id:3,name:"Assistant 4"}},{account_id:4,answer:"You can enable the dark mode in settings by navigating to 'Appearance' and selecting 'Dark Mode'.",created_at:1736283360,id:90,question:"How do I enable dark mode in Chatwoot?",assistant:{account_id:4,config:{product_name:"Chatwoot"},created_at:1736033283,description:"Helps with UI and theme-related inquiries.",id:4,name:"Assistant 5"}},{account_id:5,answer:"To add a new team member, navigate to 'Settings', then 'Team', and click on 'Add Team Member'.",created_at:1736283370,id:91,question:"How do I add a new team member in Chatwoot?",assistant:{account_id:5,config:{product_name:"Chatwoot"},created_at:1736033284,description:"Supports team management and user access-related queries.",id:5,name:"Assistant 6"}},{account_id:6,answer:"Campaigns in Chatwoot allow you to send targeted messages to specific user segments. You can create them in the 'Campaigns' section.",created_at:1736283380,id:92,question:"What are campaigns in Chatwoot?",assistant:{account_id:6,config:{product_name:"Chatwoot"},created_at:1736033285,description:"Specialized in marketing, campaign management, and messaging strategies.",id:6,name:"Assistant 7"}}],qqe=[{id:7,name:"Email Support",channel_type:Ut.EMAIL,email:"support@company.com"},{id:1,name:"Website Chat",channel_type:Ut.WEB},{id:2,name:"Facebook Support",channel_type:Ut.FB},{id:5,name:"SMS Service",channel_type:Ut.TWILIO,messaging_service_sid:"MGxxxxxx"},{id:6,name:"WhatsApp Support",channel_type:Ut.WHATSAPP,phone_number:"+1987654321"},{id:8,name:"Telegram Support",channel_type:Ut.TELEGRAM},{id:9,name:"LINE Support",channel_type:Ut.LINE},{id:10,name:"API Channel",channel_type:Ut.API},{id:11,name:"SMS Basic",channel_type:Ut.SMS,phone_number:"+1555555555"}],Zqe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},Qqe={__name:"AssistantPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),f(fe,null,[v(ev,{title:a.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:a.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-dark.svg","learn-more-url":"https://chwt.app/captain-assistant",class:"mb-8"},null,8,["title","note"]),v(Al,{title:a.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.TITLE"),subtitle:a.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[c("div",Zqe,[(p(!0),f(fe,null,Ae(I(jqe).slice(0,5),(l,i)=>(p(),V(u2,{id:l.id,key:`assistant-${i}`,name:l.name,description:l.description,"updated-at":l.created_at},null,8,["id","name","description","updated-at"]))),128))])]),actions:K(()=>[v(ce,{label:a.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},Jqe={class:"relative"},eZe={key:0},tZe={class:"absolute top-full mt-6 ltr:left-0 rtl:right-0 outline outline-1 outline-n-weak bg-n-alpha-3 backdrop-blur-[100px] rounded-xl p-4 w-80"},nZe={class:"relative flex flex-col items-start gap-4 z-20"},sZe={class:"flex-shrink-0 bg-gray-800 w-full h-[7.5rem] rounded-lg"},aZe=["src","alt"],oZe=["src","alt"],lZe=["src","alt"],iZe={key:0,class:"text-n-slate-12 text-start text-sm mb-0"},rZe={class:"flex gap-3 justify-between w-full"},tv={__name:"FeatureSpotlightPopover",props:{buttonLabel:{type:String,default:""},title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""}},setup(e){const t=F(!1),[n,s]=Xn(),a=()=>{t.value=!0},o=l=>{l&&window.open(l,"_blank")};return(l,i)=>(p(),f("div",Jqe,[v(ce,{id:"togglePopup",label:e.buttonLabel,slate:"",ghost:"",sm:"",class:re({"bg-n-alpha-2":I(n)}),onClick:i[0]||(i[0]=r=>I(s)(!I(n)))},null,8,["label","class"]),I(n)?pe((p(),f("div",eZe,[c("section",tZe,[i[3]||(i[3]=c("div",{class:"absolute -top-[0.77rem] ltr:left-12 rtl:right-12 w-6 h-6 ltr:rotate-45 rtl:-rotate-45 rtl:rounded-tr ltr:rounded-tl rtl:border-r ltr:border-l border-t border-n-weak bg-n-alpha-3 z-10"},null,-1)),c("div",nZe,[c("div",sZe,[!t.value&&e.thumbnail?(p(),f("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover rounded-lg",onError:a},null,40,aZe)):(p(),f(fe,{key:1},[e.fallbackThumbnailDark?(p(),f("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover hidden dark:block"},null,8,oZe)):O("",!0),e.fallbackThumbnail?(p(),f("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover block dark:hidden"},null,8,lZe)):O("",!0)],64))]),e.note?(p(),f("p",iZe,E(e.note),1)):O("",!0),c("div",rZe,[at(l.$slots,"actions",{},()=>[e.videoUrl?(p(),V(ce,{key:0,label:l.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",class:"w-full",onClick:i[1]||(i[1]=r=>o(e.videoUrl))},null,8,["label"])):O("",!0),e.learnMoreUrl?(p(),V(ce,{key:1,label:l.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",class:"w-full",icon:"i-lucide-arrow-up-right",onClick:i[2]||(i[2]=r=>o(e.learnMoreUrl))},null,8,["label"])):O("",!0)])])])])])),[[I(ca),[()=>I(n)&&(n.value=!1),{ignore:["#togglePopup"]}]]]):O("",!0)]))}},p2={__name:"LimitBanner",setup(e){const t=En(),{accountId:n}=_s(),{responseLimits:s,fetchLimits:a}=t_(),o=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},l=C(()=>{if(!s.value)return!1;const{consumed:i,totalCount:r}=s.value;return!i||!r?!1:i/r>.8});return pt(a),(i,r)=>pe((p(),V(Ep,{color:"amber","action-label":i.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:o},{default:K(()=>[Ee(E(i.$t("CAPTAIN.BANNER.RESPONSES")),1)]),_:1},8,["action-label"])),[[pn,l.value]])}},cZe={class:"flex flex-col gap-4"},dZe={__name:"Index",setup(e){const t=En(),n=yt(),s=F(""),a=ke("captainAssistants/getUIFlags"),o=ke("captainAssistants/getRecords"),l=C(()=>a.value.fetchingList),i=F(null),r=F(null),d=()=>{r.value.dialogRef.open()},u=F(null),m=()=>{s.value="create",jt(()=>u.value.dialogRef.open())},h=()=>{t.push({name:"captain_assistants_edit",params:{assistantId:i.value.id}})},_=()=>{t.push({name:"captain_assistants_inboxes_index",params:{assistantId:i.value.id}})},g=({action:S,id:b})=>{i.value=o.value.find(A=>b===A.id),jt(()=>{S==="delete"&&d(),S==="edit"&&h(),S==="viewConnectedInboxes"&&_()})},T=()=>{s.value="",i.value=null};return pt(()=>n.dispatch("captainAssistants/get")),(S,b)=>(p(),V(gd,{"header-title":S.$t("CAPTAIN.ASSISTANTS.HEADER"),"button-label":S.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),"button-policy":["administrator"],"show-pagination-footer":!1,"is-fetching":l.value,"is-empty":!I(o).length,"feature-flag":I(Mt).CAPTAIN,onClick:m},{knowMore:K(()=>[v(tv,{"button-label":S.$t("CAPTAIN.HEADER_KNOW_MORE"),title:S.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:S.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-popover-dark.svg","learn-more-url":"https://chwt.app/captain-assistant"},null,8,["button-label","title","note"])]),emptyState:K(()=>[v(Qqe,{onClick:m})]),paywall:K(()=>[v(J_)]),body:K(()=>[v(p2,{class:"mb-5"}),c("div",cZe,[(p(!0),f(fe,null,Ae(I(o),A=>(p(),V(u2,{id:A.id,key:A.id,name:A.name,description:A.description,"updated-at":A.updated_at||A.created_at,"created-at":A.created_at,onAction:g},null,8,["id","name","description","updated-at","created-at"]))),128))])]),default:K(()=>[i.value?(p(),V(Xp,{key:0,ref_key:"deleteAssistantDialog",ref:r,entity:i.value,type:"Assistants"},null,8,["entity"])):O("",!0),s.value?(p(),V(Pqe,{key:1,ref_key:"createAssistantDialog",ref:u,type:s.value,"selected-assistant":i.value,onClose:T},null,8,["type","selected-assistant"])):O("",!0)]),_:1},8,["header-title","button-label","is-fetching","is-empty","feature-flag"]))}},uZe={class:"border rounded-lg border-n-slate-4"},pZe={class:"text-sm font-medium text-n-slate-12"},mZe={key:0,class:"p-4 pt-0"},nu={__name:"Accordion",props:{title:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},setup(e){const t=e,n=F(t.isOpen),s=()=>{n.value=!n.value};return ot(()=>t.isOpen,a=>{n.value=a}),(a,o)=>(p(),f("div",uZe,[c("button",{class:"flex items-center justify-between w-full p-4 text-left",onClick:s},[c("span",pZe,E(e.title),1),c("span",{class:re(["w-5 h-5 transition-transform duration-200 i-lucide-chevron-down",{"rotate-180":n.value}])},null,2)]),n.value?(p(),f("div",mZe,[at(a.$slots,"default")])):O("",!0)]))}},hZe={class:"flex flex-col gap-4 pt-4"},fZe={class:"flex justify-end"},gZe={class:"flex flex-col gap-4"},_Ze={class:"flex flex-col gap-2 mt-4"},vZe={class:"text-sm font-medium text-n-slate-12"},bZe={class:"flex items-center gap-4"},EZe={class:"text-sm text-n-slate-12"},TZe={class:"text-sm text-n-slate-11 italic"},AZe={class:"flex justify-end"},yZe={class:"flex flex-col gap-4 pt-4"},SZe={class:"flex justify-end"},IZe={class:"flex flex-col gap-4 pt-4"},CZe={class:"flex flex-col gap-2"},xZe={class:"text-sm font-medium text-n-slate-12"},NZe={class:"flex flex-col gap-2"},OZe={class:"flex items-center gap-2"},wZe={class:"flex items-center gap-2"},RZe={class:"flex items-center gap-2"},$Ze={class:"flex justify-end"},MZe={__name:"EditAssistantForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o={uiFlags:ke("captainAssistants/getUIFlags")},i=os({...{name:"",description:"",productName:"",welcomeMessage:"",handoffMessage:"",resolutionMessage:"",instructions:"",features:{conversationFaqs:!1,memories:!1,citations:!1},temperature:1}}),r={name:{required:lt,minLength:on(1)},description:{required:lt,minLength:on(1)},productName:{required:lt,minLength:on(1)},welcomeMessage:{minLength:on(1)},handoffMessage:{minLength:on(1)},resolutionMessage:{minLength:on(1)},instructions:{minLength:on(1)}},d=Lt(r,i),u=C(()=>o.uiFlags.value.creatingItem),m=A=>d.value[A].$error?d.value[A].$errors[0].$message:"",h=C(()=>({name:m("name"),description:m("description"),productName:m("productName"),welcomeMessage:m("welcomeMessage"),handoffMessage:m("handoffMessage"),resolutionMessage:m("resolutionMessage"),instructions:m("instructions")})),_=A=>{const{config:y={}}=A;i.name=A.name,i.description=A.description,i.productName=y.product_name,i.welcomeMessage=y.welcome_message,i.handoffMessage=y.handoff_message,i.resolutionMessage=y.resolution_message,i.instructions=y.instructions,i.features={conversationFaqs:y.feature_faq||!1,memories:y.feature_memory||!1,citations:y.feature_citation||!1},i.temperature=y.temperature||1},g=async()=>{if(!await Promise.all([d.value.name.$validate(),d.value.description.$validate(),d.value.productName.$validate()]).then(x=>x.every(Boolean)))return;const y={name:i.name,description:i.description,config:{...n.assistant.config,product_name:i.productName}};s("submit",y)},T=async()=>{if(!await Promise.all([d.value.welcomeMessage.$validate(),d.value.handoffMessage.$validate(),d.value.resolutionMessage.$validate()]).then(x=>x.every(Boolean)))return;const y={config:{...n.assistant.config,welcome_message:i.welcomeMessage,handoff_message:i.handoffMessage,resolution_message:i.resolutionMessage}};s("submit",y)},S=async()=>{if(!await d.value.instructions.$validate())return;const y={config:{...n.assistant.config,temperature:i.temperature||1,instructions:i.instructions}};s("submit",y)},b=()=>{const A={config:{...n.assistant.config,feature_faq:i.features.conversationFaqs,feature_memory:i.features.memories,feature_citation:i.features.citations}};s("submit",A)};return ot(()=>n.assistant,A=>{n.mode==="edit"&&A&&_(A)},{immediate:!0}),(A,y)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:y[10]||(y[10]=ze((...x)=>A.handleSubmit&&A.handleSubmit(...x),["prevent"]))},[v(nu,{title:I(a)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.BASIC_INFO"),"is-open":""},{default:K(()=>[c("div",hZe,[v(ln,{modelValue:i.name,"onUpdate:modelValue":y[0]||(y[0]=x=>i.name=x),label:I(a)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:h.value.name,"message-type":h.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:i.description,"onUpdate:modelValue":y[1]||(y[1]=x=>i.description=x),label:I(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:h.value.description,"message-type":h.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(ln,{modelValue:i.productName,"onUpdate:modelValue":y[2]||(y[2]=x=>i.productName=x),label:I(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:h.value.productName,"message-type":h.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",fZe,[v(ce,{size:"small",loading:u.value,onClick:g},{default:K(()=>[Ee(E(I(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE")),1)]),_:1},8,["loading"])])])]),_:1},8,["title"]),v(nu,{title:I(a)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.INSTRUCTIONS")},{default:K(()=>[c("div",gZe,[v(Ws,{modelValue:i.instructions,"onUpdate:modelValue":y[3]||(y[3]=x=>i.instructions=x),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.INSTRUCTIONS.PLACEHOLDER"),message:h.value.instructions,"max-length":2e4,"message-type":h.value.instructions?"error":"info"},null,8,["modelValue","placeholder","message","message-type"]),c("div",_Ze,[c("label",vZe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.LABEL")),1),c("div",bZe,[pe(c("input",{"onUpdate:modelValue":y[4]||(y[4]=x=>i.temperature=x),type:"range",min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[mt,i.temperature]]),c("span",EZe,E(i.temperature),1)]),c("p",TZe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.DESCRIPTION")),1)]),c("div",AZe,[v(ce,{size:"small",loading:u.value,label:I(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:S},null,8,["loading","label"])])])]),_:1},8,["title"]),v(nu,{title:I(a)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.SYSTEM_MESSAGES")},{default:K(()=>[c("div",yZe,[v(Ws,{modelValue:i.handoffMessage,"onUpdate:modelValue":y[5]||(y[5]=x=>i.handoffMessage=x),label:I(a)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.PLACEHOLDER"),message:h.value.handoffMessage,"message-type":h.value.handoffMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:i.resolutionMessage,"onUpdate:modelValue":y[6]||(y[6]=x=>i.resolutionMessage=x),label:I(a)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.PLACEHOLDER"),message:h.value.resolutionMessage,"message-type":h.value.resolutionMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",SZe,[v(ce,{size:"small",loading:u.value,label:I(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:T},null,8,["loading","label"])])])]),_:1},8,["title"]),v(nu,{title:I(a)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.FEATURES")},{default:K(()=>[c("div",IZe,[c("div",CZe,[c("label",xZe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),c("div",NZe,[c("label",OZe,[pe(c("input",{"onUpdate:modelValue":y[7]||(y[7]=x=>i.features.conversationFaqs=x),type:"checkbox"},null,512),[[Xt,i.features.conversationFaqs]]),Ee(" "+E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),c("label",wZe,[pe(c("input",{"onUpdate:modelValue":y[8]||(y[8]=x=>i.features.memories=x),type:"checkbox"},null,512),[[Xt,i.features.memories]]),Ee(" "+E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),c("label",RZe,[pe(c("input",{"onUpdate:modelValue":y[9]||(y[9]=x=>i.features.citations=x),type:"checkbox"},null,512),[[Xt,i.features.citations]]),Ee(" "+E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])])]),c("div",$Ze,[v(ce,{size:"small",loading:u.value,label:I(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:b},null,8,["loading","label"])])])]),_:1},8,["title"])],32))}},kZe=["innerHTML"],LZe={key:0,class:"flex justify-start"},DZe={class:"flex items-start gap-1.5"},PZe={__name:"MessageList",props:{messages:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){const t=e,n=F(null),{t:s}=Pe(),{formatMessage:a}=$a(),o=m=>m==="user",l=m=>o(m)?"justify-end":"justify-start",i=m=>o(m)?"flex-row-reverse":"flex-row",r=m=>o(m)?s("CAPTAIN.PLAYGROUND.USER"):s("CAPTAIN.PLAYGROUND.ASSISTANT"),d=m=>o(m)?"bg-n-strong text-n-white":"bg-n-solid-iris text-n-slate-12";return ot(()=>t.messages.length,async()=>{await jt(),n.value&&(n.value.scrollTop=n.value.scrollHeight)}),(m,h)=>(p(),f("div",{ref_key:"messageContainer",ref:n,class:"flex-1 overflow-y-auto mb-4 space-y-2"},[(p(!0),f(fe,null,Ae(e.messages,(_,g)=>(p(),f("div",{key:g,class:re(["flex",l(_.sender)])},[c("div",{class:re(["flex items-start gap-1.5",i(_.sender)])},[v(Ft,{name:r(_.sender),"rounded-full":"",size:24},null,8,["name"]),c("div",{class:re(["max-w-[80%] rounded-lg p-3 text-sm",d(_.sender)])},[c("div",{class:"break-words",innerHTML:I(a)(_.content)},null,8,kZe)],2)],2)],2))),128)),e.isLoading?(p(),f("div",LZe,[c("div",DZe,[v(Ft,{name:r("assistant"),"rounded-full":"",size:24},null,8,["name"]),h[0]||(h[0]=Fo('<div class="max-w-sm rounded-lg p-3 text-sm bg-n-solid-iris text-n-slate-12"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.2s]"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.4s]"></div></div></div>',1))])])):O("",!0)],512))}},BZe={class:"flex flex-col h-full rounded-lg p-4 border border-n-slate-4 text-n-slate-11"},FZe={class:"mb-4"},UZe={class:"flex justify-between items-center mb-1"},GZe={class:"text-lg font-medium"},VZe={class:"text-sm text-n-slate-11"},HZe={class:"flex items-center bg-n-solid-1 outline outline-n-container rounded-lg p-3"},WZe=["placeholder"],KZe={class:"text-xs text-n-slate-11 pt-2 text-center"},zZe={__name:"AssistantPlayground",props:{assistantId:{type:Number,required:!0}},setup(e){const{t}=Pe(),n=F([]),s=F(""),a=F(!1),o=()=>n.value.map(r=>({role:r.sender,content:r.content})),l=()=>{n.value=[],s.value=""},i=async()=>{if(!s.value.trim()||a.value)return;const r={content:s.value,sender:"user",timestamp:new Date().toISOString()};n.value.push(r);const d=s.value;s.value="";try{a.value=!0;const{data:u}=await HN.playground({assistantId:e.assistantId,messageContent:d,messageHistory:o()});n.value.push({content:u.response,sender:"assistant",timestamp:new Date().toISOString()})}catch(u){console.error("Error getting assistant response:",u)}finally{a.value=!1}};return(r,d)=>(p(),f("div",BZe,[c("div",FZe,[c("div",UZe,[c("h3",GZe,E(I(t)("CAPTAIN.PLAYGROUND.HEADER")),1),v(ce,{ghost:"",size:"small",icon:"i-lucide-rotate-ccw",onClick:l})]),c("p",VZe,E(I(t)("CAPTAIN.PLAYGROUND.DESCRIPTION")),1)]),v(PZe,{messages:n.value,"is-loading":a.value},null,8,["messages","is-loading"]),c("div",HZe,[pe(c("input",{"onUpdate:modelValue":d[0]||(d[0]=u=>s.value=u),class:"flex-1 bg-transparent border-none focus:outline-none text-sm mb-0",placeholder:I(t)("CAPTAIN.PLAYGROUND.MESSAGE_PLACEHOLDER"),onKeyup:Hn(i,["enter"])},null,40,WZe),[[mt,s.value]]),v(ce,{ghost:"",size:"small",disabled:!s.value.trim(),icon:"i-lucide-send",onClick:i},null,8,["disabled"])]),c("p",KZe,E(I(t)("CAPTAIN.PLAYGROUND.CREDIT_NOTE")),1)]))}},jZe={class:"px-6 flex flex-col w-full h-screen overflow-y-auto bg-n-background"},YZe={class:"max-w-[60rem] mx-auto flex flex-col w-full h-full mb-4"},XZe={class:"mb-7 sticky top-0 bg-n-background pt-4 z-20"},qZe={class:"flex gap-16 w-full flex-1 pb-16"},ZZe={key:0,class:"flex flex-col w-full"},QZe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},JZe={key:1},eQe={key:1,class:"flex w-full"},tQe={key:0,class:"sticky bottom-0 z-10 pb-4"},qp={__name:"SettingsPageLayout",props:{isFetching:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},showPaginationFooter:{type:Boolean,default:!1},breadcrumbItems:{type:Array,default:()=>[]}},emits:["update:currentPage"],setup(e,{emit:t}){const n=t,s=En(),a=l=>{n("update:currentPage",l)},o=l=>{s.push({name:l.routeName})};return(l,i)=>(p(),f("section",jZe,[c("div",YZe,[c("header",XZe,[v(o2,{items:e.breadcrumbItems,onClick:o},null,8,["items"])]),c("main",qZe,[l.$slots.body||l.$slots.emptyState||e.isFetching?(p(),f("section",ZZe,[e.isFetching?(p(),f("div",QZe,[v(qn)])):e.isEmpty?(p(),f("div",JZe,[at(l.$slots,"emptyState")])):at(l.$slots,"body",{key:2})])):O("",!0),l.$slots.controls?(p(),f("section",eQe,[at(l.$slots,"controls")])):O("",!0)]),e.showPaginationFooter?(p(),f("footer",tQe,[v(X_,{"current-page":e.currentPage,"total-items":e.totalCount,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":a},null,8,["current-page","total-items","items-per-page"])])):O("",!0)])]))}},nQe={class:"flex flex-col items-start gap-2"},sQe={class:"text-n-slate-12 text-base font-medium"},aQe={class:"text-n-slate-11 text-sm"},hr={__name:"SettingsHeader",props:{heading:{type:String,required:!0},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("header",nQe,[c("h2",sQe,E(e.heading),1),c("p",aQe,E(e.description),1)]))}},oQe={class:"flex flex-col gap-6"},lQe={class:"flex flex-col gap-2"},iQe={class:"text-sm font-medium text-n-slate-12"},rQe={class:"flex flex-col gap-2"},cQe={class:"flex items-center gap-2"},dQe={class:"flex items-center gap-2"},uQe={class:"flex items-center gap-2"},pQe={__name:"AssistantBasicSettingsForm",props:{assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),l=os({...{name:"",description:"",productName:"",features:{conversationFaqs:!1,memories:!1,citations:!1}}}),i={name:{required:lt,minLength:on(1)},description:{required:lt,minLength:on(1)},productName:{required:lt,minLength:on(1)}},r=Lt(i,l),d=_=>r.value[_].$error?r.value[_].$errors[0].$message:"",u=C(()=>({name:d("name"),description:d("description"),productName:d("productName")})),m=_=>{const{config:g={}}=_;l.name=_.name,l.description=_.description,l.productName=g.product_name,l.features={conversationFaqs:g.feature_faq||!1,memories:g.feature_memory||!1,citations:g.feature_citation||!1}},h=async()=>{if(!await Promise.all([r.value.name.$validate(),r.value.description.$validate(),r.value.productName.$validate()]).then(T=>T.every(Boolean)))return;const g={name:l.name,description:l.description,config:{...n.assistant.config,product_name:l.productName,feature_faq:l.features.conversationFaqs,feature_memory:l.features.memories,feature_citation:l.features.citations}};s("submit",g)};return ot(()=>n.assistant,_=>{_&&m(_)},{immediate:!0}),(_,g)=>(p(),f("div",oQe,[v(ln,{modelValue:l.name,"onUpdate:modelValue":g[0]||(g[0]=T=>l.name=T),label:I(a)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:u.value.name,"message-type":u.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(ln,{modelValue:l.productName,"onUpdate:modelValue":g[1]||(g[1]=T=>l.productName=T),label:I(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:u.value.productName,"message-type":u.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:l.description,"onUpdate:modelValue":g[2]||(g[2]=T=>l.description=T),label:I(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:u.value.description,"message-type":u.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",lQe,[c("label",iQe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),c("div",rQe,[c("label",cQe,[pe(c("input",{"onUpdate:modelValue":g[3]||(g[3]=T=>l.features.conversationFaqs=T),type:"checkbox"},null,512),[[Xt,l.features.conversationFaqs]]),Ee(" "+E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),c("label",dQe,[pe(c("input",{"onUpdate:modelValue":g[4]||(g[4]=T=>l.features.memories=T),type:"checkbox"},null,512),[[Xt,l.features.memories]]),Ee(" "+E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),c("label",uQe,[pe(c("input",{"onUpdate:modelValue":g[5]||(g[5]=T=>l.features.citations=T),type:"checkbox"},null,512),[[Xt,l.features.citations]]),Ee(" "+E(I(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])])]),c("div",null,[v(ce,{label:I(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:h},null,8,["label"])])]))}},mQe={class:"flex flex-col gap-6"},hQe={class:"flex flex-col gap-2"},fQe={class:"text-sm font-medium text-n-slate-12"},gQe={class:"flex items-center gap-4"},_Qe={class:"text-sm text-n-slate-12"},vQe={class:"text-sm text-n-slate-11 italic"},bQe={__name:"AssistantSystemSettingsForm",props:{assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),l=os({...{handoffMessage:"",resolutionMessage:"",temperature:1}}),i={handoffMessage:{minLength:on(1)},resolutionMessage:{minLength:on(1)}},r=Lt(i,l),d=_=>r.value[_].$error?r.value[_].$errors[0].$message:"",u=C(()=>({handoffMessage:d("handoffMessage"),resolutionMessage:d("resolutionMessage")})),m=_=>{const{config:g={}}=_;l.handoffMessage=g.handoff_message,l.resolutionMessage=g.resolution_message,l.temperature=g.temperature||1},h=async()=>{if(!await Promise.all([r.value.handoffMessage.$validate(),r.value.resolutionMessage.$validate()]).then(T=>T.every(Boolean)))return;const g={config:{...n.assistant.config,handoff_message:l.handoffMessage,resolution_message:l.resolutionMessage,temperature:l.temperature||1}};s("submit",g)};return ot(()=>n.assistant,_=>{_&&m(_)},{immediate:!0}),(_,g)=>(p(),f("div",mQe,[v(Ws,{modelValue:l.handoffMessage,"onUpdate:modelValue":g[0]||(g[0]=T=>l.handoffMessage=T),label:I(a)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.PLACEHOLDER"),message:u.value.handoffMessage,"message-type":u.value.handoffMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:l.resolutionMessage,"onUpdate:modelValue":g[1]||(g[1]=T=>l.resolutionMessage=T),label:I(a)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.PLACEHOLDER"),message:u.value.resolutionMessage,"message-type":u.value.resolutionMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",hQe,[c("label",fQe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.LABEL")),1),c("div",gQe,[pe(c("input",{"onUpdate:modelValue":g[2]||(g[2]=T=>l.temperature=T),type:"range",min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[mt,l.temperature]]),c("span",_Qe,E(l.temperature),1)]),c("p",vQe,E(I(a)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.DESCRIPTION")),1)]),c("div",null,[v(ce,{label:I(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:h},null,8,["label"])])]))}},EQe={class:"flex items-center justify-between w-full gap-1 h-8"},TQe={class:"text-sm font-medium text-n-slate-12 line-clamp-1"},AQe={class:"flex items-center gap-2"},yQe={class:"text-n-slate-11 text-sm leading-[21px] line-clamp-5"},SQe={__name:"AssistantControlItems",props:{controlItem:{type:Object,default:()=>({})}},setup(e){const t=En(),n=s=>{t.push({name:s})};return(s,a)=>(p(),f("div",{key:e.controlItem.name,class:"pt-3 ltr:pl-4 rtl:pr-4 ltr:pr-2 rtl:pl-2 pb-5 gap-2 flex flex-col w-full shadow outline-1 outline outline-n-container rounded-2xl bg-n-solid-2 cursor-pointer",onClick:a[1]||(a[1]=o=>n(e.controlItem.routeName))},[c("div",EQe,[c("span",TQe,E(e.controlItem.name),1),c("div",AQe,[v(ce,{icon:"i-lucide-chevron-right",slate:"",ghost:"",xs:"",onClick:a[0]||(a[0]=o=>n(e.controlItem.routeName))})])]),c("span",yQe,E(e.controlItem.description),1)]))}},IQe={class:"flex flex-col gap-6"},CQe={class:"flex flex-col gap-6"},xQe={class:"flex flex-col gap-6"},NQe={class:"flex flex-col gap-6"},OQe={class:"flex flex-col gap-6"},wQe={__name:"Settings",setup(e){const{t}=Pe(),n=cn(),s=yt(),a=n.params.assistantId,o=ke("captainAssistants/getUIFlags"),l=C(()=>o.value.fetchingItem),i=C(()=>s.getters["captainAssistants/getRecord"](Number(a))),r=C(()=>{var h;return!!((h=i.value)!=null&&h.id)}),d=C(()=>[{name:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.GUARDRAILS.TITLE"),description:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.GUARDRAILS.DESCRIPTION"),routeName:"captain_assistants_guardrails_index"},{name:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.SCENARIOS.TITLE"),description:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.SCENARIOS.DESCRIPTION"),routeName:"captain_assistants_scenarios_index"},{name:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.RESPONSE_GUIDELINES.TITLE"),description:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.RESPONSE_GUIDELINES.DESCRIPTION"),routeName:"captain_assistants_guidelines_index"}]),u=C(()=>{var _,g;const h=(_=d.value)==null?void 0:_.find(T=>T.routeName===n.name);return[{label:t("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(g=i.value)==null?void 0:g.name,routeName:"captain_assistants_edit"},...h?[{label:h.name,routeName:h.routeName}]:[]]}),m=async h=>{try{await s.dispatch("captainAssistants/update",{id:a,...h}),_e(t("CAPTAIN.ASSISTANTS.EDIT.SUCCESS_MESSAGE"))}catch(_){const g=(_==null?void 0:_.message)||t("CAPTAIN.ASSISTANTS.EDIT.ERROR_MESSAGE");_e(g)}};return pt(()=>{r.value||s.dispatch("captainAssistants/show",a)}),(h,_)=>(p(),V(qp,{"breadcrumb-items":u.value,"is-fetching":l.value,class:"[&>div]:max-w-[80rem]"},{body:K(()=>[c("div",IQe,[c("div",CQe,[v(hr,{heading:I(t)("CAPTAIN.ASSISTANTS.SETTINGS.BASIC_SETTINGS.TITLE"),description:I(t)("CAPTAIN.ASSISTANTS.SETTINGS.BASIC_SETTINGS.DESCRIPTION")},null,8,["heading","description"]),v(pQe,{assistant:i.value,onSubmit:m},null,8,["assistant"])]),_[0]||(_[0]=c("span",{class:"h-px w-full bg-n-weak mt-2"},null,-1)),c("div",xQe,[v(hr,{heading:I(t)("CAPTAIN.ASSISTANTS.SETTINGS.SYSTEM_SETTINGS.TITLE"),description:I(t)("CAPTAIN.ASSISTANTS.SETTINGS.SYSTEM_SETTINGS.DESCRIPTION")},null,8,["heading","description"]),v(bQe,{assistant:i.value,onSubmit:m},null,8,["assistant"])])])]),controls:K(()=>[c("div",NQe,[v(hr,{heading:I(t)("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.TITLE"),description:I(t)("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.DESCRIPTION")},null,8,["heading","description"]),c("div",OQe,[(p(!0),f(fe,null,Ae(d.value,g=>(p(),V(SQe,{key:g.name,"control-item":g},null,8,["control-item"]))),128))])])]),_:1},8,["breadcrumb-items","is-fetching"]))}},RQe={key:0},$Qe={key:1,class:"flex gap-4 h-full"},MQe={class:"flex-1 lg:overflow-auto pr-4 h-full md:h-auto"},kQe={class:"w-[400px] hidden lg:block h-full"},LQe={__name:"Edit",setup(e){const t=cn(),n=yt(),{t:s}=Pe(),a=t.params.assistantId,o=ke("captainAssistants/getUIFlags"),l=C(()=>o.value.fetchingItem),i=C(()=>n.getters["captainAssistants/getRecord"](Number(a))),r=ke("accounts/isFeatureEnabledonAccount"),d=ke("getCurrentAccountId"),u=r.value(d.value,Mt.CAPTAIN_V2),m=C(()=>{var _;return!!((_=i.value)!=null&&_.id)}),h=async _=>{try{await n.dispatch("captainAssistants/update",{id:a,..._}),_e(s("CAPTAIN.ASSISTANTS.EDIT.SUCCESS_MESSAGE"))}catch(g){const T=(g==null?void 0:g.message)||s("CAPTAIN.ASSISTANTS.EDIT.ERROR_MESSAGE");_e(T)}};return pt(()=>{(!m.value||!u)&&n.dispatch("captainAssistants/show",a)}),(_,g)=>{var T;return I(u)?(p(),V(wQe,{key:0})):(p(),V(gd,{key:1,"header-title":(T=i.value)==null?void 0:T.name,"show-pagination-footer":!1,"is-fetching":l.value,"show-know-more":!1,"back-url":{name:"captain_assistants_index"}},{body:K(()=>[m.value?(p(),f("div",$Qe,[c("div",MQe,[v(MZe,{assistant:i.value,mode:"edit",onSubmit:h},null,8,["assistant"])]),c("div",kQe,[v(zZe,{"assistant-id":Number(I(a))},null,8,["assistant-id"])])])):(p(),f("div",RQe,E(I(s)("CAPTAIN.ASSISTANTS.EDIT.NOT_FOUND")),1))]),_:1},8,["header-title","is-fetching"]))}}},DQe={class:"flex flex-col gap-1"},PQe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},BQe={class:"flex items-center justify-between w-full gap-3"},FQe={__name:"ConnectInboxForm",props:{assistantId:{type:Number,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o={uiFlags:ke("captainInboxes/getUIFlags"),inboxes:ke("inboxes/getInboxes"),captainInboxes:ke("captainInboxes/getRecords")},i=os({...{inboxId:null}}),r={inboxId:{required:lt}},d=C(()=>{const b=o.captainInboxes.value.map(A=>A.id);return o.inboxes.value.filter(A=>!b.includes(A.id)).map(A=>({value:A.id,label:A.name}))}),u=Lt(r,i),m=C(()=>o.uiFlags.value.creatingItem),h=(b,A)=>u.value[b].$error?a(`CAPTAIN.INBOXES.FORM.${A}.ERROR`):"",_=C(()=>({inboxId:h("inboxId","INBOX")})),g=()=>s("cancel"),T=()=>({inboxId:i.inboxId,assistantId:n.assistantId}),S=async()=>{await u.value.$validate()&&s("submit",T())};return(b,A)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze(S,["prevent"])},[c("div",DQe,[c("label",PQe,E(I(a)("CAPTAIN.INBOXES.FORM.INBOX.LABEL")),1),v(Jo,{id:"inbox",modelValue:i.inboxId,"onUpdate:modelValue":A[0]||(A[0]=y=>i.inboxId=y),options:d.value,"has-error":!!_.value.inboxId,placeholder:I(a)("CAPTAIN.INBOXES.FORM.INBOX.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:_.value.inboxId},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",BQe,[v(ce,{type:"button",variant:"faded",color:"slate",label:I(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),v(ce,{type:"submit",label:I(a)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":m.value,disabled:m.value},null,8,["label","is-loading","disabled"])])],32))}},nf="CAPTAIN.INBOXES.CREATE",UQe={__name:"ConnectInboxDialog",props:{assistantId:{type:Number,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=yt(),l=F(null),i=F(null),r=async m=>{try{await o.dispatch("captainInboxes/create",m),_e(a(`${nf}.SUCCESS_MESSAGE`)),l.value.close()}catch(h){const _=(h==null?void 0:h.message)||a(`${nf}.ERROR_MESSAGE`);_e(_)}},d=()=>{s("close")},u=()=>{l.value.close()};return t({dialogRef:l}),(m,h)=>(p(),V(Ms,{ref_key:"dialogRef",ref:l,type:"create",title:m.$t(`${nf}.TITLE`),description:m.$t("CAPTAIN.INBOXES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:d},{footer:K(()=>h[0]||(h[0]=[])),default:K(()=>[v(FQe,{ref_key:"connectForm",ref:i,"assistant-id":e.assistantId,onSubmit:r,onCancel:u},null,8,["assistant-id"])]),_:1},8,["title","description"]))}},GQe={class:"flex justify-between w-full gap-1"},VQe={class:"text-base text-n-slate-12 line-clamp-1 flex items-center gap-2"},HQe={class:"flex items-center gap-2"},m2={__name:"InboxCard",props:{id:{type:Number,required:!0},inbox:{type:Object,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),[o,l]=Xn(),i=C(()=>{const m=n.inbox;if(!(m!=null&&m.name))return"";const h=m.channel_type===Ut.TWILIO,_=m.channel_type===Ut.WHATSAPP,g=m.channel_type===Ut.EMAIL;if(h||_){const T=m.messaging_service_sid||m.phone_number;return T?`${m.name} (${T})`:m.name}return g&&m.email?`${m.name} (${m.email})`:m.name}),r=C(()=>[{label:a("CAPTAIN.INBOXES.OPTIONS.DISCONNECT"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),d=C(()=>{const{medium:m,channel_type:h}=n.inbox;return Ir(h,m,"outline")}),u=({action:m,value:h})=>{l(!1),s("action",{action:m,value:h,id:n.id})};return(m,h)=>{const _=_t("on-clickaway");return p(),V(Tl,null,{default:K(()=>[c("div",GQe,[c("span",VQe,[c("span",{class:re(d.value)},null,2),Ee(" "+E(i.value),1)]),c("div",HQe,[pe((p(),V(_o,{permissions:["administrator"],class:"relative flex items-center group"},{default:K(()=>[v(ce,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=g=>I(l)())}),I(o)?(p(),V(ua,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h[1]||(h[1]=g=>u(g))},null,8,["menu-items"])):O("",!0)]),_:1})),[[_,()=>I(l)(!1)]])])])]),_:1})}}},WQe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},KQe={__name:"InboxPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),V(Al,{title:a.$t("CAPTAIN.INBOXES.EMPTY_STATE.TITLE"),subtitle:a.$t("CAPTAIN.INBOXES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[c("div",WQe,[(p(!0),f(fe,null,Ae(I(qqe).slice(0,5),(l,i)=>(p(),V(m2,{id:l.id,key:`inbox-${i}`,inbox:l},null,8,["id","inbox"]))),128))])]),actions:K(()=>[v(ce,{label:a.$t("CAPTAIN.INBOXES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"]))}},zQe={class:"flex flex-row items-center gap-4"},jQe={class:"flex items-center gap-1 text-lg font-medium text-n-slate-12"},YQe={class:"flex flex-col gap-4"},XQe={__name:"Index",setup(e){const t=yt(),n=F(""),s=cn(),a=ke("captainAssistants/getUIFlags"),o=ke("captainInboxes/getUIFlags"),l=C(()=>a.value.fetchingItem),i=C(()=>o.value.fetchingList),r=ke("captainInboxes/getRecords"),d=F(null),u=F(null),m=()=>{u.value.dialogRef.open()},h=F(null),_=()=>{n.value="create",jt(()=>h.value.dialogRef.open())},g=({action:y,id:x})=>{d.value=r.value.find($=>x===$.id),jt(()=>{y==="delete"&&m()})},T=()=>{n.value="",d.value=null},S=Nn(),b=Number(s.params.assistantId),A=C(()=>S["captainAssistants/getRecord"].value(b));return tg(()=>t.dispatch("captainAssistants/show",b)),pt(()=>t.dispatch("captainInboxes/get",{assistantId:b})),(y,x)=>(p(),V(gd,{"button-label":y.$t("CAPTAIN.INBOXES.ADD_NEW"),"button-policy":["administrator"],"is-fetching":l.value||i.value,"is-empty":!I(r).length,"show-pagination-footer":!1,"feature-flag":I(Mt).CAPTAIN,onClick:_},Yo({emptyState:K(()=>[v(KQe,{onClick:_})]),body:K(()=>[c("div",YQe,[(p(!0),f(fe,null,Ae(I(r),$=>(p(),V(m2,{id:$.id,key:$.id,inbox:$,onAction:g},null,8,["id","inbox"]))),128))])]),default:K(()=>[d.value?(p(),V(Xp,{key:0,ref_key:"disconnectInboxDialog",ref:u,entity:d.value,"delete-payload":{assistantId:I(b),inboxId:d.value.id},type:"Inboxes"},null,8,["entity","delete-payload"])):O("",!0),n.value?(p(),V(UQe,{key:1,ref_key:"connectInboxDialog",ref:h,"assistant-id":I(b),type:n.value,onClose:T},null,8,["assistant-id","type"])):O("",!0)]),_:2},[l.value?void 0:{name:"headerTitle",fn:K(()=>[c("div",zQe,[v(ki,{compact:""}),c("span",jQe,[Ee(E(A.value.name)+" ",1),x[0]||(x[0]=c("span",{class:"i-lucide-chevron-right text-xl text-n-slate-10"},null,-1)),Ee(" "+E(y.$t("CAPTAIN.INBOXES.HEADER")),1)])])]),key:"0"}]),1032,["button-label","is-fetching","is-empty","feature-flag"]))}},qQe={class:"flex flex-col items-start self-stretch rounded-xl w-full overflow-hidden border border-dashed border-n-strong"},ZQe={class:"flex items-center justify-between w-full gap-3 px-4 pb-1 pt-4"},QQe={class:"flex items-center gap-3"},JQe={class:"text-sm font-medium text-n-slate-11"},eJe={class:"flex flex-col items-start divide-y divide-n-strong divide-dashed w-full"},nv={__name:"SuggestedRules",props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},emits:["add","close"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=()=>{n("add")},o=()=>{n("close")};return(l,i)=>(p(),f("div",qQe,[c("div",ZQe,[c("div",QQe,[c("h5",JQe,E(e.title),1),i[0]||(i[0]=c("span",{class:"h-3 w-px bg-n-weak"},null,-1)),v(ce,{label:I(s)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.ADD"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:a},null,8,["label"])]),v(ce,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:o})]),c("div",eJe,[(p(!0),f(fe,null,Ae(e.items,r=>(p(),f("div",{key:r.content,class:"w-full px-4 py-4"},[at(l.$slots,"default",{item:r})]))),128))])]))}},tJe={class:"flex py-3 ltr:pl-3 h-16 rtl:pr-3 ltr:pr-4 rtl:pl-4 items-center gap-3 rounded-xl bg-n-solid-2 outline-1 outline outline-n-container"},h2={__name:"AddNewRulesInput",props:yn({placeholder:{type:String,default:""},label:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:yn(["add"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=jn(e,"modelValue"),a=()=>{var o;(o=s.value)!=null&&o.trim()&&(n("add",s.value.trim()),s.value="")};return(o,l)=>(p(),f("div",tJe,[v(Wt,{icon:"i-lucide-plus",class:"text-n-slate-10 size-5 flex-shrink-0"}),v(fd,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=i=>s.value=i),placeholder:e.placeholder,onKeyup:Hn(a,["enter"])},null,8,["modelValue","placeholder"]),v(ce,{label:e.label,ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:a},null,8,["label"])]))}},nJe={class:"inline-flex relative"},sJe={key:0,class:"absolute w-[26.5rem] top-9 z-50 ltr:left-0 rtl:right-0 flex flex-col gap-5 bg-n-alpha-3 backdrop-blur-[100px] p-4 rounded-xl border border-n-weak shadow-md"},aJe={class:"flex gap-2 justify-between"},f2={__name:"AddNewRulesDialog",props:yn({placeholder:{type:String,default:""},buttonLabel:{type:String,default:""},confirmLabel:{type:String,default:""},cancelLabel:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:yn(["add"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=jn(e,"modelValue"),[a,o]=Xn(),l=()=>{var r;(r=s.value)!=null&&r.trim()&&(n("add",s.value.trim()),s.value="",o(!1))},i=()=>{o(!1)};return(r,d)=>pe((p(),f("div",nJe,[v(ce,{label:e.buttonLabel,sm:"",slate:"",class:"flex-shrink-0",onClick:d[0]||(d[0]=u=>I(o)(!I(a)))},null,8,["label"]),I(a)?(p(),f("div",sJe,[v(fd,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=u=>s.value=u),placeholder:e.placeholder,onKeyup:Hn(l,["enter"])},null,8,["modelValue","placeholder"]),c("div",aJe,[v(ce,{label:e.cancelLabel,sm:"",link:"",slate:"",class:"h-10 hover:!no-underline",onClick:i},null,8,["label"]),v(ce,{label:e.confirmLabel,sm:"",onClick:l},null,8,["label"])])])):O("",!0)])),[[I(ca),()=>I(o)(!1)]])}},oJe={class:"absolute top-6 ltr:left-3 rtl:right-3"},lJe={key:1,class:"flex items-center gap-2 text-sm text-n-slate-12"},iJe={class:"flex items-center gap-2"},g2={__name:"RuleCard",props:{id:{type:Number,required:!0},content:{type:String,required:!0},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["select","hover","edit","delete"],setup(e,{emit:t}){const n=e,s=t,a=C({get:()=>n.isSelected,set:()=>s("select",n.id)}),o=F(!1),l=F(n.content),i=F(n.content);ot(()=>n.content,u=>{i.value=u});const r=()=>{o.value=!0,l.value=n.content},d=()=>{o.value=!1,i.value=l.value,s("edit",{id:n.id,content:l.value})};return(u,m)=>(p(),V(Tl,{selectable:"",class:"relative [&>div]:!py-5 [&>div]:ltr:!pr-4 [&>div]:rtl:!pl-4",layout:"row",onMouseenter:m[3]||(m[3]=h=>s("hover",!0)),onMouseleave:m[4]||(m[4]=h=>s("hover",!1))},{default:K(()=>[pe(c("div",oJe,[v(Dr,{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=h=>a.value=h)},null,8,["modelValue"])],512),[[pn,e.selectable]]),o.value?(p(),V(fd,{key:0,modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=h=>l.value=h),"focus-on-mount":"",onKeyup:Hn(d,["enter"])},null,8,["modelValue"])):(p(),f("span",lJe,E(i.value),1)),c("div",iJe,[v(ce,{icon:"i-lucide-pen",slate:"",xs:"",ghost:"",onClick:r}),m[5]||(m[5]=c("span",{class:"w-px h-4 bg-n-weak"},null,-1)),v(ce,{icon:"i-lucide-trash",slate:"",xs:"",ghost:"",onClick:m[2]||(m[2]=h=>s("delete",e.id))})])]),_:1}))}},rJe={key:0,class:"flex items-center gap-3 py-1 ltr:pl-3 rtl:pr-3 ltr:pr-4 rtl:pl-4 rounded-lg bg-n-solid-2 outline outline-1 outline-n-container shadow"},cJe={class:"flex items-center gap-3"},dJe={class:"flex items-center gap-1.5"},uJe={class:"text-sm font-medium text-n-slate-12 tabular-nums"},pJe={class:"text-sm text-n-slate-10 tabular-nums"},mJe={class:"flex items-center gap-3"},hJe={key:1,class:"flex items-center gap-3"},sv={__name:"BulkSelectBar",props:yn({allItems:{type:Array,required:!0},selectAllLabel:{type:String,default:""},selectedCountLabel:{type:String,default:""},deleteLabel:{type:String,default:"Delete"}},{modelValue:{type:Set,default:()=>new Set},modelModifiers:{}}),emits:yn(["bulkDelete"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,a=jn(e,"modelValue"),o=C(()=>a.value.size),l=C(()=>n.allItems.length),i=C(()=>o.value>0),r=C(()=>i.value&&o.value<l.value),d=C(()=>l.value>0&&o.value===l.value),u=C({get:()=>d.value,set:m=>{const h=m?new Set(n.allItems.map(_=>_.id)):new Set;a.value=h}});return(m,h)=>(p(),V(Ps,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:K(()=>[i.value?(p(),f("div",rJe,[c("div",cJe,[c("div",dJe,[v(Dr,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=_=>u.value=_),indeterminate:r.value},null,8,["modelValue","indeterminate"]),c("span",uJe,E(e.selectAllLabel),1)]),c("span",pJe,E(e.selectedCountLabel),1)]),h[2]||(h[2]=c("div",{class:"h-4 w-px bg-n-strong"},null,-1)),c("div",mJe,[at(m.$slots,"actions",{selectedCount:o.value},()=>[v(ce,{label:e.deleteLabel,sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:h[1]||(h[1]=_=>s("bulkDelete"))},null,8,["label"])])])])):(p(),f("div",hJe,[at(m.$slots,"default-actions")]))]),_:3}))}},fJe={key:0,class:"flex mt-7 flex-col gap-4"},gJe={class:"flex items-center justify-between w-full"},_Je={class:"text-sm text-n-slate-12"},vJe={class:"flex mt-7 flex-col gap-4"},bJe={class:"flex justify-between items-center"},EJe={key:0,class:"max-w-[22.5rem] w-full min-w-0"},TJe={key:0,class:"mt-1 mb-2"},AJe={class:"text-n-slate-11 text-sm"},yJe={key:1,class:"mt-1 mb-2"},SJe={class:"text-n-slate-11 text-sm"},IJe={key:2,class:"flex flex-col gap-2"},CJe={__name:"Index",setup(e){const{t}=Pe(),n=cn(),s=yt(),{uiSettings:a,updateUISettings:o}=Sn(),l=n.params.assistantId,i=ke("captainAssistants/getUIFlags"),r=C(()=>i.value.fetchingItem),d=C(()=>s.getters["captainAssistants/getRecord"](Number(l))),u=F(""),m=F(""),h=F(""),_=C(()=>{var R;return[{label:t("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(R=d.value)==null?void 0:R.name,routeName:"captain_assistants_edit"},{label:t("CAPTAIN.ASSISTANTS.GUARDRAILS.BREADCRUMB.TITLE")}]}),g=C(()=>{var R;return((R=d.value)==null?void 0:R.guardrails)||[]}),T=C(()=>g.value.map((R,P)=>({id:P,content:R}))),S=[{id:1,content:"Block queries that share or request sensitive personal information (e.g. phone numbers, passwords)."},{id:2,content:"Reject queries that include offensive, discriminatory, or threatening language."},{id:3,content:"Deflect when the assistant is asked for legal or medical diagnosis or treatment."}],b=C(()=>{const R=u.value.trim();return R?Rr(T.value,R,["content"]):T.value}),A=C(()=>{var R;return((R=a.value)==null?void 0:R.show_guardrails_suggestions)!==!1}),y=()=>{o({show_guardrails_suggestions:!1})},x=F(new Set),$=F(null),N=R=>{const P=new Set(x.value);P[P.has(R)?"delete":"add"](R),x.value=P},w=(R,P)=>{$.value=R?P:null},D=C(()=>{const R=T.value.length||0;return x.value.size===R&&R>0?t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.UNSELECT_ALL",{count:R}):t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.SELECT_ALL",{count:R})}),H=C(()=>t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.SELECTED",{count:x.value.size})),B=async R=>{await s.dispatch("captainAssistants/update",{id:l,assistant:{guardrails:R}})},k=async R=>{try{const P=[...g.value,R];await B(P),_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.ERROR"))}},U=async({id:R,content:P})=>{try{const W=[...g.value];W[R]=P,await B(W),_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.UPDATE.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.UPDATE.ERROR"))}},G=async R=>{try{const P=g.value.filter((W,Q)=>Q!==R);await B(P),_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.ERROR"))}},L=async()=>{try{if(x.value.size===0)return;const R=g.value.filter((P,W)=>!x.value.has(W));await B(R),x.value.clear(),_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.ERROR"))}},M=()=>{o({show_guardrails_suggestions:!1});try{const R=S.map(W=>W.content),P=[...g.value,...R];B(P)}catch{_e(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.ERROR"))}};return(R,P)=>(p(),V(qp,{"breadcrumb-items":_.value,"is-fetching":r.value},{body:K(()=>[v(hr,{heading:R.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.TITLE"),description:R.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.DESCRIPTION")},null,8,["heading","description"]),A.value?(p(),f("div",fJe,[v(nv,{title:R.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.TITLE"),items:S,onAdd:M,onClose:y},{default:K(({item:W})=>[c("div",gJe,[c("span",_Je,E(W.content),1),v(ce,{label:R.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:Q=>k(W.content)},null,8,["label","onClick"])])]),_:1},8,["title"])])):O("",!0),c("div",vJe,[c("div",bJe,[v(sv,{modelValue:x.value,"onUpdate:modelValue":P[1]||(P[1]=W=>x.value=W),"all-items":T.value,"select-all-label":D.value,"selected-count-label":H.value,"delete-label":R.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:L},{"default-actions":K(()=>[v(f2,{modelValue:h.value,"onUpdate:modelValue":P[0]||(P[0]=W=>h.value=W),placeholder:I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.PLACEHOLDER"),"button-label":I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.TITLE"),"confirm-label":I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.CREATE"),"cancel-label":I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.CANCEL"),onAdd:k},null,8,["modelValue","placeholder","button-label","confirm-label","cancel-label"])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),T.value.length&&x.value.size===0?(p(),f("div",EJe,[v(ln,{modelValue:u.value,"onUpdate:modelValue":P[2]||(P[2]=W=>u.value=W),placeholder:I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):O("",!0)]),T.value.length===0?(p(),f("div",TJe,[c("span",AJe,E(I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.EMPTY_MESSAGE")),1)])):b.value.length===0?(p(),f("div",yJe,[c("span",SJe,E(I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.SEARCH_EMPTY_MESSAGE")),1)])):(p(),f("div",IJe,[(p(!0),f(fe,null,Ae(b.value,W=>(p(),V(g2,{id:W.id,key:W.id,content:W.content,"is-selected":x.value.has(W.id),selectable:$.value===W.id||x.value.size>0,onSelect:N,onEdit:U,onDelete:G,onHover:Q=>w(Q,W.id)},null,8,["id","content","is-selected","selectable","onHover"]))),128))])),v(h2,{modelValue:m.value,"onUpdate:modelValue":P[3]||(P[3]=W=>m.value=W),placeholder:I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.PLACEHOLDER"),label:I(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.SAVE"),onAdd:k},null,8,["modelValue","placeholder","label"])])]),_:1},8,["breadcrumb-items","is-fetching"]))}},xJe={key:0,class:"flex mt-7 flex-col gap-4"},NJe={class:"flex items-center justify-between w-full"},OJe={class:"text-sm text-n-slate-12"},wJe={class:"flex mt-7 flex-col gap-4"},RJe={class:"flex justify-between items-center"},$Je={key:0,class:"max-w-[22.5rem] w-full min-w-0"},MJe={key:0,class:"mt-1 mb-2"},kJe={class:"text-n-slate-11 text-sm"},LJe={key:1,class:"mt-1 mb-2"},DJe={class:"text-n-slate-11 text-sm"},PJe={key:2,class:"flex flex-col gap-2"},BJe={__name:"Index",setup(e){const{t}=Pe(),n=cn(),s=yt(),{uiSettings:a,updateUISettings:o}=Sn(),l=n.params.assistantId,i=ke("captainAssistants/getUIFlags"),r=C(()=>i.value.fetchingItem),d=C(()=>s.getters["captainAssistants/getRecord"](Number(l))),u=F(""),m=F(""),h=F(""),_=C(()=>{var R;return[{label:t("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(R=d.value)==null?void 0:R.name,routeName:"captain_assistants_edit"},{label:t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE")}]}),g=C(()=>{var R;return((R=d.value)==null?void 0:R.response_guidelines)||[]}),T=C(()=>g.value.map((R,P)=>({id:P,content:R}))),S=[{id:1,content:"Block queries that share or request sensitive personal information (e.g. phone numbers, passwords)."},{id:2,content:"Reject queries that include offensive, discriminatory, or threatening language."},{id:3,content:"Deflect when the assistant is asked for legal or medical diagnosis or treatment."}],b=C(()=>{const R=u.value.trim();return R?Rr(T.value,R,["content"]):T.value}),A=C(()=>{var R;return((R=a.value)==null?void 0:R.show_response_guidelines_suggestions)!==!1}),y=()=>{o({show_response_guidelines_suggestions:!1})},x=F(new Set),$=F(null),N=R=>{const P=new Set(x.value);P[P.has(R)?"delete":"add"](R),x.value=P},w=(R,P)=>{$.value=R?P:null},D=C(()=>{const R=T.value.length||0;return x.value.size===R&&R>0?t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.UNSELECT_ALL",{count:R}):t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.SELECT_ALL",{count:R})}),H=C(()=>t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.SELECTED",{count:x.value.size})),B=async R=>{await s.dispatch("captainAssistants/update",{id:l,assistant:{response_guidelines:R}})},k=async R=>{try{const P=[...g.value,R];await B(P),_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.ERROR"))}},U=async({id:R,content:P})=>{try{const W=[...g.value];W[R]=P,await B(W),_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.UPDATE.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.UPDATE.ERROR"))}},G=async R=>{try{const P=g.value.filter((W,Q)=>Q!==R);await B(P),_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.ERROR"))}},L=async()=>{try{if(x.value.size===0)return;const R=g.value.filter((P,W)=>!x.value.has(W));await B(R),x.value.clear(),_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.ERROR"))}},M=async()=>{o({show_response_guidelines_suggestions:!1});try{const R=S.map(W=>W.content),P=[...g.value,...R];await B(P),_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.SUCCESS"))}catch{_e(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.ERROR"))}};return(R,P)=>(p(),V(qp,{"breadcrumb-items":_.value,"is-fetching":r.value},{body:K(()=>[v(hr,{heading:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),description:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.DESCRIPTION")},null,8,["heading","description"]),A.value?(p(),f("div",xJe,[v(nv,{title:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),items:S,onAdd:M,onClose:y},{default:K(({item:W})=>[c("div",NJe,[c("span",OJe,E(W.content),1),v(ce,{label:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:Q=>k(W.content)},null,8,["label","onClick"])])]),_:1},8,["title"])])):O("",!0),c("div",wJe,[c("div",RJe,[v(sv,{modelValue:x.value,"onUpdate:modelValue":P[1]||(P[1]=W=>x.value=W),"all-items":T.value,"select-all-label":D.value,"selected-count-label":H.value,"delete-label":R.$t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:L},{"default-actions":K(()=>[v(f2,{modelValue:h.value,"onUpdate:modelValue":P[0]||(P[0]=W=>h.value=W),placeholder:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.PLACEHOLDER"),"button-label":I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.TITLE"),"confirm-label":I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.CREATE"),"cancel-label":I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.CANCEL"),onAdd:k},null,8,["modelValue","placeholder","button-label","confirm-label","cancel-label"])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),T.value.length&&x.value.size===0?(p(),f("div",$Je,[v(ln,{modelValue:u.value,"onUpdate:modelValue":P[2]||(P[2]=W=>u.value=W),placeholder:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):O("",!0)]),T.value.length===0?(p(),f("div",MJe,[c("span",kJe,E(I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.EMPTY_MESSAGE")),1)])):b.value.length===0?(p(),f("div",LJe,[c("span",DJe,E(I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.SEARCH_EMPTY_MESSAGE")),1)])):(p(),f("div",PJe,[(p(!0),f(fe,null,Ae(b.value,W=>(p(),V(g2,{id:W.id,key:W.id,content:W.content,"is-selected":x.value.has(W.id),selectable:$.value===W.id||x.value.size>0,onSelect:N,onHover:Q=>w(Q,W.id),onEdit:U,onDelete:G},null,8,["id","content","is-selected","selectable","onHover"]))),128))])),v(h2,{modelValue:m.value,"onUpdate:modelValue":P[3]||(P[3]=W=>m.value=W),placeholder:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.PLACEHOLDER"),label:I(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.SAVE"),onAdd:k},null,8,["modelValue","placeholder","label"])])]),_:1},8,["breadcrumb-items","is-fetching"]))}},FJe={class:"absolute top-[1.125rem] ltr:left-3 rtl:right-3"},UJe={key:0,class:"flex flex-col w-full"},GJe={class:"flex items-start justify-between w-full gap-2"},VJe={class:"flex flex-col items-start"},HJe={class:"text-sm text-n-slate-12 font-medium"},WJe={class:"text-sm text-n-slate-11 mt-2"},KJe={class:"flex items-center gap-2"},zJe={key:0,class:"text-sm text-n-slate-11 font-medium mb-1"},jJe={key:1,class:"overflow-hidden flex flex-col gap-4 w-full"},YJe={class:"flex items-center gap-3"},XJe='[&_a[href^="tool://"]]:text-n-iris-11 [&_a:not([href^="tool://"])]:text-n-slate-12 [&_a]:pointer-events-none [&_a]:cursor-default',qJe={__name:"ScenariosCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},instruction:{type:String,required:!0},tools:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["select","hover","delete","update"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),{formatMessage:o}=$a(),l=C({get:()=>n.isSelected,set:()=>s("select",n.id)}),i=os({id:"",title:"",description:"",instruction:""}),r=F(),[d,u]=Xn(),[m,h]=Xn(),{height:_}=Er(r),g=C(()=>_.value>160),T=()=>{Object.assign(i,{id:n.id,title:n.title,description:n.description,instruction:n.instruction,tools:n.tools}),u(!0)},S={title:{required:lt,minLength:on(1)},description:{required:lt},instruction:{required:lt}},b=Lt(S,i),A=C(()=>b.value.title.$error?a("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.ERROR"):""),y=C(()=>b.value.description.$error?a("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.ERROR"):""),x=()=>{b.value.$touch(),!b.value.$invalid&&(s("update",{...i}),u(!1))},$=C(()=>b.value.instruction.$error?a("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.ERROR"):""),N=w=>()=>Wn("p",{class:`text-sm text-n-slate-12 py-4 mb-0 prose prose-sm min-w-0 break-words max-w-none ${XJe}`,innerHTML:w});return(w,D)=>(p(),V(Tl,{selectable:"",class:re(["relative [&>div]:!py-4",{"[&>div]:ltr:!pr-4 [&>div]:rtl:!pl-4":!I(d),"[&>div]:ltr:!pr-10 [&>div]:rtl:!pl-10":I(d)}]),layout:"row",onMouseenter:D[7]||(D[7]=H=>s("hover",!0)),onMouseleave:D[8]||(D[8]=H=>s("hover",!1))},{default:K(()=>{var H,B;return[pe(c("div",FJe,[v(Dr,{modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=k=>l.value=k)},null,8,["modelValue"])],512),[[pn,e.selectable&&!I(d)]]),I(d)?(p(),f("div",jJe,[v(ln,{modelValue:i.title,"onUpdate:modelValue":D[3]||(D[3]=k=>i.title=k),label:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.PLACEHOLDER"),message:A.value,"message-type":A.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(wr,{modelValue:i.description,"onUpdate:modelValue":D[4]||(D[4]=k=>i.description=k),label:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.PLACEHOLDER"),message:y.value,"message-type":y.value?"error":"info","show-character-count":""},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:i.instruction,"onUpdate:modelValue":D[5]||(D[5]=k=>i.instruction=k),label:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.LABEL"),placeholder:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.PLACEHOLDER"),message:$.value,"message-type":$.value?"error":"info","show-character-count":!1,"enable-captain-tools":""},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",YJe,[v(ce,{faded:"",slate:"",sm:"",label:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.UPDATE.CANCEL"),onClick:D[6]||(D[6]=k=>I(u)(!1))},null,8,["label"]),v(ce,{sm:"",label:I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.UPDATE.UPDATE"),onClick:x},null,8,["label"])])])):(p(),f("div",UJe,[c("div",GJe,[c("div",VJe,[c("span",HJe,E(e.title),1),c("span",WJe,E(e.description),1)]),c("div",KJe,[v(ce,{icon:"i-lucide-pen",slate:"",xs:"",ghost:"",onClick:T}),D[9]||(D[9]=c("span",{class:"w-px h-4 bg-n-weak"},null,-1)),v(ce,{icon:"i-lucide-trash",slate:"",xs:"",ghost:"",onClick:D[1]||(D[1]=k=>s("delete",e.id))})])]),c("div",{class:re(["relative overflow-hidden transition-all duration-300 ease-in-out group/expandable",{"cursor-pointer":g.value}]),style:Ct({maxHeight:I(m)?`${I(_)}px`:"10rem"}),onClick:D[2]||(D[2]=k=>g.value?I(h)():null)},[c("div",{ref_key:"instructionContentRef",ref:r},[(p(),V(xs(N(I(o)(e.instruction,!1)))))],512),c("div",{class:re(["absolute bottom-0 w-full flex items-end justify-center text-xs text-n-slate-11 bg-gradient-to-t h-40 from-n-solid-2 via-n-solid-2 via-10% to-transparent transition-all duration-500 ease-in-out px-2 py-1 rounded pointer-events-none",{"visible opacity-100":!I(m),"invisible opacity-0":I(m)||!g.value}])},[v(Wt,{icon:"i-lucide-chevron-down",class:"text-n-slate-7 mb-4 size-4 group-hover/expandable:text-n-slate-11 transition-colors duration-200"})],2)],6),(H=e.tools)!=null&&H.length?(p(),f("span",zJe,E(I(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TOOLS_USED"))+" "+E((B=e.tools)==null?void 0:B.map(k=>`@${k}`).join(", ")),1)):O("",!0)]))]}),_:1},8,["class"]))}},ZJe={class:"inline-flex relative"},QJe={key:0,class:"w-[31.25rem] absolute top-10 ltr:left-0 rtl:right-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6 z-50"},JJe={class:"text-base font-medium text-n-slate-12"},eet={class:"flex flex-col gap-4"},tet={class:"flex items-center justify-between w-full gap-3"},net={__name:"AddNewScenariosDialog",emits:["add"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),[a,o]=Xn(),l=os({id:"",title:"",description:"",instruction:""}),i={title:{required:lt,minLength:on(1)},description:{required:lt},instruction:{required:lt}},r=Lt(i,l),d=C(()=>r.value.title.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.ERROR"):""),u=C(()=>r.value.description.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.ERROR"):""),m=C(()=>r.value.instruction.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.ERROR"):""),h=()=>{Object.assign(l,{id:"",title:"",description:"",instruction:""})},_=async()=>{r.value.$touch(),!r.value.$invalid&&(await n("add",l),h(),o(!1))},g=()=>{o(!1)};return(T,S)=>pe((p(),f("div",ZJe,[v(ce,{label:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.CREATE"),sm:"",slate:"",class:"flex-shrink-0",onClick:S[0]||(S[0]=b=>I(o)(!I(a)))},null,8,["label"]),I(a)?(p(),f("div",QJe,[c("h3",JJe,E(I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.TITLE")),1),c("div",eet,[v(ln,{modelValue:l.title,"onUpdate:modelValue":S[1]||(S[1]=b=>l.title=b),label:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.LABEL"),placeholder:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.PLACEHOLDER"),message:d.value,"message-type":d.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(wr,{modelValue:l.description,"onUpdate:modelValue":S[2]||(S[2]=b=>l.description=b),label:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.LABEL"),placeholder:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.PLACEHOLDER"),message:u.value,"message-type":u.value?"error":"info","show-character-count":""},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:l.instruction,"onUpdate:modelValue":S[3]||(S[3]=b=>l.instruction=b),label:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.LABEL"),placeholder:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.PLACEHOLDER"),message:m.value,"message-type":m.value?"error":"info","show-character-count":!1,"enable-captain-tools":""},null,8,["modelValue","label","placeholder","message","message-type"])]),c("div",tet,[v(ce,{variant:"faded",color:"slate",label:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.CANCEL"),class:"w-full bg-n-alpha-2 !text-n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),v(ce,{label:I(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.CREATE"),class:"w-full",onClick:_},null,8,["label"])])])):O("",!0)])),[[I(ca),()=>I(o)(!1)]])}},set={key:0,class:"flex mt-7 flex-col gap-4"},aet={class:"flex items-center gap-3 justify-between"},oet={class:"text-sm text-n-slate-12"},iet={class:"flex flex-col"},ret={class:"text-sm text-n-slate-11 mt-2"},cet={class:"text-sm text-n-slate-11 font-medium mb-1"},det={class:"flex mt-7 flex-col gap-4"},uet={class:"flex justify-between items-center"},pet={key:0,class:"max-w-[22.5rem] w-full min-w-0"},met={key:0,class:"mt-1 mb-2"},het={class:"text-n-slate-11 text-sm"},fet={key:1,class:"mt-1 mb-2"},get={class:"text-n-slate-11 text-sm"},_et={key:2,class:"flex flex-col gap-2"},vet='[&_a[href^="tool://"]]:text-n-iris-11 [&_a:not([href^="tool://"])]:text-n-slate-12 [&_a]:pointer-events-none [&_a]:cursor-default',bet={__name:"Index",setup(e){const{t}=Pe(),n=cn(),s=yt(),{uiSettings:a,updateUISettings:o}=Sn(),{formatMessage:l}=$a(),i=n.params.assistantId,r=ke("captainScenarios/getUIFlags"),d=C(()=>r.value.fetchingList),u=C(()=>s.getters["captainAssistants/getRecord"](Number(i))),m=ke("captainScenarios/getRecords"),h=F(""),_=C(()=>{var M;return[{label:t("CAPTAIN.ASSISTANTS.SETTINGS.BREADCRUMB.ASSISTANT"),routeName:"captain_assistants_index"},{label:(M=u.value)==null?void 0:M.name,routeName:"captain_assistants_edit"},{label:t("CAPTAIN.ASSISTANTS.SCENARIOS.BREADCRUMB.TITLE")}]}),g=M=>()=>Wn("span",{class:`text-sm text-n-slate-12 py-4 prose prose-sm min-w-0 break-words ${vet}`,innerHTML:M}),T=[{id:1,title:"Prospective Buyer",description:"Handle customers who are showing interest in purchasing a license",instruction:`If someone is interested in purchasing a license, ask them for following:

1. How many licenses are they willing to purchase?
2. Are they migrating from another platform?
. Once these details are collected, do the following steps
1. add a private note to with the information you collected using [Add Private Note](tool://add_private_note)
2. Add label "sales" to the contact using [Add Label to Conversation](tool://add_label_to_conversation)
3. Reply saying "one of us will reach out soon" and provide an estimated timeline for the response and [Handoff to Human](tool://handoff)`,tools:["add_private_note","add_label_to_conversation","handoff"]}],S=C(()=>{const M=h.value.trim(),R=m.value;return M?Rr(R,M,["title","description","instruction"]):R}),b=C(()=>{var M;return((M=a.value)==null?void 0:M.show_scenarios_suggestions)!==!1}),A=()=>{o({show_scenarios_suggestions:!1})},y=F(new Set),x=F(null),$=M=>{const R=new Set(y.value);R[R.has(M)?"delete":"add"](M),y.value=R},N=C(()=>{const M=m.value.length||0;return y.value.size===M&&M>0?t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.UNSELECT_ALL",{count:M}):t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.SELECT_ALL",{count:M})}),w=C(()=>t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.SELECTED",{count:y.value.size})),D=(M,R)=>{x.value=M?R:null},H=M=>[...new Set([...(M==null?void 0:M.matchAll(/\(tool:\/\/([^)]+)\)/g))??[]].map(R=>R[1]))],B=async M=>{var R;try{await s.dispatch("captainScenarios/update",{id:M.id,assistantId:n.params.assistantId,...M,tools:H(M.instruction)}),_e(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.UPDATE.SUCCESS"))}catch(P){const W=((R=P==null?void 0:P.response)==null?void 0:R.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.UPDATE.ERROR");_e(W)}},k=async M=>{var R;try{await s.dispatch("captainScenarios/delete",{id:M,assistantId:n.params.assistantId}),_e(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.SUCCESS"))}catch(P){const W=((R=P==null?void 0:P.response)==null?void 0:R.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.ERROR");_e(W)}},U=async M=>{const R=M||Array.from(y.value);await Promise.all(R.map(P=>s.dispatch("captainScenarios/delete",{id:P,assistantId:n.params.assistantId}))),y.value=new Set,_e(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.SUCCESS"))},G=async M=>{var R;try{await s.dispatch("captainScenarios/create",{assistantId:n.params.assistantId,...M,tools:H(M.instruction)}),_e(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.SUCCESS"))}catch(P){const W=((R=P==null?void 0:P.response)==null?void 0:R.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.ERROR");_e(W)}},L=async()=>{var M;try{T.forEach(async R=>{await s.dispatch("captainScenarios/create",{assistantId:n.params.assistantId,...R})}),_e(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.SUCCESS"))}catch(R){const P=((M=R==null?void 0:R.response)==null?void 0:M.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.ERROR");_e(P)}};return pt(()=>{s.dispatch("captainScenarios/get",{assistantId:i}),s.dispatch("captainTools/getTools")}),(M,R)=>(p(),V(qp,{"breadcrumb-items":_.value,"is-fetching":d.value},{body:K(()=>[v(hr,{heading:M.$t("CAPTAIN.ASSISTANTS.SCENARIOS.TITLE"),description:M.$t("CAPTAIN.ASSISTANTS.SCENARIOS.DESCRIPTION")},null,8,["heading","description"]),b.value?(p(),f("div",set,[v(nv,{title:M.$t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TITLE"),items:T,onClose:A,onAdd:L},{default:K(({item:P})=>{var W;return[c("div",aet,[c("span",oet,E(P.title),1),v(ce,{label:M.$t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:Q=>G(P)},null,8,["label","onClick"])]),c("div",iet,[c("span",ret,E(P.description),1),(p(),V(xs(g(I(l)(P.instruction,!1))))),c("span",cet,E(I(t)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TOOLS_USED"))+" "+E((W=P.tools)==null?void 0:W.map(Q=>`@${Q}`).join(", ")),1)])]}),_:1},8,["title"])])):O("",!0),c("div",det,[c("div",uet,[v(sv,{modelValue:y.value,"onUpdate:modelValue":R[0]||(R[0]=P=>y.value=P),"all-items":I(m),"select-all-label":N.value,"selected-count-label":w.value,"delete-label":M.$t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:U},{"default-actions":K(()=>[v(net,{onAdd:G})]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),I(m).length&&y.value.size===0?(p(),f("div",pet,[v(ln,{modelValue:h.value,"onUpdate:modelValue":R[1]||(R[1]=P=>h.value=P),placeholder:I(t)("CAPTAIN.ASSISTANTS.SCENARIOS.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):O("",!0)]),I(m).length===0?(p(),f("div",met,[c("span",het,E(I(t)("CAPTAIN.ASSISTANTS.SCENARIOS.EMPTY_MESSAGE")),1)])):S.value.length===0?(p(),f("div",fet,[c("span",get,E(I(t)("CAPTAIN.ASSISTANTS.SCENARIOS.SEARCH_EMPTY_MESSAGE")),1)])):(p(),f("div",_et,[(p(!0),f(fe,null,Ae(S.value,P=>(p(),V(qJe,{id:P.id,key:P.id,title:P.title,description:P.description,instruction:P.instruction,tools:P.tools,"is-selected":y.value.has(P.id),selectable:x.value===P.id||y.value.size>0,onSelect:$,onDelete:W=>k(P.id),onUpdate:B,onHover:W=>D(W,P.id)},null,8,["id","title","description","instruction","tools","is-selected","selectable","onDelete","onHover"]))),128))]))])]),_:1},8,["breadcrumb-items","is-fetching"]))}},Eet={class:"flex justify-between w-full gap-1"},Tet={class:"text-base text-n-slate-12 line-clamp-1"},Aet={class:"flex items-center gap-2"},yet={class:"relative flex items-center group"},Iet={class:"flex items-center justify-between w-full gap-4"},Cet={class:"text-sm shrink-0 truncate text-n-slate-11 flex items-center gap-1"},xet={class:"text-n-slate-11 text-sm truncate flex justify-start flex-1 items-center gap-1"},Net={class:"truncate"},Oet={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1"},_2={__name:"DocumentCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},assistant:{type:Object,default:()=>({})},externalLink:{type:String,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:a}=Br(),{t:o}=Pe(),[l,i]=Xn(),r=C(()=>{const m=[{label:o("CAPTAIN.DOCUMENTS.OPTIONS.VIEW_RELATED_RESPONSES"),value:"viewRelatedQuestions",action:"viewRelatedQuestions",icon:"i-ph-tree-view-duotone"}];return a(["administrator"])&&m.push({label:o("CAPTAIN.DOCUMENTS.OPTIONS.DELETE_DOCUMENT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),m}),d=C(()=>Ds(n.createdAt)),u=({action:m,value:h})=>{i(!1),s("action",{action:m,value:h,id:n.id})};return(m,h)=>{const _=_t("on-clickaway");return p(),V(Tl,null,{default:K(()=>{var g;return[c("div",Eet,[c("span",Tet,E(e.name),1),c("div",Aet,[pe((p(),f("div",yet,[v(ce,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=T=>I(i)())}),I(l)?(p(),V(ua,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:h[1]||(h[1]=T=>u(T))},null,8,["menu-items"])):O("",!0)])),[[_,()=>I(i)(!1)]])])]),c("div",Iet,[c("span",Cet,[h[2]||(h[2]=c("i",{class:"i-woot-captain"},null,-1)),Ee(" "+E(((g=e.assistant)==null?void 0:g.name)||""),1)]),c("span",xet,[h[3]||(h[3]=c("i",{class:"i-ph-link-simple shrink-0"},null,-1)),c("span",Net,E(e.externalLink),1)]),c("div",Oet,E(d.value),1)])]}),_:1})}}},wet={class:"absolute top-7 ltr:left-3 rtl:right-3"},Ret={class:"flex relative justify-between w-full gap-1"},$et={class:"text-base text-n-slate-12 line-clamp-1"},Met={key:0,class:"flex items-center gap-2"},ket={class:"text-n-slate-11 text-sm line-clamp-5"},Let={key:0,class:"items-center justify-between hidden lg:flex"},Det={class:"inline-flex items-center"},Pet={class:"text-sm shrink-0 truncate text-n-slate-11 inline-flex items-center gap-1"},Bet={key:0,class:"shrink-0 text-sm text-n-slate-11 inline-flex line-clamp-1 gap-1 ml-3"},Fet={key:0,class:"inline-flex items-center gap-1 truncate over"},Uet=["title"],Get={key:1,class:"inline-flex items-center gap-1"},Vet=["title"],Het={class:"group-hover:underline"},Wet={key:3},Ket={key:1,class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1 ml-3"},zet=["title"],jet={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1 ml-3"},av={__name:"ResponseCard",props:{id:{type:Number,required:!0},question:{type:String,required:!0},answer:{type:String,required:!0},compact:{type:Boolean,default:!1},status:{type:String,default:"approved"},documentable:{type:Object,default:null},assistant:{type:Object,default:()=>({})},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0},isSelected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},showMenu:{type:Boolean,default:!0}},emits:["action","navigate","select","hover"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),[o,l]=Xn(),i=C({get:()=>n.isSelected,set:()=>s("select",n.id)}),r=C(()=>n.status==="pending"?[{label:a("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),value:"approve",action:"approve",icon:"i-lucide-circle-check-big"}]:[]),d=C(()=>[...r.value,{label:a("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:a("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),u=C(()=>Ds(n.updatedAt||n.createdAt)),m=({action:_,value:g})=>{l(!1),s("action",{action:_,value:g,id:n.id})},h=()=>{s("navigate",{id:n.documentable.id,type:n.documentable.type})};return(_,g)=>{const T=_t("on-clickaway");return p(),V(Tl,{selectable:"",class:re(["relative",{"rounded-md":e.compact}]),onMouseenter:g[3]||(g[3]=S=>s("hover",!0)),onMouseleave:g[4]||(g[4]=S=>s("hover",!1))},{default:K(()=>{var S;return[pe(c("div",wet,[v(Dr,{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=b=>i.value=b)},null,8,["modelValue"])],512),[[pn,e.selectable]]),c("div",Ret,[c("span",$et,E(e.question),1),!e.compact&&e.showMenu?(p(),f("div",Met,[pe((p(),V(_o,{permissions:["administrator"],class:"relative flex items-center group"},{default:K(()=>[v(ce,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:g[1]||(g[1]=b=>I(l)())}),I(o)?(p(),V(ua,{key:0,"menu-items":d.value,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:g[2]||(g[2]=b=>m(b))},null,8,["menu-items"])):O("",!0)]),_:1})),[[T,()=>I(l)(!1)]])])):O("",!0)]),c("span",ket,E(e.answer),1),e.compact?O("",!0):(p(),f("div",Let,[c("div",Det,[c("span",Pet,[g[5]||(g[5]=c("i",{class:"i-woot-captain"},null,-1)),Ee(" "+E(((S=e.assistant)==null?void 0:S.name)||""),1)]),e.documentable?(p(),f("div",Bet,[e.documentable.type==="Captain::Document"?(p(),f("span",Fet,[g[6]||(g[6]=c("i",{class:"i-ph-files-light text-base"},null,-1)),c("span",{class:"max-w-96 truncate",title:e.documentable.name},E(e.documentable.name),9,Uet)])):O("",!0),e.documentable.type==="User"?(p(),f("span",Get,[g[7]||(g[7]=c("i",{class:"i-ph-user-circle-plus text-base"},null,-1)),c("span",{class:"max-w-96 truncate",title:e.documentable.available_name},E(e.documentable.available_name),9,Vet)])):e.documentable.type==="Conversation"?(p(),f("span",{key:2,class:"inline-flex items-center gap-1 group cursor-pointer",role:"button",onClick:h},[g[8]||(g[8]=c("i",{class:"i-ph-chat-circle-dots text-base"},null,-1)),c("span",Het,E(I(a)("CAPTAIN.RESPONSES.DOCUMENTABLE.CONVERSATION",{id:e.documentable.display_id})),1)])):(p(),f("span",Wet))])):O("",!0),e.status!=="approved"?(p(),f("div",Ket,[c("i",{class:"i-ph-stack text-base",title:I(a)("CAPTAIN.RESPONSES.STATUS.TITLE")},null,8,zet),Ee(" "+E(I(a)(`CAPTAIN.RESPONSES.STATUS.${e.status.toUpperCase()}`)),1)])):O("",!0)]),c("div",jet,[g[9]||(g[9]=c("i",{class:"i-ph-calendar-dot"},null,-1)),Ee(" "+E(u.value),1)])]))]}),_:1},8,["class"])}}},Yet={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},Xet={key:1,class:"flex flex-col gap-3 min-h-48"},qet={__name:"RelatedResponses",props:{captainDocument:{type:Object,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=F(null),r=ke("captainResponses/getUIFlags"),d=ke("captainResponses/getRecords"),u=C(()=>r.value.fetchingList),m=()=>{a("close")};return pt(()=>{l.dispatch("captainResponses/get",{assistantId:s.captainDocument.assistant.id,documentId:s.captainDocument.id})}),t({dialogRef:i}),(h,_)=>(p(),V(Ms,{ref_key:"dialogRef",ref:i,type:"edit",title:I(o)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.TITLE"),description:I(o)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",width:"3xl",onClose:m},{default:K(()=>[u.value?(p(),f("div",Yet,[v(qn)])):(p(),f("div",Xet,[(p(!0),f(fe,null,Ae(I(d),g=>(p(),V(av,{id:g.id,key:g.id,question:g.question,status:g.status,answer:g.answer,assistant:g.assistant,"created-at":g.created_at,"updated-at":g.updated_at,compact:""},null,8,["id","question","status","answer","assistant","created-at","updated-at"]))),128))]))]),_:1},8,["title","description"]))}},Zet={class:"flex flex-col gap-1"},Qet={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},Jet={class:"flex items-center justify-between w-full gap-3"},ett={__name:"DocumentForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a={uiFlags:ke("captainDocuments/getUIFlags"),assistants:ke("captainAssistants/getRecords")},l=os({...{name:"",assistantId:null}}),i={url:{required:lt,url:Xc,minLength:on(1)},assistantId:{required:lt}},r=C(()=>a.assistants.value.map(S=>({value:S.id,label:S.name}))),d=Lt(i,l),u=C(()=>a.uiFlags.value.creatingItem),m=(S,b)=>d.value[S].$error?s(`CAPTAIN.DOCUMENTS.FORM.${b}.ERROR`):"",h=C(()=>({url:m("url","URL"),assistantId:m("assistantId","ASSISTANT")})),_=()=>n("cancel"),g=()=>({external_link:l.url,assistant_id:l.assistantId}),T=async()=>{await d.value.$validate()&&n("submit",g())};return(S,b)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze(T,["prevent"])},[v(ln,{modelValue:l.url,"onUpdate:modelValue":b[0]||(b[0]=A=>l.url=A),label:I(s)("CAPTAIN.DOCUMENTS.FORM.URL.LABEL"),placeholder:I(s)("CAPTAIN.DOCUMENTS.FORM.URL.PLACEHOLDER"),message:h.value.url,"message-type":h.value.url?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",Zet,[c("label",Qet,E(I(s)("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.LABEL")),1),v(Jo,{id:"assistant",modelValue:l.assistantId,"onUpdate:modelValue":b[1]||(b[1]=A=>l.assistantId=A),options:r.value,"has-error":!!h.value.assistantId,placeholder:I(s)("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:h.value.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",Jet,[v(ce,{type:"button",variant:"faded",color:"slate",label:I(s)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:_},null,8,["label"]),v(ce,{type:"submit",label:I(s)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},sf="CAPTAIN.DOCUMENTS.CREATE",ttt={__name:"CreateDocumentDialog",emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=Pe(),o=yt(),l=F(null),i=F(null),r=async m=>{var h;try{await o.dispatch("captainDocuments/create",m),_e(a(`${sf}.SUCCESS_MESSAGE`)),l.value.close()}catch(_){const g=((h=_==null?void 0:_.response)==null?void 0:h.message)||a(`${sf}.ERROR_MESSAGE`);_e(g)}},d=()=>{s("close")},u=()=>{l.value.close()};return t({dialogRef:l}),(m,h)=>(p(),V(Ms,{ref_key:"dialogRef",ref:l,title:m.$t(`${sf}.TITLE`),description:m.$t("CAPTAIN.DOCUMENTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:d},{footer:K(()=>h[0]||(h[0]=[])),default:K(()=>[v(ett,{ref_key:"documentForm",ref:i,onSubmit:r,onCancel:u},null,512)]),_:1},8,["title","description"]))}},v2={__name:"AssistantSelector",props:{assistantId:{type:[String,Number],required:!0}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F(!1),l=ke("captainAssistants/getRecords"),i=C(()=>[{label:a("CAPTAIN.RESPONSES.FILTER.ALL_ASSISTANTS"),value:"all",action:"filter"},...l.value.map(u=>({value:u.id,label:u.name,action:"filter"}))]),r=C(()=>{const u=i.value.find(m=>m.value===n.assistantId);return a("CAPTAIN.RESPONSES.FILTER.ASSISTANT",{selected:u?u.label:""})}),d=({value:u})=>{o.value=!1,s("update",u)};return(u,m)=>(p(),V(I(Li),{onTrigger:m[1]||(m[1]=h=>o.value=!1)},{default:K(()=>[v(ce,{label:r.value,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:m[0]||(m[0]=h=>o.value=!o.value)},null,8,["label"]),o.value?(p(),V(ua,{key:0,"menu-items":i.value,class:"mt-2",onAction:d},null,8,["menu-items"])):O("",!0)]),_:1}))}},ntt={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},stt={__name:"DocumentPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),f(fe,null,[v(ev,{title:a.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:a.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-dark.svg","learn-more-url":"https://chwt.app/captain-document",class:"mb-8"},null,8,["title","note"]),v(Al,{title:a.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.TITLE"),subtitle:a.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[c("div",ntt,[(p(!0),f(fe,null,Ae(I(Yqe).slice(0,5),(l,i)=>(p(),V(_2,{id:l.id,key:`document-${i}`,name:l.name,assistant:l.assistant,"external-link":l.external_link,"created-at":l.created_at},null,8,["id","name","assistant","external-link","created-at"]))),128))])]),actions:K(()=>[v(ce,{label:a.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},att={__name:"LimitBanner",setup(e){const t=En(),{accountId:n}=_s(),{documentLimits:s,fetchLimits:a}=t_(),o=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},l=C(()=>{if(!s.value)return!1;const{currentAvailable:i}=s.value;return i===0});return pt(a),(i,r)=>pe((p(),V(Ep,{color:"amber","action-label":i.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:o},{default:K(()=>[Ee(E(i.$t("CAPTAIN.BANNER.DOCUMENTS")),1)]),_:1},8,["action-label"])),[[pn,l.value]])}},ott={key:0,class:"mb-4 -mt-3 flex gap-3"},ltt={class:"flex flex-col gap-4"},itt={__name:"Index",setup(e){const t=yt(),n=ke("captainDocuments/getUIFlags"),s=ke("captainDocuments/getRecords"),a=ke("captainAssistants/getRecords"),o=C(()=>n.value.fetchingList),l=ke("captainDocuments/getMeta"),i=F("all"),r=F(null),d=F(null),u=()=>{d.value.dialogRef.open()},m=F(!1),h=F(!1),_=F(null),g=F(null),T=C(()=>a.value.length===0?!1:!o.value),S=()=>{m.value=!0,jt(()=>g.value.dialogRef.open())},b=()=>{h.value=!0,jt(()=>_.value.dialogRef.open())},A=()=>{m.value=!1},y=()=>{h.value=!1},x=({action:H,id:B})=>{r.value=s.value.find(k=>B===k.id),jt(()=>{H==="delete"?u():H==="viewRelatedQuestions"&&S()})},$=(H=1)=>{const B={page:H};i.value!=="all"&&(B.assistantId=i.value),t.dispatch("captainDocuments/get",B)},N=H=>{i.value=H,$()},w=H=>$(H),D=()=>{var H,B;((H=s.value)==null?void 0:H.length)===0&&((B=l.value)==null?void 0:B.page)>1&&w(l.value.page-1)};return pt(()=>{a.value.length||t.dispatch("captainAssistants/get"),$()}),(H,B)=>(p(),V(gd,{"header-title":H.$t("CAPTAIN.DOCUMENTS.HEADER"),"button-label":H.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),"button-policy":["administrator"],"total-count":I(l).totalCount,"current-page":I(l).page,"show-pagination-footer":!o.value&&!!I(s).length,"is-fetching":o.value,"is-empty":!I(s).length,"feature-flag":I(Mt).CAPTAIN,"onUpdate:currentPage":w,onClick:b},{knowMore:K(()=>[v(tv,{"button-label":H.$t("CAPTAIN.HEADER_KNOW_MORE"),title:H.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:H.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-popover-dark.svg","learn-more-url":"https://chwt.app/captain-document"},null,8,["button-label","title","note"])]),emptyState:K(()=>[v(stt,{onClick:b})]),paywall:K(()=>[v(J_)]),controls:K(()=>[T.value?(p(),f("div",ott,[v(v2,{"assistant-id":i.value,onUpdate:N},null,8,["assistant-id"])])):O("",!0)]),body:K(()=>[v(att,{class:"mb-5"}),c("div",ltt,[(p(!0),f(fe,null,Ae(I(s),k=>(p(),V(_2,{id:k.id,key:k.id,name:k.name||k.external_link,"external-link":k.external_link,assistant:k.assistant,"created-at":k.created_at,onAction:x},null,8,["id","name","external-link","assistant","created-at"]))),128))])]),default:K(()=>[m.value?(p(),V(qet,{key:0,ref_key:"relationQuestionDialog",ref:g,"captain-document":r.value,onClose:A},null,8,["captain-document"])):O("",!0),h.value?(p(),V(ttt,{key:1,ref_key:"createDocumentDialog",ref:_,onClose:y},null,512)):O("",!0),r.value?(p(),V(Xp,{key:2,ref_key:"deleteDocumentDialog",ref:d,entity:r.value,type:"Documents",onDeleteSuccess:D},null,8,["entity"])):O("",!0)]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"]))}},rtt={__name:"BulkDeleteDialog",props:{type:{type:String,required:!0},bulkIds:{type:Object,required:!0}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=F(null),r=C(()=>s.type.toUpperCase()),d=async m=>{if(m)try{await l.dispatch("captainBulkActions/handleBulkDelete",Array.from(s.bulkIds)),a("deleteSuccess"),_e(o(`CAPTAIN.${r.value}.BULK_DELETE.SUCCESS_MESSAGE`))}catch{_e(o(`CAPTAIN.${r.value}.BULK_DELETE.ERROR_MESSAGE`))}},u=async()=>{var m;await d(Array.from(s.bulkIds)),(m=i.value)==null||m.close()};return t({dialogRef:i}),(m,h)=>(p(),V(Ms,{ref_key:"bulkDeleteDialogRef",ref:i,type:"alert",title:I(o)(`CAPTAIN.${r.value}.BULK_DELETE.TITLE`),description:I(o)(`CAPTAIN.${r.value}.BULK_DELETE.DESCRIPTION`),"confirm-button-label":I(o)(`CAPTAIN.${r.value}.BULK_DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},ctt={class:"flex flex-col gap-1"},dtt={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},utt={class:"flex items-center justify-between w-full gap-3"},ptt={__name:"ResponseForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},response:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o={uiFlags:ke("captainResponses/getUIFlags"),assistants:ke("captainAssistants/getRecords")},i=os({...{question:"",answer:"",assistantId:null}}),r={question:{required:lt,minLength:on(1)},answer:{required:lt,minLength:on(1)},assistantId:{required:lt}},d=C(()=>o.assistants.value.map(A=>({value:A.id,label:A.name}))),u=Lt(r,i),m=C(()=>o.uiFlags.value.creatingItem),h=(A,y)=>u.value[A].$error?a(`CAPTAIN.RESPONSES.FORM.${y}.ERROR`):"",_=C(()=>({question:h("question","QUESTION"),answer:h("answer","ANSWER"),assistantId:h("assistantId","ASSISTANT")})),g=()=>s("cancel"),T=()=>({question:i.question,answer:i.answer,assistant_id:i.assistantId}),S=async()=>{await u.value.$validate()&&s("submit",T())},b=A=>{if(!A)return;const{question:y,answer:x,assistant:$}=A;Object.assign(i,{question:y,answer:x,assistantId:$.id})};return ot(()=>n.response,A=>{n.mode==="edit"&&A&&b(A)},{immediate:!0}),(A,y)=>(p(),f("form",{class:"flex flex-col gap-4",onSubmit:ze(S,["prevent"])},[v(ln,{modelValue:i.question,"onUpdate:modelValue":y[0]||(y[0]=x=>i.question=x),label:I(a)("CAPTAIN.RESPONSES.FORM.QUESTION.LABEL"),placeholder:I(a)("CAPTAIN.RESPONSES.FORM.QUESTION.PLACEHOLDER"),message:_.value.question,"message-type":_.value.question?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),v(Ws,{modelValue:i.answer,"onUpdate:modelValue":y[1]||(y[1]=x=>i.answer=x),label:I(a)("CAPTAIN.RESPONSES.FORM.ANSWER.LABEL"),placeholder:I(a)("CAPTAIN.RESPONSES.FORM.ANSWER.PLACEHOLDER"),message:_.value.answer,"max-length":1e4,"message-type":_.value.answer?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),c("div",ctt,[c("label",dtt,E(I(a)("CAPTAIN.RESPONSES.FORM.ASSISTANT.LABEL")),1),v(Jo,{id:"assistant",modelValue:i.assistantId,"onUpdate:modelValue":y[2]||(y[2]=x=>i.assistantId=x),options:d.value,"has-error":!!_.value.assistantId,placeholder:I(a)("CAPTAIN.RESPONSES.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:_.value.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),c("div",utt,[v(ce,{type:"button",variant:"faded",color:"slate",label:I(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),v(ce,{type:"submit",label:I(a)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":m.value,disabled:m.value},null,8,["label","is-loading","disabled"])])],32))}},mtt={__name:"CreateResponseDialog",props:{selectedResponse:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=Pe(),l=yt(),i=F(null),r=F(null),d=T=>l.dispatch("captainResponses/update",{id:s.selectedResponse.id,...T}),u=C(()=>`CAPTAIN.RESPONSES.${s.type.toUpperCase()}`),m=T=>l.dispatch("captainResponses/create",T),h=async T=>{var S;try{s.type==="edit"?await d(T):await m(T),_e(o(`${u.value}.SUCCESS_MESSAGE`)),i.value.close()}catch(b){const A=((S=b==null?void 0:b.response)==null?void 0:S.message)||o(`${u.value}.ERROR_MESSAGE`);_e(A)}},_=()=>{a("close")},g=()=>{i.value.close()};return t({dialogRef:i}),(T,S)=>(p(),V(Ms,{ref_key:"dialogRef",ref:i,title:T.$t(`${u.value}.TITLE`),description:T.$t("CAPTAIN.RESPONSES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:_},{footer:K(()=>S[0]||(S[0]=[])),default:K(()=>[v(ptt,{ref_key:"responseForm",ref:r,mode:e.type,response:e.selectedResponse,onSubmit:h,onCancel:g},null,8,["mode","response"])]),_:1},8,["title","description"]))}},htt={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},ftt={__name:"ResponsePageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),f(fe,null,[v(ev,{title:a.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:a.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-dark.svg","learn-more-url":"https://chwt.app/captain-faq",class:"mb-8"},null,8,["title","note"]),v(Al,{title:a.$t("CAPTAIN.RESPONSES.EMPTY_STATE.TITLE"),subtitle:a.$t("CAPTAIN.RESPONSES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[c("div",htt,[(p(!0),f(fe,null,Ae(I(Xqe).slice(0,5),(l,i)=>(p(),V(av,{id:l.id,key:`response-${i}`,question:l.question,answer:l.answer,status:l.status,assistant:l.assistant,"created-at":l.created_at,"updated-at":l.created_at},null,8,["id","question","answer","status","assistant","created-at","updated-at"]))),128))])]),actions:K(()=>[v(ce,{label:a.$t("CAPTAIN.RESPONSES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},gtt={key:0,class:"flex gap-3"},_tt={key:0,class:"flex items-center gap-3"},vtt={class:"flex items-center gap-3"},btt={class:"flex items-center gap-1.5"},Ett={class:"text-sm text-n-slate-12 font-medium tabular-nums"},Ttt={class:"text-sm text-n-slate-10 tabular-nums"},Att={class:"flex gap-3 items-center"},ytt={class:"flex flex-col gap-4"},Stt={__name:"Index",setup(e){const t=En(),n=yt(),s=ke("captainResponses/getUIFlags"),a=ke("captainAssistants/getRecords"),o=ke("captainResponses/getMeta"),l=ke("captainResponses/getRecords"),i=C(()=>s.value.fetchingList),r=F(null),d=F(null),u=F(null),m=F("all"),h=F("all"),_=F(""),{t:g}=Pe(),T=F(null),S=F(!1),b=C(()=>a.value.length===0?!1:!i.value),A=C(()=>["all","pending","approved"].map(ne=>({label:g(`CAPTAIN.RESPONSES.STATUS.${ne.toUpperCase()}`),value:ne,action:"filter"}))),y=C(()=>m.value==="pending"?l.value.filter(ne=>ne.status==="pending"):l.value),x=C(()=>{const ne=A.value.find(J=>J.value===m.value);return g("CAPTAIN.RESPONSES.FILTER.STATUS",{selected:ne?ne.label:""})}),$=()=>{d.value.dialogRef.open()},N=async()=>{try{await n.dispatch("captainResponses/update",{id:r.value.id,status:"approved"}),_e(g("CAPTAIN.RESPONSES.EDIT.APPROVE_SUCCESS_MESSAGE"))}catch(ne){const J=(ne==null?void 0:ne.message)||g("CAPTAIN.RESPONSES.EDIT.ERROR_MESSAGE");_e(J)}finally{r.value=null}},w=()=>{_.value="create",jt(()=>T.value.dialogRef.open())},D=()=>{_.value="edit",jt(()=>T.value.dialogRef.open())},H=({action:ne,id:J})=>{r.value=y.value.find(ue=>J===ue.id),jt(()=>{ne==="delete"&&$(),ne==="edit"&&D(),ne==="approve"&&N()})},B=({id:ne,type:J})=>{J==="Conversation"&&t.push({name:"inbox_conversation",params:{conversation_id:ne}})},k=()=>{_.value="",r.value=null},U=(ne=1)=>{const J={page:ne};m.value!=="all"&&(J.status=m.value),h.value!=="all"&&(J.assistantId=h.value),n.dispatch("captainResponses/get",J)},G=F(new Set),L=F(null),M=C(()=>{var ue;const ne=G.value.size,J=((ue=y.value)==null?void 0:ue.length)||0;return{hasSelected:ne>0,isIndeterminate:ne>0&&ne<J,allSelected:J>0&&ne===J}}),R=C({get:()=>M.value.allSelected,set:ne=>{G.value=ne?new Set(y.value.map(J=>J.id)):new Set}}),P=C(()=>{var J;const ne=((J=y.value)==null?void 0:J.length)||0;return M.value.allSelected?g("CAPTAIN.RESPONSES.UNSELECT_ALL",{count:ne}):g("CAPTAIN.RESPONSES.SELECT_ALL",{count:ne})}),W=(ne,J)=>{L.value=ne?J:null},Q=ne=>{const J=new Set(G.value);J[J.has(ne)?"delete":"add"](ne),G.value=J},Z=()=>{var ue,Ne;const ne=((ue=y.value)==null?void 0:ue.length)===0,J=(Ne=o.value)==null?void 0:Ne.page;if(ne){const Re=J>1?J-1:J;U(Re)}else U(J);G.value=new Set},j=async()=>{try{await n.dispatch("captainBulkActions/handleBulkApprove",Array.from(G.value)),Z(),_e(g("CAPTAIN.RESPONSES.BULK_APPROVE.SUCCESS_MESSAGE"))}catch(ne){_e((ne==null?void 0:ne.message)||g("CAPTAIN.RESPONSES.BULK_APPROVE.ERROR_MESSAGE"))}},X=ne=>{const J=M.value.allSelected,ue=G.value.size>0;U(ne),(J||ue)&&(G.value=new Set)},q=()=>{var ne,J;((ne=y.value)==null?void 0:ne.length)===0&&((J=o.value)==null?void 0:J.page)>1&&X(o.value.page-1)},se=()=>{Z()},he=({value:ne})=>{m.value=ne,S.value=!1,U()},be=ne=>{h.value=ne,U()};return pt(()=>{n.dispatch("captainAssistants/get"),U()}),(ne,J)=>(p(),V(gd,{"total-count":I(o).totalCount,"current-page":I(o).page,"button-policy":["administrator"],"header-title":ne.$t("CAPTAIN.RESPONSES.HEADER"),"button-label":ne.$t("CAPTAIN.RESPONSES.ADD_NEW"),"is-fetching":i.value,"is-empty":!y.value.length,"show-pagination-footer":!i.value&&!!y.value.length,"feature-flag":I(Mt).CAPTAIN,"onUpdate:currentPage":X,onClick:w},{knowMore:K(()=>[v(tv,{"button-label":ne.$t("CAPTAIN.HEADER_KNOW_MORE"),title:ne.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:ne.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note"])]),emptyState:K(()=>[v(ftt,{onClick:w})]),paywall:K(()=>[v(J_)]),controls:K(()=>[b.value?(p(),f("div",{key:0,class:re(["mb-4 -mt-3 flex justify-between items-center w-fit py-1",{"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 rounded-lg outline outline-1 outline-n-weak bg-n-solid-3":M.value.hasSelected}])},[M.value.hasSelected?O("",!0):(p(),f("div",gtt,[v(I(Li),{onTrigger:J[1]||(J[1]=ue=>S.value=!1)},{default:K(()=>[v(ce,{label:x.value,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:J[0]||(J[0]=ue=>S.value=!S.value)},null,8,["label"]),S.value?(p(),V(ua,{key:0,"menu-items":A.value,class:"mt-2",onAction:he},null,8,["menu-items"])):O("",!0)]),_:1}),v(v2,{"assistant-id":h.value,onUpdate:be},null,8,["assistant-id"])])),v(Ps,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:K(()=>[M.value.hasSelected?(p(),f("div",_tt,[c("div",vtt,[c("div",btt,[v(Dr,{modelValue:R.value,"onUpdate:modelValue":J[2]||(J[2]=ue=>R.value=ue),indeterminate:M.value.isIndeterminate},null,8,["modelValue","indeterminate"]),c("span",Ett,E(P.value),1)]),c("span",Ttt,E(ne.$t("CAPTAIN.RESPONSES.SELECTED",{count:G.value.size})),1)]),J[5]||(J[5]=c("div",{class:"h-4 w-px bg-n-strong"},null,-1)),c("div",Att,[v(ce,{label:ne.$t("CAPTAIN.RESPONSES.BULK_APPROVE_BUTTON"),sm:"",ghost:"",icon:"i-lucide-check",class:"!px-1.5",onClick:j},null,8,["label"]),J[4]||(J[4]=c("div",{class:"h-4 w-px bg-n-strong"},null,-1)),v(ce,{label:ne.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:J[3]||(J[3]=ue=>u.value.dialogRef.open())},null,8,["label"])])])):O("",!0)]),_:1})],2)):O("",!0)]),body:K(()=>[v(p2,{class:"mb-5"}),c("div",ytt,[(p(!0),f(fe,null,Ae(y.value,ue=>(p(),V(av,{id:ue.id,key:ue.id,question:ue.question,answer:ue.answer,assistant:ue.assistant,documentable:ue.documentable,status:ue.status,"created-at":ue.created_at,"updated-at":ue.updated_at,"is-selected":G.value.has(ue.id),selectable:L.value===ue.id||G.value.size>0,"show-menu":!G.value.has(ue.id),onAction:H,onNavigate:B,onSelect:Q,onHover:Ne=>W(Ne,ue.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","show-menu","onHover"]))),128))])]),default:K(()=>[r.value?(p(),V(Xp,{key:0,ref_key:"deleteDialog",ref:d,entity:r.value,type:"Responses",onDeleteSuccess:q},null,8,["entity"])):O("",!0),G.value?(p(),V(rtt,{key:1,ref_key:"bulkDeleteDialog",ref:u,"bulk-ids":G.value,type:"Responses",onDeleteSuccess:se},null,8,["bulk-ids"])):O("",!0),_.value?(p(),V(mtt,{key:2,ref_key:"createDialog",ref:T,type:_.value,"selected-response":r.value,onClose:k},null,8,["type","selected-response"])):O("",!0)]),_:1},8,["total-count","current-page","header-title","button-label","is-fetching","is-empty","show-pagination-footer","feature-flag"]))}},Itt=[{path:Bt("accounts/:accountId/captain/assistants"),component:dZe,name:"captain_assistants_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/assistants/:assistantId"),component:LQe,name:"captain_assistants_edit",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/assistants/:assistantId/inboxes"),component:XQe,name:"captain_assistants_inboxes_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/assistants/:assistantId/guardrails"),component:CJe,name:"captain_assistants_guardrails_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/assistants/:assistantId/scenarios"),component:bet,name:"captain_assistants_scenarios_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/assistants/:assistantId/guidelines"),component:BJe,name:"captain_assistants_guidelines_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/documents"),component:itt,name:"captain_documents_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}},{path:Bt("accounts/:accountId/captain/responses"),component:Stt,name:"captain_responses_index",meta:{permissions:["administrator","agent"],featureFlag:Mt.CAPTAIN,installationTypes:[Jn.CLOUD,Jn.ENTERPRISE]}}],b2=Symbol("SidebarControl");function ov(){const e=Ao(b2,null);if(e===null)throw new Error("Component is missing a parent <Sidebar /> component.");const t=En(),{shouldShow:n}=Br(),s=r=>{var d;return r&&((d=t.resolve(r))==null?void 0:d.path)||"/"},a=r=>{var d,u;return r?((u=(d=t.resolve(r))==null?void 0:d.meta)==null?void 0:u.permissions)??[]:[]},o=r=>{var d,u;return r&&((u=(d=t.resolve(r))==null?void 0:d.meta)==null?void 0:u.featureFlag)||""},l=r=>{var d,u;return r?((u=(d=t.resolve(r))==null?void 0:d.meta)==null?void 0:u.installationTypes)||[]:[]};return{...e,resolvePath:s,resolvePermissions:a,resolveFeatureFlag:o,isAllowed:r=>{const d=a(r),u=o(r),m=l(r);return n(u,d,m)}}}function Ctt(e){cs(b2,e)}function xtt(e){const t={$mod:navigator.platform.includes("Mac")?"":"Ctrl",shift:"",alt:"",ctrl:"Ctrl",cmd:"",option:"",enter:"",tab:"",esc:""};return C(()=>e.map(n=>t[n.toLowerCase()]||n).join("").toUpperCase())}function Ntt(e){const t=cn(),n=En(),s=l=>t.name===l,a=l=>{s(l)||n.push({name:l})};return Qs({"$mod+Slash":{action:()=>e(!0)},"$mod+Escape":{action:()=>e(!1)},"Alt+KeyC":{action:()=>a("home")},"Alt+KeyV":{action:()=>a("contacts_dashboard")},"Alt+KeyR":{action:()=>a("account_overview_reports")},"Alt+KeyS":{action:()=>a("agent_list")}})}const Ott={key:0,class:"relative flex items-center gap-2"},wtt={key:1,class:"size-2 -top-px ltr:-right-px rtl:-left-px bg-n-brand absolute rounded-full border border-n-solid-2"},Rtt={class:"text-sm font-medium leading-5 flex-grow"},$tt={__name:"SidebarGroupHeader",props:{to:{type:[Object,String],default:""},label:{type:String,default:""},icon:{type:[String,Object],default:""},expandable:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},hasActiveChild:{type:Boolean,default:!1},getterKeys:{type:Object,default:()=>({})}},emits:["toggle"],setup(e,{emit:t}){const n=e,s=t,a=ke(n.getterKeys.badge);return(o,l)=>(p(),V(xs(e.to?"router-link":"div"),{class:re(["flex items-center gap-2 px-2 py-1.5 rounded-lg h-8",{"text-n-blue-text bg-n-alpha-2 font-medium":e.isActive&&!e.hasActiveChild,"text-n-slate-12 font-medium":e.hasActiveChild,"text-n-slate-11 hover:bg-n-alpha-2":!e.isActive&&!e.hasActiveChild}]),role:"button",draggable:"false",to:e.to,title:e.label,onClick:l[1]||(l[1]=ze(i=>s("toggle"),["stop"]))},{default:K(()=>[e.icon?(p(),f("div",Ott,[e.icon?(p(),V(Wt,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):O("",!0),I(a)?(p(),f("span",wtt)):O("",!0)])):O("",!0),c("span",Rtt,E(e.label),1),e.expandable?pe((p(),f("span",{key:1,class:"i-lucide-chevron-up size-3",onClick:l[0]||(l[0]=ze(i=>s("toggle"),["stop"]))},null,512)),[[pn,e.isExpanded]]):O("",!0)]),_:1},8,["to","title","class"]))}},Mtt={class:"flex-1 truncate min-w-0"},E2={__name:"SidebarGroupLeaf",props:{label:{type:String,required:!0},to:{type:[String,Object],required:!0},icon:{type:[String,Object],default:null},active:{type:Boolean,default:!1},component:{type:Function,default:null}},setup(e){const t=e,{resolvePermissions:n,resolveFeatureFlag:s}=ov(),a=C(()=>typeof t.component=="function"||YE(t.component));return(o,l)=>(p(),V(_o,{permissions:I(n)(e.to),"feature-flag":I(s)(e.to),as:"li",class:"py-0.5 ltr:pl-3 rtl:pr-3 rtl:mr-3 ltr:ml-3 relative text-n-slate-11 child-item before:bg-n-slate-4 after:bg-transparent after:border-n-slate-4 before:left-0 rtl:before:right-0"},{default:K(()=>[(p(),V(xs(e.to?"router-link":"div"),{to:e.to,title:e.label,class:re(["flex h-8 items-center gap-2 px-2 py-1 rounded-lg max-w-[9.438rem] hover:bg-gradient-to-r from-transparent via-n-slate-3/70 to-n-slate-3/70 group",{"text-n-blue-text bg-n-alpha-2 active":e.active}])},{default:K(()=>[a.value?(p(),V(xs(e.component),{key:0,label:e.label,icon:e.icon,active:e.active},null,8,["label","icon","active"])):(p(),f(fe,{key:1},[e.icon?(p(),V(Wt,{key:0,icon:e.icon,class:"size-4 inline-block"},null,8,["icon"])):O("",!0),c("div",Mtt,E(e.label),1)],64))]),_:1},8,["to","title","class"]))]),_:1},8,["permissions","feature-flag"]))}},ktt={class:"flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 text-n-slate-10 select-none pointer-events-none"},Ltt={class:"text-sm font-medium leading-5 flex-grow"},Dtt={__name:"SidebarGroupSeparator",props:{label:{type:String,default:""},icon:{type:String,default:""}},setup(e){return(t,n)=>(p(),f("div",ktt,[e.icon?(p(),V(Wt,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):O("",!0),c("span",Ltt,E(e.label),1)]))}},Ptt={key:1,class:"m-0 list-none reset-base relative group"},Btt={key:0,class:"absolute bg-gradient-to-t from-n-solid-2 w-full h-12 to-transparent -bottom-1 pointer-events-none flex items-end justify-end px-2 animate-fade-in-up"},Ftt={__name:"SidebarSubGroup",props:{isExpanded:{type:Boolean,default:!1},label:{type:String,required:!0},icon:{type:[Object,String],required:!0},children:{type:Array,default:void 0},activeChild:{type:Object,default:void 0}},setup(e){const t=e,{isAllowed:n}=ov(),s=F(null),a=C(()=>t.children.filter(r=>r.to&&n(r.to))),o=C(()=>a.value.length>0),l=C(()=>a.value.length>7),i=F(!1);return ba(s,"scroll",()=>{const{scrollHeight:r,scrollTop:d,clientHeight:u}=s.value;i.value=r-d===u}),(r,d)=>(p(),f(fe,null,[o.value?pe((p(),V(Dtt,{key:0,label:e.label,icon:e.icon,class:"my-1"},null,8,["label","icon"])),[[pn,e.isExpanded]]):O("",!0),e.children.length?(p(),f("ul",Ptt,[c("div",{ref_key:"scrollableContainer",ref:s,class:re({"max-h-[calc(14rem+16px)] overflow-y-scroll no-scrollbar":l.value})},[(p(!0),f(fe,null,Ae(e.children,u=>{var m,h;return pe((p(),V(E2,Bs({ref_for:!0},u,{key:u.name,active:((m=e.activeChild)==null?void 0:m.name)===u.name}),null,16,["active"])),[[pn,e.isExpanded||((h=e.activeChild)==null?void 0:h.name)===u.name]])}),128))],2),l.value&&e.isExpanded?pe((p(),f("div",Btt,d[0]||(d[0]=[c("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",class:"text-n-slate-9 opacity-50 group-hover:opacity-100",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M4 4L8 8L12 4",stroke:"currentColor",opacity:"0.5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",opacity:"0.75","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M4 16L8 20L12 16",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),512)),[[pn,!i.value]]):O("",!0)])):O("",!0)],64))}},Utt={class:"py-1 pl-3 text-n-slate-10 border rounded-lg border-dashed text-center border-n-alpha-2 text-xs h-8 grid place-content-center select-none pointer-events-none"},Gtt={__name:"SidebarGroupEmptyLeaf",setup(e){const{t}=Pe();return(n,s)=>(p(),f("li",Utt,[at(n.$slots,"default",{},()=>[Ee(E(I(t)("SIDEBAR.NO_ITEMS")),1)])]))}},Vtt={key:0,class:"grid m-0 list-none sidebar-group-children"},Htt={key:1},Wtt={__name:"SidebarGroup",props:{name:{type:String,required:!0},label:{type:String,required:!0},icon:{type:[String,Object,Function],default:null},to:{type:Object,default:null},activeOn:{type:Array,default:()=>[]},children:{type:Array,default:void 0},getterKeys:{type:Object,default:()=>({})}},setup(e){const t=e,{expandedItem:n,setExpandedItem:s,resolvePath:a,resolvePermissions:o,resolveFeatureFlag:l,isAllowed:i}=ov(),r=C(()=>{var x;return((x=t.children)==null?void 0:x.flatMap($=>$.children||$))||[]}),d=cn(),u=En(),m=C(()=>n.value===t.name),h=C(()=>t.children),_=C(()=>Array.isArray(t.children)&&t.children.length>0),g=C(()=>_.value?t.children.filter(x=>x.to&&i(x.to)):[]),T=C(()=>g.value.length>0),S=C(()=>t.to?d.path===a(t.to)?!0:t.activeOn.includes(d.name):!1),b=C(()=>{const x=r.value.find(N=>N.to&&d.path===a(N.to));if(x)return x;const $=r.value.filter(N=>{var w;return(w=N.activeOn)==null?void 0:w.includes(d.name)});return $.length>0?$.find(w=>Object.keys(w.to.params).map(D=>String(w.to.params[D])===String(d.params[D])).every(D=>D))??$[0]:r.value.find(N=>N.to&&d.path.startsWith(a(N.to)))}),A=C(()=>b.value!==void 0),y=()=>{if(T.value&&!m.value&&!A.value){const x=g.value[0];u.push(x.to)}s(t.name)};return pt(async()=>{await jt(),A.value&&s(t.name)}),(x,$)=>!_.value||T.value?(p(),V(_o,{key:0,permissions:I(o)(e.to),"feature-flag":I(l)(e.to),as:"li",class:"grid gap-1 text-sm cursor-pointer select-none"},{default:K(()=>[v($tt,{icon:e.icon,name:e.name,label:e.label,to:e.to,"getter-keys":e.getterKeys,"is-active":S.value,"has-active-child":A.value,expandable:_.value,"is-expanded":m.value,onToggle:y},null,8,["icon","name","label","to","getter-keys","is-active","has-active-child","expandable","is-expanded"]),_.value?pe((p(),f("ul",Vtt,[(p(!0),f(fe,null,Ae(e.children,N=>{var w,D;return p(),f(fe,{key:N.name},[N.children?(p(),V(Ftt,{key:0,label:N.label,icon:N.icon,children:N.children,"is-expanded":m.value,"active-child":b.value},null,8,["label","icon","children","is-expanded","active-child"])):I(i)(N.to)?pe((p(),V(E2,Bs({key:1,ref_for:!0},N,{active:((w=b.value)==null?void 0:w.name)===N.name}),null,16,["active"])),[[pn,m.value||((D=b.value)==null?void 0:D.name)===N.name]]):O("",!0)],64)}),128))],512)),[[pn,m.value||A.value]]):h.value&&m.value?(p(),f("ul",Htt,[v(Gtt)])):O("",!0)]),_:1},8,["permissions","feature-flag"])):O("",!0)}},Ktt={},ztt={class:"h-0 border-b border-n-strong -mx-2"};function jtt(e,t){return p(),f("div",ztt)}const Ytt=Fe(Ktt,[["render",jtt]]),Xtt={class:"grid gap-0"},qtt={class:"flex-grow flex items-center gap-1"},Ztt={class:"flex gap-1 items-center flex-grow text-sm"},Qtt={class:"p-1 flex-shrink-0"},Jtt={class:"flex-grow flex items-center gap-1"},ent={__name:"SidebarProfileMenuStatus",setup(e){const{t}=Pe(),n=yt(),s=ke("getCurrentUserAvailability"),a=ke("getCurrentAccountId"),o=ke("getCurrentUserAutoOffline"),{isImpersonating:l}=BA(),{AVAILABILITY_STATUS_KEYS:i}=Pt,r=C(()=>[t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),d=["bg-n-teal-9","bg-n-amber-9","bg-n-slate-9"],u=C(()=>r.value.map((g,T)=>({label:g,value:i[T],color:d[T],icon:Wn("span",{class:[d[T],"size-[12px] rounded"]}),active:s.value===i[T]}))),m=C(()=>u.value.find(g=>g.active)),h=C({get:()=>o.value,set:g=>{n.dispatch("updateAutoOffline",{accountId:a.value,autoOffline:g})}});function _(g){if(l.value){_e(t("PROFILE_SETTINGS.FORM.AVAILABILITY.IMPERSONATING_ERROR"));return}try{n.dispatch("updateAvailability",{availability:g,account_id:a.value})}catch{_e(t("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}}return(g,T)=>{const S=_t("tooltip");return p(),V(I($r),null,{default:K(()=>[c("div",Xtt,[v(I(eo),{"preserve-open":""},{default:K(()=>[c("div",qtt,E(g.$t("SIDEBAR.SET_YOUR_AVAILABILITY")),1),v(I(Di),null,{trigger:K(({toggle:b})=>[v(ce,{size:"sm",color:"slate",variant:"faded",class:"min-w-[96px]",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:b},{default:K(()=>[c("div",Ztt,[c("div",Qtt,[c("div",{class:re(["size-2 rounded-sm",m.value.color])},null,2)]),c("span",null,E(m.value.label),1)])]),_:2},1032,["onClick"])]),default:K(()=>[v(I(Pi),{class:"min-w-32 z-20"},{default:K(()=>[(p(!0),f(fe,null,Ae(u.value,b=>(p(),V(I(eo),{key:b.value,label:b.label,icon:b.icon,class:"cursor-pointer",onClick:A=>_(b.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1})]),_:1}),v(I(eo),null,{default:K(()=>[c("div",Jtt,[Ee(E(g.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT"))+" ",1),pe(v(Wt,{icon:"i-lucide-info",class:"size-4 text-n-slate-10"},null,512),[[S,g.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_SHORT"),void 0,{top:!0}]])]),v(so,{modelValue:h.value,"onUpdate:modelValue":T[0]||(T[0]=b=>h.value=b)},null,8,["modelValue"])]),_:1})])]),_:1})}}},tnt=["onClick"],nnt={class:"min-w-0"},snt={class:"text-sm font-medium leading-4 truncate text-n-slate-12"},ant={class:"text-xs truncate text-n-slate-11"},ont=Object.assign({inheritAttrs:!1},{__name:"SidebarProfileMenu",emits:["close","openKeyShortcutModal"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=ke("getCurrentUser"),o=ke("getCurrentUserAvailability"),l=ke("getCurrentAccountId"),i=ke("globalConfig/get"),r=ke("accounts/isFeatureEnabledonAccount"),d=C(()=>r.value(l.value,Mt.CONTACT_CHATWOOT_SUPPORT_TEAM)&&i.value.chatwootInboxToken),u=C(()=>[{show:d.value,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CONTACT_SUPPORT"),icon:"i-lucide-life-buoy",click:()=>{window.$chatwoot.toggle()}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS"),icon:"i-lucide-keyboard",click:()=>{n("openKeyShortcutModal")}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.PROFILE_SETTINGS"),icon:"i-lucide-user-pen",link:{name:"profile_settings_index"}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.APPEARANCE"),icon:"i-lucide-palette",click:()=>{document.querySelector("ninja-keys").open({parent:"appearance_settings"})}},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.DOCS"),icon:"i-lucide-book",link:"https://www.chatwoot.com/hc/user-guide/en",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CHANGELOG"),icon:"i-lucide-scroll-text",link:"https://www.chatwoot.com/changelog/",nativeLink:!0,target:"_blank"},{show:a.value.type==="SuperAdmin",showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE"),icon:"i-lucide-castle",link:"/super_admin",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.LOGOUT"),icon:"i-lucide-power",click:fr.logout}]),m=C(()=>u.value.filter(h=>h.show));return(h,_)=>(p(),V(I(Di),{class:"relative w-full min-w-0",onClose:_[0]||(_[0]=g=>n("close"))},{trigger:K(({toggle:g,isOpen:T})=>[c("button",{class:re(["flex gap-2 items-center p-1 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-1",{"bg-n-alpha-1":T}]),onClick:g},[v(Ft,{size:32,name:I(a).available_name,src:I(a).avatar_url,status:I(o),class:"flex-shrink-0","rounded-full":""},null,8,["name","src","status"]),c("div",nnt,[c("div",snt,E(I(a).available_name),1),c("div",ant,E(I(a).email),1)])],10,tnt)]),default:K(()=>[v(I(Pi),{class:"bottom-12 z-50 mb-2 w-80 ltr:left-0 rtl:right-0"},{default:K(()=>[v(ent),v(I(Ytt)),(p(!0),f(fe,null,Ae(m.value,g=>(p(),V(Nf,{key:g.label,"show-on-custom-branded-instance":g.showOnCustomBrandedInstance},{default:K(()=>[g.show?(p(),V(I(eo),Bs({key:0,ref_for:!0},g),null,16)):O("",!0)]),_:2},1032,["show-on-custom-branded-instance"]))),128))]),_:1})]),_:1}))}}),lnt={class:"flex-1 truncate min-w-0"},rnt={key:0,class:"grid place-content-center size-5 bg-n-ruby-5/60 rounded-full"},cnt={__name:"ChannelLeaf",props:{label:{type:String,required:!0},active:{type:Boolean,default:!1},inbox:{type:Object,required:!0}},setup(e){const t=e,n=C(()=>t.inbox.reauthorization_required);return(s,a)=>{const o=_t("tooltip");return p(),f(fe,null,[c("span",{class:re(["size-4 grid place-content-center rounded-full bg-n-alpha-2",{"bg-n-solid-blue":e.active}])},[v(bg,{inbox:e.inbox,class:"size-3"},null,8,["inbox"])],2),c("div",lnt,E(e.label),1),n.value?pe((p(),f("div",rnt,[v(Wt,{icon:"i-woot-alert",class:"size-3 text-n-ruby-9"})])),[[o,s.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]]):O("",!0)],64)}}},dnt=["data-account-id","onClick"],unt={class:"text-sm font-medium leading-5 text-n-slate-12 truncate","aria-live":"polite"},pnt={key:0,"aria-hidden":"true",class:"i-lucide-chevron-down size-4 text-n-slate-10 flex-shrink-0"},mnt=["for"],hnt=["title"],fnt=["title"],gnt={__name:"SidebarAccountSwitcher",emits:["showCreateAccountModal"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),{accountId:a,currentAccount:o}=_s(),l=ke("getCurrentUser"),i=ke("globalConfig/get"),r=ke("getUserAccounts"),d=C(()=>r.value.length>1&&o.value.name),u=C(()=>[...l.value.accounts||[]].sort((_,g)=>_.name.localeCompare(g.name))),m=_=>{const g=`/app/accounts/${_}/dashboard`;window.location.href=g},h=()=>{n("showCreateAccountModal")};return(_,g)=>(p(),V(I(Di),null,{trigger:K(({toggle:T,isOpen:S})=>[c("button",{id:"sidebar-account-switcher","data-account-id":I(a),"aria-haspopup":"listbox","aria-controls":"account-options",class:re(["flex items-center gap-2 justify-between w-full rounded-lg px-2",[S&&"bg-n-alpha-1",d.value?"hover:bg-n-alpha-1 cursor-pointer":"cursor-default"]]),onClick:()=>d.value&&T()},[c("span",unt,E(I(o).name),1),d.value?(p(),f("span",pnt)):O("",!0)],10,dnt)]),default:K(()=>[d.value?(p(),V(I(Pi),{key:0,class:"min-w-80 z-50"},{default:K(()=>[v(I($r),{title:I(s)("SIDEBAR_ITEMS.SWITCH_ACCOUNT")},{default:K(()=>[(p(!0),f(fe,null,Ae(u.value,T=>(p(),V(I(eo),{id:`account-${T.id}`,key:T.id,class:"cursor-pointer",onClick:S=>m(T.id)},{label:K(()=>[c("div",{for:T.name,class:"text-left rtl:text-right flex gap-2 items-center"},[c("span",{class:"text-n-slate-12 max-w-36 truncate min-w-0",title:T.name},E(T.name),9,hnt),g[0]||(g[0]=c("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),c("span",{class:"text-n-slate-11 max-w-24 truncate capitalize",title:T.name},E(T.custom_role_id?T.custom_role.name:T.role),9,fnt)],8,mnt),pe(v(Wt,{icon:"i-lucide-check",class:"text-n-teal-11 size-5"},null,512),[[pn,T.id===I(a)]])]),_:2},1032,["id","onClick"]))),128))]),_:1},8,["title"]),I(i).createNewAccountFromDashboard?(p(),V(I(eo),{key:0},{default:K(()=>[v(ce,{color:"slate",variant:"faded",class:"w-full",size:"sm",onClick:h},{default:K(()=>[Ee(E(I(s)("CREATE_ACCOUNT.NEW_ACCOUNT")),1)]),_:1})]),_:1})):O("",!0)]),_:1})):O("",!0)]),_:1}))}},_nt=["src"],vnt={__name:"Logo",setup(e){const t=XE(),n=ke("globalConfig/get");return(s,a)=>I(n).logoThumbnail?(p(),f("img",Bs({key:0},I(t),{src:I(n).logoThumbnail}),null,16,_nt)):(p(),f("svg",Bs({key:1},I(t),{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),a[0]||(a[0]=[Fo('<g clip-path="url(#woot-logo-clip-2342424e23u32098)"><path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#2781F6"></path><path d="M11.4172 11.4172H7.70831C5.66383 11.4172 4 9.75328 4 7.70828C4 5.66394 5.66383 4 7.70835 4C9.75339 4 11.4172 5.66394 11.4172 7.70828V11.4172Z" fill="white" stroke="white" stroke-width="0.1875"></path></g><defs><clipPath id="woot-logo-clip-2342424e23u32098"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2)]),16))}},bnt={class:"grid gap-2 mt-2 mb-4"},Ent={class:"flex items-center min-w-0 gap-2 px-2"},Tnt={class:"grid flex-shrink-0 size-6 place-content-center"},Ant={class:"flex gap-2 px-2"},ynt={class:"flex-grow text-left"},Snt={class:"hidden tracking-wide pointer-events-none select-none text-n-slate-10"},Int={class:"grid flex-grow gap-2 px-2 pb-5 overflow-y-scroll no-scrollbar"},Cnt={class:"flex flex-col gap-1.5 m-0 list-none"},xnt={class:"p-1 border-t border-n-weak shadow-[0px_-2px_4px_0px_rgba(27,28,29,0.02)] flex-shrink-0 flex justify-between gap-2 items-center"},Nnt={__name:"Sidebar",props:{isMobileSidebarOpen:{type:Boolean,default:!1}},emits:["closeKeyShortcutModal","openKeyShortcutModal","showCreateAccountModal","closeMobileSidebar"],setup(e,{emit:t}){const n=e,s=t,{accountScopedRoute:a}=_s(),o=Pn(),l=xtt(["$mod","k"]),{t:i}=Pe(),{isStacklab:r}=Js();Ntt(k=>{s(k?"openKeyShortcutModal":"closeKeyShortcutModal")});const u=k$("next-sidebar-expanded-item",null,sessionStorage);Ctt({expandedItem:u,setExpandedItem:k=>{u.value=u.value===k?null:k}});const h=ke("inboxes/getInboxes"),_=ke("labels/getLabelsOnSidebar"),g=ke("teams/getMyTeams"),T=ke("customViews/getContactCustomViews"),S=ke("customViews/getConversationCustomViews"),b=ke("dashboardApps/getNavigationApps"),A=ke("funnel/getFunnels"),y=ke("kanban/getKanbanItems"),x=ke("funnel/getSelectedFunnel");pt(()=>{o.dispatch("labels/get"),o.dispatch("inboxes/get"),o.dispatch("notifications/unReadCount"),o.dispatch("teams/get"),o.dispatch("attributes/get"),o.dispatch("customViews/get","conversation"),o.dispatch("customViews/get","contact"),o.dispatch("dashboardApps/get"),o.dispatch("funnel/fetch"),o.dispatch("kanban/fetchKanbanConfig")});const $=C(()=>h.value.slice().sort((k,U)=>k.name.localeCompare(U.name))),N=C(()=>{var k;return x.value?((k=y.value)==null?void 0:k.slice().sort((U,G)=>{const L=new Date(U.updated_at||U.created_at||0);return new Date(G.updated_at||G.created_at||0)-L}).slice(0,5))||[]:[]}),w=()=>{n.isMobileSidebarOpen&&s("closeMobileSidebar")},D=()=>[{name:"Reports Agent",label:i("SIDEBAR.REPORTS_AGENT"),to:a("agent_reports_index"),activeOn:["agent_reports_show"]},{name:"Reports Label",label:i("SIDEBAR.REPORTS_LABEL"),to:a("label_reports_index")},{name:"Reports Inbox",label:i("SIDEBAR.REPORTS_INBOX"),to:a("inbox_reports_index"),activeOn:["inbox_reports_show"]},{name:"Reports Team",label:i("SIDEBAR.REPORTS_TEAM"),to:a("team_reports_index"),activeOn:["team_reports_show"]},{name:"Reports Kanban",label:i("SIDEBAR.REPORTS_KANBAN"),to:a("kanban_reports")}],H=C(()=>D()),B=C(()=>{var G,L;const k=[{name:"Inbox",label:i("SIDEBAR.INBOX"),icon:"i-lucide-inbox",to:a("inbox_view"),activeOn:["inbox_view","inbox_view_conversation"],getterKeys:{badge:"notifications/getHasUnreadNotifications"}},{name:"Conversation",label:i("SIDEBAR.CONVERSATIONS"),icon:"i-lucide-message-circle",children:[{name:"All",label:i("SIDEBAR.ALL_CONVERSATIONS"),activeOn:["inbox_conversation"],to:a("home")},{name:"Mentions",label:i("SIDEBAR.MENTIONED_CONVERSATIONS"),activeOn:["conversation_through_mentions"],to:a("conversation_mentions")},{name:"Unattended",activeOn:["conversation_through_unattended"],label:i("SIDEBAR.UNATTENDED_CONVERSATIONS"),to:a("conversation_unattended")},{name:"Folders",label:i("SIDEBAR.CUSTOM_VIEWS_FOLDER"),icon:"i-lucide-folder",activeOn:["conversations_through_folders"],children:S.value.map(M=>({name:`${M.name}-${M.id}`,label:M.name,to:a("folder_conversations",{id:M.id})}))},{name:"Teams",label:i("SIDEBAR.TEAMS"),icon:"i-lucide-users",activeOn:["conversations_through_team"],children:g.value.map(M=>({name:`${M.name}-${M.id}`,label:M.name,to:a("team_conversations",{teamId:M.id})}))},{name:"Channels",label:i("SIDEBAR.CHANNELS"),icon:"i-lucide-mailbox",activeOn:["conversation_through_inbox"],children:$.value.map(M=>({name:`${M.name}-${M.id}`,label:M.name,to:a("inbox_dashboard",{inbox_id:M.id}),component:R=>Wn(cnt,{label:R.label,active:R.active,inbox:M})}))},{name:"Labels",label:i("SIDEBAR.LABELS"),icon:"i-lucide-tag",activeOn:["conversations_through_label"],children:_.value.map(M=>({name:`${M.title}-${M.id}`,label:M.title,icon:Wn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:M.color}}),to:a("label_conversations",{label:M.title})}))}]},{name:"Kanban",label:i("SIDEBAR.KANBAN_BOARD_TITLE",{title:o.getters["kanban/getKanbanTitle"]}),icon:"i-lucide-layout-grid",featureFlag:"kanban_board",children:[{name:"Stages",label:"Etapas",activeOn:["kanban_board"],to:a("kanban_board")},...r?[{name:"Message Templates",label:"Modelos de mensagens",activeOn:["kanban_templates"],to:a("kanban_board",{},{view:"templates"})}]:[],{name:"Funnels",label:"Funis",icon:"i-lucide-workflow",activeOn:["kanban_board"],children:((G=A.value)==null?void 0:G.map(M=>({name:`funnel-${M.id}`,label:M.name,to:a("kanban_board",{},{funnel:M.id})})))||[]},...x.value?[{name:"Recent Items",label:"Itens Recentes",icon:"i-lucide-clock",activeOn:["kanban_board"],children:((L=N.value)==null?void 0:L.map(M=>{var R;return{name:`item-${M.id}`,label:((R=M.item_details)==null?void 0:R.title)||`Item ${M.id}`,to:a("kanban_board",{},{item:M.id})}}))||[]}]:[]]},{name:"Captain",icon:"i-woot-captain",label:i("SIDEBAR.CAPTAIN"),children:[{name:"Assistants",label:i("SIDEBAR.CAPTAIN_ASSISTANTS"),to:a("captain_assistants_index")},{name:"Documents",label:i("SIDEBAR.CAPTAIN_DOCUMENTS"),to:a("captain_documents_index")},{name:"Responses",label:i("SIDEBAR.CAPTAIN_RESPONSES"),to:a("captain_responses_index")}]},{name:"Contacts",label:i("SIDEBAR.CONTACTS"),icon:"i-lucide-contact",children:[{name:"All Contacts",label:i("SIDEBAR.ALL_CONTACTS"),to:a("contacts_dashboard_index",{},{page:1,search:void 0}),activeOn:["contacts_dashboard_index","contacts_edit"]},{name:"Active",label:i("SIDEBAR.ACTIVE"),to:a("contacts_dashboard_active"),activeOn:["contacts_dashboard_active"]},{name:"Segments",icon:"i-lucide-group",label:i("SIDEBAR.CUSTOM_VIEWS_SEGMENTS"),children:T.value.map(M=>({name:`${M.name}-${M.id}`,label:M.name,to:a("contacts_dashboard_segments_index",{segmentId:M.id},{page:1}),activeOn:["contacts_dashboard_segments_index","contacts_edit_segment"]}))},{name:"Tagged With",icon:"i-lucide-tag",label:i("SIDEBAR.TAGGED_WITH"),children:_.value.map(M=>({name:`${M.title}-${M.id}`,label:M.title,icon:Wn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:M.color}}),to:a("contacts_dashboard_labels_index",{label:M.title},{page:1,search:void 0}),activeOn:["contacts_dashboard_labels_index","contacts_edit_label"]}))}]},{name:"Reports",label:i("SIDEBAR.REPORTS"),icon:"i-lucide-chart-spline",children:[{name:"Report Overview",label:i("SIDEBAR.REPORTS_OVERVIEW"),to:a("account_overview_reports")},{name:"Report Conversation",label:i("SIDEBAR.REPORTS_CONVERSATION"),to:a("conversation_reports")},...H.value,{name:"Reports CSAT",label:i("SIDEBAR.CSAT"),to:a("csat_reports")},{name:"Reports SLA",label:i("SIDEBAR.REPORTS_SLA"),to:a("sla_reports")},{name:"Reports Bot",label:i("SIDEBAR.REPORTS_BOT"),to:a("bot_reports")}]},{name:"Campaigns",label:i("SIDEBAR.CAMPAIGNS"),icon:"i-lucide-megaphone",children:[{name:"Live chat",label:i("SIDEBAR.LIVE_CHAT"),to:a("campaigns_livechat_index")},{name:"SMS",label:i("SIDEBAR.SMS"),to:a("campaigns_sms_index")},{name:"WhatsApp",label:i("SIDEBAR.WHATSAPP"),to:a("campaigns_whatsapp_index")}]},{name:"Portals",label:i("SIDEBAR.HELP_CENTER.TITLE"),icon:"i-lucide-library-big",children:[{name:"Articles",label:i("SIDEBAR.HELP_CENTER.ARTICLES"),activeOn:["portals_articles_index","portals_articles_new","portals_articles_edit"],to:a("portals_index",{navigationPath:"portals_articles_index"})},{name:"Categories",label:i("SIDEBAR.HELP_CENTER.CATEGORIES"),activeOn:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"],to:a("portals_index",{navigationPath:"portals_categories_index"})},{name:"Locales",label:i("SIDEBAR.HELP_CENTER.LOCALES"),activeOn:["portals_locales_index"],to:a("portals_index",{navigationPath:"portals_locales_index"})},{name:"Settings",label:i("SIDEBAR.HELP_CENTER.SETTINGS"),activeOn:["portals_settings_index"],to:a("portals_index",{navigationPath:"portals_settings_index"})}]},{name:"Settings",label:i("SIDEBAR.SETTINGS"),icon:"i-lucide-bolt",children:[{name:"Settings Account Settings",label:i("SIDEBAR.ACCOUNT_SETTINGS"),icon:"i-lucide-briefcase",to:a("general_settings_index")},{name:"Settings Agents",label:i("SIDEBAR.AGENTS"),icon:"i-lucide-square-user",to:a("agent_list")},{name:"Settings Teams",label:i("SIDEBAR.TEAMS"),icon:"i-lucide-users",to:a("settings_teams_list")},{name:"Settings Inboxes",label:i("SIDEBAR.INBOXES"),icon:"i-lucide-inbox",to:a("settings_inbox_list")},{name:"Settings Labels",label:i("SIDEBAR.LABELS"),icon:"i-lucide-tags",to:a("labels_list")},{name:"Settings Custom Attributes",label:i("SIDEBAR.CUSTOM_ATTRIBUTES"),icon:"i-lucide-code",to:a("attributes_list")},{name:"Settings Automation",label:i("SIDEBAR.AUTOMATION"),icon:"i-lucide-workflow",to:a("automation_list")},{name:"Settings Agent Bots",label:i("SIDEBAR.AGENT_BOTS"),icon:"i-lucide-bot",to:a("agent_bots")},{name:"Settings Macros",label:i("SIDEBAR.MACROS"),icon:"i-lucide-toy-brick",to:a("macros_wrapper")},{name:"Settings Canned Responses",label:i("SIDEBAR.CANNED_RESPONSES"),icon:"i-lucide-message-square-quote",to:a("canned_list")},{name:"Settings Integrations",label:i("SIDEBAR.INTEGRATIONS"),icon:"i-lucide-blocks",to:a("settings_applications")},{name:"Settings Audit Logs",label:i("SIDEBAR.AUDIT_LOGS"),icon:"i-lucide-briefcase",to:a("auditlogs_list")},{name:"Settings Custom Roles",label:i("SIDEBAR.CUSTOM_ROLES"),icon:"i-lucide-shield-plus",to:a("custom_roles_list")},{name:"Settings Sla",label:i("SIDEBAR.SLA"),icon:"i-lucide-clock-alert",to:a("sla_list")},{name:"Settings Billing",label:i("SIDEBAR.BILLING"),icon:"i-lucide-credit-card",to:a("billing_settings_index")}]}],U=b.value.map(M=>({name:`app_${M.id}`,label:M.title,icon:"i-lucide-link",to:a("dashboard_apps_show",{id:M.id}),toStateName:"dashboard_apps_show",activeOn:["dashboard_apps_show"]}));return[...k,...U]});return(k,U)=>{const G=z("RouterLink");return pe((p(),f("aside",{class:re(["bg-n-solid-2 rtl:border-l ltr:border-r border-n-weak flex flex-col text-sm pb-1 fixed top-0 ltr:left-0 rtl:right-0 h-full z-40 transition-transform duration-200 ease-in-out md:static w-[200px] basis-[200px] md:flex-shrink-0 md:ltr:translate-x-0 md:rtl:-translate-x-0",[{"shadow-lg md:shadow-none":e.isMobileSidebarOpen,"ltr:-translate-x-full rtl:translate-x-full":!e.isMobileSidebarOpen}]])},[c("section",bnt,[c("div",Ent,[c("div",Tnt,[v(vnt,{class:"size-4"})]),U[2]||(U[2]=c("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),v(gnt,{class:"flex-grow min-w-0 -mx-1",onShowCreateAccountModal:U[0]||(U[0]=L=>s("showCreateAccountModal"))})]),c("div",Ant,[v(G,{to:{name:"search"},class:"flex items-center w-full gap-2 px-2 py-1 rounded-lg h-7 outline outline-1 outline-n-weak bg-n-solid-3 dark:bg-n-black/30"},{default:K(()=>[U[3]||(U[3]=c("span",{class:"flex-shrink-0 i-lucide-search size-4 text-n-slate-11"},null,-1)),c("span",ynt,E(I(i)("COMBOBOX.SEARCH_PLACEHOLDER")),1),c("span",Snt,E(I(l)),1)]),_:1}),v(Kp,{"align-position":"right"},{trigger:K(({toggle:L})=>[v(ce,{icon:"i-lucide-pen-line",color:"slate",size:"sm",class:"!h-7 !bg-n-solid-3 dark:!bg-n-black/30 !outline-n-weak !text-n-slate-11",onClick:L},null,8,["onClick"])]),_:1})])]),c("nav",Int,[c("ul",Cnt,[(p(!0),f(fe,null,Ae(B.value,L=>(p(),V(Wtt,Bs({key:L.name,ref_for:!0},L),null,16))),128))])]),c("section",xnt,[v(ont,{onOpenKeyShortcutModal:U[1]||(U[1]=L=>s("openKeyShortcutModal"))})])],2)),[[I(ca),[w,{ignore:["#mobile-sidebar-launcher"]}]]])}}},hs={ALT:"Alt / ",WIN:"Win / ",SHIFT:"Shift",SLASH:"/",UP:"Up",DOWN:"Down"},Ont=[{id:1,label:"OPEN_CONVERSATION",displayKeys:[hs.ALT,"J",hs.SLASH,hs.ALT,"K"],keySet:["Alt+KeyJ","Alt+KeyK"]},{id:2,label:"RESOLVE_AND_NEXT",displayKeys:[hs.WIN,hs.ALT,"E"],keySet:["$mod+Alt+KeyE"]},{id:3,label:"NAVIGATE_DROPDOWN",displayKeys:[hs.UP,hs.DOWN],keySet:["ArrowUp","ArrowDown"]},{id:4,label:"RESOLVE_CONVERSATION",displayKeys:[hs.ALT,"E"],keySet:["Alt+KeyE"]},{id:5,label:"GO_TO_CONVERSATION_DASHBOARD",displayKeys:[hs.ALT,"C"],keySet:["Alt+KeyC"]},{id:6,label:"ADD_ATTACHMENT",displayKeys:[hs.WIN,hs.ALT,"A"],keySet:["$mod+Alt+KeyA"]},{id:7,label:"GO_TO_CONTACTS_DASHBOARD",displayKeys:[hs.ALT,"V"],keySet:["Alt+KeyV"]},{id:8,label:"TOGGLE_SIDEBAR",displayKeys:[hs.ALT,"O"],keySet:["Alt+KeyO"]},{id:9,label:"GO_TO_REPORTS_SIDEBAR",displayKeys:[hs.ALT,"R"],keySet:["Alt+KeyR"]},{id:10,label:"MOVE_TO_NEXT_TAB",displayKeys:[hs.ALT,"N"],keySet:["Alt+KeyN"]},{id:11,label:"GO_TO_SETTINGS",displayKeys:[hs.ALT,"S"],keySet:["Alt+KeyS"]},{id:12,label:"SWITCH_TO_PRIVATE_NOTE",displayKeys:[hs.ALT,"P"],keySet:["Alt+KeyP"]},{id:13,label:"SWITCH_TO_REPLY",displayKeys:[hs.ALT,"L"],keySet:["Alt+KeyL"]},{id:14,label:"TOGGLE_SNOOZE_DROPDOWN",displayKeys:[hs.ALT,"M"],keySet:["Alt+KeyM"]}],wnt={class:"flex flex-col h-auto overflow-auto"},Rnt={class:"grid grid-cols-2 px-8 pt-0 pb-4 mt-6 gap-x-5 gap-y-3"},$nt={class:"flex justify-between items-center min-w-[25rem]"},Mnt={class:"text-sm text-n-slate-12"},knt={class:"flex items-center gap-2 mb-1 ml-2"},Lnt={class:"grid grid-cols-2 px-8 pt-0 pb-8 gap-x-5 gap-y-3"},Dnt={class:"text-sm text-n-slate-12 min-w-[36px]"},Pnt={class:"flex items-center gap-2 mb-1 ml-2"},Bnt={key:1,class:"flex items-center text-sm font-semibold text-n-slate-12"},Fnt={__name:"WootKeyShortcutModal",props:{show:Boolean},emits:["close"],setup(e){const{t}=Pe(),n=F(null),s=C(()=>o=>t(`KEYBOARD_SHORTCUTS.TITLE.${o.label}`)),a=C(()=>o=>n.value===Fx&&o.some(l=>Ux.has(l)));return pt(async()=>{n.value=await Gx()}),(o,l)=>{const i=z("woot-modal-header"),r=z("woot-modal");return p(),V(r,{show:e.show,size:"medium","on-close":()=>o.$emit("close")},{default:K(()=>[c("div",wnt,[v(i,{"header-title":o.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")},null,8,["header-title"]),c("div",Rnt,[c("div",$nt,[c("h5",Mnt,E(o.$t("KEYBOARD_SHORTCUTS.TOGGLE_MODAL")),1),c("div",knt,[v(or,{"custom-class":"min-h-[28px] min-w-[60px] normal-case key"},{default:K(()=>[Ee(E(I(hs).WIN),1)]),_:1}),v(or,{"custom-class":"min-h-[28px] min-w-[36px] key"},{default:K(()=>[Ee(E(I(hs).SLASH),1)]),_:1})])])]),c("div",Lnt,[(p(!0),f(fe,null,Ae(I(Ont),d=>(p(),f("div",{key:d.id,class:"flex justify-between items-center min-w-[25rem]"},[c("h5",Dnt,E(s.value(d)),1),c("div",Pnt,[a.value(d.keySet)?(p(),V(or,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key"},{default:K(()=>[Ee(E(I(hs).SHIFT),1)]),_:1})):O("",!0),(p(!0),f(fe,null,Ae(d.displayKeys,(u,m)=>(p(),f(fe,{key:m},[u!==I(hs).SLASH?(p(),V(or,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key normal-case"},{default:K(()=>[Ee(E(u),1)]),_:2},1024)):(p(),f("span",Bnt,E(u),1))],64))),128))])]))),128))])])]),_:1},8,["show","on-close"])}}},Unt=Fe(Fnt,[["__scopeId","data-v-5272c311"]]),Gnt={key:0,class:"mx-auto h-full pt-[clamp(3rem,15vh,12rem)]"},Vnt={class:"flex flex-col gap-4 max-w-md px-8 py-6 shadow-lg bg-n-solid-1 rounded-xl outline outline-1 outline-n-container"},Hnt={class:"flex flex-col gap-4"},Wnt={class:"flex items-center w-full gap-2"},Knt={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},znt={class:"text-base font-medium text-n-slate-12"},jnt={class:"text-sm font-normal text-n-slate-11 mb-3"},Ynt={key:0},Xnt={key:1},qnt={__name:"UpgradePage",props:{bypassUpgradePage:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,s=En(),a=yt(),{t:o}=Pe(),{accountId:l,currentAccount:i}=_s(),{isEnterprise:r}=Js(),{isAdmin:d}=io(),u=ke("globalConfig/isOnChatwootCloud"),m=({allowed:A,consumed:y})=>y>A,h=C(()=>{const A=i.value;if(!A)return!1;const y=new Date(A.created_at);return lT(new Date,y)<=15}),_=C(()=>{const A=i.value;if(!(A!=null&&A.limits))return"";const{conversation:y,non_web_inboxes:x,agents:$}=A.limits;let N="";return m(y)?N=o("GENERAL_SETTINGS.LIMIT_MESSAGES.CONVERSATION"):m(x)?N=o("GENERAL_SETTINGS.LIMIT_MESSAGES.INBOXES"):m($)&&(N=o("GENERAL_SETTINGS.LIMIT_MESSAGES.AGENTS",{allowedAgents:$.allowed})),N}),g=C(()=>{const A=i.value;if(!(A!=null&&A.limits))return!1;const{conversation:y,non_web_inboxes:x,agents:$}=A.limits;return m(y)||m(x)||m($)}),T=C(()=>n.bypassUpgradePage||!u.value||h.value?!1:g.value),S=()=>{a.dispatch("accounts/limits")},b=()=>{s.push({name:"billing_settings_index",params:{accountId:l.value}})};return pt(()=>{r&&S()}),t({shouldShowUpgradePage:T}),(A,y)=>T.value?(p(),f("div",Gnt,[c("div",Vnt,[c("div",Hnt,[c("div",Wnt,[c("span",Knt,[v(Wt,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),c("span",znt,E(A.$t("GENERAL_SETTINGS.UPGRADE")),1)]),c("div",null,[c("p",jnt,E(_.value),1),I(d)?O("",!0):(p(),f("p",Ynt,E(I(o)("GENERAL_SETTINGS.LIMIT_MESSAGES.NON_ADMIN")),1))])]),I(d)?(p(),V(ce,{key:0,label:A.$t("GENERAL_SETTINGS.OPEN_BILLING"),icon:"i-lucide-credit-card",onClick:y[0]||(y[0]=x=>b())},null,8,["label"])):O("",!0)]),at(A.$slots,"default")])):(p(),f("div",Xnt))}},Znt={key:0,class:"fixed bottom-4 ltr:right-4 rtl:left-4 z-50"},Qnt={class:"rounded-full bg-n-alpha-2 p-1"},Jnt={__name:"CopilotLauncher",setup(e){const t=cn(),{uiSettings:n,updateUISettings:s}=Sn(),a=C(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(t.name)),o=ke("getCurrentAccountId"),l=ke("accounts/isFeatureEnabledonAccount"),i=C(()=>l.value(o.value,Mt.CAPTAIN)&&!n.value.is_copilot_panel_open&&!a.value),r=()=>{s({is_copilot_panel_open:!n.value.is_copilot_panel_open,is_contact_sidebar_open:!1})};return(d,u)=>i.value?(p(),f("div",Znt,[c("div",Qnt,[v(ce,{icon:"i-woot-captain",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl",lg:"",onClick:r})])])):(p(),f(fe,{key:1},[],64))}},est=["placeholder"],tst={__name:"CopilotInput",emits:["send"],setup(e,{emit:t}){const n=t,s=F(""),a=()=>{s.value.trim()&&(n("send",s.value),s.value="")};return(o,l)=>(p(),f("form",{class:"relative",onSubmit:ze(a,["prevent"])},[pe(c("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>s.value=i),type:"text",placeholder:o.$t("CAPTAIN.COPILOT.SEND_MESSAGE"),class:"w-full reset-base bg-n-alpha-3 ltr:pl-4 ltr:pr-12 rtl:pl-12 rtl:pr-4 py-3 text-n-slate-11 text-sm border border-n-weak rounded-lg focus:outline-none focus:ring-1 focus:ring-n-blue-11 focus:border-n-blue-11",onKeyup:Hn(a,["enter"])},null,40,est),[[mt,s.value]]),l[1]||(l[1]=c("button",{class:"absolute ltr:right-1 rtl:left-1 top-1/2 -translate-y-1/2 h-9 w-10 flex items-center justify-center text-n-slate-11 hover:text-n-blue-11",type:"submit"},[c("i",{class:"i-ph-arrow-up"})],-1))],32))}},nst={},sst={class:"flex justify-start"},ast={class:"flex items-center space-x-2"},ost={class:"text-n-iris-11 font-medium"};function lst(e,t,n,s,a,o){return p(),f("div",sst,[c("div",ast,[c("span",ost,E(e.$t("CAPTAIN.COPILOT.LOADER")),1),t[0]||(t[0]=c("div",{class:"flex space-x-1"},[c("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.3s]"}),c("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.15s]"}),c("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce"})],-1))])])}const ist=Fe(nst,[["render",lst]]),rst={class:"space-y-1 text-n-slate-12"},cst={class:"font-medium"},dst={class:"break-words"},ust={__name:"CopilotAgentMessage",props:{message:{type:Object,required:!0}},setup(e){return(t,n)=>(p(),f("div",rst,[c("div",cst,E(t.$t("CAPTAIN.COPILOT.YOU")),1),c("div",dst,E(e.message.content),1)]))}},pst={class:"flex flex-col gap-1 text-n-slate-12"},mst={class:"font-medium"},hst={key:0,class:"text-n-ruby-11"},fst={key:1,class:"prose-sm break-words"},gst={class:"flex flex-row mt-1"},_st={__name:"CopilotAssistantMessage",props:{isLastMessage:{type:Boolean,default:!1},message:{type:Object,required:!0},conversationInboxType:{type:String,required:!0}},setup(e){const t=e,n=C(()=>{var i;return!((i=t.message)!=null&&i.content)}),s=C(()=>!n.value&&t.message.reply_suggestion&&t.isLastMessage),a=C(()=>new tp(t.message.content).formattedMessage),o=C(()=>[Ut.WEB,Ut.EMAIL].includes(t.conversationInboxType)),l=()=>{var i,r;o.value?It.emit(xn.INSERT_INTO_RICH_EDITOR,(i=t.message)==null?void 0:i.content):It.emit(xn.INSERT_INTO_NORMAL_EDITOR,(r=t.message)==null?void 0:r.content),nn(rT.USE_CAPTAIN_RESPONSE)};return(i,r)=>{const d=_t("dompurify-html");return p(),f("div",pst,[c("div",mst,E(i.$t("CAPTAIN.NAME")),1),n.value?(p(),f("span",hst,E(i.$t("CAPTAIN.COPILOT.EMPTY_MESSAGE")),1)):pe((p(),f("div",fst,null,512)),[[d,a.value]]),c("div",gst,[s.value?(p(),V(ce,{key:0,label:i.$t("CAPTAIN.COPILOT.USE"),faded:"",sm:"",slate:"",onClick:l},null,8,["label"])):O("",!0)])])}}},vst={class:"flex flex-col gap-2 p-3 rounded-lg bg-n-background/50 border border-n-weak hover:bg-n-background/80 transition-colors duration-200"},bst={class:"flex items-start gap-2"},Est={class:"text-sm text-n-slate-12"},Tst={__name:"CopilotThinkingBlock",props:{content:{type:String,required:!0}},setup(e){return(t,n)=>(p(),f("div",vst,[c("div",bst,[v(Wt,{icon:"i-lucide-sparkles",class:"w-4 h-4 mt-0.5 flex-shrink-0 text-n-slate-9"}),c("div",Est,E(e.content),1)])]))}},Ast={class:"flex flex-col gap-2"},yst={class:"flex items-center gap-2"},Sst={class:"inline-flex items-center justify-center h-4 min-w-4 px-1 text-xs font-medium rounded-full bg-n-solid-3 text-n-slate-11"},Ist={__name:"CopilotThinkingGroup",props:{messages:{type:Array,required:!0},defaultCollapsed:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Pe(),s=F(!t.defaultCollapsed),a=C(()=>t.messages.length);return ot(()=>t.defaultCollapsed,o=>{o&&(s.value=!1)}),(o,l)=>(p(),f("div",Ast,[c("button",{class:"group flex items-center gap-2 text-xs text-n-slate-10 hover:text-n-slate-11 transition-colors duration-200 -ml-3",onClick:l[0]||(l[0]=i=>s.value=!s.value)},[v(Wt,{icon:s.value?"i-lucide-chevron-down":"i-lucide-chevron-right",class:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"},null,8,["icon"]),c("span",yst,[Ee(E(I(n)("CAPTAIN.COPILOT.SHOW_STEPS"))+" ",1),c("span",Sst,E(a.value),1)])]),pe(c("div",{class:re(["space-y-3 transition-all duration-200",{"opacity-100":s.value,"opacity-0 max-h-0 overflow-hidden":!s.value}])},[(p(!0),f(fe,null,Ae(e.messages,i=>(p(),V(Tst,{key:i.id,content:i.message.content,reasoning:i.message.reasoning},null,8,["content","reasoning"]))),128))],2),[[pn,s.value]])]))}},Cst={class:"flex gap-1 justify-between w-full"},xst={class:"items-start flex gap-1 flex-col"},Nst={class:"text-n-slate-12 text-sm"},Ost={class:"line-clamp-2 text-n-slate-11 text-xs"},wst={key:0,class:"flex items-center justify-center flex-shrink-0 w-4 h-4 rounded-full bg-n-slate-12 dark:bg-n-slate-11"},Rst={__name:"ToggleCopilotAssistant",props:{assistants:{type:Array,required:!0},activeAssistant:{type:Object,required:!0}},emits:["setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=C(()=>n.activeAssistant?n.activeAssistant.name:a("CAPTAIN.COPILOT.SELECT_ASSISTANT"));return(l,i)=>(p(),f("div",null,[v(Di,null,{trigger:K(({toggle:r,isOpen:d})=>[v(ce,{label:o.value,icon:"i-woot-captain",ghost:"",slate:"",xs:"",class:re({"bg-n-alpha-2":d}),onClick:r},null,8,["label","class","onClick"])]),default:K(()=>[v(Pi,{class:"bottom-9 min-w-64 z-50",strong:""},{default:K(()=>[v($r,{class:"max-h-80 overflow-scroll"},{default:K(()=>[(p(!0),f(fe,null,Ae(e.assistants,r=>(p(),V(eo,{key:r.id,class:"!items-start !gap-1 flex-col cursor-pointer",onClick:()=>s("setAssistant",r)},{label:K(()=>{var d;return[c("div",Cst,[c("div",xst,[c("span",Nst,E(r.name),1),c("span",Ost,E(r.description),1)]),r.id===((d=e.activeAssistant)==null?void 0:d.id)?(p(),f("div",wst,i[0]||(i[0]=[c("i",{class:"i-lucide-check text-white dark:text-n-slate-1 size-3"},null,-1)]))):O("",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}},$st={class:"flex-1 flex flex-col gap-6 px-2"},Mst={class:"flex flex-col space-y-4 py-4"},kst={class:"space-y-1"},Lst={class:"text-base font-medium text-n-slate-12 leading-8"},Dst={class:"text-sm text-n-slate-11 leading-6"},Pst={key:0,class:"w-full space-y-2"},Bst={class:"text-sm text-n-slate-11 leading-6"},Fst={key:1,class:"w-full space-y-2"},Ust={class:"text-xs text-n-slate-10 block"},Gst={class:"space-y-1"},Vst=["onClick"],Hst={__name:"CopilotEmptyState",props:{hasAssistants:{type:Boolean,default:!1}},emits:["useSuggestion"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=cn(),o={conversations:[{label:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.RATE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.RATE.CONTENT"}],dashboard:[{label:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.CONTENT"}]},l=()=>{const d=a.path;return d.includes("/conversations")?"conversations":(d.includes("/dashboard"),"dashboard")},i=C(()=>{const d=l();return o[d]||o.conversations}),r=d=>{n("useSuggestion",s(d.prompt))};return(d,u)=>{const m=z("router-link");return p(),f("div",$st,[c("div",Mst,[v(Wt,{icon:"i-woot-captain",class:"text-n-slate-9 text-4xl"}),c("div",kst,[c("h3",Lst,E(d.$t("CAPTAIN.COPILOT.PANEL_TITLE")),1),c("p",Dst,E(d.$t("CAPTAIN.COPILOT.KICK_OFF_MESSAGE")),1)])]),e.hasAssistants?(p(),f("div",Fst,[c("span",Ust,E(d.$t("CAPTAIN.COPILOT.TRY_THESE_PROMPTS")),1),c("div",Gst,[(p(!0),f(fe,null,Ae(i.value,h=>(p(),f("button",{key:h.label,class:"w-full px-3 py-2 rounded-md border border-n-weak bg-n-slate-2 text-n-slate-11 flex items-center justify-between hover:bg-n-slate-3 transition-colors",onClick:_=>r(h)},[c("span",null,E(I(s)(h.label)),1),v(Wt,{icon:"i-lucide-chevron-right"})],8,Vst))),128))])])):(p(),f("div",Pst,[c("p",Bst,E(d.$t("CAPTAIN.ASSISTANTS.NO_ASSISTANTS_AVAILABLE")),1),v(m,{to:{name:"captain_assistants_index",params:{accountId:I(a).params.accountId}},class:"text-n-slate-11 underline hover:text-n-slate-12"},{default:K(()=>[Ee(E(d.$t("CAPTAIN.ASSISTANTS.ADD_NEW")),1)]),_:1},8,["to"])]))])}}},Wst={class:"flex flex-col h-full text-sm leading-6 tracking-tight w-full"},Kst={key:0,class:"space-y-6 flex-1 flex flex-col w-full"},zst={class:"mx-3 mt-px mb-2"},jst={class:"flex items-center gap-2 justify-between w-full mb-1"},Yst={key:1},Xst={__name:"Copilot",props:{messages:{type:Array,default:()=>[]},conversationInboxType:{type:String,required:!0},assistants:{type:Array,default:()=>[]},activeAssistant:{type:Object,default:()=>({})}},emits:["sendMessage","reset","setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=S=>{s("sendMessage",S),nn(rT.SEND_MESSAGE)},l=F(null),i=async()=>{await jt(),l.value&&(l.value.scrollTop=l.value.scrollHeight)},r=C(()=>{const S=[];let b=[];return n.messages.forEach(A=>{A.message_type==="assistant_thinking"?b.push(A):(b.length>0&&(S.push({id:b[0].id,message_type:"thinking_group",messages:b}),b=[]),S.push(A))}),b.length>0&&S.push({id:b[0].id,message_type:"thinking_group",messages:b}),S}),d=C(()=>r.value[r.value.length-1].message_type==="assistant"),{updateUISettings:u}=Sn(),m=()=>{u({is_copilot_panel_open:!1,is_contact_sidebar_open:!1})},h=S=>{S==="reset"&&s("reset")},_=C(()=>n.assistants.length>0),g=C(()=>n.messages.length>0),T=C(()=>g.value?[{key:"reset",icon:"i-lucide-refresh-ccw",tooltip:a("CAPTAIN.COPILOT.RESET")}]:[]);return ot([()=>n.messages],()=>{i()},{deep:!0}),(S,b)=>(p(),f("div",Wst,[v(QI,{title:S.$t("CAPTAIN.COPILOT.TITLE"),buttons:T.value,onClick:h,onClose:m},null,8,["title","buttons"]),c("div",{ref_key:"chatContainer",ref:l,class:"flex-1 flex px-4 py-4 overflow-y-auto items-start"},[g.value?(p(),f("div",Kst,[(p(!0),f(fe,null,Ae(r.value,(A,y)=>(p(),f(fe,{key:A.id},[A.message_type==="user"?(p(),V(ust,{key:0,message:A.message},null,8,["message"])):A.message_type==="assistant"?(p(),V(_st,{key:1,message:A.message,"is-last-message":y===r.value.length-1,"conversation-inbox-type":e.conversationInboxType},null,8,["message","is-last-message","conversation-inbox-type"])):(p(),V(Ist,{key:2,messages:A.messages,"default-collapsed":d.value},null,8,["messages","default-collapsed"]))],64))),128)),d.value?O("",!0):(p(),V(ist,{key:0}))])):(p(),V(Hst,{key:1,"has-assistants":_.value,onUseSuggestion:o},null,8,["has-assistants"]))],512),c("div",zst,[c("div",jst,[e.assistants.length>1?(p(),V(Rst,{key:0,assistants:e.assistants,"active-assistant":e.activeAssistant,onSetAssistant:b[0]||(b[0]=A=>s("setAssistant",A))},null,8,["assistants","active-assistant"])):(p(),f("div",Yst))]),_.value?(p(),V(tst,{key:0,class:"mb-1 w-full",onSend:o})):O("",!0)])]))}},qst={__name:"CopilotContainer",props:{conversationInboxType:{type:String,default:""}},setup(e){const t=yt(),{uiSettings:n,updateUISettings:s}=Sn(),{isEnterprise:a}=Js(),{width:o}=Mi(),l=ke("getCurrentUser"),i=ke("captainAssistants/getRecords"),r=ke("captainAssistants/getUIFlags"),d=ke("getCopilotAssistant"),u=ke("getSelectedChat"),m=C(()=>o.value<Pt.SMALL_SCREEN_BREAKPOINT),h=F(null),_=C(()=>t.getters["copilotMessages/getMessagesByThreadId"](h.value)),g=ke("getCurrentAccountId"),T=ke("accounts/isFeatureEnabledonAccount"),S=F(null),b=C(()=>{const w=n.value.preferred_captain_assistant_id;if(w){const D=i.value.find(H=>H.id===w);if(D)return D}if(d.value){const D=i.value.find(H=>H.id===d.value.id);if(D)return D}return i.value[0]}),A=()=>{var w;m.value&&((w=n.value)!=null&&w.is_copilot_panel_open)&&s({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})},y=async w=>{S.value=w.id,await s({preferred_captain_assistant_id:w.id})},x=C(()=>{if(!a)return!1;const w=T.value(g.value,Mt.CAPTAIN),{is_copilot_panel_open:D}=n.value;return w&&D&&!r.value.fetchingList}),$=()=>{h.value=null},N=async w=>{var D,H;if(h.value)await t.dispatch("copilotMessages/create",{assistant_id:b.value.id,conversation_id:(D=u.value)==null?void 0:D.id,threadId:h.value,message:w});else{const B=await t.dispatch("copilotThreads/create",{assistant_id:b.value.id,conversation_id:(H=u.value)==null?void 0:H.id,message:w});h.value=B.id}};return pt(()=>{a&&t.dispatch("captainAssistants/get")}),(w,D)=>x.value?pe((p(),f("div",{key:0,class:re(["bg-n-background h-full overflow-hidden flex-col fixed top-0 ltr:right-0 rtl:left-0 z-40 w-full max-w-sm transition-transform duration-300 ease-in-out md:static md:w-[320px] md:min-w-[320px] ltr:border-l rtl:border-r border-n-weak 2xl:min-w-[360px] 2xl:w-[360px] shadow-lg md:shadow-none",[{"md:flex":x.value,"md:hidden":!x.value}]])},[v(Xst,{messages:_.value,"support-agent":I(l),"conversation-inbox-type":e.conversationInboxType,assistants:I(i),"active-assistant":b.value,onSetAssistant:y,onSendMessage:N,onReset:$},null,8,["messages","support-agent","conversation-inbox-type","assistants","active-assistant"])],2)),[[I(ca),()=>A()]]):(p(),f(fe,{key:1},[],64))}},Zst={class:"rounded-full bg-n-alpha-2 p-1"},Qst={__name:"MobileSidebarLauncher",props:{isMobileSidebarOpen:{type:Boolean,default:!1}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=cn(),a=C(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(s.name)),o=()=>{n("toggle")};return(l,i)=>a.value?(p(),f(fe,{key:1},[],64)):(p(),f("div",{key:0,id:"mobile-sidebar-launcher",class:re(["fixed bottom-4 ltr:left-4 rtl:right-4 z-40 transition-transform duration-200 ease-in-out block md:hidden",[{"ltr:translate-x-48 rtl:-translate-x-48":e.isMobileSidebarOpen}]])},[c("div",Zst,[v(ce,{icon:"i-lucide-menu",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl",lg:"",onClick:o})])],2))}},Jst=ng(()=>Va(()=>import("./commandbar-CXUc3Rz0.js"),__vite__mapDeps([39,2,21,17,18,8,5,6,22,11,12,23,14,10,24,7,4,9,27,28,20,13,1,29,30,40]))),eat={components:{NextSidebar:Nnt,CommandBar:Jst,WootKeyShortcutModal:Unt,AddAccountModal:OA,UpgradePage:qnt,CopilotLauncher:Jnt,CopilotContainer:qst,MobileSidebarLauncher:Qst},setup(){const e=F(null),{uiSettings:t,updateUISettings:n}=Sn(),{accountId:s}=_s(),{width:a}=Mi();return{uiSettings:t,updateUISettings:n,accountId:s,upgradePageRef:e,windowWidth:a}},data(){return{showAccountModal:!1,showCreateAccountModal:!1,showShortcutModal:!1,isMobileSidebarOpen:!1}},computed:{isSmallScreen(){return this.windowWidth<Pt.SMALL_SCREEN_BREAKPOINT},showUpgradePage(){var e;return(e=this.upgradePageRef)==null?void 0:e.shouldShowUpgradePage},bypassUpgradePage(){return["billing_settings_index","settings_inbox_list","general_settings_index","agent_list"].includes(this.$route.name)},previouslyUsedDisplayType(){const{previously_used_conversation_display_type:e}=this.uiSettings;return e}},watch:{isSmallScreen:{handler(){const{LAYOUT_TYPES:e}=Pt;window.innerWidth<=Pt.SMALL_SCREEN_BREAKPOINT?this.updateUISettings({conversation_display_type:e.EXPANDED}):this.updateUISettings({conversation_display_type:this.previouslyUsedDisplayType})},immediate:!0}},methods:{toggleMobileSidebar(){this.isMobileSidebarOpen=!this.isMobileSidebarOpen},closeMobileSidebar(){this.isMobileSidebarOpen=!1},openCreateAccountModal(){this.showAccountModal=!1,this.showCreateAccountModal=!0},closeCreateAccountModal(){this.showCreateAccountModal=!1},toggleAccountModal(){this.showAccountModal=!this.showAccountModal},toggleKeyShortcutModal(){this.showShortcutModal=!0},closeKeyShortcutModal(){this.showShortcutModal=!1}}},tat={class:"flex flex-grow overflow-hidden text-n-slate-12"},nat={class:"flex flex-1 h-full w-full min-h-0 px-0 overflow-hidden"};function sat(e,t,n,s,a,o){const l=z("NextSidebar"),i=z("MobileSidebarLauncher"),r=z("UpgradePage"),d=z("router-view"),u=z("CommandBar"),m=z("CopilotLauncher"),h=z("CopilotContainer"),_=z("AddAccountModal"),g=z("WootKeyShortcutModal");return p(),f("div",tat,[v(l,{"is-mobile-sidebar-open":a.isMobileSidebarOpen,onToggleAccountModal:o.toggleAccountModal,onOpenKeyShortcutModal:o.toggleKeyShortcutModal,onCloseKeyShortcutModal:o.closeKeyShortcutModal,onShowCreateAccountModal:o.openCreateAccountModal,onCloseMobileSidebar:o.closeMobileSidebar},null,8,["is-mobile-sidebar-open","onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowCreateAccountModal","onCloseMobileSidebar"]),c("main",nat,[pe(v(r,{ref:"upgradePageRef","bypass-upgrade-page":o.bypassUpgradePage},{default:K(()=>[v(i,{"is-mobile-sidebar-open":a.isMobileSidebarOpen,onToggle:o.toggleMobileSidebar},null,8,["is-mobile-sidebar-open","onToggle"])]),_:1},8,["bypass-upgrade-page"]),[[pn,o.showUpgradePage]]),o.showUpgradePage?O("",!0):(p(),f(fe,{key:0},[v(d),v(u),v(m),v(i,{"is-mobile-sidebar-open":a.isMobileSidebarOpen,onToggle:o.toggleMobileSidebar},null,8,["is-mobile-sidebar-open","onToggle"]),v(h)],64)),v(_,{show:a.showCreateAccountModal,onCloseAccountCreateModal:o.closeCreateAccountModal},null,8,["show","onCloseAccountCreateModal"]),v(g,{show:a.showShortcutModal,"onUpdate:show":t[0]||(t[0]=T=>a.showShortcutModal=T),onClose:o.closeKeyShortcutModal,onClickaway:o.closeKeyShortcutModal},null,8,["show","onClose","onClickaway"])])])}const aat=Fe(eat,[["render",sat]]),oat={class:"items-center bg-n-slate-2 flex justify-center h-full w-full"},lat={__name:"Index",setup(e){const t=()=>{window.$chatwoot&&window.$chatwoot.toggleBubbleVisibility("show")},n=()=>{window.addEventListener("chatwoot:on-message",()=>{t()})};return pt(()=>{t(),n()}),(s,a)=>(p(),f("div",oat,[v(Lr,{title:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.TITLE"),message:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.MESSAGE")},null,8,["title","message"])]))}},iat={__name:"CustomContextMenu",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},show:{type:Boolean,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,s=F(null),a=l=>{s.value&&!s.value.contains(l.target)&&n("close")},o=l=>{l.key==="Escape"&&n("close")};return pt(()=>{document.addEventListener("mousedown",a),document.addEventListener("keydown",o)}),zs(()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",o)}),(l,i)=>(p(),V(yr,{to:"body"},[e.show?(p(),f("div",{key:0,ref_key:"menuRef",ref:s,class:"fixed z-[9999]",style:Ct({top:`${e.y}px`,left:`${e.x}px`})},[at(l.$slots,"default",{},void 0,!0)],4)):O("",!0)]))}},rat=Fe(iat,[["__scopeId","data-v-1df9184c"]]),cat={key:0,class:"agent-tooltip-title"},dat={key:0,class:"agent-tooltip-subtitle"},uat={__name:"AgentTooltip",props:{text:{type:String,default:""},title:{type:String,default:""},subtitle:{type:String,default:""},animation:{type:String,default:"fade"},zIndex:{type:[String,Number],default:2147483647},width:{type:[String,Number],default:"max-content"},placement:{type:String,default:"top"},align:{type:String,default:""}},setup(e){const t=e,n=F(!1),s=F(!1),a=F(null),o=F(null),l=F(null),i=F(null),r=F({left:0,right:"",width:"",transform:""});let d=!1,u=null;const m=()=>{if(o.value){const g=o.value.getBoundingClientRect();a.value={left:g.left+g.width/2,top:t.placement==="top"?g.top:g.bottom,triggerRect:g},jt(()=>{h()})}};function h(){!l.value||!a.value||requestAnimationFrame(()=>{const g=l.value,T=o.value;if(!g||!T)return;const S=T.getBoundingClientRect(),b=g.getBoundingClientRect();let A=S.left+S.width/2;const y=8;if(t.align==="left"){A=S.left,g.style.top=`${S.top+S.height/2-b.height/2}px`,g.style.left=`${A-b.width-8}px`,g.style.transform="none";return}t.variant==="with-description"&&(A-b.width/2<y&&(A=y+b.width/2),A+b.width/2>window.innerWidth-y&&(A=window.innerWidth-y-b.width/2)),g.style.top=`${S.top-b.height}px`,g.style.left=`${A}px`,g.style.transform=t.align==="left"?"translateX(-100%)":"translate(-50%, 0)"})}ot(n,g=>{g?d||(jt(()=>{m(),requestAnimationFrame(()=>{h()}),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m,!0)}),s.value=!1,u&&clearTimeout(u),t.subtitle&&(u=setTimeout(()=>{s.value=!0},500))):(window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m,!0),r.value={left:0,right:"",width:"",transform:""},s.value=!1,u&&clearTimeout(u)),d=g}),zs(()=>{window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m,!0),u&&clearTimeout(u)});const _=C(()=>{if(!a.value)return{};const g={position:"absolute",zIndex:t.zIndex,minWidth:typeof t.width=="number"?`${t.width}px`:t.width,maxWidth:"min(320px, 90vw)",wordBreak:"break-word",whiteSpace:"normal"};return r.value.left!==""&&(g.left=typeof r.value.left=="number"?r.value.left+"px":r.value.left),r.value.right!==""&&(g.right=r.value.right),r.value.width&&(g.width=r.value.width),r.value.transform?g.transform=r.value.transform:g.transform=t.placement==="top"?"translate(-50%, -100%)":"translate(-50%, 0%)",g.top=`${a.value.top-(l.value?l.value.offsetHeight:0)}px`,g.left=`${a.value.left+(o.value?o.value.offsetWidth/2:0)}px`,g.transform="translate(-50%, 0)",g});return(g,T)=>(p(),f("div",{class:"agent-tooltip-wrapper",ref_key:"containerRef",ref:i},[c("div",{class:"relative",ref_key:"triggerRef",ref:o,onMouseenter:T[0]||(T[0]=S=>n.value=!0),onMouseleave:T[1]||(T[1]=S=>n.value=!1),onFocus:T[2]||(T[2]=S=>n.value=!0),onBlur:T[3]||(T[3]=S=>n.value=!1),tabindex:"0"},[at(g.$slots,"default",{},void 0,!0),(p(),V(yr,{to:"body"},[v(Ps,{name:e.animation},{default:K(()=>[n.value&&a.value?(p(),f("div",{key:0,class:re(["agent-tooltip-content",{"with-title":e.title,"with-subtitle":e.subtitle,[`placement-${e.placement}`]:!0}]),style:Ct(_.value),ref_key:"tooltipRef",ref:l},[e.title||e.subtitle?(p(),f(fe,{key:0},[e.title?(p(),f("div",cat,E(e.title),1)):O("",!0),v(Ps,{name:"fade-subtitle"},{default:K(()=>[s.value&&e.subtitle?(p(),f("div",dat,E(e.subtitle),1)):O("",!0)]),_:1})],64)):(p(),f(fe,{key:1},[Ee(E(e.text),1)],64))],6)):O("",!0)]),_:1},8,["name"])]))],544)],512))}},Bo=Fe(uat,[["__scopeId","data-v-0e525141"]]),pat=["width","height","viewBox"],mat=["cx","cy","r"],hat=["stroke"],fat="#CBD5E1",gat={__name:"PriorityCircle",props:{priority:{type:String,required:!0},size:{type:Number,default:20}},setup(e){const t=e,n=C(()=>t.size/2-2),s=C(()=>{switch(t.priority){case"high":return"#E11D48";case"medium":return"#F59E42";case"low":return"#22C55E";case"urgent":return"#DC2626";default:return"#64748B"}}),a=C(()=>{switch(t.priority){case"low":return 1;case"medium":return 2;case"high":return 3;case"urgent":return 4;default:return 0}});function o(l){const i=n.value,r=t.size/2,d=t.size/2,u=(l*90-90)*(Math.PI/180),m=((l+1)*90-90)*(Math.PI/180),h=r+i*Math.cos(u),_=d+i*Math.sin(u),g=r+i*Math.cos(m),T=d+i*Math.sin(m);return{d:`M${h},${_} A${i},${i} 0 0,1 ${g},${T}`}}return(l,i)=>(p(),f("svg",{width:e.size,height:e.size,viewBox:`0 0 ${e.size} ${e.size}`,class:"priority-circle"},[c("circle",{cx:e.size/2,cy:e.size/2,r:n.value,stroke:fat,"stroke-width":"2",fill:"none"},null,8,mat),(p(!0),f(fe,null,Ae(a.value,r=>(p(),f("path",Bs({key:r,ref_for:!0},o(r-1),{stroke:s.value,"stroke-width":"2.5",fill:"none","stroke-linecap":"round"}),null,16,hat))),128))],8,pat))}},T2=Fe(gat,[["__scopeId","data-v-e0d6a1f4"]]),_at=["draggable"],vat={class:"flex items-center justify-between mb-3"},bat={class:"flex items-center gap-2"},Eat={class:"flex items-center gap-2"},Tat={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Aat={class:"flex items-center gap-2"},yat={class:"flex items-center gap-2"},Sat={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-3 h-3"},Iat={class:"relative"},Cat={class:"flex items-center gap-2"},xat={class:"flex items-center gap-2"},Nat={class:"flex items-center gap-2"},Oat={class:"flex items-center gap-2"},wat={key:0,class:"text-xs text-slate-600 dark:text-slate-400 mb-3"},Rat={key:1,class:"flex flex-wrap gap-1 mb-3"},$at={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-normal bg-slate-100 dark:bg-slate-800 border border-slate-100 dark:border-slate-800 shadow-sm text-slate-700 dark:text-slate-200",style:{"box-shadow":"0 2px 8px 0 rgba(30, 41, 59, 0.04)","min-width":"max-content"}},Mat={key:2,class:"flex items-center justify-between mb-3"},kat={class:"flex items-center gap-2"},Lat={key:0,class:"text-xs font-medium text-slate-700 dark:text-slate-300"},Dat={key:0,class:"flex items-center gap-1"},Pat={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},Bat={class:"text-xs text-slate-400 font-mono select-all"},Fat={class:"flex items-center gap-1 flex-1 min-w-0"},Uat={class:"truncate font-semibold text-slate-700 dark:text-slate-200"},Gat={class:"truncate text-slate-500 dark:text-slate-300"},Vat={key:3,class:"flex items-center gap-2 mb-3"},Hat={class:"flex-1"},Wat={class:"h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},Kat={class:"text-xs text-slate-500"},zat={class:"flex items-center justify-between"},jat={key:0,class:"flex items-center gap-2"},Yat={class:"flex items-center gap-2"},Xat={key:1,class:"flex items-center gap-1"},qat={key:1,class:"flex items-center gap-2 text-xs text-slate-500"},Zat={key:0,class:"flex items-center gap-1"},Qat={key:1,class:"flex items-center gap-1"},Jat={key:2,class:"flex items-center gap-1"},eot={key:3,class:"flex items-center gap-1"},tot={class:"bg-white dark:bg-slate-900 rounded-md shadow-lg border border-slate-100 dark:border-slate-800 w-[170px] min-w-[140px] flex flex-col gap-1",style:{"box-shadow":"0 4px 24px 0 rgba(30, 41, 59, 0.08)"}},not={class:"flex items-center gap-2"},sot={class:"flex items-center gap-2"},aot={class:"settings-modal"},oot={class:"settings-header"},lot={class:"text-lg font-medium"},iot={class:"settings-content"},rot={class:"p-6"},cot={class:"text-sm text-slate-600 dark:text-slate-400 mb-6"},dot={class:"flex justify-end space-x-2"},uot={class:"p-4 bg-white dark:bg-slate-900 rounded-md border border-slate-100 dark:border-slate-800 shadow-lg"},pot={class:"space-y-4"},mot={class:"flex gap-2"},hot={key:0,class:"ml-2 text-woot-500 text-xs font-semibold"},fot={key:0,class:"ml-2 text-woot-500 text-xs font-semibold"},got={key:0,class:"ml-2 text-woot-500 text-xs font-semibold"},_ot={key:0,class:"space-y-2"},vot={class:"flex justify-end gap-2 mt-4"},bot={class:"settings-modal"},Eot={class:"settings-header"},Tot={class:"text-lg font-medium"},Aot={class:"settings-content"},yot={class:"text-sm text-slate-600 dark:text-slate-400 mb-4"},Sot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Iot={class:"space-y-4"},Cot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},xot={class:"ml-2 text-sm"},Not={class:"font-medium"},Oot={class:"inline-block ml-2 px-2.5 py-1 text-[10px] font-semibold bg-indigo-100 text-indigo-700 dark:bg-indigo-800 dark:text-indigo-100 rounded-md border border-indigo-200 dark:border-indigo-700 shadow-sm"},wot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},Rot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},$ot={class:"ml-2 text-sm"},Mot={class:"font-medium"},kot={class:"block text-xs text-slate-500"},Lot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},Dot={class:"ml-2 text-sm"},Pot={class:"font-medium"},Bot={class:"block text-xs text-slate-500"},Fot={class:"space-y-4"},Uot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},Got={class:"ml-2 text-sm"},Vot={class:"font-medium"},Hot={class:"block text-xs text-slate-500"},Wot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},Kot={class:"ml-2 text-sm"},zot={class:"font-medium"},jot={class:"block text-xs text-slate-500"},Yot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},Xot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},qot={class:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700"},Zot={class:"flex items-center p-2 rounded hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors"},Qot={class:"flex justify-between mt-6"},Jot={class:"p-4 bg-white dark:bg-slate-900 rounded-md border border-slate-100 dark:border-slate-800 shadow-lg"},elt={key:0,class:"mb-4"},tlt={class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},nlt={class:"space-y-2"},slt={class:"flex items-center gap-2"},alt={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},olt={class:"text-xs text-slate-500 dark:text-slate-400"},llt=["onClick"],ilt={class:"border-t border-slate-200 dark:border-slate-700 pt-4"},rlt={class:"space-y-2 mb-4 max-h-40 overflow-y-auto"},clt=["disabled","onClick"],dlt={class:"truncate"},ult={key:0,class:"ml-auto text-slate-400 text-xs"},plt={key:1,class:"ml-auto text-woot-500 text-xs font-semibold"},mlt={key:0,class:"px-3 py-2 text-slate-400 text-xs"},hlt={class:"flex justify-end gap-2 mt-4"},flt={class:"p-4 bg-white dark:bg-slate-900 rounded-md border border-slate-100 dark:border-slate-800 shadow-lg"},glt={class:"space-y-2 mb-4"},_lt=["onClick"],vlt={class:"truncate"},blt={key:0,class:"ml-auto text-woot-500 text-xs font-semibold"},Elt={class:"flex justify-end gap-2 mt-4"},Tlt={__name:"KanbanItem",props:{item:{type:Object,required:!0},isDragging:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},kanbanItems:{type:Array,default:()=>[]},forceExpanded:{type:Boolean,default:!1}},emits:["click","edit","delete","dragstart","conversationUpdated","itemDragend"],setup(e,{emit:t}){var qe;const n=e;Ao("labelsMap",{});const s=t,a=En(),{t:o}=Pe(),{isStacklab:l}=Js(),i=Pn(),r=C(()=>i.getters.getCurrentUser),d=C(()=>r.value?r.value.role==="administrator"?!0:!n.item.assigned_agents||n.item.assigned_agents.length===0?!1:n.item.assigned_agents.some(De=>De.id===r.value.id):!1),u=C(()=>{if(n.item.conversation_display_id&&Array.isArray(n.kanbanItems)){const De=n.kanbanItems.find(Te=>Te.conversation&&String(Te.conversation.display_id)===String(n.item.conversation_display_id));if(De&&De.conversation)return De.conversation}return n.item.conversation||null}),m=C(()=>{var Ge,nt;const De=((nt=(Ge=n.item.item_details)==null?void 0:Ge.priority)==null?void 0:nt.toLowerCase())||"none";return De==="none"?null:{high:{label:o("KANBAN.PRIORITY_LABELS.HIGH"),class:"bg-ruby-50 dark:bg-ruby-800 text-ruby-800 dark:text-ruby-50"},medium:{label:o("KANBAN.PRIORITY_LABELS.MEDIUM"),class:"bg-yellow-50 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-50"},low:{label:o("KANBAN.PRIORITY_LABELS.LOW"),class:"bg-green-50 dark:bg-green-800 text-green-800 dark:text-green-50"},urgent:{label:o("KANBAN.PRIORITY_LABELS.URGENT"),class:"bg-red-50 dark:bg-red-800 text-red-800 dark:text-red-50"}}[De]||null});C(()=>{const De=n.item.created_at||n.item.createdAt;if(!De)return"";try{const Te=new Date(De);return o("KANBAN.CREATED_AT_FORMAT",{date:new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(Te)})}catch(Te){return console.error("Erro ao formatar data:",Te),""}});const h=C(()=>{var Ge,nt;const De=(Ge=n.item.item_details)==null?void 0:Ge.value,Te=(nt=n.item.item_details)==null?void 0:nt.currency;if(!De&&De!==0)return null;try{return new Intl.NumberFormat((Te==null?void 0:Te.locale)||"pt-BR",{style:"currency",currency:(Te==null?void 0:Te.code)||"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(De)}catch{return De.toString()}}),_=C(()=>{var nt,Tt,Kt;const De=(nt=n.item.item_details)==null?void 0:nt.deadline_at,Te=(Tt=n.item.item_details)==null?void 0:Tt.scheduled_at,Ge=(Kt=n.item.item_details)==null?void 0:Kt.scheduling_type;if(!De&&!Te)return null;try{const dt=Te||De;let $t=dt;dt&&dt.length===10&&($t=`${dt}T12:00:00`);const Gt=new Date($t);return Number.isFinite(Gt.getTime())?new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",...Ge==="schedule"&&Te?{timeStyle:"short"}:{}}).format(Gt):null}catch{return null}}),g=C(()=>{var Te;const De=(Te=n.item.item_details)==null?void 0:Te.scheduling_type;return De&&De==="schedule"?"calendar":"alarm"}),T=C(()=>{var Te;const De=((Te=n.item.item_details)==null?void 0:Te.title)||"";return De.length>15?`${De.substring(0,15)}...`:De}),S=C(()=>{var Tt,Kt,dt,$t;const De=(Kt=(Tt=u.value)==null?void 0:Tt.contact)==null?void 0:Kt.name,Te=($t=(dt=u.value)==null?void 0:dt.contact)==null?void 0:$t.email,Ge=o("ITEM_CONVERSATION.NO_CONTACT"),nt=De||Te||Ge;return nt.length>25?`${nt.substring(0,25)}...`:nt}),b=()=>{console.log("[DEBUG KanbanItem] handleClick - Iniciando..."),console.log("[DEBUG KanbanItem] handleClick - Item clicado:",n.item),s("click",n.item)},A=De=>{var Te;De.stopPropagation(),console.log("[DEBUG KanbanItem] Emitindo evento edit com item:",n.item),console.log("[DEBUG KanbanItem] Item priority:",(Te=n.item.item_details)==null?void 0:Te.priority),console.log("[DEBUG KanbanItem] Item details:",n.item.item_details),s("edit",n.item)},y=F(!1),x=F(null),$=De=>{De.stopPropagation(),x.value=n.item,y.value=!0},N=()=>{s("delete",x.value),y.value=!1,x.value=null},w=(De,Te)=>{if(De.stopPropagation(),!Te||!u.value)return;const Ge=a.resolve({name:"inbox_conversation",params:{accountId:n.item.account_id,inboxId:u.value.inbox_id,conversation_id:Te}});window.open(Ge.href,"_blank")},D=F(!1),H=F({x:0,y:0}),B=De=>{var nt;const Te=n.item.conversation,Ge=(Te==null?void 0:Te.id)||((nt=n.item.item_details)==null?void 0:nt.conversation_id);!Te||!Ge||(De.preventDefault(),D.value=!0,H.value={x:De.clientX,y:De.clientY})},k=F(!1),U=()=>{try{jt(()=>{D.value=!1,k.value=!0})}catch(De){console.error("Erro ao processar clique:",De)}},G=()=>{var De,Te;if(D.value=!1,!!((Te=(De=u.value)==null?void 0:De.contact)!=null&&Te.id))try{a.push({name:"contact_profile",params:{accountId:u.value.account_id,contactId:u.value.contact.id},query:{page:1}})}catch{window.location.href=`/app/accounts/${u.value.account_id}/contacts/${u.value.contact.id}?page=1`}},L=De=>{s("dragstart",De)},M=De=>{s("itemDragend",De)};ot(k,De=>{console.log("Modal status alterado:",De),De||jt(()=>{D.value=!1})});const R=F(!1),P=C(()=>{var Te;const De=(Te=n.item.item_details)==null?void 0:Te.description;return De?R.value?De:De.length>75?De.substring(0,75)+"...":De:""}),W=De=>{De.stopPropagation(),R.value=!R.value},Q=C(()=>n.item.assigned_agents&&n.item.assigned_agents.length>0?n.item.assigned_agents.map(De=>({id:De.id,name:De.name,avatar_url:De.avatar_url||"",assigned_at:De.assigned_at,assigned_by:De.assigned_by})):n.item.agent?[{id:n.item.agent.id,name:n.item.agent.name,avatar_url:n.item.agent.avatar_url||"",assigned_at:null,assigned_by:null}]:[]),Z=C(()=>Q.value.length>0?Q.value[0]:null),j=C(()=>Q.value.length>1),X=C(()=>Math.max(0,Q.value.length-1)),q=F(!1);pt(()=>{document.addEventListener("click",()=>{q.value=!1});const Te=JSON.parse(localStorage.getItem("kanban_items_visibility")||"{}")[n.item.id];if(Te)try{ee.value=Te.showDescriptionField??!0,de.value=Te.showLabelsField??!0,ie.value=Te.showPriorityField??!0,Ce.value=Te.showValueField??!0,Se.value=Te.showDeadlineField??!0,je.value=Te.showConversationField??!0,Ke.value=Te.showChecklistField??!0,$e.value=Te.showAgentField??!0,Be.value=Te.showMetadataField??!0}catch(Ge){console.error("Erro ao carregar configuraes de visibilidade:",Ge)}se(),It.on("kanbanItemsCollapsedStateChanged",se),Ie.value.length||i.dispatch("agents/get")}),zs(()=>{document.removeEventListener("click",()=>{q.value=!1}),It.off("kanbanItemsCollapsedStateChanged",se)});const se=()=>{const De=JSON.parse(localStorage.getItem("kanban_collapsed_items")||"{}");n.item.id in De&&(Ue.value=De[n.item.id])},he=F(!1),be=F({status:"",reason:""}),ne=()=>{var De,Te;be.value={status:((De=n.item.item_details)==null?void 0:De.status)||"",reason:((Te=n.item.item_details)==null?void 0:Te.reason)||""},he.value=!0},J=async()=>{try{const De={...n.item,item_details:{...n.item.item_details,status:be.value.status,reason:be.value.status==="lost"?be.value.reason:null}},{data:Te}=await Dn.update(n.item.id,De);Te&&Object.assign(n.item,Te),he.value=!1,s("conversationUpdated")}catch(De){console.error("Erro ao atualizar status:",De)}};C(()=>{var Te,Ge,nt;const De=(Te=n.item.item_details)==null?void 0:Te.status;return De?De==="won"?(new Date((Ge=n.item.item_details)==null?void 0:Ge.updated_at).toLocaleDateString(),o("KANBAN.BULK_ACTIONS.ITEM_STATUS.WON")):De==="lost"?(new Date((nt=n.item.item_details)==null?void 0:nt.updated_at).toLocaleDateString(),o("KANBAN.BULK_ACTIONS.ITEM_STATUS.LOST")):"Status":o("KANBAN.BULK_ACTIONS.ITEM_STATUS.OPEN")});const ue=C(()=>{var Te;const De=(Te=n.item.item_details)==null?void 0:Te.status;return!De||De==="open"?o("KANBAN.BULK_ACTIONS.ITEM_STATUS.OPEN"):De==="won"?o("KANBAN.BULK_ACTIONS.ITEM_STATUS.WON"):De==="lost"?o("KANBAN.BULK_ACTIONS.ITEM_STATUS.LOST"):De==="pending"?o("KANBAN.ITEM_STATUS.PENDING"):De==="resolved"?o("KANBAN.ITEM_STATUS.RESOLVED"):De==="snoozed"?o("KANBAN.ITEM_STATUS.SNOOZED"):De}),Ne=C(()=>{var nt,Tt,Kt,dt,$t;const De=((nt=n.item.attachments)==null?void 0:nt.length)||0,Te=((Kt=(Tt=n.item.item_details)==null?void 0:Tt.attachments)==null?void 0:Kt.length)||0,Ge=(($t=(dt=n.item.item_details)==null?void 0:dt.notes)==null?void 0:$t.reduce((Gt,mn)=>{var On;return Gt+(((On=mn.attachments)==null?void 0:On.length)||0)},0))||0;return De+Te+Ge}),Re=C(()=>{var De,Te;return((Te=(De=n.item.item_details)==null?void 0:De.notes)==null?void 0:Te.length)||0}),Ze=C(()=>{var De;return((De=n.item.checklist)==null?void 0:De.length)||0}),Xe=C(()=>{var De,Te;return((Te=(De=n.item.checklist)==null?void 0:De.filter(Ge=>Ge.completed))==null?void 0:Te.length)||0}),Qe=C(()=>Ze.value===0?0:Xe.value/Ze.value*100),Je=C(()=>{if(!n.item.stage_entered_at)return"";try{const De=new Date,Te=new Date(n.item.stage_entered_at),Ge=De-Te,nt=Math.floor(Ge/6e4),Tt=Math.floor(nt/60),Kt=Math.floor(Tt/24),dt=Math.floor(Kt/365);return dt>0?`${dt}a`:Kt>0?`${Kt}d`:Tt>0?`${Tt}h`:nt>0?`${nt}m`:"<1m"}catch{return""}}),st=C(()=>{var De;return((De=u.value)==null?void 0:De.label_list)||[]}),ht=C(()=>{var De,Te;return((Te=(De=u.value)==null?void 0:De.contact)==null?void 0:Te.thumbnail)||""}),wt=C(()=>{var Te;switch((Te=u.value)==null?void 0:Te.status){case"open":return{background:"linear-gradient(90deg, #e0f2fe 0%, #bae6fd 100%)",color:"#0369a1",border:"1px solid #bae6fd"};case"pending":return{background:"linear-gradient(90deg, #fef9c3 0%, #fde68a 100%)",color:"#b45309",border:"1px solid #fde68a"};case"resolved":return{background:"linear-gradient(90deg, #dcfce7 0%, #bbf7d0 100%)",color:"#166534",border:"1px solid #bbf7d0"};case"snoozed":return{background:"linear-gradient(90deg, #f3f4f6 0%, #e5e7eb 100%)",color:"#334155",border:"1px solid #e5e7eb"};case"lost":return{background:"linear-gradient(90deg, #fee2e2 0%, #fecaca 100%)",color:"#991b1b",border:"1px solid #fecaca"};case"won":return{background:"linear-gradient(90deg, #f0fdf4 0%, #bbf7d0 100%)",color:"#166534",border:"1px solid #bbf7d0"};default:return{background:"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 100%)",color:"#334155",border:"1px solid #e2e8f0"}}}),ee=F(!0),de=F(!0),ie=F(!0),Ce=F(!0),Se=F(!0),je=F(!0),Ke=F(!0),$e=F(!0),Be=F(!0),Ue=F(!1),ge=F(!1),ae=()=>{q.value=!1,ge.value=!0},ve=()=>{Ue.value=!Ue.value,Y(),q.value=!1},Y=()=>{const De=JSON.parse(localStorage.getItem("kanban_collapsed_items")||"{}");De[n.item.id]=Ue.value,localStorage.setItem("kanban_collapsed_items",JSON.stringify(De))},oe=()=>{const De={showDescriptionField:ee.value,showLabelsField:de.value,showPriorityField:ie.value,showValueField:Ce.value,showDeadlineField:Se.value,showConversationField:je.value,showChecklistField:Ke.value,showAgentField:$e.value,showMetadataField:Be.value},Te=JSON.parse(localStorage.getItem("kanban_items_visibility")||"{}");Te[n.item.id]=De,localStorage.setItem("kanban_items_visibility",JSON.stringify(Te))};ot([ee,de,ie,Ce,Se,je,Ke,$e,Be],()=>{oe()});const te=C(()=>{var De,Te;return((Te=(De=n.item.item_details)==null?void 0:De.priority)==null?void 0:Te.toLowerCase())==="urgent"});ot(()=>n.forceExpanded,De=>{De&&(Ue.value=!1)},{immediate:!0});const le=F(!1),ye=F(!1),me=F(null),Ie=C(()=>i.getters["agents/getAgents"]);F(!1);const Oe=()=>{var De;me.value=((De=Q.value)==null?void 0:De.id)||null,le.value=!0},we=async()=>{if(!(!me.value||ye.value)){ye.value=!0;try{const{data:De}=await Dn.assignAgent(n.item.id,me.value);De&&Object.assign(n.item,De),le.value=!1,s("conversationUpdated"),It.emit("newToastMessage",{message:o("KANBAN.FORM.AGENT.ASSIGNED_SUCCESS"),type:"success"})}catch{It.emit("newToastMessage",{message:o("KANBAN.FORM.AGENT.ASSIGNED_ERROR"),type:"error"})}finally{ye.value=!1}}},Ye=async De=>{try{const{data:Te}=await Dn.removeAgent(n.item.id,De);Te&&Object.assign(n.item,Te),s("conversationUpdated"),It.emit("newToastMessage",{message:"Agente removido com sucesso",type:"success"})}catch{It.emit("newToastMessage",{message:"Erro ao remover agente",type:"error"})}};pt(()=>{Ie.value.length||i.dispatch("agents/get")});const He=F(""),et=C(()=>He.value?Ie.value.filter(De=>(De.name||"").toLowerCase().includes(He.value.toLowerCase())):Ie.value),bt=F(!1),Nt=F(!1),ct=F(!1),Ot=F(((qe=n.item.item_details)==null?void 0:qe.priority)||"none"),Le=async()=>{if(!ct.value){ct.value=!0;try{const De={...n.item,item_details:{...n.item.item_details,priority:Ot.value}},{data:Te}=await Dn.update(n.item.id,De);Te&&Object.assign(n.item,Te),Nt.value=!1,s("conversationUpdated"),It.emit("newToastMessage",{message:o("KANBAN.FORM.PRIORITY.ASSIGNED_SUCCESS"),type:"success"})}catch{It.emit("newToastMessage",{message:o("KANBAN.FORM.PRIORITY.ASSIGNED_ERROR"),type:"error"})}finally{ct.value=!1}}};return(De,Te)=>{var nt,Tt,Kt,dt,$t,Gt,mn,On,Rn,gn,wn,ls,ns,Fs;const Ge=z("fluent-icon");return p(),f(fe,null,[d.value?(p(),f("div",{key:0,class:re(["flex flex-col p-4 bg-white dark:bg-slate-900 rounded-lg border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow cursor-pointer mt-3",{"opacity-50":e.isDragging}]),style:Ct(te.value?"border: 1px dashed #DC2626;":""),draggable:e.draggable,onDragstart:L,onDragend:M,onClick:b},[c("div",vat,[c("div",bat,[ht.value?(p(),V(Ft,{key:0,src:ht.value,name:T.value,size:24},null,8,["src","name"])):O("",!0),c("div",Eat,[c("h3",Tat,E(T.value),1)])]),c("div",Aat,[c("div",yat,[c("button",{class:re(["px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 transition-colors",{"bg-slate-50 text-slate-700 dark:bg-slate-800 dark:text-slate-300":!((nt=u.value)!=null&&nt.status)&&(!((Tt=n.item.item_details)!=null&&Tt.status)||((Kt=n.item.item_details)==null?void 0:Kt.status)==="open")||((dt=u.value)==null?void 0:dt.status)==="open","bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300":(($t=u.value)==null?void 0:$t.status)==="resolved"||((Gt=n.item.item_details)==null?void 0:Gt.status)==="won","bg-yellow-50 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":((mn=u.value)==null?void 0:mn.status)==="pending","bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300":((On=u.value)==null?void 0:On.status)==="snoozed","bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-300":((Rn=n.item.item_details)==null?void 0:Rn.status)==="lost"}]),onClick:ze(ne,["stop"])},[((gn=n.item.item_details)==null?void 0:gn.status)==="won"||((wn=n.item.item_details)==null?void 0:wn.status)==="lost"||((ls=u.value)==null?void 0:ls.status)==="resolved"?(p(),f("svg",Sat,Te[38]||(Te[38]=[c("polyline",{points:"20 6 9 17 4 12"},null,-1)]))):O("",!0),c("span",null,E(ue.value),1)],2),c("div",Iat,[c("button",{class:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition-colors",onClick:Te[0]||(Te[0]=ze(gt=>q.value=!q.value,["stop"]))},[v(Ge,{icon:"more-vertical",size:"16"})]),q.value?(p(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-900 rounded-md shadow-lg border border-slate-100 dark:border-slate-800 w-[170px] min-w-[140px] flex flex-col gap-1 z-10",style:{"box-shadow":"0 4px 24px 0 rgba(30, 41, 59, 0.08)"},onClick:Te[3]||(Te[3]=ze(()=>{},["stop"]))},[c("button",{class:"w-full px-3 py-1.5 text-left text-xs font-normal hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-none transition-colors",onClick:Te[1]||(Te[1]=ze(gt=>A(gt),["stop"]))},[c("span",Cat,[v(Ge,{icon:"edit",size:"16"}),Ee(" "+E(I(o)("KANBAN.ACTIONS.EDIT")),1)])]),I(l)===!0?(p(),f("button",{key:0,class:"w-full px-3 py-1.5 text-left text-xs font-normal hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-none transition-colors",onClick:ze(ae,["stop"])},[c("span",xat,[v(Ge,{icon:"eye-show",size:"16"}),Ee(" "+E(I(o)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.TITLE")),1)])])):O("",!0),c("button",{class:"w-full px-3 py-1.5 text-left text-xs font-normal hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-none transition-colors",onClick:ze(ve,["stop"])},[c("span",Nat,[v(Ge,{icon:Ue.value?"arrow-expand":"arrow-outwards",size:"16"},null,8,["icon"]),Ee(" "+E(Ue.value?I(o)("KANBAN.CONTEXT_MENU.EXPAND"):I(o)("KANBAN.CONTEXT_MENU.COLLAPSE")),1)])]),c("button",{class:"w-full px-3 py-1.5 text-left text-xs font-normal hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-none transition-colors",onClick:Te[2]||(Te[2]=ze(gt=>$(gt),["stop"]))},[c("span",Oat,[v(Ge,{icon:"delete",size:"16"}),Ee(" "+E(I(o)("KANBAN.ACTIONS.DELETE")),1)])])])):O("",!0)])])])]),ee.value&&((ns=n.item.item_details)!=null&&ns.description)?(p(),f("p",wat,[Ee(E(P.value)+" ",1),n.item.item_details.description.length>75?(p(),f("span",{key:0,class:"text-xs font-medium text-woot-500 dark:text-woot-400 hover:underline cursor-pointer inline-block mt-1",onClick:W},E(R.value?I(o)("KANBAN.READ_LESS"):I(o)("KANBAN.READ_MORE")),1)):O("",!0)])):O("",!0),de.value&&!Ue.value&&st.value.length>0?(p(),f("div",Rat,[(p(!0),f(fe,null,Ae(st.value.slice(0,3),gt=>(p(),f("span",{key:gt,class:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-normal bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 shadow-sm text-slate-700 dark:text-slate-200",style:{"box-shadow":"0 2px 8px 0 rgba(30, 41, 59, 0.04)","min-width":"max-content"}},E(gt),1))),128)),st.value.length>3?(p(),f("span",$at," +"+E(st.value.length-3),1)):O("",!0)])):O("",!0),(ie.value||Ce.value||Se.value)&&!Ue.value?(p(),f("div",Mat,[c("div",kat,[Ce.value&&h.value?(p(),f("span",Lat,E(h.value),1)):O("",!0)]),Se.value&&_.value&&e.item.item_details?(p(),f("div",Dat,[v(Ge,{icon:g.value||"alarm",class:"text-slate-500 dark:text-slate-400",size:"14"},null,8,["icon"]),c("span",Pat,E(_.value),1)])):O("",!0)])):O("",!0),v(Bo,{text:"Clique com o boto direito para ver mais opes."},{default:K(()=>{var gt,vn;return[je.value&&!Ue.value&&((gt=e.item.item_details)!=null&&gt.conversation_id)&&u.value?(p(),f("div",{key:0,class:"flex items-center gap-2 mb-3 px-3.5 py-1.5 bg-white dark:bg-slate-900 rounded-md shadow-lg border border-slate-100 dark:border-slate-800 min-h-[1.5rem] cursor-pointer transition-colors text-xs conversation-card-gradient",style:Ct({boxShadow:"0 4px 24px 0 rgba(30,41,59,0.08)",background:bt.value?`linear-gradient(90deg, ${((vn=wt.value.background)==null?void 0:vn.split(" ")[0])||"#e0f2fe"}22 0%, transparent 100%)`:""}),onMouseenter:Te[4]||(Te[4]=vs=>bt.value=!0),onMouseleave:Te[5]||(Te[5]=vs=>bt.value=!1),onClick:Te[6]||(Te[6]=vs=>{var ma;return w(vs,(ma=e.item.conversation)==null?void 0:ma.display_id)}),onContextmenu:B},[v(Ge,{icon:"chat",size:"16",class:"text-slate-500 dark:text-slate-400 flex-shrink-0"}),c("span",Bat,"#"+E(u.value.display_id),1),c("div",Fat,[c("span",Uat,E(u.value.campaign_name),1),c("span",Gat,E(S.value),1),c("span",{class:"ml-2 text-[11px] px-2.5 py-0.5 rounded-full border border-slate-100 dark:border-slate-800 shadow-sm",style:Ct({background:wt.value.background,color:wt.value.color,boxShadow:"0 2px 8px 0 rgba(30,41,59,0.04)",minWidth:"max-content",border:wt.value.border})},E(u.value.status),5)])],36)):O("",!0)]}),_:1}),Ke.value&&!Ue.value&&Ze.value>0?(p(),f("div",Vat,[c("div",Hat,[c("div",Wat,[c("div",{class:"h-full bg-woot-500 transition-all duration-300 ease-out",style:Ct({width:`${Qe.value}%`})},null,4)])]),c("span",Kat,E(Xe.value)+"/"+E(Ze.value),1)])):O("",!0),c("div",zat,[$e.value&&!Ue.value&&e.item.item_details?(p(),f("div",jat,[c("div",Yat,[Z.value?(p(),V(Bo,{key:0,text:Z.value.name,class:"flex items-center relative"},{default:K(()=>[c("div",null,[v(Ft,{name:Z.value.name,src:Z.value.avatar_url,size:24,class:"flex-shrink-0 cursor-pointer",onClick:ze(Oe,["stop"])},null,8,["name","src"])])]),_:1},8,["text"])):O("",!0),j.value?(p(),f("div",Xat,[(p(!0),f(fe,null,Ae(Q.value.slice(1,3),gt=>(p(),V(Bo,{key:gt.id,text:`${gt.name} (clique para remover)`,class:"flex items-center"},{default:K(()=>[v(Ft,{name:gt.name,src:gt.avatar_url,size:16,class:"flex-shrink-0 cursor-pointer hover:opacity-75 transition-opacity",onClick:ze(vn=>Ye(gt.id),["stop"])},null,8,["name","src","onClick"])]),_:2},1032,["text"]))),128)),X.value>2?(p(),f("div",{key:0,class:"flex items-center justify-center w-4 h-4 bg-slate-200 dark:bg-slate-700 rounded-full text-xs font-medium text-slate-600 dark:text-slate-300 cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",onClick:ze(Oe,["stop"])}," +"+E(X.value-2),1)):O("",!0)])):O("",!0),Z.value?O("",!0):(p(),f("div",{key:2,class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-800 rounded-full cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",onClick:ze(Oe,["stop"])},[v(Ge,{icon:"person-add",size:"12",class:"text-slate-500 dark:text-slate-400"})])),v(Bo,{text:(Fs=m.value)==null?void 0:Fs.label,class:"flex items-center"},{default:K(()=>{var gt;return[ie.value&&((gt=n.item.item_details)!=null&&gt.priority)&&n.item.item_details.priority!=="none"?(p(),V(T2,{key:0,priority:n.item.item_details.priority,size:20},null,8,["priority"])):O("",!0)]}),_:1},8,["text"])])])):O("",!0),Be.value?(p(),f("div",qat,[Ue.value?(p(),f("div",Zat,[v(Ge,{icon:"arrow-outwards",size:"12"})])):O("",!0),Je.value?(p(),f("div",Qat,[v(Ge,{icon:"calendar-clock",size:"12"}),Ee(" "+E(Je.value),1)])):O("",!0),Ne.value>0?(p(),f("div",Jat,[v(Ge,{icon:"attach",size:"12"}),Ee(" "+E(Ne.value),1)])):O("",!0),Re.value>0?(p(),f("div",eot,[v(Ge,{icon:"comment-add",size:"12"}),Ee(" "+E(Re.value),1)])):O("",!0)])):O("",!0)])],46,_at)):O("",!0),D.value&&d.value?(p(),V(rat,{key:1,x:H.value.x,y:H.value.y,show:D.value,onClose:Te[9]||(Te[9]=gt=>D.value=!1)},{default:K(()=>[c("div",tot,[I(l)===!0?(p(),f("button",{key:0,class:"w-full px-3 py-1.5 text-left text-xs font-normal hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-none transition-colors",onClick:ze(U,["stop"]),onMousedown:Te[7]||(Te[7]=ze(()=>{},["stop"])),onMouseup:Te[8]||(Te[8]=ze(()=>{},["stop"]))},[c("span",not,[v(Ge,{icon:"chat",size:"16"}),Ee(" "+E(I(o)("KANBAN.CONTEXT_MENU.QUICK_MESSAGE")),1)])],32)):O("",!0),c("button",{class:"w-full px-3 py-1.5 text-left text-xs font-normal hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-none transition-colors",onClick:G},[c("span",sot,[v(Ge,{icon:"person",size:"16"}),Ee(" "+E(I(o)("KANBAN.CONTEXT_MENU.VIEW_CONTACT")),1)])])])]),_:1},8,["x","y","show"])):O("",!0),d.value?(p(),V(qt,{key:2,show:k.value,"onUpdate:show":Te[12]||(Te[12]=gt=>k.value=gt),"on-close":()=>k.value=!1,"show-close-button":!0,size:"medium","close-on-backdrop-click":!1,class:re({"z-50":k.value})},{default:K(()=>{var gt,vn;return[c("div",aot,[c("header",oot,[c("h3",lot,E(I(o)("KANBAN.SEND_MESSAGE.TITLE")),1)]),c("div",iot,[v(ZI,{"conversation-id":(gt=u.value)==null?void 0:gt.display_id,"current-stage":e.item.funnel_stage||"",contact:(vn=u.value)==null?void 0:vn.contact,conversation:u.value,item:e.item,onClose:Te[10]||(Te[10]=()=>{k.value=!1,D.value.value=!1}),onSend:Te[11]||(Te[11]=vs=>k.value=!1)},null,8,["conversation-id","current-stage","contact","conversation","item"])])])]}),_:1},8,["show","on-close","class"])):O("",!0),d.value?(p(),V(qt,{key:3,show:y.value,"onUpdate:show":Te[14]||(Te[14]=gt=>y.value=gt),"on-close":()=>{y.value=!1,x.value=null}},{default:K(()=>{var gt;return[c("div",rot,[Te[41]||(Te[41]=c("h3",{class:"text-lg font-medium mb-4"},"Confirmar excluso",-1)),c("p",cot,' Tem certeza que deseja excluir o item "'+E((gt=x.value)==null?void 0:gt.title)+'"? ',1),c("div",dot,[v(ce,{variant:"clear","color-scheme":"secondary",onClick:Te[13]||(Te[13]=vn=>y.value=!1)},{default:K(()=>Te[39]||(Te[39]=[Ee(" Cancelar ")])),_:1}),v(ce,{variant:"solid","color-scheme":"alert",onClick:N},{default:K(()=>Te[40]||(Te[40]=[Ee(" Excluir ")])),_:1})])])]}),_:1},8,["show","on-close"])):O("",!0),d.value?(p(),V(qt,{key:4,show:he.value,"onUpdate:show":Te[20]||(Te[20]=gt=>he.value=gt),"on-close":()=>he.value=!1,"show-close-button":!0,size:"small"},{default:K(()=>[c("div",uot,[Te[48]||(Te[48]=c("h3",{class:"text-lg font-medium mb-4"},"Atualizar status",-1)),c("div",pot,[c("div",mot,[c("button",{class:re(["flex-1 px-3 py-1.5 border rounded-md text-xs font-normal transition-colors hover:bg-slate-100 dark:hover:bg-slate-800",be.value.status==="open"?"border-slate-500 bg-slate-50 dark:bg-slate-800 font-bold text-slate-700 dark:text-slate-100":"border-slate-100 dark:border-slate-800"]),onClick:Te[15]||(Te[15]=gt=>be.value.status="open")},[Te[42]||(Te[42]=c("span",{class:"truncate"},"Em aberto",-1)),be.value.status==="open"?(p(),f("span",hot,"Selecionado")):O("",!0)],2),c("button",{class:re(["flex-1 px-3 py-1.5 border rounded-md text-xs font-normal transition-colors hover:bg-green-50 dark:hover:bg-green-900",be.value.status==="won"?"border-green-500 bg-green-50 dark:bg-green-900 font-bold text-green-700 dark:text-green-100":"border-slate-100 dark:border-slate-800"]),onClick:Te[16]||(Te[16]=gt=>be.value.status="won")},[Te[43]||(Te[43]=c("span",{class:"truncate"},"Ganho",-1)),be.value.status==="won"?(p(),f("span",fot,"Selecionado")):O("",!0)],2),c("button",{class:re(["flex-1 px-3 py-1.5 border rounded-md text-xs font-normal transition-colors hover:bg-red-50 dark:hover:bg-red-900",be.value.status==="lost"?"border-red-500 bg-red-50 dark:bg-red-900 font-bold text-red-700 dark:text-red-100":"border-slate-100 dark:border-slate-800"]),onClick:Te[17]||(Te[17]=gt=>be.value.status="lost")},[Te[44]||(Te[44]=c("span",{class:"truncate"},"Perdido",-1)),be.value.status==="lost"?(p(),f("span",got,"Selecionado")):O("",!0)],2)]),be.value.status==="lost"?(p(),f("div",_ot,[Te[45]||(Te[45]=c("label",{class:"text-sm font-medium"},"Motivo",-1)),pe(c("textarea",{"onUpdate:modelValue":Te[18]||(Te[18]=gt=>be.value.reason=gt),class:"w-full p-2 border border-slate-100 dark:border-slate-800 rounded-md text-xs bg-white dark:bg-slate-800 focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",rows:"3",placeholder:"Descreva o motivo da perda (opcional)"},null,512),[[mt,be.value.reason]])])):O("",!0),c("div",vot,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:Te[19]||(Te[19]=gt=>he.value=!1)},{default:K(()=>Te[46]||(Te[46]=[Ee("Cancelar")])),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:J},{default:K(()=>Te[47]||(Te[47]=[Ee("Salvar")])),_:1})])])])]),_:1},8,["show","on-close"])):O("",!0),d.value?(p(),V(qt,{key:5,show:ge.value,"onUpdate:show":Te[32]||(Te[32]=gt=>ge.value=gt),"on-close":()=>ge.value=!1,"show-close-button":!0,size:"medium"},{default:K(()=>[c("div",bot,[c("header",Eot,[c("h3",Tot,E(I(o)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.TITLE")),1)]),c("div",Aot,[c("p",yot,E(I(o)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.DESCRIPTION")),1),c("div",Sot,[c("div",Iot,[c("label",Cot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[21]||(Te[21]=gt=>ee.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,ee.value]]),c("span",xot,[c("span",Not,E(I(o)("KANBAN.FORM.DESCRIPTION.LABEL")),1),c("span",Oot,E(I(o)("KANBAN.CONTEXT_MENU.CUSTOMIZE_FIELDS.VISIBLE_WHEN_COLLAPSED")),1),Te[49]||(Te[49]=c("span",{class:"block text-xs text-slate-500"},"Detalhes do card",-1))])]),c("label",wot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[22]||(Te[22]=gt=>de.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,de.value]]),Te[50]||(Te[50]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Etiquetas"),c("span",{class:"block text-xs text-slate-500"},"Tags da conversa")],-1))]),c("label",Rot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[23]||(Te[23]=gt=>ie.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,ie.value]]),c("span",$ot,[c("span",Mot,E(I(o)("KANBAN.FORM.PRIORITY.LABEL")),1),c("span",kot,E(I(o)("KANBAN.PRIORITY_LABELS.HIGH"))+", "+E(I(o)("KANBAN.PRIORITY_LABELS.MEDIUM"))+", "+E(I(o)("KANBAN.PRIORITY_LABELS.LOW")),1)])]),c("label",Lot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[24]||(Te[24]=gt=>Ce.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,Ce.value]]),c("span",Dot,[c("span",Pot,E(I(o)("KANBAN.FORM.VALUE.LABEL")),1),c("span",Bot,E(I(o)("KANBAN.FORM.VALUE.LABEL")),1)])])]),c("div",Fot,[c("label",Uot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[25]||(Te[25]=gt=>Se.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,Se.value]]),c("span",Got,[c("span",Vot,E(I(o)("KANBAN.DEADLINE")),1),c("span",Hot,E(I(o)("KANBAN.DEADLINE_DESCRIPTION")),1)])]),c("label",Wot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[26]||(Te[26]=gt=>je.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,je.value]]),c("span",Kot,[c("span",zot,E(I(o)("KANBAN.ITEM_CONVERSATION.TITLE")),1),c("span",jot,E(I(o)("KANBAN.ITEM_CONVERSATION.DESCRIPTION")),1)])]),c("label",Yot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[27]||(Te[27]=gt=>Ke.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,Ke.value]]),Te[51]||(Te[51]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Checklist"),c("span",{class:"block text-xs text-slate-500"},"Progresso das tarefas")],-1))]),c("label",Xot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[28]||(Te[28]=gt=>$e.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,$e.value]]),Te[52]||(Te[52]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Agente"),c("span",{class:"block text-xs text-slate-500"},"Responsvel atribudo")],-1))])])]),c("div",qot,[c("label",Zot,[pe(c("input",{type:"checkbox","onUpdate:modelValue":Te[29]||(Te[29]=gt=>Be.value=gt),class:"form-checkbox h-4 w-4 text-woot-500"},null,512),[[Xt,Be.value]]),Te[53]||(Te[53]=c("span",{class:"ml-2 text-sm"},[c("span",{class:"font-medium"},"Metadados"),c("span",{class:"block text-xs text-slate-500"},"Tempo na etapa, anexos e notas")],-1))])]),c("div",Qot,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:Te[30]||(Te[30]=()=>{ee.value=!0,de.value=!0,ie.value=!0,Ce.value=!0,Se.value=!0,je.value=!0,Ke.value=!0,$e.value=!0,Be.value=!0})},{default:K(()=>Te[54]||(Te[54]=[Ee(" Restaurar padro ")])),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:Te[31]||(Te[31]=gt=>ge.value=!1)},{default:K(()=>Te[55]||(Te[55]=[Ee(" Fechar ")])),_:1})])])])]),_:1},8,["show","on-close"])):O("",!0),v(qt,{show:le.value,"onUpdate:show":Te[35]||(Te[35]=gt=>le.value=gt),"on-close":()=>le.value=!1,"show-close-button":!0,size:"medium"},{default:K(()=>[c("div",Jot,[Te[59]||(Te[59]=c("h3",{class:"text-lg font-medium mb-4"},"Gerenciar Agentes Atribudos",-1)),Q.value.length>0?(p(),f("div",elt,[c("h4",tlt," Agentes Atribudos ("+E(Q.value.length)+") ",1),c("div",nlt,[(p(!0),f(fe,null,Ae(Q.value,gt=>(p(),f("div",{key:gt.id,class:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-800 rounded-md"},[c("div",slt,[v(Ft,{name:gt.name,src:gt.avatar_url||gt.thumbnail||"",size:24},null,8,["name","src"]),c("div",null,[c("div",alt,E(gt.name),1),c("div",olt," Atribudo em "+E(new Date(gt.assigned_at).toLocaleDateString("pt-BR")),1)])]),c("button",{class:"p-1 text-slate-400 hover:text-red-500 transition-colors",onClick:vn=>Ye(gt.id)},[v(Ge,{icon:"delete",size:"16"})],8,llt)]))),128))])])):O("",!0),c("div",ilt,[Te[56]||(Te[56]=c("h4",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Adicionar Novo Agente ",-1)),pe(c("input",{"onUpdate:modelValue":Te[33]||(Te[33]=gt=>He.value=gt),type:"text",class:"w-full mb-3 px-3 py-2 border border-slate-100 dark:border-slate-800 rounded-md text-xs bg-white dark:bg-slate-800 focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500",placeholder:"Buscar agentes..."},null,512),[[mt,He.value]]),c("div",rlt,[(p(!0),f(fe,null,Ae(et.value,gt=>(p(),f("button",{key:gt.id,type:"button",class:re(["flex items-center w-full px-3 py-1.5 rounded-md transition-colors gap-2 border border-slate-100 dark:border-slate-800 text-xs font-normal hover:bg-slate-100 dark:hover:bg-slate-800",[me.value===gt.id?"border-woot-500 bg-woot-50 dark:bg-woot-900/30 font-bold text-woot-600":"",Q.value.some(vn=>vn.id===gt.id)?"opacity-50 cursor-not-allowed":""]]),disabled:Q.value.some(vn=>vn.id===gt.id),onClick:vn=>me.value=gt.id},[v(Ft,{name:gt.name||"Agente",src:gt.avatar_url||gt.thumbnail||"",size:20,class:"mr-2"},null,8,["name","src"]),c("span",dlt,E(gt.name||"Agente"),1),Q.value.some(vn=>vn.id===gt.id)?(p(),f("span",ult,"J atribudo")):me.value===gt.id?(p(),f("span",plt,"Selecionado")):O("",!0)],10,clt))),128)),et.value.length===0?(p(),f("div",mlt," Nenhum agente encontrado ")):O("",!0)])]),c("div",hlt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:Te[34]||(Te[34]=gt=>le.value=!1)},{default:K(()=>Te[57]||(Te[57]=[Ee("Fechar")])),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",isLoading:ye.value,disabled:!me.value||ye.value||Q.value.some(gt=>gt.id===me.value),onClick:we},{default:K(()=>Te[58]||(Te[58]=[Ee("Adicionar Agente")])),_:1},8,["isLoading","disabled"])])])]),_:1},8,["show","on-close"]),v(qt,{show:Nt.value,"onUpdate:show":Te[37]||(Te[37]=gt=>Nt.value=gt),"on-close":()=>Nt.value=!1,"show-close-button":!0,size:"small"},{default:K(()=>[c("div",flt,[Te[62]||(Te[62]=c("h3",{class:"text-lg font-medium mb-4"},"Definir prioridade",-1)),c("div",glt,[(p(),f(fe,null,Ae([{value:"urgent",label:"Urgente"},{value:"high",label:"Alta"},{value:"medium",label:"Mdia"},{value:"low",label:"Baixa"},{value:"none",label:"Nenhuma"}],gt=>c("button",{key:gt.value,type:"button",class:re(["flex items-center w-full px-3 py-1.5 rounded-md transition-colors gap-2 border border-slate-100 dark:border-slate-800 text-xs font-normal hover:bg-slate-100 dark:hover:bg-slate-800",[Ot.value===gt.value?"border-woot-500 bg-woot-50 dark:bg-woot-900/30 font-bold text-woot-600":""]]),onClick:vn=>Ot.value=gt.value},[c("span",vlt,E(gt.label),1),Ot.value===gt.value?(p(),f("span",blt,"Selecionado")):O("",!0)],10,_lt)),64))]),c("div",Elt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:Te[36]||(Te[36]=gt=>Nt.value=!1)},{default:K(()=>Te[60]||(Te[60]=[Ee("Cancelar")])),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",isLoading:ct.value,disabled:ct.value,onClick:Le},{default:K(()=>Te[61]||(Te[61]=[Ee("Confirmar")])),_:1},8,["isLoading","disabled"])])])]),_:1},8,["show","on-close"])],64)}}},BE=Fe(Tlt,[["__scopeId","data-v-010b048c"]]),Alt={class:"p-4"},ylt={class:"mb-3 flex justify-between items-center"},Slt={class:"flex items-center gap-2"},Ilt={class:"text-lg font-medium"},Clt={key:0,class:"flex gap-1"},xlt={class:"results-tag"},Nlt={class:"stage-name"},Olt={class:"count-badge"},wlt={class:"filter-sections grid grid-cols-1 md:grid-cols-2 gap-4"},Rlt={class:"space-y-2 border-r md:border-r-slate-200 md:dark:border-r-slate-700 md:pr-4"},$lt={class:"filter-group"},Mlt={class:"text-sm font-medium mb-1 block"},klt={class:"flex flex-wrap gap-1"},Llt=["onClick"],Dlt={class:"filter-group"},Plt={class:"text-sm font-medium mb-1 block"},Blt={class:"flex gap-2"},Flt={class:"filter-group"},Ult={class:"text-sm font-medium mb-1 block"},Glt={class:"relative"},Vlt={value:null},Hlt={value:-1},Wlt=["value"],Klt={class:"filter-group"},zlt={class:"text-sm font-medium mb-1 block"},jlt={class:"flex gap-2"},Ylt={class:"space-y-3"},Xlt={class:"space-y-1"},qlt={class:"flex gap-1"},Zlt={class:"space-y-1"},Qlt={key:0,class:"text-xs text-slate-500 dark:text-slate-400 p-2 text-center"},Jlt={key:1,class:"max-h-48 overflow-y-auto space-y-1 pr-1"},eit={class:"flex-1 min-w-0 mr-2"},tit=["title"],nit=["title"],sit={class:"flex items-center gap-1 flex-shrink-0"},ait={class:"flex justify-end space-x-2 pt-3 mt-3 border-t border-slate-200 dark:border-slate-700"},af="kanban_filter_presets",oit={__name:"KanbanFilter",props:{show:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},filteredResults:{type:Object,default:()=>({total:0,stages:{}})},currentFunnel:{type:Object,default:null},agents:{type:Array,default:()=>[]},size:{type:String,default:"medium"},initialFilters:{type:Object,default:null}},emits:["apply","close"],setup(e,{emit:t}){const n=e,{t:s}=Pe(),a=Pn(),o=t,l=F({priority:[],value:{min:null,max:null},agent_id:null,date:{start:null,end:null}}),i=F({}),r=F(""),d=F(""),u=w=>{if(!w)return"";for(const D in i.value){const H=i.value[D],B=JSON.parse(JSON.stringify(w));if(H.priority=H.priority||[],H.value=H.value||{},H.date=H.date||{},B.priority=B.priority||[],B.value=B.value||{},B.date=B.date||{},JSON.stringify(H)===JSON.stringify(B))return D}return""},m=()=>{const w=localStorage.getItem(af);if(w)try{i.value=JSON.parse(w)}catch(D){console.error("Error loading filter presets:",D),i.value={}}};ot(()=>n.show,w=>{w&&(n.initialFilters?(l.value=JSON.parse(JSON.stringify(n.initialFilters)),l.value.agent_id!==null&&l.value.agent_id!==void 0&&l.value.agent_id!==""?l.value.agent_id=Number(l.value.agent_id):l.value.agent_id=null):l.value={priority:[],value:{min:null,max:null},agent_id:null,date:{start:null,end:null}},d.value=u(l.value))},{immediate:!0}),ot(()=>l.value.agent_id,w=>{console.log("[DEBUG] agent_id alterado para:",w,"tipo:",typeof w),w!=null&&(l.value.agent_id=Number(w),console.log("[DEBUG] agent_id convertido para nmero:",l.value.agent_id,"tipo:",typeof l.value.agent_id))}),pt(()=>{m(),a.getters["agents/getAgents"].length===0&&a.dispatch("agents/get")});const h=C(()=>[{label:"Alta",value:"high",colors:{border:l.value.priority.includes("high")?"border-ruby-500 dark:border-ruby-400":"border-slate-300 dark:border-slate-600",text:l.value.priority.includes("high")?"text-ruby-700 dark:text-ruby-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-ruby-50 dark:bg-ruby-800 border-ruby-500 dark:border-ruby-400"}},{label:"Mdia",value:"medium",colors:{border:l.value.priority.includes("medium")?"border-yellow-500 dark:border-yellow-400":"border-slate-300 dark:border-slate-600",text:l.value.priority.includes("medium")?"text-yellow-700 dark:text-yellow-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-yellow-50 dark:bg-yellow-800 border-yellow-500 dark:border-yellow-400"}},{label:"Baixa",value:"low",colors:{border:l.value.priority.includes("low")?"border-green-500 dark:border-green-400":"border-slate-300 dark:border-slate-600",text:l.value.priority.includes("low")?"text-green-700 dark:text-green-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-green-50 dark:bg-green-800 border-green-500 dark:border-green-400"}},{label:"Urgente",value:"urgent",colors:{border:l.value.priority.includes("urgent")?"border-ruby-500 dark:border-ruby-400":"border-slate-300 dark:border-slate-600",text:l.value.priority.includes("urgent")?"text-ruby-700 dark:text-ruby-300":"text-slate-700 dark:text-slate-300",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",selected:"bg-ruby-50 dark:bg-ruby-800 border-ruby-500 dark:border-ruby-400"}}]);F(!1);const _=C(()=>a.getters["agents/getAgents"]||[]),g=w=>{if(!w)return"";const D=_.value.find(H=>H.id===w);return D?D.name:`ID: ${w}`},T=w=>{var G;if(!w)return"";const D=[];(G=w.priority)!=null&&G.length&&D.push(`Prioridade: ${w.priority.join(", ")}`);const{min:H,max:B}=w.value||{};H!=null&&B!==void 0&&B!==null?D.push(`Valor: ${H}-${B}`):H!=null?D.push(`Valor: >= ${H}`):B!=null&&D.push(`Valor: <= ${B}`),w.agent_id&&D.push(`Agente: ${g(w.agent_id)}`);const{start:k,end:U}=w.date||{};if(k&&U)try{D.push(`Data: ${ts(new Date(k),"dd/MM")} - ${ts(new Date(U),"dd/MM")}`)}catch{}else if(k)try{D.push(`Data: >= ${ts(new Date(k),"dd/MM/yy")}`)}catch{}else if(U)try{D.push(`Data: <= ${ts(new Date(U),"dd/MM/yy")}`)}catch{}return D.join(". ")||"Nenhum filtro ativo"},S=w=>{var H;if(!((H=n.currentFunnel)!=null&&H.stages))return"#64748B";const D=Object.values(n.currentFunnel.stages).find(B=>B.name===w);if(!D){const B=Object.values(n.currentFunnel.stages).find(k=>k.id===w);return(B==null?void 0:B.color)||"#64748B"}return D.color||"#64748B"},b=C(()=>!!(l.value.priority.length>0||l.value.value.min||l.value.value.max||l.value.agent_id||l.value.date.start||l.value.date.end)&&n.filteredResults.total>0),A=()=>{console.log("[DEBUG] Aplicando filtro, agent_id original:",l.value.agent_id,"tipo:",typeof l.value.agent_id);const w=JSON.parse(JSON.stringify(l.value));w.agent_id!==null&&w.agent_id!==void 0&&(w.agent_id=Number(w.agent_id),console.log("[DEBUG] agent_id convertido antes de emitir:",w.agent_id,"tipo:",typeof w.agent_id)),o("apply",w),o("close")},y=()=>{const w={priority:[],value:{min:null,max:null},agent_id:null,date:{start:null,end:null}};l.value=JSON.parse(JSON.stringify(w)),d.value="",o("apply",JSON.parse(JSON.stringify(w)))},x=()=>{const w=r.value.trim();if(!w){alert("Por favor, insira um nome para a predefinio.");return}if(i.value[w]&&!confirm(`J existe uma predefinio com o nome "${w}". Deseja sobrescrev-la?`))return;const D=JSON.parse(JSON.stringify(l.value));D.agent_id!==null&&D.agent_id!==void 0&&(D.agent_id=Number(D.agent_id)),i.value[w]=D,localStorage.setItem(af,JSON.stringify(i.value)),r.value="",d.value=w},$=w=>{i.value[w]?(l.value=JSON.parse(JSON.stringify(i.value[w])),d.value=w):console.warn(`Preset "${w}" not found.`)},N=w=>{if(i.value[w]){if(confirm(`Tem certeza que deseja deletar a predefinio "${w}"?`)){const D=d.value===w;delete i.value[w],localStorage.setItem(af,JSON.stringify(i.value)),D&&(d.value="")}}else console.warn(`Preset "${w}" not found for deletion.`)};return(w,D)=>{const H=z("fluent-icon"),B=z("woot-input");return p(),V(yr,{to:"body"},[e.show?(p(),V(qt,{key:0,show:e.show,size:n.size,"show-close-button":!1,onClose:D[7]||(D[7]=k=>w.$emit("close"))},{default:K(()=>[c("div",Alt,[c("header",ylt,[c("div",Slt,[c("h3",Ilt,E(I(s)("KANBAN.FILTER_ITEMS")),1),b.value&&e.filteredResults.total>0?(p(),f("div",Clt,[c("div",xlt,E(e.filteredResults.total)+" "+E(I(s)("KANBAN.FILTER.RESULTS")),1),(p(!0),f(fe,null,Ae(e.filteredResults.stages,(k,U)=>(p(),f("div",{key:U,class:"results-tag",style:Ct({backgroundColor:S(U)})},[c("span",Nlt,E(U),1),c("span",Olt,E(k),1)],4))),128))])):O("",!0)]),v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:D[0]||(D[0]=k=>w.$emit("close"))},{default:K(()=>[v(H,{icon:"dismiss",size:"16"})]),_:1})]),c("div",wlt,[c("div",Rlt,[c("div",$lt,[c("label",Mlt,E(I(s)("KANBAN.FORM.PRIORITY.LABEL")),1),c("div",klt,[(p(!0),f(fe,null,Ae(h.value,k=>(p(),f("button",{key:k.value,class:re(["border px-3 py-1 text-sm font-medium rounded-lg transition-colors",l.value.priority.includes(k.value)?k.colors.selected:[k.colors.border,k.colors.hover],k.colors.text]),onClick:U=>l.value.priority=l.value.priority.includes(k.value)?l.value.priority.filter(G=>G!==k.value):[...l.value.priority,k.value]},E(k.label),11,Llt))),128))])]),c("div",Dlt,[c("label",Plt,E(I(s)("KANBAN.VALUE.LABEL")),1),c("div",Blt,[v(B,{modelValue:l.value.value.min,"onUpdate:modelValue":D[1]||(D[1]=k=>l.value.value.min=k),type:"number",placeholder:I(s)("KANBAN.VALUE.MIN"),class:"flex-1"},null,8,["modelValue","placeholder"]),v(B,{modelValue:l.value.value.max,"onUpdate:modelValue":D[2]||(D[2]=k=>l.value.value.max=k),type:"number",placeholder:I(s)("KANBAN.VALUE.MAX"),class:"flex-1"},null,8,["modelValue","placeholder"])])]),c("div",Flt,[c("label",Ult,E(I(s)("KANBAN.AGENT.LABEL")),1),c("div",Glt,[pe(c("select",{"onUpdate:modelValue":D[3]||(D[3]=k=>l.value.agent_id=k),class:"w-full rounded-lg border border-slate-300 dark:border-slate-700 p-2"},[c("option",Vlt,E(I(s)("KANBAN.FILTER.AGENT.ALL")),1),c("option",Hlt,E(I(s)("KANBAN.FILTER.AGENT.NONE")||"No atribudo"),1),(p(!0),f(fe,null,Ae(_.value,k=>(p(),f("option",{key:k.id,value:k.id},E(k.name),9,Wlt))),128))],512),[[zt,l.value.agent_id]])])]),c("div",Klt,[c("label",zlt,E(I(s)("KANBAN.FILTER.DATE.LABEL")),1),c("div",jlt,[v(B,{modelValue:l.value.date.start,"onUpdate:modelValue":D[4]||(D[4]=k=>l.value.date.start=k),type:"date",placeholder:I(s)("KANBAN.FILTER.DATE.START"),class:"flex-1"},null,8,["modelValue","placeholder"]),v(B,{modelValue:l.value.date.end,"onUpdate:modelValue":D[5]||(D[5]=k=>l.value.date.end=k),type:"date",placeholder:I(s)("KANBAN.FILTER.DATE.END"),class:"flex-1"},null,8,["modelValue","placeholder"])])])]),c("div",Ylt,[D[11]||(D[11]=c("h4",{class:"text-md font-medium border-b border-slate-200 dark:border-slate-700 pb-1 mb-2"}," Predefinies ",-1)),c("div",Xlt,[D[9]||(D[9]=c("label",{class:"text-sm font-medium block"},"Salvar filtro atual",-1)),c("div",qlt,[v(B,{modelValue:r.value,"onUpdate:modelValue":D[6]||(D[6]=k=>r.value=k),type:"text",placeholder:"Nome da predefinio",class:"flex-1",onKeyup:Hn(x,["enter"])},null,8,["modelValue"]),v(ce,{variant:"solid",color:"blue",size:"sm",disabled:!r.value.trim(),onClick:x},{default:K(()=>[v(H,{icon:"add",size:"16",class:"mr-1"}),D[8]||(D[8]=Ee(" Salvar "))]),_:1},8,["disabled"])])]),c("div",Zlt,[D[10]||(D[10]=c("label",{class:"text-sm font-medium block"},"Predefinies salvas",-1)),Object.keys(i.value).length===0?(p(),f("div",Qlt," Nenhuma predefinio salva. ")):(p(),f("ul",Jlt,[(p(!0),f(fe,null,Ae(i.value,(k,U)=>(p(),f("li",{key:U,class:re(["flex justify-between items-center p-1.5 rounded-md flex-wrap",{"bg-woot-50 dark:bg-woot-800/50":d.value===U,"hover:bg-slate-100 dark:hover:bg-slate-700/50":d.value!==U}])},[c("div",eit,[c("span",{class:"text-sm font-medium block truncate",title:U},E(U),9,tit),c("span",{class:"text-xs text-slate-500 dark:text-slate-400 block truncate",title:T(k)},E(T(k)),9,nit)]),c("div",sit,[v(ce,{variant:"ghost",color:"slate",size:"xs",title:"Aplicar",onClick:G=>$(U)},{default:K(()=>[v(H,{icon:"play-circle",size:"14"})]),_:2},1032,["onClick"]),v(ce,{variant:"ghost",color:"ruby",size:"xs",title:"Deletar",onClick:G=>N(U)},{default:K(()=>[v(H,{icon:"delete",size:"14"})]),_:2},1032,["onClick"])])],2))),128))]))])])]),c("footer",ait,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:y},{default:K(()=>[Ee(E(I(s)("KANBAN.FORM.CLEAR")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:A},{default:K(()=>[Ee(E(I(s)("KANBAN.FORM.APPLY")),1)]),_:1})])])]),_:1},8,["show","size"])):O("",!0)])}}},lv=Fe(oit,[["__scopeId","data-v-d82bcbde"]]),lit={class:"flex items-center flex-grow gap-2"},iit={class:"min-w-0 truncate"},rit={__name:"ColorPicker",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t,s=F(!1),a=()=>{s.value=!s.value},o=()=>{s.value&&a()},l=r=>{n("update:modelValue",r.hex)},i=F(null);return(r,d)=>(p(),f("div",{ref_key:"pickerRef",ref:i,class:"relative w-fit"},[v(I(Li),{onTrigger:o},{default:K(()=>[v(ce,{color:"slate",icon:"i-lucide-pipette","trailing-icon":"",class:"!px-3 !py-3 [&>svg]:w-4 [&>svg]:h-4",onClick:a},{default:K(()=>[c("div",lit,[c("span",{class:"rounded-md size-4",style:Ct({backgroundColor:e.modelValue})},null,4),c("span",iit,E(e.modelValue),1)])]),_:1}),s.value?(p(),V(I(ZT.Chrome),{key:0,"disable-alpha":"","model-value":e.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":l},null,8,["model-value"])):O("",!0)]),_:1})],512))}},cit=Fe(rit,[["__scopeId","data-v-b87ee07d"]]),dit={__name:"StageColorPicker",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t;return(s,a)=>(p(),f("div",{class:"stage-color-picker",onClick:a[1]||(a[1]=ze(()=>{},["stop","prevent"]))},[v(cit,{"model-value":e.modelValue,"onUpdate:modelValue":a[0]||(a[0]=o=>n("update:modelValue",o)),class:"!w-full"},null,8,["model-value"])]))}},A2=Fe(dit,[["__scopeId","data-v-1d84882c"]]),uit={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-[4px]"},pit={class:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-[110rem] p-8 overflow-y-auto max-h-[90vh] scrollbar-hidden"},mit={class:"flex items-center gap-4 mb-6"},hit={class:"text-2xl font-bold text-slate-900 dark:text-slate-100"},fit={key:0,class:"text-slate-500 dark:text-slate-400 text-sm mt-1"},git={class:"mb-6 text-slate-700 dark:text-slate-200 text-[15px] flex flex-col sm:flex-row flex-wrap gap-y-2 gap-x-4 items-start sm:items-center leading-tight"},_it={class:"font-bold text-slate-900 dark:text-slate-100"},vit={class:"font-bold text-green-700 dark:text-green-400"},bit={class:"font-semibold text-slate-800 dark:text-slate-200"},Eit={class:"font-semibold text-slate-800 dark:text-slate-200"},Tit={class:"font-semibold text-slate-800 dark:text-slate-200"},Ait={class:"inline-flex items-center gap-1"},yit={class:"font-semibold"},Sit={class:"inline-flex items-center gap-1"},Iit={class:"font-semibold"},Cit={class:"inline-flex items-center gap-1"},xit={class:"font-semibold"},Nit={class:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 min-w-[600px]"},Oit={class:"metric-card-glass metric-gradient-slate card-block"},wit={class:"metric-value-glass"},Rit={class:"metric-card-glass metric-gradient-success card-block"},$it={class:"metric-value-glass"},Mit={class:"metric-card-glass metric-gradient-danger card-block"},kit={class:"metric-value-glass"},Lit={class:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2"},Dit={class:"card-block card-header-agentes"},Pit={class:"flex flex-wrap gap-2"},Bit={class:"truncate max-w-[80px]"},Fit={class:"opacity-60"},Uit={key:0,class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 text-xs font-semibold text-slate-500 dark:text-slate-400 bg-transparent"},Git={class:"card-block card-header-prioridades"},Vit={class:"flex gap-2 flex-wrap"},Hit={class:"opacity-60"},Wit={class:"grid grid-cols-1 md:grid-cols-2 gap-1 mb-2"},Kit={class:"card-block card-header-status"},zit={class:"flex gap-2 flex-wrap"},jit={class:"opacity-60"},Yit={class:"card-block card-header-sem-agente"},Xit={class:"flex gap-2 flex-wrap"},qit={class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 bg-transparent text-xs text-slate-600 dark:text-slate-300"},Zit={class:"font-semibold"},Qit={class:"font-semibold"},Jit={class:"grid grid-cols-1 md:grid-cols-2 gap-1 mb-4"},ert={class:"card-block card-header-valor-prioridade"},trt={class:"flex gap-1 flex-wrap"},nrt={class:"capitalize"},srt={class:"font-semibold"},art={class:"opacity-60"},ort={class:"card-block card-header-valor-status"},lrt={class:"flex gap-2 flex-wrap"},irt={class:"capitalize"},rrt={class:"opacity-60"},crt={class:"card-block card-header-valor-agente"},drt={class:"flex gap-2 flex-wrap"},urt={class:"truncate max-w-[60px]"},prt={class:"font-semibold"},mrt={class:"card-block card-header-maior-menor-valor"},hrt={class:"flex flex-col md:flex-row gap-4"},frt={key:0,class:"flex-1 flex items-center gap-2 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 bg-transparent text-xs text-slate-700 dark:text-slate-200"},grt={class:"font-semibold"},_rt={key:0},vrt={key:1},brt={key:1,class:"flex-1 flex items-center gap-2 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 bg-transparent text-xs text-slate-700 dark:text-slate-200"},Ert={class:"font-semibold"},Trt={key:0},Art={key:1},yrt={class:"card-block card-header-agendamentos col-span-1 md:col-span-2"},Srt={key:0,class:"flex flex-col gap-2 mt-2"},Irt={class:"flex flex-wrap gap-3 items-center"},Crt={key:0,class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 border border-green-300 text-green-700 dark:bg-green-900/40 dark:border-green-700 dark:text-green-300"},xrt={class:"ml-1"},Nrt={class:"ml-2 text-slate-500 dark:text-slate-400 font-normal"},Ort={key:1,class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 border border-blue-300 text-blue-700 dark:bg-blue-900/40 dark:border-blue-700 dark:text-blue-300"},wrt={class:"ml-1"},Rrt={class:"ml-2 text-slate-500 dark:text-slate-400 font-normal"},$rt={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2"},Mrt={class:"flex gap-1 flex-wrap"},krt={class:"ml-1 font-semibold"},Lrt={class:"flex gap-1 flex-wrap"},Drt={class:"ml-1 font-semibold"},Prt={key:1,class:"text-xs text-slate-400 italic"},Brt={__name:"KanbanStageReport",props:{title:String,color:String,items:Array,description:String,onClose:Function},setup(e){const t=e,n=C(()=>t.items.map(M=>{var R;return parseFloat((R=M.item_details)==null?void 0:R.value)||0})),s=C(()=>t.items.filter(M=>{var R,P,W,Q,Z;return((R=M.item_details)==null?void 0:R.value)!==null&&((P=M.item_details)==null?void 0:P.value)!==void 0&&((W=M.item_details)==null?void 0:W.value)!==""&&((Q=M.item_details)==null?void 0:Q.value)!=="0"&&parseFloat((Z=M.item_details)==null?void 0:Z.value)!==0}).map(M=>parseFloat(M.item_details.value)));C(()=>t.items.filter(M=>{var R,P,W,Q;return!((R=M.item_details)!=null&&R.value)||((P=M.item_details)==null?void 0:P.value)===""||((W=M.item_details)==null?void 0:W.value)==="0"||parseFloat((Q=M.item_details)==null?void 0:Q.value)===0}));const a=C(()=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.value.reduce((M,R)=>M+R,0))),o=C(()=>n.value.length?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.value.reduce((M,R)=>M+R,0)/n.value.length):""),l=C(()=>n.value.length?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Math.max(...n.value)):""),i=C(()=>{if(n.value.length===0||s.value.length===0)return"";const M=Math.min(...s.value);return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(M)}),r=C(()=>t.items.reduce((M,R)=>{var P,W;return parseFloat((P=R.item_details)==null?void 0:P.value)>parseFloat(((W=M==null?void 0:M.item_details)==null?void 0:W.value)||0)?R:M},null)),d=C(()=>s.value.length>0?t.items.reduce((M,R)=>{var Q,Z,j,X,q;const P=parseFloat((Q=R.item_details)==null?void 0:Q.value),W=parseFloat(((Z=M==null?void 0:M.item_details)==null?void 0:Z.value)||1/0);return(j=R.item_details)!=null&&j.value&&((X=R.item_details)==null?void 0:X.value)!==""&&((q=R.item_details)==null?void 0:q.value)!=="0"&&P!==0&&P<W?R:M},null):null),u=C(()=>{var M;return d.value&&parseFloat((M=d.value.item_details)==null?void 0:M.value)||0}),m=C(()=>[...t.items].sort((M,R)=>new Date(M.created_at)-new Date(R.created_at)));C(()=>{var M;return(M=m.value[0])!=null&&M.created_at?new Date(m.value[0].created_at):null}),C(()=>{var M;return(M=m.value[m.value.length-1])!=null&&M.created_at?new Date(m.value[m.value.length-1].created_at):null});const h=C(()=>t.items.filter(M=>!M.agent)),_=C(()=>h.value.reduce((M,R)=>{var P;return M+(parseFloat((P=R.item_details)==null?void 0:P.value)||0)},0)),g=C(()=>{const M={};return t.items.forEach(R=>{var W,Q;const P=((W=R.item_details)==null?void 0:W.priority)||"none";M[P]=(M[P]||0)+(parseFloat((Q=R.item_details)==null?void 0:Q.value)||0)}),M}),T=C(()=>{const M={};return t.items.forEach(R=>{var W,Q;const P=((W=R.item_details)==null?void 0:W.status)||"open";M[P]=(M[P]||0)+(parseFloat((Q=R.item_details)==null?void 0:Q.value)||0)}),M}),S=C(()=>{const M={};return t.items.forEach(R=>{var W,Q;const P=(W=R.item_details)==null?void 0:W.agent;P&&P.id&&(M[P.id]||(M[P.id]={...P,total:0,count:0}),M[P.id].total+=parseFloat((Q=R.item_details)==null?void 0:Q.value)||0,M[P.id].count++)}),Object.values(M).forEach(R=>{R.avg=R.count?R.total/R.count:0}),M}),b=C(()=>{const M=t.items.length,R={};return t.items.forEach(P=>{var Q;const W=((Q=P.item_details)==null?void 0:Q.priority)||"none";R[W]=(R[W]||0)+1}),Object.keys(R).forEach(P=>{R[P]=(R[P]/M*100).toFixed(1)}),R}),A=C(()=>{const M=t.items.length,R={};return t.items.forEach(P=>{var Q;const W=((Q=P.item_details)==null?void 0:Q.status)||"open";R[W]=(R[W]||0)+1}),Object.keys(R).forEach(P=>{R[P]=(R[P]/M*100).toFixed(1)}),R}),y=C(()=>{const M=new Map;return t.items.forEach(R=>{var W;const P=(W=R.item_details)==null?void 0:W.agent;P&&P.id&&(M.has(P.id)?M.get(P.id).count++:M.set(P.id,{...P,count:1}))}),M}),x=C(()=>Array.from(y.value.values()).sort((M,R)=>R.count-M.count).slice(0,5)),$=C(()=>Math.max(0,y.value.size-5)),N=C(()=>{const M=[{key:"urgent",label:"Urgente",class:"bg-red-600",count:0},{key:"high",label:"Alta",class:"bg-ruby-500",count:0},{key:"medium",label:"Mdia",class:"bg-yellow-500",count:0},{key:"low",label:"Baixa",class:"bg-green-500",count:0},{key:"none",label:"Nenhuma",class:"bg-slate-300",count:0}];return t.items.forEach(R=>{var Q;const P=((Q=R.item_details)==null?void 0:Q.priority)||"none",W=M.find(Z=>Z.key===P);W&&W.count++}),M}),w=C(()=>{const M=[{key:"open",label:"Aberto",class:"bg-slate-400",count:0},{key:"won",label:"Ganho",class:"bg-green-600",count:0},{key:"lost",label:"Perdido",class:"bg-red-600",count:0}];return t.items.forEach(R=>{var Q;const P=((Q=R.item_details)==null?void 0:Q.status)||"open",W=M.find(Z=>Z.key===P);W&&W.count++}),M}),D=C(()=>{const M={};return t.items.forEach(R=>{var W;const P=(W=R.item_details)==null?void 0:W.deadline_at;if(P){const Q=new Date(P).toLocaleDateString("pt-BR");M[Q]=(M[Q]||0)+1}}),M}),H=C(()=>Object.entries(D.value).map(([M,R])=>({day:M,count:R})).sort((M,R)=>R.count-M.count)),B=C(()=>H.value.length?H.value[0].day:null),k=C(()=>{const M=H.value.filter(R=>R.count>0);return M.length?M[M.length-1].day:null}),U=C(()=>H.value.slice(0,3)),G=C(()=>H.value.filter(R=>R.count>0).slice(-3));function L(M){if(!M)return"";const[R,P,W]=M.split("/").map(Number),Q=new Date(W,P-1,R),Z=new Date;Z.setHours(0,0,0,0);const j=Q-Z,X=Math.round(j/(1e3*60*60*24));return X===0?"hoje":X===1?"amanh":X===-1?"ontem":X>1?`em ${X} dias`:X<-1?`h ${Math.abs(X)} dias`:""}return(M,R)=>{var P,W,Q;return p(),f("div",uit,[c("div",pit,[c("button",{onClick:R[0]||(R[0]=(...Z)=>e.onClose&&e.onClose(...Z)),class:"absolute top-4 right-4 text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 text-2xl font-bold focus:outline-none"},""),c("div",mit,[c("div",{style:Ct({backgroundColor:e.color}),class:"w-8 h-8 rounded-lg"},null,4),c("div",null,[c("h2",hit,E(e.title),1),e.description?(p(),f("p",fit,E(e.description),1)):O("",!0)])]),c("div",git,[c("span",null,[c("span",_it,E(e.items.length),1),R[1]||(R[1]=Ee(" cards"))]),R[15]||(R[15]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",null,[R[2]||(R[2]=Ee("Valor total: ")),c("span",vit,E(a.value),1)]),R[16]||(R[16]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",null,[R[3]||(R[3]=Ee("Valor mdio: ")),c("span",bit,E(o.value),1)]),R[17]||(R[17]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",null,[R[4]||(R[4]=Ee("Mx: ")),c("span",Eit,E(l.value),1)]),R[18]||(R[18]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",null,[R[5]||(R[5]=Ee("Mn: ")),c("span",Tit,E(i.value),1)]),R[19]||(R[19]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",Ait,[R[6]||(R[6]=c("span",{class:"w-2 h-2 rounded-full bg-slate-400 inline-block"},null,-1)),R[7]||(R[7]=c("span",{class:"text-xs"},"Aberto:",-1)),R[8]||(R[8]=Ee()),c("span",yit,E(w.value[0].count),1)]),R[20]||(R[20]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",Sit,[R[9]||(R[9]=c("span",{class:"w-2 h-2 rounded-full bg-green-600 inline-block"},null,-1)),R[10]||(R[10]=c("span",{class:"text-xs"},"Ganho:",-1)),R[11]||(R[11]=Ee()),c("span",Iit,E(w.value[1].count),1)]),R[21]||(R[21]=c("span",{class:"mx-2 hidden sm:inline"},"",-1)),c("span",Cit,[R[12]||(R[12]=c("span",{class:"w-2 h-2 rounded-full bg-red-600 inline-block"},null,-1)),R[13]||(R[13]=c("span",{class:"text-xs"},"Perdido:",-1)),R[14]||(R[14]=Ee()),c("span",xit,E(w.value[2].count),1)])]),c("div",Nit,[c("div",Oit,[R[22]||(R[22]=c("div",{class:"metric-label-glass"},"Abertos",-1)),c("div",wit,E(w.value[0].count),1)]),c("div",Rit,[R[23]||(R[23]=c("div",{class:"metric-label-glass"},"Ganho",-1)),c("div",$it,E(w.value[1].count),1)]),c("div",Mit,[R[24]||(R[24]=c("div",{class:"metric-label-glass"},"Perdido",-1)),c("div",kit,E(w.value[2].count),1)])]),c("div",Lit,[c("div",Dit,[R[25]||(R[25]=c("div",{class:"card-block-header card-block-header-agentes"},"Principais agentes",-1)),c("div",Pit,[(p(!0),f(fe,null,Ae(x.value,Z=>(p(),f("div",{key:Z.id,class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 bg-transparent text-xs text-slate-600 dark:text-slate-300"},[v(Ft,{name:Z.name,src:Z.avatar_url,size:24},null,8,["name","src"]),c("span",Bit,E(Z.name),1),c("span",Fit,"("+E(Z.count)+")",1)]))),128)),$.value>0?(p(),f("div",Uit," +"+E($.value)+" outros ",1)):O("",!0)])]),c("div",Git,[R[26]||(R[26]=c("div",{class:"card-block-header card-block-header-prioridades"},"Prioridades",-1)),c("div",Vit,[(p(!0),f(fe,null,Ae(N.value,Z=>(p(),f("div",{key:Z.key,class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 bg-transparent text-xs text-slate-600 dark:text-slate-300"},[c("span",{class:re(Z.class+" w-2 h-2 rounded-full inline-block")},null,2),c("span",null,E(Z.label),1),c("span",Hit,"("+E(Z.count)+")",1)]))),128))])])]),c("div",Wit,[c("div",Kit,[R[27]||(R[27]=c("div",{class:"card-block-header card-block-header-status"},"Status",-1)),c("div",zit,[(p(!0),f(fe,null,Ae(w.value,Z=>(p(),f("div",{key:Z.key,class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 bg-transparent text-xs text-slate-600 dark:text-slate-300"},[c("span",{class:re(Z.class+" w-2 h-2 rounded-full inline-block")},null,2),c("span",null,E(Z.label),1),c("span",jit,"("+E(Z.count)+")",1)]))),128))])]),c("div",Yit,[R[30]||(R[30]=c("div",{class:"card-block-header card-block-header-sem-agente"},"Cards sem agente",-1)),c("div",Xit,[c("div",qit,[R[28]||(R[28]=c("span",null,"Qtd:",-1)),c("span",Zit,E(h.value.length),1),R[29]||(R[29]=c("span",null,"| Valor:",-1)),c("span",Qit,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_.value)),1)])])])]),c("div",Jit,[c("div",ert,[R[31]||(R[31]=c("div",{class:"card-block-header card-block-header-valor-prioridade"},"Valor por prioridade",-1)),c("div",trt,[(p(!0),f(fe,null,Ae(g.value,(Z,j)=>(p(),f("div",{key:j,class:re("flex items-center gap-1 rounded-full px-2 py-1 text-xs font-semibold border "+(j==="urgent"?"bg-red-100 border-red-300 text-red-700 dark:bg-red-900/40 dark:border-red-700 dark:text-red-300":j==="high"?"bg-purple-100 border-purple-300 text-purple-700 dark:bg-purple-900/40 dark:border-purple-700 dark:text-purple-300":j==="medium"?"bg-yellow-100 border-yellow-300 text-yellow-700 dark:bg-yellow-900/40 dark:border-yellow-700 dark:text-yellow-300":j==="low"?"bg-green-100 border-green-300 text-green-700 dark:bg-green-900/40 dark:border-green-700 dark:text-green-300":"bg-slate-100 border-slate-300 text-slate-700 dark:bg-slate-800/40 dark:border-slate-700 dark:text-slate-300"))},[c("span",nrt,E(j),1),c("span",srt,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Z)),1),c("span",art,"("+E(b.value[j])+"%)",1)],2))),128))])]),c("div",ort,[R[32]||(R[32]=c("div",{class:"card-block-header card-block-header-valor-status"},"Valor por status",-1)),c("div",lrt,[(p(!0),f(fe,null,Ae(T.value,(Z,j)=>(p(),f("div",{key:j,class:re("flex items-center gap-1 rounded-full px-2 py-1 bg-transparent text-xs font-semibold "+(j==="open"?"border-slate-300 text-slate-700 bg-slate-100 dark:bg-slate-800/40 dark:text-slate-200":j==="won"?"border-green-300 text-green-700 bg-green-100 dark:bg-green-900/40 dark:text-green-300":"border-red-300 text-red-700 bg-red-100 dark:bg-red-900/40 dark:text-red-300")+" border")},[c("span",irt,E(j),1),c("span",null,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Z)),1),c("span",rrt,"("+E(A.value[j])+"%)",1)],2))),128))])]),c("div",crt,[R[33]||(R[33]=c("div",{class:"card-block-header card-block-header-valor-agente"},"Valor mdio por agente",-1)),c("div",drt,[(p(!0),f(fe,null,Ae(Object.values(S.value),Z=>(p(),f("div",{key:Z.id,class:"flex items-center gap-1 border border-slate-200 dark:border-slate-700 rounded-full px-2 py-1 bg-transparent text-xs text-slate-600 dark:text-slate-300"},[v(Ft,{name:Z.name,src:Z.avatar_url,size:18},null,8,["name","src"]),c("span",urt,E(Z.name),1),c("span",prt,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Z.avg)),1)]))),128))])]),c("div",mrt,[R[38]||(R[38]=c("div",{class:"card-block-header card-block-header-maior-menor-valor"},"Card de maior e menor valor",-1)),c("div",hrt,[r.value?(p(),f("div",frt,[R[34]||(R[34]=c("span",{class:"font-semibold"},"Maior:",-1)),c("span",grt,E((P=r.value.item_details)==null?void 0:P.title),1),R[35]||(R[35]=c("span",null,"|",-1)),c("span",null,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat((W=r.value.item_details)==null?void 0:W.value)||0)),1),r.value.agent?(p(),f("span",_rt,"|")):O("",!0),r.value.agent?(p(),f("span",vrt,[v(Ft,{name:r.value.agent.name,src:r.value.agent.avatar_url,size:18},null,8,["name","src"]),Ee(" "+E(r.value.agent.name),1)])):O("",!0)])):O("",!0),d.value?(p(),f("div",brt,[R[36]||(R[36]=c("span",{class:"font-semibold"},"Menor:",-1)),c("span",Ert,E((Q=d.value.item_details)==null?void 0:Q.title),1),R[37]||(R[37]=c("span",null,"|",-1)),c("span",null,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.value)),1),d.value.agent?(p(),f("span",Trt,"|")):O("",!0),d.value.agent?(p(),f("span",Art,[v(Ft,{name:d.value.agent.name,src:d.value.agent.avatar_url,size:18},null,8,["name","src"]),Ee(" "+E(d.value.agent.name),1)])):O("",!0)])):O("",!0)])]),c("div",yrt,[R[43]||(R[43]=c("div",{class:"card-block-header card-block-header-agendamentos flex items-center gap-2"},[c("svg",{class:"w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[c("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),c("path",{d:"M16 2v4M8 2v4M3 10h18"})]),Ee(" Agendamentos ")],-1)),Object.keys(D.value).length?(p(),f("div",Srt,[c("div",Irt,[R[39]||(R[39]=c("span",{class:"flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400"}," Dia com mais agendamentos: ",-1)),B.value?(p(),f("span",Crt,[Ee(E(B.value)+" ",1),c("span",xrt,"("+E(D.value[B.value])+")",1),c("span",Nrt,E(L(B.value)),1)])):O("",!0),R[40]||(R[40]=c("span",{class:"flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400"}," Dia com menos agendamentos: ",-1)),k.value?(p(),f("span",Ort,[Ee(E(k.value)+" ",1),c("span",wrt,"("+E(D.value[k.value])+")",1),c("span",Rrt,E(L(k.value)),1)])):O("",!0)]),c("div",$rt,[c("div",null,[R[41]||(R[41]=c("div",{class:"flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 mb-1"},[c("svg",{class:"w-4 h-4 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.967a1 1 0 00.95.69h4.18c.969 0 1.371 1.24.588 1.81l-3.388 2.46a1 1 0 00-.364 1.118l1.287 3.966c.3.922-.755 1.688-1.54 1.118l-3.388-2.46a1 1 0 00-1.175 0l-3.388 2.46c-.784.57-1.838-.196-1.54-1.118l1.287-3.966a1 1 0 00-.364-1.118l-3.388-2.46c-.783-.57-.38-1.81.588-1.81h4.18a1 1 0 00.95-.69l1.286-3.967z"})]),Ee(" Top 3 dias mais cheios: ")],-1)),c("div",Mrt,[(p(!0),f(fe,null,Ae(U.value,Z=>(p(),f("span",{key:Z.day,class:"badge-glass bg-green-50 border-green-200 text-green-700 dark:bg-green-900/40 dark:border-green-700 dark:text-green-300"},[Ee(E(Z.day)+" ",1),c("span",krt,"("+E(Z.count)+")",1)]))),128))])]),c("div",null,[R[42]||(R[42]=c("div",{class:"flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 mb-1"},[c("svg",{class:"w-4 h-4 text-orange-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 16 16"},[c("circle",{cx:"8",cy:"8",r:"6"})]),Ee(" Top 3 dias mais vazios: ")],-1)),c("div",Lrt,[(p(!0),f(fe,null,Ae(G.value,Z=>(p(),f("span",{key:Z.day,class:"badge-glass bg-orange-50 border-orange-200 text-orange-700 dark:bg-orange-900/40 dark:border-orange-700 dark:text-orange-300"},[Ee(E(Z.day)+" ",1),c("span",Drt,"("+E(Z.count)+")",1)]))),128))])])])])):(p(),f("div",Prt,"Nenhum agendamento encontrado."))])])])])}}},Frt=Fe(Brt,[["__scopeId","data-v-8f2a6384"]]),Urt={class:"flex items-center justify-between"},Grt={class:"flex items-center gap-2"},Vrt=["title"],Hrt={class:"flex -space-x-2 ml-2"},Wrt={key:0,class:"inline-flex items-center justify-center w-6 h-6 text-xs font-semibold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-full",style:{"z-index":"1","margin-left":"-0.5rem"}},Krt={class:"flex items-center gap-2"},zrt={key:0,class:"absolute left-1/2 -translate-x-1/2 mt-2 px-3 py-1 rounded bg-slate-900 text-white text-xs font-medium shadow-lg whitespace-nowrap z-50",style:{top:"100%","min-width":"max-content","pointer-events":"none"}},jrt={class:"relative"},Yrt={class:"px-4 py-2"},Xrt={class:"px-4 py-2"},qrt={class:"px-4 py-2"},Zrt={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},Qrt={class:"px-4 py-2"},Jrt={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},ect={class:"px-4 py-2"},tct={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},nct={class:"px-4 py-2"},sct={class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200"},act={class:"px-4 py-2"},oct={class:"px-4 py-2"},lct={class:"px-4 py-2"},ict={class:"px-4 py-2"},rct={key:0,class:"priority-columns-wrapper"},cct={class:"priority-header"},dct={class:"priority-label"},uct={class:"priority-count"},pct={class:"priority-items priority-items-scroll"},mct={key:1,class:"px-4"},hct={class:"py-3 space-y-3"},fct={key:0,class:"flex justify-center py-3"},gct={key:1,class:"flex items-center justify-center h-24 text-sm text-slate-500 dark:text-slate-400"},_ct={class:"p-6"},vct={class:"text-lg font-medium mb-4"},bct={class:"space-y-4"},Ect={class:"block text-sm font-medium mb-1"},Tct=["placeholder"],Act={class:"block text-sm font-medium mb-1"},yct={class:"block text-sm font-medium mb-1"},Sct=["placeholder"],Ict={class:"flex justify-end gap-2"},Cct={class:"p-6"},xct={class:"text-lg font-medium mb-4"},Nct={class:"space-y-4"},Oct={class:"block text-sm font-medium mb-2"},wct=["value"],Rct={class:"block text-sm font-medium mb-2"},$ct={class:"flex gap-4"},Mct={class:"flex items-center gap-2"},kct={class:"text-sm"},Lct={class:"flex items-center gap-2"},Dct={class:"text-sm"},Pct={class:"flex justify-end gap-2"},Bct={__name:"KanbanColumn",props:{id:{type:String,required:!0},title:{type:String,required:!0},color:{type:String,default:"orange"},totalColumns:{type:Number,default:0},description:{type:String,default:""},isExpanded:{type:Boolean,default:!1}},emits:["add","edit","delete","drop","itemClick","itemsUpdated","itemDragstart","itemDragend","expand","closeExpanded"],setup(e,{emit:t}){const n=ge=>{const ae=`kanban_column_${ge}_applied_filters`,ve=localStorage.getItem(ae);if(console.log("[DEBUG] getInitialColumnFilters - columnId:",ge,"tem filtros armazenados?",!!ve),ve)try{const Y=JSON.parse(ve);return console.log("[DEBUG] Filtros carregados do localStorage:",Y),Y&&Y.agent_id!==null&&Y.agent_id!==void 0&&(Y.agent_id=Number(Y.agent_id),console.log("[DEBUG] agent_id convertido para nmero:",Y.agent_id,"tipo:",typeof Y.agent_id)),typeof Y=="object"&&Y!==null?Y:(console.warn(`Invalid stored filter format for column ${ge}. Clearing.`),localStorage.removeItem(ae),null)}catch(Y){return console.error(`Error parsing stored filters for column ${ge}:`,Y),localStorage.removeItem(ae),null}return null},s=e,a=t,{t:o}=Pe(),l=Pn(),{isStacklab:i}=Js(),r=C(()=>l.getters["funnel/getSelectedFunnel"]),d=C(()=>r.value?l.getters["funnel/getStageStats"](r.value.id)||{}:{}),u=C(()=>d.value[s.id]||{}),m=C(()=>l.getters["kanban/getKanbanItems"].filter(ae=>ae.funnel_stage===s.id));C(()=>l.getters["kanban/isLoading"]),C(()=>l.getters["kanban/getPaginationInfo"]);const h=C(()=>{const ge=u.value.count||0;return m.value.length<ge}),_=C(()=>l.getters["kanban/isLoadingMore"]),g=F(!1),T=F(n(s.id)),S=F(!1),b=F({showWon:!0,showLost:!0,showAll:!0,hideColumn:!1,showTotal:!0}),A=F(!1),y=F({name:"",color:"",description:""}),x=F(!1),$=F({type:"created_at",direction:"desc"}),N=F(!1),w=F(null),D=[{id:"created_at",label:"Data de Criao"},{id:"title",label:"Ttulo"},{id:"priority",label:"Prioridade"},{id:"value",label:"Valor"}],H=C(()=>`kanban_column_${s.id}_applied_filters`),B=F(!1),k=F({x:0,y:0}),U=F(!1),G=C(()=>{const ge=[],ae=new Set;for(const ve of P.value){let Y=[];ve.assigned_agents&&ve.assigned_agents.length>0?Y=ve.assigned_agents:ve.agent&&(Y=[ve.agent]);for(const oe of Y)if(oe&&oe.id&&!ae.has(oe.id)&&(ge.push({id:oe.id,name:oe.name,avatar_url:oe.avatar_url||oe.thumbnail||""}),ae.add(oe.id),ge.length===2))break;if(ge.length===2)break}return ge}),L=C(()=>{const ge=new Set;for(const ae of P.value){let ve=[];ae.assigned_agents&&ae.assigned_agents.length>0?ve=ae.assigned_agents:ae.agent&&(ve=[ae.agent]);for(const Y of ve)Y&&Y.id&&ge.add(Y.id)}return Math.max(0,ge.size-2)});C(()=>s.title||""),pt(()=>{const ge=localStorage.getItem(`kanban_column_${s.id}_settings`);ge&&(b.value=JSON.parse(ge));const ae=localStorage.getItem(`kanban_column_${s.id}_sort`);ae&&($.value=JSON.parse(ae)),document.addEventListener("click",Je),document.addEventListener("click",ht),r.value&&l.dispatch("funnel/fetchStageStats",r.value.id)});const M=()=>{localStorage.setItem(`kanban_column_${s.id}_settings`,JSON.stringify(b.value))},R=()=>{localStorage.setItem(`kanban_column_${s.id}_sort`,JSON.stringify($.value))},P=C(()=>{if(b.value.hideColumn)return[];T.value&&(console.log("[DEBUG] filteredItems - usando filtros:",JSON.stringify(T.value)),T.value.agent_id&&console.log("[DEBUG] filteredItems - agent_id:",T.value.agent_id,"tipo:",typeof T.value.agent_id));let ge=[...m.value];return T.value&&(ge=ge.filter(ae=>{var ve,Y;if(T.value.priority&&T.value.priority.length>0){const oe=((ve=ae.item_details)==null?void 0:ve.priority)||"none";if(!T.value.priority.includes(oe))return!1}if(T.value.value&&(T.value.value.min!==void 0||T.value.value.max!==void 0)){const oe=parseFloat((Y=ae.item_details)==null?void 0:Y.value)||0,te=T.value.value.min,le=T.value.value.max;if(te!=null&&oe<te||le!=null&&oe>le)return!1}if(T.value.agent_id){console.log("[DEBUG] Filtrando por agente - columnFilter agent_id:",T.value.agent_id,"tipo:",typeof T.value.agent_id);const oe=ae.assigned_agent_id||ae.assignee_id||ae.item_details&&ae.item_details.agent_id||ae.meta&&ae.meta.agent_id||null;if(console.log("[DEBUG] Item completo:",ae),console.log("[DEBUG] Item agent_id encontrado:",oe,"tipo:",typeof oe),T.value.agent_id===-1)return oe!==null?(console.log('[DEBUG] Item rejeitado - tem agente atribudo, mas filtro  para "No atribudo"'),!1):(console.log("[DEBUG] Item aceito - sem agente atribudo"),!0);if(oe!==T.value.agent_id)return console.log("[DEBUG] Item rejeitado - no corresponde ao agente filtrado"),!1;console.log("[DEBUG] Item aceito - corresponde ao agente filtrado")}if(T.value.date&&(T.value.date.start||T.value.date.end)){const oe=new Date(ae.created_at);if(isNaN(oe.getTime()))return!1;if(T.value.date.start){const te=new Date(T.value.date.start);if(te.setHours(0,0,0,0),oe<te)return!1}if(T.value.date.end){const te=new Date(T.value.date.end);if(te.setHours(23,59,59,999),oe>te)return!1}}return!0})),ge=ge.filter(ae=>{var Y;const ve=(Y=ae.item_details)==null?void 0:Y.status;return ve!=="won"&&ve!=="lost"?!0:!(ve==="won"&&!b.value.showWon||ve==="lost"&&!b.value.showLost)}),ge.sort((ae,ve)=>{var ye,me,Ie,Oe,we,Ye;const Y=$.value.direction==="asc"?1:-1,oe=$.value.type;let te,le;switch(oe){case"title":return te=((ye=ae.item_details)==null?void 0:ye.title)||"",le=((me=ve.item_details)==null?void 0:me.title)||"",Y*te.localeCompare(le);case"priority":{const He={urgent:4,high:3,medium:2,low:1,none:0};return te=He[((Ie=ae.item_details)==null?void 0:Ie.priority)||"none"],le=He[((Oe=ve.item_details)==null?void 0:Oe.priority)||"none"],Y*(te-le)}case"value":return te=parseFloat((we=ae.item_details)==null?void 0:we.value)||0,le=parseFloat((Ye=ve.item_details)==null?void 0:Ye.value)||0,Y*(te-le);case"created_at":default:return te=new Date(ae.created_at),le=new Date(ve.created_at),isNaN(te.getTime())?Y:isNaN(le.getTime())?-Y:Y*(te-le)}})}),W=C(()=>P.value),Q=C(()=>{if(!T.value)return{total:0,stages:{}};const ge={};return ge[s.title]=P.value.length,{total:P.value.length,stages:ge}}),Z=C(()=>typeof u.value.total_value=="number"?u.value.total_value:P.value.reduce((ge,ae)=>{var Y;const ve=parseFloat((Y=ae.item_details)==null?void 0:Y.value)||0;return ge+ve},0)),j=C(()=>Z.value?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Z.value):""),X=C(()=>{const ge=Z.value;if(!ge)return"";const ae=Math.abs(ge);let ve="";return ae>=1e9?ve=(ge/1e9).toFixed(1).replace(/\.0$/,"")+"B":ae>=1e6?ve=(ge/1e6).toFixed(1).replace(/\.0$/,"")+"M":ae>=1e3?ve=(ge/1e3).toFixed(1).replace(/\.0$/,"")+"K":ve=j.value,j.value.replace(/([\d.,]+)/,ve)}),q=C(()=>typeof u.value.count=="number"?u.value.count:P.value.length),se=ge=>{const ae=ge.replace("#",""),ve=parseInt(ae.substring(0,2),16),Y=parseInt(ae.substring(2,4),16),oe=parseInt(ae.substring(4,6),16),te=.85,le=Math.floor(ve*te),ye=Math.floor(Y*te),me=Math.floor(oe*te);return`#${le.toString(16).padStart(2,"0")}${ye.toString(16).padStart(2,"0")}${me.toString(16).padStart(2,"0")}`},he=C(()=>s.color?se(s.color):"#CC6E00"),be=C(()=>s.isExpanded?{width:"100%",minWidth:"0",maxWidth:"100%",margin:"0",borderRadius:"1rem",boxShadow:"none",boxSizing:"border-box"}:{backgroundColor:s.color?`${s.color}40`:"#f8fafc"}),ne=C(()=>({backgroundColor:s.color?`${s.color}15`:"#FFF4E5",color:he.value})),J=ge=>{const ae=ge.dataTransfer.getData("text/plain");if(console.log("[COLUMN-DROP-DEBUG] Item arrastado ID:",ae,"para coluna:",s.id),ae){const ve=parseInt(ae,10);console.log("[COLUMN-DROP-DEBUG] ID convertido para nmero:",ve,typeof ve),a("drop",{itemId:ve,columnId:s.id}),console.log("[COLUMN-DROP-DEBUG] Evento drop emitido para o componente pai")}},ue=ge=>{ge.preventDefault()},Ne=C(()=>s.isExpanded?{width:"100%",minWidth:"0",maxWidth:"100%",margin:"0",borderRadius:"0",boxShadow:"none",boxSizing:"border-box"}:s.totalColumns<=5?{minWidth:"320px",maxWidth:`calc((100% - ${(s.totalColumns-1)*1}rem) / ${s.totalColumns})`,width:"100%"}:{minWidth:"350px",maxWidth:"350px",width:"350px"}),Re=()=>{g.value=!0},Ze=ge=>{var ve,Y;console.log("[DEBUG] handleFilterApply recebeu filtros:",JSON.stringify(ge)),ge&&ge.agent_id&&console.log("[DEBUG] agent_id recebido:",ge.agent_id,"tipo:",typeof ge.agent_id),!ge||(!ge.priority||ge.priority.length===0)&&(!ge.value||ge.value.min===null&&ge.value.max===null)&&!ge.agent_id&&(!ge.date||!ge.date.start&&!ge.date.end)?(console.log("[DEBUG] Filtros limpos"),T.value=null,localStorage.removeItem(H.value)):(console.log("[DEBUG] Aplicando filtros, agent_id:",ge.agent_id,"tipo:",typeof ge.agent_id),T.value=ge,localStorage.setItem(H.value,JSON.stringify(ge)),console.log("[DEBUG] Filtros aplicados, agora columnFilters.agent_id:",(ve=T.value)==null?void 0:ve.agent_id,"tipo:",typeof((Y=T.value)==null?void 0:Y.agent_id))),g.value=!1},Xe=C(()=>T.value?T.value.priority.length>0||T.value.value.min||T.value.value.max||T.value.agent_id||T.value.date.start||T.value.date.end:!1),Qe=async()=>{if(h.value&&!_.value)try{console.log(`[KANBAN-COLUMN] Carregando prxima pgina para coluna ${s.id}...`),await l.dispatch("kanban/fetchMoreKanbanItems")}catch(ge){console.error(`[KANBAN-COLUMN] Erro ao carregar mais itens para coluna ${s.id}:`,ge)}},Je=ge=>{S.value&&(S.value=!1)},st=ge=>{ge.preventDefault(),B.value=!0,k.value={x:ge.clientX,y:ge.clientY}},ht=()=>{B.value=!1},wt=()=>{b.value.showTotal=!b.value.showTotal,M(),ht()};pt(()=>{document.addEventListener("click",Je),document.addEventListener("click",ht)}),zs(()=>{document.removeEventListener("click",Je),document.removeEventListener("click",ht)}),ot(()=>b.value.showAll,ge=>{ge&&(b.value.showWon=!0,b.value.showLost=!0),M()}),ot([()=>b.value.showWon,()=>b.value.showLost],([ge,ae])=>{b.value.showAll=ge&&ae});const ee=()=>{y.value={name:s.title,color:s.color,description:s.description||""},A.value=!0,S.value=!1},de=async()=>{try{const ge=l.getters["funnel/getSelectedFunnel"],ae={...ge.stages};ae[s.id]={...ae[s.id],name:y.value.name,color:y.value.color,description:y.value.description},await ra.update(ge.id,{...ge,stages:ae}),A.value=!1,await l.dispatch("funnel/fetch"),a("itemsUpdated"),It.emit("newToastMessage",{message:"Etapa atualizada com sucesso",action:{type:"success"}})}catch(ge){console.error("Erro ao atualizar etapa:",ge),It.emit("newToastMessage",{message:"Erro ao atualizar etapa",action:{type:"error"}})}},ie=()=>{N.value=!N.value;const ge=JSON.parse(localStorage.getItem("kanban_collapsed_items")||"{}");P.value.forEach(ae=>{ge[ae.id]=N.value}),localStorage.setItem("kanban_collapsed_items",JSON.stringify(ge)),S.value=!1,a("itemsUpdated"),It.emit("kanbanItemsCollapsedStateChanged")},Ce=ge=>{console.log("[KanbanColumn] handleItemDragEndInColumn - Evento itemDragend recebido do KanbanItem:",ge),a("itemDragend",ge)},Se=F(!1),je=()=>{a("expand",s.id),S.value=!1},Ke=()=>{a("closeExpanded"),S.value=!1},$e=[{key:"urgent",label:"Urgente"},{key:"high",label:"Alta"},{key:"medium",label:"Mdia"},{key:"low",label:"Baixa"},{key:"none",label:"Nenhuma"}],Be=C(()=>{const ge={urgent:[],high:[],medium:[],low:[],none:[]};return P.value.forEach(ae=>{var Y;const ve=((Y=ae.item_details)==null?void 0:Y.priority)||"none";ge[ve]?ge[ve].push(ae):ge.none.push(ae)}),ge}),Ue=C(()=>$e.filter(ge=>Be.value[ge.key]&&Be.value[ge.key].length>0));return(ge,ae)=>{const ve=z("fluent-icon");return pe((p(),f("div",{class:re(["kanban-column-root",s.isExpanded?"kanban-column-expanded":"",s.isExpanded?"bg-slate-100 dark:bg-slate-800":""]),style:Ct({...Ne.value,...be.value})},[c("div",{class:"pl-4 pr-4 pt-2 pb-2",style:Ct({borderBottom:`1px solid ${s.color}59`,background:s.color?`${s.color}40`:"#f8fafc"}),onContextmenu:st},[c("div",Urt,[c("div",Grt,[c("h3",{class:"text-sm font-medium",style:Ct({color:he.value}),title:s.title},E(s.title),13,Vrt),c("span",{class:"inline-flex items-center justify-center w-5 h-5 text-xs font-medium rounded-full",style:Ct(ne.value)},E(q.value),5),c("div",Hrt,[(p(!0),f(fe,null,Ae(G.value,Y=>(p(),V(Bo,{key:Y.id,text:Y.name},{default:K(()=>[v(Ft,{name:Y.name,src:Y.avatar_url,size:22,style:{"z-index":"{{ 10 - idx }}"}},null,8,["name","src"])]),_:2},1032,["text"]))),128)),L.value>0?(p(),f("span",Wrt," +"+E(L.value),1)):O("",!0)]),Xe.value?(p(),f("span",{key:0,class:"filter-active-indicator",style:Ct({backgroundColor:he.value})},null,4)):O("",!0)]),c("div",Krt,[j.value&&I(i)&&b.value.showTotal?(p(),f("span",{key:0,class:"text-xs font-medium relative group cursor-pointer",style:Ct({color:he.value}),onMouseenter:ae[0]||(ae[0]=Y=>U.value=!0),onMouseleave:ae[1]||(ae[1]=Y=>U.value=!1)},[Ee(E(X.value)+" ",1),U.value?(p(),f("span",zrt,E(j.value),1)):O("",!0)],36)):O("",!0),c("button",{class:"p-1 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100",onClick:ae[2]||(ae[2]=Y=>ge.$emit("add",e.id))},[v(ve,{icon:"add",size:"16"})]),c("div",jrt,[c("button",{class:"p-1 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 options-menu-button",onClick:ae[3]||(ae[3]=ze(Y=>S.value=!S.value,["stop"]))},[v(ve,{icon:"more-vertical",size:"16"})]),S.value?(p(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-2 w-48 z-10 options-menu-content",onClick:ae[10]||(ae[10]=ze(()=>{},["stop"]))},[c("div",Yrt,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ee},[v(ve,{icon:"edit",size:"16"}),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.EDIT_STAGE")),1)])]),c("div",Xrt,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:Re},[v(ve,{icon:"filter",size:"16"}),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.FILTER")),1)])]),ae[28]||(ae[28]=c("div",{class:"border-t border-slate-100 dark:border-slate-700 my-1"},null,-1)),c("div",qrt,[c("label",Zrt,[pe(c("input",{"onUpdate:modelValue":ae[4]||(ae[4]=Y=>b.value.showAll=Y),type:"checkbox",class:"form-checkbox",onChange:M},null,544),[[Xt,b.value.showAll]]),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.SHOW_ALL")),1)])]),c("div",Qrt,[c("label",Jrt,[pe(c("input",{"onUpdate:modelValue":ae[5]||(ae[5]=Y=>b.value.showWon=Y),type:"checkbox",class:"form-checkbox",onChange:M},null,544),[[Xt,b.value.showWon]]),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.SHOW_WON")),1)])]),c("div",ect,[c("label",tct,[pe(c("input",{"onUpdate:modelValue":ae[6]||(ae[6]=Y=>b.value.showLost=Y),type:"checkbox",class:"form-checkbox",onChange:M},null,544),[[Xt,b.value.showLost]]),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.SHOW_LOST")),1)])]),c("div",nct,[c("label",sct,[pe(c("input",{"onUpdate:modelValue":ae[7]||(ae[7]=Y=>b.value.hideColumn=Y),type:"checkbox",class:"form-checkbox",onChange:M},null,544),[[Xt,b.value.hideColumn]]),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.HIDE_STAGE")),1)])]),c("div",act,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ae[8]||(ae[8]=Y=>x.value=!0)},[v(ve,{icon:"arrow-sort",size:"16"}),c("span",null,E(I(o)("KANBAN.COLUMN_OPTIONS.SORT")),1)])]),ae[29]||(ae[29]=c("div",{class:"border-t border-slate-100 dark:border-slate-700 my-1"},null,-1)),c("div",oct,[c("button",{class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ie},[v(ve,{icon:N.value?"arrow-expand":"arrow-outwards",size:"16"},null,8,["icon"]),c("span",null,E(N.value?I(o)("KANBAN.COLUMN_OPTIONS.EXPAND_ALL"):I(o)("KANBAN.COLUMN_OPTIONS.COLLAPSE_ALL")),1)])]),c("div",lct,[c("button",{class:"text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:ae[9]||(ae[9]=Y=>Se.value=!0)}," Relatrio da etapa ")]),c("div",ict,[s.isExpanded?O("",!0):(p(),f("button",{key:0,class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:je}," Expandir etapa ")),s.isExpanded?(p(),f("button",{key:1,class:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200 w-full hover:text-woot-500",onClick:Ke}," Voltar ao Kanban ")):O("",!0)])])):O("",!0)])])])],36),c("div",{ref_key:"scrollContainer",ref:w,class:re(s.isExpanded?"kanban-items-priority-columns":"flex-1 overflow-y-auto"),onDrop:J,onDragover:ue},[s.isExpanded?(p(),f("div",rct,[(p(!0),f(fe,null,Ae(Ue.value,Y=>(p(),f("div",{key:Y.key,class:"priority-column"},[c("div",cct,[v(T2,{priority:Y.key,size:20,class:"mr-2"},null,8,["priority"]),c("span",dct,E(Y.label),1),c("span",uct,E(Be.value[Y.key].length),1)]),c("div",pct,[(p(!0),f(fe,null,Ae(Be.value[Y.key],oe=>(p(),V(BE,{key:oe.id,item:oe,"kanban-items":m.value,"force-expanded":"",draggable:"",onDragstart:te=>{te.dataTransfer.setData("text/plain",oe.id.toString()),ge.$emit("itemDragstart",oe)},onItemDragend:te=>Ce(oe),onClick:ae[11]||(ae[11]=te=>{ge.$emit("itemClick",te)}),onEdit:ae[12]||(ae[12]=te=>{ge.$emit("edit",te)}),onDelete:te=>ge.$emit("delete",oe)},null,8,["item","kanban-items","onDragstart","onItemDragend","onDelete"]))),128))])]))),128))])):(p(),f("div",mct,[c("div",hct,[W.value.length?(p(),f(fe,{key:0},[(p(!0),f(fe,null,Ae(W.value,Y=>(p(),V(BE,{key:Y.id,item:Y,"kanban-items":m.value,draggable:"",onDragstart:oe=>{oe.dataTransfer.setData("text/plain",Y.id.toString()),ge.$emit("itemDragstart",Y)},onItemDragend:oe=>Ce(Y),onClick:ae[13]||(ae[13]=oe=>{ge.$emit("itemClick",oe)}),onEdit:ae[14]||(ae[14]=oe=>{ge.$emit("edit",oe)}),onDelete:oe=>ge.$emit("delete",Y)},null,8,["item","kanban-items","onDragstart","onItemDragend","onDelete"]))),128)),h.value?(p(),f("div",fct,[v(ce,{variant:"faded",size:"sm","is-loading":_.value,onClick:Qe,style:Ct({"--button-bg-color":s.color?`${s.color}15`:"#FFF4E5","--button-text-color":he.value,"--button-hover-bg-color":s.color?`${s.color}25`:"#FFE4B3"}),class:"custom-colored-button"},{default:K(()=>[Ee(E(I(o)("KANBAN.LOAD_MORE")),1)]),_:1},8,["is-loading","style"])])):O("",!0)],64)):(p(),f("div",gct,E(Xe.value?I(o)("KANBAN.NO_FILTERED_ITEMS"):I(o)("KANBAN.NO_ITEMS")),1))])]))],34),v(lv,{show:g.value,"filtered-results":Q.value,"current-funnel":I(l).getters["funnel/getSelectedFunnel"],"initial-filters":T.value,size:"large",onClose:ae[15]||(ae[15]=Y=>g.value=!1),onApply:Ze},null,8,["show","filtered-results","current-funnel","initial-filters"]),v(qt,{show:A.value,"onUpdate:show":ae[20]||(ae[20]=Y=>A.value=Y),"on-close":()=>A.value=!1},{default:K(()=>[c("div",_ct,[c("h3",vct,E(I(o)("KANBAN.EDIT_STAGE_MODAL.TITLE")),1),c("div",bct,[c("div",null,[c("label",Ect,E(I(o)("KANBAN.EDIT_STAGE_MODAL.NAME")),1),pe(c("input",{"onUpdate:modelValue":ae[16]||(ae[16]=Y=>y.value.name=Y),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(o)("KANBAN.EDIT_STAGE_MODAL.NAME_PLACEHOLDER")},null,8,Tct),[[mt,y.value.name]])]),c("div",null,[c("label",Act,E(I(o)("KANBAN.EDIT_STAGE_MODAL.COLOR")),1),v(A2,{modelValue:y.value.color,"onUpdate:modelValue":ae[17]||(ae[17]=Y=>y.value.color=Y)},null,8,["modelValue"])]),c("div",null,[c("label",yct,E(I(o)("KANBAN.EDIT_STAGE_MODAL.DESCRIPTION")),1),pe(c("textarea",{"onUpdate:modelValue":ae[18]||(ae[18]=Y=>y.value.description=Y),class:"w-full px-3 py-2 border rounded-lg",rows:"3",placeholder:I(o)("KANBAN.EDIT_STAGE_MODAL.DESCRIPTION_PLACEHOLDER")},null,8,Sct),[[mt,y.value.description]])]),c("div",Ict,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:ae[19]||(ae[19]=Y=>A.value=!1)},{default:K(()=>[Ee(E(I(o)("KANBAN.ACTIONS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:de},{default:K(()=>[Ee(E(I(o)("KANBAN.ACTIONS.SAVE")),1)]),_:1})])])])]),_:1},8,["show","on-close"]),v(qt,{show:x.value,"onUpdate:show":ae[26]||(ae[26]=Y=>x.value=Y),"on-close":()=>x.value=!1},{default:K(()=>[c("div",Cct,[c("h3",xct,E(I(o)("KANBAN.SORT_MODAL.TITLE")),1),c("div",Nct,[c("div",null,[c("label",Oct,E(I(o)("KANBAN.SORT_MODAL.SORT_BY")),1),pe(c("select",{"onUpdate:modelValue":ae[21]||(ae[21]=Y=>$.value.type=Y),class:"w-full px-3 py-2 border rounded-lg",onChange:R},[(p(),f(fe,null,Ae(D,Y=>c("option",{key:Y.id,value:Y.id},E(I(o)(`KANBAN.SORT_OPTIONS.${Y.id.toUpperCase()}`,Y.label)),9,wct)),64))],544),[[zt,$.value.type]])]),c("div",null,[c("label",Rct,E(I(o)("KANBAN.SORT_MODAL.DIRECTION")),1),c("div",$ct,[c("label",Mct,[pe(c("input",{type:"radio","onUpdate:modelValue":ae[22]||(ae[22]=Y=>$.value.direction=Y),value:"asc",onChange:R},null,544),[[Vl,$.value.direction]]),c("span",kct,E(I(o)("KANBAN.SORT_MODAL.ASCENDING")),1)]),c("label",Lct,[pe(c("input",{type:"radio","onUpdate:modelValue":ae[23]||(ae[23]=Y=>$.value.direction=Y),value:"desc",onChange:R},null,544),[[Vl,$.value.direction]]),c("span",Dct,E(I(o)("KANBAN.SORT_MODAL.DESCENDING")),1)])])]),c("div",Pct,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:ae[24]||(ae[24]=Y=>x.value=!1)},{default:K(()=>[Ee(E(I(o)("KANBAN.FUNNELS.FORM.ACTIONS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:ae[25]||(ae[25]=Y=>x.value=!1)},{default:K(()=>[Ee(E(I(o)("KANBAN.FORM.APPLY")),1)]),_:1})])])])]),_:1},8,["show","on-close"]),B.value?(p(),f("div",{key:0,class:"fixed z-50 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded shadow-lg py-1 px-0 min-w-[180px]",style:Ct({left:k.value.x+"px",top:k.value.y+"px"}),onClick:ae[27]||(ae[27]=ze(()=>{},["stop"]))},[c("button",{class:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:wt},E(b.value.showTotal?"Esconder soma de ofertas":"Mostrar soma de ofertas"),1)],4)):O("",!0),Se.value?(p(),V(Frt,{key:1,title:s.title,color:s.color,description:s.description,items:P.value,onClose:()=>Se.value=!1},null,8,["title","color","description","items","onClose"])):O("",!0)],6)),[[pn,!b.value.hideColumn]])}}},FE=Fe(Bct,[["__scopeId","data-v-94ddc010"]]),Fct={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},Uct={class:"bg-white dark:bg-slate-900 rounded-md shadow-lg border border-slate-100 dark:border-slate-800 w-[800px] min-w-[700px] h-[600px] flex flex-col gap-0 p-0",style:{"box-shadow":"0 4px 24px 0 rgba(30, 41, 59, 0.08)"}},Gct={class:"flex items-center justify-between px-6 py-4 border-b border-slate-100 dark:border-slate-700"},Vct={class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},Hct={class:"flex flex-1 overflow-hidden"},Wct={class:"w-48 border-r border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-800"},Kct={class:"p-4 space-y-2"},zct={class:"flex-1 p-6 overflow-y-auto"},jct={key:0,class:"space-y-6"},Yct={class:"space-y-6"},Xct={for:"kanban-title",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},qct=["placeholder"],Zct={class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Qct={class:"flex items-center gap-3"},Jct={for:"dragbar-enabled",class:"flex items-center gap-3 cursor-pointer select-none"},edt={class:"relative inline-block w-11 align-middle select-none transition duration-200 ease-in"},tdt={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},ndt={class:"text-sm text-slate-600 dark:text-slate-400 mt-2 ml-14"},sdt={key:1,class:"space-y-6"},adt={class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4"},odt={class:"space-y-4"},ldt={class:"flex items-center gap-3"},idt={for:"webhook-enabled",class:"flex items-center gap-3 cursor-pointer select-none"},rdt={class:"relative inline-block w-11 align-middle select-none transition duration-200 ease-in"},cdt={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},ddt={key:0,class:"space-y-4 pl-14"},udt={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",for:"webhook-url"},pdt=["placeholder"],mdt={class:"flex items-center justify-between mb-3"},hdt={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},fdt={class:"text-xs text-slate-500 dark:text-slate-400"},gdt={class:"flex gap-2 mb-3"},_dt={class:"space-y-2"},vdt=["id","checked","onChange"],bdt={class:"flex-1"},Edt=["for"],Tdt={class:"text-xs text-slate-500 dark:text-slate-400 text-right max-w-xs"},Adt={class:"flex items-center gap-3"},ydt={key:0,class:"pl-4"},Sdt={class:"space-y-3 pl-4 border-l-2 border-slate-200 dark:border-slate-600"},Idt={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Cdt={class:"max-h-32 overflow-y-auto bg-slate-50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 rounded-lg p-3 text-xs"},xdt={key:0,class:"text-slate-400 dark:text-slate-400 text-center py-4 select-none bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded"},Ndt={key:1,class:"space-y-1"},Odt={class:"text-slate-700 dark:text-slate-300 truncate"},wdt={class:"text-slate-500 dark:text-slate-400 ml-auto text-xs"},Rdt={class:"flex justify-end gap-3 px-6 py-4 border-t border-slate-100 dark:border-slate-700"},$dt={__name:"KanbanSettings",props:{show:{type:Boolean,required:!0}},emits:["close","dragbar-visibility-changed"],setup(e,{emit:t}){const{t:n}=Pe(),s=t,a=Pn(),o=F(!1),l=F(""),i=F(!0),r=F("Quadro Kanban"),d=F(null),u=F(!1),m=F([]),h=F("preferences"),_=F(!1),g=F([{id:"kanban.item.created",label:"Item Criado",description:"Quando um novo item  criado no kanban"},{id:"kanban.item.updated",label:"Item Atualizado",description:"Quando um item existente  modificado"},{id:"kanban.item.deleted",label:"Item Deletado",description:"Quando um item  removido do kanban"},{id:"kanban.item.stage_changed",label:"Mudana de Estgio",description:"Quando um item muda de estgio/funil"},{id:"kanban.items.reordered",label:"Itens Reordenados",description:"Quando itens so reordenados dentro de um estgio"}]),T=F(["kanban.item.created","kanban.item.updated","kanban.item.deleted","kanban.item.stage_changed","kanban.items.reordered"]),S=C(()=>a.getters["kanban/getWebhookUrl"]),b=C(()=>a.getters["kanban/getWebhookEnabled"]),A=C(()=>a.getters["kanban/getDragbarEnabled"]),y=C(()=>a.getters["kanban/getKanbanTitle"]),x=()=>{m.value=[]};pt(async()=>{o.value=b.value,l.value=S.value,i.value=A.value,r.value=y.value,x()});const $=()=>{s("close")},N=async()=>{try{await a.dispatch("kanban/updateWebhookConfig",{enabled:o.value,webhook_url:l.value,webhook_events:T.value,config:{dragbar_enabled:i.value,title:r.value}}),s("dragbar-visibility-changed",i.value),$()}catch(G){console.error("Erro ao salvar configuraes:",G)}},w=async()=>{var G,L;u.value=!0,d.value=null;try{const M=await a.dispatch("kanban/testWebhook");d.value={success:M.data.success,message:M.data.message||M.data.error}}catch(M){d.value={success:!1,message:((L=(G=M.response)==null?void 0:G.data)==null?void 0:L.error)||"Erro ao testar webhook"}}u.value=!1,x()},D=G=>{h.value=G},H=()=>{_.value=!_.value},B=G=>{const L=T.value.indexOf(G);L>-1?T.value.splice(L,1):T.value.push(G)},k=()=>{T.value=g.value.map(G=>G.id)},U=()=>{T.value=[]};return(G,L)=>e.show?(p(),f("div",Fct,[c("div",Uct,[c("header",Gct,[c("h3",Vct,E(I(n)("KANBAN.SETTINGS.TITLE")),1),c("button",{onClick:$,class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"},L[6]||(L[6]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Hct,[c("div",Wct,[c("nav",Kct,[c("button",{onClick:L[0]||(L[0]=M=>D("preferences")),class:re(["w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors",h.value==="preferences"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"])}," Preferncias ",2),c("button",{onClick:L[1]||(L[1]=M=>D("webhook")),class:re(["w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors",h.value==="webhook"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"])}," Webhook ",2)])]),c("div",zct,[h.value==="preferences"?(p(),f("div",jct,[c("div",null,[L[9]||(L[9]=c("h4",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4"}," Configuraes Gerais ",-1)),c("div",Yct,[c("div",null,[c("label",Xct,E(I(n)("KANBAN.SETTINGS.KANBAN_TITLE")),1),pe(c("input",{"onUpdate:modelValue":L[2]||(L[2]=M=>r.value=M),id:"kanban-title",type:"text",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:I(n)("KANBAN.SETTINGS.KANBAN_TITLE_PLACEHOLDER"),maxlength:"50"},null,8,qct),[[mt,r.value]]),c("p",Zct,E(I(n)("KANBAN.SETTINGS.KANBAN_TITLE_DESCRIPTION")),1)]),c("div",null,[c("div",Qct,[c("label",Jct,[c("span",edt,[pe(c("input",{"onUpdate:modelValue":L[3]||(L[3]=M=>i.value=M),type:"checkbox",id:"dragbar-enabled",class:"sr-only peer"},null,512),[[Xt,i.value]]),L[7]||(L[7]=c("span",{class:"block w-11 h-7 bg-slate-200 dark:bg-slate-700 rounded-full peer-checked:bg-blue-500 transition"},null,-1)),L[8]||(L[8]=c("span",{class:"dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition peer-checked:translate-x-4"},null,-1))]),c("span",tdt,E(I(n)("KANBAN.SETTINGS.ENABLE_DRAGBAR")),1)])]),c("div",ndt,E(I(n)("KANBAN.SETTINGS.DRAGBAR_DESCRIPTION")),1)])])])])):O("",!0),h.value==="webhook"?(p(),f("div",sdt,[c("div",null,[c("h4",adt,E(I(n)("KANBAN.SETTINGS.TITLE")),1),c("div",odt,[c("div",ldt,[c("label",idt,[c("span",rdt,[pe(c("input",{"onUpdate:modelValue":L[4]||(L[4]=M=>o.value=M),type:"checkbox",id:"webhook-enabled",class:"sr-only peer"},null,512),[[Xt,o.value]]),L[10]||(L[10]=c("span",{class:"block w-11 h-7 bg-slate-200 dark:bg-slate-700 rounded-full peer-checked:bg-blue-500 transition"},null,-1)),L[11]||(L[11]=c("span",{class:"dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition peer-checked:translate-x-4"},null,-1))]),c("span",cdt,E(I(n)("KANBAN.SETTINGS.ENABLE_GLOBAL_WEBHOOK")),1)])]),o.value?(p(),f("div",ddt,[c("div",null,[c("label",udt,E(I(n)("KANBAN.SETTINGS.WEBHOOK_URL")),1),pe(c("input",{"onUpdate:modelValue":L[5]||(L[5]=M=>l.value=M),id:"webhook-url",type:"url",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:I(n)("KANBAN.SETTINGS.WEBHOOK_URL_PLACEHOLDER"),required:""},null,8,pdt),[[mt,l.value]])]),c("div",null,[c("div",mdt,[c("label",hdt,E(I(n)("KANBAN.SETTINGS.WEBHOOK_EVENTS")),1),c("span",fdt,E(I(n)("KANBAN.SETTINGS.WEBHOOK_EVENTS_DESCRIPTION")),1)]),c("div",gdt,[v(ce,{variant:"outline",color:"slate",size:"small",onClick:k},{default:K(()=>[Ee(E(I(n)("KANBAN.SETTINGS.SELECT_ALL_EVENTS")),1)]),_:1}),v(ce,{variant:"outline",color:"slate",size:"small",onClick:U},{default:K(()=>[Ee(E(I(n)("KANBAN.SETTINGS.DESELECT_ALL_EVENTS")),1)]),_:1})]),c("div",_dt,[(p(!0),f(fe,null,Ae(g.value,M=>(p(),f("div",{key:M.id,class:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700"},[c("input",{id:M.id,type:"checkbox",checked:T.value.includes(M.id),onChange:R=>B(M.id),class:"w-4 h-4 text-blue-600 bg-slate-100 border-slate-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-slate-800 focus:ring-2"},null,40,vdt),c("div",bdt,[c("label",{for:M.id,class:"block text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer"},E(M.label),9,Edt)]),c("div",Tdt,E(M.description),1)]))),128))])]),c("div",Adt,[v(ce,{loading:u.value,variant:"outline",color:"blue",size:"small",onClick:w},{default:K(()=>[Ee(E(I(n)("KANBAN.SETTINGS.TEST_WEBHOOK")),1)]),_:1},8,["loading"]),c("button",{onClick:H,class:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors"},[(p(),f("svg",{class:re(["w-4 h-4 transition-transform",_.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},L[12]||(L[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2)),Ee(" "+E(_.value?I(n)("KANBAN.SETTINGS.HIDE_DETAILS"):I(n)("KANBAN.SETTINGS.SHOW_DETAILS")),1)])]),d.value?(p(),f("div",ydt,[c("span",{class:re(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",d.value.success?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},E(d.value.message),3)])):O("",!0),pe(c("div",Sdt,[c("div",null,[c("label",Idt,E(I(n)("KANBAN.SETTINGS.WEBHOOK_LOG")),1),c("div",Cdt,[m.value.length===0?(p(),f("div",xdt,E(I(n)("KANBAN.SETTINGS.NO_EVENTS")),1)):(p(),f("ul",Ndt,[(p(!0),f(fe,null,Ae(m.value,(M,R)=>(p(),f("li",{key:R,class:"flex items-center gap-2"},[c("span",{class:re(["px-2 py-0.5 rounded text-xs font-medium",M.status==="success"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},E(M.status),3),c("span",Odt,E(M.event),1),c("span",wdt,E(M.timestamp),1)]))),128))]))])])],512),[[pn,_.value]])])):O("",!0)])])])):O("",!0)])]),c("footer",Rdt,[v(ce,{variant:"ghost",color:"slate",size:"small",onClick:$},{default:K(()=>[Ee(E(I(n)("KANBAN.SETTINGS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"small",onClick:N},{default:K(()=>[Ee(E(I(n)("KANBAN.SETTINGS.SAVE")),1)]),_:1})])])])):O("",!0)}},Mdt=Fe($dt,[["__scopeId","data-v-2c7eb322"]]),kdt={class:"bulk-delete-modal"},Ldt={class:"p-6"},Ddt={class:"text-lg font-medium mb-4"},Pdt={class:"text-sm text-slate-600 dark:text-slate-400 mb-4"},Bdt={class:"items-list max-h-96 overflow-y-auto mb-4"},Fdt=["checked"],Udt={class:"flex-1"},Gdt={class:"text-sm font-medium"},Vdt=["onClick"],Hdt=["checked"],Wdt={class:"flex-1"},Kdt={class:"text-sm font-medium"},zdt={class:"flex items-center gap-2 mt-1"},jdt={class:"flex justify-end gap-2"},Ydt={__name:"BulkDeleteModal",props:{items:{type:Array,required:!0}},emits:["close","confirm"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=F([]),l=()=>{o.value.length===n.items.length?o.value=[]:o.value=n.items.map(u=>u.id)},i=C(()=>o.value.length===n.items.length),r=u=>{const m=o.value.indexOf(u);m===-1?o.value.push(u):o.value.splice(m,1)},d=()=>{s("confirm",o.value)};return(u,m)=>(p(),f("div",kdt,[c("div",Ldt,[c("h3",Ddt,E(I(a)("KANBAN.BULK_ACTIONS.DELETE.TITLE")),1),c("p",Pdt,E(I(a)("KANBAN.BULK_ACTIONS.DELETE.DESCRIPTION")),1),c("div",Bdt,[c("div",{class:"item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",onClick:l},[c("input",{type:"checkbox",checked:i.value,class:"mr-3",onClick:m[0]||(m[0]=ze(()=>{},["stop"]))},null,8,Fdt),c("div",Udt,[c("h4",Gdt,E(I(a)("KANBAN.BULK_ACTIONS.SELECT_ALL")),1)])]),(p(!0),f(fe,null,Ae(e.items,h=>{var _,g,T,S,b,A;return p(),f("div",{key:h.id,class:re(["item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",{"bg-slate-50 dark:bg-slate-800":o.value.includes(h.id)}]),onClick:y=>r(h.id)},[c("input",{type:"checkbox",checked:o.value.includes(h.id),class:"mr-3",onClick:m[1]||(m[1]=ze(()=>{},["stop"]))},null,8,Hdt),c("div",Wdt,[c("h4",Kdt,E(((_=h.item_details)==null?void 0:_.title)||h.title||I(a)("KANBAN.ITEM_DETAILS.UNTITLED_ITEM")),1),c("div",zdt,[c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",`bg-${((g=h.item_details)==null?void 0:g.priority)||h.priority||"none"}-50 dark:bg-${((T=h.item_details)==null?void 0:T.priority)||h.priority||"none"}-800 text-${((S=h.item_details)==null?void 0:S.priority)||h.priority||"none"}-800 dark:text-${((b=h.item_details)==null?void 0:b.priority)||h.priority||"none"}-50`])},E(I(a)(`KANBAN.PRIORITY_LABELS.${(((A=h.item_details)==null?void 0:A.priority)||h.priority||"NONE").toUpperCase()}`)),3)])])],10,Vdt)}),128))]),c("div",jdt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:m[2]||(m[2]=h=>u.$emit("close"))},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"ruby",size:"sm",disabled:!o.value.length,onClick:d},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.CONFIRM",{count:o.value.length})),1)]),_:1},8,["disabled"])])])]))}},Xdt=Fe(Ydt,[["__scopeId","data-v-ff21cf1e"]]),qdt={class:"bulk-move-modal"},Zdt={class:"p-6"},Qdt={class:"text-lg font-medium mb-4"},Jdt={class:"text-sm text-slate-600 dark:text-slate-400 mb-4"},eut={class:"stage-selector mb-4"},tut={class:"block text-sm font-medium mb-2"},nut={value:"",disabled:""},sut=["value"],aut={class:"items-list max-h-96 overflow-y-auto mb-4"},out=["checked"],lut={class:"flex-1"},iut={class:"text-sm font-medium"},rut=["onClick"],cut=["checked"],dut={class:"flex-1"},uut={class:"text-sm font-medium"},put={class:"flex items-center gap-2 mt-1"},mut={class:"flex justify-end gap-2"},hut={__name:"BulkMoveModal",props:{items:{type:Array,required:!0}},emits:["close","confirm"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=Pn(),l=F([]),i=F(""),r=C(()=>{const _=o.getters["funnel/getSelectedFunnel"];return _!=null&&_.stages?Object.entries(_.stages).map(([g,T])=>({id:g,name:T.name,position:T.position})).sort((g,T)=>g.position-T.position):[]}),d=_=>{const g=l.value.indexOf(_);g===-1?l.value.push(_):l.value.splice(g,1)},u=()=>{l.value.length===n.items.length?l.value=[]:l.value=n.items.map(_=>_.id)},m=C(()=>l.value.length===n.items.length),h=()=>{i.value&&l.value.length>0&&s("confirm",{itemIds:l.value,stageId:i.value})};return(_,g)=>(p(),f("div",qdt,[c("div",Zdt,[c("h3",Qdt,E(I(a)("KANBAN.BULK_ACTIONS.MOVE.TITLE")),1),c("p",Jdt,E(I(a)("KANBAN.BULK_ACTIONS.MOVE.DESCRIPTION")),1),c("div",eut,[c("label",tut,E(I(a)("KANBAN.BULK_ACTIONS.SELECT_STAGE")),1),pe(c("select",{"onUpdate:modelValue":g[0]||(g[0]=T=>i.value=T),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800"},[c("option",nut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.STAGE.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(r.value,T=>(p(),f("option",{key:T.id,value:T.id},E(T.name),9,sut))),128))],512),[[zt,i.value]])]),c("div",aut,[c("div",{class:"item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",onClick:u},[c("input",{type:"checkbox",checked:m.value,class:"mr-3",onClick:g[1]||(g[1]=ze(()=>{},["stop"]))},null,8,out),c("div",lut,[c("h4",iut,E(I(a)("KANBAN.BULK_ACTIONS.SELECT_ALL")),1)])]),(p(!0),f(fe,null,Ae(e.items,T=>{var S,b,A,y,x,$;return p(),f("div",{key:T.id,class:re(["item-row flex items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",{"bg-slate-50 dark:bg-slate-800":l.value.includes(T.id)}]),onClick:N=>d(T.id)},[c("input",{type:"checkbox",checked:l.value.includes(T.id),class:"mr-3",onClick:g[2]||(g[2]=ze(()=>{},["stop"]))},null,8,cut),c("div",dut,[c("h4",uut,E(((S=T.item_details)==null?void 0:S.title)||T.title||I(a)("KANBAN.ITEM_DETAILS.UNTITLED_ITEM")),1),c("div",put,[c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",`bg-${((b=T.item_details)==null?void 0:b.priority)||T.priority||"none"}-50 dark:bg-${((A=T.item_details)==null?void 0:A.priority)||T.priority||"none"}-800 text-${((y=T.item_details)==null?void 0:y.priority)||T.priority||"none"}-800 dark:text-${((x=T.item_details)==null?void 0:x.priority)||T.priority||"none"}-50`])},E(I(a)(`KANBAN.PRIORITY_LABELS.${((($=T.item_details)==null?void 0:$.priority)||T.priority||"NONE").toUpperCase()}`)),3)])])],10,rut)}),128))]),c("div",mut,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:g[3]||(g[3]=T=>_.$emit("close"))},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",disabled:!i.value||!l.value.length,onClick:h},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.CONFIRM",{count:l.value.length})),1)]),_:1},8,["disabled"])])])]))}},fut=Fe(hut,[["__scopeId","data-v-72e830a6"]]),gut={class:"bulk-add-modal"},_ut={class:"p-6"},vut={class:"text-lg font-medium mb-4"},but={class:"stage-selector mb-4"},Eut={class:"block text-sm font-medium mb-2"},Tut={value:"",disabled:""},Aut=["value"],yut={class:"new-item-form grid grid-cols-3 gap-4 mb-4"},Sut={class:"col-span-3"},Iut={class:"block text-sm font-medium mb-2"},Cut=["placeholder"],xut={class:"block text-sm font-medium mb-2"},Nut=["value"],Out={class:"col-span-2"},wut={class:"block text-sm font-medium mb-2"},Rut=["disabled"],$ut={value:""},Mut=["value"],kut={class:"col-span-3"},Lut={key:0,class:"items-list mb-4 border rounded-lg overflow-hidden"},Dut={class:"flex items-center gap-4"},Put={class:"font-medium"},But={key:0,class:"text-sm text-slate-600"},Fut={class:"flex justify-end gap-2"},Uut={__name:"BulkAddModal",props:{currentStage:{type:String,default:""}},emits:["close","items-created"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=Pn(),l=F(!1),i=C(()=>o.getters["funnel/getSelectedFunnel"]),r=F([]),d=F([]),u=F(!1),m=F({title:"",priority:"none",agent_id:""}),h=[{id:"none",name:a("KANBAN.PRIORITY_LABELS.NONE")},{id:"low",name:a("KANBAN.PRIORITY_LABELS.LOW")},{id:"medium",name:a("KANBAN.PRIORITY_LABELS.MEDIUM")},{id:"high",name:a("KANBAN.PRIORITY_LABELS.HIGH")},{id:"urgent",name:a("KANBAN.PRIORITY_LABELS.URGENT")}],_=C(()=>{var y;return(y=i.value)!=null&&y.stages?Object.entries(i.value.stages).map(([x,$])=>({id:x,name:$.name,position:$.position})).sort((x,$)=>x.position-$.position):[]}),g=F(n.currentStage||""),T=async()=>{try{u.value=!0;const{data:y}=await Qc.get();d.value=y}catch(y){console.error("Erro ao carregar agentes:",y)}finally{u.value=!1}},S=()=>{m.value.title.trim()&&(r.value.push({...m.value,id:Date.now()}),m.value={title:"",priority:"none",agent_id:""})},b=y=>{r.value=r.value.filter(x=>x.id!==y)},A=async()=>{if(!(!r.value.length||!g.value))try{l.value=!0;const y=r.value.map(($,N)=>({funnel_id:Number(i.value.id),funnel_stage:g.value,position:N+1,item_details:{title:$.title,priority:$.priority,agent_id:$.agent_id||null}}));console.log("[BULK-DEBUG] Items a serem criados:",y),console.log("[BULK-DEBUG] Verificando store antes da criao:"),console.log("[BULK-DEBUG] Itens no store:",o.state.kanban.items.map($=>({id:$.id,stage:$.funnel_stage})));const x=await Promise.all(y.map($=>Dn.createItem($)));console.log("[BULK-DEBUG] Items criados com sucesso:",x.map($=>$.data));try{console.log("[BULK-DEBUG] Tentando atualizar store via kanban/itemUpdated"),await o.dispatch("kanban/itemUpdated"),console.log("[BULK-DEBUG] Store aps itemUpdated:"),console.log("[BULK-DEBUG] Itens no store aps:",o.state.kanban.items.map(N=>({id:N.id,stage:N.funnel_stage})));const $=x.every(N=>o.state.kanban.items.some(w=>w.id===N.data.id));if(console.log("[BULK-DEBUG] Todos os itens criados esto no store?",$),!$){console.log("[BULK-DEBUG] itemUpdated no adicionou todos os itens, tentando fetchKanbanItems"),await o.dispatch("kanban/fetchKanbanItems");const N=x.every(w=>o.state.kanban.items.some(D=>D.id===w.data.id));console.log("[BULK-DEBUG] Todos os itens esto no store aps fetchKanbanItems?",N)}}catch($){console.error("[BULK-DEBUG] Erro ao atualizar store:",$),console.log("[BULK-DEBUG] Tentando fetchKanbanItems como alternativa"),await o.dispatch("kanban/fetchKanbanItems")}s("items-created",x.map($=>$.data)),s("close")}catch(y){console.error("[BULK-DEBUG] Erro ao criar itens:",y)}finally{l.value=!1}};return pt(()=>{T()}),(y,x)=>{const $=z("fluent-icon");return p(),f("div",gut,[c("div",_ut,[c("h3",vut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.ADD_ITEM")),1),c("div",but,[c("label",Eut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.STAGE.LABEL")),1),pe(c("select",{"onUpdate:modelValue":x[0]||(x[0]=N=>g.value=N),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800"},[c("option",Tut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.STAGE.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(_.value,N=>(p(),f("option",{key:N.id,value:N.id},E(N.name),9,Aut))),128))],512),[[zt,g.value]])]),c("div",yut,[c("div",Sut,[c("label",Iut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.TITLE.LABEL")),1),pe(c("input",{"onUpdate:modelValue":x[1]||(x[1]=N=>m.value.title=N),type:"text",class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800",placeholder:I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.TITLE.PLACEHOLDER")},null,8,Cut),[[mt,m.value.title]])]),c("div",null,[c("label",xut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.PRIORITY.LABEL")),1),pe(c("select",{"onUpdate:modelValue":x[2]||(x[2]=N=>m.value.priority=N),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800"},[(p(),f(fe,null,Ae(h,N=>c("option",{key:N.id,value:N.id},E(N.name),9,Nut)),64))],512),[[zt,m.value.priority]])]),c("div",Out,[c("label",wut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.AGENT.LABEL")),1),pe(c("select",{"onUpdate:modelValue":x[3]||(x[3]=N=>m.value.agent_id=N),class:"w-full p-2 border rounded-lg bg-white dark:bg-slate-800",disabled:u.value},[c("option",$ut,E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.INPUTS.AGENT.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(d.value,N=>(p(),f("option",{key:N.id,value:N.id},E(N.name),9,Mut))),128))],8,Rut),[[zt,m.value.agent_id]])]),c("div",kut,[v(ce,{variant:"solid",color:"blue",size:"sm",disabled:!m.value.title.trim(),onClick:S},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.ADD_TO_LIST")),1)]),_:1},8,["disabled"])])]),r.value.length?(p(),f("div",Lut,[(p(!0),f(fe,null,Ae(r.value,N=>{var w;return p(),f("div",{key:N.id,class:"item-row flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-slate-50 dark:hover:bg-slate-800"},[c("div",Dut,[c("span",Put,E(N.title),1),c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",`bg-${N.priority}-50 dark:bg-${N.priority}-800 text-${N.priority}-800 dark:text-${N.priority}-50`])},E(I(a)(`KANBAN.PRIORITY_LABELS.${N.priority.toUpperCase()}`)),3),N.agent_id?(p(),f("span",But,E((w=d.value.find(D=>D.id===N.agent_id))==null?void 0:w.name),1)):O("",!0)]),v(ce,{variant:"ghost",color:"ruby",size:"sm",onClick:D=>b(N.id)},{icon:K(()=>[v($,{icon:"delete",size:"16"})]),_:2},1032,["onClick"])])}),128))])):O("",!0),c("div",Fut,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:x[4]||(x[4]=N=>y.$emit("close"))},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",isLoading:l.value,disabled:!r.value.length||!g.value,onClick:A},{default:K(()=>[Ee(E(I(a)("KANBAN.BULK_ACTIONS.BULK_FORM.ACTIONS.CONFIRM")),1)]),_:1},8,["isLoading","disabled"])])])])}}},Gut=Fe(Uut,[["__scopeId","data-v-9d473fc0"]]),Vut={class:"modal-backdrop"},Hut={class:"modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},Wut={class:"modal-header",id:"modalTitle"},Kut={class:"flex items-center gap-3"},zut={class:"modal-body",id:"modalDescription"},jut={class:"space-y-4"},Yut={key:0,class:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg"},Xut={key:1,class:"form-group"},qut={class:"form-group"},Zut={__name:"AIConfigModal",emits:["close"],setup(e,{emit:t}){const n=En(),s=t,a=F(""),o=F("gpt-4-mini"),l=F(!1),i=n.currentRoute.value.params.accountId,r=`/app/accounts/${i}/settings/integrations/openai`;pt(async()=>{var u,m,h,_,g;try{const S=(m=(u=(await window.axios.get(`/api/v1/accounts/${i}/integrations/apps`)).data)==null?void 0:u.payload)==null?void 0:m.find(b=>b.id==="openai");l.value=(S==null?void 0:S.enabled)||!1,l.value&&((g=(_=(h=S==null?void 0:S.hooks)==null?void 0:h[0])==null?void 0:_.settings)!=null&&g.api_key)&&(a.value=S.hooks[0].settings.api_key)}catch(T){console.error("Erro ao verificar integrao:",T),l.value=!1}});const d=()=>{console.log("Salvando configuraes:",{apiKey:a.value,model:o.value}),s("close")};return(u,m)=>(p(),V(Ps,{name:"modal-fade"},{default:K(()=>[c("div",Vut,[c("div",Hut,[c("header",Wut,[c("div",Kut,[m[3]||(m[3]=c("h3",null,"Configurao do Modelo AI",-1)),c("span",{class:re(["px-2 py-1 text-xs font-medium rounded-full",l.value?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"])},E(l.value?u.t("KANBAN.AI_CONFIG.STATUS.CONNECTED"):u.t("KANBAN.AI_CONFIG.STATUS.DISCONNECTED")),3)]),c("button",{type:"button",class:"btn-close",onClick:m[0]||(m[0]=h=>u.$emit("close")),"aria-label":"Fechar modal"},"  ")]),c("section",zut,[c("div",jut,[l.value?(p(),f("div",Yut,[c("p",{class:"text-sm text-slate-600 dark:text-slate-400"},[m[4]||(m[4]=Ee(" Usando as credenciais configuradas no Chatwoot. Para alterar, acesse as ")),c("a",{href:r,target:"_blank",class:"text-woot-500 hover:underline"}," configuraes de integraes "),m[5]||(m[5]=Ee(". "))])])):(p(),f("div",Xut,[m[6]||(m[6]=c("label",{class:"block text-sm font-medium mb-1"},"API Key",-1)),pe(c("input",{type:"password",class:"w-full rounded-lg border p-2",placeholder:"sk-...","onUpdate:modelValue":m[1]||(m[1]=h=>a.value=h)},null,512),[[mt,a.value]]),m[7]||(m[7]=c("div",{class:"mt-2 text-xs text-slate-500 dark:text-slate-400 space-y-2"},[c("p",null,"Para obter sua API Key da OpenAI, siga os passos:"),c("ol",{class:"list-decimal ml-4 space-y-1"},[c("li",null,[Ee(" Acesse "),c("a",{href:"https://platform.openai.com/api-keys",target:"_blank",class:"text-woot-500 hover:underline"},"platform.openai.com/api-keys")]),c("li",null,"Faa login ou crie uma conta OpenAI"),c("li",null,'Clique em "Create new secret key"'),c("li",null,"D um nome para sua chave e copie o valor gerado"),c("li",null,"Cole a chave no campo acima")]),c("p",{class:"text-amber-500 dark:text-amber-400"},[c("strong",null,"Importante:"),Ee(" Guarde sua chave em local seguro. Ela s ser mostrada uma vez. ")])],-1))])),c("div",qut,[m[9]||(m[9]=c("label",{class:"block text-sm font-medium mb-1"},"Modelo",-1)),pe(c("select",{class:"w-full rounded-lg border p-2","onUpdate:modelValue":m[2]||(m[2]=h=>o.value=h),disabled:""},m[8]||(m[8]=[c("option",{value:"gpt-4-mini"},"GPT-4 Mini",-1)]),512),[[zt,o.value]])])])]),c("footer",{class:"modal-footer"},[c("button",{type:"button",class:"btn-save",onClick:d}," Salvar ")])])])]),_:1}))}},Qut=Fe(Zut,[["__scopeId","data-v-6d886e05"]]),Jut={class:"kanban-ai-container"},ept={class:"ai-content"},tpt={class:"quick-actions"},npt={class:"flex justify-between items-center mb-4"},spt={class:"actions-grid -mt-1"},apt=["onClick","disabled"],opt={class:"action-icon"},lpt={class:"action-content"},ipt={class:"flex items-center justify-between gap-2 mb-1"},rpt={class:"action-title"},cpt={key:0,class:"coming-soon-badge"},dpt={class:"action-description"},upt={class:"ai-chat"},ppt={class:"chat-container"},mpt={key:0,class:"avatar"},hpt={class:"message-content"},fpt={key:0,class:"suggestion-card"},gpt={class:"suggestion-header"},_pt={class:"suggestion-title"},vpt={class:"suggestion-badges"},bpt={class:"suggestion-states"},Ept={class:"current-state"},Tpt={class:"state-description"},Apt={class:"expected-state"},ypt={class:"state-description"},Spt={class:"suggestion-solution"},Ipt={class:"solution-description"},Cpt={class:"suggestion-actions"},xpt={key:1,class:"loading-analysis"},Npt={class:"loading-title"},Opt={class:"loading-steps"},wpt={class:"step-indicator"},Rpt={key:0,class:"check-icon"},$pt={key:1,class:"pulse-icon"},Mpt={key:2,class:"waiting-icon"},kpt={class:"step-text"},Lpt={class:"progress-bar"},Dpt={key:2},Ppt={key:3,class:"source-selector"},Bpt=["onClick"],Fpt={key:4,class:"source-selector"},Upt={class:"chat-input-container"},Gpt={key:0,class:"typing-indicator"},Vpt={class:"chat-input"},Hpt=["disabled"],Wpt={class:"p-6"},Kpt={class:"changes-preview mb-6"},zpt={class:"change-category mb-4"},jpt={class:"change-field-header"},Ypt={class:"field-name"},Xpt={class:"change-details"},qpt={class:"detail-label"},Zpt={class:"detail-value"},Qpt={key:0,class:"detail-affected"},Jpt={class:"flex justify-end gap-2"},emt={__name:"KanbanAI",setup(e){const t=En(),{t:n}=Pe(),s=t.currentRoute.value.params.accountId,a=F([{type:"ai",content:n("KANBAN.AI.WELCOME_MESSAGE")}]),o=F(""),l=F(!1),i=F(!1),r=F(null),d=F(null),u=F(!1),m=F(null),h=F(!1),_=F(!1),g=F(null),T=F([]);F(null);const S=F(!1),b=F(null),A=F(null),y=F(!0),x=async()=>{var ne,J,ue,Ne;try{const Ze=(J=(ne=(await window.axios.get(`/api/v1/accounts/${s}/integrations/apps`)).data)==null?void 0:ne.payload)==null?void 0:J.find(Xe=>Xe.id==="openai");return Ze!=null&&Ze.enabled&&((Ne=(ue=Ze==null?void 0:Ze.hooks)==null?void 0:ue[0])!=null&&Ne.settings)?(d.value=Ze.hooks[0].settings,!0):!1}catch(Re){return console.error("Erro ao carregar configurao OpenAI:",Re),!1}},$=async()=>{try{const{data:ne}=await ra.get();T.value=ne}catch(ne){console.error("Erro ao carregar funis:",ne),a.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao carregar os funis."})}},N=ne=>Object.entries(ne.stages).sort((Ne,Re)=>Ne[1].position-Re[1].position)[0][0],w=async ne=>{try{return(await window.axios.get(`/api/v1/accounts/${s}/conversations/${ne}/messages?before=100`)).data}catch(J){return console.error("Erro ao buscar mensagens:",J),null}},D=async ne=>{const J=N(g.value);try{const ue=await Promise.all(ne.slice(0,10).map(async(Ne,Re)=>{const Ze=Ne.name||"Novo Contato",Je=(await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:"Voc  um assistente que gera descries concisas para leads em um funil de vendas. Gere apenas uma descrio curta sem formatao."},{role:"user",content:`Gere uma descrio curta para um lead com os seguintes dados:
                  Nome: ${Ne.name}
                  Email: ${Ne.email||"No informado"}
                  Telefone: ${Ne.phone_number||"No informado"}`}],temperature:.7})})).json()).choices[0].message.content.trim();return{funnel_id:g.value.id,funnel_stage:J,position:Re,item_details:{title:Ze,description:Je||`Contato via ${Ne.email?"email":"telefone"}`,value:null,priority:"medium",email:Ne.email,phone:Ne.phone_number,contact_id:Ne.id,custom_attributes:{}}}}));for(const Ne of ue)await Dn.createItem(Ne);return ue.length}catch(ue){throw console.error("Erro ao criar itens:",ue),ue}},H=async ne=>{if(!ne||ne.length===0)return console.log("Nenhuma conversa encontrada"),0;const J=N(g.value);try{const Ne=(await Promise.all(ne.slice(0,10).map(async(Re,Ze)=>{var wt,ee,de;if(!((wt=Re==null?void 0:Re.meta)!=null&&wt.sender))return console.log("Conversa sem dados necessrios:",Re),null;const Xe=await w(Re.id);if(!Xe)return null;const Qe={contact:Re.meta.sender,messages:Xe.payload.filter(ie=>ie.content_type==="text").map(ie=>{var Ce;return{content:ie.content,sender_type:((Ce=ie.sender)==null?void 0:Ce.type)||"system",created_at:new Date(ie.created_at*1e3).toLocaleDateString()}}),status:Re.status,priority:Re.priority,assignee:Re.meta.assignee,channel:Re.meta.channel,created_at:new Date(Re.created_at*1e3).toLocaleDateString(),last_activity:new Date(Re.last_activity_at*1e3).toLocaleDateString()},st=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:"Voc  um assistente que analisa conversas de vendas e suporte. Retorne APENAS um objeto JSON vlido (sem formatao markdown ou cdigo) com os campos: title (string), description (string), value (number ou null - extraia qualquer valor monetrio mencionado em reais), priority (string: low, medium, high, urgent), scheduling_type (string: deadline ou scheduled), scheduled_at (data ISO ou null), deadline_at (data ISO ou null), offers (array de objetos com value e description). Se houver meno a valores em reais, crie uma oferta com esse valor. Se houver mltiplos valores mencionados, crie mltiplas ofertas."},{role:"user",content:`Analise esta conversa e extraia as informaes relevantes, prestando especial ateno a valores monetrios e prazos mencionados:
                  Cliente: ${Qe.contact.name}
                  Email: ${Qe.contact.email}
                  Telefone: ${Qe.contact.phone_number}
                  Canal: ${Qe.channel}
                  Status: ${Qe.status}
                  Mensagens:
                  ${Qe.messages.map(ie=>`[${ie.sender_type}] ${ie.created_at}: ${ie.content}`).join(`
`)}
                  Prioridade: ${Qe.priority||"normal"}
                  Atendente: ${(ee=Qe.assignee)==null?void 0:ee.name}`}],temperature:.7})})).json();let ht;try{const ie=st.choices[0].message.content.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();ht=JSON.parse(ie)}catch(ie){console.error("Erro ao parsear JSON da IA:",ie),ht={title:`Conversa com ${Re.meta.sender.name}`,description:Qe.messages[Qe.messages.length-1].content||"Nova conversa",value:null,priority:Re.priority||"medium",scheduling_type:"deadline",scheduled_at:null,deadline_at:null,offers:[]}}return{funnel_id:g.value.id,funnel_stage:J,position:Ze,item_details:{title:ht.title,description:ht.description,value:ht.value,priority:ht.priority||Re.priority||"medium",conversation_id:Re.id,agent_id:(de=Re.meta.assignee)==null?void 0:de.id,contact_id:Re.meta.sender.id,channel:Re.meta.channel,status:Re.status,scheduling_type:ht.scheduling_type||"deadline",scheduled_at:ht.scheduled_at,deadline_at:ht.deadline_at,offers:ht.offers||[],currency:ht.value||ht.offers&&ht.offers.length>0?{code:"BRL",locale:"pt-BR",symbol:"R$"}:null,custom_attributes:{}}}}))).filter(Re=>Re!==null);for(const Re of Ne)await Dn.createItem(Re);return Ne.length}catch(ue){throw console.error("Erro ao criar itens:",ue),ue}},B=async()=>{var J;if(!o.value.trim()||l.value)return;if(await he("message_sent",{message:o.value}),!d.value&&!await x()){i.value=!0;return}const ne=o.value;o.value="",l.value=!0,a.value.push({type:"user",content:ne});try{if(ne.toLowerCase().includes("gerar")||ne.toLowerCase().includes("criar")){if(await $(),T.value.length===0){a.value.push({type:"ai",content:"Nenhum funil encontrado. Por favor, crie um funil primeiro."});return}_.value=!0,a.value.push({type:"ai",content:"Primeiro, selecione o funil onde deseja criar os itens:"}),l.value=!1;return}const ue=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`Voc  um assistente especializado em metodologia Kanban e gesto gil de projetos. 
                     Para criar itens no quadro, o usurio deve usar as palavras "gerar" ou "criar".
                     Exemplo: "Gerar itens para o quadro" ou "Criar itens no kanban"`},{role:"user",content:ne}],temperature:.7})}),Ne=await ue.json();if(!ue.ok)throw new Error(((J=Ne.error)==null?void 0:J.message)||"Erro ao processar mensagem");a.value.push({type:"ai",content:Ne.choices[0].message.content})}catch(ue){console.error("Erro ao processar mensagem:",ue),a.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao processar sua mensagem."})}finally{l.value=!1,G()}},k=async ne=>{var J,ue;await he("source_selected",{source:ne}),h.value=!1,m.value=ne,u.value=!0;try{if(ne==="contacts"){a.value.push({type:"ai",content:"Ok, vou criar itens a partir dos contatos. Processando..."});const{data:Ne}=await wi.get(1),Re=await D(Ne.payload);a.value.push({type:"ai",content:` Criei ${Re} itens Kanban a partir dos contatos! Posso ajudar com mais alguma coisa?`})}else if(ne==="conversations"){a.value.push({type:"ai",content:"Ok, vou criar itens a partir das conversas. Processando..."});const Re=((ue=(J=(await WN.get()).data)==null?void 0:J.data)==null?void 0:ue.payload)||[],Ze=await H(Re);a.value.push({type:"ai",content:` Criei ${Ze} itens Kanban a partir das conversas! Posso ajudar com mais alguma coisa?`})}}catch(Ne){console.error("Erro ao processar itens:",Ne),a.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao criar os itens."})}finally{u.value=!1,m.value=null}},U=async ne=>{await he("funnel_selected",{funnel_id:ne.id,funnel_name:ne.name}),g.value=ne,_.value=!1,m.value?(h.value=!0,a.value.push({type:"ai",content:"Agora, selecione a fonte dos dados para criar os itens:"})):await W(ne),G()},G=()=>{r.value&&setTimeout(()=>{r.value.scrollTop=r.value.scrollHeight},100)};pt(async()=>{await x()});const L=[{id:"generate",title:"Gerar Itens",icon:"add",description:"Crie novos itens Kanban baseados em seus requisitos",action:"generate_items"},{id:"optimize",title:"Otimizar Fluxo",icon:"arrow-clockwise",description:"Receba sugestes para melhorar seu fluxo de trabalho",action:"analyze_flow"},{id:"schedule",title:"Agenda Inteligente",icon:"calendar",description:"Agendamento e priorizao de tarefas com IA",prompt:"Ajude-me a agendar e priorizar meus itens Kanban",disabled:!0,comingSoon:!0},{id:"analyze",title:"Analisar Quadro",icon:"arrow-trending-lines",description:"Obtenha insights sobre o desempenho do seu quadro",prompt:"Analise as mtricas do meu quadro Kanban e fornea insights",disabled:!0,comingSoon:!0}],M=async ne=>{if(await he("quick_action_used",{action_id:ne.id}),ne.action==="generate_items"){if(await $(),T.value.length===0){a.value.push({type:"ai",content:"Nenhum funil encontrado. Por favor, crie um funil primeiro."});return}m.value="generate",_.value=!0,a.value.push({type:"ai",content:"Primeiro, selecione o funil onde deseja criar os itens:"}),G()}else ne.id==="optimize"?(a.value.push({type:"ai",content:"Vou ajudar voc a otimizar seu fluxo de trabalho."}),await P(),G()):(o.value=ne.prompt,B())},R=async(ne,J=null)=>{try{const ue=T.value.find(Ze=>String(Ze.id)===String(ne));if(!ue)throw new Error("Funil no encontrado");let Ne={...ue.stages};if(J.category==="ESTRUTURA"){const Ze=J.stage_data.name.toLowerCase().replace(/[^a-z0-9]+/g,"_");if(J.title.toLowerCase().includes("adicionar"))Ne={...Ne,[Ze]:{name:J.stage_data.name,color:J.stage_data.color,position:J.stage_data.position,description:J.stage_data.description}};else if(J.title.toLowerCase().includes("remover")){const{[Ze]:Xe,...Qe}=Ne;Ne=Qe}else J.title.toLowerCase().includes("atualizar")&&(Ne[Ze]={...Ne[Ze],...J.stage_data})}else if(J.category==="TEMPLATE"){const Ze=Object.entries(ue.stages).find(([Je,st])=>{const ht=st.name.toLowerCase(),wt=J.target_stage.toLowerCase();return ht.includes(wt)||wt.includes(ht)});if(!Ze)throw new Error(`Etapa "${J.target_stage}" no encontrada`);const[Xe,Qe]=Ze;Ne[Xe]={...Qe,message_templates:[...Qe.message_templates||[],{id:Date.now(),title:J.title,content:J.description,webhook:J.webhook||{url:"",method:"POST",enabled:!1},stage_id:Xe,funnel_id:String(ne),conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]}}const Re={...ue,stages:Ne};await ra.update(ue.id,Re),await Pa.dispatch("funnel/fetch"),a.value.push({type:"ai",content:` ${J.category==="ESTRUTURA"?"Funil atualizado":"Template adicionado"} com sucesso!`})}catch(ue){console.error("Erro ao aplicar sugesto:",ue),a.value.push({type:"ai",content:ue.message||"Desculpe, ocorreu um erro ao aplicar a sugesto."})}},P=async()=>{try{if(await $(),!T.value||T.value.length===0){a.value.push({type:"ai",content:"Nenhum funil encontrado para anlise."});return}a.value.push({type:"ai",content:"Primeiro, selecione o funil que voc deseja analisar:"}),_.value=!0,g.value=null,m.value=null}catch(ne){console.error("Erro ao carregar funis:",ne),a.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao carregar os funis."})}},W=async ne=>{try{const J=["Analisando estrutura do funil...","Verificando fluxo de trabalho...","Identificando oportunidades de melhoria...","Gerando sugestes personalizadas...","Finalizando anlise..."];a.value.push({type:"ai",isLoading:!0,content:{title:`Analisando o funil "${ne.name}"`,steps:J,currentStep:0,progress:0}});for(let Xe=0;Xe<J.length;Xe++)await new Promise(Qe=>setTimeout(Qe,1e3)),a.value[a.value.length-1].content.currentStep=Xe,a.value[a.value.length-1].content.progress=(Xe+1)/J.length*100;const Re=(await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.value.api_key}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`Voc  um especialista em otimizao de funis Kanban.
                     Analise o funil e sugira melhorias em duas categorias:

                     1. ESTRUTURA (como no FunnelForm):
                     - Adicionar/Remover etapas
                     - Reordenar etapas
                     - Atualizar nomes e descries
                     - Campos disponveis: name, color, position, description
                     
                     2. TEMPLATE (como no MessageTemplateForm):
                     - Templates de mensagem para cada etapa
                     - Campos: title, content, webhook (opcional)
                     - Variveis disponveis:
                       {contact.name}, {contact.email}, {contact.phone}
                       {agent.name}, {stage.name}

                     IMPORTANTE: Retorne um JSON com o seguinte formato:
                     {
                       "suggestions": [
                         {
                           "title": "Ttulo da sugesto",
                           "description": "Detalhes da implementao",
                           "category": "ESTRUTURA|TEMPLATE",
                           "target_stage": "nome_da_etapa", // Para TEMPLATE
                           "stage_data": {  // Para ESTRUTURA
                             "name": "Nome da Etapa",
                             "color": "#HEX",
                             "position": 1,
                             "description": "Descrio"
                           },
                           "current_state": "Estado atual",
                           "expected_state": "Estado aps implementao",
                           "impact": "HIGH|MEDIUM|LOW",
                           "implementation": "EASY|MEDIUM|HARD"
                         }
                       ]
                     }`},{role:"user",content:`Analise este funil e sugira melhorias:
                     ${JSON.stringify(ne,null,2)}
                     
                     Considere:
                     - Tipo do funil: ${ne.name}
                     - Etapas atuais: ${Object.values(ne.stages).map(Xe=>Xe.name).join(", ")}
                     - Etapas sem descrio: ${Object.values(ne.stages).filter(Xe=>!Xe.description).length}
                     - Etapas com templates: ${Object.values(ne.stages).filter(Xe=>{var Qe;return((Qe=Xe.message_templates)==null?void 0:Qe.length)>0}).length}
                     
                     Sugira tanto melhorias na estrutura do funil quanto templates de mensagem apropriados.`}],temperature:.3})})).json()).choices[0].message.content.replace(/```json\s*/g,"").replace(/```\s*/g,"").replace(/^\s*{\s*/,"{").replace(/\s*}\s*$/,"}").trim();let Ze;try{Ze=JSON.parse(Re)}catch(Xe){throw console.error("Erro ao parsear JSON:",Xe),console.log("Contedo que falhou:",Re),new Error("Falha ao processar resposta da IA")}a.value.push({type:"ai",content:"Aqui esto os problemas identificados e suas solues:"}),Ze.suggestions.forEach((Xe,Qe)=>{a.value.push({type:"ai",isCard:!0,content:{title:Xe.title,description:Xe.description,category:Xe.category,impact:Xe.impact,implementation:Xe.implementation,currentState:Xe.current_state,expectedState:Xe.expected_state},actions:[{label:"Aplicar esta soluo",value:`apply_${Qe}`,style:"primary",suggestion:Xe},{label:"Ignorar",value:`ignore_${Qe}`,style:"secondary"}]})})}catch(J){console.error("Erro ao analisar funil:",J),a.value.push({type:"ai",content:"Desculpe, ocorreu um erro ao analisar o funil. Por favor, tente novamente."})}},Q=async(ne,J)=>{ne.value==="apply_all"?await R(g.value.id):ne.value.startsWith("apply_")&&(b.value=ne.suggestion,A.value=Z(ne.suggestion),S.value=!0)},Z=ne=>{var ue,Ne,Re,Ze,Xe,Qe,Je;if(!ne)throw new Error("Sugesto invlida");const J={type:ne.category,fields:[]};try{switch(ne.category){case"ESTRUTURA":{const st=((ue=ne.action)==null?void 0:ue.toLowerCase())||n("AI.ADD");J.fields.push({type:st,field:"Etapa",details:[{label:"Nome",value:((Ne=ne.stage_data)==null?void 0:Ne.name)||"No definido"},{label:"Descrio",value:((Re=ne.stage_data)==null?void 0:Re.description)||"No definida"},{label:"Posio",value:((Xe=(Ze=ne.stage_data)==null?void 0:Ze.position)==null?void 0:Xe.toString())||"No definida"},{label:"Cor",value:((Qe=ne.stage_data)==null?void 0:Qe.color)||"#000000"}]});break}case"TEMPLATE":{J.fields.push({type:"add",field:"Template de Mensagem",details:[{label:"Ttulo",value:ne.title||"No definido"},{label:"Contedo",value:ne.content||"No definido"},{label:"Etapa",value:ne.target_stage||"No definida"},{label:"Webhook",value:(Je=ne.webhook)!=null&&Je.enabled?"Ativado":"Desativado"}]});break}default:throw new Error(`Tipo de sugesto desconhecido: ${ne.category}`)}return J}catch(st){throw console.error("Erro ao preparar preview das mudanas:",st),new Error("No foi possvel preparar o preview das mudanas")}},j=ne=>(ne==null?void 0:ne.toLowerCase().replace("_","-"))||"",X=ne=>(ne==null?void 0:ne.toLowerCase())||"",q=ne=>(ne==null?void 0:ne.toLowerCase())||"",se=async()=>{try{await R(g.value.id,b.value),S.value=!1,b.value=null,A.value=null}catch(ne){console.error("Erro ao aplicar mudanas:",ne)}},he=async(ne,J={})=>{var ue,Ne,Re,Ze,Xe;try{const Je="https://api.os.stacklab.digital/api/events",st={installation_identifier:((ue=window.installationConfig)==null?void 0:ue.installationIdentifier)||Pa.state.globalConfig.installationIdentifier,installation_version:((Ne=window.installationConfig)==null?void 0:Ne.version)||Pa.state.globalConfig.version,installation_host:window.location.hostname,installation_env:"production",edition:((Re=window.installationConfig)==null?void 0:Re.edition)||Pa.state.globalConfig.edition,account_id:s,user_id:(Ze=Pa.state.auth.currentUser)==null?void 0:Ze.id,user_role:(Xe=Pa.state.auth.currentUser)==null?void 0:Xe.role},ht={event_name:`kanban_ai_${ne}`,event_data:{...J,...st,component:"KanbanAI",timestamp:new Date().toISOString()}};await fetch(Je,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(ht)})}catch(Qe){console.error("Telemetry error:",Qe)}},be=()=>{y.value=!y.value};return(ne,J)=>{const ue=z("fluent-icon"),Ne=z("woot-button");return p(),f("div",Jut,[J[18]||(J[18]=Fo('<header class="ai-header" data-v-e60d4b11><div class="flex items-center gap-3" data-v-e60d4b11><div class="header-avatar" data-v-e60d4b11><img src="https://img.freepik.com/free-psd/cute-3d-robot-waving-hand-cartoon-vector-icon-illustration-people-technology-isolated-flat-vector_138676-10649.jpg" alt="AI Avatar" class="header-avatar-image" data-v-e60d4b11></div><div class="header-text" data-v-e60d4b11><h2 class="text-lg relative z-10 font-semibold tracking-wide text-white" data-v-e60d4b11> Assistente Kanban AI </h2><p class="text-sm text-white/80 font-normal" data-v-e60d4b11> Otimize seu fluxo de trabalho com ajuda da IA </p></div></div></header>',1)),c("div",ept,[c("div",tpt,[c("div",npt,[J[5]||(J[5]=c("h3",{class:"section-title"},"Aes Rpidas",-1)),c("button",{onClick:be,class:"toggle-text-button"},E(y.value?"Expandir":"Colapsar"),1)]),pe(c("div",spt,[(p(),f(fe,null,Ae(L,Re=>c("button",{key:Re.id,class:re(["action-card group",{disabled:Re.disabled}]),onClick:Ze=>M(Re),disabled:Re.disabled},[c("div",opt,[v(ue,{icon:Re.icon,size:"18"},null,8,["icon"])]),c("div",lpt,[c("div",ipt,[c("span",rpt,E(Re.title),1),Re.comingSoon?(p(),f("span",cpt," Em breve ")):O("",!0)]),c("p",dpt,E(Re.description),1)])],10,apt)),64))],512),[[pn,!y.value]])]),c("div",upt,[J[14]||(J[14]=c("h3",{class:"section-title"},"Assistente IA",-1)),c("div",ppt,[c("div",{class:"chat-messages",ref_key:"messagesContainer",ref:r},[(p(!0),f(fe,null,Ae(a.value,(Re,Ze)=>(p(),f("div",{key:Ze,class:re(["message",Re.type])},[Re.type==="ai"?(p(),f("div",mpt,J[6]||(J[6]=[c("img",{src:"https://img.freepik.com/free-psd/cute-3d-robot-waving-hand-cartoon-vector-icon-illustration-people-technology-isolated-flat-vector_138676-10649.jpg",alt:"AI Avatar",class:"avatar-image"},null,-1)]))):O("",!0),c("div",hpt,[Re.isCard?(p(),f("div",fpt,[c("div",gpt,[c("h4",_pt,E(Re.content.title),1),c("div",vpt,[c("span",{class:re(["badge category-badge",j(Re.content.category)])},E(Re.content.category),3),c("span",{class:re(["badge impact-badge",X(Re.content.impact)])},E(Re.content.impact),3),c("span",{class:re(["badge implementation-badge",q(Re.content.implementation)])},E(Re.content.implementation),3)])]),c("div",bpt,[c("div",Ept,[J[7]||(J[7]=c("span",{class:"state-label"},"Estado Atual:",-1)),c("p",Tpt,E(Re.content.currentState),1)]),c("div",Apt,[J[8]||(J[8]=c("span",{class:"state-label"},"Estado Esperado:",-1)),c("p",ypt,E(Re.content.expectedState),1)])]),c("div",Spt,[J[9]||(J[9]=c("span",{class:"solution-label"},"Soluo Proposta:",-1)),c("p",Ipt,E(Re.content.description),1)]),c("div",Cpt,[(p(!0),f(fe,null,Ae(Re.actions,Xe=>(p(),V(Ne,{key:Xe.value,variant:Xe.style,size:"small",class:"action-button",onClick:Qe=>Q(Xe)},{default:K(()=>[Ee(E(Xe.label),1)]),_:2},1032,["variant","onClick"]))),128))])])):Re.isLoading?(p(),f("div",xpt,[c("h4",Npt,E(Re.content.title),1),c("div",Opt,[(p(!0),f(fe,null,Ae(Re.content.steps,(Xe,Qe)=>(p(),f("div",{key:Qe,class:re(["loading-step",{completed:Qe<Re.content.currentStep,current:Qe===Re.content.currentStep}])},[c("div",wpt,[Qe<Re.content.currentStep?(p(),f("span",Rpt,"  ")):Qe===Re.content.currentStep?(p(),f("span",$pt)):(p(),f("span",Mpt))]),c("span",kpt,E(Xe),1)],2))),128))]),c("div",Lpt,[c("div",{class:"progress-fill",style:Ct({width:`${Re.content.progress}%`})},null,4)])])):(p(),f("p",Dpt,E(Re.content),1)),_.value&&Re===a.value[a.value.length-1]?(p(),f("div",Ppt,[(p(!0),f(fe,null,Ae(T.value,Xe=>(p(),f("button",{key:Xe.id,class:"source-button",onClick:Qe=>U(Xe)},[J[10]||(J[10]=c("span",{class:"icon"},"",-1)),Ee(" "+E(Xe.name),1)],8,Bpt))),128))])):O("",!0),h.value&&Re===a.value[a.value.length-1]?(p(),f("div",Fpt,[c("button",{class:"source-button",onClick:J[0]||(J[0]=Xe=>k("contacts"))},J[11]||(J[11]=[c("span",{class:"icon"},"",-1),Ee(" Contatos ")])),c("button",{class:"source-button",onClick:J[1]||(J[1]=Xe=>k("conversations"))},J[12]||(J[12]=[c("span",{class:"icon"},"",-1),Ee(" Conversas ")]))])):O("",!0)])],2))),128))],512),c("div",Upt,[l.value?(p(),f("div",Gpt," IA est pensando... ")):O("",!0),c("div",Vpt,[pe(c("input",{"onUpdate:modelValue":J[2]||(J[2]=Re=>o.value=Re),type:"text",placeholder:"Pergunte qualquer coisa sobre seu quadro Kanban...",class:"ai-input",onKeyup:Hn(B,["enter"])},null,544),[[mt,o.value]]),c("button",{class:"send-button",disabled:l.value||!o.value.trim(),onClick:B},J[13]||(J[13]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"send-icon"},[c("path",{d:"M22 2L11 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,Hpt)])])])])]),i.value?(p(),V(Qut,{key:0,onClose:J[3]||(J[3]=Re=>i.value=!1)})):O("",!0),S.value?(p(),V(qt,{key:1,show:S.value,"on-close":()=>S.value=!1},{default:K(()=>{var Re,Ze,Xe;return[c("div",Wpt,[J[17]||(J[17]=c("div",{class:"mb-6"},[c("h3",{class:"text-lg font-medium mb-2"},"Confirmar Alteraes"),c("p",{class:"text-sm text-slate-600 dark:text-slate-400"}," As seguintes alteraes sero aplicadas ao funil: ")],-1)),c("div",Kpt,[c("div",zpt,[c("span",{class:re(["badge category-badge",j((Re=A.value)==null?void 0:Re.type)])},E((Ze=A.value)==null?void 0:Ze.type),3)]),(p(!0),f(fe,null,Ae((Xe=A.value)==null?void 0:Xe.fields,(Qe,Je)=>(p(),f("div",{key:Je,class:"change-field"},[c("div",jpt,[c("span",{class:re(["change-type-badge",Qe.type])},E(Qe.type==="add"?"Adicionar":"Atualizar"),3),c("span",Ypt,E(Qe.field),1)]),c("div",Xpt,[(p(!0),f(fe,null,Ae(Qe.details,(st,ht)=>(p(),f("div",{key:ht,class:"detail-item"},[c("span",qpt,E(st.label)+":",1),c("span",Zpt,E(st.value),1),st.affected?(p(),f("span",Qpt," Afeta: "+E(st.affected),1)):O("",!0)]))),128))])]))),128))]),c("div",Jpt,[v(Ne,{variant:"clear",onClick:J[4]||(J[4]=Qe=>S.value=!1)},{default:K(()=>J[15]||(J[15]=[Ee(" Cancelar ")])),_:1}),v(Ne,{variant:"primary",onClick:se},{default:K(()=>J[16]||(J[16]=[Ee(" Confirmar e Aplicar ")])),_:1})])])]}),_:1},8,["show","on-close"])):O("",!0)])}}},tmt=Fe(emt,[["__scopeId","data-v-e60d4b11"]]),nmt={key:0,class:"mb-4 p-4 bg-ruby-50 dark:bg-ruby-900/20 border border-ruby-200 dark:border-ruby-800 rounded-lg"},smt={class:"flex items-center gap-2"},amt={class:"text-ruby-700 dark:text-ruby-200"},omt={class:"grid grid-cols-[1fr_400px] gap-6"},lmt={class:"space-y-6"},imt={class:"block text-sm font-medium mb-2"},rmt=["placeholder"],cmt={class:"block text-sm font-medium mb-2"},dmt=["placeholder"],umt={class:"text-lg font-medium mb-4"},pmt={class:"flex items-center justify-between"},mmt={class:"flex items-start gap-2"},hmt={class:"w-[180px] shrink-0"},fmt={class:"flex-1 min-w-0"},gmt={class:"mt-4"},_mt={key:0,class:"mb-3 space-y-2"},vmt={class:"text-xs px-2 py-1 bg-woot-100 dark:bg-woot-900 text-woot-700 dark:text-woot-300 rounded"},bmt={key:0,class:"text-xs text-slate-600 dark:text-slate-400"},Emt={key:1,class:"text-xs text-slate-600 dark:text-slate-400"},Tmt={class:"text-xs font-medium"},Amt=["onClick"],ymt={class:"flex items-center gap-2"},Smt=["placeholder"],Imt={class:"flex justify-end"},Cmt={class:"border border-slate-100 dark:border-slate-800 rounded-lg p-4 space-y-4"},xmt={key:0,class:"absolute left-0 top-full w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[99999]"},Nmt=["onClick"],Omt={class:"text-sm"},wmt={key:0,class:"px-3 py-2 text-slate-400 text-sm"},Rmt={key:0,class:"space-y-1"},$mt={class:"flex items-center justify-between px-2 py-1 bg-slate-50 dark:bg-slate-800 rounded-lg mb-2"},Mmt={class:"text-sm text-slate-600 dark:text-slate-300"},kmt={class:"text-sm"},Lmt=["onClick"],Dmt={class:"border border-slate-100 dark:border-slate-800 rounded-lg p-4 space-y-4"},Pmt={class:"space-y-4"},Bmt=["onUpdate:modelValue"],Fmt=["onUpdate:modelValue"],Umt=["onClick"],Gmt={class:"flex justify-end gap-2"},Vmt={class:"border border-dashed border-slate-50 dark:border-slate-900 rounded-lg p-6"},Hmt={class:"sticky top-0"},Wmt={class:"space-y-3"},Kmt=["onMouseenter","onMouseleave"],zmt={class:"flex items-center gap-2 p-3 select-none"},jmt=["title"],Ymt={class:"flex items-center gap-2"},Xmt={class:"relative"},qmt=["onClick"],Zmt={key:0,class:"absolute left-1/2 -translate-x-1/2 top-full mt-1 px-2 py-1 text-xs rounded bg-slate-700 text-white whitespace-nowrap z-10"},Qmt=["onClick"],Jmt=["onClick"],eht={class:"stage-preview-details p-0 max-h-0 opacity-0 overflow-hidden transition-all duration-200 ease-in-out group-hover:px-3 group-hover:pb-3 group-hover:opacity-100 group-hover:max-h-[500px] group-hover:pointer-events-auto pointer-events-none"},tht={class:"text-sm text-slate-600 mb-1"},nht={key:0,class:"mt-1"},sht={class:"flex flex-wrap gap-1"},aht={key:0,class:"flex flex-col items-center justify-center py-8 text-slate-400"},oht={class:"text-sm"},lht={__name:"FunnelForm",props:{isEditing:{type:Boolean,default:!1},initialData:{type:Object,default:()=>({})}},emits:["saved","close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe();Pn();const{isStacklab:o}=Js(),l=F(!1),i=F(""),r=F({name:n.initialData.name||"",description:n.initialData.description||"",stages:{},agents:n.initialData.agents||[],global_custom_attributes:Array.isArray(n.initialData.global_custom_attributes)?n.initialData.global_custom_attributes.map(be=>({name:be.name||"",type:be.type||""})):[]}),d=F([]),u=F({name:"",color:"#FF6B6B",description:"",auto_create_conditions:[]}),m=F(null),h={animation:150,ghostClass:"ghost-card"},_=F([]),g=F(!1),T=F(new Set);F(!1),F(null);const S=F({type:"contact_has_tag",value:"",attribute:"",operator:"equal_to"}),b=be=>be.toLowerCase().trim().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"");ot(()=>u.value.name,be=>{be&&!m.value&&(u.value.id=b(be))});const A=()=>{const be={};return d.value.forEach((ne,J)=>{var Re,Ze,Xe;const ue=J+1,Ne=((Xe=(Ze=(Re=n.initialData)==null?void 0:Re.stages)==null?void 0:Ze[ne.id])==null?void 0:Xe.message_templates)||[];be[ne.id]={name:ne.name,color:ne.color,position:ue,description:ne.description,auto_create_conditions:ne.auto_create_conditions||[],message_templates:Ne},console.log(`Formatando para API: ${ne.name} -> posio ${ue}`)}),be},y=async()=>{if(n.isEditing)try{d.value.forEach((ne,J)=>{ne.position=J+1,console.log(`Atualizando posio: ${ne.name} -> posio ${ne.position}`)});const be={name:r.value.name,description:r.value.description,stages:A()};console.log("Payload de ordenao:",be),n.initialData.stages=be.stages}catch(be){console.error("Erro ao atualizar ordem:",be)}},x=be=>{var ne;if(!((ne=be==null?void 0:be.target)!=null&&ne.closest(".colorpicker--chrome"))&&u.value.name){if(m.value){const J=d.value.findIndex(ue=>ue.id===m.value.id);J!==-1&&(d.value[J]={...m.value,name:u.value.name,color:u.value.color,description:u.value.description,auto_create_conditions:u.value.auto_create_conditions,id:m.value.id},n.isEditing&&y()),m.value=null}else{let J=b(u.value.name),ue=1;for(;T.value.has(J);)J=`${b(u.value.name)}_${ue}`,ue++;d.value.push({...u.value,id:J}),T.value.add(J)}u.value={name:"",color:"#FF6B6B",description:"",auto_create_conditions:[]}}},$=be=>{d.value.splice(be,1)};pt(()=>{console.log("FunnelForm mounted, initialData:",n.initialData),(n.isEditing||n.initialData)&&(console.log("Inicializando form com dados:",n.initialData),r.value={name:n.initialData.name||"",description:n.initialData.description||"",stages:n.initialData.stages||{},agents:n.initialData.agents||[],global_custom_attributes:Array.isArray(n.initialData.global_custom_attributes)?n.initialData.global_custom_attributes.map(be=>({name:be.name||"",type:be.type||""})):[{name:"",type:""}]},console.log("formData atualizado:",r.value),n.initialData.stages&&(console.log("Inicializando etapas:",n.initialData.stages),d.value=Object.entries(n.initialData.stages).map(([be,ne])=>{const J={id:be,name:ne.name,color:ne.color,description:ne.description,position:parseInt(ne.position,10)||0,auto_create_conditions:ne.auto_create_conditions||[]};return console.log("Etapa mapeada:",J),J}).sort((be,ne)=>be.position-ne.position),console.log("Etapas inicializadas e ordenadas por posio:",d.value))),N(),(!Array.isArray(r.value.global_custom_attributes)||r.value.global_custom_attributes.length===0)&&(r.value.global_custom_attributes=[{name:"",type:""}])});const N=async()=>{var be,ne;try{g.value=!0;const{data:J}=await Qc.get();(ne=(be=n.initialData)==null?void 0:be.agents)!=null&&ne.length&&n.initialData.agents.forEach(ue=>{J.find(Ne=>Ne.id===ue.id)||J.push(ue)}),_.value=J}catch(J){console.error("Erro ao carregar agentes:",J)}finally{g.value=!1}},w=()=>{if(!S.value.value)return;const be={...S.value};u.value.auto_create_conditions.push(be),S.value={type:"contact_has_tag",value:"",attribute:"",operator:"equal_to"}},D=be=>{u.value.auto_create_conditions.splice(be,1)},H=be=>({contact_has_tag:"Contato tem tag",contact_has_custom_attribute:"Atributo customizado",message_contains:"Mensagem contm",conversation_has_priority:"Prioridade da conversa",inbox_matches:"Inbox especfico"})[be]||be,B=be=>({equal_to:"Igual a",contains:"Contm",not_equal_to:"Diferente de"})[be]||be,k=C({get:()=>r.value.global_custom_attributes,set:be=>{r.value.global_custom_attributes=be}});function U(){k.value.push({name:"",type:""})}function G(be){k.value.splice(be,1)}const L=async()=>{var be,ne;try{if(l.value=!0,i.value="",!o&&!n.isEditing){const{data:Re}=await ra.get();if(Re.length>=2){i.value=a("KANBAN.FUNNELS.FORM.ERROR_LIMIT_REACHED");return}}const J=A();console.log("Estgios formatados para submit:",J);const ue={name:r.value.name,description:r.value.description,stages:J,agents:r.value.agents,global_custom_attributes:r.value.global_custom_attributes.filter(Re=>Re.name.trim()!==""&&Re.type.trim()!=="")};let Ne;n.isEditing?Ne={data:{...n.initialData,...ue,stages:ue.stages}}:Ne=await ra.create(ue),Ne.data&&s("saved",Ne.data)}catch(J){console.error("Erro ao salvar funil:",J),((ne=(be=J.response)==null?void 0:be.data)==null?void 0:ne.code)==="FUNNEL_LIMIT_REACHED"?i.value=J.response.data.error:i.value=a("KANBAN.FUNNELS.FORM.ERROR_GENERIC")}finally{l.value=!1}},M=be=>{u.value={id:be.id,name:be.name,color:be.color,description:be.description,auto_create_conditions:be.auto_create_conditions||[]},m.value=be};ot(()=>r.value.agents,be=>{console.log("Agentes atualizados:",be)}),ot(()=>d.value,be=>{console.log("Etapas atualizadas:",be)},{deep:!0}),ot(()=>r.value,be=>{console.log("FormData atualizado:",be)},{deep:!0}),ot(()=>r.value.global_custom_attributes,be=>{(!Array.isArray(be)||be.length===0)&&(r.value.global_custom_attributes=[{name:"",type:""}])},{immediate:!0});const R=F(""),P=F(!1),W=F(null),Q=C(()=>R.value?_.value.filter(be=>!r.value.agents.some(ne=>ne.id===be.id)&&be.name.toLowerCase().includes(R.value.toLowerCase())):_.value.filter(be=>!r.value.agents.some(ne=>ne.id===be.id)));function Z(be){r.value.agents.some(ne=>ne.id===be.id)||r.value.agents.push(be),P.value=!1,R.value=""}function j(be){r.value.agents=r.value.agents.filter(ne=>ne.id!==be.id)}function X(be){var ne;(ne=W.value)!=null&&ne.contains(be.target)||(P.value=!1,window.removeEventListener("click",X))}function q(){P.value=!0,setTimeout(()=>{window.removeEventListener("click",X),window.addEventListener("click",X)},0)}const se=F({});async function he(be){navigator.clipboard.writeText(be),se.value[be]=!0,await jt(),setTimeout(()=>{se.value[be]=!1},1500)}return(be,ne)=>{const J=z("fluent-icon");return p(),f("form",{class:"funnel-form",onSubmit:ze(L,["prevent"])},[i.value?(p(),f("div",nmt,[c("div",smt,[v(J,{icon:"error-circle",size:"20",class:"text-ruby-500 dark:text-ruby-300"}),c("span",amt,E(i.value),1)])])):O("",!0),c("div",omt,[c("div",lmt,[c("div",null,[c("label",imt,E(I(a)("KANBAN.FUNNELS.FORM.NAME.LABEL")),1),pe(c("input",{"onUpdate:modelValue":ne[0]||(ne[0]=ue=>r.value.name=ue),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(a)("KANBAN.FUNNELS.FORM.NAME.PLACEHOLDER"),required:""},null,8,rmt),[[mt,r.value.name]])]),c("div",null,[c("label",cmt,E(I(a)("KANBAN.FUNNELS.FORM.DESCRIPTION.LABEL")),1),pe(c("textarea",{"onUpdate:modelValue":ne[1]||(ne[1]=ue=>r.value.description=ue),rows:"3",class:"w-full px-3 py-2 border rounded-lg",placeholder:I(a)("KANBAN.FUNNELS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,dmt),[[mt,r.value.description]])]),c("div",{class:re(["border border-slate-100 dark:border-slate-800 rounded-lg p-4 space-y-4",{"border-2":m.value}]),style:Ct(m.value?{borderColor:u.value.color}:{})},[c("h4",umt,[c("div",pmt,[ne[13]||(ne[13]=c("span",null,"Etapas do Funil",-1)),m.value?(p(),f("span",{key:0,class:"text-sm px-2 py-1 rounded",style:Ct({backgroundColor:`${u.value.color}20`,color:u.value.color})}," Editando etapa ",4)):O("",!0)])]),c("div",null,[ne[14]||(ne[14]=c("label",{class:"block text-sm font-medium mb-2"}," Nome da etapa ",-1)),pe(c("input",{"onUpdate:modelValue":ne[2]||(ne[2]=ue=>u.value.name=ue),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"Nome da etapa"},null,512),[[mt,u.value.name]])]),c("div",mmt,[c("div",hmt,[ne[15]||(ne[15]=c("label",{class:"block text-sm font-medium mb-2"}," Cor ",-1)),v(A2,{modelValue:u.value.color,"onUpdate:modelValue":ne[3]||(ne[3]=ue=>u.value.color=ue)},null,8,["modelValue"])]),c("div",fmt,[ne[16]||(ne[16]=c("label",{class:"block text-sm font-medium mb-2"}," Descrio ",-1)),pe(c("input",{"onUpdate:modelValue":ne[4]||(ne[4]=ue=>u.value.description=ue),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"Descrio da etapa"},null,512),[[mt,u.value.description]])])]),c("div",gmt,[ne[19]||(ne[19]=c("label",{class:"block text-sm font-medium mb-2"},[Ee(" Condies de Auto Criao "),c("span",{class:"text-xs text-slate-400 ml-1"}," (Deixe vazio para no criar automaticamente) ")],-1)),u.value.auto_create_conditions.length>0?(p(),f("div",_mt,[(p(!0),f(fe,null,Ae(u.value.auto_create_conditions,(ue,Ne)=>(p(),f("div",{key:Ne,class:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-800 rounded border"},[c("span",vmt,E(H(ue.type)),1),ue.attribute?(p(),f("span",bmt,E(ue.attribute),1)):O("",!0),ue.operator&&ue.type==="contact_has_custom_attribute"?(p(),f("span",Emt,E(B(ue.operator)),1)):O("",!0),c("span",Tmt,E(ue.value),1),c("button",{type:"button",onClick:Re=>D(Ne),class:"ml-auto text-ruby-500 hover:text-ruby-600"},"  ",8,Amt)]))),128))])):O("",!0),c("div",ymt,[pe(c("select",{"onUpdate:modelValue":ne[5]||(ne[5]=ue=>S.value.type=ue),class:"px-2 py-1 border rounded text-sm w-40 h-10 align-middle"},ne[17]||(ne[17]=[Fo('<option value="contact_has_tag" data-v-bba8b998>Contato tem tag</option><option value="contact_has_custom_attribute" data-v-bba8b998> Atributo customizado </option><option value="message_contains" data-v-bba8b998>Mensagem contm</option><option value="conversation_has_priority" data-v-bba8b998> Prioridade da conversa </option><option value="inbox_matches" data-v-bba8b998>Inbox especfico</option>',5)]),512),[[zt,S.value.type]]),S.value.type==="contact_has_custom_attribute"?pe((p(),f("input",{key:0,"onUpdate:modelValue":ne[6]||(ne[6]=ue=>S.value.attribute=ue),type:"text",placeholder:"Atributo",class:"px-2 py-1 border rounded text-sm w-40 h-10 align-middle"},null,512)),[[mt,S.value.attribute]]):O("",!0),S.value.type==="contact_has_custom_attribute"?pe((p(),f("select",{key:1,"onUpdate:modelValue":ne[7]||(ne[7]=ue=>S.value.operator=ue),class:"px-2 py-1 border rounded text-sm w-40 h-10 align-middle"},ne[18]||(ne[18]=[c("option",{value:"equal_to"},"Igual a",-1),c("option",{value:"contains"},"Contm",-1),c("option",{value:"not_equal_to"},"Diferente de",-1)]),512)),[[zt,S.value.operator]]):O("",!0),pe(c("input",{"onUpdate:modelValue":ne[8]||(ne[8]=ue=>S.value.value=ue),type:"text",placeholder:S.value.type==="contact_has_tag"?"Tag":S.value.type==="message_contains"?"Texto":S.value.type==="conversation_has_priority"?"Prioridade":S.value.type==="inbox_matches"?"ID da inbox":"Valor",class:"px-2 py-1 border rounded text-sm w-40 h-10 align-middle"},null,8,Smt),[[mt,S.value.value]]),v(ce,{color:"blue",size:"sm",disabled:!S.value.value,onClick:w,class:"ml-2 flex items-center justify-center p-0 align-middle !h-10 !w-10 !min-w-[40px]",style:{height:"38px",width:"40px","min-width":"40px","margin-top":"-9px"}},{icon:K(()=>[v(J,{icon:"add",size:"18"})]),_:1},8,["disabled"])])]),c("div",Imt,[v(ce,{variant:"solid",color:"blue",size:"sm",disabled:!u.value.name,onClick:ze(x,["stop"]),label:m.value?"Salvar":"Adicionar etapa"},null,8,["disabled","label"])])],6),c("div",Cmt,[ne[20]||(ne[20]=c("h4",{class:"text-lg font-medium mb-4"},"Agentes do Funil",-1)),c("div",{ref_key:"agentSelectorRef",ref:W,class:"relative mb-2"},[pe(c("input",{"onUpdate:modelValue":ne[9]||(ne[9]=ue=>R.value=ue),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"Buscar agente...",onFocus:q,onInput:q},null,544),[[mt,R.value]]),P.value?(p(),f("div",xmt,[(p(!0),f(fe,null,Ae(Q.value,ue=>(p(),f("div",{key:ue.id,class:"px-3 py-2 hover:bg-woot-50 dark:hover:bg-slate-700 cursor-pointer flex items-center gap-2",onClick:Ne=>Z(ue)},[v(Ft,{name:ue.name,src:ue.avatar_url,size:24,status:ue.availability_status},null,8,["name","src","status"]),c("span",Omt,E(ue.name),1)],8,Nmt))),128)),Q.value.length===0?(p(),f("div",wmt," Nenhum agente encontrado ")):O("",!0)])):O("",!0)],512),r.value.agents.length?(p(),f("div",Rmt,[c("div",$mt,[c("span",Mmt,E(r.value.agents.length)+" agente"+E(r.value.agents.length!==1?"s":"")+" selecionado"+E(r.value.agents.length!==1?"s":""),1),c("button",{type:"button",class:"text-xs text-ruby-500 hover:text-ruby-600 dark:text-ruby-400 dark:hover:text-ruby-300",onClick:ne[10]||(ne[10]=ue=>r.value.agents=[])}," Limpar seleo ")]),(p(!0),f(fe,null,Ae(r.value.agents,ue=>(p(),f("div",{key:ue.id,class:"flex items-center gap-2 px-2 py-1 border border-slate-100 dark:border-slate-800 rounded mb-1"},[v(Ft,{name:ue.name,src:ue.avatar_url,size:24,status:ue.availability_status},null,8,["name","src","status"]),c("span",kmt,E(ue.name),1),c("button",{type:"button",class:"ml-auto text-xs text-ruby-500 hover:text-ruby-600",onClick:Ne=>j(ue)},"  ",8,Lmt)]))),128))])):O("",!0)]),c("div",Dmt,[ne[22]||(ne[22]=c("h4",{class:"text-lg font-medium mb-4"}," Campos Personalizados Globais ",-1)),c("div",Pmt,[(p(!0),f(fe,null,Ae(k.value||[],(ue,Ne)=>(p(),f("div",{key:Ne,class:"flex gap-2 items-center"},[pe(c("input",{"onUpdate:modelValue":Re=>ue.name=Re,type:"text",class:"w-1/2 rounded-lg",placeholder:"Chave (name)"},null,8,Bmt),[[mt,ue.name]]),pe(c("select",{"onUpdate:modelValue":Re=>ue.type=Re,class:"w-1/2 rounded-lg"},ne[21]||(ne[21]=[Fo('<option value="" disabled selected data-v-bba8b998>Tipo</option><option value="string" data-v-bba8b998>Texto</option><option value="number" data-v-bba8b998>Nmero</option><option value="date" data-v-bba8b998>Data</option><option value="boolean" data-v-bba8b998>Verdadeiro/Falso</option>',5)]),8,Fmt),[[zt,ue.type]]),c("button",{type:"button",onClick:Re=>G(Ne),class:"p-1 text-ruby-500"},"  ",8,Umt)]))),128)),c("button",{type:"button",onClick:U,class:"mt-2 px-3 py-1 bg-woot-500 text-white rounded"}," Adicionar campo ")])]),c("div",Gmt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:ne[11]||(ne[11]=ue=>s("close"))},{default:K(()=>[Ee(E(I(a)("KANBAN.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",type:"submit",isLoading:l.value,disabled:!r.value.name||!d.value.length},{default:K(()=>[Ee(E(I(a)(e.isEditing?"KANBAN.SAVE":"KANBAN.FUNNELS.FORM.CREATE.TITLE")),1)]),_:1},8,["isLoading","disabled"])])]),c("div",Vmt,[c("div",Hmt,[ne[23]||(ne[23]=c("h4",{class:"text-lg font-medium mb-4"},"Pr-visualizao das etapas",-1)),c("div",Wmt,[v(I(kr),{modelValue:d.value,"onUpdate:modelValue":ne[12]||(ne[12]=ue=>d.value=ue),options:h,"item-key":"id",class:"space-y-3",onChange:y},{item:K(({element:ue,index:Ne})=>[c("div",{class:"stage-preview-card flex flex-col border border-slate-100 dark:border-slate-800 rounded-lg cursor-move group transition-colors duration-200 bg-slate-100 dark:bg-slate-800",onMouseenter:Re=>ue._hover=!0,onMouseleave:Re=>ue._hover=!1,style:Ct(ue._hover?{background:`linear-gradient(90deg, ${ue.color}22 0%, transparent 100%)`}:{})},[c("div",zmt,[c("div",{class:"w-4 h-4 rounded-full",style:Ct({backgroundColor:ue.color})},null,4),c("div",{class:"font-medium flex-1 truncate",title:ue.name},E(ue.name.length>25?ue.name.slice(0,25)+"":ue.name),9,jmt),c("div",Ymt,[c("div",Xmt,[c("button",{type:"button",class:"text-slate-400 hover:text-slate-500 p-0 m-0",onClick:ze(Re=>he(ue.id),["stop"])},[v(J,{icon:"copy",size:"16"})],8,qmt),se.value[ue.id]?(p(),f("span",Zmt,"Copiado!")):O("",!0)]),c("button",{type:"button",class:"text-xs text-slate-400 hover:text-slate-500 p-0 m-0",onClick:ze(Re=>M(ue),["stop"])},[v(J,{icon:"edit",size:"16"})],8,Qmt),c("button",{type:"button",class:"text-slate-400 hover:text-slate-500 p-0 m-0",onClick:ze(Re=>$(Ne),["stop"])},[v(J,{icon:"delete",size:"16"})],8,Jmt)])]),c("div",eht,[c("div",tht,E(ue.description),1),ue.auto_create_conditions&&ue.auto_create_conditions.length>0?(p(),f("div",nht,[c("div",sht,[(p(!0),f(fe,null,Ae(ue.auto_create_conditions,(Re,Ze)=>(p(),f("span",{key:Ze,class:"text-xs px-1 py-0.5 bg-slate-100 dark:bg-slate-700 rounded"},E(H(Re.type))+": "+E(Re.value),1))),128))])])):O("",!0)])],44,Kmt)]),_:1},8,["modelValue"]),d.value.length?O("",!0):(p(),f("div",aht,[v(J,{icon:"list",size:"32",class:"mb-2"}),c("p",oht,E(I(a)("KANBAN.FUNNELS.FORM.STAGES.EMPTY")),1)]))])])])])],32)}}},Zp=Fe(lht,[["__scopeId","data-v-bba8b998"]]),iht={class:"space-y-6"},rht={key:0,class:"space-y-6"},cht={class:"text-center space-y-2"},dht={class:"text-lg font-medium"},uht={class:"text-sm text-slate-500"},pht={class:"relative pt-1"},mht={class:"flex mb-2 items-center justify-between"},hht={class:"text-right"},fht={class:"text-xs font-semibold inline-block"},ght={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-slate-200"},_ht={class:"border rounded-lg divide-y max-h-[400px] overflow-y-auto"},vht={class:"flex items-center gap-3"},bht={class:"flex-shrink-0"},Eht={class:"flex-1"},Tht={class:"text-sm font-medium"},Aht={class:"text-xs text-slate-500"},yht={key:0,class:"text-xs text-ruby-500 mt-1"},Sht={class:"flex justify-end"},Iht={key:1,class:"space-y-6"},Cht={class:"space-y-4"},xht={class:"flex items-center justify-between"},Nht={class:"text-sm font-medium"},Oht={class:"flex items-center gap-4"},wht={class:"flex items-center gap-2 text-sm"},Rht={key:0,class:"space-y-4"},$ht={class:"bg-woot-50 p-4 rounded-lg space-y-2"},Mht={class:"flex items-center justify-between"},kht={class:"text-sm font-medium"},Lht={class:"flex flex-wrap gap-2"},Dht={key:0,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-woot-100"},Pht=["onClick"],Bht={key:1,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-woot-100"},Fht=["onClick"],Uht={class:"space-y-4"},Ght={class:"flex items-center justify-between"},Vht={class:"text-sm font-medium"},Hht={class:"text-xs text-slate-500"},Wht={class:"grid grid-cols-2 gap-4"},Kht={class:"block text-sm mb-2"},zht={value:""},jht={value:"open"},Yht={value:"won"},Xht={value:"lost"},qht={class:"block text-sm mb-2"},Zht={value:""},Qht={value:"urgent"},Jht={value:"high"},eft={value:"medium"},tft={value:"low"},nft={class:"block text-sm mb-2"},sft={value:""},aft=["value"],oft={class:"block text-sm mb-2"},lft={value:""},ift={value:"today"},rft={value:"week"},cft={value:"month"},dft={class:"flex items-center gap-4"},uft={class:"flex items-center gap-2"},pft={class:"text-sm"},mft={key:1,class:"max-h-60 overflow-y-auto border rounded-lg divide-y"},hft=["onClick"],fft=["checked"],gft={key:2,class:"text-center text-sm text-slate-500 py-4"},_ft={class:"space-y-4"},vft={class:"text-sm font-medium"},bft={key:0,class:"flex justify-center"},Eft={key:1,class:"space-y-4"},Tft={value:""},Aft=["value"],yft={key:0,class:"p-4 bg-slate-50 rounded-lg"},Sft={class:"text-sm"},Ift={class:"p-4 bg-woot-50 rounded-lg"},Cft={class:"text-sm"},xft={class:"flex justify-end gap-2"},Nft={__name:"BulkSendMessageModal",props:{items:{type:Array,required:!0}},emits:["close","send"],setup(e,{emit:t}){const n=Pn();C(()=>{var k;return(k=n.getters.getCurrentAccount)==null?void 0:k.id});const s=C(()=>n.getters["funnel/getSelectedFunnel"]),a=e,o=t,{t:l}=Pe(),i=F(!1),r=F(!1),d=F([]),u=F(null),m=F({status:"",priority:"",hasAttachments:!1,stage:"",assignee:"",lastActivity:"",tags:[],customFields:[]}),h=F([]),_=F(new Set),g=F(!1),T=F([]),S=F(0),b=F(0),A=F(0),y=F(!1),x=async()=>{try{i.value=!0;const k=await ra.get(),U=[];k.data.forEach(G=>{Object.values(G.stages).forEach(L=>{L.message_templates&&U.push(...L.message_templates)})}),d.value=U}catch(k){console.error("Erro ao carregar templates:",k)}finally{i.value=!1}},$=async()=>{var k,U;try{if(!((k=s.value)!=null&&k.id))return;if(a.items.length===0){const G=await Dn.getItems(s.value.id);console.log("[DEBUG] Response completa:",G),console.log("[DEBUG] Response data:",G.data);const L=((U=G.data)==null?void 0:U.items)||[];console.log("[DEBUG] Items data (array):",L.length),h.value=L,console.log("[DEBUG] Usando todos os itens do funil:",h.value.length)}else h.value=a.items,console.log("[DEBUG] Usando itens dos props:",h.value.length);console.log("[DEBUG] Items com conversa:",h.value.filter(G=>{var L;return(L=G.item_details)==null?void 0:L.conversation_id}).length),console.log("[DEBUG] IDs das conversas:",h.value.map(G=>{var L,M;return{itemId:G.id,conversationId:(L=G.item_details)==null?void 0:L.conversation_id,hasConversation:!!((M=G.item_details)!=null&&M.conversation)}}))}catch(G){console.error("Erro ao carregar itens:",G)}},N=C(()=>h.value.filter(k=>{var U,G,L;if(!((U=k.item_details)!=null&&U.conversation_id)||m.value.status&&k.item_details.status!==m.value.status||m.value.priority&&k.item_details.priority!==m.value.priority||m.value.hasAttachments&&!((G=k.attachments)!=null&&G.length)||m.value.stage&&k.funnel_stage!==m.value.stage||m.value.assignee&&k.item_details.agent_id!==m.value.assignee)return!1;if(m.value.lastActivity){const M=new Date((L=k.item_details.conversation)==null?void 0:L.last_activity_at),P=Math.floor((new Date-M)/(1e3*60*60*24));switch(m.value.lastActivity){case"today":if(P>0)return!1;break;case"week":if(P>7)return!1;break;case"month":if(P>30)return!1;break}}return!0})),w=k=>{const U=k.item_details.conversation_id;_.value.has(U)?_.value.delete(U):_.value.add(U)},D=()=>{_.value.size===N.value.length?_.value.clear():_.value=new Set(N.value.map(k=>k.item_details.conversation_id))},H=async()=>{var k;if(!(!u.value||_.value.size===0))try{g.value=!0,r.value=!0,T.value=[],S.value=0,b.value=0,A.value=0;const U=N.value.filter(G=>_.value.has(G.item_details.conversation_id));for(const G of U){try{const L=G.item_details.conversation_id,M=((k=G.item_details.conversation)==null?void 0:k.inbox_id)||1;await Au.create({conversationId:L,message:u.value.content,private:!1,message_type:"outgoing",inbox_id:M}),T.value.push({id:G.id,title:G.item_details.title,conversationId:L,status:"success"}),S.value++}catch(L){T.value.push({id:G.id,title:G.item_details.title,conversationId:G.item_details.conversation_id,status:"error",error:L.message}),b.value++}A.value=T.value.length/U.length*100}It.emit("newToastMessage",{message:`Processo concludo: ${S.value} mensagens enviadas, ${b.value} falhas`,action:{type:S.value>0?"success":"error"}})}catch{It.emit("newToastMessage",{message:"Erro ao processar envios",action:{type:"error"}})}finally{r.value=!1}},B=()=>{g.value&&(g.value=!1,T.value=[],S.value=0,b.value=0,A.value=0),o("close")};return pt(()=>{x(),$()}),(k,U)=>{var L;const G=z("fluent-icon");return p(),f("div",iht,[g.value?(p(),f("div",rht,[c("div",cht,[c("h3",dht,E(I(l)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.PROCESSING_TITLE")),1),c("p",uht,E(I(l)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.PROCESSING_DESCRIPTION",{count:T.value.length,total:_.value.size})),1)]),c("div",pht,[c("div",mht,[c("div",null,[c("span",{class:re(["text-xs font-semibold inline-block py-1 px-2 rounded-full",{"text-emerald-600 bg-emerald-200":A.value===100,"text-woot-500 bg-woot-100":A.value<100}])},E(Math.round(A.value))+"% ",3)]),c("div",hht,[c("span",fht,E(S.value)+" "+E(I(l)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.SUCCESS"))+"  "+E(b.value)+" "+E(I(l)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.ERROR")),1)])]),c("div",ght,[c("div",{style:Ct({width:`${A.value}%`}),class:re(["transition-all duration-500 shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center",{"bg-emerald-500":A.value===100,"bg-woot-500":A.value<100}])},null,6)])]),c("div",_ht,[(p(!0),f(fe,null,Ae(T.value,M=>(p(),f("div",{key:M.id,class:"p-3 flex items-center justify-between hover:bg-slate-50"},[c("div",vht,[c("span",bht,[v(G,{icon:M.status==="success"?"checkmark-circle":"error-circle",size:"20",class:re(M.status==="success"?"text-emerald-500":"text-ruby-500")},null,8,["icon","class"])]),c("div",Eht,[c("p",Tht,E(M.title),1),c("p",Aht,E(I(l)("KANBAN.BULK_ACTIONS.SEND_MESSAGE.CONVERSATION_ID",{id:M.conversationId})),1),M.error?(p(),f("p",yht,E(M.error),1)):O("",!0)])]),c("span",{class:re(["text-xs px-2 py-1 rounded-full",M.status==="success"?"bg-emerald-100 text-emerald-700":"bg-ruby-100 text-ruby-700"])},E(M.status==="success"?"Enviado":"Falha"),3)]))),128))]),c("div",Sht,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:B},{default:K(()=>[Ee(E(I(l)("KANBAN.BULK_ACTIONS.CANCEL")),1)]),_:1})])])):(p(),f("div",Iht,[c("div",Cht,[c("div",xht,[c("h4",Nht,E(I(l)("KANBAN.BULK_ACTIONS.SELECTED_CONVERSATIONS",{count:_.value.size,total:N.value.length})),1),c("div",Oht,[c("label",wht,[pe(c("input",{type:"checkbox","onUpdate:modelValue":U[0]||(U[0]=M=>y.value=M),class:"toggle"},null,512),[[Xt,y.value]]),c("span",null,E(I(l)("KANBAN.BULK_ACTIONS.FILTER_ITEMS")),1)]),v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:D},{default:K(()=>[Ee(E(_.value.size===N.value.length?I(l)("KANBAN.BULK_ACTIONS.DESELECT_ALL"):I(l)("KANBAN.BULK_ACTIONS.SELECT_ALL")),1)]),_:1})])]),y.value?(p(),f("div",Rht,[c("div",$ht,[c("div",Mht,[c("h4",kht,E(I(l)("KANBAN.BULK_ACTIONS.FILTERS_ACTIVE")),1),v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:U[1]||(U[1]=M=>m.value={status:"",priority:"",hasAttachments:!1,stage:"",assignee:"",lastActivity:"",tags:[],customFields:[]})},{default:K(()=>[Ee(E(I(l)("KANBAN.BULK_ACTIONS.CLEAR_FILTERS")),1)]),_:1})]),c("div",Lht,[(p(!0),f(fe,null,Ae(m.value,(M,R)=>(p(),f(fe,{key:R},[M&&typeof M!="boolean"?(p(),f("span",Dht,[Ee(E(R)+": "+E(M)+" ",1),c("button",{class:"text-slate-500 hover:text-slate-700",onClick:P=>m.value[R]=""},"  ",8,Pht)])):M===!0?(p(),f("span",Bht,[Ee(E(R)+" ",1),c("button",{class:"text-slate-500 hover:text-slate-700",onClick:P=>m.value[R]=!1},"  ",8,Fht)])):O("",!0)],64))),128))])]),c("div",Uht,[c("div",Ght,[c("h4",Vht,E(I(l)("KANBAN.BULK_ACTIONS.FILTER_CONVERSATIONS")),1),c("span",Hht,E(I(l)("KANBAN.BULK_ACTIONS.FILTER_CONVERSATIONS_COUNT",{count:N.value.length})),1)]),c("div",Wht,[c("div",null,[c("label",Kht,E(I(l)("KANBAN.BULK_ACTIONS.ITEM_STATUS.TITLE")),1),pe(c("select",{"onUpdate:modelValue":U[2]||(U[2]=M=>m.value.status=M),class:"w-full rounded-lg"},[c("option",zht,E(I(l)("KANBAN.BULK_ACTIONS.ITEM_STATUS.ALL")),1),c("option",jht,E(I(l)("KANBAN.BULK_ACTIONS.ITEM_STATUS.OPEN")),1),c("option",Yht,E(I(l)("KANBAN.BULK_ACTIONS.ITEM_STATUS.WON")),1),c("option",Xht,E(I(l)("KANBAN.BULK_ACTIONS.ITEM_STATUS.LOST")),1)],512),[[zt,m.value.status]])]),c("div",null,[c("label",qht,E(I(l)("KANBAN.BULK_ACTIONS.PRIORITY.TITLE")),1),pe(c("select",{"onUpdate:modelValue":U[3]||(U[3]=M=>m.value.priority=M),class:"w-full rounded-lg"},[c("option",Zht,E(I(l)("KANBAN.BULK_ACTIONS.PRIORITY.ALL")),1),c("option",Qht,E(I(l)("KANBAN.BULK_ACTIONS.PRIORITY.URGENT")),1),c("option",Jht,E(I(l)("KANBAN.BULK_ACTIONS.PRIORITY.HIGH")),1),c("option",eft,E(I(l)("KANBAN.BULK_ACTIONS.PRIORITY.MEDIUM")),1),c("option",tft,E(I(l)("KANBAN.BULK_ACTIONS.PRIORITY.LOW")),1)],512),[[zt,m.value.priority]])]),c("div",null,[c("label",nft,E(I(l)("KANBAN.BULK_ACTIONS.STAGE.TITLE")),1),pe(c("select",{"onUpdate:modelValue":U[4]||(U[4]=M=>m.value.stage=M),class:"w-full rounded-lg"},[c("option",sft,E(I(l)("KANBAN.BULK_ACTIONS.STAGE.ALL")),1),(p(!0),f(fe,null,Ae(Object.keys(((L=s.value.value)==null?void 0:L.stages)||{}),M=>{var R,P;return p(),f("option",{key:M,value:M},E((P=(R=s.value.value)==null?void 0:R.stages[M])==null?void 0:P.name),9,aft)}),128))],512),[[zt,m.value.stage]])]),c("div",null,[c("label",oft,E(I(l)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.TITLE")),1),pe(c("select",{"onUpdate:modelValue":U[5]||(U[5]=M=>m.value.lastActivity=M),class:"w-full rounded-lg"},[c("option",lft,E(I(l)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.ANY")),1),c("option",ift,E(I(l)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.TODAY")),1),c("option",rft,E(I(l)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.WEEK")),1),c("option",cft,E(I(l)("KANBAN.BULK_ACTIONS.LAST_ACTIVITY.MONTH")),1)],512),[[zt,m.value.lastActivity]])])]),c("div",dft,[c("label",uft,[pe(c("input",{type:"checkbox","onUpdate:modelValue":U[6]||(U[6]=M=>m.value.hasAttachments=M),class:"rounded"},null,512),[[Xt,m.value.hasAttachments]]),c("span",pft,E(I(l)("KANBAN.BULK_ACTIONS.HAS_ATTACHMENTS")),1)])])])])):O("",!0),N.value.length>0?(p(),f("div",mft,[(p(!0),f(fe,null,Ae(N.value,M=>(p(),f("div",{key:M.id,class:"p-2 text-sm hover:bg-slate-50 flex items-center gap-2 cursor-pointer",onClick:R=>w(M)},[c("input",{type:"checkbox",checked:_.value.has(M.item_details.conversation_id),class:"rounded",onClick:U[7]||(U[7]=ze(()=>{},["stop"]))},null,8,fft),c("span",null,E(M.item_details.title)+" - "+E(I(l)("KANBAN.BULK_ACTIONS.CONVERSATION_ID",{id:M.item_details.conversation_id})),1)],8,hft))),128))])):(p(),f("div",gft,E(I(l)("KANBAN.BULK_ACTIONS.NO_CONVERSATIONS_AVAILABLE")),1))]),c("div",_ft,[c("h4",vft,E(I(l)("KANBAN.BULK_ACTIONS.SELECT_MESSAGE_TEMPLATE")),1),i.value?(p(),f("div",bft,U[9]||(U[9]=[c("span",{class:"loading-spinner"},null,-1)]))):(p(),f("div",Eft,[pe(c("select",{"onUpdate:modelValue":U[8]||(U[8]=M=>u.value=M),class:re(["w-full rounded-lg",{"border-ruby-500":!u.value}])},[c("option",Tft,E(I(l)("KANBAN.BULK_ACTIONS.MESSAGE_TEMPLATE_SELECT")),1),(p(!0),f(fe,null,Ae(d.value,M=>(p(),f("option",{key:M.id,value:M},E(M.title),9,Aft))),128))],2),[[zt,u.value]]),u.value?(p(),f("div",yft,[c("p",Sft,E(u.value.content),1)])):O("",!0)]))]),c("div",Ift,[c("p",Cft,E(I(l)("KANBAN.BULK_ACTIONS.MESSAGE_SUMMARY",{count:_.value.size,total:e.items.length})),1)]),c("div",xft,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:B},{default:K(()=>U[10]||(U[10]=[Ee(" Cancelar ")])),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",isLoading:r.value,disabled:!u.value||_.value.size===0,onClick:H},{default:K(()=>[Ee(E(I(l)("KANBAN.BULK_ACTIONS.SEND_MESSAGES")),1)]),_:1},8,["isLoading","disabled"])])]))])}}},Oft=Fe(Nft,[["__scopeId","data-v-80cfd970"]]),wft={key:0,class:"fixed bottom-0 left-0 right-0 flex justify-center z-50 p-4"},Rft={class:"dragbar-content shadow-2xl rounded-xl border border-slate-200 dark:border-slate-700 p-4 transition-all duration-300 ease-in-out"},$ft={class:"flex justify-center items-center"},Mft=["onDragenter","onDragleave","onDrop"],kft={class:"text-xs font-medium text-center pointer-events-none"},Lft={__name:"Dragbar",props:{draggedItem:{type:Object,default:null},enabled:{type:Boolean,default:!0}},emits:["quickAction"],setup(e,{emit:t}){const n=e,s=t,a=F(null),o=[{id:"move",icon:"arrow-right",color:"blue",description:"Mover Item",bgColorClass:"",borderColorClass:"",hoverBorderColorClass:"hover:border-blue-700 dark:hover:border-blue-600",textColorClass:"text-white",customHexStyle:{backgroundColor:"#3B82F6",borderColor:"#2563EB"}},{id:"chat",icon:"chat",color:"amber",description:"Abrir Chat",bgColorClass:"bg-amber-100 dark:bg-amber-900",borderColorClass:"border-amber-300 dark:border-amber-700",hoverBorderColorClass:"hover:border-amber-500 dark:hover:border-amber-400",textColorClass:"text-amber-800 dark:text-amber-200"},{id:"duplicate",icon:"copy",color:"sky",description:"Duplicar Item",bgColorClass:"bg-sky-100 dark:bg-sky-900",borderColorClass:"border-sky-300 dark:border-sky-700",hoverBorderColorClass:"hover:border-sky-500 dark:hover:border-sky-400",textColorClass:"text-sky-800 dark:text-sky-200"}],l=(u,m)=>{m.preventDefault(),s("quickAction",{actionId:u,item:n.draggedItem}),a.value=null},i=(u,m)=>{const h=[u.bgColorClass,u.borderColorClass,u.hoverBorderColorClass,u.textColorClass],_=o.findIndex(g=>g.id===a.value);return u.id===a.value?(h.push("w-[240px]"),h.push("scale-125"),h.push("shadow-xl")):(h.push("w-[180px]"),h.push("hover:scale-105"),h.push("hover:shadow-lg")),_!==-1?m===_?h.push("mx-1.5"):m===_-1?h.push("ml-1.5","mr-8"):m===_+1?h.push("ml-8","mr-1.5"):h.push("mx-1.5"):h.push("mx-1.5"),h},r=u=>{a.value=u},d=u=>{a.value===u&&(a.value=null)};return(u,m)=>{const h=z("fluent-icon");return e.enabled?(p(),f("div",wft,[c("div",Rft,[c("div",$ft,[(p(),f(fe,null,Ae(o,(_,g)=>c("button",{key:_.id,class:re(["dragbar-action-btn flex flex-col items-center justify-center p-3 rounded-lg transition-all duration-300 ease-in-out transform border h-[70px] shadow-md",i(_,g)]),style:Ct(_.customHexStyle?_.customHexStyle:null),onDragover:m[0]||(m[0]=ze(()=>{},["prevent"])),onDragenter:T=>r(_.id),onDragleave:T=>d(_.id),onDrop:T=>l(_.id,T)},[v(h,{icon:_.icon,size:"24",class:re(["mb-1 pointer-events-none",_.textColorClass])},null,8,["icon","class"]),c("span",kft,E(_.description),1)],46,Mft)),64))])])])):O("",!0)}}},Dft=Fe(Lft,[["__scopeId","data-v-60a798d8"]]),Pft={class:"relative z-10 flex justify-between items-center pt-2 pb-4 px-4 dark:border-slate-800 flex-wrap md:pt-3 md:pb-6 md:px-6 md:gap-4"},Bft={class:"flex items-center gap-1 min-w-0 md:gap-2"},Fft={style:{display:"none"}},Uft={key:0,class:"dropdown-menu view-dropdown"},Gft=["onClick"],Vft={class:"search-input-wrapper"},Hft=["placeholder"],Wft={key:0,class:"search-results-tags"},Kft={class:"search-results-tag"},zft={class:"stage-name"},jft={class:"count-badge"},Yft={class:"flex items-center gap-1 md:gap-2"},Xft={class:"bulk-actions-selector md:block hidden"},qft={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",style:{color:"#64748b"}},Zft={key:0,class:"dropdown-menu"},Qft=["onClick"],Jft={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",style:{color:"#64748b"}},egt={key:0,class:"filter-badge"},tgt={class:"relative md:block hidden"},ngt={class:"settings-selector"},sgt=["onClick"],agt={class:"absolute bottom-0 left-0 right-0 flex justify-between items-center px-4 md:px-6 transform translate-y-1/3"},ogt={class:"flex items-center gap-1"},lgt={class:"flex items-center"},igt={class:"p-4"},rgt={class:"flex flex-col gap-3"},cgt={class:"w-full p-6"},dgt={class:"text-lg font-medium mb-6"},ugt={key:1,class:"text-center text-red-500"},pgt={class:"p-4 space-y-4"},mgt={class:"flex items-center justify-between"},hgt={class:"text-lg font-medium"},fgt={class:"relative"},ggt={class:"max-h-[300px] overflow-y-auto space-y-2"},_gt={key:0,class:"text-center text-slate-400 py-4"},vgt={key:1,class:"text-center text-slate-400 py-4"},bgt=["onClick"],Egt={class:"flex-1 min-w-0"},Tgt={class:"font-medium text-sm truncate"},Agt={key:0,class:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold border border-woot-200 bg-woot-50 text-woot-600 align-middle"},ygt={class:"text-xs text-slate-500 dark:text-slate-400 truncate"},Sgt={class:"p-6"},Igt={class:"text-lg font-medium mb-4"},Cgt={class:"p-6"},xgt={__name:"KanbanHeader",props:{currentStage:{type:String,default:""},searchResults:{type:Object,default:()=>({total:0,stages:{}})},columns:{type:Array,default:()=>[]},activeFilters:{type:Object,default:null},currentView:{type:String,default:"kanban"},kanbanItems:{type:Array,required:!0},isDraggingActive:{type:Boolean,default:!1},draggedItem:{type:Object,default:null}},emits:["filter","itemCreated","search","itemsUpdated","switchView","newToastMessage","globalStatusFilterChange"],setup(e,{emit:t}){const n=(te,le)=>{let ye;return(...me)=>{clearTimeout(ye),ye=setTimeout(()=>te(...me),le)}},{t:s}=Pe(),a=Pn(),{isStacklab:o}=Js();ot(()=>o,te=>{});const l=t,i=e,r=F(!1),d=C(()=>a.getters["funnel/getSelectedFunnel"]),u=F(!1),m=F(!1),h=F(""),_=F(!1),g=F(!1),T=F({won:!0,lost:!0}),S=C(()=>a.getters["kanban/getQuickMessageEnabled"]),b=te=>{te==="won"?T.value.won=!T.value.won:te==="lost"&&(T.value.lost=!T.value.lost),l("globalStatusFilterChange",{...T.value})},A=async()=>{try{const te=!S.value;await a.dispatch("kanban/updateQuickMessageConfig",te)}catch(te){console.error("Erro ao atualizar configurao de mensagem rpida:",te),It.emit("newToastMessage",{message:"Erro ao atualizar configurao de mensagem rpida",action:{type:"error"}})}},y=[{id:"add",label:s("KANBAN.BULK_ACTIONS.ADD.TITLE"),icon:"add"},{id:"move",label:s("KANBAN.BULK_ACTIONS.MOVE.TITLE"),icon:"arrow-right"},{id:"delete",label:s("KANBAN.BULK_ACTIONS.DELETE.TITLE"),icon:"delete"},{id:"show_hidden",label:s("KANBAN.BULK_ACTIONS.SHOW_HIDDEN"),icon:"eye-show"},{id:"send_message",label:s("KANBAN.BULK_ACTIONS.SEND_MESSAGE.TITLE"),icon:"chat"}],x=C(()=>y.filter(te=>te.id!=="send_message"||o===!0)),$=F(!1),N=F(!1),w=F(!1),D=F(!1),H=F(!1),B=C(()=>{const te=a.getters.getCurrentUser;return(te==null?void 0:te.role)==="administrator"}),k=C(()=>{const te=[{id:"kanban_settings",label:s("KANBAN.MORE_OPTIONS.KANBAN_SETTINGS"),icon:"settings"}];return o===!0&&te.push({id:"message_templates",label:s("KANBAN.MORE_OPTIONS.MESSAGE_TEMPLATES"),icon:"document"}),B.value&&te.unshift({id:"manage_funnels",label:s("KANBAN.MORE_OPTIONS.MANAGE_FUNNELS"),icon:"task"}),te}),U=te=>{te.id==="kanban_settings"?u.value=!0:te.id==="manage_funnels"?l("switchView","funnels"):te.id==="message_templates"&&Ze(),D.value=!1},G=()=>{D.value=!D.value},L=()=>{_.value=!_.value},M=te=>{te.id==="show_hidden"?(g.value=!g.value,(i.columns.some(ye=>JSON.parse(localStorage.getItem(`kanban_column_${ye.id}_settings`)||"{}").hideColumn===!0)||!g.value)&&(i.columns.forEach(ye=>{const me=JSON.parse(localStorage.getItem(`kanban_column_${ye.id}_settings`)||"{}");me.hideColumn===!0&&(me.hideColumn=!g.value,localStorage.setItem(`kanban_column_${ye.id}_settings`,JSON.stringify(me)))}),l("itemsUpdated"))):te.id==="delete"?$.value=!0:te.id==="move"?N.value=!0:te.id==="add"?w.value=!0:te.id==="send_message"&&(console.log("[DEBUG] Abrindo modal de envio em massa"),console.log("[DEBUG] Items com conversa:",wt.value.length),st.value=!0),_.value=!1},R=F(!1),P=te=>{l("filter",te),R.value=!1},W=()=>{R.value=!0},Q=()=>{u.value=!1},Z=F(!1),j=()=>{H.value=!H.value},X=()=>{var te;if(!((te=d.value)!=null&&te.id)){l("newToastMessage",{message:s("KANBAN.ERRORS.NO_FUNNEL_SELECTED"),action:{type:"error"}});return}r.value=!0,H.value=!1},q=()=>{Z.value=!0,H.value=!1},se=te=>{Z.value=!1,l("itemsUpdated")},he=async te=>{l("itemCreated",te),r.value=!1},be=()=>{m.value=!m.value,m.value?jt(()=>{document.getElementById("kanban-search").focus()}):(h.value="",l("search",""))};ot(h,te=>{te&&(m.value=!0)});const ne=n(te=>{const le=te.target.value;h.value=le,l("search",le)},300),J=async te=>{try{await Promise.all(te.map(le=>Dn.deleteItem(le))),$.value=!1,l("itemsUpdated")}catch(le){console.error("Erro ao excluir itens:",le)}},ue=async({itemIds:te,stageId:le})=>{try{await Promise.all(te.map(ye=>Dn.moveToStage(ye,le))),N.value=!1,l("itemsUpdated")}catch(ye){console.error("Erro ao mover itens:",ye)}},Ne=async()=>{w.value=!1,l("itemsUpdated")},Re=te=>{const le=i.columns.find(ye=>ye.title===te);return le!=null&&le.color?`${le.color}`:"#64748B"},Ze=()=>{l("switchView","templates")},Xe=C(()=>{var le,ye,me,Ie,Oe;if(!i.activeFilters)return 0;let te=0;return(le=i.activeFilters.priority)!=null&&le.length&&te++,((ye=i.activeFilters.value)!=null&&ye.min||(me=i.activeFilters.value)!=null&&me.max)&&te++,i.activeFilters.agent_id&&te++,((Ie=i.activeFilters.date)!=null&&Ie.start||(Oe=i.activeFilters.date)!=null&&Oe.end)&&te++,te}),Qe=F(!1);C(()=>{var ye,me;const te=((me=(ye=d.value)==null?void 0:ye.settings)==null?void 0:me.agents)||[];if(!h.value)return te;const le=h.value.toLowerCase();return te.filter(Ie=>Ie.name.toLowerCase().includes(le)||Ie.email.toLowerCase().includes(le))});const Je=()=>{Qe.value=!0};pt(()=>{document.addEventListener("click",te=>{te.target.closest(".settings-selector, .bulk-actions-selector, .kanban-add-item-trigger")||ie()})}),zs(()=>{document.removeEventListener("click",ie)});const st=F(!1),ht=F(!1),wt=C(()=>i.kanbanItems.filter(te=>{var le;return(le=te.item_details)==null?void 0:le.conversation_id})),ee=async()=>{st.value=!1,l("newToastMessage",{message:"Mensagens enviadas com sucesso",action:{type:"success"}})},de=F(!1),ie=()=>{D.value=!1,H.value=!1,_.value=!1},Ce=F(localStorage.getItem("kanban_dragbar_enabled")!=="false"),Se=te=>{Ce.value=te},je=F(!1),Ke=[{id:"kanban",label:"Kanban",icon:"task"},{id:"list",label:"Lista",icon:"list"},{id:"agenda",label:"Agenda",icon:"calendar"}],$e=te=>{l("switchView",te),je.value=!1};document.addEventListener("click",te=>{te.target.closest(".view-selector")||(je.value=!1)});const Be=F([]),Ue=F(""),ge=F(!1),ae=async()=>{try{ge.value=!0;const{data:te}=await Qc.get();Be.value=te}catch(te){console.error("Erro ao carregar agentes:",te)}finally{ge.value=!1}};ot(ht,te=>{te&&ae()});const ve=C(()=>Ue.value?Be.value.filter(te=>te.name.toLowerCase().includes(Ue.value.toLowerCase())||te.email.toLowerCase().includes(Ue.value.toLowerCase())):Be.value),Y=te=>{var le,ye,me;return(me=(ye=(le=d.value)==null?void 0:le.settings)==null?void 0:ye.agents)==null?void 0:me.some(Ie=>Ie.id===te.id)},oe=async te=>{var le,ye;try{const me=((le=d.value.settings)==null?void 0:le.agents)||[],Ie=me.findIndex(Ye=>Ye.id===te.id);let Oe;Ie===-1?Oe=[...me,te]:Oe=me.filter(Ye=>Ye.id!==te.id);const we={...d.value,settings:{...d.value.settings,agents:Oe,optimization_history:((ye=d.value.settings)==null?void 0:ye.optimization_history)||[]},stages:Object.entries(d.value.stages||{}).reduce((Ye,[He,et])=>({...Ye,[He]:{...et,message_templates:et.message_templates||[]}}),{})};await ra.update(d.value.id,we),await a.dispatch("funnel/fetch")}catch(me){console.error("Erro ao atualizar agentes:",me)}};return(te,le)=>{const ye=z("fluent-icon");return p(),f("header",Pft,[c("div",Bft,[I(o)===!0?(p(),f("button",{key:0,class:"kanban-ai-button md:flex hidden mr-1",onClick:Je},[c("span",Fft,E(console.log("Template rendering - isStacklab:",I(o))),1),le[32]||(le[32]=c("svg",{class:"lightning-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M13 3L4 14H12L11 21L20 10H12L13 3Z",fill:"currentColor"})],-1)),le[33]||(le[33]=c("span",{class:"lg:inline hidden"},"Kanban AI",-1))])):O("",!0),c("button",{class:"view-select-btn md:hidden flex items-center gap-1 px-2 py-1.5 rounded-lg bg-slate-100 dark:bg-slate-700",onClick:le[0]||(le[0]=me=>de.value=!0)},[v(ye,{icon:e.currentView==="kanban"?"task":e.currentView==="list"?"list":"calendar",size:"16"},null,8,["icon"]),v(ye,{icon:"chevron-down",size:"12"})]),c("div",{class:"view-selector hidden md:block",onClick:le[2]||(le[2]=ze(()=>{},["stop"]))},[v(ce,{type:"button",variant:"outline",color:"slate",size:"sm",onClick:le[1]||(le[1]=me=>je.value=!je.value)},{icon:K(()=>[v(ye,{icon:Ke.find(me=>me.id===e.currentView).icon,size:"16"},null,8,["icon"])]),_:1}),je.value?(p(),f("div",Uft,[(p(),f(fe,null,Ae(Ke,me=>c("div",{key:me.id,class:re(["dropdown-item",{active:e.currentView===me.id}]),onClick:Ie=>$e(me.id)},[v(ye,{icon:me.icon,size:"16",class:"mr-2"},null,8,["icon"]),c("span",null,E(me.label),1),e.currentView===me.id?(p(),V(ye,{key:0,icon:"checkmark",size:"16",class:"ml-auto text-woot-500"})):O("",!0)],10,Gft)),64))])):O("",!0)]),v(qI,{class:"md:block hidden ml-1"}),c("div",{class:re(["md:flex hidden items-center relative gap-1",{"is-active":m.value}])},[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:be},{icon:K(()=>[v(ye,{icon:"search",size:"16"})]),_:1}),pe(c("div",Vft,[pe(c("input",{id:"kanban-search","onUpdate:modelValue":le[3]||(le[3]=me=>h.value=me),type:"search",class:"search-input",placeholder:I(s)("KANBAN.SEARCH.INPUT_PLACEHOLDER"),onInput:le[4]||(le[4]=(...me)=>I(ne)&&I(ne)(...me)),onBlur:le[5]||(le[5]=me=>!h.value&&(m.value=!1))},null,40,Hft),[[mt,h.value]])],512),[[pn,m.value]]),m.value&&h.value&&e.searchResults.total>0?(p(),f("div",Wft,[c("div",Kft,E(e.searchResults.total)+" resultado(s) ",1),(p(!0),f(fe,null,Ae(e.searchResults.stages,(me,Ie)=>(p(),f("div",{key:Ie,class:"search-results-tag",style:Ct({backgroundColor:Re(Ie)})},[c("span",zft,E(Ie),1),c("span",jft,E(me),1)],4))),128))])):O("",!0)],2)]),c("div",Yft,[c("div",Xft,[v(Bo,{text:"Aes em massa",align:"left"},{default:K(()=>[v(ce,{variant:"link",color:"slate",size:"sm",onClick:L,"aria-label":"Aes em massa"},{icon:K(()=>[(p(),f("svg",qft,le[34]||(le[34]=[c("rect",{x:"2",y:"3",width:"12",height:"2",rx:"1",fill:"currentColor"},null,-1),c("rect",{x:"2",y:"7",width:"12",height:"2",rx:"1",fill:"currentColor"},null,-1),c("rect",{x:"2",y:"11",width:"12",height:"2",rx:"1",fill:"currentColor"},null,-1)])))]),_:1})]),_:1}),_.value?(p(),f("div",Zft,[(p(!0),f(fe,null,Ae(x.value,me=>(p(),f("div",{key:me.id,class:"dropdown-item",onClick:Ie=>M(me)},[v(ye,{icon:me.icon,size:"16",class:"mr-2"},null,8,["icon"]),c("span",null,E(me.label),1),me.id==="show_hidden"?(p(),f("span",{key:0,class:re(["ml-2 text-xs px-1.5 rounded-full",{"bg-woot-500 text-white":g.value,"bg-slate-100 text-slate-600":!g.value}])},E(g.value?"Ativo":"Inativo"),3)):O("",!0)],8,Qft))),128))])):O("",!0)]),v(Bo,{text:"Filtrar",align:"left"},{default:K(()=>[v(ce,{variant:"ghost",color:"slate",class:"relative",onClick:W,"aria-label":"Filtrar"},{icon:K(()=>[(p(),f("svg",Jft,le[35]||(le[35]=[c("path",{d:"M2 4a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v.38a2 2 0 0 1-.41 1.2l-3.18 4.1A2 2 0 0 0 10 11.62V14a1 1 0 0 1-1.45.89l-2-1A1 1 0 0 1 6 13v-1.38a2 2 0 0 0-.41-1.2l-3.18-4.1A2 2 0 0 1 2 4.38V4Z",fill:"currentColor"},null,-1)])))]),default:K(()=>[Xe.value>0?(p(),f("span",egt,E(Xe.value),1)):O("",!0)]),_:1})]),_:1}),c("div",tgt,[v(ce,{variant:"solid",color:"blue",size:"sm",class:"kanban-add-item-trigger",onClick:j},{icon:K(()=>[v(ye,{icon:"add",size:"16"})]),_:1}),H.value?(p(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-900 rounded-md shadow-lg border border-slate-100 dark:border-slate-800 min-w-[200px] z-10",style:{"box-shadow":"0 4px 24px 0 rgba(30, 41, 59, 0.08)"},onMouseleave:le[6]||(le[6]=me=>H.value=!1),onClick:le[7]||(le[7]=ze(()=>{},["stop"]))},[c("div",{class:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer rounded-none transition-colors",onClick:X},[v(ye,{icon:"add",size:"16",class:"mr-2"}),c("span",null,E(I(s)("KANBAN.ADD_ITEM")),1)]),c("div",{class:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer rounded-none transition-colors",onClick:q},[v(ye,{icon:"task",size:"16",class:"mr-2"}),c("span",null,E(I(s)("KANBAN.FUNNELS.ACTIONS.NEW")),1)])],32)):O("",!0)]),c("div",ngt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:G,title:B.value?"":"Apenas administradores podem gerenciar funis"},{icon:K(()=>[v(ye,{icon:"more-vertical",size:"16"})]),_:1},8,["title"]),D.value?(p(),f("div",{key:0,class:"absolute right-0 top-full mt-1 bg-white dark:bg-slate-900 rounded-md shadow-lg border border-slate-100 dark:border-slate-800 min-w-[200px] z-10",style:{"box-shadow":"0 4px 24px 0 rgba(30, 41, 59, 0.08)"},onMouseleave:le[8]||(le[8]=me=>D.value=!1)},[(p(!0),f(fe,null,Ae(k.value,me=>(p(),f("div",{key:me.id,class:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer rounded-none transition-colors",onClick:Ie=>U(me)},[v(ye,{icon:me.icon,size:"16",class:"mr-2"},null,8,["icon"]),c("span",null,E(me.label),1)],8,sgt))),128))],32)):O("",!0)])]),c("div",agt,[c("div",ogt,[v(Bo,{text:"Exibir ou ocultar cards ganhos"},{default:K(()=>[c("button",{onClick:le[9]||(le[9]=me=>b("won")),class:re(["kanban-status-badge",T.value.won?"kanban-status-badge--active":"kanban-status-badge--inactive"])},[v(ye,{icon:"checkmark-circle",size:"14",class:"button-icon"}),le[36]||(le[36]=Ee(" Ganhos "))],2)]),_:1}),v(Bo,{text:"Exibir ou ocultar cards perdidos"},{default:K(()=>[c("button",{onClick:le[10]||(le[10]=me=>b("lost")),class:re(["kanban-status-badge",T.value.lost?"kanban-status-badge--active-lost":"kanban-status-badge--inactive"])},[v(ye,{icon:"dismiss-circle",size:"14",class:"button-icon"}),le[37]||(le[37]=Ee(" Perdidos "))],2)]),_:1})]),c("div",lgt,[v(Bo,{text:"Mensagem Rpida",align:"left"},{default:K(()=>[c("button",{onClick:A,class:re(["kanban-status-badge",S.value?"kanban-status-badge--quick-active":"kanban-status-badge--inactive"])},[v(ye,{icon:"flame",size:"14",class:"button-icon"}),le[38]||(le[38]=Ee(" Mensagem Rpida "))],2)]),_:1})])]),v(qt,{show:de.value,"onUpdate:show":le[14]||(le[14]=me=>de.value=me),"on-close":()=>de.value=!1,size:"tiny"},{default:K(()=>[c("div",igt,[le[42]||(le[42]=c("h3",{class:"text-lg font-medium mb-4"},"Selecionar visualizao",-1)),c("div",rgt,[c("button",{class:re(["flex items-center gap-3 p-3 rounded-lg text-left",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-300":e.currentView==="kanban","hover:bg-slate-50 dark:hover:bg-slate-700":e.currentView!=="kanban"}]),onClick:le[11]||(le[11]=me=>{l("switchView","kanban"),de.value=!1})},[v(ye,{icon:"task",size:"20"}),le[39]||(le[39]=c("div",null,[c("div",{class:"font-medium"},"Kanban"),c("div",{class:"text-xs text-slate-500 dark:text-slate-400"}," Visualizao em quadro ")],-1))],2),c("button",{class:re(["flex items-center gap-3 p-3 rounded-lg text-left",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-300":e.currentView==="list","hover:bg-slate-50 dark:hover:bg-slate-700":e.currentView!=="list"}]),onClick:le[12]||(le[12]=me=>{l("switchView","list"),de.value=!1})},[v(ye,{icon:"list",size:"20"}),le[40]||(le[40]=c("div",null,[c("div",{class:"font-medium"},"Lista"),c("div",{class:"text-xs text-slate-500 dark:text-slate-400"}," Lista de itens ")],-1))],2),c("button",{class:re(["flex items-center gap-3 p-3 rounded-lg text-left",{"bg-woot-50 text-woot-600 dark:bg-woot-900/20 dark:text-woot-300":e.currentView==="agenda","hover:bg-slate-50 dark:hover:bg-slate-700":e.currentView!=="agenda"}]),onClick:le[13]||(le[13]=me=>{l("switchView","agenda"),de.value=!1})},[v(ye,{icon:"calendar",size:"20"}),le[41]||(le[41]=c("div",null,[c("div",{class:"font-medium"},"Agenda"),c("div",{class:"text-xs text-slate-500 dark:text-slate-400"}," Visualizao de agenda ")],-1))],2)])])]),_:1},8,["show","on-close"]),v(qt,{show:r.value,"onUpdate:show":le[16]||(le[16]=me=>r.value=me),"on-close":()=>r.value=!1,size:"large"},{default:K(()=>[c("div",cgt,[c("h3",dgt,E(I(s)("KANBAN.ADD_ITEM")),1),d.value?(p(),V(Oi,{key:0,"funnel-id":d.value.id,stage:e.currentStage,onSaved:he,onClose:le[15]||(le[15]=me=>r.value=!1)},null,8,["funnel-id","stage"])):(p(),f("div",ugt,E(I(s)("KANBAN.ERRORS.NO_FUNNEL_SELECTED")),1))])]),_:1},8,["show","on-close"]),v(Mdt,{show:u.value,onClose:Q,onDragbarVisibilityChanged:Se},null,8,["show"]),v(qt,{show:$.value,"onUpdate:show":le[18]||(le[18]=me=>$.value=me),"on-close":()=>$.value=!1},{default:K(()=>[v(Xdt,{items:e.kanbanItems,onClose:le[17]||(le[17]=me=>$.value=!1),onConfirm:J},null,8,["items"])]),_:1},8,["show","on-close"]),v(qt,{show:N.value,"onUpdate:show":le[20]||(le[20]=me=>N.value=me),"on-close":()=>N.value=!1},{default:K(()=>[v(fut,{items:e.kanbanItems,onClose:le[19]||(le[19]=me=>N.value=!1),onConfirm:ue},null,8,["items"])]),_:1},8,["show","on-close"]),v(qt,{show:w.value,"onUpdate:show":le[22]||(le[22]=me=>w.value=me),"on-close":()=>w.value=!1},{default:K(()=>[v(Gut,{"current-stage":e.currentStage,onClose:le[21]||(le[21]=me=>w.value=!1),onItemsCreated:Ne},null,8,["current-stage"])]),_:1},8,["show","on-close"]),v(lv,{show:R.value,"current-funnel":d.value,"initial-filters":e.activeFilters,size:"large",onClose:le[23]||(le[23]=me=>R.value=!1),onApply:P},null,8,["show","current-funnel","initial-filters"]),v(qt,{show:Qe.value,"onUpdate:show":le[25]||(le[25]=me=>Qe.value=me),"on-close":()=>Qe.value=!1,size:"large",class:"ai-modal","hide-close-button":""},{default:K(()=>[v(tmt,{onClose:le[24]||(le[24]=me=>Qe.value=!1)})]),_:1},8,["show","on-close"]),v(qt,{show:ht.value,"onUpdate:show":le[27]||(le[27]=me=>ht.value=me),"on-close":()=>ht.value=!1,size:"tiny"},{default:K(()=>[c("div",pgt,[c("div",mgt,[c("h3",hgt,E(I(s)("KANBAN.SHARE.TITLE")),1)]),c("div",fgt,[pe(c("input",{"onUpdate:modelValue":le[26]||(le[26]=me=>Ue.value=me),type:"text",class:"w-full px-3 py-2 border rounded-lg pr-8",placeholder:"Buscar agentes..."},null,512),[[mt,Ue.value]]),v(ye,{icon:"search",size:"16",class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400"})]),c("div",ggt,[ge.value?(p(),f("div",_gt," Carregando agentes... ")):ve.value.length===0?(p(),f("div",vgt," Nenhum agente encontrado ")):O("",!0),(p(!0),f(fe,null,Ae(ve.value,me=>(p(),f("div",{key:me.id,class:re(["flex items-center gap-3 p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg cursor-pointer",{"bg-woot-50 dark:bg-woot-900/20":Y(me)}]),onClick:Ie=>oe(me)},[v(Ft,{name:me.name,src:me.avatar_url,size:32,status:me.availability_status},null,8,["name","src","status"]),c("div",Egt,[c("div",Tgt,[Ee(E(me.name)+" ",1),Y(me)?(p(),f("span",Agt,"Atribudo")):O("",!0)]),c("div",ygt,E(me.email),1)]),Y(me)?(p(),V(ye,{key:0,icon:"checkmark",size:"16",class:"text-woot-500"})):O("",!0)],10,bgt))),128))])])]),_:1},8,["show","on-close"]),v(qt,{show:Z.value,"onUpdate:show":le[29]||(le[29]=me=>Z.value=me),"on-close":()=>Z.value=!1,size:"large"},{default:K(()=>[c("div",Sgt,[c("h3",Igt,E(I(s)("KANBAN.FUNNELS.ACTIONS.NEW")),1),v(Zp,{onSaved:se,onClose:le[28]||(le[28]=me=>Z.value=!1)})])]),_:1},8,["show","on-close"]),v(qt,{show:st.value,"onUpdate:show":le[31]||(le[31]=me=>st.value=me),"on-close":()=>st.value=!1,size:"medium",class:"bulk-send-message-modal"},{default:K(()=>[c("div",Cgt,[le[43]||(le[43]=c("h3",{class:"text-lg font-medium mb-4"},"Enviar Mensagens em Massa",-1)),v(Oft,{items:[],onClose:le[30]||(le[30]=me=>st.value=!1),onSend:ee})])]),_:1},8,["show","on-close"]),Ce.value&&e.isDraggingActive&&e.draggedItem?(p(),V(Dft,{key:0,enabled:Ce.value,"dragged-item":e.draggedItem},null,8,["enabled","dragged-item"])):O("",!0)])}}},iv=Fe(xgt,[["__scopeId","data-v-9afc60f7"]]),Ngt={class:"flex flex-col h-full bg-white dark:bg-slate-900"},Ogt={key:0,class:"flex justify-center items-center flex-1"},wgt={key:1,class:"flex justify-center items-center flex-1 text-ruby-500"},Rgt={key:2,class:"flex flex-col items-center justify-center flex-1 p-8 text-center"},$gt={class:"text-xl font-medium text-slate-700 dark:text-slate-300 mb-2"},Mgt={class:"text-sm text-slate-600 dark:text-slate-400 max-w-md mb-6"},kgt={key:3,class:"flex flex-col items-center justify-center flex-1 p-8 text-center"},Lgt={class:"w-16 h-16 mb-4 text-slate-400"},Dgt={class:"text-xl font-medium text-slate-700 dark:text-slate-300 mb-2"},Pgt={class:"text-sm text-slate-600 dark:text-slate-400 max-w-md"},Bgt={key:4,class:"flex-1 overflow-x-auto kanban-columns"},Fgt={key:0,class:"absolute top-2 right-2 flex items-center text-sm text-slate-500"},Ugt={class:"flex h-full p-4 space-x-4"},Ggt={key:0,class:"hidden"},Vgt={class:"p-6"},Hgt={class:"text-lg font-medium"},Wgt={key:1,class:"text-center text-red-500"},Kgt={class:"p-6"},zgt={class:"text-lg font-medium mb-4"},jgt={class:"text-sm text-slate-600 dark:text-slate-400 mb-6"},Ygt={class:"flex justify-end space-x-2"},Xgt={class:"p-6"},qgt={class:"text-lg font-medium mb-4"},Zgt={class:"p-4 space-y-4"},Qgt={class:"text-lg font-medium text-slate-900 dark:text-slate-100"},Jgt={class:"space-y-2"},e_t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},t_t=["value"],n_t={class:"space-y-2"},s_t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},a_t=["value"],o_t={class:"flex justify-end gap-2 mt-4"},l_t={class:"p-6"},i_t={class:"text-lg font-medium mb-6"},r_t={__name:"KanbanTab",props:{currentView:{type:String,default:"kanban"},isLoading:{type:Boolean,required:!0}},emits:["switchView","itemClick"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=Pn();En();const o=C(()=>a.state.kanban.error),l=F([]),i=F(!1),r=F(null),d=C(()=>a.getters["funnel/getSelectedFunnel"]),u=F(!1),m=F(null),h=F(!1),_=F(null),g=F(!1),T=F(null),S=F(null),b=F(!1),A=F({total:0,stages:{}}),y=F(!1),x=F(""),$=F(!1),N=F({won:!0,lost:!0}),w=F(!1),D=F(null),H=F(!1),B=F(null),k=F({funnel_id:null,funnel_stage:null}),U=F(null),G=de=>{N.value=de},L=()=>{const de=a.getters["funnel/getSelectedFunnel"];if(!(de!=null&&de.stages))return;console.log("[ORDENAO] Estgios do funil:",de.stages);const ie=Object.entries(de.stages).map(([Ce,Se])=>({id:Ce,title:Se.name,color:Se.color,description:Se.description,position:parseInt(Se.position,10)||0}));ie.sort((Ce,Se)=>Ce.position-Se.position),console.log("[ORDENAO] Array de estgios (aps ordenao):",ie.map(Ce=>`${Ce.title} (${Ce.position})`)),l.value=ie,$.value=!1};ot(d,de=>{de&&(console.log("[ORDENAO-FUNIL] Novo funil selecionado:",de.name),de.stages&&Object.values(de.stages).forEach(ie=>{ie.position=parseInt(ie.position,10)||0}),L())},{immediate:!0});const M=de=>{r.value=l.value.find(ie=>ie.id===de),i.value=!0},R=async de=>{var ie,Ce;try{y.value=!0,await a.dispatch("kanban/deleteKanbanItem",de.id),u.value=!1,m.value=null}catch(Se){It.emit("newToastMessage",{message:((Ce=(ie=Se.response)==null?void 0:ie.data)==null?void 0:Ce.message)||s("KANBAN.ERROR_DELETING_ITEM"),action:{type:"error"}})}finally{y.value=!1}},P=async({itemId:de,columnId:ie})=>{var Ce,Se;if(!(!de||!ie))try{y.value=!0,await a.dispatch("kanban/moveItemToStage",{itemId:parseInt(de,10),columnId:ie}),jt(()=>{L()})}catch(je){It.emit("newToastMessage",{message:((Se=(Ce=je.response)==null?void 0:Ce.data)==null?void 0:Se.message)||s("KANBAN.ERROR_MOVING_ITEM"),action:{type:"error"}})}finally{y.value=!1,jt(()=>{w.value=!1,D.value=null,console.log("[KanbanTab] Drop completed - Dragbar hidden. isDraggingActive:",w.value)})}},W=()=>{It.emit("newToastMessage",{message:s("KANBAN.SETTINGS_NOT_IMPLEMENTED"),action:{type:"info"}})},Q=async de=>{de&&(i.value=!1,r.value=null)},Z=de=>{x.value=de},j=()=>{b.value=!1},X=de=>{S.value=de||{}},q=de=>{_.value=de,h.value=!0},se=de=>{n("itemClick",de)},he=de=>{g.value=!1,q(de)},be=()=>{},ne=async de=>{de&&(h.value=!1,_.value=null,jt(()=>{L()}))},J=de=>{de&&a.dispatch("funnel/fetchFunnels").then(()=>{a.dispatch("funnel/setSelectedFunnel",de.id)}),$.value=!1},ue=de=>{w.value=!0,D.value=de,console.log("[KanbanTab] Drag Start:",de,"isDraggingActive:",w.value)},Ne=()=>{console.log("[KanbanTab] handleItemDragEnd CALLED - Before nextTick"),jt(()=>{w.value=!1,D.value=null,console.log("[KanbanTab] Drag End - After nextTick - isDraggingActive:",w.value)})},Re=C(()=>{var Ce,Se;const de=a.getters.getCurrentUser,ie=a.getters["funnel/getSelectedFunnel"];return!ie||!de?!1:de.role==="administrator"?!0:(Se=(Ce=ie.settings)==null?void 0:Ce.agents)==null?void 0:Se.some(je=>je.id===de.id)}),Ze=C(()=>a.getters["funnel/getFunnels"]||[]),Xe=C(()=>{const de=Ze.value.find(ie=>String(ie.id)===String(k.value.funnel_id));return de!=null&&de.stages?Object.entries(de.stages).map(([ie,Ce])=>({id:ie,name:Ce.name,position:Ce.position})).sort((ie,Ce)=>ie.position-Ce.position):[]});ot(()=>k.value.funnel_id,de=>{const ie=Ze.value.find(Se=>String(Se.id)===String(de)),Ce=ie&&Object.keys(ie.stages)[0];k.value.funnel_stage=Ce||""});const Qe=async()=>{if(B.value)try{const de={...B.value,funnel_id:k.value.funnel_id,funnel_stage:k.value.funnel_stage};await a.dispatch("kanban/moveItemToStage",{itemId:B.value.id,columnId:k.value.funnel_stage,funnelId:k.value.funnel_id}),H.value=!1,B.value=null,It.emit("newToastMessage",{message:s("KANBAN.SUCCESS_MOVING_ITEM"),action:{type:"success"}});const Ce=a.getters["funnel/getFunnels"].find(Se=>String(Se.id)===String(k.value.funnel_id));Ce&&await a.dispatch("funnel/setSelectedFunnel",Ce)}catch(de){console.error("Error moving item from modal:",de),It.emit("newToastMessage",{message:s("KANBAN.ERROR_MOVING_ITEM"),action:{type:"error"}})}},Je=C(()=>[...l.value]),st=C(()=>{if(!x.value)return{total:0,stages:{}};const de={total:0,stages:{}};return Je.value.forEach(ie=>{ie.items.length>0&&(de.stages[ie.title]=ie.items.length,de.total+=ie.items.length)}),de}),ht=C(()=>(console.log("[ORDENAO-RENDER] Colunas filtradas na renderizao:",Je.value.map(de=>`${de.title} (posio: ${de.position})`)),!0)),wt=de=>{U.value=de},ee=()=>{U.value=null};return(de,ie)=>{var je;const Ce=z("woot-button"),Se=z("fluent-icon");return p(),f("div",Ngt,[v(iv,{"current-view":e.currentView,"current-stage":(je=r.value)==null?void 0:je.id,"search-results":st.value,columns:Je.value,"active-filters":S.value,"kanban-items":[],"is-dragging-active":w.value,"dragged-item":D.value,onFilter:ie[0]||(ie[0]=Ke=>b.value=!0),onSettings:W,onItemCreated:Q,onSearch:Z,onSwitchView:ie[1]||(ie[1]=Ke=>n("switchView",Ke)),onGlobalStatusFilterChange:G},null,8,["current-view","current-stage","search-results","columns","active-filters","is-dragging-active","dragged-item"]),e.isLoading?(p(),f("div",Ogt,ie[18]||(ie[18]=[c("span",{class:"loading-spinner"},null,-1)]))):o.value&&o.value!=="Nenhum funil selecionado"?(p(),f("div",wgt,E(o.value),1)):d.value?Re.value?(p(),f("div",Bgt,[y.value?(p(),f("div",Fgt,[ie[19]||(ie[19]=c("span",{class:"loading-spinner-small mr-2"},null,-1)),Ee(" "+E(I(s)("KANBAN.UPDATING")),1)])):O("",!0),c("div",Ugt,[ht.value?(p(),f("div",Ggt)):O("",!0),U.value?(p(!0),f(fe,{key:1},Ae(Je.value.filter(Ke=>Ke.id===U.value),Ke=>(p(),V(FE,{key:Ke.id,id:Ke.id,title:Ke.title,color:Ke.color,"total-columns":Je.value.length,"is-expanded":!0,onAdd:M,onEdit:q,onDelete:R,onDrop:P,onItemClick:se,onItemDragstart:ue,onItemDragend:Ne,onExpand:wt,onCloseExpanded:ee},null,8,["id","title","color","total-columns"]))),128)):(p(!0),f(fe,{key:2},Ae(Je.value.slice().sort((Ke,$e)=>Ke.position-$e.position),Ke=>(p(),V(FE,{key:Ke.id,id:Ke.id,title:Ke.title,color:Ke.color,"total-columns":Je.value.length,"is-expanded":!1,onAdd:M,onEdit:q,onDelete:R,onDrop:P,onItemClick:se,onItemDragstart:ue,onItemDragend:Ne,onExpand:wt,onCloseExpanded:ee},null,8,["id","title","color","total-columns"]))),128))])])):(p(),f("div",kgt,[c("div",Lgt,[v(Se,{icon:"lock-closed",size:"64"})]),c("h3",Dgt,E(I(s)("KANBAN.ACCESS_RESTRICTED")),1),c("p",Pgt,E(I(s)("KANBAN.ACCESS_RESTRICTED_MESSAGE")),1)])):(p(),f("div",Rgt,[c("h3",$gt,E(I(s)("KANBAN.FUNNELS.FORM.CREATE_FIRST")),1),c("p",Mgt,E(I(s)("KANBAN.FUNNELS.FORM.CREATE_FIRST_MESSAGE")),1),v(Ce,{variant:"primary","color-scheme":"woot",icon:"add",onClick:ie[2]||(ie[2]=Ke=>$.value=!0)},{default:K(()=>[Ee(E(I(s)("KANBAN.FUNNELS.FORM.CREATE_BUTTON")),1)]),_:1})])),v(qt,{show:i.value,"onUpdate:show":ie[4]||(ie[4]=Ke=>i.value=Ke),size:"full-width","on-close":()=>i.value=!1},{default:K(()=>[c("div",Vgt,[c("h3",Hgt,E(I(s)("KANBAN.ADD_ITEM")),1),r.value&&d.value?(p(),V(Oi,{key:0,"funnel-id":d.value.id,stage:r.value.id,position:r.value.position,onSaved:Q,onClose:ie[3]||(ie[3]=Ke=>i.value=!1)},null,8,["funnel-id","stage","position"])):(p(),f("div",Wgt,E(I(s)("KANBAN.ERRORS.NO_FUNNEL_SELECTED")),1))])]),_:1},8,["show","on-close"]),v(qt,{show:u.value,"onUpdate:show":ie[7]||(ie[7]=Ke=>u.value=Ke),"on-close":()=>{u.value=!1,m.value=null}},{default:K(()=>{var Ke;return[c("div",Kgt,[c("h3",zgt,E(I(s)("KANBAN.DELETE_CONFIRMATION.TITLE")),1),c("p",jgt,E(I(s)("KANBAN.DELETE_CONFIRMATION.MESSAGE",{item:(Ke=m.value)==null?void 0:Ke.title})),1),c("div",Ygt,[v(Ce,{variant:"clear","color-scheme":"secondary",onClick:ie[5]||(ie[5]=$e=>u.value=!1)},{default:K(()=>[Ee(E(I(s)("KANBAN.CANCEL")),1)]),_:1}),v(Ce,{variant:"solid","color-scheme":"alert",onClick:ie[6]||(ie[6]=$e=>R(m.value))},{default:K(()=>[Ee(E(I(s)("KANBAN.DELETE")),1)]),_:1})])])]}),_:1},8,["show","on-close"]),v(qt,{show:h.value,"onUpdate:show":ie[9]||(ie[9]=Ke=>h.value=Ke),size:"full-width","on-close":()=>{h.value=!1,_.value=null}},{default:K(()=>[c("div",Xgt,[c("h3",qgt,E(I(s)("KANBAN.FORM.EDIT_ITEM")),1),_.value&&d.value?(p(),V(Oi,{key:0,"funnel-id":d.value.id,stage:_.value.funnel_stage,position:_.value.position,"initial-data":_.value,"is-editing":"",onSaved:ne,onClose:ie[8]||(ie[8]=Ke=>h.value=!1)},null,8,["funnel-id","stage","position","initial-data"])):O("",!0)])]),_:1},8,["show","on-close"]),v(qt,{show:g.value,"onUpdate:show":ie[11]||(ie[11]=Ke=>g.value=Ke),size:"full-width","on-close":()=>{g.value=!1,T.value=null}},{default:K(()=>[T.value?(p(),V(zp,{key:0,item:T.value,onClose:ie[10]||(ie[10]=()=>{g.value=!1,T.value=null,be()}),onEdit:he,onItemUpdated:be},null,8,["item"])):O("",!0)]),_:1},8,["show","on-close"]),H.value?(p(),V(qt,{key:5,show:H.value,onClose:ie[15]||(ie[15]=Ke=>H.value=!1)},{default:K(()=>{var Ke,$e,Be;return[c("div",Zgt,[c("h3",Qgt,E(I(s)("KANBAN.BULK_ACTIONS.MOVE.TITLE"))+" - "+E((($e=(Ke=B.value)==null?void 0:Ke.item_details)==null?void 0:$e.title)||((Be=B.value)==null?void 0:Be.title)),1),c("div",Jgt,[c("label",e_t,E(I(s)("KANBAN.FORM.FUNNEL.LABEL")),1),pe(c("select",{"onUpdate:modelValue":ie[12]||(ie[12]=Ue=>k.value.funnel_id=Ue),class:"w-full h-10 px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},[(p(!0),f(fe,null,Ae(Ze.value,Ue=>(p(),f("option",{key:Ue.id,value:Ue.id},E(Ue.name),9,t_t))),128))],512),[[zt,k.value.funnel_id]])]),c("div",n_t,[c("label",s_t,E(I(s)("KANBAN.FORM.STAGE.LABEL")),1),pe(c("select",{"onUpdate:modelValue":ie[13]||(ie[13]=Ue=>k.value.funnel_stage=Ue),class:"w-full h-10 px-3 py-2 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-woot-500/20 focus:border-woot-500"},[(p(!0),f(fe,null,Ae(Xe.value,Ue=>(p(),f("option",{key:Ue.id,value:Ue.id},E(Ue.name),9,a_t))),128))],512),[[zt,k.value.funnel_stage]])]),c("div",o_t,[c("button",{class:"px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",onClick:ie[14]||(ie[14]=Ue=>H.value=!1)},E(I(s)("KANBAN.CANCEL")),1),c("button",{class:"px-4 py-2 text-sm text-white bg-woot-500 hover:bg-woot-600 rounded-lg transition-colors",onClick:Qe},E(I(s)("KANBAN.MOVE")),1)])])]}),_:1},8,["show"])):O("",!0),v(qt,{show:$.value,"onUpdate:show":ie[17]||(ie[17]=Ke=>$.value=Ke),size:"large","on-close":()=>$.value=!1},{default:K(()=>[c("div",l_t,[c("h3",i_t,E(I(s)("KANBAN.FUNNELS.FORM.CREATE.TITLE")),1),v(Zp,{onSaved:J,onClose:ie[16]||(ie[16]=Ke=>$.value=!1)})])]),_:1},8,["show","on-close"]),v(lv,{show:b.value,columns:l.value,"filtered-results":A.value,"current-funnel":I(a).getters["funnel/getSelectedFunnel"],onClose:j,onApply:X},null,8,["show","columns","filtered-results","current-funnel"])])}}},UE=Fe(r_t,[["__scopeId","data-v-0252a230"]]),c_t={class:"flex flex-col h-full w-full bg-white dark:bg-slate-900"},d_t={class:"deals-list p-4 flex-1 overflow-auto w-full"},u_t={key:0,class:"flex justify-center items-center py-12"},p_t={key:1,class:"flex justify-center items-center py-12 text-ruby-500"},m_t={key:2,class:"flex flex-col items-center justify-center py-12"},h_t={class:"text-lg text-slate-600"},f_t={key:3,class:"space-y-2 w-full max-w-full"},g_t=["onClick"],__t={class:"flex items-center gap-2"},v_t={class:"font-medium text-slate-800 dark:text-slate-200"},b_t={class:"px-2 py-0.5 text-xs font-medium rounded-full bg-slate-200 dark:bg-slate-700"},E_t={class:"flex items-center gap-2"},T_t={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},A_t={class:"divide-y divide-slate-100 dark:divide-slate-800"},y_t=["onClick"],S_t={class:"flex-1"},I_t={class:"flex items-center gap-2"},C_t={class:"font-medium text-slate-900 dark:text-slate-100"},x_t={key:0,class:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md"},N_t={class:"text-right text-sm font-medium text-slate-800 dark:text-slate-200"},O_t={key:0,class:"flex items-center gap-2"},w_t={key:0,class:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-sm font-medium text-slate-600"},R_t=["src","alt"],$_t={class:"p-6"},M_t={class:"text-lg font-medium mb-4"},k_t={class:"text-sm text-slate-600 mb-6"},L_t={class:"flex justify-end gap-2"},D_t={__name:"ListTab",props:{currentView:{type:String,default:"list"},kanbanItems:{type:Array,required:!1},isLoading:{type:Boolean,default:!1},labelsMap:{type:Object,default:()=>({})}},emits:["switch-view","itemClick","force-update","itemsUpdated"],setup(e,{emit:t}){const{t:n}=Pe(),s=Pn();En();const a=F(!1),o=F([]),l=F(null),i=F(""),r=F(null),d=t,u=C(()=>s.getters["funnel/getSelectedFunnel"]),m=C(()=>s.getters["kanban/getKanbanItems"]),h=C(()=>s.state.kanban.loading),_=F(!1);F(!1),F(!1),F({x:0,y:0});const g=F(null);F(null);const T=F(!1),S=F(new Set);F(!1),F(null),C(()=>{const G=s.getters["funnel/getFunnels"]||[],L={};return G.forEach(M=>{L[M.id]=M}),L});const b=()=>{try{const G=u.value;if(!(G!=null&&G.id)){l.value="Nenhum funil selecionado",o.value=[];return}const L=m.value;if(!Array.isArray(L)){console.error("kanbanItems no  um array. No  possvel processar."),o.value=[];return}const M=L.filter(R=>String(R.funnel_id)===String(G.id));console.log("Items encontrados para o funil atual:",M.length),o.value=M.map(R=>{var Q,Z,j,X,q,se,he;const P=((Q=G.stages[R.funnel_stage])==null?void 0:Q.name)||"",W=((Z=G.stages[R.funnel_stage])==null?void 0:Z.color)||"#64748B";return{id:R.id,title:((j=R.item_details)==null?void 0:j.title)||"",description:((X=R.item_details)==null?void 0:X.description)||"",priority:((q=R.item_details)==null?void 0:q.priority)||"none",assignee:((se=R.item_details)==null?void 0:se.agent)||null,value:((he=R.item_details)==null?void 0:he.value)||0,stage:R.funnel_stage,stageName:P,stageColor:W,createdAt:new Date(R.created_at).toLocaleDateString(),item_details:R.item_details,funnel_id:String(R.funnel_id)}}),console.log("Deals processados:",o.value.length)}catch(G){console.error("Erro ao processar deals:",G),l.value=G.message}},A=async()=>{a.value=!0;try{await s.dispatch("kanban/fetchKanbanItems")}catch(G){console.error("Erro ao buscar itens do Kanban:",G),l.value="Erro ao carregar dados. Tente novamente."}finally{a.value=!1}};ot(()=>m.value,()=>b()),ot(()=>u.value,()=>b()),ot(()=>s.getters["funnel/getFunnels"],()=>b()),pt(()=>{u.value&&A()});const y=C(()=>{let G=o.value;if(i.value){const L=i.value.toLowerCase();G=G.filter(M=>{var R;return M.title.toLowerCase().includes(L)||M.description.toLowerCase().includes(L)||((R=M.assignee)==null?void 0:R.name.toLowerCase().includes(L))})}if(r.value){const L=r.value;G=G.filter(M=>{var P,W,Q,Z,j,X;let R=!0;if((P=L.priority)!=null&&P.length&&(R=R&&L.priority.includes(M.priority)),(W=L.value)!=null&&W.min||(Q=L.value)!=null&&Q.max){const q=parseFloat(M.value)||0;L.value.min&&(R=R&&q>=parseFloat(L.value.min)),L.value.max&&(R=R&&q<=parseFloat(L.value.max))}if(L.agent_id&&(R=R&&((Z=M.assignee)==null?void 0:Z.id)===L.agent_id),(j=L.date)!=null&&j.start||(X=L.date)!=null&&X.end){const q=new Date(M.createdAt);L.date.start&&(R=R&&q>=new Date(L.date.start)),L.date.end&&(R=R&&q<=new Date(L.date.end))}return R})}return G}),x=G=>{i.value=G},$=G=>{r.value=G},N=C(()=>{if(!i.value)return{total:0,stages:{}};const G={total:y.value.length,stages:{}};return y.value.forEach(L=>{G.stages[L.stageName]||(G.stages[L.stageName]=0),G.stages[L.stageName]++}),G}),w=C(()=>{const G=u.value;if(!(G!=null&&G.stages))return[];const L={};return Object.entries(G.stages).forEach(([M,R])=>{L[M]={id:M,name:R.name||"",color:R.color||"#64748B",deals:[],totalValue:0,position:R.position||0}}),y.value.forEach(M=>{L[M.stage]&&(L[M.stage].deals.push(M),L[M.stage].totalValue+=Number(M.value)||0)}),Object.values(L).sort((M,R)=>M.position-R.position)}),D=async G=>{var L;if((L=G.item_details)!=null&&L.conversation_id)try{const R=(await conversationAPI.get({})).data.data.payload;conversationData.value[G.id]=R.find(P=>P.id===G.item_details.conversation_id)}catch(M){console.error("Erro ao carregar dados da conversa:",M)}},H=async()=>{if(g.value)try{T.value=!0,await Dn.deleteItem(g.value.id),d("force-update"),_.value=!1,g.value=null}catch(G){console.error("Erro ao excluir item:",G)}finally{T.value=!1}},B=G=>{d("itemClick",G)};ot(w,async G=>{const L=G.flatMap(M=>M.deals.filter(R=>{var P;return(P=R.item_details)==null?void 0:P.conversation_id}).map(D));await Promise.all(L)});const k=G=>{S.value.has(G)?S.value.delete(G):S.value.add(G)},U=G=>S.value.has(G);return(G,L)=>{const M=z("fluent-icon"),R=z("woot-button");return p(),f(fe,null,[c("div",c_t,[v(iv,{"current-view":e.currentView,"search-results":N.value,"active-filters":r.value,onFilter:$,onSearch:x,onSwitchView:L[0]||(L[0]=P=>d("switch-view",P))},null,8,["current-view","search-results","active-filters"]),c("div",d_t,[h.value||a.value?(p(),f("div",u_t,L[3]||(L[3]=[c("span",{class:"loading-spinner"},null,-1)]))):l.value?(p(),f("div",p_t,E(l.value),1)):y.value.length?(p(),f("div",f_t,[(p(!0),f(fe,null,Ae(w.value,P=>(p(),f("div",{key:P.id,class:"deal-group w-full bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700"},[c("div",{class:"stage-header p-3 flex items-center justify-between bg-slate-50 dark:bg-slate-800 rounded-t-lg cursor-pointer",onClick:W=>k(P.id)},[c("div",__t,[c("span",{class:"w-3 h-3 rounded-full",style:Ct({backgroundColor:P.color})},null,4),c("h3",v_t,E(P.name),1),c("span",b_t,E(P.deals.length),1)]),c("div",E_t,[c("div",T_t,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:I(n)("KANBAN.CURRENCY")}).format(P.totalValue)),1),v(M,{icon:U(P.id)?"chevron-up":"chevron-down",size:"16",class:"text-slate-500"},null,8,["icon"])])],8,g_t),pe(c("div",A_t,[(p(!0),f(fe,null,Ae(P.deals,W=>(p(),f("div",{key:W.id,class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer flex items-center gap-3",onClick:Q=>B(W)},[c("div",S_t,[c("div",I_t,[c("div",C_t,E(W.title),1)]),W.description?(p(),f("div",x_t,E(W.description),1)):O("",!0)]),c("div",N_t,E(new Intl.NumberFormat("pt-BR",{style:"currency",currency:I(n)("KANBAN.CURRENCY")}).format(W.value)),1),W.assignee?(p(),f("div",O_t,[W.assignee.avatar?(p(),f("img",{key:1,src:W.assignee.avatar,alt:W.assignee.name,class:"w-8 h-8 rounded-full"},null,8,R_t)):(p(),f("span",w_t,E(W.assignee.name.charAt(0)),1))])):O("",!0)],8,y_t))),128))],512),[[pn,U(P.id)]])]))),128))])):(p(),f("div",m_t,[v(M,{icon:"task",size:"48",class:"mb-4 text-slate-400"}),c("p",h_t,E(I(n)("KANBAN.NO_ITEMS")),1)]))])]),v(qt,{show:_.value,"onUpdate:show":L[2]||(L[2]=P=>_.value=P),"on-close":()=>{_.value=!1,g.value=null}},{default:K(()=>{var P;return[c("div",$_t,[c("h3",M_t,E(I(n)("KANBAN.DELETE.TITLE")),1),c("p",k_t,E(I(n)("KANBAN.DELETE.DESCRIPTION",{item:(P=g.value)==null?void 0:P.title})),1),c("div",L_t,[v(R,{variant:"clear",size:"small",onClick:L[1]||(L[1]=W=>_.value=!1)},{default:K(()=>[Ee(E(I(n)("KANBAN.CANCEL")),1)]),_:1}),v(R,{variant:"danger",size:"small",loading:T.value,onClick:H},{default:K(()=>[Ee(E(I(n)("KANBAN.DELETE")),1)]),_:1},8,["loading"])])])]}),_:1},8,["show","on-close"])],64)}}},P_t=Fe(D_t,[["__scopeId","data-v-0399ece7"]]),B_t={class:"flex flex-col h-full bg-white dark:bg-slate-900"},F_t={class:"flex flex-1 min-h-0 flex-col"},U_t={class:"flex flex-1 min-h-0"},G_t={class:"w-[280px] border-r border-slate-200 dark:border-slate-700 flex flex-col mini-calendar-section overflow-hidden"},V_t={class:"p-4 flex-shrink-0 flex flex-col h-full"},H_t={key:0,class:"flex items-center justify-between mb-4"},W_t={class:"flex gap-1"},K_t={key:3,class:"mini-calendar mb-6 flex-shrink-0"},z_t={class:"grid grid-cols-7 gap-2"},j_t=["onClick"],Y_t={key:0,class:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-woot-500"},X_t={class:"flex-1 flex flex-col min-h-0"},q_t={class:"flex-shrink-0 bg-white dark:bg-slate-900 z-10"},Z_t={class:"flex items-center justify-between px-6 py-4"},Q_t={class:"text-xl font-semibold text-slate-800 dark:text-slate-200"},J_t={class:"flex items-center gap-2"},evt={class:"flex border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden"},tvt={class:"grid grid-cols-7 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50"},nvt=["data-view-mode"],svt=["onClick","onDragover","onDrop"],avt={class:"h-full flex flex-col"},ovt={key:0,class:"day-events-container"},lvt=["onClick"],ivt={class:"flex items-center gap-1"},rvt={class:"truncate"},cvt={key:1,class:"day-events-container"},dvt=["onClick"],uvt={class:"flex items-center gap-1"},pvt={class:"truncate"},mvt={key:0,class:"text-xs text-slate-500 dark:text-slate-400 pl-1"},hvt={class:"flex-shrink-0 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 month-summary"},fvt={class:"flex items-center gap-6 px-6 py-3"},gvt={class:"flex items-center gap-2"},_vt={class:"text-sm text-slate-600 dark:text-slate-400"},vvt={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},bvt={class:"flex items-center gap-2"},Evt={class:"text-sm text-woot-600 dark:text-woot-400"},Tvt={class:"text-sm font-medium text-woot-600 dark:text-woot-400"},Avt={class:"flex items-center gap-2"},yvt={class:"text-sm text-yellow-600 dark:text-yellow-400"},Svt={class:"text-sm font-medium text-yellow-600 dark:text-yellow-400"},Ivt={class:"flex items-center gap-2"},Cvt={class:"text-sm text-ruby-600 dark:text-ruby-400"},xvt={class:"text-sm font-medium text-ruby-600 dark:text-ruby-400"},Nvt={class:"border-t border-slate-200 dark:border-slate-700 mt-auto recent-items-section"},Ovt={class:"flex items-center gap-2"},wvt={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Rvt={class:"text-xs text-slate-500"},$vt={class:"text-xs text-slate-500"},Mvt={class:"overflow-hidden"},kvt={class:"overflow-x-auto p-4 pt-0"},Lvt={class:"flex gap-4"},Dvt=["onDragstart"],Pvt={class:"flex items-center gap-2"},Bvt={class:"flex-1 min-w-0"},Fvt={class:"flex items-center justify-between"},Uvt={class:"flex items-center gap-2 flex-1 min-w-0"},Gvt={class:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate"},Vvt={class:"flex items-center gap-2 text-xs text-slate-500"},Hvt={class:"text-slate-400"},Wvt={class:"flex items-center gap-1"},Kvt={class:"p-6"},zvt={class:"text-lg font-medium mb-4"},jvt={class:"p-6"},Yvt={class:"text-lg font-medium mb-4"},Xvt={__name:"AgendaTab",props:{currentView:{type:String,default:"agenda"},columns:{type:Array,default:()=>[]}},emits:["switch-view"],setup(e,{emit:t}){const{t:n}=Pe(),s=Pn(),a=F(!1),o=F(null),l=F([]),i=F({}),r=F(""),d=F(null),u=F({total:0,stages:{}}),m=F(new Date),h=F(new Date),_=F(!1);F(!1),F(null);const g=F("month"),T=F("days"),{MONTH:S,YEAR:b}=ed,A=F(!1),y=F(null),x=F(null),$=F(!0),N=F(new Date),w=F(!1),D=F(null),H=e,B=t,k=C(()=>{const ae=m.value.getFullYear(),ve=m.value.getMonth(),Y=new Date(ae,ve,1),oe=new Date(ae,ve+1,0),te=[],le=Y.getDay();for(let me=le-1;me>=0;me--){const Ie=new Date(ae,ve,-me);te.push({date:Ie,isCurrentMonth:!1,events:R(Ie)})}for(let me=1;me<=oe.getDate();me++){const Ie=new Date(ae,ve,me);te.push({date:Ie,isCurrentMonth:!0,events:R(Ie)})}const ye=42-te.length;for(let me=1;me<=ye;me++){const Ie=new Date(ae,ve+1,me);te.push({date:Ie,isCurrentMonth:!1,events:R(Ie)})}return te}),U=C(()=>g.value==="week"?G():k.value),G=()=>{const ae=h.value||new Date,ve=new Date(ae);ve.setDate(ve.getDate()-ve.getDay());const Y=[];for(let oe=0;oe<7;oe++){const te=new Date(ve);te.setDate(ve.getDate()+oe),Y.push({date:te,isCurrentMonth:te.getMonth()===m.value.getMonth(),events:R(te)})}return Y},L=C(()=>{const ae=g.value==="week"?U.value:k.value,ve=[];for(let Y=0;Y<ae.length;Y+=7)ve.push(ae.slice(Y,Y+7));return ve}),M=C(()=>["Dom","Seg","Ter","Qua","Qui","Sex","Sb"]),R=ae=>{const ve=ae.getFullYear(),Y=ae.getMonth(),oe=ae.getDate();return l.value.filter(te=>{var me,Ie;const le=((me=te.item_details)==null?void 0:me.scheduled_at)||((Ie=te.item_details)==null?void 0:Ie.deadline_at);if(!le)return!1;const ye=new Date(le);return ye.getFullYear()===ve&&ye.getMonth()===Y&&ye.getDate()===oe})},P=ae=>{const ve=new Date(h.value);ve.setDate(ve.getDate()+ae*7),h.value=ve,m.value=new Date(ve)},W=ae=>{if(g.value==="week"){P(ae*4);return}const ve=new Date(m.value);ve.setMonth(ve.getMonth()+ae),m.value=ve,h.value=ve},Q=(ae,ve={month:"long",year:"numeric"})=>new Intl.DateTimeFormat("pt-BR",{...ve}).format(ae),Z=ae=>{const ve=new Date;return ae.getDate()===ve.getDate()&&ae.getMonth()===ve.getMonth()&&ae.getFullYear()===ve.getFullYear()};C(()=>{const ae=new Date;return l.value.filter(ve=>{var te,le,ye;const Y=((te=ve.item_details)==null?void 0:te.scheduling_type)==="deadline"?(le=ve.item_details)==null?void 0:le.deadline_at:(ye=ve.item_details)==null?void 0:ye.scheduled_at;if(!Y)return!1;const oe=new Date(Y);return oe.getUTCFullYear()===ae.getFullYear()&&oe.getUTCMonth()===ae.getMonth()&&oe.getUTCDate()===ae.getDate()}).sort((ve,Y)=>{var le,ye,me,Ie,Oe,we;const oe=new Date(((le=ve.item_details)==null?void 0:le.scheduling_type)==="deadline"?(ye=ve.item_details)==null?void 0:ye.deadline_at:(me=ve.item_details)==null?void 0:me.scheduled_at),te=new Date(((Ie=Y.item_details)==null?void 0:Ie.scheduling_type)==="deadline"?(Oe=Y.item_details)==null?void 0:Oe.deadline_at:(we=Y.item_details)==null?void 0:we.scheduled_at);return oe-te})});const j=C(()=>l.value.filter(ae=>{var Y,oe;return!(((Y=ae.item_details)==null?void 0:Y.scheduled_at)||((oe=ae.item_details)==null?void 0:oe.deadline_at))}).sort((ae,ve)=>new Date(ve.created_at)-new Date(ae.created_at)).slice(0,10)),X=async({showLoading:ae=!0}={})=>{var ve;try{if(ae&&(a.value=!0),Object.keys(i.value).length===0){const{data:Ie}=await Qc.get();Ie.forEach(Oe=>{i.value[Oe.id]=Oe})}const Y=s.getters["funnel/getSelectedFunnel"];if(!Y){console.error("Nenhum funil selecionado"),l.value=[];return}let oe=[],te=1,le=!0;for(;le;){const Oe=(await Dn.getItems(Y.id,te)).data;if(Oe&&Oe.items?(oe=oe.concat(Oe.items),le=((ve=Oe.pagination)==null?void 0:ve.has_more)||!1):(Array.isArray(Oe)&&(oe=Oe),le=!1),te++,te>100){console.warn("Limite de pginas atingido, interrompendo busca");break}}let ye=oe;const me=await Promise.all(ye.map(async Ie=>{var He,et,bt,Nt,ct,Ot;const Oe=(He=Ie.item_details)==null?void 0:He.agent_id,we=Oe?i.value[Oe]:null;let Ye=[];return Ie.assigned_agents&&Ie.assigned_agents.length>0?Ye=Ie.assigned_agents:we&&(Ye=[{id:we.id,name:we.name,avatar_url:we.avatar_url||we.thumbnail||"",assigned_at:null,assigned_by:null}]),{id:Ie.id,title:((et=Ie.item_details)==null?void 0:et.title)||"",description:((bt=Ie.item_details)==null?void 0:bt.description)||"",priority:((Nt=Ie.item_details)==null?void 0:Nt.priority)||"none",funnel_id:Ie.funnel_id,funnel_stage:Ie.funnel_stage,position:Ie.position,stage_entered_at:Ie.stage_entered_at||null,conversation_display_id:Ie.conversation_display_id||null,assigned_agents:Ye,checklist:Ie.checklist||[],conversation:Ie.conversation||null,item_details:{...Ie.item_details,_agent:we},stageName:((ct=H.columns.find(Le=>Le.id===Ie.funnel_stage))==null?void 0:ct.title)||"",stageColor:((Ot=H.columns.find(Le=>Le.id===Ie.funnel_stage))==null?void 0:Ot.color)||"#64748B",created_at:Ie.created_at,custom_attributes:Ie.custom_attributes||{},agent:we||null}}));l.value=me}catch(Y){console.error("Erro ao carregar itens:",Y),o.value=n("KANBAN.ERRORS.FETCH_ITEMS")}finally{a.value=!1}},q=ae=>{B("switch-view",ae)},se=(ae,ve)=>{h.value=ae,_.value=!0},he=ae=>{d.value=ae},be=ae=>{r.value=ae},ne=async ae=>{ae&&(_.value=!1,await X({showLoading:!1}))},J=ae=>{var oe,te,le,ye,me,Ie,Oe,we;const ve=l.value.find(Ye=>Ye.id===ae.id)||ae;Ue(ve);const Y=ge(ve);return{id:ve.id||null,title:((oe=ve.item_details)==null?void 0:oe.title)||ve.title||"",description:((te=ve.item_details)==null?void 0:te.description)||ve.description||"",priority:((le=ve.item_details)==null?void 0:le.priority)||ve.priority||"none",funnel_id:ve.funnel_id||null,funnel_stage:ve.funnel_stage||null,position:ve.position||0,stage_entered_at:ve.stage_entered_at||null,conversation_display_id:ve.conversation_display_id||null,assigned_agents:ve.assigned_agents||[],item_details:{title:((ye=ve.item_details)==null?void 0:ye.title)||ve.title||"",description:((me=ve.item_details)==null?void 0:me.description)||ve.description||"",priority:((Ie=ve.item_details)==null?void 0:Ie.priority)||ve.priority||"none",value:null,currency:"BRL",deadline_at:null,scheduling_type:null,scheduled_at:null,agent_id:(Y==null?void 0:Y.id)||null,rescheduled:!1,rescheduling_history:[],notes:[],activities:[],conversation_id:null,...ve.item_details||{},_agent:Y},stageName:ve.stageName||((Oe=H.columns.find(Ye=>Ye.id===ve.funnel_stage))==null?void 0:Oe.title)||"",stageColor:ve.stageColor||((we=H.columns.find(Ye=>Ye.id===ve.funnel_stage))==null?void 0:we.color)||"#64748B",created_at:ve.created_at||new Date().toISOString(),custom_attributes:ve.custom_attributes||{},checklist:ve.checklist||[],agent:Y||ve.agent||null,conversation:ve.conversation||null}},ue=ae=>{y.value=J(ae),A.value=!0},Ne=()=>{A.value=!1,y.value=null},Re=async(ae,ve,Y=!1)=>{var oe,te,le;try{const ye=l.value.find(we=>we.id===ae);if(!ye)return;const me=((oe=ye.item_details)==null?void 0:oe.scheduling_type)==="deadline"?(te=ye.item_details)==null?void 0:te.deadline_at:(le=ye.item_details)==null?void 0:le.scheduled_at,Ie={...ye.item_details,scheduling_type:"deadline",deadline_at:new Date(ve).toISOString().split("T")[0],rescheduled:Y,rescheduling_history:Y?[...ye.item_details.rescheduling_history||[],{from_date:me,to_date:new Date(ve).toISOString().split("T")[0],changed_at:new Date().toISOString()}]:[]},Oe={funnel_id:ye.funnel_id,funnel_stage:ye.funnel_stage,position:ye.position,item_details:Ie,custom_attributes:ye.custom_attributes||{}};await Dn.updateItem(ae,Oe),await X()}catch(ye){console.error("Erro ao definir prazo:",ye)}},Ze=(ae,ve)=>{ae.preventDefault(),x.value=ve},Xe=()=>{x.value=null},Qe=async(ae,ve)=>{ae.preventDefault();const Y=parseInt(ae.dataTransfer.getData("itemId"),10),oe=ae.dataTransfer.getData("isReschedule")==="true";Y&&(x.value=null,await Re(Y,ve,oe))},Je=()=>{$.value=!$.value},st=ae=>{var ve;D.value={...ae,funnel_stage:ae.funnel_stage||((ve=s.getters["funnel/getSelectedFunnel"])==null?void 0:ve.default_stage)},w.value=!0},ht=async ae=>{w.value=!1,D.value=null,A.value=!1,await X({showLoading:!1})};pt(async()=>{await X()}),ot(()=>s.getters["funnel/getSelectedFunnel"],async()=>{await X()}),ot(g,ae=>{ae==="week"&&(h.value=new Date)});const wt=C(()=>l.value.filter(ae=>{var oe,te;const ve=((oe=ae.item_details)==null?void 0:oe.scheduled_at)||((te=ae.item_details)==null?void 0:te.deadline_at);if(!ve)return!1;const Y=new Date(ve);return Y.getMonth()===m.value.getMonth()&&Y.getFullYear()===m.value.getFullYear()})),ee=C(()=>l.value.filter(ae=>{var ve;return(ve=ae.item_details)==null?void 0:ve.rescheduled})),de=C(()=>l.value.filter(ae=>{var ve,Y;return!((ve=ae.item_details)!=null&&ve.scheduled_at)&&!((Y=ae.item_details)!=null&&Y.deadline_at)}));C(()=>l.value.filter(ae=>{var oe,te,le;const ve=((oe=ae.item_details)==null?void 0:oe.scheduling_type)==="deadline"?(te=ae.item_details)==null?void 0:te.deadline_at:(le=ae.item_details)==null?void 0:le.scheduled_at;if(!ve)return!1;const Y=new Date(ve);return Y.getUTCFullYear()===N.value.getFullYear()&&Y.getUTCMonth()===N.value.getMonth()&&Y.getUTCDate()===N.value.getDate()}).sort((ae,ve)=>{var te,le,ye,me;const Y=new Date(((te=ae.item_details)==null?void 0:te.scheduled_at)||((le=ae.item_details)==null?void 0:le.deadline_at)),oe=new Date(((ye=ve.item_details)==null?void 0:ye.scheduled_at)||((me=ve.item_details)==null?void 0:me.deadline_at));return Y-oe}));const ie=(ae,ve)=>ae.getFullYear()===ve.getFullYear()&&ae.getMonth()===ve.getMonth()&&ae.getDate()===ve.getDate();C(()=>{if(g.value!=="week")return{};const ae={};return U.value.forEach(ve=>{const Y=ve.date.toISOString().split("T")[0];ae[Y]={},ve.events.forEach(oe=>{var Oe,we;const te=((Oe=oe.item_details)==null?void 0:Oe.scheduled_at)||((we=oe.item_details)==null?void 0:we.deadline_at);if(!te)return;const le=new Date(te),ye=le.getHours(),me=le.getMinutes(),Ie=`${ye.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`;ae[Y][Ie]||(ae[Y][Ie]=[]),ae[Y][Ie].push(oe)})}),ae});const Ce=()=>{T.value="months"},Se=(ae,ve)=>{ve===b?T.value="years":ve===S?T.value="months":T.value="days"},je=ae=>{const ve=new Date(m.value);ve.setMonth(ae),m.value=ve,N.value=new Date(ve),T.value="days"},Ke=ae=>{const ve=new Date(m.value);ve.setFullYear(ae),m.value=ve,N.value=new Date(ve),T.value="months"},$e=()=>{const ae=new Date(m.value);ae.setFullYear(ae.getFullYear()-1),m.value=ae,N.value=new Date(ae)},Be=()=>{const ae=new Date(m.value);ae.setFullYear(ae.getFullYear()+1),m.value=ae,N.value=new Date(ae)},Ue=ae=>{var ve;if(ae.assigned_agents&&ae.assigned_agents.length>0)return ae.assigned_agents.map(Y=>({id:Y.id,name:Y.name,avatar_url:Y.avatar_url||Y.thumbnail||"",assigned_at:Y.assigned_at||null,assigned_by:Y.assigned_by||null}));if(ae.agent||(ve=ae.item_details)!=null&&ve._agent){const Y=ae.agent||ae.item_details._agent;return[{id:Y.id,name:Y.name,avatar_url:Y.avatar_url||Y.thumbnail||"",assigned_at:null,assigned_by:null}]}return[]},ge=ae=>{const ve=Ue(ae);return ve.length>0?ve[0]:null};return(ae,ve)=>{const Y=z("fluent-icon"),oe=z("woot-button");return p(),f("div",B_t,[v(iv,{"current-view":e.currentView,"search-results":u.value,"active-filters":d.value,columns:e.columns,"kanban-items":l.value,onSwitchView:q,onFilter:he,onSearch:be},null,8,["current-view","search-results","active-filters","columns","kanban-items"]),c("div",F_t,[c("div",U_t,[c("div",G_t,[c("div",V_t,[T.value==="days"?(p(),f("div",H_t,[c("span",{class:"text-sm font-medium text-slate-600 dark:text-slate-300 cursor-pointer hover:text-woot-500 dark:hover:text-woot-400",onClick:Ce},E(Q(m.value)),1),c("div",W_t,[v(oe,{variant:"clear",size:"small",onClick:ve[0]||(ve[0]=te=>W(-1))},{default:K(()=>[v(Y,{icon:"chevron-left",size:"12"})]),_:1}),v(oe,{variant:"clear",size:"small",onClick:ve[1]||(ve[1]=te=>W(1))},{default:K(()=>[v(Y,{icon:"chevron-right",size:"12"})]),_:1})])])):O("",!0),T.value==="months"?(p(),V(CA,{key:1,"calendar-type":"start","start-current-date":m.value,"end-current-date":m.value,class:"mb-4",onSelectMonth:je,onSetView:Se,onPrev:$e,onNext:Be},null,8,["start-current-date","end-current-date"])):O("",!0),T.value==="years"?(p(),V(IA,{key:2,"calendar-type":"start","start-current-date":m.value,"end-current-date":m.value,class:"mb-4",onSelectYear:Ke,onPrev:()=>{},onNext:()=>{}},null,8,["start-current-date","end-current-date"])):O("",!0),T.value==="days"?(p(),f("div",K_t,[v(xA,{class:"mb-2"}),c("div",z_t,[(p(!0),f(fe,null,Ae(k.value,te=>(p(),f("div",{key:te.date,class:re(["aspect-square flex items-center justify-center text-sm rounded-full cursor-pointer",{"bg-slate-100 dark:bg-slate-800":!te.isCurrentMonth,"bg-white dark:bg-slate-900":te.isCurrentMonth,"text-slate-400":!te.isCurrentMonth,"text-slate-900 dark:text-slate-100":te.isCurrentMonth,"bg-woot-500 text-white":Z(te.date)&&!te.events.length,"ring-2 ring-woot-500":ie(te.date,N.value),relative:te.events.length>0}]),onClick:le=>N.value=te.date},[Ee(E(te.date.getDate())+" ",1),te.events.length>0?(p(),f("div",Y_t)):O("",!0)],10,j_t))),128))])])):O("",!0)])]),c("div",X_t,[c("div",q_t,[c("div",Z_t,[c("h2",Q_t,E(Q(g.value==="week"?h.value:m.value)),1),c("div",J_t,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:ve[2]||(ve[2]=te=>{h.value=new Date,m.value=new Date})},{default:K(()=>[Ee(E(I(n)("KANBAN.AGENDA.VIEW_MODES.TODAY")),1)]),_:1}),c("div",evt,[v(ce,{variant:"clear",size:"sm",class:re(["px-3 py-1.5 border-r border-slate-200 dark:border-slate-700 rounded-none",{"bg-slate-100 dark:bg-slate-800 text-woot-600 dark:text-woot-400":g.value==="month","text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50":g.value!=="month"}]),color:g.value==="month"?"blue":"slate",onClick:ve[3]||(ve[3]=te=>g.value="month")},{default:K(()=>[Ee(E(I(n)("KANBAN.AGENDA.VIEW_MODES.MONTH")),1)]),_:1},8,["color","class"]),v(ce,{variant:"clear",size:"sm",class:re(["px-3 py-1.5 rounded-none",{"bg-slate-100 dark:bg-slate-800 text-woot-600 dark:text-woot-400":g.value==="week","text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50":g.value!=="week"}]),color:g.value==="week"?"blue":"slate",onClick:ve[4]||(ve[4]=te=>g.value="week")},{default:K(()=>[Ee(E(I(n)("KANBAN.AGENDA.VIEW_MODES.WEEK")),1)]),_:1},8,["color","class"])])])]),c("div",tvt,[(p(!0),f(fe,null,Ae(M.value,te=>(p(),f("div",{key:te,class:"py-2.5 text-xs font-medium text-slate-600 dark:text-slate-400 text-center border-r last:border-r-0 border-slate-200 dark:border-slate-700"},E(te),1))),128))])]),c("div",{class:"calendar-grid flex-1 overflow-y-auto","data-view-mode":g.value},[(p(!0),f(fe,null,Ae(L.value,te=>(p(),f("div",{key:te[0].date,class:"grid grid-cols-7"},[(p(!0),f(fe,null,Ae(te,le=>(p(),f("div",{key:le.date,class:re(["calendar-day relative p-2 last:border-r-0",{"bg-slate-50 dark:bg-slate-800/50":!le.isCurrentMonth,"bg-white dark:bg-slate-800":le.isCurrentMonth,today:Z(le.date),"h-full":g.value==="week","flex flex-col h-full":g.value==="week"}]),onClick:ye=>se(le.date,le.events),onDragover:ye=>Ze(ye,le.date),onDragleave:Xe,onDrop:ye=>Qe(ye,le.date)},[c("div",avt,[c("span",{class:re(["text-sm mb-1",{"text-slate-400 dark:text-slate-600":!le.isCurrentMonth,"text-slate-900 dark:text-slate-100":le.isCurrentMonth,"bg-woot-500 text-white rounded-full w-6 h-6 flex items-center justify-center":Z(le.date)}])},E(le.date.getDate()),3),g.value==="week"?(p(),f("div",ovt,[(p(!0),f(fe,null,Ae(le.events,ye=>{var me;return p(),f("div",{key:ye.id,class:"event-item text-xs p-1 rounded truncate cursor-pointer hover:opacity-90 mb-1",style:Ct({backgroundColor:ye.stageColor+"20",color:ye.stageColor,borderLeft:`2px solid ${ye.stageColor}`}),onClick:ze(Ie=>ue(ye),["stop"])},[c("div",ivt,[v(Y,{icon:((me=ye.item_details)==null?void 0:me.scheduling_type)==="deadline"?"alarm":"book",size:"12"},null,8,["icon"]),c("span",rvt,E(ye.title),1)])],12,lvt)}),128))])):(p(),f("div",cvt,[(p(!0),f(fe,null,Ae(le.events.slice(0,3),ye=>(p(),f("div",{key:ye.id,class:re(["event-item text-xs p-1 rounded truncate cursor-pointer hover:opacity-90",{"border-l-2":ye.scheduling_type==="deadline"}]),style:Ct({backgroundColor:ye.stageColor+"20",color:ye.stageColor,borderColor:ye.scheduling_type==="deadline"?ye.stageColor:"transparent"}),onClick:ze(me=>ue(ye),["stop"])},[c("div",uvt,[v(Y,{icon:ye.scheduling_type==="deadline"?"alarm":"book",size:"12",class:"flex-shrink-0"},null,8,["icon"]),c("span",pvt,E(ye.title),1)])],14,dvt))),128)),le.events.length>3?(p(),f("div",mvt," +"+E(le.events.length-3)+" mais ",1)):O("",!0)]))])],42,svt))),128))]))),128))],8,nvt),c("div",hvt,[c("div",fvt,[c("div",gvt,[c("span",_vt,E(I(n)("KANBAN.AGENDA.TOTAL_EVENTS"))+": ",1),c("span",vvt,E(l.value.length),1)]),c("div",bvt,[c("span",Evt,E(I(n)("KANBAN.AGENDA.MONTH_EVENTS"))+": ",1),c("span",Tvt,E(wt.value.length),1)]),c("div",Avt,[c("span",yvt,E(I(n)("KANBAN.AGENDA.RESCHEDULED_EVENTS"))+": ",1),c("span",Svt,E(ee.value.length),1)]),c("div",Ivt,[c("span",Cvt,E(I(n)("KANBAN.AGENDA.NO_DATE_ITEMS"))+": ",1),c("span",xvt,E(de.value.length),1)])])])])]),c("div",Nvt,[c("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50",onClick:Je},[c("div",Ovt,[v(Y,{icon:$.value?"chevron-down":"chevron-right",size:"16",class:"text-slate-400"},null,8,["icon"]),c("h3",wvt,E(I(n)("KANBAN.AGENDA.RECENT_ITEMS")),1),c("span",Rvt," ("+E(j.value.length)+") ",1)]),c("span",$vt,E(I(n)("KANBAN.AGENDA.DRAG_TO_SCHEDULE")),1)]),v(Ps,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[400px]","leave-from-class":"opacity-100 max-h-[400px]","leave-to-class":"opacity-0 max-h-0"},{default:K(()=>[pe(c("div",Mvt,[c("div",kvt,[c("div",Lvt,[(p(!0),f(fe,null,Ae(j.value,te=>(p(),f("div",{key:te.id,class:"flex-shrink-0 w-[400px] p-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow cursor-move",draggable:"true",onDragstart:le=>{le.dataTransfer.setData("itemId",te.id)}},[c("div",Pvt,[c("div",{class:re(["w-1 h-8 rounded-full flex-shrink-0",{"bg-ruby-500":te.priority==="high","bg-yellow-500":te.priority==="medium","bg-green-500":te.priority==="low","bg-slate-300":te.priority==="none"}])},null,2),c("div",Bvt,[c("div",Fvt,[c("div",Uvt,[c("h4",Gvt,E(te.title),1),c("span",{class:"flex-shrink-0 px-2 py-0.5 text-xs rounded-full",style:Ct({backgroundColor:te.stageColor+"20",color:te.stageColor})},E(te.stageName),5)]),c("div",Vvt,[c("span",Hvt,E(new Date(te.created_at).toLocaleDateString()),1),c("div",Wvt,[v(Y,{icon:"automation",size:"12"})])])])])])],40,Dvt))),128))])])],512),[[pn,$.value]])]),_:1})])]),y.value&&A.value?(p(),V(qt,{key:0,show:A.value,"onUpdate:show":ve[5]||(ve[5]=te=>A.value=te),"on-close":Ne,size:"full-width"},{default:K(()=>[y.value?(p(),V(zp,{key:0,item:y.value,onClose:Ne,onEdit:st,onItemUpdated:X},null,8,["item"])):O("",!0)]),_:1},8,["show"])):O("",!0),v(qt,{show:_.value,"onUpdate:show":ve[7]||(ve[7]=te=>_.value=te),size:"full-width","on-close":()=>_.value=!1},{default:K(()=>[c("div",Kvt,[c("h3",zvt,E(I(n)("KANBAN.ADD_ITEM")),1),I(s).getters["funnel/getSelectedFunnel"]?(p(),V(Oi,{key:0,"funnel-id":I(s).getters["funnel/getSelectedFunnel"].id,"initial-date":h.value,onSaved:ne,onClose:ve[6]||(ve[6]=te=>_.value=!1)},null,8,["funnel-id","initial-date"])):O("",!0)])]),_:1},8,["show","on-close"]),v(qt,{show:w.value,"onUpdate:show":ve[9]||(ve[9]=te=>w.value=te),size:"full-width","on-close":()=>w.value=!1},{default:K(()=>[c("div",jvt,[c("h3",Yvt,E(I(n)("KANBAN.EDIT_ITEM")),1),D.value?(p(),V(Oi,{key:0,"funnel-id":I(s).getters["funnel/getSelectedFunnel"].id,stage:D.value.funnel_stage,"initial-data":D.value,"is-editing":!0,onSaved:ht,onClose:ve[8]||(ve[8]=te=>w.value=!1)},null,8,["funnel-id","stage","initial-data"])):O("",!0)])]),_:1},8,["show","on-close"])])}}},qvt=Fe(Xvt,[["__scopeId","data-v-5a12aa94"]]),Zvt={class:"funnels-header"},Qvt={class:"flex items-center justify-between"},Jvt={class:"flex items-center gap-4"},ebt={class:"text-2xl font-medium"},tbt={class:"flex items-center gap-2"},nbt={class:"p-6"},sbt={class:"text-lg font-medium mb-4"},abt={class:"grid grid-cols-2 gap-4"},obt=["onClick"],lbt={class:"flex items-center gap-2 mb-2"},ibt={class:"font-medium"},rbt={class:"text-sm text-slate-600 dark:text-slate-400 mb-3"},cbt={class:"flex flex-wrap gap-2"},dbt={class:"p-6"},ubt={class:"text-lg font-medium mb-4"},pbt={__name:"FunnelsHeader",emits:["switch-view","funnel-created"],setup(e,{emit:t}){const{t:n}=Pe(),s=t,a=F(!1),o=F(!1),l=F(null),{isStacklab:i}=Js(),r={name:"",description:"",stages:{},settings:{agents:[]}},d=[{id:"sales",name:"Funil de Vendas",icon:"briefcase",description:"Processo de vendas desde o primeiro contato at o fechamento",stages:{prospeccao:{name:"Prospeco",color:"#6366f1",position:1,description:"Leads e primeiros contatos",message_templates:[{id:`template_${Date.now()}_1`,title:"Boas vindas",content:"Ol! Obrigado por entrar em contato. Como posso ajudar?",webhook:{url:"",method:"POST",enabled:!1},stage_id:"prospeccao",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},qualificacao:{name:"Qualificao",color:"#8b5cf6",position:2,description:"Anlise de fit",message_templates:[{id:`template_${Date.now()}_2`,title:"Agendamento de Reunio",content:"Podemos agendar uma reunio para entender melhor suas necessidades?",webhook:{url:"",method:"POST",enabled:!1},stage_id:"qualificacao",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},proposta:{name:"Proposta",color:"#ec4899",position:3,description:"Envio e negociao"},fechamento:{name:"Fechamento",color:"#10b981",position:4,description:"Contratos e pagamentos"}}},{id:"support",name:"Funil de Suporte",icon:"chat",description:"Atendimento e resoluo de tickets de suporte",stages:{novo:{name:"Novo",color:"#6366f1",position:1,description:"Tickets recm abertos",message_templates:[{id:`template_${Date.now()}_3`,title:"Confirmao de Recebimento",content:"Recebemos seu ticket. Nossa equipe j est analisando.",webhook:{url:"",method:"POST",enabled:!1},stage_id:"novo",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},analise:{name:"Em Anlise",color:"#8b5cf6",position:2,description:"Avaliao tcnica",message_templates:[{id:`template_${Date.now()}_4`,title:"Atualizao de Status",content:"Seu ticket est em anlise pela nossa equipe tcnica.",webhook:{url:"",method:"POST",enabled:!1},stage_id:"analise",conditions:{rules:[],enabled:!1},created_at:new Date().toISOString()}]},desenvolvimento:{name:"Em Desenvolvimento",color:"#ec4899",position:3,description:"Correo em andamento"},teste:{name:"Em Teste",color:"#f59e0b",position:4,description:"Validao da soluo"},resolvido:{name:"Resolvido",color:"#10b981",position:5,description:"Ticket finalizado"}}},{id:"recruitment",name:"Funil de Recrutamento",icon:"people",description:"Processo seletivo e contratao",stages:{triagem:{name:"Triagem",color:"#6366f1",position:1,description:"Anlise de currculos"},entrevista:{name:"Entrevista",color:"#8b5cf6",position:2,description:"Conversa inicial"},teste:{name:"Teste Tcnico",color:"#ec4899",position:3,description:"Avaliao prtica"},proposta:{name:"Proposta",color:"#10b981",position:4,description:"Negociao final"}}}],u=_=>{console.log("Template selecionado:",_);const g={name:_.name,description:_.description,stages:Object.entries(_.stages).reduce((S,[b,A])=>({...S,[b]:{...A,id:b,message_templates:A.message_templates||[],position:A.position}}),{}),settings:{agents:[]}},T={};Object.entries(g.stages).sort(([,S],[,b])=>S.position-b.position).forEach(([S,b])=>{T[S]=b}),g.stages=T,console.log("Template formatado:",g),l.value=g,o.value=!1,a.value=!0},m=()=>{s("switch-view","kanban")},h=_=>{console.log("Funil criado:",_),a.value=!1,s("funnel-created",_)};return(_,g)=>(p(),f("header",Zvt,[c("div",Qvt,[c("div",Jvt,[c("button",{class:"back-button",onClick:m},[v(nr,{icon:"arrow-chevron-left",size:"16",icons:I(tr)},null,8,["icons"])]),c("h1",ebt,E(I(n)("KANBAN.FUNNELS.TITLE")),1)]),c("div",tbt,[I(i)===!0?(p(),V(ce,{key:0,variant:"ghost",color:"slate",size:"sm",onClick:g[0]||(g[0]=T=>o.value=!0)},{icon:K(()=>[v(nr,{icon:"copy",size:"20",icons:I(tr)},null,8,["icons"])]),default:K(()=>[g[5]||(g[5]=c("span",null,"Modelos",-1))]),_:1})):O("",!0),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:g[1]||(g[1]=T=>a.value=!0)},{icon:K(()=>[v(nr,{icon:"add",size:"20",icons:I(tr)},null,8,["icons"])]),default:K(()=>[c("span",null,E(I(n)("KANBAN.FUNNELS.ACTIONS.NEW")),1)]),_:1})])]),v(qt,{show:o.value,"onUpdate:show":g[2]||(g[2]=T=>o.value=T),"on-close":()=>o.value=!1,size:"medium"},{default:K(()=>[c("div",nbt,[c("h3",sbt,E(I(n)("KANBAN.FUNNELS.TEMPLATES.TITLE")),1),c("div",abt,[(p(),f(fe,null,Ae(d,T=>c("div",{key:T.id,class:"p-4 border rounded-lg hover:border-woot-500 cursor-pointer transition-colors",onClick:S=>u(T)},[c("div",lbt,[v(nr,{icon:T.icon,size:"20",icons:I(tr),class:"text-woot-500"},null,8,["icon","icons"]),c("h4",ibt,E(T.name),1)]),c("p",rbt,E(T.description),1),c("div",cbt,[(p(!0),f(fe,null,Ae(Object.values(T.stages),S=>(p(),f("span",{key:S.name,class:"px-2 py-1 text-xs rounded-full",style:Ct({backgroundColor:`${S.color}20`,color:S.color})},E(S.name),5))),128))])],8,obt)),64))])])]),_:1},8,["show","on-close"]),v(qt,{show:a.value,"onUpdate:show":g[4]||(g[4]=T=>a.value=T),"on-close":()=>a.value=!1,class:"funnel-modal"},{default:K(()=>[c("div",dbt,[c("h3",ubt,E(I(n)("KANBAN.FUNNELS.ACTIONS.NEW")),1),v(Zp,{"initial-data":l.value||r,onSaved:h,onClose:g[3]||(g[3]=T=>a.value=!1)},null,8,["initial-data"])])]),_:1},8,["show","on-close"])]))}},mbt=Fe(pbt,[["__scopeId","data-v-b1b63e8d"]]),hbt={class:"flex flex-col h-full bg-white dark:bg-slate-900 p-4"},fbt={class:"funnels-content flex-1 overflow-y-auto"},gbt={key:0,class:"mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg"},_bt={class:"flex items-center gap-3"},vbt={class:"shrink-0"},bbt={key:1,class:"flex justify-center items-center py-12"},Ebt={key:2,class:"flex flex-col items-center justify-center py-12 text-slate-600"},Tbt={key:3,class:"grid gap-4"},Abt={class:"absolute top-4 right-4 flex items-center gap-1"},ybt={class:"flex flex-col gap-4"},Sbt={class:"flex items-center gap-2"},Ibt={class:"text-xs text-slate-400 select-all"},Cbt={class:"text-lg font-medium"},xbt={class:"text-xs text-slate-500"},Nbt={class:"flex flex-wrap gap-2"},Obt={key:0,class:"ml-1 px-1.5 text-[10px] rounded-full bg-white/50"},wbt={key:1,class:"absolute hidden group-hover:block bg-white dark:bg-slate-800 shadow-lg rounded-lg p-3 z-10 min-w-[250px] top-full left-0 mt-1"},Rbt={class:"flex items-center gap-2 mb-2"},$bt={class:"space-y-2"},Mbt={class:"flex items-center justify-between mb-1"},kbt={class:"text-xs font-medium"},Lbt={key:0,class:"text-[10px] px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"},Dbt={class:"text-[11px] text-slate-600 dark:text-slate-400 line-clamp-2"},Pbt={key:0,class:"flex flex-wrap gap-2"},Bbt={class:"text-xs text-slate-700 dark:text-slate-300"},Fbt={class:"p-6"},Ubt={class:"text-lg font-medium mb-4"},Gbt={class:"p-6"},Vbt={class:"text-lg font-medium mb-4"},Hbt={class:"text-sm text-slate-600 mb-6"},Wbt={class:"flex justify-end gap-2"},Kbt={__name:"FunnelsManager",emits:["switch-view"],setup(e,{emit:t}){const{t:n}=Pe(),s=Pn(),{isStacklab:a}=Js(),o=F(!1),l=F([]),i=F(!1),r=F(!1),d=F(!1),u=F(null),m=F(null),h=async()=>{o.value=!0;try{await s.dispatch("funnel/fetch");const x=s.getters["funnel/getFunnels"];l.value=x.map($=>{const N=Object.entries($.stages||{}).reduce((w,[D,H])=>({...w,[D]:{...H,id:D,position:parseInt(H.position,10)||0,message_templates:H.message_templates||[]}}),{});return{...$,stages:N}}),i.value=!a&&l.value.length>=2,console.log("Funis atualizados do store:",l.value)}catch(x){console.error("Erro ao atualizar funis do store:",x),It.emit("newToastMessage",{message:"Erro ao carregar dados dos funis.",action:{type:"error"}})}finally{o.value=!1}},_=x=>{u.value=x,r.value=!0},g=async()=>{try{o.value=!0,await ra.delete(u.value.id),await h(),It.emit("newToastMessage",{message:"Funil excludo com sucesso",action:{type:"success"}}),r.value=!1,u.value=null}catch{It.emit("newToastMessage",{message:n("KANBAN.ERRORS.DELETE_FUNNEL_WITH_ITEMS"),action:{type:"error"}})}finally{o.value=!1}},T=x=>{var $;m.value={...x,id:String(x.id),stages:Object.entries(x.stages||{}).reduce((N,[w,D])=>({...N,[String(w)]:{...D,id:String(D.id||w)}}),{}),settings:x.settings||{},agents:(($=x.settings)==null?void 0:$.agents)||[]},console.log("Dados para edio:",m.value),d.value=!0},S=async x=>{var $,N;try{o.value=!0,console.log("Dados recebidos do formulrio:",x);const w={...x,settings:{...m.value.settings||{},agents:x.agents||[],last_optimized_at:($=m.value.settings)==null?void 0:$.last_optimized_at,optimization_history:((N=m.value.settings)==null?void 0:N.optimization_history)||[]}};delete w.agents,console.log("Payload final:",w),await ra.update(m.value.id,w),await h(),It.emit("newToastMessage",{message:"Funil atualizado com sucesso",action:{type:"success"}}),d.value=!1}catch(w){console.error("Erro ao atualizar funil:",w),It.emit("newToastMessage",{message:"Erro ao atualizar o funil",action:{type:"error"}})}finally{o.value=!1}},b=async x=>{var $;try{o.value=!0;const N=Date.now(),w=Object.entries(x.stages).reduce((H,[B,k])=>{var G;const U=`stage_${N}_${k.position}`;return{...H,[U]:{...k,id:U,message_templates:(G=k.message_templates)==null?void 0:G.map(L=>({...L,id:`template_${N}_${L.id}`,stage_id:U}))}}},{}),D={name:`${x.name} (cpia)`,description:x.description,active:x.active,stages:w,settings:{...x.settings,agents:(($=x.settings)==null?void 0:$.agents)||[]}};await ra.create(D),await h()}catch(N){console.error("Erro ao duplicar funil:",N)}finally{o.value=!1}},A=x=>{if(!x)return[];console.log("Ordenando estgios:",x);const $=Object.entries(x).map(([N,w])=>({id:N,...w,position:parseInt(w.position,10)||0})).sort((N,w)=>N.position-w.position);return console.log("Estgios ordenados:",$.map(N=>`${N.name} (${N.position})`)),$},y=t;return pt(()=>{h()}),(x,$)=>{const N=z("fluent-icon");return p(),f("div",hbt,[v(mbt,{onSwitchView:$[0]||($[0]=w=>y("switch-view",w)),onFunnelCreated:h}),c("div",fbt,[i.value?(p(),f("div",gbt,[c("div",_bt,[c("div",vbt,[v(N,{icon:"warning",size:"20",class:"text-amber-500 dark:text-amber-300"})]),$[5]||($[5]=c("div",{class:"flex-1"},[c("p",{class:"text-amber-800 dark:text-amber-100 font-medium"}," Limite de Funis Atingido "),c("p",{class:"text-amber-700 dark:text-amber-200 text-sm mt-1"}," Voc atingiu o limite de 2 funis. Atualize para a verso PRO para criar mais funis. ")],-1))])])):O("",!0),o.value?(p(),f("div",bbt,$[6]||($[6]=[c("span",{class:"loading-spinner"},null,-1)]))):l.value.length?(p(),f("div",Tbt,[(p(!0),f(fe,null,Ae(l.value,w=>{var D,H;return p(),f("div",{key:w.id,class:"funnel-card p-4 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 relative"},[c("div",Abt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:B=>T(w)},{icon:K(()=>[v(N,{icon:"edit",size:"16"})]),_:2},1032,["onClick"]),v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:B=>b(w)},{icon:K(()=>[v(N,{icon:"copy",size:"16"})]),_:2},1032,["onClick"]),v(ce,{variant:"ghost",color:"ruby",size:"sm",onClick:B=>_(w)},{icon:K(()=>[v(N,{icon:"delete",size:"16"})]),_:2},1032,["onClick"])]),c("div",ybt,[c("div",Sbt,[c("span",Ibt,"#"+E(w.id),1),c("h3",Cbt,E(w.name),1),c("span",{class:re(["text-xs px-2 py-0.5 rounded-full",w.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},E(w.active?"Ativo":"Inativo"),3)]),c("p",xbt," Criado em: "+E(new Date(w.created_at).toLocaleDateString()),1),c("div",Nbt,[(p(!0),f(fe,null,Ae(A(w.stages),B=>{var k,U;return p(),f("span",{key:B.id,class:"px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 group relative",style:Ct({backgroundColor:`${B.color}20`,color:B.color})},[Ee(E(B.name)+" ",1),(k=B.message_templates)!=null&&k.length?(p(),f("span",Obt,E(B.message_templates.length),1)):O("",!0),(U=B.message_templates)!=null&&U.length?(p(),f("div",wbt,[c("div",Rbt,[v(N,{icon:"chat",size:"16",class:"text-woot-500"}),$[9]||($[9]=c("p",{class:"text-xs font-medium"},"Templates de Mensagem",-1))]),c("div",$bt,[(p(!0),f(fe,null,Ae(B.message_templates,G=>{var L;return p(),f("div",{key:G.id,class:"p-2 bg-slate-50 dark:bg-slate-700 rounded"},[c("div",Mbt,[c("p",kbt,E(G.title),1),(L=G.webhook)!=null&&L.enabled?(p(),f("span",Lbt," Webhook ")):O("",!0)]),c("p",Dbt,E(G.content),1)])}),128))])])):O("",!0)],4)}),128))]),(H=(D=w.settings)==null?void 0:D.agents)!=null&&H.length?(p(),f("div",Pbt,[(p(!0),f(fe,null,Ae(w.settings.agents,B=>(p(),f("div",{key:B.id,class:"flex items-center gap-2 px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded-lg"},[v(Ft,{name:B.name,src:B.thumbnail,size:20},null,8,["name","src"]),c("span",Bbt,E(B.name),1)]))),128))])):O("",!0)])])}),128))])):(p(),f("div",Ebt,[v(N,{icon:"task",size:"48",class:"mb-4"}),$[7]||($[7]=c("p",{class:"text-lg"},"Nenhum funil encontrado",-1)),$[8]||($[8]=c("p",{class:"text-sm"}," Crie um novo funil para comear a organizar seus itens ",-1))]))]),v(qt,{show:d.value,"onUpdate:show":$[2]||($[2]=w=>d.value=w),"on-close":()=>d.value=!1,class:"funnel-modal"},{default:K(()=>[c("div",Fbt,[c("h3",Ubt,E(I(n)("KANBAN.FUNNELS.EDIT.TITLE")),1),m.value?(p(),V(Zp,{key:0,"is-editing":!0,"initial-data":m.value,onSaved:S,onClose:$[1]||($[1]=w=>d.value=!1)},null,8,["initial-data"])):O("",!0)])]),_:1},8,["show","on-close"]),v(qt,{show:r.value,"onUpdate:show":$[4]||($[4]=w=>r.value=w),"on-close":()=>r.value=!1},{default:K(()=>{var w;return[c("div",Gbt,[c("h3",Vbt,E(I(n)("KANBAN.FUNNELS.DELETE.TITLE")),1),c("p",Hbt,E(I(n)("KANBAN.FUNNELS.DELETE.DESCRIPTION",{name:(w=u.value)==null?void 0:w.name})),1),c("div",Wbt,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:$[3]||($[3]=D=>r.value=!1)},{default:K(()=>[Ee(E(I(n)("KANBAN.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"ruby",size:"sm",isLoading:o.value,onClick:g},{default:K(()=>[Ee(E(I(n)("KANBAN.DELETE")),1)]),_:1},8,["isLoading"])])])]}),_:1},8,["show","on-close"])])}}},zbt=Fe(Kbt,[["__scopeId","data-v-2604947e"]]),jbt=["disabled"],Ybt={__name:"Toggle",props:{modelValue:{type:Boolean,required:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>["small","default","large"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=C(()=>({"toggle-wrapper":!0,[`toggle-${n.size}`]:!0,"toggle-checked":n.modelValue,"toggle-disabled":n.disabled})),o=()=>{n.disabled||s("update:modelValue",!n.modelValue)};return(l,i)=>(p(),f("button",{type:"button",class:re(a.value),disabled:e.disabled,onClick:o},i[0]||(i[0]=[c("div",{class:"toggle-track"},[c("div",{class:"toggle-thumb"})],-1)]),10,jbt))}},of=Fe(Ybt,[["__scopeId","data-v-68d51c93"]]),Xbt={class:"text-lg font-medium mb-4"},qbt={class:"form-grid"},Zbt={class:"left-column"},Qbt={class:"form-section"},Jbt={class:"section-title"},e1t={class:"flex items-center justify-between mb-2"},t1t={class:"text-sm text-slate-700 dark:text-slate-300"},n1t={class:"mb-2"},s1t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},a1t={value:"",disabled:""},o1t=["value"],l1t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},i1t={value:"",disabled:""},r1t=["value"],c1t={class:"form-section"},d1t={class:"section-title"},u1t={class:"form-section"},p1t={class:"flex items-center justify-between mb-4"},m1t={class:"section-title mb-0"},h1t={key:0,class:"webhook-config"},f1t={class:"form-section"},g1t={class:"flex items-center justify-between mb-4"},_1t={class:"section-title mb-0"},v1t={key:0,class:"conditions-config space-y-4"},b1t={class:"flex-1"},E1t={class:"space-y-2"},T1t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},A1t=["onUpdate:modelValue"],y1t={value:"",disabled:""},S1t=["value"],I1t={class:"w-32"},C1t={class:"space-y-2"},x1t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},N1t=["onUpdate:modelValue"],O1t={class:"flex-1"},w1t={class:"space-y-2"},R1t={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},$1t=["onUpdate:modelValue","placeholder"],M1t={class:"right-column"},k1t={class:"editor-section"},L1t={class:"form-actions"},D1t={__name:"MessageTemplateForm",props:{initialData:{type:Object,default:()=>({})},isEditing:{type:Boolean,default:!1},funnels:{type:Array,default:()=>[]}},emits:["saved","close"],setup(e,{emit:t}){var H,B,k,U,G;const n=e,{t:s}=Pe(),a=Pn(),o=t,l=F(!1);F(null);const i=F({});F([]);const r=F(!1);pt(async()=>{try{l.value=!0,await a.dispatch("funnel/fetch")}catch(L){console.error("Erro ao carregar funis:",L)}finally{l.value=!1}});const d=C(()=>n.funnels),u=C(()=>a.getters["funnel/getSelectedFunnel"]),m=L=>L?String(L):"",h=C(()=>{const L=d.value.find(R=>String(R.id)===g.value.funnel_id);let M=[];if(L!=null&&L.stages&&(M=Object.entries(L.stages).map(([R,P])=>({value:String(R),label:P.name,position:P.position})).sort((R,P)=>R.position-P.position)),n.isEditing&&n.initialData.stage_id){const R=String(n.initialData.stage_id);M.some(W=>W.value===R)||M.unshift({value:R,label:`Etapa ${R}`,position:0})}return M}),_=C(()=>{const L=d.value.map(M=>({value:String(M.id),label:M.name}));if(n.isEditing&&n.initialData.funnel_id){const M=String(n.initialData.funnel_id);L.some(P=>P.value===M)||L.unshift({value:M,label:`Funil ${M}`})}return L}),g=F({funnel_id:m(n.initialData.funnel_id),stage_id:m(n.initialData.stage_id),title:n.initialData.title||"",content:n.initialData.content||"",is_default:n.initialData.is_default||!1,webhook:{enabled:((H=n.initialData.webhook)==null?void 0:H.enabled)||!1,url:((B=n.initialData.webhook)==null?void 0:B.url)||"",method:((k=n.initialData.webhook)==null?void 0:k.method)||"POST"},conditions:{enabled:((U=n.initialData.conditions)==null?void 0:U.enabled)||!1,rules:((G=n.initialData.conditions)==null?void 0:G.rules)||[]}}),T=()=>{var L;return i.value={},(L=u.value)!=null&&L.id||(i.value.funnel=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.FUNNEL_REQUIRED")),g.value.stage_id||(i.value.stage=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.STAGE_REQUIRED")),g.value.title.trim()||(i.value.title=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.TITLE_REQUIRED")),g.value.content.trim()||(i.value.content=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.CONTENT_REQUIRED")),g.value.webhook.enabled&&!g.value.webhook.url.trim()&&(i.value.webhookUrl=s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.WEBHOOK_URL_REQUIRED")),Object.keys(i.value).length===0},S=async()=>{try{if(!T())return;l.value=!0;const L=d.value.find(W=>String(W.id)===g.value.funnel_id);if(!L)throw new Error("Funil no encontrado");const M={...L,stages:{...L.stages}},R=g.value.stage_id,P=M.stages[R];if(M.stages[R]={...P,message_templates:[...(P==null?void 0:P.message_templates)||[]]},n.isEditing){const W=M.stages[R].message_templates.findIndex(Q=>Q.id===n.initialData.id);W>-1&&(M.stages[R].message_templates[W]={...n.initialData,...g.value,updated_at:new Date().toISOString()})}else M.stages[R].message_templates.push({id:Date.now(),...g.value,created_at:new Date().toISOString()});await ra.update(L.id,M),await a.dispatch("funnel/fetch"),o("saved",g.value)}catch{i.value={submit:s("KANBAN.MESSAGE_TEMPLATES.FORM.ERRORS.SAVE_ERROR")}}finally{l.value=!1}},b=C(()=>[{value:"item_details.title",label:"Ttulo"},{value:"item_details.description",label:"Descrio"},{value:"item_details.priority",label:"Prioridade"},{value:"item_details.agent_id",label:"Agente"},{value:"item_details.conversation_id",label:"Conversa"},{value:"item_details.value",label:"Valor"},{value:"funnel_stage",label:"Etapa do Funil"}].sort((L,M)=>L.label.localeCompare(M.label))),A=C({get:()=>g.value.funnel_id,set:async L=>{g.value.funnel_id=m(L),await D(L)}}),y=C({get:()=>g.value.stage_id,set:L=>{g.value.stage_id=m(L)}}),x=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],$=C(()=>g.value.conditions.enabled),N=()=>{g.value.conditions.rules.push({field:"",operator:"equals",value:""})},w=L=>{g.value.conditions.rules.splice(L,1)},D=async L=>{try{g.value.funnel_id=m(L);const M=d.value.find(R=>String(R.id)===g.value.funnel_id);if(M){await a.dispatch("funnel/setSelectedFunnel",M),await jt();const R=Object.keys(M.stages||{}),P=g.value.stage_id,W=R.some(Q=>String(Q)===P);(!n.isEditing||!W)&&(g.value.stage_id=R[0]||"")}}catch(M){console.error("Erro ao mudar funil:",M)}};return pt(async()=>{try{if(l.value=!0,await jt(),n.initialData.funnel_id){const L=d.value.find(M=>String(M.id)===m(n.initialData.funnel_id));if(L){await a.dispatch("funnel/setSelectedFunnel",L);const M=Object.keys(L.stages||{}),R=m(n.initialData.stage_id),P=M.some(W=>String(W)===R);await jt(),P||(g.value.stage_id=M[0]||"")}}await jt(),r.value=!0}catch(L){console.error("Erro ao inicializar formulrio:",L)}finally{l.value=!1}}),(L,M)=>(p(),f("form",{class:"message-template-form",onSubmit:ze(S,["prevent"])},[c("h3",Xbt,E(I(s)(e.isEditing?"KANBAN.MESSAGE_TEMPLATES.EDIT.TITLE":"KANBAN.MESSAGE_TEMPLATES.NEW")),1),c("div",qbt,[c("div",Zbt,[c("div",Qbt,[c("h3",Jbt,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.FUNNEL_INFO")),1),c("div",e1t,[c("span",t1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.DEFAULT_MESSAGE")),1),v(of,{modelValue:g.value.is_default,"onUpdate:modelValue":M[0]||(M[0]=R=>g.value.is_default=R)},null,8,["modelValue"])]),c("div",n1t,[c("div",null,[c("label",s1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.FUNNEL.LABEL")),1),pe(c("select",{"onUpdate:modelValue":M[1]||(M[1]=R=>A.value=R),class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600"},[c("option",a1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.FUNNEL.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(_.value,R=>(p(),f("option",{key:R.value,value:R.value},E(R.label),9,o1t))),128))],512),[[zt,A.value]])]),c("div",null,[c("label",l1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.STAGE.LABEL")),1),pe(c("select",{"onUpdate:modelValue":M[2]||(M[2]=R=>y.value=R),class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600"},[c("option",i1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.STAGE.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(h.value,R=>(p(),f("option",{key:R.value,value:R.value},E(R.label),9,r1t))),128))],512),[[zt,y.value]])])])]),c("div",c1t,[c("h3",d1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.BASIC_INFO")),1),v(df,{modelValue:g.value.title,"onUpdate:modelValue":M[3]||(M[3]=R=>g.value.title=R),name:"title",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.TITLE.LABEL"),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.TITLE.PLACEHOLDER"),error:i.value.title,class:"mb-4"},null,8,["modelValue","label","placeholder","error"])]),c("div",u1t,[c("div",p1t,[c("h3",m1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.TITLE")),1),v(of,{modelValue:g.value.webhook.enabled,"onUpdate:modelValue":M[4]||(M[4]=R=>g.value.webhook.enabled=R)},null,8,["modelValue"])]),g.value.webhook.enabled?(p(),f("div",h1t,[v(df,{modelValue:g.value.webhook.url,"onUpdate:modelValue":M[5]||(M[5]=R=>g.value.webhook.url=R),name:"webhook_url",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.URL.LABEL"),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.URL.PLACEHOLDER"),error:i.value.webhookUrl},null,8,["modelValue","label","placeholder","error"]),v(O_,{modelValue:g.value.webhook.method,"onUpdate:modelValue":M[6]||(M[6]=R=>g.value.webhook.method=R),name:"webhook_method",label:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.WEBHOOK.METHOD.LABEL"),options:x},null,8,["modelValue","label"])])):O("",!0)]),c("div",f1t,[c("div",g1t,[c("h3",_1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.TITLE")),1),v(of,{modelValue:g.value.conditions.enabled,"onUpdate:modelValue":M[7]||(M[7]=R=>g.value.conditions.enabled=R)},null,8,["modelValue"])]),$.value?(p(),f("div",v1t,[(p(!0),f(fe,null,Ae(g.value.conditions.rules,(R,P)=>(p(),f("div",{key:P,class:"condition-rule flex items-start gap-2"},[c("div",b1t,[c("div",E1t,[c("label",T1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.FIELD.LABEL")),1),pe(c("select",{"onUpdate:modelValue":W=>R.field=W,class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600"},[c("option",y1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.FIELD.PLACEHOLDER")),1),(p(!0),f(fe,null,Ae(b.value,W=>(p(),f("option",{key:W.value,value:W.value},E(W.label),9,S1t))),128))],8,A1t),[[zt,R.field]])])]),c("div",I1t,[c("div",C1t,[c("label",x1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.OPERATOR.LABEL")),1),pe(c("select",{"onUpdate:modelValue":W=>R.operator=W,class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600"},M[10]||(M[10]=[c("option",{value:"equals"},"Igual a",-1),c("option",{value:"contains"},"Contm",-1),c("option",{value:"starts_with"},"Comea com",-1),c("option",{value:"ends_with"},"Termina com",-1)]),8,N1t),[[zt,R.operator]])])]),c("div",O1t,[c("div",w1t,[c("label",R1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.VALUE.LABEL")),1),pe(c("input",{"onUpdate:modelValue":W=>R.value=W,type:"text",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-1 focus:ring-woot-500 focus:border-woot-500 dark:bg-slate-700 dark:border-slate-600",placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.VALUE.PLACEHOLDER")},null,8,$1t),[[mt,R.value]])])]),v(ce,{variant:"ghost",color:"ruby",size:"xs",onClick:W=>w(P)},{default:K(()=>[v(nr,{icon:"delete",size:"16",icons:I(tr)},null,8,["icons"])]),_:2},1032,["onClick"])]))),128)),v(ce,{variant:"ghost",color:"slate",size:"xs",class:"w-full",onClick:N},{default:K(()=>[v(nr,{icon:"add",size:"16",class:"mr-2",icons:I(tr)},null,8,["icons"]),Ee(" "+E(I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONDITIONS.ADD_RULE")),1)]),_:1})])):O("",!0)])]),c("div",M1t,[c("div",k1t,[v(nl,{modelValue:g.value.content,"onUpdate:modelValue":M[8]||(M[8]=R=>g.value.content=R),placeholder:I(s)("KANBAN.MESSAGE_TEMPLATES.FORM.CONTENT.PLACEHOLDER"),error:i.value.content,class:"content-editor"},null,8,["modelValue","placeholder","error"])])])]),c("div",L1t,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:M[9]||(M[9]=R=>o("close"))},{default:K(()=>[Ee(E(I(s)("KANBAN.ACTIONS.CANCEL")),1)]),_:1}),v(ce,{variant:"solid",color:"blue",size:"sm",type:"submit"},{default:K(()=>[Ee(E(I(s)("KANBAN.ACTIONS.SAVE")),1)]),_:1})])],32))}},Qf=Fe(D1t,[["__scopeId","data-v-595acb17"]]),P1t={class:"message-templates-header"},B1t={class:"flex items-center justify-between"},F1t={class:"flex items-center gap-4"},U1t={class:"text-2xl font-medium"},G1t={class:"p-6"},V1t={class:"text-lg font-medium mb-4"},H1t={__name:"MessageTemplatesHeader",emits:["switch-view","template-created"],setup(e,{emit:t}){const{t:n}=Pe(),s=t,a=F(!1),o=()=>{s("switch-view","kanban")},l=i=>{a.value=!1,s("template-created",i)};return(i,r)=>{const d=z("fluent-icon");return p(),f("header",P1t,[c("div",B1t,[c("div",F1t,[v(ce,{variant:"ghost",color:"slate",size:"sm",onClick:o},{default:K(()=>[v(d,{icon:"chevron-left",size:"16"})]),_:1}),c("h1",U1t,E(I(n)("KANBAN.MESSAGE_TEMPLATES.TITLE")),1)]),v(ce,{variant:"solid",color:"blue",size:"sm",onClick:r[0]||(r[0]=u=>a.value=!0)},{default:K(()=>[v(d,{icon:"add",size:"16",class:"mr-2"}),Ee(" "+E(I(n)("KANBAN.MESSAGE_TEMPLATES.ADD")),1)]),_:1})]),v(qt,{show:a.value,"onUpdate:show":r[2]||(r[2]=u=>a.value=u),"on-close":()=>a.value=!1,class:"template-modal"},{default:K(()=>[c("div",G1t,[c("h3",V1t,E(I(n)("KANBAN.MESSAGE_TEMPLATES.NEW")),1),v(Qf,{onSaved:l,onClose:r[1]||(r[1]=u=>a.value=!1)})])]),_:1},8,["show","on-close"])])}}},W1t=Fe(H1t,[["__scopeId","data-v-f10ac6aa"]]),K1t={class:"message-templates"},z1t={class:"message-templates-content"},j1t={key:0,class:"flex items-center justify-center h-full"},Y1t={key:1,class:"flex flex-col items-center justify-center h-full text-center p-4"},X1t={class:"text-slate-600 dark:text-slate-400"},q1t={key:2,class:"flex flex-col items-center justify-center h-full text-center p-4"},Z1t={class:"text-lg font-medium mb-1"},Q1t={class:"text-sm text-slate-600 dark:text-slate-400"},J1t={key:3,class:"templates-container"},e0t={class:"funnel-tabs"},t0t=["onClick"],n0t={key:0,class:"funnel-content"},s0t={class:"stages-grid"},a0t={class:"stage-header"},o0t={class:"stage-title"},l0t={class:"templates-list"},i0t={class:"template-info"},r0t={class:"template-row"},c0t=["title"],d0t=["title"],u0t={class:"template-date"},p0t={class:"template-badges"},m0t=["onClick"],h0t={key:0,class:"badge",title:"Webhook Ativo"},f0t={key:1,class:"badge",title:"Condies Ativas"},g0t=["onClick"],_0t={key:0,class:"empty-templates"},v0t={class:"delete-modal"},b0t={class:"modal-title"},E0t={class:"modal-description"},T0t={class:"modal-actions"},A0t={class:"p-6"},y0t={class:"p-6"},S0t={__name:"MessageTemplates",emits:["switch-view"],setup(e,{emit:t}){const n=t,{t:s}=Pe(),a=F(!1),o=F([]),l=F(null),i=F(null),r=F(!0),d=F(!1),u=F(null),m=F(null),h=F(!1),_=F(null),g=F(!1),T=F(null),S=async()=>{try{if(a.value=!0,!r.value)return;const B=await ra.get();o.value=B.data,o.value.length&&!i.value&&(i.value=o.value[0].id)}catch(B){if(!r.value)return;l.value=B.message}finally{if(!r.value)return;a.value=!1}},b=C(()=>{const B=o.value.find(k=>k.id===i.value);return B?{...B,stages:Object.entries(B.stages||{}).map(([k,U])=>({id:k,...U,message_templates:U.message_templates||[]})).sort((k,U)=>k.position-U.position)}:null}),A=async()=>{try{if(a.value=!0,!r.value)return;await S()}catch(B){if(!r.value)return;l.value=B.message}finally{if(!r.value)return;a.value=!1}},y=(B,k)=>B?B.length>k?`${B.slice(0,k)}...`:B:"",x=(B,k)=>{u.value=B,m.value=k,d.value=!0},$=async()=>{try{a.value=!0;const B=o.value.find(G=>G.id===i.value);if(!B)throw new Error("Funil no encontrado");const k={...B},U=k.stages[m.value].message_templates.findIndex(G=>G.id===u.value.id);U>-1&&(k.stages[m.value].message_templates.splice(U,1),await ra.update(B.id,k),await S()),d.value=!1}catch(B){l.value=B.message}finally{a.value=!1}},N=(B,k)=>{_.value={...B,funnel_id:i.value,stage_id:k,isEditing:!0},h.value=!0},w=B=>{h.value=!1,A()},D=(B,k)=>{T.value={funnel_id:B,stage_id:k},g.value=!0},H=B=>{g.value=!1,A()};return pt(()=>{r.value=!0,S()}),lo(()=>{r.value=!1,i.value=null,o.value=[],l.value=null,a.value=!1}),(B,k)=>{const U=z("fluent-icon"),G=z("woot-button");return p(),f("div",K1t,[v(W1t,{onSwitchView:k[0]||(k[0]=L=>n("switch-view",L)),onTemplateCreated:A}),c("div",z1t,[a.value?(p(),f("div",j1t,k[7]||(k[7]=[c("span",{class:"loading-spinner"},null,-1)]))):l.value?(p(),f("div",Y1t,[v(U,{icon:"error",size:"24",class:"text-n-ruby-9 mb-2"}),c("p",X1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.ERROR")),1),v(G,{variant:"clear",size:"small",class:"mt-2",onClick:S},{default:K(()=>[Ee(E(I(s)("RETRY")),1)]),_:1})])):o.value.length?(p(),f("div",J1t,[c("div",e0t,[(p(!0),f(fe,null,Ae(o.value,L=>(p(),f("button",{key:L.id,class:re(["funnel-tab",{active:L.id===i.value}]),onClick:M=>i.value=L.id},E(L.name),11,t0t))),128))]),b.value?(p(),f("div",n0t,[c("div",s0t,[(p(!0),f(fe,null,Ae(b.value.stages,L=>{var M;return p(),f("div",{key:L.id,class:"stage-card"},[c("div",a0t,[c("div",{class:"stage-color",style:Ct({backgroundColor:L.color})},null,4),c("h4",o0t,E(L.name),1),v(G,{variant:"clear",size:"small",class:"add-template-button",onClick:R=>D(b.value.id,L.id)},{default:K(()=>[v(U,{icon:"add",size:"16"})]),_:2},1032,["onClick"])]),c("div",l0t,[(p(!0),f(fe,null,Ae(L.message_templates,R=>(p(),f("div",{key:R.id,class:"template-item"},[c("div",i0t,[c("div",r0t,[c("span",{class:"template-title",title:R.title},E(y(R.title,25)),9,c0t),k[8]||(k[8]=c("span",{class:"template-separator"},"",-1)),c("span",{class:"template-content",title:R.content},E(y(R.content,25)),9,d0t),k[9]||(k[9]=c("span",{class:"template-separator"},"",-1)),c("span",u0t,E(new Date(R.created_at).toLocaleDateString()),1),c("div",p0t,[c("span",{class:"badge edit-badge",title:"Editar Template",onClick:ze(P=>N(R,L.id),["stop"])},[v(U,{icon:"edit",size:"12"})],8,m0t),R.webhook.enabled?(p(),f("span",h0t,[v(U,{icon:"globe",size:"12"})])):O("",!0),R.conditions.enabled?(p(),f("span",f0t,[v(U,{icon:"filter",size:"12"})])):O("",!0),c("span",{class:"badge delete-badge",title:"Excluir Template",onClick:ze(P=>x(R,L.id),["stop"])},[v(U,{icon:"delete",size:"12"})],8,g0t)])])])]))),128)),(M=L.message_templates)!=null&&M.length?O("",!0):(p(),f("div",_0t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.NO_TEMPLATES")),1))])])}),128))])])):O("",!0)])):(p(),f("div",q1t,[v(U,{icon:"document",size:"24",class:"text-slate-400 mb-2"}),c("h3",Z1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.EMPTY")),1),c("p",Q1t,E(I(s)("KANBAN.MESSAGE_TEMPLATES.EMPTY_DESCRIPTION")),1)]))]),v(qt,{show:d.value,"onUpdate:show":k[2]||(k[2]=L=>d.value=L),"on-close":()=>d.value=!1},{default:K(()=>{var L;return[c("div",v0t,[c("h3",b0t,E(I(s)("KANBAN.DELETE.TITLE")),1),c("p",E0t,E(I(s)("KANBAN.DELETE.DESCRIPTION",{name:(L=u.value)==null?void 0:L.title})),1),c("div",T0t,[v(G,{variant:"clear","color-scheme":"secondary",onClick:k[1]||(k[1]=M=>d.value=!1)},{default:K(()=>[Ee(E(I(s)("KANBAN.ACTIONS.CANCEL")),1)]),_:1}),v(G,{variant:"primary","color-scheme":"danger",loading:a.value,onClick:$},{default:K(()=>[Ee(E(I(s)("KANBAN.DELETE.TITLE")),1)]),_:1},8,["loading"])])])]}),_:1},8,["show","on-close"]),v(qt,{show:h.value,"onUpdate:show":k[4]||(k[4]=L=>h.value=L),"on-close":()=>h.value=!1,class:"template-modal"},{default:K(()=>[c("div",A0t,[v(Qf,{"initial-data":_.value,"is-editing":!0,funnels:o.value,onSaved:w,onClose:k[3]||(k[3]=L=>h.value=!1)},null,8,["initial-data","funnels"])])]),_:1},8,["show","on-close"]),v(qt,{show:g.value,"onUpdate:show":k[6]||(k[6]=L=>g.value=L),"on-close":()=>g.value=!1,class:"template-modal"},{default:K(()=>[c("div",y0t,[v(Qf,{"initial-data":T.value,"is-editing":!1,funnels:o.value,onSaved:H,onClose:k[5]||(k[5]=L=>g.value=!1)},null,8,["initial-data","funnels"])])]),_:1},8,["show","on-close"])])}}},I0t=Fe(S0t,[["__scopeId","data-v-8c6b5182"]]),C0t={class:"flex flex-col h-full w-full bg-white dark:bg-slate-900 overflow-hidden"},x0t={class:"border-b border-slate-200 dark:border-slate-700 px-4 py-3 flex items-center justify-between"},N0t={class:"flex items-center gap-2"},O0t={class:"text-lg font-medium"},w0t={key:0,class:"flex items-center gap-2"},R0t={class:"flex items-center gap-1"},$0t={key:0,class:"text-xs italic"},M0t={key:1,class:"flex-1 flex justify-center items-center py-12"},k0t={key:2,class:"flex-1 overflow-auto"},L0t={__name:"KanbanItemDetailView",props:{itemId:{type:[Number,String],required:!0},forceReload:{type:Number,default:0}},emits:["back","itemUpdated"],setup(e,{emit:t}){const n=e,s=t,{t:a}=Pe(),o=Pn(),l=F(null),i=F(!0),r=F(!1),d=C(()=>{var A;if(!l.value||!((A=l.value.item_details)!=null&&A.status))return null;const b=l.value.item_details.status;return b==="won"?{label:a("KANBAN.BULK_ACTIONS.ITEM_STATUS.WON"),class:"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300",icon:"checkmark-circle"}:b==="lost"?{label:a("KANBAN.BULK_ACTIONS.ITEM_STATUS.LOST"),class:"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-300",icon:"dismiss-circle"}:null}),u=async()=>{try{console.log("[DEBUG KanbanItemDetailView] fetchItemDetails - Iniciando...",n.itemId),i.value=!0;const{data:b}=await Dn.getItem(n.itemId);console.log("[DEBUG KanbanItemDetailView] fetchItemDetails - Data recebida:",b),l.value=b,console.log("[DEBUG KanbanItemDetailView] Item atualizado")}catch(b){console.error("[DEBUG KanbanItemDetailView] fetchItemDetails - Erro:",b)}finally{i.value=!1}};ot([()=>n.itemId,()=>n.forceReload],()=>{l.value=null,r.value=!1,console.log("[DEBUG KanbanItemDetailView] Estados limpos antes de buscar novo item"),console.log("[DEBUG KanbanItemDetailView] Fetching new item details..."),u()},{immediate:!0});const m=()=>{console.log("[DEBUG KanbanItemDetailView] handleBack - Iniciando..."),console.log("[DEBUG KanbanItemDetailView] handleBack - Item atual:",l.value),console.log("[DEBUG KanbanItemDetailView] handleBack - Estado de edio:",r.value),l.value=null,r.value=!1,console.log("[DEBUG KanbanItemDetailView] handleBack - Estados limpos"),s("back")},h=()=>{r.value=!0},_=()=>{r.value=!1},g=()=>{s("itemUpdated"),r.value=!1},T=()=>{s("itemUpdated"),s("back")},S=o.getters["funnel/getSelectedFunnel"];return(b,A)=>{var x,$;const y=z("fluent-icon");return p(),f("div",C0t,[c("div",x0t,[c("div",N0t,[c("button",{class:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",onClick:m},[v(y,{icon:"arrow-chevron-left",size:"20"})]),c("h2",O0t,E(i.value?I(a)("LOADING"):(($=(x=l.value)==null?void 0:x.item_details)==null?void 0:$.title)||I(a)("ITEM_DETAILS")),1)]),!r.value&&!i.value?(p(),f("div",w0t,[c("button",{class:"p-2 rounded-md bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300",onClick:h},[c("span",R0t,[v(y,{icon:"edit",size:"16"}),Ee(" "+E(I(a)("KANBAN.FORM.EDIT_ITEM")),1)])])])):O("",!0)]),d.value&&!i.value?(p(),f("div",{key:0,class:re(["px-4 py-2 flex items-center gap-2 text-sm font-medium",d.value.class])},[v(y,{icon:d.value.icon,size:"16"},null,8,["icon"]),c("span",null,E(d.value.label),1),l.value.item_details.reason?(p(),f("span",$0t," - "+E(l.value.item_details.reason),1)):O("",!0)],2)):O("",!0),i.value?(p(),f("div",M0t,A[0]||(A[0]=[c("span",{class:"w-8 h-8 border-2 border-t-woot-500 border-r-woot-500 border-b-transparent border-l-transparent rounded-full animate-spin"},null,-1)]))):(p(),f("div",k0t,[!r.value&&l.value?(p(),V(zp,{key:0,item:l.value,onClose:m,onEdit:h,onItemUpdated:g,onDeleted:T},null,8,["item"])):O("",!0),r.value&&l.value&&I(S)?(p(),V(Oi,{key:1,"funnel-id":I(S).id,stage:l.value.funnel_stage,position:l.value.position,"initial-data":l.value,"is-editing":"",onSaved:g,onClose:_},null,8,["funnel-id","stage","position","initial-data"])):O("",!0)]))])}}},D0t=Fe(L0t,[["__scopeId","data-v-9477da95"]]),P0t={class:"flex h-full w-full overflow-hidden"},B0t={key:0,class:"w-full h-full bg-slate-50 dark:bg-slate-900 animate-pulse"},F0t={key:1,class:"w-full h-full bg-slate-50 dark:bg-slate-900 flex items-center justify-center"},U0t={__name:"KanbanView",setup(e){const t=Pn(),n=cn(),s=F("kanban"),a=F(null),o=F(0),l=F(!1),i=F(null),r=C(()=>t.state.kanban.loading),d=C(()=>t.getters["funnel/getSelectedFunnel"]),u=F({}),m=F(!0),h=F(!1);cs("labelsMap",u),ot(d,async(b,A)=>{var y,x,$,N;if(b!=null&&b.id&&b.id!==(A==null?void 0:A.id)){try{await t.dispatch("kanban/fetchKanbanItems",{force:!0}),l.value=!1,i.value=null}catch(w){(((y=w.response)==null?void 0:y.status)===403||w.status===403||(($=(x=w.response)==null?void 0:x.data)==null?void 0:$.code)==="STACKLAB_TOKEN_NOT_FOUND")&&(l.value=!0,i.value=((N=w.response)==null?void 0:N.data)||w.data||w)}m.value=!1}}),ot(()=>n.query,async b=>{var y,x,$,N,w;const A=b.view||"kanban";if(A!==s.value&&(s.value=A),b.item){const D=parseInt(b.item);D!==a.value&&(a.value=D,o.value=o.value+1,s.value="item-detail")}else a.value=null;if(b.funnel){const D=b.funnel,B=t.getters["funnel/getFunnels"].find(k=>String(k.id)===String(D));if(B&&B.id!==((y=d.value)==null?void 0:y.id))try{await t.dispatch("funnel/setSelectedFunnel",B)}catch(k){(((x=k.response)==null?void 0:x.status)===403||k.status===403||((N=($=k.response)==null?void 0:$.data)==null?void 0:N.code)==="STACKLAB_TOKEN_NOT_FOUND")&&(l.value=!0,i.value=((w=k.response)==null?void 0:w.data)||k.data||k)}}},{immediate:!0}),pt(async()=>{var b,A,y,x;try{await t.dispatch("funnel/fetch"),d.value&&await t.dispatch("kanban/fetchKanbanItems",{force:!0})}catch($){(((b=$.response)==null?void 0:b.status)===403||$.status===403||((y=(A=$.response)==null?void 0:A.data)==null?void 0:y.code)==="STACKLAB_TOKEN_NOT_FOUND")&&(l.value=!0,i.value=((x=$.response)==null?void 0:x.data)||$.data||$)}h.value=!0});const _=b=>{s.value=b,a.value=null},g=b=>{a.value=b.id,o.value=o.value+1,s.value="item-detail"},T=()=>{s.value="kanban",a.value=null},S=C(()=>{switch(s.value){case"kanban":return UE;case"list":return P_t;case"agenda":return qvt;case"funnels":return zbt;case"templates":return I0t;case"item-detail":return D0t;default:return UE}});return(b,A)=>(p(),f("div",P0t,[h.value?l.value?(p(),f("div",F0t,A[1]||(A[1]=[c("div",{class:"text-center max-w-md mx-auto p-6"},[c("div",{class:"text-red-500 text-6xl mb-4"},""),c("h2",{class:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-2"}," Licena Necessria "),c("p",{class:"text-slate-600 dark:text-slate-400"}," Esta instalao no possui uma licena vlida para acessar o Kanban. Entre em contato com o administrador da plataforma. ")],-1)]))):(p(),V(Yc,{key:2},[(p(),V(xs(S.value),{currentView:s.value,"labels-map":u.value,"is-loading":r.value,itemId:a.value,"force-reload":o.value,onSwitchView:_,onItemClick:g,onBack:T},null,40,["currentView","labels-map","is-loading","itemId","force-reload"]))],1024)):(p(),f("div",B0t,A[0]||(A[0]=[c("div",{class:"flex items-center justify-center h-full"},[c("div",{class:"text-slate-400 dark:text-slate-500"},"Carregando...")],-1)])))]))}},G0t=Fe(U0t,[["__scopeId","data-v-de68fc95"]]),V0t={class:"h-full w-full flex-1 overflow-hidden"},H0t=["src","title"],W0t={key:1,class:"h-full w-full flex items-center justify-center text-slate-500"},K0t={__name:"DashboardAppWrapper",setup(e){const t=cn(),n=Pn(),s=F(null),a=C(()=>{const d=t.params.id;return n.getters["dashboardApps/getRecords"].find(u=>u.id===Number(d))}),o=C(()=>{var d,u;return(u=(d=a.value)==null?void 0:d.content)==null?void 0:u.some(m=>m.model_app==="typebot")}),l=C(()=>{var d,u,m;return(m=(u=(d=a.value)==null?void 0:d.content)==null?void 0:u[0])!=null&&m.url?a.value.content[0].url:""}),i=()=>{!o.value||!s.value||setTimeout(()=>{var d;try{const u=s.value,m=((d=n.getters["auth/currentUser"])==null?void 0:d.email)||"";try{const _=(u.contentDocument||u.contentWindow.document).querySelector('input[name="email"]');_&&(_.value=m,_.dispatchEvent(new Event("input",{bubbles:!0})))}catch{u.contentWindow.postMessage({action:"fill_email",email:m},"*")}}catch(u){console.error("Erro ao preencher email no Typebot:",u)}},1500)};pt(()=>{n.getters["dashboardApps/getRecords"].length||n.dispatch("dashboardApps/get")});const r=()=>{o.value&&i()};return(d,u)=>{var m;return p(),f("div",V0t,[l.value?(p(),f("iframe",{key:0,src:l.value,class:"h-full w-full border-0",title:(m=a.value)==null?void 0:m.title,ref_key:"iframeRef",ref:s,onLoad:r},null,40,H0t)):(p(),f("div",W0t,E(d.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LOADING")),1))])}}},z0t={routes:[{path:Bt("accounts/:accountId"),component:aat,children:[{path:Bt("accounts/:accountId/dashboard_apps/:id"),name:"dashboard_apps_show",component:K0t,meta:{permissions:["administrator","agent"],icon:"i-lucide-apps",label:"DASHBOARD_APPS"},props:!0},{path:Bt("accounts/:accountId/kanban"),name:"kanban_board",component:G0t,meta:{permissions:["administrator","agent","kanban_manage","kanban_view"],featureFlag:"kanban_board"}},...Itt,...Uje,...JFe.routes,..._be.routes,...zKe,...rGe,..._ze,...OYe.routes,...oqe.routes]},{path:Bt("accounts/:accountId/suspended"),name:"account_suspended",meta:{permissions:["administrator","agent","custom_role"]},component:lat}]},j0t=[...z0t.routes],Ns=rN({history:cN(),routes:j0t}),Y0t=(e,t)=>{const{isLoggedIn:n,getCurrentUser:s}=Pa.getters;if(!n)return window.location.assign("/app/login"),"";if(!e.name)return t(Bt(`accounts/${s.account_id}/dashboard`));const a=wD(e,Pa.getters.getCurrentUser);return a?t(Bt(a)):t()},X0t=()=>{const e=Pa.dispatch("setUser");Ns.beforeEach((t,n,s)=>{px.page(t.name||"",{path:t.path,name:t.name}),e.then(()=>Y0t(t,s))})},q0t=XC({legacy:!1,locale:"en",messages:QN});CP(Pa,Ns);const Sa=VE(yP);Sa.use(q0t);Sa.use(Pa);Sa.use(Ns);window.errorLoggingConfig&&KN({app:Sa,dsn:window.errorLoggingConfig,denyUrls:[/^chrome:\/\//i,/chrome-extension:/i,/extensions\//i,/file:\/\//i,/safari-web-extension:/i,/safari-extension:/i],integrations:[zN({router:Ns})],ignoreErrors:["ResizeObserver loop completed with undelivered notifications"]});Sa.use(sO,aO);Sa.use(NA);Sa.use(rx,cx({rules:{JSON:({value:e})=>jN(e)}}));Sa.use(SR,{instantMove:!0,arrowOverflow:!1,disposeTimeout:5e6});Sa.use(JO);Sa.component("multiselect",ST);Sa.component("woot-wizard",yw);Sa.component("fluent-icon",YN);Sa.directive("resize",I6);Sa.directive("on-clickaway",oO);XN();window.WootConstants=Pt;window.axios=IP(qC);qN();ZN();X0t();window.onload=()=>{Sa.mount("#app")};export{Pg as $,kEt as A,_s as B,MEt as C,kr as D,_Ye as E,X_ as F,M1 as G,Bg as H,U0 as I,io as J,Mt as K,LEt as L,L0 as M,k0 as N,Li as O,D0 as P,G0e as Q,V0e as R,U0e as S,F0 as T,P0 as U,B0 as V,mRe as W,ud as X,GI as Y,H0e as Z,ME as _,$Et as a,FWe as b,ua as c,kE as d,Al as e,CIe as f,REt as g,DEt as h,xIe as i,Ii as j,wye as k,ZSe as l,wr as m,fd as n,Zf as o,OEt as p,Xn as q,Tl as r,Ms as s,ln as t,Sn as u,o2 as v,Jo as w,nI as x,cit as y,qo as z};
//# sourceMappingURL=dashboard-B8DxvGhj.js.map
