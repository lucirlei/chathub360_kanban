import{c as s,N,a as b,o as a,H as D,r as E,w as O,p as u,b as w,g as m,s as B,z as c,q as z,e as x,F as R,t as V}from"./_plugin-vue_export-helper-IoQslFd3.js";import{u as M}from"./useBranding-CD_QbCIP.js";import{_ as v,w as P}from"./globals-DPjCpsAT.js";const Q=()=>{const d=12*(window.devicePixelRatio||1),t=document.createElement("canvas");if(!t.getContext||!t.getContext("2d")||typeof t.getContext("2d").fillText!="function")return!1;const n=t.getContext("2d");return n.fillStyle="#f00",n.textBaseline="top",n.font="32px Arial",n.fillText("🐨",0,0),n.getImageData(d,d,1,1).data[0]!==0},q=e=>e?e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").replace(/\s+/g," ").trim():"";function H(e){const d={"Channel::Api":"i-ri-cloudy-fill","Channel::Email":"i-ri-mail-fill","Channel::FacebookPage":"i-ri-messenger-fill","Channel::Line":"i-ri-line-fill","Channel::Sms":"i-ri-chat-1-fill","Channel::Telegram":"i-ri-telegram-fill","Channel::TwilioSms":"i-ri-chat-1-fill","Channel::TwitterProfile":"i-ri-twitter-x-fill","Channel::WebWidget":"i-ri-global-fill","Channel::Whatsapp":"i-ri-whatsapp-fill","Channel::Instagram":"i-ri-instagram-fill","Channel::Voice":"i-ri-phone-fill"},t={microsoft:"i-ri-microsoft-fill",google:"i-ri-google-fill"};return s(()=>{const r=e.value||e,i=r.channel_type;let o=d[i];return i==="Channel::Email"&&r.provider&&Object.keys(t).includes(r.provider)&&(o=t[r.provider]),i==="Channel::TwilioSms"&&r.medium==="whatsapp"&&(o="i-ri-whatsapp-fill"),o??"i-ri-global-fill"})}const W={__name:"ChannelIcon",props:{inbox:{type:Object,required:!0}},setup(e){const t=H(N(e,"inbox"));return(n,r)=>(a(),b(v,{icon:D(t)},null,8,["icon"]))}},Y=["src","alt"],X={__name:"Avatar",props:{src:{type:String,default:""},name:{type:String,required:!0},size:{type:Number,default:32},allowUpload:{type:Boolean,default:!1},roundedFull:{type:Boolean,default:!1},status:{type:String,default:null,validator:e=>!e||P.AVAILABILITY_STATUS_KEYS.includes(e)},inbox:{type:Object,default:null},iconName:{type:String,default:null},hideOfflineStatus:{type:Boolean,default:!1}},emits:["upload","delete"],setup(e,{emit:d}){const t=e,n=d,{t:r}=M(),i=E(!0),o=E(null),g={dark:[["#4B143D","#FF8DCC"],["#3F220D","#FFA366"],["#2A2A2A","#ADB1B8"],["#023B37","#0BD8B6"],["#27264D","#A19EFF"],["#1D2E62","#9EB1FF"]],light:[["#FBDCEF","#C2298A"],["#FFE0BB","#99543A"],["#E8E8E8","#60646C"],["#CCF3EA","#008573"],["#EBEBFE","#4747C2"],["#E1E9FF","#3A5BC7"]],default:{bg:"#E8E8E8",text:"#60646C"}},y=s(()=>({online:"bg-n-teal-10",busy:"bg-n-amber-10",...t.hideOfflineStatus?{}:{offline:"bg-n-slate-10"}})),h=s(()=>!t.src&&!t.name),I=s(()=>{if(!t.name)return"";const l=q(t.name).split(/\s+/);return l.length===1?l[0].charAt(0).toUpperCase():l.slice(0,2).map(f=>f.charAt(0)).join("").toUpperCase()}),p=s(()=>{if(!t.name)return g.default;const l=t.name.length%g.light.length;return{bg:g.light[l][0],darkBg:g.dark[l][0],text:g.light[l][1],darkText:g.dark[l][1]}}),C=s(()=>({width:`${t.size}px`,height:`${t.size}px`})),T=s(()=>({...C.value,backgroundColor:!h.value&&(!t.src||!i.value)?p.value.bg:void 0,color:!h.value&&(!t.src||!i.value)?p.value.text:void 0,"--dark-bg":p.value.darkBg,"--dark-text":p.value.darkText})),k=s(()=>{const l=Math.max(t.size*.35,8);return{width:`${l}px`,height:`${l}px`,top:`${t.size-l/1.1}px`,left:`${t.size-l/1.1}px`}}),F=s(()=>({fontSize:`${t.size/1.6}px`})),U=s(()=>({fontSize:`${Math.min(t.size/2.5,24)}px`})),$=()=>{i.value=!1},A=()=>{o.value.click()},S=l=>{const[f]=l.target.files;f&&n("upload",{file:f,url:f?URL.createObjectURL(f):null})},j=()=>{o.value&&(o.value.value=null),n("delete")},L=l=>{l.stopPropagation(),j()};return O(()=>t.src,()=>{i.value=!0}),(l,f)=>(a(),u("span",{class:"relative inline-flex group/avatar z-0 flex-shrink-0",style:c(C.value)},[w(l.$slots,"badge",{size:e.size},()=>[e.status&&y.value[e.status]?(a(),u("div",{key:0,class:z(["absolute z-20 border rounded-full border-n-slate-3",y.value[e.status]]),style:c(k.value)},null,6)):m("",!0),e.inbox&&!(e.status&&y.value[e.status])?(a(),u("div",{key:1,style:c(k.value),class:"absolute z-20 flex items-center justify-center rounded-full bg-n-solid-1 border border-transparent flex-shrink-0"},[x(W,{inbox:e.inbox,class:"w-full h-full text-n-slate-11"},null,8,["inbox"])],4)):m("",!0)]),e.src&&e.allowUpload?(a(),u("div",{key:0,class:"absolute z-20 flex items-center justify-center invisible w-6 h-6 transition-all duration-300 ease-in-out opacity-0 cursor-pointer outline outline-1 outline-n-container -top-2 ltr:-right-2 rtl:-left-2 rounded-xl bg-n-solid-3 group-hover/avatar:visible group-hover/avatar:opacity-100",onClick:L},[x(v,{icon:"i-lucide-x",class:"text-n-slate-11 size-4"})])):m("",!0),B("span",{role:"img",class:z(["relative inline-flex items-center justify-center object-cover overflow-hidden font-medium",[e.roundedFull?"rounded-full":"rounded-xl",{"dark:!bg-[var(--dark-bg)] dark:!text-[var(--dark-text)]":!h.value&&(!e.src||!i.value),"bg-n-slate-3 dark:bg-n-slate-4":h.value}]]),style:c(T.value)},[e.src&&i.value?(a(),u("img",{key:0,src:e.src,alt:e.name,onError:$},null,40,Y)):(a(),u(R,{key:1},[e.iconName?(a(),b(v,{key:0,icon:e.iconName,style:c(F.value)},null,8,["icon","style"])):h.value?(a(),b(v,{key:2,title:D(r)("THUMBNAIL.AUTHOR.NOT_AVAILABLE"),icon:"i-lucide-user",style:c(F.value)},null,8,["title","style"])):(a(),u("span",{key:1,style:c(U.value),class:"select-none"},V(I.value),5))],64)),e.allowUpload||l.$slots.overlay?w(l.$slots,"overlay",{key:2,size:e.size,handleUpload:A,fileInputRef:o.value,handleImageUpload:S},()=>[B("div",{class:"absolute inset-0 z-10 flex items-center justify-center invisible w-full h-full transition-all duration-300 ease-in-out opacity-0 rounded-xl bg-n-alpha-black1 group-hover/avatar:visible group-hover/avatar:opacity-100",onClick:A},[x(v,{icon:"i-lucide-upload",class:"text-white",style:c({width:`${e.size/2}px`,height:`${e.size/2}px`})},null,8,["style"]),e.allowUpload?(a(),u("input",{key:0,ref_key:"fileInput",ref:o,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",class:"hidden",onChange:S},null,544)):m("",!0)])]):m("",!0)],6)],4))}};export{X as _,W as a,Q as h,H as u};
//# sourceMappingURL=Avatar-CS4GuSbz.js.map
