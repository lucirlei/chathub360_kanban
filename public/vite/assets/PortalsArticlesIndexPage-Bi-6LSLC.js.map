{"version":3,"file":"PortalsArticlesIndexPage-Bi-6LSLC.js","sources":["../../../app/javascript/dashboard/components-next/HelpCenter/Pages/ArticlePage/ArticleList.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/ArticlePage/ArticleHeaderControls.vue","../../../app/javascript/dashboard/components-next/HelpCenter/EmptyState/Article/ArticleEmptyState.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/ArticlePage/ArticlesPage.vue","../../../app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsArticlesIndexPage.vue"],"sourcesContent":["<script setup>\nimport { ref, computed, watch } from 'vue';\nimport Draggable from 'vuedraggable';\nimport { useMapGetter, useStore } from 'dashboard/composables/store.js';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useI18n } from 'vue-i18n';\nimport { useAlert, useTrack } from 'dashboard/composables';\nimport { PORTALS_EVENTS } from 'dashboard/helper/AnalyticsHelper/events';\nimport { getArticleStatus } from 'dashboard/helper/portalHelper.js';\nimport wootConstants from 'dashboard/constants/globals';\n\nimport ArticleCard from 'dashboard/components-next/HelpCenter/ArticleCard/ArticleCard.vue';\n\nconst props = defineProps({\n  articles: {\n    type: Array,\n    required: true,\n  },\n  isCategoryArticles: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst { ARTICLE_STATUS_TYPES } = wootConstants;\n\nconst router = useRouter();\nconst route = useRoute();\nconst store = useStore();\nconst { t } = useI18n();\n\nconst localArticles = ref(props.articles);\n\nconst dragEnabled = computed(() => {\n  // Enable dragging only for category articles and when there's more than one article\n  return props.isCategoryArticles && localArticles.value?.length > 1;\n});\n\nconst getCategoryById = useMapGetter('categories/categoryById');\n\nconst openArticle = id => {\n  const { tab, categorySlug, locale } = route.params;\n  if (props.isCategoryArticles) {\n    router.push({\n      name: 'portals_categories_articles_edit',\n      params: { articleSlug: id },\n    });\n  } else {\n    router.push({\n      name: 'portals_articles_edit',\n      params: {\n        articleSlug: id,\n        tab,\n        categorySlug,\n        locale,\n      },\n    });\n  }\n};\n\nconst onReorder = reorderedGroup => {\n  store.dispatch('articles/reorder', {\n    reorderedGroup,\n    portalSlug: route.params.portalSlug,\n  });\n};\n\nconst onDragEnd = () => {\n  // Reuse existing positions to maintain order within the current group\n  const sortedArticlePositions = localArticles.value\n    .map(article => article.position)\n    .sort((a, b) => a - b); // Use custom sort to handle numeric values correctly\n\n  const orderedArticles = localArticles.value.map(article => article.id);\n\n  // Create a map of article IDs to their new positions\n  const reorderedGroup = orderedArticles.reduce((obj, key, index) => {\n    obj[key] = sortedArticlePositions[index];\n    return obj;\n  }, {});\n\n  onReorder(reorderedGroup);\n};\n\nconst getCategory = categoryId => {\n  return getCategoryById.value(categoryId) || { name: '', icon: '' };\n};\n\nconst getStatusMessage = (status, isSuccess) => {\n  const messageType = isSuccess ? 'SUCCESS' : 'ERROR';\n  const statusMap = {\n    [ARTICLE_STATUS_TYPES.PUBLISH]: 'PUBLISH_ARTICLE',\n    [ARTICLE_STATUS_TYPES.ARCHIVE]: 'ARCHIVE_ARTICLE',\n    [ARTICLE_STATUS_TYPES.DRAFT]: 'DRAFT_ARTICLE',\n  };\n\n  return statusMap[status]\n    ? t(`HELP_CENTER.${statusMap[status]}.API.${messageType}`)\n    : '';\n};\n\nconst updatePortalMeta = () => {\n  const { portalSlug, locale } = route.params;\n  return store.dispatch('portals/show', { portalSlug, locale });\n};\n\nconst updateArticlesMeta = () => {\n  const { portalSlug, locale } = route.params;\n  return store.dispatch('articles/updateArticleMeta', {\n    portalSlug,\n    locale,\n  });\n};\n\nconst handleArticleAction = async (action, { status, id }) => {\n  const { portalSlug } = route.params;\n  try {\n    if (action === 'delete') {\n      await store.dispatch('articles/delete', {\n        portalSlug,\n        articleId: id,\n      });\n      useAlert(t('HELP_CENTER.DELETE_ARTICLE.API.SUCCESS_MESSAGE'));\n    } else {\n      await store.dispatch('articles/update', {\n        portalSlug,\n        articleId: id,\n        status,\n      });\n      useAlert(getStatusMessage(status, true));\n\n      if (status === ARTICLE_STATUS_TYPES.ARCHIVE) {\n        useTrack(PORTALS_EVENTS.ARCHIVE_ARTICLE, { uiFrom: 'header' });\n      } else if (status === ARTICLE_STATUS_TYPES.PUBLISH) {\n        useTrack(PORTALS_EVENTS.PUBLISH_ARTICLE);\n      }\n    }\n    await updateArticlesMeta();\n    await updatePortalMeta();\n  } catch (error) {\n    const errorMessage =\n      error?.message ||\n      (action === 'delete'\n        ? t('HELP_CENTER.DELETE_ARTICLE.API.ERROR_MESSAGE')\n        : getStatusMessage(status, false));\n    useAlert(errorMessage);\n  }\n};\n\nconst updateArticle = ({ action, value, id }) => {\n  const status = action !== 'delete' ? getArticleStatus(value) : null;\n  handleArticleAction(action, { status, id });\n};\n\n// Watch for changes in the articles prop and update the localArticles ref\nwatch(\n  () => props.articles,\n  newArticles => {\n    localArticles.value = newArticles;\n  },\n  { deep: true }\n);\n</script>\n\n<template>\n  <Draggable\n    v-model=\"localArticles\"\n    :disabled=\"!dragEnabled\"\n    item-key=\"id\"\n    tag=\"ul\"\n    ghost-class=\"article-ghost-class\"\n    class=\"w-full h-full space-y-4\"\n    @end=\"onDragEnd\"\n  >\n    <template #item=\"{ element }\">\n      <li class=\"list-none rounded-2xl\">\n        <ArticleCard\n          :id=\"element.id\"\n          :key=\"element.id\"\n          :title=\"element.title\"\n          :status=\"element.status\"\n          :author=\"element.author\"\n          :category=\"getCategory(element.category.id)\"\n          :views=\"element.views || 0\"\n          :updated-at=\"element.updatedAt\"\n          :class=\"{ 'cursor-grab': dragEnabled }\"\n          @open-article=\"openArticle\"\n          @article-action=\"updateArticle\"\n        />\n      </li>\n    </template>\n  </Draggable>\n</template>\n\n<style lang=\"scss\" scoped>\n.article-ghost-class {\n  @apply opacity-50 bg-n-solid-1;\n}\n</style>\n","<script setup>\nimport { ref, computed } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useRoute } from 'vue-router';\nimport { OnClickOutside } from '@vueuse/components';\nimport { useUISettings } from 'dashboard/composables/useUISettings';\nimport {\n  ARTICLE_TABS,\n  CATEGORY_ALL,\n  ARTICLE_TABS_OPTIONS,\n} from 'dashboard/helper/portalHelper';\n\nimport TabBar from 'dashboard/components-next/tabbar/TabBar.vue';\nimport Button from 'dashboard/components-next/button/Button.vue';\nimport DropdownMenu from 'dashboard/components-next/dropdown-menu/DropdownMenu.vue';\n\nconst props = defineProps({\n  categories: {\n    type: Array,\n    required: true,\n  },\n  allowedLocales: {\n    type: Array,\n    required: true,\n  },\n  meta: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst emit = defineEmits([\n  'tabChange',\n  'localeChange',\n  'categoryChange',\n  'newArticle',\n]);\n\nconst route = useRoute();\nconst { t } = useI18n();\nconst { updateUISettings } = useUISettings();\n\nconst isCategoryMenuOpen = ref(false);\nconst isLocaleMenuOpen = ref(false);\n\nconst countKey = tab => {\n  if (tab.value === 'all') {\n    return 'articlesCount';\n  }\n  return `${tab.value}ArticlesCount`;\n};\n\nconst tabs = computed(() => {\n  return ARTICLE_TABS_OPTIONS.map(tab => ({\n    label: t(`HELP_CENTER.ARTICLES_PAGE.ARTICLES_HEADER.TABS.${tab.key}`),\n    value: tab.value,\n    count: props.meta[countKey(tab)],\n  }));\n});\n\nconst activeTabIndex = computed(() => {\n  const tabParam = route.params.tab || ARTICLE_TABS.ALL;\n  return tabs.value.findIndex(tab => tab.value === tabParam);\n});\n\nconst activeCategoryName = computed(() => {\n  const activeCategory = props.categories.find(\n    category => category.slug === route.params.categorySlug\n  );\n\n  if (activeCategory) {\n    const { icon, name } = activeCategory;\n    return `${icon} ${name}`;\n  }\n\n  return t('HELP_CENTER.ARTICLES_PAGE.ARTICLES_HEADER.CATEGORY.ALL');\n});\n\nconst activeLocaleName = computed(() => {\n  return props.allowedLocales.find(\n    locale => locale.code === route.params.locale\n  )?.name;\n});\n\nconst categoryMenuItems = computed(() => {\n  const defaultMenuItem = {\n    label: t('HELP_CENTER.ARTICLES_PAGE.ARTICLES_HEADER.CATEGORY.ALL'),\n    value: CATEGORY_ALL,\n    action: 'filter',\n  };\n\n  const categoryItems = props.categories.map(category => ({\n    label: category.name,\n    value: category.slug,\n    action: 'filter',\n    emoji: category.icon,\n  }));\n\n  const hasCategorySlug = !!route.params.categorySlug;\n\n  return hasCategorySlug ? [defaultMenuItem, ...categoryItems] : categoryItems;\n});\n\nconst hasCategoryMenuItems = computed(() => {\n  return categoryMenuItems.value?.length > 0;\n});\n\nconst localeMenuItems = computed(() => {\n  return props.allowedLocales.map(locale => ({\n    label: locale.name,\n    value: locale.code,\n    action: 'filter',\n  }));\n});\n\nconst handleLocaleAction = ({ value }) => {\n  emit('localeChange', value);\n  isLocaleMenuOpen.value = false;\n  updateUISettings({\n    last_active_locale_code: value,\n  });\n};\n\nconst handleCategoryAction = ({ value }) => {\n  emit('categoryChange', value);\n  isCategoryMenuOpen.value = false;\n};\n\nconst handleNewArticle = () => {\n  emit('newArticle');\n};\n\nconst handleTabChange = value => {\n  emit('tabChange', value);\n};\n</script>\n\n<template>\n  <div class=\"flex flex-col items-start w-full gap-2 lg:flex-row\">\n    <TabBar\n      :tabs=\"tabs\"\n      :initial-active-tab=\"activeTabIndex\"\n      @tab-changed=\"handleTabChange\"\n    />\n    <div class=\"flex items-start justify-between w-full gap-2\">\n      <div class=\"flex items-center gap-2\">\n        <div class=\"relative group\">\n          <OnClickOutside @trigger=\"isLocaleMenuOpen = false\">\n            <Button\n              :label=\"activeLocaleName\"\n              size=\"sm\"\n              icon=\"i-lucide-chevron-down\"\n              color=\"slate\"\n              trailing-icon\n              @click=\"isLocaleMenuOpen = !isLocaleMenuOpen\"\n            />\n\n            <DropdownMenu\n              v-if=\"isLocaleMenuOpen\"\n              :menu-items=\"localeMenuItems\"\n              show-search\n              class=\"left-0 w-40 max-w-[300px] mt-2 overflow-y-auto xl:right-0 top-full max-h-60\"\n              @action=\"handleLocaleAction\"\n            />\n          </OnClickOutside>\n        </div>\n        <div v-if=\"hasCategoryMenuItems\" class=\"relative group\">\n          <OnClickOutside @trigger=\"isCategoryMenuOpen = false\">\n            <Button\n              :label=\"activeCategoryName\"\n              icon=\"i-lucide-chevron-down\"\n              size=\"sm\"\n              color=\"slate\"\n              trailing-icon\n              class=\"max-w-48\"\n              @click=\"isCategoryMenuOpen = !isCategoryMenuOpen\"\n            />\n\n            <DropdownMenu\n              v-if=\"isCategoryMenuOpen\"\n              :menu-items=\"categoryMenuItems\"\n              show-search\n              class=\"left-0 w-48 mt-2 overflow-y-auto xl:right-0 top-full max-h-60\"\n              @action=\"handleCategoryAction\"\n            />\n          </OnClickOutside>\n        </div>\n      </div>\n      <Button\n        :label=\"t('HELP_CENTER.ARTICLES_PAGE.ARTICLES_HEADER.NEW_ARTICLE')\"\n        icon=\"i-lucide-plus\"\n        size=\"sm\"\n        @click=\"handleNewArticle\"\n      />\n    </div>\n  </div>\n</template>\n","<script setup>\nimport EmptyStateLayout from 'dashboard/components-next/EmptyStateLayout.vue';\nimport Button from 'dashboard/components-next/button/Button.vue';\nimport ArticleCard from 'dashboard/components-next/HelpCenter/ArticleCard/ArticleCard.vue';\nimport articleContent from 'dashboard/components-next/HelpCenter/EmptyState/Portal/portalEmptyStateContent.js';\n\ndefineProps({\n  title: {\n    type: String,\n    default: '',\n  },\n  subtitle: {\n    type: String,\n    default: '',\n  },\n  showButton: {\n    type: Boolean,\n    default: true,\n  },\n  buttonLabel: {\n    type: String,\n    default: '',\n  },\n});\n\nconst emit = defineEmits(['click']);\n\nconst onClick = () => {\n  emit('click');\n};\n</script>\n\n<template>\n  <EmptyStateLayout :title=\"title\" :subtitle=\"subtitle\">\n    <template #empty-state-item>\n      <div class=\"grid grid-cols-1 gap-4 p-px overflow-hidden\">\n        <ArticleCard\n          v-for=\"(article, index) in articleContent.slice(0, 5)\"\n          :id=\"article.id\"\n          :key=\"`article-${index}`\"\n          :title=\"article.title\"\n          :status=\"article.status\"\n          :updated-at=\"article.updatedAt\"\n          :author=\"article.author\"\n          :category=\"article.category\"\n          :views=\"article.views\"\n        />\n      </div>\n    </template>\n    <template #actions>\n      <div v-if=\"showButton\">\n        <Button :label=\"buttonLabel\" icon=\"i-lucide-plus\" @click=\"onClick\" />\n      </div>\n    </template>\n  </EmptyStateLayout>\n</template>\n","<script setup>\nimport { computed } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useI18n } from 'vue-i18n';\nimport { useMapGetter } from 'dashboard/composables/store.js';\nimport { ARTICLE_TABS, CATEGORY_ALL } from 'dashboard/helper/portalHelper';\n\nimport HelpCenterLayout from 'dashboard/components-next/HelpCenter/HelpCenterLayout.vue';\nimport ArticleList from 'dashboard/components-next/HelpCenter/Pages/ArticlePage/ArticleList.vue';\nimport ArticleHeaderControls from 'dashboard/components-next/HelpCenter/Pages/ArticlePage/ArticleHeaderControls.vue';\nimport CategoryHeaderControls from 'dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryHeaderControls.vue';\nimport Spinner from 'dashboard/components-next/spinner/Spinner.vue';\nimport ArticleEmptyState from 'dashboard/components-next/HelpCenter/EmptyState/Article/ArticleEmptyState.vue';\n\nconst props = defineProps({\n  articles: {\n    type: Array,\n    required: true,\n  },\n  categories: {\n    type: Array,\n    required: true,\n  },\n  allowedLocales: {\n    type: Array,\n    required: true,\n  },\n  portalName: {\n    type: String,\n    required: true,\n  },\n  meta: {\n    type: Object,\n    required: true,\n  },\n  isCategoryArticles: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits(['pageChange', 'fetchPortal']);\n\nconst router = useRouter();\nconst route = useRoute();\nconst { t } = useI18n();\n\nconst isSwitchingPortal = useMapGetter('portals/isSwitchingPortal');\nconst isFetching = useMapGetter('articles/isFetching');\n\nconst hasNoArticles = computed(\n  () => !isFetching.value && !props.articles.length\n);\n\nconst isLoading = computed(() => isFetching.value || isSwitchingPortal.value);\n\nconst totalArticlesCount = computed(() => props.meta.allArticlesCount);\n\nconst hasNoArticlesInPortal = computed(\n  () => totalArticlesCount.value === 0 && !props.isCategoryArticles\n);\n\nconst shouldShowPaginationFooter = computed(() => {\n  return !(isFetching.value || isSwitchingPortal.value || hasNoArticles.value);\n});\n\nconst updateRoute = newParams => {\n  const { portalSlug, locale, tab, categorySlug } = route.params;\n  router.push({\n    name: 'portals_articles_index',\n    params: {\n      portalSlug,\n      locale: newParams.locale ?? locale,\n      tab: newParams.tab ?? tab,\n      categorySlug: newParams.categorySlug ?? categorySlug,\n      ...newParams,\n    },\n  });\n};\n\nconst articlesCount = computed(() => {\n  const { tab } = route.params;\n  const { meta } = props;\n  const countMap = {\n    '': meta.articlesCount,\n    mine: meta.mineArticlesCount,\n    draft: meta.draftArticlesCount,\n    archived: meta.archivedArticlesCount,\n  };\n  return Number(countMap[tab] || countMap['']);\n});\n\nconst showArticleHeaderControls = computed(\n  () => !props.isCategoryArticles && !isSwitchingPortal.value\n);\n\nconst showCategoryHeaderControls = computed(\n  () => props.isCategoryArticles && !isSwitchingPortal.value\n);\n\nconst getEmptyStateText = type => {\n  if (props.isCategoryArticles) {\n    return t(`HELP_CENTER.ARTICLES_PAGE.EMPTY_STATE.CATEGORY.${type}`);\n  }\n  const tabName = route.params.tab?.toUpperCase() || 'ALL';\n  return t(`HELP_CENTER.ARTICLES_PAGE.EMPTY_STATE.${tabName}.${type}`);\n};\n\nconst getEmptyStateTitle = computed(() => getEmptyStateText('TITLE'));\nconst getEmptyStateSubtitle = computed(() => getEmptyStateText('SUBTITLE'));\n\nconst handleTabChange = tab =>\n  updateRoute({ tab: tab.value === ARTICLE_TABS.ALL ? '' : tab.value });\n\nconst handleCategoryAction = value =>\n  updateRoute({ categorySlug: value === CATEGORY_ALL ? '' : value });\n\nconst handleLocaleAction = value => {\n  updateRoute({ locale: value, categorySlug: '' });\n  emit('fetchPortal', value);\n};\nconst handlePageChange = page => emit('pageChange', page);\n\nconst navigateToNewArticlePage = () => {\n  const { categorySlug, locale } = route.params;\n  router.push({\n    name: 'portals_articles_new',\n    params: { categorySlug, locale },\n  });\n};\n</script>\n\n<template>\n  <HelpCenterLayout\n    :current-page=\"Number(meta.currentPage)\"\n    :total-items=\"articlesCount\"\n    :items-per-page=\"25\"\n    :header=\"portalName\"\n    :show-pagination-footer=\"shouldShowPaginationFooter\"\n    @update:current-page=\"handlePageChange\"\n  >\n    <template #header-actions>\n      <div class=\"flex items-end justify-between\">\n        <ArticleHeaderControls\n          v-if=\"showArticleHeaderControls\"\n          :categories=\"categories\"\n          :allowed-locales=\"allowedLocales\"\n          :meta=\"meta\"\n          @tab-change=\"handleTabChange\"\n          @locale-change=\"handleLocaleAction\"\n          @category-change=\"handleCategoryAction\"\n          @new-article=\"navigateToNewArticlePage\"\n        />\n        <CategoryHeaderControls\n          v-else-if=\"showCategoryHeaderControls\"\n          :categories=\"categories\"\n          :allowed-locales=\"allowedLocales\"\n          :has-selected-category=\"isCategoryArticles\"\n        />\n      </div>\n    </template>\n    <template #content>\n      <div\n        v-if=\"isLoading\"\n        class=\"flex items-center justify-center py-10 text-n-slate-11\"\n      >\n        <Spinner />\n      </div>\n      <ArticleList\n        v-else-if=\"!hasNoArticles\"\n        :articles=\"articles\"\n        :is-category-articles=\"isCategoryArticles\"\n      />\n      <ArticleEmptyState\n        v-else\n        class=\"pt-14\"\n        :title=\"getEmptyStateTitle\"\n        :subtitle=\"getEmptyStateSubtitle\"\n        :show-button=\"hasNoArticlesInPortal\"\n        :button-label=\"\n          t('HELP_CENTER.ARTICLES_PAGE.EMPTY_STATE.ALL.BUTTON_LABEL')\n        \"\n        @click=\"navigateToNewArticlePage\"\n      />\n    </template>\n  </HelpCenterLayout>\n</template>\n","<script setup>\nimport { computed, ref, onMounted, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useMapGetter, useStore } from 'dashboard/composables/store.js';\nimport allLocales from 'shared/constants/locales.js';\nimport { getArticleStatus } from 'dashboard/helper/portalHelper.js';\nimport ArticlesPage from 'dashboard/components-next/HelpCenter/Pages/ArticlePage/ArticlesPage.vue';\n\nconst route = useRoute();\nconst store = useStore();\n\nconst pageNumber = ref(1);\n\nconst articles = useMapGetter('articles/allArticles');\nconst categories = useMapGetter('categories/allCategories');\nconst meta = useMapGetter('articles/getMeta');\nconst portalMeta = useMapGetter('portals/getMeta');\nconst currentUserId = useMapGetter('getCurrentUserID');\nconst getPortalBySlug = useMapGetter('portals/portalBySlug');\n\nconst selectedPortalSlug = computed(() => route.params.portalSlug);\nconst selectedCategorySlug = computed(() => route.params.categorySlug);\nconst status = computed(() => getArticleStatus(route.params.tab));\n\nconst author = computed(() =>\n  route.params.tab === 'mine' ? currentUserId.value : null\n);\n\nconst activeLocale = computed(() => route.params.locale);\nconst portal = computed(() => getPortalBySlug.value(selectedPortalSlug.value));\nconst allowedLocales = computed(() => {\n  if (!portal.value) {\n    return [];\n  }\n  const { allowed_locales: allAllowedLocales } = portal.value.config;\n  return allAllowedLocales.map(locale => {\n    return {\n      id: locale.code,\n      name: allLocales[locale.code],\n      code: locale.code,\n    };\n  });\n});\n\nconst defaultPortalLocale = computed(() => {\n  return portal.value?.meta?.default_locale;\n});\n\nconst selectedLocaleInPortal = computed(() => {\n  return route.params.locale || defaultPortalLocale.value;\n});\n\nconst isCategoryArticles = computed(() => {\n  return (\n    route.name === 'portals_categories_articles_index' ||\n    route.name === 'portals_categories_articles_edit' ||\n    route.name === 'portals_categories_index'\n  );\n});\n\nconst fetchArticles = ({ pageNumber: pageNumberParam } = {}) => {\n  store.dispatch('articles/index', {\n    pageNumber: pageNumberParam || pageNumber.value,\n    portalSlug: selectedPortalSlug.value,\n    locale: activeLocale.value,\n    status: status.value,\n    authorId: author.value,\n    categorySlug: selectedCategorySlug.value,\n  });\n};\n\nconst onPageChange = pageNumberParam => {\n  fetchArticles({ pageNumber: pageNumberParam });\n};\n\nconst fetchPortalAndItsCategories = async locale => {\n  await store.dispatch('portals/index');\n  const selectedPortalParam = {\n    portalSlug: selectedPortalSlug.value,\n    locale: locale || selectedLocaleInPortal.value,\n  };\n  store.dispatch('portals/show', selectedPortalParam);\n  store.dispatch('categories/index', selectedPortalParam);\n  store.dispatch('agents/get');\n};\n\nonMounted(() => {\n  fetchArticles();\n});\n\nwatch(\n  () => route.params,\n  () => {\n    pageNumber.value = 1;\n    fetchArticles();\n  },\n  { deep: true, immediate: true }\n);\n</script>\n\n<template>\n  <div class=\"w-full h-full\">\n    <ArticlesPage\n      v-if=\"portal\"\n      :articles=\"articles\"\n      :portal-name=\"portal.name\"\n      :categories=\"categories\"\n      :allowed-locales=\"allowedLocales\"\n      :meta=\"meta\"\n      :portal-meta=\"portalMeta\"\n      :is-category-articles=\"isCategoryArticles\"\n      @page-change=\"onPageChange\"\n      @fetch-portal=\"fetchPortalAndItsCategories\"\n    />\n  </div>\n</template>\n"],"names":["props","__props","ARTICLE_STATUS_TYPES","wootConstants","router","useRouter","route","useRoute","store","useStore","t","useI18n","localArticles","ref","dragEnabled","computed","_a","getCategoryById","useMapGetter","openArticle","id","tab","categorySlug","locale","onReorder","reorderedGroup","onDragEnd","sortedArticlePositions","article","a","b","obj","key","index","getCategory","categoryId","getStatusMessage","status","isSuccess","messageType","statusMap","updatePortalMeta","portalSlug","updateArticlesMeta","handleArticleAction","action","useAlert","useTrack","PORTALS_EVENTS","error","errorMessage","updateArticle","value","getArticleStatus","watch","newArticles","emit","__emit","updateUISettings","useUISettings","isCategoryMenuOpen","isLocaleMenuOpen","countKey","tabs","ARTICLE_TABS_OPTIONS","activeTabIndex","tabParam","ARTICLE_TABS","activeCategoryName","activeCategory","category","icon","name","activeLocaleName","categoryMenuItems","defaultMenuItem","CATEGORY_ALL","categoryItems","hasCategoryMenuItems","localeMenuItems","handleLocaleAction","handleCategoryAction","handleNewArticle","handleTabChange","onClick","isSwitchingPortal","isFetching","hasNoArticles","isLoading","totalArticlesCount","hasNoArticlesInPortal","shouldShowPaginationFooter","updateRoute","newParams","articlesCount","meta","countMap","showArticleHeaderControls","showCategoryHeaderControls","getEmptyStateText","type","tabName","getEmptyStateTitle","getEmptyStateSubtitle","handlePageChange","page","navigateToNewArticlePage","pageNumber","articles","categories","portalMeta","currentUserId","getPortalBySlug","selectedPortalSlug","selectedCategorySlug","author","activeLocale","portal","allowedLocales","allAllowedLocales","allLocales","defaultPortalLocale","_b","selectedLocaleInPortal","isCategoryArticles","fetchArticles","pageNumberParam","onPageChange","fetchPortalAndItsCategories","selectedPortalParam","onMounted"],"mappings":"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"}