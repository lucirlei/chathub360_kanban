{"version":3,"mappings":"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","names":["props","__props","emit","__emit","EmojiInput","defineAsyncComponent","__vitePreload","t","useI18n","route","useRoute","getters","useStoreGetters","isCreating","useMapGetter","isUpdatingCategory","computed","id","_a","_b","isEmojiPickerOpen","ref","state","reactive","isEditMode","rules","required","minLength","v$","useVuelidate","isSubmitDisabled","nameError","slugError","slugHelpText","portalSlug","locale","onClickInsertEmoji","emoji","handleSubmit","handleCancel","watch","convertToCategorySlug","newCategory","name","icon","slug","description","onMounted","__expose","store","useStore","handleCategory","formData","categoryData","action","payload","successMessage","useAlert","trackEvent","PORTALS_EVENTS","useTrack","error","errorMessage","router","useRouter","isLocaleMenuOpen","isCreateCategoryDialogOpen","isEditCategoryDialogOpen","currentPortalSlug","currentPortal","currentPortalName","activeLocale","activeLocaleName","activeLocaleCode","localeMenuItems","selectedCategory","category","selectedCategoryName","selectedCategoryCount","selectedCategoryEmoji","categoriesCount","breadcrumbItems","items","handleLocaleAction","value","handleBreadcrumbClick","categorySlug","otherParams"],"ignoreList":[],"sources":["../../../app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryForm.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryHeaderControls.vue"],"sourcesContent":["<script setup>\nimport {\n  reactive,\n  ref,\n  watch,\n  computed,\n  defineAsyncComponent,\n  onMounted,\n} from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { OnClickOutside } from '@vueuse/components';\nimport { useStoreGetters, useMapGetter } from 'dashboard/composables/store';\nimport { useRoute } from 'vue-router';\nimport { useVuelidate } from '@vuelidate/core';\nimport { required, minLength } from '@vuelidate/validators';\nimport { convertToCategorySlug } from 'dashboard/helper/commons.js';\n\nimport Input from 'dashboard/components-next/input/Input.vue';\nimport TextArea from 'dashboard/components-next/textarea/TextArea.vue';\nimport Button from 'dashboard/components-next/button/Button.vue';\n\nconst props = defineProps({\n  mode: {\n    type: String,\n    required: true,\n    validator: value => ['edit', 'create'].includes(value),\n  },\n  selectedCategory: {\n    type: Object,\n    default: () => ({}),\n  },\n  activeLocaleCode: {\n    type: String,\n    default: '',\n  },\n  showActionButtons: {\n    type: Boolean,\n    default: true,\n  },\n  portalName: {\n    type: String,\n    default: '',\n  },\n  activeLocaleName: {\n    type: String,\n    default: '',\n  },\n});\n\nconst emit = defineEmits(['submit', 'cancel']);\n\nconst EmojiInput = defineAsyncComponent(\n  () => import('shared/components/emoji/EmojiInput.vue')\n);\n\nconst { t } = useI18n();\nconst route = useRoute();\nconst getters = useStoreGetters();\n\nconst isCreating = useMapGetter('categories/isCreating');\n\nconst isUpdatingCategory = computed(() => {\n  const id = props.selectedCategory?.id;\n  if (id) return getters['categories/uiFlags'].value(id)?.isUpdating;\n\n  return false;\n});\n\nconst isEmojiPickerOpen = ref(false);\n\nconst state = reactive({\n  id: '',\n  name: '',\n  icon: '',\n  slug: '',\n  description: '',\n  locale: '',\n});\n\nconst isEditMode = computed(() => props.mode === 'edit');\n\nconst rules = {\n  name: { required, minLength: minLength(1) },\n  slug: { required },\n};\n\nconst v$ = useVuelidate(rules, state);\n\nconst isSubmitDisabled = computed(() => v$.value.$invalid);\n\nconst nameError = computed(() =>\n  v$.value.name.$error\n    ? t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.ERROR')\n    : ''\n);\n\nconst slugError = computed(() =>\n  v$.value.slug.$error\n    ? t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.ERROR')\n    : ''\n);\n\nconst slugHelpText = computed(() => {\n  const { portalSlug, locale } = route.params;\n  return t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.HELP_TEXT', {\n    portalSlug,\n    localeCode: locale,\n    categorySlug: state.slug,\n  });\n});\n\nconst onClickInsertEmoji = emoji => {\n  state.icon = emoji;\n  isEmojiPickerOpen.value = false;\n};\n\nconst handleSubmit = async () => {\n  const isFormCorrect = await v$.value.$validate();\n  if (!isFormCorrect) return;\n\n  emit('submit', { ...state });\n};\n\nconst handleCancel = () => {\n  emit('cancel');\n};\n\nwatch(\n  () => state.name,\n  () => {\n    if (!isEditMode.value) {\n      state.slug = convertToCategorySlug(state.name);\n    }\n  }\n);\n\nwatch(\n  () => props.selectedCategory,\n  newCategory => {\n    if (props.mode === 'edit' && newCategory) {\n      const { id, name, icon, slug, description } = newCategory;\n      Object.assign(state, { id, name, icon, slug, description });\n    }\n  },\n  { immediate: true }\n);\n\nonMounted(() => {\n  if (props.mode === 'create') {\n    state.locale = props.activeLocaleCode;\n  }\n});\n\ndefineExpose({ state, isSubmitDisabled });\n</script>\n\n<template>\n  <div class=\"flex flex-col gap-4\">\n    <div\n      class=\"flex items-center justify-start gap-8 px-4 py-2 border rounded-lg border-n-strong\"\n    >\n      <div class=\"flex flex-col items-start w-full gap-2 py-2\">\n        <span class=\"text-sm font-medium text-n-slate-11\">\n          {{ t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.PORTAL') }}\n        </span>\n        <span class=\"text-sm text-n-slate-12\">\n          {{ portalName }}\n        </span>\n      </div>\n      <div class=\"justify-start w-px h-10 bg-n-strong\" />\n      <div class=\"flex flex-col w-full gap-2 py-2\">\n        <span class=\"text-sm font-medium text-n-slate-11\">\n          {{ t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.LOCALE') }}\n        </span>\n        <span\n          :title=\"`${activeLocaleName} (${activeLocaleCode})`\"\n          class=\"text-sm line-clamp-1 text-n-slate-12\"\n        >\n          {{ `${activeLocaleName} (${activeLocaleCode})` }}\n        </span>\n      </div>\n    </div>\n    <div class=\"flex flex-col gap-4\">\n      <div class=\"relative\">\n        <Input\n          v-model=\"state.name\"\n          :label=\"\n            t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.LABEL')\n          \"\n          :placeholder=\"\n            t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.NAME.PLACEHOLDER')\n          \"\n          :message=\"nameError\"\n          :message-type=\"nameError ? 'error' : 'info'\"\n          custom-input-class=\"!h-10 ltr:!pl-12 rtl:!pr-12\"\n        >\n          <template #prefix>\n            <OnClickOutside @trigger=\"isEmojiPickerOpen = false\">\n              <Button\n                :label=\"state.icon\"\n                color=\"slate\"\n                size=\"sm\"\n                type=\"button\"\n                :icon=\"!state.icon ? 'i-lucide-smile-plus' : ''\"\n                class=\"!h-[2.4rem] !w-[2.375rem] absolute top-[1.94rem] !outline-none !rounded-[0.438rem] border-0 ltr:left-px rtl:right-px ltr:!rounded-r-none rtl:!rounded-l-none\"\n                @click=\"isEmojiPickerOpen = !isEmojiPickerOpen\"\n              />\n              <EmojiInput\n                v-if=\"isEmojiPickerOpen\"\n                class=\"left-0 top-16\"\n                show-remove-button\n                :on-click=\"onClickInsertEmoji\"\n              />\n            </OnClickOutside>\n          </template>\n        </Input>\n      </div>\n      <Input\n        v-model=\"state.slug\"\n        :label=\"t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.LABEL')\"\n        :placeholder=\"\n          t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.SLUG.PLACEHOLDER')\n        \"\n        :disabled=\"isEditMode\"\n        :message=\"slugError ? slugError : slugHelpText\"\n        :message-type=\"slugError ? 'error' : 'info'\"\n        custom-input-class=\"!h-10\"\n      />\n      <TextArea\n        v-model=\"state.description\"\n        :label=\"\n          t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.DESCRIPTION.LABEL')\n        \"\n        :placeholder=\"\n          t(\n            'HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.FORM.DESCRIPTION.PLACEHOLDER'\n          )\n        \"\n        show-character-count\n      />\n      <div\n        v-if=\"showActionButtons\"\n        class=\"flex items-center justify-between w-full gap-3\"\n      >\n        <Button\n          variant=\"faded\"\n          color=\"slate\"\n          :label=\"t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.BUTTONS.CANCEL')\"\n          class=\"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3\"\n          @click=\"handleCancel\"\n        />\n        <Button\n          :label=\"\n            t(\n              `HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.BUTTONS.${mode.toUpperCase()}`\n            )\n          \"\n          class=\"w-full\"\n          :disabled=\"isSubmitDisabled || isCreating || isUpdatingCategory\"\n          :is-loading=\"isCreating || isUpdatingCategory\"\n          @click=\"handleSubmit\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.emoji-dialog::before {\n  @apply hidden;\n}\n</style>\n","<script setup>\nimport { useI18n } from 'vue-i18n';\nimport { useStore } from 'dashboard/composables/store';\nimport { useAlert, useTrack } from 'dashboard/composables';\nimport { useRoute } from 'vue-router';\nimport { PORTALS_EVENTS } from 'dashboard/helper/AnalyticsHelper/events';\n\nimport CategoryForm from 'dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryForm.vue';\n\nconst props = defineProps({\n  mode: {\n    type: String,\n    default: 'edit',\n    validator: value => ['edit', 'create'].includes(value),\n  },\n  selectedCategory: {\n    type: Object,\n    default: () => ({}),\n  },\n  portalName: {\n    type: String,\n    default: '',\n  },\n  activeLocaleName: {\n    type: String,\n    default: '',\n  },\n  activeLocaleCode: {\n    type: String,\n    default: '',\n  },\n});\n\nconst emit = defineEmits(['close']);\n\nconst store = useStore();\nconst { t } = useI18n();\nconst route = useRoute();\n\nconst handleCategory = async formData => {\n  const { id, name, slug, icon, description, locale } = formData;\n  const categoryData = { name, icon, slug, description };\n\n  if (props.mode === 'create') {\n    categoryData.locale = locale;\n  } else {\n    categoryData.id = id;\n  }\n\n  try {\n    const action = props.mode === 'edit' ? 'update' : 'create';\n    const payload = {\n      portalSlug: route.params.portalSlug,\n      categoryObj: categoryData,\n    };\n\n    if (action === 'update') {\n      payload.categoryId = id;\n    }\n\n    await store.dispatch(`categories/${action}`, payload);\n\n    const successMessage = t(\n      `HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.${props.mode.toUpperCase()}.API.SUCCESS_MESSAGE`\n    );\n    useAlert(successMessage);\n\n    const trackEvent =\n      props.mode === 'edit'\n        ? PORTALS_EVENTS.EDIT_CATEGORY\n        : PORTALS_EVENTS.CREATE_CATEGORY;\n    useTrack(\n      trackEvent,\n      props.mode === 'create'\n        ? { hasDescription: Boolean(description) }\n        : undefined\n    );\n\n    emit('close');\n  } catch (error) {\n    const errorMessage =\n      error?.message ||\n      t(\n        `HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.${props.mode.toUpperCase()}.API.ERROR_MESSAGE`\n      );\n    useAlert(errorMessage);\n  }\n};\n</script>\n\n<template>\n  <div\n    class=\"w-[25rem] absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6\"\n  >\n    <h3 class=\"text-base font-medium text-n-slate-12\">\n      {{\n        t(\n          `HELP_CENTER.CATEGORY_PAGE.CATEGORY_DIALOG.HEADER.${mode.toUpperCase()}`\n        )\n      }}\n    </h3>\n    <CategoryForm\n      :mode=\"mode\"\n      :selected-category=\"selectedCategory\"\n      :active-locale-code=\"activeLocaleCode\"\n      :portal-name=\"portalName\"\n      :active-locale-name=\"activeLocaleName\"\n      @submit=\"handleCategory\"\n      @cancel=\"emit('close')\"\n    />\n  </div>\n</template>\n","<script setup>\nimport { ref, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useI18n } from 'vue-i18n';\nimport { OnClickOutside } from '@vueuse/components';\nimport { useStoreGetters } from 'dashboard/composables/store.js';\n\nimport Button from 'dashboard/components-next/button/Button.vue';\nimport Breadcrumb from 'dashboard/components-next/breadcrumb/Breadcrumb.vue';\nimport DropdownMenu from 'dashboard/components-next/dropdown-menu/DropdownMenu.vue';\nimport CategoryDialog from 'dashboard/components-next/HelpCenter/Pages/CategoryPage/CategoryDialog.vue';\n\nconst props = defineProps({\n  categories: {\n    type: Array,\n    default: () => [],\n  },\n  allowedLocales: {\n    type: Array,\n    default: () => [],\n  },\n  hasSelectedCategory: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits(['localeChange']);\n\nconst route = useRoute();\nconst router = useRouter();\nconst getters = useStoreGetters();\nconst { t } = useI18n();\n\nconst isLocaleMenuOpen = ref(false);\nconst isCreateCategoryDialogOpen = ref(false);\nconst isEditCategoryDialogOpen = ref(false);\n\nconst currentPortalSlug = computed(() => {\n  return route.params.portalSlug;\n});\n\nconst currentPortal = computed(() => {\n  const slug = currentPortalSlug.value;\n  if (slug) return getters['portals/portalBySlug'].value(slug);\n\n  return getters['portals/allPortals'].value[0];\n});\n\nconst currentPortalName = computed(() => {\n  return currentPortal.value?.name;\n});\n\nconst activeLocale = computed(() => {\n  return props.allowedLocales.find(\n    locale => locale.code === route.params.locale\n  );\n});\n\nconst activeLocaleName = computed(() => activeLocale.value?.name ?? '');\nconst activeLocaleCode = computed(() => activeLocale.value?.code ?? '');\n\nconst localeMenuItems = computed(() => {\n  return props.allowedLocales.map(locale => ({\n    label: locale.name,\n    value: locale.code,\n    action: 'filter',\n  }));\n});\n\nconst selectedCategory = computed(() =>\n  props.categories.find(category => category.slug === route.params.categorySlug)\n);\n\nconst selectedCategoryName = computed(() => {\n  return selectedCategory.value?.name;\n});\n\nconst selectedCategoryCount = computed(\n  () => selectedCategory.value?.meta?.articles_count || 0\n);\n\nconst selectedCategoryEmoji = computed(() => {\n  return selectedCategory.value?.icon;\n});\n\nconst categoriesCount = computed(() => props.categories?.length);\n\nconst breadcrumbItems = computed(() => {\n  const items = [\n    {\n      label: t(\n        'HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.BREADCRUMB.CATEGORY_LOCALE',\n        { localeCode: activeLocaleCode.value }\n      ),\n      link: '#',\n    },\n  ];\n  if (selectedCategory.value) {\n    items.push({\n      label: t(\n        'HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.BREADCRUMB.ACTIVE_CATEGORY',\n        {\n          categoryName: selectedCategoryName.value,\n          categoryCount: selectedCategoryCount.value,\n        }\n      ),\n      emoji: selectedCategoryEmoji.value,\n    });\n  }\n  return items;\n});\n\nconst handleLocaleAction = ({ value }) => {\n  emit('localeChange', value);\n  isLocaleMenuOpen.value = false;\n};\n\nconst handleBreadcrumbClick = () => {\n  const { categorySlug, ...otherParams } = route.params;\n  router.push({\n    name: 'portals_categories_index',\n    params: otherParams,\n  });\n};\n</script>\n\n<template>\n  <div class=\"flex items-center justify-between w-full\">\n    <div v-if=\"!hasSelectedCategory\" class=\"flex items-center gap-4\">\n      <div class=\"relative group\">\n        <OnClickOutside @trigger=\"isLocaleMenuOpen = false\">\n          <Button\n            :label=\"activeLocaleName\"\n            size=\"sm\"\n            trailing-icon\n            icon=\"i-lucide-chevron-down\"\n            color=\"slate\"\n            @click=\"isLocaleMenuOpen = !isLocaleMenuOpen\"\n          />\n          <DropdownMenu\n            v-if=\"isLocaleMenuOpen\"\n            :menu-items=\"localeMenuItems\"\n            show-search\n            class=\"left-0 w-40 mt-2 overflow-y-auto xl:right-0 top-full max-h-60\"\n            @action=\"handleLocaleAction\"\n          />\n        </OnClickOutside>\n      </div>\n      <div class=\"w-px h-3.5 rounded my-auto bg-n-weak\" />\n      <span class=\"min-w-0 text-sm font-medium truncate text-n-slate-12\">\n        {{\n          t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.CATEGORIES_COUNT', {\n            n: categoriesCount,\n          })\n        }}\n      </span>\n    </div>\n    <Breadcrumb\n      v-else\n      :items=\"breadcrumbItems\"\n      @click=\"handleBreadcrumbClick\"\n    />\n    <div v-if=\"!hasSelectedCategory\" class=\"relative\">\n      <OnClickOutside @trigger=\"isCreateCategoryDialogOpen = false\">\n        <Button\n          :label=\"t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.NEW_CATEGORY')\"\n          icon=\"i-lucide-plus\"\n          size=\"sm\"\n          @click=\"isCreateCategoryDialogOpen = !isCreateCategoryDialogOpen\"\n        />\n        <CategoryDialog\n          v-if=\"isCreateCategoryDialogOpen\"\n          mode=\"create\"\n          :portal-name=\"currentPortalName\"\n          :active-locale-name=\"activeLocaleName\"\n          :active-locale-code=\"activeLocaleCode\"\n          @close=\"isCreateCategoryDialogOpen = false\"\n        />\n      </OnClickOutside>\n    </div>\n    <div v-else class=\"relative\">\n      <OnClickOutside @trigger=\"isEditCategoryDialogOpen = false\">\n        <Button\n          :label=\"t('HELP_CENTER.CATEGORY_PAGE.CATEGORY_HEADER.EDIT_CATEGORY')\"\n          color=\"slate\"\n          size=\"sm\"\n          @click=\"isEditCategoryDialogOpen = !isEditCategoryDialogOpen\"\n        />\n        <CategoryDialog\n          v-if=\"isEditCategoryDialogOpen\"\n          :selected-category=\"selectedCategory\"\n          :portal-name=\"currentPortalName\"\n          :active-locale-name=\"activeLocaleName\"\n          :active-locale-code=\"activeLocaleCode\"\n          @close=\"isEditCategoryDialogOpen = false\"\n        />\n      </OnClickOutside>\n    </div>\n  </div>\n</template>\n"],"file":"assets/CategoryHeaderControls-RyLNzmNJ.js"}