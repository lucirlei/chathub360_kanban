{"version":3,"file":"EmojiInput-CHOuDIMs.js","sources":["../../../app/javascript/shared/components/emoji/EmojiInput.vue"],"sourcesContent":["<script>\nimport emojis from './emojisGroup.json';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport NextButton from 'dashboard/components-next/button/Button.vue';\nconst SEARCH_KEY = 'Search';\n\nexport default {\n  components: { FluentIcon, NextButton },\n  props: {\n    onClick: {\n      type: Function,\n      default: () => {},\n    },\n    showRemoveButton: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      selectedKey: 'Search',\n      emojis,\n      search: '',\n    };\n  },\n  computed: {\n    categories() {\n      return [...this.emojis];\n    },\n    filterEmojisByCategory() {\n      const selectedCategoryName = this.emojis.find(category =>\n        category.name === this.selectedKey ? category.name : null\n      );\n      return selectedCategoryName?.emojis;\n    },\n    filterAllEmojisBySearch() {\n      return this.emojis.map(category => {\n        const allEmojis = category.emojis.filter(emoji =>\n          emoji.slug.replaceAll('_', ' ').includes(this.search.toLowerCase())\n        );\n        return allEmojis.length > 0\n          ? { ...category, emojis: allEmojis }\n          : { ...category, emojis: [] };\n      });\n    },\n    hasNoSearch() {\n      return this.selectedKey !== SEARCH_KEY && this.search === '';\n    },\n    hasEmptySearchResult() {\n      return this.filterAllEmojisBySearch.every(\n        category => category.emojis.length === 0\n      );\n    },\n  },\n  watch: {\n    search() {\n      this.selectedKey = 'Search';\n    },\n    selectedKey() {\n      return this.selectedKey === 'Search' ? this.focusSearchInput() : null;\n    },\n  },\n  mounted() {\n    this.focusSearchInput();\n  },\n  methods: {\n    changeCategory(category) {\n      this.search = '';\n      this.$refs.emojiItem.scrollTo({ top: 0 });\n      this.selectedKey = category;\n    },\n    getFirstEmojiByCategoryName(categoryName) {\n      const categoryItem = this.emojis.find(category =>\n        category.name === categoryName ? category : null\n      );\n      return categoryItem ? categoryItem.emojis[0].emoji : '';\n    },\n    focusSearchInput() {\n      this.$nextTick(() => {\n        this.$refs.searchbar.focus();\n      });\n    },\n  },\n};\n</script>\n\n<template>\n  <div\n    role=\"dialog\"\n    class=\"emoji-dialog bg-n-background shadow-lg rounded-md outline outline-1 outline-n-weak box-content h-[18.75rem] absolute right-0 -top-[95px] w-80 z-20\"\n  >\n    <div class=\"flex flex-col\">\n      <div class=\"flex gap-2 m-2 sticky top-2\">\n        <input\n          ref=\"searchbar\"\n          v-model=\"search\"\n          type=\"text\"\n          class=\"focus:box-shadow-blue dark:focus:box-shadow-dark !mb-0 !h-8 !text-sm\"\n          :placeholder=\"$t('EMOJI.PLACEHOLDER')\"\n        />\n        <NextButton\n          v-if=\"showRemoveButton\"\n          faded\n          sm\n          slate\n          class=\"flex-shrink-0\"\n          :label=\"$t('EMOJI.REMOVE')\"\n          @click=\"onClick('')\"\n        />\n      </div>\n      <div v-if=\"hasNoSearch\" ref=\"emojiItem\" class=\"emoji-item\">\n        <h5\n          class=\"text-sm text-n-slate-12 font-medium leading-normal m-0 py-1 px-2 capitalize\"\n        >\n          {{ selectedKey }}\n        </h5>\n        <div class=\"emoji--row\">\n          <button\n            v-for=\"item in filterEmojisByCategory\"\n            :key=\"item.slug\"\n            v-dompurify-html=\"item.emoji\"\n            class=\"emoji--item\"\n            track-by=\"$index\"\n            @click=\"onClick(item.emoji)\"\n          />\n        </div>\n      </div>\n      <div v-else ref=\"emojiItem\" class=\"emoji-item\">\n        <div v-for=\"category in filterAllEmojisBySearch\" :key=\"category.slug\">\n          <h5\n            v-if=\"category.emojis.length > 0\"\n            class=\"text-sm text-n-slate-12 font-medium leading-normal m-0 py-1 px-2 capitalize\"\n          >\n            {{ category.name }}\n          </h5>\n          <div v-if=\"category.emojis.length > 0\" class=\"emoji--row\">\n            <button\n              v-for=\"item in category.emojis\"\n              :key=\"item.slug\"\n              v-dompurify-html=\"item.emoji\"\n              class=\"emoji--item\"\n              track-by=\"$index\"\n              @click=\"onClick(item.emoji)\"\n            />\n          </div>\n        </div>\n        <div\n          v-if=\"hasEmptySearchResult\"\n          class=\"items-center flex flex-col h-[13.25rem] justify-center\"\n        >\n          <div class=\"text-n-slate-11 mb-2\">\n            <FluentIcon icon=\"emoji\" size=\"48\" />\n          </div>\n          <span class=\"text-n-slate-11 text-sm font-medium\">\n            {{ $t('EMOJI.NOT_FOUND') }}\n          </span>\n        </div>\n      </div>\n\n      <div\n        class=\"emoji-dialog--footer relative w-full py-0 rounded-b-[0.34rem] px-1 bg-n-slate-3\"\n        role=\"menu\"\n      >\n        <ul\n          class=\"flex relative left-[2px] rtl:left-[unset] rtl:right-[2px] list-none m-0 overflow-auto py-1 px-0\"\n        >\n          <li>\n            <button\n              class=\"emoji--item\"\n              :class=\"{ active: selectedKey === 'Search' }\"\n              @click=\"changeCategory('Search')\"\n            >\n              <FluentIcon icon=\"search\" size=\"16\" class=\"text-n-slate-11\" />\n            </button>\n          </li>\n          <li\n            v-for=\"category in categories\"\n            :key=\"category.slug\"\n            @click=\"changeCategory(category.name)\"\n          >\n            <button\n              v-dompurify-html=\"getFirstEmojiByCategoryName(category.name)\"\n              class=\"emoji--item\"\n              :class=\"{ active: selectedKey === category.name }\"\n              @click=\"changeCategory(category.name)\"\n            />\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n@tailwind components;\n\n@layer components {\n  .box-shadow-blue {\n    box-shadow:\n      0 0 0 1px #1f93ff,\n      0 0 1px 2px #c7e3ff;\n  }\n\n  .box-shadow-dark {\n    box-shadow:\n      0 0 0 1px #212222,\n      0 0 1px 2px #4c5155;\n  }\n}\n</style>\n\n<style lang=\"scss\">\n.emoji-dialog {\n  &::before {\n    @apply absolute -bottom-3 h-3 w-6 bg-n-slate-3 content-[\"\"];\n    clip-path: polygon(50% 100%, 0% 0%, 100% 0%);\n  }\n}\n\n.emoji--item {\n  @apply bg-transparent border-0 rounded cursor-pointer text-lg h-6 m-0 py-0 px-1 hover:bg-n-slate-4;\n}\n\n.emoji--row {\n  @apply box-border p-1;\n\n  .emoji--item {\n    @apply h-[1.625rem] w-[1.625rem] leading-normal m-1;\n  }\n}\n\n.emoji-item {\n  @apply h-[13.25rem] overflow-y-auto;\n}\n\n.emoji-dialog--footer {\n  ul {\n    > li {\n      @apply items-center cursor-pointer flex justify-center p-1;\n    }\n\n    li .active {\n      @apply bg-n-background;\n    }\n\n    .emoji--item {\n      @apply items-center flex text-sm;\n\n      &:hover {\n        @apply bg-n-slate-2;\n      }\n    }\n  }\n}\n</style>\n"],"names":["SEARCH_KEY","_sfc_main","FluentIcon","NextButton","emojis","selectedCategoryName","category","allEmojis","emoji","categoryName","categoryItem","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_cache","$event","$data","_ctx","$props","_createBlock","_component_NextButton","_createCommentVNode","$options","_hoisted_5","_toDisplayString","_Fragment","_renderList","item","_directive_dompurify_html","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_createVNode","_component_FluentIcon","_hoisted_16","_normalizeClass"],"mappings":"uhBAIA,MAAMA,EAAa,SAEdC,EAAU,CACb,WAAY,CAAE,WAAAC,EAAU,WAAEC,CAAY,EACtC,MAAO,CACL,QAAS,CACP,KAAM,SACN,QAAS,IAAM,CAAE,CAClB,EACD,iBAAkB,CAChB,KAAM,QACN,QAAS,EACV,CACF,EACD,MAAO,CACL,MAAO,CACL,YAAa,SACb,OAAAC,EACA,OAAQ,EACT,CACF,EACD,SAAU,CACR,YAAa,CACX,MAAO,CAAC,GAAG,KAAK,MAAM,CACvB,EACD,wBAAyB,CACvB,MAAMC,EAAuB,KAAK,OAAO,KAAKC,GAC5CA,EAAS,OAAS,KAAK,YAAcA,EAAS,KAAO,IACtD,EACD,OAAOD,GAAA,YAAAA,EAAsB,MAC9B,EACD,yBAA0B,CACxB,OAAO,KAAK,OAAO,IAAIC,GAAY,CACjC,MAAMC,EAAYD,EAAS,OAAO,OAAOE,GACvCA,EAAM,KAAK,WAAW,IAAK,GAAG,EAAE,SAAS,KAAK,OAAO,YAAa,CAAA,CACnE,EACD,OAAOD,EAAU,OAAS,EACtB,CAAE,GAAGD,EAAU,OAAQC,CAAU,EACjC,CAAE,GAAGD,EAAU,OAAQ,EAAI,CACjC,CAAC,CACF,EACD,aAAc,CACZ,OAAO,KAAK,cAAgBN,GAAc,KAAK,SAAW,EAC3D,EACD,sBAAuB,CACrB,OAAO,KAAK,wBAAwB,MAClCM,GAAYA,EAAS,OAAO,SAAW,CACxC,CACF,CACF,EACD,MAAO,CACL,QAAS,CACP,KAAK,YAAc,QACpB,EACD,aAAc,CACZ,OAAO,KAAK,cAAgB,SAAW,KAAK,iBAAiB,EAAI,IAClE,CACF,EACD,SAAU,CACR,KAAK,iBAAkB,CACxB,EACD,QAAS,CACP,eAAeA,EAAU,CACvB,KAAK,OAAS,GACd,KAAK,MAAM,UAAU,SAAS,CAAE,IAAK,EAAG,EACxC,KAAK,YAAcA,CACpB,EACD,4BAA4BG,EAAc,CACxC,MAAMC,EAAe,KAAK,OAAO,KAAKJ,GACpCA,EAAS,OAASG,EAAeH,EAAW,IAC7C,EACD,OAAOI,EAAeA,EAAa,OAAO,CAAC,EAAE,MAAQ,EACtD,EACD,kBAAmB,CACjB,KAAK,UAAU,IAAM,CACnB,KAAK,MAAM,UAAU,MAAO,CAC9B,CAAC,CACF,CACF,CACH,KAKI,KAAK,SACL,MAAM,sJAEDC,EAAA,CAAA,MAAM,eAAe,EACnBC,EAAA,CAAA,MAAM,6BAA6B,EA5F9CC,EAAA,CAAA,aAAA,KAAA,IAAA,EA8G8B,IAAI,YAAY,MAAM,cAE1CC,EAAA,CAAA,MAAM,6EAA6E,EAIhFC,EAAA,CAAA,MAAM,YAAY,EApH/BC,EAAA,CAAA,SAAA,KAAA,IAAA,EA+HkB,IAAI,YAAY,MAAM,iBA/HxC,IAAA,EAmIY,MAAM,kFAnIlB,IAAA,EAuIiD,MAAM,cAvIvDC,EAAA,CAAA,SAAA,KAAA,IAAA,EAoJU,MAAM,0DAEDC,EAAA,CAAA,MAAM,sBAAsB,EAG3BC,EAAA,CAAA,MAAM,qCAAqC,KAOnD,MAAM,kFACN,KAAK,QAGHC,EAAA,CAAA,MAAM,iGAAiG,EApKjHC,EAAA,CAAA,SAAA,EAAAC,EAAA,CAAA,SAAA,0FAuFE,OAAAC,EAAA,EAAAC,EAuGM,MAvGNC,EAuGM,CAnGJC,EAkGM,MAlGNf,EAkGM,CAjGJe,EAiBM,MAjBNd,EAiBM,GAhBJc,EAME,QAAA,CALA,IAAI,YA9Fd,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GA+FmBC,EAAM,OAAAD,GACf,KAAK,OACL,MAAM,uEACL,YAAaE,EAAE,GAAA,mBAAA,CAlG1B,EAAA,KAAA,EAAAjB,CAAA,EAAA,IA+FmBgB,EAAM,MAAA,IAMTE,EAAgB,sBADxBC,EAQEC,EAAA,CA5GV,IAAA,EAsGU,MAAA,GACA,GAAA,GACA,MAAA,GACA,MAAM,gBACL,MAAOH,EAAE,GAAA,cAAA,EACT,uBAAOC,EAAO,QAAA,EAAA,uBA3GzBG,EAAA,GAAA,EAAA,IA8GiBC,EAAW,aAAtBZ,IAAAC,EAgBM,MAhBNY,EAgBM,CAfJV,EAIK,KAJLZ,EAIKuB,EADAR,EAAW,WAAA,EAAA,CAAA,EAEhBH,EASM,MATNX,EASM,EARJQ,EAAA,EAAA,EAAAC,EAOEc,EA5HZ,KAAAC,EAsH2BJ,EAAsB,uBAA9BK,UADThB,EAOE,SAAA,CALC,IAAKgB,EAAK,KAEX,MAAM,cACN,WAAS,SACR,QAAOZ,GAAAG,EAAA,QAAQS,EAAK,KAAK,CA3HtC,EAAA,KAAA,EAAAxB,CAAA,GAAA,CAwH8B,CAAAyB,EAAAD,EAAK,KAAK,qBAOlCjB,IAAAC,EA8BM,MA9BNkB,EA8BM,EA7BJnB,EAAA,EAAA,EAAAC,EAiBMc,EAjJd,KAAAC,EAgIgCJ,EAAuB,wBAAnC7B,QAAZkB,EAiBM,MAAA,CAjB4C,IAAKlB,EAAS,OAEtDA,EAAS,OAAO,OAAM,GAD9BiB,EAAA,EAAAC,EAKK,KALLmB,EAIKN,EAAA/B,EAAS,IAAI,EAAA,CAAA,GArI5B4B,EAAA,GAAA,EAAA,EAuIqB5B,EAAS,OAAO,OAAM,GAAjCiB,IAAAC,EASM,MATNoB,EASM,EARJrB,EAAA,EAAA,EAAAC,EAOEc,OA/IdC,EAyI6BjC,EAAS,OAAjBkC,UADThB,EAOE,SAAA,CALC,IAAKgB,EAAK,KAEX,MAAM,cACN,WAAS,SACR,QAAOZ,GAAAG,EAAA,QAAQS,EAAK,KAAK,CA9IxC,EAAA,KAAA,EAAAvB,CAAA,GAAA,CA2IgC,CAAAwB,EAAAD,EAAK,KAAK,cA3I1CN,EAAA,GAAA,EAAA,YAmJgBC,EAAoB,sBAD5BZ,IAAAC,EAUM,MAVNqB,EAUM,CANJnB,EAEM,MAFNR,EAEM,CADJ4B,EAAqCC,EAAA,CAAzB,KAAK,QAAQ,KAAK,SAEhCrB,EAEO,OAFPP,EAEOkB,EADFP,EAAE,GAAA,iBAAA,CAAA,EAAA,CAAA,KA1JjBI,EAAA,GAAA,EAAA,SA+JMR,EA6BM,MA7BNsB,EA6BM,CAzBJtB,EAwBK,KAxBLN,EAwBK,CArBHM,EAQK,KAAA,KAAA,CAPHA,EAMS,SAAA,CALP,MAxKduB,EAAA,CAwKoB,cAAa,CAAA,OACDpB,EAAW,cAAA,QAAA,CAAA,CAAA,EAC5B,uBAAOM,EAAc,eAAA,QAAA,KAEtBW,EAA8DC,EAAA,CAAlD,KAAK,SAAS,KAAK,KAAK,MAAM,2BAG9CxB,EAAA,EAAA,EAAAC,EAWKc,EA1Lf,KAAAC,EAgL+BJ,EAAU,WAAtB7B,QADTkB,EAWK,KAAA,CATF,IAAKlB,EAAS,KACd,QAAOsB,GAAAO,EAAA,eAAe7B,EAAS,IAAI,MAEpCoB,EAKE,SAAA,CAHA,MAtLduB,GAsLoB,cAAa,CAAA,OACDpB,gBAAgBvB,EAAS,IAAI,CAAA,CAAA,EAC9C,QAAOsB,GAAAO,EAAA,eAAe7B,EAAS,IAAI,CAxLlD,EAAA,KAAA,GAAAgB,CAAA,EAAA,IAqLgCa,EAA2B,4BAAC7B,EAAS,IAAI,CAAA,GArLzE,EAAA,EAAAe,CAAA"}