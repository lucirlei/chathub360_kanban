import{e as u,m as w}from"./useBranding-CD_QbCIP.js";import{c as f,O as E,a as v,i as N}from"./widget-CCp9dnZb.js";import{F as S}from"./module-CEpankYo.js";import{u as I}from"./vue-dompurify-html-CEAHYyWB.js";import{_ as A}from"./Avatar-CS4GuSbz.js";import{_ as C,n as g,I as U,p as c,o,s as n,g as b,i as m,e as _,m as h,t as p,F as k,j as x,a as V,z as F,q as B}from"./_plugin-vue_export-helper-IoQslFd3.js";import{i as O}from"./colorHelper-DkkSNPxc.js";const D={name:"UnreadMessage",components:{Avatar:A},mixins:[f],props:{message:{type:String,default:""},showSender:{type:Boolean,default:!1},sender:{type:Object,default:()=>{}},campaignId:{type:Number,default:null}},setup(){const{formatMessage:e,getPlainText:s,truncateMessage:r,highlightContent:i}=I();return{formatMessage:e,getPlainText:s,truncateMessage:r,highlightContent:i}},computed:{companyName(){return`${this.$t("UNREAD_VIEW.COMPANY_FROM")} ${this.channelConfig.websiteName}`},avatarUrl(){const e=this.useInboxAvatarForBot?this.inboxAvatarUrl:"/assets/images/chatwoot_bot.png";if(this.isSenderExist(this.sender)){const{avatar_url:s}=this.sender;return s}return e},agentName(){if(this.isSenderExist(this.sender)){const{available_name:e}=this.sender;return e}return this.useInboxAvatarForBot?this.channelConfig.websiteName:this.$t("UNREAD_VIEW.BOT")},availabilityStatus(){if(this.isSenderExist(this.sender)){const{availability_status:e}=this.sender;return e}return null}},methods:{isSenderExist(e){return e&&!N(e)},onClickMessage(){this.campaignId?u.emit(E,this.campaignId):u.emit(v)}}},L={class:"chat-bubble-wrap"},T={key:0,class:"row--agent-block"},W={class:"agent--name"},z={class:"company--name"},G={class:"message-content"};function R(e,s,r,i,y,t){const d=g("Avatar"),l=U("dompurify-html");return o(),c("div",L,[n("button",{class:"chat-bubble agent bg-white",onClick:s[0]||(s[0]=(...a)=>t.onClickMessage&&t.onClickMessage(...a))},[r.showSender?(o(),c("div",T,[_(d,{src:t.avatarUrl,size:20,name:t.agentName,status:t.availabilityStatus,"rounded-full":""},null,8,["src","name","status"]),m(n("span",W,null,512),[[l,t.agentName]]),m(n("span",z,null,512),[[l,t.companyName]])])):b("",!0),m(n("div",G,null,512),[[l,i.formatMessage(r.message,!1)]])])])}const $=C(D,[["render",R],["__scopeId","data-v-cafe8088"]]),j={name:"Unread",components:{FluentIcon:S,UnreadMessage:$},mixins:[f],props:{messages:{type:Array,required:!0}},emits:["close"],computed:{...w({unreadMessageCount:"conversation/getUnreadMessageCount",widgetColor:"appConfig/getWidgetColor"}),sender(){const[e]=this.messages;return e.sender||{}},isBackgroundLighter(){return O(this.widgetColor)}},methods:{openConversationView(){u.emit(v)},closeFullView(){this.$emit("close")},getMessageContent(e){const{attachments:s,content:r}=e,i=s&&s.length;return r||(i?"ðŸ“‘":"")}}},P={class:"unread-wrap",dir:"ltr"},q={class:"close-unread-wrap"},K={class:"flex items-center"},Y={class:"unread-messages"},H={class:"open-read-view-wrap"};function J(e,s,r,i,y,t){const d=g("FluentIcon"),l=g("UnreadMessage");return o(),c("div",P,[n("div",q,[n("button",{class:"button small close-unread-button",onClick:s[0]||(s[0]=(...a)=>t.closeFullView&&t.closeFullView(...a))},[n("span",K,[_(d,{class:"mr-1",icon:"dismiss",size:"12"}),h(" "+p(e.$t("UNREAD_VIEW.CLOSE_MESSAGES_BUTTON")),1)])])]),n("div",Y,[(o(!0),c(k,null,x(r.messages,(a,M)=>(o(),V(l,{key:a.id,"message-type":a.messageType,"message-id":a.id,"show-sender":!M,sender:a.sender,message:t.getMessageContent(a),"campaign-id":a.campaignId},null,8,["message-type","message-id","show-sender","sender","message","campaign-id"]))),128))]),n("div",H,[e.unreadMessageCount?(o(),c("button",{key:0,class:"button clear-button",onClick:s[1]||(s[1]=(...a)=>t.openConversationView&&t.openConversationView(...a))},[n("span",{class:B(["flex items-center",{"!text-n-slate-12":t.isBackgroundLighter}]),style:F({color:e.widgetColor})},[_(d,{class:"mr-2",size:"16",icon:"arrow-right"}),h(" "+p(e.$t("UNREAD_VIEW.VIEW_MESSAGES_BUTTON")),1)],6)])):b("",!0)])])}const ne=C(j,[["render",J],["__scopeId","data-v-4f260fa6"]]);export{ne as U};
//# sourceMappingURL=UnreadMessageList-CtA_wnrr.js.map
