{"version":3,"file":"PortalsSettingsIndexPage-D8527UoR.js","sources":["../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalBaseSettings.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/AddCustomDomainDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/DNSConfigurationDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalConfigurationSettings.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/ConfirmDeletePortalDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalSettings.vue","../../../app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsSettingsIndexPage.vue"],"sourcesContent":["<script setup>\nimport { reactive, watch, computed } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { buildPortalURL } from 'dashboard/helper/portalHelper';\nimport { useAlert } from 'dashboard/composables';\nimport { useStore, useStoreGetters } from 'dashboard/composables/store';\nimport { uploadFile } from 'dashboard/helper/uploadHelper';\nimport { checkFileSizeLimit } from 'shared/helpers/FileHelper';\nimport { useVuelidate } from '@vuelidate/core';\nimport { required, minLength, helpers, url } from '@vuelidate/validators';\nimport { isValidSlug } from 'shared/helpers/Validators';\n\nimport Button from 'dashboard/components-next/button/Button.vue';\nimport Input from 'dashboard/components-next/input/Input.vue';\nimport Avatar from 'dashboard/components-next/avatar/Avatar.vue';\nimport ComboBox from 'dashboard/components-next/combobox/ComboBox.vue';\nimport ColorPicker from 'dashboard/components-next/colorpicker/ColorPicker.vue';\n\nconst props = defineProps({\n  activePortal: {\n    type: Object,\n    required: true,\n  },\n  isFetching: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits(['updatePortal']);\n\nconst { t } = useI18n();\nconst store = useStore();\nconst getters = useStoreGetters();\n\nconst MAXIMUM_FILE_UPLOAD_SIZE = 4; // in MB\n\nconst state = reactive({\n  name: '',\n  headerText: '',\n  pageTitle: '',\n  slug: '',\n  widgetColor: '',\n  homePageLink: '',\n  liveChatWidgetInboxId: '',\n  logoUrl: '',\n  avatarBlobId: '',\n});\n\nconst originalState = reactive({ ...state });\n\nconst liveChatWidgets = computed(() => {\n  const inboxes = store.getters['inboxes/getInboxes'];\n  return inboxes\n    .filter(inbox => inbox.channel_type === 'Channel::WebWidget')\n    .map(inbox => ({\n      value: inbox.id,\n      label: inbox.name,\n    }));\n});\n\nconst rules = {\n  name: { required, minLength: minLength(2) },\n  slug: {\n    required: helpers.withMessage(\n      () => t('HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR'),\n      required\n    ),\n    isValidSlug: helpers.withMessage(\n      () => t('HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR'),\n      isValidSlug\n    ),\n  },\n  homePageLink: { url },\n};\n\nconst v$ = useVuelidate(rules, state);\n\nconst nameError = computed(() =>\n  v$.value.name.$error ? t('HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR') : ''\n);\n\nconst slugError = computed(() => {\n  return v$.value.slug.$errors[0]?.$message || '';\n});\n\nconst homePageLinkError = computed(() =>\n  v$.value.homePageLink.$error\n    ? t('HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.ERROR')\n    : ''\n);\n\nconst isUpdatingPortal = computed(() => {\n  const slug = props.activePortal?.slug;\n  if (slug) return getters['portals/uiFlagsIn'].value(slug)?.isUpdating;\n\n  return false;\n});\n\nwatch(\n  () => props.activePortal,\n  newVal => {\n    if (newVal && !props.isFetching) {\n      Object.assign(state, {\n        name: newVal.name,\n        headerText: newVal.header_text,\n        pageTitle: newVal.page_title,\n        widgetColor: newVal.color,\n        homePageLink: newVal.homepage_link,\n        slug: newVal.slug,\n        liveChatWidgetInboxId: newVal.inbox?.id,\n      });\n      if (newVal.logo) {\n        const {\n          logo: { file_url: logoURL, blob_id: blobId },\n        } = newVal;\n        state.logoUrl = logoURL;\n        state.avatarBlobId = blobId;\n      } else {\n        state.logoUrl = '';\n        state.avatarBlobId = '';\n      }\n      Object.assign(originalState, state);\n    }\n  },\n  { immediate: true, deep: true }\n);\n\nconst hasChanges = computed(() => {\n  return JSON.stringify(state) !== JSON.stringify(originalState);\n});\n\nconst handleUpdatePortal = () => {\n  const portal = {\n    id: props.activePortal?.id,\n    slug: state.slug,\n    name: state.name,\n    color: state.widgetColor,\n    page_title: state.pageTitle,\n    header_text: state.headerText,\n    homepage_link: state.homePageLink,\n    blob_id: state.avatarBlobId,\n    inbox_id: state.liveChatWidgetInboxId,\n  };\n  emit('updatePortal', portal);\n};\n\nasync function uploadLogoToStorage({ file }) {\n  try {\n    const { fileUrl, blobId } = await uploadFile(file);\n    if (fileUrl) {\n      state.logoUrl = fileUrl;\n      state.avatarBlobId = blobId;\n    }\n    useAlert(t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_SUCCESS'));\n  } catch (error) {\n    useAlert(t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_ERROR'));\n  }\n}\n\nasync function deleteLogo() {\n  try {\n    const portalSlug = props.activePortal?.slug;\n    await store.dispatch('portals/deleteLogo', {\n      portalSlug,\n    });\n    useAlert(t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_DELETE_SUCCESS'));\n  } catch (error) {\n    useAlert(\n      error?.message ||\n        t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_DELETE_ERROR')\n    );\n  }\n}\n\nconst handleAvatarUpload = file => {\n  if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\n    uploadLogoToStorage(file);\n  } else {\n    const errorKey =\n      'HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_SIZE_ERROR';\n    useAlert(t(errorKey, { size: MAXIMUM_FILE_UPLOAD_SIZE }));\n  }\n};\n\nconst handleAvatarDelete = () => {\n  state.logoUrl = '';\n  state.avatarBlobId = '';\n  deleteLogo();\n};\n</script>\n\n<template>\n  <div class=\"flex flex-col w-full gap-4\">\n    <div class=\"flex flex-col w-full gap-2\">\n      <label class=\"mb-0.5 text-sm font-medium text-gray-900 dark:text-gray-50\">\n        {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.LABEL') }}\n      </label>\n      <Avatar\n        :src=\"state.logoUrl\"\n        :name=\"state.name\"\n        :size=\"72\"\n        allow-upload\n        icon-name=\"i-lucide-building-2\"\n        @upload=\"handleAvatarUpload\"\n        @delete=\"handleAvatarDelete\"\n      />\n    </div>\n    <div class=\"flex flex-col w-full gap-4\">\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-n-slate-12\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.NAME.LABEL') }}\n        </label>\n        <Input\n          v-model=\"state.name\"\n          :placeholder=\"t('HELP_CENTER.PORTAL_SETTINGS.FORM.NAME.PLACEHOLDER')\"\n          :message-type=\"nameError ? 'error' : 'info'\"\n          :message=\"nameError\"\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\n          @input=\"v$.name.$touch()\"\n          @blur=\"v$.name.$touch()\"\n        />\n      </div>\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-n-slate-12\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.HEADER_TEXT.LABEL') }}\n        </label>\n        <Input\n          v-model=\"state.headerText\"\n          :placeholder=\"\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.HEADER_TEXT.PLACEHOLDER')\n          \"\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\n        />\n      </div>\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap text-n-slate-12 py-2.5\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.PAGE_TITLE.LABEL') }}\n        </label>\n        <Input\n          v-model=\"state.pageTitle\"\n          :placeholder=\"\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.PAGE_TITLE.PLACEHOLDER')\n          \"\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\n        />\n      </div>\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap text-n-slate-12 py-2.5\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.LABEL') }}\n        </label>\n        <Input\n          v-model=\"state.homePageLink\"\n          :placeholder=\"\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.PLACEHOLDER')\n          \"\n          :message-type=\"homePageLinkError ? 'error' : 'info'\"\n          :message=\"homePageLinkError\"\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\n          @input=\"v$.homePageLink.$touch()\"\n          @blur=\"v$.homePageLink.$touch()\"\n        />\n      </div>\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-n-slate-12\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.SLUG.LABEL') }}\n        </label>\n        <Input\n          v-model=\"state.slug\"\n          :placeholder=\"t('HELP_CENTER.PORTAL_SETTINGS.FORM.SLUG.PLACEHOLDER')\"\n          :message-type=\"slugError ? 'error' : 'info'\"\n          :message=\"slugError || buildPortalURL(state.slug)\"\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\n          @input=\"v$.slug.$touch()\"\n          @blur=\"v$.slug.$touch()\"\n        />\n      </div>\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-n-slate-12\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.LABEL') }}\n        </label>\n        <ComboBox\n          v-model=\"state.liveChatWidgetInboxId\"\n          :options=\"liveChatWidgets\"\n          :placeholder=\"\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.PLACEHOLDER')\n          \"\n          :message=\"\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.HELP_TEXT')\n          \"\n          class=\"[&>div>button:not(.focused)]:!outline-n-weak\"\n        />\n      </div>\n      <div\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\n      >\n        <label\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-n-slate-12\"\n        >\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.BRAND_COLOR.LABEL') }}\n        </label>\n        <div class=\"w-[432px] justify-start\">\n          <ColorPicker v-model=\"state.widgetColor\" />\n        </div>\n      </div>\n      <div class=\"flex justify-end w-full gap-2\">\n        <Button\n          :label=\"t('HELP_CENTER.PORTAL_SETTINGS.FORM.SAVE_CHANGES')\"\n          :disabled=\"!hasChanges || isUpdatingPortal || v$.$invalid\"\n          :is-loading=\"isUpdatingPortal\"\n          @click=\"handleUpdatePortal\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","<script setup>\nimport { ref, reactive, watch } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useVuelidate } from '@vuelidate/core';\nimport { helpers } from '@vuelidate/validators';\nimport { isValidDomain } from '@chatwoot/utils';\n\nimport Dialog from 'dashboard/components-next/dialog/Dialog.vue';\nimport Input from 'dashboard/components-next/input/Input.vue';\n\nconst props = defineProps({\n  mode: {\n    type: String,\n    default: 'add',\n  },\n  customDomain: {\n    type: String,\n    default: '',\n  },\n});\n\nconst emit = defineEmits(['addCustomDomain']);\n\nconst { t } = useI18n();\n\nconst dialogRef = ref(null);\n\nconst formState = reactive({\n  customDomain: props.customDomain,\n});\n\nconst rules = {\n  customDomain: {\n    isValidDomain: helpers.withMessage(\n      () =>\n        t(\n          'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.FORMAT_ERROR'\n        ),\n      isValidDomain\n    ),\n  },\n};\n\nconst v$ = useVuelidate(rules, formState);\n\nwatch(\n  () => props.customDomain,\n  newVal => {\n    formState.customDomain = newVal;\n  }\n);\n\nconst handleDialogConfirm = async () => {\n  const isFormCorrect = await v$.value.$validate();\n  if (!isFormCorrect) return;\n\n  emit('addCustomDomain', formState.customDomain);\n};\n\ndefineExpose({ dialogRef });\n</script>\n\n<template>\n  <Dialog\n    ref=\"dialogRef\"\n    :title=\"\n      t(\n        `HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.${props.mode.toUpperCase()}_HEADER`\n      )\n    \"\n    :confirm-button-label=\"\n      t(\n        `HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.${props.mode.toUpperCase()}_CONFIRM_BUTTON_LABEL`\n      )\n    \"\n    @confirm=\"handleDialogConfirm\"\n  >\n    <Input\n      v-model=\"formState.customDomain\"\n      :label=\"\n        t(\n          'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.LABEL'\n        )\n      \"\n      :placeholder=\"\n        t(\n          'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.PLACEHOLDER'\n        )\n      \"\n      :message=\"\n        v$.customDomain.$error ? v$.customDomain.$errors[0].$message : ''\n      \"\n      :message-type=\"v$.customDomain.$error ? 'error' : 'info'\"\n      @blur=\"v$.customDomain.$touch()\"\n    />\n  </Dialog>\n</template>\n","<script setup>\nimport { reactive, computed, ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useAlert } from 'dashboard/composables';\nimport { copyTextToClipboard } from 'shared/helpers/clipboard';\nimport { getHostNameFromURL } from 'dashboard/helper/URLHelper';\nimport { email, required } from '@vuelidate/validators';\nimport { useVuelidate } from '@vuelidate/core';\n\nimport Dialog from 'dashboard/components-next/dialog/Dialog.vue';\nimport Input from 'dashboard/components-next/input/Input.vue';\nimport NextButton from 'dashboard/components-next/button/Button.vue';\n\nconst props = defineProps({\n  customDomain: {\n    type: String,\n    default: '',\n  },\n});\n\nconst emit = defineEmits(['send', 'close']);\n\nconst { t } = useI18n();\n\nconst state = reactive({\n  email: '',\n});\n\nconst validationRules = {\n  email: { email, required },\n};\n\nconst v$ = useVuelidate(validationRules, state);\n\nconst domain = computed(() => {\n  const { hostURL, helpCenterURL } = window?.chatwootConfig || {};\n  return getHostNameFromURL(helpCenterURL) || getHostNameFromURL(hostURL) || '';\n});\n\nconst subdomainCNAME = computed(\n  () => `${props.customDomain} CNAME ${domain.value}`\n);\n\nconst handleCopy = async e => {\n  e.stopPropagation();\n  await copyTextToClipboard(subdomainCNAME.value);\n  useAlert(\n    t(\n      'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.COPY'\n    )\n  );\n};\n\nconst dialogRef = ref(null);\n\nconst resetForm = () => {\n  v$.value.$reset();\n  state.email = '';\n};\n\nconst onClose = () => {\n  resetForm();\n  emit('close');\n};\n\nconst handleSend = async () => {\n  const isFormCorrect = await v$.value.$validate();\n  if (!isFormCorrect) return;\n\n  emit('send', state.email);\n  onClose();\n};\n\ndefineExpose({ dialogRef });\n</script>\n\n<template>\n  <Dialog\n    ref=\"dialogRef\"\n    :show-cancel-button=\"false\"\n    :show-confirm-button=\"false\"\n    @close=\"resetForm\"\n  >\n    <NextButton\n      icon=\"i-lucide-x\"\n      sm\n      ghost\n      slate\n      class=\"flex-shrink-0 absolute top-2 ltr:right-2 rtl:left-2\"\n      @click=\"onClose\"\n    />\n    <div class=\"flex flex-col gap-6 divide-y divide-n-strong\">\n      <div class=\"flex flex-col gap-6\">\n        <div class=\"flex flex-col gap-2 ltr:pr-10 rtl:pl-10\">\n          <h3 class=\"text-base font-medium leading-6 text-n-slate-12\">\n            {{\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.HEADER'\n              )\n            }}\n          </h3>\n          <p class=\"mb-0 text-sm text-n-slate-12\">\n            {{\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.DESCRIPTION'\n              )\n            }}\n          </p>\n        </div>\n        <div class=\"flex items-center gap-3 w-full\">\n          <span\n            class=\"min-h-10 px-3 py-2.5 inline-flex items-center w-full text-sm bg-transparent border rounded-lg text-n-slate-11 border-n-strong\"\n          >\n            {{ subdomainCNAME }}\n          </span>\n          <NextButton\n            faded\n            slate\n            type=\"button\"\n            icon=\"i-lucide-copy\"\n            class=\"flex-shrink-0\"\n            @click=\"handleCopy\"\n          />\n        </div>\n      </div>\n\n      <div class=\"flex flex-col gap-6 pt-6\">\n        <div class=\"flex flex-col gap-2 ltr:pr-10 rtl:pl-10\">\n          <h3 class=\"text-base font-medium leading-6 text-n-slate-12\">\n            {{\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.SEND_INSTRUCTIONS.HEADER'\n              )\n            }}\n          </h3>\n          <p class=\"mb-0 text-sm text-n-slate-12\">\n            {{\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.SEND_INSTRUCTIONS.DESCRIPTION'\n              )\n            }}\n          </p>\n        </div>\n        <form\n          class=\"flex items-start gap-3 w-full\"\n          @submit.prevent=\"handleSend\"\n        >\n          <Input\n            v-model=\"state.email\"\n            :placeholder=\"\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.SEND_INSTRUCTIONS.PLACEHOLDER'\n              )\n            \"\n            :message=\"\n              v$.email.$error\n                ? t(\n                    'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.SEND_INSTRUCTIONS.ERROR'\n                  )\n                : ''\n            \"\n            :message-type=\"v$.email.$error ? 'error' : 'info'\"\n            class=\"w-full\"\n            @blur=\"v$.email.$touch()\"\n          />\n          <NextButton\n            :label=\"\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.SEND_INSTRUCTIONS.SEND_BUTTON'\n              )\n            \"\n            type=\"submit\"\n            class=\"flex-shrink-0\"\n          />\n        </form>\n      </div>\n    </div>\n  </Dialog>\n</template>\n","<script setup>\nimport { computed, ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { useAccount } from 'dashboard/composables/useAccount';\n\nimport AddCustomDomainDialog from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/AddCustomDomainDialog.vue';\nimport DNSConfigurationDialog from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/DNSConfigurationDialog.vue';\nimport Button from 'dashboard/components-next/button/Button.vue';\n\nconst props = defineProps({\n  activePortal: {\n    type: Object,\n    required: true,\n  },\n  isFetchingStatus: {\n    type: Boolean,\n    required: true,\n  },\n});\n\nconst emit = defineEmits([\n  'updatePortalConfiguration',\n  'refreshStatus',\n  'sendCnameInstructions',\n]);\n\nconst SSL_STATUS = {\n  LIVE: ['active', 'staging_active'],\n  PENDING: [\n    'provisioned',\n    'pending',\n    'initializing',\n    'pending_validation',\n    'pending_deployment',\n    'pending_issuance',\n    'holding_deployment',\n    'holding_validation',\n    'pending_expiration',\n    'pending_cleanup',\n    'pending_deletion',\n    'staging_deployment',\n    'backup_issued',\n  ],\n  ERROR: [\n    'blocked',\n    'inactive',\n    'moved',\n    'expired',\n    'deleted',\n    'timed_out_initializing',\n    'timed_out_validation',\n    'timed_out_issuance',\n    'timed_out_deployment',\n    'timed_out_deletion',\n    'deactivating',\n  ],\n};\n\nconst { t } = useI18n();\nconst { isOnChatwootCloud } = useAccount();\n\nconst addCustomDomainDialogRef = ref(null);\nconst dnsConfigurationDialogRef = ref(null);\nconst updatedDomainAddress = ref('');\n\nconst customDomainAddress = computed(\n  () => props.activePortal?.custom_domain || ''\n);\n\nconst sslSettings = computed(() => props.activePortal?.ssl_settings || {});\nconst verificationErrors = computed(\n  () => sslSettings.value.verification_errors || ''\n);\n\nconst isLive = computed(() =>\n  SSL_STATUS.LIVE.includes(sslSettings.value.status)\n);\nconst isPending = computed(() =>\n  SSL_STATUS.PENDING.includes(sslSettings.value.status)\n);\nconst isError = computed(() =>\n  SSL_STATUS.ERROR.includes(sslSettings.value.status)\n);\n\nconst statusText = computed(() => {\n  if (isLive.value)\n    return t(\n      'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.STATUS.LIVE'\n    );\n  if (isPending.value)\n    return t(\n      'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.STATUS.PENDING'\n    );\n  if (isError.value)\n    return t(\n      'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.STATUS.ERROR'\n    );\n  return '';\n});\n\nconst statusColors = computed(() => {\n  if (isLive.value)\n    return { text: 'text-n-teal-11', bubble: 'outline-n-teal-6 bg-n-teal-9' };\n  if (isError.value)\n    return { text: 'text-n-ruby-11', bubble: 'outline-n-ruby-6 bg-n-ruby-9' };\n  return { text: 'text-n-amber-11', bubble: 'outline-n-amber-6 bg-n-amber-9' };\n});\n\nconst updatePortalConfiguration = customDomain => {\n  const portal = {\n    id: props.activePortal?.id,\n    custom_domain: customDomain,\n  };\n  emit('updatePortalConfiguration', portal);\n  addCustomDomainDialogRef.value.dialogRef.close();\n  if (customDomain) {\n    updatedDomainAddress.value = customDomain;\n    dnsConfigurationDialogRef.value.dialogRef.open();\n  }\n};\n\nconst closeDNSConfigurationDialog = () => {\n  updatedDomainAddress.value = '';\n  dnsConfigurationDialogRef.value.dialogRef.close();\n};\n\nconst onClickRefreshSSLStatus = () => {\n  emit('refreshStatus');\n};\n\nconst onClickSend = email => {\n  emit('sendCnameInstructions', {\n    portalSlug: props.activePortal?.slug,\n    email,\n  });\n};\n</script>\n\n<template>\n  <div class=\"flex flex-col w-full gap-6\">\n    <div class=\"flex flex-col gap-2\">\n      <h6 class=\"text-base font-medium text-n-slate-12\">\n        {{\n          t(\n            'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.HEADER'\n          )\n        }}\n      </h6>\n      <span class=\"text-sm text-n-slate-11\">\n        {{\n          t(\n            'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DESCRIPTION'\n          )\n        }}\n      </span>\n    </div>\n    <div class=\"flex flex-col w-full gap-4\">\n      <div class=\"flex items-center justify-between w-full gap-2\">\n        <div v-if=\"customDomainAddress\" class=\"flex flex-col gap-1\">\n          <div class=\"flex items-center w-full h-8 gap-4\">\n            <label class=\"text-sm font-medium text-n-slate-12\">\n              {{\n                t(\n                  'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.LABEL'\n                )\n              }}\n            </label>\n            <span class=\"text-sm text-n-slate-12\">\n              {{ customDomainAddress }}\n            </span>\n          </div>\n          <span\n            v-if=\"!isLive && isOnChatwootCloud\"\n            class=\"text-sm text-n-slate-11\"\n          >\n            {{\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.STATUS_DESCRIPTION'\n              )\n            }}\n          </span>\n        </div>\n        <div class=\"flex items-center\">\n          <div v-if=\"customDomainAddress\" class=\"flex items-center gap-3\">\n            <div\n              v-if=\"statusText && isOnChatwootCloud\"\n              v-tooltip=\"verificationErrors\"\n              class=\"flex items-center gap-3 flex-shrink-0\"\n            >\n              <span\n                class=\"size-1.5 rounded-full outline outline-2 block flex-shrink-0\"\n                :class=\"statusColors.bubble\"\n              />\n              <span\n                :class=\"statusColors.text\"\n                class=\"text-sm leading-[16px] font-medium\"\n              >\n                {{ statusText }}\n              </span>\n            </div>\n            <div\n              v-if=\"statusText && isOnChatwootCloud\"\n              class=\"w-px h-3 bg-n-weak\"\n            />\n            <Button\n              slate\n              sm\n              link\n              :label=\"\n                t(\n                  'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.EDIT_BUTTON'\n                )\n              \"\n              class=\"hover:!no-underline flex-shrink-0\"\n              @click=\"addCustomDomainDialogRef.dialogRef.open()\"\n            />\n            <div v-if=\"isOnChatwootCloud\" class=\"w-px h-3 bg-n-weak\" />\n            <Button\n              v-if=\"isOnChatwootCloud\"\n              slate\n              sm\n              link\n              icon=\"i-lucide-refresh-ccw\"\n              :class=\"isFetchingStatus && 'animate-spin'\"\n              @click=\"onClickRefreshSSLStatus\"\n            />\n          </div>\n          <Button\n            v-else\n            :label=\"\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.ADD_BUTTON'\n              )\n            \"\n            color=\"slate\"\n            @click=\"addCustomDomainDialogRef.dialogRef.open()\"\n          />\n        </div>\n      </div>\n    </div>\n    <AddCustomDomainDialog\n      ref=\"addCustomDomainDialogRef\"\n      :mode=\"customDomainAddress ? 'edit' : 'add'\"\n      :custom-domain=\"customDomainAddress\"\n      @add-custom-domain=\"updatePortalConfiguration\"\n    />\n    <DNSConfigurationDialog\n      ref=\"dnsConfigurationDialogRef\"\n      :custom-domain=\"updatedDomainAddress || customDomainAddress\"\n      @close=\"closeDNSConfigurationDialog\"\n      @send=\"onClickSend\"\n    />\n  </div>\n</template>\n","<script setup>\nimport { ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\n\nimport Dialog from 'dashboard/components-next/dialog/Dialog.vue';\n\ndefineProps({\n  activePortalName: {\n    type: String,\n    required: true,\n  },\n});\n\nconst emit = defineEmits(['deletePortal']);\n\nconst { t } = useI18n();\n\nconst dialogRef = ref(null);\n\nconst handleDialogConfirm = () => {\n  emit('deletePortal');\n};\n\ndefineExpose({ dialogRef });\n</script>\n\n<template>\n  <Dialog\n    ref=\"dialogRef\"\n    type=\"alert\"\n    :title=\"\n      t(\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.HEADER',\n        {\n          portalName: activePortalName,\n        }\n      )\n    \"\n    :description=\"\n      t(\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.DESCRIPTION'\n      )\n    \"\n    :confirm-button-label=\"\n      t(\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.CONFIRM_BUTTON_LABEL'\n      )\n    \"\n    @confirm=\"handleDialogConfirm\"\n  />\n</template>\n","<script setup>\nimport { computed, ref } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useI18n } from 'vue-i18n';\nimport { useMapGetter } from 'dashboard/composables/store.js';\n\nimport HelpCenterLayout from 'dashboard/components-next/HelpCenter/HelpCenterLayout.vue';\nimport PortalBaseSettings from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalBaseSettings.vue';\nimport PortalConfigurationSettings from './PortalConfigurationSettings.vue';\nimport ConfirmDeletePortalDialog from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/ConfirmDeletePortalDialog.vue';\nimport Spinner from 'dashboard/components-next/spinner/Spinner.vue';\nimport Button from 'dashboard/components-next/button/Button.vue';\n\nconst props = defineProps({\n  portals: {\n    type: Array,\n    required: true,\n  },\n  isFetching: {\n    type: Boolean,\n    required: true,\n  },\n});\n\nconst emit = defineEmits([\n  'updatePortal',\n  'updatePortalConfiguration',\n  'deletePortal',\n  'refreshStatus',\n  'sendCnameInstructions',\n]);\n\nconst { t } = useI18n();\nconst route = useRoute();\n\nconst confirmDeletePortalDialogRef = ref(null);\n\nconst currentPortalSlug = computed(() => route.params.portalSlug);\n\nconst isSwitchingPortal = useMapGetter('portals/isSwitchingPortal');\nconst isFetchingSSLStatus = useMapGetter('portals/isFetchingSSLStatus');\n\nconst activePortal = computed(() => {\n  return props.portals?.find(portal => portal.slug === currentPortalSlug.value);\n});\n\nconst activePortalName = computed(() => activePortal.value?.name || '');\n\nconst isLoading = computed(() => props.isFetching || isSwitchingPortal.value);\n\nconst handleUpdatePortal = portal => {\n  emit('updatePortal', portal);\n};\n\nconst handleUpdatePortalConfiguration = portal => {\n  emit('updatePortalConfiguration', portal);\n};\n\nconst fetchSSLStatus = () => {\n  emit('refreshStatus');\n};\n\nconst handleSendCnameInstructions = payload => {\n  emit('sendCnameInstructions', payload);\n};\n\nconst openConfirmDeletePortalDialog = () => {\n  confirmDeletePortalDialogRef.value.dialogRef.open();\n};\n\nconst handleDeletePortal = () => {\n  emit('deletePortal', activePortal.value);\n  confirmDeletePortalDialogRef.value.dialogRef.close();\n};\n</script>\n\n<template>\n  <HelpCenterLayout :show-pagination-footer=\"false\">\n    <template #content>\n      <div\n        v-if=\"isLoading\"\n        class=\"flex items-center justify-center py-10 pt-2 pb-8 text-n-slate-11\"\n      >\n        <Spinner />\n      </div>\n      <div\n        v-else-if=\"activePortal\"\n        class=\"flex flex-col w-full gap-4 max-w-[40rem] pb-8\"\n      >\n        <PortalBaseSettings\n          :active-portal=\"activePortal\"\n          :is-fetching=\"isFetching\"\n          @update-portal=\"handleUpdatePortal\"\n        />\n        <div class=\"w-full h-px bg-n-weak\" />\n        <PortalConfigurationSettings\n          :active-portal=\"activePortal\"\n          :is-fetching=\"isFetching\"\n          :is-fetching-status=\"isFetchingSSLStatus\"\n          @update-portal-configuration=\"handleUpdatePortalConfiguration\"\n          @refresh-status=\"fetchSSLStatus\"\n          @send-cname-instructions=\"handleSendCnameInstructions\"\n        />\n        <div class=\"w-full h-px bg-n-weak\" />\n        <div class=\"flex items-end justify-between w-full gap-4\">\n          <div class=\"flex flex-col gap-2\">\n            <h6 class=\"text-base font-medium text-n-slate-12\">\n              {{\n                t(\n                  'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.HEADER'\n                )\n              }}\n            </h6>\n            <span class=\"text-sm text-n-slate-11\">\n              {{\n                t(\n                  'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DESCRIPTION'\n                )\n              }}\n            </span>\n          </div>\n          <Button\n            :label=\"\n              t(\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.BUTTON',\n                {\n                  portalName: activePortalName,\n                }\n              )\n            \"\n            color=\"ruby\"\n            class=\"max-w-56 !w-fit\"\n            @click=\"openConfirmDeletePortalDialog\"\n          />\n        </div>\n      </div>\n    </template>\n    <ConfirmDeletePortalDialog\n      ref=\"confirmDeletePortalDialogRef\"\n      :active-portal-name=\"activePortalName\"\n      @delete-portal=\"handleDeletePortal\"\n    />\n  </HelpCenterLayout>\n</template>\n","<script setup>\nimport { useI18n } from 'vue-i18n';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useUISettings } from 'dashboard/composables/useUISettings';\nimport { useAlert } from 'dashboard/composables';\nimport { useMapGetter, useStore } from 'dashboard/composables/store.js';\nimport { useAccount } from 'dashboard/composables/useAccount';\nimport PortalSettings from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalSettings.vue';\n\nconst SSL_STATUS_FETCH_INTERVAL = 5000;\n\nconst { t } = useI18n();\nconst store = useStore();\nconst route = useRoute();\nconst router = useRouter();\nconst { isOnChatwootCloud } = useAccount();\n\nconst { updateUISettings } = useUISettings();\n\nconst portals = useMapGetter('portals/allPortals');\nconst isFetching = useMapGetter('portals/isFetchingPortals');\nconst getPortalBySlug = useMapGetter('portals/portalBySlug');\n\nconst getNextAvailablePortal = deletedPortalSlug =>\n  portals.value?.find(portal => portal.slug !== deletedPortalSlug) ?? null;\n\nconst getDefaultLocale = slug => {\n  return getPortalBySlug.value(slug)?.meta?.default_locale;\n};\n\nconst fetchSSLStatus = () => {\n  if (!isOnChatwootCloud.value) return;\n\n  const { portalSlug } = route.params;\n  store.dispatch('portals/sslStatus', {\n    portalSlug,\n  });\n};\n\nconst fetchPortalAndItsCategories = async (slug, locale) => {\n  const selectedPortalParam = { portalSlug: slug, locale };\n  await Promise.all([\n    store.dispatch('portals/index'),\n    store.dispatch('portals/show', selectedPortalParam),\n    store.dispatch('categories/index', selectedPortalParam),\n    store.dispatch('agents/get'),\n    store.dispatch('inboxes/get'),\n  ]);\n};\n\nconst updateRouteAfterDeletion = async deletedPortalSlug => {\n  const nextPortal = getNextAvailablePortal(deletedPortalSlug);\n  if (nextPortal) {\n    const {\n      slug,\n      meta: { default_locale: defaultLocale },\n    } = nextPortal;\n    await fetchPortalAndItsCategories(slug, defaultLocale);\n    router.push({\n      name: 'portals_articles_index',\n      params: { portalSlug: slug, locale: defaultLocale },\n    });\n  } else {\n    router.push({ name: 'portals_new' });\n  }\n};\n\nconst refreshPortalRoute = async (newSlug, defaultLocale) => {\n  // This is to refresh the portal route and update the UI settings\n  // If there is slug change, this will be called to refresh the route and UI settings\n  await fetchPortalAndItsCategories(newSlug, defaultLocale);\n  updateUISettings({\n    last_active_portal_slug: newSlug,\n    last_active_locale_code: defaultLocale,\n  });\n  await router.replace({\n    name: 'portals_settings_index',\n    params: { portalSlug: newSlug },\n  });\n};\n\nconst updatePortalSettings = async portalObj => {\n  const { portalSlug } = route.params;\n  try {\n    const defaultLocale = getDefaultLocale(portalSlug);\n    await store.dispatch('portals/update', {\n      ...portalObj,\n      portalSlug: portalSlug || portalObj?.slug,\n    });\n\n    // If there is a slug change, this will refresh the route and update the UI settings\n    if (portalObj?.slug && portalSlug !== portalObj.slug) {\n      await refreshPortalRoute(portalObj.slug, defaultLocale);\n    }\n    useAlert(\n      t('HELP_CENTER.PORTAL_SETTINGS.API.UPDATE_PORTAL.SUCCESS_MESSAGE')\n    );\n  } catch (error) {\n    useAlert(\n      error?.message ||\n        t('HELP_CENTER.PORTAL_SETTINGS.API.UPDATE_PORTAL.ERROR_MESSAGE')\n    );\n  }\n};\n\nconst deletePortal = async selectedPortalForDelete => {\n  const { slug } = selectedPortalForDelete;\n  try {\n    await store.dispatch('portals/delete', { portalSlug: slug });\n    await updateRouteAfterDeletion(slug);\n    useAlert(\n      t('HELP_CENTER.PORTAL.PORTAL_SETTINGS.DELETE_PORTAL.API.DELETE_SUCCESS')\n    );\n  } catch (error) {\n    useAlert(\n      error?.message ||\n        t('HELP_CENTER.PORTAL.PORTAL_SETTINGS.DELETE_PORTAL.API.DELETE_ERROR')\n    );\n  }\n};\n\nconst handleSendCnameInstructions = async payload => {\n  try {\n    await store.dispatch('portals/sendCnameInstructions', payload);\n    useAlert(\n      t(\n        'HELP_CENTER.PORTAL.PORTAL_SETTINGS.SEND_CNAME_INSTRUCTIONS.API.SUCCESS_MESSAGE'\n      )\n    );\n  } catch (error) {\n    useAlert(\n      error?.message ||\n        t(\n          'HELP_CENTER.PORTAL.PORTAL_SETTINGS.SEND_CNAME_INSTRUCTIONS.API.ERROR_MESSAGE'\n        )\n    );\n  }\n};\n\nconst handleUpdatePortal = updatePortalSettings;\nconst handleUpdatePortalConfiguration = portalObj => {\n  updatePortalSettings(portalObj);\n\n  // If custom domain is added or updated, fetch SSL status after a delay of 5 seconds (only on Chatwoot cloud)\n  if (portalObj?.custom_domain && isOnChatwootCloud.value) {\n    setTimeout(() => {\n      fetchSSLStatus();\n    }, SSL_STATUS_FETCH_INTERVAL);\n  }\n};\nconst handleDeletePortal = deletePortal;\n</script>\n\n<template>\n  <PortalSettings\n    :portals=\"portals\"\n    :is-fetching=\"isFetching\"\n    @update-portal=\"handleUpdatePortal\"\n    @update-portal-configuration=\"handleUpdatePortalConfiguration\"\n    @delete-portal=\"handleDeletePortal\"\n    @refresh-status=\"fetchSSLStatus\"\n    @send-cname-instructions=\"handleSendCnameInstructions\"\n  />\n</template>\n"],"names":["MAXIMUM_FILE_UPLOAD_SIZE","props","__props","emit","__emit","t","useI18n","store","useStore","getters","useStoreGetters","state","reactive","originalState","liveChatWidgets","computed","inbox","rules","required","minLength","helpers","isValidSlug","url","v$","useVuelidate","nameError","slugError","_a","homePageLinkError","isUpdatingPortal","slug","_b","watch","newVal","logoURL","blobId","hasChanges","handleUpdatePortal","portal","uploadLogoToStorage","file","fileUrl","uploadFile","useAlert","deleteLogo","portalSlug","error","handleAvatarUpload","checkFileSizeLimit","handleAvatarDelete","dialogRef","ref","formState","isValidDomain","handleDialogConfirm","__expose","email","domain","hostURL","helpCenterURL","getHostNameFromURL","subdomainCNAME","handleCopy","e","copyTextToClipboard","resetForm","onClose","handleSend","SSL_STATUS","isOnChatwootCloud","useAccount","addCustomDomainDialogRef","dnsConfigurationDialogRef","updatedDomainAddress","customDomainAddress","sslSettings","verificationErrors","isLive","isPending","isError","statusText","statusColors","updatePortalConfiguration","customDomain","closeDNSConfigurationDialog","onClickRefreshSSLStatus","onClickSend","route","useRoute","confirmDeletePortalDialogRef","currentPortalSlug","isSwitchingPortal","useMapGetter","isFetchingSSLStatus","activePortal","activePortalName","isLoading","handleUpdatePortalConfiguration","fetchSSLStatus","handleSendCnameInstructions","payload","openConfirmDeletePortalDialog","handleDeletePortal","SSL_STATUS_FETCH_INTERVAL","router","useRouter","updateUISettings","useUISettings","portals","isFetching","getPortalBySlug","getNextAvailablePortal","deletedPortalSlug","getDefaultLocale","fetchPortalAndItsCategories","locale","selectedPortalParam","updateRouteAfterDeletion","nextPortal","defaultLocale","refreshPortalRoute","newSlug","updatePortalSettings","portalObj","deletePortal","selectedPortalForDelete"],"mappings":"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"}