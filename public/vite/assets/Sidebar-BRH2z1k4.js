import{m as I}from"./globalConfig-DNoPylIh.js";import{f as s,w as B,A as H,a9 as K,aK as j,O as z,Y,X,a as P,h as D}from"./DashboardIcon-Pzi2HKUO.js";import{J as _,O as q,c as Z,$ as J,a0 as F,a1 as U,a2 as Q,I as tt,a3 as et,a4 as V,a5 as nt}from"./dashboard-CG5kupEZ.js";import{u as ot}from"./useKeyboardNavigableList-Yx0rleq4.js";import{u as st,a as at}from"./Validators-U_Z_leEu.js";import{_ as C,s as r,n as c,o as a,e as i,l as d,p as h,I as O,a as y,i as M,q as v,g as A,t as b,b as it,F as T,j as E,T as W,z as rt,v as lt,m as G,u as ct}from"./_plugin-vue_export-helper-BK9LWihk.js";import{u as ut,a as dt}from"./index-CGswmpo8.js";import{_ as $}from"./typing-DLDGfuj7.js";import{T as mt}from"./Thumbnail-CUjAwC9K.js";import"./exports-C7nQ38Rb.js";import"./js.cookie-Cz0CWeBA.js";import"./_commonjsHelpers-BosuxZz1.js";import"./utils.esm-B9vk9JJa.js";import"./index-BtuGy7By.js";import"./Icon-3PNIKml4.js";import"./index-b3F7WOf6.js";import"./index-DN3rM4CW.js";import"./helper-Dcp_UZ_y.js";import"./module-DBoux_do.js";import"./useMessageFormatter-BWcWDZNI.js";import"./BarChart-BoGmHJfn.js";import"./constants-lVAyZKq6.js";import"./IframeLoader-BEPMhpqZ.js";import"./vue-dompurify-html-DajrD5x3.js";const ht=t=>({parentNav:"conversations",routes:["home","inbox_dashboard","inbox_conversation","conversation_through_inbox","notifications_dashboard","label_conversations","conversations_through_label","team_conversations","conversations_through_team","conversation_mentions","conversation_through_mentions","conversation_participating","conversation_through_participating","folder_conversations","conversations_through_folders","conversation_unattended","conversation_through_unattended"],menuItems:[{icon:"chat",label:"ALL_CONVERSATIONS",key:"conversations",toState:s(`accounts/${t}/dashboard`),toolTip:"Conversation from all subscribed inboxes",toStateName:"home"},{icon:"mention",label:"MENTIONED_CONVERSATIONS",key:"conversation_mentions",toState:s(`accounts/${t}/mentions/conversations`),toStateName:"conversation_mentions"},{icon:"mail-unread",label:"UNATTENDED_CONVERSATIONS",key:"conversation_unattended",toState:s(`accounts/${t}/unattended/conversations`),toStateName:"conversation_unattended"}]}),_t=t=>({parentNav:"contacts",routes:["contacts_dashboard_index","contacts_dashboard_segments_index","contacts_dashboard_labels_index","contacts_edit","contacts_edit_segment","contacts_edit_label"],menuItems:[{icon:"contact-card-group",label:"ALL_CONTACTS",hasSubMenu:!1,toState:s(`accounts/${t}/contacts?page=1`),toStateName:"contacts_dashboard_index"}]}),pt=t=>({parentNav:"reports",routes:["account_overview_reports","conversation_reports","csat_reports","bot_reports","agent_reports","label_reports","inbox_reports","team_reports","sla_reports","kanban_reports","inbox_reports_show"],menuItems:[{icon:"arrow-trending-lines",label:"REPORTS_OVERVIEW",hasSubMenu:!1,toState:s(`accounts/${t}/reports/overview`),toStateName:"account_overview_reports"},{icon:"chat",label:"REPORTS_CONVERSATION",hasSubMenu:!1,toState:s(`accounts/${t}/reports/conversation`),toStateName:"conversation_reports"},{icon:"emoji",label:"CSAT",hasSubMenu:!1,toState:s(`accounts/${t}/reports/csat`),toStateName:"csat_reports"},{icon:"bot",label:"REPORTS_BOT",hasSubMenu:!1,featureFlag:_.RESPONSE_BOT,toState:s(`accounts/${t}/reports/bot`),toStateName:"bot_reports"},{icon:"people",label:"REPORTS_AGENT",hasSubMenu:!1,toState:s(`accounts/${t}/reports/agent`),toStateName:"agent_reports"},{icon:"tag",label:"REPORTS_LABEL",hasSubMenu:!1,toState:s(`accounts/${t}/reports/label`),toStateName:"label_reports"},{icon:"mail-inbox-all",label:"REPORTS_INBOX",hasSubMenu:!1,toState:s(`accounts/${t}/reports/inboxes`),toStateName:"inbox_reports"},{icon:"people-team",label:"REPORTS_TEAM",hasSubMenu:!1,toState:s(`accounts/${t}/reports/teams`),toStateName:"team_reports"},{icon:"document-list-clock",label:"REPORTS_SLA",hasSubMenu:!1,featureFlag:_.SLA,toState:s(`accounts/${t}/reports/sla`),toStateName:"sla_reports"},{icon:"task",label:"REPORTS_KANBAN",hasSubMenu:!1,toState:s(`accounts/${t}/reports/kanban`),toStateName:"kanban_reports"}]}),gt=t=>({parentNav:"campaigns",routes:["campaigns_sms_index","campaigns_livechat_index"],menuItems:[{icon:"arrow-swap",label:"LIVE_CHAT",key:"ongoingCampaigns",hasSubMenu:!1,toState:s(`accounts/${t}/campaigns/live_chat`),toStateName:"campaigns_livechat_index"},{key:"oneOffCampaigns",icon:"sound-source",label:"SMS",hasSubMenu:!1,toState:s(`accounts/${t}/campaigns/sms`),toStateName:"campaigns_sms_index"}]}),bt=t=>({parentNav:"settings",routes:["agent_bots","agent_list","attributes_list","automation_list","auditlogs_list","billing_settings_index","canned_list","general_settings_index","general_settings","labels_list","macros_edit","macros_new","macros_wrapper","settings_applications_integration","settings_applications_webhook","settings_applications","settings_inbox_finish","settings_inbox_list","settings_inbox_new","settings_inbox_show","settings_inboxes_add_agents","settings_inboxes_page_channel","settings_integrations_dashboard_apps","settings_integrations_integration","settings_integrations_slack","settings_integrations_webhook","settings_integrations","settings_teams_add_agents","settings_teams_edit_finish","settings_teams_edit_members","settings_teams_edit","settings_teams_finish","settings_teams_list","settings_teams_new","sla_list","custom_roles_list"],menuItems:[{icon:"briefcase",label:"ACCOUNT_SETTINGS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/general`),toStateName:"general_settings_index"},{icon:"people",label:"AGENTS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/agents/list`),toStateName:"agent_list",featureFlag:_.AGENT_MANAGEMENT},{icon:"people-team",label:"TEAMS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/teams/list`),toStateName:"settings_teams_list",featureFlag:_.TEAM_MANAGEMENT},{icon:"mail-inbox-all",label:"INBOXES",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/inboxes/list`),toStateName:"settings_inbox_list",featureFlag:_.INBOX_MANAGEMENT},{icon:"tag",label:"LABELS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/labels/list`),toStateName:"labels_list",featureFlag:_.LABELS},{icon:"code",label:"CUSTOM_ATTRIBUTES",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/custom-attributes/list`),toStateName:"attributes_list",featureFlag:_.CUSTOM_ATTRIBUTES},{icon:"automation",label:"AUTOMATION",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/automation/list`),toStateName:"automation_list",featureFlag:_.AUTOMATIONS},{icon:"bot",label:"AGENT_BOTS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/agent-bots`),toStateName:"agent_bots",featureFlag:_.AGENT_BOTS},{icon:"flash-settings",label:"MACROS",hasSubMenu:!1,meta:{permissions:["administrator","agent"]},toState:s(`accounts/${t}/settings/macros`),toStateName:"macros_wrapper",featureFlag:_.MACROS},{icon:"chat-multiple",label:"CANNED_RESPONSES",hasSubMenu:!1,meta:{permissions:["administrator","agent"]},toState:s(`accounts/${t}/settings/canned-response/list`),toStateName:"canned_list",featureFlag:_.CANNED_RESPONSES},{icon:"flash-on",label:"INTEGRATIONS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/integrations`),toStateName:"settings_applications",featureFlag:_.INTEGRATIONS},{icon:"key",label:"AUDIT_LOGS",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/audit-logs/list`),toStateName:"auditlogs_list",isEnterpriseOnly:!0,featureFlag:_.AUDIT_LOGS},{icon:"scan-person",label:"CUSTOM_ROLES",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/custom-roles/list`),toStateName:"custom_roles_list",isEnterpriseOnly:!0,beta:!0},{icon:"document-list-clock",label:"SLA",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/sla/list`),toStateName:"sla_list",isEnterpriseOnly:!0,featureFlag:_.SLA,beta:!0},{icon:"credit-card-person",label:"BILLING",hasSubMenu:!1,meta:{permissions:["administrator"]},toState:s(`accounts/${t}/settings/billing`),toStateName:"billing_settings_index",showOnlyOnCloud:!0}]}),ft=()=>({parentNav:"notifications",routes:["notifications_index"],menuItems:[]}),St=t=>[{icon:"mail-inbox",key:"inboxView",label:"INBOX_VIEW",featureFlag:_.INBOX_VIEW,toState:s(`accounts/${t}/inbox-view`),toStateName:"inbox_view"},{icon:"chat",key:"conversations",label:"CONVERSATIONS",toState:s(`accounts/${t}/dashboard`),toStateName:"home"},{icon:"task",key:"kanban_board",label:"KANBAN_BOARD",featureFlag:"kanban_board",toState:s(`accounts/${t}/kanban`),toStateName:"kanban_board"},{icon:"captain",key:"captain",label:"CAPTAIN",featureFlag:_.CAPTAIN,toState:s(`accounts/${t}/captain/documents`),toStateName:"captain"},{icon:"book-contacts",key:"contacts",label:"CONTACTS",featureFlag:_.CRM,toState:s(`accounts/${t}/contacts`),toStateName:"contacts_dashboard_index"},{icon:"arrow-trending-lines",key:"reports",label:"REPORTS",featureFlag:_.REPORTS,toState:s(`accounts/${t}/reports`),toStateName:"account_overview_reports"},{icon:"megaphone",key:"campaigns",label:"CAMPAIGNS",featureFlag:_.CAMPAIGNS,toState:s(`accounts/${t}/campaigns`),toStateName:"campaigns_ongoing_index"},{icon:"library",key:"helpcenter",label:"HELP_CENTER.TITLE",featureFlag:_.HELP_CENTER,alwaysVisibleOnChatwootInstances:!0,toState:s(`accounts/${t}/portals/portal_articles_index`),toStateName:"portals_index"},{icon:"settings",key:"settings",label:"SETTINGS",toState:s(`accounts/${t}/settings`),toStateName:"settings_home"}],wt=t=>({parentNav:"dashboardApps",routes:["dashboard_apps_show","dashboard_apps_index"],menuItems:[],getMenuItems:o=>o.filter(e=>e.show_in_navigation).map(e=>({icon:"link",label:e.title,key:`app_${e.id}`,toState:s(`accounts/${t}/dashboard_apps/${e.id}`),toStateName:"dashboard_apps_show"}))}),At=t=>({primaryMenu:St(t),secondaryMenu:[ht(t),wt(t),_t(t),pt(t),gt(t),bt(t),ft()]}),yt={props:{source:{type:String,default:""},name:{type:String,default:""},accountId:{type:Number,default:0}},computed:{dashboardPath(){return s(`accounts/${this.accountId}/dashboard`)}}},vt={class:"w-8 h-8"},Ct=["src","alt"];function xt(t,o,e,p,f,n){const m=r("router-link");return a(),c("div",vt,[i(m,{to:n.dashboardPath,replace:""},{default:d(()=>[h("img",{src:e.source,alt:e.name},null,8,Ct)]),_:1},8,["to"])])}const Nt=C(yt,[["render",xt]]),It={components:{DropdownMenu:Z,OnClickOutside:q},props:{to:{type:String,default:""},id:{type:String,default:""},name:{type:String,default:""},icon:{type:String,default:""},count:{type:String,default:""},isChildMenuActive:{type:Boolean,default:!1},openInNewPage:{type:Boolean,default:!1}},data(){return{helpCenterMenu:J,showHelpCenterMenu:!1}},computed:{helpCenterMenuItems(){return this.helpCenterMenu.map(t=>({...t,isSelected:this.isSelectedMenuItem(t)}))},isHelpCenter(){return this.id==="helpcenter"},isHelpCenterSelected(){return["portals_new","portals_index","portals_articles_index","portals_articles_new","portals_articles_edit","portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit","portals_locales_index","portals_settings_index"].includes(this.$route.name)}},methods:{isSelectedMenuItem(t){return t.value.includes(this.$route.name)},toggleHelpCenterMenu(){this.showHelpCenterMenu=!this.showHelpCenterMenu},handleHelpCenterAction({action:t}){this.$router.push({name:"portals_index",params:{navigationPath:t}})}}},kt=["href","rel","target","onClick"],Mt={class:"sr-only"},Tt={key:0,class:"absolute bg-yellow-500 text-black-900 -top-1 -right-1"};function Et(t,o,e,p,f,n){const m=r("fluent-icon"),l=r("DropdownMenu"),u=r("OnClickOutside"),x=r("router-link"),S=O("tooltip");return n.isHelpCenter?(a(),y(u,{key:0,onTrigger:o[1]||(o[1]=g=>f.showHelpCenterMenu=!1)},{default:d(()=>[M((a(),c("button",{class:v(["relative flex items-center justify-center w-10 h-10 my-2 rounded-lg text-slate-700 dark:text-slate-100 hover:!bg-slate-25 dark:hover:!bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",{"bg-woot-50 dark:bg-slate-800 text-woot-500 hover:bg-woot-50":n.isHelpCenterSelected}]),onClick:o[0]||(o[0]=(...g)=>n.toggleHelpCenterMenu&&n.toggleHelpCenterMenu(...g))},[i(m,{icon:e.icon,class:v({"text-woot-500":n.isHelpCenterSelected})},null,8,["icon","class"]),f.showHelpCenterMenu&&n.isHelpCenter?(a(),y(l,{key:0,"menu-items":n.helpCenterMenuItems,class:"ltr:left-10 rtl:right-10 w-36 z-[100] top-0 overflow-y-auto max-h-52",onAction:n.handleHelpCenterAction},null,8,["menu-items","onAction"])):A("",!0)],2)),[[S,t.$t(`SIDEBAR.${e.name}`),void 0,{top:!0}]])]),_:1})):(a(),y(x,{key:1,to:e.to,custom:""},{default:d(({href:g,isActive:N,navigate:w})=>[M((a(),c("a",{href:g,class:v(["relative flex items-center justify-center w-10 h-10 my-2 rounded-lg text-slate-700 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",{"bg-woot-50 dark:bg-slate-800 text-woot-500 hover:bg-woot-50":N||e.isChildMenuActive}]),rel:e.openInNewPage?"noopener noreferrer nofollow":void 0,target:e.openInNewPage?"_blank":void 0,onClick:w},[i(m,{icon:e.icon,class:v({"text-woot-500":N||e.isChildMenuActive})},null,8,["icon","class"]),h("span",Mt,b(e.name),1),e.count?(a(),c("span",Tt,b(e.count),1)):A("",!0)],10,kt)),[[S,t.$t(`SIDEBAR.${e.name}`),void 0,{right:!0}]])]),_:1},8,["to"]))}const Ot=C(It,[["render",Et]]),$t={componentName:"WootDropdownMenu",props:{title:{type:String,default:""}}},Lt={class:"inline-flex list-none",tabindex:null,"aria-disabled":!0},Rt={class:"text-xs text-slate-600 dark:text-slate-100 mt-1 font-medium w-full block text-left rtl:text-right whitespace-nowrap p-2"};function Bt(t,o,e,p,f,n){return a(),c("li",Lt,[h("span",Rt,b(e.title),1),it(t.$slots,"default")])}const Pt=C($t,[["render",Bt]]),Dt={},Ft={class:"list-none my-1 mx-0 border-b border-slate-50 dark:border-slate-700",tabindex:null,"aria-disabled":!0};function Ut(t,o,e,p,f,n){return a(),c("li",Ft)}const Vt=C(Dt,[["render",Ut]]),Wt={props:{status:{type:String,default:""}}};function Gt(t,o,e,p,f,n){return a(),c("div",{class:v(`status-badge status-badge__${e.status} rounded-full w-2.5 h-2.5 mr-0.5 rtl:mr-0 rtl:ml-0.5 inline-flex`)},null,2)}const Ht=C(Wt,[["render",Gt],["__scopeId","data-v-442d1ee5"]]),{AVAILABILITY_STATUS_KEYS:R}=B,Kt={components:{WootDropdownHeader:Pt,WootDropdownDivider:Vt,WootDropdownMenu:U,WootDropdownItem:F,AvailabilityStatusBadge:Ht,NextButton:$},data(){return{isStatusMenuOpened:!1,isUpdating:!1}},computed:{...I({getCurrentUserAvailability:"getCurrentUserAvailability",currentAccountId:"getCurrentAccountId",currentUserAutoOffline:"getCurrentUserAutoOffline"}),statusList(){return[this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]},availabilityDisplayLabel(){const t=R.findIndex(o=>o===this.currentUserAvailability);return this.statusList[t]},currentUserAvailability(){return this.getCurrentUserAvailability},availabilityStatuses(){return this.statusList.map((t,o)=>({label:t,value:R[o],disabled:this.currentUserAvailability===R[o]}))}},methods:{openStatusMenu(){this.isStatusMenuOpened=!0},closeStatusMenu(){this.isStatusMenuOpened=!1},updateAutoOffline(t){this.$store.dispatch("updateAutoOffline",{accountId:this.currentAccountId,autoOffline:t})},changeAvailabilityStatus(t){if(!this.isUpdating){this.isUpdating=!0;try{this.$store.dispatch("updateAvailability",{availability:t,account_id:this.currentAccountId})}catch{ut(this.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}finally{this.isUpdating=!1}}}}},jt={class:"min-w-0 truncate font-medium text-xs"},zt={class:"flex items-center"},Yt={class:"mx-2 my-0 text-xs font-medium text-slate-600 dark:text-slate-100"};function Xt(t,o,e,p,f,n){const m=r("WootDropdownHeader"),l=r("AvailabilityStatusBadge"),u=r("NextButton"),x=r("WootDropdownItem"),S=r("WootDropdownDivider"),g=r("fluent-icon"),N=r("woot-switch"),w=r("WootDropdownMenu"),L=O("tooltip");return a(),y(w,null,{default:d(()=>[i(m,{title:t.$t("SIDEBAR.SET_AVAILABILITY_TITLE")},null,8,["title"]),(a(!0),c(T,null,E(n.availabilityStatuses,k=>(a(),y(x,{key:k.value,class:"flex items-baseline"},{default:d(()=>[i(u,{sm:"",color:k.disabled?"blue":"slate",variant:k.disabled?"faded":"ghost",class:"status-change--dropdown-button !w-full !justify-start",onClick:on=>n.changeAvailabilityStatus(k.value)},{default:d(()=>[i(l,{status:k.value},null,8,["status"]),h("span",jt,b(k.label),1)]),_:2},1032,["color","variant","onClick"])]),_:2},1024))),128)),i(S),i(x,{class:"flex items-center justify-between px-3 py-2 m-0"},{default:d(()=>[h("div",zt,[M(i(g,{icon:"info",size:"14",class:"mt-px"},null,512),[[L,t.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_TEXT"),void 0,{"right-start":!0}]]),h("span",Yt,b(t.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT")),1)]),i(N,{size:"small",class:"mx-1 mt-px mb-0","model-value":t.currentUserAutoOffline,onInput:n.updateAutoOffline},null,8,["model-value","onInput"])]),_:1}),i(S)]),_:1})}const qt=C(Kt,[["render",Xt]]),Zt={components:{WootDropdownMenu:U,WootDropdownItem:F,AvailabilityStatus:qt,NextButton:$},props:{show:{type:Boolean,default:!1}},emits:["close","openKeyShortcutModal","toggleAccounts","showSupportChatWindow"],computed:{...I({currentUser:"getCurrentUser",globalConfig:"globalConfig/get",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),showChangeAccountOption(){if(this.globalConfig.createNewAccountFromDashboard)return!0;const{accounts:t=[]}=this.currentUser;return t.length>1},showChatSupport(){return this.isFeatureEnabledonAccount(this.accountId,_.CONTACT_CHATWOOT_SUPPORT_TEAM)&&this.globalConfig.chatwootInboxToken}},methods:{handleProfileSettingClick(t,o){this.$emit("close"),o(t)},handleKeyboardHelpClick(){this.$emit("openKeyShortcutModal"),this.$emit("close")},logout(){H.logout()},onClickAway(){this.show&&this.$emit("close")},openAppearanceOptions(){document.querySelector("ninja-keys").open({parent:"appearance_settings"})}}},Jt={class:"min-w-0 truncate font-medium text-xs"},Qt={class:"min-w-0 truncate font-medium text-xs"},te={class:"min-w-0 truncate font-medium text-xs"},ee=["href","onClick"],ne={class:"min-w-0 truncate font-medium text-xs"},oe={class:"min-w-0 truncate font-medium text-xs"},se={class:"min-w-0 truncate font-medium text-xs"},ae={class:"min-w-0 truncate font-medium text-xs"};function ie(t,o,e,p,f,n){const m=r("AvailabilityStatus"),l=r("NextButton"),u=r("WootDropdownItem"),x=r("router-link"),S=r("WootDropdownMenu"),g=O("on-clickaway");return a(),y(W,{name:"menu-slide"},{default:d(()=>[e.show?M((a(),c("div",{key:0,class:v(["absolute z-30 w-64 px-2 py-2 bg-white border rounded-md shadow-xl left-3 rtl:left-auto rtl:right-3 bottom-16 dark:bg-slate-800 border-slate-25 dark:border-slate-700",{"block visible":e.show}])},[i(m),i(S,null,{default:d(()=>[n.showChangeAccountOption?(a(),y(u,{key:0},{default:d(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-arrow-right-left",class:"!w-full !justify-start",onClick:o[0]||(o[0]=N=>t.$emit("toggleAccounts"))},{default:d(()=>[h("span",Jt,b(t.$t("SIDEBAR_ITEMS.CHANGE_ACCOUNTS")),1)]),_:1})]),_:1})):A("",!0),n.showChatSupport?(a(),y(u,{key:1},{default:d(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-message-circle-question",class:"!w-full !justify-start",onClick:o[1]||(o[1]=N=>t.$emit("showSupportChatWindow"))},{default:d(()=>[h("span",Qt,b(t.$t("SIDEBAR_ITEMS.CONTACT_SUPPORT")),1)]),_:1})]),_:1})):A("",!0),i(u,null,{default:d(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-keyboard",class:"!w-full !justify-start",onClick:n.handleKeyboardHelpClick},{default:d(()=>[h("span",te,b(t.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")),1)]),_:1},8,["onClick"])]),_:1}),i(u,null,{default:d(()=>[i(x,{to:`/app/accounts/${t.accountId}/profile/settings`,custom:""},{default:d(({href:N,isActive:w,navigate:L})=>[h("a",{href:N,class:v({"is-active":w}),onClick:k=>n.handleProfileSettingClick(k,L)},[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-circle-user",class:"!w-full !justify-start"},{default:d(()=>[h("span",ne,b(t.$t("SIDEBAR_ITEMS.PROFILE_SETTINGS")),1)]),_:1})],10,ee)]),_:1},8,["to"])]),_:1}),i(u,null,{default:d(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-sun-moon",class:"!w-full !justify-start",onClick:n.openAppearanceOptions},{default:d(()=>[h("span",oe,b(t.$t("SIDEBAR_ITEMS.APPEARANCE")),1)]),_:1},8,["onClick"])]),_:1}),t.currentUser.type==="SuperAdmin"?(a(),y(u,{key:2},{default:d(()=>[h("a",{href:"/super_admin",target:"_blank",rel:"noopener nofollow noreferrer",onClick:o[2]||(o[2]=N=>t.$emit("close"))},[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-layout-dashboard",class:"!w-full !justify-start"},{default:d(()=>[h("span",se,b(t.$t("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE")),1)]),_:1})])]),_:1})):A("",!0),i(u,null,{default:d(()=>[i(l,{ghost:"",sm:"",slate:"",icon:"i-lucide-circle-power",class:"!w-full !justify-start",onClick:n.logout},{default:d(()=>[h("span",ae,b(t.$t("SIDEBAR_ITEMS.LOGOUT")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})],2)),[[g,n.onClickAway]]):A("",!0)]),_:1})}const re=C(Zt,[["render",ie]]),le={components:{Thumbnail:mt,NextButton:$},emits:["toggleMenu"],computed:{...I({currentUser:"getCurrentUser",currentUserAvailability:"getCurrentUserAvailability"}),statusOfAgent(){return this.currentUserAvailability||"offline"}},methods:{handleClick(){this.$emit("toggleMenu")}}};function ce(t,o,e,p,f,n){const m=r("Thumbnail"),l=r("NextButton"),u=O("tooltip");return M((a(),y(l,{link:"",class:"rounded-full",onClick:n.handleClick},{default:d(()=>[i(m,{src:t.currentUser.avatar_url,username:t.currentUser.name,status:n.statusOfAgent,"should-show-status-always":"",size:"32px",class:"flex-shrink-0"},null,8,["src","username","status"])]),_:1},8,["onClick"])),[[u,t.$t("SIDEBAR.PROFILE_SETTINGS"),void 0,{right:!0}]])}const ue=C(le,[["render",ce]]),de={emits:["openNotificationPanel"],computed:{...I({notificationMetadata:"notifications/getMeta"}),unreadCount(){return this.notificationMetadata.unreadCount?this.notificationMetadata.unreadCount<100?`${this.notificationMetadata.unreadCount}`:"99+":""},isNotificationPanelActive(){return this.$route.name==="notifications_index"}},methods:{openNotificationPanel(){this.$route.name!=="notifications_index"&&this.$emit("openNotificationPanel")}}},me={class:"mb-4"},he={key:0,class:"text-black-900 bg-yellow-300 absolute -top-0.5 -right-1 text-xxs min-w-[1rem] rounded-full"};function _e(t,o,e,p,f,n){const m=r("fluent-icon");return a(),c("div",me,[h("button",{class:v(["relative flex items-center justify-center w-10 h-10 p-0 my-2 rounded-lg text-slate-600 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",{"bg-woot-50 dark:bg-slate-800 text-woot-500 hover:bg-woot-50":n.isNotificationPanelActive}]),onClick:o[0]||(o[0]=(...l)=>n.openNotificationPanel&&n.openNotificationPanel(...l))},[i(m,{icon:"alert",class:v({"text-woot-500":n.isNotificationPanelActive})},null,8,["class"]),n.unreadCount?(a(),c("span",he,b(n.unreadCount),1)):A("",!0)],2)])}const pe=C(de,[["render",_e]]),ge={components:{Logo:Nt,PrimaryNavItem:Ot,OptionsMenu:re,AgentDetails:ue,NotificationBell:pe},props:{isACustomBrandedInstance:{type:Boolean,default:!1},logoSource:{type:String,default:""},installationName:{type:String,default:""},accountId:{type:Number,default:0},menuItems:{type:Array,default:()=>[]},activeMenuItem:{type:String,default:""}},computed:{...I({navigationApps:"dashboardApps/getNavigationApps"})},emits:["toggleAccounts","openNotificationPanel","openKeyShortcutModal"],data(){return{helpDocsURL:B.DOCS_URL,showOptionsMenu:!1}},methods:{frontendURL:s,toggleOptions(){this.showOptionsMenu=!this.showOptionsMenu},toggleAccountModal(){this.$emit("toggleAccounts")},toggleSupportChatWindow(){window.$chatwoot.toggle()},openNotificationPanel(){dt(K.OPENED_NOTIFICATIONS),this.$emit("openNotificationPanel")}}},be={class:"flex flex-col justify-between w-16 h-full bg-white border-r dark:bg-slate-900 border-slate-50 dark:border-slate-800/50 rtl:border-l rtl:border-r-0"},fe={class:"flex flex-col items-center"},Se={class:"flex flex-col items-center justify-end pb-6"},we=["href"],Ae={class:"sr-only"};function ye(t,o,e,p,f,n){const m=r("Logo"),l=r("PrimaryNavItem"),u=r("fluent-icon"),x=r("NotificationBell"),S=r("AgentDetails"),g=r("OptionsMenu"),N=O("tooltip");return a(),c("div",be,[h("div",fe,[i(m,{source:e.logoSource,name:e.installationName,"account-id":e.accountId,class:"m-4 mb-10"},null,8,["source","name","account-id"]),(a(!0),c(T,null,E(e.menuItems,w=>(a(),y(l,{id:w.key,key:w.toState,icon:w.icon,name:w.label,to:w.toState,"is-child-menu-active":w.key===e.activeMenuItem},null,8,["id","icon","name","to","is-child-menu-active"]))),128)),(a(!0),c(T,null,E(t.navigationApps,w=>(a(),y(l,{key:"app_"+w.id,icon:w.icon,name:w.title,to:n.frontendURL(`accounts/${e.accountId}/dashboard_apps/${w.id}`)},null,8,["icon","name","to"]))),128))]),h("div",Se,[e.isACustomBrandedInstance?A("",!0):M((a(),c("a",{key:0,href:f.helpDocsURL,class:"relative flex items-center justify-center w-10 h-10 my-2 rounded-lg text-slate-700 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-700 dark:hover:text-slate-100 hover:text-slate-600",rel:"noopener noreferrer nofollow",target:"_blank"},[i(u,{icon:"book-open-globe"}),h("span",Ae,b(t.$t("SIDEBAR.DOCS")),1)],8,we)),[[N,t.$t("SIDEBAR.DOCS"),void 0,{right:!0}]]),i(x,{onOpenNotificationPanel:n.openNotificationPanel},null,8,["onOpenNotificationPanel"]),i(S,{onToggleMenu:n.toggleOptions},null,8,["onToggleMenu"]),i(g,{show:f.showOptionsMenu,onToggleAccounts:n.toggleAccountModal,onShowSupportChatWindow:n.toggleSupportChatWindow,onOpenKeyShortcutModal:o[0]||(o[0]=w=>t.$emit("openKeyShortcutModal")),onClose:n.toggleOptions},null,8,["show","onToggleAccounts","onShowSupportChatWindow","onClose"])])])}const ve=C(ge,[["render",ye]]),Ce={props:{to:{type:String,default:""},label:{type:String,default:""},labelColor:{type:String,default:""},shouldTruncate:{type:Boolean,default:!1},icon:{type:String,default:""},warningIcon:{type:String,default:""},showChildCount:{type:Boolean,default:!1},childItemCount:{type:Number,default:0}},computed:{showIcon(){return{"overflow-hidden whitespace-nowrap text-ellipsis":this.shouldTruncate}},isCountZero(){return this.childItemCount===0},menuTitle(){return this.shouldTruncate?this.label:""}}},xe=["onClick"],Ne=["href"],Ie={key:0,class:"inline-flex items-center justify-center w-4 rounded-sm bg-slate-100 dark:bg-slate-700 p-0.5 mr-1.5 rtl:mr-0 rtl:ml-1.5"},ke={class:"items-center flex overflow-hidden whitespace-nowrap text-ellipsis w-full justify-between"},Me=["title"],Te={key:2,class:"inline-flex mr-1 bg-red-50 dark:bg-red-900 p-0.5 rounded-sm"};function Ee(t,o,e,p,f,n){const m=r("fluent-icon"),l=r("router-link"),u=O("tooltip");return a(),y(l,{to:e.to,custom:"","active-class":"active"},{default:d(({href:x,isActive:S,navigate:g})=>[h("li",{class:v(["h-7 my-1 hover:bg-slate-25 hover:text-bg-50 flex items-center px-2 rounded-md dark:hover:bg-slate-800",{"bg-woot-25 dark:bg-slate-800":S,"text-ellipsis overflow-hidden whitespace-nowrap max-w-full":e.shouldTruncate}]),onClick:g},[h("a",{href:x,class:"inline-flex text-left max-w-full w-full items-center"},[e.icon?(a(),c("span",Ie,[i(m,{class:v(["text-xxs text-slate-700 dark:text-slate-200",{"text-woot-500 dark:text-woot-500":S}]),icon:e.icon,size:"12"},null,8,["class","icon"])])):A("",!0),e.labelColor?(a(),c("span",{key:1,class:"inline-flex rounded-sm bg-slate-100 h-3 w-3.5 mr-1.5 rtl:mr-0 rtl:ml-1.5 border border-slate-50 dark:border-slate-900",style:rt({backgroundColor:e.labelColor})},null,4)):A("",!0),h("div",ke,[h("span",{title:n.menuTitle,class:v(["text-sm text-slate-700 dark:text-slate-100",{"text-woot-500 dark:text-woot-500":S,"text-ellipsis overflow-hidden whitespace-nowrap max-w-full":e.shouldTruncate}])},b(e.label),11,Me),e.showChildCount?(a(),c("span",{key:0,class:v(["bg-slate-50 dark:bg-slate-700 rounded-full min-w-[18px] justify-center items-center flex text-xxs mx-1 py-0 px-1",n.isCountZero?"text-slate-300 dark:text-slate-500":"text-slate-700 dark:text-slate-50"])},b(e.childItemCount),3)):A("",!0)]),e.warningIcon?(a(),c("span",Te,[M(i(m,{class:"text-xxs text-red-500 dark:text-red-300",icon:e.warningIcon,size:"12"},null,8,["icon"]),[[u,t.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]])])):A("",!0)],8,Ne)],10,xe)]),_:1},8,["to"])}const Oe=C(Ce,[["render",Ee]]),$e={components:{SecondaryChildNavItem:Oe,Policy:Q,NextButton:$},props:{menuItem:{type:Object,default:()=>({})}},emits:["addLabel","open"],setup(){const{isAdmin:t}=tt(),{isEnterprise:o}=et();return{isAdmin:t,isEnterprise:o}},computed:{...I({activeInbox:"getSelectedInbox",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",globalConfig:"globalConfig/get"}),isCountZero(){return this.menuItem.count===0},isActiveView(){return this.computedClass.includes("active-view")},hasSubMenu(){return!!this.menuItem.children},isMenuItemVisible(){let t=!0;return this.menuItem.featureFlag&&(t=this.isFeatureEnabledonAccount(this.accountId,this.menuItem.featureFlag)),this.menuItem.isEnterpriseOnly?this.isEnterprise?t||this.globalConfig.displayManifest:!1:this.menuItem.featureFlag?this.isFeatureEnabledonAccount(this.accountId,this.menuItem.featureFlag):t},isAllConversations(){return this.$store.state.route.name==="inbox_conversation"&&this.menuItem.toStateName==="home"},isMentions(){return X({route:this.$route})&&this.menuItem.toStateName==="conversation_mentions"},isUnattended(){return Y({route:this.$route})&&this.menuItem.toStateName==="conversation_unattended"},isTeamsSettings(){return this.$store.state.route.name==="settings_teams_edit"&&this.menuItem.toStateName==="settings_teams_list"},isInboxSettings(){return this.$route.name==="settings_inbox_show"&&this.menuItem.toStateName==="settings_inbox_list"},isIntegrationsSettings(){return this.$store.state.route.name==="settings_integrations_webhook"&&this.menuItem.toStateName==="settings_integrations"},isApplicationsSettings(){return this.$store.state.route.name==="settings_applications_integration"&&this.menuItem.toStateName==="settings_applications"},isContactsDefaultRoute(){return this.menuItem.toStateName==="contacts_dashboard_index"&&(this.$store.state.route.name==="contacts_dashboard_index"||this.$store.state.route.name==="contacts_edit")},isCurrentRoute(){return this.$store.state.route.name.includes(this.menuItem.toStateName)},computedClass(){return this.activeInbox?" ":this.isAllConversations||this.isMentions||this.isUnattended||this.isContactsDefaultRoute||this.isCurrentRoute||this.hasSubMenu&&(this.isTeamsSettings||this.isInboxSettings||this.isIntegrationsSettings||this.isApplicationsSettings)?"bg-woot-25 dark:bg-slate-800 text-woot-500 dark:text-woot-500 hover:text-woot-500 dark:hover:text-woot-500 active-view":"hover:text-slate-700 dark:hover:text-slate-100"}},methods:{computedInboxClass(t){const{type:o,phoneNumber:e}=t;return o?z(o,e):""},computedInboxErrorClass(t){const{type:o,reauthorizationRequired:e}=t;return o?j(o,e):""},newLinkClick(t,o){this.menuItem.newLinkRouteName?o(t):this.menuItem.showModalForNewItem&&this.menuItem.modalName==="AddLabel"&&(t.preventDefault(),this.$emit("addLabel"))},showItem(t){return this.isAdmin&&!!t.newLink},onClickOpen(){this.$emit("open")},showChildCount(t){return Number.isInteger(t)}}},Le={class:"mt-1"},Re={key:0,class:"flex justify-between"},Be={class:"px-2 pt-1 my-2 text-sm font-semibold text-slate-700 dark:text-slate-200"},Pe={key:0,class:"flex items-center"},De={key:1,"data-view-component":"true",label:"Beta",class:"inline-block px-1 mx-1 leading-4 text-green-500 border border-green-400 rounded-lg text-xxs"},Fe={key:2,class:"list-none reset-base"},Ue={class:"pl-1"},Ve=["href"];function We(t,o,e,p,f,n){const m=r("NextButton"),l=r("fluent-icon"),u=r("router-link"),x=r("SecondaryChildNavItem"),S=r("Policy");return M((a(),c("li",Le,[n.hasSubMenu?(a(),c("div",Re,[h("span",Be,b(t.$t(`SIDEBAR.${e.menuItem.label}`)),1),e.menuItem.showNewButton?(a(),c("div",Pe,[i(m,{ghost:"",xs:"",slate:"",icon:"i-lucide-plus",onClick:n.onClickOpen},null,8,["onClick"])])):A("",!0)])):(a(),y(u,{key:1,class:v(["flex items-center p-2 m-0 text-sm leading-4 rounded-lg text-slate-700 dark:text-slate-100 hover:bg-slate-25 dark:hover:bg-slate-800",n.computedClass]),to:e.menuItem&&e.menuItem.toState},{default:d(()=>[i(l,{icon:e.menuItem.icon,class:"min-w-[1rem] mr-1.5 rtl:mr-0 rtl:ml-1.5",size:"14"},null,8,["icon"]),G(" "+b(t.$t(`SIDEBAR.${e.menuItem.label}`))+" ",1),n.showChildCount(e.menuItem.count)?(a(),c("span",{key:0,class:v(["px-1 py-0 mx-1 rounded-md text-xxs",{"text-slate-300 dark:text-slate-600":n.isCountZero&&!n.isActiveView,"text-slate-600 dark:text-slate-50":!n.isCountZero&&!n.isActiveView,"bg-woot-75 dark:bg-woot-200 text-woot-600 dark:text-woot-600":n.isActiveView,"bg-slate-50 dark:bg-slate-700":!n.isActiveView}])},b(`${e.menuItem.count}`),3)):A("",!0),e.menuItem.beta?(a(),c("span",De,b(t.$t("SIDEBAR.BETA")),1)):A("",!0)]),_:1},8,["class","to"])),n.hasSubMenu?(a(),c("ul",Fe,[(a(!0),c(T,null,E(e.menuItem.children,g=>(a(),y(x,{key:g.id,to:g.toState,label:g.label,"label-color":g.color,"should-truncate":g.truncateLabel,icon:n.computedInboxClass(g),"warning-icon":n.computedInboxErrorClass(g),"show-child-count":n.showChildCount(g.count),"child-item-count":g.count},null,8,["to","label","label-color","should-truncate","icon","warning-icon","show-child-count","child-item-count"]))),128)),i(S,{permissions:["administrator"]},{default:d(()=>[e.menuItem.newLink?(a(),y(u,{key:0,to:e.menuItem.toState,custom:""},{default:d(({href:g,navigate:N})=>[h("li",Ue,[h("a",{href:g},[i(m,{ghost:"",xs:"",slate:"",icon:"i-lucide-plus",label:t.$t(`SIDEBAR.${e.menuItem.newLinkTag}`),"data-testid":e.menuItem.dataTestid,onClick:w=>n.newLinkClick(w,N)},null,8,["label","data-testid","onClick"])],8,Ve)])]),_:1},8,["to"])):A("",!0)]),_:1})])):A("",!0)],512)),[[lt,n.isMenuItemVisible]])}const Ge=C($e,[["render",We]]),He={components:{NextButton:$},emits:["toggleAccounts"],data(){return{showSwitchButton:!1}},computed:{...I({account:"getCurrentAccount",userAccounts:"getUserAccounts"}),showShowCurrentAccountContext(){return this.userAccounts.length>1&&this.account.name}},methods:{setShowSwitch(){this.showSwitchButton=!0},resetShowSwitch(){this.showSwitchButton=!1}}},Ke={class:"mb-0 overflow-hidden font-medium text-ellipsis whitespace-nowrap text-slate-800 dark:text-slate-100"},je={key:0,class:"absolute top-0 right-0 flex items-center justify-end w-full h-full rounded-md ltr:overlay-shadow ltr:dark:overlay-shadow-dark rtl:rtl-overlay-shadow rtl:dark:rtl-overlay-shadow-dark"},ze={class:"mx-2 my-0"};function Ye(t,o,e,p,f,n){const m=r("NextButton");return n.showShowCurrentAccountContext?(a(),c("div",{key:0,class:"relative px-2 py-2 mt-2 text-xs border rounded-md cursor-pointer text-slate-700 dark:text-slate-200 border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800",onMouseover:o[1]||(o[1]=(...l)=>n.setShowSwitch&&n.setShowSwitch(...l)),onMouseleave:o[2]||(o[2]=(...l)=>n.resetShowSwitch&&n.resetShowSwitch(...l))},[G(b(t.$t("SIDEBAR.CURRENTLY_VIEWING_ACCOUNT"))+" ",1),h("p",Ke,b(t.account.name),1),i(W,{name:"fade"},{default:d(()=>[f.showSwitchButton?(a(),c("div",je,[h("div",ze,[i(m,{ghost:"",xs:"",icon:"i-lucide-arrow-right-left",label:t.$t("SIDEBAR.SWITCH"),onClick:o[0]||(o[0]=l=>t.$emit("toggleAccounts"))},null,8,["label"])])])):A("",!0)]),_:1})],32)):A("",!0)}const Xe=C(He,[["render",Ye],["__scopeId","data-v-fbc67c56"]]),qe={components:{AccountContext:Xe,SecondaryNavItem:Ge},props:{accountId:{type:Number,default:0},labels:{type:Array,default:()=>[]},inboxes:{type:Array,default:()=>[]},teams:{type:Array,default:()=>[]},customViews:{type:Array,default:()=>[]},menuConfig:{type:Object,default:()=>{}},currentUser:{type:Object,default:()=>{}},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["addLabel","toggleAccounts"],computed:{...I({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",dashboardApps:"dashboardApps/getRecords"}),contactCustomViews(){return this.customViews.filter(t=>t.filter_type==="contact")},accessibleMenuItems(){return this.menuConfig.menuItems.filter(o=>{const e=P(this.currentUser,this.accountId);return D(V[o.toStateName],e)}).filter(o=>o.showOnlyOnCloud?this.isOnChatwootCloud:!0)},inboxSection(){return{icon:"folder",label:"INBOXES",hasSubMenu:!0,newLink:this.showNewLink(_.INBOX_MANAGEMENT),newLinkTag:"NEW_INBOX",key:"inbox",toState:s(`accounts/${this.accountId}/settings/inboxes/new`),toStateName:"settings_inbox_new",newLinkRouteName:"settings_inbox_new",children:this.inboxes.map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/inbox/${t.id}`),type:t.channel_type,phoneNumber:t.phone_number,reauthorizationRequired:t.reauthorization_required})).sort((t,o)=>t.label.toLowerCase()>o.label.toLowerCase()?1:-1)}},labelSection(){return{icon:"number-symbol",label:"LABELS",hasSubMenu:!0,newLink:this.showNewLink(_.TEAM_MANAGEMENT),newLinkTag:"NEW_LABEL",key:"label",toState:s(`accounts/${this.accountId}/settings/labels`),toStateName:"labels_list",showModalForNewItem:!0,modalName:"AddLabel",dataTestid:"sidebar-new-label-button",children:this.labels.map(t=>({id:t.id,label:t.title,color:t.color,truncateLabel:!0,toState:s(`accounts/${this.accountId}/label/${t.title}`)}))}},contactLabelSection(){return{icon:"number-symbol",label:"TAGGED_WITH",hasSubMenu:!0,key:"labels",newLink:this.showNewLink(_.TEAM_MANAGEMENT),newLinkTag:"NEW_LABEL",toState:s(`accounts/${this.accountId}/settings/labels`),toStateName:"labels_list",showModalForNewItem:!0,modalName:"AddLabel",children:this.labels.map(t=>({id:t.id,label:t.title,color:t.color,truncateLabel:!0,toState:s(`accounts/${this.accountId}/contacts/labels/${t.title}`)}))}},teamSection(){return{icon:"people-team",label:"TEAMS",hasSubMenu:!0,newLink:this.showNewLink(_.TEAM_MANAGEMENT),newLinkTag:"NEW_TEAM",key:"team",toState:s(`accounts/${this.accountId}/settings/teams/new`),toStateName:"settings_teams_new",newLinkRouteName:"settings_teams_new",children:this.teams.map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/team/${t.id}`)}))}},foldersSection(){return{icon:"folder",label:"CUSTOM_VIEWS_FOLDER",hasSubMenu:!0,key:"custom_view",children:this.customViews.filter(t=>t.filter_type==="conversation").map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/custom_view/${t.id}`)}))}},contactSegmentsSection(){return{icon:"folder",label:"CUSTOM_VIEWS_SEGMENTS",hasSubMenu:!0,key:"segments",children:this.customViews.filter(t=>t.filter_type==="contact").map(t=>({id:t.id,label:t.name,truncateLabel:!0,toState:s(`accounts/${this.accountId}/contacts/segments/${t.id}`)}))}},additionalSecondaryMenuItems(){let t=[this.inboxSection,this.labelSection],o=[this.contactLabelSection],e=[];return this.menuConfig.parentNav==="dashboardApps"&&this.dashboardApps.length&&(e=this.menuConfig.getMenuItems(this.dashboardApps)),this.teams.length&&(t=[this.teamSection,...t]),this.customViews.length&&(t=[this.foldersSection,...t]),this.contactCustomViews.length&&(o=[this.contactSegmentsSection,...o]),{conversations:t,contacts:o,dashboardApps:e}}},methods:{showAddLabelPopup(){this.$emit("addLabel")},toggleAccountModal(){this.$emit("toggleAccounts")},showNewLink(t){return this.isFeatureEnabledonAccount(this.accountId,t)}}},Ze={class:"flex flex-col w-48 h-full px-2 pb-8 overflow-auto text-sm bg-white border-r dark:bg-slate-900 dark:border-slate-800/50 rtl:border-r-0 rtl:border-l border-slate-50"};function Je(t,o,e,p,f,n){const m=r("AccountContext"),l=r("SecondaryNavItem");return a(),c("div",Ze,[i(m,{onToggleAccounts:n.toggleAccountModal},null,8,["onToggleAccounts"]),i(ct,{name:"menu-list",tag:"ul",class:"pt-2 list-none reset-base"},{default:d(()=>[(a(!0),c(T,null,E(n.accessibleMenuItems,u=>(a(),y(l,{key:u.toState,"menu-item":u},null,8,["menu-item"]))),128)),(a(!0),c(T,null,E(n.additionalSecondaryMenuItems[e.menuConfig.parentNav],u=>(a(),y(l,{key:u.key,"menu-item":u,onAddLabel:n.showAddLabelPopup},null,8,["menu-item","onAddLabel"]))),128))]),_:1})])}const Qe=C(qe,[["render",Je]]),tn={components:{PrimarySidebar:ve,SecondarySidebar:Qe},props:{showSecondarySidebar:{type:Boolean,default:!0}},emits:["toggleAccountModal","showAddLabelPopup","openNotificationPanel","closeKeyShortcutModal","openKeyShortcutModal"],setup(t,{emit:o}){const e=st(),p=at(),{accountId:f}=nt(),n=()=>{o("openKeyShortcutModal")},m=()=>{o("closeKeyShortcutModal")},l=S=>e.name===S,u=S=>{l(S)||p.push({name:S})};return ot({"$mod+Slash":{action:n},"$mod+Escape":{action:m},"Alt+KeyC":{action:()=>u("home")},"Alt+KeyV":{action:()=>u("contacts_dashboard")},"Alt+KeyR":{action:()=>u("account_overview_reports")},"Alt+KeyS":{action:()=>u("agent_list")}}),{toggleKeyShortcutModal:n,accountId:f}},data(){return{showOptionsMenu:!1}},computed:{...I({currentUser:"getCurrentUser",globalConfig:"globalConfig/get",inboxes:"inboxes/getInboxes",isACustomBrandedInstance:"globalConfig/isACustomBrandedInstance",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud",labels:"labels/getLabelsOnSidebar",teams:"teams/getMyTeams",isKanbanEnabled:"kanban/isKanbanEnabled",navigationApps:"dashboardApps/getNavigationApps"}),activeCustomView(){return this.activePrimaryMenu.key==="contacts"?"contact":this.activePrimaryMenu.key==="conversations"?"conversation":""},customViews(){return this.activeCustomView?this.$store.getters["customViews/getCustomViewsByFilterType"](this.activeCustomView):[]},isConversationOrContactActive(){return this.activePrimaryMenu.key==="contacts"||this.activePrimaryMenu.key==="conversations"},sideMenuConfig(){return At(this.accountId)},primaryMenuItems(){const t=P(this.currentUser,this.accountId);return this.sideMenuConfig.primaryMenu.filter(e=>D(V[e.toStateName],t)?e.alwaysVisibleOnChatwootInstances&&!this.isACustomBrandedInstance?!0:e.featureFlag?this.isFeatureEnabledonAccount(this.accountId,e.featureFlag):!0:!1)},activeSecondaryMenu(){const{secondaryMenu:t}=this.sideMenuConfig,{name:o}=this.$route;return t.find(p=>p.routes.includes(o))||{}},activePrimaryMenu(){return this.primaryMenuItems.find(o=>o.key===this.activeSecondaryMenu.parentNav)||{}},hasSecondaryMenu(){return this.activeSecondaryMenu.menuItems&&this.activeSecondaryMenu.menuItems.length},hasSecondarySidebar(){return this.showSecondarySidebar&&this.hasSecondaryMenu}},watch:{activeCustomView(){this.fetchCustomViews()}},mounted(){this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("notifications/unReadCount"),this.$store.dispatch("teams/get"),this.$store.dispatch("attributes/get"),this.$store.dispatch("dashboardApps/get"),this.fetchCustomViews(),this.$store.dispatch("kanban/setKanbanEnabled",this.isFeatureEnabledonAccount(this.accountId,"kanban_board"))},methods:{fetchCustomViews(){this.isConversationOrContactActive&&this.$store.dispatch("customViews/get",this.activeCustomView)},toggleSupportChatWindow(){window.$chatwoot.toggle()},toggleAccountModal(){this.$emit("toggleAccountModal")},showAddLabelPopup(){this.$emit("showAddLabelPopup")},openNotificationPanel(){this.$emit("openNotificationPanel")}}},en={class:"flex h-full"};function nn(t,o,e,p,f,n){const m=r("PrimarySidebar"),l=r("SecondarySidebar");return a(),c("aside",en,[i(m,{"logo-source":t.globalConfig.logoThumbnail,"installation-name":t.globalConfig.installationName,"is-a-custom-branded-instance":t.isACustomBrandedInstance,"account-id":p.accountId,"menu-items":n.primaryMenuItems,"active-menu-item":n.activePrimaryMenu.key,onToggleAccounts:n.toggleAccountModal,onOpenKeyShortcutModal:p.toggleKeyShortcutModal,onOpenNotificationPanel:n.openNotificationPanel},null,8,["logo-source","installation-name","is-a-custom-branded-instance","account-id","menu-items","active-menu-item","onToggleAccounts","onOpenKeyShortcutModal","onOpenNotificationPanel"]),n.hasSecondarySidebar?(a(),y(l,{key:0,"account-id":p.accountId,inboxes:t.inboxes,labels:t.labels,teams:t.teams,"custom-views":n.customViews,"menu-config":n.activeSecondaryMenu,"current-user":t.currentUser,"is-on-chatwoot-cloud":t.isOnChatwootCloud,onAddLabel:n.showAddLabelPopup,onToggleAccounts:n.toggleAccountModal},null,8,["account-id","inboxes","labels","teams","custom-views","menu-config","current-user","is-on-chatwoot-cloud","onAddLabel","onToggleAccounts"])):A("",!0)])}const Mn=C(tn,[["render",nn]]);export{Mn as default};
