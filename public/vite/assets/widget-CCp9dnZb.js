const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnreadMessages-CpSK-ZtX.js","assets/useBranding-CD_QbCIP.js","assets/_plugin-vue_export-helper-IoQslFd3.js","assets/useBranding-aTKfDg_G.css","assets/UnreadMessageList-CtA_wnrr.js","assets/module-CEpankYo.js","assets/Icon-Dg_4WYMY.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/_commonjsHelpers-BosuxZz1.js","assets/Avatar-CS4GuSbz.js","assets/globals-DPjCpsAT.js","assets/colorHelper-DkkSNPxc.js","assets/UnreadMessageList-C80tQpqe.css","assets/sharedFrameEvents-0qZ2yOho.js","assets/index-DN3rM4CW.js","assets/index-BtuGy7By.js","assets/constants-lVAyZKq6.js","assets/Validators-DkQimdV0.js","assets/index-DJvhFcF9.js","assets/Branding-DdXbg_Zm.js","assets/Campaigns-Cjte5tqm.js","assets/Home-UbDOeT7l.js","assets/utils.esm-dig4nDxm.js","assets/PreChatForm-D0HURtNj.js","assets/Button-BR_kwxyB.js","assets/helper-q29O9VCT.js","assets/PreChatForm-CGQujdTq.css","assets/Messages-CHCOblUO.js","assets/typing-B_xc7lBt.js","assets/exports-Db5CWii1.js","assets/EmojiInput-CHOuDIMs.js","assets/EmojiInput-Dm9q0cqD.css","assets/StarRating-Ctv0USGH.js","assets/Messages-ygpkYUrV.css","assets/ArticleViewer-B5YAQXKX.js","assets/IframeLoader-BKISZm2C.js"])))=>i.map(i=>d[i]);
var pa=Object.defineProperty;var ma=(e,t,a)=>t in e?pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var S=(e,t,a)=>ma(e,typeof t!="symbol"?t+"":t,a);import{c as me,_ as re,n as F,p as k,o as U,e as L,q as Q,g as H,s as N,t as Ft,I as Lt,i as ve,H as va,a as fe,k as _a,x as wa}from"./_plugin-vue_export-helper-IoQslFd3.js";import{e as z,t as Ca,v as ya,c as Ta,i as ue,m as ct,S as Ma,z as ge,_ as ee,s as ba}from"./useBranding-CD_QbCIP.js";import{u as xa,k as Da}from"./vue-dompurify-html-CEAHYyWB.js";import{g as dt,S as Ea,f as Oa,b as Sa,h as Aa,i as Ct,p as Ua}from"./sharedFrameEvents-0qZ2yOho.js";import{a as Ia}from"./index-BtuGy7By.js";import{A as Pa,W as yt,M as le}from"./constants-lVAyZKq6.js";import{L as _e,D as Na,j as Wa,B as ka,q as Ra,F as Fa,G as La,H as Ha}from"./Validators-DkQimdV0.js";import{q as Ht,r as Ya,m as $a,u as Tt,B as Ba,c as Mt,d as bt,v as he,n as za,o as Va,b as qa}from"./index-DJvhFcF9.js";import{g as Ga}from"./Icon-Dg_4WYMY.js";import{B as Xa}from"./Branding-DdXbg_Zm.js";import{F as Yt,d as Za,a as Qa}from"./module-CEpankYo.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-DN3rM4CW.js";const E=Ia.create({baseURL:Pa,withCredentials:!1}),$t=(e,t="X-Auth-Token")=>{E.defaults.headers.common[t]=e},Bt=()=>({initiated_at:{timestamp:new Date().toString()},referer:window.referrerURL||""}),ja={create(e){const t=dt(window.location.search);return E.post(`/api/v1/widget/events${t}`,{name:e,event_info:Bt()})}},Ka=e=>{const t=window.referrerURL||"";return{url:`/api/v1/widget/conversations${dt(window.location.search)}`,params:{contact:{name:e.fullName,email:e.emailAddress,phone_number:e.phoneNumber},message:{content:e.message,timestamp:new Date().toString(),referer_url:t},custom_attributes:e.customAttributes}}},Ja=(e,t)=>{const a=window.referrerURL||"";return{url:`/api/v1/widget/messages${dt(window.location.search)}`,params:{message:{content:e,reply_to:t,timestamp:new Date().toString(),referer_url:a}}}},en=({attachment:e,replyTo:t=null})=>{const{referrerURL:a=""}=window,n=new Date().toString(),{file:s}=e,r=new FormData;return typeof s=="string"?r.append("message[attachments][]",s):r.append("message[attachments][]",s,s.name),r.append("message[referer_url]",a),r.append("message[timestamp]",n),t!==null&&r.append("message[reply_to]",t),{url:`/api/v1/widget/messages${window.location.search}`,params:r}},tn=({before:e,after:t})=>({url:`/api/v1/widget/messages${window.location.search}`,params:{before:e,after:t}}),an=e=>({url:`/api/v1/widget/messages/${e}${window.location.search}`}),nn=e=>({url:"/api/v1/widget/inbox_members",params:{website_token:e}}),rn=e=>({url:"/api/v1/widget/campaigns",params:{website_token:e}}),sn=({websiteToken:e,campaignId:t,customAttributes:a})=>({url:"/api/v1/widget/events",data:{name:"campaign.triggered",event_info:{campaign_id:t,custom_attributes:a,...Bt()}},params:{website_token:e}}),on=(e,t)=>({url:`/hc/${e}/${t}/articles.json`,params:{page:1,sort:"views",status:1,per_page:6}}),V={createConversation:Ka,sendMessage:Ja,sendAttachment:en,getConversation:tn,updateMessage:an,getAvailableAgents:nn,getCampaigns:rn,triggerCampaign:sn,getMostReadArticles:on},un=async e=>{const t=V.getAvailableAgents(e);return E.get(t.url,{params:t.params})},ln=24*60*60*1e3,ft=(e,t=ln)=>{try{const a=_e.get(e);if(!a)return null;const{data:n,timestamp:s}=a;return Date.now()-s>t?(_e.remove(e),null):n}catch{return null}},gt=(e,t)=>{try{const a={data:t,timestamp:Date.now()};_e.set(e,a)}catch{}},cn={records:[],uiFlags:{isError:!1,hasFetched:!1}},dn={getHasFetched:e=>e.uiFlags.hasFetched,availableAgents:e=>e.records.filter(t=>t.availability_status==="online")},xt="chatwoot_available_agents_",fn={fetchAvailableAgents:async({commit:e},t)=>{try{const a=ft(`${xt}${t}`);if(a){e("setAgents",a),e("setError",!1),e("setHasFetched",!0);return}const{data:n}=await un(t),{payload:s=[]}=n;gt(`${xt}${t}`,s),e("setAgents",s),e("setError",!1),e("setHasFetched",!0)}catch{e("setError",!0),e("setHasFetched",!0)}},updatePresence:async({commit:e},t)=>{e("updatePresence",t)}},gn={setAgents(e,t){e.records=t},updatePresence:Na,setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t}},hn={namespaced:!0,state:cn,getters:dn,actions:fn,mutations:gn},pn="CLEAR_CONVERSATION_ATTRIBUTES",zt="SET_CONVERSATION_ATTRIBUTES",Vt="SET_WIDGET_APP_CONFIG",qt="SET_WIDGET_COLOR",Gt="SET_COLOR_SCHEME",Xt="UPDATE_CONVERSATION_ATTRIBUTES",Zt="TOGGLE_WIDGET_OPEN",Qt="SET_REFERRER_HOST",jt="SET_BUBBLE_VISIBILITY",Kt="SET_ROUTE_UPDATE_STATE",mn={hideMessageBubble:!1,isCampaignViewClicked:!1,showUnreadMessagesDialog:!0,isWebWidgetTriggered:!1,isWidgetOpen:!1,position:"right",referrerHost:"",showPopoutButton:!1,widgetColor:"",widgetStyle:"standard",darkMode:"light",isUpdatingRoute:!1,welcomeTitle:"",welcomeDescription:"",availableMessage:"",unavailableMessage:"",enableFileUpload:!0,enableEmojiPicker:!0,enableEndConversation:!0},vn={getAppConfig:e=>e,isRightAligned:e=>e.position==="right",getHideMessageBubble:e=>e.hideMessageBubble,getIsWidgetOpen:e=>e.isWidgetOpen,getWidgetColor:e=>e.widgetColor,getReferrerHost:e=>e.referrerHost,isWidgetStyleFlat:e=>e.widgetStyle==="flat",darkMode:e=>e.darkMode,getShowUnreadMessagesDialog:e=>e.showUnreadMessagesDialog,getIsUpdatingRoute:e=>e.isUpdatingRoute,getWelcomeHeading:e=>e.welcomeTitle,getWelcomeTagline:e=>e.welcomeDescription,getAvailableMessage:e=>e.availableMessage,getUnavailableMessage:e=>e.unavailableMessage,getShouldShowFilePicker:e=>e.enableFileUpload,getShouldShowEmojiPicker:e=>e.enableEmojiPicker,getCanUserEndConversation:e=>e.enableEndConversation},_n={setAppConfig({commit:e},{showPopoutButton:t,position:a,hideMessageBubble:n,showUnreadMessagesDialog:s,widgetStyle:r="rounded",darkMode:i="light",welcomeTitle:o="",welcomeDescription:u="",availableMessage:c="",unavailableMessage:h="",enableFileUpload:_=!0,enableEmojiPicker:w=!0,enableEndConversation:v=!0}){e(Vt,{hideMessageBubble:!!n,position:a||"right",showPopoutButton:!!t,showUnreadMessagesDialog:!!s,widgetStyle:r,darkMode:i,welcomeTitle:o,welcomeDescription:u,availableMessage:c,unavailableMessage:h,enableFileUpload:_,enableEmojiPicker:w,enableEndConversation:v})},toggleWidgetOpen({commit:e},t){e(Zt,t)},setWidgetColor({commit:e},t){e(qt,t)},setColorScheme({commit:e},t){e(Gt,t)},setReferrerHost({commit:e},t){e(Qt,t)},setBubbleVisibility({commit:e},t){e(jt,t)},setRouteTransitionState:async({commit:e},t)=>{e(Kt,t)}},wn={[Vt](e,t){e.showPopoutButton=t.showPopoutButton,e.position=t.position,e.hideMessageBubble=t.hideMessageBubble,e.widgetStyle=t.widgetStyle,e.darkMode=t.darkMode,e.locale=t.locale||e.locale,e.showUnreadMessagesDialog=t.showUnreadMessagesDialog,e.welcomeTitle=t.welcomeTitle,e.welcomeDescription=t.welcomeDescription,e.availableMessage=t.availableMessage,e.unavailableMessage=t.unavailableMessage,e.enableFileUpload=t.enableFileUpload,e.enableEmojiPicker=t.enableEmojiPicker,e.enableEndConversation=t.enableEndConversation},[Zt](e,t){e.isWidgetOpen=t},[qt](e,t){e.widgetColor=t},[Qt](e,t){e.referrerHost=t},[jt](e,t){e.hideMessageBubble=t},[Gt](e,t){e.darkMode=t},[Kt](e,t){e.isUpdatingRoute=t}},Cn={namespaced:!0,state:mn,getters:vn,actions:_n,mutations:wn},yn=e=>e?Object.keys(e).length===0&&e.constructor===Object:!0,ht=e=>{window.parent.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`,"*")},A={isIFrame:()=>window.self!==window.top,sendMessage:ht,isAValidEvent:e=>typeof e.data=="string"&&e.data.indexOf(yt)===0,getMessage:e=>JSON.parse(e.data.replace(yt,""))},ne={isRNWebView:()=>window.ReactNativeWebView,sendMessage:e=>{window.ReactNativeWebView.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`)}},Tn=(e,t)=>e.reduce((a,n)=>{var s;return(a[s=t(n)]||(a[s]=[])).push(n),a},{}),te=e=>`/api/v1/${e}${window.location.search}`,ae={get(){return E.get(te("widget/contact"))},update(e){return E.patch(te("widget/contact"),e)},setUser(e,t){return E.patch(te("widget/contact/set_user"),{identifier:e,...t})},setCustomAttributes(e={}){return E.patch(te("widget/contact"),{custom_attributes:e})},deleteCustomAttribute(e){return E.post(te("widget/contact/destroy_custom_attributes"),{custom_attributes:[e]})}},Mn={currentUser:{}},Jt="SET_CURRENT_USER",bn=e=>e&&e.response&&e.response.data?e.response.data:e,xn=e=>{e&&($t(e),ht({event:"setAuthCookie",data:{widgetAuthToken:e}}))},Dn={getCurrentUser(e){return e.currentUser}},En={get:async({commit:e})=>{try{const{data:t}=await ae.get();e(Jt,t)}catch{}},update:async({dispatch:e},{user:t})=>{try{await ae.update(t),e("get")}catch{}},setUser:async({dispatch:e},{identifier:t,user:a})=>{try{const{email:n,name:s,avatar_url:r,identifier_hash:i,phone_number:o,company_name:u,city:c,country_code:h,description:_,custom_attributes:w,social_profiles:v}=a,M={email:n,name:s,avatar_url:r,identifier_hash:i,phone_number:o,additional_attributes:{company_name:u,city:c,description:_,country_code:h,social_profiles:v},custom_attributes:w},{data:{widget_auth_token:m}}=await ae.setUser(t,M);xn(m),e("get"),(i||m)&&(e("conversation/clearConversations",{},{root:!0}),e("conversation/fetchOldConversations",{},{root:!0}),e("conversationAttributes/getAttributes",{},{root:!0}))}catch(n){const s=bn(n);ht({event:"error",errorType:Ea,data:s})}},setCustomAttributes:async(e,t={})=>{try{await ae.setCustomAttributes(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await ae.deleteCustomAttribute(t)}catch{}}},On={[Jt](e,t){const{currentUser:a}=e;e.currentUser={...a,...t}}},Sn={namespaced:!0,state:Mn,getters:Dn,actions:En,mutations:On},Dt=({attachments:e,content:t,replyTo:a})=>{const n=new Date().getTime()/1e3;return{id:Wa(),content:t,attachments:e,status:"in_progress",replyTo:a,created_at:n,message_type:le.INCOMING}},Et=e=>e.sender?e.sender.name:"",An=(e,t)=>{const a=Et(e),n=Et(t);return a!==n||e.message_type!==t.message_type||Ht(t)},Un=e=>e.map((t,a)=>{let n;const s=a===e.length-1;if(Ht(t))n=!1;else if(s)n=!0;else{const r=e[a+1];n=An(t,r)}return{showAvatar:n,...t}}),In=(e,{content:t})=>Object.values(e).filter(a=>a.content===t&&a.status==="in_progress"),Ot=({messages:e})=>e.filter(t=>!(t.content_attributes&&t.content_attributes.deleted)),Pn={getAllMessagesLoaded:e=>e.uiFlags.allMessagesLoaded,getIsCreating:e=>e.uiFlags.isCreating,getIsAgentTyping:e=>e.uiFlags.isAgentTyping,getConversation:e=>e.conversations,getConversationSize:e=>Object.keys(e.conversations).length,getEarliestMessage:e=>{const t=Object.values(e.conversations);return t.length?t[0]:{}},getLastMessage:e=>{const t=Object.values(e.conversations);return t.length?t[t.length-1]:{}},getGroupedConversation:e=>{const t=Tn(Object.values(e.conversations),a=>Ya(a.created_at));return Object.keys(t).map(a=>({date:a,messages:Un(t[a])}))},getIsFetchingList:e=>e.uiFlags.isFetchingList,getMessageCount:e=>Object.values(e.conversations).length,getUnreadMessageCount:e=>{const{userLastSeenAt:t}=e.meta;return Object.values(e.conversations).filter(a=>{const{created_at:n,message_type:s}=a,r=s===le.OUTGOING;return(t?n*1e3>t*1e3:!0)&&r}).length},getUnreadTextMessages:(e,t)=>{const a=t.getUnreadMessageCount,s=[...Object.values(e.conversations)].filter(i=>{const{message_type:o}=i;return o===le.OUTGOING}),r=Math.min(a,3);return s.splice(-r)}},Nn=async e=>{const t=V.createConversation(e);return E.post(t.url,t.params)},Wn=async(e,t=null)=>{const a=V.sendMessage(e,t);return E.post(a.url,a.params)},kn=async(e,t=null)=>{const a=V.sendAttachment(e,t);return E.post(a.url,a.params)},St=async({before:e,after:t})=>{const a=V.getConversation({before:e,after:t});return E.get(a.url,{params:a.params})},Rn=async()=>E.get(`/api/v1/widget/conversations${window.location.search}`),Fn=async({typingStatus:e})=>E.post(`/api/v1/widget/conversations/toggle_typing${window.location.search}`,{typing_status:e}),Ln=async({lastSeen:e})=>E.post(`/api/v1/widget/conversations/update_last_seen${window.location.search}`,{contact_last_seen_at:e}),ci=async()=>E.post(`/api/v1/widget/conversations/transcript${window.location.search}`),Hn=async()=>E.get(`/api/v1/widget/conversations/toggle_status${window.location.search}`),Yn=async e=>E.post(`/api/v1/widget/conversations/set_custom_attributes${window.location.search}`,{custom_attributes:e}),$n=async e=>E.post(`/api/v1/widget/conversations/destroy_custom_attributes${window.location.search}`,{custom_attribute:[e]}),ea="ON_AGENT_MESSAGE_RECEIVED",Bn="ON_UNREAD_MESSAGE_CLICK",zn="ON_CAMPAIGN_MESSAGE_CLICK",Vn="ON_CONVERSATION_CREATED",qn={createConversation:async({commit:e,dispatch:t},a)=>{e("setConversationUIFlag",{isCreating:!0});try{const{data:n}=await Nn(a),{messages:s}=n,[r={}]=s;e("pushMessageToConversation",r),t("conversationAttributes/getAttributes",{},{root:!0}),z.emit(Vn)}catch{}finally{e("setConversationUIFlag",{isCreating:!1})}},sendMessage:async({dispatch:e},t)=>{const{content:a,replyTo:n}=t,s=Dt({content:a,replyTo:n});e("sendMessageWithData",s)},sendMessageWithData:async({commit:e},t)=>{const{id:a,content:n,replyTo:s,meta:r={}}=t;e("pushMessageToConversation",t),e("updateMessageMeta",{id:a,meta:{...r,error:""}});try{const{data:i}=await Wn(n,s);e("pushMessageToConversation",{...i,status:"sent"})}catch{e("pushMessageToConversation",{...t,status:"failed"}),e("updateMessageMeta",{id:a,meta:{...r,error:""}})}},setLastMessageId:async({commit:e})=>{e("setLastMessageId")},sendAttachment:async({commit:e},t)=>{const{attachment:{thumbUrl:a,fileType:n},meta:s={}}=t,i=Dt({attachments:[{thumb_url:a,data_url:a,file_type:n,status:"in_progress"}],replyTo:t.replyTo});e("pushMessageToConversation",i);try{const{data:o}=await kn(t);e("updateAttachmentMessageStatus",{message:o,tempId:i.id}),e("pushMessageToConversation",{...o,status:"sent"})}catch{e("pushMessageToConversation",{...i,status:"failed"}),e("updateMessageMeta",{id:i.id,meta:{...s,error:""}})}},fetchOldConversations:async({commit:e},{before:t}={})=>{try{e("setConversationListLoading",!0);const{data:{payload:a,meta:n}}=await St({before:t}),{contact_last_seen_at:s}=n,r=Ot({messages:a});e("conversation/setMetaUserLastSeenAt",s,{root:!0}),e("setMessagesInConversation",r),e("setConversationListLoading",!1)}catch{e("setConversationListLoading",!1)}},syncLatestMessages:async({state:e,commit:t})=>{try{const{lastMessageId:a,conversations:n}=e,{data:{payload:s,meta:r}}=await St({after:a}),{contact_last_seen_at:i}=r,u=Ot({messages:s}).filter(h=>(n==null?void 0:n[h.id])===void 0);if(!u.length)return;u.forEach(h=>{n[h.id]=h});const c=Object.fromEntries(Object.entries(n).sort((h,_)=>h[1].created_at-_[1].created_at));t("conversation/setMetaUserLastSeenAt",i,{root:!0}),t("setMissingMessagesInConversation",c)}catch{}},clearConversations:({commit:e})=>{e("clearConversations")},addOrUpdateMessage:async({commit:e},t)=>{const{id:a,content_attributes:n}=t;if(n&&n.deleted){e("deleteMessage",a);return}e("pushMessageToConversation",t)},toggleAgentTyping({commit:e},t){e("toggleAgentTypingStatus",t)},toggleUserTyping:async(e,t)=>{try{await Fn(t)}catch{}},setUserLastSeen:async({commit:e,getters:t})=>{if(!t.getConversationSize)return;const a=Date.now()/1e3;try{e("setMetaUserLastSeenAt",a),await Ln({lastSeen:a})}catch{}},resolveConversation:async()=>{await Hn()},setCustomAttributes:async(e,t={})=>{try{await Yn(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await $n(t)}catch{}}},Gn={clearConversations(e){e.conversations={}},pushMessageToConversation(e,t){const{id:a,status:n,message_type:s}=t,r=e.conversations;if(!(s===le.INCOMING)||n==="in_progress"){r[a]=t;return}const[u]=In(r,t);u&&delete r[u.id],r[a]=t},updateAttachmentMessageStatus(e,{message:t,tempId:a}){const{id:n}=t,s=e.conversations;s[a]&&(delete s[a],s[n]={...t})},setConversationUIFlag(e,t){e.uiFlags={...e.uiFlags,...t}},setConversationListLoading(e,t){e.uiFlags.isFetchingList=t},setMessagesInConversation(e,t){if(!t.length){e.uiFlags.allMessagesLoaded=!0;return}t.forEach(a=>{e.conversations[a.id]=a})},setMissingMessagesInConversation(e,t){e.conversation=t},updateMessage(e,{id:t,content_attributes:a}){e.conversations[t]={...e.conversations[t],content_attributes:{...e.conversations[t].content_attributes||{},...a}}},updateMessageMeta(e,{id:t,meta:a}){const n=e.conversations[t];if(!n)return;const s=n.meta?{...n.meta,...a}:{...a};n.meta={...s}},deleteMessage(e,t){delete e.conversations[t]},toggleAgentTypingStatus(e,{status:t}){e.uiFlags.isAgentTyping=t==="on"},setMetaUserLastSeenAt(e,t){e.meta.userLastSeenAt=t},setLastMessageId(e){const{conversations:t}=e,a=Object.values(t).pop();if(!a)return;const{id:n}=a;e.lastMessageId=n}},Xn={conversations:{},meta:{userLastSeenAt:void 0},uiFlags:{allMessagesLoaded:!1,isFetchingList:!1,isAgentTyping:!1,isCreating:!1},lastMessageId:null},Zn={namespaced:!0,state:Xn,getters:Pn,actions:qn,mutations:Gn},Qn={id:"",status:""},jn={getConversationParams:e=>e},Kn={getAttributes:async({commit:e})=>{try{const{data:t}=await Rn(),{contact_last_seen_at:a}=t;e(zt,t),e("conversation/setMetaUserLastSeenAt",a,{root:!0})}catch{}},update({commit:e},t){e(Xt,t)},clearConversationAttributes:({commit:e})=>{e("CLEAR_CONVERSATION_ATTRIBUTES")}},Jn={[zt](e,t){e.id=t.id,e.status=t.status},[Xt](e,t){t.id===e.id&&(e.id=t.id,e.status=t.status)},[pn](e){e.id="",e.status=""}},er={namespaced:!0,state:Qn,getters:jn,actions:Kn,mutations:Jn},At=e=>`/api/v1/${e}${window.location.search}`,Ut={create(e){return E.post(At("widget/labels"),{label:e})},destroy(e){return E.delete(At(`widget/labels/${e}`))}},tr={},ar={},nr={create:async(e,t)=>{try{await Ut.create(t)}catch{}},destroy:async(e,t)=>{try{await Ut.destroy(t)}catch{}}},rr={},sr={namespaced:!0,state:tr,getters:ar,actions:nr,mutations:rr},ir={create:async(e,{name:t})=>{try{await ja.create(t)}catch{}}},or={namespaced:!0,state:{},getters:{},actions:ir,mutations:{}},ur={update:({messageId:e,email:t,values:a})=>{const n=V.updateMessage(e);return E.patch(n.url,{contact:{email:t},message:{submitted_values:a}})}},lr={uiFlags:{isUpdating:!1}},cr={getUIFlags:e=>e.uiFlags},dr={update:async({commit:e,dispatch:t,getters:{getUIFlags:a}},{email:n,messageId:s,submittedValues:r})=>{if(!a.isUpdating){e("toggleUpdateStatus",!0);try{await ur.update({email:n,messageId:s,values:r}),e("conversation/updateMessage",{id:s,content_attributes:{submitted_email:n,submitted_values:n?null:r}},{root:!0}),t("contacts/get",{},{root:!0})}catch{}e("toggleUpdateStatus",!1)}}},fr={toggleUpdateStatus(e,t){e.uiFlags.isUpdating=t}},gr={namespaced:!0,state:lr,getters:cr,actions:dr,mutations:fr},It=async e=>{const t=V.getCampaigns(e);return E.get(t.url,{params:t.params})},hr=async({campaignId:e,websiteToken:t,customAttributes:a})=>{const n=V.triggerCampaign({websiteToken:t,campaignId:e,customAttributes:a});await E.post(n.url,{...n.data},{params:n.params})};class pr{constructor(){S(this,"initTimers",({campaigns:t},a)=>{this.clearTimers(),t.forEach(n=>{const{timeOnPage:s,id:r}=n;this.campaignTimers[r]=setTimeout(()=>{ce.dispatch("campaign/startCampaign",{campaignId:r,websiteToken:a})},s*1e3)})});S(this,"clearTimers",()=>{this.campaignTimers.forEach(t=>{clearTimeout(t),this.campaignTimers[t]=null})});this.campaignTimers=[]}}const mr=new pr,vr=(e,t)=>{let a=e;const n=new URL(t);return a.endsWith("/")&&(a=a.slice(0,-1)+"*\\?*\\#*"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),new $a(a).test(n.toString())},_r=({campaigns:e})=>e.map(t=>{var a,n;return{id:t.id,triggerOnlyDuringBusinessHours:t.trigger_only_during_business_hours||!1,timeOnPage:(a=t==null?void 0:t.trigger_rules)==null?void 0:a.time_on_page,url:(n=t==null?void 0:t.trigger_rules)==null?void 0:n.url}}),wr=({campaigns:e,currentURL:t,isInBusinessHours:a})=>e.filter(n=>vr(n.url,t)?n.triggerOnlyDuringBusinessHours?a:!0:!1),Pt="chatwoot_campaigns_",Cr={records:[],uiFlags:{hasFetched:!1,isError:!1},activeCampaign:{}},pe=(e,t,a,n)=>{const s=_r({campaigns:e}),r=wr({campaigns:s,currentURL:t,isInBusinessHours:n});mr.initTimers({campaigns:r},a)},yr={getCampaigns:e=>e.records,getUIFlags:e=>e.uiFlags,getActiveCampaign:e=>e.activeCampaign},Tr={fetchCampaigns:async({commit:e},{websiteToken:t,currentURL:a,isInBusinessHours:n})=>{try{const r=ft(`${Pt}${t}`,36e5);if(r){e("setCampaigns",r),e("setError",!1),pe(r,a,t,n);return}const{data:i}=await It(t);gt(`${Pt}${t}`,i),e("setCampaigns",i),e("setError",!1),pe(i,a,t,n)}catch{e("setError",!0)}},initCampaigns:async({getters:{getCampaigns:e,getUIFlags:t},dispatch:a},{currentURL:n,websiteToken:s,isInBusinessHours:r})=>{e.length?pe(e,n,s,r):t.hasFetched||a("fetchCampaigns",{websiteToken:s,currentURL:n,isInBusinessHours:r})},startCampaign:async({commit:e,rootState:{appConfig:{isWidgetOpen:t}}},{websiteToken:a,campaignId:n})=>{if(!t){const{data:s}=await It(a),r=s.find(i=>i.id===n);r&&e("setActiveCampaign",r)}},executeCampaign:async({commit:e},{campaignId:t,websiteToken:a,customAttributes:n})=>{try{e("conversation/setConversationUIFlag",{isCreating:!0},{root:!0}),await hr({campaignId:t,websiteToken:a,customAttributes:n}),e("setCampaignExecuted",!0),e("setActiveCampaign",{})}catch{e("setError",!0)}finally{e("conversation/setConversationUIFlag",{isCreating:!1},{root:!0})}},resetCampaign:async({commit:e})=>{try{e("setCampaignExecuted",!1),e("setActiveCampaign",{})}catch{e("setError",!0)}}},Mr={setCampaigns(e,t){e.records=t,e.uiFlags.hasFetched=!0},setActiveCampaign(e,t){e.activeCampaign=t},setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t},setCampaignExecuted(e,t){e.campaignHasExecuted=t}},br={namespaced:!0,state:Cr,getters:yr,actions:Tr,mutations:Mr},xr=async(e,t)=>{const a=V.getMostReadArticles(e,t);return E.get(a.url,{params:a.params})},Nt="chatwoot_most_read_articles_",Dr={records:[],uiFlags:{isError:!1,hasFetched:!1,isFetching:!1}},Er={uiFlags:e=>e.uiFlags,popularArticles:e=>e.records},Or={fetch:async({commit:e},{slug:t,locale:a})=>{e("setIsFetching",!0),e("setError",!1);try{if(!a)return;const n=ft(`${Nt}${t}_${a}`);if(n){e("setArticles",n);return}const{data:s}=await xr(t,a),{payload:r=[]}=s;gt(`${Nt}${t}_${a}`,r),r.length&&e("setArticles",r)}catch{e("setError",!0)}finally{e("setIsFetching",!1)}}},Sr={setArticles(e,t){e.records=t},setError(e,t){e.uiFlags.isError=t},setIsFetching(e,t){e.uiFlags.isFetching=t}},Ar={namespaced:!0,state:Dr,getters:Er,actions:Or,mutations:Sr},ce=Ca({modules:{agent:hn,appConfig:Cn,contacts:Sn,conversation:Zn,conversationAttributes:er,conversationLabels:sr,events:or,globalConfig:ya,message:gr,campaign:br,article:Ar}}),pt={computed:{useInboxAvatarForBot(){return this.channelConfig.enabledFeatures.includes("use_inbox_avatar_for_bot")},hasAConnectedAgentBot(){return!!window.chatwootWebChannel.hasAConnectedAgentBot},inboxAvatarUrl(){return window.chatwootWebChannel.avatarUrl},channelConfig(){return window.chatwootWebChannel},hasEmojiPickerEnabled(){return this.channelConfig.enabledFeatures.includes("emoji_picker")},hasAttachmentsEnabled(){return this.channelConfig.enabledFeatures.includes("attachments")},hasEndConversationEnabled(){return this.channelConfig.enabledFeatures.includes("end_conversation")},preChatFormEnabled(){return window.chatwootWebChannel.preChatFormEnabled},preChatFormOptions(){let e="";const t=window.chatwootWebChannel.preChatFormOptions||{};e=t.pre_chat_message;const{pre_chat_fields:a=[]}=t;return{preChatMessage:e,preChatFields:a}},shouldShowPreChatForm(){const{preChatFields:e}=this.preChatFormOptions,t=e.filter(a=>a.enabled).length>0;return this.preChatFormEnabled&&t}}};var we={exports:{}},Ce={exports:{}},ye={exports:{}},Te={exports:{}},Me={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){if(s.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+s.length+" present")}e.exports=t.default})(Me,Me.exports);var I=Me.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(I);function n(r){return r&&r.__esModule?r:{default:r}}function s(r){(0,a.default)(1,arguments);var i=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&i==="[object Date]"?new Date(r.getTime()):typeof r=="number"||i==="[object Number]"?new Date(r):((typeof r=="string"||i==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}e.exports=t.default})(Te,Te.exports);var Y=Te.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(Y),n=s(I);function s(i){return i&&i.__esModule?i:{default:i}}function r(i){(0,n.default)(1,arguments);var o=(0,a.default)(i);return!isNaN(o)}e.exports=t.default})(ye,ye.exports);var Ur=ye.exports,be={exports:{}},xe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function n(s,r,i){i=i||{};var o;return typeof a[s]=="string"?o=a[s]:r===1?o=a[s].one:o=a[s].other.replace("{{count}}",r),i.addSuffix?i.comparison>0?"in "+o:o+" ago":o}e.exports=t.default})(xe,xe.exports);var Ir=xe.exports,De={exports:{}},Ee={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s){var r=s||{},i=r.width?String(r.width):n.defaultWidth,o=n.formats[i]||n.formats[n.defaultWidth];return o}}e.exports=t.default})(Ee,Ee.exports);var Pr=Ee.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Pr);function n(c){return c&&c.__esModule?c:{default:c}}var s={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},i={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o={date:(0,a.default)({formats:s,defaultWidth:"full"}),time:(0,a.default)({formats:r,defaultWidth:"full"}),dateTime:(0,a.default)({formats:i,defaultWidth:"full"})},u=o;t.default=u,e.exports=t.default})(De,De.exports);var Nr=De.exports,Oe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function n(s,r,i,o){return a[s]}e.exports=t.default})(Oe,Oe.exports);var Wr=Oe.exports,Se={exports:{}},Ae={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s,r){var i=r||{},o=i.context?String(i.context):"standalone",u;if(o==="formatting"&&n.formattingValues){var c=n.defaultFormattingWidth||n.defaultWidth,h=i.width?String(i.width):c;u=n.formattingValues[h]||n.formattingValues[c]}else{var _=n.defaultWidth,w=i.width?String(i.width):n.defaultWidth;u=n.values[w]||n.values[_]}var v=n.argumentCallback?n.argumentCallback(s):s;return u[v]}}e.exports=t.default})(Ae,Ae.exports);var kr=Ae.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(kr);function n(v){return v&&v.__esModule?v:{default:v}}var s={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},i={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function h(v,M){var m=Number(v),l=m%100;if(l>20||l<10)switch(l%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"}var _={ordinalNumber:h,era:(0,a.default)({values:s,defaultWidth:"wide"}),quarter:(0,a.default)({values:r,defaultWidth:"wide",argumentCallback:function(v){return Number(v)-1}}),month:(0,a.default)({values:i,defaultWidth:"wide"}),day:(0,a.default)({values:o,defaultWidth:"wide"}),dayPeriod:(0,a.default)({values:u,defaultWidth:"wide",formattingValues:c,defaultFormattingWidth:"wide"})},w=_;t.default=w,e.exports=t.default})(Se,Se.exports);var Rr=Se.exports,Ue={exports:{}},Ie={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s,r){var i=String(s),o=r||{},u=i.match(n.matchPattern);if(!u)return null;var c=u[0],h=i.match(n.parsePattern);if(!h)return null;var _=n.valueCallback?n.valueCallback(h[0]):h[0];return _=o.valueCallback?o.valueCallback(_):_,{value:_,rest:i.slice(c.length)}}}e.exports=t.default})(Ie,Ie.exports);var Fr=Ie.exports,Pe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(r){return function(i,o){var u=String(i),c=o||{},h=c.width,_=h&&r.matchPatterns[h]||r.matchPatterns[r.defaultMatchWidth],w=u.match(_);if(!w)return null;var v=w[0],M=h&&r.parsePatterns[h]||r.parsePatterns[r.defaultParseWidth],m;return Object.prototype.toString.call(M)==="[object Array]"?m=s(M,function(l){return l.test(v)}):m=n(M,function(l){return l.test(v)}),m=r.valueCallback?r.valueCallback(m):m,m=c.valueCallback?c.valueCallback(m):m,{value:m,rest:u.slice(v.length)}}}function n(r,i){for(var o in r)if(r.hasOwnProperty(o)&&i(r[o]))return o}function s(r,i){for(var o=0;o<r.length;o++)if(i(r[o]))return o}e.exports=t.default})(Pe,Pe.exports);var Lr=Pe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(Fr),n=s(Lr);function s(f){return f&&f.__esModule?f:{default:f}}var r=/^(\d+)(th|st|nd|rd)?/i,i=/\d+/i,o={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},c={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h={any:[/1/i,/2/i,/3/i,/4/i]},_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},w={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},M={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d={ordinalNumber:(0,a.default)({matchPattern:r,parsePattern:i,valueCallback:function(f){return parseInt(f,10)}}),era:(0,n.default)({matchPatterns:o,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:c,defaultMatchWidth:"wide",parsePatterns:h,defaultParseWidth:"any",valueCallback:function(f){return f+1}}),month:(0,n.default)({matchPatterns:_,defaultMatchWidth:"wide",parsePatterns:w,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:v,defaultMatchWidth:"wide",parsePatterns:M,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:l,defaultParseWidth:"any"})},g=d;t.default=g,e.exports=t.default})(Ue,Ue.exports);var Hr=Ue.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(Ir),n=o(Nr),s=o(Wr),r=o(Rr),i=o(Hr);function o(h){return h&&h.__esModule?h:{default:h}}var u={code:"en-US",formatDistance:a.default,formatLong:n.default,formatRelative:s.default,localize:r.default,match:i.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},c=u;t.default=c,e.exports=t.default})(be,be.exports);var Yr=be.exports,Ne={exports:{}},We={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){if(n===null||n===!0||n===!1)return NaN;var s=Number(n);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})(We,We.exports);var j=We.exports,ke={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(j),n=r(Y),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u){(0,s.default)(2,arguments);var c=(0,n.default)(o).getTime(),h=(0,a.default)(u);return new Date(c+h)}e.exports=t.default})(ke,ke.exports);var $r=ke.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(j),n=r($r),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u){(0,s.default)(2,arguments);var c=(0,a.default)(u);return(0,n.default)(o,-c)}e.exports=t.default})(Ne,Ne.exports);var Br=Ne.exports,Re={exports:{}},Fe={exports:{}},Le={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){for(var r=n<0?"-":"",i=Math.abs(n).toString();i.length<s;)i="0"+i;return r+i}e.exports=t.default})(Le,Le.exports);var ta=Le.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(ta);function n(i){return i&&i.__esModule?i:{default:i}}var s={y:function(i,o){var u=i.getUTCFullYear(),c=u>0?u:1-u;return(0,a.default)(o==="yy"?c%100:c,o.length)},M:function(i,o){var u=i.getUTCMonth();return o==="M"?String(u+1):(0,a.default)(u+1,2)},d:function(i,o){return(0,a.default)(i.getUTCDate(),o.length)},a:function(i,o){var u=i.getUTCHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(i,o){return(0,a.default)(i.getUTCHours()%12||12,o.length)},H:function(i,o){return(0,a.default)(i.getUTCHours(),o.length)},m:function(i,o){return(0,a.default)(i.getUTCMinutes(),o.length)},s:function(i,o){return(0,a.default)(i.getUTCSeconds(),o.length)},S:function(i,o){var u=o.length,c=i.getUTCMilliseconds(),h=Math.floor(c*Math.pow(10,u-3));return(0,a.default)(h,o.length)}},r=s;t.default=r,e.exports=t.default})(Fe,Fe.exports);var zr=Fe.exports,He={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=s(Y),n=s(I);function s(o){return o&&o.__esModule?o:{default:o}}var r=864e5;function i(o){(0,n.default)(1,arguments);var u=(0,a.default)(o),c=u.getTime();u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0);var h=u.getTime(),_=c-h;return Math.floor(_/r)+1}e.exports=t.default})(He,He.exports);var Vr=He.exports,Ye={exports:{}},$e={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(Y),n=s(I);function s(i){return i&&i.__esModule?i:{default:i}}function r(i){(0,n.default)(1,arguments);var o=1,u=(0,a.default)(i),c=u.getUTCDay(),h=(c<o?7:0)+c-o;return u.setUTCDate(u.getUTCDate()-h),u.setUTCHours(0,0,0,0),u}e.exports=t.default})($e,$e.exports);var mt=$e.exports,Be={exports:{}},ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(Y),n=r(mt),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,s.default)(1,arguments);var u=(0,a.default)(o),c=u.getUTCFullYear(),h=new Date(0);h.setUTCFullYear(c+1,0,4),h.setUTCHours(0,0,0,0);var _=(0,n.default)(h),w=new Date(0);w.setUTCFullYear(c,0,4),w.setUTCHours(0,0,0,0);var v=(0,n.default)(w);return u.getTime()>=_.getTime()?c+1:u.getTime()>=v.getTime()?c:c-1}e.exports=t.default})(ze,ze.exports);var aa=ze.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(aa),n=r(mt),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,s.default)(1,arguments);var u=(0,a.default)(o),c=new Date(0);c.setUTCFullYear(u,0,4),c.setUTCHours(0,0,0,0);var h=(0,n.default)(c);return h}e.exports=t.default})(Be,Be.exports);var qr=Be.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(Y),n=i(mt),s=i(qr),r=i(I);function i(c){return c&&c.__esModule?c:{default:c}}var o=6048e5;function u(c){(0,r.default)(1,arguments);var h=(0,a.default)(c),_=(0,n.default)(h).getTime()-(0,s.default)(h).getTime();return Math.round(_/o)+1}e.exports=t.default})(Ye,Ye.exports);var Gr=Ye.exports,Ve={exports:{}},qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(j),n=r(Y),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u){(0,s.default)(1,arguments);var c=u||{},h=c.locale,_=h&&h.options&&h.options.weekStartsOn,w=_==null?0:(0,a.default)(_),v=c.weekStartsOn==null?w:(0,a.default)(c.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var M=(0,n.default)(o),m=M.getUTCDay(),l=(m<v?7:0)+m-v;return M.setUTCDate(M.getUTCDate()-l),M.setUTCHours(0,0,0,0),M}e.exports=t.default})(qe,qe.exports);var vt=qe.exports,Ge={exports:{}},Xe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(j),n=i(Y),s=i(vt),r=i(I);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,c){(0,r.default)(1,arguments);var h=(0,n.default)(u,c),_=h.getUTCFullYear(),w=c||{},v=w.locale,M=v&&v.options&&v.options.firstWeekContainsDate,m=M==null?1:(0,a.default)(M),l=w.firstWeekContainsDate==null?m:(0,a.default)(w.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(_+1,0,l),d.setUTCHours(0,0,0,0);var g=(0,s.default)(d,c),f=new Date(0);f.setUTCFullYear(_,0,l),f.setUTCHours(0,0,0,0);var p=(0,s.default)(f,c);return h.getTime()>=g.getTime()?_+1:h.getTime()>=p.getTime()?_:_-1}e.exports=t.default})(Xe,Xe.exports);var na=Xe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(j),n=i(na),s=i(vt),r=i(I);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,c){(0,r.default)(1,arguments);var h=c||{},_=h.locale,w=_&&_.options&&_.options.firstWeekContainsDate,v=w==null?1:(0,a.default)(w),M=h.firstWeekContainsDate==null?v:(0,a.default)(h.firstWeekContainsDate),m=(0,n.default)(u,c),l=new Date(0);l.setUTCFullYear(m,0,M),l.setUTCHours(0,0,0,0);var d=(0,s.default)(l,c);return d}e.exports=t.default})(Ge,Ge.exports);var Xr=Ge.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(Y),n=i(vt),s=i(Xr),r=i(I);function i(c){return c&&c.__esModule?c:{default:c}}var o=6048e5;function u(c,h){(0,r.default)(1,arguments);var _=(0,a.default)(c),w=(0,n.default)(_,h).getTime()-(0,s.default)(_,h).getTime();return Math.round(w/o)+1}e.exports=t.default})(Ve,Ve.exports);var Zr=Ve.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(zr),n=c(Vr),s=c(Gr),r=c(aa),i=c(Zr),o=c(na),u=c(ta);function c(l){return l&&l.__esModule?l:{default:l}}var h={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_={G:function(l,d,g){var f=l.getUTCFullYear()>0?1:0;switch(d){case"G":case"GG":case"GGG":return g.era(f,{width:"abbreviated"});case"GGGGG":return g.era(f,{width:"narrow"});case"GGGG":default:return g.era(f,{width:"wide"})}},y:function(l,d,g){if(d==="yo"){var f=l.getUTCFullYear(),p=f>0?f:1-f;return g.ordinalNumber(p,{unit:"year"})}return a.default.y(l,d)},Y:function(l,d,g,f){var p=(0,o.default)(l,f),b=p>0?p:1-p;if(d==="YY"){var W=b%100;return(0,u.default)(W,2)}return d==="Yo"?g.ordinalNumber(b,{unit:"year"}):(0,u.default)(b,d.length)},R:function(l,d){var g=(0,r.default)(l);return(0,u.default)(g,d.length)},u:function(l,d){var g=l.getUTCFullYear();return(0,u.default)(g,d.length)},Q:function(l,d,g){var f=Math.ceil((l.getUTCMonth()+1)/3);switch(d){case"Q":return String(f);case"QQ":return(0,u.default)(f,2);case"Qo":return g.ordinalNumber(f,{unit:"quarter"});case"QQQ":return g.quarter(f,{width:"abbreviated",context:"formatting"});case"QQQQQ":return g.quarter(f,{width:"narrow",context:"formatting"});case"QQQQ":default:return g.quarter(f,{width:"wide",context:"formatting"})}},q:function(l,d,g){var f=Math.ceil((l.getUTCMonth()+1)/3);switch(d){case"q":return String(f);case"qq":return(0,u.default)(f,2);case"qo":return g.ordinalNumber(f,{unit:"quarter"});case"qqq":return g.quarter(f,{width:"abbreviated",context:"standalone"});case"qqqqq":return g.quarter(f,{width:"narrow",context:"standalone"});case"qqqq":default:return g.quarter(f,{width:"wide",context:"standalone"})}},M:function(l,d,g){var f=l.getUTCMonth();switch(d){case"M":case"MM":return a.default.M(l,d);case"Mo":return g.ordinalNumber(f+1,{unit:"month"});case"MMM":return g.month(f,{width:"abbreviated",context:"formatting"});case"MMMMM":return g.month(f,{width:"narrow",context:"formatting"});case"MMMM":default:return g.month(f,{width:"wide",context:"formatting"})}},L:function(l,d,g){var f=l.getUTCMonth();switch(d){case"L":return String(f+1);case"LL":return(0,u.default)(f+1,2);case"Lo":return g.ordinalNumber(f+1,{unit:"month"});case"LLL":return g.month(f,{width:"abbreviated",context:"standalone"});case"LLLLL":return g.month(f,{width:"narrow",context:"standalone"});case"LLLL":default:return g.month(f,{width:"wide",context:"standalone"})}},w:function(l,d,g,f){var p=(0,i.default)(l,f);return d==="wo"?g.ordinalNumber(p,{unit:"week"}):(0,u.default)(p,d.length)},I:function(l,d,g){var f=(0,s.default)(l);return d==="Io"?g.ordinalNumber(f,{unit:"week"}):(0,u.default)(f,d.length)},d:function(l,d,g){return d==="do"?g.ordinalNumber(l.getUTCDate(),{unit:"date"}):a.default.d(l,d)},D:function(l,d,g){var f=(0,n.default)(l);return d==="Do"?g.ordinalNumber(f,{unit:"dayOfYear"}):(0,u.default)(f,d.length)},E:function(l,d,g){var f=l.getUTCDay();switch(d){case"E":case"EE":case"EEE":return g.day(f,{width:"abbreviated",context:"formatting"});case"EEEEE":return g.day(f,{width:"narrow",context:"formatting"});case"EEEEEE":return g.day(f,{width:"short",context:"formatting"});case"EEEE":default:return g.day(f,{width:"wide",context:"formatting"})}},e:function(l,d,g,f){var p=l.getUTCDay(),b=(p-f.weekStartsOn+8)%7||7;switch(d){case"e":return String(b);case"ee":return(0,u.default)(b,2);case"eo":return g.ordinalNumber(b,{unit:"day"});case"eee":return g.day(p,{width:"abbreviated",context:"formatting"});case"eeeee":return g.day(p,{width:"narrow",context:"formatting"});case"eeeeee":return g.day(p,{width:"short",context:"formatting"});case"eeee":default:return g.day(p,{width:"wide",context:"formatting"})}},c:function(l,d,g,f){var p=l.getUTCDay(),b=(p-f.weekStartsOn+8)%7||7;switch(d){case"c":return String(b);case"cc":return(0,u.default)(b,d.length);case"co":return g.ordinalNumber(b,{unit:"day"});case"ccc":return g.day(p,{width:"abbreviated",context:"standalone"});case"ccccc":return g.day(p,{width:"narrow",context:"standalone"});case"cccccc":return g.day(p,{width:"short",context:"standalone"});case"cccc":default:return g.day(p,{width:"wide",context:"standalone"})}},i:function(l,d,g){var f=l.getUTCDay(),p=f===0?7:f;switch(d){case"i":return String(p);case"ii":return(0,u.default)(p,d.length);case"io":return g.ordinalNumber(p,{unit:"day"});case"iii":return g.day(f,{width:"abbreviated",context:"formatting"});case"iiiii":return g.day(f,{width:"narrow",context:"formatting"});case"iiiiii":return g.day(f,{width:"short",context:"formatting"});case"iiii":default:return g.day(f,{width:"wide",context:"formatting"})}},a:function(l,d,g){var f=l.getUTCHours(),p=f/12>=1?"pm":"am";switch(d){case"a":case"aa":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"aaa":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"aaaa":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},b:function(l,d,g){var f=l.getUTCHours(),p;switch(f===12?p=h.noon:f===0?p=h.midnight:p=f/12>=1?"pm":"am",d){case"b":case"bb":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"bbb":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"bbbb":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},B:function(l,d,g){var f=l.getUTCHours(),p;switch(f>=17?p=h.evening:f>=12?p=h.afternoon:f>=4?p=h.morning:p=h.night,d){case"B":case"BB":case"BBB":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"BBBBB":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"BBBB":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},h:function(l,d,g){if(d==="ho"){var f=l.getUTCHours()%12;return f===0&&(f=12),g.ordinalNumber(f,{unit:"hour"})}return a.default.h(l,d)},H:function(l,d,g){return d==="Ho"?g.ordinalNumber(l.getUTCHours(),{unit:"hour"}):a.default.H(l,d)},K:function(l,d,g){var f=l.getUTCHours()%12;return d==="Ko"?g.ordinalNumber(f,{unit:"hour"}):(0,u.default)(f,d.length)},k:function(l,d,g){var f=l.getUTCHours();return f===0&&(f=24),d==="ko"?g.ordinalNumber(f,{unit:"hour"}):(0,u.default)(f,d.length)},m:function(l,d,g){return d==="mo"?g.ordinalNumber(l.getUTCMinutes(),{unit:"minute"}):a.default.m(l,d)},s:function(l,d,g){return d==="so"?g.ordinalNumber(l.getUTCSeconds(),{unit:"second"}):a.default.s(l,d)},S:function(l,d){return a.default.S(l,d)},X:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();if(b===0)return"Z";switch(d){case"X":return v(b);case"XXXX":case"XX":return M(b);case"XXXXX":case"XXX":default:return M(b,":")}},x:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();switch(d){case"x":return v(b);case"xxxx":case"xx":return M(b);case"xxxxx":case"xxx":default:return M(b,":")}},O:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();switch(d){case"O":case"OO":case"OOO":return"GMT"+w(b,":");case"OOOO":default:return"GMT"+M(b,":")}},z:function(l,d,g,f){var p=f._originalDate||l,b=p.getTimezoneOffset();switch(d){case"z":case"zz":case"zzz":return"GMT"+w(b,":");case"zzzz":default:return"GMT"+M(b,":")}},t:function(l,d,g,f){var p=f._originalDate||l,b=Math.floor(p.getTime()/1e3);return(0,u.default)(b,d.length)},T:function(l,d,g,f){var p=f._originalDate||l,b=p.getTime();return(0,u.default)(b,d.length)}};function w(l,d){var g=l>0?"-":"+",f=Math.abs(l),p=Math.floor(f/60),b=f%60;if(b===0)return g+String(p);var W=d;return g+String(p)+W+(0,u.default)(b,2)}function v(l,d){if(l%60===0){var g=l>0?"-":"+";return g+(0,u.default)(Math.abs(l)/60,2)}return M(l,d)}function M(l,d){var g=d||"",f=l>0?"-":"+",p=Math.abs(l),b=(0,u.default)(Math.floor(p/60),2),W=(0,u.default)(p%60,2);return f+b+g+W}var m=_;t.default=m,e.exports=t.default})(Re,Re.exports);var Qr=Re.exports,Ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function a(o,u){switch(o){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}}function n(o,u){switch(o){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}}function s(o,u){var c=o.match(/(P+)(p+)?/),h=c[1],_=c[2];if(!_)return a(o,u);var w;switch(h){case"P":w=u.dateTime({width:"short"});break;case"PP":w=u.dateTime({width:"medium"});break;case"PPP":w=u.dateTime({width:"long"});break;case"PPPP":default:w=u.dateTime({width:"full"});break}return w.replace("{{date}}",a(h,u)).replace("{{time}}",n(_,u))}var r={p:n,P:s},i=r;t.default=i,e.exports=t.default})(Ze,Ze.exports);var jr=Ze.exports,Qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){var s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),n.getTime()-s.getTime()}e.exports=t.default})(Qe,Qe.exports);var ra=Qe.exports,se={};Object.defineProperty(se,"__esModule",{value:!0});se.isProtectedDayOfYearToken=es;se.isProtectedWeekYearToken=ts;se.throwProtectedError=as;var Kr=["D","DD"],Jr=["YY","YYYY"];function es(e){return Kr.indexOf(e)!==-1}function ts(e){return Jr.indexOf(e)!==-1}function as(e,t,a){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"))}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var a=w(Ur),n=w(Yr),s=w(Br),r=w(Y),i=w(Qr),o=w(jr),u=w(ra),c=se,h=w(j),_=w(I);function w(p){return p&&p.__esModule?p:{default:p}}var v=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m=/^'([^]*?)'?$/,l=/''/g,d=/[a-zA-Z]/;function g(p,b,W){(0,_.default)(2,arguments);var q=String(b),T=W||{},C=T.locale||n.default,y=C.options&&C.options.firstWeekContainsDate,x=y==null?1:(0,h.default)(y),D=T.firstWeekContainsDate==null?x:(0,h.default)(T.firstWeekContainsDate);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=C.options&&C.options.weekStartsOn,$=O==null?0:(0,h.default)(O),G=T.weekStartsOn==null?$:(0,h.default)(T.weekStartsOn);if(!(G>=0&&G<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var R=(0,r.default)(p);if(!(0,a.default)(R))throw new RangeError("Invalid time value");var J=(0,u.default)(R),X=(0,s.default)(R,J),B={firstWeekContainsDate:D,weekStartsOn:G,locale:C,_originalDate:R},ha=q.match(M).map(function(P){var Z=P[0];if(Z==="p"||Z==="P"){var oe=o.default[Z];return oe(P,C.formatLong,B)}return P}).join("").match(v).map(function(P){if(P==="''")return"'";var Z=P[0];if(Z==="'")return f(P);var oe=i.default[Z];if(oe)return!T.useAdditionalWeekYearTokens&&(0,c.isProtectedWeekYearToken)(P)&&(0,c.throwProtectedError)(P,b,p),!T.useAdditionalDayOfYearTokens&&(0,c.isProtectedDayOfYearToken)(P)&&(0,c.throwProtectedError)(P,b,p),oe(X,P,C.localize,B);if(Z.match(d))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");return P}).join("");return ha}function f(p){return p.match(m)[1].replace(l,"'")}e.exports=t.default})(Ce,Ce.exports);var ns=Ce.exports,je={exports:{}},Ke={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(i,o,u){var c=r(i,u.timeZone,u.locale);return c.formatToParts?n(c,o):s(c,o)}function n(i,o){for(var u=i.formatToParts(o),c=u.length-1;c>=0;--c)if(u[c].type==="timeZoneName")return u[c].value}function s(i,o){var u=i.format(o).replace(/\u200E/g,""),c=/ [\w-+ ]+$/.exec(u);return c?c[0].substr(1):""}function r(i,o,u){if(u&&!u.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(u?[u.code,"en-US"]:void 0,{timeZone:o,timeZoneName:i})}e.exports=t.default})(Ke,Ke.exports);var rs=Ke.exports,Je={exports:{}},et={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(u,c){var h=o(c);return h.formatToParts?s(h,u):r(h,u)}var n={year:0,month:1,day:2,hour:3,minute:4,second:5};function s(u,c){try{for(var h=u.formatToParts(c),_=[],w=0;w<h.length;w++){var v=n[h[w].type];v>=0&&(_[v]=parseInt(h[w].value,10))}return _}catch(M){if(M instanceof RangeError)return[NaN];throw M}}function r(u,c){var h=u.format(c).replace(/\u200E/g,""),_=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(h);return[_[3],_[1],_[2],_[4],_[5],_[6]]}var i={};function o(u){if(!i[u]){var c=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),h=c==="06/25/2014, 00:00:00"||c==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";i[u]=h?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return i[u]}e.exports=t.default})(et,et.exports);var ss=et.exports,tt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s,r,i,o,u,c){var h=new Date(0);return h.setUTCFullYear(n,s,r),h.setUTCHours(i,o,u,c),h}e.exports=t.default})(tt,tt.exports);var sa=tt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=s(ss),n=s(sa);function s(m){return m&&m.__esModule?m:{default:m}}var r=36e5,i=6e4,o={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function u(m,l,d){var g,f;if(!m||(g=o.timezoneZ.exec(m),g))return 0;var p;if(g=o.timezoneHH.exec(m),g)return p=parseInt(g[1],10),w(p)?-(p*r):NaN;if(g=o.timezoneHHMM.exec(m),g){p=parseInt(g[1],10);var b=parseInt(g[2],10);return w(p,b)?(f=Math.abs(p)*r+b*i,p>0?-f:f):NaN}if(M(m)){l=new Date(l||Date.now());var W=d?l:c(l),q=h(W,m),T=d?q:_(l,q,m);return-T}return NaN}function c(m){return(0,n.default)(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds())}function h(m,l){var d=(0,a.default)(m,l),g=(0,n.default)(d[0],d[1]-1,d[2],d[3]%24,d[4],d[5],0).getTime(),f=m.getTime(),p=f%1e3;return f-=p>=0?p:1e3+p,g-f}function _(m,l,d){var g=m.getTime(),f=g-l,p=h(new Date(f),d);if(l===p)return l;f-=p-l;var b=h(new Date(f),d);return p===b?p:Math.max(p,b)}function w(m,l){return-23<=m&&m<=23&&(l==null||0<=l&&l<=59)}var v={};function M(m){if(v[m])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:m}),v[m]=!0,!0}catch{return!1}}e.exports=t.default})(Je,Je.exports);var ie=Je.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(rs),n=s(ie);function s(v){return v&&v.__esModule?v:{default:v}}var r=60*1e3,i={X:function(v,M,m,l){var d=o(l.timeZone,l._originalDate||v);if(d===0)return"Z";switch(M){case"X":return h(d);case"XXXX":case"XX":return c(d);case"XXXXX":case"XXX":default:return c(d,":")}},x:function(v,M,m,l){var d=o(l.timeZone,l._originalDate||v);switch(M){case"x":return h(d);case"xxxx":case"xx":return c(d);case"xxxxx":case"xxx":default:return c(d,":")}},O:function(v,M,m,l){var d=o(l.timeZone,l._originalDate||v);switch(M){case"O":case"OO":case"OOO":return"GMT"+_(d,":");case"OOOO":default:return"GMT"+c(d,":")}},z:function(v,M,m,l){var d=l._originalDate||v;switch(M){case"z":case"zz":case"zzz":return(0,a.default)("short",d,l);case"zzzz":default:return(0,a.default)("long",d,l)}}};function o(v,M){var m=v?(0,n.default)(v,M,!0)/r:M.getTimezoneOffset();if(Number.isNaN(m))throw new RangeError("Invalid time zone specified: "+v);return m}function u(v,M){for(var m=v<0?"-":"",l=Math.abs(v).toString();l.length<M;)l="0"+l;return m+l}function c(v,M){var m=M||"",l=v>0?"-":"+",d=Math.abs(v),g=u(Math.floor(d/60),2),f=u(Math.floor(d%60),2);return l+g+m+f}function h(v,M){if(v%60===0){var m=v>0?"-":"+";return m+u(Math.abs(v)/60,2)}return c(v,M)}function _(v,M){var m=v>0?"-":"+",l=Math.abs(v),d=Math.floor(l/60),g=l%60;if(g===0)return m+String(d);var f=M;return m+String(d)+f+u(g,2)}var w=i;t.default=w,e.exports=t.default})(je,je.exports);var is=je.exports,at={exports:{}},nt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,n=a;t.default=n,e.exports=t.default})(nt,nt.exports);var ia=nt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var a=i(j),n=i(ra),s=i(ie),r=i(ia);function i(T){return T&&T.__esModule?T:{default:T}}var o=36e5,u=6e4,c=2,h={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:r.default};function _(T,C){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(T===null)return new Date(NaN);var y=C||{},x=y.additionalDigits==null?c:(0,a.default)(y.additionalDigits);if(x!==2&&x!==1&&x!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(T instanceof Date||typeof T=="object"&&Object.prototype.toString.call(T)==="[object Date]")return new Date(T.getTime());if(typeof T=="number"||Object.prototype.toString.call(T)==="[object Number]")return new Date(T);if(!(typeof T=="string"||Object.prototype.toString.call(T)==="[object String]"))return new Date(NaN);var D=w(T),O=v(D.date,x),$=O.year,G=O.restDateString,R=M(G,$);if(isNaN(R))return new Date(NaN);if(R){var J=R.getTime(),X=0,B;if(D.time&&(X=m(D.time),isNaN(X)))return new Date(NaN);if(D.timeZone||y.timeZone){if(B=(0,s.default)(D.timeZone||y.timeZone,new Date(J+X)),isNaN(B))return new Date(NaN)}else B=(0,n.default)(new Date(J+X)),B=(0,n.default)(new Date(J+X+B));return new Date(J+X+B)}else return new Date(NaN)}function w(T){var C={},y=h.dateTimePattern.exec(T),x;if(y?(C.date=y[1],x=y[3]):(y=h.datePattern.exec(T),y?(C.date=y[1],x=y[2]):(C.date=null,x=T)),x){var D=h.timeZone.exec(x);D?(C.time=x.replace(D[1],""),C.timeZone=D[1].trim()):C.time=x}return C}function v(T,C){var y=h.YYY[C],x=h.YYYYY[C],D;if(D=h.YYYY.exec(T)||x.exec(T),D){var O=D[1];return{year:parseInt(O,10),restDateString:T.slice(O.length)}}if(D=h.YY.exec(T)||y.exec(T),D){var $=D[1];return{year:parseInt($,10)*100,restDateString:T.slice($.length)}}return{year:null}}function M(T,C){if(C===null)return null;var y,x,D,O;if(T.length===0)return x=new Date(0),x.setUTCFullYear(C),x;if(y=h.MM.exec(T),y)return x=new Date(0),D=parseInt(y[1],10)-1,p(C,D)?(x.setUTCFullYear(C,D),x):new Date(NaN);if(y=h.DDD.exec(T),y){x=new Date(0);var $=parseInt(y[1],10);return b(C,$)?(x.setUTCFullYear(C,0,$),x):new Date(NaN)}if(y=h.MMDD.exec(T),y){x=new Date(0),D=parseInt(y[1],10)-1;var G=parseInt(y[2],10);return p(C,D,G)?(x.setUTCFullYear(C,D,G),x):new Date(NaN)}if(y=h.Www.exec(T),y)return O=parseInt(y[1],10)-1,W(C,O)?l(C,O):new Date(NaN);if(y=h.WwwD.exec(T),y){O=parseInt(y[1],10)-1;var R=parseInt(y[2],10)-1;return W(C,O,R)?l(C,O,R):new Date(NaN)}return null}function m(T){var C,y,x;if(C=h.HH.exec(T),C)return y=parseFloat(C[1].replace(",",".")),q(y)?y%24*o:NaN;if(C=h.HHMM.exec(T),C)return y=parseInt(C[1],10),x=parseFloat(C[2].replace(",",".")),q(y,x)?y%24*o+x*u:NaN;if(C=h.HHMMSS.exec(T),C){y=parseInt(C[1],10),x=parseInt(C[2],10);var D=parseFloat(C[3].replace(",","."));return q(y,x,D)?y%24*o+x*u+D*1e3:NaN}return null}function l(T,C,y){C=C||0,y=y||0;var x=new Date(0);x.setUTCFullYear(T,0,4);var D=x.getUTCDay()||7,O=C*7+y+1-D;return x.setUTCDate(x.getUTCDate()+O),x}var d=[31,28,31,30,31,30,31,31,30,31,30,31],g=[31,29,31,30,31,30,31,31,30,31,30,31];function f(T){return T%400===0||T%4===0&&T%100!==0}function p(T,C,y){if(C<0||C>11)return!1;if(y!=null){if(y<1)return!1;var x=f(T);if(x&&y>g[C]||!x&&y>d[C])return!1}return!0}function b(T,C){if(C<1)return!1;var y=f(T);return!(y&&C>366||!y&&C>365)}function W(T,C,y){return!(C<0||C>52||y!=null&&(y<0||y>6))}function q(T,C,y){return!(T!=null&&(T<0||T>=25)||C!=null&&(C<0||C>=60)||y!=null&&(y<0||y>=60))}e.exports=t.default})(at,at.exports);var de=at.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(ns),n=r(is),s=r(de);function r(u){return u&&u.__esModule?u:{default:u}}var i=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function o(u,c,h){var _=String(c),w=h||{},v=_.match(i);if(v){var M=(0,s.default)(u,w);_=v.reduce(function(m,l){if(l[0]==="'")return m;var d=m.indexOf(l),g=m[d-1]==="'",f=m.replace(l,"'"+n.default[l[0]](M,l,null,w)+"'");return g?f.substring(0,d-1)+f.substring(d+1):f},_)}return(0,a.default)(u,_,w)}e.exports=t.default})(we,we.exports);var oa=we.exports,rt={exports:{}},st={exports:{}},it={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");s=s||{};for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r]);return n}e.exports=t.default})(it,it.exports);var os=it.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(os);function n(r){return r&&r.__esModule?r:{default:r}}function s(r){return(0,a.default)({},r)}e.exports=t.default})(st,st.exports);var ua=st.exports,ot={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(ie),n=s(de);function s(i){return i&&i.__esModule?i:{default:i}}function r(i,o,u){var c=(0,n.default)(i,u),h=(0,a.default)(o,c,!0),_=new Date(c.getTime()-h),w=new Date(0);return w.setFullYear(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()),w.setHours(_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()),w}e.exports=t.default})(ot,ot.exports);var la=ot.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(ua),n=r(oa),s=r(la);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u,c,h){var _=(0,a.default)(h);return _.timeZone=u,(0,n.default)((0,s.default)(o,u),c,_)}e.exports=t.default})(rt,rt.exports);var us=rt.exports,ut={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(ie);function n(r){return r&&r.__esModule?r:{default:r}}function s(r,i){return-(0,a.default)(r,i)}e.exports=t.default})(ut,ut.exports);var ls=ut.exports,lt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=o(ua),n=o(de),s=o(ia),r=o(ie),i=o(sa);function o(c){return c&&c.__esModule?c:{default:c}}function u(c,h,_){if(typeof c=="string"&&!c.match(s.default)){var w=(0,a.default)(_);return w.timeZone=h,(0,n.default)(c,w)}var v=(0,n.default)(c,_),M=(0,i.default)(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()).getTime(),m=(0,r.default)(h,new Date(M));return new Date(M+m)}e.exports=t.default})(lt,lt.exports);var cs=lt.exports,ca={format:oa,formatInTimeZone:us,getTimezoneOffset:ls,toDate:de,utcToZonedTime:la,zonedTimeToUtc:cs};const da={computed:{channelConfig(){return window.chatwootWebChannel},replyTime(){return window.chatwootWebChannel.replyTime},replyTimeStatus(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_few_hours":return this.$t("REPLY_TIME.IN_A_FEW_HOURS");case"in_a_day":return this.$t("REPLY_TIME.IN_A_DAY");default:return this.$t("REPLY_TIME.IN_A_FEW_HOURS")}},replyWaitMessage(){const{workingHoursEnabled:e}=this.channelConfig;return e?this.isOnline?this.replyTimeStatus:`${this.$t("REPLY_TIME.BACK_IN")} ${this.timeLeftToBackInOnline}`:this.isOnline?this.replyTimeStatus:this.$t("TEAM_AVAILABILITY.OFFLINE")},outOfOfficeMessage(){return this.channelConfig.outOfOfficeMessage},isInBetweenTheWorkingHours(){const{openHour:e,openMinute:t,closeHour:a,closeMinute:n,closedAllDay:s,openAllDay:r}=this.currentDayAvailability;if(r)return!0;if(s)return!1;const{utcOffset:i}=this.channelConfig,o=this.getDateWithOffset(i),u=o.getHours(),c=o.getMinutes(),h=Tt(u,c,e,t),_=Tt(a,n,u,c);return h&&_},currentDayAvailability(){const{utcOffset:e}=this.channelConfig,t=this.getDateWithOffset(e).getDay(),[a={}]=this.channelConfig.workingHours.filter(n=>n.day_of_week===t);return{closedAllDay:a.closed_all_day,openHour:a.open_hour,openMinute:a.open_minutes,closeHour:a.close_hour,closeMinute:a.close_minutes,openAllDay:a.open_all_day}},isInBusinessHours(){const{workingHoursEnabled:e}=this.channelConfig;return e?this.isInBetweenTheWorkingHours:!0}},methods:{getDateWithOffset(e){return ca.utcToZonedTime(new Date().toISOString(),e)}}},fa={methods:{async replaceRoute(e,t={}){if(this.$route.name!==e)return this.$router.replace({name:e,params:t})}}},Wt=()=>({event:"loaded",config:{authToken:window.authToken,channelConfig:window.chatwootWebChannel}}),ds=()=>{const e=document.querySelector(".unread-messages"),t=document.querySelector(".close-unread-wrap"),a=document.querySelector(".open-read-view-wrap");if(!e)return 0;let n=48+e.scrollHeight;return t&&(n+=t.scrollHeight),a&&(n+=a.scrollHeight),n},fs=e=>{const{previous_changes:t}=e;return!t||!Object.keys(t).includes("content_attributes")?!1:Object.keys(t.content_attributes[1]||{}).includes("submitted_values")},gs=e=>e==="auto",hs=e=>e==="dark",ps=()=>{var e;return((e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)??!1},ms=(e,t)=>gs(e)?t:hs(e);function vs(){const e=Ta("appConfig/darkMode"),t=me(ps),a=me(()=>ms(e.value,t.value));return{darkMode:e,prefersDarkMode:a}}const _s={name:"App",components:{Spinner:Ma},mixins:[da,pt,fa],setup(){const{prefersDarkMode:e}=vs();return{prefersDarkMode:e}},data(){return{isMobile:!1,campaignsSnoozedTill:void 0}},computed:{...ct({activeCampaign:"campaign/getActiveCampaign",conversationSize:"conversation/getConversationSize",hideMessageBubble:"appConfig/getHideMessageBubble",isFetchingList:"conversation/getIsFetchingList",isRightAligned:"appConfig/isRightAligned",isWidgetOpen:"appConfig/getIsWidgetOpen",messageCount:"conversation/getMessageCount",unreadMessageCount:"conversation/getUnreadMessageCount",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat",showUnreadMessagesDialog:"appConfig/getShowUnreadMessagesDialog"}),isIFrame(){return A.isIFrame()},isRNWebView(){return ne.isRNWebView()},isRTL(){return this.$root.$i18n.locale?Ga(this.$root.$i18n.locale):!1}},watch:{activeCampaign(){this.setCampaignView()},isRTL:{immediate:!0,handler(e){document.documentElement.dir=e?"rtl":"ltr"}}},mounted(){const{websiteToken:e,locale:t,widgetColor:a}=window.chatwootWebChannel;this.setLocale(t),this.setWidgetColor(a),$t(window.authToken),this.isIFrame?(this.registerListeners(),this.sendLoadedEvent()):(this.fetchOldConversations(),this.fetchAvailableAgents(e),this.setLocale(Aa(window.location.search))),this.isRNWebView&&(this.registerListeners(),this.sendRNWebViewLoadedEvent()),this.$store.dispatch("conversationAttributes/getAttributes"),this.registerUnreadEvents(),this.registerCampaignEvents()},methods:{...ue("appConfig",["setAppConfig","setReferrerHost","setWidgetColor","setBubbleVisibility","setColorScheme"]),...ue("conversation",["fetchOldConversations"]),...ue("campaign",["initCampaigns","executeCampaign","resetCampaign"]),...ue("agent",["fetchAvailableAgents"]),scrollConversationToBottom(){const e=this.$el.querySelector(".conversation-wrap");e.scrollTop=e.scrollHeight},setBubbleLabel(){A.sendMessage({event:"setBubbleLabel",label:this.$t("BUBBLE.LABEL")})},setIframeHeight(e){this.$nextTick(()=>{const t=ds();A.sendMessage({event:"updateIframeHeight",isFixedHeight:e,extraHeight:t})})},setLocale(e){if(!e)return;const{enabledLanguages:t}=window.chatwootWebChannel,a=e.split("_")[0],n=t.some(r=>r.iso_639_1_code===a);t.some(r=>r.iso_639_1_code===e)?this.$root.$i18n.locale=e:n&&(this.$root.$i18n.locale=a)},registerUnreadEvents(){z.on(ea,()=>{const{name:e}=this.$route;(this.isWidgetOpen||!this.isIFrame)&&e==="messages"&&this.$store.dispatch("conversation/setUserLastSeen"),this.setUnreadView()}),z.on(Bn,()=>{this.replaceRoute("messages").then(()=>this.unsetUnreadView())})},registerCampaignEvents(){z.on(zn,()=>{this.shouldShowPreChatForm?this.replaceRoute("prechat-form"):(this.replaceRoute("messages"),z.emit("execute-campaign",{campaignId:this.activeCampaign.id})),this.unsetUnreadView()}),z.on("execute-campaign",e=>{const{customAttributes:t,campaignId:a}=e,{websiteToken:n}=window.chatwootWebChannel;this.executeCampaign({campaignId:a,websiteToken:n,customAttributes:t}),this.replaceRoute("messages")}),z.on("snooze-campaigns",()=>{const e=Sa(new Date,1);this.campaignsSnoozedTill=Number(e)})},setCampaignView(){const{messageCount:e,activeCampaign:t}=this,a=this.campaignsSnoozedTill&&this.campaignsSnoozedTill>Date.now(),n=!yn(t)&&!e&&!a;this.isIFrame&&n&&this.replaceRoute("campaigns").then(()=>{this.setIframeHeight(!0),A.sendMessage({event:"setUnreadMode"})})},setUnreadView(){const{unreadMessageCount:e}=this;this.showUnreadMessagesDialog?this.isIFrame&&e>0&&!this.isWidgetOpen&&(this.replaceRoute("unread-messages").then(()=>{this.setIframeHeight(!0),A.sendMessage({event:"setUnreadMode"})}),this.handleUnreadNotificationDot()):this.handleUnreadNotificationDot()},unsetUnreadView(){this.isIFrame&&(A.sendMessage({event:"resetUnreadMode"}),this.setIframeHeight(!1),this.handleUnreadNotificationDot())},handleUnreadNotificationDot(){const{unreadMessageCount:e}=this;this.isIFrame&&A.sendMessage({event:"handleNotificationDot",unreadMessageCount:e})},createWidgetEvents(e){const{eventName:t}=e;t==="webwidget.triggered"&&["unread-messages","campaigns"].includes(this.$route.name)||this.$store.dispatch("events/create",{name:t})},registerListeners(){const{websiteToken:e}=window.chatwootWebChannel;window.addEventListener("message",t=>{if(!A.isAValidEvent(t))return;const a=A.getMessage(t);if(a.event==="config-set")this.setLocale(a.locale),this.setBubbleLabel(),this.fetchOldConversations().then(()=>this.setUnreadView()),this.fetchAvailableAgents(e),this.setAppConfig(a),this.$store.dispatch("contacts/get"),this.setCampaignReadData(a.campaignsSnoozedTill);else if(a.event==="widget-visible")this.scrollConversationToBottom();else if(a.event==="change-url"){const{referrerURL:n,referrerHost:s}=a;this.initCampaigns({currentURL:n,websiteToken:e,isInBusinessHours:this.isInBusinessHours}),window.referrerURL=n,this.setReferrerHost(s)}else if(a.event==="toggle-close-button")this.isMobile=a.isMobile;else if(a.event==="push-event")this.createWidgetEvents(a);else if(a.event==="set-label")this.$store.dispatch("conversationLabels/create",a.label);else if(a.event==="remove-label")this.$store.dispatch("conversationLabels/destroy",a.label);else if(a.event==="set-user")this.$store.dispatch("contacts/setUser",a);else if(a.event==="set-custom-attributes")this.$store.dispatch("contacts/setCustomAttributes",a.customAttributes);else if(a.event==="delete-custom-attribute")this.$store.dispatch("contacts/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-conversation-custom-attributes")this.$store.dispatch("conversation/setCustomAttributes",a.customAttributes);else if(a.event==="delete-conversation-custom-attribute")this.$store.dispatch("conversation/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-locale")this.setLocale(a.locale),this.setBubbleLabel();else if(a.event==="set-color-scheme")this.setColorScheme(a.darkMode);else if(a.event==="toggle-open"){this.$store.dispatch("appConfig/toggleWidgetOpen",a.isOpen);const n=["home"].includes(this.$route.name)&&a.isOpen&&this.messageCount,s=!a.isOpen&&["unread-messages","campaigns"].includes(this.$route.name);n&&this.replaceRoute("messages"),s&&(this.$store.dispatch("conversation/setUserLastSeen"),this.unsetUnreadView(),this.replaceRoute("home")),a.isOpen||this.resetCampaign()}else a.event===Oa&&this.setBubbleVisibility(a.hideMessageBubble)})},sendLoadedEvent(){A.sendMessage(Wt())},sendRNWebViewLoadedEvent(){ne.sendMessage(Wt())},setCampaignReadData(e){e&&(this.campaignsSnoozedTill=Number(e))}}};function ws(e,t,a,n,s,r){const i=F("Spinner"),o=F("router-view");return!e.conversationSize&&e.isFetchingList?(U(),k("div",{key:0,class:Q(["flex items-center justify-center flex-1 h-full bg-n-background",{dark:n.prefersDarkMode}])},[L(i,{size:""})],2)):(U(),k("div",{key:1,class:Q(["flex flex-col justify-end h-full",{"is-mobile":s.isMobile,"is-widget-right":e.isRightAligned,"is-bubble-hidden":e.hideMessageBubble,"is-flat-design":e.isWidgetStyleFlat,dark:n.prefersDarkMode}])},[L(o)],2))}const Cs=re(_s,[["render",ws]]),ys=()=>{A.sendMessage({event:"playAudio"})},kt=(e,t)=>{const{conversation_id:a}=t,n=e["conversationAttributes/getConversationParams"].id;return n&&a!==n};class _t extends Ba{constructor(a,n){super(a,n);S(this,"onDisconnected",()=>{this.setLastMessageId()});S(this,"onReconnect",()=>{this.syncLatestMessages()});S(this,"setLastMessageId",()=>{this.app.$store.dispatch("conversation/setLastMessageId")});S(this,"syncLatestMessages",()=>{this.app.$store.dispatch("conversation/syncLatestMessages")});S(this,"onStatusChange",a=>{a.status==="resolved"&&this.app.$store.dispatch("campaign/resetCampaign"),this.app.$store.dispatch("conversationAttributes/update",a)});S(this,"onMessageCreated",a=>{kt(this.app.$store.getters,a)||(this.app.$store.dispatch("conversation/addOrUpdateMessage",a).then(()=>z.emit(ea)),A.sendMessage({event:"onEvent",eventIdentifier:Ct,data:a}),a.sender_type==="User"&&ys())});S(this,"onMessageUpdated",a=>{kt(this.app.$store.getters,a)||(fs(a)&&A.sendMessage({event:"onEvent",eventIdentifier:Ct,data:a}),this.app.$store.dispatch("conversation/addOrUpdateMessage",a))});S(this,"onConversationCreated",()=>{this.app.$store.dispatch("conversationAttributes/getAttributes")});S(this,"onPresenceUpdate",a=>{this.app.$store.dispatch("agent/updatePresence",a.users)});S(this,"onContactMerge",a=>{const{pubsub_token:n}=a;_t.refreshConnector(n)});S(this,"onTypingOn",a=>{const n=this.app.$store.getters["conversationAttributes/getConversationParams"].id;a.conversation&&a.conversation.id!==n||a.is_private||(this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"on"}),this.initTimer())});S(this,"onTypingOff",()=>{this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"off"})});S(this,"clearTimer",()=>{this.CancelTyping&&(clearTimeout(this.CancelTyping),this.CancelTyping=null)});S(this,"initTimer",()=>{this.CancelTyping=setTimeout(()=>{this.onTypingOff()},3e4)});this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.status_changed":this.onStatusChange,"conversation.created":this.onConversationCreated,"presence.update":this.onPresenceUpdate,"contact.merged":this.onContactMerge}}}const Ts={data(){return{showBannerMessage:!1,bannerMessage:"",bannerType:"error"}},mounted(){z.on(ka.SHOW_ALERT,({message:e,type:t="error"})=>{this.bannerMessage=e,this.bannerType=t,this.showBannerMessage=!0,setTimeout(()=>{this.showBannerMessage=!1},3e3)})}};function Ms(e,t,a,n,s,r){return s.showBannerMessage?(U(),k("div",{key:0,class:Q(`banner ${s.bannerType}`)},[N("span",null,Ft(s.bannerMessage),1)],2)):H("",!0)}const bs=re(Ts,[["render",Ms],["__scopeId","data-v-604e405a"]]),Rt=5,xs={data(){return{dayNames:[this.$t("DAY_NAMES.SUNDAY"),this.$t("DAY_NAMES.MONDAY"),this.$t("DAY_NAMES.TUESDAY"),this.$t("DAY_NAMES.WEDNESDAY"),this.$t("DAY_NAMES.THURSDAY"),this.$t("DAY_NAMES.FRIDAY"),this.$t("DAY_NAMES.SATURDAY")],timeSlots:[...bt],timeSlot:{}}},computed:{channelConfig(){return window.chatwootWebChannel},workingHours(){return this.channelConfig.workingHours},newDateWithTimeZone(){return ca.utcToZonedTime(new Date,this.timeZoneValue)},presentHour(){return this.newDateWithTimeZone.getHours()},presentMinute(){return this.newDateWithTimeZone.getMinutes()},currentDay(){const t=this.newDateWithTimeZone.getDay(),a=Object.keys(this.dayNames).find(n=>this.dayNames[n]===this.dayNames[t]);return Number(a)},timeZoneValue(){return this.channelConfig.timezone},languageCode(){return window.chatwootWebChannel.locale},currentDayWorkingHours(){return this.workingHours.find(e=>e.day_of_week===this.currentDay)},nextDayWorkingHours(){let e=this.getNextDay(this.currentDay),t=this.getNextWorkingHour(e);for(;!t;)e=this.getNextDay(e),t=this.getNextWorkingHour(e);return t},currentDayTimings(){const{open_hour:e,open_minutes:t,close_hour:a}=this.currentDayWorkingHours??{};return{openHour:e,openMinute:t,closeHour:a}},nextDayTimings(){const{open_hour:e,open_minutes:t}=this.nextDayWorkingHours??{};return{openHour:e,openMinute:t}},dayDiff(){const e=this.nextDayWorkingHours.day_of_week;return e>this.currentDay?e-this.currentDay-1:6-this.currentDay+e},dayNameOfNextWorkingDay(){return this.dayNames[this.nextDayWorkingHours.day_of_week]},hoursAndMinutesBackInOnline(){return this.presentHour>=this.currentDayTimings.closeHour?this.getHoursAndMinutesUntilNextDayOpen(this.nextDayWorkingHours.open_all_day?0:this.nextDayTimings.openHour,this.nextDayTimings.openMinute,this.currentDayTimings.closeHour):this.getHoursAndMinutesUntilNextDayOpen(this.currentDayTimings.openHour,this.currentDayTimings.openMinute,this.currentDayTimings.closeHour)},exactTimeInAmPm(){return`${this.timeSlot.day===this.currentDay?`at ${this.timeSlot.from}`:""}`},hoursAndMinutesLeft(){const{hoursLeft:e,minutesLeft:t}=this.hoursAndMinutesBackInOnline,a=[];if(e>0){const n=t>0?e+1:e,s=he(n,"hour",this.languageCode);a.push(`${s}`)}if(t>0&&e===0){const n=Math.ceil(t/Rt)*Rt,s=he(n,"minutes",this.languageCode);a.push(`${s}`)}return a.join(" ")},hoursAndMinutesToBack(){const{hoursLeft:e,minutesLeft:t}=this.hoursAndMinutesBackInOnline;return e>=3?this.exactTimeInAmPm:e>0||t>0?this.hoursAndMinutesLeft:"in some time"},timeLeftToBackInOnline(){return this.hoursAndMinutesBackInOnline.hoursLeft>=24||this.timeSlot.day!==this.currentDay&&this.dayDiff===0?`${he(this.dayDiff+1,"days",this.languageCode)}`:this.dayDiff>=1&&this.presentHour>=this.currentDayTimings.closeHour?`on ${this.dayNameOfNextWorkingDay}`:this.hoursAndMinutesToBack}},mounted(){this.setTimeSlot()},methods:{getNextDay(e){return(e+1)%7},getNextWorkingHour(e){const t=this.workingHours.find(a=>a.day_of_week===e);return t&&!t.closed_all_day?t:null},getHoursAndMinutesUntilNextDayOpen(e,t,a){a<e&&(e+=24);let n=e*60+t-(this.presentHour*60+this.presentMinute);n=n<0?n+24*60:n;const[s,r]=[Math.floor(n/60),n%60];return{hoursLeft:s,minutesLeft:r}},setTimeSlot(){const e=this.workingHours,t=this.presentHour>=this.currentDayTimings.closeHour?this.nextDayWorkingHours:this.currentDayWorkingHours,a=Mt(e).length?Mt(e):bt;this.timeSlots=a,this.timeSlot=this.timeSlots.find(n=>n.day===t.day_of_week)}}},Ds={name:"HeaderActions",components:{FluentIcon:Yt},mixins:[pt],props:{showPopoutButton:{type:Boolean,default:!1},showEndConversationButton:{type:Boolean,default:!0}},computed:{...ct({conversationAttributes:"conversationAttributes/getConversationParams",canUserEndConversation:"appConfig/getCanUserEndConversation"}),canLeaveConversation(){return[ge.OPEN,ge.SNOOZED,ge.PENDING].includes(this.conversationStatus)},isIframe(){return A.isIFrame()},isRNWebView(){return ne.isRNWebView()},showHeaderActions(){return this.isIframe||this.isRNWebView||this.hasWidgetOptions},conversationStatus(){return this.conversationAttributes.status},hasWidgetOptions(){return this.showPopoutButton||this.conversationStatus==="open"}},methods:{popoutWindow(){this.closeWindow();const{location:{origin:e},chatwootWebChannel:{websiteToken:t},authToken:a}=window;Ua(e,t,this.$root.$i18n.locale,a)},closeWindow(){A.isIFrame()?A.sendMessage({event:"closeWindow"}):ne.isRNWebView&&ne.sendMessage({type:"close-widget"})},resolveConversation(){this.$store.dispatch("conversation/resolveConversation")}}},Es={key:0,class:"actions flex items-center gap-3"},Os=["title"];function Ss(e,t,a,n,s,r){const i=F("FluentIcon");return r.showHeaderActions?(U(),k("div",Es,[r.canLeaveConversation&&e.canUserEndConversation&&e.hasEndConversationEnabled&&a.showEndConversationButton?(U(),k("button",{key:0,class:"button transparent compact",title:e.$t("END_CONVERSATION"),onClick:t[0]||(t[0]=(...o)=>r.resolveConversation&&r.resolveConversation(...o))},[L(i,{icon:"sign-out",size:"22",class:"text-n-slate-12"})],8,Os)):H("",!0),a.showPopoutButton?(U(),k("button",{key:1,class:"button transparent compact new-window--button",onClick:t[1]||(t[1]=(...o)=>r.popoutWindow&&r.popoutWindow(...o))},[L(i,{icon:"open",size:"22",class:"text-n-slate-12"})])):H("",!0),N("button",{class:Q(["button transparent compact close-button",{"rn-close-button":r.isRNWebView}]),onClick:t[2]||(t[2]=(...o)=>r.closeWindow&&r.closeWindow(...o))},[L(i,{icon:"dismiss",size:"24",class:"text-n-slate-12"})],2)])):H("",!0)}const ga=re(Ds,[["render",Ss],["__scopeId","data-v-871c3f8e"]]),As={name:"ChatHeader",components:{FluentIcon:Yt,HeaderActions:ga},mixins:[xs,da,fa],props:{avatarUrl:{type:String,default:""},title:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},availableAgents:{type:Array,default:()=>{}}},computed:{isOnline(){const{workingHoursEnabled:e}=this.channelConfig,t=this.availableAgents.length>0;return e?this.isInBetweenTheWorkingHours:t}},methods:{onBackButtonClick(){this.replaceRoute("home")}}},Us={class:"flex justify-between w-full p-5 bg-n-background gap-2"},Is={class:"flex items-center"},Ps=["src"],Ns={class:"flex flex-col gap-1"},Ws={class:"flex items-center text-base font-medium leading-4 text-n-slate-12"},ks={class:"ltr:mr-1 rtl:ml-1"},Rs={class:"text-xs leading-3 text-n-slate-11"};function Fs(e,t,a,n,s,r){const i=F("FluentIcon"),o=F("HeaderActions"),u=Lt("dompurify-html");return U(),k("header",Us,[N("div",Is,[a.showBackButton?(U(),k("button",{key:0,class:"px-2 ltr:-ml-3 rtl:-mr-3",onClick:t[0]||(t[0]=(...c)=>r.onBackButtonClick&&r.onBackButtonClick(...c))},[L(i,{icon:"chevron-left",size:"24",class:"text-n-slate-12"})])):H("",!0),a.avatarUrl?(U(),k("img",{key:1,class:"w-8 h-8 ltr:mr-3 rtl:ml-3 rounded-full",src:a.avatarUrl,alt:"avatar"},null,8,Ps)):H("",!0),N("div",Ns,[N("div",Ws,[ve(N("span",ks,null,512),[[u,a.title]]),N("div",{class:Q(`h-2 w-2 rounded-full
              ${r.isOnline?"bg-n-teal-10":"hidden"}`)},null,2)]),N("div",Rs,Ft(e.replyWaitMessage),1)])]),L(o,{"show-popout-button":a.showPopoutButton},null,8,["show-popout-button"])])}const Ls=re(As,[["render",Fs]]),Hs={class:"header-expanded pt-6 pb-4 px-5 relative box-border w-full bg-transparent"},Ys=["src"],$s={class:"mt-4 text-2xl mb-1.5 font-medium text-n-slate-12 line-clamp-4"},Bs={class:"text-lg leading-normal text-n-slate-11 [&_a]:underline line-clamp-6"},zs={__name:"ChatHeaderExpanded",props:{avatarUrl:{type:String,default:""},introHeading:{type:String,default:""},introBody:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1}},setup(e){const t=e,{formatMessage:a}=xa(),n=me(()=>[t.avatarUrl?"justify-between":"justify-end"]);return(s,r)=>{const i=Lt("dompurify-html");return U(),k("header",Hs,[N("div",{class:Q(["flex items-start",n.value])},[e.avatarUrl?(U(),k("img",{key:0,class:"h-12 rounded-full",src:e.avatarUrl,alt:"Avatar"},null,8,Ys)):H("",!0),L(ga,{"show-popout-button":e.showPopoutButton,"show-end-conversation-button":!1},null,8,["show-popout-button"])],2),ve(N("h2",$s,null,512),[[i,e.introHeading]]),ve(N("p",Bs,null,512),[[i,va(a)(e.introBody)]])])}}},Vs={components:{Banner:bs,Branding:Xa,ChatHeader:Ls,ChatHeaderExpanded:zs},mixins:[pt],data(){return{showPopoutButton:!1,scrollPosition:0,ticking:!0,disableBranding:window.chatwootWebChannel.disableBranding||!1,requestID:null}},computed:{...ct({appConfig:"appConfig/getAppConfig",availableAgents:"agent/availableAgents"}),portal(){return window.chatwootWebChannel.portal},isHeaderCollapsed(){return this.hasIntroText?!this.isOnHomeView:!0},hasIntroText(){return this.channelConfig.welcomeTitle||this.channelConfig.welcomeTagline},showBackButton(){return["article-viewer","messages","prechat-form"].includes(this.$route.name)},isOnArticleViewer(){return["article-viewer"].includes(this.$route.name)},isOnHomeView(){return["home"].includes(this.$route.name)},opacityClass(){return this.isHeaderCollapsed?{}:this.scrollPosition>30?{"opacity-30":!0}:this.scrollPosition>25?{"opacity-40":!0}:this.scrollPosition>20?{"opacity-60":!0}:this.scrollPosition>15?{"opacity-80":!0}:this.scrollPosition>10?{"opacity-90":!0}:{}}},mounted(){this.$el.addEventListener("scroll",this.updateScrollPosition)},unmounted(){this.$el.removeEventListener("scroll",this.updateScrollPosition),cancelAnimationFrame(this.requestID)},methods:{closeWindow(){A.sendMessage({event:"closeWindow"})},updateScrollPosition(e){this.scrollPosition=e.target.scrollTop,this.ticking||(this.requestID=window.requestAnimationFrame(()=>{this.ticking=!1}),this.ticking=!0)}}},qs={class:"relative flex flex-col h-full"};function Gs(e,t,a,n,s,r){const i=F("ChatHeaderExpanded"),o=F("ChatHeader"),u=F("Banner"),c=F("router-view"),h=F("Branding");return U(),k("div",{class:Q(["w-full h-full bg-n-slate-2 dark:bg-n-solid-1",{"overflow-auto":r.isOnHomeView}]),onKeydown:t[0]||(t[0]=_a((..._)=>r.closeWindow&&r.closeWindow(..._),["esc"]))},[N("div",qs,[N("div",{class:Q({expanded:!r.isHeaderCollapsed,collapsed:r.isHeaderCollapsed,"shadow-[0_10px_15px_-16px_rgba(50,50,93,0.08),0_4px_6px_-8px_rgba(50,50,93,0.04)]":r.isHeaderCollapsed,...r.opacityClass})},[r.isHeaderCollapsed?H("",!0):(U(),fe(i,{key:0,"intro-heading":e.appConfig.welcomeTitle||e.channelConfig.welcomeTitle,"intro-body":e.appConfig.welcomeDescription||e.channelConfig.welcomeTagline,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton},null,8,["intro-heading","intro-body","avatar-url","show-popout-button"])),r.isHeaderCollapsed?(U(),fe(o,{key:1,title:e.channelConfig.websiteName,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton,"available-agents":e.availableAgents,"show-back-button":r.showBackButton},null,8,["title","avatar-url","show-popout-button","available-agents","show-back-button"])):H("",!0)],2),L(u),L(c),r.isOnArticleViewer?H("",!0):(U(),fe(h,{key:0,"disable-branding":s.disableBranding},null,8,["disable-branding"]))])],34)}const Xs=re(Vs,[["render",Gs]]),wt=Ra({history:Fa(),routes:[{path:"/unread-messages",name:"unread-messages",component:()=>ee(()=>import("./UnreadMessages-CpSK-ZtX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))},{path:"/campaigns",name:"campaigns",component:()=>ee(()=>import("./Campaigns-Cjte5tqm.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))},{path:"/",component:Xs,children:[{path:"",name:"home",component:()=>ee(()=>import("./Home-UbDOeT7l.js"),__vite__mapDeps([21,1,2,3,22,13,14,9,10,17,7,8,15,16,18,6,19,5]))},{path:"/prechat-form",name:"prechat-form",component:()=>ee(()=>import("./PreChatForm-D0HURtNj.js"),__vite__mapDeps([23,24,2,1,3,22,17,14,7,8,18,25,5,6,13,15,16,19,26]))},{path:"/messages",name:"messages",component:()=>ee(()=>import("./Messages-CHCOblUO.js"),__vite__mapDeps([27,1,2,3,22,24,5,6,28,17,14,18,8,7,29,10,30,31,13,32,9,16,15,19,33]))},{path:"/article",name:"article-viewer",component:()=>ee(()=>import("./ArticleViewer-B5YAQXKX.js"),__vite__mapDeps([34,35,2,1,3]))}]}]});wt.beforeEach(async(e,t,a)=>{await ce.dispatch("appConfig/setRouteTransitionState",!0),a()});wt.afterEach(()=>{ce.dispatch("appConfig/setRouteTransitionState",!1)});const Zs=ba({legacy:!1,locale:"en",messages:qa}),K=wa(Cs);K.use(Zs);K.use(ce);K.use(wt);K.use(Da,Za);K.directive("on-clickaway",Qa);K.use(za,Va({rules:{startsWithPlus:({value:e})=>Ha(e),isValidPhoneNumber:({value:e})=>La(e)}}));window.onload=()=>{window.WOOT_WIDGET=K.mount("#app"),window.actionCable=new _t(window.WOOT_WIDGET,window.chatwootPubsubToken)};export{E as A,A as I,zn as O,Bn as a,da as b,pt as c,Vn as d,yn as i,xs as n,fa as r,ci as s,vs as u};
//# sourceMappingURL=widget-CCp9dnZb.js.map
